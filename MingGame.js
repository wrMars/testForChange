!function(t,e,h){h.un,h.uns;var _=h.static,w=h.class,I=h.getset,u=(h.__newvec,xml.ActEffsVO,xml.ActFortuneDayVO,xml.ActStandardCfgRankVO,xml.ActStandardCfgSkinVO,xml.ActVO,com.sdk.AiWeiYouSDK,laya.ui.AutoBitmap),l=(xml.BannerGiftVO,com.managers.BaseModule),g=(xml.BattleInfoVO,xml.BattleRewardVO,xml.BattlefieldAssistVO,xml.BattlefieldExpVO,xml.BattlefieldMonsterVO,xml.BattlefieldRulesVO,xml.BattlefieldScoreVO,xml.BattlefieldSkillVO,xml.BeastsGoalSkillVO,xml.BeastsMainVO,xml.BeastsQualityVO,xml.BeastsStarNeedVO,xml.BeastsTeamVO,com.scene.data.BinaryMath),b=com.scene.effect.BitmapClip,y=laya.ui.Box,S=(xml.BroadcastVO,laya.utils.Browser),f=(xml.BuffVO,laya.ui.Button),a=com.net.ByteArray,c=(xml.ChargeBackVO,xml.ChatKeyWordVO,laya.ui.CheckBox,com.utils.CheckPoint),d=(xml.CityAmethystVO,xml.CityCrystalVO,xml.CityLvVO,xml.CityMissionVO,xml.CityMonsterVO,xml.CitySearchPayVO,xml.CityShopItemVO,xml.CityVO,laya.utils.ClassUtils),r=com.scene.data.ClipVO,i=(xml.CollectDropTypeVO,xml.CollectSpiritVO,xml.CollectVO,laya.filters.ColorFilter),p=(laya.ui.ComboBox,com.ui.CommonBar),k=com.utils.CommonUtils,m=laya.ui.Component,v=(xml.ComposeSubVO,xml.ComposeTypeVO,com.net.Connection),x=(xml.CrossGuideVO,xml.CrossShopVO,xml.CrossTowerBossVO,xml.CrossTowerModVO,xml.CrossTowerRuleVO,xml.DailyRechargeItemVO,com.utils.DateUtil),C=(xml.DeepSeaBoxVO,laya.ui.Dialog),P=laya.utils.Dictionary,T=com.managers.Dispatcher,A=(xml.DisplaySoulVO,xml.DreamCopyOpenVO,xml.DreamSoulVO,laya.utils.Ease),E=(xml.EffectScaleVO,modules.EnterCollectView),R=com.constant.EquipAttrConst,s=(xml.EquipPurifyMsgVO,xml.EquipPurifyVO,com.utils.ErrorAlert),O=com.utils.ErrorPanel,L=(xml.ErrorVO,xml.EternalSkyBarrierVO,xml.EternalSkyVO),n=(laya.events.Event,laya.events.EventDispatcher),o=(xml.ExerBiographyCardVO,xml.ExerBiographyCopyBaseVO,xml.ExerBiographyCopyEnterVO,xml.ExerBiographyFiveStarSkillVO,xml.ExerBiographyLottoVO,xml.ExerBiographySkillItemVO,xml.ExerGuideVO,xml.FaerieFlowerLanguageVO,xml.FaeriePetalStepVO),D=(xml.FaeriePetalVO,xml.FamilyBossVO,xml.FamilyBuildLvVO,xml.FamilyBuildVO,xml.FamilyCopyVO,xml.FamilyMissionVO,xml.FamilyShopVO,xml.FamilySkillLvVO,xml.FamilySkillVO,xml.FamilyVO,xml.FashionItemVO,xml.FashionVO,modules.fcm.FcmIdentifyView),N=com.utils.FcmUtil,V=(xml.FightActionVO,xml.FightEffectVO,xml.FightSoulVO,xml.FightVO,com.ui.FontLabel),B=(xml.ForCheckVO,com.utils.FormulaCountUtil),M=com.scene.manager.FrameAparter,F=com.scene.data.FrameVO,U=(xml.FriendAchievementGroupVO,xml.FriendAchievementTypeVO,xml.FriendAchievementVO,xml.FriendBaseVO,xml.FriendBoxVO,xml.FriendFavorVO,xml.FriendGiftTypeVO,com.globals.GameColor),G=com.globals.GameParam,H=com.globals.GameStyle,W=(xml.GetWayGoodsVO,xml.GetWayTypeVO,xml.GiftVO,com.globals.GlobalAttr),q=com.globals.GlobalEquip,Y=laya.filters.GlowFilter,X=(xml.GodEquipStoneDisaPriceVO,xml.GodEquipStoneVO,xml.GodEquipVO,xml.GodHoodForbiddenVO,xml.GodHoodStoryVO,xml.GoodsShowFlashVO,xml.GoodsUseVO,laya.display.Graphics),K=laya.html.dom.HTMLDivElement,j=(laya.html.dom.HTMLElement,laya.html.utils.HTMLParse),Q=laya.utils.Handler,z=com.utils.Hierarchy2D,$=laya.utils.HitArea,Z=(xml.HoodGetVO,com.utils.HtmlUtil),J=laya.net.HttpRequest,tt=(xml.HuntGirlVO,com.globals.IconConst),et=(xml.IconTimeVO,xml.IconVO,laya.ui.Image),it=com.ui.ImageBar,st=(laya.display.Input,com.globals.ItemIdConstant),nt=laya.utils.JsonTool,ot=com.keyboard.KeyUtil,at=(laya.events.Keyboard,xml.KindItemVO,xml.KindVO,xml.KnighthoodConditionVO,xml.KnighthoodLevelVO,xml.KnighthoodVO,laya.ui.Label),lt=com.layers.LayerManager,rt=com.utils.LayoutUtil,ht=(xml.LetterVO,xml.LevelGiftVO,laya.ui.List),ut=laya.net.Loader,ct=laya.net.LocalStorage,dt=(modules.log.LogConst,com.utils.LogError),pt=modules.log.LogManager,mt=com.utils.LoginDebug,ft=com.utils.LongClickUtil,_t=com.managers.LoopManager,gt=(xml.LoveCopyEvaluateConfVO,xml.LoveCopyRankRewardVO,xml.LoveCopyRankScoreVO,com.scene.astar.MCAstar),yt=(com.scene.data.MacroPathVO,com.managers.MainCommand,com.globals.MainData),vt=(xml.MainInfoVO,com.scene.data.MapDataVO,com.scene.data.MapDecoder),It=(com.scene.data.MapElementType,com.scene.data.MapElementVO,com.scene.astar.MapGrid),wt=com.scene.data.MapTransferVO,bt=(xml.MarryBaseVO,xml.MarryExtraVO,xml.MarryTokenVO,com.loaders.MassLoader),St=(xml.MeltVO,xml.MeridianBaseVO,xml.MeridianNeedVO,xml.MeridianPointVO,xml.MeridianTypeVO,com.net.Message,xml.MissionVO,com.managers.ModuleCommand),xt=(xml.MonsterVO,com.shape.MyShape),Ct=(xml.MysteryBoxVO,xml.NobleVO,laya.display.Node,com.scene.astar.Node,com.scene.manager.NpcConst,xml.NpcVO,com.scene.manager.OnlyIDCreater),Pt=(xml.OrasTypeLvVO,xml.OrasTypeVO,xml.OrasVO,xml.OutTypeVO,xml.PackOpenVO,laya.ui.Panel),Tt=(xml.PearlLevelVO,xml.PearlMissionVO,xml.PearlSkillVO,xml.PearlVO,xml.PetBookVO,xml.PetChangeVO,xml.PetExpBoxStepVO,xml.PetSkillVO,xml.PetSoulExpVO,xml.PetSportGoodsByPlatformVO,xml.PetSportsInfoVO,xml.PetSportsShopVO,xml.PlaysBeachBossBaseVO,xml.PlaysBeachBossRewardVO,xml.PlaysBeachBossSkillVO,xml.PlaysBeachBossStepVO,xml.PlaysGuideTypeVO,laya.maths.Point),kt=laya.utils.Pool,At=(com.globals.PowerConst,laya.ui.ProgressBar),Et=com.net.ProtoManager,Rt=(xml.ProtoMemberVO,xml.ProtoVO,com.utils.Pt),Ot=com.utils.PtUtil,Lt=(xml.PureSpiritVO,xml.PurifyPropPowerVO,com.sdk.QQTxSDK,com.sdk.QQwdzsand),Dt=(laya.ui.RadioGroup,xml.RankCfgVO,xml.RankVO,laya.maths.Rectangle),Nt=com.utils.RedPointUtil,Vt=(xml.RefineSoulEquationVO,xml.RefineSoulGoalVO,xml.RefineSoulIncidentVO,xml.RefineSoulItemVO,xml.RefineSoulLvVO,xml.RefineSoulMissionVO,xml.RefineSoulShopVO,xml.RefineSoulStoneMixVO,xml.RefineSoulStoneVO,xml.RefineSoulStoveVO,xml.RegrowChangeVO,xml.RegrowGoodsItemVO,xml.RegrowLvVO,xml.RegrowVO,laya.renders.Render),Bt=(xml.RoleCityVO,xml.RoleOpenVO,xml.RoleSetSelfBubbleVO,xml.RoleSetSelfFrameVO,xml.RpMaskMainVO,xml.RpMaskModVO,xml.RpmBagChbVO,xml.RuneCoreVO,xml.RunePartVO,xml.RuneStoneVO,xml.RuneVO,com.sdk.SDKUtil),Mt=com.scene.SceneEngine,Ft=com.globals.ScoreConst,Ut=com.utils.ScreenUtil,Gt=(com.sdk.SdkConst,xml.ShareGameVO,xml.SkillBookComposeVO,xml.SkillBookTipVO,xml.SkillBookVO,xml.SkillBuffVO,xml.SkillStepVO,xml.SkillVO,ui.SmoothBar),Ht=(xml.SnatchBaseVO,xml.SnatchChooseListVO,xml.SnatchPlunderRewardsVO,com.net.SocketCommand,xml.SoulPackOpenVO,xml.SoulQualityVO,xml.SoulRecastVO,xml.SoulResolveVO,laya.media.SoundManager),Wt=(xml.SpcBuyVO,xml.SpiritExpVO,xml.SpiritLevelAttrVO,xml.SpiritLevelCostVO,xml.SpiritPackOpenVO,xml.SpiritPosNameVO,xml.SplitVO,laya.display.Sprite),qt=(xml.SpsoulBeadVO,xml.SpsoulGoalVO,xml.SpsoulMainVO,xml.SpsoulNeedVO,xml.SpsoulPolyItemVO,xml.SpsoulStepLvVO,xml.SpsoulStepPetLvVO,laya.display.Stage,laya.utils.Stat),Yt=(xml.StoryVO,xml.StrangeFireBaseInfoVO,xml.StrangeFireCopyBarrierVO,xml.StrangeFireCopyVO,xml.StrangeFireQualityVO,xml.StrangeFireRefineCostVO,xml.StrangeFireRefineTargetVO),Xt=(xml.StrangeFireRefineVO,xml.StrangeFireTargetVO,xml.StrangeFireVO,com.utils.StringFormater),Kt=laya.utils.StringTool,jt=(xml.SubViewVO,laya.system.System,laya.ui.Tab,xml.TalimanAttrVO,xml.TalimanCopyBarrierVO,xml.TalimanCopyVO,xml.TalimanGemDisaPriceVO,xml.TalimanGemVO,xml.TalimanMainVO,xml.TalimanVO,xml.TarVO,laya.display.Text),Qt=(laya.ui.TextArea,com.utils.TextFormat),zt=laya.ui.TextInput,$t=laya.resource.Texture,Zt=modules.theme.ThemeLoading,Jt=(xml.TitleVO,com.utils.TopTip),te=com.ui.TowerList,ee=(xml.TowerMonsterVO,xml.TowerSkillVO),ie=(xml.TreasureListVO,xml.TreasureMapVO,laya.utils.Tween),se=com.managers.UILoaderManager,ne=(xml.UnitScaleVO,xml.UserBackVO,com.ui.VectorList),oe=laya.ui.View,ae=(xml.VipVO,com.sdk.WXXYX_SDK,xml.WanbaErrVO,xml.WanbaVipGiftVO,laya.webgl.resource.WebGLImage),le=ui.modules.theme.WelcomeViewUI,re=(xml.WelfareRecoverVO,com.managers.WindowManager),he=(xml.WingStarVO,xml.WingVO,xml.WorldChatLimitVO,com.scene.astar.WorldMapGrid),ue=xml.XmlVO;h.interface("com.ui.IViewUpdate"),h.interface("com.ui.ILayeredControl"),h.interface("modules.activity.IActPanel"),h.interface("modules.activity.IActivityView");var ce=function(){function s(){}return w(s,"com.broadcast.ErrorCode"),s.getError=function(t,e){if(null==s.errors&&(s.errors=Ra.startEncode("errorCode.xml","id")),1==t&&e)return e;var i=s.errors[t];return null!=i?i.con:"错误号:"+t},s.addTip=function(t,e){0<t?Jt.addTip(s.getError(t,e)):console.log("后端错误号："+t)},s.errors=null,s}(),de=(function(){function t(){}w(t,"com.globals.FilterConst"),_(t,["blackFilter",function(){return this.blackFilter=[new Y("#000000",2)]}])}(),function(){function o(){}return w(o,"com.globals.GameConfig"),o.parseFile=function(t){var e,i=new a;if(i.endian="bigEndian",i.writeArrayBuffer(t),!i)return dt.send("data.lib","数据为空"),!1;try{i.uncompress()}catch(t){return dt.send("data.lib","解压失败"),!1}o.xmlDic=new Object,o.allMCM=new Object;try{for(;0!=i.bytesAvailable;){e=i.readUTF();var s=i.readInt(),n=new a;if(s>i.bytesAvailable)return!1;i.readBytes(n,0,s),".mcm"==e.substr(-4)?o.allMCM[e]=n:o.xmlDic[e]=n}}catch(t){return dt.send("data.lib","有可能的错误配置："+e),!1}return ut.clearRes("com/data.lib",!0),Ce.parse()},o.getFile=function(t){return o.xmlDic[t]},o.getMCM=function(){return o.allMCM},o.deleteFile=function(t){null!=o.xmlDic[t]&&delete o.xmlDic[t]},o.deleteMCM=function(){o.allMCM=null},o.GOODSCONVERSION_XML="packGoodsConversion.xml",o.xmlDic=null,o.allMCM=null,o}()),pe=function(){function u(){}return w(u,"com.globals.GlobalData"),I(1,u,"roleID",function(){return null!=u.user&&null!=u.user.attr?u.user.attr.role_id:0}),I(1,u,"curTitleParnerID",function(){var t;for(var e in u.user.pals)if(0<(t=u.user.pals[e]).ext.title)return t.pal_id;return 0}),I(1,u,"curTitleID",function(){var t;for(var e in u.user.pals)if(0<(t=u.user.pals[e]).ext.title)return t.ext.title;return 0}),I(1,u,"sex",function(){return u.user.ext.sex}),I(1,u,"mainPalID",function(){return u.user.main_pal_id}),I(1,u,"lastName",function(){for(var t=u.user.attr.role_name.length,e=0;e<t;e++)if("-"==u.user.attr.role_name[e])return u.user.attr.role_name.substr(e+1-t);return""}),I(1,u,"roleName",function(){return null!=u.user&&null!=u.user.attr?u.user.attr.role_name:""}),I(1,u,"firstName",function(){for(var t=u.user.attr.role_name.length,e=0;e<t;e++)if("-"==u.user.attr.role_name[e])return u.user.attr.role_name.substr(0,e);return""}),I(1,u,"myLevel",function(){return u.user&&u.user.attr?u.user.attr.level:0}),I(1,u,"familyId",function(){return u.user&&u.user.attr?u.user.attr.family_id:0}),I(1,u,"myRegrow",function(){return u.user.attr.regrow}),I(1,u,"myEquipLevel",function(){return 0<u.user.attr.regrow?100+10*u.user.attr.regrow:100<u.user.attr.level?100:u.user.attr.level}),I(1,u,"pals",function(){return u.user.pals}),I(1,u,"totalPower",function(){var t=0;for(var e in u.user.pals)t+=u.user.pals[e].ext.power;return t}),I(1,u,"isVertical",function(){return 1.5<lt.stageHeight/lt.stageWidth}),I(1,u,"silver",function(){return u.user.attr.silver}),I(1,u,"gold",function(){return u.user.attr.gold}),u.updateParnerTitle=function(t,e){var i;for(var s in u.user.attr.title_type_id=e,u.user.pals)(i=u.user.pals[s]).pal_id==t?i.ext.title=e:i.ext.title=0},u.getBeautyByPalID=function(t){var e=u.getPal(t);return null==e?0:e.base.beauty},u.getBeautyByIndex=function(t){var e=u.getPalByIndex(t);return null==e?0:e.base.beauty},u.isMyPal=function(t){return 100*Math.floor(t/100)==u.user.role_id},u.getRoleIdByPalId=function(t){return t-t%10},u.updateRegrowLV=function(t){u.user.attr.regrow=t},u.updatePower=function(t){var e;for(var i in u.user.pals)if((e=u.user.pals[i]).pal_id==t.pal_id)return e.ext.power=t.power,e.ext.power_infos=t.power_infos,1;return 2},u.updatePowerInfo=function(t,e){var i;for(var s in u.user.pals)if((i=u.user.pals[s]).pal_id==t)return void(i.ext.power_infos=e)},u.getTypePower=function(t,e){var i;for(var s in u.user.pals)if((i=u.user.pals[s]).pal_id==t)for(var n=0;n<i.ext.power_infos.length;n++){var o=i.ext.power_infos[n];if(o.id==e)return o.val}return 0},u.getTypePowerByIndex=function(t,e){var i=u.user.pals[t];if(null!=i)for(var s=0;s<i.ext.power_infos.length;s++){var n=i.ext.power_infos[s];if(n.id==e)return n.val}return 0},u.getTypePowerByData=function(t,e){if(null!=t)for(var i=0;i<t.ext.power_infos.length;i++){var s=t.ext.power_infos[i];if(s.id==e)return s.val}return 0},u.getPalSkillByIndex=function(t){var e=u.user.pals[t];return null!=e?e.skills:null},u.updatePal=function(t){for(var e=0;e<u.pals.length;e++){if(u.pals[e].pal_id==t.pal_id)return void(u.pals[e]=t)}u.pals.push(t)},u.getPalByIndex=function(t){return u.pals&&u.pals.length>t?u.pals[t]:null},u.getPalIndexByID=function(t){if(u.pals)for(var e=0;e<u.pals.length;e++)if(t==u.pals[e].pal_id)return e;return-1},u.getPalById=function(t){if(u.pals){var e;for(var i in u.pals)if((e=u.pals[i]).pal_id==t)return e;return null}return null},u.getPal=function(t){var e;if(u.pals)for(var i in u.pals)if((e=u.pals[i]).base.role_id==t)return e;return null},u.getPalByCate=function(t){var e;if(u.pals)for(var i in u.pals)if((e=u.pals[i]).ext.category==t)return e;return null},u.getCate=function(t){switch(t){case 1:return"狂战";case 2:return"飞羽";case 3:return"舞天";case 4:return"碧落";default:return null}},u.updateActorEquip=function(t,e,i){var s=u.getPal(t);s.ext.skin=e;var n,o,a=0;for(var l in i){o=i[l],a=s.equip.length;for(var r=!1,h=0;h<a;h++)if(n=s.equip[h],o.pos==n.pos){r=!0,s.equip[h]=o;break}r||s.equip.push(o)}},u.checkLevel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=u.user.attr.regrow,s=u.user.attr.level;return t<=i&&e<=s},u.checkMoney=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i=u.user.attr.regrow,s=u.user.attr.silver;return t<=i&&e<=s},u.checkHasOpenCa=function(t){for(var e in u.pals)if(u.pals[e].ext.category==t)return!0;return!1},u.setScore=function(t,e){if(null==u._roleScores){u._roleScores=new Object;var i,s=u.user.attr.role_scores;for(var n in s)i=s[n],u._roleScores[i.id]=i.val}u._roleScores[t]=e},u.getRoleCity=function(){return"0"==u.user.ext.city?"未开启":u.user.ext.city},u.getScore=function(t){if(null==u._roleScores){u._roleScores=new Object;var e,i=u.user.attr.role_scores;for(var s in i)e=i[s],u._roleScores[e.id]=e.val}var n;return 0<=(n=u._roleScores[t])?n:0},u.isMyPet=function(t){return 100*Math.floor(t/100)==u.user.role_id},u.reorderPal=function(t){var e,i=[];for(var s in t)i[(e=t[s]).id-1]=u.getPal(e.val);u.user.pals=i},u.getRoleBlueVipInfo=function(){return u._blueInfoObj||(u._blueInfoObj=u.parseBlueVipInfo()),u._blueInfoObj},u.updateRoleBlueVipInfo=function(t){u.user.attr.blue_vip=t,u._blueInfoObj=u.parseBlueVipInfo()},u.parseBlueVipInfo=function(){var t=u.user.attr.blue_vip;if(t){var e=t.split("#");return e&&0<e.length?{is_blue_vip:"true"==e[0],is_blue_year_vip:"true"==e[1],is_super_blue_vip:"true"==e[2],blue_vip_level:e[3]}:{}}return{}},u.defName=null,u.defSex=0,u.fullVersion="",u.user=null,u._roleScores=null,u.qqBannerOpen=!1,u._blueInfoObj=null,u}(),me=function(){function t(){}return w(t,"com.managers.LinkManager"),t.linkTo=function(t,e){switch(t){case 10001:T.dispatch("OPEN_MELTVIEW");break;case 10002:T.dispatch("OPEN_CATEGORY_PANEL");break;case 10201:null!=e?T.dispatch("OPEN_VIP_PANEL",e):T.dispatch("OPEN_VIP_PANEL");break;case 10202:T.dispatch("OPEN_VIP_GUIDE_PANEL");break;case 10600:T.dispatch("OPEN_CUSTOM_ENTER_PANEL");break;case 10604:ua.isMainMap()?0<pe.myRegrow?T.dispatch("TEAM_COPY_JOIN",e):Jt.addTip("1转之后才可参与经脉副本"):Jt.addTip("您正在副本中，无法进行跳转!");break;case 10605:0<pe.myRegrow?T.dispatch("OPEN_COPYSEL_VIEW",10801):Jt.addTip("1转之后才可参与经脉副本");break;case 16006:0<pe.myRegrow?ul.ins.toRoleTeamCreateAndSet(e):Jt.addTip("1转之后才可参与经脉副本");break;case 10608:ua.isMainMap()?Ms.isOpen()?T.dispatch("LOVE_COPY_JOIN_TEAM",e):Jt.addTip(Ms.getLimitGrowLvl()+"转之后才可参与"+Os.loveCopyVO.copyName):Jt.addTip("您正在副本中，无法进行跳转!");break;case 10609:Ms.isOpen()?al.ins.createTeam():Jt.addTip(Ms.getLimitGrowLvl()+"转之后才可参与"+Os.loveCopyVO.copyName);break;case 10610:T.dispatch("STRANGEFIRE_COPY_PANEL");break;case 10611:T.dispatch("TALIMAN_COPY_PANEL");break;case 10612:T.dispatch("ZHUXIANROAD_COPY_PANEL");break;case 10607:T.dispatch("OPEN_COPY_ANCIENT_EXOTIC");break;case 10101:T.dispatch("SHOP_DEBUG_OPEN_PANEL");break;case 10102:T.dispatch("SHOP_OPEN_PANEL");break;case 10103:T.dispatch("SHOP_OPEN_PANEL",0);break;case 10104:T.dispatch("SHOP_OPEN_PANEL",1);break;case 10106:T.dispatch("SHOP_OPEN_PANEL",2);break;case 10107:T.dispatch("SHOP_OPEN_PANEL",4);break;case 10108:T.dispatch("SHOP_OPEN_PANEL",5);break;case 10105:T.dispatch("SHOP_OPEN_PANEL",3);break;case 10301:T.dispatch("OPEN_BOSS_PANEL",0);break;case 10302:T.dispatch("OPEN_BOSS_PANEL",1);break;case 10303:T.dispatch("OPEN_BOSS_PANEL",2);break;case 10305:T.dispatch("OPEN_BOSS_PANEL",3);break;case 10304:T.dispatch("OPEN_CALL_BOSS_PANEL",e);break;case 11602:if(e)mr.ins().toRoleRandomGift(e.id,0);else{var i=xo.getGoodsByTypeID(13000017);i?mr.ins().toRoleRandomGift(i.id,0):Jt.addTip("背包中没有神宠宝盒哦")}break;case 10401:T.dispatch("MAIL_OPEN_PANEL");break;case 10402:T.dispatch("MAIL_OPEN_DETAIL_PANEL");break;case 10501:T.dispatch("ATHLETICS_OPEN_PANEL",0);break;case 10502:T.dispatch("ATHLETICS_OPEN_PANEL",1);break;case 10506:T.dispatch("OPEN_SOLORANK_SETTLEMENT_PANEL",1);break;case 10503:T.dispatch("ATHLETICS_OPEN_PANEL",2);break;case 10504:T.dispatch("ATHLETICS_OPEN_PANEL",3);break;case 10505:T.dispatch("OPEN_PETSPORTS_RW_VIEW");break;case 10601:T.dispatch("OPEN_COPY_PANEL",0);break;case 10602:T.dispatch("OPEN_COPY_PANEL",1);break;case 10603:T.dispatch("OPEN_COPY_PANEL",2);break;case 10701:T.dispatch("OPEN_RANK_PANEL",0,0);break;case 10702:T.dispatch("OPEN_RANK_PANEL",0,1);break;case 10703:T.dispatch("OPEN_RANK_PANEL",0,2);break;case 10704:T.dispatch("OPEN_RANK_PANEL",0,3);break;case 10705:T.dispatch("OPEN_RANK_PANEL",0,4);break;case 10707:T.dispatch("OPEN_RANK_PANEL",0,9);break;case 10709:T.dispatch("OPEN_RANK_PANEL",0,10);break;case 10800:T.dispatch("EXERCISE_OPEN_PANEL",0);break;case 10801:T.dispatch("EXERCISE_OPEN_PANEL",1);break;case 10802:T.dispatch("EXERCISE_OPEN_PANEL",4);break;case 10809:T.dispatch("EXERCISE_OPEN_PANEL",9);break;case 10812:Sl.ins.openPanelByLink(t,e);break;case 10806:T.dispatch("EXERCISE_OPEN_PANEL",3);break;case 10807:T.dispatch("EXERCISE_OPEN_PANEL",3,1);break;case 10803:T.dispatch("EXERCISE_OPEN_PANEL",4),T.dispatch("CHANGE_RUNE_VIEW_TAB",1);break;case 10815:if(e){var s=e.typeid;nn.curBeastsAnimalID=parseInt(ur.getItem(s).img)}T.dispatch("EXERCISE_OPEN_PANEL",8,0);break;case 10811:if(e){var n=e.typeid;nn.curBeastsAnimalID=parseInt(ur.getItem(n).img)}T.dispatch("EXERCISE_OPEN_PANEL",8,1);break;case 10805:T.dispatch("EXERCISE_OPEN_RUAN_RESOLVE_PANEL");break;case 10820:T.dispatch("OPEN_RUNE_BUY_ELITE");break;case 10804:T.dispatch("EXERCISE_BIOGRAPHY_COPY_BOUNTY_ENTER",e);break;case 10808:if(e){var o=e.typeid;_n.curGodEquipID=o}T.dispatch("EXERCISE_OPEN_PANEL",2);break;case 1080:T.dispatch("EXERCISE_OPEN_PANEL",7);break;case 10813:T.dispatch("EXERCISE_OPEN_PANEL",10);break;case 10814:T.dispatch("EXERCISE_OPEN_PANEL",10,1);break;case 10810:T.dispatch("BEASTS_OPEN_TEAM_PANEL",1);break;case 10816:T.dispatch("EXERCISE_OPEN_PANEL",11);break;case 10817:T.dispatch("EXERCISE_OPEN_PANEL",6);break;case 10818:T.dispatch("EXERCISE_OPEN_PANEL",12);break;case 10819:T.dispatch("EXERCISE_OPEN_PANEL",12,2);break;case 10901:T.dispatch("OPEN_REFINE_PANEL",0,!0);break;case 10902:T.dispatch("OPEN_REFINE_PANEL",1,!0);break;case 10903:T.dispatch("OPEN_REFINE_PANEL",2,!0);break;case 10904:T.dispatch("OPEN_REFINE_PANEL",3,!0);break;case 11101:T.dispatch("OPEN_MELTVIEW");break;case 11102:T.dispatch("OPEN_PACKVIEW",2);break;case 11201:var a=pe.getPalByIndex(oa.curActorIndex);T.dispatch("OPEN_SPECIAL_EQUIP",a.pal_id,11);break;case 11202:var l=pe.getPalByIndex(oa.curActorIndex);T.dispatch("OPEN_SPECIAL_EQUIP",l.pal_id,12);break;case 11203:var r=pe.getPalByIndex(oa.curActorIndex);T.dispatch("OPEN_SPECIAL_EQUIP",r.pal_id,13);break;case 11204:var h=pe.getPalByIndex(oa.curActorIndex);T.dispatch("OPEN_SPECIAL_EQUIP",h.pal_id,14);break;case 11205:T.dispatch("OPEN_ROLE_PANEL",0),T.dispatch("GET_ORAN_EQUIP_PURIFY_ATTRS");break;case 11206:T.dispatch("OPEN_ROLE_PANEL",1);break;case 11207:T.dispatch("OPEN_ROLE_PANEL",2);break;case 11208:T.dispatch("OPEN_ROLE_PANEL",3);break;case 11209:var u=pe.getPalByIndex(oa.curActorIndex);T.dispatch("OPEN_BUILDSOUL_VIEW",u.pal_id);break;case 11301:T.dispatch("FAMILY_OPEN");break;case 11302:T.dispatch("FAMILY_MGR_OPEN",1);break;case 11303:T.dispatch("FAMILY_DONATE");break;case 11304:T.dispatch("FAMILY_SKILL_OPEN");break;case 11305:T.dispatch("FAMILY_BATTLE_OPEN_SIGN_UP_BROADCAST");break;case 11306:T.dispatch("FAMILY_BATTLE_OPEN_WITNESS_BROADCAST");break;case 11307:T.dispatch("FAMILY_FIGHT_AGAIN_OPEN");break;case 11433:T.dispatch("WELFARE_OPEN_PANEL");break;case 11430:T.dispatch("WELFARE_OPEN_PANEL",4001);break;case 11420:T.dispatch("SET_QZOON_BG");break;case 11422:T.dispatch("WELFARE_HONNOR_VIP");break;case 11423:if(pe.myLevel<37)return void Jt.addTip("等级不足37级");var c=ao.getIconStateDicValus(115);if(c){var d=c.end_time;0<d&&0<d-ya.serverTime?T.dispatch("SRTBEAST_LIMIT"):Jt.addTip("不在活动时间内")}else Jt.addTip("不在活动时间内");break;case 11426:var p=ao.getIconStateDicValus(118);if(p){var m=p.end_time;0<m&&0<m-ya.serverTime?(T.dispatch("BEASTS_BUY",118),T.dispatch("ON_ACT_BEAST_BUY")):Jt.addTip("不在活动时间内")}else Jt.addTip("不在活动时间内");break;case 11424:T.dispatch("SUIT_SHOW");break;case 11438:T.dispatch("DAYLIMIT_BUY");break;case 11439:S.window.location.href="http://imgcache.qq.com/gc/gamecenterV2/dist/index/jumpLGame/index.html?gameId=2922&src=316&adtag=dianjingshequ";break;case 11440:T.dispatch("PF_SDK_QQ_DJ_REWARD_VIEW");break;case 11441:T.dispatch("ACT_YUNYOU");break;case 11528:T.dispatch("ACT_YUNYOUDFS");break;case 11442:pt.send(10071,0,"狐仙秘宝-打开活动"),T.dispatch("ACT_HUXIAN",124),T.dispatch("ON_ACT_HUXIANVO_UPDATE");break;case 11443:T.dispatch("ACT_JUBAO");break;case 11451:T.dispatch("BARGAIN",128),T.dispatch("ACT_BARGAIN");break;case 11453:T.dispatch("OPEN_BANNER_QQ");break;case 11444:if(pe.myLevel<60)return void Jt.addTip("等级不足60级");var f=ao.getIconStateDicValus(126);if(f){var _=f.end_time;0<_&&0<_-ya.serverTime?T.dispatch("ACT_CUSTOM_STAND"):Jt.addTip("不在活动时间内")}else Jt.addTip("不在活动时间内");break;case 11445:S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"}));break;case 11446:T.dispatch("ACT_GOTO_DOUYUZHIBO");break;case 11421:T.dispatch("OPEN_ROLE_LEVEL_TIME_LIMIT_GIFT");break;case 11431:pt.send(15,1,"主界面月卡入口"),T.dispatch("WELFARE_OPEN_PANEL",4002);break;case 11435:T.dispatch("WELFARE_GIFT_OPEN_PANEL");break;case 11436:T.dispatch("WELFARE_OPEN_PANEL",5001);break;case 11518:T.dispatch("WELFARE_OPEN_PANEL",4011);break;case 11437:T.dispatch("ACT_USER_BACK_VIEW",119);break;case 11e3:T.dispatch("OPEN_SKILL_PANEL",0);break;case 11001:T.dispatch("OPEN_SKILL_PANEL",1);break;case 11002:T.dispatch("OPEN_SKILL_PANEL",2);break;case 11400:T.dispatch("HUNTTREASURE_OPEN_PANEL",0);break;case 11520:T.dispatch("HUNTTREASURE_OPEN_PANEL",1);break;case 11401:T.dispatch("ORANGEEQIUP_OPEN_PANEL",3);break;case 1142010:8<=pe.myRegrow?T.dispatch("ORANGEEQIUP_OPEN_PANEL",4):Jt.addTip("该功能8转开启");break;case 11402:T.dispatch("HUNTTREASURE_OPEN_PANEL",2);break;case 11412:T.dispatch("HUNTTREASURE_OPEN_OTHER_PANEL",e);break;case 11403:Jt.addTip("敬请期待");break;case 11425:Jt.addTip("请留意活动详情");break;case 11460:T.dispatch("OPEN_ACT_SPC_PANEL",310);break;case 11455:Bt.sdk.openUrl("https://h5.qzone.qq.com/h5plus/pyramid/home?_proxy&_wv=14311&group_id=1106331565");break;case 11509:Bt.sdk.openUrl("https://mobile.qzone.qq.com/l?g=5055");break;case 11510:Bt.sdk.openUrl("https://mobile.qzone.qq.com/l?g=5207");break;case 11427:Bt.sdk.openUrl("https://game.qzone.qq.com/?actid=14");break;case 11428:Zl.ins().openTecentVideoGuidePanel();break;case 11429:break;case 11461:T.dispatch("OPEN_ACT_SPC_PANEL",311);break;case 11462:T.dispatch("OPEN_ACT_SPC_PANEL",312);break;case 11463:T.dispatch("OPEN_ACT_SPC_PANEL",313);break;case 11465:T.dispatch("OPEN_ACT_SPC_PANEL",315);break;case 11466:T.dispatch("OPEN_ACT_SPC_PANEL",316);break;case 11467:T.dispatch("OPEN_ACT_SPC_PANEL",317);break;case 11468:T.dispatch("OPEN_ACT_SPC_PANEL",318);break;case 11469:T.dispatch("OPEN_ACT_SPC_PANEL",319);break;case 11470:T.dispatch("OPEN_ACT_SPC_PANEL",320);break;case 11471:T.dispatch("OPEN_ACT_SPC_PANEL",321);break;case 11472:T.dispatch("OPEN_ACT_SPC_PANEL",322);break;case 11473:T.dispatch("OPEN_ACT_SPC_PANEL",323);break;case 11474:T.dispatch("OPEN_ACT_SPC_PANEL",324);break;case 11475:T.dispatch("OPEN_ACT_SPC_PANEL",325);break;case 11476:T.dispatch("OPEN_ACT_SPC_PANEL",326);break;case 11477:T.dispatch("OPEN_ACT_SPC_PANEL",327);break;case 11478:T.dispatch("OPEN_ACT_SPC_PANEL",328);break;case 11479:T.dispatch("OPEN_ACT_SPC_PANEL",329);break;case 11480:T.dispatch("OPEN_ACT_SPC_PANEL",330);break;case 11481:T.dispatch("OPEN_ACT_SPC_PANEL",331);break;case 11482:T.dispatch("OPEN_ACT_SPC_PANEL",332);break;case 11483:T.dispatch("OPEN_ACT_SPC_PANEL",333);break;case 11484:T.dispatch("OPEN_ACT_SPC_PANEL",334);break;case 11485:T.dispatch("OPEN_ACT_SPC_PANEL",335);break;case 11486:T.dispatch("OPEN_ACT_SPC_PANEL",336);break;case 11487:T.dispatch("OPEN_ACT_SPC_PANEL",337);break;case 11488:T.dispatch("OPEN_ACT_SPC_PANEL",338);break;case 11489:T.dispatch("OPEN_ACT_SPC_PANEL",339);break;case 11490:T.dispatch("OPEN_ACT_SPC_PANEL",340);break;case 11491:T.dispatch("OPEN_ACT_SPC_PANEL",341);break;case 11492:T.dispatch("OPEN_ACT_SPC_PANEL",342);break;case 11493:T.dispatch("OPEN_ACT_SPC_PANEL",343);break;case 11494:T.dispatch("OPEN_ACT_SPC_PANEL",344);break;case 11495:T.dispatch("OPEN_ACT_SPC_PANEL",345);break;case 11496:T.dispatch("OPEN_ACT_SPC_PANEL",346);break;case 11497:T.dispatch("OPEN_ACT_SPC_PANEL",347);break;case 114e3:T.dispatch("OPEN_ACT_SPC_PANEL",348);break;case 114001:T.dispatch("OPEN_ACT_SPC_PANEL",349);break;case 114002:T.dispatch("OPEN_ACT_SPC_PANEL",350);break;case 114003:T.dispatch("OPEN_ACT_SPC_PANEL",351);break;case 114004:T.dispatch("OPEN_ACT_SPC_PANEL",352);break;case 114005:T.dispatch("OPEN_ACT_SPC_PANEL",353);break;case 114006:T.dispatch("OPEN_ACT_SPC_PANEL",354);break;case 114007:T.dispatch("OPEN_ACT_SPC_PANEL",355);break;case 114008:T.dispatch("OPEN_ACT_SPC_PANEL",356);break;case 114009:T.dispatch("OPEN_ACT_SPC_PANEL",357);break;case 114010:T.dispatch("OPEN_ACT_SPC_PANEL",358);break;case 114011:T.dispatch("OPEN_ACT_SPC_PANEL",359);break;case 114012:T.dispatch("OPEN_ACT_SPC_PANEL",360);break;case 114013:T.dispatch("OPEN_ACT_SPC_PANEL",361);break;case 114014:T.dispatch("OPEN_ACT_SPC_PANEL",362);break;case 114015:T.dispatch("OPEN_ACT_SPC_PANEL",363);break;case 114016:T.dispatch("OPEN_ACT_SPC_PANEL",364);break;case 114017:T.dispatch("OPEN_ACT_SPC_PANEL",365);break;case 114018:T.dispatch("OPEN_ACT_SPC_PANEL",366);break;case 114020:T.dispatch("OPEN_ACT_SPC_PANEL",368);break;case 114021:T.dispatch("OPEN_ACT_SPC_PANEL",369);break;case 114022:T.dispatch("OPEN_ACT_SPC_PANEL",370);break;case 114023:T.dispatch("OPEN_ACT_SPC_PANEL",371);break;case 114025:T.dispatch("OPEN_ACT_SPC_PANEL",372);break;case 114027:T.dispatch("OPEN_ACT_SPC_PANEL",373);break;case 11508:pt.send(10070,0,"幸运日-打开活动");var g=Da.ins().getCurrentIconId();T.dispatch("OPEN_ACT_SPC_PANEL",g,4014);break;case 11519:g=Da.ins().luckyUgroup;T.dispatch("OPEN_ACT_SPC_PANEL",g,1808);break;case 11464:T.dispatch("OPEN_ACT_SPC_PANEL",314);break;case 11404:pt.send(25,1,"贵族入口"),T.dispatch("OPEN_NOBLE_PANEL");break;case 114026:T.dispatch("WELFARE_OPEN_PANEL",4029);break;case 11405:T.dispatch("DAILY_RECHARGE_OPEN_PANEL");break;case 11434:pt.send(16,1,"主界面首充入口"),T.dispatch("OPEN_FIRST_CHARGE");break;case 11448:T.dispatch("OPEN_NEW_FIR_CHARGE");break;case 11447:T.dispatch("OPEN_FIRST_DAY_CHARGE");break;case 11454:T.dispatch("OPEN_CHARGE",e);break;case 11410:T.dispatch("ASK_FOR_ATTENTION");break;case 11414:T.dispatch("ICON_CLICK_COLLOECT_OR_ATTENTION");break;case 11413:T.dispatch("CHECK_FREE_RENAME_CAN_GET");break;case 11406:T.dispatch("OPEN_SHARE_GAME");break;case 11407:T.dispatch("OPEN_COLLECT_GAME");break;case 11408:di.getCommonConditions()&&0<di.getCommonConditions().length?T.dispatch("OPEN_ACT_SPC_PANEL",310,4010):Jt.addTip("活动未开始！");break;case 11411:var y=Ge.getInvestInfo();1==y.state||0==y.state&&y.attend_end_ts>ya.serverTime&&y.attend_start_ts<ya.serverTime?T.dispatch("OPEN_ACT_SPC_PANEL",310,4012):Jt.addTip("活动未开始！");break;case 11409:ss.getLoginGiftOpen()?T.dispatch("OPEN_LOGIN_GIFT_VIEW"):Jt.addTip("您的奖励已经领取完毕，请您留意。");break;case 11501:T.dispatch("FRIEND_OPEN_PANEL");break;case 11901:T.dispatch("FRIEND_OPEN_PANEL",2);break;case 11502:T.dispatch("FRIEND_OPEN_ADD_PANEL");break;case 11503:T.dispatch("FRIEND_REQUEST_ADD",e);break;case 11504:T.dispatch("FRIEND_ACH_OPEN_PANEL");break;case 11505:e instanceof Array?T.dispatch("OPEN_FRIEND_SEND_PANEL",e[0],e[1]):e&&"p_goods"==e.className?T.dispatch("OPEN_FRIEND_SEND_PANEL",null,e.typeid):T.dispatch("OPEN_FRIEND_SEND_PANEL");break;case 11506:e instanceof Array?T.dispatch("OPEN_FRIEND_SEND_PANEL",e[0],e[1],1):e&&"p_goods"==e.className?T.dispatch("OPEN_FRIEND_SEND_PANEL",null,e.typeid,1):T.dispatch("OPEN_FRIEND_SEND_PANEL",null,0,1);break;case 11507:e instanceof Array?T.dispatch("OPEN_FRIEND_SEND_PANEL",e[0],e[1],2):e&&"p_goods"==e.className?T.dispatch("OPEN_FRIEND_SEND_PANEL",null,e.typeid,2):T.dispatch("OPEN_FRIEND_SEND_PANEL",null,0,2);break;case 11514:e instanceof Array?T.dispatch("OPEN_FRIEND_SEND_PANEL",e[0],e[1],3):e&&"p_goods"==e.className?T.dispatch("OPEN_FRIEND_SEND_PANEL",null,e.typeid,3):T.dispatch("OPEN_FRIEND_SEND_PANEL",null,0,3);break;case 11601:T.dispatch("PET_OPEN_PANEL",0);break;case 11701:T.dispatch("OPEN_PLAYS_PANEL",0,0);break;case 11705:T.dispatch("OPEN_PLAYS_PANEL",0,1);break;case 11707:T.dispatch("OPEN_PLAYS_PANEL",4,1);break;case 11702:T.dispatch("OPEN_PLAYS_PANEL",1);break;case 11703:T.dispatch("OPEN_PLAYS_PANEL",2);break;case 11704:T.dispatch("PLAYS_CITY_CRYSTAL_FAMILY_HELP_PANEL",e);break;case 11706:T.dispatch("PLAYS_CITY_OPEN_MY_CRYSTAL_PANEL",e);break;case 11708:T.dispatch("PLAYS_CITY_CAVE_BLESS",1);break;case 11801:T.dispatch("GODHOOD_OPEN_PANEL");break;case 11802:T.dispatch("GODHOOD_OPEN_PANEL",1);break;case 11803:T.dispatch("GODHOOD_OPEN_PANEL",2);break;case 11804:T.dispatch("GODHOOD_OPEN_PANEL",3);break;case 11210:T.dispatch("OPEN_ROLE_CHANGE_NAME",e);break;case 11211:T.dispatch("OPEN_DOMINAPANEL",0);break;case 11212:T.dispatch("OPEN_DOMINAPANEL",1);break;case 11213:T.dispatch("OPEN_DOMINAPANEL",2);break;case 11214:T.dispatch("OPEN_TITLE_PANEL");break;case 11415:T.dispatch("FASHION_OPEN",0);break;case 11416:T.dispatch("FASHION_OPEN",1);break;case 11417:T.dispatch("FASHION_OPEN",2);break;case 11419:T.dispatch("OPEN_FASHION_TAR");break;case 11418:T.dispatch("OPEN_WING_EQUIP_PANEL");break;case 10706:T.dispatch("RANK_STANDARD_RECHARGE_OPEN",e||-1);break;case 10708:T.dispatch("RANK_CUMULATIVE_CONSUME_OPEN",e||-1);break;case 10710:T.dispatch("RANK_COST_OPEN",e||-1);break;case 11603:T.dispatch("OPEN_PLAYS_PANEL",3);break;case 11613:T.dispatch("OPEN_PLAYS_PANEL",8);break;case 11615:T.dispatch("OPEN_PLAYS_PANEL",7);break;case 11616:T.dispatch("OPEN_PLAYS_PANEL",6);break;case 11614:T.dispatch("PET_OPEN_BOOKVIEW");break;case 11604:T.dispatch("OPEN_PLAYS_PANEL",5);break;case 11605:mr.ins().openPetGuideGetView();break;case 11606:T.dispatch("PET_OPEN_TRAIN_PANEL");break;case 11607:T.dispatch("PET_OPEN_PANEL",1);break;case 11608:T.dispatch("PET_OPEN_PANEL",2);break;case 11609:T.dispatch("PET_OPEN_SOUL_HUNT_PANEL");break;case 11610:T.dispatch("PET_OPEN_SOUL_DECOMPOSE_PAENL");break;case 11611:T.dispatch("PET_OPEN_FUSE_PANEL");break;case 11612:T.dispatch("PET_OPEN_DEVOTE_PANEL");break;case 11310:0<pe.user.attr.family_id?T.dispatch("FAMILY_FIGHT_OPEN"):Jt.addTip("当前没有仙盟");break;case 11308:pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?3==Nn.getNowBattleState()?T.dispatch("OPEN_PETEMBATTLE_LOGVIEW"):T.dispatch("OPEN_PETEMBATTLE_SIGNVIEW"):Jt.addTip("您还没有仙盟哦"):Jt.addTip("仙宠盟战"+Ln.FAMILY_LEVEL+"级开启");break;case 11311:T.dispatch("FAMILY_SHOP_OPEN",0);break;case 11309:T.dispatch("FAMILY_SHOP_OPEN",1);break;case 11498:T.dispatch("OPEN_ACTPREW_VIEW");break;case 11499:var v=e.split(",");He.getInstance().openPanelByUgroup(parseInt(v[0]),parseInt(v[1]));break;case 11500:Bt.isEyou()&&Bt.openFaceBook();break;case 12001:T.dispatch("OPEN_BATTLE_FIELD_SHURA_PANEL");break;case 12002:T.dispatch("OPEN_LAST_TIME_RANK_PANEL");break;case 12003:T.dispatch("OPEN_BATTLE_FIELD_SKILL_PANEL");break;case 12005:T.dispatch("OPEN_BATTLE_FIELD_RULE_PANEL");break;case 12004:T.dispatch("OPEN_BATTLE_FIELD_READY_PANEL");break;case 13001:ua.isCross()?T.dispatch("CROSS_SERVER_OPEN_TOWER_PANEL"):dl.ins().openEnterPanel();break;case 13002:T.dispatch("CROSS_SERVER_OPEN_SETTING_PANEL");break;case 13003:pl.ins.openShopPanel();break;case 13004:T.dispatch("CROSS_SERVER_OPEN_STORE_EXCHANGE_PANEL");break;case 13005:fl.ins.openStorePanel();break;case 13006:dl.ins().openEnterPanel();break;case 13007:xr.ins().openCrossRankPanel();break;case 13008:T.dispatch("CROSS_SERVER_OPEN_MINI_MAP_PANEL");break;case 14001:T.dispatch("OPEN_REFINE_SOUL_PALACE_VIEW");break;case 14002:T.dispatch("OPEN_REFINE_SOUL_PALACE_MIX_VIEW");break;case 11449:T.dispatch("ACT_BAGUAFURNACE");break;case 11530:T.dispatch("OPEN_ACT_DIAL_PANEL");break;case 11450:E.show();break;case 11511:Bt.sdk.openUrl("https://mobile.qzone.qq.com/l?g=7579");break;case 11512:T.dispatch("OPEN_BLUE_DIAMOND_PANEL");break;case 11513:T.dispatch("OPEN_QQ_YXDT_PRIVILEGE_VIEW");break;case 11517:pt.send(10123,0,"狐仙免单商店-打开商店"),T.dispatch("OPEN_FREE_MALL_PANEL");break;case 11525:T.dispatch("OPEN_MORE_ICONS_PANEL");break;case 114024:T.dispatch("OPEN_ACT_SPC_PANEL",1003);break;case 11526:T.dispatch("SHOW_ITEM_TIPS");break;case 11527:T.dispatch("OPEN_FOOT_PRINT_PANEL");break;case 11452:T.dispatch("BARGAIN_OPEN_FRIEND_CUT_PANEL",e);break;case 11529:T.dispatch("OPEN_FCM_IDENTIFYVIEW");break;default:var I=t%1e5,w=Math.floor(t/1e5);He.getInstance().openPanelByActID(I,w)}},t}(),fe=function(){function o(){}return w(o,"com.scene.effect.GameShake"),o.shakeScene=function(){o.shakeIndex=0,_t.addToFrame(o,o.shake)},o.shake=function(){if(o.shakeIndex<o.SHAKE_POS.length){var t=o.SHAKE_POS[o.shakeIndex];_e.shakeY=t,o.shakeIndex++}else _t.removeFromFrame(o,o.shake),_e.shakeY=0},o.sharkSp=function(t){o.sharkViewArr=o.sharkViewArr||[],o.sharkIndexArr=o.sharkIndexArr||[];var e=o.sharkViewArr.indexOf(t);0<=e&&10<o.sharkIndexArr[e]?o.sharkIndexArr[e]=0:(o.sharkViewArr.push(t),o.sharkIndexArr.push(0)),_t.addToFrame(o,o.shakeLoop)},o.shakeLoop=function(){for(var t,e=NaN,i=o.sharkViewArr.length-1;0<=i;i--)e=o.sharkIndexArr[i],t=o.sharkViewArr[i],e<o.SHAKE_POS.length?(t.y=o.SHAKE_POS[e],o.sharkIndexArr[i]+=1):(o.sharkViewArr.splice(i,1),o.sharkIndexArr.splice(i,1),t.y=0);0==o.sharkViewArr.length&&_t.removeFromFrame(o,o.shakeLoop)},o.getMonsterDiePoint=function(t,e){if(null==e)return o.dieNull;var i=Math.atan2(e.y-t.y,e.x-t.x),s=160*Math.sin(i),n=160*Math.cos(i);t.x,t.y;return new Tt(-n,-s)},o.shakeMonsterDie=function(t,e){null==o.monsterDie[t.onlyKey]&&(t.gotoStop(1),o.monsterDie[t.onlyKey]={t:t,d:e,f:0,sx:t.x,sy:t.y},_t.addToFrame(o,o.monsterDieMove))},o.clearDieMove=function(t){delete o.monsterDie[t]},o.monsterDieMove=function(){if(!((o.now=S.now())-o.lastTime<33))for(var t=0 in o.lastTime=o.now,o.monsterDie){var e=o.monsterDie[t];if(!(e.f<o.dieMoveX.length))return delete o.monsterDie[e.t.onlyKey],ih.show("unit/effect/monster_dead",e.t.x,e.t.y,_e.top),void(e.t.alpha=0);e.t.x=Math.round(e.sx+e.d.x*o.dieMoveX[e.f]),e.t.y=Math.round(e.sy+e.d.y*o.dieMoveX[e.f]);var i=.5+(o.dieMoveX.length-e.f)/o.dieMoveX.length*.5;e.t.alpha=i,e.f++}},o.shakeIndex=0,o.sharkViewArr=null,o.sharkIndexArr=null,o.dieDis=160,o.lastTime=0,o.now=NaN,_(o,["SHAKE_POS",function(){return this.SHAKE_POS=[17,17,-25,-25,12,12,-13,-13,8,8,-9,-9,5,5,-6,-6,1,1,0]},"dieNull",function(){return this.dieNull=new Tt(0,0)},"monsterDie",function(){return this.monsterDie=new Object},"dieMoveX",function(){return this.dieMoveX=[.4,.7,.82,.9,.99,1.01,1.01,1,1,1]}]),o}(),_e=function(){function f(){}return w(f,"com.scene.GameScene"),I(1,f,"scale",function(){return f._scale},function(t){f._scale=t,null!=f.scene&&f.scene.scale(t,t)}),I(1,f,"x",function(){return f.scene.x},function(t){f.scene.x=t}),I(1,f,"y",function(){return f.scene.y},function(t){f.scene.y=t}),f.init=function(){(f.scene=new Wt).name="GameScene",f.map=new nh,f.low=new Wt,f.sha=new Wt,f.mid=new Wt,f.top=new Wt,f.low.name="low",f.sha.name="sha",f.mid.name="mid",f.top.name="top",f.scene.addChild(f.map),f.scene.addChild(f.low),f.scene.addChild(f.sha),f.scene.addChild(f.mid),f.scene.addChild(f.top),f.scene.on("mouseup",f,f.onClickMap),f.scale=lt.gameSceneScale,f.scene.scale(f._scale,f._scale),lt.sceneLayer.addChild(f.scene),(f.unitName=new Wt).cacheAs="normal",f.unitNameBloodBar=new Wt,f.unitNameText=new Wt,f.unitNameTitle=new Wt,f.unitName.addChild(f.unitNameText),f.unitName.addChild(f.unitNameTitle),f.unitName.addChild(f.unitNameBloodBar),lt.sceneLayer.addChild(f.unitName),f.masker=new Wt,_t.addToTimer(f,f.resetDepth),_t.centerCamera=Q.create(f,f.centerCamera),T.register("resize",f,f.onResize)},f.onResize=function(){com.scene.GameScene.scale=lt.gameSceneScale,f.scene.scale(f._scale,f._scale)},f.onMouseWheel=function(t){f._scale+=.02*(0<t.delta?1:-1),f.scene.scale(f._scale,f._scale)},f.showMask=function(){null!=f.masker&&(f.masker.graphics.clear(),f.masker.alpha=1,f.masker.graphics.drawRect(0,0,lt.stageWidth,lt.stageHeight,"#000000"),lt.sceneLayer.addChild(f.masker),_t.addToFrame(f,f.changeMaskAlpha))},f.changeMaskAlpha=function(){f.masker.alpha-=.03,f.masker.alpha<=0&&(_t.removeFromFrame(f,f.changeMaskAlpha),f.masker.removeSelf())},f.onClickMap=function(t){var e=!1;if(Xs.checkMapCanClick()?e=!0:gr.ins().checkBeachMapCanWalk()?e=!0:1!=G.isDev||ua.isJoyStickMap()||(e=!0),e&&f.canClickMap)for(var i=Ot.xyToPt(f.mid.mouseX,f.mid.mouseY),s=WS.all,n=0;n<s.length;n++)s[n].runToPoint(i,n);f.canClickMap||(f.canClickMap=!0)},f.reset=function(t){null==f.scene&&f.init(),f.scene.size(ca.mapWidth,ca.mapHeight),f.map.reset(t),f.low.x=f.sha.x=f.mid.x=f.top.x=ca.mapData.offsetX,f.low.y=f.sha.y=f.mid.y=f.top.y=ca.mapData.offsetY,f.mapGrid=new It(ca.mapData),f.astar=new gt(f.mapGrid)},f.drawTile=function(){var t;f.low.graphics.clear();var e,i,s=0;f.low.alpha=.3;for(var n=ca.mapData,o=0;o<n.tiles.length;o++){t=n.tiles[o];for(var a=0;a<t.length;a++)s=n.tiles[o][a],e=g.isAlpha(s)?"#336699":"#ffff00",0<s&&(i=Ot.txtzToPoint(o,a),f.low.graphics.drawPoly(i.x,i.y,[-44,0,0,-22,44,0,0,22],e,"#000000"))}for(var l=Math.ceil(ca.mapData.width/501),r=Math.ceil(ca.mapData.height/290),h=NaN,u=NaN,c=NaN,d=NaN,p=0;p<l;p++)c=h=501*p-ca.mapData.offsetX,d=(u=-ca.mapData.offsetY)+ca.mapData.height,f.low.graphics.drawLine(h,u,c,d,"#ffff00",2);for(var m=0;m<r;m++)h=-ca.mapData.offsetX,u=290*m-ca.mapData.offsetY,c=h+ca.mapData.width,d=u,f.low.graphics.drawLine(h,u,c,d,"#ffff00",2)},f.addUnit=function(t){f.mid.addChild(t),Se.addUnit(t),t instanceof com.scene.unit.MyPal==0&&0==f.checkInScreen(t)&&(t.visible=!1)},f.removeUnit=function(t){var e=Se.removeUnit(t);null!=e&&e.remove()},f.setFamilyBattleMainRole=function(t){f.familyBattleMainRole=t},f.setFamilyBattleCenter=function(t){f.familyBattleCenterBoolean=t},f.getMainPal=function(){return null!=WS.main?WS.main:null!=f.familyBattleMainRole?f.familyBattleMainRole:null},f.centerCamera=function(){if(null!=(f.mainRole=f.getMainPal())){f.roleX=f.mainRole.x*f._scale,f.roleY=f.mainRole.y*f._scale,f.roleX+=ca.mapData.offsetX*f._scale,f.roleY+=ca.mapData.offsetY*f._scale;var t=lt.stageWidth,e=lt.stageHeight,i=t>>1,s=e>>1,n=ca.mapWidth*f._scale,o=ca.mapHeight*f._scale;i<=f.roleX&&f.roleX<=n-i?f.scene.x=i-f.roleX:f.roleX<i?f.scene.x=0:n-i<f.roleX&&(f.scene.x=t-n),s+f.cameraOffset<=f.roleY&&f.roleY<=o-s+f.cameraOffset?f.scene.y=s-f.roleY+f.cameraOffset:f.roleY<s+f.cameraOffset?f.scene.y=0:o-s+f.cameraOffset<f.roleY&&(f.scene.y=e-o),lt.stageWidth>n&&0!=f.scene.x&&(f.scene.x=0),lt.stageHeight>o&&0!=f.scene.y&&(f.scene.y=0),f.familyBattleCenterBoolean?(f.scene.x=-n/2+i/2,f.scene.y=-o/2+s):(f.scene.x+=f.shakeX,f.scene.y+=f.shakeY),f.unitName.x=f.scene.x,f.unitName.y=f.scene.y}},f.resetDepth=function(){if(!((f.now=S.now())-f.lastTime<500||(f.lastTime=f.now,null==f.mid||f.mid.numChildren<2))){f.sortArr.length=f.mid._childs.length;for(var t=0;t<f.mid._childs.length;t++)f.sortArr[t]=f.mid._childs[t];f.sortArr.sort(f.sort);for(var e=0;e<f.sortArr.length;e++){var i=f.sortArr[e];i instanceof com.scene.unit.Pal?(i.inScreen=f.checkInScreen(i),i.resetVisible()):i instanceof com.scene.unit.Pet?(i.inScreen=f.checkInScreen(i),i.resetVisible()):i instanceof com.scene.unit.MapTransfer?i.visible=!0:i.visible=f.checkInScreen(i),f.mid.getChildIndex(i)!=e&&f.mid.setChildIndex(i,e)}}},f.checkInScreen=function(t){if(!(t instanceof com.scene.unit.NPC)&&(ua.isBattlefieldOfShuraMap()||ua.isCross()))return t.inMapSlice;var e=-com.scene.GameScene.x/f._scale-f.mid.x-200,i=-com.scene.GameScene.y/f._scale-f.mid.y-100,s=e+lt.stageWidth/f._scale+200,n=i+lt.stageHeight/f._scale+200;return!(t.x<e)&&(!(t.x>s)&&(!(t.y<i)&&!(t.y>n)))},f.sort=function(t,e){return t.y<e.y?-1:t.y>e.y?1:0},f.getMouseUnit=function(){for(var t=h.stage.mouseX,e=h.stage.mouseY,i=NaN,s=NaN,n=f.mid._childs.length-1;0<=n;n--){var o=f.mid.getChildAt(n);if(o instanceof com.scene.unit.base.SceneUnit&&(f.zoroPoint.x=f.zoroPoint.y=0,i=(f.zoroPoint=o.localToGlobal(f.zoroPoint)).x,s=f.zoroPoint.y,t-50<=i&&i<=t+50&&e<=s&&s<=e+120))return o}return null},f.clear=function(){if(f.isGaming=!1,null!=f.scene){for(Se.clear();0<f.low.numChildren;)f.low.removeChildAt(0);for(;0<f.sha.numChildren;)f.sha.removeChildAt(0);for(;0<f.mid.numChildren;)f.mid.removeChildAt(0);for(;0<f.top.numChildren;)f.top.removeChildAt(0);for(;0<f.unitNameBloodBar.numChildren;)f.unitNameBloodBar.removeChildAt(0);for(;0<f.unitNameText.numChildren;)f.unitNameText.removeChildAt(0);for(;0<f.unitNameTitle.numChildren;)f.unitNameTitle.removeChildAt(0)}},f.isGaming=!1,f.allReady=!1,f.scene=null,f.unitName=null,f.unitNameBloodBar=null,f.unitNameText=null,f.unitNameTitle=null,f.masker=null,f.map=null,f.low=null,f.sha=null,f.mid=null,f.top=null,f.mapGrid=null,f.astar=null,f._scale=1,f.canClickMap=!0,f.cameraOffset=40,f.roleX=0,f.roleY=0,f.shakeX=0,f.shakeY=0,f.mainRole=null,f.familyBattleMainRole=null,f.familyBattleCenterBoolean=!1,f.sortArr=[],f.lastTime=0,f.now=NaN,_(f,["zoroPoint",function(){return this.zoroPoint=new Tt}]),f}(),ge=function(){function t(){this.barBg=null,this.bar=null,this.barBgGra=null,this.barGra=null,this.nameTxt=null,this.bloodText=null,this.percent=NaN,this._rarity=!1,this.barBg=new Wt,this.bar=new Wt,this.barBgGra=new u,this.barGra=new u,this.barBg.graphics=this.barBgGra,this.bar.graphics=this.barGra,this.barBg.addChild(this.bar),this.bloodText=new jt,this.bloodText.width=200,this.bloodText.align="center",this.bloodText.bold=!0,this.bloodText.fontSize=24,this.bloodText.stroke=2,this.bloodText.color="#ffffff",this.nameTxt=new jt,this.nameTxt.width=200,this.nameTxt.align="center",this.nameTxt.bold=!0,this.nameTxt.fontSize=24,this.nameTxt.stroke=2,this.nameTxt.color="#ffe100",this.barBg.mouseEnabled=!1,this.nameTxt.mouseEnabled=!1}w(t,"com.scene.kit.MonsterName");var e=t.prototype;return e.needHideBar=function(t){return 1e3==t.camp_id||ua.isBeachMap||ua.isMonsterCopyMap()},e.reset=function(t,e){switch(this._rarity=e,this.barBg.visible=this.bloodText.visible=50000106!=t.monster_id,e){case 3:case 1:var i=3==e?ut.getRes("com/ui/bloodBossBG.png"):ut.getRes("com/ui/bloodBg.png"),s=3==e?ut.getRes("com/ui/bloodBoss.png"):ut.getRes("com/ui/bloodRed.png");3==e?(this.barBgGra.source=i,this.barBgGra.sizeGrid=[0,17,0,16],this.barBgGra.width=160,this.barBgGra.height=22,this.barGra.source=s,this.barGra.sizeGrid=null,this.barGra.width=132,this.barGra.height=12,this.bar.x=14,this.bar.y=5,this.barBg.width=160):(this.barBgGra.source=i,this.barBgGra.sizeGrid=[4,4,4,4],this.barBgGra.width=106,this.barBgGra.height=10,this.barGra.source=s,this.barGra.sizeGrid=[3,3,3,3],this.barGra.width=102,this.barGra.height=6,this.bar.x=2,this.bar.y=2,this.barBg.width=106),this.nameTxt.text=t.monster_name;var n=we.getMonsterColor(t.type_id);this.nameTxt.color=n<=0?"#ffe100":U.getColorLight(n),0==this.needHideBar(t)?(this.updateBlood(t.hp,t.max_hp),this.showBar()):this.hideBar()}},e.updateBlood=function(t,e){this.percent=t/e,this.bloodText.changeText(t+"/"+e),1<this.percent?this.percent=1:this.percent<0&&(this.percent=0),this.barGra.width=this.percent*(3==this._rarity?132:102),this.bar.visible=0<t},e.loop=function(t,e){this.barBg.x=Math.floor((_e.mid.x+t.x)*_e.scale)-this.barBg.width/2,this.barBg.y=Math.floor((_e.mid.y+t.y-e-6)*_e.scale),this.bloodText.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.bloodText.y=Math.floor((_e.mid.y+t.y-e-25)*_e.scale),this.nameTxt.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.nameTxt.y=Math.floor((_e.mid.y+t.y-e-44)*_e.scale)},e.show=function(){_e.unitNameBloodBar.addChild(this.barBg),_e.unitNameText.addChild(this.bloodText),_e.unitNameText.addChild(this.nameTxt)},e.hide=function(){this.barGra.width=3==this._rarity?132:102,this.barBg.removeSelf(),this.bloodText.removeSelf(),this.nameTxt.removeSelf()},e.visible=function(t){this.barBg.visible=t,this.bloodText.visible=t,this.nameTxt.visible=t},e.showBar=function(){this.barBg.visible=this.bloodText.visible=!0},e.hideBar=function(){this.barBg.visible=this.bloodText.visible=!1},e.hideTextAndBar=function(){this.barBg.visible=this.nameTxt.visible=this.bloodText.visible=!1},e.showTextAndBar=function(){this.barBg.visible=this.nameTxt.visible=this.bloodText.visible=!0},t}(),ye=function(){function t(){this.barBg=null,this.bar=null,this.nameTxt=null,this.bloodText=null,this.title=null,this.percent=NaN,this.collectingBar=null,this.collectTime=0,this.tween=null,this.collectingBGImg=null,this._hideBar=!1,this.scoreImg=null,this._blueVipBox=null,this.barBg=Me.createSprite("com/ui/bloodBg.png",null,0,0,106,10,[4,4,4,4]),this.bar=Me.createSprite("com/ui/bloodRed.png",this.barBg,2,2,102,6,[3,3,3,3]),Me.createSprite("com/ui/bloodFen.png",this.barBg,21,2,64,6),this.bloodText=new jt,this.bloodText.width=200,this.bloodText.align="center",this.bloodText.bold=!0,this.bloodText.fontSize=24,this.bloodText.stroke=2,this.bloodText.color="#ffffff",this.nameTxt=new jt,this.nameTxt.width=200,this.nameTxt.align="center",this.nameTxt.bold=!0,this.nameTxt.fontSize=24,this.nameTxt.stroke=2,this.nameTxt.color="#ffe100",this.barBg.mouseEnabled=!1,this.nameTxt.mouseEnabled=!1,this.createCollectBar()}w(t,"com.scene.kit.PalName");var e=t.prototype;return e.createCollectBar=function(){this.collectingBGImg=Me.createSprite("com/ui/uiBarBg.png",this.barBg,-100,-163,246,38,[0,57,0,57]),this.collectingBGImg.visible=!1,this.collectingBar=new At,this.collectingBar.size(200,20),this.collectingBar.bar.skin="com/ui/uiBar.png",this.collectingBar.bar.sizeGrid="6,11,6,8",this.collectingBar.bar.x=22,this.collectingBar.bar.y=8,this.collectingBar.x=-100,this.collectingBar.y=-163,this.collectingBar.visible=!1,this.collectingBar.value=0,this.barBg.addChild(this.collectingBar)},e.needHideBar=function(t){return 1e3==t.camp_id||ua.isBeachMap},e.reset=function(t){if(this.nameTxt.changeText(t.pal_name),0==this.needHideBar(t)&&0==Se.justHideRole?(this.updateBlood(t.hp,t.max_hp),this.showBar()):this.hideBar(),0<t.title_id||0==Se.justHideRole||!ua.isBattlefieldOfShuraMap()||!ds.isUnShowRoleFashion){null==this.title&&(this.title=new b);var e=va.getTitleSceneUrl(t.title_id);null!=e&&e!=this.title.url&&""!=e?this.title.loadAndPlay(e,"default",0,!0):this.title.unload(),null!=this.nameTxt.parent&&_e.unitNameTitle.addChild(this.title),this.collectingBar.y=-163,this.collectingBGImg.y=-163}else null!=this.title&&this.title.unload(),this.collectingBar.y=-93,this.collectingBGImg.y=-93;this.collectTime=t.collect_time,t.collect_time<=0||t.collect_time<=ya.serverTime||13!=t.state?this.removeCollectTween():this.showCollectTween(),this.nameTxt.color=ua.isCross()&&1e4<t.tag?"#b60202":"#ffe100"},e.showCollectTween=function(){this.collectingBar.visible=!0,this.collectingBGImg.visible=!0,this.collectingBar.value=0,this.tween=ie.to(this.collectingBar,{value:1},1e3*(this.collectTime-ya.serverTime),A.sineOut)},e.removeCollectTween=function(){this.tween&&(ie.clear(this.tween),this.tween=null,this.collectingBar.visible=!1,this.collectingBGImg.visible=!1)},e.updateBlood=function(t,e){this.percent=t/e,this.bloodText.changeText(t+"/"+e),1<this.percent?this.percent=1:this.percent<0&&(this.percent=0),this.bar.graphics.width=102*this.percent,this.bar.visible=0<t},e.loop=function(t,e){if(this.barBg.x=Math.floor((_e.mid.x+t.x)*_e.scale)-this.barBg.width/2,this.barBg.y=Math.floor((_e.mid.y+t.y-e-6)*_e.scale),this.bloodText.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.bloodText.y=Math.floor((_e.mid.y+t.y-e-25)*_e.scale),this.nameTxt.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.nameTxt.y=Math.floor((_e.mid.y+t.y-e-44)*_e.scale),null!=this.title&&null!=this.title.url&&(this.title.x=(_e.mid.x+t.x)*_e.scale,this.title.y=(_e.mid.y+t.y-e-56)*_e.scale),null!=this.scoreImg){var i=this.bloodText.textWidth>this.nameTxt.textWidth?this.bloodText.x:this.nameTxt.x;this.scoreImg.pos(i-this.scoreImg.width/2,this.nameTxt.y)}},e.show=function(){null==this.barBg.parent&&(_e.unitNameBloodBar.addChild(this.barBg),_e.unitNameText.addChild(this.bloodText),_e.unitNameText.addChild(this.nameTxt),null!=this.title&&null!=this.title.url&&_e.unitNameTitle.addChild(this.title))},e.hide=function(){null!=this.barBg.parent&&(this.barBg.removeSelf(),this.bloodText.removeSelf(),this.nameTxt.removeSelf(),null!=this.title&&this.title.removeSelf(),this.hideScoreImg())},e.showBar=function(){this._hideBar=!1,this.barBg.visible=this.bloodText.visible=!0},e.hideBar=function(){this._hideBar=!0,this.barBg.visible=this.bloodText.visible=!1},e.showTitle=function(){this.title&&(this.title.visible=!0)},e.hideTitle=function(){this.title&&(this.title.visible=!1)},e.showScoreImg=function(t){this.scoreImg=this.scoreImg||new et,this.scoreImg.skin=t,_e.unitNameText.addChild(this.scoreImg)},e.hideScoreImg=function(){null!=this.scoreImg&&this.scoreImg.removeSelf()},e.showBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.barBg.addChild(this._blueVipBox);var e=new ms;e.pos=new Tt(-35,-50),e.blueInfo=t,this._blueVipBox.updateShowing(e)}},e.removeBlueVipBox=function(){this._blueVipBox&&this._blueVipBox.removeSelf()},t}(),ve=function(){function t(){this.nameTxt=null,this.nameTxt=new jt,this.nameTxt.width=200,this.nameTxt.align="center",this.nameTxt.bold=!0,this.nameTxt.fontSize=24,this.nameTxt.stroke=2,this.nameTxt.color="#ffe100",this.nameTxt.mouseEnabled=!1}w(t,"com.scene.kit.PetName");var e=t.prototype;return e.reset=function(t){t.pet_name!=this.nameTxt.text&&this.nameTxt.changeText(t.pet_name)},e.loop=function(t,e){this.nameTxt.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.nameTxt.y=Math.floor((_e.mid.y+t.y-e-10)*_e.scale)},e.show=function(){_e.unitNameText.addChild(this.nameTxt)},e.hide=function(){this.nameTxt.removeSelf()},t}(),Ie=function(){function n(){}return w(n,"com.scene.manager.CollectsManager"),n.initCollectXml=function(){if(null==n.collectVos||null==n.collectTypeVos){n.collectVos=[],n.collectTypeVos=[];for(var t=Ra.startEncode("collect.xml"),e=0,i=t.length;e<i;e++){var s=t[e];s instanceof xml.CollectVO?n.collectVos.push(s):s instanceof xml.CollectDropTypeVO&&n.collectTypeVos.push(s)}}},n.getCollectAnimPathByTypeId=function(t){if(n.initCollectXml(),n.collectVos)for(var e=0,i=n.collectVos.length;e<i;e++){var s=n.collectVos[e];if(t==Number(s.typeID))return"unit/collect/"+s.skin}return null},n.getCollectNameByTypeId=function(t){if(n.initCollectXml(),n.collectVos)for(var e=0,i=n.collectVos.length;e<i;e++){var s=n.collectVos[e];if(t==Number(s.typeID))return s.name}return""},n.getCollectDropTypeByCollectType=function(t){if(n.initCollectXml(),0<n.collectTypeVos.length)for(var e=0,i=n.collectTypeVos.length;e<i;e++){var s=n.collectTypeVos[e];if(s.getDropArr().indexOf(t))return Number(s.id)}return 1},n.getCollectNameColor=function(t){if(n.initCollectXml(),n.collectVos)for(var e=0,i=n.collectVos.length;e<i;e++){var s=n.collectVos[e];if(t==Number(s.typeID))return s.color}return 0},n.collectVos=null,n.collectTypeVos=null,n}(),we=function(){function i(){}return w(i,"com.scene.manager.MonsterManager"),i.getMonsterVO=function(t){return null==i.allMonster&&(i.allMonster=Ra.startEncode("monster.xml","type")),i.allMonster[t]},i.getMonsterName=function(t){var e=i.getMonsterVO(t);return null!=e?e.name:""},i.getMonsterIsBossByType=function(t){var e=i.getMonsterVO(t);return null!=e&&3==e.rarity},i.getMonsterSkinByType=function(t){var e=i.getMonsterVO(t);return null!=e?Number(e.skin):0},i.getMonsterColor=function(t){var e=i.getMonsterVO(t);return null!=e?e.color:0},i.allMonster=null,i}(),be=function(){function e(){}return w(e,"com.scene.manager.NpcMgr"),e.init=function(){e._npcVOs||(e._npcVOs=Ra.startEncode("npc.xml","id"))},e.getNpcVO=function(t){return e.init(),e._npcVOs[t]},e.runToNpc=function(t,e){var i=ca.getMapNpcVO(t);if(i)for(var s=new Rt(i.tx,i.ty),n=WS.all,o=0;o<n.length;o++)n[o].runToPoint(s,o+1,e);else Jt.addTip("本地图没有该npc")},e._npcVOs=null,e}(),Se=function(){function h(){}return w(h,"com.scene.manager.UnitManager"),I(1,h,"unitDict",function(){return h._unitDict}),I(1,h,"collectDict",function(){return h._collectDict}),I(1,h,"roleDict",function(){return h._roleDict}),I(1,h,"monsterDict",function(){return h._monsterDict}),I(1,h,"npcDict",function(){return h._npcDict}),h.addUnit=function(t){null==h._unitDict[t.id]&&(h._unitDict[t.id]=t),1==t.unitType?null==h._roleDict[t.id]&&(h._roleDict[t.id]=t,!pe.isMyPal(t.id)&&h.hideAll?h._roleDict[t.id].visible=!1:h._roleDict[t.id].visible=!0,h.roleNUM+=1):2==t.unitType?null==h._monsterDict[t.id]&&(h._monsterDict[t.id]=t,h.monsterNUM+=1):3==t.unitType?null==h._petDict[t.id]&&(h._petDict[t.id]=t,h.petNUM+=1):8==t.unitType?null==h._npcDict[t.id]&&(h._npcDict[t.id]=t,h.npcNum+=1):9==t.unitType&&null==h._collectDict[t.id]&&(h._collectDict[t.id]=t,h.collectNum+=1)},h.hideOtherPet=function(){for(var t in h._petDict)h._petDict[t]&&!pe.isMyPet(parseFloat(t))&&(h._petDict[t].visible=!1)},h.showPet=function(){for(var t in h._petDict)h._petDict[t]&&(h._petDict[t].visible=!0)},h.hideOtherRole=function(){for(var t in h._roleDict)h._roleDict[t]&&!pe.isMyPal(parseFloat(t))&&(h._roleDict[t].visible=!1)},h.showRole=function(){for(var t in h._roleDict)h._roleDict[t]&&(h._roleDict[t].visible=!0)},h.showRoleById=function(t){for(var e in h._roleDict)h._roleDict[e]&&h._roleDict[e].id==t&&h._roleDict[e].showPal()},h.hideRoleById=function(t){for(var e in h._roleDict)h._roleDict[e]&&h._roleDict[e].id==t&&h._roleDict[e].unShowPal()},h.showMonsterById=function(t){for(var e in h._monsterDict)h._monsterDict[e]&&h._monsterDict[e].id==t&&(h._monsterDict[e].visible=!0)},h.hideMonsterById=function(t){for(var e in h._monsterDict)h._monsterDict[e]&&h._monsterDict[e].id==t&&(h._monsterDict[e].visible=!1)},h.showNpcByID=function(t){for(var e in h._npcDict)h._npcDict[e]&&h._npcDict[e].id==t&&(h._npcDict[e].visible=!0)},h.hideMonsterByID=function(t){for(var e in h._npcDict)h._npcDict[e]&&h._npcDict[e].id==t&&(h._npcDict[e].visible=!1)},h.getUnit=function(t){return h._unitDict[t]},h.removeUnit=function(t){var e=h.getUnit(t);return delete h._unitDict[t],h._roleDict[t]?(delete h._roleDict[t],(h.roleNUM-=1)<0&&(h.roleNUM=0)):h._monsterDict[t]?(delete h._monsterDict[t],(h.monsterNUM-=1)<0&&(h.monsterNUM=0)):h._petDict[t]?(delete h._petDict[t],(h.petNUM-=1)<0&&(h.petNUM=0)):h._npcDict[t]?(delete h._npcDict[t],(h.npcNum-=1)<0&&(h.npcNum=0)):h._collectDict[t]&&(delete h._collectDict[t],(h.collectNum-=1)<0&&(h.collectNum=0)),e},h.checkUnitLimit=function(){return 20<h.roleNUM+h.monsterNUM+h.petNUM+h.npcNum},h.clear=function(){for(var t in h._unitDict){h._unitDict[t].remove()}h._unitDict=new Object,h._monsterDict=new Object,h._roleDict=new Object,h._petDict=new Object,h._npcDict=new Object,h._collectDict=new Object,h.roleNUM=0,h.monsterNUM=0,h.petNUM=0,h.npcNum=0},h.setPalsInMapSlice=function(t,e){var i,s;if(!(t.length<=0))if(e)for(var n in t){i=t[n];var o=h.getUnit(i.pal_id);if(o)o.reset(i,!0),o.hideLimit=!1,h.roleInMapSliceNum++;else{var a=Vr.ins().palEnter(i);a&&(a.hideLimit=!1,h.roleInMapSliceNum++)}}else for(var l in t){s=t[l];var r=h.getUnit(s);r&&(r.inMapSlice=!1,h.roleInMapSliceNum--)}},h.setMonsterInMapSlice=function(t,e){var i,s;if(!(t.length<=0))if(e)for(var n in t){i=t[n];var o=h.getUnit(i.monster_id);o?o.reset(i,!0):Dr.ins().monsterEnter(i)}else for(var a in t){s=t[a];var l=h.getUnit(s);l&&(l.inMapSlice=!1)}},h.setPetInMapSlice=function(t,e){var i,s;if(e)for(var n in t){i=t[n];var o=h.getUnit(i.pet_id);o?o.reset(i,!0):Br.ins().petEnter(i)}else for(var a in t){s=t[a];var l=h.getUnit(s);l&&(l.inMapSlice=!1,_e.removeUnit(l.id))}},h.setCollectInMapSlice=function(t,e){var i,s;if(e)for(var n in t){i=t[n];var o=h.getUnit(i.id);o?o.reset(i):Er.ins().collectEnter(i)}else for(var a in t){s=t[a];var l=h.getUnit(s);l&&(l.inMapSlice=!1,_e.removeUnit(l.id))}},h.hideAll=!1,h.justHideRole=!1,h.roleNUM=0,h.monsterNUM=0,h.petNUM=0,h.npcNum=0,h.collectNum=0,h.roleInMapSliceNum=0,_(h,["_unitDict",function(){return this._unitDict=new Object},"_monsterDict",function(){return this._monsterDict=new Object},"_roleDict",function(){return this._roleDict=new Object},"_petDict",function(){return this._petDict=new Object},"_npcDict",function(){return this._npcDict=new Object},"_tranDict",function(){return this._tranDict=new Object},"_collectDict",function(){return this._collectDict=new Object},"myEnemy",function(){return this.myEnemy=new Array}]),h}(),xe=function(){function e(){}return w(e,"com.scene.manager.UnitPool"),I(1,e,"MonsterPool",function(){return e.monsterPool}),I(1,e,"RolePool",function(){return e.rolePool}),I(1,e,"MonsterPoolNum",function(){return e.monsterPool.length}),I(1,e,"RolePoolNum",function(){return e.rolePool.length}),e.getMonster=function(){return 0<e.monsterPool.length?e.monsterPool.pop():new Bh},e.disposeMonster=function(t){e.monsterPool.length<120&&e.monsterPool.push(t)},e.getRole=function(){return 0<e.rolePool.length?e.rolePool.pop():new Mh},e.disposeRole=function(t){e.rolePool.length<160&&t instanceof com.scene.unit.MyPal==0&&e.rolePool.push(t)},e.getPet=function(){return 0<e.petPool.length?e.petPool.pop():new Fh},e.disposePet=function(t){e.petPool.length<160&&t instanceof com.scene.unit.MyPet==0&&e.petPool.push(t)},e.getDropThing=function(){return 0<e.dropThingPool.length?e.dropThingPool.pop():new Ih},e.disposeDropThing=function(t){e.dropThingPool.push(t)},e.getCollectThing=function(){return 0<e.collectPool.length?e.collectPool.pop():new vh},e.disposeCollectThing=function(t){e.collectPool.length<120&&e.collectPool.push(t)},e.collectPool=[],_(e,["monsterPool",function(){return this.monsterPool=new Array},"rolePool",function(){return this.rolePool=new Array},"petPool",function(){return this.petPool=new Array},"dropThingPool",function(){return this.dropThingPool=new Array}]),e}(),Ce=function(){function n(){}return w(n,"com.scene.manager.WorldManager"),n.parse=function(){null==n.allMCM&&(n.allMCM=new Object);var t=0,e=de.getMCM();try{for(var i in e){var s=e[i];null==n.allMCM[i]&&(n.allMCM[i]=s,"world.mcm"==i&&n.parseMCM(),t++)}}catch(t){return!1}return de.deleteMCM(),1<t},n.getMapData=function(t){var e=n.allMCM[t+".mcm"];if(e){if(e instanceof com.net.ByteArray)return n.allMCM[t+".mcm"]=vt.decode(e),n.allMCM[t+".mcm"];if(e instanceof com.scene.data.MapDataVO)return e}return null},n.parseMCM=function(){var t=n.allMCM["world.mcm"];n.worldMapData=vt.decode(t),n.worldGrid=new he(n.worldMapData),n.worldAstar=new gt(n.worldGrid)},n.parseXML=function(){n.allCity=new Object,n.allCity=Ra.startEncode("maps.xml","id")},n.getCityVO=function(t){return void 0===t&&(t=0),null==n.allCity&&n.parseXML(),0==t&&(t=ca.mapID),null!=n.allCity[t]?n.allCity[t]:null},n.getCityName=function(t){void 0===t&&(t=0);return null==n.allCity&&n.parseXML(),0==t&&(t=ca.mapID),null!=n.allCity[t]?n.allCity[t].name:""},n.allMCM=null,n.worldMapData=null,n.allCity=null,n.worldGrid=null,n.worldAstar=null,n}(),Pe=function(){function a(){}return w(a,"com.scene.unit.base.AvatarUtil"),a.actToStatus=function(t,e){return e},a.createActPartURL=function(t,e,i,s,n){var o;if(null==a.statusPart&&((a.statusPart=new Object)[0]=["weapon","body","wing"],a.statusPart[3]=["body","wing"],a.statusPart[1100]=["body"],a.statusPart[1101]=["body"],a.statusPart[1102]=["body"],a.statusPart[1103]=["body"],a.statusPart[8]=["body"]),a.statusPart[s]&&-1!=a.statusPart[s].indexOf(e))switch(4<n&&(n=8-n),e){case"body":if(o=a.getRoleUnitSubFile(t.body),0==s||3==s||8==s)switch(i){case"stand":case"walk":return o+t.body+"_"+n;case"attack":return o+t.body+"_attack_"+n;case"attack_arrow":return o+t.body+"_attack_arrow_"+n;case"attack_casting":return o+t.body+"_attack_casting_"+n;case"hurt":return o+t.body+"_hurt_"+n;case"die":return o+t.body+"_die_"+n;case"sit":return o+t.body+"_sit_"+n;default:return null}else{if(1100==s)return t.body%2==1?"unit/role/beach_man_"+n:"unit/role/beach_woman_"+n;if(1101==s||1102==s)return t.body%2==1?"unit/role/beach_man_sit_4":"unit/role/beach_woman_sit_4";if(1103==s)return t.body%2==1?"unit/role/beach_man_dizzy_4":"unit/role/beach_woman_dizzy_4"}case"weapon":if(0==t.weapon)return null;switch(o=a.getWeaponUnitSubFile(t.weapon),i){case"stand":case"walk":return o+t.weapon+"_"+n;case"attack":return o+t.weapon+"_attack_"+n;case"attack_arrow":return o+t.weapon+"_attack_arrow_"+n;case"attack_casting":return o+t.weapon+"_attack_casting_"+n;case"hurt":return o+t.weapon+"_hurt_"+n;case"die":return o+t.weapon+"_die_"+n;default:return null}case"wing":if(0==t.wing)return null;switch(i){case"stand":case"walk":return"unit/wing/"+t.wing+"_"+n;case"attack":return"unit/wing/"+t.wing+"_attack_"+n;case"attack_arrow":return"unit/wing/"+t.wing+"_attack_arrow_"+n;case"attack_casting":return"unit/wing/"+t.wing+"_attack_casting_"+n;case"hurt":return"unit/wing/"+t.wing+"_hurt_"+n;case"die":return"unit/wing/"+t.wing+"_die_"+n;default:return null}default:return null}return null},a.getWeaponUnitSubFileStr=function(t,e){return void 0===e&&(e="unit"),a.getWeaponUnitSubFile(parseInt(t),e)},a.getWeaponUnitSubFile=function(t,e){return void 0===e&&(e="unit"),0<t?e+"/weapon/"+Math.floor(t/1e7)+"/":""},a.getRoleUnitSubFileStr=function(t,e){return void 0===e&&(e="unit"),a.getRoleUnitSubFile(parseInt(t),e)},a.getRoleUnitSubFile=function(t,e){return void 0===e&&(e="unit"),0<t?e+"/role/"+Math.floor(t/1e6)+"/":""},a.getFlyY=function(t){return 0},a.getfashionImg=function(t){return"com/assets/fashionImg/"+t},a.isEqual=function(t,e){return!(null==t&&null!=e||null!=t&&null==e)&&(t.body==e.body&&(t.wing==e.wing&&(t.weapon==e.weapon&&t.mount==e.mount)))},a.isAttackAct=function(t){return"attack"==t||"attack_arrow"==t||"attack_casting"==t},a.sortURLS=function(t,e,i,s,n,o,a,l){t.length=0,s&&t.push(s),null==s?"walk"!=e?0==i||1==i||7==i?(t.push(o),a&&t.push(a),n&&t.push(n)):3<=i&&i<=5?(n&&t.push(n),a&&t.push(a),t.push(o)):(n&&t.push(n),t.push(o),a&&t.push(a)):0==i||1==i||7==i?(t.push(o),a&&t.push(a),n&&t.push(n)):4==i?(n&&t.push(n),a&&t.push(a),t.push(o)):(n&&t.push(n),t.push(o),a&&t.push(a)):2<=i&&i<=6?(n&&t.push(n),t.push(o),l&&t.push(l),a&&t.push(a)):(t.push(o),l&&t.push(l),a&&t.push(a),n&&t.push(n))},a.statusToAct=function(t,e){switch(t){case 0:return"stand"==e||"walk"==e?e:"stand";case 3:return"die";case 1100:return"stand";case 1101:case 1102:return"sit";case 1103:return"stand";case 8:return"sit"}return e},a.getDirToRightDir=function(t){return t<5?t:8-t},a.checkVisibleState=function(t,e,i){return!0},a.getPartSkinID=function(t,e,i,s,n){switch(t){case e:return n.wing;case s:return n.weapon;default:return n.body}return n.body},a.getScale=function(t){null==a.allScale&&(a.allScale=Ra.startEncode("unitScale.xml","name"));var e=a.allScale[t];return null!=e?1/e.scale:1},a.getEffectScale=function(t){null==a.allScale&&(a.allScale=Ra.startEncode("unitScale.xml","name"));var e=a.allScale[t];return null!=e?1/e.scale:1},a.ACT_ATTACK="attack",a.ACT_DEFAULT="default",a.ACT_DIE="die",a.ACT_HURT="hurt",a.ACT_SIT="sit",a.ACT_STAND="stand",a.ACT_WALK="walk",a.ACT_NO="no",a.statusPart=null,a.allScale=null,a}(),Te=(function(){function t(){}w(t,"com.scene.unit.base.UnitConst")}(),function(){function h(){}return w(h,"com.scene.utils.SceneUnitSearcher"),h.searcEnemy=function(t){var e;t.pt,Se.roleDict;return null!=(e=h.searcPal(t))?e:e=h.searcMonster(t)},h.searcPal=function(t){if(tn.checkIsAutoHangup())return null;var e,i,s=t.pt,n=Number.MAX_VALUE,o=Se.roleDict;for(var a in o)if(3!=(i=o[a]).status){if(0!=ns.targetID){if(i.pvo.camp_id!=ns.targetID)continue}else if(i.pvo.camp_id==pe.roleID)continue;var l=ca.getCell(i.pt.x,i.pt.z);if(1!=g.isSafe(l)){var r=h.checkInDistance(s,i.pt);r<n&&(e=i,n=r)}}return e},h.searcMonster=function(t){var e,i,s=t.pt,n=Number.MAX_VALUE,o=Se.monsterDict;for(var a in o)if(3!=(i=o[a]).status&&i.campID!=t.pvo.camp_id&&5!=i.campID){var l=h.checkInDistance(s,i.pt);l<n&&(e=i,n=l)}return e},h.searchEnemyInObj=function(t,e){var i,s,n=Number.MAX_VALUE;for(var o in e)if(3!=(s=e[o]).status){var a=h.checkInDistance(t,s.pt);a<n&&(i=s,n=a)}return i},h.checkInDistance=function(t,e){var i=Math.abs(t.x-e.x),s=Math.abs(t.z-e.z);return s<=i?i:s},h}()),ke=function(){function t(){}return w(t,"com.toolTip.TipType"),t.registerToolTip=function(){Ae.registerToolTip("DEFAULT_TIP",BF),Ae.registerToolTip("EQUIP_TIP",FF),Ae.registerToolTip("OTHER_EQUIP_TIP",kU),Ae.registerToolTip("GOODS_TIP",UF),Ae.registerToolTip("BASE_GOODS_TIP",VF),Ae.registerToolTip("BASE_EQUIP_TIP",NF),Ae.registerToolTip("DOMINATE_EUIQP_TIP",MF),Ae.registerToolTip("SPEQUIP_POTENTIAL_TIP",wU),Ae.registerToolTip("FLOWER_FAERIE_TIP",rU),Ae.registerToolTip("REFINE_SOUL_BEST_EQUIP_TIP",AU),Ae.registerToolTip("PETFUSESKILL_TIP",dU),Ae.registerToolTip("PETHUNTGIRL_TIP",mU),Ae.registerToolTip("PETSOUL_TIP",fU),Ae.registerToolTip("PET_TOWERSKILL_TIP",uU),Ae.registerToolTip("STRANGEFIRE_REFINE_TIP",KF)},t}(),Ae=function(){function i(){}return w(i,"com.toolTip.ToolTipManager"),i.getToolTipClass=function(t){return i.tipLib[t]},i.registerToolTip=function(t,e){i.tipLib[t]=e},i.show=function(t,e){if(void 0===e&&(e="DEFAULT_TIP"),i.tip&&e==i.tipType)return i.data=t,i.tip.data=t,void i.tip.popup();i.tip&&(i.tip.close(),i.tip=null),i.tipType=e,i.data=t,""!=i.tipType&&null!=(i.tip=i.getTip(i.tipType))&&(i.tip.data=i.data,i.tip.popup())},i.getTip=function(t){try{var e;return null!=i.tipInstance&&i.tipInstance.hasOwnProperty(t)?e=i.tipInstance[t]:(e=new(i.getToolTipClass(t)),null==i.tipInstance&&(i.tipInstance=new Object),i.tipInstance[t]=e),e}catch(t){console.log(t.message)}return null},i.data=null,i.tipType="",i.tipInstance=null,i.tip=null,i.viceType=null,_(i,["tipLib",function(){return this.tipLib=new Object}]),i}(),Ee=function(){function t(){this.msg=null,this.key=null,this.title="",this.yesCaller=null,this.yesFun=null,this.yesArgs=null,this.noCaller=null,this.noFun=null,this.noArgs=null,this.closeCaller=null,this.closeFun=null,this.closeArgs=null,this.noLabel="取消",this.yesLabel="确认",this.showRight=!0,this.showClose=!0,this.align="left",this.isShowTitle=!1,this.height=0,this.yesConsume="",this.closeOther=!0}return w(t,"com.ui.AlertVO"),t}(),Re=function(){function i(){this.running=!1,this.queues=null,this.index=2e3,this.queues=[]}w(i,"com.ui.EquipZoomeEffect");var t=i.prototype;return t.add=function(t){t&&0<t.length&&(this.queues=this.queues.concat(t),this.zoomTo())},t.zoomTo=function(t){if(t||0!=this.queues.length){t=t||this.queues.pop();var e=i.getEquipDropItem();e.alpha=1,e.imgEquip.skin=t.realMaxico,100<t.level?e.txtLevel.text=(t.level-100)/10+"转":e.txtLevel.text=t.level+"级",e.txtName.text=t.name,e.imgVoca.skin="com/ui/voca"+t.category+".png",e.zOrder=this.index,h.stage.addChild(e),++this.index,e.y=lt.stageHeight-100,e.x=(lt.stageWidth-e.width)/2,ie.to(e,{y:lt.stageHeight-380},1200,A.quintOut,Q.create(this,this.zoomAlpha,[e])),_t.setTimeout(this,this.zoomTo,null,1e3),this.running=!0}},t.zoomAlpha=function(t){ie.to(t,{alpha:0},600,null,Q.create(this,this.onCenterComplete,[t]))},t.onCenterComplete=function(t){t&&(t.removeSelf(),i.disposeEquipDropItem(t)),0==this.queues.length&&(this.running=!1,this.index=1001)},I(1,i,"ins",function(){return i._ins=i._ins||new i}),i.getEquipDropItem=function(){return i.equipDropPool&&0<i.equipDropPool.length?i.equipDropPool.pop():new GA},i.disposeEquipDropItem=function(t){(i.equipDropPool=i.equipDropPool||[]).length<5?i.equipDropPool.push(t):t.destroy(!0)},i._ins=null,i.equipDropPool=null,i}(),Oe=function(){var d,p;function t(){this._parents=null,this.itemNote=null}w(t,"com.ui.LayeredController");var e=t.prototype;return e.initItem=function(t,e,i){if(t){this.itemNote=this.itemNote||{},this.itemNote[t.onlyKey]||(this.itemNote[t.onlyKey]=p.getOne());var s,n,o=this.itemNote[t.onlyKey],a=o.partPosInfo;for(var l in t)(s=t[l])instanceof laya.display.Sprite&&((n=new d).attrName=l,n.offsetX=s.x,n.offsetY=s.y,a.push(n));if(this._parents&&e){for(var r,h=0;h<e.length;h++){var u;for(var c in e[h])(u=e[h][c]).removeSelf(),(r=this._parents[h])?r.addChild(u):console.log("LayeredController\t没有index为"+h+"的层级")}i&&(o.eventSp||(o.eventSp=new Wt,o.eventSp.size(t.width,t.height)),(u=this._parents[this._parents.length-1]).addChild(o.eventSp),o.eventSp.on("click",i[1],i[0],i[2]))}else console.log("LayeredController\tno parents or no layerInfo");this.updatePos(t)}},e.removeItem=function(t){if(this.itemNote&&t&&this.itemNote[t.onlyKey]){var e,i,s=this.itemNote[t.onlyKey],n=s.partPosInfo;for(var o in t)if((e=t[o])instanceof laya.display.Sprite){var a;for(a in n)(i=n[a]).attrName==o&&(e.x=i.offsetX,e.y=i.offsetY);e.removeSelf()}s.repool(),this.itemNote[t.onlyKey]=null,delete this.itemNote[t.onlyKey]}},e.updatePos=function(t){this.updatePosNow(t)},e.updatePosByOneInItem=function(t,e,i,s){if(this.itemNote&&t&&this.itemNote[t.onlyKey]&&""!=e){var n,o=this.itemNote[t.onlyKey].partPosInfo;for(var a in o)if((n=o[a]).attrName==e){n.offsetX+=i,n.offsetY+=s;break}this.updatePos(t)}},e.updatePosNow=function(t){if(t&&this.itemNote&&this.itemNote[t.onlyKey]){var e,i,s=this.itemNote[t.onlyKey],n=s.partPosInfo,o=t.x,a=t.y;for(var l in n)(e=t[(i=n[l]).attrName])&&(e.x=o+i.offsetX,e.y=a+i.offsetY);s.eventSp&&s.eventSp.pos(o,a)}},e.clear=function(){for(var t in this._parents=null,this.itemNote)this.itemNote[t].repool();this.itemNote=null},e.rePool=function(){this.clear(),kt.recover("LayeredController",this)},I(0,e,"parents",null,function(t){this._parents=t}),t.getOne=function(){return kt.getItemByClass("LayeredController",t)},t.__init$=function(){d=function(){function t(){this.attrName=null,this.offsetX=NaN,this.offsetY=NaN}return w(t,""),t}(),p=function(){function e(){this._eventSp=null,this.partPosInfo=null}w(e,"");var t=e.prototype;return t.repool=function(){e.pool=e.pool||[],this._eventSp&&this._eventSp.removeSelf(),this._eventSp&&this._eventSp.offAll(),this._eventSp=null,this.partPosInfo=[],e.pool.push(this)},I(0,t,"eventSp",function(){return this._eventSp},function(t){this._eventSp=t,this._eventSp&&(this._eventSp.mouseEnabled=!0,this._eventSp.mouseThrough=!1)}),e.getOne=function(){if(e.pool&&0<e.pool.length)return e.pool.pop();var t=new e;return t.partPosInfo=[],t},e.pool=null,e}()},t}(),Le=function(){function t(){this.running=!1,this.queues=null,this.queues=[]}w(t,"com.ui.ZoomEffect");var e=t.prototype;return e.add=function(t){t&&0<t.length&&(this.queues=this.queues.concat(t),this.zoomTo())},e.zoomTo=function(t){if((t||0!=this.queues.length)&&(t=t||this.queues.pop()).s){var e=lt.stageWidth/5*2,i=lt.stageHeight/5*2;t.s.x=t.fX,t.s.y=t.fY,t.parents?t.parents.addChild(t.s):lt.uiLayer.addChild(t.s),ie.to(t.s,{x:e,y:i,scaleX:1,scaleY:1},600,A.quintOut,Q.create(this,this.onCenterComplete,[t])),_t.setTimeout(this,this.zoomTo,null,100),this.running=!0}},e.onCenterComplete=function(t){ie.to(t.s,{x:t.tX,y:t.tY,scaleX:.5,scaleY:.5},400,A.quadOut,Q.create(this,this.onComplete,[t]))},e.onComplete=function(t){t.s&&(ie.clearAll(t.s),t.compH&&t.compH.run()),this.queues&&0==this.queues.length&&(this.running=!1)},I(1,t,"ins",function(){return t._ins=t._ins||new t}),t._ins=null,t}(),De=function(){function t(){this.s=null,this.fX=NaN,this.fY=NaN,this.tX=NaN,this.tY=NaN,this.compH=null,this.parents=null}return w(t,"com.ui.ZoomVO"),t}(),Ne=function(){function t(){}return w(t,"com.utils.FunctionOpenUtil"),t.isGodHoodOpen=function(){return 10<=Ds.curBarrier},t.isBossOpen=function(){return 10<=Ds.curBarrier},t.isRefineSoulOpen=function(){return 6<=pe.myRegrow},t.isOpenEncounter=function(){return 30<=pe.myLevel},t.isOpenSnatch=function(){return pe.myLevel>=rs.snatchOpenLevel},t.isOpenHuntTreasureMystery=function(){return 10<=pe.myLevel},t.isOpenSoloRanking=function(){return 80<=pe.myLevel},t.isOpenSkillStep=function(){return 60<=pe.myLevel},t.isOpenSkillBook=function(){return 80<=pe.myLevel},t.isOpenBattleField=function(){return 100<=pe.myLevel},t.isOpenFriend=function(){return 40<=pe.myLevel},t.isOpenBiography=function(){return 4<=pe.user.attr.regrow},t.isOpenMeridian=function(){return 1<=pe.myRegrow},t.isOpenBeachBoss=function(){return 70<=pe.myLevel},t.isOpenPetEmbattle=function(){return 110<=pe.myEquipLevel},t.isOpenPetExplore=function(){return 55<=pe.myLevel},t.isOpenTreasure=function(){return 55<=pe.myLevel},t.isOpenPet=function(){return 5<=pe.myLevel},t.isOpenPetSports=function(){return 2<=pe.myRegrow},t}(),Ve=function(){function l(){}return w(l,"com.utils.MoveMath"),l.getRealSpeed=function(t,e){return 0==e||4==e?.6324*t:2==e||6==e?1.265*t:t},l.getDirSpeed=function(t,e){var i=NaN,s=NaN;switch(e){case 0:i=0,s=.6324*-t;break;case 1:i=Math.cos(.4625)*t,s=-Math.sin(.4625)*t;break;case 2:i=1.265*t,s=0;break;case 3:i=Math.cos(.4625)*t,s=Math.sin(.4625)*t;break;case 4:i=0,s=.6324*t;break;case 5:i=-Math.cos(.4625)*t,s=Math.sin(.4625)*t;break;case 6:i=1.265*-t,s=0;break;case 7:i=-Math.cos(.4625)*t,s=-Math.sin(.4625)*t;break;default:throw new Error("速度计算错误!")}return{xSpeed:i,ySpeed:s}},l.getDre=function(t){var e=0;return-15<=t&&t<15?e=2:15<=t&&t<75?e=3:75<=t&&t<105?e=4:105<=t&&t<170?e=5:170<=t||t<-170?e=6:-75<=t&&t<-15?e=1:-105<=t&&t<-75?e=0:-170<=t&&t<-105&&(e=7),e},l.getDretion=function(t,e,i,s){var n=0,o=i-t,a=s-e,l=180*Math.atan2(a,o)/Math.PI;return-15<=l&&l<15?n=2:15<=l&&l<75?n=3:75<=l&&l<105?n=4:105<=l&&l<170?n=5:170<=l||l<-170?n=6:-75<=l&&l<-15?n=1:-105<=l&&l<-75?n=0:-170<=l&&l<-105&&(n=7),n},l.checkAlphaCell=function(t){var e=ca.getCell(t.x,t.z);return 1==g.isExist(e)&&1==g.isAlpha(e)},l.getRushPos=function(t,e,i,s,n){var o=t-i,a=e-s,l=o*o+a*a;0<l&&(o=o/(l=Math.sqrt(l))*50,a=a/l*50);for(var r=1,h=NaN,u=NaN,c=Rt.getOne();r<4;){if(h=i+o*r,u=s+a*r,Ot.xyToPt(h,u,c),ca.hasCell(c.x,c.z))return Ot.getPos(c.x,c.z,n);r++}return c=Ot.xyToPt(t,e,c),Ot.getPos(c.x,c.z,n)},l.getPetPt=function(t,e,i){switch(void 0===i&&(i=1),e){case 0:return Rt.getOne(t.x+i,t.z);case 1:return Rt.getOne(t.x+i,t.z+i-2);case 2:return Rt.getOne(t.x,t.z+i);case 3:return Rt.getOne(t.x-(i-1),t.z+(i-1));case 4:return Rt.getOne(t.x-i,t.z);case 5:return Rt.getOne(t.x-i,t.z-(i-2));case 6:return Rt.getOne(t.x,t.z-i);case 7:return Rt.getOne(t.x+(i-1),t.z-(i-1));default:return null}return null},l.getNearPt=function(t,e){switch(e){case 0:return Rt.getOne(t.x-1,t.z-1);case 1:return Rt.getOne(t.x,t.z-1);case 2:return Rt.getOne(t.x+1,t.z-1);case 3:return Rt.getOne(t.x+1,t.z);case 4:return Rt.getOne(t.x+1,t.z+1);case 5:return Rt.getOne(t.x,t.z+1);case 6:return Rt.getOne(t.x-1,t.z+1);case 7:return Rt.getOne(t.x-1,t.z);default:return null}return null},l.getDistance=function(t,e,i,s){return Math.sqrt((i-t)*(i-t)+(s-e)*(s-e))},l.getOffsetPt=function(t,e,i,s,n,o,a){if(1==a||3==a)return o;switch(l.getDretion(t,e,i,s)){case 0:switch(a){case 2:return Rt.getOne(o.x-2,o.z+2);case 4:return Rt.getOne(o.x+2,o.z-2);default:return o}case 1:switch(a){case 2:return Rt.getOne(o.x-2,o.z);case 4:return Rt.getOne(o.x+2,o.z);default:return o}case 2:switch(a){case 2:return Rt.getOne(o.x-2,o.z-2);case 4:return Rt.getOne(o.x+2,o.z+2);default:return o}case 3:switch(a){case 2:return Rt.getOne(o.x,o.z-2);case 4:return Rt.getOne(o.x,o.z+2);default:return o}case 4:switch(a){case 2:return Rt.getOne(o.x+2,o.z-2);case 4:return Rt.getOne(o.x-2,o.z+2);default:return o}case 5:switch(a){case 2:return Rt.getOne(o.x+2,o.z);case 4:return Rt.getOne(o.x-2,o.z);default:return o}case 6:switch(a){case 2:return Rt.getOne(o.x+2,o.z+2);case 4:return Rt.getOne(o.x-2,o.z-2);default:return o}case 7:switch(a){case 2:return Rt.getOne(o.x,o.z+2);case 4:return Rt.getOne(o.x,o.z-2);default:return o}default:return o}},l}(),Be=function(){function s(t){var e;for(var i in this.myData=null,this.logo=null,this.indexDic=null,this.logo=t,this.indexDic={},this.myData=[],this.logo)"string"==typeof(e=this.logo[i])||"number"==typeof e&&Math.floor(e)==e?this.indexDic[e]={}:e instanceof Array&&(this.indexDic[e.join("_")]={})}w(s,"com.utils.superArr");var t=s.prototype;return t.setArr=function(t){for(var e in this.myData=[],this.indexDic)delete this.indexDic[e],this.indexDic[e]={};var i;for(var s in t)i=t[s],this.addData(i)},t.addData=function(t){if(null!=t){this.myData.push(t);var e,i,s=this.myData.length-1;for(var n in this.logo)"string"==typeof(i=this.logo[n])||"number"==typeof i&&Math.floor(i)==i?this.setSubDic(this.indexDic[i],t[i],s):i instanceof Array&&(e=this.getPatchLogo(t,i),this.setSubDic(this.indexDic[i.join("_")],e,s))}},t.setSubDic=function(t,e,i){var s=t[e];null==s?t[e]=i:s instanceof Array?s.push(i):t[e]=[s,i]},t.getPatchLogo=function(t,e){var i,s=[];for(var n in e)i=e[n],s.push(t[i]);return s.join("_")},t.delObj=function(t){var e,i,s=this.myData.indexOf(t);if(-1!=s)for(var n in this.myData.splice(s,1),this.indexDic)for(var o in i=this.indexDic[n])if((e=i[o])instanceof Array){var a=e.indexOf(s);-1<a&&e.splice(a,1)}else e==s&&delete i[o]},t.getData=function(t,e){var i;if(t instanceof Array&&e instanceof Array){var s=t.join("_"),n=e.join("_");i=this.indexDic[s][n]}else i=this.indexDic[t][e];return this.getRealData(i)},t.getRealData=function(t){if(null==t)return null;if(t instanceof Array){var e,i=[];for(var s in t)e=t[s],i.push(this.myData[e]);return i}return[this.myData[t]]},t.getArr=function(){return this.myData},s.getOne=function(t,e){var i=new s(t);return i.setArr(e),i},s}(),Me=function(){function r(){}return w(r,"com.utils.UICreater"),r.createEmptySprite=function(t,e,i,s,n,o){void 0===s&&(s=NaN),void 0===n&&(n=NaN),void 0===o&&(o=!1);var a=new Wt;return a.x=t,a.y=e,a.width=s,a.height=n,a.mouseThrough=o,i&&i.addChild(a),a},r.createSprite=function(t,e,i,s,n,o,a){void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=0);var l=ut.getRes(t);if(null!=l){var r=new Wt;if(null!=a){var h=new u;h.sizeGrid=a,h.source=l,h.width=n,h.height=o,r.graphics=h}else r.graphics.drawTexture(l,0,0,n,o);return r.width=0==n?l.width:n,r.height=0==o?l.height:o,null!=e&&e.addChild(r),r.pos(i,s),r}return null},r.createGraphics=function(t){var e=ut.getRes(t),i=new X;return i.drawTexture(e),i},r.createText=function(t,e,i,s,n,o,a){void 0===s&&(s=NaN),void 0===n&&(n=NaN);var l=r.getTxt();return l.text=t,l.x=e,l.y=i,l.width=s,l.height=n,o&&o.addChild(l),null!=a&&(l.fontSize=a.fontSize,l.color=a.color,l.leading=a.leading,l.align=a.align),l},r.createTextInput=function(t,e,i,s,n){var o=new zt;return o.x=t,o.y=e,o.height=s,o.width=i,n&&n.addChild(o),o},r.createHTMLDivElement=function(t,e,i,s,n,o){void 0===s&&(s=NaN),void 0===n&&(n=NaN);var a=new K;return a.x=e,a.y=i,a.width=s,a.height=n,null!=t&&(a.innerHTML=t),o&&o.addChild(a),a},r.createButton=function(t,e,i,s,n,o){void 0===s&&(s=0),void 0===n&&(n=0);var a=new f;return a.skin="com/ui/btn_yellow.png",a.x=e,a.y=i,a.width=s,a.height=n,a.label=t,o&&o.addChild(a),a},r.createGoodsImage=function(t,e,i,s,n,o,a,l,r,h){void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===a&&(a=82),void 0===l&&(l=!1),void 0===r&&(r="com/ui/propSlot.png"),void 0===h&&(h="5,5,5,5");var u=new fh(i,n,o,a,l,r,h);return u.x=t,u.y=e,s&&s.addChild(u),u},r.createCompui=function(t,e,i,s,n,o){void 0===s&&(s=NaN),void 0===n&&(n=NaN),void 0===o&&(o=!1);var a=new m;return a.x=t,a.y=e,a.width=s,a.height=n,a.mouseThrough=o,i&&i.addChild(a),a},r.getTxt=function(){return 0<(r.txtPool=r.txtPool||[]).length?r.txtPool.pop():new jt},r.disposeTxt=function(t){(r.txtPool=r.txtPool||[]).length<10&&(t.removeSelf(),r.txtPool.push(t))},r.txtPool=null,r}(),Fe=(function(){function t(){this.isPreloadFinish=!1,console.log("%cMingGame==========================================","font-size:40px;color:#666666;"),c.send(52209),this.initLinstener(),this.parseData()}w(t,"MingGame");var e=t.prototype;e.parseData=function(){var t=S.now();1==de.parseFile(yt.libData)?(this.isPreloadFinish=!0,this.toRoleDetail()):(s.show("配置有错，请检查配置"),dt.send("data.lib","配置有错，请检查配置")),yt.libData=null,console.log("配置解析时间:"+(S.now()-t))},e.initLinstener=function(){v.addSocketListener("m_role_detail_toc",this,this.onRoleDetail)},e.toRoleDetail=function(){mt.show("m_role_detail_tos"),Zt.show("正在请求角色详细信息",1),c.send(c.ROLE_DETAIL_TOS);var t=new Object;t.className="m_role_detail_tos",v.send(t)},e.onRoleDetail=function(t){mt.show("m_role_detail_toc"),c.send(c.ROLE_DETAIL_TOC),Zt.destroy(),yt.user=t.role_details,pe.user=t.role_details,pe.user.attr.gold+=pe.user.attr.given_gold,yt.fullVersion=t.full_version,pe.fullVersion=t.full_version,ya.serverTime=t.server_time,bt.startTimeout(),lt.initLayer(),yo.createModules(),ot.getInstance(),GF.preload(),T.dispatch("RESET_SCENE",0,pe.user.pos.map_id),Bt.sdk.reportEnterGame(),zn.addDebugInfo("clientWidth:"+S.clientWidth,"ALL"),zn.addDebugInfo("clientHeight:"+S.clientHeight,"ALL"),zn.addDebugInfo("pixelRatio:"+S.pixelRatio,"ALL"),zn.addDebugInfo("height:"+S.height,"ALL"),zn.addDebugInfo("width:"+S.width,"ALL"),zn.addDebugInfo("是否iphoneXR："+lt.isIphoneXR(),"ALL")}}(),function(){function t(){}return w(t,"modules.achievement.AchievementConst"),_(t,["ACHIEVEMENT_STATE_INDEXS",function(){return this.ACHIEVEMENT_STATE_INDEXS=[1,0,2]}]),t}()),Ue=function(){function a(){}return w(a,"modules.achievement.AchievementManager"),a.setAchievements=function(t){a._achievementTocs=t},a.checkAchievementIsGotById=function(t){var e,i=Math.floor(t/1e3);for(var s in a._achievementTocs){if((e=a._achievementTocs[s]).type_id==i)for(var n in e.get_reward_ids)if(e.get_reward_ids[n]==t)return!0}return!1},a.getPAchievementByTypeId=function(t){var e;for(var i in a._achievementTocs)if((e=a._achievementTocs[i]).type_id==t)return e;return null},a.updateAchievementByGet=function(t){var e,i=Math.floor(t/1e3);for(var s in a._achievementTocs)(e=a._achievementTocs[s]).type_id==i&&(e.get_reward_ids=e.get_reward_ids||[],e.get_reward_ids.push(t))},a.updateAchievement=function(t,e){var i,s=!1;for(var n in a._achievementTocs)if((i=a._achievementTocs[n]).type_id==t){i.val=e,s=!0;break}if(0==s){a._achievementTocs=a._achievementTocs||[];var o=new Object;o.className="p_achievement",o.type_id=t,o.val=e,o.get_reward_ids=null,a._achievementTocs.push(o)}},a._achievementTocs=null,a}(),Ge=function(){function o(){}return w(o,"modules.activity.actInvest.ActInvestMgr"),I(1,o,"clickedToday",function(){return o._clickedToday},function(t){o._clickedToday=t}),o.handlerInvestInfo=function(t){o.investInfo=t},o.getInvestInfo=function(){return o.investInfo},o.handlerInvestOpen=function(){o.investInfo.state=1},o.handlerInvestClose=function(){o.investInfo.state=2},o.checkRedPoint=function(){if(o.investInfo){var t=!1;if(0==o.investInfo.state?o.investInfo.attend_start_ts>ya.serverTime||o.investInfo.attend_end_ts<ya.serverTime||(t=!0):1==o.investInfo.state&&(t=!0),t){if(0==o.investInfo.benifit?o.showBenifitGet(!0):o.showBenifitGet(!1),o.investInfo.invest_infos)for(var e,i=o.investInfo.invest_infos.length-1;0<=i;i--){var s;if(1==(e=o.investInfo.invest_infos[i]).is_buy)for(var n in e.rewards)if((s=e.rewards[n]).need_level<=pe.myEquipLevel&&0==s.state)return void o.showItemGet(!0)}o.showItemGet(!1)}else o.showItemGet(!1),o.showBenifitGet(!1)}else o.showItemGet(!1),o.showBenifitGet(!1)},o.showItemGet=function(t){T.dispatch("ICON_REDPOINT_CHANGE",[4012,"RP_ITEM_GET",t]),T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_ITEM_GET",t])},o.showBenifitGet=function(t){T.dispatch("ICON_REDPOINT_CHANGE",[4012,"RP_BENIFIT_GET",t]),T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_BENIFIT_GET",t])},o.handlerInvestBuy=function(t){if(o.investInfo){if(o.investInfo.state=1,o.investInfo.invest_infos){for(var e,i=o.investInfo.invest_infos.length-1;0<=i;i--)(e=o.investInfo.invest_infos[i]).type!=t.type?o.investInfo.invest_infos.splice(i,1):e.is_buy=1;o.investInfo.invest_infos.length=1}o.checkRedPoint()}},o.handlerInvestGet=function(t){if(o.investInfo&&o.investInfo.invest_infos){for(var e,i=o.investInfo.invest_infos[0],s=0;s<i.rewards.length;s++)if((e=i.rewards[s]).id==t.id){e.state=1;break}o.checkRedPoint()}},o.handlerInvestBenifit=function(t){o.investInfo&&(o.investInfo.benifit=1,o.checkRedPoint())},o.getInvestByEventID=function(t){var e;if(o.investInfo&&o.investInfo.invest_infos)for(var i in o.investInfo.invest_infos){if((e=o.investInfo.invest_infos[i]).rewards)for(var s in e.rewards)if(e.rewards[s].id==t)return e}return null},o.investInfo=null,o._clickedToday=!1,o}(),He=function(){function u(){this.baguaRewardPanel=null,this.baguaShareView=null,this.listenerClose=!1,this.yunYouView=null,this.yunYouID=NaN,this.jlDFSView=null,this.dialPanel=null,this.dialID=0,this.baguaFurnaceView=null,this.baguaFurnaceLaojunAId=NaN,this.baguaFurnaceXiantongAId=NaN,this.baguaFurnaceLimitArr=null,this.huXianView=null,this.actId1=0,this.actId2=0,this.actId3=0,this.juBaoView=null,this.customStandView=null,this.rankDetailsView=null,this.StrBeastView=null,this.beastsBuyView=null,this.fdChargeView=null,this.dayLimitBuyView=null,this.suitShowView=null,this.bargainView=null,this.bargainID=NaN,this.wishShareView=null,this.actBuyGoodsAlertPanel=null,this._userBackView=null,this._freeMallView=null,this.freeMallActId=0,this.freeMallMyOrderPanel=null,this._actRpControllView=null,this.spcPanelDic=new Object}w(u,"modules.activity.ActivityCommonMediator");var t=u.prototype;return t.updateRPByIconID=function(t){var e=this.getActPanel(t);e&&e.updateRedPoint()},t.updateActPanelData=function(t){var e=this.getActPanel(t);e&&e.setActVO()},t.openAppointView=function(t,e){void 0===e&&(e=-1);var i=ao.getIconVO(t);i&&(1==i.alwayShow||ao.getIconStateShow(t))?Da.ins().toInfo(t):Jt.addTip("当前不在活动时间内哦")},t.openPanelByUgroup=function(t,e){void 0===e&&(e=-1);var i=ao.getIconVO(t);if(i&&(1==i.alwayShow||ao.getIconStateShow(t))){var s=u.getInstance().getActPanel(t);s?(Da.ins().toInfo(t),s.openByUgroupID(e)):this.createActPanel(t,Q.create(this,this.openPanelByUgroup,[t,e],!0))}else Jt.addTip("当前不在活动时间内哦")},t.openPanelByActID=function(t,e){void 0===e&&(e=-1);var i=ao.getIconVO(t);if(i&&(1==i.alwayShow||ao.getIconStateShow(t))){var s=modules.activity.ActivityCommonMediator.getInstance().getActPanel(t);s?(Da.ins().toInfo(t),s.openByActID(e)):this.createActPanel(t,Q.create(this,this.openPanelByActID,[t,e],!0))}else Jt.addTip("当前不在活动时间内哦")},t.createActPanel=function(t,e){se.has("modules/act")?se.has("modules/act/"+t)?(this.spcPanelDic[t]||(this.spcPanelDic[t]=new Px(t),this.spcPanelDic[t].on("undisplay",this,this.actPanelUnDisplay,[t]),this.spcPanelDic[t].on("display",this,this.actPanelDisplay,[t])),e&&e.run()):se.add("modules/act/"+t,"正在加载活动图标",this,this.createActPanel,[t,e]):se.add("modules/act","正在加载活动模块",this,this.createActPanel,[t,e])},t.actPanelDisplay=function(t){u.delKeyDic=u.delKeyDic||new Object,310==t||1003==t?(u.delKeyDic.hasOwnProperty("310")&&(_t.clearTimeout(u.delKeyDic[310]),delete u.delKeyDic[310]),u.delKeyDic.hasOwnProperty("1003")&&(_t.clearTimeout(u.delKeyDic[1003]),delete u.delKeyDic[1003])):u.delKeyDic.hasOwnProperty(t+"")&&(_t.clearTimeout(u.delKeyDic[t]),delete u.delKeyDic[t])},t.actPanelUnDisplay=function(t){u.delKeyDic[t]=_t.setTimeout(this,this.destoryActPanel,[t],ya.coldTime)},t.destoryActPanel=function(t){if(this.spcPanelDic)var e=this.spcPanelDic.hasOwnProperty(t+"")?this.spcPanelDic[t]:null;if(e){var i,s=e.actIDS;for(var n in s){var o;for(var a in i=s[n])o=i[a],We.removeActCBFunc(o)}var l,r=e.groups;for(var h in r)l=r[h],u._viewDic.hasOwnProperty(l+"")&&(u._viewDic[l].destroy(),u._viewDic[l]=null,delete u._viewDic[l]);e.destroy(),e=null,delete this.spcPanelDic[t]}u.destroy(t)},t.closeActPanel=function(t){var e=this.getActPanel(t);e&&e.closeWindow()},t.updateActPanel=function(t){var e=this.getActPanel(t);e&&e.update()},t.getActPanel=function(t){return this.spcPanelDic.hasOwnProperty(t+"")?this.spcPanelDic[t]:null},t.getHuanPiPanel=function(){var t=Object.keys(this.spcPanelDic);return 2==t.length?310==t[0]?this.spcPanelDic[t[1]]:this.spcPanelDic[t[0]]:1==t.length&&310!=t[0]?this.spcPanelDic[t[0]]:null},t.openBaguaRewardPanel=function(t){this.baguaRewardPanel=this.baguaRewardPanel||Aa.getIns(1e3,"bagua.BaguaRewardView"),this.baguaRewardPanel.openWindow(),this.baguaRewardPanel.update(t)},t.onShareClick=function(t,e){if(void 0===e&&(e=0),2==t){if(yt.isWX&&ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));Bt.resetShareParm("原来我单身这么久，是因为没有遇到它····","2",[1,1]),this.listenerClose=!0}else if(3==t){if(yt.isWX&&ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));0==e?Bt.resetShareParm("萌妹纸送了你一个抽奖券，点击100%中奖！","3",[7,850]):3==e&&Bt.resetShareParm("萌妹纸送了你一个抽奖券，点击100%中奖！","3",[7,851]),this.listenerClose=!0}yt.isWX?Bt.shareAppMessage():Bt.shareMenu()},t.closeBaguShareView=function(){this.baguaShareView&&this.baguaShareView.parent&&this.listenerClose&&this.baguaShareView.closeWindow()},t.openBaguaShareView=function(t){if(se.has("modules/act")){switch(null==this.baguaShareView&&(this.baguaShareView=new ux,this.baguaShareView.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.baguaShareView.btnClose.on("click",this.baguaShareView,this.baguaShareView.closeWindow)),t){case 0:this.baguaShareView.img.skin="modules/act/bagua/tip0.png",this.baguaShareView.imgCon.skin="modules/act/bagua/shareImg.png",this.baguaShareView.btn.on("click",this,this.onShareClick,[2]),this.listenerClose=!0;break;case 1:this.baguaShareView.img.skin="modules/act/bagua/tip1.png",this.baguaShareView.imgCon.skin="modules/act/bagua/know.png",this.baguaShareView.btn.on("click",this.baguaShareView,this.baguaShareView.closeWindow);break;case 2:this.baguaShareView.img.skin="modules/act/bagua/tip2.png",this.baguaShareView.imgCon.skin="modules/act/bagua/shareImg.png",this.baguaShareView.btn.on("click",this,this.onShareClick,[2]);break;case 3:this.baguaShareView.img.skin="modules/act/bagua/tip1.png",this.baguaShareView.imgCon.skin="modules/act/bagua/know.png",this.baguaShareView.btn.on("click",this.baguaShareView,this.baguaShareView.closeWindow);break;case 4:this.baguaShareView.img.skin="modules/act/bagua/tip3.png",this.baguaShareView.imgCon.skin="modules/act/bagua/know.png",this.baguaShareView.btn.on("click",this.baguaShareView,this.baguaShareView.closeWindow)}null==this.baguaShareView.parent&&this.baguaShareView.openWindow()}else se.add("modules/act","正在加载活动模块",this,this.openBaguaShareView,[t])},t.openBaguaView=function(){this.openPanelByUgroup(310,3003)},t.openYunYouView=function(){se.has("modules/act")?(this.yunYouView=this.yunYouView||Aa.getIns(1e3,"yunyou.YunyouView"),this.yunYouView.actID=[this.yunYouID],this.yunYouView.openWindow(),this.yunYouView&&this.yunYouView.parent&&this.yunYouView.update()):se.add("modules/act","正在加载活动图标",this,this.openYunYouView)},t.setYunYouID=function(t){this.yunYouID=t},t.openJinLiDFSView=function(){se.has("modules/act")?(this.jlDFSView=this.jlDFSView||Aa.getIns(1e3,"jinliDFS.JinLiDFSView"),this.jlDFSView.openWindow(),this.jlDFSView&&this.jlDFSView.parent&&this.jlDFSView.update()):se.add("modules/act","正在加载活动图标",this,this.openJinLiDFSView)},t.closeJinLiDFSView=function(){this.jlDFSView&&this.jlDFSView.parent&&this.jlDFSView.closeWindow()},t.updateJinLiDFSView=function(){this.jlDFSView&&this.jlDFSView.parent&&this.jlDFSView.update()},t.openDialPanel=function(){se.has("modules/act")?(this.dialPanel=this.dialPanel||Aa.getIns(1e3,"dial.DialPanel"),this.dialPanel.actID=[this.dialID],this.dialPanel.openWindow(),this.dialPanel&&this.dialPanel.parent&&this.dialPanel.update()):se.add("modules/act","正在加载活动图标",this,this.openDialPanel)},t.setDialID=function(t){this.dialID=t},t.loadBaguaFurnaceView=function(){se.has("modules/act")?this.openBaguaFurnaceView():se.add("modules/act","正在加载活动图标",this,this.loadBaguaFurnaceView)},t.openBaguaFurnaceView=function(){this.baguaFurnaceView=this.baguaFurnaceView||new Ax,this.baguaFurnaceView&&Da.ins().firstOpen?this.baguaFurnaceView.setViewIndex(1):this.baguaFurnaceView.setViewIndex(2),this.baguaFurnaceView.iconID=1002,this.baguaFurnaceView.setTabStrs(),this.baguaFurnaceView.openWindow(null,!0);var t=[];0!=this.baguaFurnaceLaojunAId&&t.push(this.baguaFurnaceLaojunAId),0!=this.baguaFurnaceXiantongAId&&t.push(this.baguaFurnaceXiantongAId),this.baguaFurnaceView.actID=t,this.baguaFurnaceView.update()},t.GetBaguaFurnaceID1=function(t){this.baguaFurnaceLaojunAId=t},t.GetBaguaFurnaceID2=function(t){this.baguaFurnaceXiantongAId=t},t.updateBaguaFurnaceView=function(){this.baguaFurnaceView&&this.baguaFurnaceView.parent&&this.baguaFurnaceView.update()},t.updateBaguaFurnaceTreasureDialog=function(t){27==t.module_id&&(Jt.addTip("购买成功"),Gr.ins().toShopDiscountInfo(10201749))},t.loadHuXianView=function(){se.has("modules/act")?_t.setTimeout(this,this.openHuXianView,null,50):se.add("modules/act","正在加载活动图标",this,this.loadHuXianView)},t.openHuXianView=function(){this.huXianView=this.huXianView||new Hx,this.huXianView.openWindow(null,!0),0!=this.actId1&&0!=this.actId2?(this.huXianView.setID(this.actId1,this.actId2),this.huXianView.update()):console.log("活动ID错误")},t.GetHuXianID1=function(t){this.actId1=t},t.GetHuXianID2=function(t){this.actId2=t},t.GetBeastBuyID=function(t){this.actId3=t},t.openJuBaoView=function(){se.has("modules/act")?(this.juBaoView=this.juBaoView||Aa.getIns(1e3,"jubao.JuBaoView"),this.juBaoView.openWindow(),this.juBaoView&&this.juBaoView.parent&&this.juBaoView.update()):se.add("modules/act","正在加载活动图标",this,this.openJuBaoView)},t.openCustomStandView=function(){this.customStandView=this.customStandView||Aa.getIns(1e3,"customStand.CustomStandView"),this.customStandView.openWindow(),this.customStandView&&this.customStandView.parent},t.updateCustomStandView=function(t){this.customStandView&&this.customStandView.setRank_get(t)},t.updateCustomStandViewBtn=function(t){this.customStandView&&this.customStandView.updateBtn(t)},t.openRankDetailsView=function(t,e){this.rankDetailsView=this.rankDetailsView||Aa.getIns(1e3,"customStand.RankDetailsView"),this.rankDetailsView.openWindow(),this.rankDetailsView.update(t,e)},t.openStrBeastLimitView=function(){se.has("modules/act")?(this.StrBeastView=this.StrBeastView||Aa.getIns(1e3,"strBeast.StrBeastLimitView"),this.StrBeastView.openWindow(),this.StrBeastView&&this.StrBeastView.parent&&this.StrBeastView.update()):se.add("modules/act","正在加载活动图标",this,this.openStrBeastLimitView)},t.openBeastsBuyView=function(t){se.has("modules/act")?(this.beastsBuyView=this.beastsBuyView||Aa.getIns(1e3,"beastsBuy.BeastsBuyView"),this.beastsBuyView.openWindow(),0!=this.actId3?(this.beastsBuyView.setID(this.actId3),this.beastsBuyView&&this.beastsBuyView.parent&&this.beastsBuyView.update()):console.log("活动ID错误")):se.add("modules/act","正在加载活动图标",this,this.openBeastsBuyView,[t])},t.openFdChargePanel=function(t){se.has("modules/act")?(this.fdChargeView=this.fdChargeView||Aa.getIns(1e3,"firstDayCharge.FirstDayChargeView"),this.fdChargeView.openWindow(),this.fdChargeView&&this.fdChargeView.parent&&this.fdChargeView.update()):se.add("modules/act","正在加载活动图标",this,this.openFdChargePanel,[t])},t.openDayLimitBuyView=function(t){se.has("modules/act")?(this.dayLimitBuyView=this.dayLimitBuyView||Aa.getIns(1e3,"dayLimitBuy.DayLimitBuyView"),this.dayLimitBuyView.openWindow(),this.dayLimitBuyView&&this.dayLimitBuyView.parent&&this.dayLimitBuyView.update(t)):se.add("modules/act","正在加载活动图标",this,this.openDayLimitBuyView,[t])},t.openSuitShowView=function(){se.has("modules/act")?(this.suitShowView=this.suitShowView||Aa.getIns(1e3,"suitShow.SuitShowView"),this.suitShowView.openWindow(),this.suitShowView&&this.suitShowView.parent&&this.suitShowView.update()):se.add("modules/act","正在加载活动图标",this,this.openSuitShowView)},t.setBargainID=function(t){this.bargainID=t},t.openBargainView=function(){se.has("modules/act")?_t.setTimeout(this,this.delayOpenBargainView,null,100):se.add("modules/act","正在加载活动图标",this,this.openBargainView)},t.delayOpenBargainView=function(){this.bargainView=this.bargainView||Aa.getIns(1e3,"bargain.BargainView"),0!=this.bargainID&&(this.bargainView.actID=[this.bargainID]),this.bargainView.openWindow(),this.bargainView&&this.bargainView.parent&&this.bargainView.update()},t.openWishShareView=function(t,e){if(se.has("modules/act")){switch(null==this.wishShareView&&(this.wishShareView=new cx,this.wishShareView.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.wishShareView.btnClose.on("click",this.wishShareView,this.wishShareView.closeWindow)),0==e?this.wishShareView.txtTip2.text="每天只能免费领取莲花*1；":3==e&&(this.wishShareView.txtTip2.text=""),this.wishShareView.imgBg.skin="modules/act/wish/skin"+e+"/shareBg.png",t){case 0:this.wishShareView.img.skin="modules/act/wish/skin"+e+"/shareSucc.png",this.wishShareView.imgCon.skin="modules/act/wish/shareImg.png",this.wishShareView.btn.on("click",this,this.onShareClick,[3,e]),this.listenerClose=!0;break;case 1:this.wishShareView.img.skin="modules/act/wish/skin"+e+"shareSucc.png",this.wishShareView.imgCon.skin="modules/act/wish/know.png",this.wishShareView.btn.on("click",this.wishShareView,this.wishShareView.closeWindow);break;case 2:this.wishShareView.img.skin="modules/act/wish/skin"+e+"shareFail.png",this.wishShareView.imgCon.skin="modules/act/wish/shareImg.png",this.wishShareView.btn.on("click",this,this.onShareClick,[3]);break;case 3:this.wishShareView.img.skin="modules/act/wish/skin"+e+"shareSucc.png",this.wishShareView.imgCon.skin="modules/act/wish/know.png",this.wishShareView.btn.on("click",this.wishShareView,this.wishShareView.closeWindow);break;case 4:this.wishShareView.img.skin="modules/act/wish/skin"+e+"shareGetFail.png",this.wishShareView.imgCon.skin="modules/act/wish/know.png",this.wishShareView.btn.on("click",this.wishShareView,this.wishShareView.closeWindow)}null==this.wishShareView.parent&&this.wishShareView.openWindow()}else se.add("modules/act","正在加载活动模块",this,this.openWishShareView,[t,e])},t.closeWishShareView=function(){this.wishShareView&&this.wishShareView.parent&&this.listenerClose&&this.wishShareView.closeWindow()},t.showActBuyGoodsAlert=function(t){null!=t&&(this.actBuyGoodsAlertPanel=this.actBuyGoodsAlertPanel||new bx,this.actBuyGoodsAlertPanel.showData=t,this.actBuyGoodsAlertPanel.openWindow())},t.openUserBackView=function(t){se.has("modules/act")?(Da.ins().toUserBack(),this._userBackView=this._userBackView||new $x,t&&t.runWith&&t.runWith(this._userBackView)):se.add("modules/act","正在加载活动图标",this,this.openUserBackView,[t])},t.updateUserBackView=function(){if(this._userBackView){var t=Da.ins().userBackData;t?(this._userBackView.updateTimer(t.remain_ts),this._userBackView.updateReward(t.reward_info),this._userBackView.updateStars(t.login_day_acc)):Da.ins().toUserBack()}},t.getFreeMallActID=function(t){this.freeMallActId=t},t.openFreeMallView=function(t){se.has("modules/act")?(this._freeMallView=this._freeMallView||Aa.getIns(1e3,"freeMall.FreeMallView"),this._freeMallView.iconID=1004,this._freeMallView.actID=[this.freeMallActId],this._freeMallView.openWindow(),We.showRP(this.freeMallActId,1004,!1)):se.add("modules/act","正在加载活动图标",this,this.openFreeMallView,[t])},t.updateFreeMallView=function(){this._freeMallView&&this._freeMallView.parent&&this._freeMallView.update()},t.openFreeMallMyOrderPanel=function(){this.freeMallMyOrderPanel=this.freeMallMyOrderPanel||Aa.getIns(1e3,"freeMall.PlayerOrderView"),this.freeMallMyOrderPanel.openWindow(),this.freeMallMyOrderPanel.update()},t.updateFreeMallMyOrderPanel=function(){this.freeMallMyOrderPanel&&this.freeMallMyOrderPanel.isPopup()&&this.freeMallMyOrderPanel.update()},t.openRpView=function(t,e){se.has("modules/act")?(this._actRpControllView?(this._actRpControllView.actType=t,this._actRpControllView.data=e):this._actRpControllView=this._actRpControllView||new jx(t,e),this._actRpControllView.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0),this._actRpControllView.openWindow()):se.add("modules/act","正在加载活动图标",this,this.openRpView)},u.getInstance=function(){return u.instance=u.instance||new u},u.getActView=function(t){var e=t%1e4;if(!(u._viewDic=u._viewDic||{}).hasOwnProperty(t+""))switch(e){case 1001:case 1007:case 1006:case 1008:u._viewDic[t]=new oC;break;case 1601:case 1602:u._viewDic[t]=new iC;break;case 1603:u._viewDic[t]=new sC;break;case 1604:u._viewDic[t]=new nC;break;case 1401:case 1402:u._viewDic[t]=new Nx;break;case 1801:u._viewDic[t]=Aa.getIns(1e3,"limit.ActLimitView");break;case 1802:u._viewDic[t]=Aa.getIns(1e3,"discounts.ActDiscountsView");break;case 1808:u._viewDic[t]=new qx;break;case 3004:u._viewDic[t]=Aa.getIns(1e3,"wish.ActWishView");break;case 4010:u._viewDic[t]=Aa.getIns(1e3,"levelGift.ActLevelGiftView");break;case 4012:u._viewDic[t]=Aa.getIns(1e3,"actInvest.InvestView");break;case 1201:u._viewDic[t]=Aa.getIns(1e3,"online.ActOnlineView");break;case 1902:case 1701:case 3001:u._viewDic[t]=new mC;break;case 2101:case 2102:case 3002:u._viewDic[t]=new hC;break;case 3003:u._viewDic[t]=Aa.getIns(1e3,"bagua.BaguaView");break;case 1111:u._viewDic[t]=Aa.getIns(1e3,"constellation.ConstellationView");break;case 3006:u._viewDic[t]=Aa.getIns(1e3,"serverLimitBuy.ServerLimitBuyView");break;case 4014:u._viewDic[t]=new Mx;break;case 1301:u._viewDic[t]=Aa.getIns(1e3,"display.ActDisplayView");break;case 3005:u._viewDic[t]=Aa.getIns(1e3,"copyDropReward.ActCopyDropRewardView");break;case 1101:u._viewDic[t]=Aa.getIns(1e3,"cumulationConsume.ActCumulativeConsume");break;case 1110:u._viewDic[t]=Aa.getIns(1e3,"cumulativeFlower.ActCumulativeFlowerView");break;case 2601:u._viewDic[t]=Aa.getIns(1e3,"familyBattle.ActFamilyBattlePanel");break;case 2602:u._viewDic[t]=Aa.getIns(1e3,"groupPK.ActGroupPkView");break;case 2604:u._viewDic[t]=Aa.getIns(1e3,"consumeBack.ConsumeBackView");break;case 1303:u._viewDic[t]=new Xx}return u._viewDic[t]},u.destroy=function(t){var e;if(se.destroy("modules/act/"+t),310==t||1003==t)for(var i in u.normalActs)e=u.normalActs[i],u.clearSub("modules/act/"+e);for(i in u.changeActs)e=u.changeActs[i],u.clearSub("modules/act/"+e+"/"+t)},u.clearSub=function(t){var e=ut.loadedMap,i=[];for(var s in e)-1!=s.indexOf(t)&&i.push(s);for(var n=0;n<i.length;n++)ut.clearRes(i[n],!0)},u.instance=null,u._viewDic=null,u.delKeyDic=null,_(u,["changeActs",function(){return this.changeActs=["discounts","onLine","limit","login"]},"normalActs",function(){return this.normalActs=["exchange","levelGift","sign","standard"]}]),u}(),We=function(){function r(){}return w(r,"modules.activity.ActivityCommonMgr"),I(1,r,"today",function(){return 0==r._today&&r.resetToday(),r._today}),I(1,r,"toMonth",function(){return 0==r._toMonth&&r.resetToday(),r._toMonth}),I(1,r,"hasHuxianIcon",function(){return r._hasHuxianIcon}),I(1,r,"hasJubaoIcon",function(){return r._hasJubaoIcon}),I(1,r,"hasFdChargeIcon",function(){return r._hasFdChargeIcon}),r.resetToday=function(){var t=new Date;t.setTime(ya.serverTimeMs),r._today=t.getDate(),r._toMonth=t.getMonth()+1,r.onResetDay()},r.onResetDay=function(){Da.ins().toUserBack()},r.getActInfoBriefs=function(t){return(r._actInfoDict=r._actInfoDict||new Object)[t]=r._actInfoDict[t]||[],r._actInfoDict[t]},r.addFixedActInfo=function(t,e){var i;for(var s in(r._actFixedDic=r._actFixedDic||new Object)[t]=r._actFixedDic[t]||[],r._actFixedDic[t])if(i=r._actFixedDic[t][s],e.ugroup==i.ugroup)return void(i=e);r._actFixedDic[t].push(e),r._actInfoDict&&r._actInfoDict.hasOwnProperty(t+"")&&(r._actInfoDict[t]=r._actInfoDict[t].concat(r._actFixedDic[t]))},r.hasFortuneDayIcon=function(){return r._hasFortuneDayIcon},r.addFortuneDayIcon=function(){r._hasFortuneDayIcon||(r._hasFortuneDayIcon=!0,Zl.ins().addIcon(5005))},r.hasLuckyDayIcon=function(){return r._hasLuckyDayIcon},r.addLuckyDayIcon=function(){r._hasLuckyDayIcon||(r._hasLuckyDayIcon=!0,Zl.ins().addIcon(5015))},r.updateActInfoDict=function(t,e){(r._actInfoDict=r._actInfoDict||{})[t]=e,r._actFixedDic&&r._actFixedDic.hasOwnProperty(t+"")&&0<r._actFixedDic[t].length&&(r._actInfoDict[t]=r._actInfoDict[t].concat(r._actFixedDic[t]))},r.getIconIdAndUgroupByActId=function(t){if(r._actInfoDict)for(var e in r._actInfoDict){var i,s=r._actInfoDict[e];for(var n in s)if((i=s[n]).act_id==t)return i.ugroup}return 0},r.getActVO=function(t){return r.cfgData||(r.cfgData=Ra.startEncode("act.xml","id")),r.cfgData[t]},r.getCustomRewardVO=function(){r.cusRewardData||(r.cusRewardData=Ra.startEncode("customRank.xml","id"));var t=[],e=0;for(var i in r.cusRewardData){var s=r.cusRewardData[i].rewrads.split(",");t[e]=new Array;for(var n=0;n<s.length;n++)t[e][n]=s[n];e++}return t},r.getFdChargeVO=function(){return r.fdChargeData||(r.fdChargeData=Ra.startEncode("fdCharge.xml","id")),r.fdChargeData},r.setFdChargeInfo=function(t){r.fdChargeData1=r.fdChargeData1||new Object;var e=t.split("#");r.fdChargeData1.isShow=e[0],"true"==e[0]&&(r._hasFdChargeIcon||(Zl.ins().addIcon(4026),r._hasFdChargeIcon=!0)),r.fdChargeData1.reward1=e[1],r.fdChargeData1.reward2=e[2],r.fdChargeData1.get1=e[3],r.fdChargeData1.get2=e[4],T.dispatch("ON_ACT_FDCHARGE_UPDATE"),r.checkFdChargeRedPoint()},r.getFdChargeInfo=function(){return r.fdChargeData1},r.getActEffsVOByItemID=function(t){var e;for(var i in r.actEffsData||(r.actEffsData=Ra.startEncode("actEffs.xml")),r.actEffsData)if((e=r.actEffsData[i]).itemID==t)return e;return null},r.removeActInfoDict=function(t,e){if(r._actInfoDict&&r._actInfoDict.hasOwnProperty(t+""))for(var i=r._actInfoDict[t],s=0;s<i.length;s++)if(i[s].ugroup==e){i.splice(s,1);break}if(r._actFixedDic&&r._actFixedDic.hasOwnProperty(t+""))for(i=r._actFixedDic[t],s=0;s<i.length;s++)if(i[s].ugroup==e){i.splice(s,1);break}},r.checkRPByGoldUpdate=function(){var t;if(r.actDetailDict)for(var e in r.actDetailDict)if((t=r.actDetailDict[e])instanceof modules.activity.limit.vo.ActLimitVO){var i,s=!1;for(var n in t.items){if(1==(i=t.items[n]).consumeType&&pe.user.attr.gold>=i.realPrice&&0<i.canBuyNum){s=s||!0;break}if(2==i.consumeType&&pe.silver>=i.realPrice&&0<i.canBuyNum){s=s||!0;break}}r.showRP(t.actID,t.iconId,s)}else if(t instanceof modules.activity.discounts.vo.ActDiscountsVO){var o;for(var a in s=!1,t.items)if(0<(o=t.items[a]).canBuyNum&&pe.gold>=o.realPrice){s=s||!0;break}r.showRP(t.actID,t.iconId,s)}},r.checkRPByPackUpdate=function(){var t;if(r.actDetailDict)for(var e in r.actDetailDict)if((t=r.actDetailDict[e])instanceof modules.activity.exchange.vo.ActExchangeVO){var i,s=!1;for(var n in t.items)if((i=t.items[n]).getTime<i.maxTime){var o=i.materials[0];if(xo.getGoodsNumByTypeID(o.type_id)>=o.num&&12!=i.state){s=s||!0;break}}r.showRP(t.actID,t.iconID,s)}},r.showRP=function(t,e,i){var s=t+"",n=r.getIconIdAndUgroupByActId(t);(yt.isWX||yt.isQQ)&&r.checkRpMask(t)&&(i=!1),0<n&&T.dispatch("ICON_REDPOINT_CHANGE",[n,s,i]),T.dispatch("ICON_REDPOINT_CHANGE",[e,s,i])},r.checkRpMask=function(t){if(3767801==t&&vi.is_Mask_Act_Discount)return!0;if(3767802==t&&vi.is_Mask_Act_Discount)return!0;return!!(0<=[3790303,37903031,37903033,37903034,37903035].indexOf(t)&&vi.is_Mask_Act_Wish)||!(3790302!=t||!vi.is_Mask_Act_Constellation)},r.makeActDetail=function(t){switch(r.actDetailDict=r.actDetailDict||{},t.com_types[0]){case 1001:case 1007:case 1006:case 1008:case 1101:r.actDetailDict[t.act_id]=Ke.makeSpcChargeVO(t,r.actDetailDict[t.act_id]);break;case 1601:case 1602:case 1603:r.actDetailDict[t.act_id]=Ke.makeSpcChargeVO(t,r.actDetailDict[t.act_id]);break;case 1604:r.actDetailDict[t.act_id]=Ke.makeSpcLoginVO(t,r.actDetailDict[t.act_id]);break;case 1401:case 1402:r.actDetailDict[t.act_id]=Ke.makeExchangeVO(t,r.actDetailDict[t.act_id]);break;case 1801:r.actDetailDict[t.act_id]=Ke.makeLimitVO(t,r.actDetailDict[t.act_id]);break;case 1201:r.actDetailDict[t.act_id]=Ke.makeOnlineVO(t,r.actDetailDict[t.act_id]);break;case 1802:r.actDetailDict[t.act_id]=Ke.makeDiscountsVO(t,r.actDetailDict[t.act_id]);break;case 1902:r.actDetailDict[t.act_id]=Ke.makeStandVO(t,r.actDetailDict[t.act_id]);break;case 1701:r.actDetailDict[t.act_id]=Ke.makeStandRankVO(t,r.actDetailDict[t.act_id]);break;case 2101:r.actDetailDict[t.act_id]=Ke.makeTotalSignVO(t,r.actDetailDict[t.act_id]);break;case 2102:r.actDetailDict[t.act_id]=Ke.makeTodaySignVO(t,r.actDetailDict[t.act_id]);break;case 2501:r.actDetailDict[t.act_id]=Ke.makeConsumeVo(t,r.actDetailDict[t.act_id]);break;case 2401:r.actDetailDict[t.act_id]=Ke.makeRestoreVo(t,r.actDetailDict[t.act_id]);break;case 1009:r.actDetailDict[t.act_id]=Ke.makeRechargeRestoreVo(t,r.actDetailDict[t.act_id]);break;case 1501:r.actDetailDict[t.act_id]=Ke.makeRandomVo(t,r.actDetailDict[t.act_id]);break;case 1211:r.actDetailDict[t.act_id]=Ke.makeCountDownVo(t,r.actDetailDict[t.act_id]);break;case 1301:r.actDetailDict[t.act_id]=Ke.makeDisplayVO(t,r.actDetailDict[t.act_id]);break;case 2001:r.actDetailDict[t.act_id]=Ke.makeCopyDropRewardVO(t,r.actDetailDict[t.act_id]);break;case 2601:r.actDetailDict[t.act_id]=Ke.makeFamilyBattleRewardVO(t,r.actDetailDict[t.act_id]);break;case 1110:r.actDetailDict[t.act_id]=Ke.makeAddSendFlowerVO(t,r.actDetailDict[t.act_id]);break;case 1111:r.actDetailDict[t.act_id]=Ke.makeConstellationVO(t,r.actDetailDict[t.act_id]);break;case 1804:r.actDetailDict[t.act_id]=Ke.makeServerLimitBuyVO(t,r.actDetailDict[t.act_id]);break;case 2603:r.actDetailDict[t.act_id]=Ke.makeAllWelfareVO(t,r.actDetailDict[t.act_id]);break;case 2602:r.actDetailDict[t.act_id]=Ke.mackGroupPKVo(t,r.actDetailDict[t.act_id]);break;case 1106:r.actDetailDict[t.act_id]=Ke.makeJuBaoVO(t,r.actDetailDict[t.act_id]),T.dispatch("ON_ACT_JUBAOVO_UPDATE"),r._hasJubaoIcon||(r._hasJubaoIcon=!0,Zl.ins().addIcon(125));break;case 1805:case 1806:1805==t.com_types[0]?r.actDetailDict[t.act_id]=Ke.makeHuXian1VO(t,r.actDetailDict[t.act_id]):r.actDetailDict[t.act_id]=Ke.makeHuXian2VO(t,r.actDetailDict[t.act_id]);break;case 2502:r.actDetailDict[t.act_id]=Ke.makeBaguaFurnaceVO1(t,r.actDetailDict[t.act_id]),T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR");break;case 2503:r.actDetailDict[t.act_id]=Ke.makeBaguaFurnaceVO2(t,r.actDetailDict[t.act_id]),T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR"),T.dispatch("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE");break;case 1807:r.actDetailDict[t.act_id]=Ke.makeLimitVO(t,r.actDetailDict[t.act_id]),T.dispatch("ON_ACT_BEAST_BUYID");break;case 1808:r.actDetailDict[t.act_id]=Ke.makeLuckyDayVO(t,r.actDetailDict[t.act_id]);break;case 1809:r.actDetailDict[t.act_id]=Ke.makeFreeMallVO(t,r.actDetailDict[t.act_id]);break;case 2604:r.actDetailDict[t.act_id]=Ke.makeConsumeBackVO(t,r.actDetailDict[t.act_id]);break;case 1303:r.actDetailDict[t.act_id]=Ke.makeProductNoticeVO(t,r.actDetailDict[t.act_id]),0==r.actDetailDict[t.act_id].hasShow&&T.dispatch("OPEN_ACT_DAILY_PRODUCT_NOTICE",r.actDetailDict[t.act_id]);break;case 2605:r.actDetailDict[t.act_id]=Ke.makeYunYouVO(t,r.actDetailDict[t.act_id]);break;case 2504:r.actDetailDict[t.act_id]=Ke.makeBargainVO(t,r.actDetailDict[t.act_id]),T.dispatch("SET_BARGAIN_ID",t.act_id),T.dispatch("ACT_BARGAIN_UPDATE");break;case 2606:r.actDetailDict[t.act_id]=Ke.makeDialVO(t,r.actDetailDict[t.act_id])}r.makeActIDInfo(t)},r.makeActIDInfo=function(t){r.actIDInfoDict=r.actIDInfoDict||{},r.keyForActID=t.icon_id.toString()+t.com_types[0].toString(),r.actIDInfoDict[r.keyForActID]=r.actIDInfoDict[r.keyForActID]||[];var e=r.actIDInfoDict[r.keyForActID];-1==e.indexOf(t.act_id)&&e.push(t.act_id),(r.iconIdInfoDict=r.iconIdInfoDict||{})[t.act_id+""]=r.iconIdInfoDict[t.act_id+""]||[];var i=r.iconIdInfoDict[t.act_id+""];-1==i.indexOf(t.com_types[0])&&i.push(t.icon_id,t.com_types[0]),"1241805"==r.keyForActID?T.dispatch("ON_ACT_HUXIANID1",t.act_id):"1241806"==r.keyForActID?T.dispatch("ON_ACT_HUXIANID2",t.act_id):"1181807"==r.keyForActID?T.dispatch("ON_ACT_BEAST_BUYID",t.act_id):"10022502"==r.keyForActID?T.dispatch("ON_ACT_BAGUA_FURNACE1",t.act_id):"10022503"==r.keyForActID?T.dispatch("ON_ACT_BAGUA_FURNACE2",t.act_id):"10041809"==r.keyForActID?T.dispatch("ON_ACT_FREE_MALL",t.act_id):"1232605"==r.keyForActID?T.dispatch("ACT_YUNYOU_ID",t.act_id):"1282504"==r.keyForActID?T.dispatch("SET_BARGAIN_ID",t.act_id):"1292606"==r.keyForActID&&T.dispatch("ACT_CHARGE_DIAL",t.act_id)},r.execCallBackFunc=function(t,e){r.actCBFuncDict&&r.actCBFuncDict[t]&&r.actCBFuncDict[t].run()},r.cleanActIDInfo=function(t){r.keyForActID=t.icon_id.toString()+t.com_types[0].toString(),null!=r.actIDInfoDict&&null!=r.actIDInfoDict[r.keyForActID]&&(r.actIDInfoDict[r.keyForActID]=[])},r.getActIDByKey=function(t){return r.actIDInfoDict&&r.actIDInfoDict[t]?r.actIDInfoDict[t]:[]},r.getActIDInfoByActId=function(t){return r.iconIdInfoDict&&r.iconIdInfoDict[t+""]?r.iconIdInfoDict[t+""]:null},r.getActDetailByActID=function(t){return r.actDetailDict?r.actDetailDict[t]:null},r.getCommonDetailByIds=function(t,e){var i,s=[],n=[];for(var o in e){var a;for(var l in i=e[o],n=r.getActIDByKey(t.toString()+i.toString()))a=n[l],s.push(r.getActDetailByActID(a))}return s},r.isCleanActID=function(t){return!1},r.registerActCBFunc=function(t,e,i,s){if(!(r.actCBFuncDict=r.actCBFuncDict||{}).hasOwnProperty(t+"")){var n=Q.create(e,i,s);r.actCBFuncDict[t]=n}},r.removeActCBFunc=function(t){(r.actCBFuncDict=r.actCBFuncDict||{})&&r.actCBFuncDict.hasOwnProperty(t+"")&&(r.actCBFuncDict[t].recover(),delete r.actCBFuncDict[t])},r.checkActRedPoint=function(t){var e=!1;switch(t.com_types[0]){case 1001:case 1007:case 1006:case 1008:case 1601:case 1602:case 1603:case 1604:case 1101:case 1110:e=r.checkChargeRP(t.act_id,t.com_types[0]);break;case 1401:case 1402:e=r.checkExchangeRedPoint(t.act_id);break;case 1801:e=r.checkLimitRedPoint(t.act_id);break;case 1201:e=r.checkOnlineGiftRedPoint(t.act_id);break;case 1802:e=r.checkDiscountRedPoint(t.act_id);break;case 1902:e=r.checkStandRP(t.act_id);break;case 2101:case 2102:e=r.checkSignRP(t.act_id);break;case 1211:e=r.checkCountDownRP(t.act_id);break;case 2401:e=r.checkRestoreRP(t.act_id);break;case 2601:e=r.checkFamilyBattleActRP(t.act_id);break;case 1111:e=r.checkConstellationRedPoint(t.act_id);break;case 2603:r.checkAllWelfareRedPoint(t.act_id),t.act_id=t.act_id-1;case 1804:e=r.checkServerLimitBuyRedPoint(t.act_id);break;case 2602:e=r.checkGroupPkRedPoint(t.act_id);break;case 1106:r.checkJuBaoRedPoint(t.act_id);break;case 2503:e=r.checkBaguaFurnaceRedPoint(t.act_id);break;case 1808:e=r.checkLuckyDayRedPoint(t.act_id);break;case 1809:e=r.checkFreeMallRedPoint(t.act_id);break;case 2604:e=r.checkConsumeBackRedPoint(t.act_id);break;case 2605:e=r.checkYunyouRedPoint(t.act_id);break;case 2606:e=r.checkDialRedPoint(t.act_id)}r.showRP(t.act_id,t.icon_id,e)},r.checkLuckyDayRedPoint=function(t){var e=r.getActDetailByActID(t);return!!e&&0==e.buyState},r.checkFreeMallRedPoint=function(t){return 0==r.hasShow&&(r.hasShow=!0)},r.checkConsumeBackRedPoint=function(t){var e=r.getActDetailByActID(t);if(e){if(0<e.joinTime)return e.deblockTime<=0;if(0<e.gainTime)for(var i in e.items)if("true"==e.items[i].canGain)return!0}return!1},r.checkYunyouRedPoint=function(t){var e=r.getActDetailByActID(t);return 0<xo.getGoodsNumByTypeID(10201867)&&e.totalBuyTimes<e.maxRewardValue},r.checkDialRedPoint=function(t){var e=r.getActDetailByActID(t);return!!(e&&0<e.remainTime)},r.checkOnlineGiftRedPoint=function(t){var e=r.getActDetailByActID(t);if(e)for(var i in e.items)if(11==e.items[i].state)return!0;return!1},r.checkSignRP=function(t){var e=r.getActDetailByActID(t);if(e)for(var i in e.items)if(11==e.items[i].state)return!0;return!1},r.checkCountDownRP=function(t){var e=r.getActDetailByActID(t);if(e)for(var i in e.items)if(e.items[i].nextTime<ya.serverTime)return!0;return!1},r.checkRestoreRP=function(t){var e=r.getActDetailByActID(t);if(e)for(var i in e.items)if(11==e.items[i].state)return!0;return!1},r.checkFamilyBattleActRP=function(t){var e=r.getActDetailByActID(t);if(!e)return!1;for(var i=0,s=e.conditions.length;i<s;i++)if(3!=i&&11==e.conditions[i].state)return!0;return!1},r.checkStandRP=function(t){var e,i=r.getActDetailByActID(t);for(var s in i.conditions)if((e=i.conditions[s])&&11==e.state&&60<=pe.myLevel)return!0;return!1},r.checkChargeRP=function(t,e){var i=r.getActDetailByActID(t);if(i)for(var s in i.items)if(11==i.items[s].state)return 1001!=e||40<=pe.myLevel;return!1},r.checkLimitRedPoint=function(t){var e,i=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(i)for(var s in i.items){if(1==(e=i.items[s]).consumeType&&pe.user.attr.gold>=e.realPrice&&0<e.canBuyNum)return!0;if(2==e.consumeType&&pe.silver>=e.realPrice&&0<e.canBuyNum)return!0}return!1},r.checkDiscountRedPoint=function(t){var e,i=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(i)for(var s in i.items)if(0<(e=i.items[s]).canBuyNum&&pe.gold>=e.realPrice)return!0;return!1},r.checkExchangeRedPoint=function(t){var e,i=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(i)for(var s in i.items)if((e=i.items[s]).getTime<e.maxTime){var n=e.materials[0];if(xo.getGoodsNumByTypeID(n.type_id)>=n.num&&12!=e.state)return!0}return!1},r.checkConstellationRedPoint=function(t){var e=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(e){for(var i=0;i<e.allCurProgress.length;i++)if(parseInt(e.allCurProgress[i])>=parseInt(e.allMaxProgress[i])){var s=So.getCheckId(e.items[i][0].type_id);if(So.chackGiftHave(s)<4)return!0}for(var n=0;n<e.allFreeTimes.length;n++)if(0<parseInt(e.allFreeTimes[n])){var o=So.getCheckId(e.items[n][0].type_id),a=So.chackGiftHave(o);if(0!=parseInt(e.allMinProgress[n])&&a<4)return!0}}return!1},r.checkJuBaoRedPoint=function(t){var e=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(e)for(var i=0;i<e.items.length;i++){var s;for(var n in e.items)if(0<(s=e.items[n]).canBuyNum&&s.nowKillNum>=s.needKillNum)return void r.checkRP(!0)}r.checkRP(!1)},r.checkBaguaFurnaceRedPoint=function(t){var e=modules.activity.ActivityCommonMgr.getActDetailByActID(t),i=-1;if(e)for(var s=0;s<e.conditions.length;s++)if(0<=e.conditions[s].canBuyNum){i=e.conditions[s].canBuyNum;break}return i<0},r.checkRP=function(t){t?T.dispatch("ICON_REDPOINT_CHANGE",[125,"RP_ICON_JUBAO",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[125,"RP_ICON_JUBAO",!1])},r.checkFdChargeRedPoint=function(){var t=modules.activity.ActivityCommonMgr.getFdChargeInfo();t&&(2==t.reward1&&"false"==t.get1||1==t.reward2&&"false"==t.get2?T.dispatch("ICON_REDPOINT_CHANGE",[4026,"RP_ICON_FIRST_DAY_CHARGE",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[4026,"RP_ICON_FIRST_DAY_CHARGE",!1]))},r.checkServerLimitBuyRedPoint=function(t){var e,i=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(i)for(var s in i.items){if(1==(e=i.items[s]).consumeType&&pe.user.attr.gold>=e.realPrice&&0<e.roleCanBuy&&0<e.canBuyNum)return!0;if(2==e.consumeType&&pe.silver>=e.realPrice&&0<e.roleCanBuy&&0<e.canBuyNum)return!0}return!r.hasGetAllWelfare},r.checkAllWelfareRedPoint=function(t){var e=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(e)for(var i in e.items)if(0<e.items[i].hasGet)return void(r.hasGetAllWelfare=!1);r.hasGetAllWelfare=!0},r.checkGroupPkRedPoint=function(t){var e=modules.activity.ActivityCommonMgr.getActDetailByActID(t);if(e){var i=e.conditions;if(0<i.length){var s=parseInt(i[0].selfCampId);if(s<=0||0<s&&i[s-1].freCnt<i[s-1].maxFreeCnt)return!0}}return!1},r.checkGrouPkOpenAndChooseTheCamp=function(){var t,e=modules.activity.ActivityCommonMgr.getActInfoBriefs(310),i=!1,s=0;for(var n in e)if(2602==(t=e[n]).com_types[0]){i=!0,s=t.act_id;break}if(i&&0<s){var o=modules.activity.ActivityCommonMgr.getActDetailByActID(s);if(o){var a=o.conditions;if(0<a.length)return parseInt(a[0].selfCampId)}}return 0},r.getLogByActID=function(t){return r._baguaNoticeDic&&r._baguaNoticeDic[t]?r._baguaNoticeDic[t]:[]},r.saveLogByAct=function(t){r._baguaNoticeDic=r._baguaNoticeDic||new Object;var e=t.act_id,i=t.logs;r._baguaNoticeDic[e]=i},r.actIDInfoDict=null,r.actDetailDict=null,r.keyForActID=null,r.actCBFuncDict=null,r._actInfoDict=null,r.iconIdInfoDict=null,r._baguaNoticeDic=null,r._today=0,r._toMonth=0,r._hasJubaoIcon=!1,r._hasHuxianIcon=!1,r._hasFdChargeIcon=!1,r._actFixedDic=null,r._hasFortuneDayIcon=!1,r._hasLuckyDayIcon=!1,r.cfgData=null,r.cusRewardData=null,r.fdChargeData=null,r.fdChargeData1=null,r.actEffsData=null,r.hasShow=!1,r.hasGetAllWelfare=!1,r}(),qe=function(){function t(){}return w(t,"modules.activity.ActivityConstant"),_(t,["STATE_SORT_ARR",function(){return this.STATE_SORT_ARR=[11,10,22]}]),t}(),Ye=function(){function t(){this.goodsTypeID=NaN,this.msg="",this.defaultCaller=null,this.defaultFun=null,this.defaultArgs=[],this.yesCaller=null,this.yesFun=null,this.yesArgs=[],this.noCaller=null,this.noFun=null,this.noArgs=[],this.closeCaller=null,this.closeFun=null,this.closeArgs=[]}return w(t,"modules.activity.ActivityRepeatAlertVO"),t}(),Xe=function(){function t(){this.avo=null}w(t,"modules.activity.ActivityRepeatGoodsAlert");var e=t.prototype;return e.checkRepeatAlert=function(t){var e,i=!1,s=NaN;if(2==(s=(e=ur.getItem(t.goodsTypeID)).useType%1e3))for(var n=ur.getItem(t.goodsTypeID).products,o=0,a=n.length;o<a;o++){var l=n[o],r=ur.getItem(l.typeId);if(r&&r.useType%1e3==19&&this.checkRepeat(r)){i=!0,e=r,s=19;break}if(r&&r.useType%1e3==8&&this.checkRepeat(r)){i=!0,e=r,s=8;break}if(r&&r.useType%1e3==32&&this.checkRepeat(r)){i=!0,e=r,s=32;break}if(r&&r.useType%1e3==31&&this.checkRepeat(r)){i=!0,e=r,s=31;break}if(r&&r.useType%1e3==33&&this.checkRepeat(r)){i=!0,e=r,s=33;break}}else i=this.checkRepeat(e);if(this.avo=new Ee,this.avo.yesCaller=t.yesCaller,this.avo.yesFun=t.yesFun,this.avo.yesArgs=t.yesArgs,this.avo.noCaller=t.noCaller,this.avo.noFun=t.noFun,this.avo.noArgs=t.noArgs,this.avo.closeCaller=t.closeCaller,this.avo.closeFun=t.closeFun,this.avo.closeArgs=t.closeArgs,i){switch(s){case 19:this.avo.msg=Z.span("您当前已拥有","#5d3924")+Z.span("4个","#fb0009",26)+Z.span(e.title,"#fbd815",26)+Z.span("，是否继续进行购买或兑换？","#5d3924");break;case 8:case 32:case 31:case 33:this.avo.msg=Z.span("您当前已拥有","#5d3924")+Z.span(e.title,"#fbd815",26)+Z.span("，是否继续进行购买或兑换？","#5d3924")}""!=t.msg&&(this.avo.msg+="\n"+t.msg),EF.showVO(this.avo)}else t.defaultFun.apply(t.defaultCaller,t.defaultArgs)},e.checkRepeat=function(t){var e=!1;switch(t.useType%1e3){case 19:e=this.checkRepeatFashion(t);break;case 8:e=this.checkRepeatTitle(t);break;case 32:e=this.checkRepeatBeasts(t);break;case 31:e=this.checkRepeatTalisman(t);break;case 33:e=this.checkRepeatGodEquip(t)}return e},e.checkRepeatFashion=function(t){var e,i,s=pe.pals,n=parseInt(t.img),o=0;for(var a in s)(i=s[a])&&(e=oa.getFashionListDicByActID(i.pal_id))&&e.hasOwnProperty(n+"")&&o++;return 4<=o},e.checkRepeatTitle=function(t){var e=parseInt(t.img);return!!va.isHas(e)},e.checkRepeatBeasts=function(t){var e=parseInt(t.img);return!!nn.getAnimalVO(e).isLoaded},e.checkRepeatTalisman=function(t){var e=t.id;return!!Rn.getTalimanIsActiveByID(e)},e.checkRepeatGodEquip=function(t){var e=t.id;return 0<_n.getStep(e)},t.ins=function(){return t.instance=t.instance||new t},t.instance=null,t}(),Ke=function(){function t(){}return w(t,"modules.activity.ActivityUtil"),t.makeSpcChargeVO=function(t,e){var i;if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],t.act_conditions){e.items.length=t.act_conditions.length;for(var s=0;s<t.act_conditions.length;s++){var n=t.act_conditions[s],o=n.condition_str.split("#");e.items[s]=e.items[s]||new Xi,(i=e.items[s]).now=parseInt(o[1]),i.need=parseInt(o[2]),i.state=n.state,i.awards=n.reward_goods,i.actID=t.act_id,i.conID=n.condition_id,e.items[s]=i}}return e},t.makeSpcLoginVO=function(t,e){var i,s;if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n],a=o.condition_str.split("#");e.items[n]=e.items[n]||new ji,i=e.items[n],s=a[3].split("-"),i.week="0"!=a[1],i.showDoubleType=parseInt(a[1]),i.month=parseInt(s[1]),i.day=parseInt(s[2]),i.state=o.state,i.awards=o.reward_goods,i.actID=t.act_id,i.conID=o.condition_id,i.iconId=t.icon_id,i.bannerFinish=parseInt(a[5]),i.openBanner="true"==a[4]?1:0,e.items[n]=i}}return e},t.makeExchangeVO=function(t,e){var i,s;if((e=e||new oi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.materialTotals=[],e.desc=t.str_args[0],e.help=t.str_args[1],e.actID=t.act_id,e.iconID=t.icon_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];i=o.condition_str.split("#"),e.items[n]=e.items[n]||new ni,(s=e.items[n]).getTime=i[1],s.maxTime=i[2],s.actID=t.act_id,s.conID=o.condition_id,s.materials=o.condition_goods,s.products=o.reward_goods,s.state=o.state,e.items[n]=s}}return e},t.makeLimitVO=function(t,e){var i,s;if((e=e||new mi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.help=t.str_args[1],e.iconId=t.icon_id,e.actID=t.act_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new pi,(s=e.items[n]).actID=t.act_id,s.conID=o.condition_id,s.state=o.state,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.origPrice=parseInt(i[1]),s.realPrice=parseInt(i[2]),s.consumeType=parseInt(i[3]),s.saleTag=parseInt(i[4]),s.vipNeed=parseInt(i[5]),s.totalBuyNum=parseInt(i[6]),s.color=parseInt(i[7]),s.label=parseInt(i[8]),s.goods=o.reward_goods,s.iconId=t.icon_id,e.items[n]=s}}return e},t.makeOnlineVO=function(t,e){var i,s;if((e=e||new gi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.help=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new _i,(s=e.items[n]).actID=t.act_id,s.conID=o.condition_id,s.state=o.state,s.iconId=t.icon_id,i=o.condition_str.split("#"),s.onlineTime=parseInt(i[1]),s.needTime=parseInt(i[2]),s.goods=o.reward_goods,e.items[n]=s}}return e},t.makeDiscountsVO=function(t,e){var i,s;if((e=e||new si).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.help=t.str_args[1],e.iconId=t.icon_id,e.actID=t.act_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new ii,(s=e.items[n]).actID=t.act_id,s.conID=o.condition_id,s.state=o.state,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.origPrice=parseInt(i[1]),s.realPrice=parseInt(i[2]),s.rewardGoods=o.reward_goods,s.iconId=t.icon_id,e.items[n]=s}}return e},t.makeStandVO=function(t,e){if((e=e||new Zi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.help=t.str_args[1],e.actID=t.act_id,e.conditions=e.conditions||[],t.act_conditions){var i;e.conditions.length=t.act_conditions.length;for(var s=0;s<t.act_conditions.length;s++){var n=t.act_conditions[s];e.conditions[s]=new $i,(i=e.conditions[s]).awards=n.reward_goods,i.pow=parseInt(n.condition_str.split("#")[1]),i.conID=n.condition_id,i.state=n.state,i.actID=t.act_id,e.conditions[s]=i}}return e},t.makeStandRankVO=function(t,e){var i,s;if((e=e||new zi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.help=t.str_args[1],e.items=e.items||[],t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Qi,s=e.items[n],i=o.condition_str.split("#"),s.rank=parseInt(i[1]),s.pow=parseInt(i[i.length-2]),e.rankID=parseInt(i[i.length-3]),e.displayId=parseInt(i[i.length-1]),s.award=o.reward_goods,e.items[n]=s}}return e},t.makeTotalSignVO=function(t,e){var i,s;if((e=e||new qi).desc=t.str_args[0],e.help=t.str_args[1],e.items=e.items||[],t.act_conditions){e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Wi,s=e.items[n],i=o.condition_str.split("#"),e.nowSign=parseInt(i[0]),s.day=parseInt(i[1]),s.awards=o.reward_goods,s.conID=o.condition_id,s.actID=t.act_id,s.state=o.state,e.items[n]=s}}return e},t.makeTodaySignVO=function(t,e){if((e=e||new qi).desc=t.str_args[0],e.help=t.str_args[1],e.items=e.items||[],t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Wi,s=e.items[n],i=o.condition_str.split("#"),s.day=parseInt(i[0]),e.openBanner="true"==i[1]?1:0,s.awards=o.reward_goods,s.conID=o.condition_id,s.actID=t.act_id,s.state=o.state,e.items[n]=s}}return e},t.makeConsumeVo=function(t,e){if((e=e||new ki).actID=t.act_id,e.items=e.items||[],t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Ti,i=e.items[n],s=o.condition_str.split("#"),i.conditionId=o.condition_id,i.boxComsumeType=parseInt(s[1]),0==i.boxComsumeType?(i.price=parseInt(s[2]),i.OpenTimes=parseInt(s[3])):1==i.boxComsumeType?(i.price=parseInt(s[2]),i.boxItem=parseInt(s[3]),i.itemNum=parseInt(s[4]),i.OpenTimes=parseInt(s[5])):2==i.boxComsumeType&&(i.boxItem=parseInt(s[2]),i.itemNum=parseInt(s[3]),i.OpenTimes=parseInt(s[4])),e.items[n]=i}}return e},t.makeRestoreVo=function(t,e){if((e=e||new Hi).desc=t.str_args[0],e.help=t.str_args[1],e.actID=t.act_id,e.items=e.items||[],t.act_conditions){var i;e.items.length=t.act_conditions.length;for(var s=[],n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Gi,(i=e.items[n]).conGoods=o.condition_goods,i.conID=o.condition_id,i.conStr=o.condition_str,i.items=o.reward_goods,i.state=o.state,s=o.condition_str.split("#"),i.needNum=parseInt(s[1]),i.itemID=parseInt(s[2]),i.num=parseInt(s[3]),e.items[n]=i}}return e},t.makeRechargeRestoreVo=function(t,e){if((e=e||new Ui).startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.help=t.str_args[1],e.actID=t.act_id,e.items=e.items||[],t.act_conditions){var i;e.items.length=t.act_conditions.length;for(var s=[],n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Fi,(i=e.items[n]).conGoods=o.condition_goods,i.conID=o.condition_id,i.items=o.reward_goods,i.state=o.state,s=o.condition_str.split("#"),i.costScore=parseInt(s[0]),i.goldScore=parseInt(s[1]),i.exchangeTimes=parseInt(s[2]),e.items[n]=i}}return e},t.makeRandomVo=function(t,e){if((e=e||new Mi).desc=t.str_args[0],e.help=t.str_args[1],e.items=e.items||[],t.act_conditions){var i;e.items.length=t.act_conditions.length;for(var s=0;s<t.act_conditions.length;s++){var n=t.act_conditions[s];e.items[s]=e.items[s]||new Bi,(i=e.items[s]).conID=n.condition_id,i.conStr=n.condition_str,i.conGoods=n.condition_goods,i.rewards=n.reward_goods,i.state=n.state,e.items[s]=i}}return e},t.makeCountDownVo=function(t,e){if((e=e||new Ri).actID=t.act_id,e.items=[],t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new Ei,s=e.items[n],i=o.condition_str.split("#"),s.nextTime=parseInt(i[1]),s.conditionID=o.condition_id,s.rewardGoods=o.reward_goods,e.openBanner="true"==i[2],e.maxBannerNum=parseInt(i[3]),e.getBannerNum=parseInt(i[4]),e.finishBanner=parseInt(i[5]),e.items[n]=s}}return e},t.makeDisplayVO=function(t,e){return(e=e||new Oi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.help=t.str_args[1],e.actID=t.act_id,e.items=t.act_conditions[0].reward_goods,e},t.makeCopyDropRewardVO=function(t,e){if((e=e||new Ai).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.conditions=e.conditions||[],t.act_conditions){e.conditions.length=t.act_conditions.length;for(var i=0;i<t.act_conditions.length;i++){var s=t.act_conditions[i],n=s.reward_goods[0],o=s.state;e.conditions[i]=e.conditions[i]||new Object;var a=e.conditions[i];a.reward=n,a.state=o,e.conditions[i]=a}}return e},t.makeFamilyBattleRewardVO=function(t,e){if((e=e||new Li).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.rule=t.str_args[1],e.conditions=e.conditions||[],t.act_conditions)for(var i=0,s=t.act_conditions.length;i<s;i++){var n=t.act_conditions[i];e.conditions[i]=e.conditions[i]||new Object;var o=e.conditions[i];o.rewards=n.reward_goods,o.state=n.state,o.rankIndex=i+1,o.actId=t.act_id,o.conId=n.condition_id,e.conditions[i]=o}return e},t.makeAddSendFlowerVO=function(t,e){if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],t.act_conditions){var i;e.items.length=t.act_conditions.length;for(var s=0;s<t.act_conditions.length;s++){var n=t.act_conditions[s],o=n.condition_str.split("#");e.items[s]=e.items[s]||new Xi,(i=e.items[s]).now=o[0],i.need=o[1],i.state=n.state,i.awards=n.reward_goods,i.actID=t.act_id,i.conID=n.condition_id,e.items[s]=i}}return e},t.makeConstellationVO=function(t,e){if((e=e||new Pi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.act_id=t.act_id,e.allPrice=[],e.allProgreess=[],e.allMinProgress=[],e.allMaxProgress=[],e.allReturnPro=[],e.allCurProgress=[],e.items=[],e.allPrizeId=[],e.allFreeTimes=[],e.openBanner=[],e.getBannerNum=[],e.maxBannerNum=[],e.finishBanner=[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.conditions=e.conditions||[],t.act_conditions){e.conditions.length=t.act_conditions.length;for(var i=0;i<t.act_conditions.length;i++){var s=t.act_conditions[i],n=s.condition_str.split("#");e.allPrizeId[i]=s.condition_id,e.allPrice[i]=n[0],e.allProgreess[i]=n[1],e.allMinProgress[i]=n[2],e.allMaxProgress[i]=n[3],e.allReturnPro[i]=n[4],e.allCurProgress[i]=n[5],e.allFreeTimes[i]=n[6],e.openBanner[i]="true"==n[7],e.maxBannerNum[i]=parseInt(n[8]),e.getBannerNum[i]=parseInt(n[9]),e.finishBanner[i]=parseInt(n[10]),e.items[i]=s.reward_goods,e.conditions[i]=s}}return e},t.mackGroupPKVo=function(t,e){if((e=e||new Ni).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.rule=t.str_args[1],e.conditions=e.conditions||[],t.act_conditions){e.conditions.length=t.act_conditions.length;for(var i=0;i<t.act_conditions.length;i++){var s=t.act_conditions[i],n=s.condition_str.split("#");e.conditions[i]=e.conditions[i]||new Object;var o=e.conditions[i];o.selfCampId=n[0],o.needGoldNum=n[1],o.freCnt=n[2],o.maxFreeCnt=n[3],o.succItemId=n[4],o.failItemId=n[5],o.CampIdAndNumOne=n[6],o.CampIdAndNumTwo=n[7],o.conditionId=s.condition_id,e.conditions[i]=o}}return e},t.makeServerLimitBuyVO=function(t,e){if((e=e||new bi).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.help=t.str_args[1],e.iconId=t.icon_id,e.actID=t.act_id,t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new wi,(s=e.items[n]).actID=t.act_id,s.conID=o.condition_id,s.state=o.state,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.origPrice=parseInt(i[1]),s.realPrice=parseInt(i[2]),s.consumeType=parseInt(i[3]),s.saleTag=parseInt(i[4]),s.vipNeed=parseInt(i[5]),s.roleCanBuy=parseInt(i[6]),s.iconId=t.icon_id,s.goods=o.reward_goods,e.items[n]=s}}return e},t.makeAllWelfareVO=function(t,e){var i;if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){e.items.length=t.act_conditions.length;for(var s=0;s<t.act_conditions.length;s++){var n=t.act_conditions[s];e.items[s]=e.items[s]||new Ii,(i=e.items[s]).state=n.state,i.hasGet=parseInt(n.condition_str),i.awards=n.reward_goods,i.actID=t.act_id,i.conID=n.condition_id,i.iconId=t.icon_id,e.items[s]=i}}return e},t.makeJuBaoVO=function(t,e){if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new ci,(s=e.items[n]).state=o.state,s.actID=t.act_id,s.conID=o.condition_id,s.iconId=t.icon_id,s.goods=o.reward_goods,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.needKillNum=parseInt(i[1]),s.nowKillNum=parseInt(i[2]),e.items[n]=s}}return e},t.makeHuXian1VO=function(t,e){if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new li,(s=e.items[n]).state=o.state,s.actID=t.act_id,s.conID=o.condition_id,s.iconId=t.icon_id,s.goods=o.reward_goods,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.origPrice=parseInt(i[1]),s.realPrice=parseInt(i[2]),s.consumeType=parseInt(i[3]),s.saleTag=parseInt(i[4]),s.vipNeed=parseInt(i[5]),s.deblock=parseInt(i[6]),e.items[n]=s}}return e},t.makeHuXian2VO=function(t,e){if((e=e||new Ki).startTime=t.start_act_time,e.endTime=t.end_act_time,e.items=e.items||[],e.desc=t.str_args[0],e.rule=t.str_args[1],e.iconId=t.icon_id,t.act_conditions){var i,s;e.items.length=t.act_conditions.length;for(var n=0;n<t.act_conditions.length;n++){var o=t.act_conditions[n];e.items[n]=e.items[n]||new ri,(s=e.items[n]).state=o.state,s.actID=t.act_id,s.conID=o.condition_id,s.iconId=t.icon_id,s.goods=o.reward_goods,i=o.condition_str.split("#"),s.canBuyNum=parseInt(i[0]),s.origPrice=parseInt(i[1]),s.realPrice=parseInt(i[2]),s.consumeType=parseInt(i[3]),s.saleTag=parseInt(i[4]),s.vipNeed=parseInt(i[5]),s.deblock=parseInt(i[6]),e.items[n]=s}}return e},t.makeBaguaFurnaceVO1=function(t,e){if((e=e||new Ai).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.conditions=e.conditions||[],t.act_conditions)for(var i=0;i<t.act_conditions.length;i++){var s=t.act_conditions[i],n=new Object,o=s.condition_str.split("#");n.state=s.state,n.conditionId=s.condition_id,n.desc=t.str_args[0],n.help=t.str_args[1],n.goodId=parseInt(o[0]),n.goodNum=parseInt(o[1]),n.lotteryTimes=parseInt(o[2]),n.timestamp=parseInt(o[3]),n.lucyGoodsID=parseInt(o[4]),n.hasRandoms=parseInt(o[5]),n.maxRandoms=parseInt(o[6]),e.conditions.push(n)}return e},t.makeBaguaFurnaceVO2=function(t,e){if((e=e||new Ai).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.conditions=[],t.act_conditions)for(var i=0;i<t.act_conditions.length;i++){var s=t.act_conditions[i],n=new Object,o=s.condition_str.split("#");n.state=s.state,n.conditionId=s.condition_id,n.desc=t.str_args[0],n.help=t.str_args[1],n.goodId=parseInt(o[0]),n.goodNum=parseInt(o[1]),n.lotteryTimes=parseInt(o[2]),n.timestamp=parseInt(o[3]),n.lucyGoodsID=parseInt(o[4]),n.canBuyNum=parseInt(o[5]),e.conditions.push(n)}return e},t.makeLuckyDayVO=function(t,e){if((e=e||new Vi).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.desc=t.str_args[0],e.help=t.str_args[1],t.act_conditions[0]){var i=t.act_conditions[0].condition_str.split("#");e.conID=i[0],e.targetID=parseInt(i[1]),e.buyState=parseInt(i[2]),e.boxItem=parseInt(i[3]),e.boxNum=parseInt(i[4]),e.oPrice=i[5],e.bPrice=i[6],e.consumeType=parseInt(i[7]),e.payID=parseInt(i[8]),e.showItems=i[9].split("_"),e.todayDeblock=parseInt(i[10])}else e.conditions=[];return e},t.makeFreeMallVO=function(t,e){var i;(e=e||new Di).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.desc=t.str_args[0],e.help=t.str_args[1];for(var s,n=[],o=0;o<t.act_conditions.length;o++)if(i=new Yi,""!=(s=t.act_conditions[o]).condition_str){var a=s.condition_str.split("#");i.conditionID=a[0],i.typeID=a[1],i.num=a[2],i.oldPrice=a[3],i.commonPrice=a[4],i.vipPrice=a[5],i.sVipPrice=a[6],i.discount=a[7],i.vipLv=a[8],i.boxConsumeType=a[9],i.actID=e.actID,n.push(i)}return e.items=n,e},t.makeConsumeBackVO=function(t,e){var i;(e=e||new Je).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.startRewardTime=t.start_reward_time,e.endRewardTime=t.end_reward_time,e.desc=t.str_args[0],e.rule=t.str_args[1],e.payGold=t.act_conditions[0].condition_str.split("#")[6],e.payLv=t.act_conditions[0].condition_str.split("#")[7],e.joinTime=t.act_conditions[0].condition_str.split("#")[8],e.deblockTime=t.act_conditions[0].condition_str.split("#")[11];for(var s,n,o=[],a=0;a<t.act_conditions.length;a++)if(i=new Ze,""!=(s=t.act_conditions[a]).condition_str){var l=s.condition_str.split("#");i.actID=t.act_id,i.conID=l[0],i.backPer=parseInt(l[1]),i.itemPayGold=l[2],i.gainDay=l[3],i.itemID=l[4],i.num=l[5],i.gainTime=l[9],i.canGain=l[10],i.flashEff=l[12],o.push(i)}for(n in e.items=o,e.items){if((i=e.items[n]).itemPayGold==e.payLv){e.gainTime=i.gainTime;break}e.gainTime=0}return e},t.makeProductNoticeVO=function(t,e){var i;(e=e||new yi).actID=t.act_id,e.iconId=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.goods=[],e.linkid=[],e.scale=[],e.flash=[];for(var s=0;s<t.act_conditions.length;s++)if(new yi,""!=(i=t.act_conditions[s]).condition_str){var n=i.condition_str.split("#");e.hasShow=n[0];for(var o=1;o<n.length;o++){var a=n[o].split(",");e.goods.push(a[0]),e.scale.push(a[1]),e.flash.push(a[2]),e.linkid.push(a[3])}}return e},t.makeYunYouVO=function(t,e){var i,s,n;(e=e||new ts).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.rule=t.str_args[1];for(var o=[],a=0;a<t.act_conditions.length;a++){var l=(s=t.act_conditions[a]).condition_str.split("#");e.curRound=parseInt(l[1]),e.timePerRound=parseInt(l[2]),e.buyTimesCommon=parseInt(l[3]),e.buyTimesVip=parseInt(l[4]),e.totalBuyTimes=parseInt(l[5]),e.maxRewardValue=parseInt(l[8]),e.minRewardValue=parseInt(l[9]),(i=new Object).className="p_kv",i.id=parseInt(l[10].split(",")[0]),i.val=parseInt(l[10].split(",")[1]),e.luckyItem=i;for(var r=[],h=11;h<l.length;h++)(i=new Object).className="p_kv",i.id=l[h].split(",")[0],i.val=l[h].split(",")[1],r.push(i);e.randomItems=r,(n=new is).conID=s.condition_id,n.buyTimes=parseInt(l[6]),n.costTime=parseInt(l[7].split(",")[2]),n.cost=parseInt(l[7].split(",")[1]),n.costTypeID=parseInt(l[7].split(",")[0]),o.push(n)}return e.info=o,e},t.makeBargainVO=function(t,e){var i,s;(e=e||new ze).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.goodsItem=[];for(var n=[],o=0;o<t.act_conditions.length;o++)if(""!=(i=t.act_conditions[o]).condition_str){var a=i.condition_str.split("#");(s=new $e).ItemID=parseInt(a[0]),s.ItemNum=parseInt(a[1]),s.MaxPrice=parseInt(a[2]),s.MinPrice=parseInt(a[3]),s.LimitTimes=parseInt(a[4]),s.CutPrice=parseInt(a[5]),s.HasTimes=parseInt(a[6]),e.NowHelpTimes=parseInt(a[7]),e.MaxHelpTimes=parseInt(a[8]),s.Index=o,n.push(s)}return e.goodsItem=n,e},t.makeDialVO=function(t,e){var i;(e=e||new ti).actID=t.act_id,e.iconID=t.icon_id,e.startTime=t.start_act_time,e.endTime=t.end_act_time,e.desc=t.str_args[0],e.totalGold=t.str_args[2],e.remainTime=parseInt(t.str_args[3]),e.multiple=t.str_args[4].split("#"),i=t.str_args[5].split("#");for(var s=[],n=0;n<i.length;n++){var o=new Object;o.className="p_kv",o.id=i[n].split("|")[0],o.val=i[n].split("|")[1],s.push(o)}if(e.rate_list=s,5<t.str_args.length){i=[];for(var a=6;a<t.str_args.length;a++)i.push(t.str_args[a]);e.records=i}i=[];for(var l,r,h=t.act_conditions[0],u=0;u<h.reward_goods.length;u++){l=h.reward_goods[u],r=ur.getItem(l.type_id);var c={};c.good=r,c.num=l.num,i.push(c)}return e.goods=i,e},t}(),je=function(){function e(){}return w(e,"modules.activity.bagua.BaguaMgr"),I(1,e,"canNotShowEffect",function(){return e._canNotShowEffect},function(t){e._canNotShowEffect=t}),e.cheackCanUseAcer=function(t){return pe.gold>=e.needAcer[t-1]},e.checkBaguaActRedPoint=function(t){0<e.timeOutKey&&_t.clearTimeout(e.timeOutKey),e.cdDiff=t-ya.serverTime,e.timeOutKey=_t.setTimeout(e,modules.activity.bagua.BaguaMgr.showRedPoint,[],1e4*e.cdDiff)},e.showRedPoint=function(){He.getInstance().updateRPByIconID(310);vi.is_Mask_Act_Bagua;T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_ICON_LEVEL_GIFT",!1])},e.unShowRedPoint=function(){T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_ICON_LEVEL_GIFT",!1])},e.clickType=0,e.openBoxRewardArr=null,e._canNotShowEffect=!1,e.cdDiff=-1,e.timeOutKey=-1,e.hasRp=!0,_(e,["needAcer",function(){return this.needAcer=[10,90]},"needDivination",function(){return this.needDivination=[1,10]},"divinationTimes",function(){return this.divinationTimes=[1,10]}]),e}(),Qe=function(){function s(){}return w(s,"modules.activity.bannerQQ.BannerQQMgr"),s.initXml=function(){null==s._configs&&(s._configs=Ra.startEncode("bannerQQ.xml"))},s.getConfigVOById=function(t){var e;for(var i in s.initXml(),s._configs)if((e=s._configs[i]).id==t)return e;return null},s.getListArr=function(){var t;if(s.initXml(),s.itemArr=s.itemArr||[],s._configs&&0==s.itemArr.length)for(var e in s._configs){t=s._configs[e];var i=new Object;i.className="p_kv",i.id=t.id,i.val=0,s.itemArr.push(i)}return s.itemArr},s.showRedPoint=function(t){void 0===t&&(t=!1),T.dispatch("ICON_REDPOINT_CHANGE",[5013,"RP_BANNERQQ",t])},s._configs=null,s.videoID=0,s.itemArr=null,s}(),ze=function(){function t(){this.actID=0,this.iconID=0,this.startTime=0,this.endTime=0,this.desc=null,this.goodsItem=null,this.MaxHelpTimes=0,this.NowHelpTimes=0}return w(t,"modules.activity.bargain.ActBargainVo"),t}(),$e=function(){function t(){this.ItemID=0,this.ItemNum=0,this.MaxPrice=0,this.MinPrice=0,this.LimitTimes=0,this.CutPrice=0,this.HasTimes=0,this.Index=0}return w(t,"modules.activity.bargain.BargainSubVo"),t}(),Ze=function(){function t(){this.actID=0,this.conID=0,this.backPer=0,this.itemPayGold=0,this.gainDay=0,this.itemID=0,this.num=0,this.gainTime=0,this.canGain=!1,this.flashEff=!1}return w(t,"modules.activity.consumeBack.ActConsumeBackItemVO"),t}(),Je=function(){function t(){this.actID=0,this.iconID=0,this.startTime=0,this.endTime=0,this.startRewardTime=0,this.endRewardTime=0,this.desc=null,this.rule=null,this.items=null,this.payGold=0,this.payLv=0,this.joinTime=0,this.gainTime=0,this.deblockTime=0}return w(t,"modules.activity.consumeBack.ActConsumeBackVO"),t}(),ti=(function(){function s(){}w(s,"modules.activity.consumeBack.ConsumeBackMgr"),I(1,s,"minPayLv",function(){return s.pay?s.pay[0]:-1}),s.setPayLv=function(t){var e;if(!s.lv||!s.pay)for(var i in t.sort(s.sortByPer),s.lv=[],s.pay=[],t)e=t[i],s.lv.push(e.backPer),s.pay.push(e.itemPayGold)},s.getPayLv=function(t){return s.lv&&s.pay?s.lv[s.pay.indexOf(t)]:0},s.getNextPayGold=function(t){if(s.pay){var e=s.pay.indexOf(t);if(0<=e&&s.pay[e+1])return s.pay[e+1]}return-1},s.sortByGain=function(t,e){return 1==e?t.sort(s.sortByCanGain):t.sort(s.sortByPer),t},s.sortByPer=function(t,e){return t.backPer<e.backPer?-1:t.backPer>e.backPer?1:0},s.sortByCanGain=function(t,e){return"true"==t.canGain||s.consumeBackVO&&t.itemPayGold==s.consumeBackVO.payLv?-1:"true"==e.canGain||s.consumeBackVO&&e.itemPayGold==s.consumeBackVO.payLv?1:void s.sortByPer(t,e)},s.getCanGain=function(t){if(s.consumeBackVO&&s.consumeBackVO.joinTime<=0&&t&&0<s.consumeBackVO.gainTime){if("true"==t.canGain)return 1;if(t.itemPayGold==s.consumeBackVO.payLv)return 2}return 0},s.consumeBackVO=null,s.lv=null,s.pay=null}(),function(){function t(){this._targetId=0,this._row=null,this._rewards=null}w(t,"modules.activity.customStand.CustomRankVo");var e=t.prototype;I(0,e,"rewards",function(){return this._rewards},function(t){this._rewards=t}),I(0,e,"row",function(){return this._row},function(t){this._row=t}),I(0,e,"targetId",function(){return this._targetId},function(t){this._targetId=t})}(),function(){function t(){this.actID=0,this.iconID=0,this.startTime=0,this.endTime=0,this.goods=null,this.desc=null,this.totalGold=0,this.remainTime=0,this.multiple=null,this.rate_list=null,this.records=null}return w(t,"modules.activity.dial.ActDialVO"),t}()),ei=function(){function t(){}return w(t,"modules.activity.dial.DialMgr"),t.seq=0,t.multiple=0,t.rewardList=null,t.rotating=!1,t}(),ii=function(){function t(){this.actID=0,this.conID=0,this.state=0,this.rewardGoods=null,this.canBuyNum=0,this.origPrice=0,this.realPrice=0,this.iconId=0}return w(t,"modules.activity.discounts.vo.ActDiscountsItemVO"),t}(),si=function(){function t(){this.startTime=0,this.endTime=0,this.items=null,this.desc=null,this.help=null,this.iconId=0,this.actID=NaN}return w(t,"modules.activity.discounts.vo.ActDiscountsVO",null,"ActDiscountsVO$1"),t}(),ni=function(){function t(){this.materials=null,this.products=null,this.getTime=0,this.maxTime=0,this.actID=0,this.conID=0,this.state=0}return w(t,"modules.activity.exchange.vo.ActExchangeItemVO"),t}(),oi=function(){function t(){this.startTime=0,this.endTime=0,this.materialTotals=null,this.items=null,this.desc=null,this.help=null,this.actID=NaN,this.iconID=0}return w(t,"modules.activity.exchange.vo.ActExchangeVO"),t}(),ai=function(){function s(){}return w(s,"modules.activity.fortuneDay.FortuneDayMgr"),I(1,s,"luckyEvent",function(){return s._luckyEvent},function(t){s._luckyEvent=t}),I(1,s,"selectCardsState",function(){return s._selectCardsState},function(t){0<=t&&t<=2&&(s._selectCardsState=t)}),I(1,s,"showEventArr",function(){return s._showEventArr},function(t){s._showEventArr=t}),s.initXml=function(){null==s._configs&&(s._configs=Ra.startEncode("actFortuneDay.xml"))},s.getConfigVOById=function(t){var e;for(var i in s.initXml(),s._configs)if((e=s._configs[i]).id==t)return e;return null},s.getLuckyEventType=function(){if(s.luckyEvent){var t=modules.activity.fortuneDay.FortuneDayMgr.getConfigVOById(s.luckyEvent.event_id);if(t)return t.event_type}return-1},s.getPayIDByEventID=function(){if(s.luckyEvent){var t=modules.activity.fortuneDay.FortuneDayMgr.getConfigVOById(s.luckyEvent.event_id);if(t)return t.payID}return 0},s.checkRedPoint=function(){-1!=s.actIconId&&(null!=s._luckyEvent?0==s._luckyEvent.state||1==s._luckyEvent.state?(T.dispatch("ICON_REDPOINT_CHANGE",[4014,"RP_ICON_FORTUNE_DAY_ACT",!0]),1==s._luckyEvent.state&&Ma.getInstance().showActIconRedPoint(modules.activity.fortuneDay.FortuneDayMgr.actIconId)):T.dispatch("ICON_REDPOINT_CHANGE",[4014,"RP_ICON_FORTUNE_DAY_ACT",!1]):Ma.getInstance().toLuckyDetail())},s.startTime=NaN,s.endTime=NaN,s._selectCardsState=0,s._configs=null,s._luckyEvent=null,s._showEventArr=null,s.selectCardIndex=-1,s.actIconId=-1,s.isOpenTheFortuneDayPanel=!1,s}(),li=(function(){function s(){}w(s,"modules.activity.freeMall.FreeMallMgr"),I(1,s,"myOrderLog",function(){var t,e=[];if(s._logArr&&0<s._logArr.length)for(var i in s._logArr)(t=s._logArr[i]).name==pe.roleName&&e.push(t);return e&&0<e.length&&e.sort(s.sortOnBuyTime),e}),s.sortOnBuyTime=function(t,e){return t.buy_ts>e.buy_ts?-1:1},s._logArr=null}(),function(){function t(){this.actID=0,this.conID=0,this.state=0,this.canBuyNum=0,this.origPrice=0,this.realPrice=0,this.consumeType=0,this.saleTag=0,this.vipNeed=0,this.deblock=0,this.iconId=0,this.goods=null}return w(t,"modules.activity.huxian.HuXianVo1"),t}()),ri=function(){function t(){this.actID=0,this.conID=0,this.state=0,this.canBuyNum=0,this.origPrice=0,this.realPrice=0,this.consumeType=0,this.saleTag=0,this.vipNeed=0,this.deblock=0,this.iconId=0,this.goods=null}return w(t,"modules.activity.huxian.HuXianVo2"),t}(),hi=function(){function l(){}return w(l,"modules.activity.jinliDFS.JinLiDFSMgr"),I(1,l,"taskInfo",null,function(t){var e;for(var i in l._taskInfo=new P,t)e=t[i],l._taskInfo[e.id+""]=e}),I(1,l,"totalProcess",null,function(t){var e;for(var i in l._totalProcess=new P,t)e=t[i],l._totalProcess[e.id+""]=e.val}),I(1,l,"rewardProcess",null,function(t){var e;for(var i in l._rewardProcess=new P,t)e=t[i],l._rewardProcess[e.id+""]=e.val}),I(1,l,"isShowRedPoint",function(){for(var t=1;t<=3;t++)for(var e=l.getTotalProcess(t),i=l.getRewardInterval(t),s=l.getRewardProcess(t),n=0;n<i.length;n++)if(e>=parseInt(i[n])&&s<parseInt(i[n]))return!0;return!1}),l.getTaskInfo=function(t){return l._taskInfo&&l._taskInfo.hasOwnProperty(t+"")?l._taskInfo[t+""]:null},l.getTotalProcess=function(t){return l._totalProcess&&l._totalProcess.hasOwnProperty(t+"")?l._totalProcess[t+""]:0},l.updateRewardProcess=function(t,e){l._rewardProcess&&(l._rewardProcess[t+""]=e)},l.getRewardProcess=function(t){return l._rewardProcess&&l._rewardProcess.hasOwnProperty(t+"")?l._rewardProcess[t+""]:0},l.showRedPoint=function(){Nt.hide("RP_JINLIDFS_COPY"),Nt.hide("RP_JINLIDFS_COST"),Nt.hide("RP_JINLIDFS_ACTIVE");for(var t=1;t<=3;t++)for(var e=l.getTotalProcess(t),i=l.getRewardInterval(t),s=l.getRewardProcess(t),n=0;n<i.length;n++)e>=parseInt(i[n])&&s<parseInt(i[n])&&(1==t?Nt.show("RP_JINLIDFS_COPY"):2==t?Nt.show("RP_JINLIDFS_COST"):3==t&&Nt.show("RP_JINLIDFS_ACTIVE"))},l.init=function(){if(1!=l.inited){l.jinliDFSDic=new P,l.jinliDFSRewardDic=new P;var t,e=[],i=[],s=[],n=[],o=Ra.startEncode("jinliDFS.xml");for(var a in o)(t=o[a])instanceof xml.JinliItemVO?1==parseInt(t.id/1e3+"")?e.push(t):2==parseInt(t.id/1e3+"")?i.push(t):3==parseInt(t.id/1e3+"")&&(3016!=t.id&&s.push(t),n.push(t)):t instanceof xml.JinliRewardVO&&(l.jinliDFSRewardDic[t.type+""]=t.rewardInterval);l.jinliDFSDic[1]=e,l.jinliDFSDic[2]=i,l.jinliDFSDic[3]=s,l.jinliDFSDic[103]=n,l.inited=!0}},l.getTask=function(t){l.init();var e=[];return l.jinliDFSDic&&l.jinliDFSDic.hasOwnProperty(t+"")&&(e=2==t?l.handleTask(l.jinliDFSDic[t+""]):1==t?l.handleTask(l.jinliDFSDic[t+""]):1==pe.qqBannerOpen?l.jinliDFSDic[t+100+""]:l.jinliDFSDic[t+""]),e},l.handleTask=function(t){var e,i=[],s=pe.myRegrow;for(var n in t)e=t[n],s<8&&-1!=l.TASK_MORE.indexOf(e.id)||8<=s&&-1!=l.TASK_LESS.indexOf(e.id)||1003==e.id&&Os.isMaxBarrier(Os.curBarrier)||1005==e.id&&Hs.infoToc&&101<=Hs.infoToc.current_barrier||2010==e.id&&An.isAllRefineMaxLv||i.push(e);return i},l.getRewardInterval=function(t){return l.init(),l.jinliDFSRewardDic&&l.jinliDFSRewardDic.hasOwnProperty(t+"")?l.jinliDFSRewardDic[t+""].split(","):[]},l._taskInfo=null,l._totalProcess=null,l._rewardProcess=null,l.COPYDREAM=1003,l.TALISMANCOPY=1005,l.FIREREFINE=2010,l.inited=!1,l.jinliDFSDic=null,l.jinliDFSRewardDic=null,_(l,["TASK_LESS",function(){return this.TASK_LESS=[2005,2006,2007,2008]},"TASK_MORE",function(){return this.TASK_MORE=[2009,2010,2011,2012]}]),l}(),ci=function(){function t(){this.actID=0,this.conID=0,this.state=0,this.canBuyNum=0,this.needKillNum=0,this.origPrice=0,this.realPrice=0,this.consumeType=0,this.saleTag=0,this.vipNeed=0,this.nowKillNum=0,this.iconId=0,this.goods=null}return w(t,"modules.activity.jubao.JuBaoVo"),t}(),di=function(){function a(){}return w(a,"modules.activity.levelGift.ActLevelGiftManager"),I(1,a,"conditions",null,function(t){var e,i,s=t.sort(a.sortConditions);for(var n in a._conditionsDic={},s)i=s[n],(e=a.getConfigVOById(i.id))&&(null==a._conditionsDic[e.type]&&(a._conditionsDic[e.type]=[]),a._conditionsDic[e.type].push(i))}),a.initXml=function(){null==a._configs&&(a._configs=Ra.startEncode("levelGift.xml"))},a.getConfigVOById=function(t){var e;for(var i in a.initXml(),a._configs)if((e=a._configs[i]).id==t)return e;return null},a.getConditionsById=function(t){var e;for(var i in a._conditionsDic){var s;for(var n in e=a._conditionsDic[i])if((s=e[n]).id==t)return s}return null},a.getCommonConditions=function(){return a._conditionsDic?a._conditionsDic[1]:null},a.getConditionsByType=function(t){return a._conditionsDic?a._conditionsDic[t]:null},a.updateConditionById=function(t,e){var i;for(var s in a._conditionsDic){var n;for(var o in i=a._conditionsDic[s])if((n=i[o]).id==t){n.val=e;break}i=i.sort(a.sortConditions)}},a.checkCommonConditionsIsAllGet=function(){var t=a.getCommonConditions();for(var e in t)if(3!=t[e].val)return!1;return!0},a.checkCommonRP=function(){var t,e=a.getCommonConditions();for(var i in e){if(1==(t=e[i]).val)return!0;if(2==t.val&&Ca.isHasCard())return!0}return!1},a.checkRedPoint=function(){a.checkCommonRP()?(T.dispatch("ICON_REDPOINT_CHANGE",[4010,"RP_ICON_LEVEL_GIFT",!0]),T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_ICON_LEVEL_GIFT",!0])):(T.dispatch("ICON_REDPOINT_CHANGE",[4010,"RP_ICON_LEVEL_GIFT",!1]),T.dispatch("ICON_REDPOINT_CHANGE",[310,"RP_ICON_LEVEL_GIFT",!1]))},a.sortConditions=function(t,e){var i=a.sortIndexs.indexOf(t.val),s=a.sortIndexs.indexOf(e.val);return s<i?1:i<s?-1:t.id>e.id?1:t.id<e.id?-1:0},a._conditionsDic=null,a._configs=null,_(a,["sortIndexs",function(){return this.sortIndexs=[1,2,0,3]}]),a}(),pi=function(){function t(){this.actID=0,this.conID=0,this.state=0,this.canBuyNum=0,this.totalBuyNum=0,this.origPrice=0,this.realPrice=0,this.consumeType=0,this.saleTag=0,this.vipNeed=0,this.goods=null,this.iconId=0,this.color=NaN,this.label=NaN}return w(t,"modules.activity.limit.vo.ActLimitItemVO"),t}(),mi=function(){function t(){this.startTime=0,this.endTime=0,this.items=null,this.desc=null,this.help=null,this.iconId=0,this.actID=NaN}return w(t,"modules.activity.limit.vo.ActLimitVO"),t}(),fi=function(){function s(){}return w(s,"modules.activity.luckyDay.LuckyDayMgr"),I(1,s,"luckyEvent",function(){return s._luckyEvent},function(t){s._luckyEvent=t}),I(1,s,"selectCardsState",function(){return s._selectCardsState},function(t){0<=t&&t<=2&&(s._selectCardsState=t)}),I(1,s,"showEventArr",function(){return s._showEventArr},function(t){s._showEventArr=t}),s.initXml=function(){null==s._configs&&(s._configs=Ra.startEncode("actFortuneDay.xml"))},s.getConfigVOById=function(t){var e;for(var i in s.initXml(),s._configs)if((e=s._configs[i]).id==t)return e;return null},s.getLuckyEventType=function(){},s.checkRedPoint=function(){-1!=s.actIconId&&null!=s._luckyEvent&&(0==s._luckyEvent.state||1==s._luckyEvent.state?(T.dispatch("ICON_REDPOINT_CHANGE",[4014,"RP_ICON_FORTUNE_DAY_ACT",!0]),s._luckyEvent.state):T.dispatch("ICON_REDPOINT_CHANGE",[4014,"RP_ICON_FORTUNE_DAY_ACT",!1]))},s.startTime=NaN,s.endTime=NaN,s._selectCardsState=0,s._configs=null,s._luckyEvent=null,s._showEventArr=null,s.selectCardIndex=-1,s.actIconId=-1,s.hasOpen=!1,s.isOpenTheFortuneDayPanel=!1,s}(),_i=function(){function t(){this.needTime=0,this.onlineTime=0,this.goods=null,this.state=0,this.actID=0,this.conID=0,this.iconId=0}return w(t,"modules.activity.online.vo.ActOnlineItemVO"),t}(),gi=function(){function t(){this.startTime=0,this.endTime=0,this.items=null,this.desc=null,this.help=null,this.item=null,this.iconId=0}return w(t,"modules.activity.online.vo.ActOnlineVO"),t}(),yi=function(){function t(){this.actID=0,this.iconId=0,this.goods=null,this.linkid=null,this.scale=null,this.flash=null,this.startTime=0,this.endTime=0,this.hasShow=0}return w(t,"modules.activity.productNotice.ProductNoticeVo"),t}(),vi=function(){function s(){}return w(s,"modules.activity.RPControl.ActRpUtils"),s.getIsMask=function(t,e){return"true"==ct.getItem(Kx.isSelectKey+"_"+t+"_"+e)},s.isAllMask=function(t){switch(t){case 1:for(var e=0,i=ra.DISCOUNT_ALL.length;e<i;e++)if(!s.getIsMask(1,ra.DISCOUNT_ALL[e]))return!1;return!0}return!1},s.updateMask=function(t){var e=He.getInstance().getHuanPiPanel(),i=He.getInstance().getActPanel(310);switch(t){case 1:case 2:e&&e.update();break;case 3:case 4:i&&i.update();break;case 5:break;default:return void console.warn("活动红点控制的数据错误!!!")}},s.IS_DISCOUNT_ALL_MASK=!1,s.IS_LIMIT_ALL_MASK=!1,s.IS_WISH_ALL_MASK=!1,s.is_Mask_Act_Discount=!1,s.is_Mask_Act_Limit=!1,s.is_Mask_Act_Wish=!1,s.is_Mask_Act_Bagua=!1,s.is_Mask_Act_Constellation=!1,s}(),Ii=function(){function t(){this.state=0,this.hasGet=0,this.awards=null,this.actID=0,this.conID=0,this.iconId=0}return w(t,"modules.activity.serverLimitBuy.AllWelfareVo"),t}(),wi=function(){function t(){this.actID=0,this.conID=0,this.state=0,this.canBuyNum=0,this.origPrice=0,this.realPrice=0,this.consumeType=0,this.saleTag=0,this.vipNeed=0,this.roleCanBuy=0,this.goods=null,this.iconId=0}return w(t,"modules.activity.serverLimitBuy.ServerLimitBuyItemVo"),t}(),bi=function(){function t(){this.startTime=0,this.endTime=0,this.items=null,this.desc=null,this.help=null,this.iconId=0,this.actID=NaN}return w(t,"modules.activity.serverLimitBuy.ServerLimitBuyVO"),t}(),Si=function(){function t(){}return w(t,"modules.activity.userBack.UserBackConst"),t.BACK_REWARD=1,t.EVERY_DAY=2,t.BIG_REWARD=3,t.FIRST_CHARGE=4,t.LIMIT_BUY=5,t}(),xi=function(){function t(){this._userBackCfg=null}w(t,"modules.activity.userBack.UserBackManger");var e=t.prototype;return e.initUserBackXml=function(){if(!this._userBackCfg){var t=Ra.startEncode("userBack.xml","id");this._userBackCfg=t}},e.getUserBackVO=function(t){return this.initUserBackXml(),this._userBackCfg[t]},e.getOldPriceArr=function(){return this.getUserBackVO(Si.LIMIT_BUY).oldPrice.split(",")},e.getNewPriceArr=function(){return this.getUserBackVO(Si.LIMIT_BUY).newPrice.split(",")},e.getLimitTime=function(){return""},e.getLimitBuyArr=function(){return this.getUserBackVO(Si.LIMIT_BUY).buyId.split(",")},I(0,e,"userBackCfg",function(){return this._userBackCfg||this.initUserBackXml(),this._userBackCfg}),I(1,t,"ins",function(){return t._ins=t._ins||new t}),t._ins=null,t}(),Ci=function(){function s(){}return w(s,"modules.activity.views.standard.ActStandardCfg"),s.init=function(){if(!s._has){s._has=!0,s.rankObj={},s.skinObj={};var t,e=Ra.startEncode("actStandard.xml");for(var i in e)(t=e[i])instanceof xml.ActStandardCfgRankVO?s.rankObj[t.id]=t:t instanceof xml.ActStandardCfgSkinVO&&(s.skinObj[t.key]=t)}},s.getStandardRankVO=function(t){return s.init(),t=Ko.transformUniqueIdToRankId(t),s.rankObj[t]},s.getStandardSkinVO=function(t,e){return s.init(),t=Ko.transformUniqueIdToRankId(t),s.skinObj[t+"_"+e]},s.rankObj=null,s.skinObj=null,s._has=!1,s}(),Pi=(function(){function t(){this.price=1,this.maxCanBuyNum=999,this.minCanBuyNum=1,this.titleTxt="温馨提示",this.useCurrency=1,this.goodsName="",this.yesFunc=null,this.yesFuncCaller=null,this.yesArgs=null,this.yesBtnVisible=!0,this.cancelFunc=null,this.cancelFuncCaller=null,this.cancelBtnVisible=!0,this.cancelArgs=null,this.actionName="购买",this.unitName="个",this.args=[],this.remaskStr="",this.timeForArgsIndex=-1}w(t,"modules.activity.vo.ActBuyGoodsAlertVO")}(),function(){function t(){this.startTime=NaN,this.endTime=NaN,this.act_id=NaN,this.items=null,this.allPrice=null,this.allProgreess=null,this.allMinProgress=null,this.allMaxProgress=null,this.allReturnPro=null,this.allCurProgress=null,this.allFreeTimes=null,this.allPrizeId=null,this.desc=null,this.rule=null,this.conditions=null,this.openBanner=null,this.maxBannerNum=null,this.getBannerNum=null,this.finishBanner=null}return w(t,"modules.activity.vo.ActConstellationVo"),t}()),Ti=function(){function t(){this.boxComsumeType=NaN,this.price=NaN,this.boxItem=NaN,this.itemNum=NaN,this.OpenTimes=NaN,this.conditionId=NaN}return w(t,"modules.activity.vo.ActConsumeSubVO"),t}(),ki=function(){function t(){this.items=null,this.actID=NaN}return w(t,"modules.activity.vo.ActConsumeVO"),t}(),Ai=function(){function t(){this.actID=NaN,this.startRewardTime=NaN,this.endRewardTime=NaN,this.iconID=NaN,this.startTime=NaN,this.endTime=NaN,this.conditions=null}return w(t,"modules.activity.vo.ActCopyDropRewardVO"),t}(),Ei=function(){function t(){this.nextTime=NaN,this.conditionID=NaN,this.rewardGoods=null}return w(t,"modules.activity.vo.ActCountDownSubVO"),t}(),Ri=function(){function t(){this.items=null,this.actID=NaN,this.openBanner=!1,this.maxBannerNum=0,this.getBannerNum=0,this.finishBanner=0}return w(t,"modules.activity.vo.ActCountDownVO"),t}(),Oi=function(){function t(){this.startTime=0,this.endTime=0,this.desc=null,this.help=null,this.items=null,this.actID=NaN}return w(t,"modules.activity.vo.ActDisplayVO"),t}(),Li=function(){function t(){this.actID=NaN,this.iconID=NaN,this.startTime=NaN,this.endTime=NaN,this.desc=null,this.rule=null,this.conditions=null}return w(t,"modules.activity.vo.ActFamilyBattleRewardVO"),t}(),Di=function(){function t(){this.startTime=0,this.endTime=0,this.startRewardTime=NaN,this.endRewardTime=NaN,this.items=null,this.desc=null,this.help=null,this.actID=NaN,this.iconID=0,this.conID=0,this.targetID=NaN}return w(t,"modules.activity.vo.ActFreeMallVO"),t}(),Ni=function(){function t(){this.actID=NaN,this.iconID=NaN,this.startTime=NaN,this.endTime=NaN,this.desc=null,this.rule=null,this.conditions=null}return w(t,"modules.activity.vo.ActGroupPkVO"),t}(),Vi=function(){function t(){this.startTime=0,this.endTime=0,this.startRewardTime=NaN,this.endRewardTime=NaN,this.conditions=null,this.items=null,this.desc=null,this.help=null,this.actID=NaN,this.iconID=0,this.conID=0,this.targetID=NaN,this.buyState=!1,this.boxItem=NaN,this.boxNum=NaN,this.oPrice=null,this.bPrice=null,this.consumeType=0,this.payID=NaN,this.showItems=null,this.todayDeblock=!1}return w(t,"modules.activity.vo.ActLuckyDayVO"),t}(),Bi=function(){function t(){this.conID=NaN,this.conStr=null,this.conGoods=null,this.rewards=null,this.state=NaN}return w(t,"modules.activity.vo.ActRandomSubVO"),t}(),Mi=function(){function t(){this.desc=null,this.help=null,this.items=null}return w(t,"modules.activity.vo.ActRandomVO"),t}(),Fi=function(){function t(){this.conGoods=null,this.conID=NaN,this.items=null,this.state=NaN,this.costScore=0,this.goldScore=0,this.exchangeTimes=0}return w(t,"modules.activity.vo.ActRechargeRestoreSubVO"),t}(),Ui=function(){function t(){this.startTime=0,this.endTime=0,this.desc=null,this.help=null,this.items=null,this.actID=NaN}return w(t,"modules.activity.vo.ActRechargeRestoreVO"),t}(),Gi=function(){function t(){this.conGoods=null,this.conID=NaN,this.conStr=null,this.items=null,this.state=NaN,this.needNum=NaN,this.itemID=NaN,this.num=NaN}return w(t,"modules.activity.vo.ActRestoreSubVO"),t}(),Hi=function(){function t(){this.desc=null,this.help=null,this.items=null,this.actID=NaN}return w(t,"modules.activity.vo.ActRestoreVO"),t}(),Wi=function(){function t(){this.day=0,this.awards=null,this.actID=NaN,this.conID=0,this.state=0}return w(t,"modules.activity.vo.ActSignSubVO"),t}(),qi=function(){function t(){this.nowSign=0,this.desc=null,this.help=null,this.items=null,this.openBanner=0}return w(t,"modules.activity.vo.ActSignVO"),t}(),Yi=function(){function t(){this.conditionID=0,this.actID=0,this.typeID=0,this.num=0,this.oldPrice=NaN,this.commonPrice=NaN,this.vipPrice=NaN,this.sVipPrice=NaN,this.discount=NaN,this.vipLv=0,this.boxConsumeType=0}return w(t,"modules.activity.vo.FreeMallItemVO"),t}(),Xi=function(){function t(){this.need=0,this.now=0,this.state=0,this.awards=null,this.actID=0,this.conID=0,this.iconId=0}return w(t,"modules.activity.vo.SpcActVO"),t}(),Ki=function(){function t(){this.startTime=0,this.endTime=0,this.items=null,this.desc=null,this.rule=null,this.iconId=0}return w(t,"modules.activity.vo.SpcMainVO"),t}(),ji=function(){function t(){this.day=0,this.month=0,this.week=!1,this.state=0,this.awards=null,this.actID=0,this.conID=0,this.iconId=0,this.showDoubleType=0,this.bannerFinish=0,this.openBanner=0}return w(t,"modules.activity.vo.SpLoginVO"),t}(),Qi=function(){function t(){this.rank=0,this.pow=0,this.award=null}return w(t,"modules.activity.vo.StandardRankSubVO"),t}(),zi=function(){function t(){this.endTime=0,this.startTime=0,this.desc=null,this.help=null,this.items=null,this.rankID=0,this.displayId=0}return w(t,"modules.activity.vo.StandardRankVO"),t}(),$i=function(){function t(){this.awards=null,this.pow=0,this.conID=0,this.state=0,this.actID=0}return w(t,"modules.activity.vo.StandardSubVO"),t}(),Zi=function(){function t(){this.endTime=0,this.startTime=0,this.desc=null,this.help=null,this.actID=0,this.conditions=null}return w(t,"modules.activity.vo.StandardVO"),t}(),Ji=function(){function t(){}return w(t,"modules.activity.wish.ActWishMgr"),t.hasRp=!0,t}(),ts=function(){function t(){this.actID=0,this.iconID=0,this.startTime=0,this.endTime=0,this.curRound=0,this.timePerRound=0,this.buyTimesCommon=0,this.buyTimesVip=0,this.totalBuyTimes=0,this.maxRewardValue=0,this.minRewardValue=0,this.luckyItem=null,this.randomItems=null,this.rule=null,this.info=null}return w(t,"modules.activity.yunyou.ActYunyouVo"),t}(),es=function(){function e(){}return w(e,"modules.activity.yunyou.YunyouMgr"),e.getInfo=function(t){return 0==t?e.recordInfoAll:e.recordInfoSelf},e.recordInfoAll=null,e.recordInfoSelf=null,e}(),is=function(){function t(){this.conID=0,this.buyTimes=0,this.costTime=0,this.costTypeID=0,this.cost=0}return w(t,"modules.activity.yunyou.YunyouSubVO"),t}(),ss=function(){function e(){}return w(e,"modules.actLoginFun.ActLoginFunMgr"),e.getLoginGiftOpen=function(){return e.loginGiftToc&&0!=e.loginGiftToc.login_day},e.handlerLoginGiftGet=function(t){e.loginGiftToc&&e.loginGiftToc.get_list&&e.loginGiftToc.get_list.indexOf(t)<0&&e.loginGiftToc.get_list.push(t.condition_id)},e.handlerLoginGift=function(t){e.loginGiftToc=t},e.getLoginItemState=function(t){return e.loginGiftToc?e.loginGiftToc.get_list&&0<=e.loginGiftToc.get_list.indexOf(t.id)?22:e.loginGiftToc.login_day>=t.day?11:10:10},e.getAllItem=function(){return e.arrs||(e.arrs=Ra.startEncode("actLogin.xml")),e.arrs},e.loginGiftToc=null,e.arrs=null,e}(),ns=(function(){function t(){}w(t,"modules.athletics.AthleticsConst")}(),function(){function n(){}return w(n,"modules.athletics.encounter.EncounterManager"),n.handlerEncounterDetail=function(t){n._data=t,n.checkRedPoint()},n.handlerEncounterRank=function(t){n._rankInfo=t},n.getEncounterRankInfo=function(){return n._rankInfo},n.checkRedPoint=function(){n._data&&n._data.fight_roles&&0<n._data.fight_roles.length?Nt.show("RP_ATHLETICS_ENCOUNTER"):Nt.hide("RP_ATHLETICS_ENCOUNTER")},n.handlerEncounterLog=function(t){n._logDate=t},n.getLogArr=function(){return n._logDate?n._logDate.logs:null},n.handlerEncounterSearch=function(t){n._data.cold_down=t.cold_down,n._data.search_times=t.search_times,n._data.fight_roles.push(t.update_roles),n.checkRedPoint()},n.handlerEncounterUpdate=function(t){if(n._data&&(n._data.cold_down=t.cold_down,n._data.search_times=t.search_times,n._data.fight_roles=n._data.fight_roles.concat(t.update_roles),0<t.del_role)){for(var e=n._data.fight_roles.length,i=-1,s=0;s<e;s++){if(n._data.fight_roles[s].role_id==t.del_role){i=s;break}}n._data.fight_roles.splice(i,1)}n.checkRedPoint()},n.getFightRoleArrs=function(){return n._data?n._data.fight_roles:null},n.getColdDown=function(){return n._data?n._data.cold_down:0},n.getSearchTimes=function(){return n._data?n._data.search_times:0},n.targetID=0,n.state=0,n._data=null,n._logDate=null,n._rankInfo=null,n}()),os=function(){function r(){}return w(r,"modules.athletics.petSports.PetSportsMgr"),I(1,r,"buyGiftInfo",function(){return r._buyGiftInfo},function(t){r._buyGiftInfo=t}),I(1,r,"shopVOs",function(){return r.init(),r._shopVOs}),r.handlerPetArenaInfo=function(t){r._info=t},r.getPetArenaInfo=function(){return r._info},r.handlerPetArenaOpponentPets=function(t){(r._petArenaOpponentsDic=r._petArenaOpponentsDic||new Object)[t.role_id]=t.pets},r.getPetArenaOpponentPets=function(t){return r._petArenaOpponentsDic&&r._petArenaOpponentsDic[t]?r._petArenaOpponentsDic[t]:null},r.handlerPetArenaRanks=function(t){r.rankInfo=t,r._info&&(r._info.ranking=t.my_ranking)},r.getPetArenaRanks=function(){return r.rankInfo},r.handlerRwArr=function(t){r.rwArr=t.rewards},r.getRwArr=function(){return r.rwArr},r.handlerPetArenaRefreshOpponents=function(t){r._info&&(r._info.opponents=t.opponents,r._info.next_refresh_opponents_ts=t.next_refresh_opponents_ts)},r.handlerPetArenaBuyChallengeTimes=function(t){r._info&&(r._info.remaining_challenge_times=t.remaining_challenge_times,r._info.remaining_buy_times=t.remaining_buy_times,r._info.challenge_times_recover_ts=t.challenge_times_recover_ts)},r.handlerPetArenaChallengeLogs=function(t){r._allLogs=t.all_logs},r.getPetArenaChallengeLogs=function(){return r._allLogs},r.handlerPetArenaChallengeGlobalLogs=function(t){r._allGlobalLogs=t.world_logs},r.getPetArenaChallengeGlobalLogs=function(){return r._allGlobalLogs},r.getNewestChallengeLog=function(){return r._allLogs&&1<=r._allLogs.length?r._allLogs[0]:null},r.handlerPetArenaChallengeLogUpdate=function(t){if(r._info&&(r._info.ranking=t.new_log.my_new_ranking),r._allLogs){for(var e in r._allLogs)if(r._allLogs[e].pet_fight_log_id==t.new_log.pet_fight_log_id)return;20<=r._allLogs.length&&r._allLogs.pop(),r._allLogs.unshift(t.new_log)}else r._allLogs=[t.new_log]},r.handlerPetArenaChallenge=function(t){r._info&&(r._info.remaining_challenge_times=t.remaining_challenge_times,r._info.remaining_buy_times=t.remaining_buy_times,r._info.win_times=t.new_win_times)},r.handerPetArenaChangeRes=function(t){(r.resDic=r.resDic||[])[t.pet_fight_log_id]=t},r.getPetArenaChangeRes=function(t){return r.resDic&&r.resDic.hasOwnProperty(t)?r.resDic[t]:null},r.deletePetArenaChangeRes=function(t){r.resDic&&r.resDic.hasOwnProperty(t)&&delete r.resDic[t]},r.handlerPetArenaSetEmbattleIndex=function(t){r._info&&(r._info.using_embattle_index=t.using_embattle_index)},r.getXMLInfo=function(){return r.init(),r.xmlInfo},r.init=function(){if(!r.xmlInfo){var t=Ra.startEncode("petSports.xml");r._shopVOs=[];var e,i,s,n,o=new Object;for(var a in t)(i=t[a])instanceof xml.PetSportsInfoVO?r.xmlInfo=i:i instanceof xml.PetSportsShopVO?o[i.exchangeID]=i:i instanceof xml.PetSportGoodsByPlatformVO&&(e=i);if(yt.isWX){s=e.xyx.split("|");for(var l=0;l<s.length;l++)n=o[s[l]],G.isReviewVersion||r._shopVOs.push(n)}else{s=e.tx.split("|");for(l=0;l<s.length;l++)n=o[s[l]],r._shopVOs.push(n)}}},r.handlerPetArenaWinReward=function(t){r._info&&r._info.win_rewards&&t&&r._info.win_rewards.indexOf(t.win_times)<0&&r._info.win_rewards.push(t.win_times)},r.handlerPetAreanShop=function(t){r._shopInfo=t},r.getPetArenaShopInfo=function(){return r._shopInfo},r.handlerPetArenaShopExchange=function(t){r._shopInfo&&(r._shopInfo.shop_rows=t.shop_rows)},r.handlerPetAreanRefresh=function(t){r._shopInfo&&(r._shopInfo.shop_rows=t.shop_rows)},r._buyGiftInfo=null,r._info=null,r._petArenaOpponentsDic=null,r.rankInfo=null,r.rwArr=null,r._allLogs=null,r._allGlobalLogs=null,r.resDic=null,r.xmlInfo=null,r._shopVOs=null,r._shopInfo=null,r}(),as=function(){function i(){}return w(i,"modules.athletics.petSports.PetSportsUtil"),i.checkRP=function(){var t=os.getPetArenaInfo();if(t){var e=t.win_times;i.checkWinTimeShow(e,t.win_rewards,3)?Nt.show("RP_PET_SPORTS_CAN_GET3"):Nt.hide("RP_PET_SPORTS_CAN_GET3"),i.checkWinTimeShow(e,t.win_rewards,5)?Nt.show("RP_PET_SPORTS_CAN_GET5"):Nt.hide("RP_PET_SPORTS_CAN_GET5"),0<t.remaining_challenge_times?Nt.show("RP_PET_SPORTS_CAN_CHALLENGE"):Nt.hide("RP_PET_SPORTS_CAN_CHALLENGE")}},i.checkWinTimeShow=function(t,e,i){return!!e&&(i<=t&&-1==e.indexOf(i))},i}(),ls=(function(){function t(){}w(t,"modules.athletics.snatch.SnatchConst")}(),function(){function t(){this.resId=0,this.roleId=NaN,this.logId=0,this.logTs=0}return w(t,"modules.athletics.snatch.SnatchFightTargetVO"),t}()),rs=function(){function o(){}return w(o,"modules.athletics.snatch.SnatchManager"),I(1,o,"snatchBaseVO",function(){return o.initXml(),o._snatchBaseVO}),I(1,o,"snatchOpenLevel",function(){return o.snatchBaseVO?o.snatchBaseVO.openLevel:0}),I(1,o,"snatchProductIds",function(){return o.snatchBaseVO?o.snatchBaseVO.productIds:[]}),I(1,o,"snatchCostGold",function(){return o.snatchBaseVO?o.snatchBaseVO.costGold:0}),I(1,o,"snatchMaxGetTime",function(){return o.snatchBaseVO?o.snatchBaseVO.maxGetTime:0}),I(1,o,"snatchMaxRobTimes",function(){return o.snatchBaseVO?o.snatchBaseVO.maxRobTimes:0}),I(1,o,"snatchColdDownMaxCost",function(){return o.snatchBaseVO?o.snatchBaseVO.coldDownMaxCost:0}),I(1,o,"snatchRefreshTimeGolds",function(){return o.snatchBaseVO?o.snatchBaseVO.refreshTimeGolds:[]}),I(1,o,"snatchRefreshFreeTimes",function(){return o.snatchBaseVO?o.snatchBaseVO.refreshFreeTimes:0}),I(1,o,"snatchMaxBeRobTimes",function(){return o.snatchBaseVO?o.snatchBaseVO.maxBeRobTimes:0}),I(1,o,"snatchChooseList",function(){return o.initXml(),o._snatchChooseList}),I(1,o,"detailVO",function(){return o._detailVO},function(t){o._detailVO=t,o.sortSnatchList()}),o.initXml=function(){if(0==o.isInit){o.isInit=!0,o._snatchChooseList=[],o._snatchPlunderRewards=[];var t,e=Ra.startEncode("snatch.xml");for(var i in e)(t=e[i])instanceof xml.SnatchBaseVO?o._snatchBaseVO=t:t instanceof xml.SnatchChooseListVO?o._snatchChooseList.push(t):t instanceof xml.SnatchPlunderRewardsVO&&o._snatchPlunderRewards.push(t)}},o.getSnatchPlunderReward=function(t){return o.initXml(),o._snatchPlunderRewards[t-1]},o.getSnatchChooseItem=function(t){return o.initXml(),o._snatchChooseList[t-1]},o.sortSnatchList=function(){var t,e=[],i=[],s=[];for(var n in o._detailVO.snatch_list)(t=o._detailVO.snatch_list[n]).role_id==pe.roleID?e.push(t):t.be_snatch.length<modules.athletics.snatch.SnatchManager.snatchMaxBeRobTimes?i.push(t):s.push(t);e=(e=e.concat(i)).concat(s),o.detailVO.snatch_list=e},o.getSnatchingByRoleId=function(t){var e;if(o.detailVO)for(var i in o.detailVO.snatch_list)if((e=o.detailVO.snatch_list[i]).role_id==t)return e;return null},o.getCurPageSnatchList=function(t,e){void 0===e&&(e=4);var i=[];if(o.detailVO){var s=t*e,n=(t+1)*e;n=n>o.detailVO.snatch_list.length?o.detailVO.snatch_list.length:n,i=o.detailVO.snatch_list.slice(s,n)}return i},o.getSnatchListPageMax=function(t){if(void 0===t&&(t=4),null==o.detailVO||null==o.detailVO.snatch_list)return 0;var e=0,i=o.detailVO.snatch_list.length;return e=Math.floor(i/t),0<i%t&&(e+=1),0==e&&(e=1),e},o.beginGetSuccessUpdate=function(t,e){o.detailVO.get_times=t,o.detailVO.snatch_list.push(e),o.sortSnatchList()},o.updateDetailVOByRefresh=function(t){o.detailVO.lucky=t.lucky,o.detailVO.refresh_times=t.refresh_times,o.detailVO.res_id=t.res_id},o.updateByGetReward=function(t){if(o.detailVO){o.detailVO.reward_type=1,o.detailVO.res_id=t;for(var e=0;e<o.detailVO.snatch_list.length;e++)if(o.detailVO.snatch_list[e].role_id==pe.roleID){o.detailVO.snatch_list.splice(e,1);break}}},o.updateByColdDown=function(){o.detailVO&&(o.detailVO.reward_type=2)},o.getTotalPower=function(){for(var t=0,e=0;e<pe.pals.length;e++)t+=pe.pals[e].ext.power;return t},o.checkRedPoint=function(){o.detailVO?2==o.detailVO.reward_type?Nt.show("RP_ATHLETICS_SNATCH"):null==o.getSnatchingByRoleId(pe.roleID)&&o.detailVO.get_times<modules.athletics.snatch.SnatchManager.snatchMaxGetTime?Nt.show("RP_ATHLETICS_SNATCH"):Nt.hide("RP_ATHLETICS_SNATCH"):Nt.hide("RP_ATHLETICS_SNATCH")},o.checkLogRedPoint=function(){0<o.curAttackedNotifyId?Nt.show("RP_ATHLETICS_SNATCH_LOG"):Nt.hide("RP_ATHLETICS_SNATCH_LOG")},o._detailVO=null,o.curFightVO=null,o.msgLogs=null,o.curRoleSimpleId=NaN,o._snatchBaseVO=null,o._snatchChooseList=null,o._snatchPlunderRewards=null,o.isInit=!1,o.curAttackedNotifyId=NaN,o}(),hs=function(){function t(){}return w(t,"modules.athletics.soloRanking.SoloRankingConst"),_(t,["STAR_RULE_INFO",function(){return this.STAR_RULE_INFO=[{starLimit:15,num:3},{starLimit:20,num:4},{starLimit:25,num:5}]},"MATCH_PANEL_DIVISION_NAMES",function(){return this.MATCH_PANEL_DIVISION_NAMES=["来自九幽的恶鬼","云浮之巅的金仙","传承洪荒的天妖","气质高冷的大神","邪魅狡诈的人族","兽血沸腾的古魔"]},"THREE_STAR_POS",function(){return this.THREE_STAR_POS=[0,108,215]},"FOUR_STAR_POS",function(){return this.FOUR_STAR_POS=[0,72,143,215]},"FIVE_STAR_POS",function(){return this.FIVE_STAR_POS=[0,54,108,161,215]}]),t}(),us=function(){function t(){this.star=0,this.soloTimes=0,this.buyTimes=0,this.coldTs=0,this.realWin=0,this.headBox=0,this.rank=0,this.division=0,this.stage=0,this.starLv=0,this.oldStar=0,this.oldDivision=0,this.oldStage=0,this.oldStarLv=0}return w(t,"modules.athletics.soloRanking.SoloRankingDetailVO"),t}(),cs=function(){function n(){}return w(n,"modules.athletics.soloRanking.SoloRankingManager"),n.getDdetailVO=function(){return n.detailVO},n.setDetailVO=function(t){(n.detailVO=n.detailVO||new us).star=t.star,n.detailVO.soloTimes=t.solo_times,n.detailVO.buyTimes=t.buy_times,n.detailVO.coldTs=t.cold_ts,n.detailVO.realWin=t.real_win,n.detailVO.headBox=t.head_box,n.detailVO.rank=t.rank_num,n.updateDivisionInfo(),n.detailVO.oldDivision=n.detailVO.division,n.detailVO.oldStage=n.detailVO.stage,n.detailVO.oldStar=n.detailVO.star,n.detailVO.oldStarLv=n.detailVO.starLv},n.updateDivisionInfo=function(){if(0<n.detailVO.star)for(var t=0,e=n.detailVO.star,i=0;i<hs.STAR_RULE_INFO.length;i++){var s=hs.STAR_RULE_INFO[i];if(!(0<(t=e-s.starLimit))){if(0==t){n.detailVO.division=i+1+1,n.detailVO.division<4?n.detailVO.stage=5:n.detailVO.stage=0,n.detailVO.starLv=0;break}n.detailVO.division=i+1,n.detailVO.stage=5-Math.floor(e/s.num),n.detailVO.starLv=e%s.num;break}e=t}else 0==n.detailVO.star?(n.detailVO.division=1,n.detailVO.stage=5):(n.detailVO.division=4,n.detailVO.stage=0),n.detailVO.starLv=0},n.getStarLvByStar=function(t){var e=0;if(0<t)for(var i=0,s=0;s<hs.STAR_RULE_INFO.length;s++){var n=hs.STAR_RULE_INFO[s];if(!(0<(i=t-n.starLimit))){if(0==i){e=0;break}e=t%n.num;break}t=i}else e=0;return e},n.getDivisionByStar=function(t){var e=0,i=0;if(0<t)for(var s=0;s<hs.STAR_RULE_INFO.length;s++){if(!(0<(i=t-hs.STAR_RULE_INFO[s].starLimit))){if(0==i){e=s+1+1;break}e=s+1;break}t=i}else e=1;return e},n.getStageByStar=function(t){var e=0,i=0;if(0<t)for(var s=0;s<hs.STAR_RULE_INFO.length;s++){var n=hs.STAR_RULE_INFO[s];if(!(0<(i=t-n.starLimit))){if(0==i){e=s+1+1<4?5:0;break}e=5-Math.floor(t/n.num);break}t=i}else e=5;return e},n.updateByFightBack=function(t){n.searchList=t.search_list,n.detailVO.coldTs=t.cold_ts,n.detailVO.soloTimes=t.solo_times},n.getDivisionNameByIndex=function(t){switch(t){case 1:return"青铜";case 2:return"白银";case 3:return"黄金";case 4:return"钻石"}return""},n.checkRewardRedPoint=function(){n.recentInfoToc&&2==n.recentInfoToc.reward_type?Nt.show("RP_ATHLETICS_SOLORANKING_REWARD"):Nt.hide("RP_ATHLETICS_SOLORANKING_REWARD")},n.checkRedPoint=function(){n.checkTimeIsCanFight()&&n.detailVO&&0<n.detailVO.soloTimes?Nt.show("RP_ATHLETICS_SOLORANKING"):Nt.hide("RP_ATHLETICS_SOLORANKING")},n.checkTimeIsCanFight=function(){var t=new Date,e=36e5*x.hourOffset,i=ya.serverTimeMs+e;t.setTime(i);var s=t.getDay(),n=t.getHours();return!(0==s&&22<=n||1==s&&n<10)},n.detailVO=null,n.recentInfoToc=null,n.searchList=null,n.selectRankId=0,n}(),ds=function(){function h(){}return w(h,"modules.battlefieldOfShura.BattlefieldOfAshuraMgr"),I(1,h,"assistRoleIDs",function(){return h._assistRoleIDs},function(t){h._assistRoleIDs=t}),I(1,h,"nowFindedRoles",function(){return h._nowFindedRoles},function(t){h._nowFindedRoles=t}),I(1,h,"battleRoleID",function(){return h._battleRoleID},function(t){h._battleRoleID=t}),I(1,h,"tagMonsterCollect",function(){return h._tagMonsterCollect},function(t){h._tagMonsterCollect=t}),I(1,h,"nowLevel",function(){return h._nowLevel},function(t){h._nowLevel=t}),I(1,h,"historyKill",function(){return h._historyKill},function(t){h._historyKill=t}),I(1,h,"skills",function(){return h._skills},function(t){h._skills=t}),I(1,h,"historyRank",function(){return h._historyRank},function(t){h._historyRank=t}),I(1,h,"historyScroe",function(){return h._historyScroe},function(t){h._historyScroe=t}),I(1,h,"attRoleInfo",function(){return h._attRoleInfo},function(t){h._attRoleInfo=t}),I(1,h,"endTime",function(){return h._endTime},function(t){h._endTime=t}),I(1,h,"attBuffMonsterID",function(){return h._attBuffMonsterID},function(t){h._attBuffMonsterID=t}),I(1,h,"score",function(){return h._score},function(t){h._score=t}),h.resetBattleInfo=function(){h._skills=[],h._nowFindedRoles=[],h._historyRank=0,h._historyScroe=0,h._historyKill=0,h._nowLevel=0,h._attRoleInfo=0,h._tagMonsterCollect=0,h._endTime=0,h._attBuffMonsterID=0,h.naerbyRole=[],h._showRoleIds=[]},h.updateSkillLevel=function(t,e){var i,s=!0;if(0<h.skills.length)for(var n in h.skills)if((i=h.skills[n]).id==t){i.val=e,s=!1;break}if(s){var o=new Object;o.className="p_kv",o.id=t,o.val=e,h.skills.push(o)}},h.initRuleXML=function(){h._rulesConfigArr.length<=0&&(h._rulesConfigArr=Ra.startEncode("battlefieldRules.xml"))},h.getRuleByType=function(t){h.initRuleXML();var e,i="";for(var s in h._rulesConfigArr)(e=h._rulesConfigArr[s]).id==t&&(i+=h.createSpanBr(e.color,e.fontSize,e.std),1==e.isBr&&(i+="<br/>"));return i},h.getRewardXmlInfoArr=function(){return h.rewardXmlInfoArr||(h.rewardXmlInfoArr=Ra.startEncode("battlefieldRoleReward.xml")),h.rewardXmlInfoArr},h.initRewardXml=function(){if(h._battleRoleRewardConfig.length<=0)for(var t=h.getRewardXmlInfoArr(),e=0,i=t.length;e<i;e++)t[e]instanceof xml.BattlefieldRoleRewardVO&&h._battleRoleRewardConfig.push(t[e])},h.getRewardConfig=function(){for(var t in h.initRewardXml(),h._battleRoleRewardConfig)h._battleRoleRewardConfig[t].initArr();return h._battleRoleRewardConfig},h.createSpanBr=function(t,e,i){return"<span style='color:"+t+" ;font-size:"+e+"px;'>"+i+"</span>"},h.initScoreXml=function(){if(h._battleScoreConfig.length<=0)for(var t=h.getRewardXmlInfoArr(),e=0,i=t.length;e<i;e++)t[e]instanceof xml.BattlefieldScoreVO&&h._battleScoreConfig.push(t[e])},h.getScoreImgByScore=function(t){h.initScoreXml();var e,i="";for(var s in h._battleScoreConfig)if(""!=(e=h._battleScoreConfig[s]).getImgPath(t)){i=e.getImgPath(t);break}return i},h.getScoreConfig=function(){return h.initScoreXml(),h._battleScoreConfig},h.initSkillXML=function(){h._skillConfigArr.length<=0&&(h._skillConfigArr=Ra.startEncode("battlefieldSkill.xml"))},h.getSkillInfoByType=function(t){h.initSkillXML();var e,i=[];for(var s in h._skillConfigArr)e=h._skillConfigArr[s],Math.floor(e.id/1e3)==t&&i.push(e);return i},h.initExpXML=function(){h._expConfigArr.length<=0&&(h._expConfigArr=Ra.startEncode("battlefieldExp.xml"))},h.getExpByLevel=function(t){var e;for(var i in h.initExpXML(),h._expConfigArr)if((e=h._expConfigArr[i]).level==t)return e;return null},h.initMonsterXML=function(){h._monsterConfigArr.length<=0&&(h._monsterConfigArr=Ra.startEncode("battlefieldMonster.xml"))},h.getMonsterIsShowUnit=function(t){var e;for(var i in h.initMonsterXML(),h._monsterConfigArr)if((e=h._monsterConfigArr[i]).type==t)return 1==e.isShowUnit;return!0},h.getMonsterIconPath=function(t){h.initMonsterXML();var e,i="";for(var s in h._monsterConfigArr)if((e=h._monsterConfigArr[s]).type==t){i=e.iconPath;break}return i},h.initAssistXML=function(){h._assistConfigArr.length<=0&&(h._assistConfigArr=Ra.startEncode("battlefieldAssist.xml"))},h.getAssistDesc=function(t,e){h.initAssistXML();var i,s="";for(var n in h._assistConfigArr)if((i=h._assistConfigArr[n]).type==t&&e==i.category){s=i.desc;break}return s},h.getResonateDesc=function(t,e){h.initAssistXML();var i,s="";for(var n in h._assistConfigArr)if((i=h._assistConfigArr[n]).type==t&&e==i.category){s=i.resonate;break}return s},h.getBattlefieldOpenTime=function(){return(h.timeDate=h.timeDate||new Date).setTime(ya.serverTimeMs),h.timeDate.setHours(20-x.hourOffset),h.timeDate.setMinutes(0),h.timeDate.setSeconds(0),h.timeDate.setMilliseconds(0),h.timeDate.getTime()/1e3},h.getBattlefieldOpenDiff=function(){return h.getBattlefieldOpenTime()-ya.serverTime},h.getBattlefieldEndTime=function(){return(h.endDate=h.endDate||new Date).setTime(ya.serverTimeMs),h.timeDate.setHours(20-x.hourOffset),h.timeDate.setMinutes(20),h.timeDate.setSeconds(0),h.timeDate.getTime()/1e3},h.getBattlefieldEndDiff=function(){return h.getBattlefieldEndTime()-ya.serverTime},h.getBattlefieldNextTime=function(){(h.timeNextDate=h.timeNextDate||new Date).setTime(ya.serverTimeMs),h.timeNextDate.setHours(20-x.hourOffset),h.timeNextDate.setMinutes(0),h.timeNextDate.setSeconds(0),h.timeNextDate.setMilliseconds(0);var t=h.timeNextDate.getTime()/1e3;return ya.serverTime>t&&(t+=86400),t},h.getBattlefieldNextDiff=function(){return h.getBattlefieldNextTime()-ya.serverTime},h.setFindRole=function(t){-1==h.nowFindedRoles.indexOf(t)&&h._nowFindedRoles.push(t)},h.initFindRoles=function(){h.nowFindedRoles=[]},h.pushInAtt=function(t){(h.attMeRoles=h.attMeRoles||{})[t]=S.now()},h.checkAttMeStemp=function(){var t=S.now();for(var e in h.attackme=!1,h.attMeRoles){if(1e4<=t-h.attMeRoles[e])h.attMeRoles[e]=null,delete h.attMeRoles[e];else 1e9<Number(e)&&(h.attackme=!0)}},h.pushInMeAtt=function(t){(h.MeAttArr=h.MeAttArr||{})[t]=S.now()},h.checkMeAttStemp=function(){var t=S.now();for(var e in h.meattack=!1,h.MeAttArr){if(1e4<=t-h.MeAttArr[e])h.MeAttArr[e]=null,delete h.MeAttArr[e];else 1e9<Number(e)&&(h.meattack=!0)}},h.getCanShowHeadRoleId=function(){var t,e,i=[],s=[];if(0!=h.attRoleInfo){var n=h.getNearbyRoleInfo(h.attRoleInfo);n&&(i.push({info:n,isAttMe:!1,isAtt:!0}),s.push(n.role_id))}for(var o in h.attMeRoles){if(3<=i.length)break;if(h.attMeRoles[o]){var a=h.getNearbyRoleInfo(Number(o));if(!a)continue;i[0]&&i[0].info.role_id==a.role_id?i[0].isAttMe=!0:(i.push({info:a,isAttMe:!0,isAtt:!1}),s.push(a.role_id))}}if(3<=i.length)return i;for(var l in h.naerbyRole){if(t=h.naerbyRole[l],3<=i.length)break;-1<s.indexOf(t.role_id)||(h.naerbyRole.length<=3?i.push({info:t,isAttMe:!1,isAtt:!1}):h._showRoleIds.indexOf(t.role_id)<=-1&&i.push({info:t,isAttMe:!1}))}if(0<i.length)for(var r in h._showRoleIds=[],i)e=i[r],h._showRoleIds.push(e.info.role_id);return i},h.getNearbyRoleInfo=function(t){var e,i=100*Math.floor(t/100);for(var s in h.naerbyRole)if((e=h.naerbyRole[s]).role_id==i)return e;return null},h.removeLockedTarget=function(){modules.battlefieldOfShura.BattlefieldOfAshuraMgr.attRoleInfo=0,modules.battlefieldOfShura.BattlefieldOfAshuraMgr.attBuffMonsterID=0},h.getSystemBattleSetting=function(){var t,e=ya.sysInfo,i=1;for(var s in e)if(4==(t=e[s]).id){i=t.val;break}return i},h.PkState=function(){return 0!=h.attackme||0!=h.meattack},h._battleRoleID=0,h._assistRoleIDs=[],h._skills=[],h._nowFindedRoles=[],h._historyRank=0,h._historyScroe=0,h._historyKill=0,h._nowLevel=0,h._skillConfigArr=[],h._expConfigArr=[],h._monsterConfigArr=[],h._assistConfigArr=[],h._rulesConfigArr=[],h._battleRoleRewardConfig=[],h._battleScoreConfig=[],h._attRoleInfo=0,h._tagMonsterCollect=0,h._endTime=NaN,h._attBuffMonsterID=0,h._score=0,h.naerbyRole=[],h._showRoleIds=[],h.battleSys=0,h.isUnShowRoleFashion=!1,h.isUnShowLevelEff=!1,h.isUnShowSkillEff=!1,h.isUnShowCollect=!1,h.joyMod=1,h.attackme=!1,h.meattack=!1,h.cdEnterTime=NaN,h.rewardXmlInfoArr=null,h.timeDate=null,h.endDate=null,h.timeNextDate=null,h.attMeRoles=null,h.MeAttArr=null,h}(),ps=function(){function h(){}return w(h,"modules.blueDiamond.BlueDiamondMgr"),I(1,h,"userBlueDiamondInfo",function(){var t=pe.getRoleBlueVipInfo();return h._blueLevel=parseInt(t.blue_vip_level),[t.is_blue_vip,t.is_blue_year_vip,t.is_super_blue_vip]}),I(1,h,"blueNoviceGifts",function(){return h.init(),h._noviceGifts}),I(1,h,"qqyxdtDailyGift",function(){return h.init(),h._qqyxdtDailyGift}),I(1,h,"blueLevel",function(){return h._blueLevel}),I(1,h,"blueDailyGifts",function(){return h.init(),h._dailyGifts}),I(1,h,"blueLevelGifts",function(){return h.init(),h._levelGifts}),I(1,h,"qqyxdtNewGuideGift",function(){return h.init(),h._qqyxdtNewGuideGift}),I(1,h,"qqyxdtGrowupGifts",function(){return h.init(),h._qqyxdtGrowupGifts||[]}),I(1,h,"clickIconIDs",function(){return h._clickIcon}),h.init=function(){if(!h._has){h._has=!0,h._noviceGifts=[],h._dailyGifts=[],h._levelGifts=[];var t,e=Ra.startEncode("blueDiamondWelfare.xml");for(var i in e)(t=e[i])instanceof xml.BlueNoviceGiftVO?h._noviceGifts.push(t):t instanceof xml.BlueDailyGiftVO?h._dailyGifts.push(t):t instanceof xml.BlueLevelGiftVO?h._levelGifts.push(t):t instanceof xml.QqyxdtDailyGiftVO?h._qqyxdtDailyGift=t:t instanceof xml.QqyxdtNewGuideGiftVO?h._qqyxdtNewGuideGift=t:t instanceof xml.QqyxdtGrowUpGiftVO&&(h._qqyxdtGrowupGifts=h._qqyxdtGrowupGifts||[]).push(t)}},h.updateRoleBlueVipInfo=function(t,e){(h._roleBuleVipInfo=h._roleBuleVipInfo||{})[t.toString()]=e,h.updatePrivilegeRedPoint(),h.updateDiamondVipRedPoint()},h.getRoleBlueVipInfoByType=function(t){return 2==t?t=3:3==t&&(t=2),(h._roleBuleVipInfo=h._roleBuleVipInfo||{})[t.toString()]},h.updateRoleBlueVipInfoByGetReward=function(t,e){h._roleBuleVipInfo=h._roleBuleVipInfo||{};var i,s=h.getRoleBlueVipInfoByType(t);if(s&&0<s.length){for(var n=!1,o=0,a=s.length;o<a;o++)if((i=s[o]).id==e){i.val=1,n=!0;break}n||((i=new Object).className="p_kv",i.id=e,i.val=1,h._roleBuleVipInfo[t.toString()].push(i))}else h._roleBuleVipInfo[t.toString()]=h._roleBuleVipInfo[t.toString()]||[],(i=new Object).className="p_kv",i.id=e,i.val=1,h._roleBuleVipInfo[t.toString()].push(i);h.updatePrivilegeRedPoint(),h.updateDiamondVipRedPoint()},h.updatePrivilegeRedPoint=function(){var t=h.checkPrivilegeDailyRP()||h.checkPrivilegeGrowUpRP()||h.checkPrivilegeNewGuideRP();T.dispatch("ICON_REDPOINT_CHANGE",[5012,"RP_QQYXDT_PRIVILEGE_CAN_GET_REWARD",t])},h.checkPrivilegeDailyRP=function(){var t=h.getRoleBlueVipInfoByType(6);if(!t)return!1;var e=!1;if(0<t.length)for(var i=0;i<t.length;i++){if(0==t[i].val){e=!0;break}}else e=!0;return e},h.checkPrivilegeNewGuideRP=function(){var t=h.getRoleBlueVipInfoByType(4);if(!t)return!1;var e=!1;if(0<t.length)for(var i=0;i<t.length;i++){if(0==t[i].val){e=!0;break}}else e=!0;return e},h.checkPrivilegeGrowUpRP=function(){var t=h.getRoleBlueVipInfoByType(5);if(!t)return!1;var e=!1,i=h.qqyxdtGrowupGifts;if(i&&0<i.length)if(0<t.length)for(var s=0;s<i.length;s++){var n=i[s];if(pe.checkLevel(n.trans,n.level)&&0==h.checkIsRewardedGrowUpById(n.id)){e=!0;break}}else e=!0;return e},h.checkIsRewardedGrowUpById=function(t){var e=h.getRoleBlueVipInfoByType(5);if(!e)return!1;var i=!1;if(0<e.length)for(var s=0;s<e.length;s++){var n=e[s];if(n.id==t){i=1==n.val;break}}else i=!1;return i},h.updateDiamondVipRedPoint=function(){var t=h.checkDailyGiftRP()||h.checkLevelGiftRP()||h.checkNoviceGiftRP();T.dispatch("ICON_REDPOINT_CHANGE",[5007,"RP_BLUE_VIP_CAN_GET_REWARD",t])},h.checkDailyGiftRP=function(){var t=h.getRoleBlueVipInfoByType(2);if(!t)return!1;for(var e=!1,i=pe.getRoleBlueVipInfo(),s=h.blueDailyGifts,n=0;n<s.length;n++){for(var o=s[n],a=!1,l=0;l<t.length;l++){var r=t[l];if(r.id==o.id&&1==r.val){a=!0;break}}if(0==a){if(1==o.id&&i.is_blue_vip){e=!0;break}if(2==o.id&&i.is_blue_year_vip){e=!0;break}if(3==o.id&&i.is_super_blue_vip){e=!0;break}}}return e},h.checkNoviceGiftRP=function(){var t=h.getRoleBlueVipInfoByType(1);if(!t)return!1;for(var e=!1,i=pe.getRoleBlueVipInfo(),s=h.blueNoviceGifts,n=0;n<s.length;n++){for(var o=s[n],a=!1,l=0;l<t.length;l++){var r=t[l];if(r.id==o.id&&1==r.val){a=!0;break}}if(!a){if(1==o.id&&i.is_blue_vip){e=!0;break}if(2==o.id&&i.is_blue_year_vip){e=!0;break}if(3==o.id&&i.is_super_blue_vip){e=!0;break}}}return e},h.checkLevelGiftRP=function(){var t=h.getRoleBlueVipInfoByType(3);if(!t)return!1;var e=!1,i=pe.getRoleBlueVipInfo();if(i.is_blue_vip||i.is_blue_year_vip||i.is_super_blue_vip){var s=h.blueLevelGifts;if(s&&0<s.length)if(0<t.length)for(var n=0;n<s.length;n++){var o=s[n];if(pe.checkLevel(parseInt(o.trans),parseInt(o.level))&&0==h.checkIsRewardedBlueLevelById(o.id)){e=!0;break}}else e=!0}else e=!1;return e},h.checkIsRewardedBlueLevelById=function(t){var e=h.getRoleBlueVipInfoByType(3);if(!e)return!1;var i=!1;if(0<e.length)for(var s=0;s<e.length;s++){var n=e[s];if(n.id==t){i=1==n.val;break}}else i=!1;return i},h._has=!1,h._noviceGifts=null,h._dailyGifts=null,h._levelGifts=null,h._qqyxdtNewGuideGift=null,h._qqyxdtDailyGift=null,h._qqyxdtGrowupGifts=null,h._roleBuleVipInfo=null,h._blueLevel=0,_(h,["_clickIcon",function(){return this._clickIcon=[5008,5009,5010,5011]}]),h}(),ms=function(){function t(){this.blueInfo=null,this.nameStr=null,this.nameText=null,this.textFormat=null,this.pos=null}return w(t,"modules.blueDiamond.blueVipShow.BlueVipOutShowVo"),t}(),fs=function(){function t(){}return w(t,"modules.broadcast.BinaryUtil"),t.isCarryFlag=function(t,e){switch(e){case 1:return 1==(1&t);case 2:return 2==(2&t);case 3:return 4==(4&t);case 4:return 8==(8&t);case 5:return 16==(16&t);case 6:return 32==(32&t);case 7:return 64==(64&t);case 8:return 128==(128&t);case 9:return 256==(256&t);case 10:return 512==(512&t);case 11:return 1024==(1024&t);case 12:return 2048==(2048&t);case 13:return 4096==(4096&t);case 14:return 8192==(8192&t);case 15:return 16384==(16384&t);case 16:return 32768==(32768&t);default:return!1}},t}(),_s=function(){function e(){}return w(e,"modules.broadcast.BroadCastConst"),e.checkGoldBg=function(t){return-1!=e.GOLD_BG.indexOf(t)},e.checkSendChat=function(t){return-1!=e.GOLD_BG.indexOf(t)},_(e,["GOLD_BG",function(){return this.GOLD_BG=[11101,13302,13701]}]),e}(),gs=function(){function n(){}return w(n,"modules.broadcast.Broadcaster"),n.add=function(t){if(null==n.txt&&(n.waitMsgs=new Array,n.bg=Me.createSprite("com/ui/infoBg7.png",null,0,185,0,0,[0,120,0,120]),(n.txt=Me.createHTMLDivElement(null,0,8)).style.fontSize=26,n.txt.style.wordWrap=!1,n.txt.color="#ffffff",n.txt.on("link",n,n.onLink),n.bg.addChild(n.txt),n.scrollRect=new Dt(0,-5,0,50)),""!=t&&null!=t){var e=S.now();if(-1==t.indexOf("\n"))n.waitMsgs.push({s:t,t:e});else for(var i=t.split("\n"),s=0;s<i.length;s++)""!=i[s]&&null!=i[s]&&n.waitMsgs.push({s:i[s],t:e});null==n.bg.parent&&n.showNext()}},n.showNext=function(){for(var t=S.now();0<n.waitMsgs.length&&5e3<t-n.waitMsgs[0].t;)n.waitMsgs.shift();if(0==n.waitMsgs.length)return n.bg.removeSelf(),_t.removeFromFrame(n,n.onFrame),void _t.removeFromTimer(n,n.onTimer);var e=n.waitMsgs.shift();n.txt.innerHTML=e.s,n.txt.contextWidth+100>lt.stageWidth?n.bg.graphics.width=lt.stageWidth:n.bg.graphics.width=n.txt.contextWidth+100,n.bg.x=(lt.stageWidth-n.txt.contextWidth)/2-80,n.bg.x<0&&(n.bg.x=0),n.txt.x=(n.bg.graphics.width-80-n.txt.contextWidth)/2,n.txt.x<80&&(n.txt.x=80),null==n.bg.parent&&(ua.isCross()?lt.crossUiLayer.addChild(n.bg):lt.uiLayer.addChild(n.bg)),n.scrollRect.x=0,n.scrollRect.width=lt.stageWidth-80,n.txt.scrollRect=n.scrollRect;var i=n.txt.contextWidth/750*4e3;i<4e3&&(i=4e3),n.endTime=S.now()+i,_t.addToFrame(n,n.onFrame),_t.addToTimer(n,n.onTimer)},n.onFrame=function(){null!=n.bg.parent&&n.txt.contextWidth>lt.stageWidth-80&&(n.scrollRect.x+=1,n.scrollRect.width=lt.stageWidth-80,n.scrollRect.x+n.scrollRect.width<n.txt.contextWidth&&(n.txt.scrollRect=n.scrollRect))},n.onTimer=function(){var t=S.now();n.endTime<=t&&n.showNext()},n.onLink=function(t){if("string"==typeof t){var e=String(t).split("#");if(e&&2<=e.length){var i=parseInt(e[1]);if(0<i){if(11423==i){var s=ao.getIconVO(115).openLv;if(pe.myLevel<s)return void Jt.addTip("角色等级不足"+s+"级!")}me.linkTo(i)}}}},n.loopKey="Broadcaster",n.topY=100,n.gap=26,n.alphaSpeed=.07,n.ySpeed=2,n.bg=null,n.txt=null,n.endTime=NaN,n.waitMsgs=null,n.scrollRect=null,n}(),ys=function(){function h(){}return w(h,"modules.broadcast.BroadcastManager"),h.getMsg=function(t,e,i){null==h.all&&(h.all=Ra.startEncode("broadcast.xml","id"));var s=h.all[t];if(null==s)return null;var n=s.msg;if(0==e.length&&0==i.length)return n;for(var o=0,a=0;o<e.length||a<i.length;){if(o<e.length){var l=e[o];n=n.replace("~str",l),o++}if(a<i.length){var r=i[a];n=n.replace("~num",r.toString()),a++}}return n},h.checkRegrow=function(t,e){return 0==t&&0==e||(0<t&&0<e?pe.myRegrow>=t&&pe.myRegrow<=e:0<t?pe.myRegrow>=t:pe.myRegrow<=e)},h.FLAG_STR="~str",h.FLAG_NUM="~num",h.all=null,h}(),vs=function(){function o(){}return w(o,"modules.buff.BuffManager"),o.getBuffVO=function(t){return null==o.allBuff&&(o.allBuff=Ra.startEncode("buff.xml","id")),o.allBuff[t]},o.updateBuff=function(t){o.actorBuff=o.actorBuff||{},t&&(o.actorBuff[t.actor_id]=t)},o.getActorBuff=function(t,e){if(o.actorBuff&&o.actorBuff[t]){var i,s=o.actorBuff[t];for(var n in s.update_buffs)if((i=s.update_buffs[n]).buff_id==e)return i}return null},o.actorBuff=null,o.allBuff=null,o}(),Is=function(){function t(){}return w(t,"modules.chat.ChatConst"),_(t,["Face_KEY_REG",function(){return this.Face_KEY_REG=/\##\d{2}/},"CHAT_TAB_ITEM_LABELS",function(){return this.CHAT_TAB_ITEM_LABELS=["世界","仙盟","私聊","公告","客服"]},"CHAT_TAB_ITEM_LABELS_CROSS",function(){return this.CHAT_TAB_ITEM_LABELS_CROSS=["跨服","世界","仙盟","公告","客服"]}]),t}(),ws=function(){function r(){}return w(r,"modules.chat.ChatManager"),I(1,r,"chatKeyWordList",function(){return r.initConfig(),r._chatKeyWordList}),I(1,r,"worldChatLimitLvl",function(){return r.initConfig(),r._worldChatLimitVo.level}),I(1,r,"privateChatMsgs",function(){return r._privateChatMsgs=r._privateChatMsgs||[]}),I(1,r,"privateChats",function(){return r._privateChats=r._privateChats||[]}),I(1,r,"stopClickEvent",function(){return r._stopClickEvent},function(t){r._stopClickEvent=t}),I(1,r,"worldMsgs",function(){return r._worldMsgs=r._worldMsgs||[]},function(t){r._worldMsgs=t}),I(1,r,"noticeMsgs",function(){return r._noticeMsgs=r._noticeMsgs||[]},function(t){r._noticeMsgs=t}),I(1,r,"familyMsgs",function(){return r._familyMsgs=r._familyMsgs||[]},function(t){r._familyMsgs=t}),I(1,r,"previewMsgs",function(){return r._previewMsgs=r._previewMsgs||[]},function(t){r._previewMsgs=t}),I(1,r,"crossWorldMsgs",function(){return r._crossWorldMsgs=r._crossWorldMsgs||[]},function(t){r._crossWorldMsgs=t}),I(1,r,"crossNoticeMsgs",function(){return r._crossNoticeMsgs=r._crossNoticeMsgs||[]},function(t){r._crossNoticeMsgs=t}),I(1,r,"blackRole",function(){return r._blackRoleArr=r._blackRoleArr||[]},function(t){r._blackRoleArr=t}),r.initConfig=function(){if(!r._chatKeyWordList){r._chatKeyWordList=[];var t,e=Ra.startEncode("chat.xml");for(var i in e)(t=e[i])instanceof xml.WorldChatLimitVO?r._worldChatLimitVo=t:t instanceof xml.ChatKeyWordVO&&r._chatKeyWordList.push(t)}},r.updateChatMsgsByChannel=function(t,e){switch(e){case 1e4:(r.worldMsgs=r.worldMsgs||[]).push(t),40<r.worldMsgs.length&&r.worldMsgs.shift();break;case 2e4:(r.familyMsgs=r.familyMsgs||[]).push(t),40<r.familyMsgs.length&&r.familyMsgs.shift();break;case 3e4:(r.noticeMsgs=r.noticeMsgs||[]).push(t),10<r.noticeMsgs.length&&r.noticeMsgs.shift();break;case 4e4:(r.crossWorldMsgs=r.crossWorldMsgs||[]).push(t),40<r.crossWorldMsgs.length&&r.crossWorldMsgs.shift();break;case 5e4:(r.crossNoticeMsgs=r.crossNoticeMsgs||[]).push(t),10<r.crossNoticeMsgs.length&&r.crossNoticeMsgs.shift()}},r.getCanShowMsgsByLevelAndRegrow=function(t){var e,i=[];for(var s in t)e=t[s],ys.checkRegrow(e.min_regrow,e.max_regrow)&&(0==e.min_level||0<e.min_level&&pe.myLevel>=e.min_level)&&(0==e.max_level||0<e.max_level&&pe.myLevel<=e.max_level)&&i.push(e);return i},r.setMsgsByChannel=function(t,e){switch(e=r.getCanShowMsgsByLevelAndRegrow(e),t){case 1e4:(r.worldMsgs=e)&&r.worldMsgs.reverse(),r.hasWorldCach=!0;break;case 2e4:(r.familyMsgs=e)&&r.familyMsgs.reverse(),r.hasFamilyCach=!0;break;case 3e4:(r.noticeMsgs=e)&&r.noticeMsgs.reverse(),r.hasNoticeCach=!0;break;case 4e4:(r.crossWorldMsgs=e)&&r.crossWorldMsgs.reverse(),r.hasCrossWorldCach=!0;break;case 5e4:(r.crossNoticeMsgs=e)&&r.crossNoticeMsgs.reverse(),r.hasCrossNoticeCach=!0}},r.crossAndLocalChangeReset=function(){r.hasWorldCach=!1,r.hasNoticeCach=!1,r.hasCrossWorldCach=!1,r.hasCrossNoticeCach=!1,r.previewMsgs=[],r.noticeMsgs=[],r.crossNoticeMsgs=[]},r.maskByBlack=function(t){if(!t)return null;for(var e,i=t.length-1;0<=i;i--)(e=t[i])&&e.role_info&&(r.isInBlack(e.role_info.role_id)?t.splice(i,1):r.isInBlackRole(e.role_info.role_id)&&t.splice(i,1));return t},r.isInBlack=function(t){var e=jn.getBlackByRoleId(t);return e||(e=qn.getBlackByRoleId(t)),null!=e},r.isInBlackRole=function(t){return-1!=r.blackRole.indexOf(t)},r.getMsgsByChannel=function(t){switch(t){case 1e4:return r.maskByBlack(r.worldMsgs);case 2e4:return r.maskByBlack(r.familyMsgs);case 3e4:return r.noticeMsgs;case 4e4:return r.maskByBlack(r.crossWorldMsgs);case 5e4:return r.crossNoticeMsgs}return[]},r.getPreviewDatas=function(t){if(void 0===t&&(t=!1),ua.isCross()){if(0==r.hasCrossWorldCach||0==r.hasCrossNoticeCach)return void(r.previewMsgs=[]);r.previewMsgs=r.previewMsgs||[],r.crossWorldMsgs&&0<r.crossWorldMsgs.length&&(r.previewMsgs=r.previewMsgs.concat(r.crossWorldMsgs)),t&&r.crossNoticeMsgs&&0<r.crossNoticeMsgs.length&&(r.previewMsgs=r.previewMsgs.concat(r.crossNoticeMsgs))}else{if(0==r.hasWorldCach||0==r.hasFamilyCach||0==r.hasNoticeCach)return void(r.previewMsgs=[]);r.previewMsgs=r.previewMsgs||[],r.worldMsgs&&0<r.worldMsgs.length&&(r.previewMsgs=r.previewMsgs.concat(r.worldMsgs)),r.familyMsgs&&0<r.familyMsgs.length&&(r.previewMsgs=r.previewMsgs.concat(r.familyMsgs)),t&&r.noticeMsgs&&0<r.noticeMsgs.length&&(r.previewMsgs=r.previewMsgs.concat(r.noticeMsgs))}for(r.previewMsgs.sort(r.sortOnPreviewsDescending);10<r.previewMsgs.length;)r.previewMsgs.shift()},r.sortOnPreviewsDescending=function(t,e){return t.tstamp>e.tstamp?1:t.tstamp<e.tstamp?-1:0},r.getPreviewMsgs=function(t){return void 0===t&&(t=!1),null!=r.previewMsgs&&0!=r.previewMsgs.length||r.getPreviewDatas(t),r.maskByBlack(r.previewMsgs)},r.addPreviewMsgs=function(t){null!=r.previewMsgs&&0!=r.previewMsgs.length||r.getPreviewDatas(),3==t.msg_type||2==t.msg_type?r.previewMsgs.push(t):t&&t.role_info&&!r.isInBlack(t.role_info.role_id)&&r.previewMsgs.push(t)},r.updatePrivateChats=function(t){for(var e=!1,i=0;i<r.privateChats.length;i++)if(t==r.privateChats[i]){e=!0;break}0==e&&(r.privateChats.push(t),4<r.privateChats.length&&r.privateChats.shift())},r.deletePrivateChats=function(t){for(var e=0;e<r.privateChats.length;e++)if(t==r.privateChats[e]){r.privateChats.splice(e,1);break}},r.updatePrivateChatMsg=function(t,e,i,s,n){r.updatePrivateChats(t);var o=r.getPrivateChatMsgsByRoleId(t);null==o&&((o=new xs).targetRoleId=t,r.privateChatMsgs.push(o));var a=new Ss;a.msg=i,a.ts=ya.serverTime,a.type=e,a.bgColor=s,a.systemTips=n,o.msgs=o.msgs||[],o.msgs.push(a)},r.getPrivateChatMsgsByRoleId=function(t){var e;for(var i in r.privateChatMsgs)if((e=r.privateChatMsgs[i]).targetRoleId==t)return e;return null},r.setChatPairsList=function(t){var e,i,s,n;for(var o in r._privateChatMsgs=[],t){var a;for(var l in s=t[o],null==(e=r.getPrivateChatMsgsByRoleId(s.role_id))&&((e=new xs).targetRoleId=s.role_id,r._privateChatMsgs.push(e)),e.isUnRead=s.has_unread_msg,s.msg_list)a=s.msg_list[l],(i=new Ss).msg=a.msg,i.ts=a.ts,i.bgColor=a.bg_color,1==a.self?i.type=1:i.type=2,e.msgs=e.msgs||[],e.msgs.push(i)}for(n in r.privateChatMsgs)(e=r.privateChatMsgs[n]).msgs.sort(r.sortMsgs);r.privateChatMsgs.sort(r.sortPrivateChatMsgs)},r.sortPrivateChatMsgs=function(t,e){if(t&&e){var i=t.msgs[t.msgs.length-1],s=e.msgs[e.msgs.length-1];return i&&s?i.ts>s.ts?-1:i.ts<s.ts?1:0:0}return 0},r.getPrivateChatFriends=function(){var t,e=[];for(var i in r.privateChatMsgs){t=r.privateChatMsgs[i];var s=jn.getFriendByRoleId(t.targetRoleId);s||(s=qn.getFriendByRoleId(t.targetRoleId)),s&&e.push(s)}return e},r.checkPrivateChatNewsRedPoint=function(){var t,e=!1,i=!1;for(var s in r.privateChatMsgs)if(1==(t=r.privateChatMsgs[s]).isUnRead){var n=jn.getFriendByRoleId(t.targetRoleId);n?e=!0:(n=qn.getFriendByRoleId(t.targetRoleId))&&(i=!0)}e?Nt.show("RP_CHAT_PRIVATE_NEWS"):Nt.hide("RP_CHAT_PRIVATE_NEWS"),i?Nt.show("RP_CHAT_PRIVATE_NEWS_CROSS"):Nt.hide("RP_CHAT_PRIVATE_NEWS_CROSS")},r.checkPrivateChatRedPointByRoleId=function(t){var e;for(var i in r.privateChatMsgs)if((e=r.privateChatMsgs[i]).targetRoleId==t&&1==e.isUnRead)return!0;return!1},r.updatePrivateChatMsgUnread=function(t,e){var i;for(var s in void 0===e&&(e=1),r.privateChatMsgs)if((i=r.privateChatMsgs[s]).targetRoleId==t){i.isUnRead=e;break}},r.updatePrivateChatByFriendBlack=function(t){if(r.privateChatMsgs)for(var e=0;e<r.privateChatMsgs.length;e++){var i=r.privateChatMsgs[e];if(i&&i.targetRoleId==t){r.privateChatMsgs.splice(e,1);break}}r.deletePrivateChats(t)},r.sortMsgs=function(t,e){return t.ts>e.ts?1:t.ts<e.ts?-1:0},r.getPrivateChatNames=function(){var t,e=[],i="";for(var s in r.privateChats){var n,o;for(var a in t=r.privateChats[s],jn.friends)if(t==(n=jn.friends[a]).role_id&&n.role_name){4<(i=n.role_name.split("区-")[1]).length&&(i=i.substr(0,4)+".."),e.push(i);break}for(var l in qn.friends)if(t==(o=qn.friends[l]).role_id&&o.role_name){4<(i=o.role_name.split("区-")[1]).length&&(i=i.substr(0,4)+".."),e.push(i);break}}return e},r.getPrivateNameIndex=function(){for(var t=0;t<r.privateChats.length;t++){if(r.privateChats[t]==modules.chat.ChatManager.curPrivateChatRoleId)return t}return 9999},r.getLastMsgSimpleInfo=function(t){var e="",i=r.getPrivateChatMsgsByRoleId(t);if(i&&0<i.msgs.length){var s=i.msgs[i.msgs.length-1];e=s&&s.msg&&12<s.msg.length?s.msg.substr(0,12)+"..":s.msg}return e},r.getWarningTips=function(t,e){var i=jn.getFriendByRoleId(e);if(i&&50<=i.favor)return null;if(0<r.getWarningTipsTimes(t,e))return null;var s=r.getKeyWordVoByWord(t);return s?(r.recordWarningTipsTimes(t,e),s.tips):null},r.getWarningTipsTimes=function(t,e){var i=r.getKeyWordVoByWord(t);if(!i)return 0;var s=i.key+"_"+e;return r._showWarningTipsTime&&r._showWarningTipsTime[s]?r._showWarningTipsTime[s]:0},r.recordWarningTipsTimes=function(t,e){var i=r.getKeyWordVoByWord(t);if(i){var s=i.key+"_"+e,n=r.getWarningTipsTimes(t,e);n++,(r._showWarningTipsTime=r._showWarningTipsTime||{})[s]=n}},r.getKeyWordVoByWord=function(t){var e,i=r.chatKeyWordList;for(var s in i)if((e=i[s]).isMatch(t))return e;return null},r.recordSendWord=function(t,e,i){void 0===i&&(i=-1),1==e&&(i<0&&(i=r.curChannel),1e4==i&&(t=t.replace(/\s+/g,""),2<=(r._previousSendWord=r._previousSendWord||[]).length&&r._previousSendWord.shift(),r._previousSendWord.push(t)))},r.isWordRepeat=function(t){if(""==t.replace(/\##\d{2}/g,""))return!1;if(t=t.replace(/\s+/g,""),r._previousSendWord)for(var e in r._previousSendWord)if(r._previousSendWord[e]==t)return!0;return!1},r.checkSendWordLimit=function(t,e,i){return void 0===i&&(i=-1),i<0&&(i=r.curChannel),37!=G.agentId||1e4!=i&&2e4!=i?1e4!=i||(pe.myLevel<r.worldChatLimitLvl&&1==e?(11==G.agentId?Jt.addTip(Xt.format("达到{0}级后可在世界频道发言",30)):Bt.isFanTi?Jt.addTip(Xt.format("达到{0}级后可在世界频道发言",25)):Jt.addTip(Xt.format("达到{0}级后可在世界频道发言",modules.chat.ChatManager.worldChatLimitLvl)),!1):!r.isWordRepeat(t)||1!=e||(Jt.addTip("不能连续发送相同内容，请编辑内容"),!1)):7<=Xs.curServerOpenDay||0<Xs.curCombineServerTimes?4<=yt.myVipLevel||(Jt.addTip("vip4开启发言功能"),!1):(Jt.addTip("开服7天后开启该频道"),!1)},r._worldMsgs=null,r._familyMsgs=null,r._noticeMsgs=null,r._previewMsgs=null,r._crossWorldMsgs=null,r._crossNoticeMsgs=null,r._blackRoleArr=null,r.hasWorldCach=!1,r.hasFamilyCach=!1,r.hasNoticeCach=!1,r.hasCrossWorldCach=!1,r.hasCrossNoticeCach=!1,r.curPrivateChatRoleId=NaN,r.curChannel=0,r._privateChats=null,r._privateChatMsgs=null,r._stopClickEvent=!1,r.curCrossPreviewTabIndex=0,r._worldChatLimitVo=null,r._chatKeyWordList=null,r._previousSendWord=null,r._showWarningTipsTime=null,r}(),bs=function(){function p(){}return w(p,"modules.chat.ChatUtils"),p.getMsgTypeIconUrl=function(t){var e="";switch(t){case 5:e="modules/chat/chatMsgTypeFamily.png";break;case 3:e="modules/chat/chatMsgTypeNotice.png";break;case 2:e="modules/chat/chatMsgTypeSys.png"}return e},p.getMsgTypeName=function(t){var e="";switch(t){case 3:e=Z.font("【公告】","#f40c08",20);break;case 2:e=Z.font("【系统】","#5d98b3",20);break;case 5:e=Z.font("【仙盟】","#5d98b3",20);break;case 4:e=Z.font("【私聊】","#efc20c",20)}return e},p.replaceSpcWord=function(t){var e;for(var i in p.NEED_TO_REPLACE_STRING)e=p.NEED_TO_REPLACE_STRING[i],t=t.replace(e.key,e.value);return t},p.getChatContextHtml=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i="#815841");for(var s,n=t,o=t.split(/\##\d{2}/),a=[];s=Is.Face_KEY_REG.exec(n);){for(var l=0;l<s.length;l++){var r=s[l];n=n.replace(r,"")}a=a.concat(s)}if(0==a.length)return e&&(t=p.replaceSpcWord(t)),t=Z.span(t,i,24);for(var h="",u="",c=0,d=0;d<o.length;d++)""!=(u=o[d])&&(e&&(u=p.replaceSpcWord(u)),h+=Z.span(u,i,24)),d<a.length&&0<(c=parseInt(a[d].substr(2,2)))&&c<=63&&(h+=Z.image("com/ui/face"+c+"_1.png",32,32));return h},p.sendCd=function(t,e){if(!t.gray){t.mouseEnabled=!1,t.gray=!0;var i=4;t.timer.clear(null,s),t.timer.loop(1e3,null,s,[t,i,e]),s()}function s(){if(i<=0)return e&&e.run(),t.timer.clear(null,s),i=0,t.mouseEnabled=!0,t.label="发送",void(t.gray=!1);t.label=i--+"s"}},p.filterHtmlSpcStr=function(t,e){t&&(j.checkHtmlStrRule(e)?t.innerHTML=e:t.innerHTML=Z.span("*","#efdcaf"))},p.replaceSpcInputChar=function(t){if(""==t)return t;for(var e=/</g,i=!0;i;)i=-1!=(t=t.replace(e,"*")).indexOf("<");return t},_(p,["NEED_TO_REPLACE_STRING",function(){return this.NEED_TO_REPLACE_STRING=[{key:/&/g,value:"&amp;"},{key:/</g,value:"&lt;"},{key:/>/g,value:"&gt;"}]}]),p}(),Ss=function(){function t(){this.type=0,this.msg=null,this.ts=0,this.bgColor=0,this.systemTips=null}return w(t,"modules.chat.vo.ChatPrivateTargetMsgVO"),t}(),xs=function(){function t(){this.targetRoleId=NaN,this.msgs=null,this.isUnRead=0}return w(t,"modules.chat.vo.ChatPrivateTargetVO"),t}(),Cs=(function(){function t(){}w(t,"modules.CheckForMOC.CheckForMocConst")}(),function(){function a(){}return w(a,"modules.CheckForMOC.CheckForMocManager"),I(1,a,"logArr",function(){return a._logArr},function(t){a._logArr=t=t||[]}),a.initXml=function(){null==a._configs&&(a._configs=Ra.startEncode("forCheck.xml"))},a.getProbabilyByType=function(t){a.initXml();for(var e=[],i=0,s=a._configs.length;i<s;i++){var n=a._configs[i];n.type==t&&e.push(n)}return e},a.getProbabilyByTimesAndType=function(t,e){void 0===e&&(e=1),a.initXml();for(var i=[],s=0,n=a._configs.length;s<n;s++){var o=a._configs[s];o.type==t&&""!=o["rate_"+e]&&i.push({goodStr:o.goodStr,rate:o["rate_"+e]})}return i},a.setActBoxlogToc=function(t,e){a._actBoxlogTocObj[t]=e},a.getActBoxlogByActId=function(t){return a._actBoxlogTocObj[t]?a._actBoxlogTocObj[t]:null},a._configs=null,a._logArr=null,a._actBoxlogTocObj={},a}()),Ps=function(){function t(){}return w(t,"modules.commonCopy.boss.BossConstant"),_(t,["REGORW_STEP",function(){return this.REGORW_STEP=[[1,2],[3,4],[5,6],[7,30]]},"REGROW_BOSS1",function(){return this.REGROW_BOSS1=[75600,76200]}]),t}(),Ts=function(){function n(){}return w(n,"modules.commonCopy.boss.BossManager"),I(1,n,"bossReviveNote",function(){return n._bossReviveNote},function(t){n._bossReviveNote=t}),I(1,n,"noticeBossIDs",function(){if(n.unNoticeBoss){var t,e=[],i=n.getAllFitBossID(1);for(var s in i)t=i[s],-1==n.unNoticeBoss.indexOf(t)&&e.push(t);return e}return null}),n.updateCallBossTimes=function(t){n.callBossAlreadyTimes=t},n.getCallBossTime=function(t){var e;for(var i in n.callBossAlreadyTimes)if((e=n.callBossAlreadyTimes[i]).id==t)return e.val;return 0},n.updateRegrowHistory=function(t,e){n.regrowHistory=n.regrowHistory||{};var i=[];if(e)for(var s=0;s<e.length;s++)i.push([s+1,e[s]]);n.regrowHistory[t]=i},n.getRegrowHistory=function(t){return n.regrowHistory&&n.regrowHistory[t]?n.regrowHistory[t]:null},n.checkWorldBossInCD=function(t){var e;for(var i in n.lastOutTime)if((e=n.lastOutTime[i]).id==t)return ya.serverTime-e.val<30;return!1},n.getWorldBossLastOutTime=function(t){var e;for(var i in n.lastOutTime)if((e=n.lastOutTime[i]).id==t)return e.val;return 0},n.updateBossReviveNote=function(t){var e;for(var i in n.bossReviveNote)if((e=n.bossReviveNote[i]).id==t.id)return void(e.val=t.val)},n.checkShowTipBoss=function(){var t;for(var e in n.bossReviveNote){t=n.bossReviveNote[e];var i=n.getBossVO(t.id);if(1==t.val&&i&&i.isOpen())return t.id}return 0},n.checkShowRPBoss=function(){var t;for(var e in n.getBossVOs()){t=n.getBossVOs()[e];var i=n.noticeBossIDs;if(i&&-1!=i.indexOf(t.id)){var s=n.getBossData(t.id);if(s&&0==s.state)return t.id}}return 0},n.isNotice=function(t){var e=n.noticeBossIDs;return null!=e&&-1!=e.indexOf(t)},n.resetNoticeChangeDic=function(){(n.noticeChangeDic=n.noticeChangeDic||new P).clear()},n.noticeChange=function(t){n.noticeChangeDic&&t&&(null!=n.noticeChangeDic.get(t.id)?n.noticeChangeDic.remove(t.id):n.noticeChangeDic.set(t.id,t))},n.getNoticeChangeData=function(){return n.noticeChangeDic?n.noticeChangeDic.values:null},n.updateUnnoticeBossByClient=function(){if(n.unNoticeBoss){var t,e=n.getNoticeChangeData(),i=0;for(var s in e)t=e[s],i=n.unNoticeBoss.indexOf(t.id),1==t.val?-1!=i&&n.unNoticeBoss.splice(i,1):2==t.val&&-1==i&&n.unNoticeBoss.push(t.id)}},n.getBossData=function(t){var e;if(n.bossInfo)for(var i in n.bossInfo)if((e=n.bossInfo[i]).boss_id==t)return e;return null},n.init=function(){if(!n.has){n.has=!0,n.bossDic=new P,n.typeBossDic={},n.regrowBossRewards={},n.callBossDic={},n.maxCallBossNum=0;var t,e=Ra.startEncode("boss.xml");for(var i in e)(t=e[i])instanceof xml.BossVO?(n.bossDic.set(t.id,t),null==n.typeBossDic[t.copyType]&&(n.typeBossDic[t.copyType]=[]),n.typeBossDic[t.copyType].push(t)):t instanceof xml.RegrowKillRankRewardVO?n.regrowBossRewards[t.index]=t:t instanceof xml.CallBossVO&&(n.callBossDic[t.goodsID]=t,n.maxCallBossNum++)}},n.getCallBossVO=function(t){return n.init(),n.callBossDic[t]},n.getCallBossVOByIndex=function(t){for(var e in n.init(),n.callBossDic)if(n.callBossDic[e].index==t)return n.callBossDic[e];return null},n.getRegrowBossRewards=function(t){return n.init(),n.regrowBossRewards[t]},n.getSuitRegrowBossRewards=function(){return n.init(),n.regrowBossRewards[ks.getRegrowBossIndex()]},n.getBossCfgDatasByCopyType=function(t){return n.init(),n.typeBossDic[t]},n.getBossVO=function(t){return n.init(),n.bossDic.get(t)},n.getBossVOs=function(){return n.init(),n.bossDic.values},n.getCurBossLvStr=function(){var t=n.getBossVO(As.curBossID);return t?t.showBossLvStr:""},n.getAllFitBossID=function(t){var e,i=[];for(var s in n.getBossCfgDatasByCopyType(t))(e=n.getBossCfgDatasByCopyType(t)[s]).isOpen()&&i.push(e.id);return i},n.LastChallenge=0,n.nextReviveTs=0,n.bossInfo=null,n.killRecord=null,n.unNoticeBoss=null,n.lastOutTime=null,n.curRegrowBossIndex=0,n.regrowHistory=null,n.rollToc=null,n.callBossAlreadyTimes=null,n._bossReviveNote=null,n.noticeChangeDic=null,n.has=!1,n.bossDic=null,n.typeBossDic=null,n.regrowBossRewards=null,n.callBossDic=null,n.maxCallBossNum=0,n}(),ks=function(){function t(){}return w(t,"modules.commonCopy.boss.BossUtil"),t.getRegrowBossIndex=function(){for(var t=0;t<Ps.REGORW_STEP.length;t++)if(pe.myRegrow>=Ps.REGORW_STEP[t][0]&&pe.myRegrow<=Ps.REGORW_STEP[t][1])return t;return-1},t}(),As=(function(){function t(){}w(t,"modules.commonCopy.CommonCopyConst")}(),function(){function s(){}return w(s,"modules.commonCopy.CommonCopyMgr"),I(1,s,"worldBossHideRole",function(){return s._worldBossHideRole},function(t){s._worldBossHideRole=t}),I(1,s,"copyTimeDatas",function(){return s._copyTimeDatas},function(t){s._copyTimeDatas=t}),I(1,s,"copyMeridianHideRole",function(){return s._copyMeridianHideRole},function(t){s._copyMeridianHideRole=t}),I(1,s,"regrowBosHideRole",function(){return s._regrowBosHideRole},function(t){s._regrowBosHideRole=t}),s.getBossHurtArrByID=function(t){return s.bossHurtDic&&s.bossHurtDic.hasOwnProperty(t+"")?s.bossHurtDic[t]:null},s.updateBossHurtByID=function(t){var e;for(var i in s.bossHurtDic=s.bossHurtDic||new Object,t)e=t[i],s.bossHurtDic[e.monster_type]=e.hurt},s.getBossHurtArr=function(){return s.bossHurt},s.getMyHurt=function(){return s.myHurt},s.updateBossHurt=function(t,e){s.myHurt=e,s.bossHurt=t?t.sort(s.sortBest):null},s.sortBest=function(t,e){return t.hurt<e.hurt?1:t.hurt>e.hurt?-1:0},s.updateCopyTimeDatas=function(t){if(s.copyTimeDatas)for(var e=0;e<s.copyTimeDatas.length;e++)if(s.copyTimeDatas[e].map_id==t.map_id){s.copyTimeDatas[e]=t;break}},s.getCopyTime=function(t){var e;for(var i in s.copyTimeDatas)if((e=s.copyTimeDatas[i])&&e.map_id==t)return e;return null},s.curCopyType=0,s.curBossID=NaN,s.bossHurt=null,s.myHurt=null,s.shutDownTime=0,s.bossHurtDic=null,s._worldBossHideRole=!0,s._copyMeridianHideRole=!0,s._regrowBosHideRole=!0,s._copyTimeDatas=null,s}()),Es=function(){function t(){}return w(t,"modules.commonCopy.CommonCopyUtil"),t.getResultVO=function(t,e,i,s){void 0===e&&(e=0),void 0===i&&(i=0);var n=new sa;if(n.result=t,n.mapID=e,n.goods=s,1!=t)if(ua.isCustomMap(e))Ds.curBarrierWin=!0,n.msgTitle="通关关卡： "+Ds.curBarrier+" 关",n.leftFunCaller=ol.ins(),n.leftBtnFun=ol.ins().afterGodHoodCodyHandler,n.leftFunParm=[1],n.timeOutCaller=ol.ins(),n.timeOutFun=ol.ins().afterGodHoodCodyHandler,n.timeOutParm=[1];else if(ua.isLoveCopyMap(e))n.msgTitle="本次伤害量是："+Ms.getBigNumberShowStr(i,1)+"，根据伤害量奖励：",n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit,n.leftBtnLabel="领取奖励",n.timeOutCaller=el.ins(),n.timeOutFun=el.ins().toExit,Ms.isFirstPassCopy||(n.msgBottom="本日已领取过奖励");else if(ua.isRoleBossMap(e))n.msgTitle="你成功击败了 "+Ts.getCurBossLvStr()+"BOSS",n.leftFunCaller=tl.ins(),n.leftBtnFun=tl.ins().resultCallBack,n.leftFunParm=[0],n.timeOutCaller=tl.ins(),n.timeOutFun=tl.ins().resultCallBack,n.timeOutParm=[0];else if(ua.isWorldBossMap(e))n.msgTitle=1==i?"你的伤害最高，获得BOSS奖励":"伤害排名未达到第一，获得参与奖励",n.leftFunCaller=tl.ins(),n.leftBtnFun=tl.ins().resultCallBack,n.leftFunParm=[1],n.timeOutCaller=tl.ins(),n.timeOutFun=tl.ins().resultCallBack,n.timeOutParm=[1];else if(ua.isRegrowBossMap(e))0<i&&(n.msgTitle=i<=5?"恭喜你伤害排名第"+i+"，奖励如下：":"恭喜你成功挑战转生BOSS，奖励如下："),n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit;else if(ua.isFamilyBossCopy(e))n.msgTitle="",n.leftFunCaller=Ol.ins(),n.leftBtnFun=Ol.ins().bossResultCallBack,n.timeOutCaller=Ol.ins(),n.timeOutFun=Ol.ins().bossResultCallBack;else if(ua.isMaterialsMap(e))ua.ispBaiLingYuanMap(e)?n.msgTitle="你已成功通关了【百灵园】":n.msgTitle="你已成功通关了【"+Os.getCurMaterialsCopyName()+"】",n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit;else if(ua.isDreamCopyMap(e))n.msgTitle="通关关卡："+(Os.curBarrier+1)+" 关",n.leftBtnLabel=Ls.isEndChapter(Os.curBarrier+1)?"领取宝箱":"进入下关",n.leftBtnFun=il.ins().dreamGoNext,n.leftFunCaller=il.ins(),n.timeOutFun=il.ins().dreamGoNext,n.timeOutCaller=il.ins(),n.rightFunCaller=el.ins(),n.rightBtnFun=el.ins().toExit,n.showRight=!0;else if(ua.isFamilyCopyMap(e))Dn.isWillOverForFamilyCopy?(n.leftBtnFun=el.ins().toExit,n.leftFunCaller=el.ins(),n.timeOutCaller=el.ins(),n.timeOutFun=el.ins().toExit):(n.leftBtnFun=Ol.ins().checkToMapChange,n.leftFunCaller=Ol.ins(),n.leftFunParm=[Dn.nowRound],n.timeOutCaller=Ol.ins(),n.timeOutFun=Ol.ins().checkToMapChange,n.timeOutParm=[Dn.nowRound]),n.countDown=4;else if(ua.isBiographyCopyMap())n.leftBtnFun=wl.getInstance().fightBack,n.leftFunCaller=wl.getInstance(),n.leftFunParm=[1],n.timeOutCaller=wl.getInstance(),n.timeOutFun=wl.getInstance().fightBack;else if(ua.isBiographyBountyMap())n.leftBtnFun=wl.getInstance().fightBack,n.leftFunCaller=wl.getInstance(),n.leftFunParm=[2],n.timeOutCaller=wl.getInstance(),n.timeOutFun=wl.getInstance().fightBack;else if(ua.isGodHoodFightMap(e)){var o=Zn.getGodHoodByLv(Zn.godHoodLv);n.msgTitle=Z.font("挑战成功！<br/>","#ffffff",26),n.msgCon+=Z.font("仙阶提升至：","#ffffff",26)+Z.font(Zn.godHoodLv+"阶-"+Zn.getGodHoodStageNameByLv(Zn.godHoodLv),Zn.getGodHoodStageColorByLv(Zn.godHoodLv),26)+"<br/>"+Z.font("当前可挑战：","#ffffff",26)+Z.font("八荒禁地第"+Zn.godHoodLv+"层","#7fd6fe",26),o.getHasEquip()&&(n.msgCon+="<br/>"+Z.font("已激活仙器：","#ffffff",26)+Z.font($n.godHoodEquipArr[Math.floor(Zn.godHoodLv/5)],"#fdc06a",26)),n.leftFunCaller=ol.ins(),n.leftBtnFun=ol.ins().afterGodHoodFightHandler,n.timeOutCaller=ol.ins(),n.timeOutFun=ol.ins().afterGodHoodFightHandler}else if(ua.isGodHoodStoryMap(e))n.msgTitle="恭喜你通关了【剧情副本第"+Vs.passedMaxChapter+"章】",n.leftFunCaller=ol.ins(),n.leftBtnFun=ol.ins().afterGodHoodCodyHandler,n.leftFunParm=[2],n.timeOutCaller=ol.ins(),n.timeOutFun=ol.ins().afterGodHoodCodyHandler,n.timeOutParm=[2];else if(ua.isGodHoodForbiddenMap(e))n.leftFunCaller=ol.ins(),n.leftBtnFun=ol.ins().afterGodHoodForbiddenHandler,n.timeOutCaller=ol.ins(),n.timeOutFun=ol.ins().afterGodHoodForbiddenHandler;else if(ua.isCopyAncientExotic(e))n.msgTitle=Z.font("恭喜你成功击倒了异兽","#fff000",30),n.msgCon=Z.font("可于商城免费获得【上古异兽】","#fff000",30),n.leftBtnLabel="退出副本",n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit,n.timeOutCaller=el.ins(),n.timeOutFun=el.ins().toExit;else if(ua.isCopyStrangeFireCommon(e))Gs.infoToc&&(n.msgTitle=Z.font("你已经成功通关了异火圣域Lv."+Gs.infoToc.boss_barrier,"#fff000",30)),n.leftFunCaller=rl.ins(),n.leftBtnFun=rl.ins().fightBack,n.timeOutCaller=rl.ins(),n.timeOutFun=rl.ins().fightBack;else if(ua.isCopyStrangeFireBOSS(e)){var a="异火圣域Lv."+Gs.infoToc.boss_barrier;a+=" -> 异火圣域Lv."+(Gs.infoToc.boss_barrier+1),n.msgTitle=Z.font(a,"#fff000",30),n.leftFunCaller=rl.ins(),n.leftBtnFun=rl.ins().fightBack,n.timeOutCaller=rl.ins(),n.timeOutFun=rl.ins().fightBack}else ua.isCopyTaliman(e)?(n.msgTitle="通关关卡："+Hs.infoToc.current_barrier+" 关",n.leftBtnLabel=Hs.GetTenRewards(2)?"领取奖励":"进入下关",n.leftBtnFun=il.ins().talimanGoNext,n.leftFunCaller=il.ins(),n.timeOutFun=il.ins().talimanGoNext,n.timeOutCaller=il.ins(),n.rightFunCaller=el.ins(),n.rightBtnFun=el.ins().toExit,n.showRight=!0):ua.isCopyZhuXianRoad(e)?(n.leftBtnLabel="进入下关",n.leftBtnFun=cl.ins().openZhuXianStageSetView,n.leftFunCaller=cl.ins(),n.timeOutFun=el.ins().toExit,n.timeOutCaller=el.ins(),n.rightFunCaller=el.ins(),n.rightBtnFun=el.ins().toExit,n.showRight=!0,n.countDown=120):(ua.isMonsterCopyMap(e)&&(n.msgTitle="本次挑战累计造成"+W.getShortenPowerStr(Us.hurt)+"伤害 "+Z.linkcolor("查看排行榜","monsterCopy",!0,"96f254",28)),n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit);else ua.isBiographyCopyMap()?(n.leftBtnFun=wl.getInstance().fightBack,n.leftFunCaller=wl.getInstance(),n.leftFunParm=[1],n.timeOutCaller=wl.getInstance(),n.timeOutFun=wl.getInstance().fightBack):ua.isBiographyBountyMap()?(n.leftBtnFun=wl.getInstance().fightBack,n.leftFunCaller=wl.getInstance(),n.leftFunParm=[2],n.timeOutCaller=wl.getInstance(),n.timeOutFun=wl.getInstance().fightBack):ua.isRoleBossMap(e)?(n.leftFunCaller=tl.ins(),n.leftBtnFun=tl.ins().resultCallBack,n.leftFunParm=[0],n.timeOutCaller=tl.ins(),n.timeOutFun=tl.ins().resultCallBack,n.timeOutParm=[0]):ua.isWorldBossMap(e)?(n.leftFunCaller=tl.ins(),n.leftBtnFun=tl.ins().resultCallBack,n.leftFunParm=[1],n.timeOutCaller=tl.ins(),n.timeOutFun=tl.ins().resultCallBack,n.timeOutParm=[1]):ua.isFamilyBossCopy(e)?(n.leftFunCaller=Ol.ins(),n.leftBtnFun=Ol.ins().bossResultCallBack,n.timeOutCaller=Ol.ins(),n.timeOutFun=Ol.ins().bossResultCallBack):ua.isGodHoodForbiddenMap(e)?(n.leftFunCaller=ol.ins(),n.leftBtnFun=ol.ins().afterGodHoodForbiddenHandler,n.timeOutCaller=ol.ins(),n.timeOutFun=ol.ins().afterGodHoodForbiddenHandler):(ua.isCopyAncientExotic(e)&&(n.msgTitle=Z.font("恭喜你成功击倒了异兽","#fff000",30),n.msgCon=Z.font("可于商城免费获得【上古异兽】","#fff000",30),n.leftBtnLabel="退出副本"),n.leftFunCaller=el.ins(),n.leftBtnFun=el.ins().toExit,n.timeOutCaller=el.ins(),n.timeOutFun=el.ins().toExit);return n},t.checkTimeCopyRedPoint=function(){t.checkMaterials(),t.checkBossRole()},t.checkMaterials=function(){var t,e=Os.getMaterialsCopyVOs();for(var i in e){t=e[i];var s=As.getCopyTime(t.mapID);if(s&&s.finished_times<s.max_free_times)return void Nt.show("RP_COPY_MATERIALS")}Nt.hide("RP_COPY_MATERIALS")},t.checkBossRole=function(){if(Ne.isBossOpen()){var t,e=Ts.getBossCfgDatasByCopyType(0);for(var i in e){t=e[i];var s=As.getCopyTime(t.mapID);if(s&&t.isOpen()&&s.max_free_times>s.finished_times)return void Nt.show("RP_BOSS_ROLE")}}Nt.hide("RP_BOSS_ROLE")},t}(),Rs=function(){function t(){}return w(t,"modules.commonCopy.copy.CopyConst"),_(t,["DREAM_BARRIER_POINT",function(){return this.DREAM_BARRIER_POINT=[[6,255],[213,255],[419,255],[507,60],[301,60],[94,60],[6,-127],[213,-127],[419,-127]]},"COPY_STRANGE_FIRE_MONSTER_TYPE_ID_FIELD",function(){return this.COPY_STRANGE_FIRE_MONSTER_TYPE_ID_FIELD=[11000001,11000009]}]),t}(),Os=function(){function l(){}return w(l,"modules.commonCopy.copy.CopyMgr"),I(1,l,"teamCopyVO",function(){return l.init(),l._teamCopyVO}),I(1,l,"loveCopyVO",function(){return l.init(),l._loveCopyVO}),I(1,l,"strangeFireCopyVO",function(){return l.init(),l._strangeFireCopyVO}),I(1,l,"zhuXianRoadRuleVO",function(){return l.init(),l._zhuXianRoadRuleVO}),I(1,l,"talimanCopyVO",function(){return l.init(),l._talimanCopyVO}),I(1,l,"zhuXianRoadCopyVO",function(){return l.init(),l._zhuXianRoadCopyVO}),I(1,l,"talimanCopyVOs",function(){return l.init(),l._talimanCopyBarriers}),I(1,l,"zhuXianRoadSectionVO",function(){return l.init(),l._zhuXianRoadSectionVO}),I(1,l,"zhuXianRoadBarrierVO",function(){return l.init(),l._zhuXianRoadBarrierVO}),I(1,l,"dreamSoulCost",function(){return l.init(),l._dreamSoulCost}),I(1,l,"MaxBarrier",function(){return l.init(),l._maxBarrier}),I(1,l,"eternalSkyVO",function(){return l.init(),l._eternalSkyVO}),I(1,l,"loveCopyRankRewardList",function(){return l.init(),l._loveCopyRankRewardList}),I(1,l,"loveCopyRankScoreList",function(){return l._loveCopyRankScoreList}),l.init=function(){var t,e,i,s;if(!l.has)for(var n in l.has=!0,l.copyCfgArr=Ra.startEncode("copy.xml"),l.materialsCopyDatas=[],l.dreamCopyArr=[],l.dreamSoulAttrs=[],l._eternalSkyBarriers=[],l._copySelArr=[],l._eternalSkyVO=new L,l._loveCopyRankRewardList=[],l._loveCopyRankScoreList=[],l._loveCopyEvaluateConfMap={},l._strangeFireBarriers=[],l._talimanCopyBarriers=[],l._zhuXianRoadSectionVO=[],l._zhuXianRoadBarrierVO=[],l._maxBarrier=0,l.copyCfgArr)if((s=l.copyCfgArr[n])instanceof xml.MaterialsCopyVO)l.materialsCopyDatas.push(s);else if(s instanceof xml.DreamCopyOpenVO)l._maxBarrier=parseInt(s.maxBarrier);else if(s instanceof xml.DreamCopyVO)l.dreamCopyArr.push(s);else if(s instanceof xml.DreamSoulVO){var o;for(var a in l._dreamSoulCost=(t=s).cost,e=t.attr.split(","))i=e[a].split("|"),(o=new Object).className="p_kv",o.id=parseInt(i[0]),o.val=parseInt(i[1]),l.dreamSoulAttrs.push(o)}else s instanceof xml.EternalSkyVO?l._eternalSkyVO=s:s instanceof xml.EternalSkyBarrierVO?l._eternalSkyBarriers.push(s):s instanceof xml.CopySelVO?l._copySelArr.push(s):s instanceof xml.TeamCopyVO?l._teamCopyVO=s:s instanceof xml.LoveCopyVO?l._loveCopyVO=s:s instanceof xml.LoveCopyRankRewardVO?l._loveCopyRankRewardList.push(s):s instanceof xml.LoveCopyRankScoreVO?l._loveCopyRankScoreList.push(s):s instanceof xml.LoveCopyEvaluateConfVO?l._loveCopyEvaluateConfMap[s.evaluate]=s:s instanceof xml.StrangeFireCopyVO?l._strangeFireCopyVO=s:s instanceof xml.StrangeFireCopyBarrierVO?l._strangeFireBarriers.push(s):s instanceof xml.TalimanCopyVO?l._talimanCopyVO=s:s instanceof xml.TalimanCopyBarrierVO?l._talimanCopyBarriers.push(s):s instanceof xml.ZhuXianRoadCopyVO?l._zhuXianRoadCopyVO=s:s instanceof xml.ZhuXianRoadSectionVO?l._zhuXianRoadSectionVO.push(s):s instanceof xml.ZhuXianRoadBarrierVO?l._zhuXianRoadBarrierVO.push(s):s instanceof xml.ZhuXianRoadRuleVO&&(l._zhuXianRoadRuleVO=s)},l.getSectionVOById=function(t){for(var e=l.zhuXianRoadSectionVO,i=0;i<e.length;i++)if(e[i].id==t)return e[i];return null},l.getBarrierVOById=function(t){for(var e=l.zhuXianRoadBarrierVO,i=0;i<e.length;i++)if(e[i].id==t)return e[i];return null},l.isNeedOpenNextDream=function(t){return void 0===t&&(t=0),(t=0==t?modules.commonCopy.copy.CopyMgr.curBarrier:t)==modules.commonCopy.copy.CopyMgr.curBarrier&&Ls.isEndChapter(t)&&l.openChapter<Ls.getChapter(t)},l.getBoxBarrier=function(){return 6*l.openChapter},l.getDreamCopyVO=function(t){var e;for(var i in l.init(),l.dreamCopyArr)if((e=l.dreamCopyArr[i]).isBarrier(t))return e.curBarrier=t,e.copy();return null},l.getDreamCopyShowVOs=function(){l.init();for(var t=6*Math.max(l.openChapter-1,0)+1,e=Math.min(t+18,l._maxBarrier),i=[],s=t;s<=e;s++)i.push(s);return i},l.getDreamCopyAward=function(t){return l.init(),l.getDreamCopyVO(t)?l.getDreamCopyVO(t).getAwardArr():null},l.isMaxBarrier=function(t){return l.init(),l._maxBarrier<=t},l.getDreamSoulAttrs=function(){return l.init(),l.dreamSoulAttrs},l.getDreamSoulPower=function(t){void 0===t&&(t=0),t=0==t?l.soulLv:t;var e,i=0;for(var s in l.getDreamSoulAttrs())e=l.getDreamSoulAttrs()[s],i+=W.getAttrPower(e.id,e.val*t);return i},l.isSpcBarrier=function(t){return void 0===t&&(t=0),(t=0==t?l.curBarrier:t)%6==0},l.getMaterialsCopyVOs=function(){return l.init(),l.materialsCopyDatas},l.getCurMaterialsCopyName=function(){var t;for(var e in l.init(),l.copyCfgArr)if(t=l.copyCfgArr[e],ca.mapID==t.mapID)return t.copyName;return""},l.getEternalSkyBarrierByStep=function(t){var e;for(var i in l.init(),l._eternalSkyBarriers)if((e=l._eternalSkyBarriers[i]).step==t)return e;return null},l.getSelCopyVOArr=function(t){l.init();var e,i=[];for(var s in l._copySelArr)(e=l._copySelArr[s]).mapID==t&&i.push(e);return i},l.getLoveCopyEvaluateConfVo=function(t){return l._loveCopyEvaluateConfMap[t]},l.getStrangeFireCopyBarrierVo=function(t){var e;for(var i in l.init(),l._strangeFireBarriers)if((e=l._strangeFireBarriers[i]).lv==t)return e;return null},l.openChapter=0,l.curBarrier=0,l.soulLv=0,l.ancienExoticEndTime=0,l.has=!1,l.copyCfgArr=null,l.materialsCopyDatas=null,l.dreamCopyArr=null,l.dreamSoulAttrs=null,l._dreamSoulCost=0,l._maxBarrier=0,l._eternalSkyVO=null,l._eternalSkyBarriers=null,l._copySelArr=null,l._teamCopyVO=null,l._loveCopyVO=null,l._loveCopyRankRewardList=null,l._loveCopyRankScoreList=null,l._loveCopyEvaluateConfMap=null,l._strangeFireCopyVO=null,l._strangeFireBarriers=null,l._talimanCopyVO=null,l._talimanCopyBarriers=null,l._zhuXianRoadCopyVO=null,l._zhuXianRoadSectionVO=null,l._zhuXianRoadBarrierVO=null,l._zhuXianRoadRuleVO=null,l}(),Ls=function(){function t(){}return w(t,"modules.commonCopy.copy.CopyUtil"),t.isEndChapter=function(t){return void 0===t&&(t=0),0!=(t=0==t?Os.curBarrier:t)&&t%6==0},t.getChapter=function(t){return void 0===t&&(t=0),t=0==t?Os.curBarrier:t,Math.max(Math.floor(t/6+1),1)},t.getDreamSoulAttrsStr=function(t){var e,i=t?Os.soulLv:Os.soulLv+1,s="";for(var n in Os.getDreamSoulAttrs())e=Os.getDreamSoulAttrs()[n],s+=W.getName(e.id)+"  +"+e.val*i+"\n";return s},t}(),Ds=function(){function s(){}return w(s,"modules.commonCopy.custom.CustomManager"),I(1,s,"isCanGetReward",function(){return s.curRewardBarrier<5*Math.floor((modules.commonCopy.custom.CustomManager.curBarrier-1)/5)}),I(1,s,"curBarrier",function(){return s._curBarrier},function(t){s._curBarrier=t}),I(1,s,"curStep",function(){var t=Math.ceil(s.curBarrier/5);return t=0==t?1:t}),I(1,s,"curCustomMonsterUrl",function(){return s.curCustomVO?"unit/monster/"+s.curCustomVO.getMonsterInfo()[0]+"_3":""}),I(1,s,"maxFloor",function(){return s.init(),s._maxFloor}),I(1,s,"curCustomVO",function(){return s._curCustomVO&&s._curCustomVO.curFloor==s.curBarrier||(s._curCustomVO=s.getCustomVO()),s._curCustomVO}),s.init=function(){var t;if(!s.has)for(var e in s.has=!0,s.cfgData=Ra.startEncode("custom.xml"),s._maxFloor=0,s.cfgData)t=s.cfgData[e],s._maxFloor=Math.max(s._maxFloor,t.curMaxFloor)},s.getCustomVO=function(t){var e;for(var i in void 0===t&&(t=0),s.init(),t=0==t?s.curBarrier:t,s.cfgData)if((e=s.cfgData[i]).isFloor(t))return e.curFloor=t,e;return null},s.getReward=function(t){return s.init(),s.getCustomVO(t)?s.getCustomVO(t).rewardArr:null},s.getSpcReward=function(t){return s.init(),s.getCustomVO(t)?s.getCustomVO(t).getSpcReward():null},s.curRewardBarrier=0,s._curBarrier=0,s.curBarrierWin=!1,s.has=!1,s._maxFloor=0,s.cfgData=null,s._curCustomVO=null,s}(),Ns=function(){function t(){}return w(t,"modules.commonCopy.eternalSky.CopyEternalSkyManager"),t.checkRedPoint=function(){if(6<=pe.myRegrow){var t=As.getCopyTime(Os.eternalSkyVO.mapId);t&&(0<t.finished_times?Nt.hide("RP_ETERNAL_SKY"):Nt.show("RP_ETERNAL_SKY"))}else Nt.hide("RP_ETERNAL_SKY")},t.buyRewardTimes=0,t.wave=0,t}(),Vs=function(){function o(){}return w(o,"modules.commonCopy.godHood.CopyGodHoodManager"),I(1,o,"maxPage",function(){return o.initStoryXml(),o._maxPage}),o.initStoryXml=function(){if(!o.isStoryInit){o._godHoodVOs=[],o._storys=[];var t,e=Ra.startEncode("godHoodStory.xml");for(var i in e)(t=e[i])instanceof xml.GodHoodStoryVO?o._godHoodVOs.push(t):t instanceof xml.StoryVO&&o._storys.push(t);o._maxPage=Math.floor(o._godHoodVOs.length/5),0<o._godHoodVOs.length%5&&(o._maxPage+=1),o.isStoryInit=!0}},o.getGodHoodVOById=function(t){var e;for(var i in o.initStoryXml(),o._godHoodVOs)if((e=o._godHoodVOs[i]).id==t)return e;return null},o.getGodHoodVOsByPage=function(t){o.initStoryXml();var e=[],i=6*t,s=6*(t+1);s=s<=o._godHoodVOs.length?s:o._godHoodVOs.length;for(var n=i;n<s;n++)e.push(o._godHoodVOs[n]);return e},o.initForbiddenXml=function(){if(!o.isForbiddenInit){o._forbiddens=[];var t,e=Ra.startEncode("godHoodForbidden.xml");for(var i in e)(t=e[i])instanceof xml.GodHoodForbiddenVO&&o._forbiddens.push(t);o.isForbiddenInit=!0}},o.getForbiddenVOById=function(t){var e;for(var i in o.initForbiddenXml(),o._forbiddens)if((e=o._forbiddens[i]).id==t)return e;return null},o.checkStoryRP=function(){Ne.isGodHoodOpen()&&modules.commonCopy.godHood.CopyGodHoodManager.passedMaxChapter<modules.commonCopy.godHood.CopyGodHoodManager.openedMaxChapter?Nt.show("RP_GODHOOD_STORY"):Nt.hide("RP_GODHOOD_STORY")},o.checkForbiddenRP=function(){0<Zn.godHoodLv&&0<modules.commonCopy.godHood.CopyGodHoodManager.challengTimes?Nt.show("RP_GODHOOD_FORBIDDEN"):Nt.hide("RP_GODHOOD_FORBIDDEN")},o.passedMaxChapter=0,o.openedMaxChapter=0,o._maxPage=0,o.curGodHoodVO=null,o.isStoryInit=!1,o._godHoodVOs=null,o._storys=null,o.isForbiddenInit=!1,o._forbiddens=null,o.challengTimes=NaN,o.nextReviveTs=NaN,o}(),Bs=function(){function t(){}return w(t,"modules.commonCopy.loveCopy.LoveCopyConst"),_(t,["ROLE_POS_DATA_LIST",function(){return this.ROLE_POS_DATA_LIST=[{x:55,y:240,scale:.75,zor:2},{x:235,y:250,scale:.9,zor:3},{x:459,y:240,scale:.75,zor:2}]},"FLOWER_SKILL_EVALUATE_LIST",function(){return this.FLOWER_SKILL_EVALUATE_LIST=[4,3,2,1]},"FLOWER_SKILL_EVALUATE_NAME",function(){return this.FLOWER_SKILL_EVALUATE_NAME=["完美","良好","中等","一般"]},"FLOWER_SKILL_EVALUATE_SCALE",function(){return this.FLOWER_SKILL_EVALUATE_SCALE=[[[.6,.7]],[[.7,.8],[.45,.6]],[[.3,.45]],[[0,.3],[.8,1]]]}]),t}(),Ms=function(){function s(){}return w(s,"modules.commonCopy.loveCopy.LoveCopyMgr"),I(1,s,"ownHurtRate",function(){return s._ownHurtRate},function(t){s._ownHurtRate=t}),I(1,s,"mapId",function(){return s._mapId},function(t){s._mapId=t}),I(1,s,"curTeamRoleNum",function(){return s._teamRoles?s._teamRoles.length:1}),I(1,s,"challengeTimes",function(){return s._challengeTimes?s._challengeTimes.finished_times:0}),I(1,s,"isFirstPassCopy",function(){return 1==s._isFirstPass}),I(1,s,"leaderID",function(){return s._leaderID},function(t){s._leaderID=t}),I(1,s,"teamID",function(){return s._teamID},function(t){s._teamID=t}),I(1,s,"score",function(){return s._score}),I(1,s,"teamRoles",function(){return s._teamRoles},function(t){s._teamRoles=t}),I(1,s,"curSkillType",function(){return s._curSkillType},function(t){s._curSkillType=t}),I(1,s,"hurt",function(){return s._hurt}),I(1,s,"isJoinTeam",function(){return s._isJoinTeam},function(t){s._isJoinTeam=t}),I(1,s,"addRate",function(){return s._addRate/100},function(t){s._addRate=t}),I(1,s,"myHistoryHurt",function(){return s._myHistoryHurt},function(t){s._myHistoryHurt=t}),I(1,s,"myCurHurt",function(){return s._myCurHurt},function(t){s._myCurHurt=t}),s.checkRP=function(){0==s.challengeTimes&&s.isOpen()?Nt.show("RP_LOVE_COPY"):Nt.hide("RP_LOVE_COPY")},s.clearTeamData=function(){s._teamID=-1,s._teamRoles=null,s._leaderID=-1,s._roleStateDic=null,s._ownHurtRate=0,s._addRate=0},s.handleChallengeTimes=function(t){var e;for(var i in t.all_copy_times)if((e=t.all_copy_times[i]).map_id==s.mapId){s._challengeTimes=e;break}},s.handlerRoleReady=function(t,e){(s._roleStateDic=s._roleStateDic||new Object)[t]=e},s.getRoleReady=function(t){return s._roleStateDic&&s._roleStateDic.hasOwnProperty(t)?s._roleStateDic[t]:0},s.checkAllRoleReady=function(){var t;for(var e in s.teamRoles)if(t=s.teamRoles[e],!s._roleStateDic.hasOwnProperty(t)||1!=s._roleStateDic[t])return!1;return!0},s.handlerRole=function(t,e){if(1==e)(s._teamRoles=s._teamRoles||[]).indexOf(t)<0&&s._teamRoles.push(t);else{if(s._teamRoles){var i=s._teamRoles.indexOf(t);0<=i&&s._teamRoles.splice(i,1)}s._roleStateDic&&s._roleStateDic.hasOwnProperty(t)&&delete s._roleStateDic[t]}},s.handleFinishParam=function(t){s._isFirstPass=t.is_first,s._score=t.score,s._hurt=t.hurt},s.isInTeam=function(){return-1!=s._teamID},s.getFlowerSkillAdditionByEva=function(t){var e=Os.getLoveCopyEvaluateConfVo(t);return e?e.powerRate:0},s.isOpen=function(){var t=Os.loveCopyVO;return!t||t.isOpen()},s.getLimitLvl=function(){var t=Os.loveCopyVO;return t?t.getLimitLvl():0},s.getLimitGrowLvl=function(){var t=Os.loveCopyVO;return t?t.getLimitGrowLvl():0},s.getBigNumberShowStr=function(t,e){var i="";t>=Math.pow(10,8)?(t/=Math.pow(10,8),i="亿"):t>=Math.pow(10,4)&&(t/=Math.pow(10,4),i="万");var s=Math.pow(10,e);return(t=Math.round(t*s)/s)+i},s._teamID=-1,s._teamRoles=null,s._leaderID=-1,s._mapId=10901,s._challengeTimes=null,s._roleStateDic=null,s._curSkillType=11,s._isFirstPass=0,s._score=0,s._hurt=0,s._isJoinTeam=!1,s._addRate=NaN,s._ownHurtRate=NaN,s._myHistoryHurt=0,s._myCurHurt=0,s}(),Fs=function(){function a(){}return w(a,"modules.commonCopy.loveCopy.util.FloatTipsImg"),a.showFloatImg=function(t,e,i,s,n,o){void 0===o&&(o=1500),t.removeSelf(),lt.tipLayerImg.addChild(t),t.x=e,t.y=i,ie.to(t,{x:s,y:n},o,null,Q.create(a,a.onShowComplete,[t]))},a.onShowComplete=function(t){t.removeSelf()},a}(),Us=function(){function s(){}return w(s,"modules.commonCopy.monsterCopy.MonsterCopyMgr"),I(1,s,"baseCfg",function(){return s._baseCfg||s.initXML(),s._baseCfg}),I(1,s,"rankAwardCfgs",function(){return s._rankAwardCfg||s.initXML(),s._rankAwardCfg}),I(1,s,"bossHpList",function(){return s._bossHpList||s.initXML(),s._bossHpList}),I(1,s,"damRewards",function(){return s._damRewards||s.initXML(),s._damRewards}),I(1,s,"openHours",function(){return s._openHours||(s._openHours=parseInt(s.baseCfg.limitTime.split(":")[0])),s._openHours}),I(1,s,"openMinutes",function(){return s._openMinutes||(s._openMinutes=parseInt(s.baseCfg.limitTime.split(":")[1])),s._openMinutes}),s.initXML=function(){var t=Ra.startEncode("copyMonster.xml");if(t){s._rankAwardCfg=[],s._bossHpList=[],s._damRewards=[];for(var e=0;e<t.length;e++)t[e]instanceof xml.CmBaseVO?s._baseCfg=t[e]:t[e]instanceof xml.CmRankAwardVO?s._rankAwardCfg.push(t[e]):t[e]instanceof xml.CmBossHpVO?s._bossHpList.push(t[e]):t[e]instanceof xml.CmBossDamageVO&&s._damRewards.push(t[e])}},s.isBossTime=function(){var t=new Date(ya.serverTimeMs),e=t.getHours(),i=t.getMinutes();return e<s.openHours-x.hourOffset||e==s.openHours-x.hourOffset&&i<s.openMinutes},s.getHpByHurt=function(t){for(var e=0;e<s.bossHpList.length;e++){var i=s.bossHpList[e];if(!(t>i.hp))return[i.hp-t,i.hp,999-e];t-=i.hp}return null},s.getRewardsByDam=function(t){for(var e=0;e<s.damRewards.length;e++){var i=s.damRewards[e];if(t<=i.damage)return i}return s.damRewards[s.damRewards.length-1]},s._rankAwardCfg=null,s._bossHpList=null,s._damRewards=null,s._baseCfg=null,s.hurt=NaN,s._openHours=0,s._openMinutes=0,s}(),Gs=function(){function i(){}return w(i,"modules.commonCopy.strangeFire.StrangeFireCopyMgr"),i.checkBossRedPoint=function(){if(i.infoToc&&i.infoToc.boss_barrier<10){var t=Os.getStrangeFireCopyBarrierVo(i.infoToc.boss_barrier);if(t&&i.infoToc.complete_times==t.barrierTimes)return!0}return!1},i.checkComRedPoint=function(){return!!(i.infoToc&&0<i.infoToc.ticket)},i.checkRedPoint=function(){var t=i.checkBossRedPoint(),e=i.checkComRedPoint();t||e?Nt.show("RP_COPY_STRANGE_FIRE"):Nt.hide("RP_COPY_STRANGE_FIRE")},i.infoToc=null,i}(),Hs=function(){function r(){}return w(r,"modules.commonCopy.talimanCopy.TalimanCopyMgr"),r.GetTenRewards=function(t){void 0===t&&(t=1);var e=0,i=0;return e=1==t?r.infoToc.current_barrier:r.infoToc.current_barrier+1,i=r.infoToc.tens_reword,r.getTenRewards=10<e&&e%10==1&&e-i==11},r.checkGetRewardPoint=function(){return!!r.GetTenRewards()},r.checkEnterPoint=function(){return!!(modules.commonCopy.talimanCopy.TalimanCopyMgr.firstEnter&&!r.GetTenRewards()&&r.infoToc.current_barrier<101)},r.checkRedPoint=function(){var t=r.checkEnterPoint(),e=r.checkGetRewardPoint();t||e?Nt.show("RP_COPY_TALIMAN"):Nt.hide("RP_COPY_TALIMAN")},r.getRewards=function(t){var e;Os.talimanCopyVOs.length;for(var i in Os.talimanCopyVOs){var s=(e=Os.talimanCopyVOs[i]).barrier.split(",");if(t>=s[0]&&t<=s[1]){var n,o=e.rewards.split(","),a=0;for(var l in o)n=o[l],r.Rewards[a]=n,a++}}return r.Rewards},r.getRewardsColor=function(t){var e;Os.talimanCopyVOs.length;for(var i in Os.talimanCopyVOs){if((e=Os.talimanCopyVOs[i]).barrier.split(",")[1]/10==t)return e.color}return null},r.getMapId=function(t){var e;Os.talimanCopyVOs.length;for(var i in Os.talimanCopyVOs){var s=(e=Os.talimanCopyVOs[i]).barrier.split(",");if(t>=s[0]&&t<=s[1])return e.mapId}return null},r.infoToc=null,r.sweepRewards=null,r.getTenRewards=!1,r.firstEnter=!0,r.Rewards=[],r}(),Ws=(function(){function t(){}w(t,"modules.commonCopy.teamCopy.TeamCopyConst")}(),function(){function a(){}return w(a,"modules.commonCopy.teamCopy.TeamCopyMgr"),I(1,a,"leaderID",function(){return a._leaderID},function(t){a._leaderID=t}),I(1,a,"teamID",function(){return a._teamID},function(t){a._teamID=t}),I(1,a,"copyStep",function(){return a._copyStep},function(t){a._copyStep=t}),I(1,a,"teamRoles",function(){return a._teamRoles},function(t){a._teamRoles=t}),I(1,a,"isJoinTeam",function(){return a._isJoinTeam},function(t){a._isJoinTeam=t}),a.checkRP=function(){a.myStepInfo&&0==a.myStepInfo.is_challenge&&0<pe.myRegrow?Nt.show("RP_TEAM_COPY"):Nt.hide("RP_TEAM_COPY")},a.clearTeamData=function(){a._teamID=-1,a._copyStep=-1,a._teamRoles=null,a._roleStateDic=null,a._leaderID=-1},a.handlerRole=function(t,e){if(1==e)(a._teamRoles=a._teamRoles||[]).indexOf(t)<0&&a._teamRoles.push(t);else{if(a._teamRoles){var i=a._teamRoles.indexOf(t);0<=i&&a._teamRoles.splice(i,1)}a._roleStateDic&&a._roleStateDic.hasOwnProperty(t)&&delete a._roleStateDic[t]}},a.handlerRoleReady=function(t,e){(a._roleStateDic=a._roleStateDic||new Object)[t]=e},a.getRoleReady=function(t){return a._roleStateDic&&a._roleStateDic.hasOwnProperty(t)?a._roleStateDic[t]:0},a.checkAllRoleReady=function(){var t;for(var e in a.teamRoles)if(t=a.teamRoles[e],!a._roleStateDic.hasOwnProperty(t)||1!=a._roleStateDic[t])return!1;return!0},a.addReborn=function(t){a.rebornArr=a.rebornArr||[];for(var e=0;e<a.rebornArr.length;e++)if(a.rebornArr[e].monster_type==t.monster_type)return void(a.rebornArr[e]=t);a.rebornArr.push(t)},a.delReborn=function(t){for(var e=(a.rebornArr=a.rebornArr||[]).length-1;0<=e;e--)if(a.rebornArr[e].monster_type==t){a.rebornArr.splice(e,1);break}},a.getReborn=function(){var t;(a.rebornArr=a.rebornArr||[]).sort(a.sortReborn);for(var e=Se.monsterDict,i=0;i<a.rebornArr.length;i++)if((t=a.rebornArr[i]).born_ts>=ya.serverTime){var s=!1;for(var n in e){var o=e[n];if(o&&o.pvo.type_id==t.monster_type){s=!0;break}}if(!s)return t}return null},a.clearReborn=function(){a.rebornArr=[]},a.sortReborn=function(t,e){return t.born_ts<e.born_ts?-1:1},a.isInTeam=function(){return-1!=a._teamID},a._teamID=-1,a._copyStep=-1,a._teamRoles=null,a._leaderID=-1,a.myStepInfo=null,a._isJoinTeam=!1,a._roleStateDic=null,a.rebornArr=null,a}()),qs=function(){function o(){}return w(o,"modules.commonCopy.zhuXianRoadCopy.ZhuXianRoadCopyManager"),I(1,o,"maxStage",function(){return o._maxStage},function(t){o._maxStage=t}),I(1,o,"getRewardArray",function(){return o._getRewardArray||[]}),o.updateAllStageInfo=function(t){if(o._roadInfo={},t&&t.length)for(var e,i=0,s=t.length;i<s;i++){var n=(e=t[i]).chapter;o._roadInfo[n]=o._roadInfo[n]||[],o._roadInfo[n].push(e)}},o.getStageInfo=function(){return o._roadInfo||{}},o.updateRewardArr=function(t){o._getRewardArray=t},o.checkIsGetRewardByIndex=function(t){return 1==o.getRewardArray.indexOf(t)},o.isFullStage=function(){return o._maxStage>=o.getFullStage()},o.getFullStage=function(){if(o._fullStage<=-1)for(var t=Os.zhuXianRoadBarrierVO||[],e=0,i=t.length;e<i;e++){var s=t[e];o._fullStage<s.id&&(o._fullStage=s.id)}return o._fullStage||35},o._maxStage=0,o._roadInfo=null,o._getRewardArray=[],o._fullStage=-1,o}(),Ys=function(){function n(){}return w(n,"modules.compose.ComposeManager"),n.initXml=function(){if(0==n.isInit){n.isInit=!0,n.typeVOs=[],n.subVOs=[];var t,e=Ra.startEncode("compose.xml");for(var i in e)(t=e[i])instanceof xml.ComposeTypeVO?n.typeVOs.push(t):t instanceof xml.ComposeSubVO&&n.subVOs.push(t)}},n.getSubVOListByType=function(t){n.initXml();var e,i=[];for(var s in n.subVOs)(e=n.subVOs[s]).typeId==t&&i.push(e);return i},n.getSubVOById=function(t){var e;for(var i in n.initXml(),n.subVOs)if((e=n.subVOs[i]).id==t)return e;return null},n.isInit=!1,n.typeVOs=null,n.subVOs=null,n}(),Xs=function(){function a(){}return w(a,"modules.crossServer.CrossServerMgr"),I(1,a,"redNameGoods",function(){return a.init(),a.guideVO.redGoodsArr}),I(1,a,"enterNeedLv",function(){return a.init(),a.guideVO.enterNeedLv}),I(1,a,"displayVO",function(){return a.init(),a._displayVO}),I(1,a,"enterServerNum",function(){return a.init(),a.guideVO.enterServerNum}),I(1,a,"unifyFashion",function(){var t=a.getCrossSystemInfo();return!(t<=1)&&1==Math.floor(t/1e4)}),I(1,a,"isUnShowSkillEff",function(){var t=a.getCrossSystemInfo();return!(t<=1)&&1==Math.floor(t%1e4/1e3)}),I(1,a,"isUnShowOrtherRole",function(){var t=a.getCrossSystemInfo();return!(t<=1)&&1==Math.floor(t%1e4%1e3/100)}),I(1,a,"isShowTipOfAttaking",function(){var t=a.getCrossSystemInfo();return!(t<=1)&&1==Math.floor(t%1e4%1e3%100%10)}),I(1,a,"joyStickMod",function(){var t=a.getCrossSystemInfo();return t<=1?3:Math.floor(t%1e4%1e3%100/10)}),a.setLinesData=function(t){a.lineTabDic={},a.lineLimitArr=[];var e,i=0,s=0,n=0;for(var o in t)(e=t[o])&&(i=a.getKeyVal(e.line_infos,11),a.lineTabDic[i]=a.lineTabDic[i]||[],a.lineTabDic[i].push(e),s=a.getKeyVal(e.line_infos,9),n=a.getKeyVal(e.line_infos,10),a.lineLimitArr[i-1]=[s,n],a.minGodLvl=Math.min(s,a.minGodLvl))},a.getKeyVal=function(t,e){var i;for(var s in t)if((i=t[s]).id==e)return i.val;return 0},a.getCanEnterTabStr=function(){var t,e=a.getCanEnterIndexs(),i=[];for(var s in e)t=e[s],i.push(a.getTabLabelByIndex(t)+"频道");return 0<i.length?i.join("、"):"未拥有仙阶，无法进入"},a.getCanEnterIndexs=function(){var t=Zn.godHoodLv;if(0<t){var e=[];if(a.lineLimitArr)for(var i=0;i<a.lineLimitArr.length;i++)a.lineLimitArr[i]&&t>=a.lineLimitArr[i][0]&&t<=a.lineLimitArr[i][1]&&e.push(i);return e}return null},a.getLineDataByIndex=function(t){return a.lineTabDic?a.lineTabDic[t+1]:null},a.getCurLineName=function(){if(!a.lineTabDic)return"";var t,e,i="";for(var s in a.lineTabDic)if(t=a.lineTabDic[s],i=a.getTabLineName(parseInt(s)-1),t)for(var n=0;n<t.length;n++)if((e=t[n])&&e.line_id==ca.curLine)return i+(n+1)+"线";return i},a.init=function(){if(!a.guideVO){var t,e=Ra.startEncode("crossServer.xml");for(var i in e)(t=e[i])instanceof xml.CrossGuideVO?a.guideVO=t:t instanceof xml.CrossShopVO?a._shopVo=t:t instanceof xml.DisplaySoulVO&&(a._displayVO=t)}},a.getGuideVO=function(){return a.init(),a.guideVO},a.isRedNameGoods=function(t){return-1!=a.redNameGoods.indexOf(t)},a.getGoodsMinusByIndex=function(t){return a.init(),a.guideVO.goodsMinusArr[t]},a.getTabLabelByIndex=function(t){return a.init(),a.guideVO.tabLabelsArr[t]},a.getTabTipByIndex=function(t){return a.init(),a.guideVO.tabTipArr[t]},a.getTabLineName=function(t){return a.init(),a.guideVO.lineNameArr[t]},a.getCrossShopVO=function(){return a.init(),a._shopVo},a.getCrossHelpStrs=function(){return a.init(),a.guideVO.enterTipArr},a.getCrossSystemInfo=function(){var t,e=ya.sysInfo,i=1;for(var s in e)if(5==(t=e[s]).id){i=t.val;break}return 999<i&&i<=9999&&(i=10*i+1),i},a.isCrossServerJoyStickFree=function(){return ua.isCross()&&2==a.joyStickMod},a.checkMapCanClick=function(){return ua.isCross()&&3==a.joyStickMod},a.curUseGoodID=0,a.lineTabDic=null,a.lineLimitArr=null,a.isCrossOpen=!1,a.curLineName=null,a.curServerBtnVal=0,a.curServerOpenDay=NaN,a.curCombineServerTimes=NaN,a.minGodLvl=1,a._shopVo=null,a._displayVO=null,a.guideVO=null,a}(),Ks=function(){function t(){}return w(t,"modules.crossServer.main.CrossMainConst"),_(t,["DISPLAY_SOUL_POS_LIST",function(){return this.DISPLAY_SOUL_POS_LIST=[{x:116,y:283},{x:281,y:283},{x:445,y:283}]}]),t}(),js=function(){function t(){}return w(t,"modules.crossServer.shop.CrossServerShopConst"),_(t,["OPERATE_SUCCESS_TIPS",function(){return this.OPERATE_SUCCESS_TIPS={1:"下架成功",2:"领取成功"}},"SELL_DURATION_HOUR",function(){return this.SELL_DURATION_HOUR=[24,72,12,3]},"SELL_DURATION_NAME_LIST",function(){return this.SELL_DURATION_NAME_LIST=["24小时","3天","12小时","3小时"]}]),t}(),Qs=function(){function s(){}return w(s,"modules.crossServer.shop.CrossServerShopMgr"),I(1,s,"myGoodsInfo",function(){return s._myGoodsInfo}),I(1,s,"allGoodsInfo",function(){return s._allGoodsInfo}),I(1,s,"myFightSoulCoin",function(){return pe.getScore(29)}),s.checkHasSellSoulBySuitId=function(t){var e=s.getSellSoulListBySuitId(t);return e&&0<e.length},s.getSellSoulListBySuitId=function(t){return zs.filterBySuit(s.allGoodsInfo,[t])},s.checkHaaSellSoulByPosTypeList=function(t){var e=s.getSellSoulListByPosTypeList(t);return e&&0<e.length},s.getSellSoulListByPosTypeList=function(t){return zs.filterByPos(s.allGoodsInfo,t)},s.getPosIdListByIndex=function(t){var e=t+1;return q.TYPE2POSMAP[e]},s.checkHasSellSoulByQuality=function(t){var e;for(var i in s.allGoodsInfo)if(e=s.allGoodsInfo[i],t.isInRange(e.quality))return!0;return!1},s.addSelectType=function(t){s.curSelectType|=t},s.removeSelectType=function(t){s.updateSelectParam(t,null),s.curSelectType&=t=~t},s.updateSelectParam=function(t,e){s._selectParam[t]=e},s.getSelectParam=function(t){return s._selectParam[t]},s.handleGoodsInfo=function(t){if(t.market_info){var e;for(var i in t.market_info.sort(s.sortByTime),s._myGoodsInfo=[],s._allGoodsInfo=[],t.market_info)(e=t.market_info[i]).owner_id==pe.roleID?s._myGoodsInfo.push(e):2!=e.state&&s._allGoodsInfo.push(e);s._lastShopListChangeTime=t.last_change_ts}},s.sortByTime=function(t,e){return t.up_sale_ts>e.up_sale_ts?-1:t.up_sale_ts<e.up_sale_ts?1:0},s.isShopListChange=function(t){return s._lastShopListChangeTime<t},s.isMyGoodsFull=function(){return s.myGoodsInfo.length>=Xs.getCrossShopVO().maxSellNum},s.removeMyGoodsById=function(t){if(s._myGoodsInfo)for(var e=0;e<s._myGoodsInfo.length;e++){if(s._myGoodsInfo[e].market_id==t){s._myGoodsInfo.splice(e,1);break}}},s.removeAllGoodsById=function(t){if(s._allGoodsInfo)for(var e=0;e<s._allGoodsInfo.length;e++){if(s._allGoodsInfo[e].market_id==t){s._allGoodsInfo.splice(e,1);break}}},s.curSelectType=0,s._selectParam={},s._allGoodsInfo=[],s._myGoodsInfo=[],s._lastShopListChangeTime=NaN,s.isSelectCondition=!1,s}(),zs=function(){function s(){}return w(s,"modules.crossServer.shop.CrossServerShopUtil"),s.checkSoldRP=function(){var t,e=!1,i=!1,s=Qs.myGoodsInfo;if(s&&0<s.length)for(var n in s){var o=2==(t=s[n]).state;o&&(e=!0),x.isPassTimeMS(1e3*t.expire_ts,ya.serverTimeMs)&&!o&&(i=!0)}e?Nt.show("RP_CROSS_SERVER_SHOP_CAN_GAIN"):Nt.hide("RP_CROSS_SERVER_SHOP_CAN_GAIN"),i?Nt.show("RP_CROSS_SERVER_SHOP_CAN_REMOVE"):Nt.hide("RP_CROSS_SERVER_SHOP_CAN_REMOVE")},s.selectData=function(t,e){var i=t.concat();return 0<i.length&&(16&e&&(i=s.filterBySuit(i)),32&e&&(i=s.filterByPos(i)),64&e&&(i=s.filterByPrice(i)),128&e&&(i=s.filterByQuality(i)),1&e||2&e?i=s.sortByPrice(i,e):(4&e||8&e)&&(i=s.sortByQuality(i,e))),i},s.sortByPrice=function(t,e){return 1&e?t.sort(s.priceAscSortFun):2&e&&t.sort(s.priceDescSortFun),t},s.priceAscSortFun=function(t,e){return t.sale_price-e.sale_price},s.priceDescSortFun=function(t,e){return e.sale_price-t.sale_price},s.sortByQuality=function(t,e){return 4&e?t.sort(s.qualityAscSortFun):8&e&&t.sort(s.qualityDescSortFun),t},s.qualityAscSortFun=function(t,e){var i=mn.getSuitIdByTypeId(t.type_id),s=mn.getSuitIdByTypeId(e.type_id);return i==s?t.quality-e.quality:i-s},s.qualityDescSortFun=function(t,e){var i=mn.getSuitIdByTypeId(t.type_id),s=mn.getSuitIdByTypeId(e.type_id);return i==s?e.quality-t.quality:s-i},s.filterBySuit=function(t,e){var i=[];if(0<t.length){e=e||Qs.getSelectParam(16);var s,n=0;for(var o in t)s=t[o],n=mn.getSuitIdByTypeId(s.type_id),0<=e.indexOf(n)&&i.push(s)}return i},s.filterByPos=function(t,e){var i,s,n=[];if(0<t.length)for(var o in e=e||Qs.getSelectParam(32),t)s=t[o],i=mn.getFightSoulVO(s.type_id),0<=e.indexOf(i.pos)&&n.push(s);return n},s.filterByPrice=function(t,e){var i,s=[];if(0<t.length)for(var n in e=e||Qs.getSelectParam(64),t)i=t[n],e[0]<=i.sale_price&&(isNaN(e[1])||i.sale_price<=e[1])&&s.push(i);return s},s.filterByQuality=function(t,e){var i,s=[];if(0<t.length)for(var n in e=e||Qs.getSelectParam(128),t)i=t[n],0<=e.indexOf(i.quality)&&s.push(i);return s},s}(),$s=function(){function s(){}return w(s,"modules.crossServer.sit.SitMgr"),I(1,s,"sitTime",function(){return 0<s.curStartTime?Math.floor((S.now()-s.curStartTime)/1e3):0}),s.resetReward=function(){s.reward={},s.curStartTime=S.now()},s.add=function(t){var e;if(s.reward=s.reward||{},t)for(var i in t)e=t[i],s.reward[e.id]?s.reward[e.id]+=e.val:s.reward[e.id]=e.val},s.getRewardByKey=function(t){return s.reward&&s.reward[t]?s.reward[t]:0},s.curStartTime=NaN,s.reward=null,s}(),Zs=function(){function t(){}return w(t,"modules.crossServer.store.CrossServerStoreConst"),_(t,["TREASURE_ITEM_POS_LIST",function(){return this.TREASURE_ITEM_POS_LIST=[{x:59,y:0},{x:350,y:0},{x:59,y:363},{x:350,y:363}]},"MONEY_NAME_DIC",function(){return this.MONEY_NAME_DIC={1001:"元宝",1002:"铜钱",29:"虚天玉",1:"元宝",2:"铜钱",4:"虚天玉"}}]),t}(),Js=function(){function s(){}return w(s,"modules.crossServer.store.CrossServerStoreMgr"),I(1,s,"coinInfoList",function(){return s._coinInfoList}),I(1,s,"targetTime",function(){return s._targetTime}),I(1,s,"curTreasureState",function(){return s._curTreasureState}),I(1,s,"isTreasureOpen",function(){return 1==s._curTreasureState}),s.getShopItemVOList=function(){var t,e=[],i=da.getShopListById(7);if(i)for(var s in i.ShopTypeItemArr)0<(t=i.ShopTypeItemArr[s]).num&&e.push(t);return e},s.handleShopInfo=function(t){s._curTreasureState=t.state,s._treasureList=t.items,s._targetTime=t.next_state_timestamp},s.getTreasureByIndex=function(t){return s._treasureList&&t<s._treasureList.length?s._treasureList[t]:null},s.updateTreasure=function(t){if(s._treasureList)for(var e=0;e<s._treasureList.length;e++){var i=s._treasureList[e];if(i&&i.index==t.index){s._treasureList[e]=t;break}}},s.handleCoinInfoList=function(t){s._coinInfoList=t},s._curTreasureState=0,s._treasureList=null,s._targetTime=NaN,s._coinInfoList=null,s}(),tn=function(){function a(){}return w(a,"modules.crossServer.tower.CrossServerTowerMgr"),I(1,a,"sceneCollectArr",function(){return a._sceneCollectArr||[]},function(t){a._sceneCollectArr=t}),I(1,a,"pkMod",function(){return pe.user.attr.pk_mode}),a.isCanEnterTower=function(){var t=0;return a.fightPalID<=0?t:(t+=1,pe.pals.length-1!=a.assPalPkvArr.length?t:t+=4)},a.getTowerBossInfoVOs=function(){return null==a.bossInfoVOs&&(a.bossInfoVOs=Ra.startEncode("crossTowerBoss.xml")),a.bossInfoVOs},a.getTowerBossInfoVoByMonsterID=function(t){var e,i;for(var s in a.getTowerBossInfoVOs(),a.bossInfoVOs)if((i=a.bossInfoVOs[s]).monsterID==t){e=i;break}return e},a.updateMissionInfo=function(t){var e;for(var i in a.missionInfos={},t){var s=(e=t[i]).map_id;if(a.missionInfos[s]){var n=e.mission_id;for(var o in a.missionInfos[s])if(a.missionInfos[s][o].mission_id==n){e;break}}else a.missionInfos[s]=[],a.missionInfos[s].push(e)}},a.getMssionInfosByMapId=function(t){var e=[];return a.missionInfos[t]&&(e=a.missionInfos[t]),e},a.getMissionInfoByMapIdAndMisId=function(t,e){if(!a.missionInfos[t])return null;var i;for(var s in a.missionInfos[t])if((i=a.missionInfos[t][s]).mission_id==e)return i;return null},a.initCrossTowerDescXml=function(){if(null==a.ruleDescVo||null==a.modDescVos){var t=Ra.startEncode("crossTowerDesc.xml");a.modDescVos=a.modDescVos||[];for(var e=0,i=t.length;e<i;e++){var s=t[e];s instanceof xml.CrossTowerRuleVO?a.ruleDescVo=s:s instanceof xml.CrossTowerModVO&&a.modDescVos.push(s)}}},a.getCrossTowerRuleDesc=function(){return a.initCrossTowerDescXml(),a.ruleDescVo},a.getCrossTowerModDescs=function(){return a.initCrossTowerDescXml(),a.modDescVos},a.getMissionVOs=function(){return null==a.missionInfoVOs&&(a.missionInfoVOs=Ra.startEncode("crossTowerMission.xml")),a.missionInfoVOs},a.getMissionVoByMapIdAndMisId=function(t,e){var i;for(var s in a.getMissionVOs(),a.missionInfoVOs)if((i=a.missionInfoVOs[s]).mapId==t&&i.missionId==e)return i;return null},a.checkIsAutoHangup=function(){return(ua.isCrossTower()||ua.isCrossTowerBoss())&&1==modules.crossServer.tower.CrossServerTowerMgr.isAutoHangUp},a.pushInAtt=function(t){(a._attMeRoles=a._attMeRoles||{})[t]=S.now()},a.checkAttMeStamp=function(){var t=S.now();for(var e in a._attMeRoles)5e3<=t-a._attMeRoles[e]&&(a._attMeRoles[e]=null,delete a._attMeRoles[e])},a.isAttMeRole=function(t){if(0==Xs.isShowTipOfAttaking)return!1;var e=S.now();for(var i in a._attMeRoles)if(t==Number(i)&&e-a._attMeRoles[i]<5e3)return!0;return!1},a.cleanAttRoles=function(){for(var t in a._attMeRoles)a._attMeRoles[t]=null,delete a._attMeRoles[t];a._attMeRoles={}},a.mapTranInfo=null,a.fightPalID=0,a.assPalPkvArr=[],a.bossInfo=[],a.missionInfos={},a.hittingTag=0,a.isAutoHangUp=!1,a.curWillCollectId=0,a.isCollecting=!1,a.collectingCollectId=0,a.mapBossInfo=[],a.nowMissionMapID=0,a.nowMissionProcess=0,a.nowMissionInfoVo=null,a.roleDeadEndTime=0,a.isFindMapToDoMission=!1,a.myPalLocakTarget=0,a.bossInfoVOs=null,a.missionInfoVOs=null,a.ruleDescVo=null,a.modDescVos=null,a._sceneCollectArr=null,a._attMeRoles=null,_(a,["MONSTER_TYPE_1",function(){return this.MONSTER_TYPE_1=[71001101,71002101,71003101,71004101,71005101,71006101,71007101]},"MONSTER_TYPE_2",function(){return this.MONSTER_TYPE_2=[71001102,71002102,71003102,71004102,71005102,71006102,71007102]},"MONSTER_TYPE_3",function(){return this.MONSTER_TYPE_3=[71001103,71002103,71003103,71004103,71005103,71006103,71007103]},"MONSTER_TYPE_4",function(){return this.MONSTER_TYPE_4=[71001104,71002104,71003104,71004104,71005104,71006104,71007104]},"FIGHT_SOUL_TYPE_ARR",function(){return this.FIGHT_SOUL_TYPE_ARR={1:{name:"后羿战魂",id:20201001},2:{name:"刑天战魂",id:20302001},3:{name:"轩辕战魂",id:20403001},4:{name:"神农战魂",id:20404001}}},"CROSS_SERVER_MODE_ARR",function(){return this.CROSS_SERVER_MODE_ARR=[1,5,2,3,7,8]}]),a}(),en=function(){function o(){}return w(o,"modules.dailyRecharege.DailyRechargeManager"),o.initXml=function(){o._configs||(o._configs=Ra.startEncode("dailyRecharge.xml"))},o.getConfigs=function(){return o.initXml(),o._configs},o.updateByInfoToc=function(t){var e;for(var i in o.initXml(),t){var s;for(var n in e=t[i],o._configs)s=o._configs[n],e.id==s.id&&(s.state=e.val)}},o.updateByGetToc=function(t){var e;for(var i in o.initXml(),o._configs)t==(e=o._configs[i]).id&&(e.state=2)},o.checkRedPoint=function(){for(var t in o.initXml(),o._configs){if(1==o._configs[t].state)return void T.dispatch("ICON_REDPOINT_CHANGE",[1009,"RP_ICON_FORTUNECAT",!0]);T.dispatch("ICON_REDPOINT_CHANGE",[1009,"RP_ICON_FORTUNECAT",!1])}},o.gold=0,o._configs=null,o}(),sn=function(){function v(){}return w(v,"modules.equip.EquipManager"),v.getVOCAName=function(t){return v.VOCA[t]},v.getSpEquipVO=function(t){return v.spEquipDic||(v.spEquipDic=Ra.startEncode("specialEquip.xml","id")),v.spEquipDic&&v.spEquipDic.hasOwnProperty(t+"")?v.spEquipDic[t]:null},v.getEquipTotalPow=function(t){if(t){var e=ur.getItem(t.type_id).basePow;return e+=W.getAddExtraPower(t.extra_attr)}return 0},v.getOranTotalPow=function(t){var e=0,i=ur.getItem(t.getCanUseEquipID(0));if(i){var s,n=W.parseAttrToArr(t.subAttr);for(var o in n)s=n[o],e+=W.getAttrPowerS(s[0],s[1]);return e+=i.basePow}return 0},v.getEquipByPutWhere=function(t,e){var i,s=pe.getPalByCate(t);if(s)for(var n in s.equip)if((i=s.equip[n]).pos==e)return i;return null},v.getAllOrange=function(){var t,e,i=[],s=xo.getEquipData();if(s&&s.goods)for(var n in s.goods)e=s.goods[n],(t=ur.getItem(e.typeid))&&5==t.color&&ur.isNormalEquip(t.type)&&i.push(e);return i},v.getAllLegend=function(){var t,e,i=[],s=xo.getEquipData();if(s&&s.goods)for(var n in s.goods)e=s.goods[n],(t=ur.getItem(e.typeid))&&6==t.color&&ur.isLegendEquip(t.type)&&i.push(e);return i},v.checkOrangeUP=function(){for(var t,e,i,s=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106),n=NaN,o=0,a=NaN,l=0;l<pe.pals.length;l++){var r,h=pe.pals[l];for(var u in q.ALLPUTSINBODY){r=q.ALLPUTSINBODY[u];var c,d=null,p=null;for(var m in o=a=0,h.equip)if((c=h.equip[m]).pos==r){d=c;break}if(d){if(null==(p=ur.getItem(d.type_id)))return void EF.show("equipOrgange.xml缺少配置："+d.type_id);a=p.basePow,a+=W.getAddExtraPower(d.extra_attr)}var f,_=oa.getOraVO(h.ext.category,q.PUT2TYPEMAP[r]);if(_)for(var g in _.OrasTypeLvArr)if((f=_.OrasTypeLvArr[g]).lv<=pe.myEquipLevel){var y;if(n=ur.getItem(parseInt(f.equipID)).basePow,t=W.parseAttrToArr(f.subAttr),""!=f.subAttr)for(y in t)i=t[y],n+=W.getAttrPowerS(i[0],i[1]);if(Math.floor(n)>Math.floor(a)){e=f;break}}if(e){if(p&&5==p.color)for(g in _.OrasTypeLvArr)if(f=_.OrasTypeLvArr[g],parseInt(f.equipID)==p.id){o=f.needNum;break}if(e.needNum-o<=s)return void Nt.show("RP_ORANGE_UP")}e=null}}Nt.hide("RP_ORANGE_UP")},v.checkOrangePU=function(){xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106);for(var t=0,e=0,i=0;i<pe.pals.length;i++){var s,n=pe.pals[i];for(var o in q.ALLPUTSINBODY){s=q.ALLPUTSINBODY[o];var a,l=null,r=null;for(var h in 0,n.equip)if((a=n.equip[h]).pos==s){l=a;break}if(l){if(null==(r=ur.getItem(l.type_id)))return void EF.show("equipOrgange.xml缺少配置："+l.type_id);r.basePow,W.getAddExtraPower(l.extra_attr),t=oo.ins().nowOrangeChips,r&&5==r.color&&(e=parseInt(oo.ins().getNeedChip(r.level)));var u=ha.checkIsPing(6,i,l.pos-1);if(5==r.color&&e<=t&&pe.user.attr.regrow>=oo.ins().limitLv&&!u)return void Nt.show("RP_ORANGE_PU")}}}Nt.hide("RP_ORANGE_PU")},v.checkOrangeDe=function(){var t,e=modules.equip.EquipManager.getAllOrange();for(var i in e){t=e[i];var s=ur.getItem(t.typeid);if(null==pe.getPalByCate(s.category))return Nt.show("RP_ORANGE_DE_1"),void(pe.user.attr.regrow<oo.ins().limitLv?Nt.hide("RP_ORANGE_DE_2"):Nt.show("RP_ORANGE_DE_2"));var n=oa.getOraLVvoByTypeID(s.category,s.type,t.typeid);if(n){var o=modules.equip.EquipManager.getEquipByPutWhere(s.category,s.type),a=o?modules.equip.EquipManager.getEquipTotalPow(o):0;if(s&&n&&a>=modules.equip.EquipManager.getOranTotalPow(n))return Nt.show("RP_ORANGE_DE_1"),void(pe.user.attr.regrow<oo.ins().limitLv?Nt.hide("RP_ORANGE_DE_2"):Nt.show("RP_ORANGE_DE_2"))}}Nt.hide("RP_ORANGE_DE_1"),Nt.hide("RP_ORANGE_DE_2")},v.checkLegendUP=function(){for(var t=0,e=[xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[0]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[1]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[2]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[3])],i=0;i<pe.pals.length;i++){var s,n=pe.pals[i],o=oa.getChaoTicInfo(n.pal_id);for(s in q.LEGEND_EQUIP_TYPE){t=q.LEGEND_EQUIP_TYPE[s];var a,l=null;if(o&&o.equips)for(var r in o.equips)if((a=o.equips[r]).id==t){l=a;break}var h=e[t%10-1];if(null==l){if(0<xo.getGoodsNumByType(xo.EQUIP_ID,na.LEGEND_ACT_ARR[t%10-1])||200<=h)return Nt.show("RP_LEGEND_UP"),void T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_UP",!0])}else{var u=oa.getRedEquipVO(l.id,l.val),c=oa.getRedEquipVO(l.id,l.val+1);if(c&&c.needNum-u.needNum<=h)return Nt.show("RP_LEGEND_UP"),void T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_UP",!0])}}}Nt.hide("RP_LEGEND_UP"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_UP",!1])},v.checkLegendDe=function(){var t,e=modules.equip.EquipManager.getAllLegend();for(var i in e){t=e[i];var s,n=!1,o=ur.getItem(t.typeid);pe.pals;for(var a in pe.pals){s=pe.pals[a];var l=!1,r=oa.getChaoTicInfo(s.pal_id);if(r&&r.equips)for(var h in r.equips)if(r.equips[h].id==o.type){l=!0;break}if(0==l){n=!0;break}}if(0==n)return T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_DE",!0]),void Nt.show("RP_LEGEND_DE")}T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_DE",!1]),Nt.hide("RP_LEGEND_DE")},v.getXMLVObyPos=function(t){return v.dominEquipDic||(v.dominEquipDic=Ra.startEncode("dominateEquip.xml","pos")),v.dominEquipDic&&v.dominEquipDic.hasOwnProperty(t+"")?v.dominEquipDic[t]:null},v.getPotentialVOByPos=function(t){return v.potentialDic||(v.potentialDic=Ra.startEncode("spEquipPotential.xml","pos")),v.potentialDic&&v.potentialDic.hasOwnProperty(t+"")?v.potentialDic[t]:null},v.getPotentialBelongStepByPos=function(t,e){for(var i=v.getPotentialVOByPos(t),s=0;s<i.PotentialLvArr.length;s++)if(i.PotentialLvArr[s].lv>e)return i.PotentialLvArr[s].lv;return 0},v.handlerRegrowEquipInfo=function(t){v.regrowEquipArr=t.regrow_equips},v.getRegrowEquipInfo=function(){return v.regrowEquipArr},v.handlerRegrowEquipLoad=function(t){for(var e=0;e<v.regrowEquipArr.length;e++){var i=v.regrowEquipArr[e];if(i.pal_id==t.update_equip.pal_id){var s;for(var n in t.update_equip.pos_list){s=t.update_equip.pos_list[n];for(var o=!1,a=0;a<i.pos_list.length;a++)if(i.pos_list[a].pos==s.pos){i.pos_list[a]=s,o=!0;break}o||i.pos_list.push(s)}break}}},v.handlerRegrowEquipQuench=function(t){var e;for(var i in v.regrowEquipArr){var s;if((e=v.regrowEquipArr[i]).pal_id==t.pal_id)for(var n in e.pos_list)if((s=e.pos_list[n]).pos==t.pos)return void(s.quench+=t.result)}},v.handlerRegrowEquipUpgrade=function(t){var e;for(var i in v.regrowEquipArr){var s;if((e=v.regrowEquipArr[i]).pal_id==t.pal_id)for(var n in e.pos_list)if((s=e.pos_list[n]).pos==t.pos)return void++s.level}},v.getCanChangeRegrowEquip=function(t){var e=xo.getEquipData();if(e&&e.goods){var i,s=[0,0,0,0];if(t)for(var n in t.pos_list){i=t.pos_list[n];var o=ur.getItem(i.equip_type_id);s[i.pos-q.DOMINATE_EQUIP_TYPE[0]]=o?o.basePow:0}var a,l=[];for(var r in l.length=4,e.goods)a=e.goods[r],o=ur.getItem(a.typeid),ur.isDominateEquip(o.type)&&o.level<=pe.myEquipLevel&&o.basePow>s[o.type-q.DOMINATE_EQUIP_TYPE[0]]&&(s[o.type-q.DOMINATE_EQUIP_TYPE[0]]=o.basePow,l[o.type-q.DOMINATE_EQUIP_TYPE[0]]=a);if(0<l.length){for(var h=[],u=0;u<l.length;u++){var c=l[u];if(null!=c&&"p_goods"==c.className){var d=new Object;d.className="p_kv",o=ur.getItem(l[u].typeid),d.id=l[u].id,d.val=o.type,h.push(d)}}return h}return null}return null},v.getPosUpLevel=function(t,e){},v.getPosQuLevel=function(t,e){},v.getCanMeltRegrowEquip=function(){var t,e=pe.pals.length,i=[];i.length=4;for(var s=0;s<4;s++){i[s]=[],i[s].length=e;for(var n=0;n<e;n++)i[s][n]={id:-1,pow:0}}for(var o in v.regrowEquipArr){var a;for(var l in(t=v.regrowEquipArr[o]).pos_list)if(0<(a=t.pos_list[l]).equip_type_id){var r=ur.getItem(a.equip_type_id);if(r)for(var h=0;h<e;h++)if(0==i[r.type-q.DOMINATE_EQUIP_TYPE[0]][h].pow){i[r.type-q.DOMINATE_EQUIP_TYPE[0]][h].pow=r.basePow;break}}}var u=xo.getEquipData();if(u&&u.goods&&0<u.goods.length){var c;for(var d in u.goods)if(c=u.goods[d],(r=ur.getItem(c.typeid))&&ur.isDominateEquip(r.type)){var p=!0;for(h=0;h<e;h++)if(0==i[r.type-q.DOMINATE_EQUIP_TYPE[0]][h].pow){i[r.type-q.DOMINATE_EQUIP_TYPE[0]][h].id=c.id,i[r.type-q.DOMINATE_EQUIP_TYPE[0]][h].pow=r.basePow,p=!1;break}if(p){for(var m=0,f=i[r.type-q.DOMINATE_EQUIP_TYPE[0]][m].pow,_=1;_<e;_++)f>i[r.type-q.DOMINATE_EQUIP_TYPE[0]][_].pow&&(f=i[r.type-q.DOMINATE_EQUIP_TYPE[0]][_].pow,m=_);r.basePow>f&&(i[r.type-q.DOMINATE_EQUIP_TYPE[0]][m].pow=r.basePow,i[r.type-q.DOMINATE_EQUIP_TYPE[0]][m].id=c.id)}}var g=[];for(d in u.goods)if(c=u.goods[d],(r=ur.getItem(c.typeid))&&ur.isDominateEquip(r.type)){var y=!0;for(_=0;_<e;_++)if(r.basePow>i[r.type-q.DOMINATE_EQUIP_TYPE[0]][_].pow||c.id==i[r.type-q.DOMINATE_EQUIP_TYPE[0]][_].id){y=!1;break}y&&g.push(c)}return g}return null},v.curActorIndex=0,v.curPos=0,v.spEquipDic=null,v.dominEquipDic=null,v.potentialDic=null,v.regrowEquipArr=null,_(v,["VOCA",function(){return this.VOCA=["通用","狂战","飞羽","舞天","碧落"]},"REGROWEQUIPNAME_ARR",function(){return this.REGROWEQUIPNAME_ARR=["","主宰披风","主宰腰带","主宰肩甲","主宰护符"]},"REGROWEQUIPGET_ARR",function(){return this.REGROWEQUIPGET_ARR=[10201227,10201228,10201229,10201230]}]),v}(),nn=function(){function m(){}return w(m,"modules.exercise.beasts.ExerBeastsMgr"),I(1,m,"maxStep",function(){return m.init(),null!=m.mainVO?m.mainVO.maxStep:0}),I(1,m,"tabLabels",function(){return m.init(),m.mainVO.labels}),I(1,m,"showAloneAnimalIDs",function(){var t,e;m.init();var i,s;for(var n in i=m.sort(m.mainVO.aloneArr))s=i[n],(t=m.getAnimalVO(s))&&t.isTimeShow&&(e=e||[]).push(s);return e}),I(1,m,"stepMaterialFormula",function(){return m.init(),m.mainVO.stepUpNeedArr}),I(1,m,"loadAloneAnimalNum",function(){var t,e,i=m.showAloneAnimalIDs,s=0;for(var n in i)e=i[n],(t=m.getAnimalVO(e))&&t.isLoaded&&(s+=1);return s}),I(1,m,"maxGoalLv",function(){return m.init(),m.mainVO.maxGoalLv}),m.updateSocialInfo=function(t){var e,i;for(var s in t)i=t[s],(e=m.getAnimalVO(i.id))&&(e.star=i.star,e.step=i.step)},m.setBeastsGetSInfos=function(t){(m.beastsGetSInfos=m.beastsGetSInfos||{})[t.cond_type]=t.cond_vals},m.getBeastsGetInfo=function(t){return m.beastsGetSInfos&&m.beastsGetSInfos[t]?m.beastsGetSInfos[t]:null},m.updateAloneInfo=function(t){var e,i;for(var s in t)i=t[s],(e=m.getAnimalVO(i.id))&&(e.step=i.step)},m.setResonance=function(t){m._resonanceArr=t},m.addResonance=function(t){m._resonanceArr&&m._resonanceArr.push(t)},m.hasResonance=function(t){return m._resonanceArr&&-1!=m._resonanceArr.indexOf(t)},m.getPowerByPalNum=function(t){if(pe.pals)var e=t*pe.pals.length;else e=0;return e},m.init=function(){if(!m.mainVO){m.teamVOs={},m.animalVOs={},m.colorVOs={},m.goalSkillVOs={},m.starNeedVOs=[];var t,e=Ra.startEncode("beasts.xml");for(var i in e)(t=e[i])instanceof xml.BeastsMainVO?m.mainVO=t:t instanceof xml.BeastsTeamVO?m.teamVOs[t.teamID]=t:t instanceof xml.BeastsAnimalVO?m.animalVOs[t.animalID]=t:t instanceof xml.BeastsQualityVO?m.colorVOs[t.quality]=t:t instanceof xml.BeastsStarNeedVO?m.starNeedVOs.push(t):t instanceof xml.BeastsGoalSkillVO&&(m.goalSkillVOs[t.lv]=t)}},m.sort=function(t){var e,i=[];for(var s in t){var n;e=t[s],n=m.getAnimalVO(e),i.push(n)}for(var o,a=i.length,l=0;l<a-1;l++)for(var r=0;r<a-1-l;r++)i[r].color>i[r+1].color&&(o=i[r],i[r]=i[r+1],i[r+1]=o);for(var h=0;h<a-1;h++)for(var u=0;u<a-1-h;u++)i[u].color==i[u+1].color&&i[u].animalID>i[u+1].animalID&&(o=i[u],i[u]=i[u+1],i[u+1]=o);var c=[];for(var d in i){var p=i[d].animalID;c.push(p)}return c},m.getTeamIDs=function(){return m.init(),m.mainVO.teamIDsArr},m.getTeamIDByIndex=function(t){return m.init(),m.mainVO.teamIDsArr[t]},m.getTeamVO=function(t){return m.init(),m.teamVOs[t]},m.getTeamMembers=function(t){return m.init(),m.teamVOs[t]?m.teamVOs[t].membersArr:null},m.getTeamMembersNum=function(t){var e=m.getTeamMembers(t);return e?e.length:0},m.getActiveMembers=function(t){var e,i=m.getTeamMembers(t),s=0;for(var n in i)e=i[n],m.checkAnimalActive(e)&&(s+=1);return s},m.checkAnimalActive=function(t){var e=m.getAnimalVO(t);return e&&e.isLoaded},m.getAnimalVO=function(t){return m.init(),m.animalVOs[t]},m.getQualityVO=function(t){return m.init(),m.colorVOs[t]},m.getGoalSkillMsg=function(t){m.init();var e=m.goalSkillVOs[Math.min(t,m.maxGoalLv)];return e?e.msg:""},m.getStarUpNeed=function(t){var e;for(var i in m.init(),m.starNeedVOs)if((e=m.starNeedVOs[i]).isInRange(t))return[e.need,e.num];return null},m.checkBeastIsCanGet=function(){var t,e=m.getBeastsGetInfo(2),i=NaN,s=NaN,n=!1;if(e&&0<e.length)for(var o in e)(t=e[o])&&2==t.type?s=t.id:t&&3==t.type&&(i=t.id),t&&0<t.val&&(n=!0);else s=i=0,n=!1;return(5<=s||1<=i)&&!n},m.checkBeastRewardRedPoint=function(){m.checkBeastIsCanGet()?Nt.show("RP_BEASTS_REWARD"):Nt.hide("RP_BEASTS_REWARD")},m.curAnimalID=0,m.curTeamID=0,m._resonanceArr=null,m.beastsGetSInfos=null,m.aloneSkillStep=0,m.curBeastsAnimalID=0,m.mainVO=null,m.teamVOs=null,m.animalVOs=null,m.colorVOs=null,m.goalSkillVOs=null,m.starNeedVOs=null,m}(),on=function(){function c(){}return w(c,"modules.exercise.beasts.ExerBeastsUtil"),c.getBeastsWayTip=function(t){if(!t)return"";var e="";if(70000023==t.animalID){var i,s=0,n=0,o=nn.getBeastsGetInfo(2);if(o&&0<o.length)for(var a in o)2==(i=o[a]).type?n=i.id:3==i.type&&(s=i.id);else n=s=0;e="周结算时达到钻石("+s+"/1)或累计5次达到黄金("+n+"/5)"}else if(70000011<=t.animalID&&t.animalID<=70000013)e=t.openTip+"\n当前通关："+Math.max(Ds.curBarrier-1,0)+"关";else if(70000021==t.animalID){var l=oa.getAllBuildSoulNum();e=t.openTip+"("+l+"/8)"}else if(70000022==t.animalID){var r=Eo.getInbodyPetSoulNumByColor(6);e=t.openTip+"("+Math.min(r,2)+"/2)"}else e=t.openTip;return e},c.getBeastsSmallStar=function(t){return t%10},c.checkAllRP=function(){c.checkAllActive(),c.checkAllStep(),c.checkAllResonate(),c.checkAllStar(),c.checkAllTeamRp(),c.checkAloneSkill()},c.checkOneActive=function(t){return!!(c.tempAnimalVO=nn.getAnimalVO(t))&&(0<xo.getGoodsNumByTypeID(c.tempAnimalVO.openCard)&&!c.tempAnimalVO.isLoaded)},c.checkAllActive=function(){c.loopAllTeamAnimalAndCheck(c.checkOneActive,"RP_BEASTS_TEAM_ACTIVE"),c.loopAllAloneAnimalAndCheck(c.checkOneActive,"RP_BEASTS_ALONE_ACTIVE")},c.loopAllTeamAnimalAndCheck=function(t,e){if(t){var i,s,n=nn.getTeamIDs();if(n)for(var o in n){var a;for(var l in s=n[o],i=(c.tempTeamVO=nn.getTeamVO(s))?c.tempTeamVO.membersArr:null)if(a=i[l],t.call(null,a))return void Nt.show(e)}Nt.hide(e)}},c.loopAllAloneAnimalAndCheck=function(t,e){if(t){var i,s=nn.showAloneAnimalIDs;if(s)for(var n in s)if(i=s[n],t.call(null,i))return void Nt.show(e);Nt.hide(e)}},c.checkOneStep=function(t){if(!(c.tempAnimalVO=nn.getAnimalVO(t)))return!1;var e=B.countCur(nn.stepMaterialFormula,c.tempAnimalVO.step),i=0;return(c.tempQualityVO=nn.getQualityVO(c.tempAnimalVO.quality))&&(i=xo.getGoodsNumByTypeID(c.tempQualityVO.stepUpNeed)),e<=i&&c.tempAnimalVO.step<nn.maxStep&&c.tempAnimalVO.isLoaded},c.checkAllStep=function(){c.loopAllTeamAnimalAndCheck(c.checkOneStep,"RP_BEASTS_TEAM_STEP"),c.loopAllAloneAnimalAndCheck(c.checkOneStep,"RP_BEASTS_ALONE_STEP")},c.checkAloneSkill=function(){c.checkAloneSkillCanUp()?Nt.show("RP_BEASTS_ALONE_LV"):Nt.hide("RP_BEASTS_ALONE_LV")},c.checkAloneSkillCanUp=function(){var t=nn.loadAloneAnimalNum;return Math.floor(t/3)>nn.aloneSkillStep},c.checkOneStar=function(t){if(!(c.tempAnimalVO=nn.getAnimalVO(t)))return!1;var e=nn.getStarUpNeed(c.tempAnimalVO.star),i=0,s=0;return e&&(i=e[1],s=xo.getGoodsNumByTypeID(e[0])),i<=s&&c.tempAnimalVO.star<10*c.tempAnimalVO.step&&c.tempAnimalVO.isLoaded},c.checkAllStar=function(){c.loopAllTeamAnimalAndCheck(c.checkOneStar,"RP_BEASTS_STAR")},c.checkOneResonate=function(t){var e=nn.hasResonance(t),i=nn.getTeamMembersNum(t),s=nn.getActiveMembers(t);return!e&&i<=s},c.checkAllResonate=function(){var t,e=nn.getTeamIDs();if(e)for(var i in e)if(t=e[i],c.checkOneResonate(t))return void Nt.show("RP_BEASTS_RESONANCE");Nt.hide("RP_BEASTS_RESONANCE")},c.checkAllTeamRp=function(){var t=nn.getTeamIDs();if(t)for(var e,i=0,s=!1,n=!1,o=!1,a=!1,l=!1,r=0;r<t.length;r++){var h;for(var u in i=t[r],l=!1,o=c.checkOneResonate(i),e=(c.tempTeamVO=nn.getTeamVO(i))?c.tempTeamVO.membersArr:null)if(h=e[u],s=c.checkOneActive(h),n=c.checkOneStar(h),a=c.checkOneStep(h),l=o||s||n||a)break;l?Nt.show("RP_BEASTS_TEAM_CAN_ACTION"+r):Nt.hide("RP_BEASTS_TEAM_CAN_ACTION"+r)}},c.tempAnimalVO=null,c.tempTeamVO=null,c.tempQualityVO=null,c}(),an=function(){function c(){}return w(c,"modules.exercise.beastsBook.ExerBeastsBookMgr"),I(1,c,"lotteryVo",function(){return c.initXml(),c._rewardVO}),c.initXml=function(){if(!c._cards){c._cards={},c._cardsArr=[],c._cardIndexArr=[],c._upArr={},c._extraStepArr={},c._suitArr=[],c.cardsInfo=c.cardsInfo||[],c.suitsInfo=c.suitsInfo||[];var t,e=Ra.startEncode("beastsBook.xml");for(var i in e)(t=e[i])instanceof xml.ExerBeastsBookCardVO?(c._cards[t.id]=t,c._cardsArr.push(t),c._cardIndexArr.push(t.id)):t instanceof xml.ExerBeastsBookUpVO?c._upArr[t.quality]=t:t instanceof xml.ExerBeastsBookExtraVO?(c._extraStepArr[t.id]||(c._extraStepArr[t.id]=[]),c._extraStepArr[t.id].push(t)):t instanceof xml.ExerBeastsBookVO?c._bookVO=t:t instanceof xml.ExerBeastsBookSuitVO?c._suitArr.push(t):t instanceof xml.ExerBeastsLotteryVO&&(c._rewardVO=t)}},c.getCardsByType=function(t){c.initXml();var e=[];if(0==t)e=c._cardsArr;else if(1==t){for(var i in c.cardsInfo)s=c.cardsInfo[i],c._cards[s.type_id]&&e.push(c._cards[s.type_id])}else if(2==t){var s,n=c._cardIndexArr.slice();for(var i in c.cardsInfo){s=c.cardsInfo[i];var o=n.indexOf(s.type_id);-1!=o&&n.splice(o,1)}for(var a=0;a<n.length;a++)c._cards[n[a]]&&e.push(c._cards[n[a]])}return e},c.getCardsById=function(t){return c.initXml(),c._cards[t]||null},c.cardNumInSuit=function(t){for(var e=0,i=t.split("|"),s=0;s<i.length;s++)c.getCardsInfoById(Number(i[s]))&&(e+=1);return[e,i.length]},c.getCardsInfoById=function(t){var e;for(var i in c.initXml(),c.cardsInfo)if((e=c.cardsInfo[i])&&e.type_id==t)return e;return null},c.getNowAttr=function(t,e,i,s,n){c.initXml();var o,a=0,l=c._upArr[t];for(var r in l.ExerBeastsBookUpExerBeastsBookSubArr)if((o=l.ExerBeastsBookUpExerBeastsBookSubArr[r]).initArr(),o.step<e)o.upStepAttrsArr.get(n)&&o.upStarAttrsArr.get(n)&&o.reinfAttrsArr.get(n)&&(a+=Number(o.upStepAttrsArr.get(n))+c._bookVO.maxStar*o.upStarAttrsArr.get(n)+(c._bookVO.maxStar+1)*c._bookVO.maxReinf*o.reinfAttrsArr.get(n));else if(o.step==e){o.upStepAttrsArr.get(n)&&o.upStarAttrsArr.get(n)&&o.reinfAttrsArr.get(n)&&(a+=i*o.upStarAttrsArr.get(n)+(s+i*c._bookVO.maxReinf)*o.reinfAttrsArr.get(n));break}return a},c.getNowGoods=function(t,e,i,s){c.initXml();var n,o=[],a=c._upArr[e];for(var l in a.ExerBeastsBookUpExerBeastsBookSubArr)(n=a.ExerBeastsBookUpExerBeastsBookSubArr[l]).step==i&&(1==s?o=n.reinfMaterial.split("|"):2==s?o=n.upStarMaterial.split("|"):3==s&&(o=n.upStepMaterial.split("|")));var r=c._extraStepArr[t];if(r&&3==s)for(var h=0;h<r.length;h++){var u=r[h];u.step==i&&u.id==t&&o.push(u.items)}return o},c.getAllSuit=function(){return c.initXml(),c._suitArr},c.getOneSuitById=function(t){var e;for(var i in c.initXml(),c._suitArr)if((e=c._suitArr[i]).id==t)return e;return null},c.getLottoViewShowGoods=function(t,e){c.initXml();for(var i=[],s=t+e,n=t;n<s;n++)i.push(c._rewardVO.rewardDatas[n]);return i},c.getTotalSuitAttr=function(){c.initXml();for(var t,e={},i=0;i<c.suitsInfo.length;i++)if(1==(t=c.suitsInfo[i]).val){var s=c.getOneSuitById(t.id);if(s)for(var n=s.attrs.split("|"),o=0;o<n.length;o++){var a=n[o].split(",");e[a[0]]?e[a[0]]+=Number(a[1]):e[a[0]]=Number(a[1])}}return e},c.getTotalCardAttr=function(){for(var t={},e=0;e<c.cardsInfo.length;e++)for(var i=c.cardsInfo[e],s=c.getCardsById(i.type_id),n=W.parseAttr(s.originAttr),o=0;o<n.keys.length;o++){var a=n.keys[o],l=Number(n.get(a));i&&(l+=c.getNowAttr(s.quality,i.purify_lv,i.star_lv,i.refine_lv,a),t[a]?t[a]+=Number(l):t[a]=Number(l))}return t},c.getSuitActive=function(t){var e;c.initXml();for(var i=0;i<c.suitsInfo.length;i++)if((e=c.suitsInfo[i]).id==t&&1==e.val)return!0;return!1},c.getBookMaxInfo=function(){return c.initXml(),c._bookVO||null},c.checkCardRedPoint=function(t){var e=c.getCardsInfoById(t),i=c.getCardsById(t),s=[],n=0;if(null==i)return!1;if(e){if(e.star_lv==c._bookVO.maxStar&&e.refine_lv==c._bookVO.maxReinf&&e.purify_lv==c._bookVO.maxStep)return!1;var o=1;e.star_lv==c._bookVO.maxStar&&e.refine_lv==c._bookVO.maxReinf?o=3:e.refine_lv==c._bookVO.maxReinf&&(o=2);var a=c.getNowGoods(t,i.quality,e.purify_lv,o),l=0;for(var r in a)s=a[r].split(","),n=xo.getGoodsNumByType(xo.GOODS_ID,s[0]),10201113==Number(s[0])&&(n=pe.silver),n>=Number(s[1])&&(l+=1);if(l==a.length)return!0}else if(s=i.item.split(","),(n=xo.getGoodsNumByType(xo.GOODS_ID,s[0]))>=s[1])return!0;return!1},c.checkALLSuitRP=function(){var t;for(var e in c.initXml(),c._suitArr)if(t=c._suitArr[e],0==c.getSuitActive(t.id)){for(var i=t.cards.split("|"),s=0,n=0;n<i.length;n++)null!=c.getCardsInfoById(Number(i[n]))&&(s+=1);if(s==i.length)return!0}return!1},c.checkAllRP=function(){c.initXml();var t,e=!1,i=!1;for(var s in c._cardsArr)t=c._cardsArr[s],c.checkCardRedPoint(t.id)&&(Nt.show("RP_BEATSTBOOK"),Nt.show("RP_BEATSTBOOK_CARD"),e=!0);return c.checkALLSuitRP()&&(Nt.show("RP_BEATSTBOOK"),Nt.show("RP_BEATSTBOOK_SUIT"),i=!0),0==e&&Nt.hide("RP_BEATSTBOOK_CARD"),0==i&&Nt.hide("RP_BEATSTBOOK_SUIT"),!(!e&&!i)||(Nt.hide("RP_BEATSTBOOK"),!1)},c._cards=null,c._cardsArr=null,c._cardIndexArr=null,c._upArr=null,c._extraStepArr=null,c._bookVO=null,c._suitArr=null,c._rewardVO=null,c.cardsInfo=[],c.suitsInfo=[],c.currCardId=NaN,c}(),ln=function(){function t(){}return w(t,"modules.exercise.biography.ExerBiographyConst"),_(t,["blockList",function(){return this.blockList=[1003,2007,3003,3012,4010]}]),t}(),rn=function(){function t(){this.maxLen=10,this._pool=null,this.curImg=null,this.looping=!1}w(t,"modules.exercise.biography.ExerBiographyFiveStarSkillShow");var e=t.prototype;return e.addItem=function(t){if(this._pool=this._pool||[],this._pool.length<this.maxLen){var e=0==this._pool.length;this._pool.push(t),e&&this.loopShow()}},e.removeAll=function(){this._pool&&(this._pool.length=0,this.curImg&&(this.curImg.removeSelf(),ie.clearAll(this.curImg))),this.looping=!1},e.loopShow=function(){if(0<this._pool.length&&0==this.looping){this.looping=!0;var t=this._pool.shift();this.curImg=this.curImg||new et,this.curImg.skin="modules/biographySkill/"+t+".png";var e=ua.isLoveCopyMap()?.6:1;this.curImg.pos(lt.stageWidth,lt.stageHeight*e/2),this.curImg.alpha=0,lt.uiLayer.addChild(this.curImg);var i=Math.floor(lt.stageWidth-577)/2;ie.to(this.curImg,{x:i,alpha:1},500,A.circInOut,Q.create(this,this.rightToCenterComplete,null,!0))}},e.rightToCenterComplete=function(){_t.setTimeout(this,this.timeoutToLeft,null,1e3)},e.timeoutToLeft=function(){ie.to(this.curImg,{x:-577,alpha:0},500,A.circInOut,Q.create(this,this.centerToLeftComplete,null,!0))},e.centerToLeftComplete=function(){this.curImg.removeSelf(),this.curImg.skin="",this.looping=!1,this.loopShow()},t.ins=function(){return t._ins=t._ins||new t},t._ins=null,t}(),hn=function(){function p(){}return w(p,"modules.exercise.biography.ExerBiographyManager"),I(1,p,"bountyIsGetReward",function(){return p._bountyIsGetReward}),I(1,p,"bountyOutTimes",function(){return p._bountyOutTimes}),I(1,p,"bountyState",function(){return p._bountyState}),I(1,p,"lottoVo",function(){return p.initXml(),p._lottoVo}),I(1,p,"bountyStar",function(){return p._bountyStar}),I(1,p,"copyEnterBase",function(){return p.initXml(),p._copyEnterBase}),I(1,p,"bountyClallengeRoles",function(){return p._bountyClallengeRoles=p._bountyClallengeRoles||[]}),p.initXml=function(){if(!p._cards){p._cards=[],p._cardTypes=[{type:0,typeName:"全\n部"}],p._skillItems=new Object,p._copyEnterVOs=[];var t,e=Ra.startEncode("biography.xml");for(var i in e)(t=e[i])instanceof xml.ExerBiographyCardVO?(p._cards.push(t),0==p.isExistType(t.type)&&p._cardTypes.push({type:t.type,typeName:t.typeName})):t instanceof xml.ExerBiographySkillItemVO?p._skillItems[t.id]=t:t instanceof xml.ExerBiographyCopyBaseVO?p._copyEnterBase=t:t instanceof xml.ExerBiographyCopyEnterVO?p._copyEnterVOs.push(t):t instanceof xml.ExerBiographyLottoVO?p._lottoVo=t:t instanceof xml.ExerBiographyFiveStarSkillVO&&(p._fiveStarSkillVO=t)}},p.checkFiveStarSkillIsexist=function(t){if(p.initXml(),null!=p._fiveStarSkillVO)for(var e in p._fiveStarSkillVO.skillIdList)if(p._fiveStarSkillVO.skillIdList[e]==t)return!0;return!1},p.getLottoViewShowGoods=function(t,e){p.initXml();for(var i=[],s=t+e,n=t;n<s;n++)i.push(p._lottoVo.rewardDatas[n]);return i},p.getCopyEnterRefreshCost=function(t){return t>p.copyEnterBase.refreshCostDatas.length?p.copyEnterBase.refreshCostDatas[p.copyEnterBase.refreshCostDatas.length-1]:p.copyEnterBase.refreshCostDatas[t]},p.getCopyEnterVOByTypeId=function(t){var e;for(var i in p.initXml(),p._copyEnterVOs)if((e=p._copyEnterVOs[i]).typeId==t)return e;return null},p.isExistType=function(t){for(var e in p._cardTypes)if(p._cardTypes[e].type==t)return!0;return!1},p.getCardTypes=function(){return p.initXml(),p._cardTypes},p.getCardTypeByIndex=function(t){return p.initXml(),p._cardTypes[t]},p.updateCardsByUpgrade=function(t){for(var e=!1,i=0;i<p.cardTocDatas.length;i++)if(p.cardTocDatas[i].id==t.id){p.cardTocDatas[i]=t,e=!0;break}0==e&&(p.cardTocDatas=p.cardTocDatas||[]).push(t)},p.getCardTocDataById=function(t){var e;for(var i in p.cardTocDatas)if((e=p.cardTocDatas[i]).id==t)return e;return null},p.getCardsByType=function(t){p.initXml();var e,i=[];if(0==t)i=p._cards;else for(var s in p._cards)(e=p._cards[s]).type==t&&i.push(e);return i},p.getCardVOById=function(t){var e;for(var i in p.initXml(),p._cards)if((e=p._cards[i]).id==t)return e;return null},p.getSkillItemsById=function(t){var e;for(var i in p.initXml(),p._cards)if((e=p._cards[i]).id==t)return e.skillIdList;return[]},p.getSkillVOById=function(t){return p.initXml(),p._skillItems[t]},p.getCards=function(){return p.initXml(),p._cards},p.getTotalPower=function(){var t,e,i,s=0;for(var n in p.initXml(),p._cards)if(i=p._cards[n],t=p.getCardTocDataById(i.id))for(var o=0;o<t.val;o++){var a=i.skillIdList[o];e=modules.exercise.biography.ExerBiographyManager.getSkillVOById(a);var l,r,h=0;for(var u in e.attrDatas)l=e.attrDatas[u],h+=W.getAttrPower(parseInt(l.key),parseInt(l.val));for(var c in e.categoryList){for(var d in r=e.categoryList[c],pe.pals)pe.pals[d].ext.category==parseInt(r)&&(s+=h)}}return s},p.getTotalAttrStr=function(){p.initXml();var t,e,i,s,n=[0,0,0,0,0,0],o=0,a=0;for(var l in p._cards)if(s=p._cards[l],(t=p.getCardTocDataById(s.id))&&0<t.val)for(var r=0;r<t.val;r++){a=s.skillIdList[r],e=p.getSkillVOById(a);for(var h=0;h<e.attrDatas.length;h++)i=e.attrDatas[h],-1!=(o=p.TOTAL_ATTR_KEYS.indexOf(parseInt(i.key)))&&(n[o]=n[o]+parseInt(i.val))}return n},p.setBountyInfo=function(t){var e;for(var i in p._bountyClallengeRoles=[],t.challenge_roles)1==(e=t.challenge_roles[i]).leader?p._bountyClallengeRoles.unshift(e):p._bountyClallengeRoles.push(e);p._bountyState=t.state,p._bountyStar=t.star,p._bountyOutTimes=t.out_data_ts,p._bountyIsGetReward=t.is_get_reward},p.checkIsLeader=function(t){if(p._bountyClallengeRoles){var e;for(var i in p._bountyClallengeRoles)if((e=p._bountyClallengeRoles[i]).role_id==t&&1==e.leader)return!0;return!1}return!1},p.checkBountyIsAllOk=function(){if(p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length){for(var t in p._bountyClallengeRoles)if(3!=p._bountyClallengeRoles[t].state)return!1;return!0}return!1},p.getBountyFinishNum=function(){var t=0;if(p._bountyClallengeRoles)for(var e in p._bountyClallengeRoles)3==p._bountyClallengeRoles[e].state&&t++;return t},p.checkRewardIsAllGet=function(){if(p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length){for(var t in p._bountyClallengeRoles)if(1!=p._bountyClallengeRoles[t].is_get_reward)return!1;return!0}return!1},p.checkRewardIsGetByRoleId=function(t){if(p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length){var e;for(var i in p._bountyClallengeRoles)if((e=p._bountyClallengeRoles[i]).role_id==t&&1==e.is_get_reward)return!0;return!1}return!1},p.checkLeaderRewardCanGet=function(){if(p._bountyClallengeRoles&&4==p._bountyClallengeRoles.length){for(var t in p._bountyClallengeRoles)if(3!=p._bountyClallengeRoles[t].state)return!1;return!0}return!1},p.checkBountyIsOkByRoleId=function(t){if(p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length){var e;for(var i in p._bountyClallengeRoles)if(t==(e=p._bountyClallengeRoles[i]).role_id&&3==e.state)return!0;return!1}return!1},p.updateByBountyEnd=function(){p._bountyClallengeRoles=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0},p.updateByBountyExist=function(t){if(0==t)p._bountyClallengeRoles=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0;else for(var e=0;e<p._bountyClallengeRoles.length;e++)if(p._bountyClallengeRoles[e].role_id==t){p._bountyClallengeRoles.splice(e,1);break}},p.updateByBountyGetReward=function(t){var e,i;if(1==t){for(i in p._bountyClallengeRoles)if((e=p._bountyClallengeRoles[i]).role_id==pe.roleID){e.is_get_reward=1;break}}else 2==t&&(p._bountyIsGetReward=1)},p.getCardNameBySkillId=function(t){var e;for(var i in p.initXml(),p._cards){for(var s in(e=p._cards[i]).skillIdList)if(e.skillIdList[s]==t)return e.name}return""},p.updateByBountyUpdate=function(t){var e;switch(t.type){case 1:p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length&&p._bountyClallengeRoles.push(t.challenge_role);break;case 2:case 3:case 4:for(s in p._bountyClallengeRoles)if(e=p._bountyClallengeRoles[s],t.role_id==e.role_id){e.state=t.type;break}break;case 5:if(p._bountyClallengeRoles)for(var i=0;i<p._bountyClallengeRoles.length;i++)if((e=p._bountyClallengeRoles[i]).role_id==t.role_id){t.role_id==pe.roleID?(p._bountyClallengeRoles=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0):p._bountyClallengeRoles.splice(i,1);break}break;case 6:if(p._bountyClallengeRoles)for(s in p._bountyClallengeRoles)if(1==(e=p._bountyClallengeRoles[s]).leader&&t.role_id==e.role_id){p._bountyClallengeRoles=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0;break}break;case 7:var s;if(p.checkIsLeader(pe.roleID)){for(s in p._bountyClallengeRoles)if(e=p._bountyClallengeRoles[s],t.role_id==e.role_id){e.is_get_reward=1;break}}else t.role_id==pe.roleID&&(p._bountyClallengeRoles=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0)}},p.checkCopyRP=function(){if(p.copyInfoTocVO)if(0<p.copyInfoTocVO.challenge_times)if(0<p.copyInfoTocVO.copy_list.length){var t=0;for(var e in p.copyInfoTocVO.copy_list){if(0==p.copyInfoTocVO.copy_list[e].next_revive_ts){Nt.show("RP_BIOGRAPHY_COPY_CAN_FIGHT"),t=0;break}t++}t==p.copyInfoTocVO.copy_list.length&&Nt.hide("RP_BIOGRAPHY_COPY_CAN_FIGHT")}else Nt.hide("RP_BIOGRAPHY_COPY_CAN_FIGHT");else Nt.hide("RP_BIOGRAPHY_COPY_CAN_FIGHT");else Nt.hide("RP_BIOGRAPHY_COPY_CAN_FIGHT")},p.checkBountyRP=function(){if(p._bountyClallengeRoles&&0<p._bountyClallengeRoles.length)Nt.hide("RP_BIOGRAPHY_CAN_BOUNTY"),1==p.bountyState?(p.checkBountyIsAllOk()?Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_FINISH"):Nt.show("RP_BIOGRAPHY_BOUNTY_NOT_FINISH"),p.checkBountyIsOkByRoleId(pe.roleID)&&(0==p.bountyIsGetReward&&p.checkLeaderRewardCanGet()||0==p.checkRewardIsGetByRoleId(pe.roleID))?Nt.show("RP_BIOGRAPHY_BOUNTY_NOT_GET"):Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_GET")):2==p.bountyState&&(p.checkBountyIsOkByRoleId(pe.roleID)?Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_FINISH"):Nt.show("RP_BIOGRAPHY_BOUNTY_NOT_FINISH"),0==p.checkRewardIsGetByRoleId(pe.roleID)&&p.checkBountyIsOkByRoleId(pe.roleID)?Nt.show("RP_BIOGRAPHY_BOUNTY_NOT_GET"):Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_GET"));else if(Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_FINISH"),Nt.hide("RP_BIOGRAPHY_BOUNTY_NOT_GET"),p.copyInfoTocVO&&p.copyInfoTocVO.open_bounty_times>=p.copyEnterBase.maxBountyNum)Nt.hide("RP_BIOGRAPHY_CAN_BOUNTY");else{var t,e=0;for(var i in p.bountyGoods){if(t=p.bountyGoods[i],0<xo.getGoodsNumByTypeID(t)){Nt.show("RP_BIOGRAPHY_CAN_BOUNTY");break}e++}e==p.bountyGoods.length&&Nt.hide("RP_BIOGRAPHY_CAN_BOUNTY")}},p.checkCardTabBarRP=function(){var t,e,i=modules.exercise.biography.ExerBiographyManager.getCardTypes();for(var s in i){e=i[s],t=p.getCardsByType(e.type);var n,o,a,l=0,r=0,h=0,u=0;for(var c in t){if(a=t[c],ur.getItem(a.materialsTypeId),l=xo.getGoodsNumByTypeID(a.materialsTypeId),n=modules.exercise.biography.ExerBiographyManager.getCardTocDataById(a.id)){if(5==n.val)continue;r=a.materialsNums[n.val]}else r=a.materialsNums[0];if(r<=l){Nt.show("RP_BIOGRAPHY_CARD_CAN_UPGRADE"+e.type),u++;break}if(o=Ys.getSubVOById(a.compound).materialList[0],h=xo.getGoodsNumByTypeID(o.typeId),(r-l)*o.num<=h){Nt.show("RP_BIOGRAPHY_CARD_CAN_UPGRADE"+e.type),u++;break}}0==u&&Nt.hide("RP_BIOGRAPHY_CARD_CAN_UPGRADE"+e.type)}},p.checkCardRP=function(){var t,e,i,s=p.getCardsByType(0),n=0,o=0,a=0,l=0;for(var r in s){if(i=s[r],ur.getItem(i.materialsTypeId),n=xo.getGoodsNumByTypeID(i.materialsTypeId),t=modules.exercise.biography.ExerBiographyManager.getCardTocDataById(i.id)){if(5==t.val)continue;o=i.materialsNums[t.val]}else o=i.materialsNums[0];if(o<=n){Nt.show("RP_BIOGRAPHY_CARD_CAN_UPGRADE"),l++;break}if(e=Ys.getSubVOById(i.compound).materialList[0],a=xo.getGoodsNumByTypeID(e.typeId),(o-n)*e.num<=a){Nt.show("RP_BIOGRAPHY_CARD_CAN_UPGRADE"),l++;break}}0==l&&Nt.hide("RP_BIOGRAPHY_CARD_CAN_UPGRADE")},p.checkCardIsCanUpgrade=function(t){var e,i,s,n=0,o=0;return ur.getItem(t.materialsTypeId),e=xo.getGoodsNumByTypeID(t.materialsTypeId),(n=(i=modules.exercise.biography.ExerBiographyManager.getCardTocDataById(t.id))?5==i.val?t.materialsNums[i.val-1]:t.materialsNums[i.val]:t.materialsNums[0])<=e||(s=Ys.getSubVOById(t.compound).materialList[0],o=xo.getGoodsNumByTypeID(s.typeId),(n-e)*s.num<=o)},p.setNoticeSettings=function(t){p._noticeSettings=[];for(var e=0;e<5;e++){var i,s=!1;for(var n in t)if((i=t[n])==e+1){p._noticeSettings[e]={id:i,isNotice:!0},s=!0;break}0==s&&(p._noticeSettings[e]={id:e+1,isNotice:!1})}},p.updateNoticeSetting=function(t,e){var i;for(var s in p._noticeSettings)if((i=p._noticeSettings[s]).id==t){i.isNotice=e;break}},p.getNoticeSettings=function(){return p._noticeSettings},p.getNeedNoticeSettings=function(){var t,e=[];for(var i in p._noticeSettings)1==(t=p._noticeSettings[i]).isNotice&&e.push(t.id);return e},p.getNoticeTipStr=function(){var t="",e=[];if(p.copyInfoTocVO&&p.copyInfoTocVO.copy_list)for(var i=p.getNeedNoticeSettings(),s=0;s<p.copyInfoTocVO.copy_list.length;s++){var n,o=p.copyInfoTocVO.copy_list[s];for(var a in i)if(n=i[a],o.star==n&&-1==e.indexOf(o.star)){e.push(o.star);break}}var l=0;e=e.sort(p.sortNoticeId);for(var r=0;r<e.length;r++)l=e[r],r==e.length-1?t+=l+"星":t+=l+"星、";return t},p.sortNoticeId=function(t,e){return e<t?1:t<e?-1:0},p.checkNeedShowTip=function(){if(p.copyInfoTocVO){var t,e=p.getNeedNoticeSettings();for(var i in p.copyInfoTocVO.copy_list){var s;for(var n in t=p.copyInfoTocVO.copy_list[i],e)if(s=e[n],t.star==s&&t.next_revive_ts-ya.serverTime<=0)return!0}}return!1},p.isMaxLv=function(t){var e,i,s,n=0;for(var o in p._cards)s=p._cards[o],e=p.getCardVOById(s.id),i=Ys.getSubVOById(e.compound).materialList[0],s.materialsTypeId!=t&&i.typeId!=t||(n=s.id);var a=p.getCardTocDataById(n);return!(!a||!a.val)&&5==a.val},p.cardTocDatas=null,p.copyInfoTocVO=null,p._bountyClallengeRoles=null,p._noticeSettings=null,p._bountyState=0,p._bountyOutTimes=0,p._bountyIsGetReward=0,p._bountyStar=0,p.curCardVO=null,p._cards=null,p._cardTypes=null,p.currCardId=NaN,p._skillItems=null,p._copyEnterVOs=null,p._copyEnterBase=null,p._lottoVo=null,p._fiveStarSkillVO=null,_(p,["TOTAL_ATTR_KEYS",function(){return this.TOTAL_ATTR_KEYS=[49,11,13,14,37,38]},"bountyGoods",function(){return this.bountyGoods=[12210001,12210002,12210003]}]),p}(),un=function(){function s(){}return w(s,"modules.exercise.ExerciseConfig"),I(1,s,"guides",function(){return s.initXml(),s._guides}),s.initXml=function(){if(null==s._guides){s._guides=[];var t,e=Ra.startEncode("exerGuide.xml");for(var i in e)(t=e[i])instanceof xml.ExerGuideVO&&s._guides.push(t);s._guides=s._guides.sort(s.sortGuides)}},s.sortGuides=function(t,e){return t.regrow>e.regrow?1:t.regrow<e.regrow?-1:t.level>e.level?1:t.level<e.level?-1:t.id>e.id?1:t.id<e.id?-1:0},s.getGuideVoById=function(t){var e;for(var i in s.guides)if((e=s.guides[i]).id==t)return e;return null},s._guides=null,s}(),cn=function(){function t(){}return w(t,"modules.exercise.ExerciseConst"),_(t,["EXERCISE_BIOGRAPHY_CARD_STROKE_COLOR",function(){return this.EXERCISE_BIOGRAPHY_CARD_STROKE_COLOR=["#093176","#87121c","#603302","#1c4c33","#551581","#1c2c4f"]},"NEED_OPEN_PACK_VIEW_GOODS_IDS",function(){return this.NEED_OPEN_PACK_VIEW_GOODS_IDS=[10201401,10201402,10201403,10201404,10201405,10201732,10201733,10201734,10201835,10201836]},"STRANGE_FIRE_COLORS",function(){return this.STRANGE_FIRE_COLORS=["#fdc06a","#7fd6fe","#f299ff","#96f254"]}]),t}(),dn=function(){function t(){}return w(t,"modules.exercise.ExerciseUtils"),t.getAttrStr=function(t,e,i){for(var s="",n=t.split(","),o=e.split(","),a=0;a<n.length;a++)s+=W.getAttrStrByNum(parseInt(n[a]),o[a]*i,"",k.getEmpty(1)+"+"),a<n.length&&(s+="\n");return s},t.getLowestQuality=function(t){var e,i=0;for(var s in t){e=t[s];var n=An.getStoneById(e.val);n&&(0==i||n.quality<i)&&(i=n.quality)}return i},t.getFireTarQualityNum=function(t,e){var i,s=0;for(var n in e){i=e[n];var o=An.getStoneById(i.val);o&&o.quality>=t&&s++}return s},t}(),pn=function(){function t(){}return w(t,"modules.exercise.fightSoul.FightSoulConst"),_(t,["OPERATE_SUCCESS_TIPS",function(){return this.OPERATE_SUCCESS_TIPS={1:"装备{0}+{1}成功",2:"成功拆卸{0}+{1}"}},"MAIN_VIEW_ITEM_POS_LIST",function(){return this.MAIN_VIEW_ITEM_POS_LIST=[{x:108,y:207},{x:524,y:207},{x:222,y:306},{x:420,y:306},{x:222,y:450},{x:410,y:450},{x:108,y:548},{x:524,y:548}]},"RESOLVE_PANEL_ITEM_POS_LIST",function(){return this.RESOLVE_PANEL_ITEM_POS_LIST=[{x:104,y:162},{x:249,y:162},{x:394,y:162},{x:539,y:162},{x:104,y:300},{x:249,y:300},{x:394,y:300},{x:539,y:300}]},"RESOLVE_GOODS_IMG_POS_LIST",function(){return this.RESOLVE_GOODS_IMG_POS_LIST=[{x:89,y:600},{x:235,y:600},{x:380,y:600},{x:526,y:600}]},"COLLECT_SPIRIT_ITEM_POS_LIST",function(){return this.COLLECT_SPIRIT_ITEM_POS_LIST=[{x:314,y:270},{x:441,y:321},{x:483,y:453},{x:444,y:577},{x:314,y:622},{x:182,y:577},{x:128,y:453},{x:181,y:321}]},"SPIRIT_MAIN_VIEW_ITEM_POS",function(){return this.SPIRIT_MAIN_VIEW_ITEM_POS=[{x:302,y:287},{x:127,y:345},{x:480,y:345},{x:235,y:438},{x:370,y:438},{x:127,y:544},{x:302,y:579},{x:480,y:537}]},"SOUL_PART_NAME_LIST",function(){return this.SOUL_PART_NAME_LIST=["","武器","头盔","护甲","项链","左护手","右护手","左戒指","右戒指"]}]),t}(),mn=function(){function r(){}return w(r,"modules.exercise.fightSoul.FightSoulMgr"),I(1,r,"maxSoulPackCellNum",function(){return r.initXml(),r._maxSoulPackCellNum}),I(1,r,"maxSpiritPackCellNum",function(){return r.initXml(),r._maxSpiritPackCellNum}),r.initXml=function(){if(!r._fightSoulDic){r._fightSoulDic={},r._soulPackOpenVODic={},r._soulResolveVoDic={},r._soulRecastVoDic={},r._suitInfoVoList=[],r._pureSpiritDic={},r._spiritPackOpenVODic={},r._maxSoulPackCellNum=20,r._maxSpiritPackCellNum=10,r._spiritLevelCostVoDic={},r._spiritPosNameVODic={},r._soulQualityVOList=[],r._spiritLevelAttrDic={};var t,e=Ra.startEncode("fightSoul.xml");for(var i in e)if((t=e[i])instanceof xml.FightSoulVO)r._fightSoulDic[t.typeId]=t;else if(t instanceof xml.SoulPackOpenVO)r._soulPackOpenVODic[t.id]=t,r._maxSoulPackCellNum+=5;else if(t instanceof xml.SoulResolveVO)r._soulResolveVoDic[t.typeId]=t;else if(t instanceof xml.SoulRecastVO)r._soulRecastVoDic[t.typeId]=t;else if(t instanceof xml.CollectSpiritVO)r._suitInfoVoList.push(t);else if(t instanceof xml.PureSpiritVO)r._pureSpiritDic[t.typeId]=t;else if(t instanceof xml.SpiritPackOpenVO)r._spiritPackOpenVODic[t.id]=t,r._maxSpiritPackCellNum+=5;else if(t instanceof xml.SpiritExpVO)r._spiritAddExpVo=t;else if(t instanceof xml.SpiritLevelCostVO){var s=t;r._spiritLevelCostVoDic[s.suitId+"_"+s.level]=s}else if(t instanceof xml.SpiritPosNameVO)r._spiritPosNameVODic[t.pos]=t;else if(t instanceof xml.SoulQualityVO)r._soulQualityVOList.push(t);else if(t instanceof xml.SpiritLevelAttrVO){var n=t;r._spiritLevelAttrDic[r.getSpiritAttrKey(n.typeId,n.level)]=n}r._suitInfoVoList.sort(r.sortSuitInfo)}},r.getSpiritAttrKey=function(t,e){return t+"_"+e},r.sortSuitInfo=function(t,e){return t.suitId-e.suitId},r.getSuitInfoList=function(){return r.initXml(),r._suitInfoVoList},r.getFightSoulVO=function(t){return r.initXml(),r._fightSoulDic[t]},r.getPureSpiritVO=function(t){return r.initXml(),r._pureSpiritDic[t]},r.getPackOpenVO=function(t,e){switch(r.initXml(),e){case xo.FIGHT_SOUL_ID:return r._soulPackOpenVODic[t];case xo.PURE_SPIRIT_ID:return r._spiritPackOpenVODic[t]}return null},r.getSpiritPackOpenVO=function(t){return r.initXml(),r._spiritPackOpenVODic[t]},r.getSoulResolveVo=function(t){return r.initXml(),r._soulResolveVoDic[t]},r.getSoulRecastVo=function(t){return r.initXml(),r._soulRecastVoDic[t]},r.getSoulQualityName=function(t){var e;for(var i in r.initXml(),r._soulQualityVOList)if((e=r._soulQualityVOList[i]).isInRange(t))return e.name;return""},r.getSoulQualityRangeByIndex=function(t){return r.initXml(),r._soulQualityVOList[t].getRangeList()},r.getSoulQualityByIndex=function(t){return r.initXml(),r._soulQualityVOList[t]},r.getSoulQualityIndex=function(t){r.initXml();for(var e=0;e<r._soulQualityVOList.length;e++){if(r._soulQualityVOList[e].isInRange(t))return e}return-1},r.getMaxPackCellNum=function(t){switch(t){case xo.FIGHT_SOUL_ID:return r.maxSoulPackCellNum;case xo.PURE_SPIRIT_ID:return r.maxSpiritPackCellNum;default:return 0}},r.getSpiritAddExpVO=function(){return r.initXml(),r._spiritAddExpVo},r.getSpiritLevelCostExpVO=function(t,e){r.initXml();var i=r.getSuitIdByTypeId(t);return r._spiritLevelCostVoDic[i+"_"+e]},r.getSpiritPosName=function(t){r.initXml();var e=r._spiritPosNameVODic[t];return e?e.name:""},r.getSpiritAttrVO=function(t,e){r.initXml();var i=r._spiritLevelAttrDic[r.getSpiritAttrKey(t,e)];return i||zn.addDebugInfo("没有找到精魄等级id："+t+", 等级："+e+"的SpiritLevelAttr配置","ALL"),i},r.handlerSpiritLevelUp=function(t){var e=r._pos2EquipSpiritInfoDic[t.pal_id];(e=e||{})[r.getPureSpiritVO(t.spirit.id).pos]=t.spirit,r._pos2EquipSpiritInfoDic[t.pal_id]=e},r.handlerSpiritOperate=function(t,e){var i,s={};for(var n in e)i=e[n],s[r.getPureSpiritVO(i.id).pos]=i;r._pos2EquipSpiritInfoDic[t]=s},r.handlerOperate=function(t){var e,i={};for(var s in t.list)e=t.list[s],i[r.getFightSoulVO(e.id).pos]=e;r._pos2EquipSoulInfoDic[t.pal_id]=i},r.handlerSpiritInfo=function(t){var e,i;if(t)for(var s in r._spiritInfo=r._spiritInfo||{},t){var n;for(var o in i=t[s],e={},(r._spiritInfo[i.pal_id]=i).spirits)n=i.spirits[o],e[r.getPureSpiritVO(n.id).pos]=n;r._pos2EquipSpiritInfoDic[i.pal_id]=e}},r.handlerSoulInfo=function(t){var e,i;if(t)for(var s in r._soulInfo=r._soulInfo||{},t){var n;for(var o in i=t[s],e={},(r._soulInfo[i.pal_id]=i).souls)n=i.souls[o],e[r.getFightSoulVO(n.id).pos]=n;r._pos2EquipSoulInfoDic[i.pal_id]=e}},r.getEquipSpiritInfoByPalId=function(t){return r._spiritInfo?r._spiritInfo[t]:null},r.getEquipSoulInfoByPalId=function(t){return r._soulInfo?r._soulInfo[t]:null},r.getCurPalSoulInfo=function(){return r.getEquipSoulInfoByPalId(r.curPalId)},r.getEquipSpiritByPos=function(t,e){if(void 0===e&&(e=-1),r._pos2EquipSpiritInfoDic){var i=r._pos2EquipSpiritInfoDic[e=e<0?r.curPalId:e];if(i)return i[t]}return null},r.getEquipSoulKVByPos=function(t,e){if(void 0===e&&(e=-1),r._pos2EquipSoulInfoDic){var i=r._pos2EquipSoulInfoDic[e=e<0?r.curPalId:e];if(i)return i[t]}return null},r.getTotalAddValue=function(t){return modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(t.id).attr+t.val},r.getTotalAddValueStr=function(t){return r.getTotalAddValue(t)+""},r.isPackageFull=function(t){return xo.checkBagIsFull(t)},r.getSpiritGoodsByPos=function(t,e){void 0===e&&(e=!0);var i,s,n=[],o=xo.getPureSpiritGoods();for(var a in o)s=o[a],(i=r.getPureSpiritVO(s.typeid))&&i.pos==t&&n.push(s);return e&&n.sort(r.sortSpiritGoods),n},r.getAllSpiritGoods=function(t){void 0===t&&(t=!0);var e=[],i=xo.getPureSpiritGoods();return i&&0<i.length&&(e=e.concat(i)),t&&e.sort(r.sortSpiritGoods),e},r.sortSpiritGoods=function(t,e){return r.sortSpiritByTypeId(t.typeid,e.typeid)},r.sortSpiritKv=function(t,e){return r.sortSpiritByTypeId(t.id,e.id)},r.sortSpiritByTypeId=function(t,e){var i=r.getPureSpiritVO(t),s=r.getPureSpiritVO(e);return i.color>s.color?-1:i.color<s.color?1:s.typeId-i.typeId},r.getAllSoulGoods=function(t){void 0===t&&(t=!0);var e=[],i=xo.getFightSoulGoods();return i&&0<i.length&&(e=e.concat(i)),t&&e.sort(r.sortSoulGoods),e},r.getSoulGoodsByPos=function(t,e){void 0===e&&(e=!0);var i,s=[],n=xo.getFightSoulGoods();if(n&&0<n.length)for(var o in n)i=n[o],modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(i.typeid).pos==t&&s.push(i);return e&&s.sort(r.sortSoulGoods),s},r.sortSoulGoods=function(t,e){var i=modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(t.typeid),s=modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(e.typeid),n=r.getSuitIdByTypeId(t.typeid),o=r.getSuitIdByTypeId(e.typeid),a=r.getSoulAddValue(t),l=r.getSoulAddValue(e);return o<n?-1:n<o?1:l<a?-1:a<l?1:s.attr-i.attr},r.getSuitIdByTypeId=function(t){var e=t.toString();return e=e.substr(3,2),parseInt(e)},r.getSoulAddValue=function(t){var e;if(t&&t.data_list)for(var i in t.data_list)if(5==(e=t.data_list[i]).id)return e.val;return 0},r.getSpiritLevel=function(t){var e;for(var i in t.data_list)if(6==(e=t.data_list[i]).id)return e.val;return 1},r.sortSoulKv=function(t,e){var i=modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(t.id),s=modules.exercise.fightSoul.FightSoulMgr.getFightSoulVO(e.id),n=r.getSuitIdByTypeId(t.id),o=r.getSuitIdByTypeId(e.id),a=t.val,l=e.val;return o<n?-1:n<o?1:l<a?-1:a<l?1:s.attr-i.attr},r.getPackageCapacity=function(t){var e=xo.getPackDataByBagId(t);return e?e.rows*e.columns:0},r.clearOperateTypeIdList=function(){r.operateTypeIdList.length=0},r.addOperateTypeId=function(t){r.operateTypeIdList.push(t)},r.getCollectSoulGoods=function(t,e){var i,s,n=r.getAllSoulGoods(!1);for(var o in n)(s=n[o]).typeid==t&&(r.getSoulAddValue(s)<e||(!i||r.getSoulAddValue(s)<r.getSoulAddValue(i))&&(i=s));return i},r.getCollectSoulNum=function(t,e){var i,s=0,n=r.getAllSoulGoods(!1),o=0;for(var a in n)i=n[a],o=r.getSoulAddValue(i),i.typeid==t&&e<=o&&s++;return s},r.getSoulKVByGoods=function(t){var e=new Object;return e.className="p_kv",e.id=t.typeid,e.val=r.getSoulAddValue(t),e},r.isOpenFightSoul=function(){if(!Xs.isCrossOpen)return!1;var t=pe.myRegrow<r.getFightSoulOpenRegrowLevel(),e=Zn.godHoodLv<Xs.minGodLvl;return!t&&!e},r.getFightSoulOpenRegrowLevel=function(){return Xs.enterNeedLv},r.isSpiritCanUpgrade=function(t,e){return!modules.exercise.fightSoul.FightSoulMgr.getPureSpiritVO(t).isMaxLevel(e)&&modules.exercise.fightSoul.FightSoulMgr.getSpiritLevelCostExpVO(t,e).costExp<=pe.getScore(28)},r._fightSoulDic=null,r._soulPackOpenVODic=null,r._soulResolveVoDic=null,r._soulRecastVoDic=null,r._suitInfoVoList=null,r._soulQualityVOList=null,r._pureSpiritDic=null,r._spiritPackOpenVODic=null,r._spiritAddExpVo=null,r._spiritLevelCostVoDic=null,r._spiritPosNameVODic=null,r._spiritLevelAttrDic=null,r._maxSoulPackCellNum=0,r._maxSpiritPackCellNum=0,r.curPalId=NaN,r._soulInfo=null,r._pos2EquipSoulInfoDic={},r.operateTypeIdList=[],r._spiritInfo=null,r._pos2EquipSpiritInfoDic={},r}(),fn=function(){function I(){}return w(I,"modules.exercise.fightSoul.FightSoulUtil"),I.getSpiritAttrStr=function(t,e){var i="",s=mn.getPureSpiritVO(t),n=mn.getSpiritAttrVO(t,e);if(n){for(var o=n.attrList,a=0;a<o.length;a+=2)i+=W.getName(o[a])+"+"+o[a+1]+"\n";if(s.isMaxLevel(e)&&""!=s.maxLvlAttr){var l=n.parseAttr(s.maxLvlAttr);i+=W.getName(l[0])+"+"+parseFloat(l[1])}}return i},I.getSpiritPower=function(){var t,e=[],i=[];for(var s in q.ALLPUTSINBODY){t=q.ALLPUTSINBODY[s];var n=mn.getEquipSpiritByPos(t);if(n)for(var o=mn.getPureSpiritVO(n.id),a=mn.getSpiritAttrVO(n.id,n.val),l=a.attrList,r=0;r<l.length;r+=2)if(I.addAttr(l[r],l[r+1],e,i),o.isMaxLevel(n.val)&&""!=o.maxLvlAttr){var h=a.parseAttr(o.maxLvlAttr);I.addAttr(parseInt(h[0]),parseInt(h[1]),e,i)}}for(var u=0,c=0;c<e.length;c++)u+=Math.floor(W.getAttrPower(e[c],i[c]));return Math.floor(u)},I.getSoulPower=function(){var t,e=[],i=[];for(var s in q.ALLPUTSINBODY){t=q.ALLPUTSINBODY[s];var n=mn.getEquipSoulKVByPos(t);if(n){var o=mn.getFightSoulVO(n.id);if(o){var a=(o.attr+n.val)/100,l=I.getEquipAttributeByPos(t,a);if(0==l.length)continue;for(var r=l[0],h=l[1],u=0;u<r.length;u++){var c=r[u],d=h[u];d=Math.floor(d*a),I._isShowTrace&&console.log("soul power,id:"+c+",val:"+d),I.addAttr(c,d,e,i)}}}}for(var p=0,m=0;m<e.length;m++){var f=e[m],_=i[m];p+=W.getAttrPower(f,_)}return I._isShowTrace=!1,Math.floor(p)},I.getEquipAttributeByPos=function(t,e){var i,s,n=[],o=pe.getPalById(mn.curPalId);for(var a in o.equip)if((s=o.equip[a]).pos==t){i=s;break}if(!i)return n;var l,r=ur.getItem(i.type_id),h=i.extra_attr,u=[],c=[],d=Jo.getEquipInfo(t,1,o.pal_id);if(d&&0<d.curLv){l=d.getAttrs();for(var p=0;p<l.length;p++)I.addAttr(parseInt(l[p][0]),parseInt(l[p][1]),u,c)}if((d=Jo.getEquipInfo(t,2,o.pal_id))&&0<d.curLv)for(l=d.getAttrs(),p=0;p<l.length;p++)I.addAttr(parseInt(l[p][0]),parseInt(l[p][1]),u,c);if((d=Jo.getEquipInfo(t,3,o.pal_id))&&0<d.curLv)for(l=d.getAttrs(),p=0;p<l.length;p++)I.addAttr(parseInt(l[p][0]),parseInt(l[p][1]),u,c);for(var m,f,_=(l=W.parseAttrToArr(r.attr)).length,g=0,y=0;y<_;y++){var v;if(m=l[y],h)for(v in h)if(f=h[v],49==m[0]||15==m[0]||16==m[0]){if(49==f.prop_code||15==f.prop_code||16==f.prop_code){g=f.prop_value;break}}else if(m[0]==f.prop_code){g=f.prop_value;break}g+=parseFloat(m[1]),I.addAttr(parseInt(m[0]),g,u,c)}return n.push(u),n.push(c),n},I.addAttr=function(t,e,i,s){var n=i.indexOf(t);0<=n?s[n]+=e:(i.push(t),s.push(e))},I.checkAllRP=function(){I.checkAllPalSoulRP(),I.checkAllPalSpiritRP()},I.checkAllPalSoulRP=function(){var t,e=!1,i=pe.pals;if(i)for(var s in i)t=i[s],I.checkPalHeadItemSoulRP(t.pal_id)&&(e=!0);return e?Nt.show("RP_FIGHT_SOUL_TAB"):Nt.hide("RP_FIGHT_SOUL_TAB"),e},I.checkPalHeadItemSoulRP=function(t){var e=t==mn.curPalId,i=pe.getPalIndexByID(t);return I.checkSoulAutoEquipRP(t,e)?(Nt.show("RP_FIGHT_SOUL_HEAD_ITEM_"+i),!0):(Nt.hide("RP_FIGHT_SOUL_HEAD_ITEM_"+i),!1)},I.checkSoulAutoEquipRP=function(t,e){void 0===e&&(e=!0);var i,s=!1,n=q.ALLPUTSINBODY;for(var o in n)i=n[o],I.checkSoulEquipRP(i,t,e)&&(s=!0);return s?e&&Nt.show("RP_FIGHT_SOUL_AUTO_EQUIP"):e&&Nt.hide("RP_FIGHT_SOUL_AUTO_EQUIP"),s},I.checkSoulEquipRP=function(t,e,i){void 0===i&&(i=!0);var s=mn.getEquipSoulKVByPos(t,e),n=mn.getSoulGoodsByPos(t);if(!n||0==n.length)return i&&Nt.hide("RP_FIGHT_SOUL_EQUIP_ITEM_"+t),!1;var o=new Object;return o.className="p_kv",o.id=n[0].typeid,o.val=mn.getSoulAddValue(n[0]),!s||mn.sortSoulKv(o,s)<0?(i&&Nt.show("RP_FIGHT_SOUL_EQUIP_ITEM_"+t),!0):(i&&Nt.hide("RP_FIGHT_SOUL_EQUIP_ITEM_"+t),!1)},I.checkAllPalSpiritRP=function(){var t,e=!1,i=pe.pals;if(i)for(var s in i)t=i[s],I.checkPalHeadItemSpiritRP(t.pal_id)&&(e=!0);return e?Nt.show("RP_FIGHT_SOUL_SPIRIT_TAB"):Nt.hide("RP_FIGHT_SOUL_SPIRIT_TAB"),e},I.checkPalHeadItemSpiritRP=function(t){var e=t==mn.curPalId,i=pe.getPalIndexByID(t);return I.checkSpiritAutoEquipRP(t,e)?(Nt.show("RP_FIGHT_SOUL_SPIRIT_HEAD_ITEM_"+i),!0):(Nt.hide("RP_FIGHT_SOUL_SPIRIT_HEAD_ITEM_"+i),!1)},I.checkSpiritAutoEquipRP=function(t,e){void 0===e&&(e=!0);var i,s=!1,n=!1,o=0,a=q.ALLPUTSINBODY;for(var l in a)i=a[l],3==(o=I.checkSpiritEquipRP(i,t,e))?s=!0:1==o&&(n=!0);return s?e&&Nt.show("RP_FIGHT_SOUL_SPIRIT_AUTO_EQUIP"):e&&Nt.hide("RP_FIGHT_SOUL_SPIRIT_AUTO_EQUIP"),s||n},I.checkSpiritEquipRP=function(t,e,i){void 0===i&&(i=!0);var s=mn.getEquipSpiritByPos(t,e),n=mn.getSpiritGoodsByPos(t),o=s&&mn.isSpiritCanUpgrade(s.id,s.val);if(o)return i&&Nt.show("RP_FIGHT_SOUL_SPIRIT_EQUIP_ITEM_"+t),1;if(!n||0==n.length)return i&&Nt.hide("RP_FIGHT_SOUL_SPIRIT_EQUIP_ITEM_"+t),4;var a=n[0].typeid;return!s||o||mn.sortSpiritByTypeId(a,s.id)<0?(i&&Nt.show("RP_FIGHT_SOUL_SPIRIT_EQUIP_ITEM_"+t),3):(i&&Nt.hide("RP_FIGHT_SOUL_SPIRIT_EQUIP_ITEM_"+t),4)},I._isShowTrace=!0,I}(),_n=(function(){function t(){}w(t,"modules.exercise.godEquip.ExerGodEquipConst")}(),function(){function v(){}return w(v,"modules.exercise.godEquip.ExerGodEquipMgr"),I(1,v,"equipData",null,function(t){v._equipData=t}),v.updateEquipData=function(t,e){var i=v.getEquipData(t);i?i.level=e:((i=new Object).className="p_god_equip",i.id=t,i.level=e,i.stone=[],(v._equipData=v._equipData||[]).push(i))},v.updateStone=function(t,e,i,s){var n,o;for(var a in v._equipData)if((o=v._equipData[a]).id==e)if(o.stone){for(var l=0;l<o.stone.length;l++)if((n=o.stone[l]).id==i)return void(1==t?n.val=s:2==t&&o.stone.splice(l,1));v.newStoneIntoList(i,s,o)}else v.newStoneIntoList(i,s,o)},v.newStoneIntoList=function(t,e,i){var s=new Object;s.className="p_kv",s.id=t,s.val=e,i.stone=i.stone||[],i.stone.push(s)},v.getGodEquipAttrByIndex=function(t){var e=[],i=v.getGodEquipVOByIndex(t);if(i){var s=v.getEquipData(i.id);if(s){var n,o,a,l=!1;for(var r in s.stone){var h;if(a=s.stone[r],n=v.getGodEquipStoneVO(a.val))for(var u in n.attrList){var c;for(var d in h=n.attrList[u],l=!1,e)if(c=e[d],h.key==c.key){l=!0,c.val+=h.val;break}0==l&&((o=new Object).key=h.key,o.val=h.val,e.push(o))}}}}return e},v.getEquipStoneDataByEquipIdAndPart=function(t,e){var i;for(var s in v._equipData){var n;if((i=v._equipData[s]).id==t)for(var o in i.stone)if((n=i.stone[o]).id==e)return n}return null},v.getEquipData=function(t){var e;for(var i in v._equipData)if(t==(e=v._equipData[i]).id)return e;return null},v.getStep=function(t){var e=v.getEquipData(t);return e?e.level:0},v.getUpStones=function(t){var e=[],i=xo.getGoodsNumByTypeID(t),s=ur.getItem(t);s.tempNum=1,e.push(s);for(var n=0;n<i;n++)n<3&&((s=ur.getItem(t)).tempNum=1,e.push(s));return e},v.getAllPackStones=function(){var t,e,i=[],s=[];for(var n in st.GOODS_TYPE_GODEQUIP_STONES)t=st.GOODS_TYPE_GODEQUIP_STONES[n],s=s.concat(xo.getGoodsByGoodsType(t));for(var o in s=s.sort(v.sortStones)){e=s[o];var a,l=!1;for(var r in i)if(a=i[r],e.typeid==a.typeid){l=!0,a.current_num+=e.current_num;break}if(0==l){var h=k.copyObject(e);i.push(h)}}return i},v.sortStones=function(t,e){return t.typeid>e.typeid?-1:t.typeid<e.typeid?1:0},v.getReplaceStones=function(t,e){var i,s,n=[],o=Math.floor(t/1e3),a=xo.getGoodsByGoodsType(o);for(var l in a)s=a[l],(i=v.getGodEquipStoneVO(s.typeid))&&i.level>e&&n.push(s);return n},v.getInlayStones=function(t,e){var i=[],s=v.getEquipData(t);if(s){var n,o,a=[];for(var l in s.stone)o=s.stone[l],n=v.getGodEquipStoneVO(o.val),a.push(n.type);var r,h,u=[];for(var c in st.GOODS_TYPE_GODEQUIP_STONES)r=st.GOODS_TYPE_GODEQUIP_STONES[c],u=u.concat(xo.getGoodsByGoodsType(r));var d=[];if(u&&0<u.length){var p;for(var m in u)p=u[m],(h=v.getGodEquipStoneVO(p.typeid))&&-1==a.indexOf(h.type)&&(i.push(h),-1==d.indexOf(h.type)&&h.level==e&&d.push(h.type));a=a.concat(d)}for(var f,_=!1,g=0;g<8;g++){for(var y in a)if(g+1==a[y]){_=!0;break}0==_&&(f=v.getGodEquipStoneVOByTypeAndLv(g+1,e),i.push(f)),_=!1}}return i},v.init=function(){if(!v.has){v.has=!0,v.equips=[],v.stones=[],v.prices=[];var t,e=Ra.startEncode("godEquip.xml");for(var i in e)(t=e[i])instanceof xml.GodEquipVO?v.equips.push(t):t instanceof xml.GodEquipStoneVO?v.stones.push(t):t instanceof xml.GodEquipStoneDisaPriceVO&&v.prices.push(t)}},v.getAllGodEquip=function(){return v.init(),v.equips},v.getGodEquipVOByIndex=function(t){return v.init(),v.equips[t]},v.getGodEquipVOByID=function(t){var e;for(var i in v.init(),v.equips)if((e=v.equips[i]).id==t)return e;return null},v.getMaxStep=function(t){v.init();var e=v.getGodEquipVOByID(t);return e?e.maxLv:0},v.getGodEquipStoneVO=function(t){var e;for(var i in v.init(),v.stones)if((e=v.stones[i]).id==t)return e;return null},v.getGodEquipStoneDisaPriceVO=function(t){var e;for(var i in v.init(),v.prices)if((e=v.prices[i]).level==t)return e;return null},v.getGodEquipStoneTypeById=function(t){var e;for(var i in v.init(),v.stones)if((e=v.stones[i]).id==t)return e.type;return 0},v.getGodEquipStoneVOByIdAndLv=function(t,e){v.init();var i,s=v.getGodEquipStoneTypeById(t);for(var n in v.stones)if((i=v.stones[n]).type==s&&i.level==e)return i;return null},v.getGodEquipStoneVOByTypeAndLv=function(t,e){var i;for(var s in v.init(),v.stones)if((i=v.stones[s]).type==t&&i.level==e)return i;return null},v.checkStoneHightLevelIsExist=function(t){var e=Math.floor(t/1e3),i=v.getGodEquipStoneVO(t);if(i){var s,n,o=xo.getGoodsByGoodsType(e);for(var a in o)if(n=o[a],(s=v.getGodEquipStoneVO(n.typeid))&&s.level>i.level)return!0}return!1},v.getStoneBgUrl=function(t){var e="";switch(t){case 1:e="modules/exercise/stoneBg1.png";break;case 2:e="modules/exercise/stoneBg2.png";break;case 3:case 4:e="modules/exercise/stoneBg3.png";break;case 5:case 6:e="modules/exercise/stoneBg4.png";break;case 7:case 8:e="modules/exercise/stoneBg5.png";break;case 9:e="modules/exercise/stoneBg6.png"}return e},v.checkGodEquipStoneRP=function(){var t,e=!1;for(var i in v._equipData)t=v._equipData[i],v.checkEquipStoneRP(t.id)&&(e=!0,Nt.show("RP_EXERCISE_GODEQUIP_STONE"));0==e&&Nt.hide("RP_EXERCISE_GODEQUIP_STONE")},v.checkEquipStoneRP=function(t){var e=v.getEquipData(t);if(e)for(var i=0;i<8;i++)if(0!=v.checkEquipStonePartRP(i+1,e))return!0;return!1},v.checkEquipStonePartRP=function(t,e){var i,s,n=!1;for(var o in e.stone)if((s=e.stone[o]).id==t){if(n=!0,(i=modules.exercise.godEquip.ExerGodEquipMgr.getGodEquipStoneVO(s.val))&&9==i.level)return 0;if(v.checkStoneHightLevelIsExist(i.id))return 2;if(v.checkStoneCanUp(i.id))return 3}if(0==n){var a=v.getGodEquipVOByID(e.id);if(a){var l=Math.floor(a.conditionList[t-1]);if(e.level>=l&&v.checkIsHasStoneCanInlay(e.stone))return 1}}return 0},v.checkStoneCanUp=function(t){var e=Math.floor(t/1e3),i=v.getGodEquipStoneVO(t);if(i){var s,n,o=xo.getGoodsByGoodsType(e);for(var a in o){if(n=o[a],(s=v.getGodEquipStoneVO(n.typeid))&&s.level==i.level)if(3<=xo.getGoodsNumByType(xo.GOODS_ID,t))return!0}}return!1},v.checkIsHasStoneCanInlay=function(t){var e,i=[];for(var s in st.GOODS_TYPE_GODEQUIP_STONES)e=st.GOODS_TYPE_GODEQUIP_STONES[s],i=i.concat(xo.getGoodsByGoodsType(e));var n,o=0,a=!1;for(var l in i){var r;for(var h in n=i[l],a=!1,o=Math.floor(n.typeid/1e3),t)if(r=t[h],o==Math.floor(r.val/1e3)){a=!0;break}if(0==a)return!0}return!1},v._equipData=null,v.curStoneData=null,v.curGodEquipVO=null,v.curEquipIndex=0,v.curStonePart=1,v.curUpTarStoneVO=null,v.curViewTabIndex=0,v.curGodEquipID=0,v.has=!1,v.equips=null,v.stones=null,v.prices=null,v}()),gn=function(){function t(){}return w(t,"modules.exercise.godEquip.ExerGodEquipUtil"),t.getAttrStr=function(t,e){var i,s=W.parseAttrToArr(t,",","|"),n="";for(var o in s)i=s[o],n+=W.getName(i[0])+" +"+parseInt(i[1])*e+"\n";return n},t.getAttrPower=function(t,e,i){var s,n=W.parseAttrToArr(t,",","|"),o=0;for(var a in n)s=n[a],o+=W.getAttrPower(parseInt(s[0]),parseInt(s[1]));return(Math.floor(o)+Math.max(i,0))*e},t.checkOneNeedRP=function(t){var e,i=0,s=0,n=_n.getStep(t.id);return 0<n?(e=W.parseAttrToArr(t.need,",","|"))&&(i=xo.getGoodsNumByType(xo.GOODS_ID,e[0][0]),s=parseInt(e[0][1])):(i=xo.getGoodsNumByType(xo.GOODS_ID,t.id),s=1),n!=t.maxLv&&s<=i},t.checkActRP=function(t){return 0==_n.getStep(t.id)&&0<xo.getGoodsNumByType(xo.GOODS_ID,t.id)},t.checkGodEquipLvUpRP=function(t){var e,i=0,s=0,n=_n.getStep(t.id);return 0<n&&((e=W.parseAttrToArr(t.need,",","|"))&&(i=xo.getGoodsNumByType(xo.GOODS_ID,e[0][0]),s=parseInt(e[0][1])),n!=t.maxLv&&s<=i)},t}(),yn=function(){function h(){}return w(h,"modules.exercise.knighthood.ExerKnighthoodManager"),h.initXml=function(){null==h.knighthoodVO&&(h.knighthoodVO=Ra.startEncode("knighthood.xml")[0])},h.getKnighthoodVO=function(){return h.initXml(),h.knighthoodVO},h.getKnighthoodLevelVO=function(t){var e;for(var i in h.initXml(),h.knighthoodVO.KnighthoodLevelArr)if(t==(e=h.knighthoodVO.KnighthoodLevelArr[i]).lv)return e;return null},h.getKnighthoodCondictionVO=function(t){var e;for(var i in h.initXml(),h.knighthoodVO.KnighthoodConditionArr)if(t==(e=h.knighthoodVO.KnighthoodConditionArr[i]).id)return e;return null},h.checkRedPoint=function(){if(h.infoToc||0<h.infoToc.condition.length){var t=h.getKnighthoodLevelVO(h.infoToc.level);if(t){var e,i,s=t.condictions.split(","),n=s.length,o=0;for(var a in s){var l;for(var r in i=s[a],e=h.getKnighthoodCondictionVO(i),o=Math.floor(i/1e4),h.infoToc.condition)if((l=h.infoToc.condition[r]).id==o&&l.val>=e.num){n--;break}}0==n?Nt.show("RP_EXERCISE_KNIGHTHOOD"):Nt.hide("RP_EXERCISE_KNIGHTHOOD")}else Nt.hide("RP_EXERCISE_KNIGHTHOOD")}else Nt.hide("RP_EXERCISE_KNIGHTHOOD")},h.knighthoodVO=null,h.infoToc=null,h}(),vn=function(){function a(){}return w(a,"modules.exercise.meridian.MeridianMgr"),I(1,a,"maxType",function(){return a.init(),a.baseVO?a.baseVO.maxType:0}),I(1,a,"maxPoint",function(){return a.init(),a.baseVO?a.baseVO.maxPoint:0}),I(1,a,"isMaxLv",function(){return a.maxLv<=a.curLv}),I(1,a,"maxLv",function(){return a.init(),a.baseVO?a.baseVO.maxLv:0}),a.init=function(){if(!a._has){a._has=!0,a.typeDic={},a.pointDic=[],a.needVOs=[];var t,e=Ra.startEncode("meridian.xml");for(var i in e)(t=e[i])instanceof xml.MeridianBaseVO?a.baseVO=t:t instanceof xml.MeridianTypeVO?a.typeDic[t.type]=t:t instanceof xml.MeridianPointVO?a.pointDic.push(t):t instanceof xml.MeridianNeedVO&&a.needVOs.push(t)}},a.getAllAttrs=function(){a.init(),a.curLvAllAttrs={};var t,s,e=In.getStepByLv(a.curLv),i=In.getCurLightIndexByLv(a.curLv);if(0<e)for(var n=0;n<a.maxPoint;n++)(t=a.pointDic[n])&&o(t.getAllAttrs(e));for(n=0;n<=i;n++)(t=a.pointDic[n])&&o(t.getStepAttrs(e+1));return a.curLvAllAttrs;function o(t){var e;for(var i in t)e=t[i],(s=a.curLvAllAttrs[e[0]])?s.val+=e[1]:((s=new Object).className="p_kv",s.id=e[0],s.val=e[1],a.curLvAllAttrs[s.id]=s)}},a.getCostByLv=function(t){var e;for(var i in a.init(),a.needVOs)if((e=a.needVOs[i]).isLv(t))return e.getNeedByLv(t);return 0},a.getTypeVO=function(t){return a.init(),a.typeDic[t]},a.getPointVO=function(t){return a.init(),a.pointDic[t]},a.baseVO=null,a.needVOs=null,a.typeDic=null,a.pointDic=null,a.curLvAllAttrs=null,a.curLv=0,a.curCopyTime=0,a.isGetReward=!1,a._has=!1,_(a,["attrKeys",function(){return this.attrKeys=[49,11,13,14]}]),a}(),In=function(){function t(){}return w(t,"modules.exercise.meridian.MeridianUtil"),t.getStepByLv=function(t){return 0==t?0:Math.floor((t-1)/vn.maxPoint)},t.getTypeByStep=function(t){return t%vn.maxType},t.getCurLightIndexByLv=function(t){return 0==t?-1:(t-1)%vn.maxPoint},t.checkAllRP=function(){t.checkCanReward(),t.checkCanUp()},t.checkCanReward=function(){10<=vn.curCopyTime&&!vn.isGetReward?Nt.show("RP_MERIDIAN_REWARD"):Nt.hide("RP_MERIDIAN_REWARD")},t.checkCanUp=function(){var t=pe.getScore(18);vn.getCostByLv(vn.curLv)<=t&&!vn.isMaxLv?Nt.show("RP_MERIDIAN_UP"):Nt.hide("RP_MERIDIAN_UP")},t}(),wn=function(){function t(){}return w(t,"modules.exercise.pearl.ExerPearlConst"),_(t,["PEARL_ICON_POSS",function(){return this.PEARL_ICON_POSS=[{x:15,y:7},{x:84,y:110},{x:172,y:31},{x:251,y:61},{x:304,y:136},{x:383,y:122},{x:418,y:20},{x:470,y:87},{x:521,y:23},{x:619,y:23}]},"PEARL_ICON_TYPE_INFOS",function(){return this.PEARL_ICON_TYPE_INFOS=[0,1,0,0,0,1,0,1,1,0]}]),t}(),bn=function(){function n(){}return w(n,"modules.exercise.pearl.ExerPearlManager"),I(1,n,"infoToc",function(){return n._infoToc},function(t){n._infoToc=t,n.initXml()}),I(1,n,"isUpSuccess",function(){return n._isUpSuccess},function(t){(n._isUpSuccess=t)&&_t.setTimeout(n,n.timeOutReset,null,1e3)}),n.initXml=function(){null==n._pearlVO&&(n._pearlVO=Ra.startEncode("pearl.xml")[0])},n.getPearlVO=function(){return n.initXml(),n._pearlVO},n.getPearlLevelVO=function(t){var e;for(var i in n.initXml(),n._pearlVO.PearlLevelArr)if((e=n._pearlVO.PearlLevelArr[i]).lv==t)return e;return null},n.getPearlSkillVO=function(t){var e;for(var i in n.initXml(),n._pearlVO.PearlSkillArr)if((e=n._pearlVO.PearlSkillArr[i]).lv==t)return e;return null},n.getMissionById=function(t){var e;for(var i in n.infoToc.missions)if((e=n.infoToc.missions[i]).id==t)return e;return null},n.findMissionById=function(t){var e,i,s=modules.exercise.pearl.ExerPearlManager.getPearlVO();if(s)for(var n in s.PearlMissionArr)(i=s.PearlMissionArr[n])&&i.id==t&&(e=i);return e},n.checkFamilySkillHasData=function(){return!!Dn.isHasSkillDic()},n.getListShowDatas=function(){var t=n.filtrateMission(n._pearlVO.PearlMissionArr);return n.replaceMission(t).sort(n.sortMission)},n.replaceMission=function(t){var e;if(Os.isMaxBarrier(Os.curBarrier))for(var i=0;i<t.length;i++)8==(e=t[i]).id&&(t[i]=modules.exercise.pearl.ExerPearlManager.findMissionById(e.replaceId));if(n.isRoleFamilySkillLvMax())for(var s=0;s<t.length;s++)9==(e=t[s]).id&&(t[s]=modules.exercise.pearl.ExerPearlManager.findMissionById(e.replaceId));return t},n.filtrateMission=function(t){var e=[];if(9<t.length)for(var i=0;i<9;i++)e.push(t[i]);else e=t;return e},n.sortMission=function(t,e){var i=modules.exercise.pearl.ExerPearlManager.getMissionById(t.id),s=modules.exercise.pearl.ExerPearlManager.getMissionById(e.id);return i?s?i.val==t.times&&s.val!=e.times?1:i.val!=t.times&&s.val==e.times?-1:0:i.val==t.times?1:(i.val,t.times,0):s&&s.val==e.times?-1:0},n.isRoleFamilySkillLvMax=function(){var t=!0;if(4==pe.pals.length)for(var e=0;e<4;e++){var i=0,s=pe.getPalByIndex(e);if(s&&s.pal_id){i=pe.getPalByIndex(e).pal_id;var n=Dn.getFamilySkillInfo(i);if(n&&5==n.length)for(var o=0;o<5;o++){var a=n[o];switch(a.id){case 1:case 2:case 3:a.lv<200&&(t=!1);break;case 4:case 5:a.lv<20&&(t=!1)}}else t=!1}else t=!1}else t=!1;return t},n.checkRedPoint=function(){if(n.initXml(),n.infoToc){var t=n.getPearlLevelVO(n.infoToc.level);t&&(n.infoToc.exp>=t.exp||Math.floor(n.infoToc.level/10)>n.infoToc.pearl_skill_level)?Nt.show("RP_EXERCISE_PEARL"):Nt.hide("RP_EXERCISE_PEARL")}else Nt.hide("RP_EXERCISE_PEARL")},n.timeOutReset=function(){n._isUpSuccess=!1},n._infoToc=null,n._pearlVO=null,n._isUpSuccess=!1,n.doPearlToInfo=!1,n}(),Sn=function(){function t(){}return w(t,"modules.exercise.rune.RuneConst"),_(t,["MAIN_ICON_POS",function(){return this.MAIN_ICON_POS=[{x:29,y:135},{x:85,y:274},{x:85,y:414},{x:29,y:553},{x:579,y:135},{x:525,y:274},{x:525,y:414},{x:579,y:553}]},"TOTAL_ATTR_KEYS",function(){return this.TOTAL_ATTR_KEYS=[11,49,13,14]}]),t}(),xn=function(){function _(){}return w(_,"modules.exercise.rune.RuneMgr"),I(1,_,"palInfos",function(){return _._palInfos},function(t){_._palInfos=t}),I(1,_,"bagList",function(){return _._bagList},function(t){_._bagList=t}),I(1,_,"baseVO",function(){return _.initXml(),_._baseVO}),_.checkAllRuneLevelIsMatch=function(t,e){var i=_.getPalInfoById(t);if(i){for(var s,n=0;n<8;n++)if(null==(s=_.getPalInfoRuneByPos(i,n+1))||s.level<e)return!1;return!0}return!1},_.getInlayRunesByPal=function(t){var e=[],i=_.getPalInfoById(t);if(i)for(var s,n,o,a=0;a<8;a++)(s=_.getBestRuneByPos(a+1))&&((o=_.getPalInfoRuneByPos(i,a+1))&&(n=_.getRuneVOById(o.rune_id))?s.star>n.star&&e.push(s.id):e.push(s.id));return e},_.getPalInfoRuneByPos=function(t,e){var i;for(var s in t.runes)if((i=t.runes[s]).pos==e)return i;return null},_.getBestRuneByPos=function(t){var e,i,s;for(var n in _._bagList)s=_._bagList[n],(i=_.getRuneVOById(s.id))&&i.part==t&&(e=e||i,i.star>e.star&&(e=i));return e},_.getSelResolveShowInfo=function(t){var e,i,s=[],n=!1;for(u in t){var o;for(o in e=t[u],n=!1,s)if((i=s[o]).typeid==e.typeid){i.current_num+=e.current_num,n=!0;break}0==n&&((a=new Object).className="p_goods",a.typeid=e.typeid,a.current_num=e.current_num,s.push(a))}var a,l,r=[];for(var h in _._bagList){var u;for(u in l=_._bagList[h],n=!1,s)if(e=s[u],l.id==e.typeid){var c=l.val-e.current_num;if(0<c)for(var d=0;d<c;d++)(a=new Object).className="p_goods",a.typeid=l.id,a.current_num=1,r.push(a);n=!0;break}if(0==n)for(var p=0;p<l.val;p++)(a=new Object).className="p_goods",a.typeid=l.id,a.current_num=1,r.push(a)}return r},_.getResolveShowInfos=function(t){void 0===t&&(t=9);var e,i,s,n,o,a=[],l=0;for(var r in _._bagList){var h;if(o=_._bagList[r],l=0,e=_.getRuneVOById(o.id))for(var u in _._palInfos)h=_._palInfos[u],(n=_.getPRuneByPos(e.part,h.runes))?(i=_.getRuneVOById(n.rune_id))&&e.star>i.star&&l++:l++;if(o.val>l&&((s=new Object).className="p_goods",s.typeid=o.id,s.current_num=o.val-l,a.push(s),0<t&&a.length==t))break}return a},_.getPRuneByPos=function(t,e){var i;for(var s in e)if((i=e[s]).pos==t)return i;return null},_.updateByLoadBlock=function(t,e,i){var s,n=_.getPalInfoById(t);if(n)for(var o in n.runes)if((s=n.runes[o]).pos==e){s.block=i;break}},_.updateByActive=function(t,e){var i=_.getPalInfoById(t);if(i){var s,n,o,a=!1;for(var l in e)if(o=e[l],s=_.getRuneVOById(o)){var r;for(var h in i.runes)if((r=i.runes[h]).pos==s.part){r.rune_id=o,a=!0;break}0==a&&((n=new Object).className="p_rune",n.rune_id=o,n.pos=s.part,n.level=0,n.block=0,i.runes=i.runes||[],i.runes.push(n)),a=!1}}},_.bagUpdate=function(t,e){_._bagList=_._bagList||[];var i,s,n,o=!1;for(var a in t){var l;for(var r in i=t[a],_._bagList)if((l=_._bagList[r]).id==i.id){o=!0,l.val+=i.val;break}0==o?_._bagList.push(i):o=!1}for(var h in e){n=e[h];for(var u=_._bagList.length-1;0<=u;u--)if((s=_._bagList[u]).id==n.id){s.val-=n.val,s.val<=0&&_._bagList.splice(u,1);break}}},_.updatePalInfoByCoreUpgrade=function(t,e){var i=_.getPalInfoById(t);i&&(i.core_level=e)},_.updatePalInfoByRuneUpgrade=function(t,e,i){var s,n=_.getPalInfoById(t);if(n)for(var o in n.runes)if((s=n.runes[o]).pos==e){s.level=i;break}},_.getPalInfoById=function(t){var e;for(var i in _._palInfos)if((e=_._palInfos[i]).pal_id==t)return e;return null},_.getRuneByPalIdAndPos=function(t,e){var i=_.getPalInfoById(t);if(i)for(var s,n=0;n<i.runes.length;n++)if((s=i.runes[n])&&s.pos==e)return s;return null},_.getRuneTotalAttr=function(t){for(var e=[],i=0;i<Sn.TOTAL_ATTR_KEYS.length;i++)e[i]={key:Sn.TOTAL_ATTR_KEYS[i],val:0};var s=_.getPalInfoById(t);if(s){var n,o,a=1,l=_.getRuneCoreVO(s.core_level);if(l)for(var r in l.attrDatas)n=l.attrDatas[r],_.addAttr(n,e,a);l&&(a+=.01*l.spcAttr);var h,u=[];for(var c in s.runes)if(h=s.runes[c],o=_.getRuneVOById(h.rune_id)){var d,p;for(var m in o.baseAttrList)d=o.baseAttrList[m],_.addAttr(d,e,a);for(var f in u=_.getRunePartAttrs(o.part,h.level))p=u[f],_.addAttr(p,e,a)}}return e},_.addAttr=function(t,e,i){var s;for(var n in e)if(s=e[n],t.key==s.key){s.val+=Math.floor(t.val*i);break}},_.getRunePartAttrs=function(t,e){var i=[],s=_.getRunePartVO(t);if(s)for(var n=0;n<s.attrKeyList.length;n++)i.push({key:s.attrKeyList[n],val:s.attrBaseList[n]+s.attrDifferList[n]*e});return i},_.initXml=function(){if(0==_.isInit){_.isInit=!0,_._runeVOs=[],_._runePartVOs=[],_._runeCoreVOs=[],_._runeStoneVOs=[];var t,e=Ra.startEncode("rune.xml");for(var i in e)(t=e[i])instanceof xml.RuneBaseVO?_._baseVO=t:t instanceof xml.RuneVO?_._runeVOs.push(t):t instanceof xml.RunePartVO?_._runePartVOs.push(t):t instanceof xml.RuneCoreVO?_._runeCoreVOs.push(t):t instanceof xml.RuneStoneVO&&_._runeStoneVOs.push(t)}},_.getRuneVOById=function(t){var e;for(var i in _.initXml(),_._runeVOs)if((e=_._runeVOs[i]).id==t)return e;return null},_.getRuneCoreVO=function(t){var e;for(var i in _.initXml(),_._runeCoreVOs)if((e=_._runeCoreVOs[i]).level==t)return e;return null},_.getRunePartVO=function(t){var e;for(var i in _.initXml(),_._runePartVOs)if((e=_._runePartVOs[i]).id==t)return e;return null},_.getRuneStoneVO=function(t){var e;for(var i in _.initXml(),_._runeStoneVOs)if((e=_._runeStoneVOs[i]).typeId==t)return e;return null},_._bagList=null,_.freeTime=NaN,_._palInfos=null,_.curPalId=0,_.curPRune=null,_.isInit=!1,_._baseVO=null,_._runeVOs=null,_._runePartVOs=null,_._runeCoreVOs=null,_._runeStoneVOs=null,_}(),Cn=function(){function o(){}return w(o,"modules.exercise.rune.RuneUtil"),o.checkAllRP=function(){o.checkRPInlay(),o.checkAllPalHeadRP(),o.checkRPRuneUp(),o.checkRPRuneCoreCanUp(),o.checkRPStoneInlay(),o.checkRPRuneResolve(),o.checkRPRuneFreeGetScore()},o.checkRPInlay=function(){var t,e=0;for(var i in xn.palInfos){t=xn.palInfos[i];for(var s=0;s<8;s++)if(e=s+1,o.checkRuneCanInlayByPal(t.runes,e)&&!ha.checkIsPing2(4,t.pal_id,2))return void Nt.show("RP_RUNE_CAN_INLAY")}Nt.hide("RP_RUNE_CAN_INLAY")},o.checkRuneCanInlayByPal=function(t,e){var i,s=!1;for(var n in t)if((i=t[n]).pos==e)return s=!0,!!o.checkRuneCanInlayByRuneId(i.rune_id);return!(0!=s||!o.checkRuneCanInlayByPos(e))},o.checkRuneCanInlayByRuneId=function(t){var e,i,s=xn.getRuneVOById(t);for(var n in xn.bagList)if(i=xn.bagList[n],e=xn.getRuneVOById(i.id),s&&e&&s.part==e.part&&e.star>s.star)return!0;return!1},o.checkRuneCanInlayByPos=function(t){var e,i;for(var s in xn.bagList)if(i=xn.bagList[s],(e=xn.getRuneVOById(i.id))&&e.part==t)return!0;return!1},o.checkAllPalHeadRP=function(){var t,e=0;for(var i in xn.palInfos)t=xn.palInfos[i],e=pe.getPalIndexByID(t.pal_id),o.checkPalRuneCoreCanUp(t)&&!ha.checkIsPing2(4,t.pal_id,1)?Nt.show("RP_RUNE_HEAD_ITEM_"+e):o.checkPalAllPosCanInlay(t)&&!ha.checkIsPing2(4,t.pal_id,2)?Nt.show("RP_RUNE_HEAD_ITEM_"+e):o.checkPalCanUp(t)&&!ha.checkIsPing2(4,t.pal_id,0)?Nt.show("RP_RUNE_HEAD_ITEM_"+e):o.checkPalCanInlayStone(t)&&!ha.checkIsPing2(4,t.pal_id,3)?Nt.show("RP_RUNE_HEAD_ITEM_"+e):Nt.hide("RP_RUNE_HEAD_ITEM_"+e)},o.checkPalCanUp=function(t){var e;for(var i in t.runes)if(e=t.runes[i],o.checkRuneIsCanUp(e.rune_id,e.level))return!0;return!1},o.checkPalAllPosCanInlay=function(t){for(var e=0,i=0;i<8;i++)if(e=i+1,o.checkRuneCanInlayByPal(t.runes,e))return!0;return!1},o.checkRPRuneUp=function(){var t;for(var e in xn.palInfos){var i;for(var s in(t=xn.palInfos[e]).runes)if(i=t.runes[s],o.checkRuneIsCanUp(i.rune_id,i.level)&&!ha.checkIsPing2(4,t.pal_id,0))return void Nt.show("RP_RUNE_CAN_UP")}Nt.hide("RP_RUNE_CAN_UP")},o.checkRuneIsCanUp=function(t,e){if(e<xn.baseVO.runeMaxLevel){var i=pe.getScore(8),s=xn.getRuneVOById(t);if(s){var n=xn.getRunePartVO(s.part);if(n)if(n.costBase+n.costDiffer*e<=i)return!0}}return!1},o.checkPalRuneCoreCanUp=function(t){if(t&&t.core_level<xn.baseVO.coreMaxLevel){var e,i=pe.getScore(8);e=xn.getRuneCoreVO(t.core_level);var s=xn.getRuneCoreVO(t.core_level+1);if(e&&s&&Ho.curCityLv>=Math.floor(e.conditions[0])&&xn.checkAllRuneLevelIsMatch(t.pal_id,Math.floor(e.conditions[1]))&&i>=s.cost)return!0}return!1},o.checkRPRuneCoreCanUp=function(){var t,e,i=pe.getScore(8);for(var s in xn.palInfos){if((e=xn.palInfos[s]).core_level==xn.baseVO.coreMaxLevel)break;t=xn.getRuneCoreVO(e.core_level);var n=xn.getRuneCoreVO(e.core_level+1);if(t&&n&&Ho.curCityLv>=Math.floor(t.conditions[0])&&xn.checkAllRuneLevelIsMatch(e.pal_id,Math.floor(t.conditions[1]))&&i>=n.cost&&!ha.checkIsPing2(4,e.pal_id,1))return void Nt.show("RP_RUNE_CORE_CAN_UP")}Nt.hide("RP_RUNE_CORE_CAN_UP")},o.checkRPRuneResolve=function(){9==xn.getResolveShowInfos().length?Nt.show("RP_RUNE_PACK"):Nt.hide("RP_RUNE_PACK")},o.checkRPRuneFreeGetScore=function(){0<xn.freeTime?Nt.show("RP_RUNE_FREE_GET_SCORE"):Nt.hide("RP_RUNE_FREE_GET_SCORE")},o.checkRuneStoneCanInlay=function(t){var e=xo.getGoodsByGoodsType(10402);if(null==e||0==e.length)return!1;if(0==t){if(e&&0<e.length)return!0}else{var i,s,n=xn.getRuneStoneVO(t),o=Math.floor(t/100);if(n)for(var a in e)if(s=e[a],o==Math.floor(s.typeid/100)&&(i=xn.getRuneStoneVO(s.typeid))&&i.character>n.character)return!0}return!1},o.checkPalCanInlayStone=function(t){var e=xo.getGoodsByGoodsType(10402);if(e&&0<e.length){var i,s,n,o=0;for(var a in t.runes){var l;if(n=t.runes[a],s=xn.getRuneStoneVO(n.block)){for(var r in o=Math.floor(n.block/100),e)if(l=e[r],o==Math.floor(l.typeid/100)&&(i=xn.getRuneStoneVO(l.typeid))&&i.character>s.character)return!0}else if(e&&0<e.length)return!0}return!1}return!1},o.checkRPStoneInlay=function(){var t=xo.getGoodsByGoodsType(10402);if(t&&0<t.length){var e,i,s,n=0;for(var o in xn.palInfos){var a;for(var l in(s=xn.palInfos[o]).runes)if(a=s.runes[l],i=xn.getRuneStoneVO(a.block)){var r;for(var h in n=Math.floor(a.block/100),t)if(r=t[h],n==Math.floor(r.typeid/100)&&(e=xn.getRuneStoneVO(r.typeid))&&e.character>i.character&&!ha.checkIsPing2(4,s.pal_id,3))return void Nt.show("RP_RUNE_INLAY_STONE");Nt.hide("RP_RUNE_INLAY_STONE")}else if(t&&0<t.length&&!ha.checkIsPing2(4,s.pal_id,3))return void Nt.show("RP_RUNE_INLAY_STONE")}}else Nt.hide("RP_RUNE_INLAY_STONE")},o}(),Pn=function(){function t(){}return w(t,"modules.exercise.spiriTreasure.SpiriTreConst"),_(t,["SPIRITRE_ATT1",function(){return this.SPIRITRE_ATT1=["生命","攻击","物防","法防"]},"SPIRITRE_ATT2",function(){return this.SPIRITRE_ATT2=["冰攻","火攻","雷攻","毒攻"]},"SPIRITRE_SUITARR",function(){return this.SPIRITRE_SUITARR=["青丘套装","九黎套装","羲和套装","菩提套装","无间套装"]},"SPIRITRE_ADVANCE",function(){return this.SPIRITRE_ADVANCE=["中品","良品","上品","极品"]}]),t}(),Tn=function(){function u(){}return w(u,"modules.exercise.spiriTreasure.SpiriTreMgr"),I(1,u,"decompArr",function(){return u._decompArr}),I(1,u,"sortArr",function(){return u._sortArr}),I(1,u,"sortArr2",function(){return u._sortArr2}),I(1,u,"bagData",null,function(t){u._infoArrOff=t&&0<t.length?t.sort(u.sortBySuitAndPos):[]}),I(1,u,"curSuitId",function(){return u._curSuitId},function(t){u._curSuitId=t}),I(1,u,"infoArrOff",function(){return u._infoArrOff&&0<u._infoArrOff.length?u._infoArrOff:[]}),I(1,u,"SuitNum",function(){return u.init(),u._suitNum}),I(1,u,"selectArr",function(){return u._selectArr}),I(1,u,"infoOnArr",function(){return u._infoOnArr?u._infoOnArr.getArr():null}),u.init=function(){if(!u.spiritreVOs){u.spiritreVOs={},u.spiritreQuVOs=[],u.spiritreAdconVOs=[],u.spiritreQuconVOs=[],u.spiritreDecompVOs=[],u.spiritreDesVos=[],u.spiritreSuitVos=[],u.spiritreAttXVos=[],u.spiritreNameVos={},u.spiritreAllNameVos={},u._suitNum=0;var t,e=Ra.startEncode("spiriTre.xml");for(var i in e)(t=e[i])instanceof xml.SpiritreVO?u.spiritreVOs[t.id]=t:t instanceof xml.SpiritreAdConVO?u.spiritreAdconVOs[t.level]=t:t instanceof xml.SpiritreQuVO?u.spiritreQuVOs[t.pos]=t:t instanceof xml.SpiritreQuProVO?u.spiritreQuProVO=t:t instanceof xml.SpiritreQuconVO?u.spiritreQuconVOs[t.level]=t:t instanceof xml.SpiritreDecompVO?u.spiritreDecompVOs[t.level]=t:t instanceof xml.SpiritreDesVO?u.spiritreDesVos[t.suitId]=t:t instanceof xml.SpiritreSuitVO?u.spiritreSuitVos[t.suitId]=t:t instanceof xml.SpiritreAttXVO?u.spiritreAttXVos[t.id]=t:t instanceof xml.SpiritreNameVO&&(u.spiritreNameVos[t.id]=t,u.spiritreAllNameVos[t.id]=t,u._suitNum+=1)}},u.checkSpiriTreRP=function(){if(u._canCheckRp){var t=!1;u.checkAllPalHeadRP()&&(t=!0),u.checkDecompAndRecastRp()?(t=!0,Nt.show("RP_SPIRITRE_DECOMP"),Nt.show("RP_SPIRITRE_RECAST")):(Nt.hide("RP_SPIRITRE_DECOMP"),Nt.hide("RP_SPIRITRE_RECAST")),u.checkAutoSuitRp()&&(t=!0),t?Nt.show("RP_SPIRITRE"):Nt.hide("RP_SPIRITRE")}},u.setSpiriTreInfo=function(t){var e;e=t&&0<t.length?t.sort(u.sortBySuitAndPos2):[],u._infoOnArr?u._infoOnArr.setArr(e):u._infoOnArr=Be.getOne(["pal_id","type_id",["pal_id","pos"]],e)},u.setSort=function(t){if(0==t.length)u._sortArr=[3,2,1],u._sortArr2=[3,2,1],u.autoSuitCheck=!1,u._canCheckRp=!0;else{u._canCheckRp=!0;for(var e=0;e<3;e++){var i=t[e];i&&(u._sortArr[i.id]=i.val)}for(e=3;e<6;e++)(i=t[e])?u._sortArr2[i.id-3]=i.val:u._sortArr2[e-3]=6-e;u.autoSuitCheck=!(!t[6]||1!=t[6].val)}},u.sortBySuitAndPos=function(t,e){var i=u.getSpiritVoById(t.typeid),s=u.getSpiritVoById(e.typeid);return i.suitId==s.suitId?i.pos==s.pos?0:i.pos-s.pos:i.suitId-s.suitId},u.sortBySuitAndPos2=function(t,e){var i=u.getSpiritVoById(t.type_id),s=u.getSpiritVoById(e.type_id);return i.suitId==s.suitId?i.pos==s.pos?0:i.pos-s.pos:i.suitId-s.suitId},u.addToSelectArr=function(t){u._selectArr.push(t)},u.deleteSelectArr=function(t){for(var e=0;e<u._selectArr.length;e++){if(u._selectArr[e].id==t.id)return void u._selectArr.splice(e,1)}},u.resetSelectArr=function(){u._selectArr=[]},u.addToDecompArr=function(t){u._decompArr.push(t)},u.deleteDecompArr=function(t){for(var e=0;e<u._decompArr.length;e++){if(u._decompArr[e].id==t.id)return void u._decompArr.splice(e,1)}},u.resetDecompArr=function(){u._decompArr=[]},u.getSpiritreQuProByLevel=function(t){u.init();for(var e=u.spiritreQuProVO.value.split(","),i=0;i<e.length;i++)if(i==t)return e[i];return 0},u.getSpiritreAdConByLevel=function(t){var e;for(var i in u.init(),u.spiritreAdconVOs)if((e=u.spiritreAdconVOs[i]).level==t)return e.getObj();return null},u.getSpiritreQuConByLevel=function(t){return u.init(),u.spiritreQuconVOs[t]?[u.spiritreQuconVOs[t].id,u.spiritreQuconVOs[t].num]:null},u.getSpiritreQuAtt=function(t,e){if(u.init(),u.spiritreQuVOs[t]){var i=u.spiritreQuVOs[t].att.split(",");return[u.spiritreQuVOs[t].id,parseInt(i[e])]}return null},u.getSpiritreDecomp=function(t){return u.init(),u.spiritreDecompVOs[t]?[u.spiritreDecompVOs[t].id,u.spiritreDecompVOs[t].num]:null},u.getSpiritreDesAtt=function(t){u.init();var e=[];if(u.spiritreDesVos[t])for(var i=u.spiritreDesVos[t].desc.split("|"),s=0;s<i.length;s++){var n=i[s].split(",");e[s]=W.getName(n[0])+"+"+n[1]}return e},u.addAttr=function(t,e,i){i&&(i[t]||(i[t]=0),i[t]+=e)},u.getSpiritreDesAttToPower=function(t){var e={};if(u.spiritreDesVos[t])for(var i=u.spiritreDesVos[t].desc.split("|"),s=0;s<i.length;s++){var n=i[s].split(",");u.addAttr(n[0],n[1],e)}return e},u.getPowerByDes=function(t){u.init();var e=u.getSpiritreDesAttToPower(t),i=0;if(e)for(var s in e)i+=W.getAttrPower(parseInt(s),parseInt(e[s]));return Math.floor(i)},u.getSpiriTreDesVo=function(){return u.init(),u.spiritreDesVos[u.curSuitId]?u.spiritreDesVos[u.curSuitId]:null},u.getSpiritreSuitAtt=function(t){u.init();var e=[];if(u.spiritreSuitVos[t])for(var i=u.spiritreSuitVos[t].desc.split("|"),s=0;s<i.length;s++){var n=i[s].split(",");e[s]=W.getName(n[0])+"+"+n[1]}return e},u.getSpiritreSuitAttToPower=function(t){var e={};if(u.spiritreDesVos[t])for(var i=u.spiritreDesVos[t].desc.split("|"),s=0;s<i.length;s++){var n=i[s].split(",");u.addAttr(n[0],n[1],e)}return e},u.getPowerBySuit=function(t){u.init();var e=u.getSpiritreSuitAttToPower(t),i=0;if(e)for(var s in e)i+=W.getAttrPower(parseInt(s),parseInt(e[s]));return Math.floor(i)},u.getSpiriTreSuitVo=function(){return u.init(),u.spiritreSuitVos[u.curSuitId]?u.spiritreSuitVos[u.curSuitId]:null},u.getLingBaoByPal=function(t){void 0===t&&(t=modules.exercise.spiriTreasure.SpiriTreMgr.curPalId),u.init();return u._infoOnArr?u._infoOnArr.getData("pal_id",t):[]},u.getNumBySuitAndPal=function(t,e){void 0===e&&(e=modules.exercise.spiriTreasure.SpiriTreMgr.curPalId),u.init();var i=u.getLingBaoByPal(e),s=[];if(i&&0<i.length)for(var n=0;n<i.length;n++){var o=i[n];u.getSpiritVoById(o.type_id).suitId==t&&s.push(o)}return s.length},u.getAttXByAttId=function(t){var e;if(u.init(),u.spiritreAttXVos&&0<u.spiritreAttXVos.length)for(var i in u.spiritreAttXVos)if((e=u.spiritreAttXVos[i]).id==t)return e.val;return 0},u.getSuitNameById=function(t){return u.init(),u.spiritreNameVos[t]?u.spiritreNameVos[t].suitname:null},u.getALLSuitNameByStr=function(){u.init();var t,e="",i=[];for(var s in u.spiritreNameVos)t=u.spiritreNameVos[s],i.push(t.suitname);for(var n=0;n<i.length;n++)e+=i[n],n!=i.length-1&&(e+=",");return e},u.sortFn=function(t,e){var i=kn.allLevel(t)*u.weightArr[3-u._curSortArr[0]],s=kn.allLevel(e)*u.weightArr[3-u._curSortArr[0]],n=kn.hasAtt(t)*u.weightArr[3-u._curSortArr[1]],o=kn.hasAtt(e)*u.weightArr[3-u._curSortArr[1]],a=n+kn.hasSlot(t)*u.weightArr[3-u._curSortArr[2]]+i,l=o+kn.hasSlot(e)*u.weightArr[3-u._curSortArr[2]]+s;return a!=l?l<a?-1:1:0},u.getSortedArr=function(t,e){void 0===e&&(e=void 0);var i=e?e[0]:u._sortArr[0],s=e?e[1]:u._sortArr[1],n=e?e[2]:u._sortArr[2];return u._curSortArr=[i,s,n],t=t.sort(u.sortFn),u.hasSort=[!1,!1,!1],t},u.getOneSpiriTreInfo=function(t,e,i){if(u._infoOnArr){var s,n=u._infoOnArr.getData(["pal_id","pos"],[t,e]);if(n)for(var o in n)if(s=n[o],u.getSpiritVoById(s.type_id).suitId==i)return s}return null},u.getSpiritVoById=function(t){return u.init(),u.spiritreVOs[t]},u.checkQuenchRp=function(t){if(!t)return!1;var e=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritreQuConByLevel(t.refine_star+1);return!!(e&&0<e.length)&&xo.getGoodsNumByType(xo.GOODS_ID,e[0])>=e[1]},u.checkAdvanceRp=function(t){if(!t)return!1;var e=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritreAdConByLevel(t.purify_level+1);if(e){var i=xo.getGoodsNumByType(xo.GOODS_ID,e.ids[0]),s=xo.getGoodsNumByType(xo.GOODS_ID,e.ids[1]);return i>=e.nums[0]&&s>=e.nums[1]}return!1},u.checkInlayRp=function(t){if(!t)return!1;if(0==t.slot_prop.length&&1==t.rand_slot){var e=xo.getGoodsNumByType(xo.GOODS_ID,10700013),i=xo.getGoodsNumByType(xo.GOODS_ID,10700014),s=xo.getGoodsNumByType(xo.GOODS_ID,10700015),n=xo.getGoodsNumByType(xo.GOODS_ID,10700016);return 0<e||0<i||0<s||0<n}return!1},u.checkDecompAndRecastRp=function(){return u._infoArrOff&&100==u._infoArrOff.length},u.checkActivateRp=function(t,e){void 0===t&&(t=u.curPalId),void 0===e&&(e=u.curSuitId);var i=[];if(u.allPalActivateInfo&&u.allPalActivateInfo.target_info){for(var s=0;s<u.allPalActivateInfo.target_info.length;s++)if(u.allPalActivateInfo.target_info[s].pal_id==t){i=u.allPalActivateInfo.target_info[s].target_set;break}var n;for(var o in i)if((n=i[o]).id==e&&1==n.val)return!1}return 8==u.getNumBySuitAndPal(e,t)},u.checkAllSuitQuenchRp=function(t,e){void 0===t&&(t=u.curPalId),void 0===e&&(e=u.curSuitId);var i=[];if(u.allPalActivateInfo&&u.allPalActivateInfo.target_info){for(var s=0;s<u.allPalActivateInfo.target_info.length;s++)if(u.allPalActivateInfo.target_info[s].pal_id==t){i=u.allPalActivateInfo.target_info[s].target_refine;break}for(var n in i)if(i[n].id==e)return!1}return 10==u.getAllLv(t,e)},u.checkAllPalHeadRP=function(){Al.ins().toAllPalSuitActive();var t=!1;u.palRps=modules.exercise.spiriTreasure.SpiriTreMgr.checkCanEquip();var e=0;pe.pals&&(e=pe.pals.length);var i,s=u.infoOnArr;for(var n in s){i=s[n];var o=pe.getPalIndexByID(i.pal_id);1!=u.palRps[o]&&(u.palRps[o]=u.checkQuenchRp(i)||u.checkAdvanceRp(i)||u.checkInlayRp(i))}for(r=0;r<e;r++)if(1!=u.palRps[r])for(var a=1;a<=u._suitNum;a++){var l=pe.getPalByIndex(r);if(u.checkActivateRp(l.pal_id,a)||u.checkAllSuitQuenchRp(l.pal_id,a)){u.palRps[r]=!0;break}}for(var r=0;r<e;r++)Nt.hide("RP_SPIRITRE"+r),1==u.palRps[r]&&(Nt.show("RP_SPIRITRE"+r),t=!0);return t},u.checkAllSuitListRP=function(){var t=pe.getPalIndexByID(u.curPalId);return u.palRps&&1==u.palRps[t]},u.checkSingleSuitListRP=function(t){var e,i=u.getLingBaoByPal();for(var s in i){if(e=i[s],modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritVoById(e.type_id).suitId==t){if(modules.exercise.spiriTreasure.SpiriTreMgr.checkQuenchRp(e)||modules.exercise.spiriTreasure.SpiriTreMgr.checkInlayRp(e)||modules.exercise.spiriTreasure.SpiriTreMgr.checkAdvanceRp(e))return!0;if(u.checkAllSuitQuenchRp(u.curPalId,t)||u.checkActivateRp(u.curPalId,t))return!0}}return!1},u.checkInlaySlot=function(t){return!!t&&0!=t.rand_slot},u.checkCanEquip=function(){var t,e=modules.exercise.spiriTreasure.SpiriTreMgr.infoArrOff,i=[!1,!1,!1,!1];for(var s in e){t=e[s];var n=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritVoById(t.typeid);if(null!=modules.exercise.spiriTreasure.SpiriTreMgr.getSuitNameById(n.suitId))for(var o=0;o<pe.pals.length;o++){var a=pe.getPalByIndex(o);u.getOneSpiriTreInfo(a.pal_id,n.pos,n.suitId)||(i[o]=!0)}}return i},u.checkSingleCanEquipBySuit=function(t){var e,i=modules.exercise.spiriTreasure.SpiriTreMgr.infoArrOff;for(var s in i){e=i[s];var n=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritVoById(e.typeid);if(n.suitId==t&&u.curPalId)if(!u.getOneSpiriTreInfo(u.curPalId,n.pos,t))return!0}return!1},u.checkAutoSuitRp=function(){var t=!1,e=[];if(u.autoSuitCheck)for(var i=0;i<pe.pals.length;i++)for(var s=pe.getPalByIndex(i),n=1;n<=u.SuitNum;n++){u.getSingleCanEquipBySuitID(n,s.pal_id).length&&(t=!0,-1==e.indexOf(i)&&e.push(i))}for(t?Nt.show("RP_SPIRITRE_AUTO_SUIT_"):Nt.hide("RP_SPIRITRE_AUTO_SUIT_"),i=0;i<pe.pals.length;i++)-1!=e.indexOf(i)?(Nt.show("RP_SPIRITRE_AUTO_SUIT_"+i),u.palRps[i]=!0):(Nt.hide("RP_SPIRITRE_AUTO_SUIT_"+i),u.palRps[i]=u.palRps[i]||!1);return T.dispatch("RP_SPIRITRE_AUTO_SUIT_"),t},u.checkBottomTabRP=function(){var t,e=!1,i=u.infoOnArr;for(o=1;o<=u.SuitNum;o++)u.checkSingleCanEquipBySuit(o)&&(e=!0);for(var s in i)if((t=i[s]).pal_id==u.curPalId&&(u.checkQuenchRp(t)||u.checkAdvanceRp(t)||u.checkInlayRp(t))){e=!0;break}if(!e)for(var n=0;n<u.getALLSuitNameByStr().split(",").length;n++)if(u.checkSingleSuitListRP(n)){e=!0;break}if(u.autoSuitCheck&&!e)for(var o=1;o<=u.SuitNum;o++){if(u.getSingleCanEquipBySuitID(o,u.curPalId).length){e=!0;break}}return e?Nt.show("RP_SPIRITRE_BUTTON"):Nt.hide("RP_SPIRITRE_BUTTON"),e},u.checkSpecBottomTabRp=function(){var t,e=!1,i=!1,s=!1,n=u.infoOnArr;for(var o in n)t=n[o],0==e&&t.pal_id==u.curPalId&&(e=u.checkQuenchRp(t)),0==i&&t.pal_id==u.curPalId&&(i=u.checkAdvanceRp(t)),0==s&&t.pal_id==u.curPalId&&(s=u.checkInlayRp(t));e?Nt.show("RP_SPIRITRE_QUENCH"):Nt.hide("RP_SPIRITRE_QUENCH"),i?Nt.show("RP_SPIRITRE_ADVANCE"):Nt.hide("RP_SPIRITRE_ADVANCE"),s?Nt.show("RP_SPIRITRE_INLAY"):Nt.hide("RP_SPIRITRE_INLAY")},u.getSingleCanEquipBySuitID=function(t,e){for(var i=[],s=1;s<=8;s++){var n=u.getOneSpiriTreInfo(e,s,t),o=u.getBetterEquip(s,t,n);if(o){var a=new Object;a.className="p_kv",a.id=o.id,a.val=s,i.push(a)}}return i},u.getBetterEquip=function(i,s,t){var e=modules.exercise.spiriTreasure.SpiriTreMgr.infoArrOff.filter(function(t){var e=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritVoById(t.typeid);return e&&e.suitId==s&&e.pos==i});if(!e.length)return null;var n=u.sortBySortArr2(e),o=n.length?n[0]:null;return t?u.compareSpiritreVOs(t,o)?o:void 0:o},u.compareSpiritreVOs=function(t,e){var i=u.sortArr2.indexOf(1),s=modules.exercise.spiriTreasure.SpiriTreMgr.getSpiritVoById(t.type_id);if(0==i){var n=s.level+t.rand_level,o=kn.allLevel(e);if(n!=o)return n<o}else if(1==i){var a=t.rand_prop.length&&0<t.rand_prop[0].prop_value?1:0,l=kn.hasAtt(e);if(a!=l)return a<l}else if(2==i){var r=0<t.rand_slot?1:0,h=kn.hasSlot(e);if(r!=h)return r<h}return!1},u.sortBySortArr2=function(t){return u.getSortedArr(t,u.sortArr2)},u.getAllLv=function(t,e){if(void 0===t&&(t=modules.exercise.spiriTreasure.SpiriTreMgr.curPalId),void 0===e&&(e=modules.exercise.spiriTreasure.SpiriTreMgr.curSuitId),u._infoOnArr){var i=u._infoOnArr.getData("pal_id",t),s=[];if(i)for(var n=0;n<i.length;n++){var o=i[n];u.getSpiritVoById(o.type_id).suitId==e&&s.push(o)}var a=10;if(8==s.length){for(n=0;n<s.length;n++){var l=s[n];l.refine_star<a&&(a=l.refine_star)}return a}}return 0},u.checkSuitListName=function(){u.init(),u.spiritreNameVos={},u._suitNum=0;var t,e=ya.serverTime,i=x.getTotalTime(e);for(var s in i[1]+=1,u.spiritreAllNameVos){var n=(t=u.spiritreAllNameVos[s]).suittime.split("|"),o=!1;if(5!=n.length)o=!0;else for(var a=0;a<n.length;a++){var l=i[a],r=n[a];if(l!=r){o=r<l;break}}o&&(u.spiritreNameVos[t.id]=t,u._suitNum+=1)}},u.getHasSpiritreNum=function(t){var e=0;if(u._infoOnArr){var i=u._infoOnArr.getData("type_id",t);i&&(e+=i.length);for(var s=0;s<u._infoArrOff.length;s++){u._infoArrOff[s].typeid==t&&(e+=1)}}return e},u.curSpiritViewTab=0,u.curPalId=0,u.curPalIndex=0,u.curPos=1,u._curSuitId=1,u.allPalActivateInfo=null,u._infoOnArr=null,u._infoArrOff=[],u._sortArr=[],u._sortArr2=[],u._selectArr=[],u._decompArr=[],u._suitNum=0,u.autoSuitCheck=!1,u.autoSuitKey=!1,u._canCheckRp=!1,u.spiritreVOs=null,u.spiritreAdconVOs=null,u.spiritreQuVOs=null,u.spiritreQuProVO=null,u.spiritreQuconVOs=null,u.spiritreDecompVOs=null,u.spiritreDesVos=null,u.spiritreSuitVos=null,u.spiritreAttXVos=null,u.spiritreNameVos=null,u.spiritreAllNameVos=null,u._curSortArr=null,u.palRps=null,_(u,["hasSort",function(){return this.hasSort=[!1,!1,!1]},"weightArr",function(){return this.weightArr=[1,10,1e3]}]),u}(),kn=function(){function l(){}return w(l,"modules.exercise.spiriTreasure.SpiriTreUtil"),l.hasAtt=function(t){return t&&t.equip_info&&0<t.equip_info.extra_attrs.length?1==t.equip_info.extra_attrs.length&&0==t.equip_info.extra_attrs[0].prop_value?0:1:0},l.hasSlot=function(t){if(!t||!t.data_list)return 0;var e,i=0;for(var s in t.data_list)8==(e=t.data_list[s]).id&&(i=e.val);return 0<i?1:0},l.allLevel=function(t){if(!t||!t.data_list)return 0;var e,i=0,s=Tn.getSpiritVoById(t.typeid);for(var n in t.data_list)7==(e=t.data_list[n]).id&&(i=e.val+s.level);return i},l.randLevel=function(t){if(!t||!t.data_list)return 0;var e,i=0;for(var s in t.data_list)7==(e=t.data_list[s]).id&&(i=e.val);return i},l.getProp=function(t){var e,i="";if(0<t.length)for(var s in t)e=t[s],i+=W.getName(e.prop_code)+"+"+e.prop_value+"\n";return i},l.getPropStr=function(t,e){return t&&t.rand_prop?0==t.rand_prop[0].prop_value?"无":l.getProp(t[e]):null},l.getMainProp=function(t){if(!t||!t.data_list||0==t.data_list.length)return null;var e,i=[],s=Tn.getSpiritVoById(t.typeid),n=s.att.split("|"),o=new Object;for(var a in o.className="p_add_prop",o.prop_code=n[0],o.prop_value=n[1],t.data_list)if(7==(e=t.data_list[a]).id&&0<=e.val){o.prop_value=Math.floor((s.level+e.val)*Tn.getAttXByAttId(o.prop_code));break}return i[0]=o,l.getProp(i)},l.getSecProp=function(t){return t&&t.equip_info&&t.equip_info.extra_attrs&&0<t.equip_info.extra_attrs.length?1==t.equip_info.extra_attrs.length&&0==t.equip_info.extra_attrs[0].prop_value?"无":l.getProp(t.equip_info.extra_attrs):null},l.getPaddprop=function(t){for(var e=!1,i=0;i<t.length;i++){var s=t[i];15!=s.prop_code&&16!=s.prop_code||(e?t.splice(i,1):(e=!0,s.prop_code))}return t},l.getPColor=function(t){var e;for(var i in t.data_list)if(9==(e=t.data_list[i]).id)return e.val;return 0},l.getStoneName=function(t){var e="";switch(t){case 10700013:e="blue1";break;case 10700014:e="purple1";break;case 10700015:e="orange1";break;case 10700016:e="red1"}return e},l.getSlotState=function(t){var e="未镶嵌";switch(t){case 10700013:e="蓝色符石";break;case 10700014:e="紫色符石";break;case 10700015:e="橙色符石";break;case 10700016:e="红色符石"}return e},l}(),An=function(){function y(){}return w(y,"modules.exercise.strangeFire.ExerStrangeFireMgr"),I(1,y,"stones",function(){return y.initXml(),y._stones}),I(1,y,"isAllRefineMaxLv",function(){if(y._strangeFireInfo&&0<y._strangeFireInfo.length){for(var t in y._strangeFireInfo)if(y._strangeFireInfo[t].refine_level<y.baseInfo.refineMaxLevel)return!1;return!0}return!1}),I(1,y,"baseInfo",function(){return y.initXml(),y._baseInfo}),I(1,y,"refineTargets",function(){return y.initXml(),y._refineTargets}),I(1,y,"fires",function(){return y.initXml(),y._fires}),I(1,y,"targets",function(){return y.initXml(),y._targets}),I(1,y,"qualitys",function(){return y.initXml(),y._qualitys}),I(1,y,"refineCosts",function(){return y.initXml(),y._refineCosts}),y.checkStrangeFireRP=function(){y.initRPList(),y.hasEmptyMagatamaRP(),y.hasHigherMagatamaRP(),y.isRefineCanLvUpRP(),y.isRefineAimCanLvUpRP()},y.initRPList=function(){y.magatamaRP=[];for(var t=0;t<4;t++){var e=new Object;e.id=t+1,e.emptyMagatama=!1,e.magatamaUp=!1,e.refine=!1,e.refineAim=!1,y.magatamaRP.push(e)}},y.hasEmptyMagatamaRP=function(){var t=y._strangeFireInfo?y._strangeFireInfo:[],e=y.getBagStoneObjects(),i=[];if(t)for(var s=1;s<5;s++){var n;for(var o in t)if((n=t[o]).type_id==s){i=n.magatama;break}i.length<8&&0<e.length?(y.magatamaRP[s-1].emptyMagatama=!0,Nt.show("RP_STRANGEFIRE_MAGATAMA"),1==y.curFireViewTab&&Nt.show("RP_STRANGEFIRE_MAGATAMA_"+s)):(y.magatamaRP[s-1].emptyMagatama=!1,Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+s),Nt.hide("RP_STRANGEFIRE_MAGATAMA"),1==y.curFireViewTab&&Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+s))}},y.hasHigherMagatamaRP=function(){var t,e=y._strangeFireInfo?y._strangeFireInfo:[],i=y.getBagStoneObjects(),s=!1,n=[],o=[];if(e)for(var a in e){var l;for(var r in o=(t=e[a]).magatama,n=y.getSortMagatamas(o)){if(l=n[r],1==s){s=!1;break}Nt.hide("RP_STRANGEFIRE_MAGATAMA");for(var h=0;h<i.length;h++){if(i[h].typeId>l.val){y.magatamaRP[t.type_id-1].magatamaUp=!0,Nt.show("RP_STRANGEFIRE_MAGATAMA"),s=!0,1==y.curFireViewTab&&Nt.show("RP_STRANGEFIRE_MAGATAMA_"+t.type_id);break}y.magatamaRP[t.type_id-1].magatamaUp=!1,Nt.hide("RP_STRANGEFIRE_MAGATAMA"),1==y.curFireViewTab&&Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+t.type_id)}}}},y.isRefineCanLvUpRP=function(){for(var t=1;t<5;t++){var e=y.getStrangeFireP(t),i=0,s=0;e&&(s=e.refine_level),y.refineCosts&&(0==s?(i=pe.getScore(23),Math.floor(y.refineCosts.startCost)<=i?(y.magatamaRP[t-1].refine=!0,Nt.show("RP_STRANGEFIRE_REFINE_UP"),2==y.curFireViewTab&&Nt.show("RP_STRANGEFIRE_MAGATAMA_"+t)):(y.magatamaRP[t-1].refine=!1,Nt.hide("RP_STRANGEFIRE_REFINE_UP"),2==y.curFireViewTab&&Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+t))):s==y.baseInfo.refineMaxLevel?(Nt.hide("RP_STRANGEFIRE_REFINE_UP"),2==y.curFireViewTab&&Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+t)):(i=pe.getScore(23),Math.floor(y.refineCosts.startCost+y.refineCosts.cost*s+(s-1)*s*y.refineCosts.costAdd/2)<=i?(y.magatamaRP[t-1].refine=!0,Nt.show("RP_STRANGEFIRE_REFINE_UP"),2==y.curFireViewTab&&Nt.show("RP_STRANGEFIRE_MAGATAMA_"+t)):(y.magatamaRP[t-1].refine=!1,Nt.hide("RP_STRANGEFIRE_REFINE_UP"),2==y.curFireViewTab&&Nt.hide("RP_STRANGEFIRE_MAGATAMA_"+t))))}},y.isRefineAimCanLvUpRP=function(){var t=y.getMinRefineLv(),e=y.getNextStep(y.curFireRefineAimLv),i=y.getRefineTargetInfo();0==t?t>=i[0].targetLevel?Nt.show("RP_STRANGEFIRE_REFINE_AIM_UP"):Nt.hide("RP_STRANGEFIRE_REFINE_AIM_UP"):y.curFireRefineAimLv==y.baseInfo.refineAimMaxLevel?Nt.hide("RP_STRANGEFIRE_REFINE_AIM_UP"):e&&(t>=e.targetLevel?Nt.show("RP_STRANGEFIRE_REFINE_AIM_UP"):Nt.hide("RP_STRANGEFIRE_REFINE_AIM_UP"))},y.getNextStep=function(t){var e,i=y.getRefineTargetInfo();for(var s in i)if((e=i[s]).step==t)return e;return null},y.setStrangeFireInfo=function(t){var e;null==y._strangeFireInfo&&(y._strangeFireInfo=[]),e=y.initStrangeFireInfo(t.strange_fire),y._strangeFireInfo=y.getSortStrangeFireById(e)},y.initStrangeFireInfo=function(t){var e;for(var i in y.fires){e=y.fires[i];var s,n=!1;for(var o in t)if(s=t[o],e.id==s.type_id){n=!0;break}if(0==n){var a=new Object;a.className="p_strange_fire",a.type_id=e.id,a.magatama=[],a.refine_level=0,a.quality=0,a.bless=0,t.push(a)}}return t},y.getStrangeFireP=function(t){if(y._strangeFireInfo){var e,i=y._strangeFireInfo;for(var s in i)if((e=i[s]).type_id==t)return e}return null},y.getFireIndexByFireId=function(t){if(y._strangeFireInfo){var e=y._strangeFireInfo;y.getSortStrangeFireById(e);for(var i=0;i<e.length;i++){if(e[i].type_id==t)return i}}return 0},y.getStrangeFirePByIndex=function(t){if(y._strangeFireInfo){var e=y._strangeFireInfo;return y.getSortStrangeFireById(e),e[t]}return null},y.updateByInlay=function(t){if(y._strangeFireInfo){var e,i=y._strangeFireInfo,s=!1;for(var n in i)if((e=i[n]).type_id==t.fire_id){var o,a=!(s=!0);for(var l in e.magatama)if((o=e.magatama[l]).id==t.pos){o.val=t.item_id,a=!0;break}if(0==a){e.magatama=e.magatama||[];var r=new Object;r.className="p_kv",r.id=t.pos,r.val=t.item_id,e.magatama.push(r)}break}if(null==i||0==i.length||0==s){i=i||[];var h=new Object;h.className="p_strange_fire",h.type_id=t.fire_id,h.magatama=[];var u=new Object;u.className="p_kv",u.id=t.pos,u.val=t.item_id,h.magatama.push(u),i.push(h)}}},y.updateByRefine=function(t){if(y._strangeFireInfo){var e,i=y._strangeFireInfo,s=!1;for(var n in i)if((e=i[n]).type_id==t.fire_id){e.refine_level=t.refine_level,s=!0;break}if(0==s){var o=new Object;o.className="p_strange_fire",o.type_id=t.fire_id,o.refine_level=t.refine_level,y._strangeFireInfo.push(o)}}},y.updateByQuality=function(t){if(y._strangeFireInfo){var e,i=y._strangeFireInfo,s=!1;for(var n in i)if((e=i[n]).type_id==t.fire_id){e.quality=t.quality,e.bless=t.bless,s=!0;break}if(0==s){var o=new Object;o.className="p_strange_fire",o.type_id=t.fire_id,o.quality=t.quality,o.bless=t.bless,y._strangeFireInfo.push(o)}}},y.updateByMagatamaTidy=function(t,e){if(y._strangeFireInfo){var i,s=y._strangeFireInfo;for(var n in s)if((i=s[n]).type_id==t){i.magatama=e;break}}},y.getTargetQuality=function(t){if(y._strangeFireInfo){var e,i=y._strangeFireInfo;for(var s in i)if((e=i[s]).type_id==t){if(e.magatama&&8==e.magatama.length){var n,o=0;for(var a in e.magatama){n=e.magatama[a];var l=modules.exercise.strangeFire.ExerStrangeFireMgr.getStoneById(n.val);(0==o||o>l.quality)&&(o=l.quality)}return o}return 0}}return 0},y.getBagStones=function(){var t,e=[];for(var i in y.stones)t=y.stones[i],e=e.concat(xo.getGoodsArrByTypeID(t.id));return e},y.getBagStoneObjects=function(){var t,e=[],i=y.getBagStones();for(var s in i)t=i[s],e.push({typeId:t.typeid,oid:t.id,num:t.current_num});return e},y.getBetterBagStones=function(t){var e=[],i=y.getStoneById(t);if(i){var s,n=y.getBagStones();for(var o in n){s=n[o];var a=y.getStoneById(s.typeid);a&&i.quality<a.quality&&e.push(s)}}return e},y.getOneKeyInlayStones=function(){var t,e=[],i=y._strangeFireInfo,s=[];if(i)for(var n in i)if((t=i[n]).type_id==y.curFireId){s=t.magatama;break}for(var o=y.getBagStoneObjects(),a=0;a<8;a++){var l,r=0,h=0,u=null;for(var c in s)if(a+1==(l=s[c]).id){u=l;break}if(u)r=y.getStoneById(u.val).quality,h=2;else h=1;for(var d=new Object,p=-1,m=o.length-1;0<=m;m--){var f=o[m],_=y.getStoneById(f.typeId);_&&_.quality>r&&(r=_.quality,d=f,p=m)}var g=new Object;0<=p&&(1==d.num?o.splice(p,1):d.num-=1,g.typeId=d.typeId,g.oid=d.oid,g.num=1,g.operateType=h,g.pos=a+1,e.push(g))}return e},y.getOneKeyInlayStones1=function(){var t,e,i=[],s=y._strangeFireInfo?y._strangeFireInfo:[],n=[];if(s)for(var o in s)if((e=s[o]).type_id==y.curFireId){n=e.magatama;break}t=y.getSortMagatamas(n);for(var a=y.getBagStoneObjects(),l=0;l<t.length;l++){var r=0,h=0,u=t[l];if(u){var c=y.getStoneById(u.val);r=c?c.quality:0,h=0<u.val?2:1}else h=1;for(var d=new Object,p=-1,m=a.length-1;0<=m;m--){var f=a[m],_=y.getStoneById(f.typeId);_&&_.quality>r&&(r=_.quality,d=f,p=m)}var g=new Object;0<=p&&(1==d.num?a.splice(p,1):d.num-=1,g.typeId=d.typeId,g.oid=d.oid,g.num=1,g.operateType=h,g.pos=u?u.id:8-l,i.push(g))}return i},y.getSortMagatamas=function(t){var e=!1,i=[],s=(i=t.concat()).length;if((s=0<s?s:0)<8)for(var n=1;n<9;n++){for(var o in i)if(i[o].id==n){e=!0;break}if(1==e)e=!1;else{var a=new Object;a.className="p_kv",a.id=n,i.push(a)}}return i=i.sort(y.sortMagatamas)},y.sortMagatamas=function(t,e){var i=y.getStoneById(t.val),s=y.getStoneById(e.val);return i&&s?i.quality>s.quality?1:i.quality<s.quality?-1:0:i?1:s?-1:0},y.getBaseAttrs=function(t){for(var e=[],i=0;i<y.baseInfo.comAttrKeyList.length;i++)e.push({key:y.baseInfo.comAttrKeyList[i],val:0});var s,n=y._strangeFireInfo;for(var o in n){var a;if((s=n[o]).type_id==t)for(var l in s.magatama){a=s.magatama[l];var r,h=y.getStoneById(a.val);if(h)for(var u in h.attrValList){var c;for(var d in r=h.attrValList[u],e)if((c=e[d]).key==r.key){c.val+=r.val;break}}}}return e},y.getMinRefineLv=function(){for(var t=[],e=1;e<5;e++){var i=y.getStrangeFireP(e),s=0;i?(s=i.refine_level,t.push(s)):t.push(0)}return Math.min(t[0],t[1],t[2],t[3])},y.initXml=function(){if(!y._baseInfo){y._fires=[],y._targets=[],y._stones=[],y._refines=[],y._qualitys=[],y._refineTargets=[];var t,e=Ra.startEncode("strangeFire.xml");for(var i in e)(t=e[i])instanceof xml.StrangeFireBaseInfoVO?y._baseInfo=t:t instanceof xml.StrangeFireVO?y._fires.push(t):t instanceof xml.StrangeFireTargetVO?y._targets.push(t):t instanceof xml.StrangeFireStoneVO?y._stones.push(t):t instanceof xml.StrangeFireRefineVO?y._refines.push(t):t instanceof xml.StrangeFireQualityVO?y._qualitys.push(t):t instanceof xml.StrangeFireRefineCostVO?y._refineCosts=t:t instanceof xml.StrangeFireRefineTargetVO&&y._refineTargets.push(t)}},y.getQualitys=function(t){y.initXml();var e,i=[];for(var s in y._qualitys)(e=y._qualitys[s]).fireId==t&&i.push(e);return i},y.getFireVoById=function(t){var e;for(var i in y.initXml(),y._fires)if((e=y._fires[i]).id==t)return e;return null},y.getStoneById=function(t){var e;for(var i in y._stones)if((e=y._stones[i]).id==t)return e;return null},y.getRefineVOByLv=function(t){y.initXml();for(var e=0;e<y._refines.length;e++){return y._refines[e]}return null},y.getQualityVO=function(t,e){var i;for(var s in y.initXml(),y._qualitys)if((i=y._qualitys[s]).fireId==t&&i.level==e)return i;return null},y.getTargetVO=function(t){var e;for(var i in y.initXml(),y._targets)if((e=y._targets[i]).quality==t)return e;return null},y.getTargetVOsByFireId=function(t){y.initXml();var e,i=[];for(var s in y._targets)(e=y._targets[s]).fireId==t&&i.push(e);return i},y.getTargetVoByQuality=function(t,e){var i;for(var s in y.initXml(),y._targets)if((i=y._targets[s]).fireId==t&&i.quality==e)return i;return null},y.getRefineTargetInfo=function(){y.initXml();var t,e,i=[];for(e in y.refineTargets)t=y.refineTargets[e],i.push(t);return i},y.getFireVOByIndex=function(t){return y.initXml(),y._fires[t]},y.getSortStrangeFireById=function(t){return t.concat().sort(y.sortStrangeFireById)},y.sortStrangeFireById=function(t,e){return t.type_id&&e.type_id?t.type_id>e.type_id?1:t.type_id<e.type_id?-1:0:0},y._strangeFireInfo=null,y.curPalId=0,y.curFireId=0,y.curOperateType=0,y.curOperatePos=0,y.curFireRefineAimLv=0,y.magatamaRP=null,y.curFireViewTab=0,y._baseInfo=null,y._fires=null,y._targets=null,y._stones=null,y._refines=null,y._refineCosts=null,y._qualitys=null,y._refineTargets=null,y}(),En=function(){function t(){}return w(t,"modules.exercise.talisman.TalimanConst"),t.getColorByPercent=function(t){return t<.2?U.getColorLight(2):t<.4?U.getColorLight(3):t<.6?U.getColorLight(4):t<.8?U.getColorLight(5):U.getColorLight(6)},t.getSpcAttrStr=function(t){if(t)switch(t.id){case 7:return"增加法宝天灵属性"+t.val/100+"%";case 8:return"增加法宝进阶属性"+t.val/100+"%";case 9:return"增加法宝强化属性"+t.val/100+"%"}return""},t.getSpcAttrNameStr=function(t){switch(t){case 7:return"法宝天灵加成：";case 8:return"法宝进阶加成：";case 9:return"法宝强化加成："}return""},t.getStoneSpcPower=function(t){var e=0;if(t)switch(t.id){case 7:e+=1*t.val;break;case 8:e+=1.5*t.val;break;case 9:e+=1*t.val}return e},t}(),Rn=function(){function g(){}return w(g,"modules.exercise.talisman.TalimanMgr"),I(1,g,"curTalimanID",function(){return g.curChooseTalimanVO?g.curChooseTalimanVO.id:0}),I(1,g,"curTalimanInfo",function(){return g.getTalimanInfo(g.curTalimanID)}),I(1,g,"talimanInfos",function(){return g._talimanList}),I(1,g,"bookCards",function(){return g.init(),g.mainVO.cardsArr}),g.setTalimanInfo=function(t){g._talimanList=t,g.countByInfoUpdate()},g.countByInfoUpdate=function(){g.curHasTalimanNum=g._talimanList?g._talimanList.length:0},g.getTalimanInfo=function(t){var e;for(var i in g._talimanList)if((e=g._talimanList[i]).type_id==t)return e;return null},g.getTalimanStoneInfo=function(t,e){var i;for(var s in g._talimanList)if((i=g._talimanList[s]).type_id==t){var n;for(var o in i.gems)if((n=i.gems[o]).id==e)return n;return null}return null},g.updateTalimanInfo=function(t){var e,i;for(var s in t)i=t[s],g._talimanList?(e=g.getTalimanInfo(i.type_id))?(e.grade=i.grade,e.lv=i.lv,e.gems=i.gems):g._talimanList.push(i):(g._talimanList=[]).push(i);g.countByInfoUpdate()},g.getOneTalimanPower=function(t){var e=0;if(g.getTalimanInfo(t)){var i=g.getTalimanAttr(t);for(var s in i)e+=W.getAttrPower(parseInt(s),parseInt(i[s]));e+=g.getTalimanExtraPower(t)}return Math.floor(e)},g.getTalimanExtraPower=function(t){var e=0,i=g.getTalimanVO(t);if(i){var s,n=g.getTalimanAttrVO(i.color),o=g.getTalimanInfo(t);if(o)for(var a in e+=n.getStepExtraPower(o.grade),o.gems)s=o.gems[a],e+=En.getStoneSpcPower(s)}return e},g.getAllTalimanSpcAttr=function(){var t,e={};for(var i in g.talimanInfos){var s;for(var n in(t=g.talimanInfos[i]).gems){var o;for(var a in s=t.gems[n])o=s[a],g.addAttr(o.id,o.val,e)}}return e},g.getAllTalimanAttr=function(){var t,e={};for(var i in g.talimanInfos){t=g.talimanInfos[i];var s=g.getTalimanVO(t.type_id);if(s){var n,o,a=g.getTalimanAttrVO(s.color);for(var l in a.talimanAttr)n=a.talimanAttr[l],g.addAttr(n[0],n[1],e);for(var r=0;r<a.stepAttrKeyArr.length;r++)for(var h=0,u=0;u<a.stepFormulaArr.length;u++)t.grade==a.stepFormulaArr[u][0]&&(h==r?g.addAttr(a.stepAttrKeyArr[r],a.stepFormulaArr[u][1],e):h+=1);for(r=0;r<a.refineAttrKeyArr.length;r++)for(h=0,u=0;u<a.refineFormulaArr.length;u++)t.lv==a.refineFormulaArr[u][0]?h==r?g.addAttr(a.refineAttrKeyArr[r],a.refineFormulaArr[u][1],e):h+=1:t.lv&&0!=t.lv||(h==r?g.addAttr(a.refineAttrKeyArr[r],0,e):h+=1);for(var c in t.gems){o=t.gems[c];var d=g.getTalimanGemVO(o.val);for(r=0;r<d.gemAttrKeyArr.length;r++)g.addAttr(d.gemAttrKeyArr[r],d.gemFormulaArr[r],e)}}}return e},g.getTalimanBaseAttr=function(t){var e={},i=g.getTalimanVO(t);if(i){var s,n=g.getTalimanAttrVO(i.color);for(var o in n.talimanAttr)s=n.talimanAttr[o],g.addAttr(s[0],s[1],e)}return e},g.getTalimanAttr=function(t){var e={},i=g.getTalimanVO(t);if(i){var s,n=g.getTalimanAttrVO(i.color);for(var o in n.talimanAttr)s=n.talimanAttr[o],g.addAttr(s[0],s[1],e);var a=g.getTalimanInfo(t);if(a){for(var l=0;l<n.stepAttrKeyArr.length;l++)for(var r=0,h=0;h<n.stepFormulaArr.length;h++)a.grade==n.stepFormulaArr[h][0]&&(r==l&&g.addAttr(n.stepAttrKeyArr[l],n.stepFormulaArr[h][1],e),r+=1);for(l=0;l<n.refineAttrKeyArr.length;l++){var u=0;for(h=0;h<n.refineFormulaArr.length;h++)a.lv==n.refineFormulaArr[h][0]?(u==l&&g.addAttr(n.refineAttrKeyArr[l],n.refineFormulaArr[h][1],e),u+=1):a.lv&&0!=a.lv||(u==l&&g.addAttr(n.refineAttrKeyArr[l],0,e),u+=1)}var c,d=0;for(var p in 3==n.color?d=.25:4==n.color?d=.5:5==n.color?d=.75:6==n.color&&(d=1),a.gems){c=a.gems[p];var m=g.getTalimanGemVO(c.val);for(l=0;l<m.gemAttrKeyArr.length;l++){var f=Math.floor(m.gemFormulaArr[l]*d);g.addAttr(m.gemAttrKeyArr[l],f,e),g.addAttr(m.gemAttrKeyArr[l],m.gemFormulaArr[l],e)}}}}return e},g.addAttr=function(t,e,i){i&&(i[t]||(i[t]=0),i[t]+=e)},g.init=function(){if(!g.mainVO){g.talimanVOs={},g.stoneVOs={},g.talimanGemVOs={},g.talimanGemPriceVOs=[],g.talimanAttrVOs={};var t,e=Ra.startEncode("taliman.xml");for(var i in e)(t=e[i])instanceof xml.TalimanMainVO?g.mainVO=t:t instanceof xml.TalimanVO?g.talimanVOs[t.id]=t:t instanceof xml.TalimanGemVO?g.talimanGemVOs[t.id]=t:t instanceof xml.TalimanGemDisaPriceVO?g.talimanGemPriceVOs.push(t):t instanceof xml.TalimanAttrVO&&(g.talimanAttrVOs[t.color]=t)}},g.getTalimanIsActiveByID=function(t){if(g.curTalimanOpen&&0<g.curTalimanOpen.length)return g.curTalimanOpen[t];var e,i,s,n=g.bookCards;if(n){for(var o=0;o<n.length;o++)"number"==typeof(e=[n[o],0])[0]&&Math.floor(e[0])==e[0]?(s=g.getTalimanInfo(e[0]),i=g.getTalimanVO(e[0])):"p_talisman"==e[0].className&&(i=g.getTalimanVO(e[0].type_id),s=e[0]),i&&(g.curTalimanOpen[i.id]=!!s);return g.curTalimanOpen[t]}},g.getTalimanVO=function(t){return g.init(),g.talimanVOs[t]},g.getTalimanGemVO=function(t){return g.init(),g.talimanGemVOs[t]},g.getTalimanGemsDisaPriceVO=function(t){var e;for(var i in g.init(),g.talimanGemPriceVOs)if((e=g.talimanGemPriceVOs[i]).level==t)return e;return null},g.getTalimanAttrVO=function(t){return g.init(),g.talimanAttrVOs[t]},g.getInlayStones=function(t){var e=[],i=g.getTalimanInfo(t);if(i){var s,n=[];for(var o in i.gems)s=i.gems[o],g.getTalimanGemVO(s.val);var a,l=[],r=[];if((l=l.concat(xo.getGoodsByGoodsType(10600)))&&0<l.length){var h;for(var u in l)h=l[u],(a=g.getTalimanGemVO(h.typeid))&&-1==n.indexOf(a.type)&&(e.push(a),-1==r.indexOf(a.type)&&r.push(a.type));n=n.concat(r)}for(var c,d=!1,p=0;p<8;p++){for(var m in n)if(p+1==n[m]){d=!0;break}0==d&&(c=g.getGodEquipStoneVOByTypeAndLv(p+1))&&e.push(c),d=!1}}for(var f=[],_=0;_<e.length;_++){(0<xo.getGoodsNumByTypeID(e[_].id)||e[_].color<5)&&f.push(e[_])}return f},g.getGodEquipStoneVOByTypeAndLv=function(t){var e;for(var i in g.init(),g.talimanGemVOs)if((e=g.talimanGemVOs[i]).type==t)return e;return null},g.checkPackHasGem=function(){for(var t=0;t<g.talimanGemIdArr.length;t++){if(0<xo.getGoodsNumByTypeID(g.talimanGemIdArr[t]))return!0}return!1},g.checkTalismanAllRP=function(){g.checkTalismanCanupRP(),g.checkStepCanupRP(),g.checkRefineCanupRP(),g.checkGemCanAddRP()},g.checkTalismanCanupRP=function(){for(var t=g.bookCards,e=!1,i=0;i<t.length;i++){var s=g.getTalimanVO(t[i]);if(s){var n=modules.exercise.talisman.TalimanMgr.getTalimanAttrVO(s.color),o=g.getTalimanInfo(s.id),a=o?o.lv:0,l=o?o.grade:0;if(!e){for(var r=0,h=0;h<n.refinePayFormulaArr.length;h++)if(a+1==n.refinePayFormulaArr[h][0]){r=n.refinePayFormulaArr[h][1];break}e=r<=xo.getGoodsNumByTypeID(n.refinePayGoods)&&a<n.maxRefine&&o}if(!e){for(var u=0,c=0;c<n.stepPayFormulaArr.length;c++)if(l+1==n.stepPayFormulaArr[c][0]){u=n.stepPayFormulaArr[c][1];break}e=u<=xo.getGoodsNumByTypeID(n.stepPayGoods)&&l<n.maxStep&&o}if(Rl.ins().detailPanel){if(s&&g.getTalimanInfo(s.id)&&!e&&o&&g.checkPackHasGem())if(2<=o.gems.length)e=!1;else if(o.gems.length<=0)e=!0;else{for(var d in o.gems)1==o.gems[d].id?3<=o.grade&&(e=!0):e=!0}}else if(!e&&o&&g.checkPackHasGem())if(2<=o.gems.length)e=!1;else if(o.gems.length<=0)e=!0,console.log("9999999999999999999",e);else{for(var d in o.gems)1==o.gems[d].id?3<=o.grade&&(e=!0,console.log("1010010101001",e)):(e=!0,console.log("1234567890",e))}}if(e)return void Nt.show("PR_TALISMAN");Nt.hide("PR_TALISMAN")}},g.checkStepCanupRP=function(){for(var t=g.bookCards,e=!1,i=0;i<t.length;i++){var s=g.getTalimanVO(t[i]);if(s){for(var n=g.getTalimanAttrVO(s.color),o=g.getTalimanInfo(s.id),a=o?o.grade:0,l=0,r=0;r<n.stepPayFormulaArr.length;r++)a+1==n.stepPayFormulaArr[r][0]&&(l=n.stepPayFormulaArr[r][1]);if(e=l<=xo.getGoodsNumByTypeID(n.stepPayGoods)&&a<n.maxStep,g.curChooseTalimanVO&&s&&g.getTalimanInfo(s.id)&&g.curChooseTalimanVO.id==s.id)return void(e?Nt.show("RP_TALISMAN_STEP_UP"):Nt.hide("RP_TALISMAN_STEP_UP"));Nt.hide("RP_TALISMAN_STEP_UP")}}},g.checkRefineCanupRP=function(){for(var t=g.bookCards,e=!1,i=0;i<t.length;i++){var s=g.getTalimanVO(t[i]);if(s){for(var n=g.getTalimanAttrVO(s.color),o=g.getTalimanInfo(s.id),a=o?o.lv:0,l=0,r=0;r<n.refinePayFormulaArr.length;r++)if(a+1==n.refinePayFormulaArr[r][0]){l=n.refinePayFormulaArr[r][1];break}if(e=l<=xo.getGoodsNumByTypeID(n.refinePayGoods)&&a<n.maxRefine,g.curChooseTalimanVO&&s&&g.getTalimanInfo(s.id)&&g.curChooseTalimanVO.id==s.id)return void(e?Nt.show("RP_TALISMAN_REFINE_UP"):Nt.hide("RP_TALISMAN_REFINE_UP"));Nt.hide("RP_TALISMAN_REFINE_UP")}}},g.checkGemCanAddRP=function(){for(var t=g.bookCards,e=!1,i=0;i<t.length;i++){e=!1;var s=g.getTalimanVO(t[i]);if(s){var n=g.getTalimanInfo(s.id);if(!e&&n&&g.checkPackHasGem())if(2<=n.gems.length)e=!1;else if(n.gems.length<=0)e=!0;else if(1==n.gems.length){for(var o in n.gems)1==n.gems[o].id?3<=n.grade&&(e=!0):e=!0}if(g.curChooseTalimanVO&&s&&g.getTalimanInfo(s.id)&&g.curChooseTalimanVO.id==s.id)return void(e?Nt.show("RP_TALISMAN_GEM_ADD"):Nt.hide("RP_TALISMAN_GEM_ADD"));Nt.hide("RP_TALISMAN_GEM_ADD")}}},g.curHasTalimanNum=0,g.curShowTaliman=0,g._talimanList=null,g.curChooseTalimanVO=null,g.curTalimanOpen={},g.curTalimanAlreadyOpen={},g.curChooseStonePos=0,g.talimanListAfterSort=[],g.mainVO=null,g.talimanVOs=null,g.stoneVOs=null,g.talimanGemVOs=null,g.talimanGemPriceVOs=null,g.talimanAttrVOs=null,_(g,["talimanGemIdArr",function(){return this.talimanGemIdArr=[10600010,10600011,10600012]}]),g}(),On=function(){function a(){}return w(a,"modules.exercise.talisman.TalimanUtil"),a.sortByQuality=function(t){return t.length<=0?[]:a.qualityAscSortFun(t)},a.qualityAscSortFun=function(t){for(var e=[],i=[],s=[],n=0;n<t.length;n++){Rn.getTalimanInfo(t[n].dataSource.id)?e.push(t[n]):i.push(t[n])}e.sort(a.sortByColor1),i.sort(a.sortByColor2);for(n=0;n<e.length;n++)s.push(e[n]);for(var o=0;o<i.length;o++)s.push(i[o]);return s},a.sortByColor1=function(t,e){return e.dataSource.color-t.dataSource.color},a.sortByColor2=function(t,e){return t.dataSource.color-e.dataSource.color},a}(),Ln=function(){function t(){}return w(t,"modules.family.FamilyConst"),t.OWNER=1,t.VOWNER=2,t.TIAMWEI_KING=11,t.ZIWEI_KING=12,t.QINGLONG_HUFA=21,t.BAIHU_HUFA=22,t.ZHUQUE_HUFA=23,t.XUANWU_HUFA=24,t.WUJING_TANGZHU=31,t.QINGMU_TANGZHU=32,t.XUANSHUI_TANGZHU=33,t.CHIHUO_TANGZHU=34,t.HUANGTU_TANGZHU=35,t.ELITE=41,t.COPY_RANK=3003,t.FAMILY_LEVEL=70,t.FAMILY_FIGHT_POS_NOT_MEMBERS=-1,_(t,["FAMILY_FIGHT_POS_NANMES",function(){return this.FAMILY_FIGHT_POS_NANMES=["","Vanguard","EliteTwo","EliteOne","SubCaptain","Captain"]},"FAMILY_FIGHT_POS_SCORE",function(){return this.FAMILY_FIGHT_POS_SCORE={Vanguard:{name:"先锋",score:2,fontColor:"#4cf0ff"},EliteTwo:{name:"左参将",score:3,fontColor:"#fd70ff"},EliteOne:{name:"右参将",score:3,fontColor:"#fd70ff"},SubCaptain:{name:"副将",score:4,fontColor:"#f5aa3f"},Captain:{name:"主将",score:5,fontColor:"#fff21a"}}}]),t}(),Dn=function(){function p(){}return w(p,"modules.family.FamilyManager"),I(1,p,"serverOpenDay",null,function(t){p._severOpenDays=t}),I(1,p,"familyFightMembers",function(){return p._familyFightMembers}),I(1,p,"familyRankId",function(){return 3003}),I(1,p,"witnessBattleRoundNum",function(){return p._witnessBattleRoundNum},function(t){p._witnessBattleRoundNum=t}),I(1,p,"isWitnessFamilyBattle",function(){return p._isWitnessFamilyBattle},function(t){p._isWitnessFamilyBattle=t}),I(1,p,"battleOptionTipShow",function(){return p._battleTipIsShow},function(t){p._battleTipIsShow=!0}),I(1,p,"isAutoExitBattle",function(){return p._isAutoExitFamilyBattle},function(t){p._isAutoExitFamilyBattle=t}),I(1,p,"witnessFamilyId",function(){return p._witnessFamilyId},function(t){p._witnessFamilyId=t}),I(1,p,"mergerTimesOfServer",null,function(t){p._mergeTimesOfServer=t}),p.resetMyFamilyData=function(){pe.user.attr.family_id=0,pe.user.attr.family_name="",p._listToc=null,p._detailInfo=null,p._buyLogs=null,p._eventList=null,p._familyRequestList=null,p._shopInfoToc=null,p._skillDic=null,p.myP_mem=null,p.bossInfo=null,p._copyInfo=null,p.initMission=!1,p._signUpMembers=null,p._battleMembers=null,p._battleRound=0,p._battleDetails=null,p._battleFamilyList=null,p._battleRoundInfo=null,p._battleProgress=0,p._battleTimeStamp=0,p.otherFamilyInfo=null,p._isAutoEnterFightToWitness=!0,p._witnessSkillCds=null,p._witnessInfoArr=null,p._nextFightBd=null,p._battleFightingId=0,p._nextBattleStartTime=0,p._battleTipIsShow=!1;var t=modules.family.FamilyManager.getFamilyVO().FamilyMissionArr;for(var e in t)t[e].nowTimes=0;p.clearFamilyRP()},p.clearFamilyRP=function(){Nt.hide("RP_FAMILY_BOSS"),Nt.hide("RP_FAMILY_COPY"),Nt.hide("RP_FAMILY_REQUEST"),Nt.hide("PR_FAMILY_BATTLE_SIGN_UP")},p.getNextFreshTime=function(){if(p.freshTime<ya.serverTime){var t=new Date(ya.serverTimeMs),e=t.getMinutes();if(9==t.getHours()&&30<=e||10<=t.getHours()&&t.getHours()<22){var i=30*(Math.floor(e/30)+1);t.setMinutes(i),t.setSeconds(0),t.setMilliseconds(0),p.freshTime=t.getTime()/1e3}}return p.freshTime-ya.serverTime},p.handlerFamilyList=function(t){p._listToc=t},p.getFamilyData=function(){return p._listToc},p.handlerFamilyDetailToc=function(t){p._detailInfo=t.family_info,p.checkRPFamilyRequest()},p.getFamilyDetail=function(){return p._detailInfo},p.getBuildLvByID=function(t){var e;if(p._detailInfo)for(var i in p._detailInfo.buildings)if((e=p._detailInfo.buildings[i]).id==t)return e.lv;return 0},p.handlerFamilyRequestJoinToc=function(t){p._listToc&&p._listToc.request_family_ids.indexOf(t.family_id<0)&&p._listToc.request_family_ids.push(t.family_id)},p.handlerFamilyCreateToc=function(t){p._detailInfo=t.family_info,pe.user.attr.family_id=t.family_info.family_id,pe.user.attr.family_name=t.family_info.family_name,p.checkRPFamilyRequest()},p.clearFamilyRequestList=function(t){if(p._familyRequestList)for(var e=p._familyRequestList.length-1;0<=e;e--)if(t==p._familyRequestList[e].role_id){p._familyRequestList.splice(e,1);break}p.checkRPFamilyRequest()},p.handlerFamilyRequestProcess=function(t){if(p._familyRequestList)for(var e,i=p._familyRequestList.length-1;0<=i;i--){e=p._familyRequestList[i];for(var s=0;s<t.req_role_name.length;s++)if(t.req_role_name[s]==e.role_name){p._familyRequestList.splice(i,1),1==t.op_type?Jt.addTip(e.role_name+"被同意加入仙盟"):2==t.op_type&&Jt.addTip(e.role_name+"被拒绝加入仙盟");break}}p.checkRPFamilyRequest()},p.getFamilyVO=function(){return p.familyVO||(p.familyVO=Ra.startEncode("family.xml")[0]),p.familyVO},p.getRoleNumByFamilyLV=function(t){return p.getFamilyVO().FamilyBuildDic[1].FamilyBuildLvDic[t].roleNum},p.handlerFamilyBuildUpgrade=function(t){if(p._detailInfo)for(var e=p._detailInfo.buildings.length,i=0;i<e;i++)p._detailInfo.buildings[i].id==t.building_id&&++p._detailInfo.buildings[i].lv},p.getNameByTitle=function(t){var e="成员";switch(t){case 1:e="盟主";break;case 2:e="副盟主";break;case 11:e="天薇法王";break;case 12:e="紫薇法王";break;case 21:e="青龙护法";break;case 22:e="白虎护法";break;case 23:e="朱雀护法";break;case 24:e="玄武护法";break;case 31:e="乌金堂主";break;case 32:e="青木堂主";break;case 33:e="玄水堂主";break;case 34:e="赤火堂主";break;case 35:e="黄土堂主";break;case 41:e="精英"}return e},p.getMyMemberInfo=function(){var t;if(p._detailInfo&&p._detailInfo.members)for(var e in p._detailInfo.members)if((t=p._detailInfo.members[e]).role_id==pe.roleID)return p.myP_mem=t;return p.myP_mem},p.getMembetInfoByRoleId=function(t){var e;if(p._detailInfo&&p._detailInfo.members)for(var i in p._detailInfo.members)if((e=p._detailInfo.members[i]).role_id==t)return e;return null},p.handlerFamilyAdmin=function(t){if(p._detailInfo&&p._detailInfo.members)for(var e,i=p._detailInfo.members,s=i.length-1;0<=s;s--)if((e=i[s]).role_id==t.target_role_id)switch(t.op_type){case 1:e.family_title_id=1,p.getMyMemberInfo().family_title_id=2;break;case 2:e.family_title_id=41;break;case 3:e.family_title_id=2,p._detailInfo.vice_owners=p._detailInfo.vice_owners||[];var n,o=!1;for(var a in p._detailInfo.vice_owners)if((n=p._detailInfo.vice_owners[a]).role_id==e.role_id){o=!0;break}o||((n=new Object).className="p_family_vice_owner",n.role_id=e.role_id,n.role_name=e.role_name,p._detailInfo.vice_owners.push(n));break;case 4:i.splice(s,1)}p.checkRPFamilyRequest()},p.getSkillXMLVO=function(t){var e=p.getFamilyVO().FamilySkillDic;return e&&e.hasOwnProperty(t+"")?e[t]:null},p.handlerFamilySkillInfo=function(t){var e;for(var i in p._skillDic=p._skillDic||new Object,t.pal_family_skills)e=t.pal_family_skills[i],p._skillDic[e.pal_id]=e.family_skills},p.resetOnceData=function(t){if(p._listToc=null,p._detailInfo=null,p.myP_mem=null,2==t){p._familyRequestList=null,p._copyInfo=null,p.bossInfo=null;var e=modules.family.FamilyManager.getFamilyVO().FamilyMissionArr;for(var i in e)e[i].nowTimes=0}},p.handlerSkillUpgrade=function(t){if(p._skillDic){for(var e=p._skillDic[t.pal_id],i=0;i<e.length;i++){if(e[i].id==t.pal_family_skill.id)return void(e[i]=t.pal_family_skill)}p._skillDic[t.pal_id].push(t.pal_family_skill)}},p.getFamilySkillInfo=function(t){return p._skillDic&&p._skillDic.hasOwnProperty(t+"")?p._skillDic[t]:null},p.isHasSkillDic=function(){return!!p._skillDic},p.handlerFamilyRequestListToc=function(t){p._familyRequestList=t.request_list,p.checkRPFamilyRequest()},p.getFamilyRequestListToc=function(){return p._familyRequestList?p._familyRequestList:null},p.setRequestConditionToc=function(t){p._detailInfo&&(p._detailInfo.auto_agree_join=t.auto_agree,p._detailInfo.require_power=t.min_power)},p.handlerFamilyEvents=function(t){p._eventList=t.family_events},p.getEventList=function(){return p._eventList},p.handlerFamilyChange=function(t){var e;for(var i in t.changes)switch((e=t.changes[i]).change_type){case 1:p._detailInfo&&(p._detailInfo.property=e.value);break;case 2:var s=p.getMembetInfoByRoleId(e.key);s&&(s.cur_contribution=e.value),e.key==pe.roleID&&pe.setScore(5,e.value);break;case 3:var n;if(p._listToc)for(var o in p._listToc.family_infos)if((n=p._listToc.family_infos[o]).family_id==e.key){n.ranking=e.value;break}pe.user.attr.family_id==e.key&&p._detailInfo&&(p._detailInfo.ranking=e.value);break;case 4:if(p._detailInfo){var a;for(var l in p._detailInfo.buildings)if((a=p._detailInfo.buildings[l]).id==e.key){a.lv=e.value;break}1==e.key&&(p._detailInfo.family_level=e.value)}break;case 5:(s=p.getMembetInfoByRoleId(e.key))&&(s.total_contribution=e.value);break;case 6:if(p._detailInfo&&p._detailInfo.members)for(var r=p._detailInfo.members.length,h=0;h<r;h++){var u=p._detailInfo.members[h];if(u.role_id==e.key){p._detailInfo.members[h].last_offline_time=e.value,p._detailInfo.members[h].online=!1;break}}break;case 7:if(p._detailInfo&&p._detailInfo.members)for(r=p._detailInfo.members.length,h=0;h<r;h++)if((u=p._detailInfo.members[h]).role_id==e.key){p._detailInfo.members[h].online=!0;break}break;case 8:if(p._detailInfo&&p._detailInfo.members)for(r=p._detailInfo.members.length,h=0;h<r;h++)if((u=p._detailInfo.members[h]).role_id==e.key){p._detailInfo.members[h].role_power=e.value;break}break;case 9:p.bossInfo&&(p.bossInfo.left_times=e.value),p.checkRPFamilyBoss();break;case 10:p._copyInfo&&(p._copyInfo.today_top_barrier=Math.max(e.value,p._copyInfo.today_top_barrier)),p.checkRPFamilyCopy();break;case 11:p._copyInfo&&(p._copyInfo.can_recv_daily_rewards=1),p.checkRPFamilyCopy();break;case 12:p._copyInfo&&p._copyInfo.role_top_barrier+1==e.key&&(p._copyInfo.cur_barrier_role_num=e.value);break;case 13:p._copyInfo&&(p._copyInfo.encourage_role_num=e.value);break;case 14:var c;if(p.bossInfo)if(0==e.key)for(var d in p.bossInfo.family_boss)(c=p.bossInfo.family_boss[d]).boss_state=e.value;else for(d in p.bossInfo.family_boss)if((c=p.bossInfo.family_boss[d]).boss_id==e.key){c.boss_state=e.value;break}p.checkRPFamilyBoss();break;case 15:if(p._detailInfo&&p._detailInfo.members)for(r=p._detailInfo.members.length,h=0;h<r;h++)if((u=p._detailInfo.members[h]).role_id==e.key){p._detailInfo.members[h].vip=e.value;break}break;case 16:if(p._detailInfo&&p._detailInfo.members)for(r=p._detailInfo.members.length,h=0;h<r;h++)if((u=p._detailInfo.members[h]).role_id==e.key){p._detailInfo.members[h].sex=e.value;break}break;case 17:if(p._detailInfo&&p._detailInfo.members)for(r=p._detailInfo.members.length,h=0;h<r;h++)if((u=p._detailInfo.members[h]).role_id==e.key){p._detailInfo.members[h].category=e.value;break}}},p.handlerFamilyManagerUpdate=function(t){switch(t.update_type){case 1:if(p._detailInfo){var e,i=0;for(var s in t.update_members){e=t.update_members[s],i=p._detailInfo.members.length;for(var n=0;n<i;n++)if(p._detailInfo.members[n].role_id==e.role_id){p._detailInfo.members.splice(n,1);break}}p._detailInfo.cur_member_num=p._detailInfo.members.length}break;case 2:p._detailInfo&&(p._detailInfo.notice=t.update_string);break;case 3:case 4:var o;if(p._familyRequestList)for(var a in t.request_list){o=t.request_list[a];for(var l=0;l<p._familyRequestList.length;l++)p._familyRequestList[l].role_id==o.role_id&&p._familyRequestList.splice(l,1)}if(p._detailInfo){for(s in t.update_members){e=t.update_members[s];var r=!1;for(i=p._detailInfo.members.length,n=0;n<i;n++)if(p._detailInfo.members[n].role_id==e.role_id){r=!0;break}r||p._detailInfo.members.push(e)}p._detailInfo.cur_member_num=p._detailInfo.members.length}p.checkRPFamilyRequest();break;case 5:for(a in p._familyRequestList=p._familyRequestList||[],t.request_list){for(o=t.request_list[a],r=!1,l=0;l<p._familyRequestList.length;l++)if(p._familyRequestList[l].role_id==o.role_id){r=!0;break}r||p._familyRequestList.push(o)}p.checkRPFamilyRequest();break;case 6:p._detailInfo&&(p._detailInfo.family_name=t.update_string)}},p.handlerFamilyNotice=function(t){switch(t.notice_type){case 1:p._listToc&&(p._listToc.request_family_ids.length=0,pe.user.attr.family_id=t.notice_value);break;case 2:if(p._listToc){var e=p._listToc.request_family_ids.indexOf(t.notice_value);0<e&&p._listToc.request_family_ids.splice(e,1)}break;case 3:p.resetMyFamilyData(),Ol.ins().resetMyFamilyView(),T.dispatch("FAMILY_LEAVE"),Jt.addTip("您已经被请离了"+t.notice_msg);break;case 4:break;case 5:p._buyLogs=p._buyLogs||[];var i=new Object;i.className="p_family_shop_log",i.item_id=t.notice_value,i.role_name=t.notice_msg,p._buyLogs.unshift(i);break;case 6:var s;if(p._listToc&&0<p._listToc.family_infos.length)for(var n in p._listToc.family_infos)(s=p._listToc.family_infos[n]).family_id==t.notice_value&&(s.require_power=parseInt(t.notice_msg))}},p.getShopInfoToc=function(){return p._shopInfoToc},p.handlerFamilyShopInfo=function(t){p._buyLogs=(p._shopInfoToc=t).buy_logs},p.getBuyLogs=function(){return p._buyLogs},p.handlerFamilyShopBuy=function(t){p._shopInfoToc&&(p.getFamilyVO().FamilyBuildDic[3].FamilyBuildLvDic[p.getBuildLvByID(3)].roleNum>p._shopInfoToc.today_buy_times&&++p._shopInfoToc.today_buy_times)},p.handlerMissionInfoToc=function(t){p.initMission=!0,p._familyMissions=[];var e,i=p.getFamilyVO().FamilyMissionArr;if(i)for(var s in t.family_missions){var n;for(var o in e=t.family_missions[s],i)if((n=i[o]).id==e.mission_id){n.nowTimes=e.complete_times,p._familyMissions.push(n);break}}},p.getFamilyMissions=function(){return p._familyMissions},p.handlerFamilyUpdate=function(t){var e;if(p._familyMissions)for(var i in p._familyMissions)if((e=p._familyMissions[i]).id==t.mission.mission_id)return e.nowTimes=t.mission.complete_times,void Jt.addTip(e.reward)},p.handlerFamilyCopyInfo=function(t){p._copyInfo=t,p.nowRound=t.role_top_barrier,p.checkRPFamilyCopy()},p.getFamilyCopyInfo=function(){return p._copyInfo},p.handlerFamilyEncourage=function(t){p._copyInfo&&(p._copyInfo.encourage_role_num=t.encourage_role_num,p._copyInfo.is_encourage=!0)},p.handlerFamilyQuickFinish=function(t){p._copyInfo&&(p._copyInfo.is_quick_finish=t.is_quick_finish,p._copyInfo.today_top_barrier=Math.max(p._copyInfo.today_top_barrier,p._copyInfo.role_top_barrier)),p.checkRPFamilyCopy()},p.handlerFamilyTowerUpdateToc=function(t){p.nowRound=t.role_top_barrier,p._copyInfo&&(p._copyInfo.cur_barrier_role_num=t.cur_barrier_role_num,p._copyInfo.today_top_barrier=t.today_top_barrier,p._copyInfo.role_top_barrier=t.role_top_barrier,p._copyInfo.can_recv_daily_rewards=t.can_recv_daily_rewards),p.checkRPFamilyCopy()},p.handlerFamilyBossInfo=function(t){p.bossInfo=t,p.checkRPFamilyBoss()},p.getFamilyBossInfo=function(){return p.bossInfo},p.checkRPFamilyBoss=function(){if(p.bossInfo)if(0<p.bossInfo.left_times){for(var t in p.bossInfo.family_boss)if(1==p.bossInfo.family_boss[t].boss_state)return void Nt.show("RP_FAMILY_BOSS");Nt.hide("RP_FAMILY_BOSS")}else Nt.hide("RP_FAMILY_BOSS");else Ol.ins().toFamilyBossInfo()},p.checkRPFamilyCopy=function(){p._copyInfo?(p.btnClearShowRed=!p._copyInfo.is_quick_finish&&0<p._copyInfo.role_top_barrier,p.btnGetShowRed=1==p._copyInfo.can_recv_daily_rewards,p.btnClearShowRed||p.btnGetShowRed?Nt.show("RP_FAMILY_COPY"):Nt.hide("RP_FAMILY_COPY")):Ol.ins().toFamilyCopyInfo()},p.checkRPFamilyRequest=function(){if(pe.user.attr.family_id){if(!p._detailInfo)return void Ol.ins().toFamilyDetailTos(pe.user.attr.family_id);if(!p._familyRequestList)return void Ol.ins().toFamilyRequestList();p._familyRequestList&&0<p._familyRequestList.length&&p.getMyMemberInfo()&&(p.getMyMemberInfo().family_title_id==Ln.OWNER||p.getMyMemberInfo().family_title_id==Ln.VOWNER)?Nt.show("RP_FAMILY_REQUEST"):Nt.hide("RP_FAMILY_REQUEST")}},p.checkFamilyBattleRPCanShow=function(){pe.user.attr.family_id&&(-1<p.getFamilyBattleIsStart()&&p.getFamilyBattleIsStart()<20?Ol.ins().toFamilyBattleInfo():-1<p.getFamilyBattleIsStart()&&20<=p.getFamilyBattleIsStart()&&Ol.ins().toFamilyBattleList(),-1<p.getFamilyBattleIsStart()&&_t.addToSecond(p,modules.family.FamilyManager.checkIsOpenFamilyBattle))},p.checkIsOpenFamilyBattle=function(){modules.family.FamilyManager.isFirstServerOpenDay()?_t.removeFromSceond(p,modules.family.FamilyManager.checkIsOpenFamilyBattle):-1<p.getFamilyBattleIsStart()&&20<=p.getFamilyBattleIsStart()&&(_t.removeFromSceond(p,modules.family.FamilyManager.checkIsOpenFamilyBattle),Nt.hide("PR_FAMILY_BATTLE_SIGN_UP"),Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER"),Ol.ins().toFamilyBattleList())},p.checkRPFamilyBattle=function(){if(!modules.family.FamilyManager.isFirstServerOpenDay()&&pe.user.attr.family_id&&!(p.getFamilyBattleIsStart()<=-1)&&p.getFamilyBattleIsStart()<20){p._signUpMembers&&p._signUpMembers.indexOf(pe.roleID)<=-1?Nt.show("PR_FAMILY_BATTLE_SIGN_UP"):Nt.hide("PR_FAMILY_BATTLE_SIGN_UP");var t=modules.family.FamilyManager.getMemberInfoByFamilyId(pe.user.attr.family_id,pe.user.attr.role_id);if(t&&(1==t.family_title_id||2==t.family_title_id)&&p._newSignMembers){var e,i=!1;for(var s in p._newSignMembers){for(var n in e=p._newSignMembers[s],p._familyFightMembers)if(e==p._familyFightMembers[n]){i=!0;break}}if(0==i&&0<p._newSignMembers.length&&p._newSignMembers[p._newSignMembers.length-1]){var o,a=modules.family.FamilyManager.getMemberInfoByFamilyId(pe.user.attr.family_id,p._newSignMembers[p._newSignMembers.length-1]);for(var l in p._familyFightMembers){o=p._familyFightMembers[l];var r=modules.family.FamilyManager.getMemberInfoByFamilyId(pe.user.attr.family_id,o);if(a&&r&&a.role_power>r.role_power)return void Nt.show("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER")}}}}},p.checkRPByFamilyFightWitness=function(){var t=!1;if(Nt.hide("PR_FAMILY_BATTLE_SIGN_UP"),Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER"),Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING"),p._battleFamilyList&&1==p._battleFamilyList.length)Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING");else if(p._battleRoundInfo){var e;for(var i in p._battleRoundInfo)if((e=p._battleRoundInfo[i]).family_id_1!=pe.user.attr.family_id&&e.family_id_2!=pe.user.attr.family_id)t=!1;else if(0==e.winner_family_id){t=!0;break}0==t?Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING"):Nt.show("PR_FAMILY_BATTLE_SET_FIGHT_ING")}else Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING")},p.setFamilyFightMemberPos=function(t,e){if(1<=t&&t<=5){var i=0;for(var s in p._familyFightMembers){if(p._familyFightMembers[s]==e&&t!=i+1){p._familyFightMembers[i+1]=Ln.FAMILY_FIGHT_POS_NOT_MEMBERS;break}i++}p._familyFightMembers[t]=e,T.dispatch("FAMILY_FIGHT_CHANGE_MEMBER")}},p.cleanFamilyFightMemberPos=function(){for(var t=1;t<=5;t++)p._familyFightMembers[t]=Ln.FAMILY_FIGHT_POS_NOT_MEMBERS;T.dispatch("FAMILY_FIGHT_CHANGE_MEMBER")},p.getSignMembers=function(){return p._signUpMembers=p._signUpMembers||[]},p.setSignMembers=function(t){var e;for(var i in p._newSignMembers=[],t)e=t[i],p._signUpMembers&&-1==p._signUpMembers.indexOf(e)&&p._newSignMembers.push(e);p._signUpMembers=t,p.checkRPFamilyBattle()},p.setBattleMembers=function(t){if(p._battleMembers=t,p.cleanFamilyFightMemberPos(),!(p._battleMembers.length<=0))for(var e=0,i=t.length;e<i;e++){var s=t[e],n=s.id,o=s.val;p.setFamilyFightMemberPos(o,n)}},p.getBattleMembers=function(){return p._battleMembers=p._battleMembers||[]},p.setBattleRound=function(t){p._battleRound=t},p.setBattleFightingId=function(t){p._battleFightingId=t},p.getBattleFightingId=function(){return p._battleFightingId=p._battleFightingId||0},p.saveFamilyBattleDetails=function(t,e,i){(p._battleDetails=p._battleDetails||{})[t]={battleRound:e,details:i}},p.getBattleDetailsByFamilyId=function(t){return p._battleDetails&&null!=p._battleDetails[t]?p._battleDetails[t]:null},p.setOtherFamilyDetail=function(t){p.otherFamilyInfo=p.otherFamilyInfo||new P;var e=t.family_id;p.otherFamilyInfo.set(e,t)},p.getOtherFamilyDetail=function(t){return-1!=(p.otherFamilyInfo=p.otherFamilyInfo||new P).indexOf(t)?p.otherFamilyInfo.get(t):null},p.setBattleFamilyList=function(t){p._battleFamilyList=t,p.checkRPFamilyBattle()},p.getBattleFamilyList=function(){return p._battleFamilyList=p._battleFamilyList||[]},p.setBattleRoundInfo=function(t){p._battleRoundInfo=t,p.checkRPByFamilyFightWitness()},p.getBattleRoundInfo=function(){return p._battleRoundInfo=p._battleRoundInfo||[]},p.getMemberInfoByFamilyId=function(t,e){var i=modules.family.FamilyManager.getOtherFamilyDetail(t);if(null!=i){var s,n=i.members;for(var o in n)if((s=n[o]).role_id==e)return s}return null},p.getFamilyNameById=function(t){if(t==pe.user.attr.family_id)return pe.user.attr.family_name;var e=modules.family.FamilyManager.getOtherFamilyDetail(t);return e?e.family_name:"??????"},p.getIsAutoEnterFight=function(){return p._isAutoEnterFightToWitness},p.setIsAutoEnterFight=function(){p._isAutoEnterFightToWitness=!p._isAutoEnterFightToWitness},p.setWitnessCds=function(t,e){(p._witnessSkillCds=p._witnessSkillCds||{})[t]=e},p.getWitnessCdBySkillId=function(t){return 0<=(p._witnessSkillCds=p._witnessSkillCds||{})[t]?p._witnessSkillCds[t]:0},p.setWitnessInfoArr=function(t){p._witnessInfoArr=t},p.getWitnessInfoArr=function(){return p._witnessInfoArr=p._witnessInfoArr||[]},p.setNextBattleStartTime=function(t){p._nextBattleStartTime=t},p.getNextBattleStartTime=function(){return p._nextBattleStartTime=p._nextBattleStartTime||0},p.setNextBattleDetail=function(t){p._nextFightBd=t},p.getNextBattleDetail=function(){return p._nextFightBd},p.getFamilyBattleIsStart=function(){var t=ya.serverTime,e=x.getTotalTime(t),i=e[0],s=e[1],n=e[2],o=e[3],a=e[4],l=new Date(i,s,n).getDay();return 2!=l&&5!=l?-1:20==o&&a<30?19:o},p.isFirstServerOpenDay=function(){return!(0<p._mergeTimesOfServer)&&p._severOpenDays<=1},p._listToc=null,p._detailInfo=null,p._buyLogs=null,p._shopInfoToc=null,p._eventList=null,p._familyRequestList=null,p._skillDic=null,p.myP_mem=null,p.isWillOverForFamilyCopy=!1,p.canEditAnno=!0,p._signUpMembers=null,p._battleMembers=null,p._battleRound=NaN,p._battleDetails=null,p._battleFamilyList=null,p._battleRoundInfo=null,p._battleProgress=0,p._battleTimeStamp=NaN,p.otherFamilyInfo=null,p._isAutoEnterFightToWitness=!0,p._witnessSkillCds=null,p._witnessInfoArr=null,p._nextFightBd=null,p._battleFightingId=0,p._nextBattleStartTime=NaN,p._battleTipIsShow=!1,p._isWitnessFamilyBattle=!1,p._isAutoExitFamilyBattle=!1,p._witnessFamilyId=NaN,p._witnessBattleRoundNum=0,p._severOpenDays=NaN,p._mergeTimesOfServer=NaN,p.freshTime=0,p.familyVO=null,p._familyMissions=null,p.initMission=!1,p._copyInfo=null,p.nowRound=0,p.bossInfo=null,p.btnGetShowRed=!1,p.btnClearShowRed=!1,p._newSignMembers=null,_(p,["_familyFightMembers",function(){return this._familyFightMembers={1:Ln.FAMILY_FIGHT_POS_NOT_MEMBERS,2:Ln.FAMILY_FIGHT_POS_NOT_MEMBERS,3:Ln.FAMILY_FIGHT_POS_NOT_MEMBERS,4:Ln.FAMILY_FIGHT_POS_NOT_MEMBERS,5:Ln.FAMILY_FIGHT_POS_NOT_MEMBERS}}]),p}(),Nn=function(){function l(){}return w(l,"modules.family.familyPetEmbattle.FamilyPetEmbattleMgr"),I(1,l,"battleInfo",function(){return l._battleInfo}),I(1,l,"members",function(){return l._members}),I(1,l,"materialAssigns",function(){return l._materialAssigns}),I(1,l,"logs",function(){return l._logs}),I(1,l,"lastRoleRank",function(){return l._lastRoleRank}),I(1,l,"lastFamilyRank",function(){return l._lastFamilyRank}),I(1,l,"nowFamilyRank",function(){return l._nowFamilyRank}),I(1,l,"nowRoleRank",function(){return l._nowRoleRank}),l.handlerMaterialInfo=function(t){l.materialInfo=t},l.getMaterialInfo=function(){return l.materialInfo},l.checkSignRP=function(){if(l.initXML(),2==l.getNowBattleState())l.battleInfo.is_sign_up?Nt.hide("PR_FAMILY_BATTLE_SIGN"):Nt.show("PR_FAMILY_BATTLE_SIGN");else if(1==l.getNowBattleState()){var t=new Date;t.setTime(1e3*ya.serverTime);var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();_t.setTimeout(l,modules.family.familyPetEmbattle.FamilyPetEmbattleMgr.checkSignRP,null,1e3*(l.gameTimeArr[1]-e))}else Nt.hide("PR_FAMILY_BATTLE_SIGN")},l.checkFightRP=function(){if(l.initXML(),3==l.getNowBattleState())Nt.show("PR_FAMILY_BATTLE_FIGHT");else if(l.getNowBattleState()<3){var t=new Date;t.setTime(1e3*ya.serverTime);var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),i=0;l.gameTimeArr&&l.gameTimeArr[2]&&(i=1e3*(l.gameTimeArr[2]-e)),_t.setTimeout(l,modules.family.familyPetEmbattle.FamilyPetEmbattleMgr.checkFightRP,null,i)}else Nt.hide("PR_FAMILY_BATTLE_FIGHT")},l.handlerRoleRankUpdate=function(t){l._nowRoleRank=l._nowRoleRank||[];var e,i=!1;for(var s in t.role_ranks){e=t.role_ranks[s],i=!1;for(var n=0;n<l._nowRoleRank.length;n++)if(l._nowRoleRank[n].role_id==e.role_id){i=!0,l._nowRoleRank[n]=e;break}i||l._nowRoleRank.push(e)}l._nowRoleRank.sort(l.updateRoleSort)},l.handlerRoleRank=function(t){switch(t.rank_type){case 1:(l._lastRoleRank=t.role_ranks).sort(l.updateRoleSort);break;case 2:(l._nowRoleRank=t.role_ranks).sort(l.updateRoleSort)}},l.handlerFamilyRank=function(t){switch(t.rank_type){case 1:(l._lastFamilyRank=t.family_ranks).sort(l.updateFamilySort);break;case 2:(l._nowFamilyRank=t.family_ranks).sort(l.updateFamilySort)}},l.handlerFamilyRankUpdate=function(t){l._nowFamilyRank=l._nowFamilyRank||[];var e,i=!1;for(var s in t.family_ranks){e=t.family_ranks[s],i=!1;for(var n=0;n<l._nowFamilyRank.length;n++)if(l._nowFamilyRank[n].family_id==e.family_id){i=!0,l._nowFamilyRank[n]=e;break}i||l._nowFamilyRank.push(e)}l._nowFamilyRank.sort(l.updateFamilySort)},l.updateFamilySort=function(t,e){return t.score==e.score?t.win_times==e.win_times?t.family_id<e.family_id?-1:1:t.win_times>e.win_times?-1:1:t.score>e.score?-1:1},l.updateRoleSort=function(t,e){return t.win_times==e.win_times?t.score==e.score?t.role_id<e.role_id?-1:1:t.score>e.score?-1:1:t.win_times>e.win_times?-1:1},l.handlerBattleInfo=function(t){(l._battleInfo=t)&&2==t.state&&((l.battleEnd=new Object).className="m_family_pet_battle_end_toc",l.battleEnd.rank_first_family=t.rank_first_family,l.battleEnd.rank_first_role=t.rank_first_role,l.battleEnd.rank_first_role_family=t.rank_first_role_family)},l.handlerBattleMembers=function(t){l._members=t.all_members},l.handlerBattleLogs=function(t){l._logs=t.role_logs},l.handlerBattleLogUpdate=function(t){l._logs=l._logs||[];var e,i=!1;for(var s in t.role_logs){e=t.role_logs[s],i=!1;for(var n=0;n<l._logs.length;n++)if(l._logs[n].pet_fight_log_id==e.pet_fight_log_id){i=!0;break}i||l._logs.unshift(e)}},l.getRoleRankIndex=function(){if(l._lastRoleRank)for(var t=0;t<l._lastRoleRank.length;t++)if(l._lastRoleRank[t].role_id==pe.roleID)return""+(t+1);return"暂无"},l.getFamilyRankIndex=function(){if(l._lastFamilyRank)for(var t=0;t<l._lastFamilyRank.length;t++)if(l._lastFamilyRank[t].family_id==pe.user.attr.family_id)return""+(t+1);return"暂无"},l.handlerMaterialAssign=function(t){l._materialAssigns=t.assigns},l.handlerMaterialRequest=function(t){l.materialInfo&&(l.materialInfo.requests=t.requests)},l.getMaterialRequestArr=function(t){var e,i=[];if(l.materialInfo)for(var s in l.materialInfo.requests)(e=l.materialInfo.requests[s]).item_id==t&&i.push(e);return i},l.getMaterialRequest=function(t,e){var i;if(l.materialInfo)for(var s in l.materialInfo.requests)if((i=l.materialInfo.requests[s]).item_id==t&&i.role_id==e)return i;return null},l.getMaterialRequestByRole=function(t){var e;if(l.materialInfo)for(var i in l.materialInfo.requests)if((e=l.materialInfo.requests[i]).role_id==pe.roleID)return e;return null},l.canRequset=function(t){var e;if(l.materialInfo)for(var i in l.materialInfo.requests)if((e=l.materialInfo.requests[i]).role_id==pe.roleID&&t==e.item_id)return!1;return!0},l.getSignTime=function(){return l.initXML(),x.formatHM(l.gameTimeArr[1])},l.getSignEndTime=function(){return l.initXML(),x.formatHM(l.gameTimeArr[2])},l.getFightEndTime=function(){return l.initXML(),x.formatHM(l.gameTimeArr[3])},l.getFightDeadLine=function(){l.initXML();var t=new Date;t.setTime(1e3*ya.serverTime);var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();return l.gameTimeArr[2]>e?x.formatTime(l.gameTimeArr[2]-e):""},l.initXML=function(){if(!l.battleInfoVO){var t,e=Ra.startEncode("battleInfo.xml");for(var i in e)(t=e[i])instanceof xml.BattleInfoVO?l.battleInfoVO=t:t instanceof xml.BattleRewardVO&&(l.battleRewardVO=t);if(l.battleInfoVO){l.gameTimeArr=l.battleInfoVO.timeState.split(",");for(var s=0;s<l.gameTimeArr.length;s++){var n=l.gameTimeArr[s].split("."),o=parseFloat(n[0]),a=1<n.length?parseFloat(n[1]):0;l.gameTimeArr[s]=60*o*60+60*a}}}},l.getBattleRewardVO=function(){return l.initXML(),l.battleRewardVO},l.getNowBattleState=function(){if(l.initXML(),l.gameTimeArr){var t=new Date;t.setTime(1e3*ya.serverTime);for(var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),i=0;i<l.gameTimeArr.length;i++)if(e<l.gameTimeArr[i])return i}return 0},l.getMaterialPKV=function(t){var e;if(l.materialInfo)for(var i in l.materialInfo.items)if((e=l.materialInfo.items[i]).id==t)return e;return null},l.handlerPetBattleInfoUpdate=function(t){if(l._battleInfo){var e,i;if(t.families&&0<t.families.length)if(1==t.op_type)for(var s in t.families){e=t.families[s];for(var n=!1,o=0;o<l._battleInfo.sign_up_families.length;o++)if(l._battleInfo.sign_up_families[o].family_id==e.family_id){0<e.sign_up_num?l._battleInfo.sign_up_families[o]=e:l._battleInfo.sign_up_families.splice(o,1),n=!0;break}!n&&0<e.sign_up_num&&l._battleInfo.sign_up_families.push(e)}else for(s in t.families)for(e=t.families[s],o=0;o<l._battleInfo.sign_up_families.length;o++)if(l._battleInfo.sign_up_families[o].family_id==e.family_id){l._battleInfo.sign_up_families.splice(o,1);break}if(t.roles&&0<t.roles.length)if(1==t.op_type)for(var a in t.roles){for(i=t.roles[a],n=!1,o=0;o<l._battleInfo.sign_up_roles.length;o++)if(l._battleInfo.sign_up_roles[o].role_id==i.role_id){l._battleInfo.sign_up_roles[o]=i,n=!0;break}n||l._battleInfo.sign_up_roles.push(i)}else for(a in t.roles)for(i=t.roles[a],o=0;o<l._battleInfo.sign_up_roles.length;o++)if(l._battleInfo.sign_up_roles[o].role_id==i.role_id){l._battleInfo.sign_up_roles.splice(o,1);break}}},l.getLogVOByPetLogID=function(t){var e;if(l.logs)for(var i in l.logs)if((e=l.logs[i]).pet_fight_log_id==t)return e;return null},l.handlerPetBattleMemberUpdate=function(t){var e;if(l._members&&(t.members&&0<t.members.length))if(1==t.op_type)for(var i in t.members){e=t.members[i];for(var s=!1,n=0;n<l._members.length;n++)if(l._members[n].role_id==e.role_id){l._members[n]=e,s=!0;break}s||l._members.push(e)}else for(i in t.members)for(e=t.members[i],n=0;n<l._members.length;n++)if(l._members[n].role_id==e.role_id){l._members.splice(n,1);break}},l.materialInfo=null,l.battleEnd=null,l._lastRoleRank=null,l._nowRoleRank=null,l._lastFamilyRank=null,l._nowFamilyRank=null,l._battleInfo=null,l._members=null,l._logs=null,l._materialAssigns=null,l.battleRewardVO=null,l.battleInfoVO=null,l.gameTimeArr=null,l}(),Vn=function(){function s(){}return w(s,"modules.fcm.FcmManager"),I(1,s,"baseCfg",function(){return s._baseCfg||s.initXML(),s._baseCfg}),I(1,s,"onlineTime",null,function(t){s._onlineTime=t,_t.addToSecond(s,s.addOnlineTime)}),I(1,s,"leftOnlieTime",function(){var t=0;if(N.isFcmLimit()){var e=ya.serverTimeMs,i=new Date(e);return t=6==i.getDay()||0==i.getDay()?s.baseCfg.timeLimitWE:s.baseCfg.timeLimit,0==G.fcm_info.is_identified&&(t=s.baseCfg.visitLimit),(t-=s._onlineTime)&&_t.setTimeout(s,function(){T.dispatch("FCM_COUNT_DOWN_END")},null,1e3*t),0<t?t:0}return 0}),s.addOnlineTime=function(){s._onlineTime++},s.initXML=function(){var t=Ra.startEncode("fcm.xml");if(t)for(var e=0;e<t.length;e++)t[e]instanceof xml.FcmBaseVO&&(s._baseCfg=t[e])},s.accountMonthPay=NaN,s.isGetReward=!1,s._onlineTime=NaN,s._baseCfg=null,s}(),Bn=function(){function l(){}return w(l,"modules.firstCharge.FirstChargeManager"),l.handlerInfo=function(t){var e,i=l.getChargeArr();for(var s in t.gifts){var n;for(var o in e=t.gifts[s],i)if(n=i[o],e.id==n.id){n.state=e.val;break}}l.checkFirstChargeRP()},l.checkFirstChargeRP=function(){for(var t in l._chargeArr)if(1==l._chargeArr[t].state)return void T.dispatch("ICON_REDPOINT_CHANGE",[4005,"RP_FIRSTCHARGE",!0]);T.dispatch("ICON_REDPOINT_CHANGE",[4005,"RP_FIRSTCHARGE",!1])},l.getChargeArr=function(){return l.init(),l._chargeArr},l.getShineChargeGoods=function(){var t,e=pe.getPalByIndex(0);if(e){var i,s="awardArr"+e.ext.category;for(var n in l.getChargeArr()){var o;for(var a in t=t||[],i=l.getChargeArr()[n][s])0!=(o=i[a]).reserve&&t.push(o)}}return t},l.handlerFetch=function(t){var e,i=l.getChargeArr();for(var s in i)if((e=i[s]).id==t.gift_id){e.state=2;break}l.checkFirstChargeRP()},l.handlerPayInfo=function(t){var e=ka.getForeverCondition(1199),i=ka.getForeverCondition(1201),s=Ca.isHasCard(),n=Io.endTime>ya.serverTime;if(t){for(var o=0;o<t.length;o++)9999999999==Ca.endTime||0==s?1199!=t[o].pay_id&&1200!=t[o].pay_id||(t.splice(o,1),o--):0<e?1200==t[o].pay_id&&(t.splice(o,1),o--):1199==t[o].pay_id&&(t.splice(o,1),o--),9999999999==Io.endTime||0==n?1201!=t[o].pay_id&&1202!=t[o].pay_id||(t.splice(o,1),o--):0<i?1202==t[o].pay_id&&(t.splice(o,1),o--):1201==t[o].pay_id&&(t.splice(o,1),o--);l._chargeBackList=t}},l.getPayInfoList=function(){return l._chargeBackList},l.init=function(){var t;if(!l._chargeArr)for(var e in l._chargeArr=Ra.startEncode("chargeBack.xml"),l._chargeBackDic=l._chargeBackDic||{},l._chargeArr)t=l._chargeArr[e],l._chargeBackDic[t.id]=t},l.getChargeBackVO=function(t){return l.init(),l._chargeBackDic?yt.isWX&&l._chargeBackDic.hasOwnProperty(t+"_7")?l._chargeBackDic[t+"_7"]:Bt.isKeYi()&&l._chargeBackDic.hasOwnProperty(t+"_530")?l._chargeBackDic[t+"_530"]:Bt.isHuaWei()&&l._chargeBackDic.hasOwnProperty(t+"_353")?l._chargeBackDic[t+"_353"]:l._chargeBackDic[t]:null},l.getChargeBackVOByStrID=function(t){var e;if(l.init(),l._chargeArr)for(var i in l._chargeArr)if((e=l._chargeArr[i]).strID==t)return e;return null},l.handlerPay=function(t){var e,i=l.getChargeBackVO(t.item_id);if(i)if(0<i.extraReward);else if(l._chargeBackList)for(var s in l._chargeBackList)if((e=l._chargeBackList[s]).pay_id==t.item_id){if(l.isFirstCharge=!1,0!=e.extra_reward){l.isFirstCharge=!0;var n=new Ee;n.msg="充值成功，双倍返利请在信件查收",n.yesLabel="确定",n.showRight=!1,n.align="center",EF.showVO(n)}e.extra_reward=0}},l.handlerPayInfoFanTi=function(t){var e=ka.getForeverCondition(1199),i=ka.getForeverCondition(1201),s=Ca.isHasCard(),n=Io.endTime>ya.serverTime;if(t){for(var o=0;o<t.length;o++)9999999999==Ca.endTime||0==s?1199!=t[o].pay_id&&1200!=t[o].pay_id||(t.splice(o,1),o--):0<e?1200==t[o].pay_id&&(t.splice(o,1),o--):1199==t[o].pay_id&&(t.splice(o,1),o--),9999999999==Io.endTime||0==n?1201!=t[o].pay_id&&1202!=t[o].pay_id||(t.splice(o,1),o--):0<i?1202==t[o].pay_id&&(t.splice(o,1),o--):1201==t[o].pay_id&&(t.splice(o,1),o--);l._chargeBackListFanTi=t}},l.getPayInfoListFanTi=function(){return l._chargeBackListFanTi},l.handlerPayFanTi=function(t){var e,i=l.getChargeBackVO(t.item_id);if(i)if(0<i.extraReward);else if(l._chargeBackList)for(var s in l._chargeBackList)(e=l._chargeBackList[s]).pay_id==t.item_id&&(e.extra_reward=0)},l.getFanTiChargeBackVOInfoArray=function(){var t=[];if(l.init(),l._chargeBackDic){var e,i=0,s=0;for(var n in Bt.isTw()?"eyouweiduan"==G.pf||"eyouyoule"==G.pf?(i=9201,s=9300):"eyouios"==G.pf&&(i=9300,s=9400):(i=9100,s=9200),l._chargeBackDic)if((e=l._chargeBackDic[n]).id>=i&&e.id<s){var o=new Object;o.className="p_general_pay",o.pay_id=parseInt(e.id),o.extra_reward=e.extraReward,t.push(o)}}return t},l.hasNewFirCharge=!1,l.starCoin=0,l.isFirstCharge=!1,l._chargeArr=null,l._chargeBackList=null,l._chargeBackDic=null,l.wxAgent=7,l.keyiUpf=530,l.huaweiUpf=353,l._chargeBackListFanTi=null,l}(),Mn=function(){function t(){}return w(t,"modules.firstCharge.newFirstCharge.NewFirstChargeConst"),_(t,["goodsArr",function(){return this.goodsArr=[[13000146,1],[13000008,128],[10201112,1],[10201102,10],[10201162,10],[10201161,10]]},"payIDArr",function(){return this.payIDArr=[1098,1099,1100,1101]}]),t}(),Fn=function(){function t(){}return w(t,"modules.firstCharge.newFirstCharge.NewFirstChargeMgr"),t.argStr2Arr=function(t){var e=[];if(t)for(var i=t.split("#"),s=0;s<i.length;s++)e.push(i[s]);return e},t.isShowNewIcon=!1,t.isShowADView=!1,t}(),Un=(function(){function t(){}w(t,"modules.footPrint.FootPrintConst")}(),function(){function c(){}return w(c,"modules.footPrint.FootPrintMgr"),I(1,c,"footPrintCfgs",function(){return c._footPrintCfgs||c.initXML(),c._footPrintCfgs}),I(1,c,"purifyCfgs",function(){return c._footPrintPurifyCfgs||c.initXML(),c._footPrintPurifyCfgs}),I(1,c,"changeCfgs",function(){return c._footPrintChangeCfgs||c.initXML(),c._footPrintChangeCfgs}),c.getFootPrintVO=function(t){for(var e=0;e<c.footPrintList.length;e++)if(t==c.footPrintList[e].foot_id)return c.footPrintList[e];return null},c.getFootCfg=function(t){for(var e=0;e<c.footPrintCfgs.length;e++)if(t==c.footPrintCfgs[e].itemId)return c.footPrintCfgs[e];return null},c.getFootListByColor=function(t,e){for(var i=[],s=0;s<c.footPrintCfgs.length;s++)t==c.footPrintCfgs[s].color&&(c.footPrintCfgs[s].type=e,i.push(c.footPrintCfgs[s]));return i},c.getFootPurifyAttr=function(t,e){var i=c.getFootPurifyCfg(t,e);return i?i.getAttrs():null},c.getFootPurifyCost=function(t,e){var i=c.getFootPurifyCfg(t,e);return i?i.pcost:0},c.getFootChangeCost=function(t,e){var i=c.getFootChangeCfg(t,e);return i?i.ccost:0},c.getFootChangeCfg=function(t,e){for(var i=0;i<c.changeCfgs.length;i++)if(c.changeCfgs[i].footId==t&&c.changeCfgs[i].lv==e)return c.changeCfgs[i];return null},c.getFootChangeAttr=function(t,e){var i=c.getFootChangeCfg(t,e);return i?i.getAttrs():null},c.getFootPurifyCfg=function(t,e){for(var i=0;i<c.purifyCfgs.length;i++)if(c.purifyCfgs[i].footId==t&&c.purifyCfgs[i].lv==e)return c.purifyCfgs[i];return null},c.getColorArr=function(){for(var t=[],e=0;e<c.footPrintCfgs.length;e++){var i=U.COLOR_STR[c.footPrintCfgs[e].color]+"色";-1==t.indexOf(i)&&t.push(i)}return t},c.checkRp=function(){for(var t=!1,e=!1,i=[],s=[],n=0;n<c.footPrintCfgs.length;n++){var o=c.footPrintCfgs[n],a=c.getFootPrintVO(o.id);if(a)a.refine_level<10&&(r=c.getFootPurifyCfg(o.id,a.refine_level+1).pcost)<=(l=pe.gold)&&-1==i.indexOf(o.color)&&i.push(o.color),a.purify_level<3&&(r=c.getFootChangeCfg(o.id,a.purify_level+1).ccost)<=(l=xo.getGoodsNumByTypeID(o.itemId))&&(e=!0,-1==s.indexOf(o.color)&&s.push(o.color));else{var l=xo.getGoodsNumByTypeID(o.itemId),r=c.getFootPurifyCfg(o.id,0).pcost;r<=l&&(t=!0,-1==i.indexOf(o.color)&&i.push(o.color))}}t?Nt.show("RP_FOOT_PRINT_PURIFY"):Nt.hide("RP_FOOT_PRINT_PURIFY"),e?Nt.show("RP_FOOT_PRINT_CHANGE"):Nt.hide("RP_FOOT_PRINT_CHANGE");var h=c.getColorArr().length;for(n=0;n<h;n++){var u=n+c.tabColorOffset;-1!=i.indexOf(u)?Nt.show("RP_FOOT_PRINT_PURIFY_"+n):Nt.hide("RP_FOOT_PRINT_PURIFY_"+n),-1!=s.indexOf(u)?Nt.show("RP_FOOT_PRINT_CHANGE_"+n):Nt.hide("RP_FOOT_PRINT_CHANGE_"+n)}},c.initXML=function(){var t=Ra.startEncode("footPrint.xml");if(t){c._footPrintCfgs=[],c._footPrintPurifyCfgs=[],c._footPrintChangeCfgs=[];for(var e=0;e<t.length;e++)t[e]instanceof xml.FootPrintVO?c._footPrintCfgs.push(t[e]):t[e]instanceof xml.FootPrintPurifyVO?c._footPrintPurifyCfgs.push(t[e]):t[e]instanceof xml.FootPrintChangeVO&&c._footPrintChangeCfgs.push(t[e])}},c.sortFp=function(t,e){if(t.id==c.curFootPrint)return-1;if(e.id==c.curFootPrint)return 1;var i=c.getFootPrintState(t),s=c.getFootPrintState(e);if(i==s&&i<1){var n=c.getFootPrintVO(t.id).refine_level,o=c.getFootPrintVO(e.id).refine_level;return n!=o?n<o?1:-1:0}return i!=s?i<s?-1:1:0},c.getFootPrintState=function(t){return c.getFootPrintVO(t.id)?0:1},c.footPrintList=[],c.curFootPrint=0,c.tabColorIdx=0,c.tabItemIdx=0,c.tabColorOffset=3,c.searchTxt="",c._footPrintCfgs=null,c._footPrintPurifyCfgs=null,c._footPrintChangeCfgs=null,c}()),Gn=function(){function r(){}return w(r,"modules.friend.achievement.FriendAchManager"),r.getAchState=function(t){if(Ue.checkAchievementIsGotById(t))return 2;var e=Math.floor(t/1e3),i=Ue.getPAchievementByTypeId(e),s=jn.getAchievementVOById(t);return i&&s&&s.tarNum<=i.val?1:0},r.checkRP=function(){var t=r.checkRPRequest(),e=r.checkRPTarget();0==t&&0==e&&ya.isOpenShare(0,2)&&Nt.hide("RP_FRIEND_ACHIEVEMENT")},r.checkRPTarget=function(){for(var t,e=jn.getAchievementGroupVOsByType(2),i=0;i<e.length;i++){var s;for(var n in e[i],e){var o;for(var a in s=e[n],(t=jn.getAchievementGroupVO(s)).achIds){if(o=t.achIds[a],1==r.getAchState(o))return ya.isOpenShare(0,2)&&Nt.show("RP_FRIEND_ACHIEVEMENT"),Nt.show("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_2"),!0}}}return Nt.hide("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_2"),!1},r.checkRPRequest=function(){for(var t,e,i=jn.getAchievementGroupVOsByType(1),s=0;s<i.length;s++){var n;for(var o in e=i[s]){var a;for(var l in n=e[o],(t=jn.getAchievementGroupVO(n)).achIds){if(a=t.achIds[l],1==r.getAchState(a))return ya.isOpenShare(0,2)&&Nt.show("RP_FRIEND_ACHIEVEMENT"),Nt.show("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_1"),!0}}}return Nt.hide("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_1"),!1},r}(),Hn=function(){function e(){}return w(e,"modules.friend.base.FriendBaseManager"),e.checkAddBtnRedPoint=function(){var t=go.getNextFuncPreview();t&&7==t.ord&&0==e.isOpenAddPanel?Nt.show("RP_FRIEND_FIRST_OPEN_ADD_PANEL"):Nt.hide("RP_FRIEND_FIRST_OPEN_ADD_PANEL")},e.recommendFriends=null,e.isNotice=NaN,e.isReject=NaN,e.isOpenAddPanel=!1,e}(),Wn=function(){function h(){}return w(h,"modules.friend.box.FriendBoxManager"),h.setInfoTocVO=function(t){null==h._infoTocVO&&(h._infoTocVO=t),1==t.op_type?(h._infoTocVO.buy_list=t.buy_list,h._infoTocVO.search_list=t.search_list,h._infoTocVO.refresh_ts=t.refresh_ts,h._infoTocVO.open_times=t.open_times):2==t.op_type&&(h._infoTocVO.help_list=t.help_list.sort(h.sortHelpList))},h.sortHelpList=function(t,e){return t.state>e.state?-1:t.state<e.state?1:0},h.updateInfoTocVOByRefresh=function(t){h._infoTocVO.buy_list=t,h._infoTocVO.refresh_times++},h.updateInfoTocVOByReward=function(t,e){switch(t){case 1:for(var i=0;i<h._infoTocVO.search_list.length;i++)if(h._infoTocVO.search_list[i].id==e){h._infoTocVO.search_list.splice(i,1);break}break;case 2:for(var s=0;s<h._infoTocVO.help_list.length;s++)if(h._infoTocVO.help_list[s].id==e){h._infoTocVO.help_list.splice(s,1);break}}},h.updateInfoTocVOByHelp=function(t,e,i,s){if(null!=h._infoTocVO)if(0==s)for(var n,o,a=0;a<h._infoTocVO.search_list.length;a++)(n=h._infoTocVO.search_list[a]).id==e&&(n.help_role_name=i,o=modules.friend.box.FriendBoxManager.getBoxVOById(n.type_id),1==t?(n.state=1,n.finish_ts=ya.serverTime+o.time):2==t&&(n.state=1,n.finish_ts=ya.serverTime));else for(var l,r=0;r<h._infoTocVO.help_list.length;r++)if((l=h._infoTocVO.help_list[r]).id==e){1==t?(o=modules.friend.box.FriendBoxManager.getBoxVOById(l.type_id),l.finish_ts=ya.serverTime+o.time,l.state=1):2==t&&(l.finish_ts=ya.serverTime,l.state=2);break}},h.updateInfoTocVOByBuy=function(t){for(var e,i=0;i<h._infoTocVO.buy_list.length;i++)if((e=h._infoTocVO.buy_list[i]).id==t){h._infoTocVO.buy_list.splice(i,1);break}if(e){var s=new Object;s.className="p_friend_box",s.id=t,s.type_id=e.val,h._infoTocVO.search_list.push(s)}},h.getCurrSeekNum=function(){return h._infoTocVO?h._infoTocVO.open_times:0},h.getRefreshDatas=function(){return h._infoTocVO?h._infoTocVO.buy_list:[]},h.getSearchDatas=function(){return h._infoTocVO?h._infoTocVO.search_list:[]},h.getRefreshTimes=function(){return h._infoTocVO?h._infoTocVO.refresh_times:0},h.getRefreshTime=function(){return h._infoTocVO?h._infoTocVO.refresh_ts:0},h.getRefreshListDatas=function(){return h._infoTocVO?h._infoTocVO.buy_list:[]},h.getIngListDatas=function(){return h._infoTocVO?h._infoTocVO.search_list:[]},h.getHelpListDatas=function(){return h._infoTocVO?h._infoTocVO.help_list:[]},h.getBoxVOById=function(t){var e,i=jn.friendBoxVOs;for(var s in i)if((e=i[s]).id==t)return e;return null},h.getSeekCost=function(){var t,e=0;if(h._infoTocVO)for(var i in h._infoTocVO.search_list)(0==(t=h._infoTocVO.search_list[i]).state||1==t.state&&0<t.finish_ts&&t.finish_ts>ya.serverTime)&&e++;return parseInt(jn.friendBaseVO.boxSeekCosts[e])},h.getRefreshCost=function(t){return t>=jn.friendBaseVO.boxRefreshCosts.length?parseInt(jn.friendBaseVO.boxRefreshCosts[jn.friendBaseVO.boxRefreshCosts.length-1]):parseInt(jn.friendBaseVO.boxRefreshCosts[t])},h._infoTocVO=null,h}(),qn=function(){function n(){}return w(n,"modules.friend.cross.FriendCrossMgr"),I(1,n,"friends",function(){return n._friends=n._friends||[]},function(t){n._friends=t,n.sortFriendList()}),I(1,n,"blacks",function(){return n._blacks=n._blacks||[]},function(t){n._blacks=t}),I(1,n,"requests",function(){return n._requests=n._requests||[]},function(t){n._requests=t}),n.sortFriendList=function(){n.friends&&1<n.friends.length&&(n._friends=n.friends.sort(n.sortByOnline))},n.sortByOnline=function(t,e){var i=ws.checkPrivateChatRedPointByRoleId(t.role_id),s=ws.checkPrivateChatRedPointByRoleId(e.role_id);return 0==i&&s?1:i&&0==s?-1:0<t.online?0<e.online?t.online>e.online?1:t.online<e.online?-1:0:1:0<e.online?-1:0},n.updateFriendsByNotice=function(t,e){var i=n.getFriendByRoleId(t);if(i)switch(e.id){case 1:i.online=0;break;case 2:i.online=1;break;case 3:i.vip_lv=e.val;break;case 4:i.avatar_frame=e.val;break;case 5:i.favor=e.val}},n.getFriendByRoleId=function(t){var e;for(var i in n.friends)if((e=n.friends[i]).role_id==t)return e;return null},n.isCrossFriend=function(t){for(var e in n.friends)if(n.friends[e].role_id==t)return!0;return!1},n.updateFriendsByDelete=function(t){for(var e=0;e<n.friends.length;e++)if(n.friends[e].role_id==t){n.friends.splice(e,1);break}n.sortFriendList()},n.updateFriendsByBlack=function(t){for(var e,i=!1,s=0;s<n.friends.length;s++)if((e=n.friends[s]).role_id==t){n.blacks.push(e),n.friends.splice(s,1),i=!0;break}i?n.sortFriendList():((e=new Object).className="p_friend",e.role_id=t,n.blacks.push(e))},n.updateFriendsByDeleteBlack=function(t){for(var e=0;e<n.blacks.length;e++)if(n.blacks[e].role_id==t){n.blacks.splice(e,1);break}},n.updateByReply=function(t,e){switch(t){case 1:n.updateRequestsByAgree(e);break;case 2:n.updateRequestsByReject(e)}},n.updateRequestsByAgree=function(t){for(var e,i=0;i<n.requests.length;i++)if((e=n.requests[i]).role_id==t){n.requests.splice(i,1),n.friends.push(e);break}n.sortFriendList()},n.updateRequestsByReject=function(t){for(var e=0;e<n.requests.length;e++)if(n.requests[e].role_id==t){n.requests.splice(e,1);break}},n.getBlackByRoleId=function(t){var e;for(var i in n.blacks)if((e=n.blacks[i]).role_id==t)return e;return null},n.getBatchDeletesByType=function(t){var e,i=[];for(var s in n.friends)e=n.friends[s],jn.checkFriendOnlineByType(e.online,t)&&i.push(e);return i},n.checkRequestRedPoint=function(){n.checkRequestNeedRedPoint()?Nt.show("RP_FRIEND_REQUEST_CROSS"):Nt.hide("RP_FRIEND_REQUEST_CROSS")},n.checkRequestNeedRedPoint=function(){return 0<n.requests.length&&0<Hn.isNotice},n._friends=null,n._blacks=null,n._requests=null,n}(),Yn=function(){function t(){this.xTexture=null,this.yTexture=null,this.imgTop=null,this.imgBottom=null,this.imgLeft=null,this.imgRight=null,this.BIG_EFF_NUM=6,this.BIG_SHOW_TIME=1e4,this.SMALL_SHOW_TIME=2e4,this.PETALS_MOVE_TIME=1e4,this.PETALS_CREATE_INTERVAL=1500,this.blueBigEffs=null,this.smallEffs=null,this.wait=null,this.keepRain=!1,this._bgTId=0,this._effectTId=0,this._curShowEffectKey=null,this._showPetalTId=0,this._petalTIdList=null,this._showingPetals=null,this._maxPetals=0,this._curUrl=null,this.imgTop=new y,this.imgTop.top=0,this.imgBottom=new y,this.imgBottom.bottom=0,this.imgBottom.left=0,this.imgBottom.rotation=180,this.imgLeft=new y,this.imgLeft.left=0,this.imgRight=new y,this.imgRight.top=0,this.imgRight.right=0,this.imgRight.rotation=180,this._petalTIdList=[],this._showingPetals=[],T.register("STAGE_RESIZE",this,this.onStageReset)}w(t,"modules.friend.flower.FlowerEff");var e=t.prototype;return e.showEff=function(t,e){var i=Xn.flowerIDs.indexOf(t);0<i&&(this.wait=this.wait||[],this.wait.push([i,e]),this.keepRain||this.checkShow())},e.checkShow=function(){if(se.has("modules/sendFlower")){if(this.wait&&0<this.wait.length){var t=this.wait.shift();this.showEffByID(t)}}else se.add("modules/sendFlower","正在加载送花资源",this,this.checkShow)},e.showEffByID=function(t){switch(this._curShowEffectKey=t[0]+"_"+t[1],t[0]){case 0:break;case 1:this.showEffSmall("moduleEffect/flowers999",2);break;case 2:this.showEffSmall("moduleEffect/flowers999",5);break;case 3:this.showEffSmall("moduleEffect/flowers999",10);break;case 4:t[1]==pe.roleID&&this.showEffBig(),this.showEffSmall("moduleEffect/flowers1314",10)}},e.showEffBig=function(){var s=this;function i(t){t&&(t.loadAndPlay("moduleEffect/1314bigflower","default",0,!1),s.resetOneBigEffPos(t))}!function(){s.imgTop.graphics.clear(),s.imgBottom.graphics.clear(),s.imgLeft.graphics.clear(),s.imgRight.graphics.clear(),s.xTexture||(s.xTexture=ut.getRes("modules/sendFlower/blueX.png"));s.yTexture||(s.yTexture=ut.getRes("modules/sendFlower/blueY.png"));for(var t=Math.ceil(lt.stageWidth/s.xTexture.width),e=Math.ceil(lt.stageHeight/s.yTexture.height),i=0;i<t;i++)s.imgTop.graphics.drawTexture(s.xTexture,i*s.xTexture.width),s.imgBottom.graphics.drawTexture(s.xTexture,i*s.xTexture.width);for(i=0;i<e;i++)s.imgLeft.graphics.drawTexture(s.yTexture,0,i*s.yTexture.height),s.imgRight.graphics.drawTexture(s.yTexture,0,i*s.yTexture.height);s.imgBottom.size(s.xTexture.width*t,s.xTexture.height),s.imgBottom.pivot(lt.stageWidth/2,s.xTexture.height/2),s.imgRight.size(s.yTexture.width,s.yTexture.height*e),s.imgRight.pivot(s.yTexture.width/2,lt.stageHeight/2),lt.flowerLayer.addChild(s.imgTop),lt.flowerLayer.addChild(s.imgBottom),lt.flowerLayer.addChild(s.imgLeft),lt.flowerLayer.addChild(s.imgRight)}(),function(){if(!s.blueBigEffs){var t;s.blueBigEffs=[];for(var e=0;e<s.BIG_EFF_NUM;e++)(t=b.getOne()).setEndHandler(Q.create(s,i,[t])),s.blueBigEffs.push(t)}for(e=0;e<s.BIG_EFF_NUM;e++)(t=s.blueBigEffs[e]).loadAndPlay("moduleEffect/1314bigflower","default",0,!1),s.resetOneBigEffPos(t),lt.flowerLayer.addChild(t)}(),this._bgTId=_t.setTimeout(this,this.removeBig,null,this.BIG_SHOW_TIME)},e.removeBig=function(){if(this.blueBigEffs)for(var t,e=0;e<this.blueBigEffs.length;e++)(t=this.blueBigEffs[e]).stop(),t.removeSelf();this.imgTop.removeSelf(),this.imgBottom.removeSelf(),this.imgRight.removeSelf(),this.imgLeft.removeSelf()},e.resetAllBigEffPos=function(){if(this.blueBigEffs)for(var t,e=0;e<this.blueBigEffs.length;e++)t=this.blueBigEffs[e],this.resetOneBigEffPos(t)},e.resetOneBigEffPos=function(t){if(t){var e=Math.random();e<.25?t.pos(lt.stageWidth*Math.random(),280):e<.5?t.pos(lt.stageWidth+120,lt.stageHeight*Math.random()):e<.75?t.pos(lt.stageWidth*Math.random(),lt.stageHeight+120):t.pos(280,lt.stageHeight*Math.random())}},e.onStageReset=function(){this.resetAllBigEffPos()},e.showEffSmall=function(t,e){this.keepRain=!0,this._curUrl=t,this._maxPetals=e,this._petalTIdList.length=0,this.showSomePetals(),this._effectTId=_t.setTimeout(this,this.removeSmall,null,this.SMALL_SHOW_TIME)},e.showSomePetals=function(){var t=this;if(this.keepRain){for(var e,i=Math.ceil(this._maxPetals*Math.random()),s=0,n=0;n<i;n++)s=_t.setTimeout(this,function(){(e=t.getOnePetals()).loadAndPlay(t._curUrl,"default",0,!0),e.pos(lt.stageWidth*Math.random(),0),lt.flowerLayer.addChild(e),t._showingPetals.push(e),ie.clearAll(e),ie.to(e,{x:lt.stageWidth*(1.5*Math.random()-.25),y:lt.stageHeight+120},t.PETALS_MOVE_TIME*(1+Math.random()),null,Q.create(this,t.petalsMoveComplete,[e],!0))},null,50*n*Math.random()),this._petalTIdList.push(s);h.timer.callLater(this,function(){t._showPetalTId=_t.setTimeout(this,t.showSomePetals,null,t.PETALS_CREATE_INTERVAL*Math.random())},null)}},e.getOnePetals=function(){if(this.smallEffs&&0<this.smallEffs.length)var t=this.smallEffs.pop();else t=b.getOne();return t},e.removeSmall=function(){this.keepRain=!1,_t.setTimeout(this,this.checkShow,null,1e3)},e.petalsMoveComplete=function(t){if(t){ie.clearAll(t),t.stop(),t.removeSelf(),this.smallEffs=this.smallEffs||[],this.smallEffs.push(t);var e=this._showingPetals.indexOf(t);0<=e&&this._showingPetals.splice(e,1)}},e.stopEffect=function(t,e){var i=Xn.flowerIDs.indexOf(t)+"_"+e;if(this._curShowEffectKey==i){var s;for(var n in _t.clearTimeout(this._effectTId),this.removeSmall(),_t.clearTimeout(this._bgTId),this.removeBig(),_t.clearTimeout(this._showPetalTId),this._petalTIdList)s=this._petalTIdList[n],_t.clearTimeout(s);for(;0<this._showingPetals.length;)this.petalsMoveComplete(this._showingPetals.shift())}else if(this.wait)for(var o,a=0;a<this.wait.length;a++)if((o=this.wait[a])[0]+"_"+o[1]==i){this.wait.splice(a,1);break}},t.ins=function(){return t._ins=t._ins||new t},t._ins=null,t}(),Xn=function(){function i(){}return w(i,"modules.friend.flower.FriendFlowerMgr"),i.getFriendNames=function(){var t,e=[];for(var i in jn.friends)t=jn.friends[i],e.push(t.role_name);return e.push(pe.roleName),e?e.join(","):""},i.getPFriendByIndex=function(t){return jn.friends?jn.friends[t]:null},i.getFriendIndex=function(t){var e=jn.friends;if(e)for(var i=0;i<e.length;i++)if(e[i].role_id==t)return i;return-1},i.addFlowers=function(t){t&&(i.flowerArr=(i.flowerArr=i.flowerArr||[]).concat(t))},i.getOneReceiveFlower=function(){return i.flowerArr?i.flowerArr.pop():null},i.delReceiveFlower=function(t){if(i.flowerArr)for(var e=0;e<i.flowerArr.length;e++)if(i.flowerArr[e].id==t){i.flowerArr.splice(e,1);break}},i.flowerArr=null,i.charm=0,_(i,["flowerIDs",function(){return this.flowerIDs=[10405001,10405002,10405003,10405004,10405005]},"zongziIDs",function(){return this.zongziIDs=[10405010,10405011]},"lightIDs",function(){return this.lightIDs=[10405012,10405013]},"magpieIDs",function(){return this.magpieIDs=[10405014,10405015]}]),i}(),Kn=function(){function t(){}return w(t,"modules.friend.FriendConst"),_(t,["FRIEND_TAB_ITEM_LOCAL_LABELS",function(){return this.FRIEND_TAB_ITEM_LOCAL_LABELS=["好友","好友信箱","结缘"]},"FRIEND_TAB_ITEM_CROSS_LABELS",function(){return this.FRIEND_TAB_ITEM_CROSS_LABELS=["好友","好友信箱","结缘","跨服好友"]},"FRIEND_TAB_ITEM_LABEL_REVIEW",function(){return this.FRIEND_TAB_ITEM_LABEL_REVIEW=["好友","好友信箱"]}]),t}(),jn=function(){function a(){}return w(a,"modules.friend.FriendManager"),I(1,a,"friends",function(){return a._friends=a._friends||[]},function(t){a._friends=t,a.sortFriendList(),a.sortFriendByMarryInfo()}),I(1,a,"blacks",function(){return a._blacks=a._blacks||[]},function(t){a._blacks=t}),I(1,a,"requests",function(){return a._requests=a._requests||[]},function(t){a._requests=t}),I(1,a,"friendBoxVOs",function(){return a.initXml(),a._friendBoxVOs}),I(1,a,"friendBaseVO",function(){return a.initXml(),a._friendBaseVO}),a.sortFriendByMarryInfo=function(){if(a._friends&&fo.coupleInfoP){for(var t,e=!1,i=0;i<a._friends.length;i++){var s=a._friends[i];if(s.role_id==fo.coupleInfoP.role_id){t=s,a._friends.splice(i,1),e=!0;break}}e&&a._friends.unshift(t)}},a.sortFriendList=function(){a._friends=a._friends.sort(a.sortByOnline)},a.sortByOnline=function(t,e){var i=ws.checkPrivateChatRedPointByRoleId(t.role_id),s=ws.checkPrivateChatRedPointByRoleId(e.role_id);return 0==i&&s?1:i&&0==s?-1:0<t.online?0<e.online?t.online>e.online?1:t.online<e.online?-1:0:1:0<e.online?-1:0},a.updateFriendsByNotice=function(t,e){var i=a.getFriendByRoleId(t);if(i)switch(e.id){case 1:i.online=0;break;case 2:i.online=1;break;case 3:i.vip_lv=e.val;break;case 4:i.avatar_frame=e.val;break;case 5:i.favor=e.val}},a.updateFriendsByDelete=function(t){for(var e=0;e<a.friends.length;e++)if(a.friends[e].role_id==t){a.friends.splice(e,1);break}a.sortFriendList()},a.updateFriendsByBlack=function(t){for(var e,i=!1,s=0;s<a.friends.length;s++)if((e=a.friends[s]).role_id==t){a.blacks.push(e),a.friends.splice(s,1),i=!0;break}i?a.sortFriendList():((e=new Object).className="p_friend",e.role_id=t,a.blacks.push(e))},a.updateFriendsByDeleteBlack=function(t){for(var e=0;e<a.blacks.length;e++)if(a.blacks[e].role_id==t){a.blacks.splice(e,1);break}},a.updateByReply=function(t,e){switch(t){case 1:a.updateRequestsByAgree(e);break;case 2:a.updateRequestsByReject(e)}},a.updateRequestsByAgree=function(t){for(var e,i=0;i<a.requests.length;i++)if((e=a.requests[i]).role_id==t){a.requests.splice(i,1),a.friends.push(e);break}a.sortFriendList()},a.updateRequestsByReject=function(t){for(var e=0;e<a.requests.length;e++)if(a.requests[e].role_id==t){a.requests.splice(e,1);break}},a.getFriendByRoleId=function(t){var e;for(var i in a.friends)if((e=a.friends[i]).role_id==t)return e;return null},a.getFriendFavorByRoleId=function(t){var e;for(var i in a.friends)if((e=a.friends[i]).role_id==t)return e.favor;return 0},a.getFriendsByFavor=function(t,e){var i,s=[];for(var n in a.friends)i=a.friends[n],(0==t&&i.favor>=e||1==t&&i.favor<e)&&s.push(i);return s},a.getBlackByRoleId=function(t){var e;for(var i in a.blacks)if((e=a.blacks[i]).role_id==t)return e;return null},a.checkRequestRedPoint=function(){a.checkRequestNeedRedPoint()?Nt.show("RP_FRIEND_REQUEST"):Nt.hide("RP_FRIEND_REQUEST")},a.checkRequestNeedRedPoint=function(){return 0<a.requests.length&&0<Hn.isNotice},a.initXml=function(){if(!a.isInitXml){a.isInitXml=!0,a._friendGiftTypeVOs=[],a._friendBoxVOs=[],a.achievementTypeVOs=[],a.achievementGroupVOs=[],a.achievementVOs=[];var t,e=Ra.startEncode("friend.xml");for(var i in e)(t=e[i])instanceof xml.FriendFavorVO?a.friendFavorVO=t:t instanceof xml.FriendBaseVO?a._friendBaseVO=t:t instanceof xml.FriendGiftTypeVO?a._friendGiftTypeVOs.push(t):t instanceof xml.FriendAchievementTypeVO?a.achievementTypeVOs.push(t):t instanceof xml.FriendAchievementGroupVO?a.achievementGroupVOs.push(t):t instanceof xml.FriendAchievementVO?a.achievementVOs.push(t):t instanceof xml.FriendBoxVO&&a._friendBoxVOs.push(t)}},a.getAchievementGroupVOsByType=function(t){var e;for(var i in a.initXml(),a.achievementTypeVOs)if((e=a.achievementTypeVOs[i]).typeId==t)return e.groupIdList;return[]},a.getAchievementGroupVOByGroupId=function(t){a.initXml();var e,i=[];for(var s in a.achievementGroupVOs){var n;for(var o in e=a.achievementGroupVOs[s],t)n=t[o],e.groupId==n&&i.push(e)}return i},a.getAchievementGroupVO=function(t){var e;for(var i in a.initXml(),a.achievementGroupVOs)if((e=a.achievementGroupVOs[i]).groupId==t)return e;return null},a.getAchievementVOsByTypeIds=function(t){a.initXml();var e,i=[];for(var s in t){var n;for(var o in e=t[s],a.achievementVOs)(n=a.achievementVOs[o]).id==e&&i.push(n)}return i},a.getAchievementVOById=function(t){var e;for(var i in a.initXml(),a.achievementVOs)if((e=a.achievementVOs[i]).id==t)return e;return null},a.getGiftTypeVOByType=function(t){var e;for(var i in a.initXml(),a._friendGiftTypeVOs)if((e=a._friendGiftTypeVOs[i]).type==t)return e;return null},a.getFavorStep=function(t){var e;a.initXml();for(var i=0;i<a.friendFavorVO.favorSteps.length;i++)if((e=a.friendFavorVO.favorSteps[i]).start<=t&&e.end>=t)return i+1;return 1},a.getBatchDeletesByType=function(t){var e,i=[];for(var s in a.friends)e=a.friends[s],a.checkFriendOnlineByType(e.online,t)&&i.push(e);return i},a.checkFriendOnlineByType=function(t,e){var i=Math.floor(t/3600);if(0<i){var s=Math.floor(i/24);if(0==e&&3<=s)return!0;if(1==e&&7<=s)return!0;if(2==e&&30<=s)return!0}return!1},a.getOnlineFriends=function(){var t,e=[];for(var i in a.friends)0==(t=a.friends[i]).online&&e.push(t);return e},a.getOnLineFriendsByRegrow=function(t){var e,i=[];for(var s in a.friends)0==(e=a.friends[s]).online&&e.regrow>=t&&i.push(e);return i},a._friends=null,a._blacks=null,a._requests=null,a.friendPanelTabCurIndex=0,a.friendFavorVO=null,a._friendBaseVO=null,a._friendGiftTypeVOs=null,a.isInitXml=!1,a._friendBoxVOs=null,a.achievementTypeVOs=null,a.achievementGroupVOs=null,a.achievementVOs=null,a}(),Qn=function(){function n(){}return w(n,"modules.friend.gift.FriendGiftManager"),I(1,n,"getList",function(){return n._getList=n._getList||[]}),n.updateGiveInfo=function(t){switch(n._giveTimes=t.give_times,n._getTimes=t.get_times,t.op_type){case 1:n._giveList=t.give_list;break;case 2:n._getList=t.get_list.sort(n.sortList),n.checkRedPoint()}},n.checkRedPoint=function(){0<n._getList.length&&n._getTimes<jn.friendBaseVO.totalGiveGet?Nt.show("RP_FRIEND_GIFT_LETTER"):Nt.hide("RP_FRIEND_GIFT_LETTER")},n.sortList=function(t,e){return t.give_ts>e.give_ts?-1:t.give_ts<e.give_ts?1:0},n.getCanGetLetters=function(){var t=[],e=jn.friendBaseVO.totalGiveGet-n._getTimes;if(0<(e=e>n._getList.length?n._getList.length:e))for(var i,s=n._getList.length-1;s>=n._getList.length-e;s--)i=n._getList[s],t.push(i);return t},n.checkCanGrant=function(t){for(var e in n._giveList)if(t==n._giveList[e])return!1;return!0},n.updateByGive=function(t){(n._giveList=n._giveList||[]).push(t),n._giveTimes--},n.updateByGiveGet=function(t){for(var e=0;e<n._getList.length;e++)if(t==n._getList[e].id){n._getList.splice(e,1);break}n._getTimes++},n.getGiveGetVO=function(t){var e;for(var i in n._getList)if((e=n._getList[i]).id==t)return e;return null},n.getLetterTitleByRoleId=function(t,e){var i="";switch(e){case 1:i=t+"的每日赠送"}return i},n.getLetterDetailByType=function(t){var e="";switch(t){case 1:e="您的好友赠送了元宝给您，快来收下他的心意并回赠吧！（一周后过期。）"}return e},n.getLetterRewardsByType=function(t){return[]},n._giveList=null,n._getList=null,n._giveTimes=0,n._getTimes=0,n.currFriendGive=null,n.canGetLetters=null,n.canGetLetterLen=0,n}(),zn=function(){function n(){}return w(n,"modules.gm.GMManager"),n.getProtoVo=function(t){return null==n.proto&&(n.proto=Ra.startEncode("proto.xml","name")),n.proto[t]},n.addDebugInfo=function(t,e){null==n.debugInfo&&(n.debugInfo=new Object);var i=n.debugInfo[e];null==i&&(i=[],n.debugInfo[e]=i),100<i.length&&i.pop();var s="["+x.getCurrTimeHours()+"]";i.unshift(s+t)},n.getDebugInfo=function(t){return null!=n.debugInfo?n.debugInfo[t]:null},n.clearDebugInfo=function(){n.debugInfo=new Object},n.proto=null,n.debugInfo=null,n}(),$n=function(){function t(){}return w(t,"modules.godHood.GodHoodConst"),_(t,["godHoodEquipArr",function(){return this.godHoodEquipArr=["赤炎血剑","碧海龙环","伏魔金杵","玄灵魂镜","红莲宝灯"]}]),t}(),Zn=function(){function r(){}return w(r,"modules.godHood.GodHoodMgr"),r.getHoodGetByID=function(t){return r.initGodHoodVO(),r.hoodGetDic.hasOwnProperty(t)?r.hoodGetDic[t]:null},r.getHoodGetMaxLV=function(){return 0<r.godHoodMaxLv||r.initGodHoodVO(),r.godHoodMaxLv},r.initGodHoodVO=function(){if(null==r.hoodGetDic){r.hoodGetDic=new Object,r.godHoodDic=new Object;var t,e=Ra.startEncode("godHood.xml");for(var i in e)(t=e[i])instanceof xml.HoodGetVO&&(r.hoodGetDic[t.id]=t),t instanceof xml.GodHoodVO&&(r.godHoodDic[t.lv]=t,++r.godHoodMaxLv)}},r.getGodHoodStageNameByLv=function(t){var e=r.getGodHoodByLv(t);return e?e.name:""},r.getGodHoodStageColorByLv=function(t,e){void 0===e&&(e=!0);var i=Math.ceil(t/5)+1;return e?U.getColorDark(i):U.getColorLight(i)},r.getGodHoodByLv=function(t){return r.initGodHoodVO(),r.godHoodDic.hasOwnProperty(t)?r.godHoodDic[t]:null},r.getGodHoodS=function(){return r.initGodHoodVO(),r.godHoodDic},r.getGodEquipInfoByPal=function(t){var e;if(r.palGodEquipInfos)for(var i in r.palGodEquipInfos)if((e=r.palGodEquipInfos[i]).pal_id==t)return e;return null},r.handlerGodArtifactInfo=function(t){r.palGodEquipInfos=t.pal_god_artifacts},r.handlerGodArtifactUpgrade=function(t){if(r.palGodEquipInfos){var e,i=Math.floor(t.new_trait.id/100);for(var s in r.palGodEquipInfos)if((e=r.palGodEquipInfos[s]).pal_id==t.pal_id){var n;for(var o in e.artifacts)if((n=e.artifacts[o]).id==i){for(var a=!1,l=0;l<n.traits.length;l++)if(n.traits[l].id==t.new_trait.id){a=!0,n.traits[l]=t.new_trait;break}for(0==a&&n.traits.push(t.new_trait),l=n.total_trait_lv=0;l<n.traits.length;l++)n.traits[l]&&(n.total_trait_lv+=n.traits[l].lv);break}break}}},r.handlerGodArtifactClear=function(t){var e;if(r.palGodEquipInfos)for(var i in r.palGodEquipInfos){var s;if((e=r.palGodEquipInfos[i]).pal_id==t.pal_id)for(var n in e.artifacts){s=e.artifacts[n];for(var o=!1,a=0;a<s.traits.length;a++)o=!0,s.traits[a]=0;0==o&&s.traits.push(0),s.total_trait_lv=0}}},r.getGodHoodEquipByID=function(t){return null==r.godHoodEquipDic&&(r.godHoodEquipDic=Ra.startEncode("godHoodEquip.xml","id")),r.godHoodEquipDic[t]},r.getGodHoodEquipPoint=function(t,e){var i=r.getGodHoodEquipByID(t);return e%=100,i&&i.GodHoodEquipPtArr.length>=e?i.GodHoodEquipPtArr[e]:null},r.getPosLv=function(t,e){var i=r.getGodEquipInfoByPal(t);if(i){var s,n=Math.floor(e/100);for(var o in i.artifacts){var a;if((s=i.artifacts[o]).id==n)for(var l in s.traits)if((a=s.traits[l]).id==e)return a.lv}}return 0},r.getNeedCheckGodHoodEquip=function(t,e){var i=r.getGodEquipInfoByPal(t),s=Math.pow(2,e-1);return!!(null==i||i&&0<(i.red_point&s))},r.getUpNeed=function(t){var e,i=0;if(r.palGodEquipInfos)for(var s in r.palGodEquipInfos)if(t==(e=r.palGodEquipInfos[s]).pal_id){for(var n in e.artifacts)i+=e.artifacts[n].total_trait_lv;break}return Math.floor(Math.pow(2.8*(i+1),3)+1e3)},r.getNeed=function(t){return 0==t?0:1==t?Math.floor(Math.pow(2.8*t,3)+1e3):r.getNeed(t-1)+Math.floor(Math.pow(2.8*t,3)+1e3)},r.getAllGodHood=function(t){var e,i=0;if(r.palGodEquipInfos)for(var s in r.palGodEquipInfos)if(t==(e=r.palGodEquipInfos[s]).pal_id){for(var n in e.artifacts)i+=e.artifacts[n].total_trait_lv;break}return r.getNeed(i)},r.handlerEuiqpRpSet=function(t){var e=modules.godHood.GodHoodMgr.getGodEquipInfoByPal(t.pal_id);e&&(e.red_point=t.red_point)},r.godHoodLv=0,r.godHoodMaxLv=-1,r.hoodGetDic=null,r.godHoodDic=null,r.palGodEquipInfos=null,r.godHoodEquipDic=null,r}(),Jn=function(){function t(){}return w(t,"modules.goodsShow.GoodsShowConst"),t.GOODS_SHOW_TYPE_BUY=1,t.GOODS_SHOW_TYPE_REWARD=2,t.GOODS_SHOW_TYPE_GET_SUCCESS=3,t.GOODS_SHOW_NOTICE_TYPE_ACTIVITY_REWARD=4,t.GOODS_SHOW_NOTICE_TYPE_CD_KEY_REWARD=5,t.GOODS_SHOW_NOTICE_TYPE_PREVIEW=6,t.GOODS_SHOW_NOTICE_TYPE_SOLO_RANKING_REWARD=7,t.GOODS_SHOW_NOTICE_TYPE_SNATCH_GET_REWARD=8,t.GOODS_SHOW_NOTICE_TYPE_STARRY_REWARD=9,t.GOODS_SHOW_NOTICE_TYPE_VIP_REWARD=10,t.GOODS_SHOW_NOTICE_TYPE_NOBLE_REWARD=11,t.GOODS_SHOW_BIND_PHONE_REWARD=14,t.GOODS_SHOW_INVEST_REWARD=17,t.GOODS_SHOW_FRIEND_ACHIEVEMENT_REWARD=18,t.GOODS_SHOW_NOTICE_TYPE_JINLI_DFS=26,t.GOODS_SHOW_NOTICE_TYPE_YUNYOU=27,t.GOODS_SHOW_NOTICE_TYPE_MAIL=9e3,t.GOODS_SHOW_NOTICE_TYPE_FRIEND_LETTER=9e3,t.GOODS_SHOW_NOTICE_TYPE_GIFT1=9001,t.GOODS_SHOW_NOTICE_TYPE_GIFT2=9002,t.GOODS_SHOW_NOTICE_TYPE_GIFT3=9003,t.GOODS_SHOW_NOTICE_TYPE_QUICK_FINISH=9004,t}(),to=function(){function i(){}return w(i,"modules.goodsShow.GoodsShowManager"),i.initXml=function(){i._typeIds||(i._typeIds=[],i._typeIds=Ra.startEncode("goodsShowFlash.xml"))},i.checkIsNeedFlash=function(t){for(var e in i.initXml(),i._typeIds)if(i._typeIds[e].typeId==t)return!0;return!1},i._typeIds=null,i}(),eo=(function(){function t(){}w(t,"modules.goodsUse.GoodsUseConst")}(),function(){function i(){}return w(i,"modules.goodsUse.GoodsUseMgr"),i.init=function(){i.has||(i.has=!0,i.cfgDic=Ra.startEncode("goodsUse.xml","typeID"))},i.getGoodsUseVO=function(t){return i.init(),i.cfgDic[t]},i.getGoodsUseType=function(t){var e=i.getGoodsUseVO(t);return e?e.useType:0},i.has=!1,i.cfgDic=null,i}()),io=function(){function e(){}return w(e,"modules.huntTreasure.deepSea.HuntTreasureDeepSeaMgr"),e.initXMl=function(){if(null==e._deepSeaBoxVO){var t=Ra.startEncode("deepSeaBox.xml");e._deepSeaBoxVO=t[0]}},e.deepSeaBoxVo=function(){return e.initXMl(),e._deepSeaBoxVO},e.checkRedPoint=function(){xo.getDeepSeaDepotData()&&0<xo.getDeepSeaDepotData().goods.length?(Nt.show("RP_DEEPSEA_DEPOT"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_DEEPSEA_DEPOT",!0])):(Nt.hide("RP_DEEPSEA_DEPOT"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_DEEPSEA_DEPOT",!1]))},e.boxLogs=null,e.clickType=0,e._deepSeaBoxVO=null,_(e,["clickTimes",function(){return this.clickTimes=[1,10,50]}]),e}(),so=(function(){function t(){}w(t,"modules.huntTreasure.HuntTreasureConst")}(),function(){function e(){}return w(e,"modules.huntTreasure.mystery.HuntTreasureMysteryManager"),I(1,e,"mysteryBoxVO",function(){return e.initXml(),e._mysteryBoxVO}),e.initXml=function(){if(null==e._mysteryBoxVO){var t=Ra.startEncode("mysteryBox.xml");e._mysteryBoxVO=t[0]}},e.checkRedPoint=function(){xo.getMysteryDepotData()&&0<xo.getMysteryDepotData().goods.length?(Nt.show("RP_MYSTERY_DEPOT"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_MYSTERY_DEPOT",!0])):(Nt.hide("RP_MYSTERY_DEPOT"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_MYSTERY_DEPOT",!1]))},e.boxLogs=null,e._mysteryBoxVO=null,e.clickType=0,_(e,["clickTimes",function(){return this.clickTimes=[1,10,50]},"openCosts",function(){return this.openCosts=[10,95,450]}]),e}()),no=function(){function t(){}return w(t,"modules.huntTreasure.orangeEquipPurify.RoleOrangeEquipPurifyConst"),_(t,["COLORARR",function(){return this.COLORARR=["#139604","#037ae0","#7223b5","#bd5713","#b60202"]},"GREEN",function(){return this.GREEN=t.COLORARR[0]},"BLUE",function(){return this.BLUE=t.COLORARR[1]},"VIOLET",function(){return this.VIOLET=t.COLORARR[2]},"ORANGE",function(){return this.ORANGE=t.COLORARR[3]},"RED",function(){return this.RED=t.COLORARR[4]}]),t}(),oo=function(){function o(){this._purifyArr=[],this._goldLockNum=0,this._silverLockNum=0,this._curMaxlv=0,this._goldLockCostArr=null,this._silverLockCostArr=null,this.tipVO=null,this.equipPurifyVO=new Object,this.purifyPowerVO=new Object}w(o,"modules.huntTreasure.orangeEquipPurify.RoleOrangeEquipPurifyMgr");var t=o.prototype;return t.init=function(){if(!this.tipVO){var t,e,i=Ra.startEncode("equipPurify.xml");for(var s in i)(e=i[s])instanceof xml.EquipPurifyMsgVO?this.tipVO=e:e instanceof xml.EquipPurifyVO?(t=e,this.equipPurifyVO[t.lv]=t):e instanceof xml.PurifyPropPowerVO&&(this.purifyPowerVO[e.code]=e)}},t.setCurEquipPurifyAttr=function(t){for(var e=0;e<this._purifyArr.length;e++)this._purifyArr[e][0]==t[0]&&this._purifyArr[e][1]==t[1]&&this._purifyArr.splice(e,1);this._purifyArr.push(t)},t.getCurEquipPurifyAttr=function(t,e){var i,s;if(this._purifyArr&&0<this._purifyArr.length)for(var n=0;n<this._purifyArr.length;n++)if((s=this._purifyArr[n])[0]==t&&s[1]==e)return(i=s[2]).sort(this.equipPurifyAttrSort),i;return null},t.getMaxLv=function(t){this.equipPurifyVO||this.init();var e=this.transform(t);return this.equipPurifyVO.hasOwnProperty(e)?this.equipPurifyVO[e].maxLv:"0"},t.getMaxAttr=function(t){this.equipPurifyVO||this.init();var e=this.transform(t);return this.equipPurifyVO.hasOwnProperty(e)?this.equipPurifyVO[e].maxAttr:"0"},t.getNeedChip=function(t){this.equipPurifyVO||this.init();var e=this.transform(t);return this.equipPurifyVO.hasOwnProperty(e)?this.equipPurifyVO[e].needNum:"0"},t.transform=function(t){return t<10?"  "+t:t<100?" "+t:""+t},t.getPower=function(t){var e,i=0;for(var s in t)e=t[s],i+=W.getAttrPower(e.prop_code,e.prop_value);this.purifyPowerVO||this.init();var n,o;for(var a in t)o=t[a],this.purifyPowerVO.hasOwnProperty(o.prop_code+"")&&(n=this.purifyPowerVO[o.prop_code+""],i+=parseInt(n.rate)*o.prop_value);return i},t.getTransName=function(t,e){var i,s;void 0===e&&(e=0);var n=W.getName(t);switch(n){case"生命加成":i=n,s=e/100+"%";break;case"物攻":case"法攻":i="攻击",s=e+"";break;case"物攻百分比":case"魔攻百分比":case"法攻百分比":i="攻击加成",s=e/100+"%";break;case"物防百分比":i="物防加成",s=e/100+"%";break;case"法防百分比":i="法防加成",s=e/100+"%";break;case"暴击":i="暴击加成",s=e/100+"%";break;case"韧性":i="韧性加成",s=e/100+"%";break;default:i=n,s=e+""}return i+"+"+s},t.setColor=function(t){return 16<t?no.RED:12<t?no.ORANGE:8<t?no.VIOLET:4<t?no.BLUE:no.GREEN},t.equipPurifyAttrSort=function(t,e){var i=0,s=0;return 1==t.prop_lock?i=2:2==t.prop_lock&&(i=1),1==e.prop_lock?s=2:2==e.prop_lock&&(s=1),s<i?-1:i<s?1:t.prop_code<e.prop_code?-1:t.prop_code>e.prop_code?1:t.prop_value>e.prop_value?-1:t.prop_value<e.prop_value?1:0},t.setCodeArr=function(t){o.codeArray=[];for(var e=0;e<t.length;e++)1==t[e].prop_lock&&o.codeArray.push(t[e].prop_code)},t.sort=function(t){var e,i=[],s=[];if(null==t)return null;for(var n in t)1==(e=t[n]).prop_lock?i.push(e):s.push(e);return i=this.goldLockSort(i),s=s.sort(this.equipPurifyAttrSort),i.concat(s)},t.goldLockSort=function(t){for(var e,i=[],s=0;s<o.codeArray.length;s++){e=[];for(var n=0;n<t.length;n++)t[n].prop_code==o.codeArray[s]&&e.push(t[n]);e.sort(this.equipPurifyAttrSort),i.push(e[0]),t.splice(t.indexOf(e[0]),1)}return i},t.checkIsSame=function(t,e){if(t.length!=e.length)return!1;var i=t,s=e;i.sort(this.equipPurifyAttrSort),s.sort(this.equipPurifyAttrSort);for(var n=0;n<i.length;n++)if(i[n].prop_code!=s[n].prop_code||i[n].prop_value!=s[n].prop_value)return!1;return!0},I(0,t,"limitLv",function(){return this.tipVO||this.init(),parseInt(this.tipVO.limitLv)}),I(0,t,"lock",null,function(t){var e;for(var i in this._goldLockNum=this._silverLockNum=0,t)1==(e=t[i]).prop_lock?this._goldLockNum++:2==e.prop_lock&&this._silverLockNum++}),I(0,t,"ForgeHelpStrs",function(){return this.tipVO||this.init(),this.tipVO.tipArr}),I(0,t,"lockCost",function(){var t=0;return this._goldLockCostArr&&this._silverLockCostArr||(this.tipVO||this.init(),this._goldLockCostArr=this.tipVO.goldLockGoldArr.split("|"),this._silverLockCostArr=this.tipVO.silverLockGoldArr.split("|")),t+=parseInt(this._goldLockCostArr[this._goldLockNum]),t+=parseInt(this._silverLockCostArr[this._silverLockNum])}),I(0,t,"Maxlv",function(){return this._curMaxlv},function(t){this._curMaxlv=t}),I(0,t,"nowOrangeChips",function(){return xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106)}),o.ins=function(){return o.instance=o.instance||new o},o.instance=null,o.codeArray=null,o}(),ao=function(){function a(){}return w(a,"modules.icon.IconManager"),I(1,a,"iconTimeArr",function(){return a.initActPre(),a._iconTimeArr}),I(1,a,"actPrewArr",function(){return a.initActPre(),a._actPrewArr}),I(1,a,"topIconListData",function(){return a.init(),a._topIconListData}),a.setIconInfos=function(t,e){(a._iconInfos=a._iconInfos||{})[t+""]=e},a.getIconInfo=function(t){return a._iconInfos?a._iconInfos[t+""]:null},a.initIconRedPoints=function(){return a._iconRedPoints=a._iconRedPoints||{}},a.updateIconRedPoints=function(t,e,i){a.initIconRedPoints(),a._iconRedPoints[t]=a._iconRedPoints[t]||[];var s=a._iconRedPoints[t].indexOf(e);i?s<0&&a._iconRedPoints[t].push(e):0<=s&&a._iconRedPoints[t].splice(s,1)},a.checkIconRedPoint=function(t){if(pe.myLevel<9)return!1;if(a.initIconRedPoints(),a._iconRedPoints.hasOwnProperty(t+"")&&0<a._iconRedPoints[t].length)return!0;if(5016==t){for(var e=0;a.moreIconsVoArr&&e<a.moreIconsVoArr.length;e++)if(a.checkIconRedPoint(a.moreIconsVoArr[e].id))return!0;return!1}return!1},a.initIconSimpleRedPoint=function(){return a._iconSimpleRedPoints=a._iconSimpleRedPoints||{}},a.checkIconSimpleRedPoint=function(t,e){return a.initIconSimpleRedPoint(),0==a.isExistIconSimpleRedPoint(t)?(a.addIconSimpleRedPoint(t,e),!0):a.getIconSimpleRedPointState(t)},a.addIconSimpleRedPoint=function(t,e){a.initIconSimpleRedPoint(),0==a._iconSimpleRedPoints.hasOwnProperty(t+"")&&(a._iconSimpleRedPoints[t]={show:!0,iconID:e})},a.updateIconSimpleRedPoint=function(t,e){a.initIconSimpleRedPoint(),a._iconSimpleRedPoints[t]&&(a._iconSimpleRedPoints[t].show=e,We.showRP(t,a._iconSimpleRedPoints[t].iconID,e))},a.getIconSimpleRedPointState=function(t){return a.initIconSimpleRedPoint(),0!=a._iconSimpleRedPoints.hasOwnProperty(t+"")&&a._iconSimpleRedPoints[t].show},a.isExistIconSimpleRedPoint=function(t){return a.initIconSimpleRedPoint(),!!a._iconSimpleRedPoints.hasOwnProperty(t+"")},a.initIconFlashDict=function(){return a._iconFlashDict=a._iconFlashDict||{}},a.addIconFlash=function(t){a.initIconFlashDict(),0==a._iconFlashDict.hasOwnProperty(t+"")&&(a._iconFlashDict[t]=!0)},a.updateIconFlash=function(t,e){a.initIconFlashDict(),a._iconFlashDict[t]=e},a.getIconFlashState=function(t){return a.initIconFlashDict(),0!=a._iconFlashDict.hasOwnProperty(t+"")&&a._iconFlashDict[t]},a.isExistIconFlash=function(t){return a.initIconFlashDict(),!!a._iconFlashDict.hasOwnProperty(t+"")},a.updateIconState=function(t){a.iconStateDic||(a.iconStateDic=new P),a.iconStateDic.set(t.id,t)},a.getIconStateShow=function(t){if(a.iconStateDic){var e=a.iconStateDic.get(t);if(e&&(1==e.state||2==e.state))return!0}return!1},a.getIconStateDicKeys=function(){return a.iconStateDic?a.iconStateDic.keys:null},a.getIconStateDicValus=function(t){return a.iconStateDic?a.iconStateDic.get(t):null},a.handlerIconSpcState=function(t,e){(a.iconSpcStateDic=a.iconSpcStateDic||new Object)[t]=e},a.getIconSpcState=function(t){return a.iconSpcStateDic&&a.iconSpcStateDic.hasOwnProperty(t+"")?a.iconSpcStateDic[t]:0},a.initEff=function(){if(null==Mt.getCache().ICON_FLASH_EFF_URL)for(var t=new Object,e=0;e<tt.ICON_FLASH_EFF_INFO.length;e++){var i="default_d0_"+e,s=new F;s.x=tt.ICON_FLASH_EFF_INFO[e][0],s.y=tt.ICON_FLASH_EFF_INFO[e][1],s.w=tt.ICON_FLASH_EFF_INFO[e][2],s.h=tt.ICON_FLASH_EFF_INFO[e][3],s.offsetX=tt.ICON_FLASH_EFF_INFO[e][4],s.offsetY=tt.ICON_FLASH_EFF_INFO[e][5],s.hold=tt.ICON_FLASH_EFF_INFO[e][6],s.picIndex=tt.ICON_FLASH_EFF_INFO[e][7];var n=ut.getRes("modules/icon/"+i+".png");if(n&&n.bitmap){var o=n.bitmap;o.width&&4+s.w>o.width&&(s.w=o.width-4),o.height&&4+s.h>o.height&&(s.h=o.height-4),n.width=s.w,n.height=s.h,n.offsetX=s.offsetX,n.offsetY=s.offsetY,n.sourceWidth=s.w,n.sourceHeight=s.h}else console.log("modules/icon/"+i+".png\t没有缓存资源");var a=new X;a.drawTexture(n),s.graphics=a,s.texture=n,t[i]=s;var l=new r("ICON_FLASH_EFF_URL",{default:tt.ICON_FLASH_EFF_INFO.length},t);Mt.getCache().ICON_FLASH_EFF_URL=l}},a.init=function(){if(!a.cfgData){var t;for(var e in a.cfgData=Ra.startEncode("icon.xml","id"),a._topIconListData=[],a.cfgData)1==(t=a.cfgData[e]).pos&&a._topIconListData.push(t.id);a._topIconListData.sort(a.sort)}},a.getIconVO=function(t){return a.init(),a.cfgData[t]},a.getActPreVO=function(t){var e;for(var i in a.initActPre(),a._actPrewArr)if((e=a._actPrewArr[i]).id==t)return e;return null},a.getIconTimeVO=function(t){var e;for(var i in a.initActPre(),a._iconTimeArr)if((e=a._iconTimeArr[i]).state==t)return e;return null},a.checkIconTime=function(){_t.clearTimeout(a.checkKey),a.initActPre();var t=new Date;t.setTime(1e3*ya.serverTime);var e,i,s=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),n=99999;for(var o in a._iconTimeArr){if((i=a._iconTimeArr[o]).pday&&0<=i.pday.indexOf(t.getDay()))""==modules.icon.IconManager.getActPreVO(i.id).checkCanJoin()&&(i.start>s?n=Math.min(i.start-s,n):i.start<=s&&i.end>s&&(n=Math.min(i.end-s,n),1==i.id?a.getActEnd(1)||(e=i):4==i.id&&a.getActEnd(2)||(e=i)))}n<99999&&(a.checkKey=_t.setTimeout(a,modules.icon.IconManager.checkIconTime,null,1e3*(n+3))),e?e.checkOpenInServerStart()?T.dispatch("ICON_STATE_CHANGE",[114,e.state]):0<=e.pday.indexOf(t.getDay())&&Dn.isFirstServerOpenDay()?T.dispatch("ICON_STATE_CHANGE",[114,0]):T.dispatch("ICON_STATE_CHANGE",[114,e.state]):T.dispatch("ICON_STATE_CHANGE",[114,0])},a.initActPre=function(){if(!a._actPrewArr){a._actPrewArr=[],a._iconTimeArr=[];var t,e=Ra.startEncode("actPre.xml");for(var i in e)(t=e[i])instanceof xml.ActPreVO?a._actPrewArr.push(t):t instanceof xml.IconTimeVO&&a._iconTimeArr.push(t);for(var s in a._actPrewArr)a._actPrewArr[s].initArr();for(var n in a._iconTimeArr)a._iconTimeArr[n].initArr()}},a.sortActPrew=function(){a.initActPre(),a._actPrewArr.sort(a.actSort)},a.actSort=function(t,e){var i=""==t.checkCanJoin(),s=""==e.checkCanJoin();if(i==s){var n,o=new Date(ya.serverTimeMs),a=o.getDay(),l=60*o.getHours()*60+60*o.getMinutes()+o.getSeconds(),r=NaN,h=NaN;if(i=s=!1,0<=t.pday.indexOf(a))for(var u=0;u<t.ptimeArr.length;u++)if(l>=(n=t.ptimeArr[u])[0]&&l<n[1]){i=!0,r=n[0];break}if(0<=e.pday.indexOf(a))for(var c=0;c<e.ptimeArr.length;c++)if(l>=(n=e.ptimeArr[c])[0]&&l<n[1]){s=!0,h=n[0];break}return i==s?i?h==r?t.id<e.id?-1:1:r<h?-1:1:t.getNextTime()==e.getNextTime()?(i=""==t.checkCanJoin())==(s=""==e.checkCanJoin())?t.id<e.id?-1:1:i?-1:1:t.getNextTime()<e.getNextTime()?-1:1:i?-1:1}return i?-1:1},a.sort=function(t,e){var i=modules.icon.IconManager.getIconVO(t),s=modules.icon.IconManager.getIconVO(e);return i&&!s?-1:!i&&s?1:i||s?i.sortID>s.sortID?1:i.sortID<s.sortID?-1:0:0},a.resetActEnd=function(){if(a.actEndDic)for(var t in a.actEndDic)a.actEndDic[t]=!1},a.setActEnd=function(t){(a.actEndDic=a.actEndDic||{})[t]=!0},a.getActEnd=function(t){return!(!a.actEndDic||!a.actEndDic.hasOwnProperty(t+""))&&a.actEndDic[t]},a.getIsCanShowByChargeIcon=function(t){return-1!=a.CHARGE_ICON_SHOW_ARR.indexOf(t)},a.isBlueDiamonIcons=function(t){return 5007==t||5012==t},a.refreshMoreData=function(){a.moreIconsVoArr=[],a.moreIcons={}},a.addMoreIcon=function(t,e){a.moreIconsVoArr=a.moreIconsVoArr||[],!a.ishadMoreIcon(t)&&a.moreIconsVoArr.push(t),a.moreIcons[t.id+""]=e},a.ishadMoreIcon=function(t){for(var e=t.id,i=0;i<a.moreIconsVoArr.length;i++)if(e==a.moreIconsVoArr[i].id)return!0;return!1},a.delMoreIconVoById=function(t){for(var e=0;e<a.moreIconsVoArr.length;e++)if(a.moreIconsVoArr[e].id==t){a.moreIconsVoArr.splice(e,1);break}a.moreIcons[t]&&delete a.moreIcons[t],a.toUpdateMorePanel()},a.getMoreIconsVO=function(){return a.moreIconsVoArr},a.getMoreIcons=function(){return a.moreIcons},a.toUpdateMorePanel=function(){a.moreIconsVoArr.length&&a.moreIcons.length&&Zl.ins().updateMorePanel()},a.isInMoreIcon=function(t){return null!=a.moreIcons[t+""]},a.iconStateDic=null,a._iconFlashDict=null,a._iconRedPoints=null,a._iconSimpleRedPoints=null,a._iconInfos=null,a.iconSpcStateDic=null,a.cfgData=null,a._topIconListData=null,a._actPrewArr=null,a._iconTimeArr=null,a.checkKey=-1,a.actEndDic=null,a.moreIconsVoArr=null,a.moreIcons={},_(a,["ICON_SHOW_COOL_DOWN",function(){return this.ICON_SHOW_COOL_DOWN=[{id:115,showType:"dh",color:"#00ff00"},{id:1004,showType:"dh",color:"#00ff00"}]},"CHARGE_ICON_SHOW_ARR",function(){return this.CHARGE_ICON_SHOW_ARR=[105,118,115,4005,4002,4012,4020,104,4004,4045,5006]}]),a}(),lo=function(){function h(){}return w(h,"modules.mail.MailConfig"),h.initXML=function(){h.mails=h.mails||Ra.startEncode("letter.xml"),h.titles=h.titles||new Object,h.contents=h.contents||new Object},h.getLetterVoByLetterCode=function(t){var e;for(var i in h.mails)if(t==(e=h.mails[i]).id)return e;return null},h.getTitle=function(t,e,i){if(h.initXML(),null==h.titles[t]){var s=h.getLetterVoByLetterCode(t);null!=s&&(h.titles[t]=String(s.title))}var n=h.titles[t],o=h.getMsg(n=n||"",e,i);return 15<o.length&&(o=o.substr(0,15)),o},h.getContent=function(t,e,i){if(h.initXML(),null==h.contents[t]){var s=h.getLetterVoByLetterCode(t);null!=s&&(h.contents[t]=String(s.text))}var n=h.contents[t];return h.getMsg(n=n||"",e,i)},h.getMsg=function(t,e,i){h.initXML();for(var s=50,n=e.concat(),o=i.concat();0<s;){var a,l=t.indexOf("~str"),r=t.indexOf("~num");if(-1==l&&-1==r)return t;r<l?(a=0<n.length?n.shift():"",t=t.replace("~str",a)):(a=0<o.length?o.shift():"",t=t.replace("~num",a)),s--}return t},h.FLAG_STR="~str",h.FLAG_NUM="~num",h.mails=null,_(h,["contents",function(){return this.contents=new Object},"titles",function(){return this.titles=new Object}]),h}(),ro=function(){function t(){}return w(t,"modules.mail.MailConst"),t.isAutoSellItem=11111,t}(),ho=function(){function r(){}return w(r,"modules.mail.MailManager"),I(1,r,"mailArray",function(){return null==r._mailArray&&(r._mailArray=[]),r._mailArray},function(t){r._mailArray=t}),r.setUnReceivedAttachmentList=function(t){var e,i;for(var s in r._unReceivedAttachmentList=[],t){var n;for(var o in i=t[s],r.mailArray){var a;if((n=r.mailArray[o]).id==i&&3!=n.state&&0<n.goods_list.length)for(var l in n.goods_list)a=n.goods_list[l],(e=r.checkAttachmentIsExist(a.typeid))?e.val+=a.current_num:((e=new Object).className="p_kv",e.id=a.typeid,e.val=a.current_num,r._unReceivedAttachmentList.push(e))}}},r.getUnReceivedAttachmentList=function(){return r._unReceivedAttachmentList},r.clearUnReceivedAttachmentListCach=function(){r._unReceivedAttachmentList=[]},r.checkAttachmentIsExist=function(t){var e;for(var i in r._unReceivedAttachmentList)if((e=r._unReceivedAttachmentList[i]).id==t)return e;return null},r.checkIsexistAttachmentMail=function(){for(var t=0;t<r.mailArray.length;t++){var e=r.mailArray[t];if(0<e.goods_list.length&&3!=e.state)return!0}return!1},r.checkIsExistCanReadMail=function(){for(var t in r.mailArray)if(1==r.mailArray[t].state)return!0;return!1},r.checkIsDeleteMail=function(){var t,e=0;for(var i in r.mailArray)1!=(t=r.mailArray[i]).state&&(2==t.state&&0<t.goods_list.length||259200<=ya.serverTime-t.send_time&&e++);return 15<=e},r.setMails=function(t){r.mailArray=t,r.mailsSort()},r.updateMails=function(t){var e;for(var i in t)e=t[i],r.updateSingleMail(e);r.mailsSort()},r.updateMailsByReadAll=function(){var t;for(var e in r.mailArray)1==(t=r.mailArray[e]).state&&t.state},r.updateSingleMail=function(t){var e,i=!1;for(var s in r.mailArray)if(e=r.mailArray[s],t.id==e.id){e=t,i=!0;break}0==i&&r.mailArray.push(t)},r.readMail=function(t){var e;for(var i in r.mailArray)(e=r.mailArray[i]).id==t&&(e.state=2)},r.acceptGoods=function(t){var e;for(var i in t){e=t[i];var s=r.getMailById(e);s.id==e&&(s.state=3)}},r.getAcceptGoods=function(t){var e,i=[];for(var s in t){e=t[s];var n,o=r.getMailById(e);if(o.id==e)for(var a in o.goods_list)n=o.goods_list[a],i.push(n)}return i},r.isExist=function(t){for(var e in r.mailArray)if(r.mailArray[e].id==t.id)return!0;return!1},r.getMailById=function(t){var e;for(var i in r.mailArray)if(t==(e=r.mailArray[i]).id)return e;return null},r.getAllAttachmentMailIDs=function(){for(var t=[],e=0;e<r.mailArray.length;e++){var i=r.mailArray[e];0<i.goods_list.length&&3!=i.state&&t.push(i.id)}return t},r.mailsSort=function(){r.mailArray.sort(r.sortOnMails)},r.sortOnMails=function(t,e){return 1==t.state&&1!=e.state?-1:1!=t.state&&1==e.state?1:t.send_time>e.send_time?-1:t.send_time<e.send_time?1:t.id>e.id?-1:1},r.deleteMails=function(t){for(var e=0;e<t.length;e++)for(var i=0;i<r.mailArray.length;i++){if(r.mailArray[i].id==t[e]){r.mailArray.splice(i,1);break}}},r.checkRedPoint=function(){if(r.mailArray&&0<r.mailArray.length){var t,e=!1;for(var i in r.mailArray){if(1==(t=r.mailArray[i]).state)return Nt.show("RP_MAIL"),void(e=!0);if(2==t.state&&0<t.goods_list.length)return Nt.show("RP_MAIL"),void(e=!0)}0==e&&Nt.hide("RP_MAIL")}else Nt.hide("RP_MAIL")},r._mailArray=null,r._unReceivedAttachmentList=null,r}(),uo=function(){function s(){}return w(s,"modules.mainInfo.MainInfoMgr"),s.init=function(){s._has||(s._has=!0,s.cfgData=Ra.startEncode("mainInfo.xml"))},s.getMainVO=function(t){var e;for(var i in s.init(),s.cfgData)if((e=s.cfgData[i]).isMap(t))return e;return null},s.getMsg=function(t){void 0===t&&(t=0),t=0==t?ca.mapID:t;var e=s.getMainVO(t);return e?e.msg:""},s.getName=function(t){void 0===t&&(t=0),t=0==t?ca.mapID:t;var e=s.getMainVO(t);return e?e.isNeedExtraNum()?e.name.replace("~num",s.getExtraInfo()):e.name:""},s.getExtraInfo=function(){return ua.isDreamCopyMap()?Os.curBarrier+1+"":ua.isFamilyCopyMap()?Dn.nowRound+1+"":ua.isGodHoodFightMap()?Zn.godHoodLv+1+"":ua.isGodHoodStoryMap()?Vs.passedMaxChapter+1+"":""},s._has=!1,s.cfgData=null,s}(),co=function(){function t(){}return w(t,"modules.marry.flowerFaerie.FlowerFaerieConst"),_(t,["petalEffectPos",function(){return this.petalEffectPos=[{x:351,y:200,angle:0},{x:434,y:233,angle:36},{x:491,y:302,angle:68},{x:495,y:395,angle:101},{x:448,y:466,angle:144},{x:354,y:504,angle:181},{x:258,y:477,angle:215},{x:201,y:406,angle:252},{x:198,y:312,angle:286},{x:248,y:225,angle:321}]},"flowerLanguageItemPos",function(){return this.flowerLanguageItemPos=[{x:255,y:115,zor:45},{x:330,y:100,zor:30},{x:405,y:85,zor:15},{x:-120,y:70,zor:0},{x:105,y:85,zor:15},{x:180,y:100,zor:30}]}]),t}(),po=function(){function p(){}return w(p,"modules.marry.flowerFaerie.FlowerFaerieMgr"),I(1,p,"flowerLanguageList",function(){return p.initXML(),p._flowerLanguageList}),I(1,p,"flowerPetalInfo",function(){return p.initXML(),p._flowerPetal}),I(1,p,"flowerPetalStepInfo",function(){return p.initXML(),p.__flowerPetalStep}),p.pushMyWishLanguages=function(t){(p.myWishLanguages=p.myWishLanguages||[]).push(t)},p.removeFromMyWishLanguages=function(t){for(var e=0;e<p.myWishLanguages.length;e++)if(t==p.myWishLanguages[e]){p.myWishLanguages.splice(e,1);break}},p.checkIsHasLanguage=function(t,e){for(var i in e)if(e[i]==t)return!0;return!1},p.getFlowerPetalStepInfo=function(){var t,e,i=[];for(e in p.flowerPetalStepInfo)t=p.flowerPetalStepInfo[e],i.push(t);return i},p.getFlowerPetalInfo=function(){var t,e,i=[];for(e in p.flowerPetalInfo)t=p.flowerPetalInfo[e],i.push(t);return i},p.getFlowerLanguageInfo=function(){var t,e,i=[];for(e in p.flowerLanguageList)t=p.flowerLanguageList[e],i.push(t);return i},p.getFlowerLanguages=function(t,e){var i,s,n=[];for(s in p.flowerLanguageList)i=p.flowerLanguageList[s],0!=t&&i.color!=t||(0==e||e&&p.checkIsHasLanguage(i.id,p.myFlowerLanguages)!=e)&&n.push(i);return n},p.getLanguagesByColor=function(t,e){var i,s=[],n=[];for(var o in 1==e?n=p.myWishLanguages:2==e&&(n=p.taWishLanguages),n){i=n[o];var a=p.getLanguagesVOById(i);!a||0!=t&&a.color!=t||s.push(a)}return s},p.getLanguagesVOById=function(t){var e;for(var i in p.initXML(),p._flowerLanguageList)if((e=p._flowerLanguageList[i]).id==t)return e;return null},p.getLanguageSpcAttrStr=function(t,e){var i="";switch(t){case 1:i="双方同时拥有该花语后，全角色伤害增加"+e+"点";break;case 2:i="双方同时拥有该花语后，全角色伤害增加"+e+"%";break;case 3:i="绿色花语基础属性提高"+e+"%";break;case 4:i="蓝色花语基础属性提高"+e+"%";break;case 5:i="紫色花语基础属性提高"+e+"%";break;case 6:i="橙色花语基础属性提高"+e+"%"}return i},p.checkFaerieCanLvUpRP=function(){var t=modules.marry.flowerFaerie.FlowerFaerieMgr.getCurPetalUpConst();p.curFaeriePoint&&(t<=p.curFaeriePoint?p.isCurPetalMaxLv()?Nt.hide("RP_FLOWER_FAERIE"):Nt.show("RP_FLOWER_FAERIE"):Nt.hide("RP_FLOWER_FAERIE"))},p.initXML=function(){if(!p._flowerLanguageList){p._flowerLanguageList=[],p._flowerPetal=[],p.__flowerPetalStep=[];var t,e=Ra.startEncode("flowerFaerie.xml");for(var i in e)(t=e[i])instanceof xml.FaerieFlowerLanguageVO?p._flowerLanguageList.push(t):t instanceof xml.FaeriePetalVO?p._flowerPetal.push(t):t instanceof xml.FaeriePetalStepVO&&p.__flowerPetalStep.push(t)}},p.isCurPetalMaxLv=function(){return 200==p.curPetalLv},p.getCurPetalIndex=function(){return 0==p.curPetalLv?0:p.curPetalLv%10},p.getCurPetalStep=function(){return 0==p.curPetalLv?1:Math.floor((p.curPetalLv-1)/10)+1},p.getCurPetalUpConst=function(){var t=0,e=p.getFlowerPetalInfo();return 0==p.curPetalLv?e&&(t=e[0].upConst):e&&e[p.curPetalLv]&&e[p.curPetalLv].lv==p.curPetalLv&&(t=e[p.curPetalLv].upConst),t},p.parseAttr=function(t,e){void 0===e&&(e=",");for(var i=[],s=t.split(e),n=0;n<s.length;n++)i.push(parseInt(s[n]));return i},p.getPetalStepAttrs=function(t){for(var e=p.parseAttr(t.arrtKeys).length,i=[],s=[],n=[],o=p.parseAttr(t.attrVals),a=p.parseAttr(t.arrtKeys),l=0;l<e;l++){var r;switch(a[l]){case 11:r="生命",n.push(r);break;case 49:r="攻击",n.push(r);break;case 13:r="物防",n.push(r);break;case 14:r="法防",n.push(r)}}for(var h=0;h<e;h++)s.push(o[h]);for(var u=0;u<e;u++)i.push([n[u],s[u]]);return i},p.getPetalTotalAttrs=function(){var t=[],e=p.getFlowerPetalInfo(),i=p.parseAttr(e[0].arrtKeys).length,s=[],n=[];if(e){if(0==p.curPetalLv)return t;if(e[p.curPetalLv].lv==p.curPetalLv){for(var o=0;o<i;o++){for(var a=0,l=0;l<p.curPetalLv+1;l++){a+=p.parseAttr(e[l].attrVals)[o]}s.push(a)}for(var r=0;r<i;r++){var h;switch(p.parseAttr(e[0].arrtKeys)[r]){case 11:h="生命",n.push(h);break;case 49:h="攻击",n.push(h);break;case 13:h="物防",n.push(h);break;case 14:h="法防",n.push(h)}}for(var u=0;u<i;u++)t.push([n[u],s[u]])}}return t},p.getComTotalAttrs=function(t){for(var e,i=[],s=0;s<mo.TOTAL_ATTR_KEYS.length;s++)i[s]={key:mo.TOTAL_ATTR_KEYS[s],val:0};1==t?e=p.myFlowerLanguages:2==t&&(e=p.taFlowerLanguages);var n,o,a=[],l=0;for(o in e)l=e[o],(n=p.getLanguagesVOById(l))&&2<n.spcAttrObj.type&&-1==a.indexOf(n.spcAttrObj.type-1)&&a.push(n.color);for(o in e){var r;if(l=e[o],n=p.getLanguagesVOById(l))for(var h in n.comAttrList){r=n.comAttrList[h];var u,c=!1;for(var d in i)if((u=i[d]).key==r.key){-1!=a.indexOf(n.color)?u.val+=1.2*r.val:u.val+=r.val,c=!0;break}0==c&&(-1!=a.indexOf(n.color)?i.push({key:r.key,val:1.2*r.val}):i.push({key:r.key,val:r.val}))}}return i},p.getSpcTotalAttr=function(t){var e,i,s=[];for(var n in 1==t?e=p.myFlowerLanguages:2==t&&(e=p.taFlowerLanguages),e){i=e[n];var o=p.getLanguagesVOById(i);if(o){var a,l=!1;for(var r in s)if((a=s[r]).type==o.spcAttrObj.type){a.val+=o.spcAttrObj.val,l=!0;break}0==l&&s.push({type:o.spcAttrObj.type,val:o.spcAttrObj.val})}}return s},p.getFlowerLanguageId=function(){for(var t=[],e=0;e<p.flowerLanguageList.length;e++)t.push(p.flowerLanguageList[e].id);return t},p.myFlowerLanguages=null,p.taFlowerLanguages=null,p.myFlowerLanguageLogs=null,p.taFlowerLanguageLogs=null,p.myWishLanguages=null,p.taWishLanguages=null,p.curPetalLv=0,p.curFaeriePoint=0,p.coupleInfoP=null,p.couplePetalLv=0,p.isPaying=!1,p._flowerLanguageList=null,p._flowerPetal=null,p.__flowerPetalStep=null,p}(),mo=function(){function t(){}return w(t,"modules.marry.MarryConst"),t.TOKEN_SHOP_TAB_LABELS="全部,绿色,蓝色,紫色,橙色",_(t,["TOTAL_ATTR_KEYS",function(){return this.TOTAL_ATTR_KEYS=[11,49,13,14]}]),t}(),fo=function(){function p(){}return w(p,"modules.marry.MarryMgr"),I(1,p,"baseVO",function(){return p.initXML(),p._baseVO}),I(1,p,"tokenList",function(){return p.initXML(),p._tokenList}),I(1,p,"extraDescs",function(){return p.initXML(),p._extraDescs}),p.getReplyVO=function(){return p._requestVOList&&0<p._requestVOList.length?p._requestVOList[0]:null},p.pushRequestVO=function(t,e,i,s){p._requestVOList=p._requestVOList||[];var n=new _o;n.setVO(t,e,i,s),p._requestVOList.push(n)},p.removeRequestVO=function(t){if(p._requestVOList)for(var e=0;e<p._requestVOList.length;e++){if(p._requestVOList[e].roleId==t)return void p._requestVOList.splice(e,1)}},p.checkIsHideReplyIcon=function(){return!p._requestVOList||0==p._requestVOList.length},p.clearRequestVOList=function(){p._requestVOList=null},p.getFriendsByFavor=function(t){var e,i=jn.getFriendsByFavor(t,p.baseVO.favor),s=[];for(var n in i){var o;for(var a in e=i[n],p.notMarryFriends)o=p.notMarryFriends[a],e.role_id==o&&s.push(e)}return s},p.initAnniversaryDate=function(){null==p.anniversaryDate&&0<p.marryTs&&(p.anniversaryDate=new Date).setTime(1e3*p.marryTs),null==p.serverDate&&(p.serverDate=new Date),p.serverDate.setTime(ya.serverTimeMs)},p.checkIsMonthAnniversary=function(){if(p.marryTs<=0)return!1;if(p.initAnniversaryDate(),0==p.marryTs)return!1;var t=p.serverDate.getFullYear(),e=p.anniversaryDate.getFullYear(),i=0,s=0,n=0,o=0;if(t==e){if(i=p.serverDate.getMonth(),s=p.anniversaryDate.getMonth(),n=p.serverDate.getDate(),o=p.anniversaryDate.getDate(),s<i&&n==o)return!0}else if(e<t&&(n=p.serverDate.getDate())==(o=p.anniversaryDate.getDate()))return!0;return!1},p.checkIsYearsAnniversary=function(){if(p.marryTs<=0)return!1;p.initAnniversaryDate();var t=p.serverDate.getFullYear();if(p.anniversaryDate.getFullYear()<t&&p.serverDate.getMonth()==p.anniversaryDate.getMonth())return p.serverDate.getDate()==p.anniversaryDate.getDate();return!1},p.pushMyWishTokens=function(t){(p.myWishTokens=p.myWishTokens||[]).push(t)},p.removeFromMyWishTokens=function(t){for(var e=0;e<p.myWishTokens.length;e++)if(t==p.myWishTokens[e]){p.myWishTokens.splice(e,1);break}},p.checkIsHasToken=function(t,e){for(var i in e)if(e[i]==t)return!0;return!1},p.getTokens=function(t,e){var i,s,n=[];for(s in p.tokenList)i=p.tokenList[s],0!=t&&i.color!=t||(0==e||e&&p.checkIsHasToken(i.id,p.myTokens)!=e)&&n.push(i);return n},p.getTokensByColor=function(t,e){var i,s=[],n=[];for(var o in 1==e?n=p.myWishTokens:2==e&&(n=p.taWishTokens),n){i=n[o];var a=p.getTokenVOById(i);!a||0!=t&&a.color!=t||s.push(a)}return s},p.getComTotalAttrs=function(t){for(var e,i=[],s=0;s<mo.TOTAL_ATTR_KEYS.length;s++)i[s]={key:mo.TOTAL_ATTR_KEYS[s],val:0};1==t?e=p.myTokens:2==t&&(e=p.taTokens);var n,o,a=[],l=0;for(o in e)l=e[o],(n=p.getTokenVOById(l))&&2<n.spcAttrObj.type&&-1==a.indexOf(n.spcAttrObj.type-1)&&a.push(n.color);for(o in e){var r;if(l=e[o],n=p.getTokenVOById(l))for(var h in n.comAttrList){r=n.comAttrList[h];var u,c=!1;for(var d in i)if((u=i[d]).key==r.key){-1!=a.indexOf(n.color)?u.val+=1.2*r.val:u.val+=r.val,c=!0;break}0==c&&(-1!=a.indexOf(n.color)?i.push({key:r.key,val:1.2*r.val}):i.push({key:r.key,val:r.val}))}}return i},p.getSpcTotalAttr=function(t){var e,i,s=[];for(var n in 1==t?e=p.myTokens:2==t&&(e=p.taTokens),e){i=e[n];var o=p.getTokenVOById(i);if(o){var a,l=!1;for(var r in s)if((a=s[r]).type==o.spcAttrObj.type){a.val+=o.spcAttrObj.val,l=!0;break}0==l&&s.push({type:o.spcAttrObj.type,val:o.spcAttrObj.val})}}return s},p.getMarryDayNum=function(t){ya.serverTime;null==p.marryDate?p.marryDate=new Date(1e3*t):p.marryDate.setTime(1e3*t),p.marryDate.setHours(0),p.marryDate.setMinutes(0),p.marryDate.setSeconds(0),p.marryDate.setMilliseconds(0),null==p.serverDate?p.serverDate=new Date(ya.serverTimeMs):p.serverDate.setTime(ya.serverTimeMs),p.serverDate.setHours(0),p.serverDate.setMinutes(0),p.serverDate.setSeconds(0),p.serverDate.setMilliseconds(0);var e=p.serverDate.getTime()-p.marryDate.getTime(),i=Math.floor(e/1e3);return Math.floor(i/86400)+1},p.getMonthAnniversaryDayNum=function(t){var e=0;null==p.marryDate?p.marryDate=new Date(1e3*t):p.marryDate.setTime(1e3*t);var i=p.marryDate.getDate();null==p.serverDate?p.serverDate=new Date(ya.serverTimeMs):p.serverDate.setTime(ya.serverTimeMs);var s=0,n=p.serverDate.getDate();return p.marryDate.getFullYear()==p.serverDate.getFullYear()&&p.marryDate.getMonth()==p.serverDate.getMonth()&&p.marryDate.getDate()==p.serverDate.getDate()?(11==p.serverDate.getMonth()?(p.marryDate.setFullYear(p.serverDate.getFullYear()+1),p.marryDate.setMonth(0)):p.marryDate.setMonth(p.serverDate.getMonth()+1),p.marryDate.setHours(0),p.marryDate.setMinutes(0),p.marryDate.setSeconds(0),p.marryDate.setMilliseconds(0),s=p.marryDate.getTime()-ya.serverTimeMs,e=Math.ceil(s/1e3/86400)):i<n?(11==p.serverDate.getMonth()?(p.marryDate.setFullYear(p.serverDate.getFullYear()+1),p.marryDate.setMonth(0)):(p.marryDate.setFullYear(p.serverDate.getFullYear()),p.marryDate.setMonth(p.serverDate.getMonth()+1)),p.marryDate.setHours(0),p.marryDate.setMinutes(0),p.marryDate.setSeconds(0),p.marryDate.setMilliseconds(0),s=p.marryDate.getTime()-ya.serverTimeMs,e=Math.ceil(s/1e3/86400)):n<i&&(e=i-n),e},p.getTokenSpcAttrStr=function(t,e){var i="";switch(t){case 1:i="仙侣同时在线时，全角色伤害增加"+e+"点";break;case 2:i="仙侣同时在线时，全角色伤害增加"+e+"%";break;case 3:i="绿色信物基础属性提高"+e+"%";break;case 4:i="蓝色信物基础属性提高"+e+"%";break;case 5:i="紫色信物基础属性提高"+e+"%";break;case 6:i="橙色信物基础属性提高"+e+"%"}return i},p.checkAnniversaryRewardRP=function(){var t=p.checkIsMonthAnniversary(),e=-1,i=p.checkIsYearsAnniversary(),s=-1;p.getRewards&&0<p.getRewards.length&&(e=p.getRewards.indexOf(1),s=p.getRewards.indexOf(2)),t&&-1==e||i&&-1==s?Nt.show("RP_MARRY_ANNIVERSARY_REWARD"):Nt.hide("RP_MARRY_ANNIVERSARY_REWARD")},p.initXML=function(){if(!p._baseVO){p._tokenList=[],p._extraDescs=[];var t,e=Ra.startEncode("marry.xml");for(var i in e)(t=e[i])instanceof xml.MarryTokenVO?p._tokenList.push(t):t instanceof xml.MarryBaseVO?p._baseVO=t:t instanceof xml.MarryExtraVO&&p._extraDescs.push(t)}},p.getBaseTokenInfo=function(t){var e;for(var i in p.baseVO.chooseTokenList)if((e=p.baseVO.chooseTokenList[i]).typeId==t)return e;return null},p.getTokenVOById=function(t){var e;for(var i in p.initXML(),p._tokenList)if((e=p._tokenList[i]).id==t)return e;return null},p.marryState=0,p.marryTs=0,p.getRewards=null,p.requestName=null,p.myTokens=null,p.taTokens=null,p.myTokenLogs=null,p.taTokenLogs=null,p.myWishTokens=null,p.taWishTokens=null,p.coupleInfoP=null,p._requestVOList=null,p.notMarryFriends=null,p.requestFriendP=null,p.requestWorld=null,p.requestUseItem=null,p.isShowMyMarry=!0,p.isPaying=!1,p.anniversaryDate=null,p.serverDate=null,p.marryDate=null,p._baseVO=null,p._tokenList=null,p._extraDescs=null,p}(),_o=function(){function t(){this.roleId=NaN,this.roleName=null,this.useItem=0,this.msg=null}return w(t,"modules.marry.MarryReplyVO"),t.prototype.setVO=function(t,e,i,s){this.roleId=t,this.roleName=e,this.useItem=i,this.msg=s},t}(),go=(function(){function t(){}w(t,"modules.mission.MissionConst")}(),function(){function n(){}return w(n,"modules.mission.MissionManager"),n.initXml=function(){null==n.missions&&(n.missions=Ra.startEncode("mission.xml","id"))},n.getMissionVOById=function(t){return n.initXml(),n.missions[t]},n.getNextFuncPreview=function(){var t,e;for(var i in null==n.previews&&(n.previews=Ra.startEncode("functionPre.xml")),n.previews)if(e=n.previews[i],!oa.checkAdvIsOpen(e.functionID)){var s=t?t.ord:1e5;e.ord<s&&(t=e)}return t},n.getFuncVOByID=function(t){var e;for(var i in null==n.previews&&(n.previews=Ra.startEncode("functionPre.xml")),n.previews)if((e=n.previews[i]).functionID==t)return e;return null},n.checkMission=function(t,e){return null!=n.curMission&&n.curMission.mission_id==t&&n.curMission.state==e},n.missions=null,n.curMission=null,n.previews=null,n}()),yo=function(){function t(){}return w(t,"modules.ModuleFactory"),t.createModules=function(){ke.registerToolTip(),cr.ins(),or.ins(),jl.ins(),Lr.ins(),Vr.ins(),Nr.ins(),Or.ins(),Mr.ins(),Dr.ins(),Wr.ins(),Rr.ins(),Yl.ins(),Zl.ins(),Ar.ins(),sl.ins(),er.ins(),Wl.ins(),Za.ins(),Cr.ins(),Tr.ins(),Gr.ins(),Oa.ins(),tl.ins(),tr.ins(),el.ins(),Dl.ins(),Yr.ins(),il.ins(),Ha.ins(),xr.ins(),Ol.ins(),bl.ins(),Xr.ins(),nr.ins(),Kr.ins(),ja.ins(),lr.ins(),za.ins(),Jr.ins(),zl.ins(),Nl.ins(),Da.ins(),ar.ins(),yl.ins(),$a.ins(),_r.ins(),Qr.ins(),Kl.ins(),mr.ins(),Br.ins(),Ga.ins(),kl.ins(),Sl.ins,hr.ins(),br.ins(),Xl.ins(),qr.ins(),pr.ins(),wr.ins(),Ml.ins(),Ja.ins(),sr.ins(),ir.ins(),rr.ins(),Sr.ins,Hl.ins(),Ll.ins,kr.ins,ul.ins,al.ins,Ka.ins(),Jl.ins(),qa.ins,dl.ins(),Pr.ins(),Vl.ins(),Al.ins(),Bl.ins(),gl.ins(),ll.ins(),Ba.ins()},t}(),vo=function(){function e(){}return w(e,"modules.navigation.NavManager"),I(1,e,"isFashionOpen",function(){return!(Bt.isWan11Pf9993Server()||Bt.isWan11Pf9992Server()||Bt.isZKPf9991Server()||Bt.isQiYuIos())&&(e._isFashionOpen&&!G.isReviewVersion)}),e.handlerFashionGoalInfo=function(t){e._isFashionOpen=1==t.open},e._isFashionOpen=!1,e}(),Io=function(){function e(){}return w(e,"modules.noble.NobleMgr"),I(1,e,"gifts",function(){return e.init(),e._gift}),I(1,e,"tips",function(){return e.init(),e._tips}),I(1,e,"nobleVO",function(){return e.init(),e.cfgVO}),e.init=function(){if(!e._init){e._init=!0;var t=Ra.startEncode("noble.xml");(e.cfgVO=t[0])&&(e._gift=W.parseAttrToArr(e.cfgVO.gift,",","|"),e._tips=e.cfgVO.tip.split(","))}},e.endTime=0,e.canGift=!1,e._init=!1,e._gift=null,e.cfgVO=null,e._tips=null,e}(),wo=function(){function e(){}return w(e,"modules.otherPet.OtherPetMgr"),I(1,e,"curPData",function(){return e._curPData},function(t){e._curPData=t}),I(1,e,"otherPets",function(){return e.curPData?e.curPData.pets:null}),e.getPetDataByIndex=function(t){return e.otherPets?e.otherPets[t]:null},e._curPData=null,e.curChooseIndex=0,e.curInrankPetID=NaN,e.curInrankPetName=null,e}(),bo=function(){function o(){}return w(o,"modules.otherRole.OtherRoleMgr"),o.setRoleData=function(t){t&&((o.roleData=o.roleData||{})[t.target_role_id]={vo:t,time:ya.serverTime})},o.getRankRoleData=function(t){return o.roleData&&o.roleData[t]?o.roleData[t].vo:null},o.getCurRankRoleName=function(){return o.getRankRoleData(o.curRoleID)?o.getRankRoleData(o.curRoleID).role_name:""},o.getRankRolePartnerData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].pal:null},o.getRoleIDByPalID=function(t){var e=t+"";return e.substr(0,e.length-1).concat(0)},o.getRankRolePartnerDataArray=function(t){void 0===t&&(t=0);var e,i=o.getRankRoleData(t);if(o.rolePalsArr=[],i){for(var s=0;s<i.pals.length;s++)e=i.pals[s].pal,o.rolePalsArr.push(e);return o.rolePalsArr}return null},o.getPalDataByCate=function(t,e){var i=o.getRankRoleData(t);if(i)for(var s=0;s<i.pals.length;s++){var n=i.pals[s];if(null!=n.pal&&n.pal.ext.category==e)return n.pal}return null},o.getRankRoleWingData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].wing:null},o.getRankRoleSplitData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].split:null},o.getRankRoleRefineData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].refining:null},o.getRankRoleLegendData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].chaotic:null},o.getRankRoleFightSoulData=function(t,e){var i=o.getRankRoleData(t);return i&&i.pals[e]?i.pals[e].war_soul:null},o.getCurPalRoleData=function(){return o.getRankRolePartnerData(o.curRoleID,o.curActorIndex)},o.getCurWData=function(){return o.getRankRoleWingData(o.curRoleID,o.curActorIndex)},o.getCurSData=function(){return o.getRankRoleSplitData(o.curRoleID,o.curActorIndex)},o.getCurRefineData=function(){return o.getRankRoleRefineData(o.curRoleID,o.curActorIndex)},o.getCurLegendData=function(){return o.getRankRoleLegendData(o.curRoleID,o.curActorIndex)},o.getCurFightSoulData=function(){return o.getRankRoleFightSoulData(o.curRoleID,o.curActorIndex)},o.getSpEquipNowLv=function(t){var e,i=o.getCurPalRoleData();for(var s in i.spec_equips)if((e=i.spec_equips[s]).id==t)return e.lv;return 0},o.isNeedRequest=function(t){return!(o.roleData&&o.roleData[t]&&ya.serverTime-o.roleData[t].time<300)},o.roleData=null,o.curRoleID=NaN,o.curActorIndex=NaN,o.rolePalsArr=null,o}(),So=function(){function s(){}return w(s,"modules.pack.CheckHasUtil"),s.getCheckDic=function(){return null==s.giftDic&&(s.giftDic=Ra.startEncode("gift.xml","id")),s.giftDic},s.initCheckIds=function(){if(!(0<s.checkIds.length)){var t,e=modules.pack.CheckHasUtil.getCheckDic();for(var i in e)(t=e[i])instanceof xml.GiftVO&&s.checkIds.push(t)}},s.getCheckId=function(t){var e;for(var i in s.initCheckIds(),s.checkIds)if((e=s.checkIds[i]).checkID==t)return e.id;return null},s.chackGiftHave=function(t){var e=0;if(s.getCheckDic(),s.giftDic&&s.giftDic.hasOwnProperty(t)){0<xo.getGoodsNumByType(xo.GOODS_ID,t)&&(e+=xo.getGoodsNumByType(xo.GOODS_ID,t));var i=s.giftDic[t];switch(0<xo.getGoodsNumByType(xo.GOODS_ID,i.checkID)&&(e+=xo.getGoodsNumByType(xo.GOODS_ID,i.checkID)),i.type){case 1:e+=oa.getFashionIsActByID(i.checkID);break;case 2:va.isHas(i.checkID)&&(e+=1)}}return e},s.chackGiftHave2=function(t){var e=0;0<xo.getGoodsNumByType(xo.GOODS_ID,t)&&(e+=xo.getGoodsNumByType(xo.GOODS_ID,t));var i=Math.floor(t/1e3);switch(13000102<=t&&t<=13000999&&(i=10903),i){case 10905:e+=oa.getFashionIsActByID(t);break;case 10904:va.isHas(t)&&(e+=1);break;case 10903:var s=ur.getPetIdByImg(t);e+=Eo.getHasGetSkillNum(s)}return e},s.giftDic=null,s.TYPE_FASHION=1,s.TYPE_TITLE=2,s.checkIds=[],s}(),xo=function(){function T(){}return w(T,"modules.pack.PackManager"),T.getPackDataByBagId=function(t){switch(t){case T.GOODS_ID:return T._goodsData;case T.EQUIP_ID:return T._equipData;case T.MYSTERY_DEPOT_ID:return T._mysteryDepotData;case T.FIGHT_SOUL_ID:return T._fightSoulData;case T.PURE_SPIRIT_ID:return T._pureSpiritData;case T.SPIRITRE_ID:return T._spiriTreData;case T.DEEPSEA_DEPOT_ID:return T._deepSeaDepotData;default:return null}},T.getEquipData=function(){return T._equipData?T._equipData:null},T.getGoodsData=function(){return T._goodsData?T._goodsData:null},T.getMysteryDepotData=function(){return T._mysteryDepotData?T._mysteryDepotData:null},T.getDeepSeaDepotData=function(){return T._deepSeaDepotData?T._deepSeaDepotData:null},T.getFightSoulGoods=function(){return T._fightSoulData?T._fightSoulData.goods:null},T.getPureSpiritGoods=function(){return T._pureSpiritData?T._pureSpiritData.goods:null},T.getSpiriTreGoods=function(){return T._spiriTreData?T._spiriTreData.goods:null},T.getBagEmpty=function(t){var e=0;switch(t){case T.GOODS_ID:T._goodsData&&(e=T._goodsData.columns*T._goodsData.rows-T._goodsData.goods.length);break;case T.EQUIP_ID:T._equipData&&(e=T._equipData.columns*T._equipData.rows-T._equipData.goods.length);break;case T.MYSTERY_DEPOT_ID:T._mysteryDepotData&&(e=T._mysteryDepotData.columns*T._mysteryDepotData.rows-T._mysteryDepotData.goods.length);break;case T.DEEPSEA_DEPOT_ID:T._deepSeaDepotData&&(e=T._deepSeaDepotData.columns*T._deepSeaDepotData.rows-T._deepSeaDepotData.goods.length);break;case T.FIGHT_SOUL_ID:T._fightSoulData&&(e=T._fightSoulData.columns*T._fightSoulData.rows-T._fightSoulData.goods.length);break;case T.PURE_SPIRIT_ID:T._pureSpiritData&&(e=T._pureSpiritData.columns*T._pureSpiritData.rows-T._pureSpiritData.goods.length);break;case T.SPIRITRE_ID:T._spiriTreData&&(e=T._spiriTreData.columns*T._spiriTreData.rows-T._spiriTreData.goods.length);break;default:e=0}return e},T.checkBagIsFull=function(t){var e=0;switch(t){case T.GOODS_ID:if(T._goodsData&&(e=T._goodsData.columns*T._goodsData.rows-T._goodsData.goods.length),0==e)return!0;break;case T.EQUIP_ID:if(T._equipData&&(e=T._equipData.columns*T._equipData.rows-T._equipData.goods.length),0==e)return!0;break;case T.MYSTERY_DEPOT_ID:if(T._mysteryDepotData&&(e=T._mysteryDepotData.columns*T._mysteryDepotData.rows-T._mysteryDepotData.goods.length),0==e)return!0;break;case T.DEEPSEA_DEPOT_ID:if(T._deepSeaDepotData&&(e=T._deepSeaDepotData.columns*T._deepSeaDepotData.rows-T._deepSeaDepotData.goods.length),0==e)return!0;break;case T.FIGHT_SOUL_ID:if(T._fightSoulData&&(e=T._fightSoulData.columns*T._fightSoulData.rows-T._fightSoulData.goods.length),0==e)return!0;break;case T.PURE_SPIRIT_ID:if(T._pureSpiritData&&(e=T._pureSpiritData.columns*T._pureSpiritData.rows-T._pureSpiritData.goods.length),0==e)return!0;break;case T.SPIRITRE_ID:if(T._spiriTreData&&(e=T._spiriTreData.columns*T._spiriTreData.rows-T._spiriTreData.goods.length),0==e)return!0}return!1},T.getItemToolTipType=function(t){switch(ur.getItemType(t)){case 3:return"EQUIP_TIP";case 1:return"GOODS_TIP"}return""},T.isCommonPackageBag=function(t){return 0<=T.COMMON_BAG_IDS.indexOf(t)},T.handlerBagData=function(t){if(t&&0<t.length){var e,i=0;for(var s in t)switch((e=t[s]).bag_id){case T.EQUIP_ID:e.goods&&0!=e.goods.length||(i+=1),T._equipData=e,T.countGoodsNum(e);break;case T.GOODS_ID:e.goods&&0!=e.goods.length||(i+=1),T._goodsData=e,T.countGoodsNum(e);break;case T.MYSTERY_DEPOT_ID:T._mysteryDepotData=e;break;case T.DEEPSEA_DEPOT_ID:T._deepSeaDepotData=e;break;case T.FIGHT_SOUL_ID:T._fightSoulData=e;break;case T.PURE_SPIRIT_ID:T._pureSpiritData=e;break;case T.SPIRITRE_ID:T._spiriTreData=e}2==i&&(T._goodNumDic={})}},T.countGoodsNum=function(t){var e;for(var i in T._goodNumDic=T._goodNumDic||{},t.goods)e=t.goods[i],T._goodNumDic[e.typeid]||(T._goodNumDic[e.typeid]=0),T._goodNumDic[e.typeid]+=e.current_num},T.updateGoodsNum=function(t,e){var i=0;(T._goodNumDic=T._goodNumDic||{})[t]&&(i=T._goodNumDic[t]),i+=e,T._goodNumDic[t]=Math.max(i,0)},T.handlerBagExtends=function(t){var e;for(var i in T._packExtendsDic=T._packExtendsDic||new Object,t)e=t[i],T._packExtendsDic[e.id]=e.val},T.handlerOneBagExtends=function(t,e){(T._packExtendsDic=T._packExtendsDic||new Object)[T.getBagTypeById(t)]=e},T.getBagTypeById=function(t){switch(t){case T.EQUIP_ID:return T.PACKTYPE_EQUIP;case T.GOODS_ID:return T.PACKTYPE_GOODS;case T.FIGHT_SOUL_ID:return T.PACKTYPE_FIGHT_SOUL;case T.PURE_SPIRIT_ID:return T.PACKTYPE_PURE_SPIRIT;case T.SPIRITRE_ID:return T.PACKTYPE_SPIRITRE}return 0},T.getBagExtends=function(t){return T._packExtendsDic&&T._packExtendsDic.hasOwnProperty(T.getBagTypeById(t))?T._packExtendsDic[T.getBagTypeById(t)]:0},T.getGoodsByOId=function(t){var e,i;if(T._goodsData)for(i in T._goodsData.goods)if((e=T._goodsData.goods[i]).id==t)return e;if(T._equipData)for(i in T._equipData.goods)if((e=T._equipData.goods[i]).id==t)return e;return null},T.getEquipByTypeID=function(t){var e;if(T._equipData)for(var i in T._equipData.goods)if((e=T._equipData.goods[i]).typeid==t)return e;return null},T.getGoodsByTypeID=function(t){var e;if(T._goodsData)for(var i in T._goodsData.goods)if((e=T._goodsData.goods[i]).typeid==t)return e;return null},T.getGoodsByType=function(t){if(T._goodsData){var e,i=[];for(var s in T._goodsData.goods)e=T._goodsData.goods[s],Math.floor(e.typeid/1e5)==t&&i.push(e);return i}return null},T.getGoodsByGoodsType=function(t){if(T._goodsData){var e,i=[];for(var s in T._goodsData.goods)e=T._goodsData.goods[s],Math.floor(e.typeid/1e3)==t&&i.push(e);return i}return null},T.getGoodsByIDFun=function(t){if(T._goodsData&&t){var e,i=[];for(var s in T._goodsData.goods)e=T._goodsData.goods[s],t.call(null,e.typeid)&&i.push(e);return i}return null},T.handerPackUpdate=function(t){switch(t.type){case 3:case 1:T.gainGoods(t.goods);break;case 2:T.delGoods(t.goods)}},T.delGoods=function(t){var e;for(var i in t){e=t[i];var s=T.getHanderPackData(e.bagposition);if(s)for(var n,o=s.length-1;0<=o;o--)if((n=s[o]).id==e.id){s.splice(o,1),T.updateGoodsNum(n.typeid,-n.current_num);break}}},T.gainGoods=function(t){var e;for(var i in t)e=t[i],T.updateOne(e)},T.updateOne=function(t){var e=T.getHanderPackData(t.bagposition),i=!1;if(e){for(var s,n=e.length,o=0,a=0;a<n;a++)if((s=e[a]).id==t.id){o=s.current_num,e[a]=t,T.updateGoodsNum(s.typeid,t.current_num-o),i=!0;break}i||(T.updateGoodsNum(t.typeid,t.current_num),e.push(t))}},T.getHanderPackData=function(t){switch(Math.floor(t/1e4)){case T.EQUIP_ID:return T._equipData?T._equipData.goods:null;case T.GOODS_ID:return T._goodsData?T._goodsData.goods:null;case T.MYSTERY_DEPOT_ID:return T._mysteryDepotData?T._mysteryDepotData.goods:null;case T.DEEPSEA_DEPOT_ID:return T._deepSeaDepotData?T._deepSeaDepotData.goods:null;case T.FIGHT_SOUL_ID:return T._fightSoulData?T._fightSoulData.goods:null;case T.PURE_SPIRIT_ID:return T._pureSpiritData?T._pureSpiritData.goods:null;case T.SPIRITRE_ID:return T._spiriTreData?T._spiriTreData.goods:null;default:return null}},T.getTypeToPowerInPackDic=function(t){var e,i,s=new P,n=modules.pack.PackManager.getEquipData(),o=0,a=0;if(n&&n.goods){var l,r;for(var h in n.goods)l=n.goods[h],(0==(i=ur.getItem(l.typeid)).category||i.category==t)&&i.level<=pe.myEquipLevel&&ur.isNormalEquip(i.type)&&(o=i.type,s.get(o)||s.set(o,[]),e=s.get(o),a=W.getAddExtraPower(l.equip_info?l.equip_info.extra_attrs:null)+i.basePow,e.push({goodID:l.id,power:a}));for(var u in s.keys)r=s.keys[u],s.get(r).sort(T.sortArrByPower)}return s},T.getWingDicInPack=function(){var t,e,i=new P,s=modules.pack.PackManager.getEquipData(),n=0,o=0;if(s){var a,l;for(var r in s.goods)a=s.goods[r],(e=ur.getItem(a.typeid)).level<=pe.myEquipLevel&&(n=e.type,i.get(n)||i.set(n,[]),t=i.get(n),o=W.getAddExtraPower(a.equip_info?a.equip_info.extra_attrs:null)+e.basePow,t.push({goodID:a.id,power:o}));for(var h in i.keys)l=i.keys[h],i.get(l).sort(T.sortArrByPower)}return i},T.initEquipDic=function(){if(null==T._equipArr){(T._equipArr=[]).length=5;for(var t=0;t<5;t++)null==T._equipArr[t]&&(T._equipArr[t]=[],T._equipArr[t].length=7)}for(t=0;t<5;t++)for(var e=1;e<7;e++)T._equipArr[t][e]=new Object},T.getTypeToPowerInBodyDic=function(){T.initEquipDic();var t,e,i,s=0,n=0,o=NaN,a=NaN,l=0,r=pe.myEquipLevel;for(var h in T._equipData.goods)if(e=T._equipData.goods[h],(n=(t=ur.getItem(e.typeid)).type)<10){if(s=t.category,o=t.basePow+W.getAddExtraPower(e.equip_info.extra_attrs),a=q.EQUIPPUTNUM[n],l=t.level<=r?r:t.level,!T._equipArr[s][n][l]){T._equipArr[s][n][l]=[],T._equipArr[s][n][l].length=a;for(var u=0;u<a;u++)T._equipArr[s][n][l][u]={id:-1,power:0}}for(var c=0,d=T._equipArr[s][n][l][c].power,p=1;p<a;p++)d>T._equipArr[s][n][l][p].power&&(d=T._equipArr[s][n][l][p].power,c=p);d<o&&(T._equipArr[s][n][l][c].id=e.id,T._equipArr[s][n][l][c].power=o)}for(var m in pe.pals){var f;for(var _ in(i=pe.pals[m]).equip)if(f=i.equip[_],n=(t=ur.getItem(f.type_id)).type,ur.isNormalEquip(n)){if(s=t.category,o=t.basePow+W.getAddExtraPower(f.extra_attr),a=q.EQUIPPUTNUM[n],!T._equipArr[s][n][r])for(T._equipArr[s][n][r]=[],T._equipArr[s][n][r].length=a,u=0;u<a;u++)T._equipArr[s][n][r][u]={id:-1,power:0};for(c=0,d=T._equipArr[s][n][r][c].power,p=1;p<a;p++)d>T._equipArr[s][n][r][p].power&&(d=T._equipArr[s][n][r][p].power,c=p);d<=o&&(T._equipArr[s][n][r][c].id=-1,T._equipArr[s][n][r][c].power=o)}}},T.sortArrByPower=function(t,e){return t.power<e.power?1:t.power>e.power?-1:0},T.getSelEquip=function(t,e){void 0===e&&(e=0);var i,s=[];if(T._equipData)for(var n in T._equipData.goods)i=T._equipData.goods[n],0==e?t.indexOf(i)<0&&ur.getItem(i.typeid).color<5&&ur.isNormalEquip(ur.getItem(i.typeid).type)&&s.push(i):1==e&&t.indexOf(i)<0&&ur.isWingEquip(ur.getItem(i.typeid).type)&&s.push(i);return s},T.getFilterEquip=function(t,e){if(void 0===e&&(e=9),T._equipData){t=t||[],T.getTypeToPowerInBodyDic();var i,s,n=[],o=0,a=NaN,l=0,r=0,h=0;for(var u in T._equipData.goods)if(s=T._equipData.goods[u],l=(i=ur.getItem(s.typeid)).type,ur.isNormalEquip(l)){r=i.category,a=W.getAddExtraPower(s.equip_info?s.equip_info.extra_attrs:null)+i.basePow;var c=!1;if(h=i.level<=pe.myEquipLevel?pe.myEquipLevel:i.level,0==r);else{var d;for(var p in T._equipArr[r][l][h])if(a>(d=T._equipArr[r][l][h][p]).power||d.id==s.id){c=!0;break}for(var m in T._equipArr[r][l]){if(parseInt(m)<i.level)for(p in T._equipArr[r][l][m])if(a<=(d=T._equipArr[r][l][m][p]).power){c=!1;break}}}if(!c&&t.indexOf(s)<0&&i.color<5&&(n.push(s),++o==e))return n}return n}return null},T.getGoodsNumByTypeID=function(t){return null==T._equipData?0:T._goodNumDic[t]?T._goodNumDic[t]:0},T.getGoodsArrByTypeID=function(t){var e,i=[];if(null==T._goodsData)return i;for(var s in T._goodsData.goods)(e=T._goodsData.goods[s]).typeid==t&&i.push(e);return i},T.getGoodsNumByType=function(t,e){return null==T._equipData?0:T._goodNumDic[e]?T._goodNumDic[e]:0},T.getGoodsByUseType=function(t){var e,i=[];if(T._goodsData)for(var s in T._goodsData.goods)e=T._goodsData.goods[s],ur.getItem(e.typeid).useType%1e3==t&&i.push(e);return i},T.getGoodsNumByUseType=function(t){if(null==T._equipData)return 0;var e,i=T._goodsData.goods,s=0;if(i)for(var n in i){e=i[n],ur.getItem(e.typeid).useType%1e3==t&&(s+=e.current_num)}return s},T.getGoodsFromBag=function(t,e){var i,s;switch(t){case T.EQUIP_ID:i=T._equipData.goods;break;case T.GOODS_ID:i=T._goodsData.goods}if(i)for(var n in i)if((s=i[n]).id==e)return s;return null},T.initWingEquipDic=function(){var t;for(var e in T.wingEquipDic=T.wingEquipDic||new Object,q.WINGSPUT2TYPEMAP)t=q.WINGSPUT2TYPEMAP[e],T.wingEquipDic[t]=[]},T.getBetterWingEquip=function(t){T.initWingEquipDic();var e,i,s=0,n=NaN,o=0;if(T._equipData)for(var a in T._equipData.goods){if(i=T._equipData.goods[a],s=(e=ur.getItem(i.typeid)).type,ur.isWingEquip(s))if(n=e.basePow,n+=W.getAddExtraPower(i.equip_info.extra_attrs),o=e.level<=t.level?t.level:e.level,null==T.wingEquipDic[s][o])T.wingEquipDic[s][o]={id:i.id,level:o,power:n,p:i};else T.wingEquipDic[s][o].power<n&&(T.wingEquipDic[s][o].id=i.id,T.wingEquipDic[s][o].level=o,T.wingEquipDic[s][o].power=n,T.wingEquipDic[s][o].p=i)}},T.getWingMeltEquip=function(){T.initWingEquipDic();var t,e,i,s=0,n=NaN,o=0,a=0,l=[],r=[];for(var h in T.powerDic=T.powerDic||new Object,q.WINGSPUT2TYPEMAP)e=q.WINGSPUT2TYPEMAP[h],T.powerDic[e]=[];(new Object).className="p_kv";for(var u=0;u<4;u++){var c=oa.getWingTOCVO(u);c&&(l[c.level]&&0<l[c.level]?++l[c.level]:l[c.level]=1,a=c.level<a?c.level:a,r.push(c.level))}var d,p=0;for(u=0;u<4;u++){var m;if(c=oa.getWingTOCVO(u))for(var f in++p,c.equips)m=c.equips[f],s=(t=ur.getItem(m.type_id)).type,ur.isWingEquip(s)&&(n=t.basePow,n+=W.getAddExtraPower(m.extra_attr),o=t.level>a?t.level:a,T.wingEquipDic[s][o]||(T.wingEquipDic[s][o]=[]),(i=new Object).className="p_goods",i.typeid=t.id,T.wingEquipDic[s][o].push({power:n,p:i}),T.powerDic[s].push(n))}for(h in q.WINGSPUT2TYPEMAP){for(e=q.WINGSPUT2TYPEMAP[h];T.powerDic[e].length<p;)T.powerDic[e].push(0);T.powerDic[e].sort(T.tempSort)}if(T._equipData)for(d in T._equipData.goods)i=T._equipData.goods[d],s=(t=ur.getItem(i.typeid)).type,ur.isWingEquip(s)&&(n=t.basePow,n+=W.getAddExtraPower(i.equip_info.extra_attrs),o=t.level,T.wingEquipDic[s][o]||(T.wingEquipDic[s][o]=[]),T.wingEquipDic[s][o].push({power:n,p:i}));var _,g=[];for(_ in q.WINGSPUT2TYPEMAP){s=q.WINGSPUT2TYPEMAP[_];var y=T.wingEquipDic[s],v=T.tempCopyArr(l);for(e=T.maxLv;1<=e;e--)if(y[e]){y[e].sort(T.justMaxFun);var I=v[e]&&0<v[e]?v[e]:0;for(var w in r)r[w]<e&&++I;if(T.powerDic[s]&&0<T.powerDic[s].length){for(var b=0,S=0,x=0;x<y[e].length;x++)for(var C=b;C<T.powerDic[s].length;C++)if(0==y[e][x].p.id||y[e][x].power>T.powerDic[s][C]){++S,b=C+1;break}I=Math.min(I,S)}if(y[e].length>=I)for(var P=y[e].length-Math.min(y[e].length,I);0<P;){if(0<(i=y[e].pop().p).id&&(g.push(i),10<=g.length))return g;--P}else v[e-1]=v[e-1]||0,v[e-1]=v[e-1]+I-y[e].length}else v[e]&&(v[e-1]=v[e-1]||0,v[e-1]=v[e-1]+v[e])}return g},T.tempSort=function(t,e){return e<t?-1:1},T.tempCopyArr=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=t[i];return e},T.justMaxFun=function(t,e){return t.power>e.power?-1:1},T.checkHasBetterWingEquipCanEquip=function(t){var e,i;T.getBetterWingEquip(t);var s;for(var n in q.WINGSPUT2TYPEMAP){var o;for(var a in s=q.WINGSPUT2TYPEMAP[n],t.equips)if(o=t.equips[a],(i=ur.getItem(o.type_id)).type==s){e=o;break}if(e){var l=i.basePow;if(l+=W.getAddExtraPower(e.extra_attr),null!=T.wingEquipDic[s][t.level]&&T.wingEquipDic[s][t.level].power>l)return Nt.show("RP_WING_EQUIP"),!0;e=null}else if(null!=T.wingEquipDic[s][t.level])return Nt.show("RP_WING_EQUIP"),!0}return!1},T.getBetterWingEquipCanEquip=function(t){var e,i;T.getBetterWingEquip(t);var s,n=[];for(var o in q.WINGSPUT2TYPEMAP){var a;for(var l in s=q.WINGSPUT2TYPEMAP[o],t.equips)if(a=t.equips[l],(i=ur.getItem(a.type_id)).type==s){e=a;break}if(e){var r,h=i.basePow;h+=W.getAddExtraPower(e.extra_attr),null!=T.wingEquipDic[s][t.level]&&T.wingEquipDic[s][t.level].power>h&&((r=new Object).className="p_kv",r.id=T.wingEquipDic[s][t.level].id,r.val=s%100+10,n.push(r)),e=null}else null!=T.wingEquipDic[s][t.level]&&((r=new Object).className="p_kv",r.id=T.wingEquipDic[s][t.level].id,r.val=s%100+10,n.push(r))}return n},T.getBetterWingEquipCantEquip=function(t){var e,i;T.getBetterWingEquip(t);var s,n=[];for(var o in q.WINGSPUT2TYPEMAP){var a,l;for(var r in s=q.WINGSPUT2TYPEMAP[o],t.equips)if(a=t.equips[r],(i=ur.getItem(a.type_id)).type==s){e=a;break}for(var h in T.wingEquipDic[s])if((l=T.wingEquipDic[s][h]).level>t.level)if(e){var u=i.basePow;u+=W.getAddExtraPower(e.extra_attr),l.power>u&&n.push(l.p)}else n.push(l.p);e=null}return n},T.handlerSmeltInfo=function(t){T.smeltToc=t},T.handlerSmelt=function(t){T.smeltToc&&(T.smeltToc.level!=t.level?Jt.addTip("熔炼等级提升！"):Jt.addTip("熔炼值 + "+(t.exp-T.smeltToc.exp)),T.smeltToc.exp=t.exp,T.smeltToc.level=t.level)},T.getMeltVO=function(){return T.meltVO||(T.meltVO=Ra.startEncode("wingMelt.xml")[0]),T.meltVO},T.getPackOpenVO=function(t){return T.packOpenVODic||(T.packOpenVODic=Ra.startEncode("pack.xml","id")),T.packOpenVODic.hasOwnProperty(t)?T.packOpenVODic[t]:null},T.showRpRegrowGoods=function(t){if(1010==t.useType){var e=oa.getRegrowTOCVO();if(e&&oa.getRegrowLvVO(e.regrow_lv+1)){var i,s=10,n=10,o=10,a=10,l=10;for(var r in e.buy)switch((i=e.buy[r]).id){case 2:s-=i.val;break;case 3:n-=i.val;break;case 4:o-=i.val;break;case 5:a-=i.val;break;case 6:l-=i.val}return 0<s&&10201117==t.id||0<n&&10201118==t.id||0<o&&10201884==t.id||0<a&&10201885==t.id||0<l&&10201886==t.id}return!1}return!0},T.showRPByItemID=function(t){var e=ur.getItem(t);return!!e&&(!!(e instanceof xml.GoodsVO&&e.level<=pe.myEquipLevel&&e.needShowRP())&&(1010==e.useType?T.showRpRegrowGoods(e):3015!=e.useType||Eo.godPetAlert))},T.getCompKinds=function(){return null==T.compKinds&&(T.compKinds=Ra.startEncode("comp.xml")),T.compKinds},T.getbathMeltEquip=function(t){var e=[0,0,0,0,0,0];if(T._equipData){T.getTypeToPowerInBodyDic();var i,s,n=NaN,o=t.length=0,a=0,l=0;for(var r in T._equipData.goods)if(s=T._equipData.goods[r],o=(i=ur.getItem(s.typeid)).type,ur.isNormalEquip(o)){a=i.category,n=W.getAddExtraPower(s.equip_info?s.equip_info.extra_attrs:null)+i.basePow;var h=!1;if(l=i.level<=pe.myEquipLevel?pe.myEquipLevel:i.level,0==a);else{var u;for(var c in T._equipArr[a][o][l])if(n>(u=T._equipArr[a][o][l][c]).power||u.id==s.id){h=!0;break}for(var d in T._equipArr[a][o]){if(parseInt(d)<i.level)for(c in T._equipArr[a][o][d])if(n<=(u=T._equipArr[a][o][d][c]).power){h=!1;break}}}!h&&i.color<5&&(t.push(s.id),++e[i.color-1],e[5]+=200*(Math.floor(i.level/10)+1)*i.color,e[4]+=Math.ceil(i.level/30)*i.color)}return e}return e},T.getItemLimitVO=function(t,e){if(T.itemLimitDic||(T.itemLimitDic=Ra.startEncode("itemLimit.xml","id")),T.itemLimitDic&&T.itemLimitDic.hasOwnProperty(t)){var i=T.itemLimitDic[t];if(i.ItemLimitTypeDic&&i.ItemLimitTypeDic.hasOwnProperty(e))return i.ItemLimitTypeDic[e]}return null},T.goodsConversionAlert=function(t,e,i){var s,n=new Ee,o=T.getGoodsConversion(e);switch(e){case 32:s="异兽",i-=4;break;case 33:s="神器",i-=3;break;case 19:s="道具",i-=4;break;case 8:s="道具",i-=3;break;case 31:s="道具",i-=4}var a=o[i],l=a.num+"个"+(8==e?ur.getItem(a.typeId).name:ur.getItem(a.typeId).title);n.msg=Z.font("您已激活该"+s+",自动为您转化为"+l,"#5d3924",24),n.yesCaller=cr.ins(),n.yesFun=cr.ins().useItem,n.yesArgs=[t],EF.showVO(n)},T.getGoodsConversion=function(t){if(!T.goodsConversionDic){var e,i=Ra.startEncode("packGoodsConversion.xml");for(var s in i)(e=i[s])instanceof xml.GoodsConversionVO&&(T.goodsConversionDic=e)}var n;switch(t){case 32:n=T.goodsConversionDic.beastsAnimalArr;break;case 33:n=T.goodsConversionDic.godEquipArr;break;case 19:n=T.goodsConversionDic.fashionArr;break;case 8:n=T.goodsConversionDic.titleArr;break;case 31:n=T.goodsConversionDic.talimanArr}return n},T.nowOpenTimes=0,T._equipData=null,T._goodsData=null,T._goodNumDic=null,T._mysteryDepotData=null,T._fightSoulData=null,T._pureSpiritData=null,T._spiriTreData=null,T._deepSeaDepotData=null,T.PACKTYPE_GOODS=1,T.PACKTYPE_EQUIP=2,T.PACKTYPE_MYSTERY_DEPOT=3,T.PACKTYPE_FIGHT_SOUL=4,T.PACKTYPE_PURE_SPIRIT=5,T.PACKTYPE_SPIRITRE=6,T.PACKTYPE_DEEPSEA_DEPOT=7,T.GOODS_ID=1,T.EQUIP_ID=11,T.MYSTERY_DEPOT_ID=21,T.DEEPSEA_DEPOT_ID=41,T.FIGHT_SOUL_ID=26,T.PURE_SPIRIT_ID=31,T.SPIRITRE_ID=36,T._packExtendsDic=null,T._equipArr=null,T.wingEquipDic=null,T.maxLv=20,T.powerDic=null,T.smeltToc=null,T.meltVO=null,T.packOpenVODic=null,T.compKinds=null,T.itemLimitDic=null,T.goodsConversionDic=null,_(T,["COMMON_BAG_IDS",function(){return this.COMMON_BAG_IDS=[T.GOODS_ID,T.EQUIP_ID,T.MYSTERY_DEPOT_ID,T.DEEPSEA_DEPOT_ID]}]),T}(),Co=function(){function t(){this.typeId=0,this.num=0,this.effect=0,this.sex=0,this.category=0}return w(t,"modules.pack.vo.GifProductVO"),t}(),Po=function(){function o(){}return w(o,"modules.pet.book.PetBookMgr"),o.init=function(){var t;if(!o.petDic)for(var e in o.petDic=Ra.startEncode("petBook.xml","skinID"),(o.petColorArr=[]).length=5,o.lables="",o.petDic)t=o.petDic[e],null==o.petColorArr[t.color-1]&&(o.lables+=""==o.lables?o.chinArr[t.color-1]+"星":","+o.chinArr[t.color-1]+"星",o.petColorArr[t.color-1]=[]),o.petColorArr[t.color-1].push(t)},o.getLables=function(){return o.init(),o.lables},o.getBookVO=function(t){return o.init(),o.petDic[t]},o.getDataArrByColor=function(t){o.init();var e,i=[];for(var s in o.petColorArr[t])(e=o.petColorArr[t][s]).showT<=ya.serverTime&&i.push(e);return i},o.getNextTimeOut=function(){o.init();for(var t=99999999,e=0;e<o.petColorArr.length;e++){var i,s=o.petColorArr[e];for(var n in s)(i=s[n]).showT>ya.serverTime&&(t=Math.min(i.showT,t))}return t},o.getPageNum=function(){return o.init(),o.petColorArr.length},o.setPetBookHas=function(t){o.petBookHasInfo=t},o.updateNewHas=function(t){t&&!o.checkHadPet(t.skin_id)&&(o.petBookHasInfo=o.petBookHasInfo||[]).push(t.skin_id)},o.checkHadPet=function(t){return o.petBookHasInfo&&-1!=o.petBookHasInfo.indexOf(t)},o.getNumTipByIndex=function(t){var e,i=0,s=(o.tempArr=o.getDataArrByColor(t))?o.tempArr.length:0;for(var n in o.petBookHasInfo)e=o.petBookHasInfo[n],(o.tempPet=o.getBookVO(e))&&o.tempPet.color==t+1&&i++;return i+"/"+s},o.getColorNameByIndex=function(t){return 0<=t?o.chinArr[t]+"星":""},o.petBookHasInfo=null,o.petDic=null,o.petColorArr=null,o.lables=null,o.tempArr=null,o.tempPet=null,_(o,["chinArr",function(){return this.chinArr=["一","二","三","四","五","六","七","八","九","十"]}]),o}(),To=function(){function s(){}return w(s,"modules.pet.embattle.PetEmbattleMgr"),I(1,s,"hurtTime",function(){return 500/s._playRate}),I(1,s,"playRate",function(){return s._playRate},function(t){s._playRate=t}),I(1,s,"befSkill",function(){return 500/s._playRate}),I(1,s,"petActTime",function(){return 300/s._playRate}),I(1,s,"aftSkill",function(){return 500/s._playRate}),I(1,s,"moveSpeed",function(){return 1600*s._playRate}),I(1,s,"extraTime",function(){return 200/s._playRate}),I(1,s,"maxTowerRound",function(){return s.initTowerXML(),s._maxTowerRound}),s.getRound=function(t){return s._nowRoundDic&&s._nowRoundDic.hasOwnProperty(t)?s._nowRoundDic[t]:1},s.initInfo=function(t,e){(s.petTowerInfoDic=s.petTowerInfoDic||new Object)[e]=t,(s._nowRoundDic=s._nowRoundDic||new Object)[t.tower_id]=t.passed_barrier},s.getInfoByTowerID=function(t){return s.petTowerInfoDic&&s.petTowerInfoDic.hasOwnProperty(t)?s.petTowerInfoDic[t]:null},s.initTowerXML=function(){if(null==s.towerMonsterDic){var t,e=Ra.startEncode("petTower.xml");for(var i in s.towerMonsterDic=new Object,s.towerRoundDic=new Object,s.towerSkillDic=new Object,s.towerSkillArr=[],s._maxTowerRound=0,e)(t=e[i])instanceof xml.TowerMonsterVO?s.towerMonsterDic[t.pet_id]=t:t instanceof xml.TowerRoundVO?(s.towerRoundDic[t.id]=t,s._maxTowerRound+=1):(s.towerSkillDic[t.id]=t,s.towerSkillArr.push(t))}},s.getPutongSkillVO=function(){return s.putongSkillVO||((s.putongSkillVO=new ee).id=999,s.putongSkillVO.hurtTime="15,15",s.putongSkillVO.skillUrl="embattle_pugong"),s.putongSkillVO},s.getTowerMonster=function(t){return s.initTowerXML(),s.towerMonsterDic.hasOwnProperty(t)?s.towerMonsterDic[t]:null},s.getTowerRound=function(t){return s.initTowerXML(),s.towerRoundDic.hasOwnProperty(t)?s.towerRoundDic[t]:null},s.getTenRound=function(){for(var t,e=[],i=10010;;i+=10){if(!(t=s.getTowerRound(i)))return e;e.push(t)}return e},s.getTowerSkill=function(t){return s.initTowerXML(),s.towerSkillDic.hasOwnProperty(t)?s.towerSkillDic[t]:null},s.getTowerSkills=function(){return s.initTowerXML(),s.towerSkillArr},s.handlerPetTowerPlayToc=function(t){(s.petTowerLogDic=s.petTowerLogDic||new Object)[t.tower_id]=s.petTowerLogDic[t.tower_id]||new Object,s.petTowerLogDic[t.tower_id][t.barrier]=t},s.getPetTowerPlayToc=function(t,e){return s.petTowerLogDic&&s.petTowerLogDic.hasOwnProperty(t)&&s.petTowerLogDic[t].hasOwnProperty(e)?s.petTowerLogDic[t][e]:null},s.getPetXYByPos=function(t){var e=new Tt;switch(t){case 11:e.x=187,e.y=665;break;case 12:e.x=375,e.y=665;break;case 13:e.x=567,e.y=665;break;case 14:e.x=169,e.y=843;break;case 15:e.x=375,e.y=843;break;case 16:e.x=581,e.y=843;break;case 21:e.x=210,e.y=419;break;case 22:e.x=375,e.y=419;break;case 23:e.x=543,e.y=419;break;case 24:e.x=228,e.y=290;break;case 25:e.x=377,e.y=290;break;case 26:e.x=529,e.y=290}return e},s.resetData=function(){if(s.unitPosDic)for(var t in s.unitPosDic)s.unitPosDic[t]=null},s.setPetUnitByPos=function(t,e){(s.unitPosDic=s.unitPosDic||new Object)[e]=t},s.getPetUnitByPos=function(t){return s.unitPosDic&&s.unitPosDic.hasOwnProperty(t)?s.unitPosDic[t]:null},s.getScaleByPos=function(t){return 1},s.handlerPetTowerQuickToc=function(t){s.getInfoByTowerID(t.tower_id).passed_barrier=t.stop_barrier,s._nowRoundDic[t.tower_id]=t.stop_barrier},s.handlerPetEmbattlePower=function(t){(s.petEmbattlePowerDic=s.petEmbattlePowerDic||new Object)[t.role_id]=s.petEmbattlePowerDic[t.role_id]||new Object,s.petEmbattlePowerDic[t.role_id][t.embattle_index]=t.power},s.getPetEmbattlePower=function(t,e){return s.petEmbattlePowerDic.hasOwnProperty(t)&&s.petEmbattlePowerDic[t].hasOwnProperty(e)?s.petEmbattlePowerDic[t][e]:0},s._moveSpeed1=1600,s._petActTime=300,s._hurtTime=500,s._befSkill=500,s._aftSkill=500,s._extraTime=200,s._playRate=1,s._nowRoundDic=null,s.petTowerInfoDic=null,s.towerMonsterDic=null,s.towerRoundDic=null,s._maxTowerRound=0,s.towerSkillDic=null,s.towerSkillArr=null,s.putongSkillVO=null,s.petTowerLogDic=null,s.unitPosDic=null,s.petEmbattlePowerDic=null,s}(),ko=function(){function n(){}return w(n,"modules.pet.embattle.PetFightUtil"),n.isMyPos=function(t){return t<20},n.getPosPoint=function(t){return n.posPoint=n.posPoint||new Tt,1<Math.floor(t/10)?n.posPoint.x=982-n.posArr[t%10][0]+5:n.posPoint.x=n.posArr[t%10][0],n.posPoint.y=n.posArr[t%10][1],n.posPoint},n.getPosPoint3=function(t){return n.posPoint=n.posPoint||new Tt,1<Math.floor(t/10)?n.posPoint.x=1077-n.posArr3[t%10][0]+5:n.posPoint.x=n.posArr3[t%10][0],n.posPoint.y=n.posArr3[t%10][1],n.posPoint},n.getPosSmallPoint=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=0),n.posPoint=n.posPoint||new Tt;var s;return s=t[i].embattle_pos,n.posPoint.x=0==e?64*int((s%10-1)/3):s%10<4?64*int((s%10+5)/3):6<s%10?64*int((s%10-7)/3):64*int((s%10-1)/3),n.posPoint.y=(s%10-1)%3*64,n.posPoint},n.getSpcAvatarPos=function(t,e){void 0===e&&(e=1);var i=0;return i=1==e?t%10%3==0?3:t%10%3:t%10<4?1:t%10<7?4:7,1<Math.floor(t/10)?i+20:i+10},n.getAvatarDir=function(t,e){return 1<Math.floor(t/10)?6:2},n.getFightIDType=function(t){var e=t.toString();return int(e.substr(e.length-4,4))},n.isAttackPos=function(t,e){for(var i=0;i<e.length;i++){if(e[i].pos!=t)return!0}return!1},n.getPetPKBuffLastRound=function(t){return t/0x800000000000&63},n.getPetPKBuffID=function(t){return t/1048576&134217727},n.getPetPKBuffType=function(t){return(t/1048576&134217727)/1e4},n.getPetPKBuffVal=function(t){return 1048575&t},n.getPetFightMiss=function(t){return 0<(t.change>>31&1)},n.getPetFightRenew=function(t){return 0<(1&t.effect)},n.getPetHurtShield=function(t){return 0<(t.effect>>1&1)},n.getPetHPShield=function(t){return 0<(t.effect>>2&1)},n.getDu=function(t){return 0<(t.effect>>10&1)},n.getHuo=function(t){return 0<(t.effect>>11&1)},n.getLei=function(t){return 0<(t.effect>>12&1)},n.getBing=function(t){return 0<(t.effect>>13&1)},n.getPetMoraleChange=function(t){var e=t.effect>>3&63;return 0<(t.effect>>9&1)&&(e*=-1),e},n.getPetFightDouble=function(t){return 0<(t.change>>30&1)},n.getPetFightRemainHP=function(t){return t.remain_hp},n.getPetFightChangeHP=function(t){return 0<(t.change>>20&1)?0-t.change_hp:t.change_hp},n.getPetFightRemainRage=function(t){return t.remain>>23&511},n.getPetFightChangeRage=function(t){return 0<(t.change>>29&1)?0-(t.change>>21&255):t.change>>21&255},n.posPoint=null,_(n,["posArr",function(){return this.posArr=["",[400,232],[370,302],[339,375],[279,233],[249,303],[218,375],[158,233],[128,302],[97,375]]},"posArr3",function(){return this.posArr3=["",[400,287],[370,357],[339,430],[279,288],[249,358],[218,430],[158,288],[128,357],[97,430]]}]),n}(),Ao=function(){function t(){}return w(t,"modules.pet.PetConst"),_(t,["lvArrs",function(){return this.lvArrs=[55,80,100,120]},"proArrs",function(){return this.proArrs=[0,15,36,60,90,153]},"PETSOUL_NAME",function(){return this.PETSOUL_NAME=["乾","坤","震","巽","坎","离","艮","兑"]},"PET_EXP_GOOD",function(){return this.PET_EXP_GOOD=[13000001,13000002,13000003,13000004]},"PET_EXP_UP",function(){return this.PET_EXP_UP=[5e3,2e4,1e5,5e5]}]),t}(),Eo=function(){function u(){}return w(u,"modules.pet.PetMgr"),I(1,u,"changeShowRP",function(){return u._changeShowRP},function(t){0==(u._changeShowRP=t)?Nt.hide("RP_PET_SOUL_CHANGE"):u.checkShowRP()}),I(1,u,"pets",function(){return u._pets&&u._pets.sort(u.sortFunc),u._pets}),I(1,u,"petSoulChangeArr",function(){return u.initPetSoulXML(),u._petSoulChangeArr}),I(1,u,"petSoulInfo",function(){return u.soulInfoToc}),u.checkShowRP=function(){var t=pe.getScore(13);for(var e in u.petSoulChangeArr)if(u.petSoulChangeArr[e].needNum<=t)return void Nt.show("RP_PET_SOUL_CHANGE");Nt.hide("RP_PET_SOUL_CHANGE")},u.getInbodyPetSoulNumByColor=function(t){var e,i=0;for(var s in u.pets){var n;if((e=u.pets[s]).soul_info)for(var o in e.soul_info.pet_souls){n=e.soul_info.pet_souls[o],Math.floor(n.type_id/1e4)%10==t&&(i+=1)}}return i},u.getInbodyPetSoulNumByType=function(t){var e,i=0;for(var s in u.pets){if((e=u.pets[s]).soul_info)for(var n in e.soul_info.pet_souls)if(e.soul_info.pet_souls[n].type_id==t){i+=1;break}}return i},u.sortFunc=function(t,e){return t.state==e.state?t.power==e.power?t.pet_id!=e.pet_id?t.pet_id<e.pet_id?-1:1:0:t.power>e.power?-1:1:0==t.state||0==e.state?t.state>e.state?-1:1:t.state<e.state?-1:1},u.getPetByPetID=function(t){var e;if(u._pets&&0<u._pets.length)for(var i in u._pets)if((e=u._pets[i]).pet_id==t)return e;return null},u.handlerPetInfo=function(t){u._pets=t.pet_infos},u.handlerPetFight=function(t){if(u.pets){for(var e,i=0;i<u.pets.length;i++)1==(e=u.pets[i]).state&&(e.state=3);for(i=0;i<u.pets.length;i++)(e=u.pets[i]).pet_id==t.update_pet.pet_id&&(u.pets[i]=t.update_pet)}},u.getSamePetNum=function(t){if(u.pets)for(var e,i=0,s=0;s<u.pets.length;s++){e=u.pets[s];var n=ur.getPetIdByImg(t);e.type_id==n&&i++}return i},u.handlerPetFuse=function(t){if(u._pets&&0<u._pets.length&&t.del_pet_id&&0<t.del_pet_id.length){for(var e=u._pets.length-1,i=t.del_pet_id.length,s=e;0<=s;s--)for(var n=u._pets[s],o=i;0<=o;o--)t.del_pet_id[o]==n.pet_id&&(n.pet_id==u.curSelPetID&&(u.curSelPetID=0),u._pets.splice(s,1),t.del_pet_id.splice(o,1));for(var a=0;a<u._pets.length;a++)if((n=u._pets[a]).pet_id==t.new_pet.pet_id)return void(u._pets[a]=t.new_pet);u._pets.push(t.new_pet)}},u.handlerPetDisCard=function(t){if(u._pets&&0<u._pets.length)for(var e=u._pets.length-1;0<=e;e--){var i=u._pets[e];if(t.pet_id==i.pet_id){i.pet_id==u.curSelPetID&&(u.curSelPetID=0),u._pets.splice(e,1);break}}},u.handlerPetDevoteInfo=function(t){u.devoteInfo=t},u.getDevoteInfo=function(){return u.devoteInfo},u.handlerPetDevote=function(t){for(var e=0;e<u.pets.length;e++)u.pets[e].pet_id==t.update_pet.pet_id&&(u.pets[e]=t.update_pet)},u.handlerPetTrain=function(t){var e=u.getPetByPetID(t.pet_id);e&&(e.exp+=t.train_exp)},u.getPetZZ=function(t){var e=Math.ceil(t/500)-1;return u.ZZ_ARR.length>e?u.ZZ_ARR[Math.ceil(t/500)-1]:""},u.getPetZZCol=function(t){var e=Math.ceil(t/500)+1;return U.getColorDark(e)},u.handlerGetNewPet=function(t){u._pets=u._pets||[];for(var e=0;e<u._pets.length;e++)if(u._pets[e].pet_id==t.pet_id)return void(u._pets[e]=t);u._pets.push(t)},u.getPetSkillVO=function(t){return null==u.petSkillDic&&(u.petSkillDic=Ra.startEncode("petSkill.xml","id")),u.petSkillDic[t]},u.getHasGetSkillNum=function(t){var e,i=0;if(u.pets&&0<u.pets.length)for(var s in u.pets){if((e=u.pets[s]).skill_info&&e.skill_info.pet_skills)for(var n in e.skill_info.pet_skills)if(e.skill_info.pet_skills[n].type_id==t){++i;break}}if(modules.pet.PetMgr.bagSkill)for(n in u.bagSkill.all_skills)modules.pet.PetMgr.bagSkill.all_skills[n].type_id==t&&++i;return i},u.toGetFusePet=function(t,e){var i,s;null==(u.fusePetArr=u.fusePetArr||[])[0]?((i=new Object).className="p_pet",u.fusePetArr[0]=i):i=u.fusePetArr[0],null==u.fusePetArr[1]?((s=new Object).className="p_pet",u.fusePetArr[1]=s):s=u.fusePetArr[1],i.pet_name=t.pet_name,s.pet_name=e.pet_name,i.attack_type=t.attack_type,s.attack_type=e.attack_type,i.skin_id=t.skin_id,s.skin_id=e.skin_id,i.state=s.state=4;var n=Math.floor(t.type_id%1e5/1e4),o=Math.floor(e.type_id%1e5/1e4);return i.level=s.level=Math.max(t.level,e.level),i.type_id=s.type_id=o<n?t.type_id:e.type_id,i.property=s.property=Math.max(t.property,e.property),i.init_property=s.init_property=Math.max(t.init_property,e.init_property),i.aptitude=s.aptitude=Math.max(t.aptitude,e.aptitude),i.exp=s.exp=Math.max(t.exp,e.exp),i.next_level_exp=s.next_level_exp=Math.max(t.next_level_exp,e.next_level_exp),i.phy_attack=s.phy_attack=i.property*(i.level-1)+i.init_property,i.magic_attack=s.magic_attack=i.property*(i.level-1)+i.init_property,i.max_hp=s.max_hp=8*(i.property*(i.level-1)+i.init_property),i.phy_defence=s.phy_defence=Math.round(2*(i.property*(i.level-1)+i.init_property)/3),i.magic_defence=s.phy_defence=Math.round(2*(i.property*(i.level-1)+i.init_property)/3),i.double_attack=s.double_attack=Math.max(t.double_attack,e.double_attack),i.double_attack_anti=s.double_attack_anti=Math.max(t.double_attack_anti,e.double_attack_anti),i.phy_hurt_rate=s.phy_hurt_rate=Math.max(t.phy_hurt_rate,e.phy_hurt_rate),i.phy_hurt_anti=s.phy_hurt_anti=Math.max(t.phy_hurt_anti,e.phy_hurt_anti),i.magic_hurt_rate=s.magic_hurt_rate=Math.max(t.magic_hurt_rate,e.magic_hurt_rate),i.magic_hurt_anti=s.magic_hurt_anti=Math.max(t.magic_hurt_anti,e.magic_hurt_anti),u.fusePetArr},u.handlerPetLevelUp=function(t){if(u._pets)for(var e=0;e<u._pets.length;e++)u._pets[e].pet_id==t.new_pet.pet_id&&(u._pets[e]=t.new_pet)},u.handlerPetSkillUpgrade=function(t){var e=Math.floor(t.update_skill.index/1e3)+pe.roleID,i=u.getPetByPetID(e);if(i.skill_info){i.skill_info.pet_skills=i.skill_info.pet_skills||[];for(var s=0;s<i.skill_info.pet_skills.length;s++)i.skill_info.pet_skills[s].index==t.update_skill.index&&(i.skill_info.pet_skills[s]=t.update_skill)}},u.handlerPetSkillForget=function(t){var e;for(var i in t.del_skill_indexes){e=t.del_skill_indexes[i];var s=Math.floor(e/1e3)+pe.roleID,n=u.getPetByPetID(s);if(n.skill_info){n.skill_info.pet_skills=n.skill_info.pet_skills||[];for(var o=n.skill_info.pet_skills.length-1;0<=o;o--)n.skill_info.pet_skills[o].index==e&&n.skill_info.pet_skills.splice(o,1)}}},u.handlerPetSkillSeal=function(t){var e=Math.floor(t.update_skill.index/1e3)+pe.roleID,i=u.getPetByPetID(e);i.skill_info.pet_skills=i.skill_info.pet_skills||[];for(var s=0;s<i.skill_info.pet_skills.length;s++)i.skill_info.pet_skills[s].index==t.update_skill.index&&(i.skill_info.pet_skills[s]=t.update_skill)},u.handlerPetSkillMove=function(t){var e,i=u.getPetByPetID(t.pet_id);for(var s in t.delete_skills)if((e=t.delete_skills[s]).index<1e5){if(i.skill_info)for(var n=i.skill_info.pet_skills.length-1;0<=n;n--){var o=i.skill_info.pet_skills[n];o.index==e.index&&o.type_id==e.type_id&&i.skill_info.pet_skills.splice(n,1)}}else if(u.bagSkill)for(var a=u.bagSkill.all_skills.length-1;0<=a;a--)(o=u.bagSkill.all_skills[a]).index==e.index&&o.type_id==e.type_id&&u.bagSkill.all_skills.splice(a,1);for(s in t.update_skills){var l=!1;if((e=t.update_skills[s]).index<1e5){if(i.skill_info){for(n=0;n<i.skill_info.pet_skills.length;n++)if((o=i.skill_info.pet_skills[n]).index==e.index&&o.type_id==e.type_id){i.skill_info.pet_skills[n]=e,l=!0;break}0==l&&i.skill_info.pet_skills.push(e)}}else if(u.bagSkill){for(a=0;a<u.bagSkill.all_skills.length;a++)if((o=u.bagSkill.all_skills[a]).index==e.index&&o.type_id==e.type_id){u.bagSkill.all_skills[a]=e,l=!0;break}0==l&&u.bagSkill.all_skills.push(e)}}},u.handlerPetSkillExtend=function(t){var e=u.getPetByPetID(t.pet_id);e.skill_info&&(e.skill_info.max_num=t.skill_num),Jt.addTip(e.pet_name+"成功开启技能格子")},u.handlerPetSkillBag=function(t){u.bagSkill=t.skill_info},u.getPetFightSkill=function(t){if(u._pets){var e=u.getPetByPetID(t);if(e&&e.skill_info){var i,s,n=-1,o=S.now(),a=800<=o-u.getSkillTime(e.pet_id,40000001)?40000001:0;for(var l in e.skill_info.pet_skills)s=e.skill_info.pet_skills[l],(i=u.getPetSkillVO(s.type_id))&&0!=i.cd&&i.order>n&&o-u.getSkillTime(e.pet_id,i.id)>=i.cd&&(n=i.order,a=i.id)}}return a},u.getSkillTime=function(t,e){return u.petSkillCDDic[t]&&u.petSkillCDDic[t][e]?u.petSkillCDDic[t][e]:0},u.updatePetSkillCD=function(t,e){return u.petSkillCDDic[t]=u.petSkillCDDic[t]||new Object,u.petSkillCDDic[t][e]=S.now(),!0},u.handlerPetUpdatePet=function(t){if(u._pets)for(var e,i,s=0;s<u.pets.length;s++){e=u.pets[s];for(var n=0;n<t.pets.length;n++)i=t.pets[n],e.pet_id==i.pet_id&&(u.pets[s]=i)}},u.initPetSoulXML=function(){if(null==u.petSoulDic){u.petSoulDic=new Object,u._petSoulChangeArr=[],u._huntGirlDic=new Object,u._petSoulDic=new Object;var t,e=Ra.startEncode("petSoul.xml");for(var i in e)(t=e[i])instanceof xml.PetSoulVO?u.petSoulDic[t.typeId]=t:t instanceof xml.PetChangeVO?u._petSoulChangeArr.push(t):t instanceof xml.HuntGirlVO?u._huntGirlDic[t.id]=t:t instanceof xml.PetSoulExpVO&&(u._petSoulDic[t.color]=t)}},u.getHuntGirlByID=function(t){return u.initPetSoulXML(),u._huntGirlDic[t=t<6?t:5]},u.getSoulExpByColorAndLv=function(t,e){return u.initPetSoulXML(),u._petSoulDic[t]&&u._petSoulDic[t].exps?parseInt(u._petSoulDic[t].exps[e-1]):0},u.getSoulMaxLvByColor=function(t){return u.initPetSoulXML(),u._petSoulDic[t]?u._petSoulDic[t].max:0},u.getPetSoulVO=function(t){return u.initPetSoulXML(),u.petSoulDic[t]},u.handlerPetSoulAddExp=function(t){var e,i=Math.floor(t.update_soul.index/1e3)+pe.roleID,s=u.getPetByPetID(i);if(s)for(var n=0;n<s.soul_info.pet_souls.length;n++)if(e=s.soul_info.pet_souls[n],t.update_soul.index==e.index){s.soul_info.pet_souls[n]=t.update_soul;break}},u.handlerPetSoulInfo=function(t){0==(u.soulInfoToc=t).available_hunt_types.length&&t.available_hunt_types.push(1),u.checkPetSoulHuntRP()},u.handlerPetSoulHurt=function(t){if(u.soulInfoToc){var e;for(var i in 0==t.available_hunt_types.length&&t.available_hunt_types.push(1),u.soulInfoToc.available_hunt_types=t.available_hunt_types,t.update_souls)e=t.update_souls[i],u.soulInfoToc.hunt_souls.push(e);u.checkPetSoulHuntRP()}},u.checkPetSoulHuntRP=function(){if(u.soulInfoToc&&u.soulInfoToc.available_hunt_types&&u.soulInfoToc.hunt_souls&&u.soulInfoToc.hunt_souls.length<20){var t,e=0;for(var i in u.soulInfoToc.available_hunt_types)e<(t=u.soulInfoToc.available_hunt_types[i])&&(e=t);var s=modules.pet.PetMgr.getHuntGirlByID(e),n=null!=s?s.need:0;if(pe.getScore(11)>=n)return void Nt.show("RP_PET_SOUL_HUNT")}Nt.hide("RP_PET_SOUL_HUNT")},u.handlerPetSoulPick=function(t){if(u.soulInfoToc){var e,i;for(var s in t.update_souls)e=t.update_souls[s],u.soulInfoToc.bag_souls.push(e);for(var n in t.del_soul_indexes){i=t.del_soul_indexes[n];for(var o=0;o<u.soulInfoToc.hunt_souls.length;o++)if(i==u.soulInfoToc.hunt_souls[o].index){u.soulInfoToc.hunt_souls.splice(o,1);break}}}},u.handlerPetSoulSpecialHurt=function(t){if(u.soulInfoToc){var e;for(var i in 0==t.available_hunt_types.length&&t.available_hunt_types.push(1),u.soulInfoToc.available_hunt_types=t.available_hunt_types,t.update_souls)e=t.update_souls[i],u.soulInfoToc.hunt_souls.push(e);u.checkPetSoulHuntRP()}},u.getSoulNumByColor=function(t){if(u.soulInfoToc){var e,i=0;for(var s in u.soulInfoToc.bag_souls)e=u.soulInfoToc.bag_souls[s],u.getPetSoulVO(e.type_id).color==t&&++i;return i}return 0},u.getSoulNumByType=function(t){if(u.soulInfoToc){var e=0;for(var i in u.soulInfoToc.bag_souls)u.soulInfoToc.bag_souls[i].type_id==t&&(e+=1);return e}return 0},u.getSelSoulNumByColor=function(t){if(u.soulInfoToc){var e,i=0;for(var s in u.deComposeArr){var n;for(var o in e=u.deComposeArr[s],u.soulInfoToc.bag_souls)if(e==(n=u.soulInfoToc.bag_souls[o]).index){u.getPetSoulVO(n.type_id).color==t&&++i;break}}return i}return 0},u.getSelSoulExp=function(){if(u.soulInfoToc){var t,e=0;for(var i in u.deComposeArr){var s;for(var n in t=u.deComposeArr[i],u.soulInfoToc.bag_souls)if(t==(s=u.soulInfoToc.bag_souls[n]).index){e+=s.soul_exp;break}}return e}return 0},u.getSoulArrByColor=function(t){if(u.soulInfoToc){var e,i=[];for(var s in u.soulInfoToc.bag_souls)e=u.soulInfoToc.bag_souls[s],u.getPetSoulVO(e.type_id).color==t&&i.push(e);return i}return null},u.handlerPetDecompose=function(t){var e;if(u.soulInfoToc)for(var i in t.del_soul_indexes){e=t.del_soul_indexes[i];for(var s=0;s<u.soulInfoToc.bag_souls.length;s++)if(u.soulInfoToc.bag_souls[s].index==e){u.soulInfoToc.bag_souls.splice(s,1);break}}},u.getBestSoulByPosInBag=function(t,e){if(u.soulInfoToc){for(var i,s,n,o=t,a=0;a<u.soulInfoToc.bag_souls.length;a++)n=u.soulInfoToc.bag_souls[a],(s=u.getPetSoulVO(n.type_id)).color>o&&s.pos==e&&(o=s.color,i=n);return i}return null},u.handlerPetSoulMove=function(t){var e,i,s;if(u.soulInfoToc)for(var n in t.del_soul_indexes)if(i=t.del_soul_indexes[n],u.soulInfoToc.bag_souls)for(var o=0;o<u.soulInfoToc.bag_souls.length;o++)if(i==(e=u.soulInfoToc.bag_souls[o]).index){u.soulInfoToc.bag_souls.splice(o,1);break}for(var a in t.update_souls){var l=!1;if((s=t.update_souls[a]).index<1e5){var r=Math.floor(t.update_souls[0].index/1e3)+pe.roleID,h=u.getPetByPetID(r);if(h){for(o=0;o<h.soul_info.pet_souls.length;o++)if(e=h.soul_info.pet_souls[o],s.index==e.index){l=!0,h.soul_info.pet_souls[o]=s;break}0==l&&h.soul_info.pet_souls.push(s)}}else{for(o=0;o<u.soulInfoToc.bag_souls.length;o++)if(e=u.soulInfoToc.bag_souls[o],s.index==e.index){l=!0,u.soulInfoToc.bag_souls[o]=s;break}0==l&&u.soulInfoToc.bag_souls.push(s)}}},u.handlerPetExchange=function(t){u.soulInfoToc&&(u.soulInfoToc.bag_souls=u.soulInfoToc.bag_souls.concat(t.update_souls))},u.handlerPetRedPoint=function(t,e){var i=u.getPetByPetID(t);i&&(i.red_point=e)},u.getEmbattleByIndex=function(t){var e,i=[];if(u.pets)for(var s in u.pets){var n;if((e=u.pets[s]).embattle_info&&e.embattle_info.embattles&&0<e.embattle_info.embattles.length)for(var o in e.embattle_info.embattles)if((n=e.embattle_info.embattles[o]).index==t&&0!=n.embattle_pos){i[n.embattle_pos]=e;break}}return i},u.getFamilyPetEmbattle=function(){var t=[];if(u.pets){var e;for(var i in u.pets){var s;if((e=u.pets[i]).embattle_info&&e.embattle_info.embattles&&0<e.embattle_info.embattles.length)for(var n in e.embattle_info.embattles)if(4==(s=e.embattle_info.embattles[n]).index&&0!=s.embattle_pos){t[s.embattle_pos]=e;break}}var o=0;for(var a in t)t[a],e&&"p_pet"==e.className&&++o;return o?t:(u.setPetBattleDefault(),u.getEmbattleByIndex(4))}return t},u.setPetBattleDefault=function(){var t;if(u.pets)for(var e in u.pets){var i;if((t=u.pets[e]).embattle_info&&t.embattle_info.embattles&&0<t.embattle_info.embattles.length)for(var s in t.embattle_info.embattles)if(1==(i=t.embattle_info.embattles[s]).index){var n=new Object;n.className="p_pet_embattle",n.embattle_pos=i.embattle_pos,n.embattle_skill=i.embattle_skill,n.pet_id=i.pet_id,n.index=i.index,t.embattle_info.embattles.push(n);break}}},u.isHasFreePet=function(){if(u.pets)for(var t in u.pets)if(3==u.pets[t].state)return!0;return!1},u.handlerPetEmbattleChange=function(t){var e;for(var i in t){e=t[i];var s=u.getPetByPetID(e.pet_id),n=!1;if(s){null==s.embattle_info&&(s.embattle_info=new Object,s.embattle_info.className="p_pet_embattle_info"),s.embattle_info.embattles=s.embattle_info.embattles||[];for(var o=0;o<s.embattle_info.embattles.length;o++)if(s.embattle_info.embattles[o].index==e.index){n=!0,s.embattle_info.embattles[o]=e;break}0==n&&s.embattle_info.embattles.push(e)}}},u.getBagSoulPosArr=function(){var t,e=[];if(e.length=9,u.soulInfoToc)for(var i in u.soulInfoToc.bag_souls){var s=(t=u.soulInfoToc.bag_souls[i]).type_id%10;if(null==e[s])e[s]=t;else{var n=e[s],o=Math.floor(n.type_id/1e4)%10,a=Math.floor(t.type_id/1e4)%10;o<a?e[s]=t:o==a&&n.soul_level<t.soul_level&&(e[s]=t)}}return e},u.handlerPetChangeName=function(t){var e=u.getPetByPetID(t.pet_id);null!=e&&(e.pet_name=t.new_name)},u.isHeightestPowerPet=function(t){if(modules.pet.PetMgr.pets){var e=u.getPetByPetID(t);for(var i in u.pets)if(modules.pet.PetMgr.pets[i].power>e.power)return!1}return!0},u.initExpBoxXML=function(){null==u.expBoxSteps&&(u.expBoxSteps=Ra.startEncode("petExpBox.xml"))},u.getExpBoxStepVO=function(t){var e;for(var i in u.initExpBoxXML(),u.expBoxSteps)if((e=u.expBoxSteps[i]).step==t)return e;return null},u.checkExpBoxIsFull=function(){if(u.pets&&0<u.pets.length){var t=u.getExpBoxStepVO(u.petExpBoxLv);if(t)if(pe.getScore(16)>=t.maxExp&&0==u.checkAllFullLevelOfPet())return Nt.show("RP_PET_EXP_BOX_IS_FULL"),!0}return Nt.hide("RP_PET_EXP_BOX_IS_FULL"),!1},u.checkAllFullLevelOfPet=function(){for(var t=0,e=u.pets.length;t<e;t++){if(u.pets[t].level<100)return!1}return!0},u.checkExpBoxCanUp=function(){if(u.pets&&0<u.pets.length&&25!=u.petExpBoxLv){var t=u.getExpBoxStepVO(u.petExpBoxLv);if(t)if(xo.getGoodsNumByType(xo.GOODS_ID,t.costGoodsId)>=t.costGoodsNum)return Nt.show("RP_PET_EXP_BOX_CAN_UP"),!0}return Nt.hide("RP_PET_EXP_BOX_CAN_UP"),!1},u.handlerPetGuide=function(t){u.initPetGuide=!0,u.hasPetGuide=0==t.type},u.handlerPetSoulHuntSetting=function(t){u.soulInfoToc&&(u.soulInfoToc.save_soul_color=t.save_soul_color)},u.petsDIC=null,u._pets=null,u.curSelPetID=0,u.deComposeArr=[],u._changeShowRP=!0,u.godPetAlert=!0,u.petExpBoxLv=0,u.curInjectPetId=0,u.devoteInfo=null,u.petSkillDic=null,u.fusePetArr=null,u.bagSkill=null,u.petSoulDic=null,u._petSoulChangeArr=null,u._huntGirlDic=null,u._petSoulDic=null,u.soulInfoToc=null,u.expBoxSteps=null,u.initPetGuide=!1,u.hasPetGuide=!1,_(u,["filArr",function(){return this.filArr=[1,2,3,4,5]},"ZZ_ARR",function(){return this.ZZ_ARR=["普通","优秀","卓越","无双"]},"petSkillCDDic",function(){return this.petSkillCDDic=new Object}]),u}(),Ro=(function(){function t(){}w(t,"modules.pet.spsoul.SPSoulConst")}(),function(){function o(){}return w(o,"modules.pet.spsoul.SPSoulMgr"),I(1,o,"maxStep",function(){return o.init(),o.mainVO.maxStep}),I(1,o,"polyItemData",function(){return o.init(),o._polyItemData}),I(1,o,"goalData",function(){return o.init(),o._goalData}),o.updateCurBeadTypeInBody=function(){if((o.tempPet=Eo.getPetByPetID(Eo.curSelPetID))&&o.tempPet.bead_info&&o.tempPet.bead_info.pet_beads){var t,e=o.tempPet.bead_info.pet_beads;for(var i in o._curBeadTypeInBody=[],o._curBeadIDInBody=[],e)t=e[i],o._curBeadTypeInBody.push(Oo.getBeadTypeByTypeID(t.type_id)),o._curBeadIDInBody.push(t.type_id)}else o._curBeadTypeInBody=null,o._curBeadIDInBody=null},o.typeIndexInBody=function(t){var e=Oo.getBeadTypeByTypeID(t);return o._curBeadTypeInBody?o._curBeadTypeInBody.indexOf(e):-1},o.getIDInBodyByIndex=function(t){return o._curBeadIDInBody?o._curBeadIDInBody[t]:0},o.getBeadInfoByPos=function(t,e){if((o.tempPet=Eo.getPetByPetID(t))&&o.tempPet.bead_info&&o.tempPet.bead_info.pet_beads){var i,s=o.tempPet.bead_info.pet_beads;for(var n in s)if((i=s[n]).pos==e)return i}return null},o.init=function(){if(!o.mainVO){var t,e=Ra.startEncode("petSPSoul.xml");for(var i in o.petLvDatas=[],o.lvDatas=[],o._polyItemData=[],o._beadObj={},o.allBeadVoList=[],o._needData=[],o._goalData=[],e)(t=e[i])instanceof xml.SpsoulMainVO?o.mainVO=t:t instanceof xml.SpsoulStepPetLvVO?o.petLvDatas.push(t):t instanceof xml.SpsoulStepLvVO?o.lvDatas.push(t):t instanceof xml.SpsoulPolyItemVO?o._polyItemData.push(t):t instanceof xml.SpsoulBeadVO?(o._beadObj[t.type]=t,o.allBeadVoList.push(t)):t instanceof xml.SpsoulNeedVO?o._needData.push(t):t instanceof xml.SpsoulGoalVO&&o._goalData.push(t)}},o.getLogoImg=function(t){var e;for(var i in o.init(),o.lvDatas)if((e=o.lvDatas[i]).isInRange(t))return e.img;return""},o.getPetLvTip=function(t){var e;for(var i in o.init(),o.petLvDatas)if((e=o.petLvDatas[i]).isInRange(t))return e.tip;return""},o.getNeedPay=function(t){var e;for(var i in o.init(),o._needData)if((e=o._needData[i]).isStep(t))return e.getPayNeed(t);return 0},o.getAttrsByStep=function(t){return o.init(),o.mainVO.getAttrs(t)},o.getOpenPolyNum=function(t){var e=0;for(var i in o.polyItemData)o.polyItemData[i].openStep<=t&&(e+=1);return e},o.getBeadVOByType=function(t){return o.init(),o._beadObj[t]},o.getAllBeadVoList=function(){return o.init(),o.allBeadVoList},o.getPowerExtraCoefficient=function(t){var e;o.init();for(var i=o._goalData.length;0<=i;i--)if((e=o._goalData[i])&&e.needPetLv<=t)return e.up/100+1;return 1},o.curChoosePolyPos=0,o._curBeadTypeInBody=null,o._curBeadIDInBody=null,o.composeRewards=null,o.tempPet=null,o.mainVO=null,o.petLvDatas=null,o.lvDatas=null,o._polyItemData=null,o._beadObj=null,o.allBeadVoList=null,o._needData=null,o._goalData=null,o}()),Oo=function(){function a(){}return w(a,"modules.pet.spsoul.SPSoulUtil"),a.getBeadColorByTypeID=function(t){return Math.floor(t/1e4%10)},a.getBeadTypeByTypeID=function(t){return Math.floor(t%1e4)},a.sortSmallFirst=function(t,e){return t&&e?t.typeid<e.typeid?-1:t.typeid>e.typeid?1:0:0},a.sortLoad=function(t,e){if(t&&e){var i=a.checkMaskLoad(t.typeid),s=a.checkMaskLoad(e.typeid);return i&&!s?1:!i&&s?-1:t.typeid<e.typeid?1:t.typeid>e.typeid?-1:0}return 0},a.checkMaskLoad=function(t){return-1!=Ro.typeIndexInBody(t)},a.checkMaskReplace=function(t,e){var i=modules.pet.spsoul.SPSoulUtil.getBeadTypeByTypeID(e),s=modules.pet.spsoul.SPSoulUtil.getBeadTypeByTypeID(t),n=Ro.typeIndexInBody(t);if(s==i){if(-1!=n){var o=Ro.getIDInBodyByIndex(n);return!(modules.pet.spsoul.SPSoulUtil.getBeadColorByTypeID(o)<modules.pet.spsoul.SPSoulUtil.getBeadColorByTypeID(t))}return!1}return-1!=n},a.checkSPRP=function(){a.checkSPSoulStepRP(),a.checkSPSoulPolyRP()},a.checkOneSPSoulRP=function(t){return a.checkOneStepRP(t)||a.checkOnePolyRP(t)},a.checkOneStepRP=function(t){if(t&&0<(8&~t.red_point)){var e=(a.bInfo=t.bead_info)?a.bInfo.step:0;if(e>=Ro.maxStep)return!1;var i=Ro.getNeedPay(e);return!(pe.getScore(22)<i)}return!1},a.checkSPSoulStepRP=function(){var t,e=Eo.pets;for(var i in e)if(t=e[i],a.checkOneStepRP(t))return void Nt.show("RP_PET_SPSOUL_STEP");Nt.hide("RP_PET_SPSOUL_STEP")},a.checkSPSoulPolyRP=function(){var t,e=Eo.pets;for(var i in e)if(t=e[i],a.checkOnePolyRP(t))return void Nt.show("RP_PET_SPSOUL_POLY");Nt.hide("RP_PET_SPSOUL_POLY")},a.checkOnePolyRP=function(t){var e=t&&t.bead_info?t.bead_info.step:0,i=Ro.getOpenPolyNum(e);if(t&&0<(8&~t.red_point)){if(t.bead_info)var s=t.bead_info.pet_beads;else s=null;if((s?s.length:0)<i)return a.checkHasNewTypePoly(s)}return!1},a.checkHasNewTypePoly=function(t){var e;for(var i in a.tempTypeInbody=[],t)(e=t[i])&&a.tempTypeInbody.push(a.getBeadTypeByTypeID(e.type_id));if(!(a.tempBeadsInBag=xo.getGoodsByIDFun(st.isPetSPSoulID)))return!1;if(0==a.tempTypeInbody.length&&0<a.tempBeadsInBag.length)return!0;var s,n=0;for(var o in a.tempBeadsInBag)if(s=a.tempBeadsInBag[o],n=a.getBeadTypeByTypeID(s.typeid),-1==a.tempTypeInbody.indexOf(n))return!0;return!1},a.bInfo=null,a.tempTypeInbody=null,a.tempBeadsInBag=null,a}(),Lo=function(){function o(){}return w(o,"modules.pfSdk.PayUtil"),o.showAlert=function(){Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian()?Jt.addTip("元宝不足"):Bt.isXYX9992()?Jt.addTip("元宝不足"):0!=ya.getChargeOpen()?iV.show():Jt.addTip("元宝不足")},o.toPay=function(){Bt.isFanTi?me.linkTo(11454,1):me.linkTo(11454)},o.showSecAlert=function(t,e,i,s,n){null==o.secVO&&(o.secVO=new Ee),o.secVO.msg=t,o.secVO.yesCaller=e,o.secVO.yesFun=i,o.secVO.yesArgs=s,o.secVO.key=n,EF.showVO(o.secVO)},o.vo=null,o.secVO=null,o}(),Do=function(){function o(){}return w(o,"modules.pfSdk.PfSdkMgr"),o.updatePfRewards=function(t,e){(o.pfRewards=o.pfRewards||{})[t]=e},o.getPfRewards=function(t){return o.pfRewards?o.pfRewards[t]:null},o.handlerRewardInfo=function(t){o.rewardInfos=t.rewards,o.lastGetInfos=t.last_get_ts},o.getRewardInfos=function(){return o.rewardInfos},o.getLastGetInfos=function(){return o.lastGetInfos},o.getRewardTimes=function(t,e){var i,s=0;if(o.rewardInfos)for(var n in o.rewardInfos)if((i=o.rewardInfos[n]).type==t&&i.id==e){s=i.val;break}return s},o.getLastGetTimes=function(t,e){var i,s=0;if(o.lastGetInfos)for(var n in o.lastGetInfos)if((i=o.lastGetInfos[n]).type==t&&i.id==e){s=i.val;break}return s},o.handlerReward=function(t){var e;if(o.rewardInfos){for(var i in o.rewardInfos)if((e=o.rewardInfos[i]).type==t.op_type&&e.id==t.reward_id)return void++e.val}else o.rewardInfos=[];var s=new Object;s.className="p_tkv",s.type=t.op_type,s.id=t.reward_id,s.val=1,o.rewardInfos.push(s)},o.pfRewards=null,o.pfVip=0,o.isPfVip=!1,o.rewardInfos=null,o.lastGetInfos=null,o}(),No=function(){function s(){}return w(s,"modules.pfSdk.ShareGameManager"),I(1,s,"shareGameVO",function(){return s.initXml(),s._shareGameVO}),s.initXml=function(){if(null==s._shareGameVO){var t,e=Ra.startEncode("share.xml");for(var i in e)(t=e[i])instanceof xml.ShareGameVO&&(s._shareGameVO=t)}},s._shareGameVO=null,s}(),Vo=function(){function n(){}return w(n,"modules.plays.beach.PlaysBeachManager"),n.setActionTimes=function(t){n._actionTimes=t},n.updateActionTimes=function(t,e){var i;for(var s in n._actionTimes)if((i=n._actionTimes[s]).id==t){i.val=e;break}},n.checkActionTimes=function(t){var e,i=!1;for(var s in n._actionTimes)if((e=n._actionTimes[s]).id==t&&(i=!0,0<e.val))return!0;return 0==i},n.getActionTimes=function(t){var e;for(var i in n._actionTimes)if((e=n._actionTimes[i]).id==t)return e.val;switch(t){case 3:return modules.plays.beach.PlaysBeachManager.SKILL_DIZZY_MAX_TIMES;case 4:return modules.plays.beach.PlaysBeachManager.SKILL_KISS_MAX_TIMES;default:return 0}},n.getBeachNameByType=function(t){switch(t){case 1:return"顶级沙滩";case 2:return"高级沙滩";case 3:return"中级沙滩";case 4:default:return"初级沙滩"}},n.checkRp=function(){Mo.isBeachTime()&&Ne.isOpenBeachBoss()?Nt.show("RP_PLAYS_BEACH"):Nt.hide("RP_PLAYS_BEACH")},n.myBeach=0,n.beachFamilies=null,n._actionTimes=null,n.curType=0,n.accumulatedSpirit=0,n.SKILL_DIZZY_MAX_TIMES=5,n.SKILL_KISS_MAX_TIMES=5,n}(),Bo=(function(){function t(){}w(t,"modules.plays.beachBoss.PlaysBeachBossConst")}(),function(){function a(){}return w(a,"modules.plays.beachBoss.PlaysBeachBossManager"),I(1,a,"baseVO",function(){return a.initXml(),a._baseVO}),I(1,a,"raceTimes",function(){return a._raceTimes=a._raceTimes||[]}),I(1,a,"skillVO",function(){return a.initXml(),a._skillVO}),I(1,a,"familyProgress",function(){return a._familyProgress},function(t){t>modules.plays.beachBoss.PlaysBeachBossManager.baseVO.targetCollectNum&&(t=modules.plays.beachBoss.PlaysBeachBossManager.baseVO.targetCollectNum),a._familyProgress=t}),a.setSunnyInfo=function(t,e){var i;a.raceInfos=[];for(var s=0;s<e.length;s++){i=e[s];for(var n=[],o=0;o<i.val;o++)n.push(i.id);a.raceInfos.push({id:i.id,list:n})}a._raceTimes=t,a.isHasSunnyInfo=!0},a.popSunnyDataById=function(t){var e;for(var i in a.raceInfos)if((e=a.raceInfos[i])&&e.list&&e.id==t&&0<e.list.length)return e.list.pop();return null},a.checkSunnyDataIsExist=function(){var t;for(var e in a.raceInfos)if((t=a.raceInfos[e])&&t.list&&0<t.list.length)return!0;return!1},a.checkSunnyDataIsExistById=function(t){var e;for(var i in a.raceInfos)if((e=a.raceInfos[i])&&e.list&&e.id==t&&0<e.list.length)return!0;return!1},a.getRaceInfoById=function(t){var e;for(var i in a.raceInfos)if(t==(e=a.raceInfos[i]).id)return e.list;return[]},a.getBossHurtArr=function(){return a.bossHurt},a.getMyHurt=function(){return a.myHurt},a.updateBossHurt=function(t,e){a.myHurt=e,a.bossHurt=t?t.sort(a.sortBest):null},a.getMyRank=function(){if(a.bossHurt)for(var t=0;t<a.bossHurt.length;t++)if(a.bossHurt[t].family_id==pe.user.attr.family_id)return t+1;return 0},a.getBeachNameInfo=function(t){a.initXml();var e=[],i=a._rewardInfos[t-1];if(i)switch(i.beach){case 4:e.push("【初级沙滩】"),e.push("#96f254");break;case 3:e.push("【中级沙滩】"),e.push("#7fd6fe");break;case 2:e.push("【高级沙滩】"),e.push("#f299ff");break;case 1:e.push("【顶级沙滩】"),e.push("#fdc06a")}return e},a.getMyBeachNameInfo=function(){var t=[];if(a.bossHurt&&0<a.bossHurt.length){for(var e=0;e<a.bossHurt.length;e++)if(a.bossHurt[e].family_id==pe.user.attr.family_id){var i=a.getBossReward(e+1);if(i)switch(i.beach){case 4:t.push("【初级沙滩】"),t.push("#96f254");break;case 3:t.push("【中级沙滩】"),t.push("#7fd6fe");break;case 2:t.push("【高级沙滩】"),t.push("#f299ff");break;case 1:t.push("【顶级沙滩】"),t.push("#fdc06a")}}}else t.push("【初级沙滩】"),t.push("#96f254");return t},a.sortBest=function(t,e){return t.damage<e.damage?1:t.damage>e.damage?-1:0},a.initXml=function(){if(0==a.isInit){a._steps=[],a._rewardInfos=[];var t,e=Ra.startEncode("beachBoss.xml");for(var i in e)(t=e[i])instanceof xml.PlaysBeachBossBaseVO?a._baseVO=t:t instanceof xml.PlaysBeachBossSkillVO?a._skillVO=t:t instanceof xml.PlaysBeachBossStepVO?a._steps.push(t):t instanceof xml.PlaysBeachBossRewardVO&&a._rewardInfos.push(t);a.isInit=!0}},a.getBossReward=function(t){var e;for(var i in a.initXml(),a._rewardInfos)if((e=a._rewardInfos[i]).start<=t&&e.end>=t)return e;return a.getBossRewardLast()},a.getBossRewardLast=function(){return a.initXml(),a._rewardInfos[a._rewardInfos.length-1]},a.getStepByProgress=function(t){var e;a.initXml();for(var i=a._steps.length-1;0<=i;i--)if((e=a._steps[i])&&e.val<=t)return e;return null},a.getStepById=function(t){var e;for(var i in a.initXml(),a._steps)if((e=a._steps[i]).id==t)return e;return null},a.checkRp=function(){Mo.isBossTime()&&Ne.isOpenBeachBoss()?Nt.show("RP_PLAYS_BEACH_BOSS"):Nt.hide("RP_PLAYS_BEACH_BOSS")},a.curBeachStep=0,a._familyProgress=0,a.remainingTime=0,a.hideFightEffect=!1,a.raceInfos=null,a._raceTimes=null,a.isHasSunnyInfo=!1,a.bossHurt=null,a.myHurt=null,a.isInit=!1,a._baseVO=null,a._skillVO=null,a._steps=null,a._rewardInfos=null,a}()),Mo=function(){function e(){}return w(e,"modules.plays.beachBoss.PlaysBeachUtils"),e.getBeachOpenTime=function(){null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(35),e.timeDate.setSeconds(0),e.timeDate.setMilliseconds(0);var t=e.timeDate.getTime()/1e3;return ya.serverTime>=t&&(t+=86400),t},e.getBeachBossOpenTime=function(){null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(30),e.timeDate.setSeconds(0),e.timeDate.setMilliseconds(0);var t=e.timeDate.getTime()/1e3;return ya.serverTime>t&&(t+=86400),t},e.getFirstNoticeEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(30),e.timeDate.setSeconds(59),Math.floor(e.timeDate.getTime()/1e3)},e.getSecondNoticeEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(32),e.timeDate.setSeconds(59),Math.floor(e.timeDate.getTime()/1e3)},e.getFirstCollectEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(31),e.timeDate.setSeconds(29),Math.floor(e.timeDate.getTime()/1e3)},e.getSecondCollectEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(33),e.timeDate.setSeconds(29),Math.floor(e.timeDate.getTime()/1e3)},e.getBeachBossEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(34),e.timeDate.setSeconds(59),Math.floor(e.timeDate.getTime()/1e3)},e.getBeachEndTime=function(){return null==e.timeDate&&(e.timeDate=new Date).setTime(ya.serverTimeMs),e.timeDate.setHours(21-x.hourOffset),e.timeDate.setMinutes(45),e.timeDate.setSeconds(0),Math.floor(e.timeDate.getTime()/1e3)},e.getStep=function(){if(e.timeDate?e.timeDate.setTime(ya.serverTimeMs):e.timeDate=new Date(ya.serverTimeMs),e.timeDate.getHours()==21-x.hourOffset){var t=0;switch(e.timeDate.getMinutes()){case 30:if(0<=(t=e.timeDate.getSeconds())&&t<55)return 1;if(55<=t&&t<=59)return 2;break;case 31:if(0<=(t=e.timeDate.getSeconds())&&t<=29)return 3;if(30==t)return 4;if(31<=t&&t<=59)return 5;break;case 32:if(0<=(t=e.timeDate.getSeconds())&&t<=54)return 5;if(55<=t&&t<=59)return 6;break;case 33:if(0<=(t=e.timeDate.getSeconds())&&t<=29)return 7;if(30==t)return 8;if(31<=t&&t<=59)return 9;break;case 34:if(0<=(t=e.timeDate.getSeconds())&&t<=29)return 9;if(30<=t&&t<=59)return 10;break;case 35:if(0==(t=e.timeDate.getSeconds()))return 11}}return 0},e.isBeachTime=function(){if(e.timeDate?e.timeDate.setTime(ya.serverTimeMs):e.timeDate=new Date(ya.serverTimeMs),e.timeDate.getHours()==21-x.hourOffset){var t=e.timeDate.getMinutes();if(35<=t&&t<45)return!0}return!1},e.isBossTime=function(){if(e.timeDate?e.timeDate.setTime(ya.serverTimeMs):e.timeDate=new Date(ya.serverTimeMs),e.timeDate.getHours()==21-x.hourOffset){var t=e.timeDate.getMinutes();if(30<=t&&t<35)return!0}return!1},e.isBossTimeEnd=function(){if((e.timeDate?e.timeDate.setTime(ya.serverTimeMs):e.timeDate=new Date(ya.serverTimeMs),e.timeDate.getHours()==21-x.hourOffset)&&35<e.timeDate.getMinutes())return!0;return!1},e.isBeachTimeEnd=function(){if((e.timeDate?e.timeDate.setTime(ya.serverTimeMs):e.timeDate=new Date(ya.serverTimeMs),e.timeDate.getHours()==21-x.hourOffset)&&45<e.timeDate.getMinutes())return!0;return!1},e.getTargetPt=function(t,e){var i=new Rt;if(t.x>=e.x&&t.z<=e.z)if(0<ca.getCell(e.x,e.z-1))i.x=e.x,i.z=e.z-1;else{if(!(0<ca.getCell(e.x,e.z+1)))return e;i.x=e.x,i.z=e.z+1}else if(t.x>=e.x&&t.z>=e.z)if(0<ca.getCell(e.x,e.z+1))i.x=e.x,i.z=e.z+1;else{if(!(0<ca.getCell(e.x,e.z-1)))return e;i.x=e.x,i.z=e.z-1}else if(t.x<=e.x&&t.z>=e.z)if(0<ca.getCell(e.x,e.z+1))i.x=e.x,i.z=e.z+1;else{if(!(0<ca.getCell(e.x,e.z-1)))return e;i.x=e.x,i.z=e.z-1}else if(t.x<=e.x&&t.z<=e.z)if(0<ca.getCell(e.x,e.z+1))i.x=e.x,i.z=e.z+1;else{if(!(0<ca.getCell(e.x,e.z-1)))return e;i.x=e.x,i.z=e.z-1}return i},e.timeDate=null,e}(),Fo=function(){function t(){this.spRace=null,this.randomArray=null}w(t,"modules.plays.beachBoss.RaceManager");var e=t.prototype;return e.showRaceSprite=function(){this.spRace=this.spRace||new Wt,lt.sceneLayer.addChild(this.spRace),this.spRace.width=lt.sceneLayer.width,this.spRace.height=lt.sceneLayer.height,this.spRace.mouseThrough=!0,this.spRace.mouseEnabled=!0,this.spRace.on("mousedown",modules.plays.beachBoss.RaceManager.instance,this.onMouseDown),_t.addToFrame(modules.plays.beachBoss.RaceManager.instance,this.loopMoveY)},e.loopMoveY=function(){if(this.spRace)for(var t,e=0;e<this.spRace.numChildren;e++)(t=this.spRace.getChildAt(e))&&t instanceof modules.plays.beachBoss.view.RaceNimbus&&t.onFrame()},e.resetRaceSprite=function(){if(this.spRace){for(var t;0<this.spRace.numChildren;)(t=this.spRace.getChildAt(this.spRace.numChildren-1))&&t instanceof modules.plays.beachBoss.view.RaceNimbus&&(t.dispose(),t.removeSelf());this.spRace.removeSelf(),this.spRace.off("mousedown",modules.plays.beachBoss.RaceManager.instance,this.onMouseDown)}_t.removeFromFrame(modules.plays.beachBoss.RaceManager.instance,this.loopMoveY)},e.onMouseDown=function(t){var e,i=t.touches,s=[];for(var n in i)(e=i[n])instanceof modules.plays.beachBoss.view.RaceNimbus&&s.push(e.type);0<s.length?yr.ins().toCollect(s):t.target instanceof modules.plays.beachBoss.view.RaceNimbus&&(s.push(t.target.type),yr.ins().toCollect(s),t.target.type<=0&&Jt.addTip("炎之力减少"));var o=t.target;if(null!=o&&0<o.type){var a=yr.ins().getCollectBarPos();ie.to(o,{x:a.x,y:a.y},500,null,Q.create(this,this.onMoveComplete,[o]))}else o.removeSelf()},e.onMoveComplete=function(t){t.removeSelf()},e.destroyRaceSprite=function(){this.spRace&&this.spRace.parent&&(this.spRace.removeSelf(),this.spRace.destroy(),this.spRace=null)},e.addRaceNimbus=function(t){var e,i=Th.getOne();Math.random();if(i&&Bo.baseVO){var s=Bo.baseVO.defaultSpeed;e=0<t?"modules/beachBoss/A"+t+".png":"modules/beachBoss/D"+t+".png",i.reset(e,t,s)}},e.getRandomNum=function(){return 0},I(1,t,"instance",function(){return t._instance=t._instance||new t}),t._instance=null,t.curCount=0,t}(),Uo=function(){function s(){this.roleID=NaN,this.mineID=0}return w(s,"modules.plays.city.CityCrystalHelpVO"),s.makeVO=function(t){var e;if(t&&""!=t){var i=t.split("#");(e=new s).roleID=i[1],e.mineID=i[2]}return e},s}(),Go=function(){function t(){}return w(t,"modules.plays.city.PlaysCityConst"),_(t,["CITY_BUILD_POS",function(){return this.CITY_BUILD_POS=[[115,530],[390,165],[395,440]]},"SACRI_ITEM_POS",function(){return this.SACRI_ITEM_POS=[[16,390],[181,390],[345,390],[508,390]]}]),t}(),Ho=function(){function r(){}return w(r,"modules.plays.city.PlaysCityMgr"),I(1,r,"otherCityInfo",function(){return r._searchCity},function(t){r._searchCity=t}),I(1,r,"lastEventTime",function(){return r.curEvent?r.curEvent.val-ya.serverTime:0}),I(1,r,"logs",function(){return r._logs},function(t){r._logs=t,r.dealLog()}),I(1,r,"sacrificeReward2",function(){var t,e=r.getCaveInfo().blockInfo;if(e&&0<e.length)for(var i in e)0<(t=e[i]).type_id&&r.getCaveSacriItemVO(t.type_id)}),I(1,r,"sacrificeReward",function(){if(r._sacrificeItemArr&&0<r._sacrificeItemArr.length){var t,e,i=0;for(var s in r._sacrificeItemArr)0<(e=r._sacrificeItemArr[s]).type_id&&(t=r.getCaveSacriItemVO(e.type_id),i+=e.item_num*t.rewardRate);return i}return 0}),I(1,r,"missionInfo",function(){return r._missionInfo},function(t){r._missionInfo=t}),I(1,r,"searchMoney",function(){var t;for(var e in r.init(),r.searchData)if((t=r.searchData[e]).isFit(r.searchTime))return t.getMoney(r.searchTime);return 0}),I(1,r,"myHarryInfo",function(){return r.myHarryCrystals}),I(1,r,"sacrificeItemArr",function(){if(r._sacrificeItemArr&&0<r._sacrificeItemArr.length&&r._sacrificeItemArr.length<r.dragonCaveOpenedBlockNum)for(var t,e=r.dragonCaveOpenedBlockNum-r._sacrificeItemArr.length,i=0;i<e;i++)(t=new Object).className="p_dragon_hole_block",t.id=r._sacrificeItemArr.length+1,t.type_id=0,t.item_num=0,r._sacrificeItemArr.push(t);return r._sacrificeItemArr},function(t){var e;r._sacrificeItemArr=[];for(var i=0;i<r.dragonCaveOpenedBlockNum;i++){if((e=new Object).className="p_dragon_hole_block",e.id=i+1,e.type_id=0,e.item_num=0,t[i]){e.type_id=t[i];var s=xo.getGoodsNumByTypeID(t[i])-modules.plays.city.PlaysCityMgr.getSacrificeNum(t[i]),n=r.getCaveSacriItemVO(t[i]).limitNum;e.item_num=n<s?n:s}r._sacrificeItemArr.push(e)}}),I(1,r,"mainVO",function(){return r.init(),r.cityMainVO}),I(1,r,"notOpenStr",function(){return r.init(),r.cityMainVO.openStr}),r.isProtected=function(){return!1},r.updateLogs=function(t){if(r._logs){var e,i,s=0,n=!1;for(i in t){for(e=t[i],n=!1,s=0;s<r._logs.length;s++)if(r._logs[s].log_id==e.log_id){r._logs[s]=e,n=!0;break}n||r._logs.push(e)}}else r._logs=t;r.dealLog()},r.dealLog=function(){r._logs.sort(function(t,e){if(t&&e)return t.log_id>e.log_id?-1:t.log_id<e.log_id?1:0;return 0}),21<=r._logs.length&&(r._logs=r._logs.slice(0,21))},r.getMissionInfoByID=function(t){var e;for(var i in r.missionInfo)if((e=r.missionInfo[i]).id==t)return e;return null},r.updateMissionInfo=function(t){if(t instanceof Array)for(var e in t)i(t[e]);else"p_tkv"==t.className&&i(t);function i(t){if(t){var e=r.getMissionInfoByID(t.id);e?(e.type=t.type,e.val=t.val):(r.missionInfo=r.missionInfo||[]).push(t)}}},r.isOtherCityShow=function(){return!!r.otherCityInfo&&(ya.serverTime<=r.otherCityInfo.ts||1==r.otherCityInfo.state)},r.noteRPClick=function(t){if(t&&t.history){var e=t.history[t.history.length-1];e&&(r.rpClickNote[t.id+"_"+t.occupy_id+"_"+e.start_ts]=!0,Wo.checkAllRP())}},r.checkRPHasClick=function(t){if(t&&t.history){var e=t.history[t.history.length-1];if(e)return 1==r.rpClickNote[t.id+"_"+t.occupy_id+"_"+e.start_ts]}return!1},r.updateMyCrystalInfo=function(t){var e,i;for(var s in r.myCrystalInfo=r.myCrystalInfo||[],t){i=t[s];for(var n=0;n<r.myCrystalInfo.length;n++)if((e=r.myCrystalInfo[n])&&e.id==i.id){r.myCrystalInfo[n]=i;break}}},r.addMyCrystalInfo=function(t){r.myCrystalInfo&&r.myCrystalInfo.push(t)},r.delMyCrystalInfo=function(t){if(r.myCrystalInfo)for(var e=0;e<r.myCrystalInfo.length;e++)if(r.myCrystalInfo[e].id==t){r.myCrystalInfo.splice(e,1);break}},r.getMyCrystalInfoByIndex=function(t,e){var i;for(var s in void 0===e&&(e=0),r.myCrystalInfo)if((i=r.myCrystalInfo[s]).id==t)return i;return null},r.getOtherCrystalInfoByIndex=function(t){var e;if(r.otherCityCrystalInfo)for(var i in r.otherCityCrystalInfo.mine)if((e=r.otherCityCrystalInfo.mine[i]).id==t)return e;return null},r.setSearchList=function(t){var e;for(var i in r.myHarryCrystals=[],r.otherCityInfo=null,t)1==(e=t[i]).state?r.myHarryCrystals.push(e):r.otherCityInfo=e},r.updateSearchCrystal=function(t,e){if(r.myHarryCrystals){var i,s,n;for(var o in t){s=t[o];for(var a=0;a<r.myHarryCrystals.length;a++)if((i=r.myHarryCrystals[a])&&s.role_id==i.role_id){r.myHarryCrystals[a]=s;break}r.otherCityInfo&&r.otherCityInfo.role_id==s.role_id&&(r.otherCityInfo=s)}for(var l in e){for(n=e[l],a=0;a<r.myHarryCrystals.length;a++)if((i=r.myHarryCrystals[a])&&i.role_id==n){r.myHarryCrystals.splice(a,1);break}r.otherCityInfo&&r.otherCityInfo.role_id==n&&(r.otherCityInfo=null)}}},r.delMyHarryCrystal=function(t){if(r.myHarryCrystals)for(var e=0;e<r.myHarryCrystals.length;e++)if(r.myHarryCrystals[e].role_id==t){r.myHarryCrystals.splice(e,1);break}},r.setCaveInfo=function(t){t&&(r._openFlag=t.open_flag,r._dragonCaveLevel=t.hole_level,(r.dragonCaveInfo=r.dragonCaveInfo||new Ea).blockInfo=t.block_info,r.dragonCaveInfo.actionType=t.action_type,r.dragonCaveInfo.remainTime=t.remain_ts,r.dragonCaveInfo.rewardInfo=t.reward_info,r.dragonCaveInfo.blessLevel=t.bless_level,r.dragonCaveInfo.blessProp=t.bless_prop,r.dragonCaveOpenedBlockNum=t.block_info.length)},r.getCaveInfo=function(){return r.dragonCaveInfo?r.dragonCaveInfo:null},r.resetSacrificeItemAr=function(t){var e,i=t.id,s=t.num;if(r._sacrificeItemArr&&0<r._sacrificeItemArr.length)for(var n=0;n<r._sacrificeItemArr.length;n++)if((e=r._sacrificeItemArr[n])&&e.type_id==i&&e.item_num==s){r._sacrificeItemArr.splice(n,1);for(var o=n;o<r._sacrificeItemArr.length;o++)r._sacrificeItemArr[o].id--;var a=new Object;a.className="p_dragon_hole_block",a.id=r._sacrificeItemArr.length+1,a.type_id=0,a.item_num=0,r._sacrificeItemArr.push(a);break}vr.ins().updateCavePanel()},r.getSacrificeTime=function(t){if(r._sacrificeItemArr&&0<r._sacrificeItemArr.length){var e,i,s=0,n=r.getCaveDragonsByID(t),o=r.getCaveVO(r._dragonCaveLevel);for(var a in r._sacrificeItemArr)0<(i=r._sacrificeItemArr[a]).type_id&&(e=r.getCaveSacriItemVO(i.type_id),s+=i.item_num*e.costTime);return s*n.time*o.time}return 0},r.checkSacrificeCondition=function(t){return 10201101==t?Jo.isAllMaxLv(1):10201102==t?Jo.isAllMaxLv(2):10201111==t||10201112==t?oa.isWingMax():10201122==t||10201160==t?oa.isSplitMax():10201161==t?oa.isLvMax(12):10201162==t?oa.isLvMax(13):10201238==t||10201239==t||10201240==t?Jo.isAllMaxLv(4):ur.getItem(t).useType%1e3==35?hn.isMaxLv(t):ur.getItem(t).useType%1e3==36||12e6==t?fa.isMaxStep(t):12000001==t&&fa.isAllMaxStep()},r.getIsSacrificeItem=function(t){if(r._sacrificeItemArr&&r._sacrificeItemArr.length)for(var e in r._sacrificeItemArr)if(r._sacrificeItemArr[e].type_id==t)return!0;return!1},r.getSacrificeNum=function(t){var e,i=0;if(r._sacrificeItemArr&&r._sacrificeItemArr.length)for(var s in r._sacrificeItemArr)(e=r._sacrificeItemArr[s]).type_id==t&&(i+=e.item_num);return i},r.init=function(){if(!r._has){r._has=!0,r.monsterData={},r.lvData={},r.shopData=new P,r.missionData={},r.searchData=[],r._amethyst=[],r.eventData={},r.crystalData={},r.caveOpenVO=[],r.caveSacriPosVO={},r.caveSacriItemVO={},r.caveSacriItemIDArr=[],r.caveDragonArr=[],r.caveInfo={},r.caveBless=[];var t,e=Ra.startEncode("city.xml");for(var i in e)(t=e[i])instanceof xml.CityMainVO?r.cityMainVO=t:t instanceof xml.CityMonsterVO?r.monsterData[t.monsterID]=t:t instanceof xml.CityLvVO?r.lvData[t.lv]=t:t instanceof xml.CityShopItemVO?(r.shopData.set(t.itemID,t),2==t.needType&&(r.minNeedCrystalNum=0==r.minNeedCrystalNum?t.needNum:Math.min(t.needNum,r.minNeedCrystalNum))):t instanceof xml.CityMissionVO?r.missionData[t.missionID]=t:t instanceof xml.CitySearchPayVO?r.searchData.push(t):t instanceof xml.CityEventVO?r.eventData[t.eventID]=t:t instanceof xml.CityCrystalVO?r.crystalData[t.id]=t:t instanceof xml.CityAmethystVO?r._amethyst.push(t):t instanceof xml.CityCaveOpenVO?r.caveOpenVO.push(t):t instanceof xml.CityCaveSacriPosVO?r.caveSacriPosVO[t.pos]=t:t instanceof xml.CityCaveSacriItemVO?(r.caveSacriItemVO[t.id]=t,r.caveSacriItemIDArr.push(t.id)):t instanceof xml.CityCaveDragonVO?r.caveDragonArr.push(t):t instanceof xml.CityCaveVO?r.caveInfo[t.lv]=t:t instanceof xml.CityCaveBlessVO&&r.caveBless.push(t)}},r.getAmethystVO=function(t){var e;for(var i in r.init(),r._amethyst)if((e=r._amethyst[i]).level==t)return e;return null},r.getEventVO=function(t){return r.init(),r.eventData[t]},r.getMissionVO=function(t){return r.init(),r.missionData[t]},r.getMonsterVO=function(t){return r.init(),r.monsterData[t]},r.getShopItemVOs=function(){return r.init(),r.shopData.values},r.getCityLvVO=function(t){return void 0===t&&(t=0),r.init(),r.lvData[t=0==t?r.curCityLv:t]},r.isCityOpen=function(){return r.init(),!!r.cityMainVO&&r.cityMainVO.isOpen()},r.getCrystalVO=function(t){return r.init(),r.crystalData[t]},r.checkCaveOpened=function(){},r.getCaveOpenVO=function(){return r.init(),r.caveOpenVO[0]},r.checkOpenReach=function(){return r.init(),!!r.caveOpenVO&&modules.plays.city.PlaysCityMgr.curCityLv>=r.caveOpenVO[0].openLv},r.getCaveSacriPosVO=function(t){return r.init(),r.caveSacriPosVO[t]},r.getCaveSacriItemIDs=function(){r.init();for(var t=[],e=0;e<r.caveSacriItemIDArr.length;e++)t.push(r.caveSacriItemIDArr[e]);return t},r.sortOnCanSacrifice=function(t,e){var i=0<xo.getGoodsNumByTypeID(t)&&modules.plays.city.PlaysCityMgr.checkSacrificeCondition(t),s=0<xo.getGoodsNumByTypeID(e)&&modules.plays.city.PlaysCityMgr.checkSacrificeCondition(e);return i&&!s?-1:1},r.getCaveSacriItemVO=function(t){return r.init(),r.caveSacriItemVO[t]},r.getCaveDragons=function(){return r.init(),r.caveDragonArr},r.getCaveDragonsByID=function(t){var e;for(var i in r.init(),r.caveDragonArr)if((e=r.caveDragonArr[i]).id==t)return e;return null},r.getCaveVO=function(t){return r.init(),r.caveInfo.hasOwnProperty(t+"")?r.caveInfo[t]:null},r.getCaveBlessVO=function(){return r.init(),r.caveBless},r.curRevengeRoleID=NaN,r.curVigor=0,r._missionInfo=null,r.curCityLv=0,r.curCityExp=0,r._logs=null,r._searchCity=null,r.searchTime=0,r.curBuyVigorTime=0,r.getBenifitTime=-1,r.curEvent=null,r.purpleMineLevel=0,r.purpleMineMoraleTs=0,r.purpleMineMapList=null,r.purpleMineExpeditionTs=-1,r.expeditioning=!1,r.expeditionRewards=null,r.dragonCaveInfo=null,r._dragonCaveLevel=0,r.dragonCaveOpenedBlockNum=0,r._sacrificeItemArr=null,r._readyToSacrifice=!1,r._sacrificeDragonType=1,r._isSacrifice=!1,r._openFlag=0,r.smeltTimes=0,r.myCrystalInfo=null,r.curReflashType=0,r.curReflashTime=0,r.myHarryCrystals=null,r.otherCityCrystalInfo=null,r.rpClickNote={},r.cityMainVO=null,r.monsterData=null,r.lvData=null,r.shopData=null,r.minNeedCrystalNum=0,r.missionData=null,r.eventData=null,r.crystalData=null,r.searchData=null,r._has=!1,r._amethyst=null,r.caveOpenVO=null,r.caveSacriPosVO=null,r.caveSacriItemVO=null,r.caveSacriItemIDArr=null,r.caveDragonArr=null,r.caveInfo=null,r.caveBless=null,r}(),Wo=function(){function u(){}return w(u,"modules.plays.city.PlaysCityUtil"),I(1,u,"delayCheckCrystalTime",function(){var t,e=0;for(var i in Ho.myCrystalInfo)t=Ho.myCrystalInfo[i],e=0==e?t.end_ts:Math.min(e,t.end_ts);return e}),u.getMyCrystalLost=function(t){var e=0;if(t&&(u.crystalVO=Ho.getCrystalVO(t.type_id))){var i,s;for(var n in t.history)(s=t.history[n]).id!=pe.roleID&&s.id==t.occupy_id&&(i=s);i&&(e+=7*u.getOutput(i.start_ts,Math.max(i.end_ts,ya.serverTime),u.crystalVO.unitTime,u.crystalVO.unitOutput)/10)}return Math.floor(e)},u.getMyHarryGetScore=function(t){var e=0;if(t&&(u.crystalVO=Ho.getCrystalVO(t.type_id))){var i,s;for(var n in t.history)(s=t.history[n]).id==pe.roleID&&(i=s);i&&(e+=7*u.getOutput(i.start_ts,Math.max(i.end_ts,ya.serverTime),u.crystalVO.unitTime,u.crystalVO.unitOutput)/10)}return Math.floor(e)},u.getAlreadyGetScore=function(t){var e,i=0;if(t&&(u.crystalVO=Ho.getCrystalVO(t.type_id)))for(var s in i=3*u.getOutput(t.start_ts,Math.min(t.end_ts,ya.serverTime),u.crystalVO.unitTime,u.crystalVO.unitOutput)/10,t.history)(e=t.history[s]).id==pe.roleID&&(i+=7*u.getOutput(e.start_ts,e.end_ts,u.crystalVO.unitTime,u.crystalVO.unitOutput)/10);return Math.floor(i)},u.getOutput=function(t,e,i,s){return Math.floor(((0==e?ya.serverTime:e)-t)/(60*i))*s},u.getCrystalScoreOutput=function(t,e,i){return(u.crystalVO=Ho.getCrystalVO(t))?u.getOutput(e,i,u.crystalVO.unitTime,u.crystalVO.unitOutput):0},u.checkAllRP=function(){if(Ho.isCityOpen()){var t=u.checkRP_cityCanUp(),e=u.checkRP_benifit(),i=u.checkRPFind(),s=u.checkRPAmethystExpedition(),n=u.checkRPAmethystFight(),o=u.checkCrystalRP(),a=u.checkDragonCaveOpenRP(),l=u.checkDragonCaveUpRP(),r=u.checkDragonCaveRewardRP(),h=u.checkDragonCaveBlessRP();t||e||i||s||n||o||a||l||r||h?Nt.show("RP_CITY_FUN_CAN_DO"):Nt.hide("RP_CITY_FUN_CAN_DO")}},u.checkTowerAllRP=function(){var t=u.checkRP_cityCanUp(),e=u.checkRP_benifit(),i=u.checkRPFind();t||e||i?Nt.show("RP_CITY_TOWER_CAN_DO"):Nt.hide("RP_CITY_TOWER_CAN_DO")},u.checkRP_log=function(t){return!1},u.checkRP_cityCanUp=function(){var t=Ho.getCityLvVO(),e=pe.getScore(15);return t&&Ho.mainVO&&t.lv<Ho.mainVO.maxCityLv&&Ho.curCityExp>=t.needExp&&e>=t.needMoney?(Nt.show("RP_CITY_UP_LEVEL"),!0):(Nt.hide("RP_CITY_UP_LEVEL"),!1)},u.checkRP_benifit=function(){return 0==Ho.getBenifitTime?(Nt.show("RP_CITY_BENIFIT"),!0):(Nt.hide("RP_CITY_BENIFIT"),!1)},u.checkRPAmethystUp=function(){var t=Ho.getAmethystVO(Ho.purpleMineLevel);return!!(t&&Math.floor(t.conditions[0])<=Ho.curCityLv&&pe.getScore(15)>=Math.floor(t.conditions[1]))},u.checkRPAmethystExpedition=function(){var t=Ho.purpleMineExpeditionTs-ya.serverTime;return-1==Ho.purpleMineExpeditionTs?(Nt.hide("RP_CITY_AMETHYST_EXPLORE"),!1):0==Ho.purpleMineExpeditionTs||t<=0?(Nt.show("RP_CITY_AMETHYST_EXPLORE"),!0):(Nt.hide("RP_CITY_AMETHYST_EXPLORE"),!1)},u.checkRPAmethystFight=function(){if(Ho.purpleMineMapList){var t=Ho.purpleMineMapList[0];return t?0<t.val-ya.serverTime?(Nt.hide("RP_CITY_AMETHYST_FIGHT"),!1):(Nt.show("RP_CITY_AMETHYST_FIGHT"),!0):(Nt.hide("RP_CITY_AMETHYST_FIGHT"),!1)}return Nt.hide("RP_CITY_AMETHYST_FIGHT"),!1},u.checkRPFind=function(){return 0<=Ho.lastEventTime?(Nt.hide("RP_CITY_FINE"),!1):(Nt.show("RP_CITY_FINE"),!0)},u.checkRP_missionCanGet=function(){var t,e=Ho.mainVO.getMissionIDs();if(e)for(var i=0;i<e.length;i++)if([],(t=Ho.getMissionInfoByID(e[i]))&&1==t.val)return Nt.show("RP_CITY_MISSION"),!0;return Nt.hide("RP_CITY_MISSION"),!1},u.checkCrystalRP=function(){var t=u.checkRP_beHarry(),e=u.checkRP_crystalBuild(),i=u.checkRP_crystalReward();return t||e||i},u.checkRP_beHarry=function(){var t;for(var e in Ho.myCrystalInfo)if(t=Ho.myCrystalInfo[e],u.checkRP_isOneBeHarry(t))return Nt.show("RP_CITY_CRYSTAL_BE_HARRY"),!0;return Nt.hide("RP_CITY_CRYSTAL_BE_HARRY"),!1},u.checkRP_isOneBeHarry=function(t){return t&&t.own_id!=t.occupy_id&&0==Ho.checkRPHasClick(t)},u.checkRP_crystalBuild=function(){return(Ho.myCrystalInfo?Ho.myCrystalInfo.length:0)<4&&35<=Ho.curVigor?(Nt.show("RP_CITY_CRYSTAL_CAN_BUILD"),!0):(Nt.hide("RP_CITY_CRYSTAL_CAN_BUILD"),!1)},u.checkRP_crystalReward=function(){for(var t in Ho.myCrystalInfo)if(Ho.myCrystalInfo[t].end_ts<=ya.serverTime)return Nt.show("RP_CITY_CRYSTAL_CAN_REWARD"),!0;return Nt.hide("RP_CITY_CRYSTAL_CAN_REWARD"),!1},u.checkDragonCaveOpenRP=function(){return Ho._openFlag<=0&&Ho.checkOpenReach()?(Nt.show("RP_CITY_DRAGON_CAVE"),!0):(Nt.hide("RP_CITY_DRAGON_CAVE"),!1)},u.checkDragonCaveUpRP=function(){if(Ho._openFlag<=0)return!1;if(Ho.getCaveInfo()){var t=Ho.getCaveVO(Ho._dragonCaveLevel),e=Ho.getCaveVO(Ho._dragonCaveLevel+1);if(Ho.curCityLv>=t.upLv&&pe.getScore(15)>=t.upNum&&e)return Nt.show("RP_CITY_DRAGON_CAVE_LV_UP"),!0}return Nt.hide("RP_CITY_DRAGON_CAVE_LV_UP"),!1},u.checkDragonCaveRewardRP=function(){if(Ho._openFlag<=0)return!1;var t=Ho.getCaveInfo();if(t&&t.rewardInfo){if(t.remainTime<=0&&0<t.rewardInfo.length)return Nt.show("RP_CITY_DRAGON_CAVE_CAN_GET_REWARD"),!0;Nt.hide("RP_CITY_DRAGON_CAVE_CAN_GET_REWARD")}return!1},u.checkDragonCaveBlessRP=function(){if(Ho._openFlag<=0)return!1;var t=pe.getScore(37),e=Ho.getCaveBlessVO()[0],i=Ho.getCaveInfo();return e&&t>=e.costPerLv&&i.blessLevel<e.maxLv?(Nt.show("RP_CITY_DRAGON_CAVE_CAN_BLESS_UP"),!0):(Nt.hide("RP_CITY_DRAGON_CAVE_CAN_BLESS_UP"),!1)},u.crystalVO=null,u}(),qo=function(){function s(){}return w(s,"modules.plays.petExplore.PetExploreMgr"),s.isPetFree=function(t){if(s.tasks)for(var e in s.tasks)if(s.tasks[e].pet_id==t)return!1;return!0},s.getTaskByIndex=function(t){var e;if(s.tasks)for(var i in s.tasks)if((e=s.tasks[i]).index==t)return e;return null},s.handlerTaskUpdate=function(t){if(s.tasks)for(var e=0;e<s.tasks.length;e++){if(s.tasks[e].index==t.index)return void(s.tasks[e]=t)}(s.tasks=s.tasks||[]).push(t)},s.isCanSentPet=function(){if(s.tasks){var t=0;for(var e in s.tasks)0<s.tasks[e].pet_id&&++t;return t<(Eo.pets?Eo.pets.length:0)}return!1},s.initExploreXML=function(){var t=Ra.startEncode("petExplore.xml");s.exploreDic=new Object,s.outTypeArrs=[];for(var e=0;e<t.length;e++)t[e]instanceof xml.ExploreVO?s.exploreDic[t[e].id]=t[e]:t[e]instanceof xml.OutTypeVO&&s.outTypeArrs.push(t[e])},s.getOutTypeVOS=function(){return s.outTypeArrs||s.initExploreXML(),s.outTypeArrs},s.getExploreVO=function(t){return s.exploreDic||s.initExploreXML(),s.exploreDic?s.exploreDic[t]:null},s.checkRP=function(){var t;if(s.tasks)for(var e in s.tasks){if(t=s.tasks[e],!(modules.plays.petExplore.PetExploreMgr.PET_NEED_VIP[t.index-1]>Ia.curLv)){if(0==t.pet_id&&s.isCanSentPet())return void Nt.show("RP_PET_EXPLORE_GET");if(0<t.pet_id&&t.time_complete<ya.serverTime)return void Nt.show("RP_PET_EXPLORE_GET")}}Nt.hide("RP_PET_EXPLORE_GET")},s.resetTimeToCheckRP=function(){if(_t.clearTimeout(s.checkKey),s.checkRP(),Nt.checkModulesShowing("RP_PET_EXPLORE_GET"));else{var t,e=99999999;if(s.tasks)for(var i in s.tasks)(t=s.tasks[i]).time_complete>ya.serverTime&&(e=Math.min(t.time_complete-ya.serverTime,e));e<99999999&&(s.checkKey=_t.setTimeout(s,modules.plays.petExplore.PetExploreMgr.resetTimeToCheckRP,null,1e3*(t.time_complete-ya.serverTime+5)))}},s.tasks=null,s.exploreDic=null,s.outTypeArrs=null,s.checkKey=0,_(s,["PET_NEED_VIP",function(){return this.PET_NEED_VIP=[0,0,0,1,4,6,7,8,9]}]),s}(),Yo=(function(){function t(){}w(t,"modules.plays.PlaysConst")}(),function(){function l(){}return w(l,"modules.plays.PlaysMgr"),I(1,l,"playItems",function(){return l.initXml(),l._playsItems}),l.initXml=function(){if(!l._has){l._has=!0,l._playsItems=[],l._playsGuideTypes=[];var t,e=Ra.startEncode("plays.xml");for(var i in e)(t=e[i])instanceof xml.PlaysItemVO?l._playsItems.push(t):t instanceof xml.PlaysGuideTypeVO&&l._playsGuideTypes.push(t)}},l.getPlaysItemVO=function(t){var e;for(var i in l.initXml(),l._playsItems)if((e=l._playsItems[i]).viewType==t)return e;return null},l.getPlaysItemMapId=function(t){var e;for(var i in l.initXml(),l._playsItems)if((e=l._playsItems[i]).viewType==t)return e.mapId;return 0},l.checkPlaysItemIsOpen=function(t){var e;for(var i in l.initXml(),l._playsItems)if((e=l._playsItems[i]).viewType==t&&e.isOpen())return!0;return!1},l.getGuideTypeLabels=function(){l.initXml();for(var t,e="",i=l._playsGuideTypes.length,s=0;s<i;s++)t=l._playsGuideTypes[s],e+=s==i-1?t.name:t.name+",";return e},l.getPlaysItemVOsByType=function(t){l.initXml();var e,i,s=[];for(var n in l._playsGuideTypes){var o;if((i=l._playsGuideTypes[n]).id==t)for(var a in i.itemIds)o=i.itemIds[a],(e=l.getPlaysItemVO(o))&&s.push(e)}return s},l.getPlaysItemVOByTypes=function(t,e){var i,s=l.getPlaysItemVOsByType(t);for(var n in s)if((i=s[n]).viewType==e)return i;return null},l.checkBaiLingYuanRP=function(){var t=l.getPlaysItemVOByTypes(2,4);if(t){var e=As.getCopyTime(t.mapId);e&&e.finished_times<t.times?Nt.show("RP_PLAYS_BAILINGYUAN"):Nt.hide("RP_PLAYS_BAILINGYUAN")}else Nt.hide("RP_PLAYS_BAILINGYUAN")},l.getCopyRw=function(t){return l.mapCopyRwDic||(l.mapCopyRwDic=Ra.startEncode("mapRe.xml","mapID")),l.mapCopyRwDic.hasOwnProperty(t)?l.mapCopyRwDic[t]:null},l._has=!1,l._playsItems=null,l._playsGuideTypes=null,l.mapCopyRwDic=null,l}()),Xo=(function(){function t(){}w(t,"modules.plays.treasure.TreasureConst")}(),function(){function s(){}return w(s,"modules.plays.treasure.TreasureMgr"),I(1,s,"curPos",function(){return s._curPos||s.resetPos(),s._curPos}),I(1,s,"eventsArr",function(){return s.initTreasureXML(),s._eventsArr}),I(1,s,"info",function(){return s._info}),s.needChangePos=function(t){if(!s.curMaps||s.curMaps.length!=t.length)return s.resetPos(),s.curMaps=t,!0;for(var e=0;e<t.length;e++)if(s.curMaps[e]!=t[e])return s.resetPos(),s.curMaps=t,!0;return!1},s.resetPos=function(){(s._curPos=s._curPos||[])[0]=148*Math.random()+5,s._curPos[1]=120*Math.random()+42,s._curPos[2]=125*Math.random()+244,s._curPos[3]=97*Math.random()+96,s._curPos[4]=67*Math.random()+459,s._curPos[5]=145*Math.random()+50},s.checkRedPoint=function(){Ne.isOpenTreasure()&&(s._info?(0<s._info.free_times&&1&s._info.red_point?Nt.show("RP_TREASURE_FREE"):Nt.hide("RP_TREASURE_FREE"),0<xo.getGoodsNumByType(xo.GOODS_ID,13000024)&&2&s._info.red_point?Nt.show("RP_TREASURE_USE"):Nt.hide("RP_TREASURE_USE")):Sr.ins.toTreasureInfo())},s.initTreasureXML=function(){if(!s._maps){s._maps=new Object,s._eventsDic=new Object,s._eventsArr=[];var t,e=Ra.startEncode("treasure.xml");for(var i in e)(t=e[i])instanceof xml.TreasureEventVO?(s._eventsDic[t.id]=t,s._eventsArr.push(t)):t instanceof xml.TreasureMapVO?s._maps[t.id]=t:t instanceof xml.TreasureListVO&&(s._lists=t.con.split(","))}},s.getTreasureList=function(){return s.initTreasureXML(),s._lists},s.getMapVOByID=function(t){return s.initTreasureXML(),s._maps.hasOwnProperty(t)?s._maps[t]:null},s.getEventVOByID=function(t){return s.initTreasureXML(),s._eventsDic.hasOwnProperty(t)?s._eventsDic[t]:null},s.getEventByMaps=function(t){if(t&&0<t.length){for(var e in s.initTreasureXML(),s._eventsDic)if(s._eventsDic[e].mapsArr[0]==t[0]){for(var i=1;i<t.length;i++)if(t[i]!=s._eventsDic[e].mapsArr[i])return null;return s._eventsDic[e]}return null}return null},s.handlerTreasureHunt=function(t){s._info&&(s._info.free_times=t.free_times,s._info.map_ids=t.map_ids,s._info.event_id=t.event_id,s._info.hunt_index=t.hunt_index)},s.handlerTreasureInfo=function(t){s._info=t},s.handlerTreasureAutoHunt=function(t){s._info&&(s._info.free_times=t.free_times,s._info.map_ids=t.map_ids,s._info.event_id=t.event_id,s._info.hunt_index=t.hunt_index)},s.handlerTreasureRefresh=function(t){s._info&&(s._info.map_ids=t.map_ids)},s.handlerTreasureRewardLog=function(t){},s.handlerTreasureSetRedPoint=function(t){s._info&&(s._info.red_point=t.red_point)},s.curMaps=null,s._curPos=null,s._maps=null,s._eventsDic=null,s._eventsArr=null,s._lists=null,s._info=null,s}()),Ko=function(){function t(){}return w(t,"modules.rank.RankConst"),t.getRankAdoreRewardTip=function(t){switch(t){case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 1008:case 1101:case 1201:case 1202:case 2001:case 2003:case 4001:case 1010:return["铜钱×15万 经验×3万","#fcf476"];case 4101:case 4102:case 4103:case 4104:default:return null}},t.getRankName=function(t){switch(t){case 1001:case 10001001:case 20001001:case 30001001:return"战力榜";case 1002:case 10001002:case 20001002:case 30001002:return"狂战榜";case 1003:case 10001003:case 20001003:case 30001003:return"飞羽榜";case 1004:case 10001004:case 20001004:case 30001004:return"舞天榜";case 1005:case 10001005:case 20001005:case 30001005:return"碧落榜";case 1006:case 10001006:case 20001006:case 30001006:return"时装榜";case 1008:case 10001008:return"结缘榜";case 1101:case 10001101:case 20001101:case 30001101:return"等级榜";case 1201:return"回魂仙梦排行榜";case 1202:return"修仙之路排行榜";case 2001:return"天梯榜";case 2003:return"遭遇榜";case 4001:return"天境榜";case 4101:case 10004101:case 20004101:case 30004101:return"仙宠战力榜";case 4102:case 10004102:case 20004102:case 30004102:return"兽魂榜";case 4103:case 10004103:case 20004103:case 30004103:return"仙宠技能榜";case 4104:case 10004104:case 20004104:case 30004104:return"仙宠等级榜";case 1010:return"送花榜";default:return""}},t.getRankTip=function(t){var e="";switch(t){case 1001:case 1101:case 1002:case 1003:case 1004:case 1005:case 1006:case 4101:case 4102:case 4103:case 4104:e="更新间隔：10分钟";break;case 4001:case 2001:e="更新间隔：1小时";break;case 2003:case 1010:e="更新间隔：实时更新";break;case 10001001:case 20001001:case 30001001:case 10001101:case 20001101:case 30001101:case 10001002:case 20001002:case 30001002:case 10001003:case 20001003:case 30001003:case 10001004:case 20001004:case 30001004:case 10001005:case 20001005:case 30001005:case 10001006:case 20001006:case 30001006:case 10004101:case 20004101:case 30004101:case 10004102:case 20004102:case 30004102:case 10004103:case 20004103:case 30004103:case 10004104:case 20004104:case 30004104:case 10001008:e="更新间隔：30分钟"}return e},t.transformUniqueIdToRankId=function(t){return t%1e4},_(t,["PANEL_RANKS",function(){return this.PANEL_RANKS=[1001,1101,2001,2003,1006,1002,1003,1004,1005,1008,1010]},"PANEL_PET_RANKS",function(){return this.PANEL_PET_RANKS=[4101,4102,4103,4104]},"CROSS_PANEL_RANKS",function(){return this.CROSS_PANEL_RANKS=[[10001001,20001001,30001001],[10001101,20001101,30001101],[10001006,20001006,30001006],[10001002,20001002,30001002],[10001003,20001003,30001003],[10001004,20001004,30001004],[10001005,20001005,30001005],[10001008,10001008,10001008]]},"CROSS_PANEL_PET_RANKS",function(){return this.CROSS_PANEL_PET_RANKS=[[10004101,20004101,30004101],[10004102,20004102,30004102],[10004103,20004103,30004103],[10004104,20004104,30004104]]}]),t}(),jo=function(){function n(){}return w(n,"modules.rank.RankMgr"),n.setExtraInfoToc=function(t){var e,i=!1;for(var s in n._extraInfoTocs=n._extraInfoTocs||[])if((e=n._extraInfoTocs[s]).roleId==t.role_id){e.tocvo=t,i=!0;break}0==i&&n._extraInfoTocs.push({roleId:t.role_id,tocvo:t})},n.getExtraInfoToc=function(t){var e;for(var i in n._extraInfoTocs)if((e=n._extraInfoTocs[i]).roleId==t)return e.tocvo;return null},n.setMyAllRankData=function(t){var e;for(var i in null==n.myAllRankData&&(n.myAllRankData={}),t)e=t[i],n.myAllRankData[e.rank_id]=e},n.updateMyRankData=function(t){null==n.myAllRankData&&(n.myAllRankData={}),t&&(n.myAllRankData[t.rank_id]=t)},n.getMyRankData=function(t){return n.myAllRankData?n.myAllRankData[t]:null},n.updateAdore=function(t,e){var i=n.getMyRankData(t);i&&(i.adored=e)},n.setRankData=function(t){null==n.rankData&&(n.rankData={}),t&&(n.rankData[t.rankID]=t,n.updateMyRankData(t.pData))},n.getRankVO=function(t){return n.rankData?n.rankData[t]:null},n.init=function(){if(!n._has)for(var t in n._has=!0,n.rankCfg=Ra.startEncode("rank.xml","rankID"),n._rankTitleIDs=[],n.rankCfg){var e;for(var i in n.rankCfg[t].titleIds)e=n.rankCfg[t].titleIds[i],n._rankTitleIDs.push(e)}},n.getRankCfgVO=function(t){return n.init(),n.rankCfg[t]},n.isRankTitle=function(t){return n.init(),-1!=n._rankTitleIDs.indexOf(t)},n.rankData=null,n.myAllRankData=null,n.curRankID=0,n.curPetRankID=0,n.curCrossRankID=0,n.curCrossPetRankID=0,n._extraInfoTocs=null,n.curClickRankData=null,n._has=!1,n.rankCfg=null,n._rankTitleIDs=null,n}(),Qo=function(){function t(){}return w(t,"modules.rank.RankUtil"),t.buildShamData=function(t){var e,i=[];t||(t=[]);for(var s=0;s<5;s++)t[s]?i.push(t[s]):((e=new Object).className="p_rank_row",e.row_id=s+1,i.push(e));return i},t.getRankStr=function(t,e){var i,s=W.getPowerStrByDigit(parseInt(e[1]),4);switch(t){case 1001:case 10001001:case 20001001:case 30001001:i=[e[0],"战斗力："+s,"",e[4]&&""!=e[4]?"【"+e[4]+"】":""];break;case 1101:case 10001101:case 20001101:case 30001101:i=[e[0],0<parseInt(e[1])?e[1]+"转"+e[2]+"级":"等级："+e[2],"",e[3]&&""!=e[3]?"【"+e[3]+"】":""];break;case 2001:var n=cs.getDivisionByStar(parseInt(e[1])),o=cs.getStageByStar(parseInt(e[1]));i=[e[0],cs.getDivisionNameByIndex(n)+o+"阶","净胜："+e[2]+"场",e[4]&&""!=e[4]?"【"+e[4]+"】":""];break;case 2003:i=[e[0],"荣誉值："+e[1],"",e[3]&&""!=e[3]?"【"+e[3]+"】":""];break;case 1006:case 10001006:case 20001006:case 30001006:i=[e[0],"华丽度："+e[1],"",e[4]&&""!=e[4]?"【"+e[4]+"】":""];break;case 1008:case 10001008:i=[e[0],"好感度:"+e[1],"",""];break;case 1002:case 1003:case 1004:case 1005:case 10001002:case 20001002:case 30001002:case 10001003:case 20001003:case 30001003:case 10001005:case 20001005:case 30001005:case 10001004:case 20001004:case 30001004:i=[e[0],"战斗力："+s,"",e[4]&&""!=e[4]?"【"+e[4]+"】":""];break;case 4001:i=[e[0],"通关仙宠幻境关卡："+parseInt(e[1])%1e4+"关","",e[4]&&""!=e[4]?"【"+e[4]+"】":""];break;case 4101:case 10004101:case 20004101:case 30004101:i=[e[0],"仙宠:"+e[1],"战力:"+e[2],e[3],e[4]];break;case 4102:case 10004102:case 20004102:case 30004102:i=[e[0],"仙宠:"+e[1],"兽魂经验:"+e[2],e[3],e[4]];break;case 4103:case 10004103:case 20004103:case 30004103:i=[e[0],"仙宠:"+e[1],"技能总等级:"+e[2],e[3],e[4]];break;case 4104:case 10004104:case 20004104:case 30004104:i=[e[0],"仙宠:"+e[1],"仙宠等级:"+e[2],e[3],e[4]];break;case 1010:i=[e[0],"送花数:"+e[2],"",e[3]&&""!=e[3]?"【"+e[3]+"】":""]}return i},t.getRankBlueVip=function(t,e){var i=[];if(!e)return i;switch(t){case 1001:case 1002:case 1003:case 1004:case 1005:case 1006:case 4102:case 4101:case 4103:case 4104:case 10001001:case 10001006:case 10001002:case 10001003:case 10001004:case 10001005:i=e[6]?e[6].toString().split("#"):i;break;case 1008:i=e[4]?e[4].toString().split("_"):i;break;case 2003:case 2002:case 10001008:case 1201:i=e[4]?e[4].toString().split("#"):i;break;case 1202:case 1010:case 1009:i=e[3]?e[3].toString().split("#"):i;break;case 2001:case 1101:case 10001101:i=e[5]?e[5].toString().split("#"):i;break;case 1203:i=e[2]?e[2].toString().split("_"):i;break;default:i=e[3]?e[3].toString().split("#"):i}return i},t}(),zo=function(){function i(){this.rankID=0,this._rows=null,this.openDay=0,this.nowTime=0,this.rankTime=0,this.pData=null}w(i,"modules.rank.RankVO",null,"RankVO$1");var t=i.prototype;return t.sort=function(t,e){return t.row_id>e.row_id?1:t.row_id<e.row_id?-1:0},I(0,t,"rows",function(){return this._rows},function(t){this._rows=t;var e=jo.getRankCfgVO(this.rankID);t&&(this._rows=t.sort(this.sort)),-1==Ko.PANEL_RANKS.indexOf(this.rankID)&&-1==Ko.PANEL_PET_RANKS.indexOf(this.rankID)||e&&this._rows.length>e.rankNum&&(this._rows=this._rows.slice(0,parseInt(e.rankNum)))}),i.getVO=function(t){if(t){var e=new i;e.rankID=t.rank_id,e.rows=t.rows,e.openDay=t.open_days,e.nowTime=t.now_time,e.rankTime=t.rank_time,e.pData=t.role_in_rank}return e},i}(),$o=function(){function l(){}return w(l,"modules.refine.RefineConfig"),I(1,l,"maxSoulStep",function(){return l.init(),l._refineSoulVO.maxLv}),l.init=function(){if(!l.has){l.has=!0,l.refineData={},l._refineSoulLvVOs={},l._refineSoulGoals={};var t,e=Ra.startEncode("refine_reinf.xml");for(var i in l._maxLvs={},e)(t=e[i])instanceof xml.RefineVO?(l._maxLvs&&l._maxLvs[t.type+"_"+t.putWhere]?l._maxLvs[t.type+"_"+t.putWhere]=Math.max(l._maxLvs[t.type+"_"+t.putWhere],t.maxLv):l._maxLvs[t.type+"_"+t.putWhere]=t.maxLv,l.refineData[t.type+"_"+t.putWhere]||(l.refineData[t.type+"_"+t.putWhere]=[]),l.refineData[t.type+"_"+t.putWhere].push(t)):t instanceof xml.RefineSoulVO?l._refineSoulVO=t:t instanceof xml.RefineSoulLvVO?l._refineSoulLvVOs[t.lv]=t:t instanceof xml.RefineSoulGoalVO&&(l._refineSoulGoals[t.lv]=t)}},l.getSoulStepSource=function(t){return l.init(),l._refineSoulVO.getFireSource(t)},l.getSoulLvVO=function(t){return l.init(),l._refineSoulLvVOs[t]},l.getRefineVO=function(t,e,i){l.init();var s,n=l.refineData[t+"_"+i];for(var o in n)if((s=n[o]).isLvIn(e)){var a=s.copy();return a.curLv=e,a}return null},l.getAttrs=function(t,e,i){l.init();var s=l.getRefineVO(t,e,i);return s?s.getAttrs():null},l.isMaxLv=function(t,e,i){return void 0===i&&(i=0),l.init(),i=0==i?Jo.curViewType:i,l._maxLvs[i+"_"+e]<=t},l.getFixOrder=function(t){return[1,2,3,4,5,6,7,8]},l.has=!1,l.refineData=null,l._maxLvs=null,l._refineSoulVO=null,l._refineSoulLvVOs=null,l._refineSoulGoals=null,l}(),Zo=function(){function t(){}return w(t,"modules.refine.RefineConst"),_(t,["reinfItemPos",function(){return this.reinfItemPos=[{x:302,y:462},{x:479,y:405},{x:569,y:268},{x:479,y:126},{x:302,y:56},{x:123,y:126},{x:31,y:268},{x:123,y:405}]},"soulItemPos",function(){return this.soulItemPos=[[-4,55],[610,55],[-4,221],[610,221],[-4,387],[610,387],[-4,553],[610,553]]},"putWhereSorts",function(){return this.putWhereSorts=[1,2,3,4,5,6,7,8]}]),t}(),Jo=function(){function u(){}return w(u,"modules.refine.RefineManager"),u.setInfo=function(t){var e;for(var i in u.roleRefineDic=u.roleRefineDic||{},t)e=t[i],u.roleRefineDic[e.actor_id]=e},u.updateReinfInfo=function(t,e,i){if(u.roleRefineDic&&u.roleRefineDic[t]){var s,n=u.roleRefineDic[t].linear_refining;for(var o in n)if((s=n[o]).id==e){s.val=i;break}}},u.getAllLv=function(t,e,i){if(void 0===e&&(e=0),!i&&u.roleRefineDic&&(i=u.roleRefineDic[e]),i){var s,n=ta.getServerRefineType(t),o=i.linear_refining;for(var a in o)if((s=o[a]).id==n)return s.val}return 0},u.getAllLevelByCurView=function(){return modules.refine.RefineManager.getAllLv(modules.refine.RefineManager.curViewType,modules.refine.RefineManager.curChooseActor)},u.getTotalStepLv=function(t,e){var i=0,s=sn.getPotentialVOByPos(t);if(!s)return 0;for(var n=0,o=s.PotentialLvArr.length;n<o;n++)if(8*s.PotentialLvArr[n].lv>e){i=8*s.PotentialLvArr[n].lv;break}return i},u.getStepLvByViewType=function(t,e){for(var i=0,s=sn.getPotentialVOByPos(t),n=0,o=s.PotentialLvArr.length;n<o;n++)if(8*s.PotentialLvArr[n].lv>e){i=8*s.PotentialLvArr[n].lv,0<n&&(i=8*(s.PotentialLvArr[n].lv-s.PotentialLvArr[n-1].lv));break}return i},u.getSoulNextStep=function(t,e){void 0===e&&(e=17);for(var i=0,s=sn.getPotentialVOByPos(e),n=0,o=s.PotentialLvArr.length;n<o;n++)if(s.PotentialLvArr[n].lv>t){i=s.PotentialLvArr[n].lv;break}return i},u.getLastStepLvByViewType=function(t,e){for(var i=0,s=sn.getPotentialVOByPos(t),n=0,o=s.PotentialLvArr.length;n<o;n++)if(8*s.PotentialLvArr[n].lv>e){i=e,0<n&&(i=e-8*s.PotentialLvArr[n-1].lv);break}return i},u.getNowStep=function(t,e){for(var i=0,s=sn.getPotentialVOByPos(t),n=0,o=s.PotentialLvArr.length;n<o;n++)if(17==t||12==t||13==t){if(s.PotentialLvArr[n].lv>e){i=n;break}}else if(8*s.PotentialLvArr[n].lv>e){i=n;break}return i<=0&&(i=17==t||12==t||13==t?s.PotentialLvArr[s.PotentialLvArr.length-1].lv<=e?s.PotentialLvArr.length:0:8*s.PotentialLvArr[s.PotentialLvArr.length-1].lv==e?s.PotentialLvArr.length:0),i},u.getRefineInfo=function(t){return u.roleRefineDic?u.roleRefineDic[t]:null},u.getRefineSoulInfo=function(t){return u.roleRefineDic&&u.roleRefineDic[t]?u.roleRefineDic[t].equip_refining:null},u.getRefineSoulStep=function(t,e,i){var s;if(void 0===t&&(t=-1),void 0===e&&(e=-1),i=i||u.getRefineInfo(t))for(var n in i.equip_refining)if(e==(s=i.equip_refining[n]).id)return s.val;return 0},u.getRefineSoulStepNum=function(t,e){var i=u.getRefineInfo(t),s=0;if(i)for(var n in i.equip_refining)i.equip_refining[n].val>=e&&s++;return s},u.getRefiningInfoByCurActor=function(){return u.getRefineInfo(u.curChooseActor)},u.getRefineSoulAllStep=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=0);var i,s=0,n=u.getRefineInfo(t);if(n)for(var o in n.equip_refining)(i=n.equip_refining[o]).val<=e?s+=i.val:s+=e;return s},u.updateRefineSoulUpAndCheckSucc=function(t){if(t){var e,i=!0,s=modules.refine.RefineManager.getRefineInfo(t.actor_id);for(var n in s.equip_active_lv=t.equip_active_lv,s.equip_refining)if(e=s.equip_refining[n],t.pos==e.id)return e.val>=t.level&&(i=!1,Jt.addTip("附魂失败")),e.val=t.level,i;return s.equip_refining=s.equip_refining||[],(e=new Object).className="p_kv",e.id=t.pos,e.val=t.level,s.equip_refining.push(e),i}return!1},u.getCurEquip=function(t,e){void 0===t&&(t=-1),void 0===e&&(e=-1),t=0<=t?t:u.curViewType,e=0<=e?e:u.curChooseActor;var i=$o.getFixOrder(t);return i[u.getAllLv(t,e)%i.length]},u.getEquipInfo=function(t,e,i,s){void 0===e&&(e=-1),void 0===i&&(i=-1);var n=u.getEquipRefineLv(t,e=0<=e?e:u.curViewType,i=0<=i?i:u.curChooseActor,s);return $o.getRefineVO(e,n,t)},u.getEquipAttr=function(t,e){void 0===e&&(e=!1);var i=u.getEquipRefineLv(t);return $o.getAttrs(u.curViewType,0==e?i:i+1,t)},u.getEquipRefineLv=function(t,e,i,s){void 0===e&&(e=-1),void 0===i&&(i=-1),e=0<=e?e:u.curViewType,i=0<=i?i:u.curChooseActor;var n=$o.getFixOrder(e),o=u.getAllLv(e,i,s),a=Math.floor(o/n.length);return Math.floor(o%n.length>n.indexOf(t)?a+1:a)},u.getCurEquipVO=function(){var t=u.getCurEquip();return u.getEquipInfo(t)},u.getEquipVO=function(t,e){var i=u.getCurEquip(t,e);return u.getEquipInfo(i,t,e)},u.getCurEquipRefineLv=function(){var t=u.getCurEquip();return u.getEquipRefineLv(t)},u.getCurEquipAttrs=function(t){void 0===t&&(t=!1);var e=u.getCurEquip();return u.getEquipAttr(e,t)},u.isCurMaxLv=function(){var t=u.getCurEquip(),e=u.getEquipRefineLv(t);return $o.isMaxLv(e,t)},u.getCurPower=function(){var t,e,i=0;for(var s in $o.getFixOrder(u.curViewType)){var n;for(var o in e=$o.getFixOrder(u.curViewType)[s],t=u.getEquipAttr(e))n=t[o],i+=W.getAttrPower(n[0],n[1])}return Math.floor(i)},u.isAllMaxLv=function(t){var e;if(void 0===t&&(t=1),4==t){for(var i,s=0,n=0;n<4;n++)if((e=pe.getPalByIndex(n))&&(i=modules.refine.RefineManager.getRefineInfo(e.pal_id)))for(var o=0;o<i.equip_refining.length;o++){i.equip_refining[o].val>=$o.maxSoulStep&&s++}return 32<=s}for(var a=0,l=0;l<4;l++)for(var r=1;r<=8;r++)if(e=pe.getPalByIndex(l)){var h=u.getEquipRefineLv(r,t,e.pal_id);$o.isMaxLv(h,r,t)&&a++}return 32<=a},u.curViewType=0,u.curChooseActor=NaN,u.curActorIndex=0,u.roleRefineDic=null,u}(),ta=function(){function n(){}return w(n,"modules.refine.RefineUtil"),n.checkHeadRp=function(){for(var t=0,e=0;e<4;e++){var i=pe.getPalByIndex(e);if(i)switch(Jo.curViewType){case 1:case 2:n.checkCommonRefineOne(Jo.curViewType,i.pal_id)&&!ha.checkIsPing2(5,i.pal_id,Jo.curViewType-1)?Nt.show("RP_REFINE_HEAD_ITEM_"+e):Nt.hide("RP_REFINE_HEAD_ITEM_"+e);break;case 3:t=pe.getScore(1),n.checkCommonRefineOne(3,i.pal_id,t)&&!ha.checkIsPing2(5,i.pal_id,Jo.curViewType-1)?Nt.show("RP_REFINE_HEAD_ITEM_"+e):Nt.hide("RP_REFINE_HEAD_ITEM_"+e);break;case 4:n.checkSoulOnePal(i.pal_id)?Nt.show("RP_REFINE_HEAD_ITEM_"+e):Nt.hide("RP_REFINE_HEAD_ITEM_"+e)}}},n.checkRP=function(){n.checkReinf(),n.checkEngrave(),n.checkQuality(),n.checkSoul(),n.checkHeadRp()},n.checkCommonRefine=function(t,e){void 0===e&&(e=-1);for(var i=0;i<4;i++){var s=pe.getPalByIndex(i);if(s&&n.checkCommonRefineOne(t,s.pal_id,e))return!0}return!1},n.checkCommonRefineOne=function(t,e,i){void 0===i&&(i=-1);var s=Jo.getEquipVO(t,e);if(s){var n=s.getNeeds();if(n){if(i=-1==i?xo.getGoodsNumByType(xo.GOODS_ID,n[0]):i,n[1]<=i)return!ha.checkIsPing2(5,e,t-1)}}return!1},n.checkReinf=function(){n.checkCommonRefine(1)?Nt.show("RP_REFINE_REINF"):Nt.hide("RP_REFINE_REINF")},n.checkEngrave=function(){n.checkCommonRefine(2)?Nt.show("RP_REFINE_ENGRAVE"):Nt.hide("RP_REFINE_ENGRAVE")},n.checkQuality=function(){var t=pe.getScore(1);n.checkCommonRefine(3,t)?Nt.show("RP_REFINE_QUALITY"):Nt.hide("RP_REFINE_QUALITY")},n.checkSoul=function(){for(var t=0;t<4;t++){var e=pe.getPalByIndex(t);if(e&&n.checkSoulOnePal(e.pal_id))return void Nt.show("RP_REFINE_SOUL")}Nt.hide("RP_REFINE_SOUL")},n.checkSoulOnePal=function(t){var e=Jo.getRefineSoulInfo(t);if(e)for(var i,s=0;s<8;s++)if((i=e[s])&&n.checkSoulOne(i.val)||!i&&n.checkSoulOne(0))return!0;return!1},n.checkSoulOne=function(t){var e,i=0,s=$o.getSoulLvVO(t+1);if(s)for(var n in s.getNeed())if(1e4==(e=s.getNeed()[n])[2]&&(i=xo.getGoodsNumByType(xo.GOODS_ID,e[0]),e[1]<=i))return!0;return!1},n.getEffUrl=function(){switch(Jo.curViewType){case 1:return n._isFanti?"moduleEffect/refineReinfSuss.ft":"moduleEffect/refineReinfSuss";case 2:return"moduleEffect/refineStoneSuss";case 3:return"moduleEffect/refineQualitySuss";case 4:return"moduleEffect/refineSoulSuss"}return""},n.getServerRefineType=function(t){var e=0;switch(t){case 1:e=1001;break;case 2:e=1002;break;case 3:e=1003}return e},n.getNewEquipUpOrderArrByCur=function(t){var e=$o.getFixOrder(Jo.curViewType).concat();if(e){var i=e.indexOf(t),s=e.splice(0,i);return e.concat(s)}return null},n.getNextMovePoint=function(t){var e=n.getNextPointIndex(t);return Zo.reinfItemPos[e]},n.getNextPointIndex=function(t){var e=Zo.reinfItemPos.length-1;return 0<=t-1?t-1:e},_(n,["_isFanti",function(){return this._isFanti=Bt.isFanTi}]),n}(),ea=(function(){function t(){}w(t,"modules.refineSoulPalace.RefineSoulPalaceConst"),_(t,["COLOR_ARRAY",function(){return this.COLOR_ARRAY=["red","yellow","blue","green"]}])}(),function(){function u(){}return w(u,"modules.refineSoulPalace.RefineSoulPalaceManager"),I(1,u,"selectItemData",function(){return u.selectGridIndex?u.mySoulGridInfo[u.selectGridIndex[1]][u.selectGridIndex[0]]:null}),I(1,u,"refineSoulMission",function(){return u.initXML(),u._refineSoulMission}),I(1,u,"refineSoulEquation",function(){return u.initXML(),u._refineSoulEquation}),I(1,u,"refineSoulIncident",function(){return u.initXML(),u._refineSoulIncident}),I(1,u,"refineSoulShop",function(){return u.initXML(),u._refineSoulShop}),I(1,u,"refineSoulStoneMaxScore",function(){if(!u._stoneMaxScore){var t=u.refineSoulStone[u.refineSoulStone.length-1].score.split(",");u._stoneMaxScore=parseInt(t[t.length-1])}return u._stoneMaxScore}),I(1,u,"refineSoulItem",function(){return u.initXML(),u._refineSoulItem}),I(1,u,"refineSoulStone",function(){return u.initXML(),u._refineSoulStone}),I(1,u,"refineSoulStove",function(){return u.initXML(),u._refineSoulStove}),I(1,u,"refineSoulStoneMix",function(){return u.initXML(),u._refineSoulStoneMix}),u.getRefineSoulBagGoods=function(){var t,e=[];if(u.goodsList)for(var i in u.goodsList)if(0<(t=u.goodsList[i]).num){var s=new Object;s.className="p_goods",s.id=t.id,s.typeid=t.type_id,s.current_num=t.num,e.push(s)}return e.sort(u.sortBagGoods),e},u.sortBagGoods=function(t,e){if(t&&e){if(10403001==t.typeid)return-1;if(10403001==e.typeid)return 1;if(10403006==t.typeid&&10403001!=e.typeid)return-1;if(10403006==e.typeid&&10403001!=t.typeid)return 1}return 0},u.getSoulStoneBagByType=function(t){var e,i=[],s=u.getRefineSoulBagGoods();if(s)for(var n in s){var o;for(var a in e=s[n],u.refineSoulStone)o=u.refineSoulStone[a],e.typeid==o.id&&o.type==t&&i.push(e)}return i},u.getSoulStoneBag=function(){var t,e=[],i=u.getRefineSoulBagGoods();if(i)for(var s in i){var n;for(var o in t=i[s],u.refineSoulStone)n=u.refineSoulStone[o],t.typeid==n.id&&e.push(t)}return e},u.getGoodsNumInBagById=function(t){var e;for(var i in u.goodsList)if((e=u.goodsList[i]).type_id==t)return 0==e.num?0:e.num;return 0},u.getRefineSoulTokenNum=function(){var t=[],e=u.getGoodsNumInBagById(10403002),i=u.getGoodsNumInBagById(10403003),s=u.getGoodsNumInBagById(10403004),n=u.getGoodsNumInBagById(10403005);return t.push(e,i,s,n),t},u.getRefineSoulCoinById=function(t){return pe.getScore(t)},u.getRefineSoulMixMaxNum=function(t){for(var e=[],i=[31,32,33,34],s=u.getRefineSoulEquationById(t),n=0;n<i.length;n++)if(0==s[n]?e[n]=1/0:e[n]=Math.floor(u.getRefineSoulCoinById(i[n])/s[n]),0==e[n])return 1;return Math.min(e[0],e[1],e[2],e[3])},u.getSoulSupplyOpenTime=function(t){var e;return null==e&&(e=new Date).setTime(ya.serverTimeMs),0==t?(e.setHours(7),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):1==t?(e.setHours(12),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):2==t?(e.setHours(17),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)):3==t&&(e.setHours(22),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)),e.getTime()/1e3},u.getRefinSoulEquationVOById=function(t){var e;for(var i in u.refineSoulEquation)if((e=u.refineSoulEquation[i]).id==t)return e;return null},u.getRefineSoulEquationById=function(t){var e,i,s=[];for(var n in u.refineSoulEquation)(i=u.refineSoulEquation[n]).id==t&&(e=i.valArr.split(","));for(var o=0;o<e.length;o++)s.push(parseInt(e[o]));return s},u.getRefineSoulItemSkinByTypeColor=function(t,e){var i;for(var s in u.refineSoulItem)if((i=u.refineSoulItem[s]).type==t&&i.color==e)return i.img;return null},u.getRefineSoulItemScoreByTypeColor=function(t,e){var i;for(var s in u.refineSoulItem)if((i=u.refineSoulItem[s]).type==t&&i.color==e)return i.score;return 0},u.getRefineSoulItemEffByTypeColor=function(t,e){var i;for(var s in u.refineSoulItem)if((i=u.refineSoulItem[s]).type==t&&i.color==e)return i.eff;return null},u.getSoulGridPosByItem=function(t){var e=[];for(var i in t){var s=t[i].pos;e.push(s.id),e.push(s.val)}return e},u.getRankInfoFromRankVo=function(t){var e,i=[];if(t&&t.rows)for(var s in t.rows){e=t.rows[s];var n=new Object;n.className="p_refine_soul_friend",n.rank=e.row_id,n.role_id=e.role_id,n.role_name=e.elements[0],n.refine_val=parseInt(e.elements[1]),i.push(n)}return i},u.sortList=function(t,e){return t.rank-e.rank},u.getStoveNeedExp=function(t){var e;for(var i in u.refineSoulStove)if((e=u.refineSoulStove[i]).lv==t)return e.upConst;return 0},u.getStoveVOByLv=function(t){var e;for(var i in u.refineSoulStove)if((e=u.refineSoulStove[i]).lv==t)return e;return null},u.getStoveAttr=function(t){for(var e=[],i=u.getStoveVOByLv(t),s=i.arrtKeys.split(","),n=i.attrVals.split(","),o=[],a=0;a<s.length;a++){var l;switch(parseInt(s[a])){case 11:l="生命",o.push(l);break;case 49:l="攻击",o.push(l);break;case 13:l="物防",o.push(l);break;case 14:l="法防",o.push(l)}}for(var r=0;r<o.length;r++)e.push([o[r],parseInt(n[r])]);return e},u.getInlayTotalAttr=function(t){var e,i=[["生命",0],["攻击",0],["物防",0],["法防",0]];1==t?e=u.getInlayListAttr():2==t&&(e=u.getInlayListAttr2());for(var s=0;s<e.length;s++)switch(e[s][0]){case 11:i[0][1]+=e[s][1];break;case 49:i[1][1]+=e[s][1];break;case 13:i[2][1]+=e[s][1];break;case 14:i[3][1]+=e[s][1]}return i},u.getInlayListAttr=function(){var t,e=[];for(var i in u.soulStoneInlayList){var s;if(0!=(t=u.soulStoneInlayList[i]).typeId)for(var n in u.refineSoulStone)if((s=u.refineSoulStone[n]).id==t.typeId)for(var o=s.arrtKeys.split(","),a=s.arrtVal.split("|")[t.quality-1].split(","),l=0;l<o.length;l++)e.push([parseInt(o[l]),parseInt(a[l])])}return e},u.getInlayListAttr2=function(){var t,e=[];for(var i in u.soulStoneInlayList){var s;if(0!=(t=u.soulStoneInlayList[i]).typeId)for(var n in u.refineSoulStone)if((s=u.refineSoulStone[n]).id==t.typeId)for(var o=s.arrtKeys2.split(","),a=s.arrtVal2.split("|")[t.quality-1].split(","),l=0;l<o.length;l++)e.push([parseInt(o[l]),parseInt(a[l])])}return e},u.getInlayStoneAttrByTypeAndQuality=function(t,e){var i,s=[];for(var n in u.refineSoulStone)if((i=u.refineSoulStone[n]).id==t)for(var o=i.arrtKeys.split(","),a=i.arrtVal.split("|")[e-1].split(","),l=[],r="",h=0;h<o.length;h++){switch(parseInt(o[h])){case 11:r="生命",l.push(r);break;case 49:r="攻击",l.push(r);break;case 13:r="物防",l.push(r);break;case 14:r="法防",l.push(r)}s.push([l[h],parseInt(a[h])])}return s},u.getInlayStoneAttr2ByTypeAndQuality=function(t,e){var i,s=[];for(var n in u.refineSoulStone)if((i=u.refineSoulStone[n]).id==t)for(var o=i.arrtKeys2.split(","),a=i.arrtVal2.split("|")[e-1].split(","),l=[],r="",h=0;h<o.length;h++){switch(parseInt(o[h])){case 11:r="生命",l.push(r);break;case 49:r="攻击",l.push(r);break;case 13:r="物防",l.push(r);break;case 14:r="法防",l.push(r)}s.push([l[h],parseFloat(a[h])])}return s},u.getStonePgByType=function(t){var e;for(var i in u.soulStoneInlayPtkvList)if((e=u.soulStoneInlayPtkvList[i]).type==t){var s=new Object;return s.className="p_goods",s.typeid=e.id,s}return null},u.getStonePtkvByType=function(t){var e;for(var i in u.soulStoneInlayPtkvList)if((e=u.soulStoneInlayPtkvList[i]).type==t)return e;return null},u.initInlayList=function(){if(null==u.soulStoneInlayList){u.soulStoneInlayList=[];for(var t=0;t<6;t++){var e=new Object;e.id=0,e.typeId=0,e.quality=0,e.color=0,e.type=t+1,u.soulStoneInlayList.push(e)}}},u.updateInlayInfo=function(t){var e;if(u.soulStoneInlayList)for(var i in u.soulStoneInlayList){var s;for(var n in e=u.soulStoneInlayList[i],t){var o;if(s=t[n],e.type==s.type)for(var a in e.typeId=s.id,e.quality=s.val,u.refineSoulStone)o=u.refineSoulStone[a],s.id==o.id&&(e.color=o.color)}}},u.getInlayBagObjList=function(){var t,e=[];for(var i in u.goodsList){var s;for(var n in t=u.goodsList[i],u.refineSoulStone)if(s=u.refineSoulStone[n],t.type_id==s.id&&0<t.num){var o=new Object;o.id=t.id,o.typeId=t.type_id,o.quality=t.quality,o.type=s.type,o.color=s.color,e.push(o)}}return e},u.getTheHighestStoneList=function(){u.soulStoneHeighestList=[];for(var t=0;t<6;t++){(s=new Object).id=0,s.typeId=0,s.quality=0,s.color=0,s.type=t+1,u.soulStoneHeighestList.push(s)}var e=u.getInlayBagObjList();if(e)for(var i=0;i<6;i++){var s;for(var n in e)(s=e[n]).type==i+1&&(s.color>u.soulStoneHeighestList[i].color?u.soulStoneHeighestList[i]=s:s.color==u.soulStoneHeighestList[i].color&&s.quality>u.soulStoneHeighestList[i].quality&&(u.soulStoneHeighestList[i]=s))}},u.hasHigherStone=function(){var t;if(u.getTheHighestStoneList(),u.soulStoneHeighestList&&u.soulStoneInlayList)for(var e in u.soulStoneInlayList){var i;for(var s in t=u.soulStoneInlayList[e],u.soulStoneHeighestList)if((i=u.soulStoneHeighestList[s]).type==t.type){if(i.color>t.color)return!0;if(i.color==t.color&&i.quality>t.quality)return!0}}return!1},u.getSoulStoneVOById=function(t){var e;for(var i in u.refineSoulStone)if((e=u.refineSoulStone[i]).id==t)return e;return null},u.getSoulStoneQualityById=function(t){var e;if(u.goodsList)for(var i in u.goodsList)if((e=u.goodsList[i]).id==t)return e.quality;return null},u.getSoulStoenScoreById=function(t){var e,i;if(u.goodsList)for(var s in u.goodsList){var n;if((i=u.goodsList[s]).id==t)for(var o in u.refineSoulStone)if(n=u.refineSoulStone[o],i.type_id==n.id)return e=n.score.split(","),parseInt(e[i.quality-1])}return 0},u.getSoulStoneMixPreview=function(t){var e;for(var i in u.refineSoulStoneMix)if(t>=(e=u.refineSoulStoneMix[i]).minScore&&t<=e.maxScore)return e.Name;return""},u.getSoulStoenQualityById=function(t){var e;if(u.goodsList)for(var i in u.goodsList)if((e=u.goodsList[i]).id==t)return e.quality;return 0},u.getSoulStoneScoreByTypeId=function(t,e){var i;for(var s in u.refineSoulStone){var n;if((i=u.refineSoulStone[s]).id==t)return n=i.score.split(","),parseInt(n[e-1])}return 0},u.getShopExchangeNumById=function(t){var e;for(var i in u.shopExchangeList)if((e=modules.refineSoulPalace.RefineSoulPalaceManager.shopExchangeList[i]).id==t)return e.val;return 0},u.getBagGoodIdByTypeIdAndQuality=function(t,e){var i;for(var s in u.goodsList)if((i=u.goodsList[s]).type_id==t&&i.quality==e)return i.id;return 0},u.checkSupplyRP=function(){var t=!1;if(u.supplyState)for(var e=0;e<4;e++){var i;for(var s in t=!0,u.supplyState)(i=u.supplyState[s]).id==e+1&&0<i.val&&(t=!1);if(1==t)break}1!=t||u.isStoveMaxLv()||u.isSoulStoneInlayMax()?Nt.hide("PR_REFINE_SOUL_PALACE_SUPPLY"):Nt.show("PR_REFINE_SOUL_PALACE_SUPPLY")},u.checkMissionRP=function(){var t=!1;if(u.missionList)for(var e in u.missionList)if(2==u.missionList[e].state){t=!0;break}1!=t||u.isStoveMaxLv()||u.isSoulStoneInlayMax()?Nt.hide("PR_REFINE_SOUL_PALACE_MISSION"):Nt.show("PR_REFINE_SOUL_PALACE_MISSION")},u.checkBagRP=function(){var t,e=!1;if(u.goodsList)for(var i in u.goodsList){if(t=u.goodsList[i],1030==ur.getItem(t.type_id).useType&&0<t.num){e=!0;break}}1==e?Nt.show("PR_REFINE_SOUL_PALACE_BAG"):Nt.hide("PR_REFINE_SOUL_PALACE_BAG")},u.checkStoveRP=function(){var t,e=!1;if(u.soulStoveLv&&u.soulStoveExp)for(var i in u.refineSoulStove)(t=u.refineSoulStove[i]).lv==u.soulStoveLv&&pe.getScore(36)+u.soulStoveExp>t.upConst&&(e=!0);1==e?Nt.show("PR_REFINE_SOUL_PALACE_INJECT"):Nt.hide("PR_REFINE_SOUL_PALACE_INJECT")},u.checkStoneInlayRP=function(){var t,e=!1;if(u.getTheHighestStoneList(),u.soulStoneHeighestList&&u.soulStoneInlayList)for(var i in u.soulStoneHeighestList){var s;for(var n in t=u.soulStoneHeighestList[i],u.soulStoneInlayList)if(s=u.soulStoneInlayList[n],t.type==s.type){if(0==t.typeId)break;if(t.typeId==s.typeId&&(t.quality<s.quality||t.quality==s.quality))break;if(t.color<s.color)break;e=!0}}1==e?(Nt.show("PR_REFINE_SOUL_PALACE_INLAY"),Pr.ins().showOneKeyInlayEff(!0)):(Nt.hide("PR_REFINE_SOUL_PALACE_INLAY"),Pr.ins().showOneKeyInlayEff(!1))},u.checkRefineSoulRP=function(){var t=!1;0<pe.getScore(35)&&(t=!0),1!=t||u.isStoveMaxLv()||u.isSoulStoneInlayMax()?Nt.hide("PR_REFINE_SOUL_PALACE_REFINE"):Nt.show("PR_REFINE_SOUL_PALACE_REFINE")},u.initGridInfo=function(){null==u.mySoulGridInfo&&(u.mySoulGridInfo=u.newGridInfo()),null==u.otherSoulGridInfo&&(u.otherSoulGridInfo=u.newGridInfo())},u.newGridInfo=function(){var t;t=[];for(var e=0;e<7;e++){t[e]=[];for(var i=0;i<7;i++){var s=new Object;s.className="p_immortal_soul";var n=new Object;n.className="p_kv",n.id=i,n.val=e,s.pos=n,s.type=0,s.color=0,s.end_time=0,t[e].push(s)}}return t},u.setGridInfo=function(t){var e;for(var i in u.mySoulGridInfo=u.newGridInfo(),t){var s=(e=t[i]).pos;u.mySoulGridInfo[s.val][s.id]=e}},u.addGodSoulToGridInfo=function(t){var e;for(var i in u.initGridInfo(),t){var s=(e=t[i]).pos;u.mySoulGridInfo[s.val][s.id]=e}},u.deleteGodSoulFromGridInfo=function(t,e){var i;for(var s in u.initGridInfo(),t){i=t[s];var n=[];n.push(i.pos.id,i.pos.val),u.intANullGrid(n,e)}},u.intANullGrid=function(t,e){var i,s=[];if((i=new Object).className="p_immortal_soul",i.color=0,i.end_time=0,i.type=0,(o=new Object).className="p_kv",o.id=t[0],o.val=t[1],i.pos=o,s.push(i),1==e)u.addGodSoulToGridInfo(s);else for(var n in s){var o=(i=s[n]).pos;u.otherSoulGridInfo[o.val][o.id]=i}},u.setOtherGridInfo=function(t){var e;for(var i in u.otherSoulGridInfo=u.newGridInfo(),t){var s=(e=t[i]).pos;u.otherSoulGridInfo[s.val][s.id]=e}},u.updateOtherGridInfo=function(t){var e;for(var i in u.initGridInfo(),t){var s=(e=t[i]).pos;u.otherSoulGridInfo[s.val][s.id]=e}},u.initAshesInfo=function(){null==u.mySoulAshes&&(u.mySoulAshes=u.newAshesInfo()),null==u.otherSoulAshes&&(u.otherSoulAshes=u.newAshesInfo())},u.newAshesInfo=function(){var t;t=[];for(var e=0;e<7;e++){t[e]=[];for(var i=0;i<7;i++){var s=new Object;s.className="p_immortal_soul_drop";var n=new Object;n.className="p_kv",n.id=i,n.val=e,s.pos=n,s.end_time=0,s.type=0,s.color=0,t[e].push(s)}}return t},u.setMySoulAshes=function(t){var e;for(var i in u.mySoulAshes=u.newAshesInfo(),t){var s=(e=t[i]).pos;u.mySoulAshes[s.val][s.id]=e}},u.addSoulAshesToMySoulAshes=function(t){var e;for(var i in u.initAshesInfo(),t){var s=(e=t[i]).pos;u.mySoulAshes[s.val][s.id]=e}},u.setOtherSoulAshes=function(t){var e;for(var i in u.otherSoulAshes=u.newAshesInfo(),t){var s=(e=t[i]).pos;u.otherSoulAshes[s.val][s.id]=e}},u.updateOtherSoulAshes=function(t){var e;for(var i in u.initAshesInfo(),t){var s=(e=t[i]).pos;u.otherSoulAshes[s.val][s.id]=e}},u.deleteSoulAshesFromAshesInfo=function(t,e){var i;for(var s in u.initAshesInfo(),t){i=t[s];var n=[];n.push(i.pos.id,i.pos.val),u.intANullAshes(n,e)}},u.intANullAshes=function(t,e){var i,s=[];if((i=new Object).className="p_immortal_soul_drop",i.end_time=0,(o=new Object).className="p_kv",o.id=t[0],o.val=t[1],i.pos=o,s.push(i),1==e)u.addSoulAshesToMySoulAshes(s);else for(var n in s){var o=(i=s[n]).pos;u.otherSoulAshes[o.val][o.id]=i}},u.removeRefineSoulFromGridInfo=function(t){u.initGridInfo(),u.mySoulGridInfo[t.val][t.id].type=0,u.mySoulGridInfo[t.val][t.id].color=0,u.mySoulGridInfo[t.val][t.id].end_time=0},u.intInfoToMissionList=function(t){var e;for(var i in t){var s;for(var n in e=t[i],u.missionList)s=modules.refineSoulPalace.RefineSoulPalaceManager.missionList[n],e.id==s.id&&(s.state=e.state,s.process=e.process)}},u.initXML=function(){if(!u._refineSoulMission){u._refineSoulMission=[],u._refineSoulIncident=[],u._refineSoulShop=[],u._refineSoulItem=[],u._refineSoulEquation=[],u._refineSoulStove=[],u._refineSoulStone=[],u._refineSoulStoneMix=[];var t,e=Ra.startEncode("refineSoulPalace.xml");for(var i in e)(t=e[i])instanceof xml.RefineSoulMissionVO?u._refineSoulMission.push(t):t instanceof xml.RefineSoulIncidentVO?u._refineSoulIncident.push(t):t instanceof xml.RefineSoulShopVO?u._refineSoulShop.push(t):t instanceof xml.RefineSoulItemVO?u._refineSoulItem.push(t):t instanceof xml.RefineSoulEquationVO?u._refineSoulEquation.push(t):t instanceof xml.RefineSoulStoveVO?u._refineSoulStove.push(t):t instanceof xml.RefineSoulStoneVO?u._refineSoulStone.push(t):t instanceof xml.RefineSoulStoneMixVO&&u._refineSoulStoneMix.push(t)}},u.isStoveMaxLv=function(){return u._maxStoveLv||(u.initXML(),u._maxStoveLv=u.refineSoulStove.length-1),u._maxStoveLv<=u.soulStoveLv},u.isSoulStoneInlayMax=function(){var t,e=!0;for(var i in u.soulStoneInlayList){if(t=u.soulStoneInlayList[i],u.getSoulStoneScoreByTypeId(t.typeId,t.quality)<u.refineSoulStoneMaxScore){e=!1;break}}return e},u.mixSpEquationId=0,u.specialGridId=0,u.specialEventId=0,u.supplyState=null,u.mySoulGridInfo=null,u.mySoulAshes=null,u.otherSoulGridInfo=null,u.otherSoulAshes=null,u.noticeList=[],u.curRoleId=0,u.selectGridIndex=null,u.rankList=null,u.friendList=null,u.goodsList=null,u.shopExchangeList=null,u.soulStoveExp=0,u.soulStoveLv=0,u.tempSoulInfo=null,u.missionList=null,u.soulStoneInlayList=null,u.soulStoneInlayPtkvList=null,u.newSoulStone=null,u.soulStoneHeighestList=null,u.isHadGuide=0,u._refineSoulMission=null,u._refineSoulIncident=null,u._refineSoulShop=null,u._refineSoulItem=null,u._refineSoulEquation=null,u._refineSoulStove=null,u._refineSoulStone=null,u._refineSoulStoneMix=null,u._maxStoveLv=0,u._stoneMaxScore=0,u}()),ia=function(){function e(){}return w(e,"modules.result.ResultMgr"),e.show=function(t){if(t)switch(t.result){case 2:ua.isCopyZhuXianRoad(t.mapID)?((e.zhuXianResultView=e.zhuXianResultView||new DF).data=t,e.zhuXianResultView.popup()):((e.winPanel=e.winPanel||Aa.getIns(46e3,"ResultWinPanel")).data=t,e.winPanel.popup());break;case 1:(e.failPanel=e.failPanel||Aa.getIns(46e3,"ResultFailPanel")).data=t,e.failPanel.popup()}},e.closePanel=function(){e.winPanel&&e.winPanel.isPopup&&e.winPanel.close(),e.failPanel&&e.failPanel.isPopup&&e.failPanel.close()},e.winPanel=null,e.failPanel=null,e.zhuXianResultView=null,e}(),sa=function(){function t(){this.result=0,this.mapID=0,this.goods=null,this.leftBtnLabel="领取奖励",this.leftBtnFun=null,this.leftFunParm=null,this.leftFunCaller=null,this.showRight=!1,this.rightBtnLabel="离开副本",this.rightBtnFun=null,this.rightFunParm=null,this.rightFunCaller=null,this.timeOutFun=null,this.timeOutParm=null,this.timeOutCaller=null,this.closeFun=null,this.closeParm=null,this.closeCaller=null,this.countDown=6,this.msgTitle="",this.titleY=296,this.msgCon="",this.ignoreMap=!1,this.failTxtArr=null,this.failLinkArr=null,this.rankChangeType=-1,this.msgBottom="",this.goodsMsg="",this.countDownPosType=1}return w(t,"modules.result.ResultVO"),t}(),na=function(){function t(){}return w(t,"modules.role.RoleConst"),t.isSpeEquip=function(t){return 11<=t&&t<=14},_(t,["equipPos",function(){return this.equipPos=[{x:0,y:0,pos:1},{x:570,y:0,pos:2},{x:0,y:138,pos:3},{x:570,y:138,pos:4},{x:0,y:276,pos:5},{x:570,y:276,pos:6},{x:0,y:414,pos:7},{x:570,y:414,pos:8},{x:0,y:552,pos:11},{x:115,y:552,pos:12},{x:455,y:552,pos:13},{x:570,y:552,pos:14}]},"categoryItemPos",function(){return this.categoryItemPos=[{x:234,y:270,scale:1,zor:3},{x:461,y:171,scale:.85,zor:2},{x:279,y:80,scale:.7,zor:1},{x:57,y:171,scale:.85,zor:2}]},"spcPutwhere",function(){return this.spcPutwhere=[7]},"spcPutwhereNum",function(){return this.spcPutwhereNum=[2]},"LEGEND_CHIP_ARR",function(){return this.LEGEND_CHIP_ARR=[10201175,10201372,10201209,10201370]},"LEGEND_ACT_ARR",function(){return this.LEGEND_ACT_ARR=[30061601,30062601,30063601,30064601]},"DOMIN_CHIP_ARR",function(){return this.DOMIN_CHIP_ARR=[10201218,10201219,10201220,10201221]},"DOMIN_CORE_ARR",function(){return this.DOMIN_CORE_ARR=[10201222,10201223,10201224,10201225]}]),t}(),oa=function(){function f(){}return w(f,"modules.role.RoleManager"),I(1,f,"fashionTarDic",function(){return f._fashionTarDic||f.initFashionTarVO(),f._fashionTarDic}),I(1,f,"tarDic",function(){return f._tarDic||f.initFashionTarVO(),f._tarDic}),I(1,f,"fashionShowVO",function(){return f._fashionShowVO||f.initFashionTarVO(),f._fashionShowVO}),I(1,f,"palFashionSuit",function(){return f._palFashionSuit},function(t){f._palFashionSuit=t}),f.getExchangeVOById=function(t){if(f.exchangeInfos){var e;for(var i in f.exchangeInfos)if((e=f.exchangeInfos[i]).id==t)return e;return null}return null},f.updateExchangeInfo=function(t){var e,i,s=!1;for(var n in f.exchangeInfos)if((e=f.exchangeInfos[n]).id==t.scheme){e.val+=t.num,s=!0;break}0==s&&((i=new Object).className="p_kv",i.id=t.scheme,i.val=t.num,(f.exchangeInfos=f.exchangeInfos||[]).push(i))},f.getRoleOtherSimpleInfo=function(t){return f.roleSimpleInfo?f.roleSimpleInfo[t]:null},f.updateRoleOtherSimpleInfo=function(t){t&&((f.roleSimpleInfo=f.roleSimpleInfo||{})[t.role_id]=t)},f.handlerFunctionInfo=function(t){f.functionArr=t.function_open},f.handlerFunctionOpen=function(t){f.functionArr&&(f.functionArr.indexOf(t.id)<0&&f.functionArr.push(t.id))},f.checkFunctionIsOpen=function(t){return!f.functionArr||0<=f.functionArr.indexOf(t)},f.getCanChangeEquips=function(){var t=xo.getEquipData(),e=pe.getPalByIndex(f.curActorIndex);if(t&&e)for(var i,s,n,o=xo.getTypeToPowerInPackDic(e.ext.category),a=[],l=0,r=0,h=0,u=q.ALLPUTSINBODY,c=0;c<u.length;c++){var d,p;for(var m in r=u[c],h=q.PUT2TYPEMAP[r],n=null,e.equip)if((d=e.equip[m]).pos==r){n=d;break}(i=o.get(h))&&0<i.length&&(n?(s=ur.getItem(n.type_id),l=W.getAddExtraPower(n.extra_attr)+s.basePow,i[0].power>l&&((p=new Object).className="p_kv",p.id=i[0].goodID,p.val=r,a.push(p),i.shift())):((p=new Object).className="p_kv",p.id=i[0].goodID,p.val=r,a.push(p),i.shift()))}return a},f.getNowEquip=function(t,e){var i,s=pe.getPal(t);for(var n in s.equip)if((i=s.equip[n]).pos==e)return i;return null},f.updateSpEquipTOC=function(t,e){var i,s=pe.getPal(t);for(var n in s.spec_equips)if((i=s.spec_equips[n]).id==e)return void++i.lv},f.getSpEquipP=function(t,e){var i,s=pe.getPalByIndex(t);for(var n in s.spec_equips)if((i=s.spec_equips[n]).id==e)return i;return null},f.updateSpEquipStageLv=function(t,e){var i,s=pe.getPal(t);for(var n in s.spec_equips)if((i=s.spec_equips[n]).id==e)return void(i.stage_lv=100*Math.floor(i.lv/100))},f.getSpEquipNowLv=function(t,e){var i,s=pe.getPal(t);if(s)for(var n in s.spec_equips)if((i=s.spec_equips[n]).id==e)return i.lv;return 0},f.getAllBuildSoulNum=function(){var t,e=0;for(var i in pe.pals){t=pe.pals[i];for(var s=0;s<8;s++){var n;for(var o in t.spec_equips)if((n=t.spec_equips[o]).id==21+s&&1<=n.lv){e++;break}}}return e},f.getOraVO=function(t,e){if(f.vocaDic||(f.vocaDic=Ra.startEncode("equipOrange.xml","id")),f.vocaDic&&f.vocaDic.hasOwnProperty(t+"")){var i=f.vocaDic[t];if(i.OrasTypeDic.hasOwnProperty(e+""))return i.OrasTypeDic[e]}return null},f.getOraLVvoByTypeID=function(t,e,i){if(f.vocaDic||(f.vocaDic=Ra.startEncode("equipOrange.xml","id")),f.vocaDic){var s=f.vocaDic[t];if(s&&s.OrasTypeDic){var n,o=s.OrasTypeDic[e];if(o)for(var a in o.OrasTypeLvArr)if((n=o.OrasTypeLvArr[a]).isRight(i))return n}}return null},f.getWingXMLVO=function(t){return f.wingsDic||(f.wingsDic=Ra.startEncode("wing.xml","lv")),f.wingsDic.hasOwnProperty(t+"")?f.wingsDic[t]:null},f.getSplitXMLVO=function(){return f.splitVO||(f.splitVO=Ra.startEncode("split.xml")[0]),f.splitVO},f.handlerWingInfoVO=function(t){(f.tocDic=f.tocDic||new Object)[t.pal_id-1]=t,xo.checkHasBetterWingEquipCanEquip(t)?Nt.show("RP_WING_EQUIP"):Nt.hide("RP_WING_EQUIP")},f.handlerWingUpgrade=function(t){if(f.tocDic&&f.tocDic.hasOwnProperty(t.pal_id-1+"")){var e=f.tocDic[t.pal_id-1];if(4!=t.op_type)if(e.level!=t.level)Jt.addTip("进阶成功");else if(e.star!=t.star)Jt.addTip("升星成功");else{for(var i=0,s=0,n=0,o=e.level;o<=t.level;o++){s=o==e.level?e.star:0,n=o==t.level?t.star:f.getWingXMLVO(o).starNum;for(var a=s;a<=n;a++)i+=(a==n?t.exp:f.getWingXMLVO(o).WingStarDic[a].exp)-(a==s?e.exp:0)}Jt.addTip("羽翼经验 +"+i)}else 4==t.op_type&&Jt.addTip("进阶成功");e.level=t.level,e.star=t.star,e.exp=t.exp,xo.checkHasBetterWingEquipCanEquip(e)&&Nt.show("RP_WING_EQUIP")}},f.handlerSplitInfoVO=function(t){(f.splitDic=f.splitDic||new Object)[t.pal_id-1]=t},f.handlerSplitUpgrade=function(t){if(f.splitDic&&f.splitDic.hasOwnProperty(t.pal_id-1+"")){var e=f.splitDic[t.pal_id-1];e.level=t.level,e.step=t.step}},f.handlerRegrowInfo=function(t){f.regrowToc=t,f.checkRegrowRedPoint()},f.checkRegrowRedPoint=function(){if(!(pe.myLevel<100)&&null!=f.regrowToc)if(modules.role.RoleManager.getRegrowLvVO(f.regrowToc.regrow_lv+1)){for(var t,e=100<pe.myLevel,i=!0,s=f.getRegrowGoodsArr(),n=1;n<s.length;n++){var o=s[n];if(0<xo.getGoodsNumByType(xo.GOODS_ID,o.id)){i=!0;break}i=!1}for(var a in f.regrowToc.buy)if(1==(t=f.regrowToc.buy[a]).id)e=e&&0<5-t.val;else if(s[t.id-1]){var l=s[t.id-1];if(1==(i=i&&0<l.num-t.val))break}else i=!1;e||i?Nt.show("RP_REGROW"):Nt.hide("RP_REGROW")}else Nt.hide("RP_REGROW")},f.checkSplitRedPoint=function(){f.splitRP=!1;for(var t=0;t<pe.pals.length;t++){var e=modules.role.RoleManager.getSplitTOCVO(t);if(!e)return;var i=modules.role.RoleManager.getSplitXMLVO();i.stepNum,e.step;if(i.stepNum>e.step){if(i.levelNum==e.level)return void Nt.show("RP_SPLIT");var s=xo.getGoodsNumByType(xo.GOODS_ID,10201122),n=xo.getGoodsNumByType(xo.GOODS_ID,10201160);if(0<s||10<=n)return void Nt.show("RP_SPLIT")}}f.splitRP?Nt.show("RP_SPLIT"):Nt.hide("RP_SPLIT")},f.handlerRegrowUp=function(t){f.regrowToc&&(f.regrowToc.regrow_lv=t.regrow_lv)},f.handlerRegrowBuy=function(t){f.regrowToc&&(f.regrowToc.buy=t.buy,f.checkRegrowRedPoint())},f.handerWingEquipLoad=function(t){if(f.tocDic&&f.tocDic.hasOwnProperty(t.pal_id-1+"")){var e,i,s,n=f.tocDic[t.pal_id-1],o=!1,a=0;for(var l in t.update_equip){i=t.update_equip[l],o=!1,a=n.equips.length;for(var r=0;r<a;r++)if(e=n.equips[r],i.pos==e.pos){o=!0,n.equips[r]=i;break}o||n.equips.push(i)}for(var h in f.tocDic){s=f.tocDic[h];var u=f.tocDic[s];if(null!=u&&"m_role_wing_info_toc"==u.className&&xo.checkHasBetterWingEquipCanEquip(f.tocDic[s]))return void Nt.show("RP_WING_EQUIP")}Nt.hide("RP_WING_EQUIP")}},f.getWingTOCVO=function(t){return f.tocDic&&f.tocDic.hasOwnProperty(t+"")?f.tocDic[t]:null},f.getSplitTOCVO=function(t){return f.splitDic&&f.splitDic.hasOwnProperty(t+"")?f.splitDic[t]:null},f.getRegrowTOCVO=function(){return f.regrowToc?f.regrowToc:null},f.getRegrowLvVO=function(t){return f.regrowVO||(f.regrowVO=Ra.startEncode("regrow.xml")[0]),f.regrowVO&&f.regrowVO.RegrowLvDic.hasOwnProperty(t+"")?f.regrowVO.RegrowLvDic[t]:null},f.getRegrowChangeVO=function(t){return f.regrowVO||(f.regrowVO=Ra.startEncode("regrow.xml")[0]),f.regrowVO&&f.regrowVO.RegrowChangeDic.hasOwnProperty(t+"")?f.regrowVO.RegrowChangeDic[t]:null},f.getRegrowGoodsArr=function(){return f.regrowVO||(f.regrowVO=Ra.startEncode("regrow.xml")[0]),f.regrowVO&&f.regrowVO.RegrowGoodsItemArr?f.regrowVO.RegrowGoodsItemArr:null},f.getFashionIsActByID=function(t){if(!f.fashionInfoDic)return 0;var e=0,i=ur.getFahionGoodsByGoodsId(t);for(var s in f.fashionInfoDic){var n=f.fashionInfoDic[s].fashion_list;for(var o in n)n[o].fashion_id==i&&e++}return e},f.handlerFashionInfo=function(t){(f.fashionInfoDic=f.fashionInfoDic||new Object)[t.pal_id]=t,(f.fashionListDic=f.fashionListDic||new Object)[t.pal_id]=new Object;var e,i=f.fashionListDic[t.pal_id];for(var s in t.fashion_list)i[(e=t.fashion_list[s]).fashion_id]=e},f.getFashionInfoByActID=function(t){return f.fashionInfoDic&&f.fashionInfoDic.hasOwnProperty(t+"")?f.fashionInfoDic[t]:null},f.getFashionListDicByActID=function(t){return f.fashionListDic&&f.fashionInfoDic.hasOwnProperty(t+"")?f.fashionListDic[t]:null},f.getFashionTimesByTypeID=function(t){f.initFashionXml();var e,i,s=[],n=[],o=parseInt(ur.getItem(t).img),a=f.getFashionType(o);for(var l in f.fashionVODic[a].FashionItemArr)if((i=f.fashionVODic[a].FashionItemArr[l]).id==o){if((e=i.times).indexOf(",")<0)return parseInt(e);s=i.need.split(","),n=i.times.split(",");var r=s.indexOf(t+"");if(0<r)return n[r]}return-1},f.handlerFashionUpdate=function(t){if(f.fashionInfoDic&&f.fashionInfoDic.hasOwnProperty(t.pal_id+"")){var e,i=f.getFashionListDicByActID(t.pal_id),s=f.fashionInfoDic[t.pal_id],n=s.fashion_list.length,o=0;for(var a in t.fashion)switch(e=t.fashion[a],t.op_type){case 1:case 2:var l=!1;for(o=0;o<n;o++)if(s.fashion_list[o].fashion_id==e.fashion_id){l=!0;break}l?s.fashion_list[o]=e:s.fashion_list.push(e),i[e.fashion_id]=e;break;case 3:var r=s.fashion_id.indexOf(e.fashion_id);for(0<=r&&s.fashion_id.splice(r,1),o=0;o<n;o++)if(s.fashion_list[o].fashion_id==e.fashion_id){s.fashion_list.splice(o,1),i[e.fashion_id]=null,delete i[e.fashion_id];break}}}},f.handlerFashionChange=function(t){if(f.fashionInfoDic&&f.fashionInfoDic.hasOwnProperty(t.pal_id+"")){var e=f.fashionInfoDic[t.pal_id];if(0<t.take_id)0<=(a=e.fashion_id.indexOf(t.take_id))&&e.fashion_id.splice(a,1);else for(var i=1;i<4;i++){var s=modules.role.RoleManager.getFashionDic(i);if(s&&s.hasOwnProperty(t.wear_id+"")){for(var n=e.fashion_id.length-1;0<=n;n--){var o=e.fashion_id[n];s.hasOwnProperty(o+"")&&e.fashion_id.splice(n,1)}break}}if(0<t.wear_id){var a=e.fashion_id.indexOf(t.wear_id);a<0&&e.fashion_id.push(t.wear_id)}}},f.initFashionXml=function(){f.fashionVODic||(f.fashionVODic=Ra.startEncode("fashion.xml","type"))},f.getFashionDic=function(t){return f.initFashionXml(),f.fashionVODic.hasOwnProperty(t+"")?f.fashionVODic[t].FashionItemDic:null},f.getFashionType=function(t){f.initFashionXml();for(var e=1;e<=3;e++)if(f.fashionVODic[e].FashionItemDic.hasOwnProperty(t+""))return e;return-1},f.getFashionArr=function(t){if(f.initFashionXml(),f.resArr=f.resArr||[],f.suitResArr=f.suitResArr||[],f.fashionVODic.hasOwnProperty(t+"")){f.resArr[t]=f.resArr[t]||[],f.suitResArr[t]=f.suitResArr[t]||[];var e,i=f.fashionVODic[t].FashionItemArr;for(var s in i)(e=i[s]).showT<=ya.serverTime&&f.resArr[t].indexOf(e)<0&&f.resArr[t].push(e),f.suitResArr[t].indexOf(e)<0&&f.suitResArr[t].push(e)}return f.resArr[t]},f.getFashionItemByTypeAndId=function(t,e){if(t<=0)return null;f.suitResArr&&f.suitResArr[t]||f.getFashionArr(t);var i,s,n=f.suitResArr[t];for(var o in n)if((s=n[o]).id==e){i=s;break}return i},f.getNextTimeOut=function(){f.initFashionXml();var t=99999999;for(var e in f.fashionVODic){var i,s=f.fashionVODic[e].FashionItemArr;for(var n in s)(i=s[n]).showT>ya.serverTime&&(t=Math.min(i.showT,t))}return t},f.getRoleOpenVO=function(t){return f.roleOpenVODic||(f.roleOpenVODic=Ra.startEncode("role.xml","id")),f.roleOpenVODic.hasOwnProperty(t+"")?f.roleOpenVODic[t]:null},f.getItemOpen=function(t){var e=modules.role.RoleManager.getRoleOpenVO(t+1);return!!e&&!!(pe.checkLevel(e.regrow,e.lv)||Ia.curLv>=e.vip)},f.initFashionTarVO=function(){f._fashionTarDic=new Object,f._tarDic=new Object;var t,e=Ra.startEncode("fashionTar.xml");for(var i in e)if((t=e[i])instanceof xml.FashionTarVO){var s=Math.floor(t.goalId/1e3);f._fashionTarDic.hasOwnProperty(s+"")||(f._fashionTarDic[s]=[]),f._fashionTarDic[s].push(t)}else t instanceof xml.TarVO?f._tarDic[t.id]=t:t instanceof xml.FashionShowVO&&(f._fashionShowVO=t)},f.handlerFashionGoalInfo=function(t){var e;for(var i in f.goalDic=f.goalDic||new Object,t.goal_info)e=t.goal_info[i],f.goalDic[e.id]=e.val},f.handlerFashionGoalAct=function(t){(f.goalDic=f.goalDic||new Object)[t.pal_id]=t.goal_id},f.getGoal=function(t){return t=pe.roleID+1,f.goalDic&&f.goalDic.hasOwnProperty(t+"")?f.goalDic[t]:0},f.handlerAdvanceInfo=function(t){var e;if(null==f.advArr)f.advArr=t.advance;else for(var i in t.advance){e=t.advance[i],f.advArr.indexOf(e)<0&&f.advArr.push(e)}},f.handlerAdvanceOpen=function(t){f.advArr?f.advArr.indexOf(t.id)<0&&f.advArr.push(t.id):f.advArr=[t.id]},f.checkAdvIsOpen=function(t){return!!f.advArr&&0<=f.advArr.indexOf(t)},f.getChaoTicInfo=function(t){return f.chaoticDic&&f.chaoticDic.hasOwnProperty(t+"")?f.chaoticDic[t]:null},f.handlerChaoTicInfo=function(t){f.chaoticDic=f.chaoticDic||new Object;var e,i=pe.pals;for(var s in i){e=i[s];for(var n=!1,o=0;o<t.chaotic_equip.length;o++)if(t.chaotic_equip[o].pal_id==e.pal_id){n=!0,f.chaoticDic[e.pal_id]=t.chaotic_equip[o];break}n||(f.chaoticDic[e.pal_id]=null)}},f.getNowRedEquip=function(t,e){var i,s=f.getChaoTicInfo(t);if(s&&s.equips)for(var n in s.equips)if((i=s.equips[n]).id==e)return i;return null},f.getRedEquipVO=function(t,e){if(null==f.equipRedDic&&(f.equipRedDic=Ra.startEncode("equipRed.xml","id")),f.equipRedDic&&f.equipRedDic.hasOwnProperty(t+"")){var i=f.equipRedDic[t];if(e<=i.RedtypeLvArr.length)return i.RedtypeLvArr[e-1]}return null},f.handlerChaoTicUpgrade=function(t){var e=f.getChaoTicInfo(t.pal_id);if(e&&e.equips)for(var i=0;i<e.equips.length;i++)if(e.equips[i].id==t.type_id){e.equips[i].val=t.level;break}},f.checkIsCanChange=function(t){var e=pe.getPalByIndex(t),i=modules.role.RoleManager.getFashionInfoByActID(e.pal_id);if(i&&i.fashion_list){var s,n=f.fashionShowVO.getWeapons();for(var o in n){s=n[o];var a,l=!1;for(var r in i.fashion_list)if(a=i.fashion_list[r],s.id==a.fashion_id){l=!0;break}if(!l)return!0}}return!1},f.handlerChaoTicLoad=function(t){var e=f.getChaoTicInfo(t.pal_id);if(e&&e.equips){for(var i=0;i<e.equips.length;i++)if(e.equips[i].id==t.type_id)return void(e.equips[i].val=1);e.equips=e.equips||[];var s=new Object;s.className="p_kv",s.id=t.type_id,s.val=1,e.equips.push(s)}},f.getSuitVoArr=function(){return f.suitVOArr||(f.suitVOArr=Ra.startEncode("suit.xml")),f.suitVOArr},f.getSuitInfoBySuitId=function(t){var e;for(var i in f.getSuitVoArr(),f.suitVOArr)if((e=f.suitVOArr[i]).suitID==t)return e;return null},f.getSuitNameBySuitID=function(t){var e="",i=f.getSuitInfoBySuitId(t);return i&&(e=i.suitName),e},f.geSuitIsActive=function(t,e){var i,s=!1;for(var n in f.palFashionSuit)if(t==(i=f.palFashionSuit[n]).pal_id){var o;for(var a in i.suits)if((o=i.suits[a]).suit_id==e){s=o.is_activated;break}break}return s},f.getSuitEffTotel=function(t){var e,i={name:["攻    击：","生    命：","物    防：","法    防：","暴    击：","韧    性：","伤害加成：","伤害减免："],attyArr:[0,0,0,0,0,0,0,0]};for(var s in f.palFashionSuit)if((e=f.palFashionSuit[s]).pal_id==t){var n,o=e.suits;for(var a in o)if(0!=(n=o[a]).is_activated){var l=f.getSuitInfoBySuitId(n.suit_id);if(l){var r,h=l.getEffNums();for(var u in h){var c=(r=h[u]).id-1,d=r.val;8!=c&&(i.attyArr[c]+=d)}}}}return i},f.getSuitTotalPower=function(t){var e=0,i=f.getSuitEffTotel(t);if(i){var s,n=i.attyArr,o=0;for(var a in n)s=n[a],e+=0==o?4*s:1==o?.15*s:2==o?2.5*s:3==o?2.5*s:s,o++}else e=0;return e},f.updateRoleSuitInfo=function(t,e){var i;if(f.palFashionSuit&&0<f.palFashionSuit.length)for(var s in f.palFashionSuit)if((i=f.palFashionSuit[s]).pal_id==t){var n,o=i.suits;for(var a in o)if((n=o[a]).suit_id==e){n.is_activated=!0;break}break}},f.initRoleSuitInfo=function(){for(var t=f.getSuitVoArr(),e=[],i=0;i<4;i++){var s=pe.getPalByIndex(i);if(s){var n,o=s.pal_id,a=new Object;for(var l in a.className="p_pal_fashion_suit",a.pal_id=o,a.suits=[],t){n=t[l];var r=new Object;r.className="p_fashion_suit",r.suit_id=n.suitID,r.is_activated=!1,a.suits.push(r)}e.push(a)}}f.palFashionSuit=e},f.updateRoleSuitInfoByPpfs=function(t,e){for(var i in f.palFashionSuit){var s;if(f.palFashionSuit[i].pal_id==t)for(var n in e)s=e[n],f.updateRoleSuitInfo(t,s.suit_id)}},f.checkSuitRedPoint=function(){f.getSuitVoArr();for(var t=0;t<4;t++){var e=pe.getPalByIndex(t);if(e){var i=modules.role.RoleManager.getFashionInfoByActID(e.pal_id);if(!i)continue;var s,n=i.fashion_list;if(!n)continue;for(var o in f.suitVOArr)if(!((s=f.suitVOArr[o]).suitID<=-1)){for(var a=s.getSuitPartArr(),l=0,r=0,h=a.length;r<h;r++){var u=a[r],c=u.id;if(u.val<4)for(var d in n)n[d].fashion_id==c&&l++;else va.isHas(c)&&l++}if(s.count<=l&&0==f.geSuitIsActive(e.pal_id,s.suitID)&&f.palFashionSuit&&0<f.palFashionSuit.length)return Nt.show("RP_SUIT_CAN_ACTIVI_ROLE_"+t),!0;Nt.hide("RP_SUIT_CAN_ACTIVI_ROLE_"+t)}}}return!1},f.getSuitActivi=function(t,e){var i=!1,s=f.getSuitInfoBySuitId(e);if(s){var n=modules.role.RoleManager.getFashionInfoByActID(t);if(!n)return i;var o=n.fashion_list;if(!o)return i;for(var a=s.getSuitPartArr(),l=0,r=0,h=a.length;r<h;r++){var u=a[r],c=u.id;if(u.val<4)for(var d in o)o[d].fashion_id==c&&l++;else va.isHas(c)&&l++}s.count<=l&&0==f.geSuitIsActive(t,s.suitID)&&(i=!0)}return i},f.getFashionByActSuit=function(t){var e,i=0;if(!modules.role.RoleManager.getFashionInfoByActID(t))return i;for(var s in f.palFashionSuit){var n;if(t==(e=f.palFashionSuit[s]).pal_id)for(var o in e.suits)if((n=e.suits[o]).is_activated){var a=f.getSuitInfoBySuitId(n.suit_id);a&&(i+=a.getSuitFashionNum())}}return i},f.getSuitFashionToPower=function(t){return 5*f.getFashionByActSuit(t)},f.isLvMax=function(t){for(var e=0;e<4;e++){if(modules.role.RoleManager.getSpEquipP(e,t).lv<sn.getSpEquipVO(t).level)return!1}return!0},f.isWingMax=function(){for(var t=0,e=0;e<4;e++)if(pe.getPalByIndex(e)){var i=f.getWingTOCVO(e);i&&20<=i.level&&10<=i.star&&t++}return 4<=t},f.isSplitMax=function(){for(var t=0,e=0;e<4;e++)if(pe.getPalByIndex(e)){var i=f.getSplitTOCVO(e);i&&400<=i.step&&4<=i.level&&t++}return 4<=t},f.curActorIndex=0,f.roleSimpleInfo=null,f.exchangeInfos=null,f._palFashionSuit=[],f.functionArr=null,f.vocaDic=null,f.wingsDic=null,f.splitVO=null,f.tocDic=null,f.splitDic=null,f.regrowToc=null,f.splitRP=!1,f.regrowVO=null,f.fashionInfoDic=null,f.fashionListDic=null,f.fashionVODic=null,f.fashionSex=1,f.fashionCoa=1,f.fashionTarSex=1,f.fashionTarCoa=1,f.resArr=null,f.suitResArr=null,f.roleOpenVODic=null,f._fashionTarDic=null,f._tarDic=null,f._fashionShowVO=null,f.goalDic=null,f.advArr=null,f.chaoticDic=null,f.equipRedDic=null,f.suitVOArr=null,f}(),aa=function(){function t(){this.type=0,this.step=0,this.nowLvFun=null,this.nowCaller=null}return w(t,"modules.role.view.SpequipDataVO"),t}(),la=(function(){function t(){}w(t,"modules.roleSet.RoleSetConst")}(),function(){function l(){}w(l,"modules.roleSet.RoleSetMgr"),I(1,l,"cityDic",function(){return l._cityDic||(l._cityDic=Ra.startEncode("roleCity.xml","tag")),l._cityDic}),l.getCityVO=function(t){var e=[];if(t&&""!=t)for(var i in l.cityDic){var s,n=l.cityDic[i].allCitys;if(0<n.length)for(var o in n){for(var a in s=n[o])if(0==s[a].indexOf(t)){e.indexOf(s[0])<0&&e.push(s[0]);break}}}return e},l.getMyCity=function(t){for(var e in l.cityDic){var i,s=l.cityDic[e].allCitys;if(0<s.length)for(var n in s)if(i=s[n],0<=t.indexOf(i[0]))return i[0]}return""},l._cityDic=null}(),function(){function n(){}return w(n,"modules.roleSet.RoleSetSelfMgr"),I(1,n,"avatarFrameList",function(){return n._avatarFrameList=n._avatarFrameList||[]}),I(1,n,"bubbleList",function(){return n._bubbleList=n._bubbleList||[]}),n.getCurAvatarFrameId=function(){return n._curAvatarFrameId},n.setAvatarFrameInfo=function(t,e){n._curAvatarFrameId=t,n._avatarFrameList=e},n.addAvatarFrame=function(t){n._avatarFrameList=n.avatarFrameList.concat(t),n._frameNews=(n._frameNews=n._frameNews||[]).concat(t)},n.checkFrameRedPoint=function(){n._frameNews&&0<n._frameNews.length?Nt.show("RP_ROLE_SET_SELF_FRAME"):Nt.hide("RP_ROLE_SET_SELF_FRAME")},n.removeFrameNewById=function(t){if(n._frameNews)for(var e=0;e<n._frameNews.length;e++){if(n._frameNews[e].id==t){n._frameNews.splice(e,1);break}}},n.checkIsNewFrame=function(t){if(n._frameNews)for(var e=0;e<n._frameNews.length;e++){if(n._frameNews[e].id==t)return!0}return!1},n.updateCurAvatarFrameId=function(t){n._curAvatarFrameId=t},n.updateAvatarFrameListByExpire=function(t){var e;for(var i in t){for(var s in e=t[i],n.avatarFrameList)n.avatarFrameList[s]==e.id&&(e.val=0);e.id==n._curAvatarFrameId&&(n._curAvatarFrameId=0)}},n.getFrameById=function(t){var e;for(var i in n._avatarFrameList)if((e=n._avatarFrameList[i]).id==t)return e;return null},n.getFrames=function(){n.initXml();var t=[],e=n._selfFrames[0];t.push(e);var i=n._selfFrames.slice(1,n._selfFrames.length);return t=t.concat(i.sort(n.sortFrames))},n.sortFrames=function(t,e){var i=n.getFrameById(t.id),s=n.getFrameById(e.id);return i&&null==s?-1:null==i&&s?1:0},n.getFrameState=function(t){var e=0;if(n._curAvatarFrameId==t.id)e=1;else if(0==t.id)e=3;else{e=n.getFrameById(t.id)?3:2}return e},n.getCurBubbleId=function(){return n._curBubbleId},n.setBubbleInfo=function(t,e){n._curBubbleId=t,n._bubbleList=e},n.addBubble=function(t){n._bubbleList=n.bubbleList.concat(t),n._bubbleNews=(n._bubbleNews=n._bubbleNews||[]).concat(t)},n.updateCurBubbleId=function(t){n._curBubbleId=t},n.updateBubbleListByExpire=function(t){var e;for(var i in t){for(var s in e=t[i],n.bubbleList)n.bubbleList[s]==e.id&&(e.val=0);e.id==n._curBubbleId&&(n._curBubbleId=0)}},n.getBubbleById=function(t){var e;for(var i in n._bubbleList)if((e=n._bubbleList[i]).id==t)return e;return null},n.getBubbles=function(){n.initXml();var t=[],e=n._selfBubbles[0];t.push(e);var i=n._selfBubbles.slice(1,n._selfBubbles.length);return t=t.concat(i.sort(n.sortBubbles))},n.sortBubbles=function(t,e){var i=n.getBubbleById(t.id),s=n.getBubbleById(e.id);return i&&null==s?-1:null==i&&s?1:0},n.getBubbleState=function(t){var e=0;if(n._curBubbleId==t.id)e=1;else if(0==t.id)e=3;else{e=n.getBubbleById(t.id)?3:2}return e},n.checkBubbleRedPoint=function(){n._bubbleNews&&0<n._bubbleNews.length?Nt.show("RP_ROLE_SET_SELF_BUBBLE"):Nt.hide("RP_ROLE_SET_SELF_BUBBLE")},n.removeBubbleNewById=function(t){if(n._bubbleNews)for(var e=0;e<n._bubbleNews.length;e++){if(n._bubbleNews[e].id==t){n._bubbleNews.splice(e,1);break}}},n.checkIsNewBubble=function(t){if(n._bubbleNews)for(var e=0;e<n._bubbleNews.length;e++){if(n._bubbleNews[e].id==t)return!0}return!1},n.initXml=function(){if(null==n._selfFrames){n._selfFrames=[],n._selfBubbles=[];var t,e=Ra.startEncode("roleSetSelf.xml");for(var i in e)(t=e[i])instanceof xml.RoleSetSelfFrameVO?n._selfFrames.push(t):t instanceof xml.RoleSetSelfBubbleVO&&n._selfBubbles.push(t)}},n.getSelfFrameVOById=function(t){var e;for(var i in n.initXml(),n._selfFrames)if((e=n._selfFrames[i]).id==t)return e;return null},n.getSelfBubbleVOById=function(t){var e;for(var i in n.initXml(),n._selfBubbles)if((e=n._selfBubbles[i]).id==t)return e;return null},n._selfFrames=null,n._selfBubbles=null,n._avatarFrameList=null,n._curAvatarFrameId=0,n._frameNews=null,n._bubbleList=null,n._curBubbleId=0,n._bubbleNews=null,n}()),ra=function(){function t(){}return w(t,"modules.rpMask.RPMaskConst"),t.getSpeEquipModID=function(t){return t},_(t,["DISCOUNT_ALL",function(){return this.DISCOUNT_ALL=[201,202,203,204]}]),t}(),ha=function(){function n(){}return w(n,"modules.rpMask.RpMaskMgr"),n.setMaskInfo=function(t){n.allMaskInfo=t},n.getPInfo=function(t){var e;for(var i in n.allMaskInfo)if((e=n.allMaskInfo[i]).mod_id==t)return e;return null},n.getPActorInfo=function(t,e){var i;if(e)for(var s in e.actor_red_points)if((i=e.actor_red_points[s]).actor_id==t)return i;return null},n.updateMaskInfo=function(t,e){if(e){n.allMaskInfo=n.allMaskInfo||[];var i=n.getPInfo(t),s=n.getPActorInfo(e.actor_id,i);i?s?s.red_points=e.red_points:(i.actor_red_points=i.actor_red_points||[],i.actor_red_points.push(e)):((i=new Object).className="p_hidden_red_point",i.mod_id=t,i.actor_red_points=[],i.actor_red_points.push(e),n.allMaskInfo.push(i))}},n.getMaskInfo=function(t,e){return n.tempPRP=n.getPInfo(t),(n.tempPActor=n.getPActorInfo(e,n.tempPRP))&&n.tempPActor.red_points?n.tempPActor.red_points[0]:0},n.checkIsPing=function(t,e,i){return n.tempPpal=pe.getPalByIndex(e),0<((n.tempMaskNum=modules.rpMask.RpMaskMgr.getMaskInfo(t,n.tempPpal?n.tempPpal.pal_id:0))&Math.pow(2,i))},n.checkIsPing2=function(t,e,i){return 0<((n.tempMaskNum=modules.rpMask.RpMaskMgr.getMaskInfo(t,e))&Math.pow(2,i))},n.init=function(){if(!n.mainVO){var t,e=Ra.startEncode("rpMask.xml");for(var i in n.bagChbVOs=new P,n.commonModVOs={},e)(t=e[i])instanceof xml.RpMaskMainVO?n.mainVO=t:t instanceof xml.RpmBagChbVO?n.bagChbVOs.set(t.id,t):t instanceof xml.RpMaskModVO&&(n.commonModVOs[t.modID]=t)}},n.getPackChbIDs=function(){return n.init(),n.mainVO?n.mainVO.bagChbIDs:[]},n.getBagChbVO=function(t){return n.init(),n.bagChbVOs?n.bagChbVOs.get(t):null},n.getModVO=function(t){return n.init(),n.commonModVOs[t]},n.checkGoodMask=function(t){var e;for(var i in n.init(),n.bagChbVOs.values)if((e=n.bagChbVOs.values[i]).isBelong(t)){if(modules.rpMask.RpMaskMgr.checkIsPing2(1,pe.roleID,e.index))return!0;break}return!1},n.allMaskInfo=null,n.tempPActor=null,n.tempPRP=null,n.tempPpal=null,n.tempMaskNum=0,n.mainVO=null,n.bagChbVOs=null,n.commonModVOs=null,n}(),ua=function(){function i(){}return w(i,"modules.scene.others.MapIDConst"),I(1,i,"isBeachMap",function(){return 26100==ca.mapID}),i.isTeamCopyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),10801==t},i.isLoveCopyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),10901==t},i.ispBaiLingYuanMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),10105==t},i.isPlaysCityFightMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),24005==t},i.isGodHoodFightMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.GODHOOD_FIGHT_MAP[0]&&t<=i.GODHOOD_FIGHT_MAP[1]},i.isPlaysBeachMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),26100==t},i.isGodHoodForbiddenMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.GODHOOD_COPY_FORBIDDEN_MAP[0]&&t<=i.GODHOOD_COPY_FORBIDDEN_MAP[1]},i.isGodHoodStoryMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.GODHOOD_COPY_STORY_MAP[0]&&t<=i.GODHOOD_COPY_STORY_MAP[1]},i.isPlaysBeachBossMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),26e3==t},i.isBiographyCopyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),25e3==t},i.isBiographyBountyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),25001==t},i.isCopyEternalSkyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),10400==t},i.isMainMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.MAIN_MAP_ID[0]&&t<=i.MAIN_MAP_ID[1]},i.isSoloRankingMap=function(t){return void 0===t&&(t=0),30100==(t=0<t?t:ca.mapID)},i.isFamilyCopyMap=function(t){return void 0===t&&(t=0),4e4==(t=0<t?t:ca.mapID)},i.isFamilyFightMap=function(t){return void 0===t&&(t=0),42e3==(t=0<t?t:ca.mapID)},i.isFamilyBossCopy=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.FAMILY_BOSS_RANGE[0]&&t<=i.FAMILY_BOSS_RANGE[1]},i.isRegrowBossMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.REGROW_BOSS_MAP_RANGE[0]&&t<=i.REGROW_BOSS_MAP_RANGE[1]},i.isWorldBossMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.WORLD_BOSS_MAP_RANGE[0]&&t<=i.WORLD_BOSS_MAP_RANGE[1]},i.isMonsterCopyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),22100==t},i.isRoleBossMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.ROLE_BOSS_MAP_RANGE[0]&&t<=i.ROLE_BOSS_MAP_RANGE[1]},i.isCustomMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.CUSTOM_MAP_ID[0]&&t<=i.CUSTOM_MAP_ID[1]},i.isMaterialsMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.MATERIALS_COPY_RANGE[0]&&t<=i.MATERIALS_COPY_RANGE[1]},i.isDreamCopyMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.DREAM_COPY_MAP_RANGE[0]&&t<=i.DREAM_COPY_MAP_RANGE[1]},i.isCallBossMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.CALL_BOSS_MAP_RANGE[0]&&t<=i.CALL_BOSS_MAP_RANGE[1]},i.isPKMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),3e4==t||30100==t||30200==t},i.isBattlefieldOfShuraMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),30300==t},i.isCopyAncientExotic=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),23100==t},i.isCopyStrangeFireCommon=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),11001==t},i.isCopyStrangeFireBOSS=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),11101==t},i.isCopyStrangeFire=function(){return i.isCopyStrangeFireCommon()||i.isCopyStrangeFireBOSS()},i.isCopyTaliman=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.COPY_TALIMAN[0]&&t<=i.COPY_TALIMAN[1]},i.isCopyZhuXianRoad=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t>=i.COPY_ZHUXIAN_ROAD[0]&&t<=i.COPY_ZHUXIAN_ROAD[1]},i.isCopyZhuXianRoadLastMap=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),t==i.COPY_ZHUXIAN_ROAD[1]},i.checkSameCrossOrSameLocal=function(t,e){return!(!i.isCross(t)||!i.isCross(e))||!i.isCross(t)&&!i.isCross(e)},i.isCross=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),i.isCrossMain(t)||i.isCrossTower(t)||i.isCrossTowerBoss(t)},i.isCrossMain=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),7e4==t},i.isCrossTower=function(t){return void 0===t&&(t=0),0==t&&(t=ca.mapID),i.CROSS_TOWERS[0]<=t&&t<=i.CROSS_TOWERS[1]},i.isCrossTowerBoss=function(t){return void 0===t&&(t=0),t=0==t?ca.mapID:t,i.CROSS_TOWERS_BOSS[0]<=t&&t<=i.CROSS_TOWERS_BOSS[1]},i.isJoyStickMap=function(t){return void 0===t&&(t=0),i.isBattlefieldOfShuraMap(t)||i.isCross(t)},_(i,["MAIN_MAP_ID",function(){return this.MAIN_MAP_ID=[1e4,10099]},"FAMILY_BOSS_RANGE",function(){return this.FAMILY_BOSS_RANGE=[41001,41099]},"CUSTOM_MAP_ID",function(){return this.CUSTOM_MAP_ID=[10300,10399]},"MATERIALS_COPY_RANGE",function(){return this.MATERIALS_COPY_RANGE=[10101,10110]},"DREAM_COPY_MAP_RANGE",function(){return this.DREAM_COPY_MAP_RANGE=[10200,10299]},"ROLE_BOSS_MAP_RANGE",function(){return this.ROLE_BOSS_MAP_RANGE=[2e4,20099]},"WORLD_BOSS_MAP_RANGE",function(){return this.WORLD_BOSS_MAP_RANGE=[21e3,21099]},"REGROW_BOSS_MAP_RANGE",function(){return this.REGROW_BOSS_MAP_RANGE=[22e3,22003]},"CALL_BOSS_MAP_RANGE",function(){return this.CALL_BOSS_MAP_RANGE=[23e3,23049]},"GODHOOD_COPY_STORY_MAP",function(){return this.GODHOOD_COPY_STORY_MAP=[10501,10599]},"GODHOOD_COPY_FORBIDDEN_MAP",function(){return this.GODHOOD_COPY_FORBIDDEN_MAP=[10701,10710]},"GODHOOD_FIGHT_MAP",function(){return this.GODHOOD_FIGHT_MAP=[10601,10605]},"COPY_TALIMAN",function(){return this.COPY_TALIMAN=[50001,50010]},"CROSS_TOWERS",function(){return this.CROSS_TOWERS=[71001,71010]},"CROSS_TOWERS_BOSS",function(){return this.CROSS_TOWERS_BOSS=[72011,72104]},"COPY_ZHUXIAN_ROAD",function(){return this.COPY_ZHUXIAN_ROAD=[60101,60310]}]),i}(),ca=function(){function h(){}return w(h,"modules.scene.SceneManager"),I(1,h,"mapWidth",function(){return h.mapData.width}),I(1,h,"mapTransfers",function(){return h.transfers}),I(1,h,"mapID",function(){return h.mapData.mapID}),I(1,h,"mapHeight",function(){return h.mapData.height}),h.setMapData=function(t){var e,i,s;for(var n in h.mapData=t,h.city=Ce.getCityVO(t.mapID),h.npcs=[],t.elements)4==(e=t.elements[n]).itemType&&h.npcs.push(e);if(h.city)for(var o in h.visualTurns=[],h.city.linkMaps)s=h.city.linkMaps[o],(i=new wt).tar_Map=s.mapid,i.tx=s.pt.x,i.ty=s.pt.z,h.visualTurns.push(i)},h.getTouchTranID=function(t){var e;if(h.mapData&&t)for(var i in h.mapData.transfers)if((e=h.mapData.transfers[i]).tx==t.x&&e.ty==t.z)return e.id;return-1},h.getTouchTranMap=function(t){var e;if(h.mapData&&t)for(var i in h.mapData.transfers)if((e=h.mapData.transfers[i]).tx==t.x&&e.ty==t.z)return e.tar_Map;return 0},h.getTranPtByMinDistance=function(t){if(!t||!h.mapData)return null;var e,i,s=99999;for(var n in h.mapData.transfers)if(!(0<(i=h.mapData.transfers[n]).id)){var o=new Rt(i.tx,i.ty),a=Rt.distance(t,o);a<s&&(s=a,e=o)}return e},h.getMapNpcVO=function(t){var e;if(h.npcs)for(var i in h.npcs)if((e=h.npcs[i]).id==t)return e;return null},h.resetMap=function(){for(var t,e,i,s,n,o,a=h.npcs?h.npcs.length:0,l=0;l<a;l++)t=h.npcs[l],e=be.getNpcVO(t.id),(i=kt.getItemByClass("NPC",Uh)).reset(e),s=Ot.txtzToPoint(t.tx,t.ty),i.x=s.x,i.y=s.y,_e.addUnit(i);for(var r in h.transfers=[],h.visualTurns)o=h.visualTurns[r],(n=kt.getItemByClass("MapTransfer",uh)).vo=o,n.seeable=!0,_e.mid.addChild(n),h.transfers.push(n)},h.updateTransferName=function(t){if(!(t.length<=0||h.transfers.length<=0))for(var e=0,i=h.transfers.length;e<i;e++){var s=h.transfers[e];if(s.vo){var n=Ot.xyToPt(s.x,s.y),o=modules.scene.SceneManager.getTouchTranID(n);if(ua.isCrossTowerBoss())s.setTransferNameByStr(t[e]);else if(0<o)s.setTransferNameByStr(t[o]);else{var a=modules.scene.SceneManager.getTouchTranMap(n);0<a&&s.setTransferNameByStr(Ce.getCityName(a))}}}},h.getCell=function(t,e){var i=0;return h.mapData&&0<=t&&t<h.mapData.tileRow&&0<=e&&e<h.mapData.tileCol&&(i=h.mapData.tiles[t][e]),i},h.hasCell=function(t,e){if(h.mapData&&0<=t&&t<h.mapData.tileRow&&0<=e&&e<h.mapData.tileCol){var i=h.mapData.tiles[t][e];return g.isExist(i)}return!1},h.mapData=null,h.city=null,h.lastMap=NaN,h.npcs=null,h.visualTurns=null,h.curLine=NaN,h.transfers=null,h}(),da=(function(){function t(){}w(t,"modules.shop.ShopConst"),I(1,t,"shopTabLabels",function(){return G.isReviewVersion?t.REVIEW_SHOP_TAB_ITEM_LABELS:t.SHOP_TAB_ITEM_LABELS}),_(t,["SHOP_TAB_ITEM_LABELS",function(){return this.SHOP_TAB_ITEM_LABELS=["神秘商店","礼券商店","道具商店","修为商店","灵石商店","战场商店","测试商店"]},"REVIEW_SHOP_TAB_ITEM_LABELS",function(){return this.REVIEW_SHOP_TAB_ITEM_LABELS=["神秘商店","礼券商店","道具商店","修为商店","灵石商店"]},"SHOP_NEET_HIDE_TAB",function(){return this.SHOP_NEET_HIDE_TAB=[6]},"REVIEW_NOT_SHOW_SHOP_TYPE",function(){return this.REVIEW_NOT_SHOW_SHOP_TYPE=[5]}])}(),function(){function o(){this.getWayType=null,this.getWayGoods=null}return w(o,"modules.shop.ShopManager"),I(1,o,"curShopID",function(){return o.getShopListById(o.curTabIndex+1)?parseInt(o.getShopListById(o.curTabIndex+1).shopID):0}),I(1,o,"mysteryGoods",function(){return o._mysteryGoods},function(t){(o._mysteryGoods=t)&&o._mysteryGoods.sort(o.sortMystery)}),o.sortMystery=function(t,e){return t.id<e.id?-1:t.id>e.id?1:0},o.updateMysteryGoods=function(t){for(var e=0;e<o.mysteryGoods.length;e++)if(o.mysteryGoods[e].id==t)return void o.mysteryGoods.splice(e,1)},o.initXml=function(){null==o.shops&&(o.shops=Ra.startEncode("shop.xml","id"))},o.getShopListById=function(t){return o.initXml(),o.shops[t]},o.getShopTypeItemVO=function(t,e){o.initXml();var i,s=o.getShopListById(t);for(var n in s.ShopTypeItemArr)if((i=s.ShopTypeItemArr[n]).id==e)return i;return null},o.shops=null,o.curTabIndex=0,o.curMysteryItemBuyID=0,o._mysteryGoods=null,o.reflashTime=0,o}()),pa=(function(){function t(){}w(t,"modules.skill.book.SkillBookConst"),_(t,["BOOK_ITEM_POS",function(){return this.BOOK_ITEM_POS=[[325,272],[490,325],[539,480],[494,632],[323,677],[159,632],[101,480],[152,325],[323,480]]},"COMPOSE_ITEM_POS",function(){return this.COMPOSE_ITEM_POS=[[60,152],[183,152],[306,152]]}])}(),function(){function l(){}return w(l,"modules.skill.book.SkillBookMgr"),l.setBookInfo=function(t){t&&(l.infoDic=l.infoDic||{},l.openNumObj=l.openNumObj||{},l.infoDic[t.pal_id]=t.book_info,l.openNumObj[t.pal_id]=t.open_num)},l.updateBookInfo=function(t,e){if(e){var i=l.getPosBook(t,e.pos);i?i.type_id=e.type_id:l.infoDic&&l.infoDic[t]&&l.infoDic[t].push(e)}},l.getPosBook=function(t,e){var i;if(l.infoDic)for(var s in l.infoDic[t])if((i=l.infoDic[t][s]).pos==e)return i;return null},l.getCurPosBook=function(){return l.getPosBook(fa.curPalID,l.curItemPos)},l.isLearned=function(t,e){var i=l.getBookVO(e);if(l.infoDic&&i){var s,n=i.type;for(var o in l.infoDic[t])if(s=l.infoDic[t][o],(i=l.getBookVO(s.type_id))&&i.type==n)return!0}return!1},l.getBookInfo=function(t,e){var i;if(l.infoDic&&l.infoDic[t])for(var s in l.infoDic[t])if((i=l.infoDic[t][s]).pos==e)return i;return null},l.getOpenNum=function(t){return(l.openNumObj=l.openNumObj||{})[t]},l.init=function(){if(!l.has){l.has=!0,l.cfgBookDic=new P,l.cfgTipDic={},l.cfgComposeDic={};var t,e=Ra.startEncode("skillBook.xml");for(var i in e)(t=e[i])instanceof xml.SkillBookVO?l.cfgBookDic.set(t.id,t):t instanceof xml.SkillBookTipVO?l.cfgTipDic[t.openNum]=t.tip:t instanceof xml.SkillBookComposeVO&&(l.cfgComposeDic[t.color]=t.tip)}},l.getBookVO=function(t){return l.init(),l.cfgBookDic.get(t)},l.getAllBookVOs=function(){return l.init(),l.cfgBookDic.values},l.getComposeTip=function(t){return l.init(),l.cfgComposeDic[t]},l.getTip=function(t){return l.init(),l.cfgTipDic[t]},l.checkBookFit=function(t,e){return t.type!=e.type?!l.isLearned(fa.curPalID,e.id):e.color>t.color},l.checkSkillBookRPAll=function(){for(var t=0;t<pe.pals.length;t++){if(1==l.checkSkillBookRP(t))return!0}return!1},l.checkSkillBookRP=function(t){var e=pe.getPalByIndex(t);if(null==e)return!1;var i=xo.getGoodsByType(110);if(null!=i&&0<i.length)for(var s=0;s<i.length;s++){var n=modules.skill.book.SkillBookMgr.getBookVO(i[s].typeid);if(null==n)return EF.show("缺少技能id为"+i[s].typeid+"的配置"),!1;if(1==l.checkBookLearnAble(e.pal_id,n))return!0}return!1},l.checkBookLearnAble=function(t,e){if(l.infoDic){var i,s=0;for(var n in l.infoDic[t])if(i=l.infoDic[t][n],s=l.getBookVO(i.type_id).type,e.type==s)return e.color>l.getBookVO(i.type_id).color;var o=l.getOpenNum(t),a=l.infoDic[t];if(null==a||o>a.length)return!0}return!1},l.getSkillBookID=function(){return 10201195},l.curItemPos=0,l.isCompose=!1,l.composeReward=null,l.infoDic=null,l.openNumObj=null,l.has=!1,l.cfgBookDic=null,l.cfgTipDic=null,l.cfgComposeDic=null,l}()),ma=function(){function t(){}return w(t,"modules.skill.SkillConst"),t.needWord=function(t,e,i,s){switch(t){case 30000011:return"zhongdu";case 30000012:return"zhuoshang";case 30000013:return"leiji";case 30000014:case 30000006:case 30000007:return"bingdong"}return 3==s?"petFight":e?"shangbi":i?"xishou":null},_(t,["ROLES_SKILL_BOOKS",function(){return this.ROLES_SKILL_BOOKS=[12000002,12000003,12000004,12000005,12000006,12000007,12000008,12000009,12000010,12000011,12000012,12000013,12000014,12000015,12000016,12000017,12000018,12000019,12000020,12000021]}]),t}(),fa=function(){function u(){}return w(u,"modules.skill.SkillManager"),I(1,u,"curPalID",function(){return pe.getPalByIndex(u.curHeadIndex).pal_id}),u.getSkill=function(t){return null==u.allSkill&&(u.allSkill=Ra.startEncode("skill.xml","id")),u.allSkill[t]},u.getFightVO=function(t){return null==u.allFight&&(u.allFight=Ra.startEncode("fight.xml","id")),u.allFight[t]},u.getSteps=function(t){if(null==u.allStep){var e=Ra.startEncode("skillStep.xml");u.allStep=new Object;for(var i=0;i<e.length;i++){var s=e[i],n=u.allStep[s.id];null==n&&(n=[],u.allStep[s.id]=n),n.push(s)}}return u.allStep[t]},u.getStepVO=function(t,e){if(null==u.allStep){var i=Ra.startEncode("skillStep.xml");u.allStep=new Object;for(var s=0;s<i.length;s++){var n=i[s],o=u.allStep[n.id];null==o&&(o=[],u.allStep[n.id]=o),o.push(n)}}var a=u.allStep[t];if(null!=a)for(var l=0;l<a.length;l++){var r=a[l];if(r.step==e)return r}return null},u.getOrderArray=function(t){return null==u.fightOrder&&((u.fightOrder=new Object)[1]=[10100003,10100002,10100005,10100004,10100001],u.fightOrder[2]=[10200005,10200003,10200001],u.fightOrder[3]=[10300003,10300005,10300004,10300002,10300001],u.fightOrder[4]=[10400005,10400004,10400002,10400003,10400001]),u.fightOrder[t]},u.updateSkill=function(t){var e=pe.getPal(t.pal_id);if(null!=e){for(var i=e.skills,s=0;s<t.skills.length;s++){var n=t.skills[s],o=u.indexOf(n,i);-1==o?i.push(n):i[o]=n}i.sort(u.sortSkill)}},u.updateStep=function(t){var e=pe.getPal(t.pal_id);if(null!=e){for(var i=e.skills,s=0;s<i.length;s++){var n=i[s];n.skill_id==t.skill_id&&(n.skill_step=t.skill_step)}i.sort(u.sortSkill)}},u.indexOf=function(t,e){for(var i=0;i<e.length;i++)if(t.skill_id==e[i].skill_id)return i;return-1},u.sortSkill=function(t,e){return t.skill_id<e.skill_id?-1:t.skill_id>e.skill_id?1:0},u.getBuff=function(t){return null==u.allBuff&&(u.allBuff=Ra.startEncode("skillBuff.xml","bit")),u.allBuff[t]},u.getExistSkill=function(t,e){for(var i,s=0;s<t.skills.length;s++)if((i=t.skills[s]).skill_id==e)return i;return null},u.getLastTs=function(t,e){if(null!=u.cdObj[e])return u.cdObj[e];var i=pe.getPal(t);if(null!=i)for(var s=0;s<i.skills.length;s++){var n=i.skills[s];if(n.skill_id==e)return u.cdObj[e]=n.last_ts,n.last_ts}return 0},u.updateCD=function(t){u.cdObj[t]=S.now()},u.resetCD=function(){for(var t in u.cdObj)u.cdObj[t]=0},u.getFightSkill=function(t,e){var i=pe.getPal(t);if(null!=i)for(var s,n=u.getOrderArray(e),o=NaN,a=S.now(),l=0;l<n.length;l++)if(o=n[l],null!=(s=u.getExistSkill(i,o))&&(0<s.skill_step?u.getStepVO(s.skill_id,s.skill_step).cd:u.getSkill(s.skill_id).cd)<=a-u.getLastTs(t,s.skill_id))return o;return 0},u.checkSkillLevelRPAll=function(){for(var t=0;t<pe.pals.length;t++){if(1==u.checkSkillLevelRP(t))return!0}return!1},u.checkSkillLevelRP=function(t){var e=pe.getPalByIndex(t);if(null==e)return!1;var i=e.skills;if(null==i)return!1;for(var s=0;s<i.length;s++){var n=i[s];if(!(n.skill_lv<100&&n.skill_lv>=pe.myLevel)&&!(100<=n.skill_lv&&n.skill_lv>=10*pe.user.attr.regrow+100)){var o=u.getSkill(n.skill_id);if(null!=o){var a=o.moneyStep*(n.skill_lv+1)+o.money;if(pe.silver>=a)return!0}}}return!1},u.checkSkillStepRPAll=function(){for(var t=0;t<pe.pals.length;t++){if(1==u.checkSkillStepRP(t))return!0}return!1},u.checkSkillStepRP=function(t){var e=pe.getPalByIndex(t);if(null==e)return!1;var i=e.skills;if(null==i)return!1;for(var s=xo.getGoodsNumByTypeID(12000001),n=0;n<i.length;n++){var o=i[n];if(!(5<=o.skill_step)){var a=modules.skill.SkillManager.getStepVO(o.skill_id,o.skill_step+1);if(null!=a)if(xo.getGoodsNumByTypeID(a.book)>=a.bookNum||30<=s)return!0}}return!1},u.chekSkillStepRPBySkill=function(t){if(null==t)return!1;if(5<=t.skill_step)return!1;var e=modules.skill.SkillManager.getStepVO(t.skill_id,t.skill_step+1);if(null!=e){var i=xo.getGoodsNumByTypeID(12000001);if(xo.getGoodsNumByTypeID(e.book)>=e.bookNum||30<=i)return!0}return!1},u.isMaxStep=function(t){var e;if(12e6==t||12000001==t){for(var i=0,s=0;s<4;s++)if(e=pe.getPalByIndex(s))for(var n=0;n<e.skills.length;n++)for(var o=u.getStepVO(e.skills[n].skill_id,1),a=0;a<ma.ROLES_SKILL_BOOKS.length;a++)o&&o.book==ma.ROLES_SKILL_BOOKS[a]&&5<=e.skills[n].skill_step&&i++;return 20<=i}for(var l=0;l<4;l++)if(e=pe.getPalByIndex(l))for(var r=0;r<e.skills.length;r++){var h=u.getStepVO(e.skills[r].skill_id,1);if(h&&h.book==t&&5<=e.skills[r].skill_step)return!0}return!1},u.isAllMaxStep=function(){for(var t,e=0;e<4;e++)if(t=pe.getPalByIndex(e))for(var i=0;i<t.skills.length;i++){if(5<=t.skills[i].skill_step)return!0}return!1},u.curHeadIndex=0,u.allSkill=null,u.allFight=null,u.allStep=null,u.allBuff=null,u.fightOrder=null,_(u,["cdObj",function(){return this.cdObj=new Object}]),u}(),_a=function(){function t(){}return w(t,"modules.spcBuy.SpcBuyMgr"),t.init=function(){t._has||(t._has=!0,t.data=Ra.startEncode("spcBuy.xml","pfID"))},t.getSpcBuyVO=function(){return t.init(),t.data?t.data[G.pf]:null},t._has=!1,t.data=null,t}(),ga=(function(){function t(){}w(t,"modules.story.StoryConst")}(),function(){function r(){}return w(r,"modules.story.StoryManager"),I(1,r,"storyHook",function(){return r._storyHook},function(t){r._storyHook=t}),r.initXml=function(){r.storys||(r.storys=Ra.startEncode("story.xml"))},r.getStroyVOs=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),r.initXml();var s,n=[];for(var o in e=0<e?e:ca.mapID,r.storys)t!=(s=r.storys[o]).type||e!=s.mapId||0!=s.targetId&&s.targetId!=i||n.push(s);if(-1<r._storyHook){var a=!1;for(o in n)if((s=n[o]).hook==r._storyHook){a=!0;break}}if(a)for(var l=n.length-1;0<=l;l--)(s=n[l]).hook!=r._storyHook&&n.splice(l,1);return n},r.checkIsNeedShowStory=function(t,e,i){var s;for(var n in void 0===e&&(e=0),void 0===i&&(i=0),r.initXml(),e=0<e?e:ca.mapID,r.storys)if(t==(s=r.storys[n]).type&&e==s.mapId&&(0==s.targetId||s.targetId==i))return!0;return!1},r.curStoryType=0,r.storys=null,r._storyHook=-1,r}()),ya=function(){function n(){}return w(n,"modules.system.SystemManager"),n.getFunOpen=function(t){if(null==n.sysInfo)return!1;for(var e=0;e<n.sysInfo.length;e++)if(n.sysInfo[e].id==t)return 1==n.sysInfo[e].val;return!0},n.isOpenShare=function(t,e){if(!n.pfBanList)return!1;var i;for(var s in n.pfBanList)if((i=n.pfBanList[s]).id==t&&i.val==e)return!1;return!0},n.getChargeOpen=function(){return null!=n.sysInfo&&("4399"==G.pf||"xianlai"==G.pf||(yt.isWX&&S.onIOS?0!=G.isWxPaySwitch:n.getFunOpen(101)))},n.serverTime=0,n.serverTimeMs=0,n.sysInfo=null,n.coldTime=18e4,n.pfBanList=null,n}(),va=(function(){function t(){}w(t,"modules.title.TitleConst"),_(t,["TITLE_ALL_ATTR_KEYS",function(){return this.TITLE_ALL_ATTR_KEYS=[[49,11,13,14,37,38],[47,48,45,46,43,44,39,40]]}])}(),function(){function h(){}return w(h,"modules.title.TitleMgr"),h.setData=function(t){h.titleData=t},h.getTitleLimit=function(t){var e;for(var i in h.titleData)if((e=h.titleData[i]).id==t)return e.val;return 0},h.isHas=function(t){var e;for(var i in h.titleData)if((e=h.titleData[i]).id==t&&(0<=e.val-ya.serverTime||0==e.val))return!0;return!1},h.getHasTitlePower=function(){var t;h.init();var e,i=0;for(var s in h.titleData)if(0<=(e=h.titleData[s]).val-ya.serverTime||0==e.val){var n;for(var o in t=h.getAttrs(e.id))n=t[o],i+=W.getAttrPower(n.id,n.val);i+=h.getSpcPower(e.id)}return Math.floor(i)},h.getHasTitleNum=function(){var t,e=0;for(var i in h.titleData)(0<=(t=h.titleData[i]).val-ya.serverTime||0==t.val)&&(e+=1);return e},h.getNOHasTitleNum=function(){return h.init(),h.cfgData.length-h.getHasTitleNum()},h.deleteNewTitle=function(t){if(null!=h.newTitles){var e=h.newTitles.indexOf(t);-1!=e&&h.newTitles.splice(e,1)}},h.init=function(){if(!h.has){h.has=!0,h.attrDic={},h.spcPower={};var t,e=Ra.startEncode("title.xml");if(Bt.isFanTi){var i,s=0;for(var n in e){-1<(i=e[n]).platform.split("|").indexOf("ft")&&(10904007==i.id&&(i.name=Bt.isFanTi?"戀戀仙蹤真好玩":"恋恋仙踪真好玩"),h.cfgData[s]=i,s++)}}else{var o,a=0;for(var l in e){-1<(o=e[l]).platform.split("|").indexOf("tx")&&(h.cfgData[a]=o,a++)}}for(var r in h.cfgData)t=h.cfgData[r],h.attrDic[t.id]=W.parseAttrToPArr(t.attr,",","|"),h.spcPower[t.id]=h.parseSpcPower(t.attr)}},h.parseSpcPower=function(t){for(var e=t.split(","),i=0;i<e.length;i++){var s=e[i].split("|");if(s&&60==parseFloat(s[0]))return parseFloat(s[1])}return 0},h.getAllTitleVOs=function(){return h.init(),h.cfgData},h.getNextTimeOut=function(){h.init();var t,e=99999999;for(var i in h.cfgData)(t=h.cfgData[i]).showT>ya.serverTime&&(e=Math.min(t.showT,e));return e},h.getTitleVO=function(t){var e;for(var i in h.init(),h.cfgData)if((e=h.cfgData[i]).id==t)return e;return null},h.getAttrs=function(t){return h.init(),h.attrDic[t]},h.getHasAttrVal=function(t){if(0<t){h.init();var e,i=new Object;for(var s in i.className="p_kv",i.id=t,i.val=0,h.titleData){var n;if(0<=(e=h.titleData[s]).val-ya.serverTime||0==e.val)for(var o in h.attrDic[e.id])if((n=h.attrDic[e.id][o]).id==t){i.val+=n.val;break}}return i}return null},h.getSpcPower=function(t){return h.init(),h.spcPower[t]},h.getTitleSceneUrl=function(t){var e=h.getTitleVO(t);return e?e._sceneUrl:""},h.curPartner=NaN,h.titleData=null,h.newTitles=null,h.has=!1,h.cfgData=[],h.attrDic=null,h.spcPower=null,h}()),Ia=(function(){function t(){}w(t,"modules.vip.VipConst")}(),function(){function n(){}return w(n,"modules.vip.VipMgr"),I(1,n,"reward",function(){return n._getReward},function(t){n._getReward=t}),I(1,n,"canRewardLv",function(){if(n._getReward)for(var t=1;t<=n.curLv;t++)if(-1==n._getReward.indexOf(t))return t;return 0}),I(1,n,"maxLv",function(){return n.init(),n._maxLv}),n.getPrivilegeUse=function(t){var e;for(var i in n.privilegeUse)if((e=n.privilegeUse[i]).id==t)return e.val;return 0},n.updatePrivilegeUse=function(t,e){var i;for(var s in void 0===e&&(e=1),n.privilegeUse)(i=n.privilegeUse[s]).id==t&&(i.val-=e)},n.addGetReward=function(t){n._getReward&&n._getReward.push(t)},n.isSVIP=function(t){return void 0===t&&(t=0),10<(t=0==t?n.curLv:t)},n.getSVIPLv=function(t){return void 0===t&&(t=0),(t=0==t?n.curLv:t)%10},n.getVIPStr=function(t){return void 0===t&&(t=0),(t=0==t?n.curLv:t)<=10?"VIP"+t:"SVIP"+t%10},n.init=function(){if(!n.has){n.has=!0,n.descDic={},n.rewardDic={},n.vipCfg=[],n._maxLv=0;var t,e=Ra.startEncode("vip.xml");for(var i in e)(t=e[i])instanceof xml.VipVO?(n.descDic[t.lv]=n.analysisDesc(t.desc),n.rewardDic[t.lv]=W.parseAttrToArr(t.rewards,",","|"),n._maxLv=Math.max(t.lv,n._maxLv),n.vipCfg.push(t)):t instanceof xml.VipGuideVO&&(n.guideVO=t)}},n.getGuideGood=function(t){return n.init(),n.guideVO.getGoodID(t)},n.getGuideAttrs=function(){return n.init(),n.guideVO.getAttrArrs()},n.getGuideEquipPower=function(){return n.init(),n.guideVO.power},n.getGuideEffurl=function(){return n.init(),n.guideVO.effurl},n.getVipVO=function(t){var e;for(var i in n.init(),n.vipCfg)if((e=n.vipCfg[i]).lv==t)return e;return null},n.getDescArr=function(t){return n.init(),n.descDic[t]},n.getRewards=function(t){return n.init(),n.rewardDic[t]},n.analysisDesc=function(t){if(""!=t){var e,i,s,n=t.split("\\n"),o=[];for(var a in n){for(var l in s=[],e=n[a].split("$$"))(i=e[l].split("|"))&&s.push(i);o.push(s)}}return o},n.getNextAddMaterialsTime=function(){var t=n.getVipVO(n.curLv);if(t)var e=t.AddMaterialsTime;else e=0;for(var i=n.curLv+1;i<=n.maxLv;i++)if((t=n.getVipVO(i)).AddMaterialsTime>e)return[t.lv,t.AddMaterialsTime-e];return null},n.curLv=0,n.curMoney=0,n._getReward=null,n.privilegeUse=null,n.has=!1,n.vipCfg=null,n.guideVO=null,n.descDic=null,n.rewardDic=null,n._maxLv=0,n}()),wa=function(){function s(){}return w(s,"modules.warn.getWay.GetWayManager"),s.initXml=function(){if(0==s.isInit){s.isInit=!0,s.getWayTypes={},s.goodsGetWay={};var t,e=Ra.startEncode("goodsGetWay.xml");for(var i in e)(t=e[i])instanceof xml.GetWayGoodsVO?s.goodsGetWay[t.id]=t:t instanceof xml.GetWayTypeVO&&(s.getWayTypes[t.id]=t)}},s.getGoodsGetWaysById=function(t){return s.initXml(),s.goodsGetWay[t]},s.getWayTypeById=function(t){return s.initXml(),s.getWayTypes[t]},s.goodsGetWay=null,s.getWayTypes=null,s.isInit=!1,s}(),ba=function(){function e(){}return w(e,"modules.warn.getWay.GetWayUtil"),e.show=function(t){if(e.data=wa.getGoodsGetWaysById(t))switch(e.data.openType){case 1:kF.show(e.data);break;case 2:CF.show(e.data)}},e.show2=function(t){t&&AF.show(t)},e.hide2=function(){AF.hide()},e.data=null,e}(),Sa=(function(){function t(){}w(t,"modules.welfare.fortuneCat.FortuneCatConst"),_(t,["VIP_FORTUNE_TIMES",function(){return this.VIP_FORTUNE_TIMES=[5,10,15,20,25,30,35,40,45,50,55,55,55,55,55]},"EXT_REWARDS",function(){return this.EXT_REWARDS=[[[10201113,1e5],[10201113,1e5],[10201113,1e5]],[[10201113,1e6],[10201113,1e6],[10201113,1e6]],[[10201113,1e7],[10201113,1e7],[10201113,1e7]]]},"REWARD_TIP_POS",function(){return this.REWARD_TIP_POS=[[422,397],[422,257],[422,117]]},"REWARD_TIP_ITEM_POS",function(){return this.REWARD_TIP_ITEM_POS=[[530,375],[530,237],[530,99]]}])}(),function(){function e(){}return w(e,"modules.welfare.fortuneCat.FortuneCatManager"),I(1,e,"infoTimes",function(){return e.infoVO?e.infoVO.times:0}),e.checkRedPoint=function(){if(e.infoVO){for(var t in e.infoVO.reward_info)if(1==e.infoVO.reward_info[t].val)return T.dispatch("ICON_REDPOINT_CHANGE",[103,"RP_ICON_FORTUNECAT",!0]),void T.dispatch("ICON_REDPOINT_CHANGE",[4001,"RP_ICON_FORTUNECAT",!0]);T.dispatch("ICON_REDPOINT_CHANGE",[103,"RP_ICON_FORTUNECAT",!1]),T.dispatch("ICON_REDPOINT_CHANGE",[4001,"RP_ICON_FORTUNECAT",!1])}else T.dispatch("ICON_REDPOINT_CHANGE",[103,"RP_ICON_FORTUNECAT",!1]),T.dispatch("ICON_REDPOINT_CHANGE",[4001,"RP_ICON_FORTUNECAT",!1])},e.infoVO=null,e.isMultiple=0,e}()),xa=function(){function s(){}return w(s,"modules.welfare.gift.WelfareGiftMgr"),s.initXml=function(){if(!s.welfareGiftArr){s.welfareGiftArr=[],s.welfareDesArr=[];var t,e=Ra.startEncode("welfareGift.xml");for(var i in e)(t=e[i])instanceof xml.WelfareGiftVO?s.welfareGiftArr.push(t):t instanceof xml.WelfareDesVO&&s.welfareDesArr.push(t)}},s.getWelfareGiftArrByTabId=function(t){s.initXml();for(var e=[],i=0;i<s.welfareGiftArr.length;i++)s.welfareGiftArr[i].tabId==t&&e.push(s.welfareGiftArr[i]);return e},s.getWelfareGiftTabName=function(){s.initXml();for(var t="",e=0;e<s.welfareDesArr.length;e++){t+=s.welfareDesArr[e].des,e+1!=s.welfareDesArr.length&&(t+=",")}return Bt.isFanTi?"任意充值,充值12仙尊幣,充值30仙尊幣,30天豪禮":t},s.getWelfareGiftRewardByTabId=function(t){var e;s.initXml();for(var i=0;i<s.welfareDesArr.length;i++)if(e=s.welfareDesArr[i],t==i+1)return e;return null},s.handlerInfo=function(t){s._info=t},s.handlerPay=function(t){s._info&&s._info.rewards.indexOf(t.reward_id)<0&&s._info.rewards.push(t.reward_id)},s.getInfo=function(){return s._info},s.getPayDayInfo=function(t){var e;if(void 0===t&&(t=s.nowTabId),s._info)for(var i in s._info.pay_info){if((e=s._info.pay_info[i]).id==t)return e.val;if(4==t&&0==e.id)return e.val}return 0},s.nowTabId=1,s.welfareGiftArr=null,s.welfareDesArr=null,s._info=null,s}(),Ca=function(){function e(){}return w(e,"modules.welfare.montyCard.WelfareMonthCardMgr"),I(1,e,"endTime",function(){return e._endTime},function(t){e._endTime=t}),I(1,e,"lastTime",function(){return e._endTime-ya.serverTime}),e.isHasCard=function(){return e._endTime>ya.serverTime},e._endTime=0,e}(),Pa=function(){function t(){}return w(t,"modules.welfare.notice.WelfareNoticeMgr"),t.curTitle="",t.curNotice="",t.feedBackTimes=NaN,t}(),Ta=function(){function e(){}return w(e,"modules.welfare.weekCard.WelfareWeekCardMgr"),I(1,e,"endTime",function(){return e._endTime},function(t){e._endTime=t}),I(1,e,"lastTime",function(){return e._endTime-ya.serverTime}),I(1,e,"show",function(){return!!(e._endTime<=0&&5<=Zr.ins().count&&e.isCanSwitch)}),e.isHasCard=function(){return e._endTime>ya.serverTime},e._endTime=0,e.isCanSwitch=!0,e}(),ka=function(){function n(){}return w(n,"modules.welfare.WelfareMgr"),I(1,n,"openIconIDs",function(){return n._openIconIDs=n._openIconIDs.filter(function(t){return!(4029==t&&!Ta.isCanSwitch)})}),n.getListIndexByIcon=function(t){return n.openIconIDs?n.openIconIDs.indexOf(t):-1},n.init=function(){if(!n._has){n._has=!0,n.wanbaGifts=[],n.wanbaVipGifts=[],n.wanbaErrUrl={};var t,e=Ra.startEncode("wanbaGift.xml");for(var i in e)(t=e[i])instanceof xml.WanbaGiftVO?n.wanbaGifts.push(t):t instanceof xml.WanbaVipGiftVO?n.wanbaVipGifts.push(t):t instanceof xml.WanbaErrVO&&(n.wanbaErrUrl[t.errorCode]=t.tipUrl)}},n.getWanbaGiftVOS=function(){return n.init(),n.wanbaGifts},n.getWanbaVipGiftVOs=function(){return n.init(),n.wanbaVipGifts},n.getWanbaErrUrl=function(t){return n.init(),n.wanbaErrUrl[t.toString()]?n.wanbaErrUrl[t.toString()]:""},n.checkIconShow=function(t){return 0<=n.openIconIDs.indexOf(t)},n.checkLvShow=function(t){var e=ao.getIconVO(t);return e&&e.openLv<=pe.myLevel},n.checkIconChange=function(){var t,e=!1;for(var i in n.CONTRAL_ICONS){t=n.CONTRAL_ICONS[i];var s=n.openIconIDs.indexOf(t);-1==s?4025==t?n.checkLvShow(t)&&ao.getIconStateShow(t)&&(n.openIconIDs.push(t),e=!0):5001==t?n.checkRemoveAppLoadIcon(t)||(n.openIconIDs.push(t),e=!0):ao.getIconStateShow(t)&&(4018==t&&0==n.isAppLoad||n.openIconIDs.push(t),e=!0):(0==ao.getIconStateShow(t)||5001==t&&1==n.isAppLoad)&&(n.openIconIDs.splice(s,1),e=!0)}return e&&n._openIconIDs.sort(n.sortFun),e},n.checkRemoveAppLoadIcon=function(t){var e=ao.getIconStateShow(t);return!e||e&&n.isAppLoad},n.sortFun=function(t,e){var i=ao.getIconVO(t),s=ao.getIconVO(e);return i&&s&&i.sortID<s.sortID?-1:1},n.initRecoverXml=function(){null==n._configs&&(n._configs=Ra.startEncode("welfareRecover.xml"))},n.getRecoverXmlAllInfo=function(){return n.initRecoverXml(),n._configs=n._configs||[]},n.getConfigVOMapId=function(t){var e;for(var i in n.initRecoverXml(),n._configs)if((e=n._configs[i]).mapID==t)return e;return null},n.updateRecoverVOByMapAndTimes=function(t,e){if(!(n.allRecoverInfo.length<=0))for(var i=0;i<n.allRecoverInfo.length;i++){var s=n.allRecoverInfo[i];if(s.map_id==t){s.replevy_times=e;break}}},n.getOpenIconIds=function(){return G.isReviewVersion?[4018]:Bt.isEyouios()?[4018,4001,4029,4003,4002]:yt.isWX&&"ios"==Bt.os?[4018,4001,4029,4002,4003,4023]:Bt.isKeYi_9991()?[4018,4001,4029,4003]:[4018,4001,4029,4002,4003]},n.getControlIconIds=function(){return G.isReviewVersion?[]:[4006,4007,4008,4009,4011,4013,4015,4016,5001,4019,4020,4021,119,4025,4027,4028,5007]},n.initForeverBuy=function(){if(!n._init){n._init=!0,n._foreverBuy={};var t,e=Ra.startEncode("foreverBuy.xml");for(var i in e)(t=e[i])instanceof xml.ForeverBuyVO&&(n._foreverBuy[t.id]=t)}},n.getForeverVO=function(t){return n.initForeverBuy(),n._foreverBuy.hasOwnProperty(t+"")?n._foreverBuy[t+""]:null},n.getForeverCondition=function(t){var e=n.getForeverVO(t),i=-1;if(e&&e.conditionCreateDay&&0<e.conditionCreateDay){var s=ya.serverTime-pe.user.attr.create_time;s<86400*e.conditionCreateDay&&(i=86400*e.conditionCreateDay-s)}return i},n.HAD_BIND_PHONE=!1,n.setQzoonBGState=0,n.isAppLoad=!1,n.honorVIPToc=null,n.allRecoverInfo=null,n._has=!1,n.wanbaGifts=null,n.wanbaVipGifts=null,n.wanbaErrUrl=null,n._configs=null,n._init=!1,n._foreverBuy=null,_(n,["_openIconIDs",function(){return this._openIconIDs=n.getOpenIconIds()},"CONTRAL_ICONS",function(){return this.CONTRAL_ICONS=n.getControlIconIds()}]),n}(),Aa=function(){function i(){}return w(i,"SubViewMgr"),i.init=function(){i.subLib||(i.subLib=Ra.startEncode("subView.xml","moduleID"))},i.getIns=function(t,e){return i.init(),d.getInstance(i.subLib[t].modulePath+"."+e)},i.getClass=function(t,e){return i.init(),d.getClass(i.subLib[t].modulePath+"."+e)},i.subLib=null,i}(),Ea=function(){function t(){this.blockInfo=null,this.actionType=NaN,this.remainTime=NaN,this.rewardInfo=null,this.blessLevel=NaN,this.blessProp=null}return w(t,"xml.DragonCaveInfoVO"),t}(),Ra=function(){function r(){}return w(r,"xml.XMLUtil"),r.startEncode=function(e,t){var i=de.getFile(e);if(null!=i){try{var s=null==t?r.encodeRetArr(i):r.encodeRetDic(i,t)}catch(t){throw dt.send("解析xml出错：",e),new Error(e+"解析出错")}return de.deleteFile(e),s}return console.log("不存在"+e+"或已被删除"),null},r.encodeRetArr=function(t){var e=[],i=(t.readUTF(),t.readInt());if(0<i)for(var s=0;s<i;s++)e.push(r.encodeXML(t));return e},r.encodeRetDic=function(t,e){var i=new Object,s=(t.readUTF(),t.readInt());if(0<s)for(var n=0;n<s;n++){var o=r.encodeXML(t);i[o[e]]=o}return i},r.encodeXML=function(t){var e=t.readUTF(),i=d.getInstance("xml."+e+"VO");if(i){var s=0,n=i.attrArr;for(s=0;s<n.length;s++){var o=typeof i[n[s]],a=t.readUTF();i[n[s]]="number"==o?Number(a):"boolean"==o?"true"==a:a}var l=t.readInt();if(0<l)for(s=0;s<l;s++)i.addChild(r.encodeXML(t))}return i},r}(),Oa=function(t){function e(){e.__super.call(this)}w(e,"modules.achievement.AchievementModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_achievement_info_toc",this,this.onInfo),this.addSocketListener("m_role_achievement_get_toc",this,this.onGet),this.addSocketListener("m_role_achievement_update_toc",this,this.onUpdate),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo)},i.enterGameToInfo=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_role_achievement_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Ue.setAchievements(t.achievement),this.dispatch("ACHIEVEMENT_DATA_READY")):ce.addTip(t.err_code)},i.toGet=function(t){var e=new Object;e.className="m_role_achievement_get_tos",e.achievement_id=t,this.sendSocketMessage(e)},i.onGet=function(t){0==t.err_code?(Ue.updateAchievementByGet(t.achievement_id),this.dispatch("ACHIEVEMENT_GET")):ce.addTip(t.err_code)},i.onUpdate=function(t){Ue.updateAchievement(t.achievement_id,t.value),this.dispatch("ACHIEVEMENT_UPDATE")},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),La=function(t){function e(){e.__super.call(this)}w(e,"modules.activity.actInvest.ActInvestCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_invest_info_toc",this,this.onRoleInvestInfo),this.addSocketListener("m_role_invest_get_toc",this,this.onRoleInvestGet),this.addSocketListener("m_role_invest_buy_toc",this,this.onRoleInvestBuy),this.addSocketListener("m_role_invest_benifit_toc",this,this.onRoleInvestBenifit),this.addSocketListener("m_role_invest_click_toc",this,this.onRoleInvestClickToday),this.addMessageListener("ENTER_GAME",this,this.toDelay),this.addMessageListener("ROLE_LEVEL_UP",this,this.onRoleLVUP),this.addMessageListener("REGROWLV_UP",this,this.onRoleLVUP)},i.toDelay=function(){_t.setTimeout(this,this.toRoleInvestInfo,null,St.ENTER_DELAY)},i.onRoleLVUP=function(){Ge.checkRedPoint()},i.toRoleInvestBenifit=function(){var t=new Object;t.className="m_role_invest_benifit_tos",this.sendSocketMessage(t)},i.onRoleInvestBenifit=function(t){0<t.err_code?ce.addTip(t.err_code):(Ge.handlerInvestBenifit(t),this.dispatch("UPDATE_INVESTVIEW"))},i.toRoleInvestBuy=function(t){var e=new Object;e.className="m_role_invest_buy_tos",e.type=t,this.sendSocketMessage(e)},i.onRoleInvestBuy=function(t){0<t.err_code?ce.addTip(t.err_code):(Ge.handlerInvestBuy(t),this.dispatch("UPDATE_INVESTVIEW"))},i.toRoleInvestGet=function(t){var e=new Object;e.className="m_role_invest_get_tos",e.id=t,this.sendSocketMessage(e)},i.onRoleInvestGet=function(t){0<t.err_code?ce.addTip(t.err_code):(Ge.handlerInvestGet(t),this.dispatch("UPDATE_INVESTVIEW"))},i.toRoleInvestInfo=function(){var t=new Object;t.className="m_role_invest_info_tos",this.sendSocketMessage(t)},i.onRoleInvestInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Ge.handlerInvestInfo(t),0==t.state?t.attend_start_ts>ya.serverTime?_t.setTimeout(this,this.openInvestIcon,null,1e3*(t.attend_start_ts-ya.serverTime+10)):t.attend_end_ts<ya.serverTime||this.addInvestIcon():1==t.state&&(this.addInvestIcon(),_t.setTimeout(this,this.openInvestIcon,null,1e3*(t.attend_start_ts-ya.serverTime+10))))},i.closeInvestIcon=function(){1==Ge.getInvestInfo().state||(Ge.handlerInvestClose(),We.removeActInfoDict(310,4012),Kr.ins().checkVipGuide())},i.openInvestIcon=function(){Ge.handlerInvestOpen(),this.addInvestIcon()},i.addInvestIcon=function(){var t=new Object;t.className="p_act_brief",t.act_id=0,t.order=9999,t.skin_id=0,t.ugroup=0,t.com_types=[4012],t.order=14,t.ugroup=4012,We.addFixedActInfo(310,t),Ge.checkRedPoint(),Kr.ins().checkVipGuide(),_t.setTimeout(this,this.closeInvestIcon,null,1e3*(Ge.getInvestInfo().attend_end_ts-ya.serverTime))},i.isOpenInvest=function(){var t=Ge.getInvestInfo();return!!t&&(0==t.state?!(t.attend_start_ts>ya.serverTime)&&!(t.attend_end_ts<ya.serverTime):1==t.state)},i.toRoleInvestClickToday=function(t){void 0===t&&(t=0);var e=new Object;e.className="m_role_invest_click_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleInvestClickToday=function(t){0==t.err_code?(Ge.clickedToday=1<=t.now_click,Zl.ins().updateInvestFloatTipShow()):ce.addTip(t.err_code)},I(1,e,"ins",function(){return e.instance=e.instance||new e},com.managers.BaseModule._$SET_ins),e.instance=null,e}(),Da=function(t){function e(){this.mediator=null,this.hr=null,this.hasToinfo=!1,this.sended=[],this.currentIconId=0,this.iconNeedInfo=[1002,1003,1004,123,129],this.constellationID=NaN,this.huxianID=NaN,this.jubaoID=NaN,this.serverLimitBuyID=NaN,this.luckyDayID=0,this.bargainID=0,this._initAct=!1,this.hasBagua=!1,this._luckyUgroup=-1,this.hasCheck=!1,this.userBackData=null,this.lotteryItemArr_Laojun=null,this.previewItemArr_Laojun=null,this.lotteryItemArr_Xiantong=null,this.previewItemArr_Xiantong=null,this.firstOpen=!0,e.__super.call(this)}w(e,"modules.activity.ActivityCommonCase",l);var i=e.prototype;return i.initListeners=function(){Ua.getInstance(),La.ins,Ma.getInstance(),Va.getInstance(),Na.getInstance(),this.mediator=He.getInstance(),this.addMessageListener("OPEN_ACT_SPC_PANEL",this.mediator,this.mediator.openPanelByUgroup),this.addMessageListener("UPDATE_ACT_SPC_PANEL",this.mediator,this.mediator.updateActPanel),this.addMessageListener("CROSS_DAY",We,We.resetToday),this.addMessageListener("CROSS_DAY",this,this.resetSend),this.addMessageListener("ICON_REDPOINT_UPDATE",this.mediator,this.mediator.updateRPByIconID),this.addMessageListener("ICON_NOTICE",this,this.onIconNotice),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagDataChangeRoCheckRP),this.addMessageListener("MONEY_CHANGE",We,We.checkRPByGoldUpdate),this.addMessageListener("ACT_BAGUA_OPEN_AGAIN",this.mediator,this.mediator.openBaguaView),this.addMessageListener("ACT_BAGUA_OPEN_SHARE",this.mediator,this.mediator.openBaguaShareView),this.addMessageListener("SHARE_SUCC",this,this.shareSucc),this.addMessageListener("ACT_WISH_OPEN_SHARE",this.mediator,this.mediator.openWishShareView),this.addMessageListener("SRTBEAST_LIMIT",this.mediator,this.mediator.openStrBeastLimitView),this.addMessageListener("OPEN_FREE_MALL_PANEL",this.mediator,this.mediator.openFreeMallView),this.addMessageListener("SUIT_SHOW",this.mediator,this.mediator.openSuitShowView),this.addMessageListener("ACT_ACTIVITY_ACTID",this,this.onGetActID),this.addMessageListener("BEASTS_BUY",this,this.mediator.openAppointView),this.addMessageListener("DAYLIMIT_BUY",this,this.onDayLimitBuy),this.addMessageListener("ACT_YUNYOUDFS",this.mediator,this.mediator.openJinLiDFSView),this.addMessageListener("JINLIDFS_CLOSE",this.mediator,this.mediator.closeJinLiDFSView),this.addMessageListener("ACT_JUBAO",this.mediator,this.mediator.openJuBaoView),this.addMessageListener("ACT_HUXIAN",this.mediator,this.mediator.openAppointView),this.addMessageListener("ON_ACT_HUXIANVO_UPDATE",this.mediator,this.mediator.loadHuXianView),this.addMessageListener("ON_ACT_HUXIANID1",this.mediator,this.mediator.GetHuXianID1),this.addMessageListener("ON_ACT_HUXIANID2",this.mediator,this.mediator.GetHuXianID2),this.addMessageListener("ACT_BAGUAFURNACE",this.mediator,this.mediator.loadBaguaFurnaceView),this.addMessageListener("ON_ACT_BAGUA_FURNACE_UPDATE",this.mediator,this.mediator.openBaguaFurnaceView),this.addMessageListener("ON_ACT_BAGUA_FURNACE1",this.mediator,this.mediator.GetBaguaFurnaceID1),this.addMessageListener("ON_ACT_BAGUA_FURNACE2",this.mediator,this.mediator.GetBaguaFurnaceID2),this.addMessageListener("ON_ACT_FREE_MALL",this.mediator,this.mediator.getFreeMallActID),this.addMessageListener("ON_ACT_BEAST_BUY",this.mediator,this.mediator.openBeastsBuyView),this.addMessageListener("ON_ACT_BEAST_BUYID",this.mediator,this.mediator.GetBeastBuyID),this.addMessageListener("ACT_CUSTOM_STAND",this.mediator,this.mediator.openCustomStandView),this.addMessageListener("ROLE_ICON_INFO_BACK",this,this.onIconInfoBackUpdate),this.addMessageListener("ACT_USER_BACK_VIEW",this.mediator,this.mediator.openUserBackView),this.addMessageListener("OPEN_FIRST_DAY_CHARGE",this.mediator,this.mediator.openFdChargePanel),this.addMessageListener("ACT_RP_CONTROLLL_VIEW",this.mediator,this.mediator.openRpView),this.addMessageListener("ACT_GOTO_DOUYUZHIBO",this,this.getDouYuRoomId),this.addMessageListener("ON_PAY_SUCC",this,this.toFdChargeInfo),this.addMessageListener("SHOP_GOODS_DISCOUNT",this,this.onBaguaFurnaceLimitInfo),this.addMessageListener("BAGDATA_CHANGE",this,this.mediator.updateBaguaFurnaceView),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.mediator.updateBaguaFurnaceTreasureDialog),this.addMessageListener("OPEN_ACT_SPC_PANEL_BY_ACTID",this.mediator,this.mediator.openPanelByActID),this.addMessageListener("JINLIDFS",this.mediator,this.mediator.updateJinLiDFSView),this.addMessageListener("ACT_YUNYOU",this.mediator,this.mediator.openYunYouView),this.addMessageListener("ACT_YUNYOU_ID",this.mediator,this.mediator.setYunYouID),this.addMessageListener("OPEN_ACT_DIAL_PANEL",this.mediator,this.mediator.openDialPanel),this.addMessageListener("ACT_CHARGE_DIAL",this.mediator,this.mediator.setDialID),this.addMessageListener("BARGAIN",this.mediator,this.mediator.openAppointView),this.addMessageListener("ACT_BARGAIN",this.mediator,this.mediator.openBargainView),this.addMessageListener("SET_BARGAIN_ID",this.mediator,this.mediator.setBargainID),this.addSocketListener("m_role_act_info_toc",this,this.onInfo),this.addSocketListener("m_role_act_detail_toc",this,this.onActDetail),this.addSocketListener("m_role_act_gain_toc",this,this.onGain),this.addSocketListener("m_currency_notify_toc",this,this.onNotify),this.addSocketListener("m_role_act_sign_toc",this,this.onRoleActSign),this.addSocketListener("m_role_act_box_toc",this,this.onRoleActBox),this.addSocketListener("m_role_act_box_log_toc",this,this.onRoleActBoxLog),this.addSocketListener("m_role_act_probably_reward_add_toc",this,this.onWish),this.addSocketListener("m_act_choose_camp_toc",this,this.onActChooseCamp),this.addSocketListener("m_role_come_back_toc",this,this.onUserBack),this.addSocketListener("m_role_come_back_reward_toc",this,this.onUserBackReward),this.addSocketListener("m_barrier_target_get_toc",this,this.onGainRankReward),this.addSocketListener("m_barrier_target_info_toc",this,this.onGainRankInfo),this.addSocketListener("m_role_icon_info_toc",this,this.onFdChargeInfo),this.addSocketListener("m_role_act_furnace_buy_toc",this,this.onBaguaFurnaceBuy),this.addSocketListener("m_role_act_furnace_log_toc",this,this.onBaguaFurnaceLog),this.addSocketListener("m_role_act_lucky_shop_log_toc",this,this.onGetLuckyShopOrder),this.addSocketListener("m_role_act_lucky_shop_toc",this,this.onGetCurrentOrder)},i.getDouYuRoomId=function(){this.hr=this.hr||new J,this.hr.once("complete",this,this.onHttpRequestComplete),this.hr.once("error",this,this.onHttpRequestError);this.hr.send("http://open.douyucdn.cn/api/RoomApi/live/yz?limit=10&offset=0","","get","text")},i.onHttpRequestError=function(t){console.log(t)},i.onHttpRequestComplete=function(t){console.log("斗鱼直播房间信息："),console.log(this.hr.data);var e=JSON.parse(this.hr.data);console.log(e);var i=0;if(e.hasOwnProperty("data")){var s=e.data;s&&(i=this.randRange(0,s.length-1));var n=s[i],o=0;n&&n.hasOwnProperty("room_id")&&(o=n.room_id),this.gotoDouYu(o)}},i.randRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},i.gotoDouYu=function(t){if(S.window.wx){var e="";e=0<t?"pages/room?roomId="+t+"&ct=ljxyx":"pages/home?ct=ljxyx",S.window.wx.navigateToMiniProgram({appId:"wxca1e7ba3fe18ff12",path:e})}},i.onIconInfoBackUpdate=function(t){118==t?this.mediator.openBeastsBuyView(t):120==t&&this.mediator.openDayLimitBuyView(t)},i.onBeastsBuy=function(){T.dispatch("TO_ROLE_ICON_INFO",118)},i.onDayLimitBuy=function(){T.dispatch("TO_ROLE_ICON_INFO",120)},i.shareSucc=function(){this.mediator.closeBaguShareView(),this.mediator.closeWishShareView()},i.onIconNotice=function(){_t.setTimeout(this,this.timeoutToInfo,null,1e3),this.hasToinfo||(this.toFdChargeInfo(),this.hasToinfo=!0)},i.toFdChargeInfo=function(){var t=new Object;t.className="m_role_icon_info_tos",t.icon_id=4026,this.sendSocketMessage(t)},i.onFdChargeInfo=function(t){0==t.err_code?4026==t.icon_id&&We.setFdChargeInfo(t.arg_str):ce.addTip(t.err_code)},i.onBaguaFurnaceLimitInfo=function(t){0==t.err_code?10201749==t.scheme&&(He.getInstance().baguaFurnaceLimitArr=[t.has_buy_num,t.can_buy_num],T.dispatch("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_NUM_UPDATE")):ce.addTip(t.err_code)},i.getCurrentIconId=function(){return this.currentIconId},i.resetSend=function(){this.sended=[]},i.timeoutToInfo=function(){for(var t=310;t<399;t++){var e=ao.getIconVO(t);e&&(1==e.alwayShow||ao.getIconStateShow(t))&&-1==this.sended.indexOf(t)&&(this.toInfo(t),this.sended.push(t),this.currentIconId=t)}var i;for(var s in this.iconNeedInfo){i=this.iconNeedInfo[s];var n=ao.getIconVO(i);n&&(1==n.alwayShow||ao.getIconStateShow(i))&&-1==this.sended.indexOf(i)&&(this.toInfo(i),this.sended.push(i))}},i.onNotify=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.toGain=function(t,e,i){void 0===i&&(i=1);var s=new Object;s.className="m_role_act_gain_tos",s.act_id=t,s.condition_id=e,s.gain_times=i,this.sendSocketMessage(s)},i.toGainRankReward=function(t){var e=new Object;e.className="m_barrier_target_get_tos",e.target_id=t,this.sendSocketMessage(e)},i.toGainRankInfo=function(t){var e=new Object;e.className="m_barrier_target_info_tos",e.target_id=t,this.sendSocketMessage(e)},i.onGetActID=function(t,e){switch(t){case 1:this.constellationID=e,this.huxianID=this.serverLimitBuyID=this.jubaoID=0;break;case 2:this.serverLimitBuyID=e,this.huxianID=this.constellationID=this.jubaoID=0;break;case 3:this.jubaoID=e,this.huxianID=this.constellationID=this.serverLimitBuyID=0;break;case 4:this.huxianID=e,this.constellationID=this.serverLimitBuyID=this.jubaoID=0;break;case 5:this.luckyDayID=e;break;case 6:this.bargainID=e}},i.onGainRankInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(this.dispatch("ACT_CUSTOM_INFO",t),He.getInstance().updateCustomStandView(t.rank_get))},i.onGainRankReward=function(t){0<t.err_code?ce.addTip(t.err_code):He.getInstance().updateCustomStandViewBtn(t.target_id)},i.onGain=function(t){0<t.err_code&&(t.act_id!=this.constellationID&&(this.constellationID||this.serverLimitBuyID?this.dispatch("ACT_CONSTELLATION_CALL_FAIL"):ce.addTip(t.err_code)),this.serverLimitBuyID?(Jt.addTip("全服购买次数为0，无法进行购买"),this.dispatch("ACT_SERVERLIMITBUY_UPDATE")):this.huxianID&&ce.addTip(t.err_code)),t.act_id==this.constellationID&&this.dispatch("ACT_CONSTELLATION_CALL_FAIL"),t.act_id!=this.serverLimitBuyID&&1!=Math.abs(t.act_id-this.serverLimitBuyID)||this.dispatch("ACT_SERVERLIMITBUY_UPDATE"),t.act_id==this.jubaoID&&this.dispatch("ACT_JUBAO_UPDATE"),t.act_id!=this.huxianID&&1!=Math.abs(t.act_id-this.huxianID)||(this.dispatch("ACT_HUXIAN_UPDATE"),this.toActDetail(this.huxianID),this.toActDetail(this.huxianID+1)),t.act_id==this.luckyDayID&&(this.toActDetail(this.luckyDayID),this.dispatch("ACT_LUCKYDAY_UPDATE")),t.act_id==this.bargainID&&(this.toActDetail(this.bargainID),this.dispatch("ACT_BARGAIN_UPDATE")),t.act_id!=He.getInstance().baguaFurnaceLaojunAId&&t.act_id!=He.getInstance().baguaFurnaceXiantongAId||this.dispatch("ON_ACT_BAGUA_FURNACE_UPDATE")},i.toUpdateLucky=function(){this.toActDetail(this.luckyDayID),this.dispatch("ACT_LUCKYDAY_UPDATE")},i.toWish=function(t,e,i){void 0===i&&(i=1);var s=new Object;s.className="m_role_act_probably_reward_add_tos",s.act_id=t,s.add_times=i,s.prize_id=e,this.sendSocketMessage(s)},i.onWish=function(t){0<t.err_code?ce.addTip(t.err_code):this.dispatch("ACT_CONSTELLATION_UPDATE",t)},i.toInfo=function(t,e){void 0===e&&(e=1);var i=new Object;i.className="m_role_act_info_tos",i.icon_id=t,i.op_type=e,this.sendSocketMessage(i)},i.onInfo=function(t){if(0==t.err_code){if(We.updateActInfoDict(t.icon_id,t.act_briefs),0!=t.op_type&&this.mediator.updateActPanelData(t.icon_id),1==t.op_type){for(var e=t.act_briefs.length,i=0;i<e;i++){var s=t.act_briefs[i];s.ugroup%1e4==1808&&(this._luckyUgroup=t.icon_id)&&We.addLuckyDayIcon(),this.toActDetail(s.act_id),this.hasBagua=s.ugroup%1e4==3003}0==this.hasCheck&&(this.initAct=!0)}}else ce.addTip(t.err_code)},i.checkActPre=function(){if(G.shareRoleId,Do.getRewardTimes(1,1),this._initAct&&_r.ins().initInfo,this._initAct&&_r.ins().initInfo&&0<G.shareRoleId&&0==Do.getRewardTimes(1,1)){this.hasCheck=!0;var t=G.shareType;if(2==t||3==t){var e="",i=0,s=0;switch(t){case 2:"八卦分享类型",e="ACT_BAGUA_OPEN_SHARE",s=i=1;break;case 3:"许愿池分享类型",e="ACT_WISH_OPEN_SHARE",i=7,s=850}if(0<G.shareTime){var n=G.shareTime;this.hasBagua?ya.serverTime>n+86400?this.dispatch(e,2):(this.dispatch(e,1),_r.ins().toPfRewardGet([i,s])):ya.serverTime>n+86400?this.dispatch(e,4):(this.dispatch(e,3),_r.ins().toPfRewardGet([i,s]))}else _r.ins().toPfRewardGet([i,s])}}},i.toActDetail=function(t){if(0!=t){if(4014==t)return;var e=new Object;e.className="m_role_act_detail_tos",e.act_id=t,this.sendSocketMessage(e)}},i.onActDetail=function(t){0==t.err_code?ya.serverTime>=Math.min(t.start_act_time,t.start_reward_time)&&ya.serverTime<=Math.max(t.end_act_time,t.end_reward_time)&&(We.isCleanActID(t.icon_id)&&We.cleanActIDInfo(t),We.makeActDetail(t),We.execCallBackFunc(t.act_id),We.checkActRedPoint(t)):ce.addTip(t.err_code)},i.toDeblock=function(t,e){void 0===e&&(e=0);var i=new Object;i.className="m_role_act_deblock_tos",i.act_id=t,i.condition_id=e,this.sendSocketMessage(i)},i.toRoleActSign=function(t,e){var i=new Object;i.className="m_role_act_sign_tos",i.act_id=t,i.condition_id=e,this.sendSocketMessage(i)},i.onRoleActSign=function(t){0==t.err_code||ce.addTip(t.err_code)},i.onRoleActBox=function(t){this.dispatch("ACT_BOX_OPEN",[t.items])},i.toRoleActBoxLog=function(t){var e=new Object;e.className="m_role_act_box_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onRoleActBoxLog=function(t){0==t.err_code?(We.saveLogByAct(t),this.dispatch("ACT_BAGUA_LOG_UPDATE")):ce.addTip(t.err_code)},i.onBagDataChangeRoCheckRP=function(){We.checkRPByPackUpdate()},i.toActChooseCamp=function(t,e){var i=new Object;i.className="m_act_choose_camp_tos",i.act_id=t,i.camp_id=e,this.sendSocketMessage(i)},i.onActChooseCamp=function(t){t.err_code?ce.addTip(t.err_code):T.dispatch("ACT_CHOOSE_CAMP_UPDATE",t.camp_id,t.act_id)},i.toUserBack=function(){var t=new Object;t.className="m_role_come_back_tos",this.sendSocketMessage(t)},i.onUserBack=function(t){t.err_code||(this.userBackData=t,He.getInstance().updateUserBackView())},i.toUserBackReward=function(t){var e=new Object;e.className="m_role_come_back_reward_tos",e.id=t,this.sendSocketMessage(e)},i.onUserBackReward=function(t){t.err_code?ce.addTip(t.err_code):(this.userBackData.reward_info=t.reward_info,He.getInstance().updateUserBackView())},i.toBaguaFurnaceBuy=function(t){var e=new Object;e.className="m_role_act_furnace_buy_tos",e.act_id=t,this.sendSocketMessage(e)},i.onBaguaFurnaceBuy=function(t){t.err_code?ce.addTip(t.err_code):this.dispatch("ACT_BAGUAFURNACE_UPDATE",t)},i.toBaguaFurnaceLog=function(t){var e=new Object;e.className="m_role_act_furnace_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onBaguaFurnaceLog=function(t){t.err_code&&ce.addTip(t.err_code)},i.toBaguaFairyLog=function(t){var e=new Object;e.className="m_role_act_fairy_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onBaguaFairyLog=function(t){t.err_code&&ce.addTip(t.err_code)},i.toGetLuckyShopOrder=function(t){var e=new Object;e.className="m_role_act_lucky_shop_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onGetLuckyShopOrder=function(t){0==t.err_code?this.dispatch("UPDATE_FREE_MALL_ORDER",[t.act_id,t.logs]):ce.addTip(t.err_code)},i.onGetCurrentOrder=function(t){var e={};e.actID=t.act_id,e.items=t.items,e.order=t.lucky_order,e.isFree=t.is_free,this.dispatch("OPEN_LUCKY_SHOP_BUY_BACK_DIALOG",e)},i.toFinishBanner=function(t,e){var i=new Object;i.className="m_role_act_deblock_tos",i.act_id=t,i.condition_id=e,this.sendSocketMessage(i),this.toActDetail(t)},I(0,i,"luckyUgroup",function(){return this._luckyUgroup}),I(0,i,"initAct",null,function(t){this._initAct=!0,this.checkActPre()}),e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Na=function(t){function e(){this.bannerView=null,e.__super.call(this)}w(e,"modules.activity.bannerQQ.BannerQQCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("BANNER_VIDEO_FINISH",this,this.toFininBanner),this.addMessageListener("OPEN_BANNER_QQ",this,this.openBannerQQView),this.addSocketListener("m_role_pf_reward_info_toc",this,this.onGetRewardInfo),this.addSocketListener("m_role_pf_reward_get_toc",this,this.onGetReward)},i.openBannerQQView=function(){se.has("modules/act")?(this.bannerView=this.bannerView||Aa.getIns(1e3,"bannerQQ.BannerQQView"),this.bannerView.openWindow(),this.bannerView&&this.bannerView.parent&&(this.bannerView.update(),Qe.showRedPoint(!1),this.toOpenBanner())):se.add("modules/act","正在加载活动图标",this,this.openBannerQQView)},i.toOpenBanner=function(){var t=new Object;t.className="m_role_pf_reward_open_tos",t.op_type=14,this.sendSocketMessage(t)},i.toFininBanner=function(t){if(!(3<t)){var e=new Object;e.className="m_role_pf_operate_end_tos",e.op_type=14,e.reward_id=Qe.videoID;for(var i=Qe.getListArr(),s=0;s<i.length;s++){var n=i[s];if(n.id==e.reward_id){n.val=1;break}}this.bannerView&&this.bannerView.update(),this.sendSocketMessage(e)}},i.toGetReward=function(t){var e=new Object;e.className="m_role_pf_reward_get_tos",e.op_type=14,e.reward_id=t,this.sendSocketMessage(e)},i.onGetReward=function(t){if(0==t.err_code){for(var e=Qe.getListArr(),i=0;i<e.length;i++){var s=e[i];if(s.id==t.reward_id){var n=Qe.getConfigVOById(s.id);n.nowTimes+=1,n.nowTimes>=n.times?s.val=2:s.val=0;break}}this.bannerView&&this.bannerView.update()}else ce.addTip(t.err_code)},i.onGetRewardInfo=function(t){if(0==t.err_code){for(var e=Qe.getListArr(),i=0;i<e.length;i++){var s,n,o=e[i],a=0,l=Qe.getConfigVOById(o.id);for(var r in t.operate_end)if(14==(s=t.operate_end[r]).type&&s.id==o.id){o.val=1,a=s.val;break}for(var h in t.rewards)if(14==(n=t.rewards[h]).type&&n.id==o.id){n.val<a?o.val=1:n.val>=a&&(o.val=0),l.nowTimes=n.val,l.nowTimes>=l.times&&(o.val=2);break}}this.bannerView&&this.bannerView.update();var u,c=ya.serverTime,d=0;for(var p in t.last_open_ts)if(14==(u=t.last_open_ts[p]).id){d=u.val;break}if(0!=d){var m=x.getTotalTime(d),f=x.getTotalTime(c);f[1]>m[1]?Qe.showRedPoint(!0):f[1]==m[1]&&f[2]>m[2]&&Qe.showRedPoint(!0)}else Qe.showRedPoint(!0)}else ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Va=function(t){function e(){this._invitePanel=null,this._friendCutPanel=null,e.__super.call(this)}w(e,"modules.activity.bargain.BargainCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("BARGAIN_OPEN_INVITE_PANEL",this,this.onOpenInvitePanel),this.addMessageListener("BARGAIN_OPEN_FRIEND_CUT_PANEL",this,this.onOpenFriendCutPanel),this.addSocketListener("m_role_act_bargain_toc",this,this.onCut),this.addSocketListener("m_role_act_bargain_info_toc",this,this.onGetFriendHelp),this.addSocketListener("m_role_act_help_bargain_toc",this,this.onShareFriend)},i.onOpenInvitePanel=function(t){Wl.ins().toInfo(1,1),this._invitePanel=this._invitePanel||Aa.getIns(1e3,"bargain.BargainInviteView"),this._invitePanel.openWindow(),this._invitePanel.openSet(t,He.getInstance().bargainID),this._invitePanel.update()},i.onOpenFriendCutPanel=function(t){var e=ao.getIconVO(128);e&&(1==e.alwayShow||ao.getIconStateShow(128))?(this._friendCutPanel=this._friendCutPanel||Aa.getIns(1e3,"bargain.BargainFriendCutView"),this._friendCutPanel.openWindow(),this.toGetFriendHelp(t)):Jt.addTip("当前不在活动时间内哦")},i.toCut=function(t,e,i){var s=new Object;s.className="m_role_act_bargain_tos",s.act_id=t,s.target_role_id=e,s.bargain_type_id=i,this.sendSocketMessage(s)},i.onCut=function(t){0==t.err_code?t.target_role_id==pe.roleID?(Da.ins().toActDetail(t.act_id),t.target_role_name==pe.roleName?Jt.addTip("你已成功砍价"+t.bargain_price+"个狐仙馈赠"):Jt.addTip(t.target_role_name+"为你助力砍价"+t.bargain_price+"个狐仙馈赠"),T.dispatch("ACT_BARGAIN_UPDATE")):this._friendCutPanel&&(this.toGetFriendHelp(t.act_id),0!=t.bargain_price&&Jt.addTip("你已为"+t.target_role_name+"助力砍价"+t.bargain_price+"个狐仙馈赠")):31071004==t.err_code?Jt.addTip("该商品已经是血亏价了，不能进行砍价助力"):31071006==t.err_code?Jt.addTip("该好友接受砍价助力次数达到上限，不能进行砍价助力"):ce.addTip(t.err_code)},i.toGetFriendHelp=function(t){var e=new Object;e.className="m_role_act_bargain_info_tos",e.act_id=t,this.sendSocketMessage(e)},i.onGetFriendHelp=function(t){0==t.err_code?this._friendCutPanel&&this._friendCutPanel.update(t.bargain_info,t.remain_free_times):ce.addTip(t.err_code)},i.toShareFriend=function(t,e){var i=new Object;i.className="m_role_act_help_bargain_tos",i.act_id=He.getInstance().bargainID,i.target_role_id=t,i.bargain_type_id=e,this.sendSocketMessage(i)},i.onShareFriend=function(t){if(0==t.err_code){var e=pe.roleName+"邀请你参加";e+="砍价活动。"+Z.linkcolor("【点击参与】","BargainFriendCut#11452#"+t.act_id,!1),Za.ins().toInPairs(t.target_role_id,e,10)}else 31071004==t.err_code?Jt.addTip("该商品已经是血亏价了，不能进行砍价助力"):31071005==t.err_code?Jt.addTip("该商品已经邀请该好友助力"):ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ba=function(t){function e(){this.dialDisplayPanel=null,e.__super.call(this)}w(e,"modules.activity.dial.DialCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_act_turntable_toc",this,this.onInfo)},i.onInfo=function(t){ei.seq=t.seq,ei.multiple=t.multiple_seq,ei.rewardList=t.reward_list,this.dispatch("DIAL_ROTATE")},i.openProbabilityPanel=function(t){this.dialDisplayPanel=this.dialDisplayPanel||Aa.getIns(1e3,"dial.DialDisplayPanel"),this.dialDisplayPanel.openWindow(),this.dialDisplayPanel.updateType("TYPE_PROBABILITY",t)},i.openRecordPanel=function(t){this.dialDisplayPanel=this.dialDisplayPanel||Aa.getIns(1e3,"dial.DialDisplayPanel"),this.dialDisplayPanel.openWindow(),this.dialDisplayPanel.updateType("TYPE_RECORD",t)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ma=function(t){function e(){this._preLv=0,this.hasShow=!1,this.tipsView=null,this.actID=0,e.__super.call(this)}w(e,"modules.activity.fortuneDay.FortuneDayCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ICON_NOTICE",this,this.onIconNotice),this.addMessageListener("CROSS_DAY",this,this.crossDayHandler),this.addSocketListener("m_lucky_detail_toc",this,this.onLuckyDetail),this.addSocketListener("m_lucky_get_event_toc",this,this.onLuckyGetEvent),this.addSocketListener("m_lucky_do_event_toc",this,this.onLuckyDoEvent),this.addSocketListener("m_lucky_update_event_toc",this,this.onLuckyUpdateEvent),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkTipsShow),this.addMessageListener("NO_WINDOW_SHOW",this,this.checkTipsShow),this.addMessageListener("ICON_NOTICE",this,this.checkTipsShow),this._preLv=pe.myLevel},i.checkTipsShow=function(){if(!G.isReviewVersion&&this._preLv<10&&10<=pe.myLevel&&!lt.windowLayer.numChildren&&!this.hasShow&&We.hasFortuneDayIcon()&&ao.getIconStateShow(ai.actIconId)){if(!se.has("modules/act"))return void se.add("modules/act","正在加载活动模块",this,this.checkTipsShow);this.hasShow=!0,this._preLv=pe.myLevel,this.tipsView||(this.tipsView=new Fx,this.tipsView.openWindow())}},i.crossDayHandler=function(){if(ai.luckyEvent=null,!ao.getIconStateShow(4014))return Zl.ins().deleteIcon(5005),void We.removeActInfoDict(this.actID,4014);this.toLuckyDetail()},i.onIconNotice=function(){if(ao.getIconStateShow(4014))for(var t=ao.getIconStateDicKeys(),e=0,i=t.length;e<i;e++)if(this.actID=t[e],311<this.actID&&this.actID<399){var s=new Object;if(s.className="p_act_brief",s.act_id=0,s.order=9999,s.skin_id=0,s.ugroup=4014,s.com_types=[4014],s.order=100,s.act_id=4014,!ao.getIconStateShow(this.actID))return;We.addFixedActInfo(this.actID,s),We.addFortuneDayIcon(),this.showActIconRedPoint(this.actID),ai.actIconId=this.actID,ai.checkRedPoint();break}},i.toLuckyDetail=function(){var t=new Object;t.className="m_lucky_detail_tos",this.sendSocketMessage(t)},i.onLuckyDetail=function(t){if(0==t.err_code){var e=t.event,i=t.start_time,s=t.end_time,n=ya.serverTime;n>=Math.min(i,s)&&n<=Math.max(i,s)?(ai.startTime=i,ai.endTime=s,ai.luckyEvent=e,ai.checkRedPoint(),this.onIconNotice(),this.dispatch("ACT_FORTUNE_DAY_GET_INFO_DISPLAY")):We.removeActInfoDict(310,4014)}else ce.addTip(t.err_code)},i.toLuckyGetEvent=function(){var t=new Object;t.className="m_lucky_get_event_tos",this.sendSocketMessage(t)},i.onLuckyGetEvent=function(t){if(0==t.err_code){var e=t.event,i=t.show_events;ai.luckyEvent=e,ai.showEventArr=i,this.dispatch("ACT_FORTUNE_DAT_GET_EVENT")}else ce.addTip(t.err_code)},i.toDoLuckyEvent=function(){if(3==ai.getLuckyEventType()){var t=ai.getPayIDByEventID();pt.send(10070,2,"幸运日-用户购买操作",{item_id:t}),0<t&&(Bt.isFanTi?Nl.ins().toExchange(t):Nl.ins().toPay(t))}else this.toLuckyDoEvent()},i.toLuckyDoEvent=function(){var t=new Object;t.className="m_lucky_do_event_tos",this.sendSocketMessage(t)},i.onLuckyDoEvent=function(t){0==t.err_code||ce.addTip(t.err_code)},i.onLuckyUpdateEvent=function(t){var e=t.update_event;if(e){if(ai.luckyEvent=e,this.dispatch("UPDATE_ACT_SPC_PANEL",310),this.dispatch("ACT_FORTUNE_DAY_GET_INFO_DISPLAY"),2==ai.luckyEvent.state){var i=1==ai.getLuckyEventType()?"购买成功":"任务完成";Jt.addTip(i)}ai.checkRedPoint()}},i.showActIconRedPoint=function(t){this.dispatch("SHOW_FORTUNE_DAY_TIP_ON_ICON_LIST",t)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Fa=function(t){function e(){e.__super.call(this)}w(e,"modules.activity.jinliDFS.JinLiDFSCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_welfare_task_toc",this,this.onTaskInfo),this.addSocketListener("m_role_welfare_task_reward_toc",this,this.onGetReward)},i.toTaskInfo=function(){var t=new Object;t.className="m_role_welfare_task_tos",this.sendSocketMessage(t)},i.onTaskInfo=function(t){0==t.err_code?(hi.taskInfo=t.task_list,hi.totalProcess=t.total_process,hi.rewardProcess=t.reward_process,We.showRP(4030,4030,hi.isShowRedPoint),T.dispatch("JINLIDFS")):ce.addTip(t.err_code)},i.toGetReward=function(t){var e=new Object;e.className="m_role_welfare_task_reward_tos",e.type_id=t,this.sendSocketMessage(e)},i.onGetReward=function(t){0==t.err_code?(hi.updateRewardProcess(t.type_id,t.cur_process),T.dispatch("JINLIDFS")):ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ua=function(t){function e(){e.__super.call(this)}w(e,"modules.activity.levelGift.ActLevelGiftCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_level_gift_toc",this,this.onInfo),this.addSocketListener("m_role_level_gift_get_toc",this,this.onGet),this.addMessageListener("ROLE_LEVEL_UP",this,this.onRoleLevelUp),this.addMessageListener("WELFARE_MONTH_CARD_INFO",this,this.onMonthCardInfo)},i.onMonthCardInfo=function(){di.checkRedPoint()},i.onRoleLevelUp=function(){di.checkRedPoint()},i.toGet=function(t){var e=new Object;e.className="m_role_level_gift_get_tos",e.condition_id=t,this.sendSocketMessage(e)},i.onGet=function(t){0==t.err_code?(di.updateConditionById(t.condition_id,t.state),di.checkCommonConditionsIsAllGet()&&We.removeActInfoDict(310,4010),di.checkRedPoint(),this.dispatch("UPDATE_ACT_SPC_PANEL",310)):ce.addTip(t.err_code)},i.onInfo=function(t){if(0==t.state){di.conditions=t.condition;var e=new Object;e.className="p_act_brief",e.act_id=0,e.order=9999,e.skin_id=0,e.ugroup=0,e.com_types=[4010],e.order=14,e.ugroup=4010,We.addFixedActInfo(310,e),di.checkRedPoint()}else 1==t.state&&(di.conditions=[],We.removeActInfoDict(310,4010))},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ga=(function(t){function e(){this.recordView=null,this.alertView=null,e.__super.call(this)}w(e,"modules.activity.yunyou.YunyouCase",l);var i=e.prototype;i.initListeners=function(){this.addSocketListener("m_role_act_koi_log_toc",this,this.onGetRecordAll),this.addSocketListener("m_role_act_koi_self_log_toc",this,this.onGetRecordSelf)},i.toGetRecordAll=function(t){var e=new Object;e.className="m_role_act_koi_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onGetRecordAll=function(t){0==t.err_code?t.act_id==He.getInstance().yunYouID&&(es.recordInfoAll=t.logs,this.updateRecordView()):ce.addTip(t.err_code)},i.toGetRecordSelf=function(t){var e=new Object;e.className="m_role_act_koi_self_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onGetRecordSelf=function(t){0==t.err_code?t.act_id==He.getInstance().yunYouID&&(es.recordInfoSelf=t.logs,this.updateRecordView()):ce.addTip(t.err_code)},i.openRecordView=function(){this.recordView=this.recordView||Aa.getIns(1e3,"yunyou.YunyouRecordView"),this.recordView.openWindow(),this.recordView.update()},i.updateRecordView=function(){this.recordView&&this.recordView.update()},i.openAlert=function(t){this.alertView=this.alertView||Aa.getIns(1e3,"yunyou.YunyouAlert"),this.alertView.popup(!0),this.alertView.data=t},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null}(),function(t){function e(){this.loginView=null,e.__super.call(this)}w(e,"modules.actLoginFun.ActLoginFunModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_login_gift_toc",this,this.onLoginGift),this.addSocketListener("m_role_login_gift_get_toc",this,this.onLoginGiftGet),this.addMessageListener("OPEN_LOGIN_GIFT_VIEW",this,this.openLoginView)},i.openLoginView=function(){se.has("modules/act")?(this.loginView=Aa.getIns(2e3,"ActLoginFunView"),this.loginView.openWindow(),this.loginView&&this.loginView.parent&&this.loginView.update()):se.add("modules/act","正在加载活动图标",this,this.openLoginView)},i.toLoginGiftGet=function(t){var e=new Object;e.className="m_role_login_gift_get_tos",e.condition_id=t,this.sendSocketMessage(e)},i.onLoginGiftGet=function(t){0<t.err_code?ce.addTip(t.err_code):(ss.handlerLoginGiftGet(t),this.loginView&&this.loginView.parent&&this.loginView.update(),this.checkLoginGiftRP(),this.checkLoginState())},i.checkLoginState=function(){var t=0;if(ss.loginGiftToc){var e=ss.loginGiftToc.login_day,i=ss.loginGiftToc.get_list;t=1==e?0==i.length?1:2:2==e?i.indexOf(2)<0?3:4:e<7?4:7==e?i.indexOf(7)<0?3:5:e<14?5:6,this.dispatch("ICON_STATE_CHANGE",[108,t])}},i.checkLoginGiftRP=function(){if(ss.getLoginGiftOpen()){var t,e=ss.getAllItem();for(var i in e)if(t=e[i],11==ss.getLoginItemState(t))return void T.dispatch("ICON_REDPOINT_CHANGE",[108,"RP_ICON_LOGIN_GIFT",!0])}T.dispatch("ICON_REDPOINT_CHANGE",[108,"RP_ICON_LOGIN_GIFT",!1])},i.onLoginGift=function(t){ss.handlerLoginGift(t),this.loginView&&this.loginView.parent&&this.loginView.update(),this.checkLoginGiftRP(),this.checkLoginState()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}()),Ha=function(t){function e(){this.athleticsPanel=null,this._panelKey=NaN,e.__super.call(this)}w(e,"modules.athletics.AthleticsModule",l);var i=e.prototype;return i.initListeners=function(){Wa.getInstance(),Ya.getInstance(),Xa.getInstance(),this.addMessageListener("ATHLETICS_UPDATE_PANEL",this,this.updateAthleticsPanel),this.addMessageListener("ATHLETICS_OPEN_PANEL",this,this.openAthleticsPanel),this.addMessageListener("ATHLETICS_CLOSE_PANEL",this,this.closeAthleticsPanel)},i.openAthleticsPanel=function(t){void 0===t&&(t=0),0!=t||0!=Ne.isOpenEncounter()?1!=t||0!=Ne.isOpenSoloRanking()?2!=t||0!=Ne.isOpenSnatch()?3!=t||0!=Ne.isOpenPetSports()?0!=se.has("modules/athletics")?(this.athleticsPanel=this.athleticsPanel||Aa.getIns(3e3,"AthleticsPanel"),this.athleticsPanel.openWindow(),this.athleticsPanel.parent&&Wa.getInstance().toEncounterRankInfo(),this.athleticsPanel.showViewByIndex(t),this.athleticsPanel.on("undisplay",this,this.onPanelUndisplay),this.updateAthleticsPanel(),rs.checkRedPoint(),rs.checkLogRedPoint(),_t.clearTimeout(this._panelKey)):se.add("modules/athletics","正在加载竞技模块",this,this.openAthleticsPanel,[t]):Jt.addTip("仙宠竞技2转开启"):Jt.addTip("该功能"+rs.snatchOpenLevel+"级开放"):Jt.addTip("该功能80级开放"):Jt.addTip("通关修仙之路19关后开启")},i.onPanelUndisplay=function(){this._panelKey=_t.setTimeout(this,this.clearAthleticsSource,null,ya.coldTime)},i.clearAthleticsSource=function(){this.athleticsPanel&&(this.athleticsPanel.destroy(),this.athleticsPanel=null),Wa.getInstance().destroyResoruce(),Ya.getInstance().destroyResoruce(),Xa.getInstance().destroyResoruce(),qa.ins.destroyResoruce(),se.destroy("modules/athletics"),se.destroy("modules/petSports")},i.updateAthleticsPanel=function(){this.athleticsPanel&&this.athleticsPanel.parent&&this.athleticsPanel.updateCurView()},i.closeAthleticsPanel=function(){this.athleticsPanel&&this.athleticsPanel.parent&&this.athleticsPanel.closeWindow()},e.ins=function(){return e._instance=e._instance||new e},e._instance=null,e}(),Wa=function(t){function e(){this.objDic=null,this._encounterLogPanel=null,e.__super.call(this)}w(e,"modules.athletics.encounter.EncounterCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_ENCOUNTLOG_PANEL",this,this.toEncounterLog),this.addMessageListener("ENTER_MAP",this,this.resetState),this.addSocketListener("m_role_encounter_detail_toc",this,this.onEncounterDetail),this.addSocketListener("m_role_encounter_update_toc",this,this.onEncounterUpdate),this.addSocketListener("m_role_encounter_search_toc",this,this.onEncounterSearch),this.addSocketListener("m_role_encounter_log_toc",this,this.onEncounterLog),this.addSocketListener("m_role_encounter_fight_toc",this,this.onEncounterFight),this.addSocketListener("m_role_encounter_fight_result_toc",this,this.onEncounterRes),this.addSocketListener("m_role_encounter_rank_info_toc",this,this.onEncounterRankInfo)},i.toEncounterRankInfo=function(){var t=new Object;t.className="m_role_encounter_rank_info_tos",this.sendSocketMessage(t)},i.onEncounterRankInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(ns.handlerEncounterRank(t),this.dispatch("UPDATE_ENCOUNTER_RANKINFO"),this.dispatch("ATHLETICS_UPDATE_PANEL"))},i.resetState=function(){ns.state=0,ns.targetID=0,ua.isMainMap()?this.showMirror():this.hideMirror()},i.hideMirror=function(){if(this.objDic){var t;for(var e in this.objDic.values){var i;if((t=this.objDic.values[e])&&0<t.length)for(var s in t)(i=t[s])&&i.parent&&(i.visible=!1,_e.mid.removeChild(i))}_t.removeFromSceond(this,this.mirrorFight)}},i.showMirror=function(){if(this.objDic){var t,e=!1;for(var i in this.objDic.values){var s;if((t=this.objDic.values[i])&&0<t.length)for(var n in t)(s=t[n])&&!s.parent&&(s.visible=!0,_e.mid.addChild(s),s instanceof com.scene.unit.Monster&&s.reset(s.pvo,!0),s instanceof com.scene.unit.Pal&&s.reset(s.pvo,!0)),e=!0}e?_t.addToSecond(this,this.mirrorFight):_t.removeFromSceond(this,this.mirrorFight)}},i.onEncounterRes=function(t){if(this.disposeMirror(ns.targetID),ns.targetID=0,(ns.state=0)<t.err_code)ce.addTip(t.err_code);else{Rr.ins().setDrops(t.reward),Rr.ins().getAllDrop();var e=S.now()+100*t.reward.length+1e3;this.showPanel(t,e),this.dispatch("EXERCISE_PEARL_CONDICTION_UPDATE")}},i.showPanel=function(t,e){0<(e-=S.now())?_t.setTimeout(this,this.totalGetTip,[t],e):this.totalGetTip(t)},i.totalGetTip=function(t){var e=new sa;e.result=3-t.result,e.msgTitle="你成功击败了遭遇到的玩家",e.goods=t.reward,e.leftFunCaller=this,e.leftBtnFun=this.funZZ,e.mapID=ca.mapID,ia.show(e)},i.funZZ=function(){},i.createMirror=function(t){this.objDic=this.objDic||new P,this.objDic.get(t.role_id)||this.objDic.set(t.role_id,[]);var e=this.objDic.get(t.role_id),i=new Object;i.className="p_map_pal",i.pos=t.pos,i.skin=t.skin,i.level=t.level,i.pal_id=t.role_id,i.category=t.category,i.state=0,i.sex=t.sex,i.pal_id=t.role_id,i.pal_name=t.role_name,i.family_name=t.family_name,i.hp=1e3,i.max_hp=1e3,i.camp_id=1e3;var s,n,o,a=new Object;if(a.className="p_map_monster",a.monster_name="怪物",a.type_id=10000105,a.monster_id=1,a.state=2,a.hp=1e3,a.max_hp=1e3,a.pos=this.getPos(t.pos),a.camp_id=1e3,0==e.length)s=xe.getRole(),n=xe.getMonster(),e.push(s,n);else for(var l in e)(o=e[l])instanceof com.scene.unit.Pal?s=o:n=o;if(s){s.reset(i,!0);var r=s.pvo.category;1==r?s.play("attack",Ot.posToDir(t.pos)):2==r?s.play("attack_arrow",Ot.posToDir(t.pos)):s.play("attack_casting",Ot.posToDir(t.pos)),s.visible=!0,_e.mid.addChild(s)}for(var h in n&&(n.reset(a,!0),n.play("attack"),n.visible=!0,_e.mid.addChild(n)),this.objDic.values)if(0<this.objDic.values[h].length){_t.addToSecond(this,this.mirrorFight);break}this.resetState()},i.mirrorFight=function(){var t,e=!1,i=0;for(var s in this.objDic.values)if((t=this.objDic.values[s])&&0<t.length){var n;for(var o in t)(n=t[o])instanceof com.scene.unit.Pal?1==(i=n.pvo.category)?n.play("attack",Ot.posToDir(n.pvo.pos)):2==i?n.play("attack_arrow",Ot.posToDir(n.pvo.pos)):n.play("attack_casting",Ot.posToDir(n.pvo.pos)):n.play("attack",Ot.posToDir(n.pvo.pos));e=!0}e||_t.removeFromSceond(this,this.mirrorFight)},i.gotoFight=function(t){if(ua.isMainMap()){if(2!=ns.state){Mr.isAutoHit&&T.dispatch("AUTO_HIT");var e,i=Ot.posToTx(t.pos),s=Ot.posToTz(t.pos),n=!1;for(var o in WS.all)e=WS.all[o],n?e.runToPoint(Rt.getOne(i,s),2):(e.runToPoint(Rt.getOne(i,s),2,Q.create(this,this.toEncounterFight,[t.role_id],!0)),n=!0),e.lockedTarget=0}}else ns.state=0},i.getPos=function(t){var e=Ot.posToTx(t),i=Ot.posToTz(t),s=Ot.posToDir(t);switch(s){case 0:e-=2,i-=2;break;case 1:i-=2;break;case 2:e+=2,i-=2;break;case 3:e+=2;break;case 4:e+=2,i+=2;break;case 5:i+=2;break;case 6:e-=2,i+=2;break;case 7:e-=2}return s=s<4?s+4:s-4,Ot.getPos(e,i,s)},i.disposeMirror=function(t){if(this.objDic&&this.objDic.get(t)){var e,i=this.objDic.get(t);for(var s in i)(e=i[s]).visible=!0,e.remove();i.length=0}},i.toEncounterFight=function(t){var e=new Object;e.className="m_role_encounter_fight_tos",e.fight_role_id=t,this.sendSocketMessage(e)},i.onEncounterFight=function(t){0<t.err_code?ce.addTip(t.err_code):(this.hideOneMirror(t.fight_role_id),ns.state=2,ns.targetID=t.fight_role_id,Mr.isAutoHit||T.dispatch("AUTO_HIT"),ns.checkRedPoint())},i.hideOneMirror=function(t){if(this.objDic&&this.objDic.get(t)){var e,i=this.objDic.get(t);for(var s in i)(e=i[s])&&e.parent&&_e.mid.removeChild(e)}},i.toEncounterLog=function(){var t=new Object;t.className="m_role_encounter_log_tos",this.sendSocketMessage(t)},i.onEncounterLog=function(t){0<t.err_code?ce.addTip(t.err_code):(ns.handlerEncounterLog(t),0<t.logs.length?this.openEncounterLogPanel():Jt.addTip("你还没有挑战过附近的玩家"))},i.toEncounterSearch=function(){var t=new Object;t.className="m_role_encounter_search_tos",this.sendSocketMessage(t)},i.onEncounterSearch=function(t){0<t.err_code?ce.addTip(t.err_code):(ns.handlerEncounterSearch(t),this.dispatch("ATHLETICS_UPDATE_PANEL"),t.update_roles&&this.createMirror(t.update_roles))},i.onEncounterUpdate=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e;if(ns.handlerEncounterUpdate(t),t.update_roles&&0<t.update_roles.length)for(var i in t.update_roles)e=t.update_roles[i],this.createMirror(e);this.dispatch("ATHLETICS_UPDATE_PANEL")}},i.onEncounterDetail=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e;if(ns.handlerEncounterDetail(t),t.fight_roles&&0<t.fight_roles.length)for(var i in t.fight_roles)e=t.fight_roles[i],this.createMirror(e);this.dispatch("ATHLETICS_UPDATE_PANEL")}},i.openEncounterLogPanel=function(){this._encounterLogPanel=this._encounterLogPanel||Aa.getIns(3e3,"encounter.EncounterLogPanel"),this._encounterLogPanel.openWindow(),this.updateEncounterLogPanel()},i.updateEncounterLogPanel=function(){this._encounterLogPanel&&this._encounterLogPanel.parent&&this._encounterLogPanel.updateView()},i.destroyResoruce=function(){this._encounterLogPanel&&(this._encounterLogPanel.destroy(),this._encounterLogPanel=null)},e.getInstance=function(){return e._instance=e._instance||new e},e._instance=null,e}(),qa=function(t){function e(){this.rwView=null,this.ruleView=null,this.logView=null,this.rankView=null,this.setView=null,e.__super.call(this)}w(e,"modules.athletics.petSports.PetSportsCase",l);var i=e.prototype;return i.update=function(){},i.initListeners=function(){this.addSocketListener("m_pet_arena_buy_challenge_times_toc",this,this.onPetArenaBuyChallengeTimes),this.addSocketListener("m_pet_arena_challenge_logs_toc",this,this.onPetArenaChallengeLogs),this.addSocketListener("m_pet_arena_challenge_log_update_toc",this,this.onPetArenaChallengeLogUpdate),this.addSocketListener("m_pet_arena_challenge_toc",this,this.onPetArenaChallenge),this.addSocketListener("m_pet_arena_info_toc",this,this.onPetArenaInfo),this.addSocketListener("m_pet_arena_opponent_pets_toc",this,this.onPetArenaOpponentPets),this.addSocketListener("m_pet_arena_ranks_toc",this,this.onPetArenaRanks),this.addSocketListener("m_pet_arena_refresh_opponents_toc",this,this.onPetArenaRefreshOpponents),this.addSocketListener("m_pet_arena_win_reward_toc",this,this.onPetArenaWinReward),this.addSocketListener("m_pet_arena_set_embattle_index_toc",this,this.onPetArenaSetEmbattleIndex),this.addSocketListener("m_pet_arena_shop_toc",this,this.onPetAreanShop),this.addSocketListener("m_pet_arena_shop_refresh_toc",this,this.onPetArenaShopRefresh),this.addSocketListener("m_pet_arena_shop_exchange_toc",this,this.onPetArenaShopExchange),this.addSocketListener("m_pet_arena_gift_info_toc",this,this.onGiftInfo),this.addSocketListener("m_pet_arena_world_logs_toc",this,this.onPetArenaChallengeGlobalLogs),this.addMessageListener("OPEN_PETSPORTS_RULE_VIEW",this,this.openRuleView),this.addMessageListener("OPEN_PETSPORTS_RANK_VIEW",this,this.openRankView),this.addMessageListener("OPEN_PETSPORTS_LOG_VIEW",this,this.openLogView),this.addMessageListener("OPEN_PETSPORTS_SET_VIEW",this,this.openSetView),this.addMessageListener("UPDATE_PETSPORTS_SET_VIEW",this,this.updateSetView),this.addMessageListener("OPEN_PETSPORTS_RW_VIEW",this,this.openRwView),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.updateScoreChange),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.updateByExchange),this.addMessageListener("ROLE_EXCHANGE_INFO",this,this.updateRwView),this.addMessageListener("ENTER_GAME",this,this.enterGame)},i.enterGame=function(){_t.setTimeout(this,this.toPetArenaInfo,null,St.ENTER_DELAY)},i.openRwView=function(){Ne.isOpenPetSports()?(this.rwView=this.rwView||Aa.getIns(3e3,"petSports.PetSportsChangeView"),this.rwView.parent||this.rwView.openWindow(),this.toGiftInfo(),Tr.ins().toRoleExchangeInfo()):Jt.addTip("仙宠竞技2转开启")},i.updateScoreChange=function(t){t&&(t.id,1)&&this.updateRwView()},i.updateByExchange=function(t){20==t.module_id&&(oa.updateExchangeInfo(t),this.updateRwView(),Jt.addTip("操作成功！"))},i.updateRwView=function(){this.rwView&&this.rwView.parent&&this.rwView.update()},i.toPetArenaSetEmbattleIndex=function(t){var e=new Object;e.className="m_pet_arena_set_embattle_index_tos",e.using_embattle_index=t,this.sendSocketMessage(e)},i.onPetArenaSetEmbattleIndex=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaSetEmbattleIndex(t),this.dispatch("CHANGE_PETSPORTS_EMBATTLE",t.using_embattle_index))},i.updateSetView=function(t){this.setView&&this.setView.parent&&this.setView.updateRoles(t)},i.openSetView=function(t){this.setView=this.setView||Aa.getIns(3e3,"petSports.PetSportsSetView"),this.setView.parent||this.setView.openWindow(),this.setView.showByType(t),this.setView.update()},i.openRuleView=function(){this.ruleView=this.ruleView||Aa.getIns(3e3,"petSports.PetSportsRuleView"),this.ruleView.parent||this.ruleView.openWindow()},i.openRankView=function(){this.rankView=this.rankView||Aa.getIns(3e3,"petSports.PetSportsRankView"),this.rankView.parent||this.rankView.openWindow(),this.toPetArenaRanks()},i.openLogView=function(){this.logView=this.logView||Aa.getIns(3e3,"petSports.PetSportsLogView"),this.logView.parent||this.logView.openWindow(),this.logView.update()},i.toPetArenaBuyChallengeTimes=function(){var t=new Object;t.className="m_pet_arena_buy_challenge_times_tos",this.sendSocketMessage(t)},i.onPetArenaBuyChallengeTimes=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaBuyChallengeTimes(t),as.checkRP(),this.dispatch("ATHLETICS_UPDATE_PANEL"),Jt.addTip("成功购买次数"))},i.toPetArenaChallengeLogs=function(){var t=new Object;t.className="m_pet_arena_challenge_logs_tos",this.sendSocketMessage(t)},i.onPetArenaChallengeLogs=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaChallengeLogs(t),this.logView&&this.logView.parent&&this.logView.update())},i.toPetArenaChallengeGlobalLogs=function(){var t=new Object;t.className="m_pet_arena_world_logs_tos",this.sendSocketMessage(t)},i.onPetArenaChallengeGlobalLogs=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaChallengeGlobalLogs(t),this.logView&&this.logView.parent&&this.logView.updateGlobalLog())},i.onPetArenaChallengeLogUpdate=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaChallengeLogUpdate(t),this.dispatch("ATHLETICS_UPDATE_PANEL"),this.logView&&this.logView.parent&&this.logView.update())},i.toPetArenaChallenge=function(t){var e=new Object;e.className="m_pet_arena_challenge_tos",e.opponent_role_id=t,this.sendSocketMessage(e)},i.onPetArenaChallenge=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaChallenge(t),as.checkRP(),this.dispatch("ATHLETICS_UPDATE_PANEL"),this.setView&&this.setView.parent&&this.setView.closeWindow(),pr.ins().toFightInfoREC(t.pet_fight_log_id),os.handerPetArenaChangeRes(t))},i.toPetArenaInfo=function(){if(0!=Ne.isOpenPetSports()){var t=new Object;t.className="m_pet_arena_info_tos",this.sendSocketMessage(t)}},i.onPetArenaInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaInfo(t),as.checkRP(),this.dispatch("ATHLETICS_UPDATE_PANEL"))},i.toPetArenaOppenentPets=function(t){var e=new Object;e.className="m_pet_arena_opponent_pets_tos",e.role_id=t,this.sendSocketMessage(e)},i.onPetArenaOpponentPets=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaOpponentPets(t),this.setView&&this.setView.parent&&this.setView.updatePets(t))},i.toPetArenaRanks=function(){var t=new Object;t.className="m_pet_arena_ranks_tos",this.sendSocketMessage(t)},i.onPetArenaRanks=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaRanks(t),this.rankView&&this.rankView.parent&&this.rankView.update())},i.toPetArenaRefreshOpponents=function(){var t=new Object;t.className="m_pet_arena_refresh_opponents_tos",this.sendSocketMessage(t)},i.onPetArenaRefreshOpponents=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaRefreshOpponents(t),this.dispatch("ATHLETICS_UPDATE_PANEL"),t.is_auto_refresh||Jt.addTip("刷新成功"))},i.toPetArenaWinReward=function(t){var e=new Object;e.className="m_pet_arena_win_reward_tos",e.win_times=t,this.sendSocketMessage(e)},i.onPetArenaWinReward=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaWinReward(t),as.checkRP(),this.dispatch("ATHLETICS_UPDATE_PANEL"))},i.toPetArenaShopExchange=function(t){var e=new Object;e.className="m_pet_arena_shop_exchange_tos",e.exchange_id=t,this.sendSocketMessage(e)},i.onPetArenaShopExchange=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetArenaShopExchange(t),this.updateRwView())},i.toPetAreanShop=function(){var t=new Object;t.className="m_pet_arena_shop_tos",this.sendSocketMessage(t)},i.onPetAreanShop=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetAreanShop(t),this.updateRwView())},i.toPetArenaShopRefresh=function(){var t=new Object;t.className="m_pet_arena_shop_refresh_tos",this.sendSocketMessage(t)},i.onPetArenaShopRefresh=function(t){0<t.err_code?ce.addTip(t.err_code):(os.handlerPetAreanRefresh(t),this.updateRwView(),Jt.addTip("刷新成功"))},i.toGiftInfo=function(){var t=new Object;t.className="m_pet_arena_gift_info_tos",this.sendSocketMessage(t)},i.onGiftInfo=function(t){0==t.err_code?(os.buyGiftInfo=t,this.updateRwView()):ce.addTip(t.err_code)},i.toSaveGlobalFightReport=function(t){var e=new Object;e.className="m_pet_arena_world_log_save_tos",e.new_log=t,this.sendSocketMessage(e)},i.destroyResoruce=function(){this.rwView&&(this.rwView.destroy(),this.rwView=null),this.ruleView&&(this.ruleView.destroy(),this.ruleView=null),this.logView&&(this.logView.destroy(),this.logView=null),this.rankView&&(this.rankView.destroy(),this.rankView=null),this.setView&&(this.setView.destroy(),this.setView=null)},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(),Ya=function(t){function e(){this.introducePanel=null,this.msgLogPanel=null,this.avengePanel=null,this.finishPanel=null,this.robEnterPanel=null,this.choosePanel=null,e.__super.call(this)}w(e,"modules.athletics.snatch.SnatchCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_snatch_detail_toc",this,this.onDetail),this.addSocketListener("m_role_snatch_begin_get_toc",this,this.onBeginGet),this.addSocketListener("m_role_snatch_refresh_toc",this,this.onRefresh),this.addSocketListener("m_role_snatch_colddown_toc",this,this.onColdDown),this.addSocketListener("m_snatch_get_log_toc",this,this.onGetLog),this.addSocketListener("m_snatch_get_reward_toc",this,this.onGetReward),this.addSocketListener("m_snatch_fight_toc",this,this.onSnatchFight),this.addSocketListener("m_snatch_fight_result_toc",this,this.onSnatchFightResult),this.addSocketListener("m_snatch_attacked_notify_toc",this,this.onAttackedNotify),this.addMessageListener("ROLE_SIMPLE_INFO",this,this.onRoleSimpleInfo),this.addMessageListener("ENTER_GAME",this,this.enterGameToDetail),this.addMessageListener("ROLE_LEVEL_UP",this,this.toDetail),this.addMessageListener("CUSTOM_BARRIER_19",this,this.toDetail)},i.enterGameToDetail=function(){_t.setTimeout(this,this.toDetail,null,St.ENTER_DELAY)},i.toDetail=function(){if(Ne.isOpenSnatch()){var t=new Object;t.className="m_snatch_detail_tos",this.sendSocketMessage(t)}},i.onDetail=function(t){0==t.err_code?(rs.detailVO=t,rs.checkRedPoint(),1==rs.detailVO.reward_type&&0<rs.detailVO.cold_ts&&rs.detailVO.cold_ts>=ya.serverTime&&_t.addToSecond(this,this.loopCheckMySnatch),2==rs.detailVO.reward_type&&Ha.ins().athleticsPanel&&Ha.ins().athleticsPanel.isPopup()&&2==Ha.ins().athleticsPanel.getTabIndex()&&this.openSnatchFinishPanel(),this.dispatch("ATHLETICS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.loopCheckMySnatch=function(){rs.detailVO.cold_ts<=ya.serverTime&&(this.toDetail(),_t.removeFromSceond(this,this.loopCheckMySnatch))},i.openSnatchFinishPanel=function(){this.finishPanel=this.finishPanel||new TC,this.finishPanel&&0==this.finishPanel.isPopup()&&(this.finishPanel.openWindow(),this.finishPanel.update())},i.toBeginGet=function(){var t=new Object;t.className="m_role_snatch_begin_get_tos",this.sendSocketMessage(t)},i.onBeginGet=function(t){0==t.err_code?(rs.beginGetSuccessUpdate(t.get_times,t.add_snatching),this.choosePanel&&this.choosePanel.isPopup()&&this.choosePanel.closeWindow(),_t.addToSecond(this,this.loopCheckMySnatch),rs.checkRedPoint(),this.dispatch("ATHLETICS_UPDATE_PANEL"),this.dispatch("EXERCISE_PEARL_CONDICTION_UPDATE")):ce.addTip(t.err_code)},i.toRefresh=function(){var t=new Object;t.className="m_role_snatch_refresh_tos",this.sendSocketMessage(t)},i.onRefresh=function(t){0==t.err_code?(rs.updateDetailVOByRefresh(t),this.choosePanel&&this.choosePanel.isPopup()&&this.choosePanel.updateInfo()):ce.addTip(t.err_code)},i.toColdDown=function(){var t=new Object;t.className="m_role_snatch_colddown_tos",this.sendSocketMessage(t)},i.onColdDown=function(t){0==t.err_code?(rs.checkRedPoint(),rs.updateByColdDown(),_t.removeFromSceond(this,this.loopCheckMySnatch),this.openSnatchFinishPanel(),this.dispatch("ATHLETICS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toGetLog=function(){var t=new Object;t.className="m_snatch_get_log_tos",this.sendSocketMessage(t)},i.onGetLog=function(t){0==t.err_code?(rs.msgLogs=t.logs,this.msgLogPanel&&this.msgLogPanel.isPopup()&&this.msgLogPanel.update()):ce.addTip(t.err_code)},i.toGetReward=function(){var t=new Object;t.className="m_snatch_get_reward_tos",this.sendSocketMessage(t)},i.onGetReward=function(t){0==t.err_code?(rs.updateByGetReward(t.res_id),rs.checkRedPoint(),this.finishPanel&&this.finishPanel.isPopup&&this.finishPanel.closeWindow(),this.dispatch("ATHLETICS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toFight=function(t,e){var i=new Object;i.className="m_snatch_fight_tos",i.fight_type=t,i.id=e,this.sendSocketMessage(i)},i.onSnatchFight=function(t){0==t.err_code?(this.robEnterPanel&&this.robEnterPanel.isPopup()&&this.robEnterPanel.closeWindow(),this.avengePanel&&this.avengePanel.isPopup&&this.avengePanel.closeWindow(),this.msgLogPanel&&this.msgLogPanel.isPopup()&&this.msgLogPanel.closeWindow(),this.dispatch("ATHLETICS_CLOSE_PANEL")):ce.addTip(t.err_code)},i.onSnatchFightResult=function(t){if(0==t.err_code){var e=new sa;if(e.result=t.result,1==t.result){e.msgTitle="你赢了",e.result=2;for(var i,s=rs.getSnatchPlunderReward(rs.curFightVO.resId),n=rs.snatchProductIds.slice(0,2),o=[],a=0;a<n.length;a++)(i=new Object).className="p_tkv",i.type=5,i.id=n[a],2==t.fight_type?i.val=2*s.rewardDatas[a].num:i.val=s.rewardDatas[a].num,o.push(i);e.goods=o}else 2==t.result&&(e.msgTitle="你输了",e.result=1);e.mapID=3e4,e.leftFunCaller=this,e.leftBtnFun=this.resultCallBack,e.timeOutCaller=this,e.timeOutFun=this.resultCallBack,ia.show(e)}else ce.addTip(t.err_code)},i.resultCallBack=function(){el.ins().toExit(),T.dispatch("ATHLETICS_OPEN_PANEL",2),this.toDetail()},i.onAttackedNotify=function(t){rs.curAttackedNotifyId=t.attack_id,rs.checkLogRedPoint()},i.openIntroducePanel=function(){this.introducePanel=this.introducePanel||new kC,this.introducePanel.openWindow()},i.openMsgLogPanel=function(){this.msgLogPanel=this.msgLogPanel||new EC,this.msgLogPanel.openWindow(),this.toGetLog()},i.openAvengePanel=function(){this.avengePanel=this.avengePanel||new SC,this.avengePanel.openWindow(),this.avengePanel.update()},i.openRobEnterPanel=function(){this.robEnterPanel=this.robEnterPanel||new LC,this.robEnterPanel.openWindow(),this.robEnterPanel.update()},i.onRoleSimpleInfo=function(t){rs.curRoleSimpleId==t&&(this.robEnterPanel&&this.robEnterPanel.isPopup()&&this.robEnterPanel.update(),this.avengePanel&&this.avengePanel.isPopup()&&this.avengePanel.update())},i.openChoosePanel=function(){this.choosePanel=this.choosePanel||new CC,this.choosePanel.openWindow(),this.choosePanel.update()},i.destroyResoruce=function(){this.choosePanel&&(this.choosePanel.destroy(),this.choosePanel=null),this.avengePanel&&(this.avengePanel.destroy(),this.avengePanel=null),this.robEnterPanel&&(this.robEnterPanel.destroy(),this.robEnterPanel=null),this.msgLogPanel&&(this.msgLogPanel.destroy(),this.msgLogPanel=null),this.introducePanel&&(this.introducePanel.destroy(),this.introducePanel=null),this.finishPanel&&(this.finishPanel.destroy(),this.finishPanel=null)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Xa=function(t){function e(){this.settlementPanel=null,this.rankPanel=null,this.matchPanel=null,this.resultPanel=null,e.__super.call(this)}w(e,"modules.athletics.soloRanking.SoloRankingCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_solo_ranking_detail_toc",this,this.onSoloDetail),this.addSocketListener("m_solo_ranking_fight_back_toc",this,this.onSoloFightBack),this.addSocketListener("m_solo_ranking_fight_result_toc",this,this.onSoloFightResult),this.addSocketListener("m_solo_ranking_update_toc",this,this.onSoloUpdate),this.addSocketListener("m_solo_ranking_recent_info_toc",this,this.onSoloRecentInfo),this.addSocketListener("m_solo_ranking_get_reward_toc",this,this.onSoloGetReward),this.addMessageListener("RANK_GOT_DATA_UPDATE",this,this.updateRankPanel),this.addMessageListener("ENTER_GAME",this,this.enterGameToRequest),this.addMessageListener("COPY_EXIT",this,this.onExit),this.addMessageListener("ROLE_LEVEL_UP",this,this.toSoloDetail),this.addMessageListener("CUSTOM_BARRIER_19",this,this.toSoloDetail),this.addMessageListener("BAGDATA_CHANGE",this,this.updateSettlementPanel),this.addMessageListener("OPEN_SOLORANK_SETTLEMENT_PANEL",this,this.openSettlementPanel)},i.onExit=function(t){this.resultPanel&&this.resultPanel.close()},i.enterGameToRequest=function(){_t.setTimeout(this,this.toSoloDetail,null,St.ENTER_DELAY),_t.setTimeout(this,this.toSoloRecentInfo,null,St.ENTER_DELAY)},i.toSoloDetail=function(){if(Ne.isOpenSoloRanking()){var t=new Object;t.className="m_solo_ranking_detail_tos",this.sendSocketMessage(t)}},i.onSoloDetail=function(t){0==t.err_code?(cs.setDetailVO(t),cs.checkRedPoint(),this.dispatch("ATHLETICS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toSoloFight=function(t){void 0===t&&(t=1);var e=new Object;e.className="m_solo_ranking_fight_tos",e.fight_type=t,this.sendSocketMessage(e)},i.onSoloFightBack=function(t){0==t.err_code?(cs.updateByFightBack(t),this.openMatchPanel()):ce.addTip(t.err_code)},i.onSoloFightResult=function(t){if(0==t.err_code){var e=cs.getDdetailVO();e.oldStar=e.star,e.oldDivision=e.division,e.oldStage=e.stage,e.oldStarLv=e.starLv,e.star=t.star,e.realWin=t.real_win,cs.updateDivisionInfo(),cs.checkRedPoint(),ua.isSoloRankingMap()?_t.setTimeout(this,this.openResultPanel,[t.result,t.rewards,t.fight_name],2e3):this.openResultPanel(t.result,t.rewards,t.fight_name)}else ce.addTip(t.err_code)},i.openResultPanel=function(t,e,i){this.resultPanel=this.resultPanel||Aa.getIns(3e3,"soloRanking.SoloRankingResultPanel"),this.resultPanel.update(t,e,i),this.resultPanel.popup()},i.toSoloBuy=function(){var t=new Object;t.className="m_solo_ranking_buy_tos",this.sendSocketMessage(t)},i.onSoloUpdate=function(t){if(0==t.err_code){if(t.update_list&&0<t.update_list.length){var e=cs.getDdetailVO();if(e){var i;for(var s in t.update_list)switch((i=t.update_list[s]).id){case 1:e.soloTimes=i.val;break;case 2:e.buyTimes=i.val;break;case 3:e.coldTs=i.val;break;case 4:var n=new Ee;n.msg=Z.span("同段位已无敌手！匹配低段位的对手将","#5d3924")+Z.span("不计算星级和净胜场","#ffea05")+Z.span("，确定继续匹配吗？","#5d3924"),n.yesCaller=this,n.yesFun=this.toSoloFight,n.yesArgs=[2],EF.showVO(n)}cs.checkRedPoint(),this.dispatch("ATHLETICS_UPDATE_PANEL")}}}else ce.addTip(t.err_code)},i.toSoloRecentInfo=function(){if(Ne.isOpenSoloRanking()){var t=new Object;t.className="m_solo_ranking_recent_info_tos",this.sendSocketMessage(t)}},i.onSoloRecentInfo=function(t){0==t.err_code?(cs.recentInfoToc=t,cs.checkRewardRedPoint(),this.settlementPanel&&this.settlementPanel.isPopup()&&this.settlementPanel.update()):ce.addTip(t.err_code)},i.toSoloGetReward=function(){var t=new Object;t.className="m_solo_ranking_get_reward_tos",this.sendSocketMessage(t)},i.onSoloGetReward=function(t){0==t.err_code?(cs.recentInfoToc.reward_type=3,cs.checkRewardRedPoint(),Jt.addTip("成功领取奖励"),this.settlementPanel&&this.settlementPanel.isPopup()&&this.settlementPanel.update()):ce.addTip(t.err_code)},i.openSettlementPanel=function(t){void 0===t&&(t=0),this.settlementPanel=this.settlementPanel||Aa.getIns(3e3,"soloRanking.SoloRankingSettlementPanel"),this.settlementPanel.openWindow(),this.settlementPanel.tabSelected=t,this.toSoloRecentInfo()},i.updateSettlementPanel=function(){this.settlementPanel&&this.settlementPanel.isPopup()&&(this.settlementPanel.openWindow(),this.toSoloRecentInfo())},i.openRankPanel=function(){this.rankPanel=this.rankPanel||Aa.getIns(3e3,"soloRanking.SoloRankingRankPanel"),this.rankPanel.openWindow(),xr.ins().toGetRank(2001)},i.updateRankPanel=function(t){2002!=t&&2001!=t||this.rankPanel&&this.rankPanel.isPopup()&&this.rankPanel.update()},i.openMatchPanel=function(){this.matchPanel=this.matchPanel||Aa.getIns(3e3,"soloRanking.SoloRankingMatchPanel"),this.matchPanel.openWindow(),this.matchPanel.update()},i.destroyResoruce=function(){this.settlementPanel&&(this.settlementPanel.destroy(),this.settlementPanel=null),this.rankPanel&&(this.rankPanel.destroy(),this.rankPanel=null),this.matchPanel&&(this.matchPanel.destroy(),this.matchPanel=null),this.resultPanel&&(this.resultPanel.destroy(),this.resultPanel=null)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ka=function(t){function e(){this.battlefieldView=null,this.readyView=null,this.lastTimeRankPanel=null,this.resultPanel=null,this.battleSkillPanel=null,this.battlefieldBattlePanel=null,this._battleHelpPanel=null,this._battleRulePanel=null,this._battleSettingPanel=null,this._battleRewardShowPanel=null,e.__super.call(this)}w(e,"modules.battlefieldOfShura.BattlefieldOfAshuraCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_BATTLE_FIELD_SHURA_PANEL",this,this.openBattleFieldView),this.addMessageListener("OPEN_LAST_TIME_RANK_PANEL",this,this.openLastTimeRankPanel),this.addMessageListener("OPEN_BATTLE_FIELD_SKILL_PANEL",this,this.openBattleSkillPanel),this.addMessageListener("OPEN_BATTLE_FIELD_READY_PANEL",this,this.openReadyView),this.addMessageListener("OPEN_BATTLE_FIELD_RULE_PANEL",this,this.openBattleRulePanel),this.addMessageListener("OPEN_BATTLE_FIELD_SETTING_PANEL",this,this.openBattleSettingPanel),this.addMessageListener("NOTICE_LINK_CLICK",this,this.noticeLinkClick),this.addMessageListener("ENTER_MAP",this,this.enterBattlefieldOfShura),this.addMessageListener("PAL_DIE",this,this.palDie),this.addMessageListener("PAL_ROLE_QUIT",this,this.palQuit),this.addMessageListener("TOUCHINT_JOYSTICK",this,this.clearAttInfo),this.addMessageListener("ANIMAL_DIE",this,this.monsterDie),this.addMessageListener("FIGHT_CASE__ON_FIGHT_WORK",this,this.onFightAttck),T.register("ON_SYS_CONFIG",this,this.onSysConfig),T.register("ON_SYS_UPDATE",this,this.onSysConfig),this.addSocketListener("m_sawlu_battle_collect_toc",this,this.onBattleCollect),this.addSocketListener("m_sawlu_battle_info_toc",this,this.onBattleInfo),this.addSocketListener("m_sawlu_battle_set_toc",this,this.onBattleSet),this.addSocketListener("m_sawlu_battle_fight_info_toc",this,this.onBattleFightInfo),this.addSocketListener("m_sawlu_battle_upgrade_toc",this,this.onBattleUpgradeSkill),this.addSocketListener("m_sawlu_battle_other_info_toc",this,this.onBattleOtherRoleInfo),this.addSocketListener("m_sawlu_battle_use_skill_toc",this,this.onBattleUseSkill),this.addSocketListener("m_sawlu_battle_notice_toc",this,this.onBattleNotic),this.addSocketListener("m_sawlu_battle_rank_toc",this,this.onBattleRank),this.addSocketListener("m_sawlu_battle_kill_toc",this,this.onBattleKill),this.addSocketListener("m_sawlu_battle_result_toc",this,this.onBattleResult),this.addSocketListener("m_sawlu_battle_part_toc",this,this.onBattlePart),this.addSocketListener("m_sawlu_battle_first_pos_toc",this,this.onBattleFristPos)},i.clearAttInfo=function(){ds.removeLockedTarget()},i.palDie=function(t){ua.isBattlefieldOfShuraMap()&&(t==ds.attRoleInfo?(T.dispatch("CAN_NOT_AUTO_HIT"),this.clearAttInfo(),WS&&WS.main&&0!=WS.main.lockedTarget&&WS.main.lockedTarget==t&&(this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.allHeadItemSelectFalse(),WS.main.lockedTarget=0)):WS&&WS.main&&WS.main.pvo.pal_id==t?(this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.showRoleDieBox(),this.clearAttInfo(),WS.main.stopTouchMove(),WS.main.lockedTarget=0,T.dispatch("CAN_NOT_AUTO_HIT"),Jl.ins().stopJoystick()):ds.attRoleInfo&&!ds.attBuffMonsterID&&WS&&WS.main&&(WS.main.lockedTarget=ds.attRoleInfo))},i.palQuit=function(t){ua.isBattlefieldOfShuraMap()&&t==ds.attRoleInfo&&(ds.attRoleInfo=0,T.dispatch("CAN_NOT_AUTO_HIT"),WS&&WS.main&&(WS.main.lockedTarget=0))},i.enterBattlefieldOfShura=function(){ua.isBattlefieldOfShuraMap()?(this.createBattlefieldUI(),T.dispatch("CAN_NOT_AUTO_HIT"),WS&&WS.main&&(WS.main.lockedTarget=0),T.dispatch("PLAYS_CLOSE_PANEL"),this.updateBattleSettings()):(this.removeBattlefieldUIs(),this.battleSkillPanel&&this.battleSkillPanel.parent&&this.battleSkillPanel.closeWindow(),this.closeHelpPanel())},i.monsterDie=function(t){var e;if(ds.attBuffMonsterID||ua.isBattlefieldOfShuraMap())for(var i in Se.monsterDict)if((e=Se.monsterDict[i]).pvo.monster_id==ds.attBuffMonsterID&&e.pvo.type_id==t){this.clearAttInfo(),T.dispatch("CAN_NOT_AUTO_HIT"),WS&&WS.main&&(WS.main.lockedTarget=0);break}},i.openBattleFieldView=function(){Ne.isOpenBattleField()?0!=se.has("modules/battlefieldOfShura")?(this.battlefieldView=this.battlefieldView||new HC,this.battlefieldView.openWindow()):se.add("modules/battlefieldOfShura",null,this,this.openBattleFieldView):Jt.addTip("等级达到100级后开启")},i.openReadyView=function(){this.readyView=this.readyView||new WC,this.readyView.openWindow()},i.openLastTimeRankPanel=function(){this.lastTimeRankPanel=this.lastTimeRankPanel||new ZC,this.lastTimeRankPanel.openWindow()},i.openResultPanel=function(t,e,i,s,n){this.resultPanel=this.resultPanel||new eP,this.resultPanel.setResultInfo(t,e,i,s,n),this.resultPanel.openWindow()},i.openBattleSkillPanel=function(){this.battleSkillPanel=this.battleSkillPanel||new zC,this.battleSkillPanel.openWindow()},i.createBattlefieldUI=function(){el.ins().hideQuitBtn(),this.dispatch("CAN_NOT_AUTO_HIT"),this.toBattleFightInfo(),this.battlefieldBattlePanel=this.battlefieldBattlePanel||new GC,lt.uiLayer.addChild(this.battlefieldBattlePanel),Jl.ins().createJoystick()},i.removeBattlefieldUIs=function(){Jl.ins().delectJoystick(),ds.resetBattleInfo(),this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&(this.battlefieldBattlePanel.removeSelf(),this.battlefieldBattlePanel.destroy(!0),this.battlefieldBattlePanel=null)},i.openHelpPenal=function(){this._battleHelpPanel=this._battleHelpPanel||new XC,this._battleHelpPanel.openWindow()},i.closeHelpPanel=function(){this._battleHelpPanel&&this._battleHelpPanel.parent&&this._battleHelpPanel.closeWindow()},i.enterBattlefieldMap=function(){Lr.ins().toMapChange(30300),this.closeAllOpenView()},i.closeAllOpenView=function(){this.battlefieldView&&this.battlefieldView.parent&&this.battlefieldView.closeWindow(),this.readyView&&this.readyView.parent&&this.readyView.closeWindow(),this.lastTimeRankPanel&&this.lastTimeRankPanel.parent&&this.lastTimeRankPanel.closeWindow(),this.battleSkillPanel&&this.battleSkillPanel.parent&&this.battleSkillPanel.closeWindow(),this.closeHelpPanel()},i.checkMonster=function(){var t,e,i=Se.monsterDict;if(WS&&WS.main&&WS.main.pt&&(t=WS.main.pt),t)for(var s in i)if(e=i[s],Rt.isEqual(e.pt,t)||Rt.distance(Ot.xyToPt(e.pt.x,e.pt.z),t)<=2){ds.tagMonsterCollect!=e.pvo.monster_id&&(ds.tagMonsterCollect=e.pvo.monster_id,this.toBattleCollect(e.pvo.monster_id));break}},i.findOtherRoles=function(){var t;if(ds.initFindRoles(),WS&&WS.main&&WS.main.pt&&(t=WS.main.pt),t){for(var e in Se.roleDict){var i=Se.roleDict[e];i instanceof com.scene.unit.MyPal||i.inMapSlice&&ds.setFindRole(100*Math.floor(i.id/100))}0<ds.nowFindedRoles.length?this.toBattleOtherRoleInfo(ds.nowFindedRoles):this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateOtherRoleInfo([]),this.battlefieldBattlePanel.setNextRoleBtnVisible(3<ds.nowFindedRoles.length)}},i.openBattleRulePanel=function(){this._battleRulePanel=this._battleRulePanel||new KC,this._battleRulePanel.openWindow()},i.openBattleSettingPanel=function(){this._battleSettingPanel=this._battleSettingPanel||new QC,this._battleSettingPanel.openWindow()},i.openBattleRewardPanel=function(){this._battleRewardShowPanel=this._battleRewardShowPanel||new iP,this._battleRewardShowPanel.openWindow()},i.toBattleCollect=function(t){var e=new Object;e.className="m_sawlu_battle_collect_tos",e.monster_id=t,this.sendSocketMessage(e)},i.onBattleCollect=function(t){var e;if(0==t.err_code)for(var i in this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.collectAndkillInfoShow("collect"),Se.monsterDict)if((e=Se.monsterDict[i]).pvo&&e.pvo.monster_id==t.monster_id){e.isCollect=!0,this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.addCollectMove(e.pvo.type_id);break}},i.toBattleFightInfo=function(){var t=new Object;t.className="m_sawlu_battle_fight_info_tos",this.sendSocketMessage(t)},i.onBattleFightInfo=function(t){0==t.err_code?(ds.endTime=t.end_ts,ds.skills=t.skills,ds.nowLevel=t.level,this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&(this.battlefieldBattlePanel.updateSkillUpgrade(),this.battlefieldBattlePanel.updateSelfInfo(t.score,t.level,t.exp)),this.battleSkillPanel&&this.battleSkillPanel.parent&&this.battleSkillPanel.update()):ce.addTip(t.err_code)},i.toBattleInfo=function(){var t=new Object;t.className="m_sawlu_battle_info_tos",this.sendSocketMessage(t)},i.onBattleInfo=function(t){0==t.err_code?(ds.historyKill=t.kill,ds.historyRank=t.rank,ds.historyScroe=t.score,ds.battleRoleID=t.fight_pal_id,ds.assistRoleIDs=t.assist_pal_ids,ds.cdEnterTime=t.exit_time,this.readyView&&this.readyView.parent&&this.readyView.update(),this.lastTimeRankPanel&&this.lastTimeRankPanel.parent&&this.lastTimeRankPanel.updateHistoryInfo(t.score,t.kill,t.rank)):ce.addTip(t.err_code)},i.toBattleOtherRoleInfo=function(t){var e=new Object;e.className="m_sawlu_battle_other_info_tos",e.role_ids=t,this.sendSocketMessage(e)},i.onBattleOtherRoleInfo=function(t){if(0==t.err_code){var e;for(var i in t.role_info)e=t.role_info[i],this.updateRoleLevelEff(!1,e.level,e.role_id,e.score);ds.naerbyRole=t.role_info;var s=ds.getCanShowHeadRoleId();0<s.length&&this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateOtherRoleInfo(s)}else ce.addTip(t.err_code)},i.toBattleSet=function(){var t=new Object;t.className="m_sawlu_battle_set_tos",t.assist_pal_ids=ds.assistRoleIDs,t.fight_pal_id=ds.battleRoleID,this.sendSocketMessage(t)},i.onBattleSet=function(t){0==t.err_code?this.enterBattlefieldMap():ce.addTip(t.err_code)},i.toBattleUpgradeSkill=function(t){var e=new Object;e.className="m_sawlu_battle_upgrade_tos",e.skill_id=t,this.sendSocketMessage(e)},i.onBattleUpgradeSkill=function(t){0==t.err_code?(ds.updateSkillLevel(t.skill_id,t.skill_level),this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateSkillUpgrade(),this.battleSkillPanel&&this.battleSkillPanel.parent&&this.battleSkillPanel.update()):ce.addTip(t.err_code)},i.toBattleUseSkill=function(t,e){var i=new Object;i.className="m_sawlu_battle_use_skill_tos",i.skill_id=t,i.target_id=e,this.sendSocketMessage(i)},i.onBattleUseSkill=function(t){0==t.err_code?(this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.skillCdShow(t.skill_id),Or.ins().showBattlefieldSkillBuff(t.skill_id,t.target_id)):ce.addTip(t.err_code)},i.onBattleKill=function(t){this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.addKillInfo(t.role_name,t.kill_role_name)},i.onBattleNotic=function(t){ds.nowLevel=t.level,ds.score=t.score,this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateSelfInfo(t.score,t.level,t.exp),this.battleSkillPanel&&this.battleSkillPanel.parent&&this.battleSkillPanel.update()},i.onBattleRank=function(t){this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateRanking(t.ranking,t.my_rank)},i.onBattleResult=function(t){this.openResultPanel(t.ranking,t.rank,t.kill,t.score,t.get_score),this._battleSettingPanel&&this._battleSettingPanel.parent&&this._battleSettingPanel.closeWindow(),this._battleRulePanel&&this._battleRulePanel.parent&&this._battleRulePanel.closeWindow()},i.onBattlePart=function(t){this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateBattlePart(t.part)},i.onBattleFristPos=function(t){this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.showFristRolePos(t.actor_id,t.tx,t.tx)},i.onFightAttck=function(t){if(ua.isBattlefieldOfShuraMap())if(pe.isMyPal(t.src_id)){for(var e in t.attacks)i=t.attacks[e],pe.isMyPal(i.actor_id)||ds.pushInMeAtt(i.actor_id)}else{var i,s=t.attacks;for(var e in s)i=s[e],pe.isMyPal(i.actor_id)&&ds.pushInAtt(t.src_id)}},i.updateRoleLevelEff=function(t,e,i,s){var n;if(void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),t)WS&&WS.main&&ua.isBattlefieldOfShuraMap()&&0==ds.isUnShowLevelEff&&(WS.main.updateBattlefieldLevelEff(e),WS.main.createBattlefieldScoreImg(ds.getScoreImgByScore(s)));else if(!(i<=0))for(var o in Se.roleDict)if(n=Se.roleDict[o],i==100*Math.floor(n.id/100)&&ua.isBattlefieldOfShuraMap()&&0==ds.isUnShowLevelEff){n.updateBattlefieldLevelEff(e),n.addBattlefieldScoreImg(ds.getScoreImgByScore(s));break}},i.noticeLinkClick=function(t){12001==t&&Za.ins().closeChatPanel()},i.onSysConfig=function(){ds.battleSys=ds.getSystemBattleSetting(),ds.battleSys<=1&&(ds.battleSys=22221);var t=Math.floor(ds.battleSys/1e4);ds.isUnShowRoleFashion=1==t;var e=Math.floor(ds.battleSys%1e4/1e3);ds.isUnShowCollect=1==e;var i=Math.floor(ds.battleSys%1e4%1e3/100);ds.isUnShowSkillEff=1==i;var s=Math.floor(ds.battleSys%1e4%1e3%100/10);ds.isUnShowLevelEff=1==s,ds.joyMod=Math.floor(ds.battleSys%1e4%1e3%100%10),this.updateBattleSettings();var n=""+t+i+s+ds.joyMod;pt.send(48,1,"修罗战场-设置-"+n)},i.updateBattleSettings=function(){if(ua.isBattlefieldOfShuraMap()){if(Jl.ins().updateJoyStickMod(),this.battlefieldBattlePanel&&this.battlefieldBattlePanel.parent&&this.battlefieldBattlePanel.updateSkillBtnShowMod(),ds.isUnShowLevelEff)for(t in Se.roleDict)Se.roleDict[t].unloadLevelEff();else this.updateRoleLevelEff(!0,ds.nowLevel);if(ds.isUnShowRoleFashion){for(t in Se.roleDict)Se.roleDict[t].setAutoSkin();WS&&WS.main&&WS.main.hideTile()}else{var t;for(t in Se.roleDict)Se.roleDict[t].resetPalSkin();WS&&WS.main&&WS.main.showTitle()}}},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),ja=function(t){function e(){this._BDPanel=null,this._qqyxdtPrivilegeView=null,this._blueDiamondTip=null,e.__super.call(this)}w(e,"modules.blueDiamond.BlueDiamondModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_BLUE_DIAMOND_PANEL",this,this.openPanel),this.addMessageListener("OPEN_QQ_YXDT_PRIVILEGE_VIEW",this,this.openQQyxdtPrivilegeView),this.addMessageListener("SHOW_BULE_DIAMON_TIP",this,this.showBlueDiamondTip),this.addMessageListener("UN_SHOW_BULE_DIAMON_TIP",this,this.unShowBlueDiamondTip),this.addMessageListener("QQYXDTSDK_BUY_BLUE_VIP_CALLBACK",this,this.toRoleBlueVipBuy),this.addSocketListener("m_role_blue_vip_info_toc",this,this.onGetInfo),this.addSocketListener("m_role_blue_vip_get_reward_toc",this,this.onGetReward),this.addSocketListener("m_role_blue_vip_buy_toc",this,this.onRoleBlueVipBuy),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo),this.addMessageListener("ROLE_LEVEL_UP",this,this.updateRoleLevel)},i.enterGameToInfo=function(){if(Qa.ins(),0!=Bt.isQQyxdt())for(var t=1;t<7;t++)_t.setTimeout(this,this.toGetInfo,[t],St.ENTER_DELAY)},i.updateRoleLevel=function(){0!=Bt.isQQyxdt()&&(ps.updatePrivilegeRedPoint(),ps.updateDiamondVipRedPoint())},i.openPanel=function(){se.has("modules/blueDiamond")?(this._BDPanel=this._BDPanel||new nP,this._BDPanel.openWindow(null,!0)):se.add("modules/blueDiamond","正在加载蓝钻模块",this,this.openPanel)},i.openQQyxdtPrivilegeView=function(){this._qqyxdtPrivilegeView=this._qqyxdtPrivilegeView||new aP,this._qqyxdtPrivilegeView.openWindow(null,!0)},i.toGetReward=function(t,e){var i=new Object;i.className="m_role_blue_vip_get_reward_tos",i.reward_id=e,i.type=t,this.sendSocketMessage(i)},i.onGetReward=function(t){0==t.err_code?(Jt.addTip("领取成功"),ps.updateRoleBlueVipInfoByGetReward(t.type,t.reward_id),this.dispatch("ROLE_BULE_VIP_REWARD_UPDATE",t.type),this.toGetInfo(t.type)):ce.addTip(t.err_code)},i.toGetInfo=function(t){void 0===t&&(t=1);var e=new Object;e.className="m_role_blue_vip_info_tos",e.type=t,this.sendSocketMessage(e)},i.onGetInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(ps.updateRoleBlueVipInfo(t.type,t.info),this.dispatch("ROLE_VIP_INFO_UPDATE",t.type))},i.toRoleBlueVipBuy=function(){var t=new Object;t.className="m_role_blue_vip_buy_tos",this.sendSocketMessage(t)},i.onRoleBlueVipBuy=function(t){pe.updateRoleBlueVipInfo(t.blue_vip),this.dispatch("ROLE_BLUE_VIP_INFO_UPDATE"),ps.updateDiamondVipRedPoint()},i.showBlueDiamondTip=function(t){this._blueDiamondTip=this._blueDiamondTip||new Oh,lt.uiLayer.addChild(this._blueDiamondTip),this._blueDiamondTip.updateTipShow(t)},i.unShowBlueDiamondTip=function(){this._blueDiamondTip&&this._blueDiamondTip.parent&&this._blueDiamondTip.removeSelf()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Qa=function(t){function e(){e.__super.call(this)}w(e,"modules.blueDiamond.blueVipShow.BlueVipOutShow",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ROLE_BLUE_VIP_INFO_UPDATE",this,this.updateMyVipShow)},i.updateMyVipShow=function(){var t=WS.main;t&&t.showMyBlueVip()},i.showVipByString=function(t,e,i,s,n){if(!Bt.isQQyxdt())return 0;var o=0;(t=t||"").length<=0&&(t="");var a=t.split("#");return 4==a.length?("true"==a[0]?(e.skin="modules/qqBlueVip/blue28"+a[3]+".png",o=1,e.x=s):"true"==a[2]&&(e.skin="modules/qqBlueVip/superblue28"+a[3]+".png",o=1,e.x=s),"true"==a[1]&&(i.skin="modules/qqBlueVip/yearblue28.png",i.visible=!0,o=2,i.x=s,e.x=s-30),e.visible=!0,i.y=e.y=n):(e.visible=i.visible=!1,o=0),o},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),za=function(t){function e(){e.__super.call(this)}w(e,"modules.broadcast.BroadcastModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_broadcast_common_toc",this,this.onBroadcast)},i.onBroadcast=function(t){if(ys.checkRegrow(t.min_regrow,t.max_regrow)&&(0==t.min_level||0<t.min_level&&pe.myLevel>=t.min_level)&&(0==t.max_level||0<t.max_level&&pe.myLevel<=t.max_level)){var e;fs.isCarryFlag(t.bc_type,2)&&this.appendToChat(t,1e4,3),fs.isCarryFlag(t.bc_type,3)&&this.appendToChat(t,2e4,3),fs.isCarryFlag(t.bc_type,4)&&this.appendToChat(t,3e4,3),fs.isCarryFlag(t.bc_type,6)&&(e=ys.getMsg(t.bc_id,t.strings,t.nums),T.dispatch("CHAT_APPEND_MSG_TO_PREVIEW",e,3)),fs.isCarryFlag(t.bc_type,5)&&(e=e||ys.getMsg(t.bc_id,t.strings,t.nums),e=Z.span("[公告]","#fff21a",26)+e,Bt.isXYX9992()||this.showInBroadcaster(e));var i=!1,s=0;if(fs.isCarryFlag(t.bc_type,7)&&T.dispatch("BEACH_BOSS_WIN",t),fs.isCarryFlag(t.bc_type,8)&&(i=!0,s=3,this.appendToChat(t,4e4,3)),fs.isCarryFlag(t.bc_type,9)&&(i=!0,s=3,this.appendToChat(t,5e4,3)),i){var n=new Object;n.className="p_chat_record",n.bc_id=t.bc_id,n.msg_type=s,n.strings=t.strings,n.nums=t.nums,n.tstamp=ya.serverTime,ws.addPreviewMsgs(n)}fs.isCarryFlag(t.bc_type,10)&&(e=e||ys.getMsg(t.bc_id,t.strings,t.nums),e=Z.span("[公告]","#fff21a",26)+e,this.showInBroadcaster(e))}},i.showInBroadcaster=function(t){null!=t&&gs.add(t)},i.appendToChat=function(t,e,i){T.dispatch("CHAT_APPEND_MSG_TO_CHANNEL",t,e,i)},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e._ins=null,e}(),$a=function(t){function e(){e.__super.call(this)}w(e,"modules.buff.BuffModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_map_actor_buff_update_toc",this,this.onBuffUpdate)},i.onBuffUpdate=function(t){vs.updateBuff(t),T.dispatch("ACTOR_BUFF_UPDATE",t.actor_id)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Za=function(t){function e(){this.panel=null,this.preview=null,this.labaSendView=null,this.labaBrocast=null,this.crossPreview=null,this.lastTime=NaN,this.lastStr=null,e.__super.call(this)}w(e,"modules.chat.ChatModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_chat_in_channel_toc",this,this.onChannel),this.addSocketListener("m_chat_channel_history_toc",this,this.onHistory),this.addSocketListener("m_chat_ban_role_toc",this,this.onMaskBlackMessage),this.addSocketListener("m_chat_in_pairs_toc",this,this.onInPairs),this.addSocketListener("m_chat_laba_info_toc",this,this.onLabaInfo),this.addSocketListener("m_role_gm_talk_toc",this,this.onGmTalk),this.addSocketListener("m_chat_pairs_list_toc",this,this.onPairsList),this.addSocketListener("m_chat_pairs_update_toc",this,this.onChatPairsUpdate),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("CHAT_OPEN_PANEL",this,this.openChatPanel),this.addMessageListener("CHAT_PREVIEW_UPDATE",this,this.updatePreview),this.addMessageListener("FAMILY_LEAVE",this,this.exitFamily),this.addMessageListener("CHAT_APPEND_MSG_TO_CHANNEL",this,this.appendMsgToChannel),this.addMessageListener("CHAT_APPEND_MSG_TO_PREVIEW",this,this.appendMsgToPreview),this.addMessageListener("COPY_ENTER",this,this.copyEnter),this.addMessageListener("COPY_EXIT",this,this.copyExit),this.addMessageListener("ENTER_MAP",this,this.enterMap),this.addMessageListener("CHAT_PANEL_UPDATE",this,this.updateChatPanel)},i.onLabaInfo=function(t){null!=this.labaSendView&&1==this.labaSendView.displayedInStage&&this.labaSendView.onInfo(t)},i.enterMap=function(){0<ca.mapID&&0<ca.lastMap&&!ua.checkSameCrossOrSameLocal(ca.mapID,ca.lastMap)&&(ws.crossAndLocalChangeReset(),ua.isCross()?(this.toHistory(4e4),this.toHistory(5e4)):(this.toHistory(1e4),this.toHistory(3e4))),this.showPreview(),_t.setTimeout(this,this.toPairsList,null,St.ENTER_DELAY)},i.showPreview=function(){0!=se.has("modules/chat")?ua.isCross()?(this.crossPreview=this.crossPreview||new SP,this.crossPreview&&!this.crossPreview.parent&&(lt.crossUiLayer.addChild(this.crossPreview),this.crossPreview.zOrder=1e4),ua.isCrossMain()?this.crossPreview.show(1):(ua.isCrossTower()||ua.isCrossTowerBoss())&&this.crossPreview.show(2),this.crossPreview.tab.selectedIndex=0,this.crossPreview.showChat()):ua.isMainMap()&&this.preview?this.preview.bottom=260:ua.isBattlefieldOfShuraMap()&&this.preview&&(this.preview.bottom=450):se.add("modules/chat","正在加载聊天模块",this,this.showPreview)},i.toPairsList=function(){var t=new Object;t.className="m_chat_pairs_list_tos",this.sendSocketMessage(t)},i.onPairsList=function(t){t&&(ws.setChatPairsList(t.chat_info),ws.checkPrivateChatNewsRedPoint(),this.updateChatPanel())},i.copyEnter=function(t){1!=t&&this.preview&&this.preview.parent&&!ua.isBattlefieldOfShuraMap()&&(this.preview.bottom=180)},i.copyExit=function(t){1!=t&&this.preview&&this.preview.parent&&(this.preview.bottom=260)},i.showOrHidePreviewRedPoint=function(t){ua.isCross()?this.crossPreview.showOrHideRedPoint(t):this.preview&&this.preview.parent&&this.preview.showOrHideRedPoint(t)},i.showOrHideCrossPreviewRedPoint=function(t){ua.isCrossTower()&&this.crossPreview&&this.crossPreview.parent&&this.crossPreview.showOrHideTabRedPoint(t)},i.appendMsgToPreview=function(t,e){if(0==ua.isCross()){var i=new Object;i.className="p_chat_record",i.bc_id=1e4,i.msg_type=e,i.strings=[t],i.nums=[],i.tstamp=ya.serverTime,ws.addPreviewMsgs(i),this.preview&&this.preview.addOneRecord(i)}},i.appendMsgToChannel=function(t,e,i){var s=new Object;s.className="p_chat_record",s.bc_id=t.bc_id,s.msg_type=i,s.strings=t.strings,s.nums=t.nums,s.tstamp=ya.serverTime,ws.updateChatMsgsByChannel(s,e),this.dispatch("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",s),this.panel&&this.panel.isPopup()&&this.panel.onMessage(s,e),ua.isCross()&&this.crossPreview&&(1e4==e&&2==ws.curCrossPreviewTabIndex?this.crossPreview.addOneRecord(s):4e4==e&&ws.curCrossPreviewTabIndex<2?this.crossPreview.addOneRecord(s):2e4==e&&3==ws.curCrossPreviewTabIndex?this.crossPreview.addOneRecord(s):5e4!=e||4!=ws.curCrossPreviewTabIndex&&0!=ws.curCrossPreviewTabIndex||this.crossPreview.addOneRecord(s))},i.exitFamily=function(){ws.setMsgsByChannel(2e4,[]),ws.hasFamilyCach=!1},i.toInPairs=function(t,e,i){void 0===i&&(i=1);var s=new Object;s.className="m_chat_in_pairs_tos",s.to_role_id=t,s.msg=e,s.msg_type=i,this.sendSocketMessage(s)},i.checkMaskFailMsg=function(t){return t&&""!=t?t=(t=t.replace(/font-size:\w+;?/g,"")).replace(/font:\w+;?/g,""):""},i.onInPairs=function(t){if(0==t.err_code){t.msg=this.checkMaskFailMsg(t.msg),2==t.msg_type&&t.form_role_id==pe.roleID&&Jt.addTip("已发送邀请");var e=0,i=NaN;if(0==t.return_self){e=2,i=t.form_role_id;var s=new Object;s.className="p_chat_record",s.bc_id=1e4,s.msg_type=4;var n=new Object;n.className="p_chat_role";var o=jn.getFriendByRoleId(t.form_role_id);o||(o=qn.getFriendByRoleId(t.form_role_id)),o&&(n.vip_level=o.vip_lv,n.sex=o.sex),n.role_id=t.form_role_id,s.role_info=n,s.strings=[t.msg],s.nums=[],s.tstamp=t.ts,ws.addPreviewMsgs(s),ua.isCross()&&this.crossPreview?this.crossPreview.addOneRecord(s):this.preview&&this.preview.addOneRecord(s),t.form_role_id==ws.curPrivateChatRoleId&&this.toChatPairsUpdate(t.form_role_id)}else e=1,i=ws.curPrivateChatRoleId;var a=null,l=ws.getWarningTips(t.msg,t.form_role_id);l&&""!=l&&(a=l),ws.updatePrivateChatMsg(i,e,t.msg,t.bg_color,a),0==t.return_self&&0<t.form_role_id&&(ws.curPrivateChatRoleId==t.form_role_id?ws.updatePrivateChatMsgUnread(t.form_role_id,0):ws.updatePrivateChatMsgUnread(t.form_role_id,1)),T.dispatch("FRIEND_UPDATE_PRIVATE_PANEL_BY_PAIRS",t.return_self,t.form_role_id),jn.sortFriendList(),this.updateChatPanel(),ws.checkPrivateChatNewsRedPoint(),this.dispatch("FRIEND_UPDATE_PANEL"),0==t.return_self&&this.showOrHidePreviewRedPoint(!0)}else ce.addTip(t.err_code)},i.toChatPairsUpdate=function(t){var e=new Object;e.className="m_chat_pairs_update_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onChatPairsUpdate=function(t){0==t.err_code?(ws.updatePrivateChatMsgUnread(t.target_role_id,0),ws.checkPrivateChatNewsRedPoint(),this.updateChatPanel()):ce.addTip(t.err_code)},i.onEnterGame=function(){_t.setTimeout(this,this.toGetHistory,null,St.ENTER_DELAY)},i.toGetHistory=function(){this.preview=this.preview||new gP,this.preview&&!this.preview.parent&&lt.uiLayer.addChildAt(this.preview,0),ua.isCross()&&(this.toHistory(4e4),this.toHistory(5e4)),this.toHistory(1e4),this.toHistory(2e4),this.toHistory(3e4)},i.updatePreview=function(){ua.isCross()&&this.crossPreview?this.crossPreview.update():this.preview&&this.preview.update()},i.openLabaSendView=function(){0!=se.has("modules/chat")?(this.labaSendView=this.labaSendView||new pP,this.labaSendView.openWindow(null,!0)):se.add("modules/chat","正在加载聊天模块",this,this.openLabaSendView)},i.openChatPanel=function(t){void 0===t&&(t=0),0!=se.has("modules/chat")?(kr.ins.toAvatarFrameInfo(),this.panel=this.panel||new _P,this.panel.openWindow(),this.panel.tab.selectedIndex=t,this.panel.update()):se.add("modules/chat","正在加载聊天模块",this,this.openChatPanel,[t])},i.closeChatPanel=function(){this.panel&&this.panel.isPopup()&&this.panel.closeWindow()},i.updateChatPanel=function(){this.panel&&this.panel.isPopup()&&this.panel.update()},i.toSendMsg=function(t,e,i){if(j.checkHtmlStrRule(e)){var s=new Object;s.className="m_chat_in_channel_tos",s.channel=t,s.msg=e,s.msg_type=i,this.sendSocketMessage(s)}else Jt.addTip("包含非法字符，已屏蔽")},i.onChannel=function(t){if(0==t.err_code){if(t.msg=this.checkMaskFailMsg(t.msg),7==t.msg_type&&t.role_info)ws.isInBlack(t.role_info.role_id)||(1==re.hasView()&&(this.labaBrocast=this.labaBrocast||new dP,this.labaBrocast.add(Z.span(t.role_info.role_name+"：","#1aade4",26)+t.msg,t)),t.role_info.role_id==pe.roleID&&null!=this.labaSendView&&null!=this.labaSendView.parent&&this.labaSendView.closeWindow());var e=new Object;e.className="p_chat_record",e.bc_id=1e4,e.msg_type=t.msg_type,e.role_info=t.role_info,e.strings=[t.msg],e.nums=[],e.tstamp=t.tstamp,7==t.msg_type&&(e.show_type=t.show_type),ws.updateChatMsgsByChannel(e,t.channel),ws.curChannel==t.channel&&(1e4==ws.curChannel?this.dispatch("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",e):2e4==ws.curChannel?this.dispatch("CHAT_UPDATE_TO_FAMILY_FIGHT",e):3e4==ws.curChannel&&this.dispatch("CHAT_UPDATE_TO_NOTICE_FIGHT",e)),this.panel&&this.panel.isPopup()&&ws.curChannel==t.channel&&this.panel.onMessage(e,t.channel),0!=ua.isCross()&&1e4==t.channel||ws.addPreviewMsgs(e),ua.isCross()&&this.crossPreview?1e4==t.channel&&2==ws.curCrossPreviewTabIndex?this.crossPreview.addOneRecord(e):4e4==t.channel&&ws.curCrossPreviewTabIndex<2?this.crossPreview.addOneRecord(e):(2e4!=t.channel||3!=ws.curCrossPreviewTabIndex&&0!=ws.curCrossPreviewTabIndex)&&(5e4!=t.channel||4!=ws.curCrossPreviewTabIndex&&0!=ws.curCrossPreviewTabIndex)||this.crossPreview.addOneRecord(e):this.preview&&this.preview.addOneRecord(e,t),3e4!=t.channel&&this.showOrHidePreviewRedPoint(!0),t.role_info.role_id!=pe.roleID?this.showOrHideCrossPreviewRedPoint(t.channel):ws.recordSendWord(t.msg,t.msg_type,t.channel),7==t.msg_type&&t.role_info&&t.role_info.role_id==pe.roleID&&Ia.updatePrivilegeUse(1)}else ce.addTip(t.err_code)},i.toHistory=function(t){var e=new Object;e.className="m_chat_channel_history_tos",e.channel=t,this.sendSocketMessage(e)},i.onHistory=function(t){if(0==t.err_code){var e;for(var i in t.history)if((e=t.history[i]).strings)for(var s=0;s<e.strings.length;s++)e.strings[s]=this.checkMaskFailMsg(e.strings[s]);ws.setMsgsByChannel(t.channel,t.history),ua.isCross()?ws.hasCrossWorldCach&&ws.hasCrossNoticeCach&&(this.crossPreview&&this.crossPreview.update(),this.updateChatPanel(),this.dispatch("CHAT_HISTORY_BACK")):ws.hasWorldCach&&ws.hasFamilyCach&&ws.hasNoticeCach&&(this.preview&&this.preview.update(),this.updateChatPanel(),this.dispatch("CHAT_HISTORY_BACK"))}else ce.addTip(t.err_code)},i.onMaskBlackMessage=function(t){0==t.err_code?(ws.blackRole.push(t.target_role_id),ua.isCross()?ws.hasCrossWorldCach&&ws.hasCrossNoticeCach&&(this.crossPreview&&this.crossPreview.update(),this.updateChatPanel()):ws.hasWorldCach&&ws.hasFamilyCach&&ws.hasNoticeCach&&(this.preview&&this.preview.update(),this.updateChatPanel())):ce.addTip(t.err_code)},i.showOrHidePreviewView=function(t){this.preview&&(this.preview.visible=t)},i.toGmTalk=function(t){if(this.lastStr!=t)if(S.now()-this.lastTime<=12e4)Jt.addTip("操作频繁，2分钟内只能点击提交一次，重复问题无需再次提交");else{this.lastStr=t;var e=new Object;e.className="m_role_gm_talk_tos",e.content=t,this.sendSocketMessage(e)}else Jt.addTip("内容重复，重复问题无需再次提交，GM已在紧急跟进中")},i.onGmTalk=function(t){0==t.err_code?(this.lastTime=S.now(),Jt.addTip("提交成功")):ce.addTip(t.err_code)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ja=function(t){function e(){this.imgIconPool=null,e.__super.call(this)}w(e,"modules.CheckForMOC.CheckForMocModule",l);var i=e.prototype;return i.initListeners=function(){this.imgIconPool={},this.addSocketListener("m_role_show_log_toc",this,this.onRoleShowLog),this.addSocketListener("m_role_act_box_self_log_toc",this,this.onRoleActBoxSelfLog),this.addSocketListener("m_role_act_furnace_self_log_toc",this,this.onRoleActFurnaceSelfLog),this.addSocketListener("m_role_act_fairy_self_log_toc",this,this.onRoleActFairySelfLog)},i.createCheckShowIcon=function(t,e,i,s,n,o){if(void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=0),this.imgIconPool[e]instanceof Array&&this.imgIconPool[e][t]instanceof laya.ui.Image&&this.imgIconPool[e][t].parent==i)return 0<o&&Cs.getActBoxlogByActId(o)&&(1==Cs.getActBoxlogByActId(o).type?this.imgIconPool[e][t].visible=!0:0==Cs.getActBoxlogByActId(o).type&&(this.imgIconPool[e][t].visible=!1)),this.imgIconPool[e][t];if(0<o&&Cs.getActBoxlogByActId(o)&&0==Cs.getActBoxlogByActId(o).type)return null;var a=new et;a.skin="com/ui/txtBg7.png";var l=new jt;return l.size(a.width,a.height),l.align="center",l.valign="middle",l.text=1==t?"概率":"记录",l.fontSize=20,l.color=2==e?"#815841":"#E1C6BC",a.x=s,a.y=n,a.addChild(l),a.mouseEnabled=!0,a.on("click",this,this.onClickIcon,[t,e,o]),i&&i.addChild(a),this.imgIconPool[e]instanceof Array||(this.imgIconPool[e]=[]),this.imgIconPool[e][t]=a},i.onClickIcon=function(t,e,i){switch(void 0===i&&(i=0),console.log("点击点击点击！！"),t){case 2:this.showReCordPanel(e,i);break;case 1:this.showProbabilityPanel(e,i)}},i.showReCordPanel=function(t,e){void 0===e&&(e=0),new TP(2,t,e).openWindow()},i.showProbabilityPanel=function(t,e){void 0===e&&(e=0),new TP(1,t,e).openWindow()},i.toRoleShowLog=function(t){var e=new Object;e.className="m_role_show_log_tos",e.log_id=t,this.sendSocketMessage(e)},i.onRoleShowLog=function(t){0==t.err_code?(Cs.logArr=t.logs,T.dispatch("UPDATE_RECORD_VIEW_SHOW")):ce.addTip(t.err_code)},i.toRoleActBoxSelfLog=function(t){var e=new Object;e.className="m_role_act_box_self_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onRoleActBoxSelfLog=function(t){0==t.err_code?(Cs.setActBoxlogToc(t.act_id,t),this.dispatch("UPDATE_ACT_BOX_LOG_INFO")):ce.addTip(t.err_code)},i.toRoleActFurnaceSelfLog=function(t){var e=new Object;e.className="m_role_act_furnace_self_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onRoleActFurnaceSelfLog=function(t){0==t.err_code?(Cs.setActBoxlogToc(t.act_id,t),this.dispatch("UPDATE_ACT_BOX_LOG_INFO"),this.dispatch("UPDATE_ACT_FURNACE_ITEM_INFO",t.item_list)):ce.addTip(t.err_code)},i.toRoleActFairySelfLog=function(t){var e=new Object;e.className="m_role_act_fairy_self_log_tos",e.act_id=t,this.sendSocketMessage(e)},i.onRoleActFairySelfLog=function(t){0==t.err_code?(Cs.setActBoxlogToc(t.act_id,t),this.dispatch("UPDATE_ACT_BOX_LOG_INFO"),this.dispatch("UPDATE_ACT_FAIRY_ITEM_INFO",t.item_list)):ce.addTip(t.err_code)},e.ins=function(){return e._instance=e._instance||new e},e._instance=null,e}(),tl=function(t){function e(){this.needShowEffect=!1,this.curEffectImg=null,this.bossPanel=null,this.noticePanel=null,this.worldkillNotePanel=null,this.helpPanel=null,this.relivePanel=null,this.reliveSmallView=null,this.regrowKillNotePanel=null,this.regrowRewardsPanel=null,this.rollPanel=null,this.hasOpenRollPanel=!1,this.shieldRolePanel=null,this.callBossPanel=null,e.__super.call(this)}w(e,"modules.commonCopy.boss.BossCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_BOSS_PANEL",this,this.openBossPanel),this.addMessageListener("COPY_TIME_UPDATE",this,this.updateBossPanel),this.addMessageListener("ROLE_LEVEL_UP",this,this.updateBossPanel),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.checkRp),this.addMessageListener("ROLE_ALL_DEAD",this,this.doDead),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("OPEN_CALL_BOSS_PANEL",this,this.openCallBossPanel),this.addMessageListener("REGROWLV_UP",this,this.onRegrowLvUp),this.addMessageListener("CROSS_DAY",this,this.onCrossDay),this.addMessageListener("ENTER_GAME",this,this.toDelayInfo),this.addSocketListener("m_world_boss_info_toc",this,this.onWorldBossInfo),this.addSocketListener("m_world_boss_notice_set_toc",this,this.onBossNoticeSet),this.addSocketListener("m_world_boss_role_hurt_toc",this,this.onBossHurt),this.addSocketListener("m_role_copy_team_hurt_toc",this,this.onMulBossHurt),this.addSocketListener("m_world_boss_revive_toc",this,this.onRevive),this.addSocketListener("m_role_regrow_boss_history_toc",this,this.onRegrowHistory),this.addSocketListener("m_role_regrow_boss_enter_toc",this,this.onRegrowBossEnter),this.addSocketListener("m_role_regrow_boss_roll_toc",this,this.onRegrowRoll),this.addSocketListener("m_role_call_boss_time_toc",this,this.onCallBossTime),this.addSocketListener("m_role_call_boss_call_toc",this,this.onCallBoss),this.addSocketListener("m_role_regrow_boss_attack_toc",this,this.onRegrowBossAttack),this.addSocketListener("m_role_regrow_boss_info_toc",this,this.onRoleRegrowBossInfo)},i.toDelayInfo=function(){_t.setTimeout(this,this.toCheckRegrowBossRP,null,St.ENTER_DELAY)},i.onRegrowLvUp=function(){this.updateBossPanel(),1==pe.myRegrow&&this.toCheckRegrowBossRP()},i.onCrossDay=function(){this.toCheckRegrowBossRP()},i.toCheckRegrowBossRP=function(){if(0<pe.myRegrow){new Date;var t=new Date;t.setTime(1e3*ya.serverTime);var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds();e<Ps.REGROW_BOSS1[0]?_t.setTimeout(this,this.toRoleRegrowBossInfo,null,1e3*(Ps.REGROW_BOSS1[0]-e)):e>Ps.REGROW_BOSS1[1]?Nt.hide("RP_REGROW_BOSS"):this.toRoleRegrowBossInfo()}},i.toRoleRegrowBossInfo=function(){var t=new Object;t.className="m_role_regrow_boss_info_tos",this.sendSocketMessage(t)},i.onRoleRegrowBossInfo=function(t){0<t.err_code?ce.addTip(t.err_code):t.is_live?Nt.show("RP_REGROW_BOSS"):Nt.hide("RP_REGROW_BOSS")},i.resultCallBack=function(t){el.ins().toExit(),this.openBossPanel(t)},i.toRegrowBossAttack=function(){this.needShowEffect=!0;var t=new Object;t.className="m_role_regrow_boss_attack_tos",this.sendSocketMessage(t)},i.onRegrowBossAttack=function(t){0==t.err_code?(OP.ins().updateAttackBtn(t.cold_ts),this.needShowEffect&&(this.needShowEffect=!1,this.tweenEffect())):ce.addTip(t.err_code)},i.tweenEffect=function(){null==this.curEffectImg&&(this.curEffectImg=new et,this.curEffectImg.skin="modules/boss/spcSkillName.png");var t=Math.floor(lt.stageWidth/2)-162,e=Math.floor(lt.stageHeight/2)-43,i=t-150,s=e-200;this.curEffectImg.pos(t,e),this.curEffectImg.alpha=1,this.curEffectImg.scale(.5,.5,!0),lt.windowLayer.addChild(this.curEffectImg),ie.to(this.curEffectImg,{x:i,y:s,scaleX:1.5,scaleY:1.5},500,A.circInOut,Q.create(this,this.tweenMoveComplete,null,!0))},i.tweenMoveComplete=function(){ie.to(this.curEffectImg,{alpha:0},500,A.circInOut,Q.create(this,this.tweenVisibleComplete,null,!0))},i.tweenVisibleComplete=function(){this.curEffectImg.removeSelf()},i.onEnterMap=function(){ua.isRegrowBossMap()?OP.show():ua.isWorldBossMap()?(this.toWorldBossInfo(3),this.openShieldRolePanel()):ua.isTeamCopyMap()?this.openShieldRolePanel():(this.hasOpenRollPanel=!1,Se.justHideRole=!1,OP.remove(),this.closeRelivePanel(),this.closeRollPanel(),this.closeReliveSmallView(),this.closeShieldRolePanel())},i.doDead=function(t){t==pe.roleID&&(ua.isWorldBossMap()?this.openRelivePanel():ua.isRegrowBossMap()?OP.isChooseRelife()?_t.setTimeout(el.ins(),el.ins().toRoleRelive,[1],1e3):this.openRelivePanel():ua.isMonsterCopyMap()&&this.openRelivePanel("你已经被异兽BOSS击败，可选择自动复活或立即复活"))},i.toWorldBossInfo=function(t,e){void 0===e&&(e=0);var i=new Object;i.className="m_world_boss_info_tos",i.boss_id=e,i.op_type=t,this.sendSocketMessage(i)},i.onWorldBossInfo=function(t){if(0==t.err_code){switch(t.op_type){case 1:Ts.LastChallenge=t.challenge_times,Ts.nextReviveTs=t.next_revive_ts,Ts.bossInfo=t.boss_base,Ts.lastOutTime=t.attack_boss,this.bossPanel&&this.bossPanel.parent&&this.bossPanel.updateWorldView();break;case 2:Ts.killRecord=t.kill_record,this.worldkillNotePanel&&this.worldkillNotePanel.parent&&this.worldkillNotePanel.update(t.kill_record);break;case 3:Ts.unNoticeBoss=t.un_notice_id,this.noticePanel&&this.noticePanel.parent&&this.noticePanel.update()}this.checkWorldRp()}else ce.addTip(t.err_code)},i.toBossNoticeSet=function(){Ts.updateUnnoticeBossByClient();var t=Ts.getNoticeChangeData();if(t&&0<t.length){var e=new Object;e.className="m_world_boss_notice_set_tos",e.notice_info=t,this.sendSocketMessage(e)}},i.onBossNoticeSet=function(t){0==t.err_code?(this.checkWorldRp(),this.bossPanel&&this.bossPanel.parent&&this.bossPanel.updateWorldView(),Jt.addTip("修改成功")):ce.addTip(t.err_code)},i.onBossHurt=function(t){As.updateBossHurt(t.role_hurt,t.own_hurt),el.ins().updateBossHurt()},i.onMulBossHurt=function(t){As.updateBossHurtByID(t.hurt_info),el.ins().updateMulBossHurt()},i.onRevive=function(t){Ts.bossReviveNote&&0<Ts.bossReviveNote.length?Ts.bossReviveNote=t.boss_state:(Ts.bossReviveNote=t.boss_state,this.toWorldBossInfo(3)),this.toWorldBossInfo(1),this.checkReviveTip(),this.checkWorldRp()},i.checkReviveTip=function(){var t=Ts.checkShowTipBoss(),e=Ts.getBossVO(t);e&&this.dispatch("BOSS_REVIVE",[e.bossName+"重生了！"])},i.checkRp=function(){this.checkWorldRp(),this.checkRoleRp()},i.checkWorldRp=function(){if(Ne.isBossOpen()&&0<Ts.LastChallenge&&0<Ts.checkShowRPBoss())return void Nt.show("RP_BOSS_WORLD");Nt.hide("RP_BOSS_WORLD")},i.checkRoleRp=function(){Es.checkBossRole()},i.toRegrowHistory=function(t){var e=new Object;e.className="m_role_regrow_boss_history_tos",e.boss_id=t,this.sendSocketMessage(e)},i.onRegrowHistory=function(t){0==t.err_code?(Ts.updateRegrowHistory(t.boss_id,t.last_hurt_rank),this.updateRegrowKillNotePanel(t.boss_id)):ce.addTip(t.err_code)},i.toRegrowBossEnter=function(){Ts.curRegrowBossIndex=ks.getRegrowBossIndex();var t=new Object;t.className="m_role_regrow_boss_enter_tos",this.sendSocketMessage(t)},i.onRegrowBossEnter=function(t){0==t.err_code?(As.curBossID=t.boss_id,modules.commonCopy.boss.BossCase.ins().closeBossPanel(),Lr.ins().toMapChange(t.map_id)):ce.addTip(t.err_code)},i.toRegrowRoll=function(t,e){var i=new Object;i.className="m_role_regrow_boss_roll_tos",i.boss_id=t,i.is_giveup=e,this.sendSocketMessage(i)},i.onRegrowRoll=function(t){0==t.err_code?(0<t.roll||null==Ts.rollToc?Ts.rollToc=t:(Ts.rollToc.max_roll_name=t.max_roll_name,Ts.rollToc.max_roll=t.max_roll,Ts.rollToc.begin_ts=t.begin_ts),this.updateRollPanel()):ce.addTip(t.err_code)},i.openBossPanel=function(t){void 0===t&&(t=0),Ne.isBossOpen()?se.has("modules/boss")?(el.ins().toCopyTime(),this.bossPanel=this.bossPanel||new RP,this.bossPanel.showViewByIndex(t)):se.add("modules/boss",null,this,this.openBossPanel,[t]):Jt.addTip("修仙之路通关10关后开启")},i.updateBossPanel=function(){this.bossPanel&&this.bossPanel.isPopup()&&this.bossPanel.update()},i.updateWorldBossView=function(){this.bossPanel&&this.bossPanel.parent&&this.bossPanel.updateWorldView()},i.closeBossPanel=function(){this.bossPanel&&this.bossPanel.closeWindow()},i.openNoticePanel=function(){this.noticePanel=this.noticePanel||new EP,this.noticePanel.openWindow(),this.toWorldBossInfo(3)},i.openWorldKillNotePanel=function(t){this.worldkillNotePanel=this.worldkillNotePanel||new HP,this.worldkillNotePanel.openWindow(),this.toWorldBossInfo(2,t)},i.openRoleHelpPanel=function(){this.helpPanel=this.helpPanel||new YP,this.helpPanel.openWindow()},i.openRelivePanel=function(t){void 0===t&&(t=""),this.relivePanel=this.relivePanel||new GP,this.relivePanel.openWindow(),this.relivePanel.updateDesc(t)},i.openReliveSmallView=function(t){this.reliveSmallView=this.reliveSmallView||new WP,this.reliveSmallView.open(t)},i.closeReliveSmallView=function(){this.reliveSmallView&&this.reliveSmallView.parent&&this.reliveSmallView.close()},i.closeRelivePanel=function(){this.relivePanel&&this.relivePanel.isPopup()&&this.relivePanel.closeWindow()},i.openRegrowKillNotePanel=function(t){this.regrowKillNotePanel=this.regrowKillNotePanel||new NP,this.regrowKillNotePanel.openWindow()},i.updateRegrowKillNotePanel=function(t){this.regrowKillNotePanel&&this.regrowKillNotePanel.isPopup()&&this.regrowKillNotePanel.update(Ts.getRegrowHistory(t))},i.openRegrowRewardsPanel=function(t){void 0===t&&(t=0),this.regrowRewardsPanel=this.regrowRewardsPanel||new BP,this.regrowRewardsPanel.openWindow(),this.regrowRewardsPanel.select=t},i.openRollPanel=function(){this.rollPanel=this.rollPanel||new MP,this.rollPanel.openWindow()},i.closeRollPanel=function(){this.rollPanel&&this.rollPanel.isPopup()&&this.rollPanel.closeWindow()},i.updateRollPanel=function(){this.hasOpenRollPanel||(this.openRollPanel(),this.hasOpenRollPanel=!0),this.rollPanel.updateRoll()},i.openShieldRolePanel=function(){this.shieldRolePanel=this.shieldRolePanel||new $P,this.shieldRolePanel.open()},i.closeShieldRolePanel=function(){this.shieldRolePanel&&this.shieldRolePanel.parent&&this.shieldRolePanel.close()},i.openCallBossPanel=function(t){se.has("modules/boss")?(this.callBossPanel=this.callBossPanel||new kP,this.callBossPanel.goodsType=t.typeid,this.callBossPanel.checkOpen()):se.add("modules/boss",null,this,this.openCallBossPanel,[t])},i.updateCallBossPanel=function(){this.callBossPanel&&this.callBossPanel.parent&&this.callBossPanel.update()},i.closeCallBossPanel=function(){this.callBossPanel&&this.callBossPanel.parent&&this.callBossPanel.closeWindow()},i.toCallBossTime=function(){var t=new Object;t.className="m_role_call_boss_time_tos",this.sendSocketMessage(t)},i.onCallBossTime=function(t){0==t.err_code?(Ts.updateCallBossTimes(t.time_info),this.updateCallBossPanel()):ce.addTip(t.err_code)},i.toCallBoss=function(t){var e=new Object;e.className="m_role_call_boss_call_tos",e.item_id=t,this.sendSocketMessage(e)},i.onCallBoss=function(t){0==t.err_code?(As.curBossID=t.boss_id,this.closeCallBossPanel(),Lr.ins().toMapChange(t.map_id)):ce.addTip(t.err_code)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),el=function(t){function e(){this.tipPanel=null,this.curQuickFinishMap=0,this.tempEndRewardTocVO=null,this.delayKey=0,this.quit=null,this.blood=null,e.__super.call(this)}w(e,"modules.commonCopy.CommonCopyModule",l);var i=e.prototype;return i.initListeners=function(){nl.getInstance(),rl.ins(),hl.ins(),cl.ins(),this.addSocketListener("m_copy_enter_info_toc",this,this.onEnter),this.addSocketListener("m_copy_exit_toc",this,this.onExit),this.addSocketListener("m_copy_times_toc",this,this.onCopyTime),this.addSocketListener("m_copy_quick_finish_toc",this,this.onQuickFinish),this.addSocketListener("m_copy_times_update_toc",this,this.onCopyTimeUpdate),this.addSocketListener("m_copy_end_reward_toc",this,this.onCopyEndReward),this.addSocketListener("m_copy_shutdown_toc",this,this.onShutDown),this.addSocketListener("m_role_relive_toc",this,this.onRoleRelive),this.addSocketListener("m_copy_buy_times_toc",this,this.onCopyBuyTimes),this.addMessageListener("BOSS_FIGHT_DEST",this,this.checkOpenBossBlood),this.addMessageListener("BOSS_FIGHT_SRC",this,this.updateBossGoal),this.addMessageListener("ENTER_MAP",this,this.onChangeMap),this.addMessageListener("ROLE_LEVEL_UP",this,this.toCopyTime),this.addMessageListener("REGROWLV_UP",this,this.toCopyTime),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("ACTOR_BUFF_UPDATE",this,this.updateBossBuff),this.addMessageListener("CROSS_DAY",this,this.onCrossDay),this.addMessageListener("STORY_SHOW_CALL_BACK",this,this.storyShowCallBack),this.addSocketListener("m_role_copy_hidden_toc",this,this.onRoleCopyHide)},i.onCrossDay=function(){EF.closeAlert()},i.onShutDown=function(t){As.shutDownTime=t.time,this.dispatch("COPY_SHUT_DOWN_UPDATE")},i.openBagFullTipPanel=function(){this.tipPanel=this.tipPanel||new mT,this.tipPanel.openWindow()},i.toRoleRelive=function(t){var e=new Object;e.className="m_role_relive_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleRelive=function(t){0==t.err_code?this.dispatch("ROLE_RELIVE",t.op_type):ce.addTip(t.err_code)},i.onChangeMap=function(){this.closeBossBlood()},i.toCopyTime=function(){var t=new Object;t.className="m_copy_times_tos",this.sendSocketMessage(t)},i.onCopyTime=function(t){0==t.err_code?(As.copyTimeDatas=t.all_copy_times,Es.checkTimeCopyRedPoint(),Yo.checkBaiLingYuanRP(),T.dispatch("COPY_TIME_UPDATE")):ce.addTip(t.err_code)},i.onCopyTimeUpdate=function(t){As.updateCopyTimeDatas(t.copy_times),Es.checkTimeCopyRedPoint(),Yo.checkBaiLingYuanRP(),this.dispatch("COPY_TIME_UPDATE")},i.toQuickFinish=function(t,e){this.curQuickFinishMap=t;var i=new Object;i.className="m_copy_quick_finish_tos",i.map_id=t,i.is_buy=e,this.sendSocketMessage(i)},i.onQuickFinish=function(t){if(0==t.err_code){As.updateCopyTimeDatas(t.cur_copy_times),Es.checkTimeCopyRedPoint(),Yo.checkBaiLingYuanRP(),this.dispatch("COPY_TIME_UPDATE"),this.dispatch("COPY_QUICK_FINISH");var e,i,s=[];for(var n in t.rewards)i=t.rewards[n],ur.isEquip(i.id)&&5==(e=ur.getItem(i.id)).color&&s.push(e);Re.ins.add(s)}else ce.addTip(t.err_code)},i.onCopyEndReward=function(t){if(0==t.err_code){if(ua.isCopyEternalSkyMap(t.map_id))return void this.dispatch("COPY_ETERNAL_SKY_OPEN_RESULT_PANEL");if(2==t.result&&ga.checkIsNeedShowStory(2,t.map_id))this.tempEndRewardTocVO=t,this.delayKey=_t.setTimeout(this,this.timeOutShowStoryView,null,1e3);else{var e=Es.getResultVO(t.result,t.map_id,t.result_extra,t.rewards);_t.clearTimeout(this.delayKey),this.delayKey=_t.setTimeout(this,this.delayShowResult,[e],1e3),this.dispatch("COPY_REWARD_TOC")}}else ce.addTip(t.err_code)},i.timeOutShowStoryView=function(){T.dispatch("STORY_SHOW",2)},i.storyShowCallBack=function(){if(this.tempEndRewardTocVO){var t=Es.getResultVO(this.tempEndRewardTocVO.result,this.tempEndRewardTocVO.map_id,this.tempEndRewardTocVO.result_extra,this.tempEndRewardTocVO.rewards);this.delayShowResult(t),this.dispatch("COPY_REWARD_TOC"),this.tempEndRewardTocVO=null}},i.delayShowResult=function(t){ia.show(t),Ws.clearReborn()},i.onEnter=function(t){As.curCopyType=t.copy_type,Mr.isAutoHit||0!=ua.isPlaysBeachBossMap()||T.dispatch("AUTO_HIT"),this.dispatch("COPY_ENTER",[t.copy_type])},i.onEnterMap=function(){var t=this;ua.isCross()?(re.closeAllWindow(),this.dispatch("SHOW_NAVBAR"),lt.uiLayer.visible=!1,lt.crossUiLayer.visible=!0):(lt.uiLayer.visible=!0,lt.crossUiLayer.visible=!1,ua.isMainMap()?(t.dispatch("ICONLIST_SHOW"),t.dispatch("ICONLISTV_SHOW"),hl.ins().enterPanel&&hl.ins().enterPanel.isPopup()?t.dispatch("HIDE_NAVBAR"):t.dispatch("SHOW_NAVBAR"),t.hideQuitBtn(),Za.ins().showOrHidePreviewView(!0),er.ins().showMainInfoView()):ua.isBattlefieldOfShuraMap()?(t.openQuitBtn(),or.ins().funbarVisible=!1,or.ins().leftNavBarVisible=!1,sl.ins().enterItemVisible=!1,t.dispatch("HIDE_NAVBAR"),t.dispatch("ICONLIST_HIDE"),t.dispatch("ICONLISTV_HIDE"),t.dispatch("MISSIONVIEW_HIDE"),er.ins().hideMainInfoView()):(ua.isCustomMap()||ua.isDreamCopyMap()||ua.isCopyTaliman()||ua.isFamilyCopyMap()||re.closeAllWindow(),t.openQuitBtn(),or.ins().funbarVisible=!1,or.ins().leftNavBarVisible=!1,sl.ins().enterItemVisible=!1,t.dispatch("ICONLIST_HIDE"),t.dispatch("ICONLISTV_HIDE"),t.dispatch("MISSIONVIEW_HIDE")))},i.toExit=function(){if(console.warn("toExitMap"),!ua.isMainMap()){var t=new Object;t.className="m_copy_exit_tos",this.sendSocketMessage(t)}},i.onExit=function(t){this.hideQuitBtn(),this.closeBossBlood(),As.curBossID=0,or.ins().funbarVisible=!0,or.ins().leftNavBarVisible=!0,sl.ins().enterItemVisible=!0,this.dispatch("MISSIONVIEW_SHOW"),this.dispatch("ICONLIST_SHOW"),this.dispatch("ICONLISTV_SHOW"),this.dispatch("COPY_EXIT",[t.copy_type]),EF.closeAlert(),ua.isCopyZhuXianRoad()&&cl.ins().removeRoadColorInfoView(),ll.ins().clearBlood()},i.toRoleCopyHide=function(t){void 0===t&&(t=!0);var e=new Object;e.className="m_role_copy_hidden_tos",e.flag=t?1:0,this.sendSocketMessage(e)},i.onRoleCopyHide=function(t){t.err_code&&ce.addTip(t.err_code)},i.toBuyCopyTimes=function(t){var e=new Object;e.className="m_copy_buy_times_tos",e.map_id=t,this.sendSocketMessage(e)},i.onCopyBuyTimes=function(t){t.err_code?ce.addTip(t.err_code):(As.updateCopyTimeDatas(t.cur_copy_times),T.dispatch("COPY_TIME_UPDATE"),T.dispatch("BUY_AND_ENTER_COPY",t.cur_copy_times))},i.openQuitBtn=function(){this.quit&&this.quit.parent?this.quit.visible=!0:(this.quit=this.quit||new tT,lt.uiLayer.addChild(this.quit))},i.hideQuitBtn=function(){this.quit&&(this.quit.visible=!1)},i.checkOpenBossBlood=function(t,e,i,s){(ua.isWorldBossMap()||ua.isRegrowBossMap()||ua.isTeamCopyMap())&&this.openBossBlood(t,e,i,s)},i.openBossBlood=function(t,e,i,s){se.has("modules/boss")?(this.blood=this.blood||new JP,null==this.blood.parent&&(this.blood.reset(),lt.uiLayer.addChild(this.blood)),this.blood.bossID=t,this.blood.monsterID=i,this.blood.updateBlood(e,s)):se.add("modules/boss","正在加载BOSS模块",this,this.openBossBlood,[t,e,i,s])},i.updateBossBuff=function(t){this.blood&&this.blood.updateShield(t)},i.updateBossGoal=function(t,e){this.blood&&this.blood.updateGoal(t,e)},i.updateBossHurt=function(){this.blood&&this.blood.updatePeopleFight(),ua.isLoveCopyMap()&&al.ins.updateBossHurt()},i.updateMulBossHurt=function(){this.blood&&this.blood.updateMulBossHurt()},i.closeBossBlood=function(){this.blood&&this.blood.removeSelf()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),il=function(t){function e(){this.soulPanel=null,this.rankPanel=null,this.enterPanel=null,this.dreamBox=null,this.towerInCopyView=null,this.ancienExoticIcon=null,this.isShowCopyAncienExotic=!1,this.ancientExoticView=null,e.__super.call(this)}w(e,"modules.commonCopy.copy.CopyCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.askDataLater),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.checkSoulCanUp),this.addMessageListener("OPEN_COPY_PANEL",this,this.openEnterPanel),this.addMessageListener("COPY_UPDATE_PANEL",this,this.updateCopyEnterPanel),this.addMessageListener("COPY_TIME_UPDATE",this,this.updateCopyEnterPanel),this.addMessageListener("COPY_QUICK_FINISH",this,this.updateCopyEnterPanel),this.addMessageListener("RANK_GOT_DATA_UPDATE",this,this.updateRank),this.addMessageListener("OPEN_COPY_ANCIENT_EXOTIC",this,this.openAncientExotic),this.addMessageListener("ICON_NOTICE",this,this.onIconNotice),this.addSocketListener("m_copy_dream_soul_info_toc",this,this.onDreamInfo),this.addSocketListener("m_copy_dream_barrier_update_toc",this,this.onBarrierUpdate),this.addSocketListener("m_copy_dream_soul_light_toc",this,this.onSoulLight),this.addSocketListener("m_copy_dream_start_chapter_toc",this,this.onStartChapter),this.addSocketListener("m_role_ancient_place_toc",this,this.onRoleAncient)},i.dreamGoNext=function(){if(Os.isNeedOpenNextDream())Jt.addTip("请先领取魂力宝箱"),this.enterPanel&&this.enterPanel.isPopup()?this.enterPanel.showViewByIndex(1):this.openEnterPanel(1);else{var t=Os.getDreamCopyVO(Os.curBarrier+1);t&&(this.closeEnterPanel(),Lr.ins().toMapChange(t.getMapID()))}},i.talimanGoNext=function(){if(Hs.GetTenRewards())Jt.addTip("请先领取十关奖励"),this.enterPanel&&this.enterPanel.isPopup()?this.enterPanel.showViewByIndex(2):this.openEnterPanel(2),this.dispatch("TALIMAN_COPY_PANEL");else{var t=Hs.infoToc.current_barrier;if(101<=t)Jt.addTip("恭喜你已通关玄法圣殿，后续关卡敬请期待！");else{this.closeEnterPanel();var e=parseInt(Hs.getMapId(t));Lr.ins().toMapChange(e)}}},i.onEnterMap=function(){ua.isMainMap()?this.onIconNotice():this.ancienExoticIcon&&this.ancienExoticIcon.parent&&this.ancienExoticIcon.removeIcon(),ua.isDreamCopyMap()?this.openTowerInCopy():this.closeTowerInCopy()},i.toStartChapter=function(t){var e=new Object;e.className="m_copy_dream_start_chapter_tos",e.new_map_id=t,this.sendSocketMessage(e)},i.onStartChapter=function(t){0==t.err_code?(Os.openChapter++,this.enterPanel&&this.enterPanel.isPopup()&&this.enterPanel.showNextTower(),this.checkDreamBox()):ce.addTip(t.err_code)},i.askDataLater=function(){_t.setTimeout(this,this.toDreamInfo,null,St.ENTER_DELAY)},i.toDreamInfo=function(){var t=new Object;t.className="m_copy_dream_soul_info_tos",this.sendSocketMessage(t)},i.onDreamInfo=function(t){0==t.err_code?(Os.openChapter=t.current_chapter,Os.curBarrier!=t.current_barrier&&(Os.curBarrier=t.current_barrier,this.dispatch("DREAM_BARRIER")),Os.soulLv=t.soul_lv,this.updateCopyEnterPanel(),this.checkRp()):ce.addTip(t.err_code)},i.checkRp=function(){this.checkSoulCanUp(),this.checkDreamBox()},i.checkSoulCanUp=function(){pe.getScore(3)>=Os.dreamSoulCost?Nt.show("RP_DREAM_SOUL"):Nt.hide("RP_DREAM_SOUL")},i.checkDreamBox=function(){Os.isNeedOpenNextDream()?Nt.show("RP_DREAM_BOX"):Nt.hide("RP_DREAM_BOX")},i.onBarrierUpdate=function(t){Os.curBarrier!=t.current_barrier&&(Os.curBarrier=t.current_barrier,this.dispatch("DREAM_BARRIER")),this.updateCopyEnterPanel(),this.checkRp()},i.toSoulLight=function(){var t=new Object;t.className="m_copy_dream_soul_light_tos",this.sendSocketMessage(t)},i.onSoulLight=function(t){0==t.err_code?(Os.soulLv++,this.soulPanel&&(this.soulPanel.update(),this.soulPanel.showUpEff()),this.checkSoulCanUp()):ce.addTip(t.err_code)},i.openSoulPanel=function(){se.has("modules/copy")?(this.soulPanel=this.soulPanel||new lT,this.soulPanel.openWindow()):se.add("modules/copy","正在加载副本模块",this,this.openSoulPanel)},i.openRankPanel=function(){se.has("modules/copy")?(xr.ins().toGetRank(1201),this.rankPanel=this.rankPanel||new oT,this.rankPanel.openWindow()):se.add("modules/copy","正在加载副本模块",this,this.openRankPanel)},i.updateRank=function(t){1201==t&&this.rankPanel&&this.rankPanel.isPopup()&&this.rankPanel.update()},i.openEnterPanel=function(t){void 0===t&&(t=0),se.has("modules/copy")?(el.ins().toCopyTime(),this.enterPanel=this.enterPanel||new uT,this.enterPanel.showViewByIndex(t),Ns.checkRedPoint()):se.add("modules/copy","正在加载副本模块",this,this.openEnterPanel,[t])},i.updateCopyEnterPanel=function(){this.enterPanel&&this.enterPanel.parent&&this.enterPanel.update()},i.closeEnterPanel=function(){this.enterPanel&&this.enterPanel.closeWindow()},i.openDreamBox=function(t){se.has("modules/copy")?(this.dreamBox=this.dreamBox||new LF,this.dreamBox.barrier=t,this.dreamBox.popup(!0)):se.add("modules/copy","正在加载副本模块",this,this.openEnterPanel,[t])},i.openTowerInCopy=function(){se.has("modules/copy")?(this.towerInCopyView=this.towerInCopyView||new pT,lt.uiLayer.addChild(this.towerInCopyView),this.towerInCopyView.update()):se.add("modules/copy","正在加载副本模块",this,this.openTowerInCopy)},i.closeTowerInCopy=function(){this.towerInCopyView&&this.towerInCopyView.parent&&this.towerInCopyView.removeSelf()},i.onIconNotice=function(){if(ao.getIconStateShow(116)){var t=ao.getIconStateDicValus(116);ua.isMainMap()||!t?t&&!G.isReviewVersion&&(Os.ancienExoticEndTime=t.end_time,this.ancienExoticIcon=this.ancienExoticIcon||new iT,this.ancienExoticIcon.showIcon(),this.isShowCopyAncienExotic=!0):this.isShowCopyAncienExotic=!0}else this.ancienExoticIcon&&this.ancienExoticIcon.parent&&this.ancienExoticIcon.removeIcon()},i.openAncientExotic=function(){se.has("modules/copy")?(this.ancientExoticView=this.ancientExoticView||new sT,this.ancientExoticView.openWindow()):se.add("modules/copy","正在加载副本模块",this,this.openAncientExotic)},i.toRoleAncient=function(){var t=new Object;t.className="m_role_ancient_place_tos",this.sendSocketMessage(t)},i.onRoleAncient=function(t){t.err_code?ce.addTip(t.err_code):(Number(t.remain_hp)<=0&&Nt.show("RP_COPY_ANCIENT_EXOTICE"),this.ancientExoticView&&this.ancientExoticView.parent&&this.ancientExoticView.update(t.remain_ts,t.remain_cd,Number(t.remain_hp)))},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e._ins=null,e}(),sl=function(t){function e(){this.enterpanel=null,this.rankPanel=null,this.enterItem=null,this.worldPanel=null,this.upTipPanel=null,e.__super.call(this)}w(e,"modules.commonCopy.custom.CustomCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("OPEN_CUSTOM_ENTER_PANEL",this,this.openEnterPanel),this.addMessageListener("OPEN_CUSTOM_RANK_PANEL",this,this.openRankPanel),this.addMessageListener("RANK_GOT_DATA_UPDATE",this,this.updateRank),this.addMessageListener("GUIDE_STEP",this,this.onGuideStep),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("EXERCISE_UPDATE_BEAST_REWARD",this,this.onUpdateReward),this.addSocketListener("m_copy_single_set_auto_challenge_toc",this,this.onAutoChallenge),this.addSocketListener("m_copy_single_chapter_info_toc",this,this.onCopySingleChapterInfo),this.addSocketListener("m_copy_single_monster_num_toc",this,this.onMonsterNum),this.addSocketListener("m_copy_single_challenge_guard_toc",this,this.onChallengGuard),this.addSocketListener("m_copy_single_phase_reward_toc",this,this.onPhaseReward)},i.onEnterMap=function(){ua.isMainMap()&&Ds.curBarrierWin?this.openUpTipPanel():Ds.curBarrierWin=!1},i.onGuideStep=function(t){},i.toCopySingleChapterInfo=function(){var t=new Object;t.className="m_copy_single_chapter_info_tos",this.sendSocketMessage(t)},i.onCopySingleChapterInfo=function(t){0==t.err_code?(19<t.current_barrier&&this.dispatch("CUSTOM_BARRIER_19"),0<Ds.curBarrier&&Ds.curBarrier!=t.current_barrier&&ol.ins().toInfo(),Ds.curBarrier!=t.current_barrier&&(Ds.curBarrier=t.current_barrier,this.dispatch("CUSTOM_BARRIER_UPDATE")),this.enterItem&&this.enterItem.update(),nr.ins().barrOk=!0,nr.ins().updateFunPreview()):ce.addTip(t.err_code)},i.toChallengGuard=function(){var t=new Object;t.className="m_copy_single_challenge_guard_tos",this.sendSocketMessage(t)},i.onChallengGuard=function(t){if(0==t.err_code){var e=Ds.getCustomVO();e&&Lr.ins().toMapChange(e.getMapID())}else ce.addTip(t.err_code)},i.onMonsterNum=function(t){pe.user.attr.current_monster_num=t.num,this.enterItem&&this.enterItem.update(),this.enterpanel&&this.enterpanel.updateWave()},i.toAutoChallenge=function(t){var e=new Object;e.className="m_copy_single_set_auto_challenge_tos",e.auto_challenge=t,this.sendSocketMessage(e)},i.onAutoChallenge=function(t){0==t.err_code||(ce.addTip(t.err_code),30940003==t.err_code&&this.setAutoChallenge(!1))},i.updateRank=function(t){1202==t&&(this.updateRankPanel(),this.updateEnterPanel())},i.toPhaseReward=function(){var t=new Object;t.className="m_copy_single_phase_reward_tos",this.sendSocketMessage(t)},i.onPhaseReward=function(t){0==t.err_code?(Ds.curRewardBarrier=t.current_reward_barrier,this.updateEnterPanel(),this.enterItem&&this.enterItem.checkRP()):ce.addTip(t.err_code)},i.openEnterPanel=function(){if(!se.has("modules/customs"))return c.send(29009),void se.add("modules/customs","正在加载主线关卡模块",this,this.openEnterPanel);c.send(29010),xr.ins().toGetRank(1202),this.enterpanel=this.enterpanel||new _T,this.enterpanel.openWindow(),this.enterpanel.update()},i.closeEnterPanel=function(){this.enterpanel&&this.enterpanel.isPopup()&&this.enterpanel.closeWindow()},i.updateEnterPanel=function(){this.enterpanel&&this.enterpanel.parent&&this.enterpanel.update()},i.onUpdateReward=function(){this.enterpanel&&this.enterpanel.isPopup()&&this.enterpanel.updateReward()},i.openRankPanel=function(){this.rankPanel=this.rankPanel||new IT,this.rankPanel.openWindow(),this.rankPanel.update()},i.updateRankPanel=function(){this.rankPanel&&this.rankPanel.parent&&this.rankPanel.update()},i.onEnterGame=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){this.toCopySingleChapterInfo(),this.enterItem=this.enterItem||new fT,lt.uiLayer.addChild(this.enterItem)},i.setAutoChallenge=function(t){this.enterItem&&this.enterItem.setBtnAuto(t)},i.openCustomWorldPanel=function(){this.worldPanel=this.worldPanel||new xT,this.worldPanel.openWindow()},i.openUpTipPanel=function(){this.upTipPanel=this.upTipPanel||new ST,this.upTipPanel.update(),this.upTipPanel.openWindow()},I(0,i,"enterItemVisible",null,function(t){this.enterItem&&(this.enterItem.visible=t)}),e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),nl=function(t){function e(){this.topView=null,this.bottomdView=null,this.imgStep=null,this.resultPanel=null,e.__super.call(this)}w(e,"modules.commonCopy.eternalSky.CopyEternalSkyCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_copy_starry_wave_info_toc",this,this.onWaveInfo),this.addSocketListener("m_copy_starry_buy_reward_toc",this,this.onBuyReward),this.addSocketListener("m_copy_starry_info_toc",this,this.onInfo),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("COPY_EXIT",this,this.onCopyExit),this.addMessageListener("COPY_SHUT_DOWN_UPDATE",this,this.updateTopView),this.addMessageListener("COPY_ETERNAL_SKY_OPEN_RESULT_PANEL",this,this.openResultPanel),this.addMessageListener("CROSS_DAY",this,this.crossDay),this.addMessageListener("COPY_TIME_UPDATE",this,this.checkRP)},i.checkRP=function(){Ns.checkRedPoint()},i.crossDay=function(){this.toInfo()},i.openResultPanel=function(){se.has("modules/copyEternalSky")?(this.resultPanel=this.resultPanel||new TT,this.resultPanel.openWindow(),this.resultPanel.update()):se.add("modules/copyEternalSky","正在加载永恒星空资源",this,this.openResultPanel)},i.showStepImage=function(){this.imgStep=this.imgStep||new et,this.imgStep.skin="modules/copyEternalSky/eternalSkyBarrier"+(Ns.wave+1)+".png",this.imgStep&&null==this.imgStep.parent&&(lt.uiLayer.addChild(this.imgStep),this.imgStep.centerX=0,this.imgStep.top=220)},i.hideStepImage=function(){this.imgStep&&this.imgStep.parent&&this.imgStep.removeSelf()},i.onCopyExit=function(){this.closeBottomdView(),this.closeTopView(),this.hideStepImage(),Ns.wave=0},i.onEnterMap=function(){ua.isCopyEternalSkyMap()&&(this.openBottomdView(),this.openTopView(),this.showStepImage())},i.openBottomdView=function(){this.bottomdView=this.bottomdView||new CT,this.bottomdView&&null==this.bottomdView.parent&&lt.uiLayer.addChild(this.bottomdView),this.updateBottomdView()},i.updateBottomdView=function(){this.bottomdView&&this.bottomdView.parent&&this.bottomdView.update()},i.closeBottomdView=function(){this.bottomdView&&this.bottomdView.parent&&this.bottomdView.removeSelf()},i.openTopView=function(){this.topView=this.topView||new kT,this.topView&&null==this.topView.parent&&lt.uiLayer.addChild(this.topView),this.updateTopView()},i.updateTopView=function(){this.topView&&this.topView.parent&&this.topView.update()},i.closeTopView=function(){this.topView&&this.topView.parent&&this.topView.removeSelf()},i.onWaveInfo=function(t){Ns.wave=t.wave,this.showStepImage(),this.bottomdView&&this.bottomdView.parent&&(this.bottomdView.update(),this.bottomdView.checkStepIsUp()),this.topView&&this.topView.parent&&this.topView.update()},i.toBuyReward=function(){var t=new Object;t.className="m_copy_starry_buy_reward_tos",this.sendSocketMessage(t)},i.onBuyReward=function(t){0==t.err_code?(Jt.addTip("成功购买礼包！"),Ns.buyRewardTimes++,this.dispatch("COPY_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toInfo=function(){var t=new Object;t.className="m_copy_starry_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){Ns.buyRewardTimes=t.buy_reward_times,Ns.checkRedPoint(),this.dispatch("COPY_UPDATE_PANEL")},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),ol=function(t){function e(){this.enterConfirmPanel=null,this.godHoodUpTip=null,this.init=!1,e.__super.call(this)}w(e,"modules.commonCopy.godHood.CopyGodHoodCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_copy_story_info_toc",this,this.onInfo),this.addSocketListener("m_role_godhood_copy_info_toc",this,this.onCopyInfo),this.addMessageListener("COPY_REWARD_TOC",this,this.onCopyRewardToc)},i.onCopyRewardToc=function(){ua.isGodHoodForbiddenMap()&&this.toCopyInfo(),ua.isGodHoodStoryMap()&&this.toInfo()},i.toCopyInfo=function(){if(0<Zn.godHoodLv){var t=new Object;t.className="m_role_godhood_copy_info_tos",this.sendSocketMessage(t)}},i.onCopyInfo=function(t){0==t.err_code?(Vs.challengTimes=t.challenge_times,Vs.nextReviveTs=t.next_revive_ts,Vs.checkForbiddenRP(),Xl.ins().updatePanel()):ce.addTip(t.err_code)},i.checkGodHoodUpTip=function(t){this.godHoodUpTip=this.godHoodUpTip||new ED,this.godHoodUpTip.update(t)},i.toInfo=function(){var t=new Object;t.className="m_copy_story_info_tos",this.sendSocketMessage(t)},i.afterGodHoodCodyHandler=function(t){this.checkGodHoodUpTip(t),el.ins().toExit()},i.afterGodHoodFightHandler=function(){el.ins().toExit(),me.linkTo(11802)},i.afterGodHoodForbiddenHandler=function(){el.ins().toExit(),me.linkTo(11803)},i.onInfo=function(t){Vs.passedMaxChapter=t.passed_max_chapter,Vs.openedMaxChapter=t.opened_max_chapter,Xl.ins().updatePanel(),Vs.checkStoryRP()},i.showEnterConfirmPanel=function(){this.enterConfirmPanel=this.enterConfirmPanel||new LT,this.enterConfirmPanel.openWindow(),this.enterConfirmPanel.update()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),al=function(t){function e(){this._invitePanel=null,this._loveCopyPanel=null,this._skillTipsView=null,this._flowerSkillPowerView=null,this._shieldSkillView=null,this._flowerSkillInteractiveView=null,this.blood=null,this.cdID=-1,this._skillTipsTId=0,this._curFlowerPowerNum=0,e.__super.call(this)}w(e,"modules.commonCopy.loveCopy.LoveCopyCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("LOVE_COPY_JOIN_TEAM",this,this.joinTeam),this.addMessageListener("LOVE_COPY_OPEN_INVITE_PANEL",this,this.onOpenInvitePanel),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("CROSS_DAY",this,this.toLoveCopyTimes),this.addMessageListener("REGROWLV_UP",this,this.toLoveCopyTimes),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("COPY_EXIT",this,this.onCopyExit),this.addMessageListener("STORY_SHOW_CALL_BACK",this,this.storyShowCallBack),this.addMessageListener("RANK_GOT_DATA_UPDATE",this,this.onGetRankInfoBack),this.addMessageListener("BOSS_FIGHT_DEST",this,this.checkOpenBossBlood),this.addMessageListener("BOSS_FIGHT_SRC",this,this.updateBossGoal),this.addMessageListener("FRIEND_NUM_UPDATE",this,this.onFriendUpdate),this.addMessageListener("MONSTER_ENTER",this,this.onMonsterEnter),this.addSocketListener("m_role_team_create_toc",this,this.onTeamCreate),this.addSocketListener("m_role_team_join_toc",this,this.onTeamJoin),this.addSocketListener("m_role_team_exit_toc",this,this.onLeaveTeam),this.addSocketListener("m_copy_times_toc",this,this.onLoveCopyTimes),this.addSocketListener("m_role_copy_marry_ready_toc",this,this.onRoleCopyTeamReady),this.addSocketListener("m_copy_marry_skill_toc",this,this.onSkillState),this.addSocketListener("m_copy_marry_shield_toc",this,this.onSwitchShieldResult),this.addSocketListener("m_role_team_broadcast_toc",this,this.onRoleTeamBroadcast),this.addSocketListener("m_copy_marry_skill_qte_toc",this,this.onGetFlowerSKillEvaluateBack),this.addSocketListener("m_copy_marry_skill_own_hurt_toc",this,this.onFlowerSkillHurtBack),this.addSocketListener("m_role_copy_marry_finish_toc",this,this.onLoveCopyFinish),this.addSocketListener("m_copy_marry_history_hurt_toc",this,this.onGetMyHistoryHurt),this.addSocketListener("m_copy_marry_hurt_toc",this,this.onGetMyCurHurt)},i.joinTeam=function(t){var e=new Object;e.className="m_role_team_join_tos",e.team_id=t,Ms.isJoinTeam=!0,this.sendSocketMessage(e)},i.onTeamJoin=function(t){Ms.isJoinTeam&&(Ms.isJoinTeam=!1,0<t.err_code?ce.addTip(t.err_code):(Ms.clearTeamData(),Ms.teamID=t.team_id,Ms.teamRoles=t.role_ids,Ms.leaderID=t.leader_id,this.openLoveCopyPanel(),Ul.getInstance().closePrivateChatPanel()))},i.createTeam=function(){var t=new Object;t.className="m_role_team_create_tos",t.copy_id=9,this.sendSocketMessage(t)},i.onTeamCreate=function(t){9==t.copy_id&&(0<t.err_code?ce.addTip(t.err_code):(Ms.clearTeamData(),Ms.teamID=t.team_id,Ms.leaderID=pe.roleID,Ms.teamRoles=t.role_ids,Jt.addTip("创建队伍成功"),this.openLoveCopyPanel()))},i.leaveTeam=function(){var t=new Object;t.className="m_role_team_exit_tos",t.team_id=Ms.teamID,this.sendSocketMessage(t)},i.onLeaveTeam=function(t){t.team_id==Ms.teamID&&(0<t.err_code?ce.addTip(t.err_code):(this._loveCopyPanel&&this._loveCopyPanel.parent&&this._loveCopyPanel.closeWindow(),1<Ms.teamRoles.length?Jt.addTip("成功退出队伍"):Jt.addTip("队伍已解散"),Ms.clearTeamData()))},i.openLoveCopyPanel=function(t,e){void 0===t&&(t=10901),void 0===e&&(e=0),0!=se.has("modules/loveCopy")?(_t.clearTimeout(this.cdID),this._loveCopyPanel||(this._loveCopyPanel=new GT,this._loveCopyPanel.on("undisplay",this,this.onUnDisplay)),this._loveCopyPanel.parent||this._loveCopyPanel.openWindow(),Ms.mapId=t,this._loveCopyPanel.setData(t,e)):se.add("modules/loveCopy","加载."+Os.loveCopyVO.copyName+"资源",this,this.openLoveCopyPanel,[t,e])},i.onOpenInvitePanel=function(){Wl.ins().toInfo(1,1),this._invitePanel=this._invitePanel||new $F,this._invitePanel.openWindow(),this._invitePanel.update()},i.onFriendUpdate=function(){this._invitePanel&&this._invitePanel.parent&&this._invitePanel.update()},i.onUnDisplay=function(){this._shieldSkillView&&this._shieldSkillView.parent||this._flowerSkillInteractiveView&&this._flowerSkillInteractiveView.parent||this._skillTipsView&&this._skillTipsView.parent||this._loveCopyPanel&&this._loveCopyPanel.parent||this._flowerSkillPowerView&&this._flowerSkillPowerView.parent||(this.cdID=_t.setTimeout(this,this.clearRes,null,ya.coldTime))},i.clearRes=function(){this._shieldSkillView&&(this._shieldSkillView.destroy(),this._shieldSkillView=null),this._flowerSkillInteractiveView&&(this._flowerSkillInteractiveView.destroy(),this._flowerSkillInteractiveView=null),this._skillTipsView&&(this._skillTipsView.destroy(),this._skillTipsView=null),this._loveCopyPanel&&(this._loveCopyPanel.destroy(),this._loveCopyPanel=null),this._flowerSkillPowerView&&(this._flowerSkillPowerView.destroy(),this._flowerSkillPowerView=null),null!=this.blood&&(this.blood.destroy(),this.blood=null),se.destroy("modules/loveCopy")},i.onEnterGame=function(){_t.setTimeout(this,this.toLoveCopyTimes,null,St.ENTER_DELAY)},i.toLoveCopyTimes=function(){var t=new Object;t.className="m_copy_times_tos",this.sendSocketMessage(t)},i.onLoveCopyTimes=function(t){0<t.err_code?ce.addTip(t.err_code):(Ms.handleChallengeTimes(t),Ms.checkRP(),this.dispatch("COPY_UPDATE_PANEL"))},i.toRoleCopyTeamReady=function(t){var e=new Object;e.className="m_role_copy_marry_ready_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleCopyTeamReady=function(t){0<t.err_code?ce.addTip(t.err_code):(Ms.handlerRoleReady(t.role_id,t.op_type),this._loveCopyPanel&&this._loveCopyPanel.parent&&this._loveCopyPanel.updateReadyView(),Ms.checkAllRoleReady()?gk.ins.showCountDown("即将进入"+Os.loveCopyVO.copyName,5,Q.create(Lr.ins(),Lr.ins().toMapChange,[10901],!0),Q.create(this,this.toRoleCopyTeamReady,[0],!0)):gk.ins.parent&&gk.ins.closeWindow())},i.onSkillState=function(t){var e=13==t.skill_id;1==t.op_type?this.showSkillNameTips(t.skill_id):3==t.op_type&&this.hideSkillNameTips(),e&&(2==t.op_type?this.showFlowerSkillInteractiveView():3==t.op_type&&this.hideFlowerSkillInteractiveView()),_t.clearTimeout(this.cdID)},i.showSkillNameTips=function(t){this._skillTipsView||(this._skillTipsView=new ik,this._skillTipsView.on("undisplay",this,this.onUnDisplay)),this._skillTipsView.updateTips(t),this._skillTipsView.parent||lt.uiLayer.addChild(this._skillTipsView)},i.hideSkillNameTips=function(){this._skillTipsView.parent&&this._skillTipsView.parent.removeChild(this._skillTipsView)},i.showFlowerSkillPowerView=function(){this.hideSkillNameTips(),this._flowerSkillPowerView||(this._flowerSkillPowerView=new MT,this._flowerSkillPowerView.on("undisplay",this,this.onUnDisplay)),this._flowerSkillPowerView.updateTips(Ms.addRate,Ms.ownHurtRate),Ms.addRate=0,this._flowerSkillPowerView.parent||(lt.uiLayer.addChild(this._flowerSkillPowerView),Yn.ins().showEff(10405004,pe.roleID)),_t.clearTimeout(this._skillTipsTId),this._skillTipsTId=_t.setTimeout(this,this.hideFlowerSkillPowerView,[],2e3)},i.hideFlowerSkillPowerView=function(){_t.clearTimeout(this._skillTipsTId),this._flowerSkillPowerView&&this._flowerSkillPowerView.removeSelf()},i.showFlowerSkillInteractiveView=function(){this._flowerSkillInteractiveView||(this._flowerSkillInteractiveView=new BT,this._flowerSkillInteractiveView.on("undisplay",this,this.onUnDisplay)),this._flowerSkillInteractiveView.openWindow()},i.hideFlowerSkillInteractiveView=function(){this._flowerSkillInteractiveView&&this._flowerSkillInteractiveView.removeSelf()},i.toSwitchShield=function(t){var e=new Object;e.className="m_copy_marry_shield_tos",e.op_type=t,this.sendSocketMessage(e)},i.onSwitchShieldResult=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e=1==t.op_type?"红莲业火":"寒霜冰封",i=1==t.op_type?"红莲护盾":"寒霜护盾";Jt.addTip("切换为"+i+"：可抵御"+e+"攻击"),Ms.curSkillType=t.op_type}},i.onEnterMap=function(){ua.isLoveCopyMap()&&(this._shieldSkillView||(this._shieldSkillView=new ek,this._shieldSkillView.on("undisplay",this,this.onUnDisplay)),this._shieldSkillView.parent||lt.uiLayer.addChild(this._shieldSkillView),_t.clearTimeout(this.cdID))},i.onCopyExit=function(){this._shieldSkillView&&this._shieldSkillView.removeSelf(),this._flowerSkillInteractiveView&&this._flowerSkillInteractiveView.removeSelf(),this._skillTipsView&&this._skillTipsView.removeSelf(),this._flowerSkillPowerView&&this._flowerSkillPowerView.removeSelf(),null!=this.blood&&(this.blood.removeSelf(),this.blood=null),Yn.ins().stopEffect(10405004,pe.roleID)},i.onRoleTeamBroadcast=function(t){Ms.isInTeam()&&(Ms.handlerRole(t.role_id,t.type),0<t.leader_id&&(Ms.leaderID=t.leader_id),this._loveCopyPanel&&this._loveCopyPanel.parent&&this._loveCopyPanel.updateReadyView())},i.toSendFlowerSkillEvaluate=function(t){var e=new Object;e.className="m_copy_marry_skill_qte_tos",e.evaluate=t,this._flowerSkillInteractiveView&&this._flowerSkillInteractiveView.closeWindow(),this.sendSocketMessage(e)},i.onGetFlowerSKillEvaluateBack=function(t){0<t.err_code?ce.addTip(t.err_code):(Ms.addRate+=t.add_rate,this._curFlowerPowerNum++,this._curFlowerPowerNum>=Ms.curTeamRoleNum&&(this.showFlowerSkillPowerView(),this._curFlowerPowerNum=0))},i.onFlowerSkillHurtBack=function(t){Ms.ownHurtRate=t.add_rate,this._curFlowerPowerNum>=Ms.curTeamRoleNum&&this.showFlowerSkillPowerView()},i.onLoveCopyFinish=function(t){Ms.handleFinishParam(t),this.toLoveCopyTimes(),_t.setTimeout(this,this.timeOutShowStoryView,null,1e3)},i.timeOutShowStoryView=function(){T.dispatch("STORY_SHOW",2,10901)},i.storyShowCallBack=function(){if(ua.isLoveCopyMap()){var t=new Object;t.className="p_tkv",t.type=5,t.id=10408101,t.val=Ms.score;var e=Es.getResultVO(2,10901,Ms.hurt,[t]);ia.show(e),this.dispatch("COPY_REWARD_TOC")}},i.toGetRankInfo=function(){xr.ins().toGetRank(1203)},i.onGetRankInfoBack=function(t){1203==t&&this._loveCopyPanel&&this._loveCopyPanel.parent&&this._loveCopyPanel.updateRankView()},i.onGetMyHistoryHurt=function(t){Ms.myHistoryHurt=t.hurt,this.blood&&this.blood.updatePeopleFight()},i.onGetMyCurHurt=function(t){Ms.myCurHurt=t.hurt,this.blood&&this.blood.updatePeopleFight()},i.checkOpenBossBlood=function(t,e,i,s){ua.isLoveCopyMap()&&this.openBossBlood(t,e,i,s)},i.openBossBlood=function(t,e,i,s){this.blood=this.blood||new VT,null==this.blood.parent&&(this.blood.reset(),lt.uiLayer.addChild(this.blood)),this.blood.bossID=t,this.blood.monsterID=i,this.blood.updateBlood(e),this.blood.updatePeopleFight()},i.updateBossGoal=function(t,e){this.blood&&this.blood.updateGoal(t,e)},i.updateBossHurt=function(){this.blood&&this.blood.updatePeopleFight()},i.onMonsterEnter=function(t){ua.isLoveCopyMap()&&t.isBoss&&t.setNameVisible(!1)},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(l),ll=function(t){function e(){this.awardPanel=null,this.rankPanel=null,this.bossBlood=null,this.topView=null,this.checkGap=1e3,this._time=0,e.__super.call(this)}w(e,"modules.commonCopy.monsterCopy.MonsterCopyCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_beast_boss_hurt_toc",this,this.onBossHurt),T.register("COPY_TIME_UPDATE",this,this.checkRp)},i.onBossHurt=function(t){ua.isMonsterCopyMap()?(this.bossBlood=this.bossBlood||Aa.getIns(62e3,"MonsterCopyBlood"),null==this.bossBlood.parent&&lt.uiLayer.addChild(this.bossBlood),this.bossBlood.updateBoss(Us.baseCfg.bossId),this.bossBlood.updateHp(t.hurt),this.topView=this.topView||Aa.getIns(62e3,"MonsterCopyTopView"),null==this.topView.parent&&lt.uiLayer.addChild(this.topView),this.topView.updateByHurt(t.hurt)):this.clearBlood(),Us.hurt=t.hurt},i.clearBlood=function(){this.bossBlood&&this.bossBlood.removeSelf(),this.topView&&this.topView.removeSelf()},i.checkRp=function(){var t=As.getCopyTime(22100);if(t&&0<t.max_free_times-t.finished_times&&Us.isBossTime())return Nt.show("RP_MONSTER_BOSS"),void _t.addToSecond(this,this.wrapCheckRp);Nt.hide("RP_MONSTER_BOSS"),_t.removeFromSceond(this,this.wrapCheckRp)},i.wrapCheckRp=function(){S.now()-this._time>=this.checkGap&&(this._time=S.now(),this.checkRp())},i.openAwardPanel=function(){this.awardPanel=this.awardPanel||Aa.getIns(62e3,"MonsterCopyAwardPanel"),this.awardPanel.openWindow()},i.openRankPanel=function(){this.rankPanel=this.rankPanel||Aa.getIns(62e3,"MonsterCopyRankPanel"),this.rankPanel.openWindow(),this.rankPanel.update()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),rl=function(t){function e(){this.enterPanel=null,this.quickFinishPanel=null,e.__super.call(this)}w(e,"modules.commonCopy.strangeFire.StrangeFireCopyCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_strange_fire_copy_info_toc",this,this.onInfo),this.addSocketListener("m_strange_fire_copy_quick_finish_toc",this,this.onQuickFinish),this.addMessageListener("ENTER_GAME",this,this.checkNeedInfo),this.addMessageListener("STRANGEFIRE_COPY_PANEL",this,this.openEnterPanel),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkNeedInfo),this.addMessageListener("REGROWLV_UP",this,this.checkNeedInfo)},i.toQuickFinish=function(){var t=new Object;t.className="m_strange_fire_copy_quick_finish_tos",this.sendSocketMessage(t)},i.onQuickFinish=function(t){0==t.err_code?(Gs.infoToc&&(Gs.infoToc.ticket=t.ticket,Gs.infoToc.complete_times=t.complete_times,Gs.infoToc.count_down=t.count_down,sU.ins().showView(t.reward_list,Jn.GOODS_SHOW_NOTICE_TYPE_QUICK_FINISH),this.quickFinishPanel&&this.quickFinishPanel.isPopup()&&this.quickFinishPanel.update(),this.dispatch("COPY_UPDATE_PANEL"),this.enterPanel&&this.enterPanel.isPopup()&&this.enterPanel.update()),Gs.checkRedPoint()):ce.addTip(t.err_code)},i.checkNeedInfo=function(){Os.strangeFireCopyVO&&pe.myRegrow>=Os.strangeFireCopyVO.getLimitGrowLvl()&&_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_strange_fire_copy_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Gs.infoToc=t,this.dispatch("COPY_UPDATE_PANEL"),this.enterPanel&&this.enterPanel.isPopup()&&this.enterPanel.update(),Gs.checkRedPoint()):ce.addTip(t.err_code)},i.openEnterPanel=function(){0!=se.has("modules/copyStrangeFire")?(this.enterPanel=this.enterPanel||new nk,this.enterPanel.openWindow(),this.toInfo()):se.add("modules/copyStrangeFire","正在加载异火圣域资源",this,this.openEnterPanel)},i.openQuickFinishPanel=function(){this.quickFinishPanel=this.quickFinishPanel||new ok,this.quickFinishPanel.openWindow(),this.quickFinishPanel.update()},i.fightBack=function(){el.ins().toExit(),me.linkTo(10603),_t.setTimeout(this,this.openEnterPanel,null,100)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),hl=function(t){function e(){this.enterPanel=null,this.sweepResultView=null,e.__super.call(this)}w(e,"modules.commonCopy.talimanCopy.TalimanCopyCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_copy_talisman_barrier_update_toc",this,this.onInfo),this.addSocketListener("m_copy_talisman_quick_finish_toc",this,this.onSweepInfo),this.addSocketListener("m_copy_talisman_start_chapter_toc",this,this.onChapterInfo),this.addMessageListener("TALIMAN_COPY_PANEL",this,this.openEnterPanel),this.addMessageListener("CROSS_DAY",this,this.crossDay),this.addMessageListener("ENTER_GAME",this,this.enterGame),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkNeedInfo),this.addMessageListener("REGROWLV_UP",this,this.checkNeedInfo)},i.crossDay=function(){Os.talimanCopyVO&&pe.myRegrow>=Os.talimanCopyVO.getLimitGrowLvl()&&(Hs.firstEnter=!0,_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY))},i.openEnterPanel=function(){0!=se.has("modules/copyTaliman")?(this.enterPanel=this.enterPanel||new rk,this.enterPanel.openWindow(),Hs.firstEnter=!1,or.ins().navbarVisible=!1,this.toInfo()):se.add("modules/copyTaliman","正在加载玄法圣殿资源",this,this.openEnterPanel)},i.checkNeedInfo=function(){Os.talimanCopyVO&&pe.myRegrow>=Os.talimanCopyVO.getLimitGrowLvl()&&this.toInfo()},i.enterGame=function(){Os.talimanCopyVO&&pe.myRegrow>=Os.talimanCopyVO.getLimitGrowLvl()&&_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_copy_talisman_barrier_update_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Hs.infoToc=t,this.dispatch("COPY_UPDATE_PANEL"),this.enterPanel&&this.enterPanel.isPopup()&&(this.enterPanel.update(),or.ins().navbarVisible=!1),Hs.checkRedPoint()):ce.addTip(t.err_code)},i.toSweepInfo=function(){var t=new Object;t.className="m_copy_talisman_quick_finish_tos",this.sendSocketMessage(t)},i.toChapterInfo=function(){var t=new Object;t.className="m_copy_talisman_start_chapter_tos",t.current_barrier=Hs.infoToc.current_barrier,this.sendSocketMessage(t)},i.onChapterInfo=function(t){0==t.err_code?(this.dispatch("COPY_UPDATE_PANEL"),Hs.checkRedPoint()):ce.addTip(t.err_code)},i.Sweep=function(){20<=pe.gold?this.toSweepInfo():Lo.showAlert()},i.onSweepInfo=function(t){0==t.err_code?(this.dispatch("COPY_UPDATE_PANEL"),Hs.sweepRewards=t.rewards,this.openSweepResultView()):ce.addTip(t.err_code)},i.openQuickFinishPanel=function(){var t;yt.myVipLevel<2?((t=new Ee).msg="是否花费20元宝进行副本扫荡？<br>VIP2可每日免费扫荡",t.yesCaller=this,t.yesFun=this.Sweep,EF.showVO(t)):this.toSweepInfo()},i.openSweepResultView=function(){this.sweepResultView=this.sweepResultView||new lk,this.sweepResultView.openWindow(),this.sweepResultView.update()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),ul=function(t){function e(){this.rebornView=null,this.issueFriendListPanel=null,this.copyEnterView=null,this.copySelView=null,this.cdID=-1,this.resView=null,this.tempSet=NaN,e.__super.call(this)}w(e,"modules.commonCopy.teamCopy.TeamCopyCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_COPYSEL_VIEW",this,this.openCopyselview),this.addMessageListener("OPEN_COPYENTER_VIEW",this,this.openCopyEnterview),this.addMessageListener("OPEN_COPY_ISSUEFRI_VIEW",this,this.openIssueFriendListPanel),this.addMessageListener("TEAM_COPY_JOIN",this,this.toRoleTeamJoin),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("CROSS_DAY",this,this.toTeamCopyStep),this.addMessageListener("REGROWLV_UP",this,this.onRegrowLvUp),this.addMessageListener("ANIMAL_DIE",this,this.delMon),this.addSocketListener("m_role_copy_team_toc",this,this.onRoleTeam),this.addSocketListener("m_role_team_create_toc",this,this.onRoleTeamCreate),this.addSocketListener("m_role_team_join_toc",this,this.onRoleTeamJoin),this.addSocketListener("m_role_team_exit_toc",this,this.onRoleTeamExit),this.addSocketListener("m_role_team_broadcast_toc",this,this.onRoleTeamBroadcast),this.addSocketListener("m_role_copy_team_set_toc",this,this.onRoleCopyTeamSet),this.addSocketListener("m_role_copy_team_ready_toc",this,this.onRoleCopyTeamReady),this.addSocketListener("m_role_copy_team_finish_toc",this,this.onRoleCopyTeamFinish),this.addSocketListener("m_role_copy_team_reward_toc",this,this.onRoleCopyTeamReward),this.addSocketListener("m_role_copy_team_step_toc",this,this.onTeamCopyStep),this.addSocketListener("m_role_copy_team_rep_set_toc",this,this.onRoleCopyTeamRepSet),this.addSocketListener("m_role_copy_team_req_set_toc",this,this.onRoleCopyTeamReqSet),this.addSocketListener("m_role_copy_team_born_notice_toc",this,this.onCopyTeamBornNotice)},i.delMon=function(t){Ws.delReborn(t)},i.onCopyTeamBornNotice=function(t){Ws.addReborn(t),this.rebornView=this.rebornView||new hk,this.rebornView.parent||lt.uiLayer.addChildAt(this.rebornView,0),this.rebornView.onSec()},i.toRoleCopyTeamReqSet=function(t){var e=new Object;e.className="m_role_copy_team_req_set_tos",e.step=t,this.sendSocketMessage(e)},i.onRoleCopyTeamReqSet=function(t){if(0<t.err_code)ce.addTip(t.err_code);else if(t.return_self)Jt.addTip("已成功发送请求");else{var e;switch(t.step){case 1:e="低级";break;case 2:e="中级";break;case 3:e="高级"}var i=new Ee;i.msg=Z.font(t.role_name,"#ffffcc",26)+"请求将难度切换为"+Z.font(e,"#ffffcc",26)+"，是否同意？",i.yesArgs=[t.step],i.noArgs=[t.step,2],i.yesCaller=i.noCaller=this,i.yesFun=this.setStepAndToTeamRepSet,i.noFun=this.toRoleCopyTeamRepSet,i.yesLabel="是",i.noLabel="否",EF.showVO(i)}},i.setStepAndToTeamRepSet=function(t){modules.commonCopy.teamCopy.TeamCopyCase.ins.toRoleCopyTeamSet(t),this.toRoleCopyTeamRepSet(t,1)},i.toRoleCopyTeamRepSet=function(t,e){var i=new Object;i.className="m_role_copy_team_rep_set_tos",i.step=t,i.result=e,this.sendSocketMessage(i)},i.onRoleCopyTeamRepSet=function(t){if(0<t.err_code)ce.addTip(t.err_code);else if(!t.return_self&&2==t.result){var e;switch(t.step){case 1:e="低级";break;case 2:e="中级";break;case 3:e="高级"}EF.show("队长拒绝将难度切换为"+e)}},i.onRegrowLvUp=function(){var t=new Object;t.className="m_role_copy_team_step_tos",this.sendSocketMessage(t)},i.onEnterGame=function(){_t.setTimeout(this,this.toTeamCopyStep,null,St.ENTER_DELAY)},i.toTeamCopyStep=function(){var t=new Object;t.className="m_role_copy_team_step_tos",this.sendSocketMessage(t)},i.onTeamCopyStep=function(t){0<t.err_code?ce.addTip(t.err_code):(Ws.myStepInfo=t,Ws.copyStep=t.step,Ws.checkRP(),this.dispatch("COPY_UPDATE_PANEL"))},i.openIssueFriendListPanel=function(){this.issueFriendListPanel=this.issueFriendListPanel||new ZF,this.issueFriendListPanel.openWindow(),this.issueFriendListPanel.update()},i.openCopyEnterview=function(t,e){0!=se.has("modules/teamCopy")?(_t.clearTimeout(this.cdID),this.copyEnterView||(this.copyEnterView=new _k,this.copyEnterView.on("undisplay",this,this.onUnDisplay)),this.copyEnterView=this.copyEnterView||new _k,this.copyEnterView.parent||this.copyEnterView.openWindow(),this.copyEnterView.copyMapID=t,this.copyEnterView.selIndex=e,this.copySelView&&this.copySelView.parent&&this.copySelView.removeSelf(),this.copyEnterView.update()):se.add("modules/teamCopy","加载经脉副本资源",this,this.openCopyEnterview,[t,e])},i.onUnDisplay=function(){this.copyEnterView&&this.copyEnterView.parent||this.copySelView&&this.copySelView.parent||this.resView&&this.resView.parent||(this.cdID=_t.setTimeout(this,this.cleanTeamcopyRes,null,ya.coldTime))},i.cleanTeamcopyRes=function(){this.copySelView&&(this.copySelView.destroy(),this.copySelView=null),this.copyEnterView&&(this.copyEnterView.destroy(),this.copyEnterView=null),this.resView&&(this.resView.destroy(),this.resView=null),se.destroy("modules/teamCopy")},i.openCopyselview=function(t,e){void 0===e&&(e=0),0!=se.has("modules/teamCopy")?(_t.clearTimeout(this.cdID),this.copySelView||(this.copySelView=new mk,this.copySelView.on("undisplay",this,this.onUnDisplay)),this.copySelView.parent||this.copySelView.openWindow(),this.copySelView.copyMapID=t,this.copySelView.selIndex=e):se.add("modules/teamCopy","加载经脉副本资源",this,this.openCopyselview,[t,e])},i.toRoleCopyTeamReward=function(t){var e=new Object;e.className="m_role_copy_team_reward_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleCopyTeamReward=function(t){0<t.err_code?ce.addTip(t.err_code):Jt.addTip("恭喜你领取了"+t.score+"内力")},i.onRoleCopyTeamFinish=function(t){0!=se.has("modules/teamCopy")?(_t.clearTimeout(this.cdID),this.resView||(this.resView=new yk,this.resView.on("undisplay",this,this.onUnDisplay)),this.resView.parent||this.resView.openWindow(),this.resView.update(t),this.toTeamCopyStep()):se.add("modules/teamCopy","加载经脉副本资源",this,this.onRoleCopyTeamFinish,[t])},i.toRoleCopyTeamReady=function(t){var e=new Object;e.className="m_role_copy_team_ready_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleCopyTeamReady=function(t){if(0<t.err_code)ce.addTip(t.err_code);else if(Ws.handlerRoleReady(t.role_id,t.op_type),this.copyEnterView&&this.copyEnterView.parent&&this.copyEnterView.update(),Ws.checkAllRoleReady()){var e=Os.getSelCopyVOArr(10801)[Ws.copyStep-1];e&&gk.ins.showCountDown("即将进入"+e.subTxt+"级难度的经脉副本",5,Q.create(Lr.ins(),Lr.ins().toMapChange,[10801],!0),Q.create(this,this.toRoleCopyTeamReady,[0],!0))}else gk.ins.parent&&gk.ins.closeWindow()},i.toRoleCopyTeamSet=function(t){var e=new Object;e.className="m_role_copy_team_set_tos",e.step=t,this.sendSocketMessage(e)},i.onRoleCopyTeamSet=function(t){if(0<t.err_code)ce.addTip(t.err_code);else if(Ws.copyStep=t.step,0<=Ws.copyStep&&0<=Ws.teamID&&this.openCopyEnterview(10801,Ws.copyStep-1),pe.roleID!=Ws.leaderID){var e=Os.getSelCopyVOArr(10801)[Ws.copyStep-1];e&&EF.show("队长已经将副本难度调整为："+e.subTxt+"级")}},i.onRoleTeamBroadcast=function(t){Ws.isInTeam()&&(Ws.handlerRole(t.role_id,t.type),0<t.leader_id&&(Ws.leaderID=t.leader_id),this.copyEnterView&&this.copyEnterView.parent&&this.copyEnterView.update())},i.toRoleTeamExit=function(){var t=new Object;t.className="m_role_team_exit_tos",t.team_id=Ws.teamID,this.sendSocketMessage(t)},i.onRoleTeamExit=function(t){t.team_id==Ws.teamID&&(0<t.err_code?ce.addTip(t.err_code):(this.copyEnterView&&this.copyEnterView.parent&&this.copyEnterView.closeWindow(),1<Ws.teamRoles.length?Jt.addTip("成功退出队伍"):Jt.addTip("队伍已解散"),Ws.clearTeamData()))},i.toRoleTeamJoin=function(t){pt.send(115,2,"副本-经脉副本");var e=new Object;e.className="m_role_team_join_tos",e.team_id=t,Ws.isJoinTeam=!0,this.sendSocketMessage(e)},i.onRoleTeamJoin=function(t){Ws.isJoinTeam&&(Ws.isJoinTeam=!1,0<t.err_code?ce.addTip(t.err_code):(Ws.clearTeamData(),Ws.teamID=t.team_id,Ws.teamRoles=t.role_ids,Ws.leaderID=t.leader_id,this.toRoleTeam()))},i.toRoleTeamCreateAndSet=function(t){this.tempSet=t,this.toRoleTeamCreate()},i.toRoleTeamCreate=function(){var t=new Object;t.className="m_role_team_create_tos",t.copy_id=8,this.sendSocketMessage(t)},i.onRoleTeamCreate=function(t){8==t.copy_id&&(0<t.err_code?ce.addTip(t.err_code):(Ws.clearTeamData(),Ws.teamID=t.team_id,Ws.leaderID=pe.roleID,Ws.teamRoles=t.role_ids,Jt.addTip("创建队伍成功"),0<=this.tempSet&&this.toRoleCopyTeamSet(this.tempSet)))},i.toRoleTeam=function(){var t=new Object;t.className="m_role_copy_team_tos",this.sendSocketMessage(t)},i.onRoleTeam=function(t){0<t.err_code?ce.addTip(t.err_code):(Ws.copyStep=t.step,0<=Ws.copyStep&&0<=Ws.teamID&&this.openCopyEnterview(10801,Ws.copyStep-1))},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(),cl=function(t){function a(){this.curChallengeStage=1,this.curChallengeDifindex=0,this.curChallengeChapter=1,this.isSelectBox1=!1,this.isSelectBox2=!1,this.enterPanel=null,this.autoThroughView=null,this.ruleDesView=null,this.throughRewardView=null,this.zhuXianStageSetView=null,this.zhuXianRoadColorInfoView=null,this.roadInfo=null,this.nextLvSetInfo=null,this.autoRewardInfo=null,a.__super.call(this)}w(a,"modules.commonCopy.zhuXianRoadCopy.ZhuXianRoadCopyCase",l);var e=a.prototype;return e.initListeners=function(){this.addMessageListener("ZHUXIANROAD_COPY_PANEL",this,this.openEnterPanel),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addSocketListener("m_copy_kill_road_info_toc",this,this.onInfo),this.addSocketListener("m_copy_kill_road_auto_toc",this,this.onAutoInfo),this.addSocketListener("m_copy_kill_road_set_toc",this,this.onSet)},e.onEnterMap=function(){ua.isCopyZhuXianRoad()?this.openRoadColorInfoView():this.removeRoadColorInfoView()},e.openEnterPanel=function(){0!=se.has("modules/zhuXianRole")?(this.toInfo(),this.enterPanel=this.enterPanel||new Pk,this.enterPanel.openWindow(null,!0)):se.add("modules/zhuXianRole","正在加载诛仙古路副本资源",this,this.openEnterPanel)},e.openAutoThroughView=function(){this.autoThroughView=this.autoThroughView||new Ik,this.autoThroughView.openWindow(null,!0)},e.openRuleDesView=function(){this.ruleDesView=this.ruleDesView||new vk,this.ruleDesView.openWindow(null,!0)},e.openthroughRewardView=function(t){this.throughRewardView=this.throughRewardView||new Rk,this.throughRewardView.openWindow(null,!0),this.throughRewardView.update(t)},e.openZhuXianStageSetView=function(t){this.zhuXianStageSetView=this.zhuXianStageSetView||new Ek,this.zhuXianStageSetView.time=t,this.zhuXianStageSetView.openWindow(null,!0)},e.openRoadColorInfoView=function(){this.zhuXianRoadColorInfoView=this.zhuXianRoadColorInfoView||new xk,this.zhuXianRoadColorInfoView.isPopup()||(this.zhuXianRoadColorInfoView.right=0,this.zhuXianRoadColorInfoView.top=200,lt.uiLayer.addChild(this.zhuXianRoadColorInfoView))},e.removeRoadColorInfoView=function(){this.zhuXianRoadColorInfoView&&this.zhuXianRoadColorInfoView.parent&&this.zhuXianRoadColorInfoView.removeSelf()},e.toInfo=function(){var t=new Object;t.className="m_copy_kill_road_info_tos",this.sendSocketMessage(t)},e.onInfo=function(t){if(console.log("m_copy_kill_road_info_toc:",t),0==t.err_code){this.roadInfo=t,qs.maxStage=t.max_stage;var e=t.stage_info;e&&0<e.length&&qs.updateAllStageInfo(e),this.enterPanel&&this.enterPanel.parent&&this.enterPanel.update(),this.onRedPointMessage(t)}},e.toSet=function(t){var e=new Object;e.className="m_copy_kill_road_set_tos",e.set_info=t,this.sendSocketMessage(e)},e.onSet=function(t){0==t.err_code?0==(this.nextLvSetInfo=t).set_info.length?(this.isSelectBox1=!1,this.isSelectBox2=!1):(this.isSelectBox1=1==t.set_info[0].val,this.isSelectBox2=1==t.set_info[1].val):this.nextLvSetInfo=null},e.toAutoInfo=function(t){var e=new Object;e.className="m_copy_kill_road_auto_tos",e.min_stage=t[0],e.max_stage=t[1],this.sendSocketMessage(e)},e.onAutoInfo=function(t){console.log("m_copy_kill_road_auto_toc:",t),0==t.err_code?this.autoRewardInfo=t:this.autoRewardInfo=null,this.autoThroughView&&this.autoThroughView.openReward()},e.toRedPointMessage=function(t){},e.onRedPointMessage=function(t){if(0==t.err_code){for(var e=0,i=[],s=t.stage_info,n=0;n<s.length;n++){var o=s[n];1==o.difficulty&&(1==o.is_reward&&(e++,i.push(o.stage)))}qs.updateRewardArr(i),a.checkRedPoint(e<qs.maxStage||!qs.isFullStage())}},a.ins=function(){return a.instance=a.instance||new a},a.checkRedPoint=function(t){t?Nt.show("RP_ZHUXIAN_COPY"):Nt.hide("RP_ZHUXIAN_COPY")},a.instance=null,a}(),dl=function(t){function e(){this.redNamePanel=null,this.guidePanel=null,this.navView=null,this.mainInfoView=null,this.btnQuit=null,this.enterPanel=null,this.helpPanel=null,this.settingView=null,this.miniMapPanel=null,e.__super.call(this),_l.ins()}w(e,"modules.crossServer.CrossServerModule",l);var i=e.prototype;return i.initListeners=function(){pl.ins,fl.ins,ml.ins(),this.addSocketListener("m_cross_entry_panel_toc",this,this.onEntryPanel),this.addSocketListener("m_server_open_days_toc",this,this.onSeverOpenDays),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagDataChange),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.addMessageListener("ROLE_CHANGE_NAME",this,this.updateMainInfoView),this.addMessageListener("MONEY_CHANGE",this,this.updateMainInfoView),this.addMessageListener("CROSS_SERVER_OPEN_SETTING_PANEL",this,this.openSettingView),this.addMessageListener("ITEM_USE_BACK",this,this.onItemUse),this.addMessageListener("ON_SYS_UPDATE",this,this.onSysConfig),this.addMessageListener("ON_GODHOOD_INFO",this,this.updateByGodLvInfo),this.addMessageListener("CROSS_SERVER_OPEN_MINI_MAP_PANEL",this,this.openMiniMapPanel)},i.onItemUse=function(t){var e=Xs.redNameGoods.indexOf(Xs.curUseGoodID);-1!=e&&Jt.addTip("使用成功，红名值降低"+Xs.getGoodsMinusByIndex(e)),Xs.curUseGoodID=0},i.onBagDataChange=function(){this.updateRedNamePanel()},i.onEnterMap=function(){ua.isCrossMain()?(this.showNavView(),Sl.ins.toGetPackageBagInfo()):this.hideNavView(),ua.isCross()?(this.dispatch("CAN_NOT_AUTO_HIT"),this.showMainInfoView(),this.openBtnQuit(),this.createJoyStick(),this.onSysConfig()):(this.closeBtnQuit(),this.hideMainInfoView()),ua.isCrossTower()||ua.isCrossTowerBoss()?(Sl.ins.toGetPackageBagInfo(),_l.ins().toMapTranInfo(),_l.ins().showTowerUis(),this.dispatch("HIDE_NAVBAR")):_l.ins().removeTowerUis()},i.toEntryPanel=function(t){var e=new Object;e.className="m_cross_entry_panel_tos",e.op_type=t,this.sendSocketMessage(e)},i.onEntryPanel=function(t){Xs.setLinesData(t.lines),Xs.isCrossOpen=t.is_cross_open,this.updateEnterPanel(),this.updateMainInfoView(),this.dispatch("CROSS_SERVER_ENTER_PANEL_INFO")},i.toSeverOpenDays=function(){var t=new Object;t.className="m_server_open_days_tos",this.sendSocketMessage(t)},i.onSeverOpenDays=function(t){Xs.curServerOpenDay=t.open_days,Xs.curCombineServerTimes=t.merge_times,this.updateEnterPanel()},i.onScoreChange=function(){this.updateMainInfoView(),this.updateNavView(),this.updateRedNamePanel()},i.openRedNamePanel=function(){this.redNamePanel=this.redNamePanel||new Gk,this.redNamePanel.openWindow(),this.redNamePanel.update()},i.updateRedNamePanel=function(){this.redNamePanel&&this.redNamePanel.parent&&this.redNamePanel.update()},i.openGuidePanel=function(){this.guidePanel=this.guidePanel||new Dk,this.guidePanel.openWindow()},i.closeGuidePanel=function(){this.guidePanel&&this.guidePanel.closeWindow()},i.showNavView=function(){this.navView=this.navView||new Fk,this.navView.update(),lt.crossUiLayer.addChildAt(this.navView,0)},i.hideNavView=function(){this.navView&&this.navView.removeSelf()},i.updateNavView=function(){this.navView&&this.navView.parent&&this.navView.update()},i.showMainInfoView=function(){this.mainInfoView=this.mainInfoView||new Nk,this.mainInfoView.update(),lt.crossUiLayer.addChild(this.mainInfoView)},i.hideMainInfoView=function(){this.mainInfoView&&this.mainInfoView.removeSelf()},i.updateMainInfoView=function(){this.mainInfoView&&this.mainInfoView.parent&&this.mainInfoView.update()},i.openBtnQuit=function(){this.btnQuit=this.btnQuit||new Uk,this.btnQuit.top=ua.isCrossMain()?60:50,this.btnQuit.updateSkinOnEnterMap(),lt.crossUiLayer.addChild(this.btnQuit)},i.closeBtnQuit=function(){this.btnQuit&&this.btnQuit.removeSelf()},i.openEnterPanel=function(){se.has("modules/crossServer")?(this.enterPanel=this.enterPanel||new Hk,this.enterPanel.openWindow(),this.toEntryPanel(1),this.toSeverOpenDays()):se.add("modules/crossServer","正在加载跨服资源",this,this.openEnterPanel)},i.updateEnterPanel=function(){this.enterPanel&&this.enterPanel.update()},i.updateByGodLvInfo=function(){this.enterPanel&&this.enterPanel.updateByGodLvInfo()},i.openHelpPanel=function(){this.helpPanel=this.helpPanel||new Lk,this.helpPanel.openWindow()},i.openSettingView=function(){this.settingView=this.settingView||new Wk,this.settingView.openWindow()},i.onSysConfig=function(){if(0!=ua.isCross()){if(Jl.ins().updateJoyStickMod(),Xs.unifyFashion){for(t in Se.roleDict)Se.roleDict[t].setAutoSkin();WS&&WS.main&&WS.main.hideTile()}else{var t;for(t in Se.roleDict)Se.roleDict[t].resetPalSkin();WS&&WS.main&&WS.main.showTitle()}Se.justHideRole=Xs.isUnShowOrtherRole}},i.createJoyStick=function(){Jl.ins().createJoystick()},i.removeJoyStick=function(){Jl.ins().delectJoystick()},i.openMiniMapPanel=function(){this.miniMapPanel=this.miniMapPanel||new Yk,this.miniMapPanel.openWindow()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),pl=function(t){function e(){this._shopPanel=null,this._selectView=null,this._sellConfirmPanel=null,this._refreshCounter=0,this._cdID=-1,this._isRefreshListTos=!1,e.__super.call(this)}w(e,"modules.crossServer.shop.CrossServerShopCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("MONEY_CHANGE",this,this.onMoneyChange),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.onMoneyChange),this.addSocketListener("m_cross_market_info_toc",this,this.onGetShopInfo),this.addSocketListener("m_cross_market_op_toc",this,this.onOperateGoods),this.addSocketListener("m_cross_market_up_toc",this,this.onPutaway),this.addSocketListener("m_cross_market_buy_toc",this,this.onBuySoul)},i.onEnterGame=function(){_t.setTimeout(this,this.toGetShopInfo,null,St.ENTER_DELAY)},i.toGetShopInfo=function(){var t=new Object;t.className="m_cross_market_info_tos",this.sendSocketMessage(t)},i.onGetShopInfo=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e=Qs.isShopListChange(t.last_change_ts);Qs.handleGoodsInfo(t),this._isRefreshListTos&&!e||this.updateShopPanel(),zs.checkSoldRP(),this._refreshCounter=0}this._isRefreshListTos=!1},i.toOperateGoods=function(t,e){var i=new Object;i.className="m_cross_market_op_tos",i.op_type=t,i.market_id=e,this.sendSocketMessage(i)},i.onOperateGoods=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{Qs.removeMyGoodsById(t.market_id),this.updateShopPanel(),zs.checkSoldRP();var e=js.OPERATE_SUCCESS_TIPS[t.op_type];Jt.addTip(e)}},i.toPutaway=function(t,e,i){var s=new Object;s.className="m_cross_market_up_tos",s.id=t,s.price=e,s.expire_ts=i,this.sendSocketMessage(s)},i.onPutaway=function(t){0<t.err_code?ce.addTip(t.err_code):(this.toGetShopInfo(),Jt.addTip("上架成功"))},i.toBuySoul=function(t,e){var i=new Object;i.className="m_cross_market_buy_tos",i.market_id=t,i.owner_id=e,this.sendSocketMessage(i)},i.onBuySoul=function(t){0<t.err_code?ce.addTip(t.err_code):(Qs.removeAllGoodsById(t.market_id),this.updateShopPanel(),zs.checkSoldRP(),Jt.addTip("购买成功"))},i.updateShopListView=function(){this._shopPanel&&this._shopPanel.parent&&this._shopPanel.updateShopListView()},i.updateShopPanel=function(){this._shopPanel&&this._shopPanel.parent&&this._shopPanel.update()},i.openShopPanel=function(){this.initAsset(this.openShopPanel)&&(this._shopPanel||(this._shopPanel=new Jk,this._shopPanel.on("display",this,this.onShopPanelDisplay),this._shopPanel.on("undisplay",this,this.onShopPaneUnDisplay)),this._shopPanel.parent||this._shopPanel.openWindow(),_t.clearTimeout(this._cdID),pt.send(50,1,"跨服市场-进入"))},i.onShopPanelDisplay=function(t){this._refreshCounter=0,_t.addToSecond(this,this.onRefreshShopList)},i.openSelectView=function(){this._selectView||(this._selectView=new tA,this._selectView.on("undisplay",this,this.onUndisplay));var t=new Tt;t.x=(lt.stageWidth-this._selectView.width)/2+130,t.y=(lt.stageHeight-218*lt.uiScale-this._selectView.height)/2+66*lt.uiScale+80,this._selectView.parent||this._selectView.openWindow(t),_t.clearTimeout(this._cdID)},i.openSellConfirmPanel=function(t){this._sellConfirmPanel||(this._sellConfirmPanel=new $k,this._sellConfirmPanel.on("undisplay",this,this.onUndisplay)),this._sellConfirmPanel.parent||this._sellConfirmPanel.openWindow(),this._sellConfirmPanel.setGoods(t),_t.clearTimeout(this._cdID)},i.onUndisplay=function(){this._shopPanel&&this._shopPanel.parent||this._selectView&&this._selectView.parent||this._sellConfirmPanel&&this._sellConfirmPanel.parent||(this._cdID=_t.setTimeout(this,this.clearRes,null,ya.coldTime))},i.onShopPaneUnDisplay=function(){_t.removeFromSceond(this,this.onRefreshShopList),this.onUndisplay()},i.clearRes=function(){this._sellConfirmPanel&&(this._sellConfirmPanel.destroy(),this._sellConfirmPanel=null),this._selectView&&(this._selectView.destroy(),this._selectView=null),this._sellConfirmPanel&&(this._sellConfirmPanel.destroy(),this._sellConfirmPanel=null),se.destroy("modules/crossServerShop")},i.onRefreshShopList=function(){this._refreshCounter++,this._refreshCounter%10==0&&(this._refreshCounter=0,this._isRefreshListTos=!0,this.toGetShopInfo())},i.initAsset=function(t){return!!se.has("modules/crossServerShop")||(se.add("modules/crossServerShop","正在加载跨服市场资源",this,t),!1)},i.onMoneyChange=function(){this._shopPanel&&this._shopPanel.parent&&this._shopPanel.updateMoney()},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(l),ml=function(t){function e(){this.sitIcon=null,this.infoPanel=null,e.__super.call(this)}w(e,"modules.crossServer.sit.SitModule",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("ROLE_STATE_CHANGE",this,this.onStateChange),this.addSocketListener("m_role_on_hook_toc",this,this.onRoleHook),this.addSocketListener("m_role_on_hook_add_toc",this,this.onHookAdd)},i.toRoleHook=function(t){if(WS.main&&WS.main.isMoving)Jt.addTip("移动过程中不允许打坐");else{var e=new Object;e.className="m_role_on_hook_tos",e.type=t,this.sendSocketMessage(e)}},i.onRoleHook=function(t){if(0==t.err_code)switch(t.type){case 8:$s.resetReward(),this.showSitInfo();break;case 0:this.removeSitInfo()}else ce.addTip(t.err_code)},i.onHookAdd=function(t){$s.add(t.reward),this.updateSitInfo()},i.onEnterMap=function(){this.removeSitInfo(),ua.isCrossMain()?this.showSitIcon():this.hideSitIcon()},i.onStateChange=function(){this.updateSitIcon(),8==WS.mainPalState?(WS.main&&WS.main.reNotePos(),this.showSitInfo()):this.removeSitInfo()},i.showSitIcon=function(){this.sitIcon=this.sitIcon||new sA,this.sitIcon.update(),lt.crossUiLayer.addChild(this.sitIcon)},i.hideSitIcon=function(){this.sitIcon&&this.sitIcon.removeSelf()},i.updateSitIcon=function(){this.sitIcon&&this.sitIcon.update()},i.showSitInfo=function(){this.infoPanel=this.infoPanel||new nA,this.infoPanel.update(),lt.crossUiLayer.addChild(this.infoPanel)},i.updateSitInfo=function(){this.infoPanel&&this.infoPanel.update()},i.removeSitInfo=function(){this.infoPanel&&this.infoPanel.removeSelf()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),fl=function(t){function e(){this._storePanel=null,this._exchangePanel=null,this._cdID=-1,e.__super.call(this)}w(e,"modules.crossServer.store.CrossServerStoreCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),this.addMessageListener("ROLE_EXCHANGE_INFO",this,this.updateListView),this.addMessageListener("CROSS_SERVER_OPEN_STORE_EXCHANGE_PANEL",this,this.openExchangePanel),this.addMessageListener("MONEY_CHANGE",this,this.onMoneyChange),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.onMoneyChange),this.addSocketListener("m_cross_limit_shop_toc",this,this.onGetStoreInfo),this.addSocketListener("m_cross_limit_shop_buy_toc",this,this.onBuyTreasureBack),this.addSocketListener("m_role_pay_market_coin_info_toc",this,this.onGetCoinInfo)},i.toGetCoinInfo=function(){var t=new Object;t.className="m_role_pay_market_coin_info_tos",this.sendSocketMessage(t)},i.onGetCoinInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Js.handleCoinInfoList(t.pay_list),this._exchangePanel&&this._exchangePanel.parent&&(this._exchangePanel.hasPay=t.is_first_pay,this._exchangePanel.updateView()))},i.toGetStoreInfo=function(t){var e=new Object;e.className="m_cross_limit_shop_tos",e.op_type=t,this.sendSocketMessage(e)},i.onGetStoreInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Js.handleShopInfo(t),this.updateTreasureView())},i.toBuyTreasure=function(t){var e=new Object;e.className="m_cross_limit_shop_buy_tos",e.item_index=t,this.sendSocketMessage(e)},i.onBuyTreasureBack=function(t){0<t.err_code?ce.addTip(t.err_code):(Js.updateTreasure(t.update_item),this.updateTreasureView())},i.toExchange=function(t,e){Tr.ins().toExchange(21,t,e)},i.onExchangeBack=function(t){21==t.module_id&&(oa.updateExchangeInfo(t),Jt.addTip("兑换成功"),this.updateListView())},i.openExchangePanel=function(){se.has("modules/crossServerStore")?se.has("modules/vip")?(this._exchangePanel||(this._exchangePanel=new rA,this._exchangePanel.on("undisplay",this,this.onUndisplay)),this._exchangePanel.parent||this._exchangePanel.openWindow(),_t.clearTimeout(this._cdID),modules.crossServer.store.CrossServerStoreCase.ins.toGetCoinInfo(),pt.send(53,1,"进入兑换虚天玉界面")):se.add("modules/vip","正在加载跨服商城资源",modules.crossServer.store.CrossServerStoreCase.ins,this.openExchangePanel):se.add("modules/crossServerStore","正在加载跨服商城资源",modules.crossServer.store.CrossServerStoreCase.ins,this.openExchangePanel)},i.openStorePanel=function(){modules.crossServer.store.CrossServerStoreCase.initAsset(this.openStorePanel)&&(this._storePanel||(this._storePanel=new lA,this._storePanel.on("undisplay",this,this.onUndisplay)),this._storePanel.parent||this._storePanel.openWindow(),this._storePanel.update(),_t.clearTimeout(this._cdID),pt.send(52,1,"跨服商店-进入"))},i.updateTreasureView=function(){this._storePanel&&this._storePanel.parent&&this._storePanel.updateTreasureView()},i.updateListView=function(){this._storePanel&&this._storePanel.parent&&this._storePanel.updateListView()},i.showFightSoulCoinNotEnoughPanel=function(){var t=new Ee;t.title="温馨提示",t.msg="你的虚天玉不足，是否前往兑换？",t.yesLabel="兑换",t.yesCaller=me,t.yesFun=me.linkTo,t.yesArgs=[13004],EF.showVO(t)},i.onUndisplay=function(){this._storePanel&&this._storePanel.parent||this._exchangePanel&&this._exchangePanel.parent||(this._cdID=_t.setTimeout(this,this.clearRes,null,ya.coldTime))},i.clearRes=function(){this._storePanel&&(this._storePanel.destroy(),this._storePanel=null),se.destroy("modules/crossServerStore")},i.onMoneyChange=function(){this._storePanel&&this._storePanel.parent&&this._storePanel.updateMoney()},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e.initAsset=function(t){return!!se.has("modules/crossServerStore")||(se.add("modules/crossServerStore","正在加载跨服商城资源",modules.crossServer.store.CrossServerStoreCase.ins,t),!1)},e._ins=null,e}(l),_l=function(t){function u(){this.towerEnterView=null,this.towerNavBar=null,this.towerBossInfoPanel=null,this.towerMissionPanel=null,this.towerPKModPanel=null,this.towerBossItemPanel=null,this.autoBtn=null,this.skillBtn=null,this.monsterShowList=null,this.roleShowList=null,this.roleDeadInCrossServerPanel=null,this.miniDeadPanel=null,this.collectBtn=null,this.collectPanel=null,this.isOpenedCollectPanel=!1,this.isFristEnterTowerMap=!1,u.__super.call(this)}w(u,"modules.crossServer.tower.CrossServerTowerCase",l);var e=u.prototype;return e.initListeners=function(){this.addMessageListener("CROSS_SERVER_OPEN_TOWER_PANEL",this,this.openTowerEnterView),this.addMessageListener("PAL_TOUCH_TRAN_POINT",this,this.onPalTouchTranPoint),this.addMessageListener("PAL_DIE",this,this.tagDie),this.addMessageListener("ANIMAL_DIE",this,this.tagMonsterDie),this.addMessageListener("PAL_ROLE_QUIT",this,this.tagPalQuit),this.addMessageListener("TOUCHINT_JOYSTICK",this,this.restoreAutoHangUp),this.addMessageListener("ROLE_ALL_DEAD",this,this.doRoleDead),this.addMessageListener("ROLE_RELIVE",this,this.roleRelive),this.addMessageListener("COLLECT_IN_MAP_SLICE_CHANGE",this,this.collectChangeInMapSlice),this.addMessageListener("COLLECT_ROLE_COLLECT",this,this.roleCollecting),this.addMessageListener("TOUCHINT_JOYSTICK",this,this.roleStopCollecting),this.addMessageListener("PAL_ROLE_QUIT",this,this.palQuit),this.addMessageListener("FIGHT_ATTACK_TOC_MYSELF_BACK",this,this.updateSkill),this.addMessageListener("ACTOR_BUFF_UPDATE",this,this.updateBuff),this.addMessageListener("MY_PAL_LOCAL_TARGET_CHANGE",this,this.localTargetChange),this.addMessageListener("COLLECT_GET_FINISH_RESULT",this,this.collectFinish),this.addMessageListener("FIGHT_CASE__ON_FIGHT_WORK",this,this.onFightAtt),this.addSocketListener("m_map_tran_info_toc",this,this.onMapTranInfo),this.addSocketListener("m_line_tower_set_deploy_toc",this,this.onLineTowerSetDeploy),this.addSocketListener("m_role_activity_boss_info_toc",this,this.onRoleActivityBossInfo),this.addSocketListener("m_role_activity_boss_tran_toc",this,this.onRoleActivityBossTran),this.addSocketListener("m_line_tower_deploy_info_toc",this,this.onLineTowerDeployInfo),this.addSocketListener("m_line_tower_mission_info_toc",this,this.onLineTowerMissionInfo),this.addSocketListener("m_line_tower_mission_get_toc",this,this.onLineTowerMissionGet),this.addSocketListener("m_map_boss_info_toc",this,this.onCrossTowerBossInfo),this.addSocketListener("m_role_pk_mode_toc",this,this.onRolePKMode)},e.openTowerEnterView=function(t){void 0===t&&(t=0),0!=se.has("modules/crossTower")?(this.towerEnterView=this.towerEnterView||new CA,0==this.towerEnterView.isPopup()&&this.towerEnterView.openWindow(),this.towerEnterView.openViewByTabIndex(t)):se.add("modules/crossTower","正在加载混沌之塔",this,this.openTowerEnterView)},e.showTowerUis=function(){0!=se.has("modules/crossTower")?(this.createAutoBtn(),this.createSkillBtn(),this.createMonsterShowList(),this.createRoleShowList(),this.createCollectBtn(),this.setCollectBtnVisible(!1),this.createCrossTowerNavBar(),this.restoreAutoHangUp(),tn.roleDeadEndTime=0,tn.cleanAttRoles()):se.add("modules/crossTower","正在加载混沌之塔",this,this.showTowerUis)},e.removeTowerUis=function(){this.removeAutoBtn(),this.removeCrossTowerNavBar(),this.removeSkillBtn(),this.removeMonsterShowList(),this.removeRoleShowList(),this.removeCollectBtn(),this.closeCollectPanel(),this.unShowMiniDeadPanel(),tn.roleDeadEndTime=0,tn.cleanAttRoles()},e.createCrossTowerNavBar=function(){this.towerNavBar=this.towerNavBar||new TA,lt.crossUiLayer.addChild(this.towerNavBar)},e.removeCrossTowerNavBar=function(){this.towerNavBar&&this.towerNavBar.parent&&this.towerNavBar.removeSelf()},e.openTowerBossInfoPanel=function(){this.towerBossInfoPanel=this.towerBossInfoPanel||new bA,this.towerBossInfoPanel.openWindow()},e.openTowerMissionPanel=function(){this.towerMissionPanel=this.towerMissionPanel||new PA,this.towerMissionPanel.openWindow()},e.openTowerPKModPanel=function(){this.towerPKModPanel=this.towerPKModPanel||new kA,this.towerPKModPanel.openWindow()},e.openTowerBossItemPanel=function(){this.towerBossItemPanel=this.towerBossItemPanel||new mA,this.towerBossItemPanel.openWindow()},e.updateItemPanelShow=function(){this.towerBossItemPanel&&this.towerBossItemPanel.parent&&this.towerBossItemPanel.updateBuffShow()},e.createAutoBtn=function(){this.autoBtn=this.autoBtn||new dA,lt.crossUiLayer.addChild(this.autoBtn)},e.changeHangUpBtnState=function(){this.autoBtn&&this.autoBtn.parent&&this.autoBtn.updateAutoState()},e.removeAutoBtn=function(){this.autoBtn&&this.autoBtn.parent&&this.autoBtn.removeSelf()},e.createSkillBtn=function(){this.skillBtn=this.skillBtn||new yA,lt.crossUiLayer.addChild(this.skillBtn)},e.updateSkillCd=function(){this.skillBtn&&this.skillBtn.parent&&this.skillBtn.updateCD()},e.removeSkillBtn=function(){this.skillBtn&&this.skillBtn.parent&&this.skillBtn.removeSelf()},e.createMonsterShowList=function(){this.monsterShowList=this.monsterShowList||new RA,this.monsterShowList.initInfo({title:"怪物列表",headInfos:[],isMonster:!0}),this.monsterShowList.isPopup()||(this.monsterShowList.left=0,this.monsterShowList.top=250,lt.crossUiLayer.addChild(this.monsterShowList))},e.removeMonsterShowList=function(){this.monsterShowList&&this.monsterShowList.parent&&this.monsterShowList.removeSelf()},e.createRoleShowList=function(){this.roleShowList=this.roleShowList||new RA,this.roleShowList.initInfo({title:"角色列表",headInfos:[],isMonster:!1}),this.roleShowList.isPopup()||(this.roleShowList.right=0,this.roleShowList.top=250,lt.crossUiLayer.addChild(this.roleShowList))},e.removeRoleShowList=function(){this.roleShowList&&this.roleShowList.parent&&this.roleShowList.removeSelf()},e.setCollectingTagVisible=function(t){this.roleShowList&&this.roleShowList.parent&&this.roleShowList.showCollectingTag(t)},e.openRoleDeadPanel=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=""),this.roleDeadInCrossServerPanel=this.roleDeadInCrossServerPanel||new gA,this.roleDeadInCrossServerPanel.killerShowInfo(e,i),this.setMiniDeadPanelInfo(t,e,i),this.roleDeadInCrossServerPanel.openWindow(null,!0)},e.removeRoleDeadPanel=function(){this.roleDeadInCrossServerPanel&&this.roleDeadInCrossServerPanel.parent&&this.roleDeadInCrossServerPanel.closeWindow()},e.showMiniDeadPanel=function(){this.miniDeadPanel=this.miniDeadPanel||new fA,lt.crossUiLayer.addChild(this.miniDeadPanel)},e.setMiniDeadPanelInfo=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=""),this.miniDeadPanel&&this.miniDeadPanel.parent||(this.miniDeadPanel=this.miniDeadPanel||new fA),this.miniDeadPanel.setParInfo(t,e,i)},e.unShowMiniDeadPanel=function(){this.miniDeadPanel&&this.miniDeadPanel.parent&&this.miniDeadPanel.removeSelf()},e.createCollectBtn=function(){this.collectBtn=this.collectBtn||new f,this.collectBtn.skin="modules/crossTower/collectImg.png",this.collectBtn.right=200,this.collectBtn.bottom=380,this.collectBtn.stateNum=1,lt.crossUiLayer.addChild(this.collectBtn),this.collectBtn.on("click",this,this.clickCollectBtn)},e.removeCollectBtn=function(){this.collectBtn&&this.collectBtn.parent&&this.collectBtn.removeSelf()},e.setCollectBtnVisible=function(t){this.collectBtn&&this.collectBtn.parent&&0==(this.collectBtn.visible=t)&&this.closeCollectPanel()},e.clickCollectBtn=function(){0==this.isOpenedCollectPanel?this.openCollectPanel():this.closeCollectPanel()},e.openCollectPanel=function(){this.collectPanel=this.collectPanel||new SA,this.collectPanel.right=310,this.collectPanel.bottom=390,this.collectPanel.openWindow(),this.isOpenedCollectPanel=!0,this.collectPanel.updateCollectInfoForList()},e.updateCollectPanelShow=function(){this.collectPanel&&this.collectPanel.parent&&this.collectPanel.updateCollectInfoForList()},e.closeCollectPanel=function(){this.collectPanel&&this.collectPanel.parent&&this.collectPanel.closeWindow(),this.isOpenedCollectPanel=!1},e.toMapTranInfo=function(){var t=new Object;t.className="m_map_tran_info_tos",this.sendSocketMessage(t)},e.onMapTranInfo=function(t){this.cons("洞口调转toc:m_map_tran_info_toc",t);var e=["","火·随机跳转点","冰·随机跳转点","木·随机跳转点","土·随机跳转点"],i=[];if(0==t.err_code){for(var s in tn.mapTranInfo=t.tran_infos,t.tran_infos){var n=t.tran_infos[s].id,o=e[n];i[n]=o}0<i.length&&ca.updateTransferName(i),this.checkMissionPro()}else{if(31024001==t.err_code){if(ua.isCrossTowerBoss()){var a=ca.mapID-72e3,l=0;l=100<a?71e3+10*Math.floor(a/100):71e3+Math.floor(a/10);var r=Ce.getCityName(l);ca.updateTransferName([r,r,r,r])}return}ce.addTip(t.err_code)}},e.toLineTowerSetDeploy=function(){var t=new Object;t.className="m_line_tower_set_deploy_tos",t.fight_pal_id=tn.fightPalID,t.assist_pal_ids=tn.assPalPkvArr,this.sendSocketMessage(t)},e.onLineTowerSetDeploy=function(t){0==t.err_code?Jt.addTip("布阵成功"):ce.addTip(t.err_code)},e.toLineTowerDeployInfo=function(){var t=new Object;t.className="m_line_tower_deploy_info_tos",this.sendSocketMessage(t)},e.onLineTowerDeployInfo=function(t){0==t.err_code?(tn.fightPalID=t.fight_pal_id,tn.assPalPkvArr=t.assist_pal_ids):ce.addTip(t.err_code)},e.toRoleActivityBossInfo=function(){var t=new Object;t.className="m_role_activity_boss_info_tos",t.line_id=ca.curLine,this.sendSocketMessage(t),this.cons("Boss活动信息tos:m_role_activity_boss_info_tos:",t)},e.onRoleActivityBossInfo=function(t){this.cons("Boss活动信息toc:m_role_activity_boss_info_toc:",t),0!=t.err_code&&ce.addTip(t.err_code),tn.bossInfo=t.boss_info,this.dispatch("CROSS_SERVER_TOWER_UPDATE_BOSS_INFO")},e.toRoleActivityBossTran=function(t){this.stopCollectAndPalNormal();var e=new Object;e.className="m_role_activity_boss_tran_tos",e.line_id=ca.curLine,e.key=t,this.sendSocketMessage(e),this.cons("Boss活动传送tos：m_role_activity_boss_tran_tos:",e)},e.onRoleActivityBossTran=function(t){this.cons("Boss活动传送toc：m_role_activity_boss_tran_toc:",t),0!=t.err_code&&ce.addTip(t.err_code)},e.toLineTowerMissionGet=function(t){var e=new Object;e.className="m_line_tower_mission_get_tos",e.mission_id=t,this.sendSocketMessage(e),this.cons("任务奖励获取：m_line_tower_mission_get_tos",e)},e.onLineTowerMissionGet=function(t){this.cons("任务奖励获取：m_line_tower_mission_get_toc",t),0==t.err_code?(this.cons("m_line_tower_mission_get_toc..."),this.dispatch("CROSS_SERVER_TOWER_GET_MISSION_REWARD")):ce.addTip(t.err_code)},e.toLineTowerMissionInfo=function(){var t=new Object;t.className="m_line_tower_mission_info_tos",this.sendSocketMessage(t),this.cons("任务信息获取tos:m_line_tower_mission_info_tos:",t)},e.onLineTowerMissionInfo=function(t){this.cons("任务信息获取toc:m_line_tower_mission_info_toc:",t),0==t.err_code?(tn.updateMissionInfo(t.missions),this.updateNowMissionPro(),this.checkIsDoMissionToMap(),this.dispatch("CROSS_SERVER_TOWER_MISSION_UPDATE"),this.isFristEnterTowerMap=!1):ce.addTip(t.err_code)},e.checkMissionPro=function(){this.isFristEnterTowerMap=!0,this.toLineTowerMissionInfo()},e.toCrossTowerBossInfo=function(){var t=new Object;t.className="m_map_boss_info_tos",this.sendSocketMessage(t)},e.onCrossTowerBossInfo=function(t){0==t.err_code?tn.mapBossInfo=t.monster_infos:ce.addTip(t.err_code)},e.toRolePKMode=function(t){var e=new Object;e.className="m_role_pk_mode_tos",e.mode=t,this.sendSocketMessage(e)},e.onRolePKMode=function(t){0==t.err_code?Jt.addTip("模式切换成功"):ce.addTip(t.err_code)},e.updateNowMissionPro=function(){var t,e,i=tn.missionInfos;if(i){var s=!1;for(var n in i){if(1==i[n][0].state){s=!0;break}}s?Nt.show("RP_CROSS_SERVER_TOWER_MISSION_FINISH"):Nt.hide("RP_CROSS_SERVER_TOWER_MISSION_FINISH")}if(ua.isCrossTower())tn.nowMissionMapID=ca.mapID;else if(ua.isCrossTowerBoss()){var o=ca.mapID-72e3,a=Math.floor(o/10);tn.nowMissionMapID=71e3+a}if(t=i[tn.nowMissionMapID]){e=t[0];var l=tn.getMissionVoByMapIdAndMisId(e.map_id,e.mission_id);if(this.isFristEnterTowerMap)return tn.nowMissionProcess=e.process,void(tn.nowMissionInfoVo=l);if(0<e.process-tn.nowMissionProcess)if(l){var r=(tn.nowMissionInfoVo=l).getMissionDescs();Jt.addTip("讨伐任务："+r[1]+e.process+"/"+l.countProce)}else tn.nowMissionInfoVo=null;else tn.nowMissionInfoVo=null;tn.nowMissionProcess=e.process}},e.doMission=function(t){var e;-1!=tn.MONSTER_TYPE_1.indexOf(t)?e=Ot.pointToPt(new Tt(-1635,2579)):-1!=tn.MONSTER_TYPE_2.indexOf(t)?e=Ot.pointToPt(new Tt(2151,2658)):-1!=tn.MONSTER_TYPE_3.indexOf(t)?e=Ot.pointToPt(new Tt(1760,5470)):-1!=tn.MONSTER_TYPE_4.indexOf(t)&&(e=Ot.pointToPt(new Tt(-1496,5786))),e&&(tn.isFindMapToDoMission=!1,this.restoreAutoHangUp(),WS.main.runToPoint(e,1,Q.create(null,function(){0==tn.isAutoHangUp&&modules.crossServer.tower.CrossServerTowerCase.ins().changeAutoHangUp()})))},e.checkThenAndDoMission=function(t){var e=!1;switch(Math.floor(ca.mapID%(10*Math.floor(ca.mapID/10)))){case 1:e=-1!=tn.MONSTER_TYPE_1.indexOf(t);break;case 2:e=-1!=tn.MONSTER_TYPE_2.indexOf(t);break;case 3:e=-1!=tn.MONSTER_TYPE_3.indexOf(t);break;case 4:e=-1!=tn.MONSTER_TYPE_4.indexOf(t);break;default:e=!1}e?(tn.isFindMapToDoMission=!1,0==tn.isAutoHangUp&&this.changeAutoHangUp()):(tn.isFindMapToDoMission=!0,this.doMissionToFindMap())},e.doMissionToFindMap=function(){if(WS&&WS.main){var t=ca.getTranPtByMinDistance(WS.main.pt);t&&WS.main.runToPoint(t,0)}},e.checkIsDoMissionToMap=function(){if(0!=this.isFristEnterTowerMap&&null!=tn.nowMissionInfoVo&&tn.isFindMapToDoMission){var t=tn.nowMissionInfoVo;-1!=t.getMonsterPosMaps().indexOf(ca.mapID)?this.doMission(Number(t.monsterType)):this.doMissionToFindMap()}},e.onPalTouchTranPoint=function(t,e){var i;if(this.cons("到达跳转点:",t,e,tn.mapTranInfo),0<t){for(var s in tn.mapTranInfo)if((i=tn.mapTranInfo[s]).id==t&&0<i.val){0<i.type?Jt.addTip("混沌之塔层数上升"+i.type+"层"):i.type<0?Jt.addTip("混沌之塔层数下降"+Math.abs(i.type)+"层"):Jt.addTip("混沌之塔层数不变"),Lr.ins().toMapChange(i.val,0,ca.curLine);break}}else 0<e&&Lr.ins().toMapChange(e,0,ca.curLine)},e.cons=function(t){},e.hittingMonster=function(t){ua.isCross()&&t&&WS&&WS.main&&(tn.isAutoHangUp&&this.changeAutoHangUp(),tn.hittingTag=t.monster_id,WS.main.lockedTarget=t.monster_id,T.dispatch("CAN_AUTO_HIT"),WS&&WS.main&&WS.main.runAndHit(t.monster_id,!0))},e.hittingRole=function(t){ua.isCross()&&t&&WS&&WS.main&&(tn.isAutoHangUp&&this.changeAutoHangUp(),tn.hittingTag=t.pal_id,WS.main.lockedTarget=t.pal_id,T.dispatch("CAN_AUTO_HIT"),WS&&WS.main&&WS.main.runAndHit(t.pal_id,!0))},e.tagDie=function(t){ua.isCross()&&(tn.isAutoHangUp||t==tn.hittingTag&&this.stopHitAtt())},e.tagMonsterDie=function(t){ua.isCross()&&(tn.isAutoHangUp?t==tn.hittingTag&&(this.toLineTowerMissionInfo(),this.autoHangUpHandler()):t==tn.hittingTag&&(this.toLineTowerMissionInfo(),this.stopHitAtt()))},e.tagPalQuit=function(t){ua.isCross()&&tn.hittingTag==t&&0==tn.isAutoHangUp&&this.stopHitAtt()},e.stopHitAtt=function(){ua.isCross()&&WS&&WS.main&&(T.dispatch("CAN_NOT_AUTO_HIT"),WS.main.lockedTarget=0,tn.hittingTag=0)},e.changeAutoHangUp=function(){if(tn.isAutoHangUp=!tn.isAutoHangUp,tn.isAutoHangUp){if(WS&&WS.main&&13==WS.main.status)return;this.autoHangUpHandler()}else this.stopHitAtt();this.changeHangUpBtnState()},e.restoreAutoHangUp=function(){tn.isAutoHangUp=!1,this.stopHitAtt(),this.dispatch("CROSS_SERVER_TOWER_RESTORE_AUTO_HANGUP")},e.autoHangUpHandler=function(){if(0!=tn.isAutoHangUp){T.dispatch("CAN_NOT_AUTO_HIT");var t,e,i=!1;if(0==mn.isPackageFull(xo.FIGHT_SOUL_ID))for(var s in Se.collectDict){var n=(t=Se.collectDict[s]).collectVo;if(1==t.inMapSlice&&n&&(n.owner_id==pe.roleID||0==n.owner_id)){i=!0,tn.curWillCollectId=n.id,this.runToCollect();break}}if(!i)for(var o in Se.monsterDict)if(1==(e=Se.monsterDict[o]).visible&&WS&&WS.main){this.dispatch("CAN_AUTO_HIT"),WS.main.runAndHit(e.pvo.monster_id,!0);break}}},e.doRoleDead=function(t,e,i){ua.isCross()&&(this.restoreAutoHangUp(),t==pe.roleID&&(""==i&&(i=this.getMonsterNameByUnit(e)),tn.roleDeadEndTime<=0&&(tn.roleDeadEndTime=ya.serverTime+120),this.openRoleDeadPanel(t,e,i),tn.cleanAttRoles()))},e.palQuit=function(t){(ua.isCrossTowerBoss()||ua.isCrossTower())&&(t==tn.hittingTag&&this.stopHitAtt(),this.roleShowList.updateSerchRole())},e.getMonsterNameByUnit=function(t){var e,i="怪物";for(var s in Se.monsterDict)if((e=Se.monsterDict[s]).pvo.monster_id==t){i=e.pvo.monster_name;break}return i},e.roleRelive=function(t){this.removeRoleDeadPanel(),3==t&&Jt.addTip("消耗回天续命丸并成功复活"),tn.roleDeadEndTime=0},e.collectChangeInMapSlice=function(){if(ua.isCrossTowerBoss()||ua.isCrossTower()){var t=Se.collectDict,e=!1,i=[];for(var s in t){var n=t[s];null!=n.collectVo&&i.push(n.collectVo)}0<i.length&&(e=!0),tn.sceneCollectArr=i,1==e?(this.setCollectBtnVisible(!0),this.updateCollectPanelShow()):this.setCollectBtnVisible(!1)}},e.runToCollect=function(){var t;if(0<tn.curWillCollectId&&WS&&WS.main){for(var e in tn.isAutoHangUp&&this.stopHitAtt(),Se.collectDict)if((t=Se.collectDict[e]).id==tn.curWillCollectId&&WS&&WS.main){WS.main.runToPoint(Ot.pointToPt(new Tt(t.x,t.y)),1,Q.create(modules.crossServer.tower.CrossServerTowerCase.ins(),modules.crossServer.tower.CrossServerTowerCase.ins().toCollectGet));break}}else Jt.addTip("未选择战魂")},e.toCollectGet=function(){WS&&WS.main&&WS.main.normal(),Er.ins().toCollectGet(WS.main.pvo.pal_id,tn.curWillCollectId)},e.roleCollecting=function(t){ua.isCrossTowerBoss()&&(tn.isCollecting=!0,tn.collectingCollectId=t)},e.roleStopCollecting=function(){0<tn.collectingCollectId&&(Er.ins().toCollectSotop(tn.collectingCollectId),tn.isCollecting=!1)},e.collectFinish=function(){this.autoHangUpHandler()},e.useCrossServerSkill=function(){if(tn.hittingTag<=0)Jt.addTip("未选择攻击目标");else{var t,e,i=!1;for(var s in Se.roleDict)if((e=Se.roleDict[s]).pvo.pal_id==tn.hittingTag){i=!0,t=e;break}i&&WS&&WS.main?WS.main.useCrossTowerSkill(30300051,t):Jt.addTip("该技能无法对怪物释放")}},e.updateSkill=function(t){30300051==t&&(Jt.addTip("箭阵发动，击退目标"),this.updateSkillCd())},e.onFightAtt=function(t){if(ua.isCross()&&!pe.isMyPal(t.src_id)){var e,i=t.attacks;for(var s in i)e=i[s],pe.isMyPal(e.actor_id)&&tn.pushInAtt(t.src_id)}},e.searchRoleByCrossTower=function(){tn.checkAttMeStamp();var t=[];if(1==tn.pkMod){var e;if(Xs.isShowTipOfAttaking)for(var i in Se.roleDict)(e=Se.roleDict[i])instanceof com.scene.unit.MyPal||1==e.getIsDie()||0==e.inMapSlice||tn.isAttMeRole(e.pvo.pal_id)&&t.push(e.pvo);return t}t=[];var s=pe.user.attr.family_id,n=0;if(WS&&WS.main){var o=WS.main.pvo.tag;n=1e4<o?o%1e4:o}var a,l=!1;for(var r in Se.roleDict)if(!((a=Se.roleDict[r])instanceof com.scene.unit.MyPal||1==a.getIsDie()||0==a.inMapSlice)){var h=tn.isAttMeRole(a.pvo.pal_id);if(13!=a.pvo.state){if(3==tn.pkMod&&0<s){if(a.pvo.family_id==s){h&&Xs.isShowTipOfAttaking&&t.push(a.pvo);continue}}else if(7==tn.pkMod){if(null!=jn.getFriendByRoleId(100*Math.floor(a.pvo.pal_id/100))){h&&Xs.isShowTipOfAttaking&&t.push(a.pvo);continue}}else if(8==tn.pkMod&&a.pvo.tag%1e4==n){h&&Xs.isShowTipOfAttaking&&t.push(a.pvo);continue}}else l=!0;t.push(a.pvo)}return 2==tn.pkMod?t.sort(u.pkModSortMaster):t.sort(u.pkModSort),this.setCollectingTagVisible(l),t},e.searchMonsterByCrossTower=function(){var t,e,i=[];if(0<tn.bossInfo.length&&(t=tn.mapBossInfo[0]),t){var s=u.createBossInfo(t);i.push({info:s,isMonster:!0})}for(var n in Se.monsterDict)if(1==(e=Se.monsterDict[n]).visible){if(t&&t.type==e.pvo.type_id&&t.id==e.pvo.monster_id)continue;i.push({info:e.pvo,isMonster:!0})}return i},e.updateBuff=function(t){ua.isCross()&&(WS&&WS.main&&t==WS.main.pvo.pal_id&&this.updateItemPanelShow())},e.localTargetChange=function(t){if(ua.isCrossTower()||ua.isCrossTowerBoss()){if(0<tn.myPalLocakTarget&&tn.myPalLocakTarget!=t){var e=Se.getUnit(tn.myPalLocakTarget);e&&e.hideSelectShadow()}var i=Se.getUnit(t);i&&i.showSelectShadow(),tn.myPalLocakTarget=t,tn.hittingTag=t}},e.stopCollectAndPalNormal=function(){tn.isAutoHangUp&&this.restoreAutoHangUp(),0<tn.collectingCollectId&&Er.ins().toCollectSotop(tn.collectingCollectId),WS&&WS.main&&WS.main.normal()},u.ins=function(){return u._ins=u._ins||new u},u.pkModSortMaster=function(t,e){return 13==t.state&&13!=e.state?-1:13!=t.state&&13==e.state?1:1==tn.isAttMeRole(t.pal_id)&&0==tn.isAttMeRole(e.pal_id)?-1:0==tn.isAttMeRole(t.pal_id)&&1==tn.isAttMeRole(e.pal_id)?1:1e4<t.tag&&e.tag<1e4?-1:(t.tag<1e4&&e.tag,1)},u.pkModSort=function(t,e){return 13==t.state&&13!=e.state?-1:13!=t.state&&13==e.state?1:1==tn.isAttMeRole(t.pal_id)&&0==tn.isAttMeRole(e.pal_id)?-1:(0==tn.isAttMeRole(t.pal_id)&&tn.isAttMeRole(e.pal_id),1)},u.createBossInfo=function(t){var e=new Object;return e.className="p_map_monster",e.monster_id=t.id,e.type_id=t.type,e.state=0,e.hp=0,e.pos=t.val,e.max_hp=0,e.move_speed=0,e.last_walk_path=[],e.buff_show=0,e.monster_name=we.getMonsterName(t.type),e.pal=null,e.skin_id=we.getMonsterSkinByType(t.type),e.camp_id=0,e},u._ins=null,u}(),gl=function(t){function e(){this.openfinish=!1,this.panel=null,e.__super.call(this)}w(e,"modules.dailyProductNotice.DailyProductNoticeModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_ACT_DAILY_PRODUCT_NOTICE",this,this.openPanel)},i.openPanel=function(t){se.has("modules/act")?this.openfinish||(this.panel=this.panel||new OA,this.panel.openWindow(),this.panel.update(t),this.openfinish=!0):se.add("modules/act","正在加载活动模块",this,this.openPanel,[t])},i.toOpenFinish=function(t){var e=new Object;e.className="m_role_act_deblock_tos",e.act_id=t,this.sendSocketMessage(e)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),yl=function(t){function e(){this.panel=null,e.__super.call(this)}w(e,"modules.dailyRecharege.DailyRechargeModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_pay_gift_toc",this,this.onInfo),this.addSocketListener("m_role_pay_gift_get_toc",this,this.onGet),this.addMessageListener("DAILY_RECHARGE_OPEN_PANEL",this,this.openDailyRechargePanel)},i.openDailyRechargePanel=function(){0!=ao.getIconStateShow(1009)?0!=se.has("modules/dailyRecharge")?(this.panel=this.panel||new LA,this.panel.openWindow(),this.panel.update()):se.add("modules/dailyRecharge","努力加载每日充值资源",this,this.openDailyRechargePanel):pe.user.attr.is_payed?Jt.addTip("抱歉，您可以次日参与每日充值活动获取元宝奖励"):(Jt.addTip("请您先参与首充活动获取绝版时装，次日可参与每日充值获取元宝奖励"),me.linkTo(11434))},i.onInfo=function(t){Bt.isFanTi||(en.gold=t.gold,en.updateByInfoToc(t.condition),Zl.ins().addIcon(1009),en.checkRedPoint(),this.panel&&this.panel.update())},i.toGet=function(t){var e=new Object;e.className="m_role_pay_gift_get_tos",e.condition_id=t,this.sendSocketMessage(e)},i.onGet=function(t){0==t.err_code?(en.updateByGetToc(t.condition_id),this.panel&&this.panel.isPopup()&&this.panel.update(),en.checkRedPoint()):ce.addTip(t.err_code)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),vl=function(t){function e(){this.teamPanel=null,this.starPanel=null,this.getPanel=null,e.__super.call(this)}w(e,"modules.exercise.beasts.ExerBeastsCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addSocketListener("m_role_beasts_toc",this,this.onBeastsInfo),this.addSocketListener("m_role_beasts_condition_toc",this,this.onBeastsConditionInfo),this.addSocketListener("m_role_beasts_active_toc",this,this.onActive),this.addSocketListener("m_role_beasts_update_toc",this,this.onUpdate),this.addSocketListener("m_role_beasts_raise_toc",this,this.onRaise),this.addSocketListener("m_role_beasts_resonance_toc",this,this.onResonance),this.addSocketListener("m_role_beasts_receive_toc",this,this.onBeastsReceiveInfo),this.addSocketListener("m_role_beasts_up_skill_toc",this,this.onAloneSkilUp),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo),this.addMessageListener("BEASTS_OPEN_TEAM_PANEL",this,this.openTeamPanel),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagDataChangeRoCheckRP)},i.onBagDataChangeRoCheckRP=function(){h.timer.callLater(this,function(){on.checkAllRP()})},i.enterGameToInfo=function(){_t.setTimeout(this,this.enterGame,null,St.ENTER_DELAY)},i.enterGame=function(){this.toBeastsInfo(),this.toBeastsConditionInfo()},i.toBeastsConditionInfo=function(){for(var t=1;t<5;t++){var e=new Object;e.className="m_role_beasts_condition_tos",e.cond_type=t,this.sendSocketMessage(e)}this.sendSocketMessage(e)},i.onBeastsConditionInfo=function(t){0==t.err_code?(nn.setBeastsGetSInfos(t),this.dispatch("EXERCISE_UPDATE_BEAST_REWARD"),nn.checkBeastRewardRedPoint()):ce.addTip(t.err_code)},i.onBeastsReceiveInfo=function(t){0==t.err_code?Jt.addTip("领取成功"):ce.addTip(t.err_code)},i.toBeastsInfo=function(){var t=new Object;t.className="m_role_beasts_tos",this.sendSocketMessage(t)},i.onBeastsInfo=function(t){0==t.err_code?(nn.updateSocialInfo(t.group),nn.updateAloneInfo(t.alone),nn.setResonance(t.resonance),nn.aloneSkillStep=t.skill_step,this.dispatch("EXERCISE_UPDATE_PANEL"),on.checkAllRP()):ce.addTip(t.err_code)},i.toActive=function(t){var e=new Object;e.className="m_role_beasts_active_tos",e.id=t,this.sendSocketMessage(e)},i.onActive=function(t){0==t.err_code?(Jt.addTip("激活成功"),this.openGetPanel(t.id)):ce.addTip(t.err_code)},i.toRaise=function(t,e){var i=new Object;i.className="m_role_beasts_raise_tos",i.id=t,i.opt=e,this.sendSocketMessage(i)},i.onRaise=function(t){0==t.err_code?Jt.addTip("操作成功"):ce.addTip(t.err_code)},i.toResonance=function(t){var e=new Object;e.className="m_role_beasts_resonance_tos",e.sub_type=t,this.sendSocketMessage(e)},i.onResonance=function(t){0==t.err_code?(nn.addResonance(t.sub_type),this.updateTeamPanel(),this.dispatch("EXERCISE_UPDATE_PANEL"),on.checkAllRP()):ce.addTip(t.err_code)},i.toAloneSkillUp=function(){var t=new Object;t.className="m_role_beasts_up_skill_tos",this.sendSocketMessage(t)},i.onAloneSkilUp=function(t){0==t.err_code?(nn.aloneSkillStep=t.skill_step,on.checkAloneSkill(),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.onUpdate=function(t){nn.updateSocialInfo(t.group),nn.updateAloneInfo(t.alone),this.dispatch("EXERCISE_UPDATE_PANEL"),this.updateStarPanel(),on.checkAllRP()},i.openTeamPanel=function(t){void 0===t&&(t=0),t=0==t?nn.curTeamID:t,this.teamPanel=this.teamPanel||new $A,this.teamPanel.openWindow(),this.teamPanel.teamID=t},i.updateTeamPanel=function(){this.teamPanel&&this.teamPanel.update()},i.openStarPanel=function(){this.starPanel=this.starPanel||new QA,this.starPanel.update(),this.starPanel.openWindow()},i.updateStarPanel=function(){this.starPanel&&this.starPanel.update()},i.openGetPanel=function(t){this.getPanel=this.getPanel||new XA,this.getPanel.openWindow(),this.getPanel.animalID=t},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),Il=function(t){function e(){this.attrPanel=null,this.targetPanel=null,this.totalAttrView=null,e.__super.call(this)}w(e,"modules.exercise.beastsBook.ExerBeastsBookCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_beats_book_info_toc",this,this.onInfo),this.addSocketListener("m_role_beats_book_refine_toc",this,this.onUpLevel),this.addSocketListener("m_role_beats_book_upstar_toc",this,this.onUpStar),this.addSocketListener("m_role_beats_book_purify_toc",this,this.onUpStep),this.addSocketListener("m_role_beats_book_sets_toc",this,this.onActicitySuit),this.addSocketListener("m_role_beats_book_active_toc",this,this.onActicityCard),this.addSocketListener("m_role_beast_box_open_toc",this,this.onLottery),this.addMessageListener("BAGDATA_CHANGE",this,this.bagDataChange),this.addMessageListener("ENTER_GAME",this,this.toEnterGameGetInfo)},i.toEnterGameGetInfo=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.openAttrPanel=function(){this.attrPanel=this.attrPanel||new JA,this.attrPanel.openWindow(),this.attrPanel.update()},i.openTargetPanel=function(){this.targetPanel=this.targetPanel||new eE,this.targetPanel.openWindow(),this.targetPanel.update()},i.openTotalAttrView=function(t){void 0===t&&(t=0),this.totalAttrView=this.totalAttrView||new nE,this.totalAttrView.openWindow(),this.totalAttrView.update(t)},i.toInfo=function(){var t=new Object;t.className="m_role_beats_book_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(an.cardsInfo=t.beats_books,an.suitsInfo=t.sets_info,this.dispatch("EXERCISE_UPDATE_PANEL"),this.dispatch("BEASTS_BOOK_CARD_UPDATE"),an.checkAllRP()):ce.addTip(t.err_code)},i.toActicityCard=function(t){var e=new Object;e.className="m_role_beats_book_active_tos",e.type_id=t,this.sendSocketMessage(e)},i.onActicityCard=function(t){if(0==t.err_code){var e=an.getCardsById(t.type_id);Jt.addTip("异兽·"+e.name+"收录成功")}else 14805023==t.err_code?Jt.addTip("暂无收录物品，无法收录"):ce.addTip(t.err_code)},i.toActicitySuit=function(t){var e=new Object;e.className="m_role_beats_book_sets_tos",e.set_id=t,this.sendSocketMessage(e)},i.onActicitySuit=function(t){0==t.err_code?Jt.addTip("套装激活成功"):31048008==t.err_code?Jt.addTip("套装尚未完整收录，无法激活"):ce.addTip(t.err_code)},i.toUpLevel=function(t){var e=new Object;e.className="m_role_beats_book_refine_tos",e.type_id=t,this.sendSocketMessage(e)},i.onUpLevel=function(t){0==t.err_code?Jt.addTip("强化成功"):14805023==t.err_code?Jt.addTip("强化材料不足，无法进行强化"):ce.addTip(t.err_code)},i.toUpStar=function(t){var e=new Object;e.className="m_role_beats_book_upstar_tos",e.type_id=t,this.sendSocketMessage(e)},i.onUpStar=function(t){0==t.err_code?Jt.addTip("升星成功"):14805023==t.err_code?Jt.addTip("升星材料不足，无法进行升星"):ce.addTip(t.err_code)},i.toUpStep=function(t){var e=new Object;e.className="m_role_beats_book_purify_tos",e.type_id=t,this.sendSocketMessage(e)},i.onUpStep=function(t){0==t.err_code?Jt.addTip("进阶成功"):14805023==t.err_code?Jt.addTip("进阶材料不足，无法进行进阶"):ce.addTip(t.err_code)},i.toLottery=function(t){var e=new Object;e.className="m_role_beast_box_open_tos",e.op_type=t,this.sendSocketMessage(e)},i.onLottery=function(t){0==t.err_code?T.dispatch("GOODS_GET_SHOW_VIEW",t.reward,1):ce.addTip(t.err_code)},i.destoryCardPanel=function(){this.attrPanel&&(this.attrPanel.destroy(),this.attrPanel=null),this.targetPanel&&(this.targetPanel.destroy(),this.targetPanel=null),this.totalAttrView&&(this.totalAttrView.destroy(),this.totalAttrView=null)},i.bagDataChange=function(){an.checkAllRP(),this.dispatch("BEASTS_BOOK_CARD_UPDATE")},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),wl=function(t){function e(){this.skillPanel=null,this.issueTypePanel=null,this.issuePanel=null,this.issueRequestPanel=null,this.issueFriendListPanel=null,this.issueRewardPanel=null,this.composePanel=null,this.bountyRewardTip=null,this.noticePanel=null,e.__super.call(this)}w(e,"modules.exercise.biography.ExerBiographyCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_biography_info_toc",this,this.onInfo),this.addSocketListener("m_role_biography_upgrade_toc",this,this.onUpgrade),this.addSocketListener("m_role_biography_box_open_toc",this,this.onBoxOpen),this.addSocketListener("m_biography_copy_info_toc",this,this.onCopyInfo),this.addSocketListener("m_biography_copy_challenge_toc",this,this.onCopyChallenge),this.addSocketListener("m_biography_copy_refresh_toc",this,this.onRefresh),this.addSocketListener("m_biography_copy_bounty_info_toc",this,this.onBountyInfo),this.addSocketListener("m_biography_copy_bounty_toc",this,this.onBounty),this.addSocketListener("m_biography_copy_bounty_reward_toc",this,this.onBountyReward),this.addSocketListener("m_biography_copy_bounty_exit_toc",this,this.onBountyExist),this.addSocketListener("m_biography_copy_bounty_end_toc",this,this.onBountyEnd),this.addSocketListener("m_biography_copy_bounty_enter_toc",this,this.onBountyEnter),this.addSocketListener("m_biography_copy_bounty_update_toc",this,this.onBountyUpdate),this.addSocketListener("m_biography_copy_bounty_challenge_toc",this,this.onBountyChallenge),this.addSocketListener("m_biography_copy_set_toc",this,this.onNoticeSetting),this.addMessageListener("EXERCISE_BIOGRAPHY_COPY_BOUNTY_ENTER",this,this.toBountyEnter),this.addMessageListener("ENTER_GAME",this,this.timeOutToInfo),this.addMessageListener("COPY_REWARD_TOC",this,this.toCopyInfo),this.addMessageListener("BAGDATA_CHANGE",this,this.bagDataChange),this.addMessageListener("FIGHT_ATTACK_TOC_MYSELF_BACK",this,this.checkIsNeedShowFiveStarSkill),this.addMessageListener("ROLE_ALL_DEAD",this,this.doDead),this.addMessageListener("ENTER_MAP",this,this.onMapEnter),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack)},i.onExchangeBack=function(t){if(3==t.module_id)this.toBounty(12210001);else if(4==t.module_id)this.toBounty(12210002);else if(5==t.module_id)this.toBounty(12210003);else if(7==t.module_id&&t.reward&&0<t.reward.length){var e=Ys.getSubVOById(t.reward[0].id);e&&1==e.typeId&&this.updateComposePanel(),hn.checkCardTabBarRP(),hn.checkCardRP()}},i.onMapEnter=function(){rn.ins().removeAll()},i.doDead=function(t){t==pe.roleID&&rn.ins().removeAll()},i.toNoticeSetting=function(t){var e=new Object;e.className="m_biography_copy_set_tos",e.un_notice=t,this.sendSocketMessage(e)},i.onNoticeSetting=function(t){0==t.err_code||ce.addTip(t.err_code)},i.checkIsNeedShowFiveStarSkill=function(t){hn.checkFiveStarSkillIsexist(t)&&rn.ins().addItem(t)},i.openBountyRewardTip=function(t){this.bountyRewardTip=this.bountyRewardTip||new HF,this.bountyRewardTip.popup(),this.bountyRewardTip.update(t)},i.fightBack=function(t){el.ins().toExit(),me.linkTo(11703),2==t&&_t.setTimeout(this,this.openIssuePanel,null,300)},i.bagDataChange=function(){hn.checkBountyRP(),hn.checkCardRP()},i.timeOutToInfo=function(){4<=pe.user.attr.regrow&&(_t.setTimeout(this,this.toBountyInfo,null,St.ENTER_DELAY),_t.setTimeout(this,this.toCopyInfo,null,St.ENTER_DELAY),_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY))},i.toBoxOpen=function(t){var e=new Object;e.className="m_role_biography_box_open_tos",e.op_type=t,this.sendSocketMessage(e)},i.onBoxOpen=function(t){0==t.err_code?T.dispatch("GOODS_GET_SHOW_VIEW",t.reward,0):ce.addTip(t.err_code)},i.toBountyEnter=function(t){var e=new Object;e.className="m_biography_copy_bounty_enter_tos",e.role_id=t,this.sendSocketMessage(e)},i.onBountyEnter=function(t){0==t.err_code?(this.openIssuePanel(),this.toBountyInfo()):ce.addTip(t.err_code)},i.onBountyUpdate=function(t){switch(hn.updateByBountyUpdate(t),t.type){case 1:this.updateIssuePanel();break;case 2:case 3:case 4:this.updateIssuePanel();break;case 5:0==hn.bountyState?(this.closeIssuePanel(),Jt.addTip("队长已把你请出悬赏队伍")):1==hn.bountyState?this.updateIssuePanel():2==hn.bountyState&&(this.closeIssuePanel(),Jt.addTip("队长已把你请出悬赏队伍"));break;case 6:this.closeIssuePanel(),this.closeIssueRewardPanel();break;case 7:hn.checkIsLeader(pe.roleID)?this.updateIssuePanel():t.role_id==pe.roleID&&(this.closeIssuePanel(),this.closeIssueRewardPanel())}hn.checkBountyRP()},i.toBountyChallenge=function(){var t=new Object;t.className="m_biography_copy_bounty_challenge_tos",this.sendSocketMessage(t)},i.onBountyChallenge=function(t){0==t.err_code?(Lr.ins().toMapChange(25001),this.closeIssuePanel(),this.dispatch("PLAYS_CLOSE_PANEL")):ce.addTip(t.err_code)},i.toBountyEnd=function(){var t=new Object;t.className="m_biography_copy_bounty_end_tos",this.sendSocketMessage(t)},i.onBountyEnd=function(t){0==t.err_code||ce.addTip(t.err_code)},i.toBountyExist=function(t){var e=new Object;e.className="m_biography_copy_bounty_exit_tos",e.role_id=t,this.sendSocketMessage(e)},i.onBountyExist=function(t){0==t.err_code?0==t.role_id&&this.closeIssuePanel():ce.addTip(t.err_code)},i.toBountyReward=function(t){var e=new Object;e.className="m_biography_copy_bounty_reward_tos",e.type=t,this.sendSocketMessage(e)},i.onBountyReward=function(t){0==t.err_code?(hn.updateByBountyGetReward(t.type),this.updateIssuePanel(),this.updateIssueRewardPanel(),hn.checkIsLeader(pe.roleID)?Jt.addTip("成功领取奖励"):Jt.addTip("成功领取奖励，悬赏结束")):ce.addTip(t.err_code)},i.toBounty=function(t){var e=new Object;e.className="m_biography_copy_bounty_tos",e.bounty_type=t,this.sendSocketMessage(e)},i.onBounty=function(t){0==t.err_code?(this.closeIssueTypePanel(),this.openIssuePanel(),this.toBountyInfo()):ce.addTip(t.err_code)},i.toBountyInfo=function(){if(4<=pe.user.attr.regrow){var t=new Object;t.className="m_biography_copy_bounty_info_tos",this.sendSocketMessage(t)}},i.onBountyInfo=function(t){0==t.err_code&&(hn.setBountyInfo(t),this.updateIssuePanel(),hn.checkBountyRP())},i.toRefresh=function(){var t=new Object;t.className="m_biography_copy_refresh_tos",this.sendSocketMessage(t)},i.onRefresh=function(t){0==t.err_code?(hn.copyInfoTocVO.copy_list=t.copy_list,hn.copyInfoTocVO.refresh_times+=1,this.dispatch("PLAYS_UPDATE_PANEL"),hn.checkCopyRP()):ce.addTip(t.err_code)},i.toCopyChallenge=function(t){var e=new Object;e.className="m_biography_copy_challenge_tos",e.challenge_id=t,this.sendSocketMessage(e)},i.onCopyChallenge=function(t){0==t.err_code?(Lr.ins().toMapChange(25e3),this.dispatch("PLAYS_CLOSE_PANEL")):ce.addTip(t.err_code)},i.toCopyInfo=function(){if(4<=pe.user.attr.regrow){var t=new Object;t.className="m_biography_copy_info_tos",this.sendSocketMessage(t)}},i.onCopyInfo=function(t){0==t.err_code?(hn.copyInfoTocVO=t,hn.setNoticeSettings(t.notice),this.dispatch("PLAYS_UPDATE_PANEL"),hn.checkCopyRP()):ce.addTip(t.err_code)},i.toInfo=function(){if(4<=pe.user.attr.regrow){var t=new Object;t.className="m_role_biography_info_tos",this.sendSocketMessage(t)}},i.onInfo=function(t){0==t.err_code?(hn.cardTocDatas=t.cards,this.dispatch("EXERCISE_UPDATE_PANEL"),hn.checkCardRP()):ce.addTip(t.err_code)},i.toUpgrade=function(t){var e=new Object;e.className="m_role_biography_upgrade_tos",e.card_id=t,this.sendSocketMessage(e)},i.onUpgrade=function(t){0==t.err_code?(hn.updateCardsByUpgrade(t.card),this.updateSkillPanel(),this.dispatch("EXERCISE_UPDATE_PANEL"),this.updateComposePanel(),hn.checkCardRP(),hn.checkCardTabBarRP()):ce.addTip(t.err_code)},i.openSkillPanel=function(){this.skillPanel=this.skillPanel||new bE,this.skillPanel.openWindow(),this.skillPanel.update()},i.updateSkillPanel=function(){this.skillPanel&&this.skillPanel.isPopup()&&this.skillPanel.update()},i.openIssueTypePanel=function(){this.issueTypePanel=this.issueTypePanel||new gE,this.issueTypePanel.openWindow(),this.issueTypePanel.update()},i.destoryCopyPanel=function(){this.issueTypePanel&&(this.issueTypePanel.destroy(),this.issueTypePanel=null),this.issuePanel&&(this.issuePanel.destroy(),this.issuePanel=null),this.issueRequestPanel&&(this.issueRequestPanel.destroy(),this.issueRequestPanel=null),this.issueFriendListPanel&&(this.issueFriendListPanel.destroy(),this.issueFriendListPanel=null),this.issueRewardPanel&&(this.issueRewardPanel.destroy(),this.issueRewardPanel=null),this.bountyRewardTip&&(this.bountyRewardTip.destroy(),this.bountyRewardTip=null)},i.destoryCardPanel=function(){this.skillPanel&&(this.skillPanel.destroy(),this.skillPanel=null),this.composePanel&&(this.composePanel.destroy(),this.composePanel=null)},i.updateIssueTypePanel=function(){this.issueTypePanel&&this.issueTypePanel.update()},i.closeIssueTypePanel=function(){this.issueTypePanel&&this.issueTypePanel.closeWindow()},i.openIssuePanel=function(){this.issuePanel=this.issuePanel||new mE,this.issuePanel.openWindow(),this.issuePanel.update(),hn.checkBountyRP()},i.updateIssuePanel=function(){this.issuePanel&&this.issuePanel.update()},i.closeIssuePanel=function(){this.issuePanel&&this.issuePanel.closeWindow()},i.openIssueRequestPanel=function(){this.issueRequestPanel=this.issueRequestPanel||new fE,this.issueRequestPanel.openWindow(),this.issueRequestPanel.update()},i.closeIssueRequestPanel=function(){this.issueRequestPanel&&this.issueRequestPanel.closeWindow()},i.openIssueFriendListPanel=function(){this.issueFriendListPanel=this.issueFriendListPanel||new FT,this.issueFriendListPanel.openWindow(),this.issueFriendListPanel.update()},i.closeIssueFriendListPanel=function(){this.issueFriendListPanel&&this.issueFriendListPanel.closeWindow()},i.openIssueRewardPanel=function(){this.issueRewardPanel=this.issueRewardPanel||new _E,this.issueRewardPanel.openWindow()},i.updateIssueRewardPanel=function(){this.issueRewardPanel&&this.issueRewardPanel.update()},i.closeIssueRewardPanel=function(){this.issueRewardPanel&&this.issueRewardPanel.closeWindow()},i.openCompoundPanel=function(){this.composePanel=this.composePanel||new hE,this.composePanel.openWindow(),this.composePanel.update()},i.updateComposePanel=function(){this.composePanel&&this.composePanel.update()},i.openNoticePanel=function(){this.noticePanel=this.noticePanel||new IE,this.noticePanel.openWindow()},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),bl=function(t){function e(){this.panel=null,this._panelKey=NaN,e.__super.call(this)}w(e,"modules.exercise.ExerciseModule",l);var i=e.prototype;return i.initListeners=function(){Tl.getInstance(),xl.ins(),Cl.getInstance(),wl.getInstance(),Pl.ins(),El.ins(),vl.ins(),Rl.ins(),Al.ins(),Il.getInstance(),this.addMessageListener("EXERCISE_OPEN_PANEL",this,this.openExercisePanel),this.addMessageListener("EXERCISE_UPDATE_PANEL",this,this.updateExercisePanel),this.addMessageListener("EXERCISE_CLOSE_PANEL",this,this.closeExercisePanel),this.addMessageListener("BAGDATA_CHANGE",this,this.updateExercisePanel),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.updateExercisePanel),this.addMessageListener("ENTER_GAME",this,this.timeoutToInfo),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack)},i.onExchangeBack=function(t){var e;if(1==t.module_id)for(var i in t.reward)if(e=t.reward[i],-1!=cn.NEED_OPEN_PACK_VIEW_GOODS_IDS.indexOf(e.id)){var s=ur.getItem(e.id);if(s){var n=new Ee;n.msg=Z.span("【"+s.name,U.getColorLight(s.color))+"】已经放入背包，是否前往背包使用？",n.yesCaller=this,n.yesLabel="前往背包",n.yesFun=this.openPackView,n.key="ExchangeNeedOpenPackViewAgain",EF.showVO(n)}break}},i.openPackView=function(){this.dispatch("OPEN_PACKVIEW",1)},i.timeoutToInfo=function(){_t.setTimeout(this,Tl.getInstance().toInfo,[],St.ENTER_DELAY)},i.openExercisePanel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),3!=t||0!=Ne.isOpenBiography()?4==t&&pe.myRegrow<2?Jt.addTip("2转开启符文功能"):(6==t&&0==Ne.isOpenMeridian()?Jt.addTip("1转开启符文功能"):9!=t||mn.isOpenFightSoul()||Jt.addTip(mn.getFightSoulOpenRegrowLevel()+"转开启战魂功能"),0!=se.has("modules/exercise")?(_t.clearTimeout(this._panelKey),null==this.panel&&(this.panel=new CE,this.panel.on("undisplay",this,this.onPanelUndisplay)),this.panel.checkOpen(t,e),this.updateExercisePanel()):se.add("modules/exercise","正在加载历练模块",this,this.openExercisePanel,[t,e])):Jt.addTip("4转开启人物传记")},i.onPanelUndisplay=function(){this._panelKey=_t.setTimeout(this,this.clearExerSource,null,ya.coldTime+5e3)},i.clearExerSource=function(){this.panel&&(this.panel.destroy(),this.panel=null),se.destroy("modules/exercise");var t=Bn.getChargeArr(),e=ut.loadedMap,i=[],s=!1;for(var n in e){for(var o in s=!1,t)if(n==t[o].imgBg){s=!0;break}0==s&&0<=n.indexOf("modules/exercise")&&i.push(n)}for(var a=0;a<i.length;a++)ut.clearRes(i[a],!0)},i.updateExercisePanel=function(){this.panel&&this.panel.parent&&(this.panel.updateCurView(),this.panel.checkRP())},i.closeExercisePanel=function(){this.panel&&this.panel.parent&&this.panel.closeWindow()},i.isOpenPanel=function(){return!(!this.panel||!this.panel.isPopup())},i.getSelectedIndex=function(){return this.panel&&this.panel.isPopup()?this.panel.getTabSelectedIndex():0},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Sl=function(t){function e(){this._listPanel=null,this._soulPackBagPanel=null,this._operatePanel=null,this._collectPanel=null,this._resolvePanel=null,this._recastPanel=null,this._usePanel=null,this._soulSelectPanel=null,this._confirmPanel=null,this._collectSucPanel=null,this._soulTipsPanel=null,this._spiritPackBagPanel=null,this._addSpiritPanel=null,this._spiritOperatePanel=null,this._spiritListPanel=null,this._hasReceivedCrossInfo=!1,e.__super.call(this)}w(e,"modules.exercise.fightSoul.FightSoulCase",t);var i=e.prototype;return i.dispose=function(){t.prototype.dispose.call(this),this._listPanel=null,this._soulPackBagPanel=null,this._operatePanel=null,this._collectSucPanel=null,this._collectPanel=null,this._resolvePanel=null,this._recastPanel=null,this._usePanel=null,this._soulSelectPanel=null,this._confirmPanel=null,this._spiritPackBagPanel=null,this._addSpiritPanel=null,this._spiritOperatePanel=null,this._spiritListPanel=null,this._soulTipsPanel=null},i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("PACK_DATA_INITED",this,this.onPackageDataUpdate),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("BAGDATA_CHANGE",this,this.onPackageDataUpdate),this.addMessageListener("CROSS_SERVER_ENTER_PANEL_INFO",this,this.onGetCrossServerInfo),this.addMessageListener("ON_GODHOOD_INFO",this,this.onGetGodInfo),this.addSocketListener("m_role_war_soul_toc",this,this.onGetSoulInfo),this.addSocketListener("m_role_war_soul_opt_toc",this,this.onOperate),this.addSocketListener("m_goods_update_toc",this,this.onUseItemBack),this.addSocketListener("m_role_spirit_info_toc",this,this.onGetSpiritInfo),this.addSocketListener("m_role_spirit_buy_exp_toc",this,this.onBuySpiritExp),this.addSocketListener("m_role_spirit_cohesion_toc",this,this.onCollectSpirit),this.addSocketListener("m_role_spirit_equip_toc",this,this.onEquipSpirit),this.addSocketListener("m_role_spirit_remove_toc",this,this.onRemoveSpirit),this.addSocketListener("m_role_spirit_up_toc",this,this.onSpiritLevelUp),this.addSocketListener("m_role_spirit_reforge_toc",this,this.onRecast)},i.onEnterGame=function(){mn.isOpenFightSoul()&&_t.setTimeout(this,this.toGetAllInfo,null,St.ENTER_DELAY)},i.onGetCrossServerInfo=function(){this._hasReceivedCrossInfo||(mn.isOpenFightSoul()&&this.toGetAllInfo(),this._hasReceivedCrossInfo=!0)},i.onGetGodInfo=function(){mn.isOpenFightSoul()&&this.toGetAllInfo()},i.openPanelByLink=function(t,e){if(Xs.isCrossOpen)if(mn.isOpenFightSoul())switch(t){case 10812:this.openCollectSoulPanel()}else Jt.addTip(mn.getFightSoulOpenRegrowLevel()+"转开启战魂功能喔");else Jt.addTip("战魂功能未开启喔！")},i.openFightSoulTipsPanel=function(t,e){this.initAsset(this.openFightSoulTipsPanel,[t,e])&&(this._soulTipsPanel=this._soulTipsPanel||new WF,this._soulTipsPanel.popup(),this._soulTipsPanel.setSoulData(t,e))},i.openFightSoulConfirmPanel=function(t,e,i,s,n){void 0===e&&(e=""),void 0===i&&(i=""),this._confirmPanel=this._confirmPanel||new EE,this._confirmPanel.parent||this._confirmPanel.openWindow(),this._confirmPanel.setData(t),this._confirmPanel.setTitleName(e),this._confirmPanel.setDesc(i),this._confirmPanel.onConfirm=s,this._confirmPanel.onCancel=n},i.openSelectSoulPanel=function(t){this._soulSelectPanel=this._soulSelectPanel||new ME,this._soulSelectPanel.parent||this._soulSelectPanel.openWindow(),this._soulSelectPanel.setSelectList(t)},i.openSoulListPanel=function(t){this._listPanel=this._listPanel||new RE,this._listPanel.parent||this._listPanel.openWindow(),this._listPanel.curPos=t},i.openSoulPackBagPanel=function(){this.initAsset(this.openSoulPackBagPanel)&&(this._soulPackBagPanel=this._soulPackBagPanel||new NE,this._soulPackBagPanel.openWindow(null,!0),this.toGetPackageBagInfo())},i.openSpiritPackPanel=function(){this.initAsset(this.openSpiritPackPanel)&&(this._spiritPackBagPanel=this._spiritPackBagPanel||new HE,this._spiritPackBagPanel.openWindow(null,!0),this.toGetPackageBagInfo())},i.openOperationPanel=function(t){this._operatePanel=this._operatePanel||new DE,this._operatePanel.parent||this._operatePanel.openWindow(),this._operatePanel.curPos=t},i.openAddPackageCellPanel=function(t){this.initAsset(this.openAddPackageCellPanel,[t])&&(null!=mn.getPackOpenVO(xo.getBagExtends(t)+1,t)?(LE.ins.bagId=t,LE.ins.openWindow()):Jt.addTip("已达到开启数量上限"))},i.openCollectSoulPanel=function(){this.initAsset(this.openCollectSoulPanel)&&(this._collectPanel=this._collectPanel||new kE,this._collectPanel.parent||this._collectPanel.openWindow())},i.openResolveSoulPanel=function(){this._resolvePanel=this._resolvePanel||new BE,this._resolvePanel.parent||this._resolvePanel.openWindow(),this._resolvePanel.updateView()},i.openRecastSoulPanel=function(){this._recastPanel=this._recastPanel||new VE,this._recastPanel.parent||this._recastPanel.openWindow(),this._recastPanel.updateView()},i.openCollectSucPanel=function(t){this._collectSucPanel=this._collectSucPanel||new AE,this._collectSucPanel.parent||this._collectSucPanel.openWindow(),this._collectSucPanel.setGoods(t)},i.openSpiritOperatePanel=function(t){var e=mn.getEquipSpiritByPos(t);e&&(this._spiritOperatePanel=this._spiritOperatePanel||new GE,this._spiritOperatePanel.parent||this._spiritOperatePanel.openWindow(),this._spiritOperatePanel.setSpiritInfo(e))},i.openAddSpiritExpPanel=function(){this._addSpiritPanel=this._addSpiritPanel||new TE,this._addSpiritPanel.parent||this._addSpiritPanel.openWindow(),this._addSpiritPanel.updateView()},i.openSpiritListPanel=function(t){this._spiritListPanel=this._spiritListPanel||new FE,this._spiritListPanel.parent||this._spiritListPanel.openWindow(),this._spiritListPanel.curPos=t},i.useFightSoulItem=function(t){mn.isOpenFightSoul()?mn.isPackageFull(xo.FIGHT_SOUL_ID)?Jt.addTip("战魂背包容量已满！"):cr.ins().useItem(t.id,1):Jt.addTip("功能未开启！")},i.onUseItemBack=function(t){2!=t.type&&(21==t.reward_type?(this.openUseItemPanel(t.goods[0]),fn.checkAllPalSoulRP()):22==t.reward_type?(this.openCollectSucPanel(t.goods[0]),fn.checkAllPalSpiritRP()):23==t.reward_type&&Jt.addTip("成功使用精魄，可前往精魄背包查看"))},i.openUseItemPanel=function(t){this._usePanel=this._usePanel||new WE,this._usePanel.parent||this._usePanel.openWindow(),this._usePanel.data=t},i.toSpiritLevelUp=function(t){var e=new Object;e.className="m_role_spirit_up_tos",e.pal_id=mn.curPalId,e.type_id=t,this.sendSocketMessage(e)},i.onSpiritLevelUp=function(t){0<t.err_code?ce.addTip(t.err_code):(mn.handlerSpiritLevelUp(t),this.dispatch("EXERCISE_UPDATE_PANEL"),this.toGetPackageBagInfo(),this.updateSpiritOperatePane())},i.toRemoveSpirit=function(t){var e=new Object;e.className="m_role_spirit_remove_tos",e.pal_id=mn.curPalId,e.type_id=t,this.sendSocketMessage(e)},i.onRemoveSpirit=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{if(mn.handlerSpiritOperate(t.pal_id,t.spirits),this.dispatch("EXERCISE_UPDATE_PANEL"),this.toGetPackageBagInfo(),1==mn.operateTypeIdList.length){var e=mn.getPureSpiritVO(mn.operateTypeIdList[0]);Jt.addTip("成功拆卸"+e.name)}mn.clearOperateTypeIdList()}},i.toEquipSpirit=function(t){var e=new Object;e.className="m_role_spirit_equip_tos",e.pal_id=mn.curPalId,e.id_list=t,this.sendSocketMessage(e)},i.onEquipSpirit=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{if(mn.handlerSpiritOperate(t.pal_id,t.spirits),this.dispatch("EXERCISE_UPDATE_PANEL"),this.toGetPackageBagInfo(),1<mn.operateTypeIdList.length)Jt.addTip("成功装备精魄");else if(1==mn.operateTypeIdList.length){var e=mn.getPureSpiritVO(mn.operateTypeIdList[0]);Jt.addTip("装备"+e.name+"成功")}this.dispatch("FIGHT_SOUL_SHOW_EQUIP_EFFECT"),mn.clearOperateTypeIdList()}},i.toCollectSpirit=function(t){var e=new Object;e.className="m_role_spirit_cohesion_tos",e.souls=t,this.sendSocketMessage(e)},i.toRecast=function(t){void 0===t&&(t=0);var e=new Object;e.className="m_role_spirit_reforge_tos",e.goods_id=t,this.sendSocketMessage(e)},i.onRecast=function(t){0<t.err_code?ce.addTip(t.err_code):this._recastPanel&&this._recastPanel.recastSuc()},i.onCollectSpirit=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.toBuySpiritExp=function(t){var e=new Object;e.className="m_role_spirit_buy_exp_tos",e.cnt=t,this.sendSocketMessage(e)},i.onBuySpiritExp=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("购买经验成功"),this.updateSpiritOperatePane())},i.toGetSpiritInfo=function(){var t=new Object;t.className="m_role_spirit_info_tos",t.pal_id=0,this.sendSocketMessage(t)},i.onGetSpiritInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(mn.handlerSpiritInfo(t.pal_spirits),this.dispatch("EXERCISE_UPDATE_PANEL"),fn.checkAllPalSpiritRP())},i.toGetAllInfo=function(){this.toGetPackageBagInfo(),this.toGetSoulInfo(),this.toGetSpiritInfo()},i.toGetSoulInfo=function(){var t=new Object;t.className="m_role_war_soul_tos",this.sendSocketMessage(t)},i.onGetSoulInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(mn.handlerSoulInfo(t.souls),this.dispatch("EXERCISE_UPDATE_PANEL"),fn.checkAllPalSoulRP())},i.toOperate=function(t,e){var i=new Object;i.className="m_role_war_soul_opt_tos",i.pal_id=mn.curPalId-pe.roleID,i.opt=t,i.goods_list=e,this.sendSocketMessage(i)},i.onOperate=function(t){0<t.err_code?ce.addTip(t.err_code):(this.showOperateResult(t),3!=t.opt&&(mn.handlerOperate(t),this.dispatch("EXERCISE_UPDATE_PANEL")),this.toGetPackageBagInfo())},i.showOperateResult=function(t){if(1==t.opt){if(1<mn.operateTypeIdList.length)Jt.addTip("成功装备战魂");else{var e,i,s=mn.operateTypeIdList[0];for(var n in t.list)if((i=t.list[n]).id==s){e=i;break}if(!e)return;var o,a=mn.getFightSoulVO(s),l=mn.getEquipSoulKVByPos(a.pos);if(l){var r=mn.getFightSoulVO(l.id).name+"+"+l.val,h=a.name+"+"+e.val;o=Xt.format("成功将{0}替换为{1}",r,h),Jt.addTip(o)}else this.showOperateSuccessTips(s,t.opt,e.val)}this.dispatch("FIGHT_SOUL_SHOW_EQUIP_EFFECT")}else if(2==t.opt){var u=mn.operateTypeIdList[0],c=mn.getFightSoulVO(u),d=mn.getEquipSoulKVByPos(c.pos);this.showOperateSuccessTips(u,t.opt,d.val)}else 3==t.opt&&Jt.addTip("分解成功");mn.clearOperateTypeIdList()},i.showOperateSuccessTips=function(t,e,i){var s=mn.getFightSoulVO(t);Jt.addTip(Xt.format(pn.OPERATE_SUCCESS_TIPS[e],s.name,i))},i.toGetPackageBagInfo=function(){var t=new Object;t.className="m_role_bag_tos",t.bag_types=[xo.PACKTYPE_FIGHT_SOUL,xo.PACKTYPE_PURE_SPIRIT],this.sendSocketMessage(t)},i.onPackageDataUpdate=function(){this.dispatch("FIGHT_SOUL_PACKAGE_DATA_UPDATE"),fn.checkAllRP()},i.updateSpiritOperatePane=function(){if(this._spiritOperatePanel&&this._spiritOperatePanel.parent){var t=mn.getEquipSpiritByPos(this._spiritOperatePanel.getCurPos());this._spiritOperatePanel.setSpiritInfo(t)}},i.initAsset=function(t,e){return!!se.has("modules/fightSoul")||(se.add("modules/fightSoul","正在加载战魂资源",this,t,e),!1)},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(l),xl=function(t){function e(){this.equipId=0,this.operateType=0,this.stoneInlayPanel=null,this.stoneReplacePanel=null,this.stoneUpPanel=null,this.attrView=null,this.stoneDisaPanel=null,e.__super.call(this)}w(e,"modules.exercise.godEquip.ExerGodEquipCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_god_equip_info_toc",this,this.onInfo),this.addSocketListener("m_role_god_equip_load_toc",this,this.onLoad),this.addSocketListener("m_role_god_equip_upgrade_toc",this,this.onUpgrade),this.addSocketListener("m_role_god_equip_stone_toc",this,this.onStone),this.addMessageListener("PACK_DATA_INITED",this,this.onPackInit),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagChange),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack)},i.onBagChange=function(){this.checkRp(),_n.checkGodEquipStoneRP()},i.onExchangeBack=function(t){switch(t.module_id){case 12:this.dispatch("EXERCISE_UPDATE_PANEL"),this.closeStoneInlayPanel(),_n.curGodEquipVO&&this.toStone(1,_n.curGodEquipVO.id,t.scheme,_n.curStonePart);break;case 13:this.dispatch("EXERCISE_UPDATE_PANEL"),_n.curGodEquipVO&&_n.curUpTarStoneVO&&this.toStone(1,_n.curGodEquipVO.id,_n.curUpTarStoneVO.id,_n.curStonePart)}},i.toStone=function(t,e,i,s,n){void 0===s&&(s=0),void 0===n&&(n=0);var o=new Object;o.className="m_role_god_equip_stone_tos",o.god_equip_id=e,o.item_id=i,o.pos=s,o.op_type=t,this.sendSocketMessage(o),this.equipId=e,this.operateType=n},i.onStone=function(t){if(0==t.err_code){switch(_n.updateStone(t.op_type,this.equipId,t.pos,t.item_id),t.op_type){case 1:this.dispatch("EXERCISE_UPDATE_PANEL"),this.closeStoneInlayPanel(),this.updateStoneReplacePanel(),this.updateStoneUpPanel(),this.showStoneUpSucc(),_n.curUpTarStoneVO&&(_n.curUpTarStoneVO=null);break;case 2:_n.curUpTarStoneVO&&Tr.ins().toExchange(13,_n.curUpTarStoneVO.scheme,1),this.closeStoneDisaPanel()}switch(this.operateType){case 1:this.stoneReplacePanel&&this.stoneReplacePanel.isPopup()&&this.stoneReplacePanel.showSucc()}}else ce.addTip(t.err_code)},i.onPackInit=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){modules.exercise.godEquip.ExerGodEquipCase.ins().toInfo()},i.toInfo=function(){var t=new Object;t.className="m_role_god_equip_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(_n.equipData=t.god_equip,this.checkRp(),_n.checkGodEquipStoneRP(),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toLoad=function(t){var e=new Object;e.className="m_role_god_equip_load_tos",e.god_equip_id=t,this.sendSocketMessage(e)},i.onLoad=function(t){0==t.err_code?(_n.updateEquipData(t.god_equip_id,t.step),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toUpgrade=function(t){var e=new Object;e.className="m_role_god_equip_upgrade_tos",e.god_equip_id=t,this.sendSocketMessage(e)},i.onUpgrade=function(t){0==t.err_code?(_n.updateEquipData(t.god_equip_id,t.step),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.checkRp=function(){var t,e=_n.getAllGodEquip();for(var i in e)if(t=e[i],gn.checkOneNeedRP(t))return void Nt.show("RP_EXERCISE_GODEQUIP");Nt.hide("RP_EXERCISE_GODEQUIP")},i.openGodEquipAttrView=function(){this.attrView=this.attrView||new zE,this.attrView.openWindow()},i.openStoneUpPanel=function(){this.stoneUpPanel=this.stoneUpPanel||new hR,this.stoneUpPanel.openWindow(),this.stoneUpPanel.update()},i.updateStoneUpPanel=function(){this.stoneUpPanel&&this.stoneUpPanel.isPopup()&&this.stoneUpPanel.update()},i.closeStoneUpPanel=function(){this.stoneUpPanel&&this.stoneUpPanel.isPopup()&&this.stoneUpPanel.closeWindow()},i.showStoneUpSucc=function(){this.stoneUpPanel&&this.stoneUpPanel.isPopup()&&this.stoneUpPanel.showSucc()},i.openStoneReplacePanel=function(){this.stoneReplacePanel=this.stoneReplacePanel||new rR,this.stoneReplacePanel.openWindow(),this.stoneReplacePanel.update()},i.updateStoneReplacePanel=function(){this.stoneReplacePanel&&this.stoneReplacePanel.isPopup()&&this.stoneReplacePanel.update()},i.openStoneInlayPanel=function(){this.stoneInlayPanel=this.stoneInlayPanel||new lR,this.stoneInlayPanel.openWindow(),this.stoneInlayPanel.update()},i.closeStoneInlayPanel=function(){this.stoneInlayPanel&&this.stoneInlayPanel.isPopup()&&this.stoneInlayPanel.closeWindow()},i.openStoneDisaPanel=function(){this.stoneDisaPanel=this.stoneDisaPanel||new aR,this.stoneDisaPanel.openWindow(),this.stoneDisaPanel.updata()},i.closeStoneDisaPanel=function(){this.stoneDisaPanel&&this.stoneDisaPanel.isPopup()&&this.stoneDisaPanel.closeWindow()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Cl=function(t){function e(){e.__super.call(this)}w(e,"modules.exercise.knighthood.ExerKnighthoodCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_knighthood_info_toc",this,this.onInfo),this.addSocketListener("m_role_knighthood_upgrade_toc",this,this.onUpgrade),this.addMessageListener("EXERCISE_KNIGHTHOOD_CONDICTION_UPDATE",this,this.condictionInfoUpdate)},i.condictionInfoUpdate=function(){bl.ins().isOpenPanel()&&bl.ins().getSelectedIndex()},i.toInfo=function(){var t=new Object;t.className="m_role_knighthood_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(yn.infoToc=t,this.dispatch("EXERCISE_UPDATE_PANEL"),yn.checkRedPoint()):ce.addTip(t.err_code)},i.toUpgrade=function(){var t=new Object;t.className="m_role_knighthood_upgrade_tos",this.sendSocketMessage(t)},i.onUpgrade=function(t){0==t.err_code?(yn.infoToc.level=t.level,yn.infoToc.condition=t.condition,this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Pl=function(t){function e(){e.__super.call(this)}w(e,"modules.exercise.meridian.MeridianCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addSocketListener("m_role_meridians_info_toc",this,this.onInfo),this.addSocketListener("m_role_meridians_upgrade_toc",this,this.onUpgrade),this.addSocketListener("m_role_meridians_daily_reward_toc",this,this.onReward),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.addMessageListener("CROSS_DAY",this,this.onEnterGame)},i.onScoreChange=function(t){t&&18==t.id&&In.checkAllRP()},i.onEnterGame=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){if(Ne.isOpenMeridian()){var t=new Object;t.className="m_role_meridians_info_tos",this.sendSocketMessage(t)}},i.onInfo=function(t){0==t.err_code?(vn.curLv=t.lv,vn.curCopyTime=t.copy_times,vn.isGetReward=0!=t.is_daily_reward,In.checkAllRP(),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toUpgrade=function(){var t=new Object;t.className="m_role_meridians_upgrade_tos",this.sendSocketMessage(t)},i.onUpgrade=function(t){0==t.err_code?(vn.curLv=t.lv,In.checkAllRP(),this.dispatch("MERIDIAN_UPGRADE")):ce.addTip(t.err_code)},i.toReward=function(){var t=new Object;t.className="m_role_meridians_daily_reward_tos",this.sendSocketMessage(t)},i.onReward=function(t){0==t.err_code?(vn.isGetReward=!0,In.checkAllRP(),this.dispatch("MERIDIAN_GET"),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),Tl=function(t){function e(){this.skillPanel=null,e.__super.call(this)}w(e,"modules.exercise.pearl.ExerPearlCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_pearl_info_toc",this,this.onInfo),this.addSocketListener("m_role_pearl_upgrade_toc",this,this.onUpgrade),this.addSocketListener("m_role_pearl_skill_upgrade_toc",this,this.onRolePearlSkillUpgrade),this.addMessageListener("EXERCISE_PEARL_CONDICTION_UPDATE",this,this.condictionInfoUpdate)},i.condictionInfoUpdate=function(){bl.ins().isOpenPanel()&&1==bl.ins().getSelectedIndex()&&this.toInfo()},i.toInfo=function(){var t=new Object;t.className="m_role_pearl_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(bn.infoToc=t,bn.checkRedPoint(),bn.checkFamilySkillHasData()?this.dispatch("EXERCISE_UPDATE_PANEL"):(Ol.ins().toFamilySkillInfo(),bn.doPearlToInfo=!0),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toRolePearlSkillUpgrade=function(){var t=new Object;t.className="m_role_pearl_skill_upgrade_tos",this.sendSocketMessage(t)},i.onRolePearlSkillUpgrade=function(t){t.err_code?ce.addTip(t.err_code):this.toInfo()},i.toUpgrade=function(){var t=new Object;t.className="m_role_pearl_upgrade_tos",this.sendSocketMessage(t)},i.onUpgrade=function(t){0==t.err_code?(Jt.addTip("获得  元宝  ×10"),bn.isUpSuccess=!0,bn.infoToc.level=t.level,bn.infoToc.exp=t.exp,bn.checkRedPoint(),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.openExerPearlSkillPanel=function(){this.skillPanel=this.skillPanel||new vR,this.skillPanel.openWindow(),this.skillPanel.update()},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),kl=function(t){function e(){this.resolvePanel=null,this.buyElitePanel=null,this.coreUpgradeView=null,this.operationPanel=null,this.tempDels=null,this.inCD=!1,e.__super.call(this)}w(e,"modules.exercise.rune.RuneCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_rune_info_toc",this,this.onRuneInfo),this.addSocketListener("m_role_rune_up_level_toc",this,this.onRuneUpgrade),this.addSocketListener("m_role_rune_up_core_toc",this,this.onRuneCoreUpgrade),this.addSocketListener("m_role_rune_bag_update_toc",this,this.onRuneBagUpdate),this.addSocketListener("m_role_rune_active_toc",this,this.onRuneActive),this.addSocketListener("m_role_rune_decompose_toc",this,this.onRuneDecompose),this.addSocketListener("m_role_rune_get_score_toc",this,this.onGetScore),this.addSocketListener("m_role_rune_free_time_toc",this,this.onFreeTime),this.addSocketListener("m_role_rune_load_block_toc",this,this.onLoadBlock),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("UPDATE_PAL_DATA",this,this.updateByNewPal),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.updateByRoleScoreChange),this.addMessageListener("RUNE_RESOLVE_SELECT_GOODS",this,this.updateResolvePanelBySel),this.addMessageListener("RPMASK_INFO_UPDATE",this,this.updateByRPMaskChange)},i.updateByRPMaskChange=function(){Cn.checkAllRP(),this.dispatch("RUNE_MAIN_VIEW_UPDATE")},i.updateByRoleScoreChange=function(t){t&&8==t.id&&(Cn.checkAllRP(),this.dispatch("EXERCISE_UPDATE_PANEL"),this.updateOperationPanel(),this.updateBuyElitePanel(),this.updateCoreUpgradeView())},i.onEnterGame=function(){xn.baseVO&&xn.baseVO.isOpen()&&_t.setTimeout(this,this.toRuneInfo,null,St.ENTER_DELAY)},i.updateByNewPal=function(){xn.baseVO&&xn.baseVO.isOpen()&&this.toRuneInfo()},i.toLoadBlock=function(t,e,i){var s=new Object;s.className="m_role_rune_load_block_tos",s.pal_id=t,s.pos=e,s.type_id=i,this.sendSocketMessage(s)},i.onLoadBlock=function(t){0==t.err_code?(Jt.addTip("铭刻成功"),xn.updateByLoadBlock(t.pal_id,t.pos,t.block),this.updateOperationPanel(),this.dispatch("EXERCISE_UPDATE_PANEL"),Cn.checkAllRP(),Cn.checkAllPalHeadRP(),this.dispatch("RUNE_INLAY_STONE_OVER")):ce.addTip(t.err_code)},i.onFreeTime=function(t){xn.freeTime=t.free_time,this.updateBuyElitePanel(),Cn.checkRPRuneFreeGetScore()},i.toGetScore=function(t){var e=new Object;e.className="m_role_rune_get_score_tos",e.op_type=t,this.sendSocketMessage(e)},i.onGetScore=function(t){0==t.err_code?(xn.freeTime=t.free_time,this.updateBuyElitePanel(),Jt.addTip("成功增加"+t.add_score+"点精华"),Cn.checkRPRuneUp(),Cn.checkRPRuneCoreCanUp(),Cn.checkRPRuneFreeGetScore()):ce.addTip(t.err_code)},i.toDecompose=function(t){if(!this.inCD)if(t&&0<t.length){this.inCD=!0,this.tempDels=t;var e=new Object;e.className="m_role_rune_decompose_tos",e.list=t,this.sendSocketMessage(e)}else Jt.addTip("当前无可分解符文")},i.onRuneDecompose=function(t){this.inCD=!1,0==t.err_code?(Jt.addTip("分解成功，获得"+t.score+"符文精华"),xn.bagUpdate(null,this.tempDels),this.tempDels=null,this.resolvePanelShowEffect(),this.dispatch("EXERCISE_UPDATE_PANEL"),Cn.checkRPStoneInlay(),Cn.checkRPRuneResolve()):ce.addTip(t.err_code)},i.toRuneActive=function(t,e){var i=new Object;i.className="m_role_rune_active_tos",i.pal_id=t,i.rune_list=e,this.sendSocketMessage(i)},i.onRuneActive=function(t){0==t.err_code?(xn.updateByActive(t.pal_id,t.rune_list),this.dispatch("EXERCISE_UPDATE_PANEL"),Cn.checkRPInlay(),this.dispatch("RP_RUNE_INLAY_OVER",t.rune_list)):ce.addTip(t.err_code)},i.onRuneBagUpdate=function(t){xn.bagUpdate(t.add_list,t.del_list),Cn.checkAllRP()},i.toRuneInfo=function(){var t=new Object;t.className="m_role_rune_info_tos",this.sendSocketMessage(t)},i.onRuneInfo=function(t){0==t.err_code?(xn.palInfos=t.pal_info,xn.bagList=t.bag_list,xn.freeTime=t.free_time,this.dispatch("EXERCISE_UPDATE_PANEL"),Cn.checkAllRP()):ce.addTip(t.err_code)},i.toRuneUpgrade=function(t,e){var i=new Object;i.className="m_role_rune_up_level_tos",i.pal_id=t,i.pos=e,this.sendSocketMessage(i)},i.onRuneUpgrade=function(t){0==t.err_code?(Jt.addTip("升级成功"),xn.updatePalInfoByRuneUpgrade(t.pal_id,t.pos,t.rune_level),this.dispatch("EXERCISE_UPDATE_PANEL"),this.updateOperationPanel(),Cn.checkRPRuneUp()):ce.addTip(t.err_code)},i.toRuneCoreUpgrade=function(t){var e=new Object;e.className="m_role_rune_up_core_tos",e.pal_id=t,this.sendSocketMessage(e)},i.onRuneCoreUpgrade=function(t){0==t.err_code?(Jt.addTip("核心升级成功"),xn.updatePalInfoByCoreUpgrade(t.pal_id,t.val),this.dispatch("EXERCISE_UPDATE_PANEL"),Cn.checkRPRuneCoreCanUp(),this.updateCoreUpgradeView()):ce.addTip(t.err_code)},i.openResolvePanel=function(){se.has("modules/rune")?(this.resolvePanel=this.resolvePanel||new ER,this.resolvePanel.update(),this.resolvePanel.openWindow()):se.add("modules/rune","正在加载符文资源",this,this.openResolvePanel)},i.resolvePanelShowEffect=function(){this.resolvePanel&&this.resolvePanel.isPopup()&&this.resolvePanel.showEff()},i.updateResolvePanelBySel=function(t){this.resolvePanel&&this.resolvePanel.isPopup()&&this.resolvePanel.updateBySel(t)},i.openBuyElitePanel=function(){se.has("modules/rune")?(this.buyElitePanel=this.buyElitePanel||new wR,this.buyElitePanel.openWindow(),this.buyElitePanel.update()):se.add("modules/rune","正在加载符文资源",this,this.openBuyElitePanel)},i.updateBuyElitePanel=function(){this.buyElitePanel&&this.buyElitePanel.isPopup()&&this.buyElitePanel.update()},i.openCoreUpgradeView=function(){this.coreUpgradeView=this.coreUpgradeView||new bR,this.coreUpgradeView.openWindow(),this.coreUpgradeView.update()},i.updateCoreUpgradeView=function(){this.coreUpgradeView&&this.coreUpgradeView.update()},i.openOperationPanel=function(t){void 0===t&&(t=0),this.operationPanel=this.operationPanel||new TR,this.operationPanel.openWindow(),this.operationPanel.selectedView(t),this.operationPanel.update()},i.updateOperationPanel=function(){this.operationPanel&&this.operationPanel.update()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Al=function(t){function e(){this.spiritreTip=null,this.spiriTreGetView=null,this.spiriTreSuitSortView=null,e.__super.call(this)}w(e,"modules.exercise.spiriTreasure.SpiriTreModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("SPIRITRE_REPLACE",this,this.onReplaceViewUpdate),this.addMessageListener("SPIRITRE_QUENCH",this,this.onQuenchViewUpdate),this.addMessageListener("SPIRITRE_ADVANCE",this,this.onAdvanceViewUpdate),this.addMessageListener("SPIRITRE_SLOT",this,this.onInlayViewUpdate),this.addMessageListener("SPIRITRE_UNLOAD",this,this.onInlayViewUpdate),this.addMessageListener("PACK_DATA_INITED",this,this.onPackageDataUpdate),this.addMessageListener("BAGDATA_CHANGE",this,this.onPackageDataUpdate),this.addMessageListener("SPIRITRE_ADD",this,this.onSpiriTreUseBack),this.addMessageListener("SPIRITRE_ACTIVE",this,this.onSpiriTreTipUpdate),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addSocketListener("m_role_ling_bao_info_toc",this,this.onInfo),this.addSocketListener("m_role_ling_bao_load_toc",this,this.onReplace),this.addSocketListener("m_role_ling_bao_purify_toc",this,this.onAdvanch),this.addSocketListener("m_role_ling_bao_refine_toc",this,this.onQuench),this.addSocketListener("m_role_ling_bao_convert_toc",this,this.onDecomp),this.addSocketListener("m_role_ling_bao_fuse_toc",this,this.onRecast),this.addSocketListener("m_role_ling_bao_slot_toc",this,this.onInlay),this.addSocketListener("m_role_ling_bao_slot_down_toc",this,this.onUnload),this.addSocketListener("m_role_ling_bao_set_toc",this,this.onSetSort),this.addSocketListener("m_role_ling_bao_active_target_toc",this,this.onActive),this.addSocketListener("m_role_add_ling_bao_toc",this,this.onAdd),this.addSocketListener("m_role_ling_bao_target_info_toc",this,this.onAllPalSuitActive)},i.onEnterGame=function(){_t.setTimeout(this,this.enterGameDelay,null,St.ENTER_DELAY)},i.enterGameDelay=function(){this.toGetPackageBagInfo(),this.toSetSort([])},i.onSpiriTreUseBack=function(t){t&&(this.spiriTreGetView=this.spiriTreGetView||new qF,this.spiriTreGetView.popup(),this.spiriTreGetView.updateGetBack(t))},i.onSpiriTreRecastBack=function(t){t&&(this.spiriTreGetView=this.spiriTreGetView||new qF,this.spiriTreGetView.popup(),this.spiriTreGetView.updateRecastBack(t))},i.openAutoSuitSortView=function(){this.spiriTreSuitSortView=this.spiriTreSuitSortView||new KR,this.spiriTreSuitSortView.openWindow()},i.newSpiriTreTip=function(){return this.spiritreTip=this.spiritreTip||new XF},i.setMainViewPalIndex=function(){this.dispatch("SPIRITRE_MAINPAL_UPDATE")},i.onQuenchViewUpdate=function(){this.dispatch("SPIRITRE_SEC_UPDATE")},i.onAdvanceViewUpdate=function(){this.dispatch("SPIRITRE_SEC_UPDATE")},i.onInlayViewUpdate=function(){this.dispatch("SPIRITRE_SEC_UPDATE")},i.onReplaceViewUpdate=function(){this.dispatch("SPIRITRE_REPLACE_UPDATE")},i.onRecastViewUpdateGet=function(){this.dispatch("SPIRITRE_RECAST_UPDATEGET")},i.onDecompRewardUpdateGet=function(){this.dispatch("SPIRITRE_DECOMP_UPDATEGET")},i.onMainRPUpdate=function(){T.dispatch("SPIRITRE_MAIN_UPDATERP")},i.onSpiriTreTipUpdate=function(t){var e=null,i=0;null!=t&&(2==t.action?t.pal_id==Tn.curPalId&&t.set_id==Tn.curSuitId&&(i=t.target_num,e=Tn.getSpiriTreDesVo()):3==t.action&&t.pal_id==Tn.curPalId&&t.set_id==Tn.curSuitId&&(i=t.target_num,e=Tn.getSpiriTreSuitVo()),this.spiritreTip&&this.spiritreTip.parent?(this.spiritreTip.activeType=i,this.spiritreTip.data=e):(this.spiritreTip=this.newSpiriTreTip(),this.spiritreTip.activeType=i,this.spiritreTip.data=e,this.spiritreTip.popup()))},i.toGetPackageBagInfo=function(){var t=new Object;t.className="m_role_bag_tos",t.bag_types=[xo.PACKTYPE_SPIRITRE],this.sendSocketMessage(t)},i.onPackageDataUpdate=function(){Tn.bagData=xo.getSpiriTreGoods(),this.toAllPalSuitActive(),this.toInfo()},i.toInfo=function(){var t=new Object;t.className="m_role_ling_bao_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Tn.setSpiriTreInfo(t.ling_baos),Tn.checkSpiriTreRP()):ce.addTip(t.err_code)},i.toSetSort=function(t){var e=new Object;if(e.className="m_role_ling_bao_set_tos",0==t.length)e.set_info=t;else{for(var i=[],s=0;s<t.length;s++){var n=new Object;n.className="p_kv",n.id=s,n.val=t[s],i.push(n)}e.set_info=i}this.sendSocketMessage(e)},i.onSetSort=function(t){0==t.err_code?(Tn.setSort(t.set_info),this.onReplaceViewUpdate(),Tn.checkSpiriTreRP()):ce.addTip(t.err_code)},i.toAdvanch=function(t,e){var i=new Object;i.className="m_role_ling_bao_purify_tos",i.pal_id=t,i.type_id=e,this.sendSocketMessage(i)},i.onAdvanch=function(t){if(0==t.err_code){T.dispatch("SPIRITRE_ADVANCE");var e=Tn.getSpiritVoById(t.type_id);Tn.curPos=e.pos,Tn.curSuitId=e.suitId,Tn.checkSpiriTreRP()}else ce.addTip(t.err_code)},i.toQuench=function(t,e){var i=new Object;i.className="m_role_ling_bao_refine_tos",i.pal_id=t,i.type_id=e,this.sendSocketMessage(i)},i.onQuench=function(t){if(0==t.err_code){var e=Tn.getSpiritVoById(t.type_id);Tn.curPos=e.pos,Tn.curSuitId=e.suitId,1==t.result?Tn.checkSpiriTreRP():Jt.addTip("淬炼失败！"),T.dispatch("SPIRITRE_QUENCH")}else ce.addTip(t.err_code)},i.toDecomp=function(t){var e=new Object;e.className="m_role_ling_bao_convert_tos",e.fuse_info=t,this.sendSocketMessage(e)},i.onDecomp=function(t){0==t.err_code?T.dispatch("SPIRITRE_DECOMP_UPDATE"):ce.addTip(t.err_code)},i.toRecast=function(t){var e=new Object;e.className="m_role_ling_bao_fuse_tos",e.fuse_info=t,this.sendSocketMessage(e)},i.onRecast=function(t){0==t.err_code?(T.dispatch("SPIRITRE_RECAST_UPDATE"),Tn.resetSelectArr(),this.onSpiriTreRecastBack(t)):ce.addTip(t.err_code)},i.toReplace=function(t,e){var i=new Object;i.className="m_role_ling_bao_load_tos",i.pal_id=t,i.load_info=e,this.sendSocketMessage(i)},i.onReplace=function(t){0==t.err_code?T.dispatch("SPIRITRE_REPLACE"):ce.addTip(t.err_code)},i.toInlay=function(t,e,i){var s=new Object;s.className="m_role_ling_bao_slot_tos",s.pal_id=t,s.type_id=e,s.item_id=i,this.sendSocketMessage(s)},i.onInlay=function(t){0==t.err_code?T.dispatch("SPIRITRE_SLOT"):ce.addTip(t.err_code)},i.toUnload=function(t,e){var i=new Object;i.className="m_role_ling_bao_slot_down_tos",i.pal_id=t,i.type_id=e,this.sendSocketMessage(i)},i.onUnload=function(t){0==t.err_code?T.dispatch("SPIRITRE_UNLOAD"):ce.addTip(t.err_code)},i.toActive=function(t,e,i,s){void 0===i&&(i=0),void 0===s&&(s=0);var n=new Object;n.className="m_role_ling_bao_active_target_tos",n.pal_id=0==i?Tn.curPalId:i,n.set_id=0==s?Tn.curSuitId:s,n.target_num=t,n.action=e,this.sendSocketMessage(n)},i.onActive=function(t){0==t.err_code?T.dispatch("SPIRITRE_ACTIVE",t):ce.addTip(t.err_code)},i.toAllPalSuitActive=function(){var t=new Object;t.className="m_role_ling_bao_target_info_tos",this.sendSocketMessage(t)},i.onAllPalSuitActive=function(t){0==t.err_code?Tn.allPalActivateInfo=t:ce.addTip(t.err_code)},i.onAdd=function(t){0==t.err_code?T.dispatch("SPIRITRE_ADD",t):ce.addTip(t.err_code)},i.useNextSpiriTre=function(){var t=xo.getGoodsData();if(t){var e,i,s=t.goods;for(var n in s)if(i=s[n],(e=ur.getItem(i.typeid))&&e.useType%1e3==34)return void cr.ins().useItem(i.id,1)}Jt.addTip("背包中灵宝已用完"),this.spiriTreGetView&&this.spiriTreGetView.parent&&this.spiriTreGetView.close()},i.toAutoSuit=function(t,e){var i=Tn.getSingleCanEquipBySuitID(t,e);i.length?this.toReplace(e,i):Jt.addTip("暂无可替换装备")},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),El=function(t){function e(){this.oneKeyStones=null,this.isOnekeyMagatama=!1,this.inlayPanel=null,this.bagPanel=null,this.qualityEffPreviewPanel=null,this.attrView=null,this.targetView=null,e.__super.call(this)}w(e,"modules.exercise.strangeFire.StrangeFireCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_strange_fire_info_toc",this,this.onInfo),this.addSocketListener("m_role_strange_fire_refine_toc",this,this.onRefine),this.addSocketListener("m_role_strange_fire_refine_aim_toc",this,this.onRefineAim),this.addSocketListener("m_role_strange_fire_magatama_toc",this,this.onMagatama),this.addSocketListener("m_role_strange_fire_magatama_tidy_toc",this,this.onMagatamaTidy),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ROLE_LEVEL_UP",this,this.onLevelUp),this.addMessageListener("REGROWLV_UP",this,this.onLevelUp),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagDataChange)},i.onBagDataChange=function(){An.checkStrangeFireRP(),this.dispatch("EXERCISE_UPDATE_PANEL")},i.onLevelUp=function(){this.checkToInfo()},i.onEnterGame=function(){this.checkToInfo()},i.checkToInfo=function(){var t=An.baseInfo.openLevels[0],e=An.baseInfo.openLevels[1];pe.checkLevel(t,e)&&_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_role_strange_fire_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(An.setStrangeFireInfo(t),An.curFireRefineAimLv=t.refine_aim_level,An.checkStrangeFireRP()):ce.addTip(t.err_code)},i.toMagatama=function(t,e,i,s){var n=new Object;n.className="m_role_strange_fire_magatama_tos",n.op_type=t,n.fire_id=e,n.pos=i,n.item_id=s,this.sendSocketMessage(n)},i.onMagatama=function(t){if(0==t.err_code){if(1==t.op_type){var e=An.getStrangeFireP(t.fire_id),i=0;if(e&&e.magatama&&(i=e.magatama.length),An.updateByInlay(t),e=An.getStrangeFireP(t.fire_id),this.closeBagPanel(),i<8&&e&&e.magatama&&8==e.magatama.length?(this.updateInlayPanelInfo(),this.inlayPanelShowEff()):this.updateInlayPanelInfo(),this.isOnekeyMagatama){if(this.oneKeyStones&&0<this.oneKeyStones.length)for(var s=0;s<this.oneKeyStones.length;s++){var n=this.oneKeyStones[s];if(t.pos==n.pos&&t.item_id==n.typeId){this.oneKeyStones.splice(s,1);break}}this.oneKeyStones&&0==this.oneKeyStones.length&&(this.isOnekeyMagatama=!1,this.toMagatamaTidy(t.fire_id))}}else 2==t.op_type&&this.toMagatama(1,t.fire_id,t.pos,t.item_id);An.checkStrangeFireRP(),this.updateInlayPanel()}else ce.addTip(t.err_code)},i.oneKeyToMagatama=function(t){var e;for(var i in this.oneKeyStones=t,this.isOnekeyMagatama=!0,t)e=t[i],modules.exercise.strangeFire.StrangeFireCase.ins().toMagatama(e.operateType,An.curFireId,e.pos,e.typeId)},i.toMagatamaTidy=function(t){var e=new Object;e.className="m_role_strange_fire_magatama_tidy_tos",e.fire_id=t,this.sendSocketMessage(e)},i.onMagatamaTidy=function(t){0==t.err_code?(An.updateByMagatamaTidy(t.fire_id,t.magatama),An.checkStrangeFireRP(),this.updateInlayPanel()):ce.addTip(t.err_code)},i.toRefine=function(t){var e=new Object;e.className="m_role_strange_fire_refine_tos",e.fire_id=t,this.sendSocketMessage(e)},i.onRefine=function(t){0==t.err_code?(An.updateByRefine(t),An.checkStrangeFireRP(),this.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toRefineAim=function(){var t=new Object;t.className="m_role_strange_fire_refine_aim_tos",this.sendSocketMessage(t)},i.onRefineAim=function(t){0==t.err_code?(An.curFireRefineAimLv=t.aim_level,An.checkStrangeFireRP(),T.dispatch("STRANGEFIRE_REFINE_AIMLV_UPDATE"),T.dispatch("EXERCISE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.openInlayPanel=function(){this.inlayPanel=this.inlayPanel||new $R,this.inlayPanel.openWindow(),this.inlayPanel.update()},i.destroyInlayPanel=function(){null!=this.inlayPanel&&(this.inlayPanel.destroy(),this.inlayPanel=null)},i.updateInlayPanel=function(){this.inlayPanel&&this.inlayPanel.isPopup()&&this.inlayPanel.update()},i.updateInlayPanelInfo=function(){this.inlayPanel&&this.inlayPanel.isPopup()&&this.inlayPanel.updateInfo()},i.inlayPanelShowEff=function(){this.inlayPanel&&this.inlayPanel.isPopup()&&this.inlayPanel.showChangeEffect()},i.openBagPanel=function(t){this.bagPanel=this.bagPanel||new zR,this.bagPanel.openWindow(),this.bagPanel.update(t)},i.closeBagPanel=function(){this.bagPanel&&this.bagPanel.isPopup()&&this.bagPanel.closeWindow()},i.openQualityEffPreviewPanel=function(){this.qualityEffPreviewPanel=this.qualityEffPreviewPanel||new eO,this.qualityEffPreviewPanel.openWindow()},i.openAttrView=function(){this.attrView=this.attrView||new QR,this.attrView.openWindow()},i.openTargetView=function(t){this.targetView=this.targetView||new sO,this.targetView.openWindow(),this.targetView.update(t),this.targetView.showBg(!0)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Rl=function(t){function e(){this.curSelectGem=null,this.mainPanel=null,this.detailPanel=null,this.attrPanel=null,this.talimanGetView=null,this.talimanStoneInlayView=null,this.talimanStoneView=null,this.gemsOffTipDialog=null,e.__super.call(this)}w(e,"modules.exercise.talisman.TalimanModule",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagChange),this.addMessageListener("ITEM_USE_BACK",this,this.onTalimanUseBack),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),this.addMessageListener("CROSS_DAY",this,this.onCrossDay),this.addSocketListener("m_role_talisman_info_toc",this,this.onInfo),this.addSocketListener("m_role_talisman_update_toc",this,this.onUpdateList),this.addSocketListener("m_role_talisman_up_toc",this,this.onUp),this.addSocketListener("m_role_talisman_show_toc",this,this.onShow),this.addSocketListener("m_role_talisman_gems_toc",this,this.onGems),this.addSocketListener("m_role_talisman_gems_remove_toc",this,this.onGemsRemove)},i.toInfo=function(){var t=new Object;t.className="m_role_talisman_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Rn.curShowTaliman=t.current,Rn.setTalimanInfo(t.list),this.updateDetailPanel()):ce.addTip(t.err_code)},i.onUpdateList=function(t){Rn.updateTalimanInfo(t.list),this.updateDetailPanel()},i.toUp=function(t,e){var i=new Object;i.className="m_role_talisman_up_tos",i.type=e,i.type_id=t,this.sendSocketMessage(i)},i.onUp=function(t){if(0==t.err_code){switch(t.type){case 2:Jt.addTip("进阶成功");break;case 1:Jt.addTip("升级成功")}this.updateDetailPanel()}else ce.addTip(t.err_code)},i.toShow=function(t){var e=new Object;e.className="m_role_talisman_show_tos",e.type_id=t,this.sendSocketMessage(e)},i.onShow=function(t){0==t.err_code?Rn.curShowTaliman=t.current:ce.addTip(t.err_code)},i.toGems=function(t,e,i){var s=new Object;s.className="m_role_talisman_gems_tos",s.type_id=t,s.pos=e,s.gems_id=i,this.sendSocketMessage(s)},i.onGems=function(t){0==t.err_code?(Jt.addTip("镶嵌成功"),this.updateDetailPanel(),this.talimanStoneInlayView&&this.talimanStoneInlayView.parent&&this.talimanStoneInlayView.closeWindow(),this.talimanStoneView&&this.talimanStoneView.parent&&this.talimanStoneView.update()):ce.addTip(t.err_code)},i.toGemsRemove=function(t,e){var i=new Object;i.className="m_role_talisman_gems_remove_tos",i.type_id=t,i.pos=e,this.sendSocketMessage(i)},i.onGemsRemove=function(t){0==t.err_code?(Jt.addTip("拆卸成功"),this.updateDetailPanel(),this.talimanStoneView&&this.talimanStoneView.parent&&this.talimanStoneView.update()):ce.addTip(t.err_code)},i.onBagChange=function(){this.updateDetailPanel()},i.onTalimanUseBack=function(t){"31036003"==t[1]&&st.isTalimanStone(Xs.curUseGoodID)&&(this.openTalimanGetView(),this.talimanGetView.update(Xs.curUseGoodID),this.updateDetailPanel())},i.onExchangeBack=function(t){switch(t.module_id){case 26:if(this.dispatch("EXERCISE_UPDATE_PANEL"),this.closeStoneInlayPanel(),Rn.curChooseTalimanVO){var e,i=[];if((i=i.concat(xo.getGoodsByGoodsType(10600)))&&0<i.length)for(var s in i)if(e=i[s],Rn.getTalimanGemVO(e.typeid).id==this.curSelectGem.id){modules.exercise.talisman.TalimanModule.ins().toGems(Rn.curTalimanID,Rn.curChooseStonePos,e.id);break}}}},i.onCrossDay=function(){dl.ins().toSeverOpenDays()},i.newMainPanel=function(){return this.toInfo(),this.mainPanel=new uO},i.openDetailPanel=function(){return this.detailPanel=new hO},i.updateDetailPanel=function(){this.detailPanel&&this.detailPanel.parent&&this.detailPanel.update(),Rn.checkTalismanAllRP()},i.openAttrPanel=function(t){this.attrPanel=null,this.attrPanel=new rO,this.attrPanel.openWindow(),this.attrPanel.update(t)},i.openTalimanGetView=function(){this.talimanGetView=this.talimanGetView||new QF,this.talimanGetView.popup()},i.openStoneInlayPanel=function(){this.talimanStoneInlayView=new pO,this.talimanStoneInlayView.openWindow(),this.talimanStoneInlayView.update()},i.newTalimanStoneView=function(){return this.talimanStoneView=new mO},i.openStoneDisaPanel=function(){this.gemsOffTipDialog=this.gemsOffTipDialog||new jF,this.gemsOffTipDialog.openWindow(),this.gemsOffTipDialog.updata()},i.closeStoneInlayPanel=function(){this.talimanStoneInlayView&&this.talimanStoneInlayView.isPopup()&&this.talimanStoneInlayView.closeWindow()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),Ol=function(t){function e(){this.delateView=null,this.mapRound=0,this._requestView=null,this._changeNoticeView=null,this._changeNameView=null,this._familyCreateView=null,this._familyShopPanel=null,this._familySkillPanel=null,this._familyActPanel=null,this._familyMgrPanel=null,this._familyMainPanel=null,this._familyListPanel=null,this.cleanTime=0,this._familyFightSignUpPanel=null,this._isBroadCaseOpenWitness=!1,this._familyFightReadyPanel=null,this._familyFightWitnessPanel=null,this._familyFightAgainPanel=null,this._familyFightResultPanel=null,this._familyBattleMemberTimePanel=null,this.sta=0,this.familyCopyFir=!0,this._donateView=null,this.familyCopyRewardTip=null,this._bossPanel=null,this._copyRankPanel=null,this._selfFamilyInfoShow=null,this._otherFamilyInfoShow=null,this._witnessOptionShow=null,this._fightRoleInfoShow=null,this._witnessID=0,this._inspireId=0,this._throwId=0,this._witnessFamilyId=NaN,this._witeTime=NaN,e.__super.call(this)}w(e,"modules.family.FamilyModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("FAMILY_OPEN",this,this.openFamily),this.addMessageListener("FAMILY_MGR_OPEN",this,this.openMgrPanel),this.addMessageListener("FAMILY_ACT_OPEN",this,this.openActPanel),this.addMessageListener("FAMILY_SKILL_OPEN",this,this.openSkillPanel),this.addMessageListener("FAMILY_SHOP_OPEN",this,this.openShopPanel),this.addMessageListener("FAMILY_FIGHT_OPEN",this,this.openFamilyFightPanel),this.addMessageListener("FAMILY_FIGHT_READY_OPEN",this,this.openFamilyFightReadyPanel),this.addMessageListener("FAMILY_BATTLE_READY_PANEL_CLOSE",this,this.closeFamilyFightReadyPanel),this.addMessageListener("FAMILY_FIGHT_WITNESS_OPEN",this,this.openFamilyFightWitnessPanel),this.addMessageListener("FAMILY_FIGHT_AGAIN_OPEN",this,this.openFamilyFightAgainPanel),this.addMessageListener("FAMILY_CREATE_VIEW_OPEN",this,this.openCreateView),this.addMessageListener("FAMILY_OPEN_CHANGE_NAME",this,this.openChangeNameView),this.addMessageListener("FAMILY_OPEN_CHANGE_NOTICE",this,this.openChangeNoticeView),this.addMessageListener("FAMILY_OPEN_LOOK_REQUEST",this,this.openLookRequestView),this.addMessageListener("FAMILY_DONATE",this,this.openFamilyDonateView),this.addMessageListener("FAMILY_OPEN_BOSS",this,this.openBossPanel),this.addMessageListener("FAMILY_OPEN_COPY_RANK",this,this.openCopyRankPanel),this.addMessageListener("CROSS_DAY",this,this.crossDayHandler),this.addMessageListener("COPY_ENTER",this,this.onCopyEnter),this.addMessageListener("COPY_EXIT",this,this.onCopyExit),this.addMessageListener("ENTER_MAP",this,this.resetMapRound),this.addMessageListener("ENTER_GAME",this,this.enterGame),this.addMessageListener("FAMILY_BATTLE_OPEN_SIGN_UP_BROADCAST",this,this.broadCastOpenBattleSignUp),this.addMessageListener("FAMILY_BATTLE_OPEN_WITNESS_BROADCAST",this,this.broadCastOpenBattleWitness),this.addSocketListener("m_family_create_toc",this,this.onFamilyCreate),this.addSocketListener("m_family_detail_toc",this,this.onFamilyDetailToc),this.addSocketListener("m_family_list_toc",this,this.onFamilyListToc),this.addSocketListener("m_family_request_join_toc",this,this.onRequsetJoinToc),this.addSocketListener("m_family_request_process_toc",this,this.onFamilyeRequestProcess),this.addSocketListener("m_family_request_list_toc",this,this.onFamilyRequestList),this.addSocketListener("m_family_leave_toc",this,this.onFamilyLeave),this.addSocketListener("m_family_building_upgrade_toc",this,this.onFamilyBuildUpgrade),this.addSocketListener("m_role_family_skill_info_toc",this,this.onFamilySkillInfo),this.addSocketListener("m_family_skill_upgrade_toc",this,this.onFamilySkillUpgrade),this.addSocketListener("m_family_admin_toc",this,this.onFamilyAdmin),this.addSocketListener("m_family_info_mod_toc",this,this.onFamilyInfoMod),this.addSocketListener("m_family_events_toc",this,this.onFamilyEvents),this.addSocketListener("m_family_shop_info_toc",this,this.onFamilyShopInfo),this.addSocketListener("m_family_shop_buy_toc",this,this.onFamilyShopBuy),this.addSocketListener("m_family_set_request_condition_toc",this,this.onFamilyCondition),this.addSocketListener("m_family_mission_info_toc",this,this.onFamilyMissionInfo),this.addSocketListener("m_family_mission_update_toc",this,this.onFamilyMissonUpdate),this.addSocketListener("m_family_copy_tower_toc",this,this.onFamilyCopyInfo),this.addSocketListener("m_family_copy_tower_quick_finish_toc",this,this.onFamilyCopyQuickFinish),this.addSocketListener("m_family_copy_tower_encourage_toc",this,this.onFamilyCopyEncourage),this.addSocketListener("m_family_copy_tower_daily_barrier_toc",this,this.onFamilyCopyRewardTip),this.addSocketListener("m_family_copy_tower_daily_rewards_toc",this,this.onFamilyCopyDailyReward),this.addSocketListener("m_family_panel_toc",this,this.onFamilyPanelOpen),this.addSocketListener("m_family_boss_info_toc",this,this.onFamilyBossInfo),this.addSocketListener("m_family_battle_info_toc",this,this.onFamilyBattleInfo),this.addSocketListener("m_family_battle_sign_up_toc",this,this.onFamilyBattleSignUp),this.addSocketListener("m_family_battle_position_toc",this,this.onFamilyBattlePosition),this.addSocketListener("m_family_battle_details_toc",this,this.onFamilyBattleDetail),this.addSocketListener("m_family_battle_list_toc",this,this.onFamilyBattleList),this.addSocketListener("m_family_battle_progress_toc",this,this.onFamilyBattleProgress),this.addSocketListener("m_family_battle_watch_skill_toc",this,this.onFamilyBattleWatchSkill),this.addSocketListener("m_family_battle_watch_info_toc",this,this.onFamilyBattleWatchInfo),this.addSocketListener("m_family_battle_position_update_toc",this,this.onFamilyBattlePositionUpdate),this.addSocketListener("m_server_open_days_toc",this,this.onSeverOpenDays),this.addSocketListener("m_family_ad_info_toc",this,this.onAnnounceInfo),this.addSocketListener("m_family_notice_toc",this,this.onFamilyNotice),this.addSocketListener("m_family_management_update_toc",this,this.onFamilyManagerUpdate),this.addSocketListener("m_family_info_change_toc",this,this.onFamilyInfoChange),this.addSocketListener("m_family_copy_tower_update_toc",this,this.onFamilyCopyUpdate),this.addSocketListener("m_family_impeach_toc",this,this.onFamilyImpeach),this.addMessageListener("FAMILY_OPEN_DELATE_VIEW",this,this.openDelataView)},i.openDelataView=function(){this.delateView=this.delateView||new WO,this.delateView.parent||this.delateView.openWindow(),this.delateView.update()},i.toFamilyImpeach=function(){var t=new Object;t.className="m_family_impeach_tos",this.sendSocketMessage(t)},i.onFamilyImpeach=function(t){0<t.err_code?ce.addTip(t.err_code):Jt.addTip("弹劾成功")},i.resetMapRound=function(){ua.isFamilyCopyMap()?this.mapRound=Dn.nowRound:ua.isFamilyFightMap()?(Dn.isWitnessFamilyBattle=!0,this.toFamilyBattleList(),_t.removeFromSceond(this,this.timeLoopToShowTimePanel),this.addFamilyFightOptions(),this.setGameSceneMainRole()):(_e.setFamilyBattleMainRole(null),this.removeFamilyFightOptions(),_e.setFamilyBattleCenter(!1),this._fightRoleInfoShow&&this._fightRoleInfoShow.parent&&this._fightRoleInfoShow.removeSelf(),1==Dn.isWitnessFamilyBattle&&(Dn.isWitnessFamilyBattle=!1,1==Dn.isAutoExitBattle&&(Dn.isAutoExitBattle=!1,Dn.witnessFamilyId&&Dn.witnessBattleRoundNum&&this.openFamilyMainPanelAndWitnessPanelById(Dn.witnessFamilyId,Dn.witnessBattleRoundNum))))},i.enterGame=function(){this.checkFamilyRedPoint(),0<pe.user.attr.family_id&&_t.setTimeout(this,this.toFamilyMissionInfo,null,St.ENTER_DELAY)},i.checkFamilyRedPoint=function(){this.toSeverOpenDays(),_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){pe.myLevel>=Ln.FAMILY_LEVEL&&0<pe.user.attr.family_id&&(Dn.checkRPFamilyBoss(),Dn.checkRPFamilyCopy(),Dn.checkRPFamilyRequest(),Dn.checkFamilyBattleRPCanShow())},i.onCopyEnter=function(t){if(4==t){if(0==se.has("modules/family"))return void se.add("modules/family",null,this,this.onCopyEnter,[t]);dL.getIns().show(60),cL.getIns().reset(),cL.getIns().show(),_t.clearTimeout(this.cleanTime)}},i.onCopyExit=function(t){dL.getIns().hide(),cL.getIns().hide(),4==t&&(this.cleanTime=_t.setTimeout(this,this.cleanFamilyRes,null,ya.coldTime))},i.crossDayHandler=function(){pe.myLevel>=Ln.FAMILY_LEVEL&&0<pe.user.attr.family_id&&(Dn.nowRound=0,Dn.resetOnceData(2),Dn.getShopInfoToc()&&(Dn.getShopInfoToc().today_buy_times=0),1==this.sta&&this.toFamilyDetailTos(pe.user.attr.family_id),this.toDelay())},i.openLookRequestView=function(){this.toFamilyRequestList(),this._requestView=this._requestView||new lL,this._requestView.parent||this._requestView.openWindow()},i.openChangeNoticeView=function(){this._changeNoticeView=this._changeNoticeView||new MO,this._changeNoticeView.parent||this._changeNoticeView.openWindow()},i.openChangeNameView=function(){this._changeNameView=this._changeNameView||new BO,this._changeNameView.parent||this._changeNameView.openWindow()},i.toFamilyEvents=function(t){var e=new Object;e.className="m_family_events_tos",e.family_id=t,this.sendSocketMessage(e)},i.onFamilyEvents=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyEvents(t),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView())},i.onFamilyInfoChange=function(t){Dn.handlerFamilyChange(t),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView(),this._familySkillPanel&&this._familySkillPanel.parent&&this._familySkillPanel.updateView(),this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.updateView(),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView(),this._donateView&&this._donateView.parent&&this._donateView.update(),this._bossPanel&&this._bossPanel.parent&&this._bossPanel.updateView(),this.delateView&&this.delateView.parent&&this.delateView.update()},i.onFamilyManagerUpdate=function(t){Dn.handlerFamilyManagerUpdate(t),this._familyMgrPanel&&this._familyMgrPanel.updateView(),this.delateView&&this.delateView.parent&&this.delateView.update()},i.onFamilyNotice=function(t){Dn.handlerFamilyNotice(t),1==t.notice_type?(_t.setTimeout(this,Jt.addTip,["您已经被批准加入仙盟"],300),this._familyCreateView&&this._familyCreateView.parent&&this._familyCreateView.closeWindow(),this._familyListPanel&&this._familyListPanel.parent&&(this._familyListPanel.closeWindow(),this.openFamily()),Ll.ins.toFamilyPetBattleInfo()):(this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView(),this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.updateView(),this._familyListPanel&&this._familyListPanel.parent&&this._familyListPanel.updateView(),0<pe.user.attr.family_id&&Ll.ins.toFamilyPetBattleMembers()),ao.checkIconTime()},i.updateFamilyShop=function(){this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.update()},i.openCreateView=function(){this._familyCreateView=this._familyCreateView||new HO,this._familyCreateView.openWindow()},i.openShopPanel=function(t){0!=se.has("modules/family")?pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?(this._familyShopPanel=this._familyShopPanel||new rL,this._familyShopPanel.openWindow(),this._familyShopPanel&&this._familyShopPanel.updateView(),this._familyShopPanel.tab.selectedIndex=t):Jt.addTip("没有加入仙盟哦"):Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):se.add("modules/family",null,this,this.openShopPanel,[t])},i.openSkillPanel=function(){pe.myLevel<70?Jt.addTip("70级开启仙盟技能"):0<pe.user.attr.family_id?(this._familySkillPanel=this._familySkillPanel||new hL,this._familySkillPanel.openWindow(),this._familySkillPanel&&this._familySkillPanel.updateView()):Jt.addTip("请先加入仙盟！")},i.openActPanel=function(){this._familyActPanel=this._familyActPanel||new LO,this._familyActPanel.openWindow(),this._familyActPanel&&this._familyActPanel.updateView()},i.openMgrPanel=function(t){void 0===t&&(t=0),this._familyMgrPanel=this._familyMgrPanel||new oL,this._familyMgrPanel.openWindow(),this._familyMgrPanel.setIndex(t),this._familyMgrPanel&&this._familyMgrPanel.updateView()},i.openFamily=function(){pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?(this.toFamilyDetailTos(pe.user.attr.family_id),this.openFamilyMainPanel()):this.openFamilyListPanel():Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启")},i.openFamilyMainPanel=function(){0!=se.has("modules/family")?(_t.clearTimeout(this.cleanTime),this._familyMainPanel||(this._familyMainPanel=new iL,this._familyMainPanel.on("undisplay",this,this.onUndisplay)),this._familyMainPanel=this._familyMainPanel||new iL,this._familyMainPanel.parent||this._familyMainPanel.openWindow()):se.add("modules/family",null,this,this.openFamilyMainPanel)},i.onUndisplay=function(){this.cleanTime=_t.setTimeout(this,this.cleanFamilyRes,null,ya.coldTime)},i.cleanFamilyRes=function(){this._familyMgrPanel&&(this._familyMgrPanel.destroy(),this._familyMgrPanel=null),this._familySkillPanel&&(this._familySkillPanel.destroy(),this._familySkillPanel=null),this._familyShopPanel&&(this._familyShopPanel.destroy(),this._familyShopPanel=null),this._familyActPanel&&(this._familyActPanel.destroy(),this._familyActPanel=null),this._donateView&&(this._donateView.destroy(),this._donateView=null),this._bossPanel&&(this._bossPanel.destroy(),this._bossPanel=null),this.delateView&&(this.delateView.destroy(),this.delateView=null),this._familyMainPanel&&(this._familyMainPanel.destroy(),this._familyMainPanel=null),se.destroy("modules/family")},i.openFamilyListPanel=function(){0!=se.has("modules/family")?(this._familyListPanel=this._familyListPanel||new tL,this._familyListPanel.parent||this._familyListPanel.openWindow()):se.add("modules/family",null,this,this.openFamilyListPanel)},i.openFamilyFightPanel=function(){Dn.isFirstServerOpenDay()?Jt.addTip("巅峰对决玩法开服第一天不开放"):Dn.getFamilyBattleIsStart()<=-1?this.openFamilyFightSignUpPanel():Dn.getFamilyBattleIsStart()<20?this.openFamilyFightSignUpPanel(!0):this.openFamilyFightAgainPanel()},i.openFamilyFightSignUpPanel=function(t){void 0===t&&(t=!1),this._familyFightSignUpPanel=this._familyFightSignUpPanel||new jO,this._familyFightSignUpPanel.isOpenBattle=t,this._familyFightSignUpPanel.openWindow()},i.broadCastOpenBattleSignUp=function(){pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?(this.toFamilyDetailTos(pe.user.attr.family_id),this.openFamilyMainPanelAndFightViews("signUp")):(this.toFamilyListTos(),this.openFamilyListPanel()):Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启")},i.openFamilyMainPanelAndFightViews=function(t){if(0!=se.has("modules/family"))switch(this._familyMainPanel=this._familyMainPanel||new iL,this._familyMainPanel.parent||this._familyMainPanel.openWindow(),t){case"signUp":this.openFamilyFightSignUpPanel(!0);break;case"witness":this._isBroadCaseOpenWitness=!0,this.toFamilyBattleList()}else se.add("modules/family",null,this,this.openFamilyMainPanelAndFightViews,[t])},i.openFamilyMainPanelAndWitnessPanelById=function(t,e){0!=se.has("modules/family")?(this._familyMainPanel=this._familyMainPanel||new iL,this._familyMainPanel.parent||this._familyMainPanel.openWindow(),this.openFamilyFightWitnessPanel(t,e)):se.add("modules/family",null,this,this.openFamilyMainPanelAndWitnessPanelById,[t,e])},i.openFamilyFightReadyPanel=function(){this._familyFightReadyPanel=this._familyFightReadyPanel||new XO,this._familyFightReadyPanel.openWindow()},i.closeFamilyFightReadyPanel=function(){this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.closeWindow()},i.openFamilyFightWitnessPanel=function(t,e){void 0===e&&(e=1),0!=se.has("modules/family")?(this._familyFightWitnessPanel=this._familyFightWitnessPanel||new ZO,this._familyFightWitnessPanel.setWitnessFamilyID(t,e),this._familyFightWitnessPanel.openWindow(),this._familyFightAgainPanel&&this._familyFightAgainPanel.parent&&this._familyFightAgainPanel.closeWindow()):se.add("modules/family",null,this,this.openFamilyFightWitnessPanel,[t,e])},i.broadCastOpenBattleWitness=function(){pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?(this.toFamilyDetailTos(pe.user.attr.family_id),this.openFamilyMainPanelAndFightViews("witness")):(this.toFamilyListTos(),this.openFamilyListPanel()):Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启")},i.openFamilyFightAgainPanel=function(){this._familyFightAgainPanel=new YO,this._familyFightAgainPanel.openWindow()},i.openFamilyFightResultPanel=function(t){this._familyFightResultPanel=new JF,this._familyFightResultPanel.update(t),this._familyFightResultPanel.openWindow()},i.removeFightResultPanel=function(){this._familyFightResultPanel&&this._familyFightResultPanel.parent&&this._familyFightResultPanel.closeWindow(),this._familyFightResultPanel=null},i.changeViewToWitness=function(){this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent?(this._familyFightSignUpPanel.closeWindow(),this.openFamilyFightAgainPanel()):this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&(this._familyFightReadyPanel.closeWindow(),this.openFamilyFightAgainPanel()),Dn.checkRPFamilyBattle()},i.openBattleMemberTimePanel=function(t){void 0===t&&(t=0),0!=se.has("modules/family")?(this._familyBattleMemberTimePanel=new OO,this._familyBattleMemberTimePanel.setNextTime(t),this._familyBattleMemberTimePanel.openWindow()):se.add("modules/family",null,this,this.openBattleMemberTimePanel,[t])},i.closeBattleMemberTimePanel=function(){this._familyBattleMemberTimePanel&&this._familyBattleMemberTimePanel.parent&&this._familyBattleMemberTimePanel.closeWindow()},i.toFamilyListTos=function(){var t=new Object;t.className="m_family_list_tos",this.sendSocketMessage(t)},i.onFamilyListToc=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyList(t),this._familyListPanel&&this._familyListPanel.parent&&this._familyListPanel.updateView(),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView())},i.toFamilyDetailTos=function(t){var e=new Object;e.className="m_family_detail_tos",e.family_id=t,this.sendSocketMessage(e)},i.onFamilyDetailToc=function(t){0<t.err_code?ce.addTip(t.err_code):(t.family_info.family_id==pe.user.attr.family_id&&(Dn.handlerFamilyDetailToc(t),this._familyMainPanel&&this._familyMainPanel.parent&&this._familyMainPanel.updateView(),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView(),this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.updateView(),this._bossPanel&&this._bossPanel.parent&&this._bossPanel.updateView(),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView(),this._donateView&&this._donateView.parent&&this._donateView.update(),this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.update()),Dn.setOtherFamilyDetail(t.family_info),this.dispatch("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL"),this.dispatch("UPDATE_PETBATTLE_LOGVIEW"))},i.toRequsetJoinTos=function(t){var e=new Object;e.className="m_family_request_join_tos",e.family_id=t,this.sendSocketMessage(e)},i.onRequsetJoinToc=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("已经向"+t.family_name+"发送了入盟申请"),Dn.handlerFamilyRequestJoinToc(t),this._familyListPanel&&this._familyListPanel.parent&&this._familyListPanel.updateView())},i.toFamilyCreate=function(t,e){var i=new Object;i.className="m_family_create_tos",i.family_name=e,i.op_type=t,this.sendSocketMessage(i)},i.onFamilyCreate=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyCreateToc(t),this.openFamilyMainPanel(),this._familyMainPanel&&this._familyMainPanel.parent&&this._familyMainPanel.updateView(),this._familyCreateView&&this._familyCreateView.parent&&(this._familyCreateView.input.text="",this._familyCreateView.closeWindow()),this._familyListPanel&&this._familyListPanel.parent&&this._familyListPanel.closeWindow())},i.toFamilyInfoMod=function(t,e){var i=new Object;i.className="m_family_info_mod_tos",i.op_type=t,i.param=e,this.sendSocketMessage(i)},i.onFamilyInfoMod=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("修改成功"),this._changeNameView&&this._changeNameView.parent&&this._changeNameView.closeWindow(),this._changeNoticeView&&this._changeNoticeView.parent&&this._changeNoticeView.closeWindow(),37==G.agentId&&this.toAnnounceInfo())},i.toFamilyRequestProcess=function(t,e){var i=new Object;i.className="m_family_request_process_tos",i.op_type=e,i.req_role_id=[t],this.sendSocketMessage(i)},i.onFamilyeRequestProcess=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyRequestProcess(t),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView()),this._requestView&&this._requestView.parent&&this._requestView.updateView()},i.toFamilyBuildUpgrade=function(t){var e=new Object;e.className="m_family_building_upgrade_tos",e.building_id=t,this.sendSocketMessage(e)},i.onFamilyBuildUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyBuildUpgrade(t),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView())},i.toFamilyAdmin=function(t,e){var i=new Object;i.className="m_family_admin_tos",i.op_type=t,i.target_role_id=e,this.sendSocketMessage(i)},i.onFamilyAdmin=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyAdmin(t),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView(),this.delateView&&this.delateView.parent&&this.delateView.update())},i.toFamilyLeave=function(){var t=new Object;t.className="m_family_leave_tos",this.sendSocketMessage(t)},i.onFamilyLeave=function(t){0<t.err_code?ce.addTip(t.err_code):(this.resetMyFamilyView(),Dn.resetMyFamilyData(),Jt.addTip("你已经脱离了仙盟"),T.dispatch("FAMILY_LEAVE"))},i.resetMyFamilyView=function(){this._familyMainPanel&&this._familyMainPanel.parent&&this._familyMainPanel.closeWindow(),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.closeWindow(),this._donateView&&this._donateView.parent&&this._donateView.closeWindow(),this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.closeWindow(),this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.closeWindow(),this._familySkillPanel&&this._familySkillPanel.parent&&this._familySkillPanel.closeWindow(),this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.closeWindow(),this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent&&this._familyFightSignUpPanel.closeWindow(),this._familyFightWitnessPanel&&this._familyFightWitnessPanel.parent&&this._familyFightWitnessPanel.closeWindow(),this._familyFightAgainPanel&&this._familyFightAgainPanel.parent&&this._familyFightAgainPanel.closeWindow(),this.closeBattleMemberTimePanel()},i.toFamilySkillInfo=function(){var t=new Object;t.className="m_role_family_skill_info_tos",this.sendSocketMessage(t)},i.onFamilySkillInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilySkillInfo(t),this._familySkillPanel&&this._familySkillPanel.parent&&this._familySkillPanel.updateView(),bn.doPearlToInfo&&(this.dispatch("EXERCISE_UPDATE_PANEL"),bn.doPearlToInfo=!1))},i.toFamilySkillUpgrade=function(t,e){var i=new Object;i.className="m_family_skill_upgrade_tos",i.pal_id=t,i.skill_id=e,this.sendSocketMessage(i)},i.onFamilySkillUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerSkillUpgrade(t),this._familySkillPanel&&this._familySkillPanel.parent&&this._familySkillPanel.updateView())},i.toFamilyRequestList=function(){var t=new Object;t.className="m_family_request_list_tos",this.sendSocketMessage(t)},i.onFamilyRequestList=function(t){Dn.handlerFamilyRequestListToc(t),this._requestView&&this._requestView.parent&&this._requestView.updateView()},i.toFamilyPanelOpen=function(t){var e=new Object;e.className="m_family_panel_tos",e.op_type=t,this.sendSocketMessage(e)},i.onFamilyPanelOpen=function(t){0<t.err_code?ce.addTip(t.err_code):(this.sta=t.op_type,1==t.op_type||Dn.resetOnceData(1),this.familyCopyFir=!0,37==G.agentId&&this.toAnnounceInfo())},i.toFamilyCondition=function(t,e){var i=new Object;i.className="m_family_set_request_condition_tos",i.auto_agree=t,i.min_power=e,this.sendSocketMessage(i)},i.onFamilyCondition=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.setRequestConditionToc(t),this._requestView&&this._requestView.parent&&this._requestView.updateView())},i.toFamilyShopInfo=function(){var t=new Object;t.className="m_family_shop_info_tos",this.sendSocketMessage(t)},i.onFamilyShopInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyShopInfo(t),this._familyShopPanel&&this._familyShopPanel.parent&&this._familyShopPanel.updateView())},i.toFamilyShopBuy=function(){var t=new Object;t.className="m_family_shop_buy_tos",this.sendSocketMessage(t)},i.onFamilyShopBuy=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyShopBuy(t),this._familyShopPanel&&this._familyShopPanel.parent&&(this._familyShopPanel.updateView(),_t.setTimeout(this._familyShopPanel,this._familyShopPanel.showGoods,[t.rewards],1200)))},i.toFamilyMissionInfo=function(){var t=new Object;t.className="m_family_mission_info_tos",this.sendSocketMessage(t)},i.onFamilyMissionInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerMissionInfoToc(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView(),this._donateView&&this._donateView.parent&&this._donateView.update())},i.openFamilyDonateView=function(){0!=se.has("modules/family")?(this._donateView=this._donateView||new qO,this._donateView.openWindow(),this._donateView.parent&&this._donateView.update()):se.add("modules/family",null,this,this.openFamilyDonateView)},i.toFamilyMissinDonate=function(t){var e=new Object;e.className="m_family_donate_tos",e.op_type=t,this.sendSocketMessage(e)},i.onFamilyMissonUpdate=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyUpdate(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView(),this._donateView&&this._donateView.parent&&this._donateView.update())},i.toFamilyCopyInfo=function(){var t=new Object;t.className="m_family_copy_tower_tos",this.sendSocketMessage(t)},i.onFamilyCopyInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyCopyInfo(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView())},i.toFamilyCopyEncourage=function(){var t=new Object;t.className="m_family_copy_tower_encourage_tos",this.sendSocketMessage(t)},i.onFamilyCopyEncourage=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyEncourage(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView())},i.toFamilyCopyQuickFinish=function(){var t=new Object;t.className="m_family_copy_tower_quick_finish_tos",this.sendSocketMessage(t)},i.onFamilyCopyQuickFinish=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e;Dn.handlerFamilyQuickFinish(t);var i;for(var s in t.rewards)5!=(i=t.rewards[s]).type&&(e=ur.getRewardByTkv(i))&&Jt.addTip(e.name+"  ×"+i.val,U.getColorDark(e.color));this.toDelay(),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView()}},i.toFamilyCopyDailyReward=function(){var t=new Object;t.className="m_family_copy_tower_daily_rewards_tos",this.sendSocketMessage(t)},i.onFamilyCopyDailyReward=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e,i;for(var s in t.rewards)i=t.rewards[s],(e=ur.getRewardByTkv(i))&&Jt.addTip(e.name+"  ×"+i.val,U.getColorDark(e.color));Dn.getFamilyCopyInfo()&&(Dn.getFamilyCopyInfo().can_recv_daily_rewards=t.can_recv_daily_rewards),this.toDelay(),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView()}},i.openCopyRewardTip=function(t){this.familyCopyRewardTip=this.familyCopyRewardTip||new UO,this.familyCopyRewardTip.parent||this.familyCopyRewardTip.openWindow(),this.toFamilyCopyRewardTip(t)},i.toFamilyCopyRewardTip=function(t){var e=new Object;e.className="m_family_copy_tower_daily_barrier_tos",e.barrier=t,this.sendSocketMessage(e)},i.onFamilyCopyRewardTip=function(t){0<t.err_code?ce.addTip(t.err_code):this.familyCopyRewardTip&&this.familyCopyRewardTip.parent&&this.familyCopyRewardTip.updateViewByToc(t)},i.onFamilyCopyUpdate=function(t){Dn.handlerFamilyTowerUpdateToc(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView()},i.openBossPanel=function(){this._bossPanel=this._bossPanel||new VO,this._bossPanel.parent||this._bossPanel.openWindow(),this._bossPanel.updateView()},i.toFamilyBossInfo=function(){var t=new Object;t.className="m_family_boss_info_tos",this.sendSocketMessage(t)},i.onFamilyBossInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Dn.handlerFamilyBossInfo(t),this._familyActPanel&&this._familyActPanel.parent&&this._familyActPanel.updateView(),this._bossPanel&&this._bossPanel.parent&&this._bossPanel.updateView())},i.checkToMapChange=function(t){t==this.mapRound&&Lr.ins().toMapChange(4e4)},i.openCopyRankPanel=function(){this._copyRankPanel=this._copyRankPanel||new FO,this._copyRankPanel.parent||this._copyRankPanel.openWindow(),xr.ins().toGetRank(Dn.familyRankId)},i.bossResultCallBack=function(){el.ins().toExit(),this.openFamily(),this.openBossPanel()},i.toSeverOpenDays=function(){var t=new Object;t.className="m_server_open_days_tos",this.sendSocketMessage(t)},i.onAnnounceInfo=function(t){t.err_code?ce.addTip(t.err_code):(Dn.canEditAnno=!t.is_update,this._familyMgrPanel&&this._familyMgrPanel.parent&&this._familyMgrPanel.updateView())},i.toAnnounceInfo=function(){var t=new Object;t.className="m_family_ad_info_tos",this.sendSocketMessage(t)},i.onSeverOpenDays=function(t){Dn.serverOpenDay=t.open_days,Dn.mergerTimesOfServer=t.merge_times},i.toFamilyBattleInfo=function(){var t=new Object;t.className="m_family_battle_info_tos",this.sendSocketMessage(t)},i.onFamilyBattleInfo=function(t){0==t.err_code?(Dn.setBattleMembers(t.battle_roles),Dn.setSignMembers(t.sign_up_role_ids),Dn.setBattleRound(t.current_battle_round),Dn.setBattleFightingId(t.current_battle_round),this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.update(),this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent&&this._familyFightSignUpPanel.update(),this._familyFightWitnessPanel&&this._familyFightWitnessPanel.parent&&modules.family.FamilyModule.ins().toFamilyBattleDetail(pe.user.attr.family_id,t.current_battle_round)):ce.addTip(t.err_code)},i.toFamilyBattleSignUp=function(){var t=new Object;t.className="m_family_battle_sign_up_tos",this.sendSocketMessage(t)},i.onFamilyBattleSignUp=function(t){0==t.err_code?(Dn.setSignMembers(t.sign_up_role_ids),this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent&&this._familyFightSignUpPanel.update(),this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.update()):ce.addTip(t.err_code)},i.toFamilyBattlePosition=function(){var t=new Object;t.className="m_family_battle_position_tos",t.battle_role_ids=[];var e=Dn.familyFightMembers;for(var i in e){var s=Number(i),n=e[i];if(n!=Ln.FAMILY_FIGHT_POS_NOT_MEMBERS){var o=new Object;o.className="p_kv",o.id=n,o.val=s,t.battle_role_ids.push(o)}}this.sendSocketMessage(t)},i.onFamilyBattlePosition=function(t){0==t.err_code?(Dn.setBattleMembers(t.battle_role_ids),Jt.addTip("布阵成功"),this._familyFightReadyPanel&&this._familyFightReadyPanel.parent&&this._familyFightReadyPanel.closeWindow(),this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent&&this._familyFightSignUpPanel.update()):ce.addTip(t.err_code)},i.onFamilyBattlePositionUpdate=function(t){Dn.setBattleMembers(t.battle_role_ids),this._familyFightSignUpPanel&&this._familyFightSignUpPanel.parent&&this._familyFightSignUpPanel.update()},i.toFamilyBattleDetail=function(t,e){var i=new Object;i.className="m_family_battle_details_tos",i.family_battle_round=0==e?2:e,i.family_id=t,this.sendSocketMessage(i)},i.onFamilyBattleDetail=function(t){0==t.err_code?(Dn.saveFamilyBattleDetails(t.family_id,t.family_battle_round,t.details),this.dispatch("FAMILY_BATTLE_DETAIL_UPDATE")):ce.addTip(t.err_code)},i.toFamilyBattleList=function(){var t=new Object;t.className="m_family_battle_list_tos",this.sendSocketMessage(t)},i.onFamilyBattleList=function(t){if(0==t.err_code){for(var e=t.family_names,i=t.battle_rounds,s=0,n=e.length;s<n;s++){var o=e[s].family_id;this.toFamilyDetailTos(o)}if(e.sort(this.sortFamilyNames),Dn.setBattleFamilyList(e),Dn.setBattleRoundInfo(i),this.dispatch("FAMILY_BATTLE_LIST_UPDATE"),1==this._isBroadCaseOpenWitness){var a=this._isBroadCaseOpenWitness=!1;for(var l in e)if(e[l].family_id==pe.user.attr.family_id){a=!0;break}if(a){var r;for(var h in i)if(2==(r=i[h]).round&&0!=r.winner_family_id)return void Jt.addTip("巅峰对决已结束，无法观战");this.openFamilyFightWitnessPanel(pe.user.attr.family_id)}else this.openFamilyFightAgainPanel()}}else ce.addTip(t.err_code)},i.sortFamilyNames=function(t,e){return t.index>e.index?1:-1},i.onFamilyBattleProgress=function(t){var e=t.battle_detail,i=e.progress,s=e.timestamp;switch(i){case 0:0==e.role_id_1||0==e.role_id_2||e.role_id_1!=pe.roleID&&e.role_id_2!=pe.roleID||(1==e.position?Math.floor(e.detail_id/100)<=1?this.openBattleMemberTimePanel():(Dn.setNextBattleStartTime(s),_t.addToSecond(this,this.timeLoopToShowTimePanel)):_t.addToSecond(this,this.timeLoopToShowTimePanel)),Dn.checkRPByFamilyFightWitness();break;case 1:0==e.winner_role_id&&(this.changeViewToWitness(),0!=e.role_id_1&&0!=e.role_id_2?(Dn.setNextBattleStartTime(s),Dn.setNextBattleDetail(e),Dn.checkRPByFamilyFightWitness()):Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING"),this._witnessID=e.detail_id,this._familyFightWitnessPanel&&this._familyFightWitnessPanel.parent&&this._familyFightWitnessPanel.update());break;case 2:e&&0!=e.role_id_1&&0!=e.role_id_2&&0!=e.winner_role_id&&null==this._familyFightResultPanel&&ua.isFamilyFightMap()&&this.openFamilyFightResultPanel(e),this._familyFightWitnessPanel&&this._familyFightWitnessPanel.parent&&this._familyFightWitnessPanel.update(),this.toFamilyBattleInfo(),Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING");break;case 3:_e.setFamilyBattleCenter(!1),this.removeFamilyFightRoleInfoShow(),Dn.checkRPByFamilyFightWitness()}},i.timeLoopToShowTimePanel=function(){Dn.getNextBattleStartTime()-ya.serverTime<=30&&(_t.removeFromSceond(this,this.timeLoopToShowTimePanel),this.openBattleMemberTimePanel())},i.toFamilyBattleWatchSkill=function(t){void 0===t&&(t=99999002);var e=new Object;e.className="m_family_battle_watch_skill_tos",99999001==(e.skill_id=t)?e.target_role_id=100*Math.floor(this._throwId/100):99999002==t&&(e.target_role_id=100*Math.floor(this._inspireId/100)),this.sendSocketMessage(e)},i.onFamilyBattleWatchSkill=function(t){0==t.err_code?(Dn.setWitnessCds(t.skill_id,t.cd_ts),this.createEff2Fly(t.skill_id),this._witnessOptionShow&&this._witnessOptionShow.parent&&this._witnessOptionShow.update()):ce.addTip(t.err_code)},i.createEff2Fly=function(t){var n=this,o=new et;o.skin="modules/family/lightCricle.png";var a=this._witnessOptionShow.x,l=this._witnessOptionShow.y;if(99999001==t)a=this._witnessOptionShow.x+52,l=this._witnessOptionShow.y;else{if(99999002!=t)return;a=this._witnessOptionShow.x+132,l=this._witnessOptionShow.y}lt.uiLayer.addChild(o);var r=0,h=function(){var t=.003*r,e=n._selfFamilyInfoShow.x+n._selfFamilyInfoShow.width/2,i=n._selfFamilyInfoShow.y+n._selfFamilyInfoShow.height/2,s=u(t,a,l,140,630,e,i);o.x=s.x,o.y=s.y,r+=10,s.x>n._selfFamilyInfoShow.x+n._selfFamilyInfoShow.width/3&&s.x<=n._selfFamilyInfoShow.x+n._selfFamilyInfoShow.width&&s.y>n._selfFamilyInfoShow.y&&s.y<=n._selfFamilyInfoShow.y+n._selfFamilyInfoShow.height-n._selfFamilyInfoShow.height/2&&(_t.removeFromFrame(n,h),o.removeSelf())},u=function(t,e,i,s,n,o,a){void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===a&&(a=0);var l=1-t;return{x:l*l*e+2*t*l*s+t*t*o,y:l*l*i+2*t*l*n+t*t*a}};_t.addToFrame(this,h)},i.onFamilyBattleWatchInfo=function(t){var e=t.family_watch_list;Dn.setWitnessInfoArr(e),this.updateFamilyFightInfoShow()},i.addFamilyFightOptions=function(){0!=se.has("modules/family")?(this._witnessFamilyId<=0&&(this._witnessFamilyId=pe.user.attr.family_id),this.createFamilyFightRoleInfoShow(),this._witnessFamilyId==pe.user.attr.family_id&&(this._witnessOptionShow=this._witnessOptionShow||new $O,lt.uiLayer.addChild(this._witnessOptionShow)),this._selfFamilyInfoShow=this._selfFamilyInfoShow||new zO,lt.uiLayer.addChild(this._selfFamilyInfoShow),this._selfFamilyInfoShow.top=250,this._selfFamilyInfoShow.left=0,this._selfFamilyInfoShow.initShow(),this._otherFamilyInfoShow=this._otherFamilyInfoShow||new zO,lt.uiLayer.addChild(this._otherFamilyInfoShow),this._otherFamilyInfoShow.top=250,this._otherFamilyInfoShow.right=0,this._otherFamilyInfoShow.initShow(),this.updateFamilyFightInfoShow()):se.add("modules/family",null,this,this.addFamilyFightOptions)},i.createFamilyFightRoleInfoShow=function(){er.ins().hideMainInfoView(),this._fightRoleInfoShow=this._fightRoleInfoShow||new KO,this._fightRoleInfoShow.top=25,this._fightRoleInfoShow.centerX=0,this._fightRoleInfoShow.setWiteTime(this._witeTime),lt.uiLayer.addChild(this._fightRoleInfoShow)},i.removeFamilyFightRoleInfoShow=function(){_e.setFamilyBattleCenter(!1),er.ins().showMainInfoView(),this._fightRoleInfoShow&&this._fightRoleInfoShow.parent&&this._fightRoleInfoShow.removeSelf()},i.updateFamilyFightInfoShow=function(){var t=Dn.getWitnessInfoArr();if(!(t.length<=0)){var e,i,s;for(var n in t)(s=t[n]).family_id==this._witnessFamilyId?e=s:i=s;this._selfFamilyInfoShow&&this._selfFamilyInfoShow.parent&&e&&this._selfFamilyInfoShow.updateByBattleWatch(e,!0),this._otherFamilyInfoShow&&this._otherFamilyInfoShow.parent&&i&&this._otherFamilyInfoShow.updateByBattleWatch(i,!1)}},i.removeFamilyFightOptions=function(){this._selfFamilyInfoShow&&this._selfFamilyInfoShow.removeSelf(),this._otherFamilyInfoShow&&this._otherFamilyInfoShow.removeSelf(),this._witnessOptionShow&&this._witnessOptionShow.removeSelf(),this._inspireId=0,this._throwId=0,this._witeTime=0},i.enterFamilyFightMap=function(t,e,i){void 0===i&&(i=0),1==Dn.getIsAutoEnterFight()&&0==ua.isFamilyFightMap()&&0<t&&(0!=e&&(this._witnessFamilyId=e),0!=i&&(this._witeTime=i),Lr.ins().toMapChange(42e3,t),this.resetMyFamilyView())},i.setGameSceneMainRole=function(){var t=Se.roleDict,e=0;this._witnessFamilyId<=0&&(this._witnessFamilyId=pe.user.attr.family_id);var i=NaN,s=NaN;for(var n in t)t[n]instanceof com.scene.unit.MyPal||t[n].pvo.family_id==this._witnessFamilyId?0==e&&(e=t[n].id,this._inspireId=e,i=t[n].pvo.family_id):0==this._throwId&&(this._throwId=t[n].id,s=t[n].pvo.family_id);if(0!=this._inspireId&&0!=this._throwId||(Jt.addTip("战斗已结束"),el.ins().toExit()),0<e){_e.setFamilyBattleMainRole(Se.getUnit(e));var o=!1;for(var a in t)if(t[a]instanceof com.scene.unit.MyPal){o=!0;break}if(this._fightRoleInfoShow&&this._fightRoleInfoShow.parent&&(this._fightRoleInfoShow.setSelfInfo({familyId:i,roleId:100*Math.floor(this._inspireId/100)}),this._fightRoleInfoShow.setTagInfo({familyId:s,roleId:100*Math.floor(this._throwId/100)}),this._fightRoleInfoShow.update()),_e.setFamilyBattleCenter(!0),o){var l;for(var r in Dn.witnessFamilyId=pe.user.attr.family_id,Dn.getBattleRoundInfo())if(((l=Dn.getBattleRoundInfo()[r]).family_id_1==pe.user.attr.family_id||l.family_id_2==pe.user.attr.family_id)&&0==l.winner_family_id){Dn.witnessBattleRoundNum=l.round;break}this._witnessOptionShow=this._witnessOptionShow||new $O,lt.uiLayer.addChild(this._witnessOptionShow),this._witnessFamilyId=pe.user.attr.family_id,this.updateFamilyFightInfoShow(),this._fightRoleInfoShow&&this._fightRoleInfoShow.parent&&(this._fightRoleInfoShow.selfIsInFighting=!0)}}},e.ins=function(){return e._instance=e._instance||new e},e._instance=null,e}(),Ll=function(t){function e(){this._familyMaterialResView=null,this._familtMaterialSecView=null,this._familyMaterialAssView=null,this.logView=null,this.memberStateView=null,this.signView=null,this.rewardView=null,this.rankView=null,this.first=!0,e.__super.call(this)}w(e,"modules.family.familyPetEmbattle.FamilyPetEmbattleCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.toDelay),this.addMessageListener("OPEN_PETBATTLE_RANKVIEW",this,this.openPetBattleRankView),this.addMessageListener("OPEN_PETBATTLE_REWARDVIEW",this,this.openPetBattleRewardView),this.addMessageListener("OPEN_PETEMBATTLE_SIGNVIEW",this,this.openPetBattleSignVie),this.addMessageListener("OPEN_PETEMBATTLE_LOGVIEW",this,this.openLogView),this.addMessageListener("OPEN_MEMBERSTATE_VIEW",this,this.openMemberStateView),this.addMessageListener("OPEN_FAMILYMATERIALASSVIEW",this,this.openFamilyMaterialAssView),this.addMessageListener("OPEN_FAMILYMATERIALSECVIEW",this,this.openFamilyMaterialSecView),this.addMessageListener("OPEN_FAMILYMATERIALRESVIEW",this,this.openFamilyMaterialResView),this.addMessageListener("UPDATE_PETBATTLE_LOGVIEW",this,this.updateLogView),this.addMessageListener("CROSS_DAY",this,this.onCrossDayHandler),this.addSocketListener("m_family_pet_battle_family_rank_toc",this,this.onFamilyPetBattleFamilyRank),this.addSocketListener("m_family_pet_battle_family_rank_update_toc",this,this.onFamilyPetBattleFamilyRankUpdate),this.addSocketListener("m_family_pet_battle_info_toc",this,this.onFamilyPetBattleInfo),this.addSocketListener("m_family_pet_battle_log_update_toc",this,this.onFamilyPetBattleLogUpdate),this.addSocketListener("m_family_pet_battle_logs_toc",this,this.onFamilyPetBattleLogs),this.addSocketListener("m_family_pet_battle_members_toc",this,this.onFamilyPetBattleMembers),this.addSocketListener("m_family_pet_battle_role_rank_toc",this,this.onFamilyPetBattleRoleRank),this.addSocketListener("m_family_pet_battle_role_rank_update_toc",this,this.onFamilyPetBattleRoleRankUpdate),this.addSocketListener("m_family_pet_battle_sign_up_toc",this,this.onFamilyPetBattleSignUp),this.addSocketListener("m_family_material_info_toc",this,this.onFamilyMaterialInfo),this.addSocketListener("m_family_pet_battle_member_update_toc",this,this.onPetBattleMemberUpdate),this.addSocketListener("m_family_pet_battle_info_update_toc",this,this.onPetBattleInfoUpdate),this.addSocketListener("m_family_pet_battle_end_toc",this,this.onPetBattleEnd),this.addSocketListener("m_family_material_request_toc",this,this.onFamilyMaterialRequest),this.addSocketListener("m_family_material_assign_toc",this,this.onFamilyMaterialAssign)},i.onPetBattleEnd=function(t){Nn.battleEnd=t,this.logView&&this.logView.parent&&this.logView.update()},i.onCrossDayHandler=function(){this.first=!0,this.toFamilyPetBattleInfo(),Nn.battleEnd=null},i.onPetBattleInfoUpdate=function(t){Nn.handlerPetBattleInfoUpdate(t),this.signView&&this.signView.parent&&this.signView.update()},i.onPetBattleMemberUpdate=function(t){Nn.handlerPetBattleMemberUpdate(t),this.memberStateView&&this.memberStateView.parent&&this.memberStateView.update()},i.openFamilyMaterialResView=function(t){this._familyMaterialResView=this._familyMaterialResView||new yO,this._familyMaterialResView.parent||this._familyMaterialResView.openWindow(),this._familyMaterialResView.update(t)},i.checkPetPanelClose=function(){this.logView&&this.signView&&(this.logView.parent||this.signView.parent)||this.toPetBattlePanel(2)},i.checkPetPanelOpen=function(){this.logView&&this.signView&&this.logView.parent&&this.signView.parent||this.toPetBattlePanel(1)},i.toPetBattlePanel=function(t){var e=new Object;e.className="m_family_pet_battle_panel_tos",e.op_type=t,this.sendSocketMessage(e)},i.onPetBattlePanel=function(t){},i.openFamilyMaterialSecView=function(t,e){this._familtMaterialSecView=this._familtMaterialSecView||new vO,this._familtMaterialSecView.parent||this._familtMaterialSecView.openWindow(),this._familtMaterialSecView.openSecAlert(t,e)},i.openFamilyMaterialAssView=function(t){this._familyMaterialAssView=this._familyMaterialAssView||new _O,this._familyMaterialAssView.parent||this._familyMaterialAssView.openWindow(),this._familyMaterialAssView.updateByTypeID(t)},i.getNowMaxNum=function(t){return this._familyMaterialAssView?this._familyMaterialAssView.getNowCanAssButOne(t):0},i.toFamiltMaterialAssign=function(t){var e=new Object;e.className="m_family_material_assign_tos",e.assigns=t,this.sendSocketMessage(e)},i.onFamilyMaterialAssign=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("分配物资成功！"),Nn.handlerMaterialAssign(t),Ol.ins().updateFamilyShop(),this._familyMaterialAssView&&this._familyMaterialAssView.parent&&this._familyMaterialAssView.closeWindow())},i.toFamiltMaterialRequest=function(t){var e=new Object;e.className="m_family_material_request_tos",e.requests=t,this.sendSocketMessage(e)},i.onFamilyMaterialRequest=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerMaterialRequest(t),Ol.ins().updateFamilyShop())},i.openLogView=function(){0!=se.has("modules/petBattle")?(this.logView=this.logView||new bO,this.logView.parent||(this.logView.openWindow(),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleInfo(),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleFamilyRank(2),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleRoleRank(2),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleLogs()),this.logView.update(),this.checkPetPanelOpen()):se.add("modules/petBattle","加载仙宠盟战资源",this,this.openLogView,null)},i.updateLogView=function(){this.logView&&this.logView.parent&&this.logView.update()},i.openMemberStateView=function(){this.memberStateView=this.memberStateView||new xO,this.memberStateView.parent||this.memberStateView.openWindow(),this.memberStateView.update(),this.toFamilyPetBattleMembers()},i.updateMemberStateView=function(){this.memberStateView&&this.memberStateView.parent&&this.memberStateView.update()},i.openPetBattleSignVie=function(){0!=se.has("modules/petBattle")?0!=se.has("modules/petEmbattle")?(this.signView=this.signView||new EO,this.signView.parent||(this.signView.openWindow(),this.toFamilyPetBattleInfo()),this.signView.update(),this.checkPetPanelOpen()):se.add("modules/petEmbattle","加载幻兽天境资源",this,this.openPetBattleSignVie,null):se.add("modules/petBattle","加载仙宠盟战资源",this,this.openPetBattleSignVie,null)},i.updateSignView=function(){this.signView&&this.signView.parent&&this.signView.update()},i.openPetBattleRewardView=function(){this.rewardView=this.rewardView||new kO,this.rewardView.parent||this.rewardView.openWindow(),this.rewardView.update()},i.openPetBattleRankView=function(){this.rankView=this.rankView||new PO,this.rankView.parent||(this.rankView.openWindow(),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleFamilyRank(1),modules.family.familyPetEmbattle.FamilyPetEmbattleCase.ins.toFamilyPetBattleRoleRank(1)),this.rankView.update()},i.toDelay=function(){70<=pe.myLevel?_t.setTimeout(this,this.toInit,null,St.ENTER_DELAY):this.addMessageListener("ROLE_LEVEL_UP",this,this.toInit)},i.toInit=function(){70<=pe.myLevel&&0<pe.user.attr.family_id?this.toFamilyPetBattleInfo():this.removeMessageListener("ROLE_LEVEL_UP",this,this.toInit)},i.toFamilyMaterialInfo=function(){var t=new Object;t.className="m_family_material_info_tos",this.sendSocketMessage(t)},i.onFamilyMaterialInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerMaterialInfo(t),Ol.ins().updateFamilyShop())},i.onFamilyPetBattleRoleRankUpdate=function(t){0<t.err_code?ce.addTip(t.err_code):Nn.handlerRoleRankUpdate(t)},i.toFamilyPetBattleSignUp=function(t){var e=new Object;e.className="m_family_pet_battle_sign_up_tos",e.op_type=t,this.sendSocketMessage(e)},i.onFamilyPetBattleSignUp=function(t){0<t.err_code?ce.addTip(t.err_code):(1==t.op_type?(Nn.battleInfo.is_sign_up=!0,Jt.addTip("报名成功")):2==t.op_type&&(Nn.battleInfo.is_sign_up=!1,Jt.addTip("取消成功")),this.signView&&this.signView.parent&&this.signView.update())},i.toFamilyPetBattleRoleRank=function(t){var e=new Object;e.className="m_family_pet_battle_role_rank_tos",e.rank_type=t,this.sendSocketMessage(e)},i.onFamilyPetBattleRoleRank=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerRoleRank(t),1==t.rank_type&&this.rankView&&this.rankView.parent?this.rankView.update():2==t.rank_type&&this.logView&&this.logView.parent&&this.logView.update(),T.dispatch("FAMILY_PET_BATTLE_ROLE_RANK_UPDATE"))},i.toFamilyPetBattleMembers=function(){var t=new Object;t.className="m_family_pet_battle_members_tos",this.sendSocketMessage(t)},i.onFamilyPetBattleMembers=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerBattleMembers(t),this.memberStateView&&this.memberStateView.parent&&this.memberStateView.update())},i.toFamilyPetBattleLogs=function(){var t=new Object;t.className="m_family_pet_battle_logs_tos",this.sendSocketMessage(t)},i.onFamilyPetBattleLogs=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerBattleLogs(t),this.logView&&this.logView.parent&&this.logView.update())},i.onFamilyPetBattleLogUpdate=function(t){Nn.handlerBattleLogUpdate(t),this.logView&&this.logView.parent&&this.logView.update()},i.toFamilyPetBattleInfo=function(){var t=new Object;t.className="m_family_pet_battle_info_tos",this.sendSocketMessage(t)},i.onFamilyPetBattleInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerBattleInfo(t),this.signView&&this.signView.parent&&this.signView.update(),this.first&&(Nn.checkFightRP(),Nn.checkSignRP(),this.first=!1),this.updateLogView())},i.onFamilyPetBattleFamilyRankUpdate=function(t){Nn.handlerFamilyRankUpdate(t)},i.toFamilyPetBattleFamilyRank=function(t){var e=new Object;e.className="m_family_pet_battle_family_rank_tos",e.rank_type=t,this.sendSocketMessage(e)},i.onFamilyPetBattleFamilyRank=function(t){0<t.err_code?ce.addTip(t.err_code):(Nn.handlerFamilyRank(t),1==t.rank_type&&this.rankView&&this.rankView.parent?this.rankView.update():2==t.rank_type&&this.logView&&this.logView.parent&&this.logView.update())},i.assNumChange=function(){this._familyMaterialAssView&&this._familyMaterialAssView.assNumChange()},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(),Dl=function(t){function e(){this._identifyView=null,this._userAgreeView=null,this._fcmInfoView=null,this._fcmDownView=null,this._fcmRewardView=null,e.__super.call(this),e.hasAlert=!1,e.isFirst=!0}w(e,"modules.fcm.FcmModule",l);var i=e.prototype;return i.resetTime=function(){e.isFirst?console.log(e.onlineTime):e.onlineTime+=e.targetTime,18e3<=e.onlineTime?e.targetTime=900:0<=e.onlineTime&&e.onlineTime<10800?e.targetTime=3600-e.onlineTime%3600:10800<=e.onlineTime&&e.onlineTime<12600?e.targetTime=1800-(e.onlineTime-10800):12600<=e.onlineTime&&e.onlineTime<16200?e.targetTime=3600-(e.onlineTime-12600)%3600:16200<=e.onlineTime&&e.onlineTime<18e3&&(e.targetTime=1800-(e.onlineTime-16200)),e.isFirst=!1},i.initListeners=function(){this.addSocketListener("m_role_fcm_info_toc",this,this.onSetFcm),this.addSocketListener("m_role_user_agreement_info_toc",this,this.onAgreementInfo),this.addSocketListener("m_role_user_agreement_read_toc",this,this.onAgree),this.addSocketListener("m_role_fcm_identify_toc",this,this.onFcmIdentify),this.addMessageListener("OPEN_FCM_IDENTIFYVIEW",this,this.openFcmView),this.addMessageListener("FCM_IDENTIFY_SUCCESS",this,this.onIdentifySuccess),this.addMessageListener("OPEN_USER_AGREEMENT",this,this.openUserAgreeView),this.addMessageListener("OPEN_USER_AGREEMENT_SHOW",this,this.openUserAgreeViewShow),this.addMessageListener("FCM_COUNT_DOWN_END",this,this.onFcmCountDownEnd),this.addMessageListener("FCM_INITCONNECT",this,this.onFcmConnect)},i.onEnterGame=function(){this.toAgreeInfo()},i.onSetFcm=function(t){e.isFcm=t.type,e.onlineTime=t.online_time,Vn.accountMonthPay=t.account_month_pay,Vn.isGetReward=t.is_real_name_rewarded,Vn.onlineTime=t.online_time,this.dispatch("FCM_COUNT_DOWN"),this.onEnterGame(),Vn.isGetReward||1!=G.fcm_info.is_identified||this.openIdentifyRewardView()},i.toFcmIdentify=function(){var t=new Object;t.className="m_role_fcm_identify_tos",t.id_card=G.fcm_info.id_card,t.real_name=G.fcm_info.real_name,t.real_age=G.fcm_info.real_age,this.sendSocketMessage(t)},i.toAgreeInfo=function(){this.dispatch("FCM_COUNT_DOWN");var t=new Object;t.className="m_role_user_agreement_info_tos",this.sendSocketMessage(t)},i.onAgreementInfo=function(t){t.agreement_version<parseInt(G.agreementData.version)&&this.openUserAgreeView()},i.toAgree=function(){var t=new Object;t.className="m_role_user_agreement_read_tos",t.agreement_version=parseInt(G.agreementData.version),this.sendSocketMessage(t)},i.onAgree=function(t){t.err_code?ce.addTip(t.err_code):G.agreementData.version=t.agreement_version+""},i.onFcmIdentify=function(t){t.err_code||Jt.addTip("已领取")},i.openUserAgreeView=function(){1==G.agreementInfo&&(this._userAgreeView=this._userAgreeView||new eU,this._userAgreeView.popup(),this._userAgreeView.update())},i.openUserAgreeViewShow=function(){1==G.agreementInfo&&(this._userAgreeView=this._userAgreeView||new eU,this._userAgreeView.popup(),this._userAgreeView.showView())},i.openIdentifyRewardView=function(){this._fcmRewardView=this._fcmRewardView||new SL,this._fcmRewardView.openWindow(),this._fcmRewardView.update()},i.openFcmView=function(){G.fcm_info&&1==G.fcm_info.is_identified?N.isFcmLimit()?this.onFcmCountDownEnd():this.openIdentifyInfoView():this.openIdentifyView()},i.openIdentifyInfoView=function(){this._fcmInfoView=this._fcmInfoView||new xL,this._fcmInfoView.openWindow(),this._fcmInfoView.update()},i.onFcmConnect=function(){this._identifyView&&this._identifyView.parent&&(C.manager.close(this._identifyView),this._identifyView=null,Vn.isGetReward||1!=G.fcm_info.is_identified||this.openIdentifyRewardView())},i.openIdentifyView=function(){G.isRealName&&0==G.fcm_info.is_identified&&(this._identifyView=this._identifyView||new D,this._identifyView.popup(),this._identifyView.update())},i.onFcmCountDownEnd=function(){N.isFcmLimit()&&(this._fcmDownView=this._fcmDownView||new tU,this._fcmDownView.popup(),this._fcmDownView.update())},i.onIdentifySuccess=function(){this._identifyView&&this._identifyView.closeWindow();var t=new Ee;t.msg="恭喜你，认证成功",t.showRight=!1,EF.showVO(t)},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e.targetTime=NaN,e.onlineTime=NaN,e.alertView=null,e.hasAlert=!1,e.isFirst=!1,e.isFcm=NaN,e._ins=null,e}(),Nl=function(t){function o(){this._preLv=0,this.showLvArr=[20,30,80],this.alertVO=null,this.twice=!1,this._curItemID=0,this.initPayInfo=null,this.payInfo=null,this._chargeBackView=null,this._chargeBackKey=NaN,this._chargeBackFanTiView=null,this._firstCharge=null,this._firChargeKey=NaN,this.hasGodCoin=0,o.__super.call(this)}w(o,"modules.firstCharge.FirstChargeModule",l);var e=o.prototype;return e.initListeners=function(){this.addMessageListener("OPEN_FIRST_CHARGE",this,this.openFirstCharge),this.addMessageListener("OPEN_CHARGE",this,this.openCharge),this.addMessageListener("ENTER_GAME",this,this.toPayInfo),this.addMessageListener("VIP_LEVEL_CHANGE",this,this.updateVIPChange),this.addMessageListener("TO_GET_PAY_INFO",this,this.toDelay),this.addMessageListener("ON_PAY_SUCC",this,this.showPaySucc),this.addMessageListener("ON_PAY_CLOSE",this,this.showPayFail),this.addMessageListener("ON_PAY_ERROR",this,this.showPayFail),this.addMessageListener("TO_PAY_ORDER",this,this.toPayOrder),this.addMessageListener("WXSDLK_MC_PAY_ALERT",this,this.showMCPayAlert),this.addMessageListener("DEBUG_INFO",this,this.consoleDebugInfo),this.addMessageListener("YYBH5_PAY",this,this.YYBH5Pay),this.addMessageListener("TO_GET_PAY_REMAIN",this,this.toStarIconInfo),this.addSocketListener("m_role_first_pay_info_toc",this,this.onFirstPayInfo),this.addSocketListener("m_role_pay_info_toc",this,this.onPayInfo),this.addSocketListener("m_role_pay_toc",this,this.onPay),this.addSocketListener("m_role_first_pay_fetch_gift_toc",this,this.onFetchGift),this.addSocketListener("m_role_pay_order_toc",this,this.onPayOrder),this.addSocketListener("m_role_pay_switch_toc",this,this.onPaySwitch),this.addSocketListener("m_role_pay_info_toc",this,this.onPayInfoFanTi),this.addSocketListener("m_role_pay_exchange_toc",this,this.onExchange),this.addSocketListener("m_role_pay_remain_toc",this,this.onStarIconInfo),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkTipsShow),this.addMessageListener("NO_WINDOW_SHOW",this,this.checkTipsShow),this._preLv=pe.myLevel},e.checkTipsShow=function(){if(!G.isReviewVersion){var t=this.showLvArr.indexOf(pe.myLevel);this._preLv<this.showLvArr[t]&&-1!=t&&!lt.windowLayer.numChildren&&Fn.isShowNewIcon&&(this._preLv=pe.myLevel,this.showLvArr.splice(t,1),me.linkTo(11448))}},e.showMCPayAlert=function(t){console.log("showMCPayAlert    "+t),this._curItemID=0;var e=new Object;e.className="m_role_pay_tos",e.item_id=t,this.sendSocketMessage(e),zn.addDebugInfo("m_role_pay_tos","ALL")},e.onPayOrder=function(t){if(console.log("m_role_pay_order_toc  "+t.err_code),console.log("onPayOrder   cvo:"+t.item_id),zn.addDebugInfo("onPayOrder=itemId="+t.item_id,"ALL"),o._canTouchOrtherCharge=!0,0<t.err_code){if(zn.addDebugInfo("onPayOrder error code:"+t.err_code,"ALL"),30968003==t.err_code&&yt.isQQ){var e=Bn.getChargeBackVO(Number(t.order_id));console.info("余额充值：vo.order_id "+t.order_id);var i=new Ee;return i.title="温馨提示",i.msg=Z.span("您的帐号点券不足，请先充值点券再选购商品？","#5d3924",26)+"<br/>",i.yesFun=Bt.sdk.payOrder,i.yesCaller=Bt.sdk,i.yesArgs=[t,e],void EF.showVO(i)}ce.addTip(t.err_code)}else{var s;if(yt.isWX)s=Bn.getChargeBackVO(Number(t.item_id)),Bt.sdk.payOrder(t,s);else if(yt.isQQ)s=Bn.getChargeBackVO(Number(t.order_id)),Bt.sdk.payOrder(t,s);else{if(Bt.isMCFXIOS())console.log("进入SDKUtil.isMCFXIOS"),s=Bn.getChargeBackVOByStrID(t.item_id);else if(Bt.isTw()){var n=0;"eyouweiduan"==G.pf?n=Number(t.item_id)-100:"eyouios"==G.pf?n=Number(t.item_id):"eyouyoule"==G.pf&&(n=Number(t.item_id)),s=Bn.getChargeBackVO(n)}else s=Bn.getChargeBackVO(Number(t.item_id));zn.addDebugInfo("charge back vo:"+s,"ALL"),console.log("onPayOrder   cvo:",s),t&&s&&Bt.sdk.payOrder(t,s)}}},e.toPaySwitch=function(t){var e=new Object;e.className="m_role_pay_switch_tos",e.sys_type=Bt.os,e.item_id=t,this.sendSocketMessage(e)},e.onPaySwitch=function(t){if(console.log("m_role_pay_switch_toc"),console.log(t),0==t.err_code){if(Zr.enterGameReqFlag&&1198==t.item_id)return Zr.enterGameReqFlag=!1,void(Ta.isCanSwitch=t.is_switch);if(t.is_switch)this.toPayOrder(t.item_id);else{this._curItemID=0;var e=new Object;e.className="m_role_pay_tos",e.item_id=t.item_id,this.sendSocketMessage(e),zn.addDebugInfo("m_role_pay_tos","ALL")}}else ce.addTip(t.err_code)},e.toPayOrder=function(t){var e=new Object;e.className="m_role_pay_order_tos",e.item_id=t,T.dispatch("DEBUG_INFO","toPayOrder=itemid="+t,"all"),zn.addDebugInfo("toPayOrder=itemid="+t,"ALL"),this.sendSocketMessage(e)},e.showPaySucc=function(){yt.isWX?0<this._curItemID&&(o._canTouchOrtherCharge=!0,this.toPay(this._curItemID,!0)):(Bt.isNeedSecondPay(G.pf)&&0<this._curItemID&&this.toPay(this._curItemID,!0),S.onIOS&&"qqkjxyx-wxgzh"!=G.pf&&"mcyx-wxgzh"!=G.pf&&"h5yympios"!=G.pf&&"h5yympand"!=G.pf&&"ljxz-wxgzh"!=G.pf||(this.initAlert(),this.alertVO.msg="恭喜你，已购买成功",1==Bn.isFirstCharge&&(this.alertVO.msg="恭喜你，已购买成功,双倍返利请在信件查收",Bn.isFirstCharge=!1),EF.showVO(this.alertVO),Jr.ins().closeLevelOfTimeLimitView()))},e.showPayFail=function(){yt.isWX||yt.isQQ?(this.initAlert(),this.alertVO.msg="您在购买过程中失败，系统未扣费，请你尝试重新购买！",EF.showVO(this.alertVO),o._canTouchOrtherCharge=!0):S.onIOS&&"qqkjxyx-wxgzh"!=G.pf&&"mcyx-wxgzh"!=G.pf&&"h5yympand"!=G.pf&&"h5yympios"!=G.pf&&"ljxz-wxgzh"!=G.pf||(this.initAlert(),this.alertVO.msg="您在购买过程中失败，系统未扣费，请你尝试重新购买！",EF.showVO(this.alertVO))},e.initAlert=function(){null==this.alertVO&&(this.alertVO=new Ee,this.alertVO.yesLabel="我知道了",this.alertVO.showRight=!1)},e.updateVIPChange=function(){this._chargeBackView&&this._chargeBackView.parent?this._chargeBackView.updateVIP():this._chargeBackFanTiView&&this._chargeBackFanTiView.parent&&this._chargeBackFanTiView.updateVIP()},e.toPay=function(t,e){if(void 0===e&&(e=!1),yt.isWX){if(1!=o._canTouchOrtherCharge)return;if(o._canTouchOrtherCharge=!1,G.isWxPaySwitch){var i=Bn.getChargeBackVO(t);Bt.sdk.sdkyywPay(t,i),o._canTouchOrtherCharge=!0}else this.toPaySwitch(t),this.twice=e}else{if("xianlai"==G.pf){if(i=Bn.getChargeBackVO(t)){var s=new Ee;s.msg=Z.span("您是否花费"+10*i.money+"钻石兑换"+i.name,"#5d3924",26),s.yesFun=this.goToPay,s.yesArgs=[t,e],s.yesCaller=this,EF.showVO(s)}}else this.goToPay(t,e)}},e.goToPay=function(t,e){void 0===e&&(e=!1),this.twice=e,console.log("goToPay================"+t),console.log(G.pf),console.log(Bt.isSDKPay(G.pf));var i=Bn.getChargeBackVO(t);if(Bt.isSDKPay(G.pf))this._curItemID=t,Bt.sdk.pay(t,10*i.money),zn.addDebugInfo("popPayTips","ALL");else{this._curItemID=0;var s=new Object;s.className="m_role_pay_tos",s.item_id=t,this.sendSocketMessage(s),zn.addDebugInfo("m_role_pay_tos","ALL"),Bt.isGDT()&&S.window.mcApp.reportCompleteOrderForGdt(yt.openId,100*i.money),Bt.isGDTMD()&&S.window.mcApp.reportCompleteOrderForGdtWeb(yt.openId,100*i.money)}},e.YYBH5Pay=function(){if(Bt.isYYBH5()){var t=new Object;t.className="m_role_pay_tos",t.item_id=this._curItemID,this._curItemID=0,this.sendSocketMessage(t)}},e.onPay=function(t){var e=this;if(console.log("m_role_pay_toc"),zn.addDebugInfo("m_role_pay_toc:"+t.err_code,"ALL"),0<t.err_code)if(30968003==t.err_code&&1!=this.twice)if(this._curItemID=t.item_id,yt.isWX)console.log("需要充值的余额：",t.need_balance),Bt.popPayTips(this._curItemID,t.need_balance);else{var i=Bn.getChargeBackVO(t.item_id);Bt.popPayTips(this._curItemID,10*i.money)}else 0==o._canTouchOrtherCharge&&(o._canTouchOrtherCharge=!0),this.twice=!1,ce.addTip(t.err_code);else{0==o._canTouchOrtherCharge&&(o._canTouchOrtherCharge=!0),this.twice=!1,Jt.addTip("恭喜你，已购买成功"),Bt.isXianLai&&S.window.XLH5SDK&&S.window.XLH5SDK.getDiamondNum(function(t){t&&0==t.status&&(yt.diamond=t.diamondNum,e.updateChargeView())}),Bn.handlerPay(t);var s=new Object;s.className="m_role_pay_info_tos",this.sendSocketMessage(s),this.dispatch("CHARGE_PAY_BACK",[t.item_id]),this.showPaySucc(),this.toStarIconInfo(),1070<=t.item_id&&t.item_id<=1075&&T.dispatch("TO_ROLE_ICON_INFO",120);-1<[1089,1090,1091,1092,1132,1133].indexOf(t.item_id)&&T.dispatch("ACT_HUXIANCOIN_UPDATE"),-1<[1190,1191,1192,1194,1195,1196,1197].indexOf(t.item_id)&&Da.ins().toUpdateLucky(),this.updateChargeView(),Jr.ins().closeLevelOfTimeLimitView();i=Bn.getChargeBackVO(t.item_id);Bt.isGDT()&&S.window.mcApp.reportPurchaseAppForGdt(yt.openId,100*i.money),Bt.isGDTMD()&&S.window.mcApp.reportPurchaseAppForGdtWeb(yt.openId,100*i.money)}},e.toPayInfo=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},e.toDelay=function(){var t=new Object;t.className="m_role_pay_info_tos",this.sendSocketMessage(t)},e.onPayInfo=function(t){var e=this;0<t.err_code?ce.addTip(t.err_code):(this.initPayInfo=t.pay_list,Bt.isXianLai&&S.window.XLH5SDK&&S.window.XLH5SDK.getDiamondNum(function(t){t&&0==t.status&&(yt.diamond=t.diamondNum,e.updateChargeView())}),this.updateChargeView())},e.openCharge=function(t){void 0===t&&(t=0),(yt.isWX||yt.isQQ)&&0==ya.getChargeOpen()||(se.has("modules/vip")?se.has("modules/act")?(_t.clearTimeout(this._chargeBackKey),null==this._chargeBackView&&null==this._chargeBackFanTiView&&(Bt.isFanTi?(this._chargeBackFanTiView=new CL,this._chargeBackFanTiView.on("undisplay",this,this.onChargeBackUndisplay)):(this._chargeBackView=new PL,this._chargeBackView.on("undisplay",this,this.onChargeBackUndisplay))),this._chargeBackView?this._chargeBackView.openWindow(null,!0):this._chargeBackFanTiView&&(this._chargeBackFanTiView.openWindow(null,!0),this._chargeBackFanTiView.tab.selectedIndex=t),this.updateChargeView()):se.add("modules/act","正在加载活动图标",this,this.openCharge,[t]):se.add("modules/vip","正在加载充值返利模块",this,this.openCharge,[t]))},e.updateChargeView=function(){if(this.initPayInfo&&0<this.initPayInfo.length){var t;this.payInfo=[];for(var e=0;e<this.initPayInfo.length;e++)(t=new Object).className="p_general_pay",t.pay_id=this.initPayInfo[e].pay_id,t.extra_reward=this.initPayInfo[e].extra_reward,this.payInfo.push(t);Bt.isFanTi?Bn.handlerPayInfoFanTi(this.payInfo):Bn.handlerPayInfo(this.payInfo)}this._chargeBackView&&this._chargeBackView.parent?this._chargeBackView.updateView():this._chargeBackFanTiView&&this._chargeBackFanTiView.parent&&this._chargeBackFanTiView.updateView()},e.closeChargeView=function(){this._chargeBackView&&this._chargeBackView.parent&&this._chargeBackView.closeWindow()},e.onChargeBackUndisplay=function(){this._chargeBackKey=_t.setTimeout(this,this.clearChargeBackResource,null,ya.coldTime)},e.clearChargeBackResource=function(){this._chargeBackView?(this._chargeBackView.destroy(),this._chargeBackView=null):this._chargeBackFanTiView&&(this._chargeBackFanTiView.destroy(),this._chargeBackFanTiView=null);var t=ut.loadedMap,e=[];for(var i in t)0<=i.indexOf("modules/charge")&&e.push(i);for(var s=0;s<e.length;s++)ut.clearRes(e[s],!0)},e.toFetchGift=function(t){var e=new Object;e.className="m_role_first_pay_fetch_gift_tos",e.gift_id=t,this.sendSocketMessage(e)},e.onFetchGift=function(t){0<t.err_code?ce.addTip(t.err_code):(Bn.handlerFetch(t),this._firstCharge&&this._firstCharge.parent&&this._firstCharge.updateView(),this.updateIcon())},e.onFirstPayInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Bn.handlerInfo(t),this._firstCharge&&this._firstCharge.parent&&this._firstCharge.updateView(),this.updateIcon())},e.openFirstCharge=function(){se.has("modules/act")?(null==this._firstCharge&&(this._firstCharge=new NL,this._firstCharge.on("undisplay",this,this.onFirstChargeUndisplay)),_t.clearTimeout(this._firChargeKey),this._firstCharge.openWindow(),this._firstCharge.parent&&this._firstCharge.updateView()):se.add("modules/act","正在加载首充图标",this,this.openFirstCharge)},e.onFirstChargeUndisplay=function(){this._firChargeKey=_t.setTimeout(this,this.clearFirstResource,null,ya.coldTime)},e.clearFirstResource=function(){this._firstCharge&&(this._firstCharge.destroy(),this._firstCharge=null);var t=ut.loadedMap,e=[];for(var i in t)-1!=i.indexOf("modules/act/firCharge")&&e.push(i);for(var s=0;s<e.length;s++)ut.clearRes(e[s],!0)},e.updateIcon=function(){if(1==Bn.hasNewFirCharge)Zl.ins().removeVIcon(4005);else{var t=Bn.getChargeArr();for(var e in t)if(2!=t[e].state)return void Zl.ins().addIcon(4005);Zl.ins().removeVIcon(4005)}},e.consoleDebugInfo=function(t,e){zn.addDebugInfo(t,e)},e.onPayInfoFanTi=function(t){0<t.err_code?ce.addTip(t.err_code):(this.initPayInfo=t.pay_list,this.updateChargeView())},e.toExchange=function(t){var e=Bn.getChargeBackVO(t);if(this.hasGodCoin=pe.getScore(30),e)if(this.hasGodCoin>=e.money){var i=new Object;i.className="m_role_pay_exchange_tos",i.item_id=t,this.sendSocketMessage(i)}else{var s=new Ee;s.msg="您的仙尊币不足，是否前往充值？",s.yesFun=me.linkTo,s.yesArgs=[11454],s.yesCaller=me,EF.showVO(s)}else Jt.addTip("没有配置：id"+t)},e.onExchange=function(t){var e=this;if(0==t.err_code)Bt.isXianLai&&S.window.XLH5SDK&&S.window.XLH5SDK.getDiamondNum(function(t){t&&0==t.status&&(yt.diamond=t.diamondNum,e.updateChargeView())}),Jt.addTip("恭喜你，已购买成功"),Bn.handlerPayFanTi(t),this.dispatch("CHARGE_PAY_BACK",[t.item_id]),1070<=t.item_id&&t.item_id<=1075&&T.dispatch("TO_ROLE_ICON_INFO",120),this.showPaySucc(),this.updateChargeView(),Jr.ins().closeLevelOfTimeLimitView();else if(30968020==t.err_code){var i=new Ee;i.msg="您的仙尊币不足，是否前往充值？",i.yesFun=me.linkTo,i.yesArgs=[11454],i.yesCaller=me,EF.showVO(i)}else ce.addTip(t.err_code)},e.onStarIconInfo=function(t){if(t.err_code)ce.addTip(t.err_code);else{if(Bt.isYYBH5()){var e=Bn.getChargeBackVO(this._curItemID);if(e){if(t.remain_balance>=10*e.money){var i=new Ee;return i.msg="是否确定购买【"+e.name+"】",i.yesCaller=modules.firstCharge.FirstChargeModule.ins(),i.yesFun=modules.firstCharge.FirstChargeModule.ins().YYBH5Pay,void EF.showVO(i)}T.dispatch("YYBH5_SDK_PAY")}}console.log("星币余额:  ",t.remain_balance),Bn.starCoin=t.remain_balance,this.updateChargeView()}},e.toStarIconInfo=function(){console.log("请求星币余额");var t=new Object;t.className="m_role_pay_remain_tos",this.sendSocketMessage(t)},o.ins=function(){return o._ins=o._ins||new o},o._ins=null,o._canTouchOrtherCharge=!0,o}(),Vl=function(t){function e(){this.newFirChargePanel=null,this._newChargePanelKey=NaN,this.FirChargeADView=null,e.__super.call(this)}w(e,"modules.firstCharge.newFirstCharge.NewFirstChargeModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_NEW_FIR_CHARGE",this,this.openNewChargePanel),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("CHECK_NEW_FIR_AD_VIEW",this,this.checkShowADView),this.addSocketListener("m_role_icon_info_toc",this,this.onFirChargeIcon),this.addSocketListener("m_role_new_first_pay_panel_toc",this,this.onADViewState)},i.onEnterGame=function(){this.toFirChargeIcon(),this.toADViewState()},i.toFirChargeIcon=function(){var t=new Object;t.className="m_role_icon_info_tos",t.icon_id=4023,this.sendSocketMessage(t)},i.onFirChargeIcon=function(t){0==t.err_code?4023==t.icon_id&&this.checkShowIcon(t.arg_str):ce.addTip(t.err_code)},i.toADViewState=function(){var t=new Object;t.className="m_role_new_first_pay_panel_tos",t.icon_id=4023,this.sendSocketMessage(t)},i.onADViewState=function(t){0==t.err_code?0==t.show_state?Fn.isShowADView=!1:1==t.show_state&&(Fn.isShowADView=!0):ce.addTip(t.err_code)},i.checkShowIcon=function(t){var e=Fn.argStr2Arr(t);e&&"true"==e[0]?(Bn.hasNewFirCharge=!0,Nl.ins().updateIcon(),"true"==e[1]?"true"==e[2]?(Fn.isShowNewIcon=!1,Zl.ins().removeVIcon(4023),this.hideNewFirChargeAD()):(Fn.isShowNewIcon=!0,Zl.ins().addIcon(4023)):(Fn.isShowNewIcon=!1,Zl.ins().removeVIcon(4023),this.hideNewFirChargeAD())):(Fn.isShowNewIcon=!1,Bn.hasNewFirCharge=!1,this.hideNewFirChargeAD())},i.checkShowADView=function(){Fn.isShowNewIcon&&Fn.isShowADView?this.showNewFirChargeAD():this.hideNewFirChargeAD()},i.openNewChargePanel=function(){se.has("modules/act/firstCharge")?(this.newFirChargePanel=this.newFirChargePanel||new kL,this.newFirChargePanel.openWindow(),this.newFirChargePanel.update(),Fn.isShowADView=!1,this.checkShowADView(),_t.clearTimeout(this._newChargePanelKey)):se.add("modules/act/firstCharge","正在加载首充活动模块",this,this.openNewChargePanel)},i.onNewChargePanelHide=function(){this._newChargePanelKey=_t.setTimeout(this,this.clearNewChargeSource,null,ya.coldTime)},i.clearNewChargeSource=function(){null!=this.newFirChargePanel&&this.newFirChargePanel&&(this.newFirChargePanel.destroy(),this.newFirChargePanel=null),se.destroy("modules/act/firstCharge")},i.showNewFirChargeAD=function(){this.FirChargeADView=this.FirChargeADView||new TL,this.FirChargeADView.y=Zl.ins().getVIconY(4023)-90,Zl.ins().addchildViewV(this.FirChargeADView)},i.hideNewFirChargeAD=function(){this.FirChargeADView&&Zl.ins().removechildViewV(this.FirChargeADView)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Bl=function(t){function e(){this.suitPanel=null,this.panel=null,this.beautyView=null,e.__super.call(this)}w(e,"modules.footPrint.FootPrintModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_SUIT_PANEL",this,this.openSuitPanel),this.addMessageListener("OPEN_FOOT_PRINT_PANEL",this,this.openPanel),this.addMessageListener("ENTER_GAME",this,this.onEnterDelay),this.addSocketListener("m_foot_print_info_toc",this,this.onFootPrintInfo),this.addSocketListener("m_foot_print_active_toc",this,this.onFootPrintActive),this.addSocketListener("m_foot_print_change_toc",this,this.onFootPrintChange),this.addSocketListener("m_foot_print_refine_toc",this,this.onFootPrintRefine),this.addSocketListener("m_foot_print_purify_toc",this,this.onFootPrintPurify),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagChange)},i.onBagChange=function(){Un.checkRp()},i.openSuitPanel=function(){this.suitPanel=Aa.getIns(61e3,"SuitPanel"),this.suitPanel.openWindow()},i.openBeautyView=function(){this.beautyView=this.beautyView||Aa.getIns(61e3,"FootPrintBeautyView"),this.beautyView.openWindow()},i.openFootPanelByItemId=function(t){var e=Un.getFootCfg(t),i=Un.getFootPrintVO(e.id);this.openPanel(i?1:0),this.dispatch("FOOT_PRINT_SELECT_ITEM",e)},i.onEnterDelay=function(){this.toFootPrintInfo()},i.openPanel=function(t){void 0===t&&(t=0),se.has("modules/footPrint")?(this.panel=Aa.getIns(61e3,"FootPrintPanel"),this.panel.openWindow(),this.panel.setIdx(t)):se.add("modules/footPrint","正在加载足迹模块",this,this.openPanel,[t])},i.setTabIdx=function(t){void 0===t&&(t=0),this.panel&&this.panel.setIdx(t)},i.onFootPrintInfo=function(t){t.err_code?ce.addTip(t.err_code):(Un.curFootPrint=t.foot_id,Un.footPrintList=t.foot_list,this.dispatch("FOOT_PRINT_UPDATE"),Un.checkRp())},i.toFootPrintInfo=function(){var t=new Object;t.className="m_foot_print_info_tos",this.sendSocketMessage(t)},i.onFootPrintActive=function(t){t.err_code?ce.addTip(t.err_code):Jt.addTip("激活成功")},i.toFootPrintActive=function(t){var e=new Object;e.className="m_foot_print_active_tos",e.foot_id=t,this.sendSocketMessage(e)},i.onFootPrintChange=function(t){t.err_code&&ce.addTip(t.err_code)},i.toFootPrintChange=function(t){var e=new Object;e.className="m_foot_print_change_tos",e.on_id=t,e.off_id=0,this.sendSocketMessage(e)},i.onFootPrintRefine=function(t){t.err_code?ce.addTip(t.err_code):Jt.addTip("淬炼成功")},i.toFootPrintRefine=function(t){var e=new Object;e.className="m_foot_print_refine_tos",e.foot_id=t,this.sendSocketMessage(e)},i.onFootPrintPurify=function(t){t.err_code&&ce.addTip(t.err_code)},i.toFootPrintPurify=function(t){var e=new Object;e.className="m_foot_print_purify_tos",e.foot_id=t,this.sendSocketMessage(e)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ml=function(t){function e(){e.__super.call(this)}w(e,"modules.freeRename.FreeRenameModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ROLE_LEVEL_UP",this,this.checkRP),this.addMessageListener("CHECK_FREE_RENAME_CAN_GET",this,this.checkGet),this.addMessageListener("ENTER_GAME",this,this.checkRP)},i.checkRP=function(){pe.myLevel<100&&pe.myRegrow<1?this.dispatch("ICON_REDPOINT_CHANGE",[110,"RP_ICON_FREE_RENAME",!1]):this.dispatch("ICON_REDPOINT_CHANGE",[110,"RP_ICON_FREE_RENAME",!0])},i.checkGet=function(){if(pe.myLevel<100&&pe.myRegrow<1)Jt.addTip("100级可免费领取改名卡");else{var t=di.getConditionsByType(2);if(t&&t[0]){var e=t[0];Ua.getInstance().toGet(e.id)}}},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e.freeGetLv=100,e}(),Fl=function(t){function e(){this.achPanel=null,e.__super.call(this)}w(e,"modules.friend.achievement.FriendAchCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("FRIEND_ACH_OPEN_PANEL",this,this.openAchPanel),this.addMessageListener("FRIEND_ACH_UPDATE_PANEL",this,this.updateAchPanel),this.addMessageListener("ACHIEVEMENT_DATA_READY",this,this.achievementDataReady),this.addMessageListener("ACHIEVEMENT_GET",this,this.updateAchPanel),this.addMessageListener("ACHIEVEMENT_UPDATE",this,this.updateAchPanel)},i.achievementDataReady=function(){Gn.checkRP(),this.updateAchPanel()},i.openAchPanel=function(){0!=se.has("modules/friend")?0!=se.has("modules/chat")?(this.achPanel=this.achPanel||new VL,this.achPanel.openWindow(),this.achPanel.update(),Gn.checkRP()):se.add("modules/chat",null,this,this.openAchPanel):se.add("modules/friend","正在加载好友资源",this,this.openAchPanel)},i.updateAchPanel=function(){this.achPanel&&(this.achPanel.update(),Gn.checkRP())},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ul=function(t){function e(){this.chatPrivatePanel=null,this.addPanel=null,this.requestPanel=null,this.blackPanel=null,this.settingPanel=null,this.batchDeletePanel=null,this._needShowOffLineNotice=!1,e.__super.call(this)}w(e,"modules.friend.base.FriendBaseCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_friend_request_toc",this,this.onRequest),this.addSocketListener("m_friend_reply_toc",this,this.onReply),this.addSocketListener("m_friend_del_toc",this,this.onDelete),this.addSocketListener("m_friend_del_black_toc",this,this.onDeleteBlack),this.addSocketListener("m_friend_black_toc",this,this.onBlack),this.addSocketListener("m_friend_notice_toc",this,this.onNotice),this.addSocketListener("m_friend_recommend_toc",this,this.onRecommend),this.addSocketListener("m_friend_set_toc",this,this.onSet),this.addMessageListener("FRIEND_OPEN_PRIVATE_PANEL",this,this.openPrivateChatPanel),this.addMessageListener("FRIEND_UPDATE_PRIVATE_PANEL_BY_PAIRS",this,this.updatePrivateChatPanelByPairs),this.addMessageListener("FRIEND_OPEN_ADD_PANEL",this,this.openAddPanel),this.addMessageListener("FRIEND_REQUEST_ADD",this,this.requestAddFriend),this.addMessageListener("FRIEND_REQUEST_LIST_PANEL_UPDATE",this,this.updateRequestListPanel)},i.openBatchDeletePanel=function(){this.batchDeletePanel=this.batchDeletePanel||new jL,this.batchDeletePanel.openWindow(),this.batchDeletePanel.update()},i.updateBatchDeletePanel=function(){this.batchDeletePanel&&this.batchDeletePanel.isPopup()&&this.batchDeletePanel.update()},i.requestAddFriend=function(t){var e=t[0],i=t[1];this.toRequest(e,i)},i.openSettingPanel=function(){this.settingPanel=this.settingPanel||new eD,this.settingPanel.openWindow(),this.settingPanel.update()},i.openPrivateChatPanel=function(t){this.chatPrivatePanel=this.chatPrivatePanel||new HL,this.chatPrivatePanel.openWindow(),this.chatPrivatePanel.update(),ws.checkPrivateChatNewsRedPoint(),ws.curPrivateChatRoleId=t},i.closePrivateChatPanel=function(){this.privateChatPanelIsPopup()&&this.chatPrivatePanel.closeWindow()},i.updatePrivateChatPanelByPairs=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.chatPrivatePanel&&this.chatPrivatePanel.isPopup()&&this.chatPrivatePanel.updateByPairs(t,e)},i.privateChatPanelIsPopup=function(){return!(!this.chatPrivatePanel||!this.chatPrivatePanel.isPopup())},i.openAddPanel=function(){this.addPanel=this.addPanel||new XL,this.addPanel.openWindow(),this.toRecommend(),Hn.isOpenAddPanel=!0},i.openRequestPanel=function(){this.requestPanel=this.requestPanel||new tD,this.requestPanel.openWindow(),this.requestPanel.update()},i.updateRequestListPanel=function(){this.requestPanel&&this.requestPanel.isPopup()&&this.requestPanel.update()},i.openBlackPanel=function(){this.blackPanel=this.blackPanel||new zL,this.blackPanel.openWindow(),this.blackPanel.update()},i.updateBlackPanel=function(){this.blackPanel&&this.blackPanel.update()},i.toRequest=function(t,e){var i=new Object;i.className="m_friend_request_tos",i.target_role_id=t,i.target_role_name=e,this.sendSocketMessage(i)},i.onRequest=function(t){if(0==t.err_code)if(0==t.return_self){var e=!1;t.request_role&&(e=ws.isInBlack(t.request_role.role_id)),e||(1==t.type?(jn.requests.push(t.request_role),jn.checkRequestRedPoint()):2==t.type&&(qn.requests.push(t.request_role),qn.checkRequestRedPoint()),this.requestPanel&&this.requestPanel.isPopup()&&this.requestPanel.update())}else 1==t.return_self&&Jt.addTip("对"+t.target_role_name+"的好友申请已发送，请耐心等待!");else ce.addTip(t.err_code)},i.toReply=function(t,e){var i=new Object;i.className="m_friend_reply_tos",i.op_type=t,i.target_role_id=e,this.sendSocketMessage(i)},i.onReply=function(t){0==t.err_code?0==t.return_self?1==t.op_type?(Jt.addTip(t.reply_role_name+"同意你的好友申请，成为你的好友"),Wl.ins().toInfo(1,1),Wl.ins().toInfo(1,2),Wl.ins().toInfo(3,1),Wl.ins().toInfo(3,2)):2==t.op_type&&Jt.addTip(t.reply_role_name+"拒绝你的好友申请"):1==t.return_self&&(jn.updateByReply(t.op_type,t.target_role_id),qn.updateByReply(t.op_type,t.target_role_id),jn.checkRequestRedPoint(),qn.checkRequestRedPoint(),this.requestPanel&&this.requestPanel.isPopup()&&this.requestPanel.update(),this.dispatch("FRIEND_UPDATE_PANEL"),this.dispatch("FRIEND_NUM_UPDATE")):ce.addTip(t.err_code)},i.toDelete=function(t){var e=new Object;e.className="m_friend_del_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onDelete=function(t){0==t.err_code?(jn.updateFriendsByDelete(t.target_role_id),qn.updateFriendsByDelete(t.target_role_id),ws.updatePrivateChatByFriendBlack(t.target_role_id),Jt.addTip("已将对方移除好友"),this.dispatch("FRIEND_UPDATE_PANEL"),this.dispatch("FRIEND_NUM_UPDATE"),ws.checkPrivateChatNewsRedPoint(),this.updateBatchDeletePanel()):ce.addTip(t.err_code)},i.toDeleteBlack=function(t){var e=new Object;e.className="m_friend_del_black_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onDeleteBlack=function(t){0==t.err_code?(jn.updateFriendsByDeleteBlack(t.target_role_id),qn.updateFriendsByDeleteBlack(t.target_role_id),Jt.addTip("已将对方移除黑名单"),this.blackPanel&&this.blackPanel.isPopup()&&this.blackPanel.update()):ce.addTip(t.err_code)},i.toBlack=function(t){var e=new Object;e.className="m_friend_black_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onBlack=function(t){0==t.err_code?(1==t.type?jn.updateFriendsByBlack(t.target_role_id):2==t.type&&qn.updateFriendsByBlack(t.target_role_id),this.dispatch("FRIEND_UPDATE_PANEL"),this.dispatch("CHAT_PREVIEW_UPDATE"),this.dispatch("CHAT_PANEL_UPDATE"),ws.updatePrivateChatByFriendBlack(t.target_role_id),Jt.addTip("已将对方拉入黑名单")):ce.addTip(t.err_code)},i.resetNeedShowOffLineNotice=function(){this.needShowOffLineNotice=!1},i.onNotice=function(t){t.notice&&1==t.notice.id?Jt.addTip(t.role_name+"上线了"):t.notice&&2==t.notice.id&&0==this.needShowOffLineNotice&&(this.needShowOffLineNotice=!0,Jt.addTip(t.role_name+"下线了")),jn.updateFriendsByNotice(t.role_id,t.notice),jn.sortFriendList(),jn.sortFriendByMarryInfo(),this.updateByNotice(t.notice.id),this.dispatch("FRIEND_UPDATE_PANEL")},i.updateByNotice=function(t){switch(t){case 3:case 4:this.updatePrivateChatPanelByPairs();break;case 5:this.chatPrivatePanel&&this.chatPrivatePanel.isPopup()&&this.chatPrivatePanel.update()}},i.toRecommend=function(){var t=new Object;t.className="m_friend_recommend_tos",this.sendSocketMessage(t)},i.onRecommend=function(t){0==t.err_code?(Hn.recommendFriends=t.friend_info,this.addPanel&&this.addPanel.updateList()):ce.addTip(t.err_code)},i.toSet=function(t,e){var i=new Object;i.className="m_friend_set_tos",i.is_notice=t,i.is_reject=e,this.sendSocketMessage(i)},i.onSet=function(t){0==t.err_code?(Hn.isNotice=t.is_notice,Hn.isReject=t.is_reject):ce.addTip(t.err_code)},i.onShowWarningTips=function(t){this.chatPrivatePanel&&this.chatPrivatePanel.parent},I(0,i,"needShowOffLineNotice",function(){return this._needShowOffLineNotice},function(t){(this._needShowOffLineNotice=t)&&_t.setTimeout(this,this.resetNeedShowOffLineNotice,null,3e3)}),e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Gl=function(t){function e(){e.__super.call(this)}w(e,"modules.friend.box.FriendBoxCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_friend_box_info_toc",this,this.onInfo),this.addSocketListener("m_role_friend_box_refresh_toc",this,this.onRefresh),this.addSocketListener("m_role_friend_box_reward_toc",this,this.onReward),this.addSocketListener("m_role_friend_box_help_toc",this,this.onHelp),this.addSocketListener("m_role_friend_box_buy_toc",this,this.onBuy)},i.toInfo=function(t){var e=new Object;e.className="m_role_friend_box_info_tos",e.op_type=t,this.sendSocketMessage(e)},i.onInfo=function(t){0==t.err_code?(Wn.setInfoTocVO(t),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toRefresh=function(){var t=new Object;t.className="m_role_friend_box_refresh_tos",this.sendSocketMessage(t)},i.onRefresh=function(t){0==t.err_code?(Wn.updateInfoTocVOByRefresh(t.buy_list),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toReward=function(t,e){var i=new Object;i.className="m_role_friend_box_reward_tos",i.op_type=t,i.id=e,this.sendSocketMessage(i)},i.onReward=function(t){0==t.err_code?(Wn.updateInfoTocVOByReward(t.op_type,t.id),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toHelp=function(t,e,i){var s=new Object;s.className="m_role_friend_box_help_tos",s.op_type=t,s.role_id=e,s.id=i,this.sendSocketMessage(s)},i.onHelp=function(t){0==t.err_code?(Wn.updateInfoTocVOByHelp(t.op_type,t.id,t.help_role_name,t.return_self),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toBuy=function(t){var e=new Object;e.className="m_role_friend_box_buy_tos",e.index=t,this.sendSocketMessage(e)},i.onBuy=function(t){0==t.err_code?(Wn.updateInfoTocVOByBuy(t.index),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Hl=function(t){function e(){this.sendFlowerId=0,this.sendPanel=null,this.receivePanel=null,this.icon=null,this.cleanKey=NaN,e.__super.call(this),this.addMessageListener("OPEN_FRIEND_SEND_PANEL",this,this.openSendPanel),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addSocketListener("m_flower_send_toc",this,this.onSend),this.addSocketListener("m_flower_receive_toc",this,this.onReceive),this.addSocketListener("m_flower_charm_toc",this,this.onGetCharm),this.addSocketListener("m_flower_broadcast_toc",this,this.onBroadcast)}w(e,"modules.friend.flower.FriendFlowerModule",l);var i=e.prototype;return i.onEnterGame=function(){_t.setTimeout(this,this.toGetCharm,null,St.ENTER_DELAY)},i.toSend=function(t,e,i,s,n){this.sendFlowerId=e;var o=new Object;o.className="m_flower_send_tos",o.rec_role_id=t,o.item_id=e,o.num=i,o.msg=s,o.is_hide=n?1:0,this.sendSocketMessage(o)},i.onSend=function(t){0==t.err_code?1==t.return_self?(-1!=Xn.zongziIDs.indexOf(this.sendFlowerId)?Jt.addTip("送粽子成功"):-1!=Xn.flowerIDs.indexOf(this.sendFlowerId)?Jt.addTip("送花成功"):-1!=Xn.lightIDs.indexOf(this.sendFlowerId)?Jt.addTip("送华灯成功"):-1!=Xn.magpieIDs.indexOf(this.sendFlowerId)&&Jt.addTip("送礼盒成功"),this.closeSendPanel(),this.dispatch("MARRY_UPDATE_FRIEND_LIST_VIEW")):(Xn.addFlowers(t.rec_flower_info),this.showIcon()):ce.addTip(t.err_code)},i.toReceive=function(t){var e=new Object;e.className="m_flower_receive_tos",e.id=t,this.sendSocketMessage(e)},i.onReceive=function(t){0==t.err_code?(Xn.delReceiveFlower(t.id),this.checkHideIcon(t.id)):ce.addTip(t.err_code)},i.toGetCharm=function(){var t=new Object;t.className="m_flower_charm_tos",this.sendSocketMessage(t)},i.onGetCharm=function(t){Xn.charm=t.charm,this.dispatch("UPDATE_ROLE_ATTR_VIEW")},i.onBroadcast=function(t){Yn.ins().showEff(t.item_id,t.role_id)},i.openSendPanel=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),se.has("modules/sendFlower")?(this.sendPanel=this.sendPanel||new pD,this.sendPanel.openWindow(),this.sendPanel.pFriend=t,this.sendPanel.sendType=i,this.sendPanel.flowerID=e,this.sendPanel.update(),_t.clearTimeout(this.cleanKey)):se.add("modules/sendFlower","正在加载送花资源",this,this.openSendPanel,[t,e,i])},i.closeSendPanel=function(){this.sendPanel&&this.sendPanel.isPopup()&&this.sendPanel.closeWindow()},i.openReceivePanel=function(t){se.has("modules/sendFlower")?(this.receivePanel=this.receivePanel||new dD,this.receivePanel.openWindow(),this.receivePanel.data=t,_t.clearTimeout(this.cleanKey)):se.add("modules/sendFlower","正在加载送花资源",this,this.openReceivePanel,[t])},i.showIcon=function(){se.has("modules/sendFlower")?(this.icon=this.icon||new cD,this.icon.show(),_t.clearTimeout(this.cleanKey)):se.add("modules/sendFlower","正在加载送花资源",this,this.showIcon)},i.checkHideIcon=function(t){this.icon&&this.icon.checkHide(t)},i.checkClean=function(){this.sendPanel&&null!=this.sendPanel.parent||this.receivePanel&&null!=this.receivePanel.parent||this.icon&&null!=this.icon.parent||(this.cleanKey=_t.setTimeout(this,this.clearFlower,null,ya.coldTime))},i.clearFlower=function(){se.destroy("modules/sendFlower")},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Wl=function(t){function e(){this.friendPanel=null,e.__super.call(this)}w(e,"modules.friend.FriendModule",l);var i=e.prototype;return i.initListeners=function(){Gl.getInstance(),ql.getInstance(),Ul.getInstance(),Fl.getInstance(),this.addSocketListener("m_friend_info_toc",this,this.onInfo),this.addSocketListener("m_friend_update_toc",this,this.onFriendUpdate),this.addMessageListener("FRIEND_OPEN_PANEL",this,this.openFriendPanel),this.addMessageListener("FRIEND_UPDATE_PANEL",this,this.updateFriendPanel),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo)},i.openFriendPanel=function(t){void 0===t&&(t=0),0!=Ne.isOpenFriend()?0!=se.has("modules/friend")?0!=se.has("modules/chat")?(console.log("----------------------------open friend panel"),this.friendPanel=this.friendPanel||new gD,this.friendPanel.openWindow(),this.friendPanel.tab.selectedIndex=t,this.friendPanel.update(),Hn.checkAddBtnRedPoint(),ql.getInstance().toGiveInfo(1)):se.add("modules/chat",null,this,this.openFriendPanel,[t]):se.add("modules/friend","正在加载好友资源",this,this.openFriendPanel,[t]):Jt.addTip("好友功能40级开启")},i.updateFriendPanel=function(){this.friendPanel&&this.friendPanel.isPopup()&&this.friendPanel.update()},i.enterGameToInfo=function(){this.toInfo(2,1),this.toInfo(2,2),_t.setTimeout(this,this.toInfo,[1,1],St.ENTER_DELAY),_t.setTimeout(this,this.toInfo,[3,1],St.ENTER_DELAY),_t.setTimeout(this,this.toInfo,[1,2],St.ENTER_DELAY),_t.setTimeout(this,this.toInfo,[3,2],St.ENTER_DELAY)},i.toInfo=function(t,e){var i=new Object;i.className="m_friend_info_tos",i.op_type=t,i.type=e,this.sendSocketMessage(i)},i.onInfo=function(t){if(0==t.err_code){switch(t.op_type){case 1:1==t.type?(jn.friends=t.list,ws.checkPrivateChatNewsRedPoint()):2==t.type&&(qn.friends=t.list),this.updateFriendPanel(),this.dispatch("FRIEND_NUM_UPDATE"),this.dispatch("CHAT_PANEL_UPDATE");break;case 2:1==t.type?jn.blacks=t.list:2==t.type&&(qn.blacks=t.list),Ul.getInstance().updateBlackPanel();break;case 3:1==t.type?(jn.requests=t.list,jn.checkRequestRedPoint()):2==t.type&&(qn.requests=t.list,qn.checkRequestRedPoint())}Hn.isNotice=t.is_notice,Hn.isReject=t.is_reject}else ce.addTip(t.err_code)},i.onFriendUpdate=function(t){function e(t,e){if(e)for(var i=t?t.length:0,s=0;s<i;s++)if(t[s].role_id==e.role_id){t[s]=e;break}}t.friend_info&&(e(jn.friends,t.friend_info),e(qn.friends,t.friend_info),e(jn.blacks,t.friend_info),e(qn.blacks,t.friend_info),e(jn.requests,t.friend_info),e(qn.requests,t.friend_info),this.updateFriendPanel(),this.dispatch("FRIEND_NUM_UPDATE"),this.dispatch("CHAT_PANEL_UPDATE"),Ul.getInstance().updateBlackPanel(),jn.checkRequestRedPoint(),qn.checkRequestRedPoint())},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),ql=function(t){function e(){this.detailPanel=null,this.canGetList=null,e.__super.call(this)}w(e,"modules.friend.gift.FriendGiftCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_friend_give_toc",this,this.onGive),this.addSocketListener("m_friend_give_info_toc",this,this.onGiveInfo),this.addSocketListener("m_friend_give_get_toc",this,this.onGiveGet),this.addMessageListener("ENTER_GAME",this,this.onEnterGame)},i.onEnterGame=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){this.toGiveInfo(2)},i.openDetailPanel=function(){this.detailPanel=this.detailPanel||new mD,this.detailPanel.openWindow(),this.detailPanel.update()},i.toGive=function(t){var e=new Object;e.className="m_friend_give_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onGive=function(t){if(0==t.err_code){if(0==t.return_self)this.toGiveInfo(2);else{Qn.updateByGive(t.target_role_id);var e=jn.getFriendByRoleId(t.target_role_id);e&&Jt.addTip("赠送"+e.role_name+"成功"),this.dispatch("MARRY_UPDATE_FRIEND_LIST_VIEW")}this.dispatch("FRIEND_UPDATE_PANEL"),this.dispatch("CHAT_PANEL_UPDATE")}else ce.addTip(t.err_code)},i.toGiveInfo=function(t){var e=new Object;e.className="m_friend_give_info_tos",e.op_type=t,this.sendSocketMessage(e)},i.onGiveInfo=function(t){0==t.err_code?(Qn.updateGiveInfo(t),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toGiveGet=function(t){var e=new Object;e.className="m_friend_give_get_tos",e.id=t,this.sendSocketMessage(e)},i.onGiveGet=function(t){if(0==t.err_code){var e=Qn.getGiveGetVO(t.id);for(var i in e&&Jt.addTip("获得"+e.role_name+"赠送的5元宝"),Qn.canGetLetters)if(Qn.canGetLetters[i].id==t.id){Qn.canGetLetterLen--,this.canGetList=this.canGetList||[],this.canGetList=this.canGetList.concat(t.get_reward);break}0==Qn.canGetLetterLen&&this.canGetList&&0<this.canGetList.length&&(T.dispatch("GOODS_SHOW_VIEW",this.canGetList,Jn.GOODS_SHOW_NOTICE_TYPE_FRIEND_LETTER),this.canGetList=[]),Qn.updateByGiveGet(t.id),Qn.checkRedPoint(),this.dispatch("FRIEND_UPDATE_PANEL")}else ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Yl=function(t){function e(){this.sending=!1,this.superBtn=null,this.panel=null,this.wxInterfacePanel=null,this.count=0,e.__super.call(this)}w(e,"modules.gm.GMModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_GM_PANEL",this,this.openGMPanel),this.addSocketListener("m_chat_in_channel_toc",this,this.onSendChat),this.addSocketListener("m_client_dev_toc",this,this.onClientDev),this.addMessageListener("ADD_GM_DEBUGINFO",this,this.addDebugInfo)},i.onClickStage=function(){var t=this.getArea(h.stage.mouseX,h.stage.mouseY);(0!=this.count&&1!=this.count||1!=t)&&(2!=this.count&&3!=this.count||2!=t)&&(4!=this.count&&5!=this.count||3!=t)&&(6!=this.count&&7!=this.count||4!=t)?this.count=0:this.count++,8==this.count&&this.openGMPanel()},i.getArea=function(t,e){return t<200&&e<200?4:t>lt.stageWidth-200&&e<200?3:t>lt.stageWidth-200&&e>lt.stageHeight-200?2:t<200&&e>lt.stageHeight-200?1:0},i.onClientDev=function(t){Jt.addTip("m_client_dev_toc:"+t.command)},i.onDebugInfo=function(t,e){zn.addDebugInfo(t,e)},i.openGMPanel=function(){this.panel=this.panel||new wD,this.panel.openWindow()},i.toSendChat=function(t){var e=new Object;e.className="m_chat_in_channel_tos",e.channel=1e4,e.msg=t,e.msg_type=1,this.sendSocketMessage(e)},i.onSendChat=function(t){t.err_code},i.openWxInterfacePanel=function(){this.wxInterfacePanel=this.wxInterfacePanel||new CD,this.wxInterfacePanel.openWindow()},i.addDebugInfo=function(t,e){zn.addDebugInfo(t,e)},e.ins=function(){return e._instance=e._instance||new e},e._instance=null,e}(),Xl=function(t){function e(){this.panel=null,e.__super.call(this)}w(e,"modules.godHood.GodHoodModule",l);var i=e.prototype;return i.initListeners=function(){ol.ins(),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("GODHOOD_OPEN_PANEL",this,this.onOpenGodHood),this.addMessageListener("UPDATE_PAL_DATA",this,this.onNewPal),this.addSocketListener("m_role_godhood_info_toc",this,this.onGodHoodInfo),this.addSocketListener("m_god_artifact_info_toc",this,this.onGodArtifactInfo),this.addSocketListener("m_god_artifact_trait_upgrade_toc",this,this.onGodArtifactUpgrade),this.addSocketListener("m_god_artifact_trait_clear_toc",this,this.onGodArtifactClear),this.addSocketListener("m_god_artifact_set_red_point_toc",this,this.onEquipSetRP)},i.onNewPal=function(){var t=new Object;t.className="m_god_artifact_info_tos",this.sendSocketMessage(t)},i.toGodArtifactUpgrade=function(t,e){var i=new Object;i.className="m_god_artifact_trait_upgrade_tos",i.pal_id=t,i.trait_id=e,this.sendSocketMessage(i)},i.toGodArtifactClear=function(t){var e=new Object;e.className="m_god_artifact_trait_clear_tos",e.pal_id=t,this.sendSocketMessage(e)},i.onGodArtifactUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(Zn.handlerGodArtifactUpgrade(t),this.panel&&this.panel.parent&&this.panel.updateByIndex(3),this.checkGoodHoodEquipRp())},i.onGodArtifactClear=function(t){0<t.err_code?ce.addTip(t.err_code):(Zn.handlerGodArtifactClear(t),this.panel&&this.panel.parent&&this.panel.updateByIndex(3),this.checkGoodHoodEquipRp())},i.onGodArtifactInfo=function(t){Zn.handlerGodArtifactInfo(t),this.panel&&this.panel.parent&&this.panel.updateByIndex(3),this.checkGoodHoodEquipRp()},i.onGodHoodInfo=function(t){if(Zn.godHoodLv!=t.stage){Zn.godHoodLv=t.stage;var e=new Object;e.className="m_god_artifact_info_tos",this.sendSocketMessage(e),ol.ins().toCopyInfo()}this.panel&&this.panel.parent&&this.panel.updateByIndex(1),this.checkGoodHoodRP(),this.checkGoodHoodEquipRp(),this.dispatch("ON_GODHOOD_INFO")},i.onOpenGodHood=function(t){void 0===t&&(t=0),0!=Ne.isGodHoodOpen()?3==t&&Zn.godHoodLv<=0?Jt.addTip("请先开启仙阶"):(null==this.panel&&(this.panel=new RD),this.panel&&null==this.panel.parent&&this.panel.openWindow(),this.panel.parent&&this.panel.setIndex(t)):Jt.addTip("请先通关修仙之路10关")},i.updatePanel=function(){this.panel&&this.panel.update()},i.onEnterGame=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY),_t.setTimeout(ol.ins(),ol.ins().toCopyInfo,null,St.ENTER_DELAY),_t.setTimeout(ol.ins(),ol.ins().toInfo,null,St.ENTER_DELAY)},i.toDelay=function(){var t=new Object;t.className="m_role_godhood_info_tos",this.sendSocketMessage(t);var e=new Object;e.className="m_god_artifact_info_tos",this.sendSocketMessage(e),this.addMessageListener("COPY_REWARD_TOC",this,this.checkGoodHoodRP),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.checkGoodHoodRP),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.checkGoodHoodEquipRp)},i.checkGoodHoodEquipRp=function(t){if(null==t||14==t.id){for(var e=!1,i=0;i<pe.pals.length;i++){for(var s=pe.pals[i],n=Zn.getGodEquipInfoByPal(s.pal_id),o=!!Zn.palGodEquipInfos&&Zn.getUpNeed(s.pal_id)<=pe.getScore(14),a=!1,l=1;l<6;l++)if(Zn.getNeedCheckGodHoodEquip(s.pal_id,l)){var r=Zn.getGodHoodEquipByID(l);if(Zn.godHoodLv>=r.needStage){var h,u=0;if(n)for(var c in n.artifacts)if((h=n.artifacts[c]).id==r.id){u=h.total_trait_lv;break}u<r.totalLV&&o&&l<=3&&(e=a=!0)}}a?Nt.show("RP_GODHOOD_EQUIP_"+i):Nt.hide("RP_GODHOOD_EQUIP_"+i)}e?Nt.show("RP_GODHOOD_EQUIP"):Nt.hide("RP_GODHOOD_EQUIP")}},i.checkGoodHoodRP=function(){var t=!1,e=(Zn.godHoodLv,Zn.getGodHoodS()[Zn.godHoodLv]);e&&(t=0==Zn.godHoodLv?Vs.passedMaxChapter>=e.need:Zn.godHoodLv<Zn.getHoodGetMaxLV()&&Ds.curBarrier>e.need),t?Nt.show("RP_GODHOOD_CAN_FIGHT"):Nt.hide("RP_GODHOOD_CAN_FIGHT")},i.toEquipSetRP=function(t,e){var i=new Object;i.className="m_god_artifact_set_red_point_tos",i.pal_id=t,i.red_point=e,this.sendSocketMessage(i)},i.onEquipSetRP=function(t){Zn.handlerEuiqpRpSet(t),this.checkGoodHoodEquipRp(),this.panel&&this.panel.parent&&this.panel.updateByIndex(3)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Kl=function(t){function e(){e.__super.call(this)}w(e,"modules.goodsShow.GoodsShowModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_currency_spec_notice_toc",this,this.onCurrencySpcNotice),this.addMessageListener("GOODS_SHOW_VIEW",this,this.showGoodsView),this.addMessageListener("GOODS_GET_SHOW_VIEW",this,this.showGetGoodsView)},i.onCurrencySpcNotice=function(t){T.dispatch("ACT_CONSTELLATION_CALL_SUCC",t),sU.ins().showView(t.rewards,t.notify_type)},i.showGoodsView=function(t,e){sU.ins().showView(t,e)},i.showGetGoodsView=function(t,e){void 0===e&&(e=0),iU.ins().showView(t,e)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),jl=function(t){function e(){e.__super.call(this)}w(e,"modules.guide.GuideModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addSocketListener("m_role_guide_toc",this,this.onGuide)},i.onEnterGame=function(){0==yt.firstEnter||G.isReviewVersion&&"shouQxcxIos"==!G.pf&&"shouQxcxand"==!G.pf?this.toGuide(0):LD.needGuide=!0},i.toGuide=function(t){var e=new Object;e.className="m_role_guide_tos",e.step=t,v.send(e)},i.onGuide=function(t){if(LD.needGuide=2==t.status,2==t.status&&0==yt.firstEnter||G.isReviewVersion&&"shouQxcxIos"==!G.pf&&"shouQxcxand"==!G.pf)for(var e=1;e<=18;e++)-1==t.step.indexOf(e)&&t.step.push(e);LD.allDone=t.step},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Ql=function(t){function e(){this.depotPanel=null,this.rewardsPanel=null,e.__super.call(this)}w(e,"modules.huntTreasure.deepSea.HuntTreasureDeepSeaCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_deep_sea_box_info_toc",this,this.onInfo),this.addSocketListener("m_goods_deep_sea_get_toc",this,this.onGoodsGet),this.addSocketListener("m_role_deep_sea_box_open_toc",this,this.onBoxOpen),this.addMessageListener("BAGDATA_CHANGE",this,this.checkRedPoint)},i.toInfo=function(){var t=new Object;t.className="m_role_deep_sea_box_info_tos",this.sendSocketMessage(t)},i.checkRedPoint=function(){io.checkRedPoint()},i.openDepotPanel=function(){this.depotPanel=this.depotPanel||new DD,this.depotPanel.openWindow(),this.depotPanel.update()},i.onInfo=function(t){0==t.err_code?(io.boxLogs=t.box_logs,io.checkRedPoint(),this.dispatch("HUNTTREASURE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toBoxOpen=function(t){var e=new Object;e.className="m_role_deep_sea_box_open_tos",e.op_type=t,this.sendSocketMessage(e)},i.onBoxOpen=function(t){0==t.err_code?(io.boxLogs=t.box_logs,this.dispatch("HUNTTREASURE_MYSTERY_GOODS_FLY",t.reward),io.checkRedPoint(),this.dispatch("HUNTTREASURE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toGoodsGet=function(){var t=new Object;t.className="m_goods_deep_sea_get_tos",this.sendSocketMessage(t)},i.onGoodsGet=function(t){0==t.err_code?(Jt.addTip("成功领取到背包！"),this.updateDepotPanel(),io.checkRedPoint()):ce.addTip(t.err_code)},i.updateDepotPanel=function(){this.depotPanel&&this.depotPanel.isPopup()&&this.depotPanel.update()},i.openRewardPanel=function(t){this.rewardsPanel=this.rewardsPanel||new ND,this.rewardsPanel.openWindow(null,!0),this.rewardsPanel.update(t)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),zl=function(t){function e(){this.panel=null,this.orangePanel=null,this.otherLegView=null,this.curActorIndex=0,this.curLinkType=0,e.__super.call(this)}w(e,"modules.huntTreasure.HuntTreasureModule",l);var i=e.prototype;return i.initListeners=function(){$l.getInstance(),this.addMessageListener("HUNTTREASURE_OPEN_PANEL",this,this.openPanel),this.addMessageListener("ORANGEEQIUP_OPEN_PANEL",this,this.openOrangePanel),this.addMessageListener("HUNTTREASURE_OPEN_OTHER_PANEL",this,this.openOtherLegendPanel),this.addMessageListener("HUNTTREASURE_UPDATE_PANEL",this,this.updatePanel),this.addMessageListener("HUNTTREASURE_MYSTERY_GOODS_FLY",this,this.onMysteryGoodsFly)},i.openOtherLegendPanel=function(t){void 0===t&&(t=0),this.otherLegView=this.otherLegView||new YD,null==this.otherLegView.parent&&this.otherLegView.openWindow(),this.otherLegView.selestItem(t)},i.getOtherLegViewHeadIndex=function(){return this.otherLegView?this.otherLegView.headPart.index:0},i.onMysteryGoodsFly=function(t){this.panel&&this.panel.isPopup()&&this.panel.mysteryGoodsFly(t)},i.openPanel=function(t){void 0===t&&(t=0),0!=t||0!=Ne.isOpenHuntTreasureMystery()?0!=se.has("modules/huntTreasure")?(this.panel=this.panel||new BD,this.panel.openWindow(null,!0),this.panel.showViewByIndex(t)):se.add("modules/huntTreasure","正在加载寻宝模块",this,this.openPanel,[t]):Jt.addTip("该功能10级开放")},i.openOrangePanel=function(t){void 0===t&&(t=0),this.orangePanel=this.orangePanel||new qD,this.orangePanel.openWindow(null,!0),this.orangePanel.showViewByIndex(t)},i.updatePanel=function(){this.panel&&this.panel.isPopup()&&this.panel.update()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),$l=function(t){function e(){this.depotPanel=null,this.rewardsPanel=null,e.__super.call(this)}w(e,"modules.huntTreasure.mystery.HuntTreasureMysteryCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_mystery_box_info_toc",this,this.onInfo),this.addSocketListener("m_goods_swap_toc",this,this.onGoodsSwap),this.addSocketListener("m_goods_depot_get_toc",this,this.onGoodsGet),this.addSocketListener("m_role_mystery_box_open_toc",this,this.onBoxOpen),this.addMessageListener("PACK_DATA_INITED",this,this.onPackInit),this.addMessageListener("BAGDATA_CHANGE",this,this.checkRedPoint)},i.onPackInit=function(){_t.setTimeout(this,this.checkRedPoint,null,St.ENTER_DELAY)},i.checkRedPoint=function(){so.checkRedPoint()},i.openDepotPanel=function(){this.depotPanel=this.depotPanel||new UD,this.depotPanel.openWindow(),this.depotPanel.update()},i.updateDepotPanel=function(){this.depotPanel&&this.depotPanel.isPopup()&&this.depotPanel.update()},i.openRewardPanel=function(t){this.rewardsPanel=this.rewardsPanel||new GD,this.rewardsPanel.openWindow(null,!0),this.rewardsPanel.update(t)},i.toInfo=function(){var t=new Object;t.className="m_role_mystery_box_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(so.boxLogs=t.box_logs,this.dispatch("HUNTTREASURE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toGoodsSwap=function(t,e,i){var s=new Object;s.className="m_goods_swap_tos",s.id1=t,s.position2=e,s.bagid2=i,this.sendSocketMessage(s)},i.onGoodsSwap=function(t){0==t.err_code?(Jt.addTip("成功领取到背包！"),xo.gainGoods([t.goods2]),xo.delGoods([t.goods1]),this.updateDepotPanel(),so.checkRedPoint()):ce.addTip(t.err_code)},i.toGoodsGet=function(){var t=new Object;t.className="m_goods_depot_get_tos",this.sendSocketMessage(t)},i.onGoodsGet=function(t){0==t.err_code?(Jt.addTip("成功领取到背包！"),this.updateDepotPanel(),so.checkRedPoint()):ce.addTip(t.err_code)},i.toBoxOpen=function(t){var e=new Object;e.className="m_role_mystery_box_open_tos",e.op_type=t,this.sendSocketMessage(e)},i.onBoxOpen=function(t){0==t.err_code?(so.boxLogs=t.box_logs,this.dispatch("HUNTTREASURE_MYSTERY_GOODS_FLY",t.reward),so.checkRedPoint(),this.dispatch("HUNTTREASURE_UPDATE_PANEL")):ce.addTip(t.err_code)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Zl=function(t){function e(){this.iconList=null,this.iconlistV=null,this.actpreView=null,this.cdID=-1,this.hasInitEff=!1,this.waitIDs=null,this.waitRPs=null,this.morePanel=null,e.__super.call(this)}w(e,"modules.icon.IconModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ICONLIST_SHOW",this,this.showIconList),this.addMessageListener("ICONLISTV_SHOW",this,this.showIconListV),this.addMessageListener("ICONLIST_HIDE",this,this.hideIconList),this.addMessageListener("ICONLISTV_HIDE",this,this.hideIconListV),this.addMessageListener("ICON_REDPOINT_CHANGE",this,this.onIconRPChange),this.addMessageListener("OPEN_CHARGE",this,this.onOpenCharge),this.addMessageListener("ICON_STATE_CHANGE",this,this.onIconStateChange),this.addMessageListener("SHOW_FORTUNE_DAY_TIP_ON_ICON_LIST",this,this.onShowLuckyDayTip),this.addMessageListener("HIDE_FORTUNE_DAY_TIP_ON_ICON_LIST",this,this.onHideLuckyDayTip),this.addMessageListener("OPEN_ACTPREW_VIEW",this,this.openActprewView),this.addMessageListener("CROSS_DAY",this,this.onCrossHandler),this.addMessageListener("ROLE_LEVEL_UP",this,this.onRoleLvUp),this.addMessageListener("REGROWLV_UP",this,this.onRoleLvUp),this.addMessageListener("TO_ROLE_ICON_INFO",this,this.onRoleIconInfo),this.addMessageListener("ON_ACT_FDCHARGE_CLOSE",this,this.onCloseFdCharge),this.addMessageListener("ON_SYS_UPDATE",this,this.onSysUpdate),this.addMessageListener("ON_SYS_CONFIG",this,this.onSysUpdate),this.addMessageListener("OPEN_MORE_ICONS_PANEL",this,this.openMorePanel),this.addSocketListener("m_act_end_toc",this,this.onActEnd),this.addSocketListener("m_icon_notice_toc",this,this.onIconNotice),this.addSocketListener("m_role_icon_info_toc",this,this.onIconInfo)},i.onCloseFdCharge=function(){this.iconList&&this.iconList.deleteIcon(4026)},i.deleteIcon=function(t){this.iconList&&this.iconList.deleteIcon(t)},i.toIconInfo=function(t){var e=new Object;e.className="m_role_icon_info_tos",e.icon_id=t,this.sendSocketMessage(e)},i.onIconInfo=function(t){0==t.err_code?(ao.setIconInfos(t.icon_id,t.arg_str),T.dispatch("ROLE_ICON_INFO_BACK",t.icon_id)):ce.addTip(t.err_code)},i.onRoleIconInfo=function(t){this.toIconInfo(t)},i.onRoleLvUp=function(){ao.checkIconTime()},i.onActEnd=function(t){ao.setActEnd(t.id),ao.checkIconTime()},i.onCrossHandler=function(){ao.checkIconTime(),ao.resetActEnd()},i.openActprewView=function(){se.has("modules/actPre")||se.add("modules/actPre","正在加载活动预告界面",this,this.openActprewView),this.actpreView||(this.actpreView=new iN,this.actpreView.on("undisplay",this,this.cdClosePanel)),_t.clearTimeout(this.cdID),this.actpreView.parent||this.actpreView.openWindow(),this.actpreView.update()},i.cdClosePanel=function(){this.cdID=_t.setTimeout(this,this.cleanActPreRes,null,ya.coldTime)},i.cleanActPreRes=function(){this.actpreView&&(this.actpreView.destroy(),this.actpreView=null),se.destroy("modules/actPre")},i.onIconStateChange=function(t){ao.handlerIconSpcState(t[0],t[1]),this.iconList&&this.iconList.getIcon(t[0])&&(this.iconList.getIcon(t[0]).dataSource=t[0])},i.onOpenCharge=function(){this.iconList&&this.iconList.hideTip()},i.onEnterGame=function(){_t.setTimeout(this,this.initIcon,null,St.ENTER_DELAY)},i.onIconNotice=function(t){if(0==t.err_code){if(!ao.getIconVO(t.id))return;126==t.id&&_t.setTimeout(this,this.getCustomRankInfo,null,100),4030==t.id&&_t.setTimeout(this,this.getJINLIDFSInfo,null,100),5013==t.id&&(2==t.state?(console.log("广告功能开启"),pe.qqBannerOpen=!0):(console.log("广告功能关闭"),pe.qqBannerOpen=!1)),ao.updateIconState(t),this.updateIconList(),this.dispatch("ICON_NOTICE")}else ce.addTip(t.err_code)},i.getCustomRankInfo=function(){ao.getIconStateShow(126)&&(xr.ins().toGetRank(6001),xr.ins().toGetRank(6002),xr.ins().toGetRank(6003),Da.ins().toGainRankInfo(1),Da.ins().toGainRankInfo(2),Da.ins().toGainRankInfo(3))},i.getJINLIDFSInfo=function(){ao.getIconStateShow(4030)&&Fa.getInstance().toTaskInfo()},i.hideIconListV=function(){this.iconlistV&&(this.iconlistV.visible=!1)},i.hideIconList=function(){this.iconList&&(this.iconList.visible=!1)},i.showIconListV=function(){G.isReviewVersion||Bt.isZKPf9991Server()||Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isQiYuIos()||Bt.isShengTian()||this.iconlistV&&(this.iconlistV.visible=!0)},i.showIconList=function(){Bt.isWan11Pf9992Server()||Bt.isWan11Pf9993Server()||Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian()||this.iconList&&(this.iconList.visible=!0)},i.updateIconList=function(){this.iconList&&this.iconList.update(),this.morePanel&&this.morePanel.updatePanel()},i.refleshIconList=function(){this.iconList&&this.iconList.refresh(),this.morePanel&&this.morePanel.refresh()},i.initIcon=function(){0!=se.has("modules/icon")?(this.hasInitEff||(this.hasInitEff=!0,ao.initEff()),null==this.iconList&&(this.iconList=new nN,this.iconList.update(),lt.uiLayer.addChildAt(this.iconList,0)),(Bt.isWan11Pf9992Server()||Bt.isWan11Pf9993Server()||Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian())&&this.hideIconList(),null==this.iconlistV&&(this.iconlistV=new oN,this.iconlistV.visible=!1,lt.uiLayer.addChild(this.iconlistV)),(Bt.isZKPf9991Server()||Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isQiYuIos()||Bt.isShengTian())&&this.hideIconListV(),this.initComplete(),ao.checkIconTime(),S.window.isFbShow&&"eyouweiduan"==G.pf&&40<=pe.myLevel?modules.icon.IconModule.ins().addIcon(5004):"eyouios"==G.pf&&S.window.Eyouios&&0<S.window.Eyouios.isShowFb&&40<=pe.myLevel&&modules.icon.IconModule.ins().addIcon(5004)):se.add("modules/icon",null,this,this.initIcon)},i.initComplete=function(){if(this.waitIDs)for(;0<this.waitIDs.length;)this.checkAddIcon(this.waitIDs.shift());if(this.waitRPs)for(;0<this.waitRPs.length;){var t=this.waitRPs.shift();this.updateRP(t[0],t[1],t[2])}},i.addIcon=function(t){0==se.has("modules/icon")?(this.waitIDs=this.waitIDs||[],this.waitIDs.push(t),this.initIcon()):this.checkAddIcon(t)},i.checkAddIcon=function(t){var e=ao.getIconVO(t);if(e)switch(e.pos){case 1:this.iconList&&this.iconList.addIcon(t);break;case 2:this.iconlistV&&this.iconlistV.addItem(t)}},i.addchildViewV=function(t){this.iconlistV&&this.iconlistV.addChild(t)},i.removechildViewV=function(t){this.iconlistV&&this.iconlistV.removeChild(t)},i.removeVIcon=function(t){this.iconlistV&&this.iconlistV.removeItem(t)},i.getVIconY=function(t){return this.iconlistV?this.iconlistV.getItemY(t):0},i.onIconRPChange=function(t){t&&(0==se.has("modules/icon")?(this.waitRPs=this.waitRPs||[],this.waitRPs.push(t),this.initIcon()):this.updateRP(t[0],t[1],t[2]))},i.updateRP=function(t,e,i){if(ao.updateIconRedPoints(t,e,i),this.dispatch("ICON_REDPOINT_UPDATE",t),this.iconList&&this.iconlistV){var s=this.iconList.getIcon(t);if(s){if(s.redPoint=ao.checkIconRedPoint(t),ao.isInMoreIcon(t)){var n=ao.checkIconRedPoint(5016);this.iconList.moreItemRedPoint(n)}this.refleshIconList()}else(s=this.iconlistV.getIcon(t))&&(s.redPoint=ao.checkIconRedPoint(t))}},i.onShowLuckyDayTip=function(t){G.isReviewVersion||this.iconList&&this.iconList.showLuckyDayTip(t)},i.onHideLuckyDayTip=function(){this.iconList&&this.iconList.hideLuckyDayTip()},i.updateInvestFloatTipShow=function(){if(this.iconlistV&&this.iconlistV.isHasIcon(4012)){var t=this.iconlistV.getIcon(4012);if(!t)return;0==Ge.clickedToday?t.showFloatTip(999902,3):Ge.clickedToday&&t.hiedFloatTip()}},i.openTecentVideoGuidePanel=function(){oU.ins.popup()},i.onSysUpdate=function(){this.updateIconList(),this.iconlistV&&(this.iconlistV.visible=ya.getChargeOpen()&&!G.isReviewVersion)},i.getIconPosByIconId=function(t){var e=this.iconList.getIcon(t);if(e){var i=new Tt(e.x,e.y);return this.iconList?(this.iconList.localToGlobal(i,!1),i):null}return null},i.openMorePanel=function(){this.morePanel=this.morePanel||new aN,this.morePanel.openWindow()},i.updateMorePanel=function(){this.morePanel&&this.morePanel.updatePanel()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Jl=function(t){function e(){this.joystick=null,e.__super.call(this)}w(e,"modules.Joystick.JoystickCase",l);var i=e.prototype;return i.initListeners=function(){},i.createJoystick=function(){ua.isBattlefieldOfShuraMap()?(this.joystick=this.joystick||new lN,this.joystick.bottom=150,this.joystick.centerX=0,lt.uiLayer.addChild(this.joystick)):ua.isCross()&&(this.joystick=this.joystick||new lN,this.joystick.bottom=70,this.joystick.centerX=0,lt.crossUiLayer.addChild(this.joystick))},i.updateJoyStickMod=function(){if(this.joystick){if(ua.isBattlefieldOfShuraMap())switch(ds.joyMod){case 1:this.joystick.bottom=150,this.joystick.centerX=0,this.joystick.alpha=1;break;case 2:this.joystick.bottom=150,this.joystick.centerX=0,this.joystick.alpha=.5,this.joystick.bottom=NaN,this.joystick.centerX=NaN;break;case 3:this.joystick.bottom=120,this.joystick.centerX=-100,this.joystick.alpha=.5,this.joystick.bottom=NaN,this.joystick.centerX=NaN}else ua.isCrossTower()||ua.isCrossTowerBoss()?Xs.isCrossServerJoyStickFree()?(this.joystick.bottom=70,this.joystick.centerX=0,this.joystick.alpha=.5,this.joystick.bottom=NaN,this.joystick.centerX=NaN):(this.joystick.bottom=70,this.joystick.centerX=0,this.joystick.alpha=1):ua.isCrossMain()&&(Xs.isCrossServerJoyStickFree()?(this.joystick.bottom=250,this.joystick.centerX=0,this.joystick.alpha=.5,this.joystick.bottom=NaN,this.joystick.centerX=NaN):(this.joystick.bottom=250,this.joystick.centerX=0,this.joystick.alpha=1))}},i.isJoyStickModTwo=function(){return ua.isBattlefieldOfShuraMap()&&2==ds.joyMod},i.isJoyStickModThree=function(){return ua.isBattlefieldOfShuraMap()&&3==ds.joyMod},i.isCrossServerFreeMod=function(){return ua.isCross()&&Xs.isCrossServerJoyStickFree()},i.delectJoystick=function(){this.joystick&&this.joystick.parent&&(this.joystick.removeSelf(),this.joystick=null)},i.stopJoystick=function(){this.joystick&&this.joystick.parent&&this.joystick.initState()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),tr=function(t){function e(){this._panel=null,this._detail=null,this._isOneKeyAccept=!1,this.isGetInfo=!1,e.__super.call(this)}w(e,"modules.mail.MailModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_letter_light_toc",this,this.onLetterLight),this.addSocketListener("m_mail_info_toc",this,this.onMailInfo),this.addSocketListener("m_mail_send_toc",this,this.onSendMail),this.addSocketListener("m_mail_read_toc",this,this.onReadMail),this.addSocketListener("m_mail_accept_goods_toc",this,this.onAcceptGoods),this.addSocketListener("m_letter_read_onekey_toc",this,this.onReadAll),this.addSocketListener("m_mail_delete_toc",this,this.onOneKeyDelete),this.addMessageListener("MAIL_OPEN_PANEL",this,this.onOpenPanel),this.addMessageListener("MAIL_OPEN_DETAIL_PANEL",this,this.onOpenDetailPanel)},i.onLetterLight=function(t){Nt.show("RP_MAIL")},i.toMailInfo=function(){if(0==this.isGetInfo){this.isGetInfo;var t=new Object;t.className="m_mail_info_tos",t.mail_type=1,t.mail_box=2,this.sendSocketMessage(t)}},i.onMailInfo=function(t){0==t.err_code?(ho.setMails(t.letters),ho.checkRedPoint(),this._panel&&this._panel.isPopup()&&this._panel.update()):ce.addTip(t.err_code)},i.toReadAll=function(){var t=new Object;t.className="m_letter_read_onekey_tos",this.sendSocketMessage(t)},i.onReadAll=function(t){0==t.err_code?(Jt.addTip("已清除部分信件的未读状态"),ho.updateMailsByReadAll(),ho.mailsSort(),this._panel&&this._panel.isPopup()&&this._panel.update()):ce.addTip(t.err_code)},i.toOneKeyDelete=function(){var t=new Object;t.className="m_letter_delete_onekey_tos",t.mail_type=[0,1,2,3,4,5],t.delete_type=1,this.sendSocketMessage(t)},i.onOneKeyDelete=function(t){0==t.err_code?(ho.deleteMails(t.del_ids),ho.checkRedPoint(),ho.mailsSort(),this._panel&&this._panel.isPopup()&&this._panel.update()):ce.addTip(t.err_code)},i.onSendMail=function(t){0==t.err_code?(ho.updateSingleMail(t.letter),ho.mailsSort(),ho.checkRedPoint(),this._panel&&this._panel.isPopup()&&this._panel.update()):ce.addTip(t.err_code)},i.toReadMail=function(t){var e=new Object;e.className="m_mail_read_tos",e.mail_box=2,e.mail_type=1,e.mail_id=t,this.sendSocketMessage(e)},i.onReadMail=function(t){0==t.err_code?(ho.readMail(t.mail_id),ho.checkRedPoint(),ho.mailsSort(),this._detail&&this._detail.isPopup()&&this._detail.update(),this._panel&&this._panel.isPopup()&&this._panel.update()):ce.addTip(t.err_code)},i.toAcceptGoods=function(t,e){if(void 0===e&&(e=!1),this.isOneKeyAccept)Jt.addTip("请求已经发生，请稍候！");else{this.isOneKeyAccept=e;var i=new Object;i.className="m_mail_accept_goods_tos",i.ids=t,i.mail_type=1,i.auto_sale=ro.isAutoSellItem,this.sendSocketMessage(i)}},i.onAcceptGoods=function(t){if(0==t.err_code){this.isOneKeyAccept&&0<t.ids.length&&(ho.setUnReceivedAttachmentList(t.ids),this.isOneKeyAccept=!1);var e=ho.getAcceptGoods(t.ids);T.dispatch("GOODS_SHOW_VIEW",e,Jn.GOODS_SHOW_NOTICE_TYPE_MAIL),ho.acceptGoods(t.ids),ho.mailsSort(),this._panel&&this._panel.isPopup()&&this._panel.update(),this._detail&&this._detail.isPopup()&&this._detail.closeWindow(),ho.checkRedPoint()}else ce.addTip(t.err_code)},i.onOpenPanel=function(){0!=se.has("modules/mail")?(this._panel=this._panel||new uN,this._panel.openWindow(),0==this.isGetInfo&&this.toMailInfo(),this._panel.update()):se.add("modules/mail","正在加载信件模块",this,this.onOpenPanel)},i.onOpenDetailPanel=function(t){void 0===t&&(t=0),this._detail=this._detail||new rN,this._detail&&!this._detail.isPopup()&&this._detail.openWindow(),this._detail.dataSource=t,this._detail.update()},i.resetOneKeyAccept=function(){this._isOneKeyAccept=!1},I(0,i,"isOneKeyAccept",function(){return this._isOneKeyAccept},function(t){(this._isOneKeyAccept=t)&&_t.setTimeout(this,this.resetOneKeyAccept,null,1e3)}),e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),er=function(t){function e(){this.baseInfoView=null,this.baseInfoFanTiView=null,e.__super.call(this)}w(e,"modules.mainInfo.MainInfoModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("VIP_INFO_UPDATE",this,this.onVipUpdate),this.addMessageListener("MAININFO_CHANGE",this,this.showInfo),this.addMessageListener("ROLE_POWER_CHANGE",this,this.updatePower),this.addMessageListener("REGROWLV_UP",this,this.onRegrowLvUP),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.updateRound),this.addMessageListener("WINDOWS_INDEX_CHANGE",this,this.onWindowChange),this.addSocketListener("m_role_exp_change_toc",this,this.onExpChange),this.addSocketListener("m_role_levelup_toc",this,this.onLvUp),this.addSocketListener("m_role_money_change_toc",this,this.onMoneyChange)},i.onRegrowLvUP=function(){this.toDelay(),this.baseInfoView?this.baseInfoView.updateLVChange():this.baseInfoFanTiView&&this.baseInfoFanTiView.updateLVChange(),yt.isWX&&this.checkShowWXGameClubBtn()},i.onWindowChange=function(){this.checkShowWXGameClubBtn()},i.checkShowWXGameClubBtn=function(){},i.updatePower=function(){this.toDelay(),this.baseInfoView?this.baseInfoView.updatePower():this.baseInfoFanTiView&&this.baseInfoFanTiView.updatePower()},i.onEnterGame=function(){_t.setTimeout(this,this.toDelay,[0],St.ENTER_DELAY)},i.toDelay=function(){null==this.baseInfoView&&null==this.baseInfoFanTiView&&(Bt.isFanTi?(this.baseInfoFanTiView=new cN,this.baseInfoFanTiView.width=h.stage.width,this.baseInfoFanTiView.height=200,this.baseInfoFanTiView.update(),lt.uiLayer.addChild(this.baseInfoFanTiView)):(this.baseInfoView=new dN,this.baseInfoView.width=h.stage.width,this.baseInfoView.height=200,this.baseInfoView.update(),lt.uiLayer.addChild(this.baseInfoView)))},i.onVipUpdate=function(){this.toDelay(),this.baseInfoView?this.baseInfoView.updateByVip():this.baseInfoFanTiView&&this.baseInfoFanTiView.updateByVip()},i.showInfo=function(t){this.toDelay(),this.baseInfoView?this.baseInfoView.showInfo(t):this.baseInfoFanTiView&&this.baseInfoFanTiView.showInfo(t)},i.onExpChange=function(t){pe.user&&pe.user.attr&&(pe.user.attr.exp=t.new_exp),or.ins().updateExp()},i.onLvUp=function(t){pe.user&&pe.user.attr&&(pe.user.attr.level=t.level,pe.user.attr.exp=t.exp,pe.user.attr.next_level_exp=t.next_level_exp),this.toDelay(),this.baseInfoView?this.baseInfoView.updateLVChange():this.baseInfoFanTiView&&this.baseInfoFanTiView.updateLVChange(),or.ins().updateExp(),yt.isWX?Bt.sdk.setUserCloudStorage([{key:"level",value:t.level+""}]):Bt.reportLvUp(),this.dispatch("ROLE_LEVEL_UP"),Ht.playSound("sound/sound/levelup.mp3"),9==t.level&&Nt.reset(),yt.isWX&&this.checkShowWXGameClubBtn()},i.onMoneyChange=function(t){var e=pe.user;if(0<=t.new_gold){var i=e.attr.gold;t.new_gold-i!=0&&(e.attr.gold=t.new_gold)}0<=t.new_silver&&t.new_silver-e.attr.silver!=0&&(e.attr.silver=t.new_silver),this.dispatch("MONEY_CHANGE"),this.toDelay(),this.baseInfoView?this.baseInfoView.updateGoldChange():this.baseInfoFanTiView&&this.baseInfoFanTiView.updateGoldChange()},i.updateRound=function(){this.toDelay(),this.baseInfoView?this.baseInfoView.updateRoundTxt():this.baseInfoFanTiView&&this.baseInfoFanTiView.updateRoundTxt()},i.onEnterMap=function(){ua.isMainMap()||ua.isCustomMap()?this.showInfo(1):this.showInfo(2),yt.isWX&&this.checkShowWXGameClubBtn()},i.showMainInfoView=function(){this.baseInfoView&&this.baseInfoView.parent?this.baseInfoView.visible=!0:this.baseInfoFanTiView&&this.baseInfoFanTiView.parent&&(this.baseInfoFanTiView.visible=!0)},i.hideMainInfoView=function(){this.baseInfoView&&this.baseInfoView.parent?this.baseInfoView.visible=!1:this.baseInfoFanTiView&&this.baseInfoFanTiView.parent&&(this.baseInfoFanTiView.visible=!1)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),ir=function(t){function e(){this.wishListPanel=null,this.buyLanguageConfirmView=null,this.sendLanguageConfirmView=null,e.__super.call(this)}w(e,"modules.marry.flowerFaerie.FlowerFaerieModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_marry_flower_language_wish_info_toc",this,this.onLanguageWishInfo),this.addSocketListener("m_marry_flower_language_wish_toc",this,this.onLanguageWish),this.addSocketListener("m_marry_flower_language_buy_toc",this,this.onLanguageBuy),this.addSocketListener("m_marry_flower_fairy_info_toc",this,this.onPetalInfo),this.addSocketListener("m_marry_flower_fairy_upgrade_toc",this,this.onPetalUp),this.addSocketListener("m_marry_flower_language_toc",this,this.onLanguageInfo),this.addSocketListener("m_marry_couple_toc",this,this.onCoupleRoleId),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),this.addMessageListener("ENTER_GAME",this,this.enterGametoPetalInfo)},i.onExchangeBack=function(t){var e;if(16==t.module_id)for(var i in t.reward)25==(e=t.reward[i]).id&&Jt.addTip("出售重复信物获得"+e.val+"花券")},i.openWishListPanel=function(t){void 0===t&&(t=1),this.wishListPanel=this.wishListPanel||new PN,this.wishListPanel.type=t,this.wishListPanel.openWindow(),this.wishListPanel.update()},i.updateWishListPanel=function(){this.wishListPanel&&this.wishListPanel.update()},i.toLanguageWishInfo=function(t){var e=new Object;e.className="m_marry_flower_language_wish_info_tos",e.type=t,this.sendSocketMessage(e)},i.onLanguageWishInfo=function(t){0==t.err_code?(1==t.type?po.myWishLanguages=t.wish_item:2==t.type&&(po.taWishLanguages=t.wish_item),this.updateWishListPanel()):ce.addTip(t.err_code)},i.toLanguageWish=function(t,e){var i=new Object;i.className="m_marry_flower_language_wish_tos",i.op_type=t,i.item_id=e,this.sendSocketMessage(i)},i.onLanguageWish=function(t){0==t.err_code?(1==t.op_type?(po.pushMyWishLanguages(t.item_id),Jt.addTip("花语已成功加入心愿清单")):2==t.op_type&&(po.removeFromMyWishLanguages(t.item_id),Jt.addTip("花语已成功移出心愿清单")),this.updateWishListPanel()):ce.addTip(t.err_code)},i.toLanguageBuy=function(t,e){if(0==po.isPaying){var i=new Object;i.className="m_marry_flower_language_buy_tos",i.op_type=t,i.pay_id=e,this.sendSocketMessage(i),po.isPaying=!0}else Jt.addTip("正在处理购买请求，请稍后")},i.onLanguageBuy=function(t){if(po.isPaying=!1,0==t.err_code)if(Bt.isFanTi)Nl.ins().toExchange(t.pay_id);else{Nl.ins().toPay(t.pay_id);var e=Bn.getChargeBackVO(t.pay_id);pt.send(10035,5,"直购-"+e.name)}else ce.addTip(t.err_code)},i.openBuyLanguageConfirmView=function(t){this.buyLanguageConfirmView=this.buyLanguageConfirmView||new _N,this.buyLanguageConfirmView.openWindow(),this.buyLanguageConfirmView.update(t)},i.openSendLanguageConfirmView=function(t){this.sendLanguageConfirmView=this.sendLanguageConfirmView||new yN,this.sendLanguageConfirmView.openWindow(),this.sendLanguageConfirmView.update(t)},i.enterGametoPetalInfo=function(){pe.checkLevel(5,0)&&_t.setTimeout(this,this.toPetalInfo,null,St.ENTER_DELAY)},i.toPetalInfo=function(){var t=new Object;t.className="m_marry_flower_fairy_info_tos",this.sendSocketMessage(t)},i.onPetalInfo=function(t){0==t.err_code?(po.curPetalLv=t.level,po.curFaeriePoint=t.point,po.couplePetalLv=t.other_level,sr.ins().updateFlowerFaeriePanel(),po.checkFaerieCanLvUpRP()):ce.addTip(t.err_code)},i.toPetalUp=function(){var t=new Object;t.className="m_marry_flower_fairy_upgrade_tos",this.sendSocketMessage(t)},i.onPetalUp=function(t){0==t.err_code?(po.curPetalLv=t.level,po.curFaeriePoint=t.point,sr.ins().updateFlowerFaeriePanel(),po.checkFaerieCanLvUpRP()):ce.addTip(t.err_code)},i.toLanguageInfo=function(t){var e=new Object;e.className="m_marry_flower_language_tos",e.role_id=t,this.sendSocketMessage(e)},i.onLanguageInfo=function(t){0==t.err_code?(t.role_id==pe.roleID?(po.myFlowerLanguages=t.list,po.myFlowerLanguageLogs=t.give_record):fo.coupleInfoP&&t.role_id==fo.coupleInfoP.role_id&&(po.taFlowerLanguages=t.list,po.taFlowerLanguageLogs=t.give_record),sr.ins().updateFlowerFaeriePanel()):ce.addTip(t.err_code)},i.toCoupleRoleId=function(){if(null==fo.coupleInfoP){var t=new Object;t.className="m_marry_couple_tos",this.sendSocketMessage(t)}},i.onCoupleRoleId=function(t){0==t.err_code?(fo.coupleInfoP=t.couple,jn.sortFriendByMarryInfo(),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),sr=function(t){function e(){this.replyIconItem=null,this.friendListView=null,this.requestPanel=null,this.requestConfirmView=null,this.replyPanel=null,this.anniversaryRewardView=null,this.tokenPanel=null,this.flowerFaeriePanel=null,this.buyTokenConfirmView=null,this.sendTokenConfirmView=null,this.replyAgreeView=null,this.divorceRequestView=null,this.divorceReplyView=null,this.wishListPanel=null,this.extraDescView=null,e.__super.call(this)}w(e,"modules.marry.MarryModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_marry_info_toc",this,this.onInfo),this.addSocketListener("m_marry_couple_toc",this,this.onCoupleInfo),this.addSocketListener("m_marry_request_toc",this,this.onRequest),this.addSocketListener("m_marry_reply_toc",this,this.onReply),this.addSocketListener("m_marry_divorce_request_toc",this,this.onDivorceRequest),this.addSocketListener("m_marry_divorce_reply_toc",this,this.onDivorceReply),this.addSocketListener("m_marry_reward_toc",this,this.onReward),this.addSocketListener("m_marry_token_toc",this,this.onToken),this.addSocketListener("m_marry_token_wish_toc",this,this.onTokenWish),this.addSocketListener("m_marry_token_buy_toc",this,this.onTokenBuy),this.addSocketListener("m_marry_list_toc",this,this.onFriendList),this.addSocketListener("m_marry_token_wish_info_toc",this,this.onTokenWishInfo),this.addSocketListener("m_marry_request_out_date_toc",this,this.onRequestOutDate),this.addSocketListener("m_role_red_point_toc",this,this.onRoleRedPoint),this.addMessageListener("MARRY_UPDATE_REQUEST_PANEL",this,this.updateRequestPanel),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo),this.addMessageListener("MARRY_UPDATE_FRIEND_LIST_VIEW",this,this.updateFriendListView),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack)},i.onExchangeBack=function(t){var e;if(16==t.module_id)for(var i in t.reward)17==(e=t.reward[i]).id&&Jt.addTip("出售重复信物获得"+e.val+"礼券")},i.onRoleRedPoint=function(t){1==t.id&&Nt.show("RP_MARRY")},i.enterGameToInfo=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_marry_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(fo.marryState=t.state,fo.marryTs=t.marry_ts,fo.getRewards=t.get_reward,fo.requestName=t.request_name,3==t.state?(this.toCoupleInfo(),this.toToken(pe.roleID)):this.dispatch("FRIEND_UPDATE_PANEL"),fo.checkAnniversaryRewardRP()):ce.addTip(t.err_code)},i.toCoupleInfo=function(){var t=new Object;t.className="m_marry_couple_tos",this.sendSocketMessage(t)},i.onCoupleInfo=function(t){0==t.err_code?(fo.coupleInfoP=t.couple,jn.sortFriendByMarryInfo(),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toFriendList=function(){var t=new Object;t.className="m_marry_list_tos",this.sendSocketMessage(t)},i.onFriendList=function(t){fo.notMarryFriends=[];var e,i=pe.getPalByIndex(0);for(var s in t.role_ids){e=t.role_ids[s];var n=jn.getFriendByRoleId(e);n&&WS.main&&WS.main.pvo&&i&&i.ext.sex!=n.sex&&fo.notMarryFriends.push(e)}this.friendListView&&this.friendListView.update()},i.toRequest=function(t,e,i){var s=new Object;s.className="m_marry_request_tos",s.msg=i,s.target_role_id=t,s.use_item=e,this.sendSocketMessage(s)},i.onRequest=function(t){0==t.err_code?0==t.return_self?(fo.pushRequestVO(t.role_id,t.role_name,t.use_item,t.msg),this.showReplyIcon(1)):1==t.return_self&&(Jt.addTip("结缘请求发送成功，请耐心等候答复"),fo.marryState=2,this.closeRequestPanel(),this.closeFriendListView(),this.dispatch("FRIEND_UPDATE_PANEL")):ce.addTip(t.err_code)},i.onRequestOutDate=function(t){1==t.op_type?(fo.removeRequestVO(t.role_id),fo.checkIsHideReplyIcon()&&this.hideReplyIcon()):2==t.op_type&&this.hideReplyIcon()},i.showReplyIcon=function(t){this.replyIconItem=this.replyIconItem||new sN,this.replyIconItem.right=155,this.replyIconItem.bottom=515,1==t?(this.replyIconItem.name="marry",this.replyIconItem.img.skin="modules/marry/marryReply.png"):2==t&&(this.replyIconItem.name="divorce",this.replyIconItem.img.skin="modules/marry/divorceReply.png"),this.replyIconItem.on("click",this,this.onItemClick),lt.uiLayer.addChild(this.replyIconItem)},i.hideReplyIcon=function(){this.replyIconItem&&(this.replyIconItem.off("click",this,this.onItemClick),this.replyIconItem.removeSelf())},i.onItemClick=function(t){this.replyIconItem&&"marry"==this.replyIconItem.name?fo.checkIsHideReplyIcon()?this.hideReplyIcon():this.openReplyPanel():this.replyIconItem&&"divorce"==this.replyIconItem.name&&this.openDivorceReplyView()},i.toReply=function(t,e){var i=new Object;i.className="m_marry_reply_tos",i.target_role_id=t,i.type=e,this.sendSocketMessage(i)},i.onReply=function(t){if(0==t.err_code){if(0==t.return_self)1==t.type?(fo.clearRequestVOList(),Jt.addTip(t.role_name+"同意了你的结缘请求"),this.toInfo()):2==t.type&&(Jt.addTip(t.role_name+"拒绝了你的结缘请求"),fo.marryState=1,fo.requestName="",this.dispatch("FRIEND_UPDATE_PANEL"));else if(1==t.return_self){var e=fo.getReplyVO();1==t.type&&e?(this.openReplyAgreeView(e.roleName),fo.clearRequestVOList(),this.hideReplyIcon()):2==t.type&&e&&(Jt.addTip("你拒绝了【"+e.roleName+"】的结缘申请"),fo.removeRequestVO(e.roleId),fo.checkIsHideReplyIcon()&&this.hideReplyIcon())}}else{var i=fo.getReplyVO();i&&(fo.removeRequestVO(i.roleId),fo.checkIsHideReplyIcon()&&this.hideReplyIcon()),ce.addTip(t.err_code)}},i.toDivorceRequest=function(t){var e=new Object;e.className="m_marry_divorce_request_tos",e.type=t,this.sendSocketMessage(e)},i.onDivorceRequest=function(t){0==t.err_code?0==t.return_self?1==t.type?_t.setTimeout(this,this.showReplyIcon,[2],1e4):2==t.type&&(fo.marryState=1,fo.marryTs=0,fo.getRewards=null,fo.requestName="",fo.coupleInfoP=null):1==t.return_self&&(1==t.type?Jt.addTip("离异请求发送成功，请耐心等候答复"):2==t.type?(Jt.addTip("离异成功，请再觅良缘吧"),fo.marryState=1,fo.marryTs=0,fo.getRewards=null,fo.requestName="",fo.coupleInfoP=null):3==t.type&&(Jt.addTip("你已与仙侣结束结缘关系，请再觅良缘吧"),fo.marryState=1,fo.marryTs=0,fo.getRewards=null,fo.requestName="",fo.coupleInfoP=null)):ce.addTip(t.err_code)},i.toDivorceReply=function(t){var e=new Object;e.className="m_marry_divorce_reply_tos",e.type=t,this.sendSocketMessage(e)},i.onDivorceReply=function(t){0==t.err_code?0==t.return_self?1==t.type?(Jt.addTip("【"+fo.coupleInfoP.role_name+"】同意了你的离异申请"),fo.coupleInfoP=null,fo.marryState=1):2==t.type&&Jt.addTip("【"+fo.coupleInfoP.role_name+"】拒绝了你的离异申请"):1==t.return_self&&(1==t.type?(Jt.addTip("离异成功，请再觅良缘吧"),fo.coupleInfoP=null,fo.marryState=1):2==t.type?Jt.addTip("你拒绝了【"+fo.coupleInfoP.role_name+"】的离异申请"):3==t.type&&(Jt.addTip("你已与仙侣结束结缘关系，请再觅良缘吧"),fo.coupleInfoP=null,fo.marryState=1),this.hideReplyIcon()):ce.addTip(t.err_code)},i.toReward=function(t){var e=new Object;e.className="m_marry_reward_tos",e.type=t,this.sendSocketMessage(e)},i.onReward=function(t){if(0==t.err_code){var e="";1==t.type?e="月纪念日奖励领取成功":2==t.type&&(e="周年纪念日奖励领取成功"),Jt.addTip(e),fo.getRewards=fo.getRewards||[],fo.getRewards.push(t.type),this.anniversaryRewardView&&this.anniversaryRewardView.update(),fo.checkAnniversaryRewardRP()}else ce.addTip(t.err_code)},i.toToken=function(t){var e=new Object;e.className="m_marry_token_tos",e.role_id=t,this.sendSocketMessage(e)},i.onToken=function(t){0==t.err_code?(t.role_id==pe.roleID?(fo.myTokens=t.tokens,fo.myTokenLogs=t.give_record):fo.coupleInfoP&&t.role_id==fo.coupleInfoP.role_id?(fo.taTokens=t.tokens,fo.taTokenLogs=t.give_record):jo.curClickRankData&&t.role_id==jo.curClickRankData.role_id?(fo.myTokens=t.tokens,fo.myTokenLogs=t.give_record):jo.curClickRankData&&t.role_id==jo.curClickRankData.ext_role_id&&(fo.taTokens=t.tokens,fo.taTokenLogs=t.give_record),this.updateTokenPanel()):ce.addTip(t.err_code)},i.toTokenWish=function(t,e){var i=new Object;i.className="m_marry_token_wish_tos",i.op_type=t,i.item_id=e,this.sendSocketMessage(i)},i.onTokenWish=function(t){0==t.err_code?(1==t.op_type?(fo.pushMyWishTokens(t.item_id),Jt.addTip("信物已成功加入心愿清单")):2==t.op_type&&(fo.removeFromMyWishTokens(t.item_id),Jt.addTip("信物已成功移出心愿清单")),this.updateWishListPanel()):ce.addTip(t.err_code)},i.toTokenBuy=function(t,e){if(0==fo.isPaying){var i=new Object;i.className="m_marry_token_buy_tos",i.op_type=t,i.pay_id=e,this.sendSocketMessage(i),fo.isPaying=!0}else Jt.addTip("正在处理购买请求，请稍后")},i.onTokenBuy=function(t){fo.isPaying=!1,0==t.err_code?Bt.isFanTi?Nl.ins().toExchange(t.pay_id):Nl.ins().toPay(t.pay_id):ce.addTip(t.err_code)},i.toTokenWishInfo=function(t){var e=new Object;e.className="m_marry_token_wish_info_tos",e.type=t,this.sendSocketMessage(e)},i.onTokenWishInfo=function(t){0==t.err_code?(1==t.type?fo.myWishTokens=t.wish_item:2==t.type&&(fo.taWishTokens=t.wish_item),this.updateWishListPanel()):ce.addTip(t.err_code)},i.openFriendListView=function(){this.friendListView=this.friendListView||new BN,this.friendListView.openWindow()},i.updateFriendListView=function(){this.friendListView&&this.friendListView.update()},i.closeFriendListView=function(){this.friendListView&&this.friendListView.closeWindow()},i.openRequestPanel=function(){this.requestPanel=this.requestPanel||new HN,this.requestPanel.openWindow(),this.requestPanel.update()},i.updateRequestPanel=function(){this.requestPanel&&this.requestPanel.update()},i.closeRequestPanel=function(){this.requestPanel&&this.requestPanel.closeWindow()},i.openRequestConfirmView=function(){this.requestConfirmView=this.requestConfirmView||new kN,this.requestConfirmView.openWindow(),this.requestConfirmView.update()},i.openReplyPanel=function(){0!=se.has("modules/marry")?(this.replyPanel=this.replyPanel||new GN,this.replyPanel.openWindow(),this.replyPanel.update()):se.add("modules/marry","正在加载结缘资源",this,this.openReplyPanel)},i.openAnniversaryRewardView=function(){this.anniversaryRewardView=this.anniversaryRewardView||new TN,this.anniversaryRewardView.openWindow(),this.anniversaryRewardView.update()},i.openTokenPanel=function(t){void 0===t&&(t=0),this.tokenPanel=this.tokenPanel||new qN,this.tokenPanel.openWindow(),this.tokenPanel.tab.selectedIndex=t,this.tokenPanel.update()},i.updateTokenPanel=function(){this.tokenPanel&&this.tokenPanel.update()},i.openFlowerFaeriePanel=function(t){void 0===t&&(t=0),this.flowerFaeriePanel=this.flowerFaeriePanel||new mN,this.flowerFaeriePanel.openWindow(),this.flowerFaeriePanel.tab.selectedIndex=t,this.flowerFaeriePanel.update()},i.updateFlowerFaeriePanel=function(){this.flowerFaeriePanel&&this.flowerFaeriePanel.isPopup()&&this.flowerFaeriePanel.update()},i.openBuyTokenConfirmView=function(t){this.buyTokenConfirmView=this.buyTokenConfirmView||new CN,this.buyTokenConfirmView.openWindow(),this.buyTokenConfirmView.update(t)},i.openSendTokenConfirmView=function(t){this.sendTokenConfirmView=this.sendTokenConfirmView||new AN,this.sendTokenConfirmView.openWindow(),this.sendTokenConfirmView.update(t)},i.openReplyAgreeView=function(t){this.replyAgreeView=this.replyAgreeView||new UN,this.replyAgreeView.openWindow(),this.replyAgreeView.update(t)},i.openDivorceRequestView=function(){0!=se.has("modules/marry")?(this.divorceRequestView=this.divorceRequestView||new DN,this.divorceRequestView.openWindow()):se.add("modules/marry","正在加载结缘资源",this,this.openDivorceRequestView)},i.openDivorceReplyView=function(){0!=se.has("modules/marry")?(this.divorceReplyView=this.divorceReplyView||new RN,this.divorceReplyView.openWindow(),this.divorceReplyView.update()):se.add("modules/marry","正在加载结缘资源",this,this.openDivorceReplyView)},i.openWishListPanel=function(t){void 0===t&&(t=1),this.wishListPanel=this.wishListPanel||new zN,this.wishListPanel.type=t,this.wishListPanel.openWindow(),this.wishListPanel.update()},i.updateWishListPanel=function(){this.wishListPanel&&this.wishListPanel.update()},i.openExtraDescView=function(t){this.extraDescView=this.extraDescView||new VN,this.extraDescView.openWindow(),this.extraDescView.update(t)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),nr=function(t){function e(){this.missionView=null,this.levelTipView=null,this.funcPreview=null,this.preKey=0,this.missOk=!1,this.vipOk=!1,this.barrOk=!1,this.functionOK=!1,this.icon=null,this.initLis=!1,this.bcEffects=null,e.__super.call(this)}w(e,"modules.mission.MissionModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_mission_info_toc",this,this.onInfo),this.addSocketListener("m_role_mission_update_toc",this,this.onUpdate),this.addSocketListener("m_role_mission_get_reward_toc",this,this.onGetReward),this.addMessageListener("ROLE_ADVANCE_OPEN",this,this.updateFunPreview),this.addMessageListener("MISSIONVIEW_SHOW",this,this.showMissionView),this.addMessageListener("MISSIONVIEW_HIDE",this,this.hideMissionView),this.addMessageListener("ENTER_GAME",this,this.initMissionView),this.addMessageListener("ENTER_MAP",this,this.enterMap),this.addMessageListener("OPEN_FUNCTION_PREVIEW",this,this.showFunctionPreview),this.addMessageListener("MISSION_FINISHED",this,this.resetPreIconPos),this.addMessageListener("GUIDE_STEP",this,this.onGuideStep),this.addMessageListener("SHOW_ITEM_TIPS",this,this.onShowItemTips),this.addMessageListener("BANNER_VIDEO_FINISH",this,this.toFininBanner)},i.onGuideStep=function(t){t!=LD.MISSION_CUSTOM&&t!=LD.MISSION_INTENSIFY&&t!=LD.MISSION_INTENSIFY_AWARD&&t!=LD.MISSION_SKILL&&t!=LD.MISSION_SKILL_AWARD&&t!=LD.MISSION_WEAR_AWARD&&t!=LD.CONTINUE_MISSION||null!=this.missionView&&0==re.hasView()&&LD.showStep(t,this.missionView)},i.resetPreIconPos=function(){var t=this.missionView&&this.missionView.parent?540:440;this.icon&&this.icon.bottom!=t&&ie.to(this.icon,{bottom:t},500,A.quadOut,null,0,!0)},i.openLevelTipPanel=function(){this.levelTipView=this.levelTipView||new JN,this.levelTipView.openWindow(),this.levelTipView.update()},i.showFunctionPreview=function(t){_t.clearTimeout(this.preKey),null==this.funcPreview&&(this.funcPreview=new ZN,this.funcPreview.on("undisplay",this,this.onFuncPreUndisplay)),this.funcPreview.openWindow(),this.funcPreview.parent&&(this.funcPreview.data=t)},i.onFuncPreUndisplay=function(){this.preKey=_t.setTimeout(this,this.clearFuncPreResource,null,ya.coldTime)},i.clearFuncPreResource=function(){this.funcPreview&&(this.funcPreview.destroy(),this.funcPreview=null);var t=ut.loadedMap,e=[];for(var i in t)0<=i.indexOf("modules/funcPreview")&&("modules/funcPreview/icon.png"==i||0<=i.indexOf("/"+this.icon.data.ord+"/icon")||e.push(i));for(var s=0;s<e.length;s++)ut.clearRes(e[s],!0)},i.enterMap=function(){ua.isMainMap()&&this.showMissionView()},i.initMissionView=function(){_t.setTimeout(this,this.toInfo,null,1e3)},i.showMissionView=function(){!this.missionView||G.isReviewVersion&&"shouQxcxIos"!=G.pf&&"shouQxcxand"!=G.pf||(this.missionView.visible=!0,this.updateMissionView()),this.icon&&(this.icon.visible=!0)},i.hideMissionView=function(){this.missionView&&this.missionView.parent&&(this.missionView.visible=!1),this.icon&&this.icon.parent&&(this.icon.visible=!1),this.missionView&&LD.ins.parent==this.missionView.parent&&LD.hide()},i.updateMissionView=function(){this.missionView&&this.missionView.updateByEffect()},i.toInfo=function(){var t=new Object;t.className="m_role_mission_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(0<t.mission.mission_id&&(!G.isReviewVersion||"shouQxcxIos"==G.pf||"shouQxcxand"==G.pf)?(this.missionView=this.missionView||new tV,this.missionView&&!this.missionView.parent&&lt.uiLayer.addChild(this.missionView),go.curMission=t.mission,this.missionView&&this.missionView.displayedInStage&&this.missionView.update()):0==t.mission.mission_id&&this.missionView&&this.missionView.parent&&this.missionView.removeSelf(),this.missOk=!0,this.updateFunPreview()):ce.addTip(t.err_code)},i.check=function(){if(!Bt.isZKPf9991Server()&&!Bt.isQiYuIos()){var t=go.getNextFuncPreview();if(!t||G.isReviewVersion&&"shouQxcxIos"!=G.pf&&"shouQxcxand"!=G.pf){if(this.icon&&this.icon.parent){this.icon.removeSelf();var e=ut.loadedMap,i=[];for(var s in e)0<=s.indexOf("modules/funcPreview")&&i.push(s);for(var n=0;n<i.length;n++)ut.clearRes(i[n],!0)}}else this.icon=this.icon||new eV,this.initPreListen(),this.icon.parent||lt.uiLayer.addChildAt(this.icon,0),this.resetPreIconPos(),this.icon.data=t,this.checkPreRP()}},i.updateFunPreview=function(){this.missOk&&this.vipOk&&this.barrOk&&this.functionOK&&this.check()},i.initPreListen=function(){0==this.initLis&&(this.addMessageListener("VIP_LEVEL_CHANGE",this,this.checkPreRP),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkPreRP),this.addMessageListener("REGROWLV_UP",this,this.checkPreRP),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.checkPreRP),Nt.register("RP_PREICON",this.icon,new Tt(52,0)),this.initLis=!0)},i.checkPreRP=function(){if(this.icon&&this.icon.data){var t,e=this.icon.data.cons,i=!1;for(var s in e){var n;for(var o in i=!0,t=e[s]){switch((n=t[o]).id){case 1:i=i&&pe.myEquipLevel>=n.val;break;case 2:i=i&&Ds.curBarrier>=n.val;break;case 3:i=i&&Ia.curLv>=n.val}if(!i)break}if(i)return void Nt.show("RP_PREICON")}}Nt.hide("RP_PREICON")},i.onUpdate=function(t){0<t.mission.mission_id?(go.curMission=t.mission,this.missionView&&this.missionView.updateByEffect()):0==t.mission.mission_id&&this.missionView&&this.missionView.parent&&this.missionView.removeSelf()},i.showFinishEffect=function(){var t=go.getMissionVOById(go.curMission.mission_id);if(t){this.bcEffects=this.bcEffects||[];for(var e,i=t.effectType.split(","),s=0,n="",o=or.ins().getBagPos(),a=this.missionView.x+150,l=this.missionView.y-20,r=0;r<i.length;r++)this.bcEffects[r]=this.bcEffects[r]||b.getOne(),s=i[r],e=this.bcEffects[r],1==s?(e.scaleX=1,e.scaleY=1,n="unit/drop/datongqian_0"):3==s&&(e.scaleX=2,e.scaleY=2,n="unit/drop/everything_0"),lt.uiLayer.addChild(e),e.pos(a,l),e.loadAndPlay(n,"default",0,!0),ie.to(e,{x:o.x,y:o.y,scaleX:.5,scaleY:.5},1e3,A.strongIn,Q.create(this,this.tweenEffectComplete,[e]))}},i.tweenEffectComplete=function(t){t.removeSelf(),t.scaleX=1,t.scaleY=1},i.toGetReward=function(){var t=new Object;t.className="m_role_mission_get_reward_tos",this.sendSocketMessage(t)},i.onGetReward=function(t){0==t.err_code?(this.showFinishEffect(),Ht.playSound("sound/sound/missionComplete.mp3")):ce.addTip(t.err_code)},i.onShowItemTips=function(){var t=new Object;t.className="p_goods",t.typeid=10904007,t.current_num=1,Ae.show(t,"GOODS_TIP")},i.toFininBanner=function(t){8==t&&this.missionView&&this.missionView.openBannerFinish()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),or=function(t){function e(){this._navBar=null,this.funBar=null,this.leftNavBar=null,this.initFunBar=!0,this.delayFun=!1,e.__super.call(this)}w(e,"modules.navigation.NavModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_fashion_goal_info_toc",this,this.onFashionGoalInfo),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("GUIDE_OPEN_ROLE",this,this.onGuide),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagChange),this.addMessageListener("ENTER_MAP",this,this.enterMap),this.addMessageListener("ROLE_LEVEL_UP",this,this.resetFunctionBar),this.addMessageListener("REGROWLV_UP",this,this.resetFunctionBar),this.addMessageListener("CROSS_SERVER_ENTER_PANEL_INFO",this,this.resetFunctionBar),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.resetFunctionBar),this.addMessageListener("UPDATE_PAL_DATA",this,this.resetFunctionBar),this.addMessageListener("SHOW_FUNBAR",this,this.callDelay),this.addMessageListener("FASHION_TAR_PRO",this,this.updateFashionTarPro),this.addMessageListener("HIDE_NAVBAR",this,this.onHideNav),this.addMessageListener("SHOW_NAVBAR",this,this.onShowNav),this.addMessageListener("ON_CLOSE_WINDOW",this,this.onCloseWindow)},i.onCloseWindow=function(t){(t instanceof modules.role.view.RolePanel||t instanceof modules.skill.view.SkillPanel||t instanceof modules.refine.view.RefinePanel||t instanceof modules.pack.packView.PackView||t instanceof modules.pet.view.PetPanel)&&modules.navigation.NavModule.ins().resetNavSelectedIcon()},i.onHideNav=function(){this.navbarVisible=!1},i.onShowNav=function(){ua.isBattlefieldOfShuraMap()?this.onHideNav():this.navbarVisible=!0},i.updateFashionTarPro=function(t){this.leftNavBar=this.leftNavBar||new sV,this.leftNavBar.setFashionTarPro(t[0],t[1])},i.callDelay=function(){this.delayFun&&(Q.create(this,this.check,null,!0).run(),this.delayFun=!1)},i.resetFunctionBar=function(){this.funBar&&!this.funBar.finish&&(1==this.funBar.visible?this.check():this.delayFun=!0)},i.check=function(){this.funBar.resetIconPos(this.initFunBar),this.initFunBar=!1},i.enterMap=function(){ua.isMainMap()&&(this.funbarVisible=!0)},i.onGuide=function(){this._navBar.showGuide()},i.onBagChange=function(){0<xo.getGoodsNumByTypeID(10201105)&&this._navBar.guideSoul()},i.onEnterGame=function(){this.toDelay()},i.toDelay=function(){var t=un.getGuideVoById(10);t&&pe.checkLevel(t.regrow,t.level)&&Rl.ins().toInfo(),this._navBar=this._navBar||new nV,this._navBar.update(),lt.navLayer.addChild(this._navBar),this.funBar=this.funBar||Aa.getIns(34e3,"FunctionBar"),lt.uiLayer.addChild(this.funBar),this.leftNavBar=this.leftNavBar||new sV,lt.uiLayer.addChild(this.leftNavBar)},i.updateExp=function(){this._navBar&&this._navBar.update()},i.getBagPos=function(){return this._navBar.getBagPos()},i.resetNavSelectedIcon=function(){this._navBar&&this._navBar.resetIconSelected()},i.toFashionGoalInfo=function(){var t=new Object;t.className="m_fashion_goal_info_tos",this.sendSocketMessage(t)},i.onFashionGoalInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(vo.handlerFashionGoalInfo(t),this.leftNavBar&&this.leftNavBar.updateFashionView())},I(0,i,"funbarVisible",function(){return this.funBar&&this.funBar.visible},function(t){(Bt.isWan11Pf9992Server()||Bt.isWan11Pf9993Server()||Bt.isZKPf9991Server()||Bt.isQiYuIos())&&(t=!1),this.funBar&&this.funBar.visible!=t&&(this.funBar.visible=t)&&T.dispatch("SHOW_FUNBAR")}),I(0,i,"navbarVisible",null,function(t){this._navBar&&((ua.isBattlefieldOfShuraMap()||ua.isCrossTower()||ua.isCrossTowerBoss())&&(t=!1),this._navBar.visible=t)}),I(0,i,"leftNavBarVisible",null,function(t){this.leftNavBar&&(this.leftNavBar.visible=t)}),e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),ar=function(t){function e(){this.noblePanel=null,e.__super.call(this)}w(e,"modules.noble.NobleModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_noble_info_toc",this,this.onInfo),this.addSocketListener("m_role_noble_fetch_today_gift_toc",this,this.onFetchToday),this.addMessageListener("OPEN_NOBLE_PANEL",this,this.openPanel),this.addMessageListener("CROSS_DAY",this,this.onCrossDay),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkIconByLv),this.addMessageListener("CHARGE_PAY_BACK",this,this.onPayBack),this.addMessageListener("ENTER_GAME",this,this.checkIconByLv)},i.checkIconByLv=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){var t=ao.getIconVO(104);t&&pe.myLevel>=t.openLv&&Zl.ins().addIcon(104)},i.onCrossDay=function(){Io.canGift=!0,this.updatePanel()},i.toFetchToday=function(){var t=new Object;t.className="m_role_noble_fetch_today_gift_tos",this.sendSocketMessage(t)},i.onFetchToday=function(t){if(0==t.err_code){var e;for(var i in Io.canGift=!1,Io.tips)e=Io.tips[i],Jt.addTip(e);this.updatePanel()}else ce.addTip(t.err_code)},i.onInfo=function(t){0==t.err_code?(Io.canGift=t.can_today_gift,Io.endTime=t.end_time,this.updatePanel(),T.dispatch("NOBLE_INFO_UPDATE"),T.dispatch("TO_GET_PAY_INFO")):ce.addTip(t.err_code)},i.onPayBack=function(t){_a.getSpcBuyVO()&&_a.getSpcBuyVO().noble==t&&this.noblePanel&&this.noblePanel.isPopup()&&this.noblePanel.showSuss()},i.openPanel=function(){0!=se.has("modules/noble")?(this.noblePanel=this.noblePanel||new oV,this.noblePanel.openWindow()):se.add("modules/noble","正在加载修仙贵族模块",this,this.openPanel)},i.updatePanel=function(){this.noblePanel&&this.noblePanel.parent&&this.noblePanel.update(),this.checkRP()},i.checkRP=function(){Io.endTime>ya.serverTime&&Io.canGift?(Nt.show("RP_ICON_NOBLE"),this.dispatch("ICON_REDPOINT_CHANGE",[104,"RP_ICON_NOBLE",!0])):(Nt.hide("RP_ICON_NOBLE"),this.dispatch("ICON_REDPOINT_CHANGE",[104,"RP_ICON_NOBLE",!1]))},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),lr=function(t){function e(){this.panel=null,e.__super.call(this)}w(e,"modules.offLineReward.OffLineRewardModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_offline_reward_toc",this,this.onReward)},i.onReward=function(t){1!=GF.isExist&&(this.openPanel(),this.updatePanel(t.offline_ts,t.base_reward,t.gold_equip_reward,t.month_card_reward,t.get_equip_num,t.sell_equip_num))},i.openPanel=function(){this.panel=this.panel||new aV,this.panel.openWindow()},i.updatePanel=function(t,e,i,s,n,o){this.panel&&this.panel.isPopup()&&this.panel.update(t,e,i,s,n,o)},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),rr=function(t){function e(){this.otherPanel=null,e.__super.call(this)}w(e,"modules.otherPet.OtherPetModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_observe_pets_toc",this,this.onObservePet),this.addMessageListener("OPEN_OTHER_PET_PANEL",this,this.openPanel)},i.toObservePet=function(t){var e=new Object;e.className="m_role_observe_pets_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onObservePet=function(t){0==t.err_code?(wo.curPData=t,this.openPanel()):ce.addTip(t.err_code)},i.openPanel=function(){se.has("modules/pet")?(this.otherPanel=this.otherPanel||new cV,this.otherPanel.update(),this.otherPanel.openWindow(null,!0)):se.add("modules/pet","正在加载仙宠模块",this,this.openPanel)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),hr=function(t){function e(){this.comparePanel=null,this.rolePanel=null,e.__super.call(this)}w(e,"modules.otherRole.OtherRoleModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_observe_role_toc",this,this.onRole),this.addMessageListener("OPEN_OTHER_ROLE_PANLE",this,this.openOtherRolePanel),this.addMessageListener("OPEN_COMPARE_PANLE",this,this.openComparePanel),this.addMessageListener("TO_ROLE_INFO",this,this.toRole)},i.openOtherRolePanel=function(t){this.openRolePanel(t),bo.isNeedRequest(t)?this.toRole(t):this.updateRolePanel()},i.openComparePanel=function(t){pe.myLevel<60?Jt.addTip("开启等级为：60级"):(this.comparePanel=this.comparePanel||new fV,this.comparePanel.openWindow(),bo.isNeedRequest(t)?this.toRole(t):this.comparePanel.update(t))},i.toRole=function(t){var e=new Object;e.className="m_role_observe_role_tos",e.target_role_id=t,this.sendSocketMessage(e)},i.onRole=function(t){0==t.err_code?(bo.setRoleData(t),null!=this.rolePanel&&this.rolePanel.displayedInStage&&this.updateRolePanel(),null!=this.comparePanel&&this.comparePanel.displayedInStage&&this.comparePanel.update(t.target_role_id),this.dispatch("ON_OTHERROLE_INFO",t.target_role_id)):ce.addTip(t.err_code)},i.checkOpen=function(t){bo.isNeedRequest(t)?this.toRole(t):this.openRolePanel(t)},i.openRolePanel=function(t){se.has("modules/role")?se.has("modules/skill")?(bo.curRoleID=t,this.rolePanel=this.rolePanel||new bV,this.rolePanel.showViewByIndex(0),this.rolePanel.openWindow(null,!0),this.updateRolePanel()):se.add("modules/skill",null,this,this.openRolePanel,[t]):se.add("modules/role",null,this,this.openRolePanel,[t])},i.updateRolePanel=function(){this.rolePanel&&(this.rolePanel.updateHeadPart(),this.rolePanel.update())},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),ur=function(t){function l(){l.__super.call(this)}return w(l,"modules.pack.ItemLocator",n),l.getItemType=function(t){for(;10<(t/=10););return t=Math.floor(t)},l.isEquip=function(t){for(;10<(t/=10););return 3==(t=Math.floor(t))},l.getItem=function(t){for(var e=t;10<(e/=10););switch(e=Math.floor(e)){case 3:if(l.initEquip(),l.equipsDic.hasOwnProperty(t))return l.equipsDic[t];var i=l.getEquipVO(t);return l.equipsDic[t]=i;case 1:return l.getGeneral(t)}return null},l.initEquip=function(){l.equipsDic||(l.equipsDic=Ra.startEncode("equips.xml","id"))},l.initDic=function(){var t,e,i=Ra.startEncode("general.xml","id");if(l.goodsDic=new Object,Bt.isFanTi)for(var s in i){-1<(t=i[s]).platform.split("|").indexOf("ft")&&(10904007==t.id&&(t.name=t.title=Bt.isFanTi?"戀戀仙蹤真好玩":"恋恋仙踪真好玩",t.desc=Bt.isFanTi?"稱號戰力：<font color='#fff21a'>4096</font><br>生命：<font color='#f4f1b2'>3840</font><br>攻擊：<font color='#f4f1b2'>480</font><br>物防：<font color='#f4f1b2'>320</font><br>法防：<font color='#f4f1b2'>320</font><br>使用後可激活稱號【戀戀仙蹤真好玩】，激活後永久有效<br>":"称号战力：<font color='#fff21a'>4096</font><br>生命：<font color='#f4f1b2'>3840</font><br>攻击：<font color='#f4f1b2'>480</font><br>物防：<font color='#f4f1b2'>320</font><br>法防：<font color='#f4f1b2'>320</font><br>使用后可激活称号【恋恋仙踪真好玩】，激活后永久有效<br>"),l.goodsDic[t.id]=t)}else for(var n in i){-1<(e=i[n]).platform.split("|").indexOf("tx")&&(l.goodsDic[e.id]=e)}},l.getGeneral=function(t){return l.goodsDic||l.initDic(),l.goodsDic.hasOwnProperty(t)?l.goodsDic[t]:null},l.getGoodsPathByGoodsId=function(t){var e;for(var i in l.goodsDic||l.initDic(),l.goodsDic)if((e=l.goodsDic[i]).id==t)return Number(e.path);return-1},l.searchItemsByName=function(t){var e,i,s=[];for(var n in l.goodsDic||l.initDic(),l.goodsDic)-1!=(e=l.goodsDic[n]).name.indexOf(t)&&s.push(e);for(var o in l.equipsDic||(l.equipsDic=Ra.startEncode("equips.xml","id")),0==l.initDebugEquipXML&&(l.initDebugEquip(),l.initDebugEquipXML=!0),l.equipsDic)(i=l.equipsDic[o])&&-1!=i.name.indexOf(t)&&s.push(i);return s},l.getFashionGoodsByImg=function(t){var e;for(var i in l.goodsDic||l.initDic(),l.goodsDic)if(19==(e=l.goodsDic[i]).useType&&e.img==String(t))return e;return null},l.getFahionGoodsByGoodsId=function(t){var e;for(var i in l.goodsDic||l.initDic(),l.goodsDic)if((e=l.goodsDic[i]).id==t&&19==e.useType)return Number(e.img);return-1},l.getPetIdByImg=function(t){var e;for(var i in l.goodsDic||l.initDic(),l.goodsDic)if((e=l.goodsDic[i]).id==t)return parseInt(e.img);return null},l.getEquipTypeName=function(t){return l.isLegendEquip(t)?q.LEGEND_EQUIP[t%10]:l.isNormalEquip(t)?q.TYPE2NAMEMAP[t]:l.isWingEquip(t)?_F.NAMEARR[t%100]:l.isDominateEquip(t)?q.DOMINATE_EQUIP[t%10]:"无名装备"},l.getEquipClassName=function(t){return l.isLegendEquip(t)?"类 型：":l.isNormalEquip(t)?"部 位：":l.isWingEquip(t)?"部 位：":(l.isDominateEquip(t),"类 型：")},l.isLegendEquip=function(t){return 0<=q.LEGEND_EQUIP_TYPE.indexOf(t)},l.isNormalEquip=function(t){return 0<=q.ROLEEQUIPTYPEMAP.indexOf(t)},l.isWingEquip=function(t){return 0<=q.WINGSPUT2TYPEMAP.indexOf(t)},l.isDominateEquip=function(t){return 0<=q.DOMINATE_EQUIP_TYPE.indexOf(t)},l.initDebugEquip=function(){for(var t=NaN,e=1;e<5;e++)for(var i=1;i<7;i++)for(var s=1;s<6;s++)for(var n=0;n<41;n++)t=3e7+1e4*e+1e3*i+100*s+n,l.equipsDic.hasOwnProperty(t)||(l.equipsDic[t]=l.getNormalEquip(t));for(e=1;e<5;e++)for(i=1;i<6;i++)t=30001600+1e4*e+i,l.equipsDic.hasOwnProperty(t)||(l.equipsDic[t]=l.getLegendEquipVO(t));for(e=2;e<5;e++)for(i=1;i<6;i++)t=30060600+1e3*e+i,l.equipsDic.hasOwnProperty(t)||(l.equipsDic[t]=l.getLegendEquipVO(t));for(e=1;e<481;e++)t=30004e3+e,l.equipsDic.hasOwnProperty(t)||(l.equipsDic[t]=l.getWingEquipVO(t))},l.getRewardByTkv=function(t){var e;switch(t.type){case 1:e=modules.pack.ItemLocator.getItem(10201147);break;case 2:e=modules.pack.ItemLocator.getItem(10201113);break;case 3:e=modules.pack.ItemLocator.getItem(10201116);break;case 4:e=modules.pack.ItemLocator.getItem(Ft.getScoreTypeId(t.id));break;case 5:return l.getItem(t.id)}return e},l.getEquipVO=function(t){switch(Math.floor(t%1e5/1e4)){case 0:return l.getWingEquipVO(t);case 1:case 2:case 3:case 4:case 5:case 6:return Math.floor(t%1e3/100)<6?l.getNormalEquip(t):l.getLegendEquipVO(t);case 7:return null}return null},l.getWingEquipVO=function(t){var e=new th,i=(e.id=t)%1e3;e.type=Math.ceil(i/120)+100;var s=i%120;switch(s=0==s?120:s,e.color=Math.ceil(s/20),e.level=s%20,e.level=0==e.level?20:e.level,e.type){case 101:e.title=e.name=e.level+"阶翠羽";break;case 102:e.title=e.name=e.level+"阶翼珠";break;case 103:e.title=e.name=e.level+"阶翼石";break;case 104:e.title=e.name=e.level+"阶尾翼"}e.category=0,e.path=l.pathArr4[e.type%100],e.price="1,"+200*(Math.floor(e.level/10)+1)*e.color;var n=(1e3+e.level+"").substr(-3),o=R["t"+e.type+n];e.attr="";for(var a=0;a<o.length;a+=2)a==o.length-2?e.attr+=o[a]+","+Math.floor(o[a+1]*l.colorRite2[e.color]/10+.5):e.attr+=o[a]+","+Math.floor(o[a+1]*l.colorRite2[e.color]/10+.5)+"|";return e},l.getLegendEquipVO=function(t){var e=new th;e.id=t,e.level=l.legendlVArr[t%100],e.type=Math.floor(t%1e4/1e3)+10;var i=Math.floor(t%1e5/1e4);switch(e.category=i<6?i:0,e.type%10==1?e.name="洪荒神"+l.cateArr[e.category]+"（"+t%10+"阶）":e.name="洪荒神"+l.legendPosArr[e.type%10]+"（"+t%10+"阶）",100<e.level?e.title=(e.level-100)/10+"转":e.title=e.level+"级",e.type%10){case 1:e.path=l.pathArr[e.category]+"50";break;case 2:case 3:case 4:case 5:case 6:e.path=l.pathArr2[e.type%10]+"50"}e.color=Math.floor(t%1e3/100),e.price="1,"+200*(Math.floor(e.level/10)+1)*e.color;var s=(1e3+e.level+"").substr(-3),n=R["t"+e.type%10+s];e.attr="";for(var o=NaN,a=0;a<n.length;a+=2)o=n[a],49==n[a]&&(o=0==e.category?49:e.category<=2?15:16),a==n.length-2?e.attr+=o+","+Math.floor(n[a+1]*l.colorRite[e.color]/10+.5):e.attr+=o+","+Math.floor(n[a+1]*l.colorRite[e.color]/10+.5)+"|";return e},l.getNormalEquip=function(t){var e=new th;e.id=t,e.level=t%100*10,e.level=0==e.level?1:e.level,e.type=Math.floor(t%1e4/1e3),e.category=Math.floor(t%1e5/1e4),0<e.type&&e.type<7&&(1!=e.type?e.name=l.nameArr[Math.floor(e.level/10)]+l.posArr[e.type]:e.name=l.nameArr[Math.floor(e.level/10)]+l.cateArr[e.category],100<e.level?e.title=(e.level-100)/10+"转":e.title=e.level+"级");var i=t%100+"";switch(e.type){case 1:e.path=l.pathArr[e.category]+i;break;case 2:case 3:case 4:case 5:case 6:e.path=l.pathArr2[e.type]+i}e.color=Math.floor(t%1e3/100),e.price="1,"+200*(Math.floor(e.level/10)+1)*e.color;var s=(1e3+e.level+"").substr(-3),n=R["t"+e.type+s];e.attr="";for(var o=NaN,a=0;a<n.length;a+=2)o=n[a],49==n[a]&&(o=0==e.category?49:e.category<=2?15:16),a==n.length-2?e.attr+=o+","+Math.floor(n[a+1]*l.colorRite[e.color]/10+.5):e.attr+=o+","+Math.floor(n[a+1]*l.colorRite[e.color]/10+.5)+"|";return e},l.equipsDic=null,l.goodsDic=null,l.initDebugEquipXML=!1,_(l,["USE_NAME_ARR",function(){return this.USE_NAME_ARR=["BOSS召唤符","礼包","积分","卡","技能书","铜钱","经验","称号","仙宠召唤符","","符文","符文副本","元宝","灵气","神宠宝盒","鲜花","兽魂","信物","时装","灵力","功勋币","竞技币","灵珠","角色头像框","聊天泡泡"]},"nameArr",function(){return this.nameArr=["仙灵","轻烟","暮雪","潇湘","缺月","圣武","青云","凌波","流霞","飞虹","天机","七煞","破军","贪狼","紫微","玉衡","凭虚","苍冥","八荒","瑶光","须弥","太初","灭界","天命","归一","血狱","黄泉","九霄","浮屠","修罗","创界","圣灵","伏天","九域","神安","凤涅","龙吟","天坠","无极","灵动","鬼灭"]},"cateArr",function(){return this.cateArr=["","剑","弓","扇","杖"]},"posArr",function(){return this.posArr=["","","头盔","护甲","项链","护手","戒指"]},"legendPosArr",function(){return this.legendPosArr=["","","盔","甲","链"]},"pathArr",function(){return this.pathArr=["","sword","bow","fan","wand"]},"pathArr2",function(){return this.pathArr2=["","","head","body","necklace","hand","ring"]},"pathArr3",function(){return this.pathArr3=["","cloak1","belt1","shoulder1","amulet1"]},"pathArr4",function(){return this.pathArr4=["","cuiyu","yizhu","yishi","weiyi"]},"legendlVArr",function(){return this.legendlVArr=[0,60,130,150,170,210]},"colorRite",function(){return this.colorRite=[0,1,3,5,7,10,25]},"colorRite2",function(){return this.colorRite2=[0,1,1.5,2.5,4,6,10]}]),l}(),cr=function(t){function e(){this.rpSetPanel=null,this.batchView=null,this.lingBaoBatchView=null,this.meltView=null,this.getView=null,this.wishSelectBoxView=null,this.hasInitBag=!1,this.delayKey=0,this.copyRwView=null,this._packView=null,this._meltView=null,e.__super.call(this)}w(e,"modules.pack.PackModule",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_bag_toc",this,this.onRoleBag),this.addSocketListener("m_goods_update_toc",this,this.updateGoods),this.addSocketListener("m_item_upgrade_extend_bag_toc",this,this.onUpExPack),this.addSocketListener("m_item_use_toc",this,this.onUseItem),this.addSocketListener("m_role_smelt_info_toc",this,this.onSmeltInfo),this.addSocketListener("m_role_smelt_smelt_toc",this,this.onSmelt),this.addSocketListener("m_item_effect_state_toc",this,this.onItemEffectState),this.addSocketListener("m_item_use_batch_toc",this,this.onBatchUse),this.addSocketListener("m_role_wish_box_info_toc",this,this.onOpenWishSelectBox),this.addSocketListener("m_role_wish_box_activate_toc",this,this.onActivateWishBox),this.addMessageListener("ENTER_GAME",this,this.initPack),this.addMessageListener("OPEN_PACKVIEW",this,this.openPackView),this.addMessageListener("BAGDATA_CHANGE",this,this.updatePack),this.addMessageListener("OPEN_MELTVIEW",this,this.openMeltView),this.addMessageListener("ADD_MELTEQUIP",this,this.addMeltEquip),this.addMessageListener("PACK_DATA_INITED",this,this.checkBagRP),this.addMessageListener("BAGDATA_CHANGE",this,this.checkBagRP),this.addMessageListener("WING_INIT",this,this.checkBagRP),this.addMessageListener("UPDATE_BAGRP",this,this.checkBagRP),this.addMessageListener("ROLE_LEVEL_UP",this,this.goodsUseRP),this.addMessageListener("REGROWLV_UP",this,this.goodsUseRP),this.addMessageListener("OPEN_BATHMELTVIEW",this,this.openBathMeltView),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),this.addMessageListener("RPMASK_INFO_UPDATE",this,this.updateByRPMaskDataChange)},i.openRPSetPanel=function(){this.rpSetPanel=this.rpSetPanel||new QE,this.rpSetPanel.openWindow()},i.openBatchUseView=function(){this.batchView=this.batchView||new VV,this.batchView.openWindow()},i.openLBBatchUseView=function(){xo.getBagEmpty(xo.SPIRITRE_ID)?(this.lingBaoBatchView=this.lingBaoBatchView||new BV,this.lingBaoBatchView.openWindow()):Jt.addTip("灵宝背包已满，请先进行分解或重铸")},i.updateRPSetPanel=function(){this.rpSetPanel&&this.rpSetPanel.isPopup()&&this.rpSetPanel.update()},i.updateByRPMaskDataChange=function(){this.updateRPSetPanel(),this.updatePack(),this.goodsUseRP()},i.onExchangeBack=function(t){if(11==t.module_id){var e,i;for(var s in this._meltView&&this._meltView.parent&&this._meltView.showEff(),this.meltView&&this.meltView.parent&&this.meltView.closeWindow(),this.dispatch("UPDATE_DECOMP_VIEW"),t.reward)5!=(i=t.reward[s]).type&&(e=ur.getRewardByTkv(i))&&Jt.addTip(e.name+"  ×"+i.val,U.getColorDark(e.color));this.dispatch("EXERCISE_PEARL_CONDICTION_UPDATE")}},i.openBathMeltView=function(){this.meltView=this.meltView||new AV,this.meltView.openWindow(),this.meltView.parent&&this.meltView.update()},i.toBatchUse=function(t){var e=new Object;e.className="m_item_use_batch_tos",e.use_items=t,this.sendSocketMessage(e)},i.onBatchUse=function(t){0<t.err_code?ce.addTip(t.err_code):(console.log("toc___ ",t),t.rewards.length||t.use_items.length?!t.rewards.length&&t.use_items.length?Jt.addTip("批量使用成功"):(this.getView=new NV,this.getView.updateView(t.rewards),this.getView.openWindow()):Jt.addTip("无法批量使用，请检查背包是否已满"))},i.toOpenWishSelectBox=function(t){var e=new Object;e.className="m_role_wish_box_info_tos",e.goods_id=t,this.sendSocketMessage(e)},i.onOpenWishSelectBox=function(t){0==t.err_code?this.openWishSelectBoxView(t.available_items,t.goods_id):ce.addTip(t.err_code)},i.toActivateWishBox=function(t,e){var i=new Object;i.className="m_role_wish_box_activate_tos",i.activating_item_id=e,i.goods_id=t,this.sendSocketMessage(i),this.wishSelectBoxView&&this.wishSelectBoxView.closeWindow()},i.onActivateWishBox=function(t){0==t.err_code||ce.addTip(t.err_code)},i.openWishSelectBoxView=function(t,e){this.wishSelectBoxView=this.wishSelectBoxView||new GV,this.wishSelectBoxView.openWindow(),this.wishSelectBoxView.parent&&this.wishSelectBoxView.updateView(t,e)},i.checkBagRP=function(){var t=xo.getEquipData(),e=xo.getFilterEquip();t&&t.columns*t.rows-t.goods.length<=40&&e&&0<e.length?Nt.show("EQUIP_MELTING"):Nt.hide("EQUIP_MELTING"),oa.getWingTOCVO(0)&&10<=xo.getWingMeltEquip().length?Nt.show("WING_MELTING"):Nt.hide("WING_MELTING"),this.goodsUseRP(),this.goodsComposRP()},i.goodsComposRP=function(){var t,e=xo.getCompKinds();for(var i in e){for(var s in(t=e[i]).CompKindCompSubArr)if(t.CompKindCompSubArr[s].checkRP())return void Nt.show("GOODS_CAN_COMPOSE")}Nt.hide("GOODS_CAN_COMPOSE")},i.goodsUseRP=function(){var t=xo.getGoodsData();if(t){var e;for(var i in t.goods){e=t.goods[i];var s=ur.getItem(e.typeid);if(s&&s.level<=pe.myEquipLevel&&s.needShowRP())if(1010==s.useType){var n=oa.getRegrowTOCVO();if(n&&oa.getRegrowLvVO(n.regrow_lv+1)){var o,a=10,l=10,r=10,h=10,u=10;for(var c in n.buy)switch((o=n.buy[c]).id){case 2:a-=o.val;break;case 3:l-=o.val;break;case 4:r-=o.val;break;case 5:h-=o.val;break;case 6:u-=o.val}if(0<a&&10201117==s.id&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return;if(0<l&&10201118==s.id&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return;if(0<r&&10201884==s.id&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return;if(0<h&&10201885==s.id&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return;if(0<u&&10201886==s.id&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return}}else if(3015==s.useType){if(Eo.godPetAlert&&this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return}else if(this.dispatchRPShow_GOODS_CAN_USE(!0,s.id))return}this.dispatchRPShow_GOODS_CAN_USE(!1)}else this.dispatchRPShow_GOODS_CAN_USE(!1)},i.dispatchRPShow_GOODS_CAN_USE=function(t,e){return void 0===e&&(e=0),t&&!ha.checkGoodMask(e)?(Nt.show("GOODS_CAN_USE"),!0):(Nt.hide("GOODS_CAN_USE"),!1)},i.bathUseItem=function(t){var e,i,s=xo.getGoodsData();if(s)for(var n in s.goods)i=s.goods[n],ur&&ur.getItem&&(e=ur.getItem(i.typeid)),e&&e.useType%1e3==t&&this.useItem(i.id,i.current_num)},i.useItem=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=0);var s=xo.getGoodsByOId(t);Xs.curUseGoodID=0,s&&st.isTalimanStone(s.typeid)&&(Xs.curUseGoodID=s.typeid),s&&Xs.isRedNameGoods(s.typeid)&&(Xs.curUseGoodID=s.typeid);var n=new Object;n.className="m_item_use_tos",n.itemid=t,n.usenum=e,n.effect_id=i,this.sendSocketMessage(n)},i.onUseItem=function(t){if(0!=t.itemid){this.dispatch("ITEM_USE_BACK",[t.itemid,t.reason]);var e=xo.getGoodsByOId(t.itemid);e&&(e.current_num=t.rest)}if(0!=t.err_code)if(st.isTalimanStone(Xs.curUseGoodID)){var i=un.getGuideVoById(10);pe.checkLevel(i.regrow,i.level)&&(3<=Xs.curServerOpenDay||0<Xs.curCombineServerTimes)?Jt.addTip("你已拥有该法宝，不可再激活"):Jt.addTip("功能尚未开启")}else ce.addTip(t.err_code)},i.initPack=function(){this.toDelay()},i.toDelay=function(){pe.myLevel<10?this.toInitMyPackAndDepot([1,2]):this.toInitMyPackAndDepot([1,2,3])},i.toInitMyPackAndDepot=function(t){var e=new Object;e.className="m_role_bag_tos",e.bag_types=t,this.sendSocketMessage(e)},i.onRoleBag=function(t){this.hasInitBag=!0,xo.handlerBagData(t.bags),xo.handlerBagExtends(t.extend_times),this.updatePack(),this.dispatch("PACK_DATA_INITED")},i.updateGoods=function(t){this.hasInitBag&&(this.checkNeedEffect(t)&&xo.handerPackUpdate(t),0<this.delayKey&&_t.clearTimeout(this.delayKey),this.delayKey=_t.setTimeout(this,this.delayToDispatch,null,250))},i.delayToDispatch=function(){this.dispatch("BAGDATA_CHANGE"),this.delayKey=0},i.checkNeedEffect=function(t){if(1==t.type||3==t.type)switch(t.reward_type){case 4:case 0:for(var e,i,s,n=0,o=0,a=0;a<t.goods.length;a++)e=t.goods[a],i=ur.getItem(e.typeid),n=(s=xo.getGoodsByOId(e.id))?e.current_num-s.current_num:e.current_num,xo.updateOne(e),0<n&&i&&Jt.addTip(i.name+"  ×"+n,U.getColorDark(i.color));return!1;case 2:break;case 3:var l,r,h=[];for(var u in t.goods)r=t.goods[u],ur.isEquip(r.typeid)&&5==(l=ur.getItem(r.typeid)).color&&h.push(l);Re.ins.add(h);break;case 5:for(var c,d,p="恭喜您！获得";a<t.goods.length;a++)d=t.goods[a],c=ur.getItem(d.typeid),o=xo.getGoodsNumByTypeID(d.typeid),p+=c.name+"×"+(d.current_num-o),a<t.goods.length-1?p+="，":p+="！";0<t.goods.length&&Jt.addTip(p);break;case 19:this.copyRwView=this.copyRwView||new zM,this.copyRwView.parent||this.copyRwView.openWindow(),this.copyRwView.udpate(t.goods)}return!0},i.updatePack=function(){this._packView&&this._packView.parent&&this._packView.updateGoods(),this.batchView&&this.batchView.parent&&this.batchView.updateGoods()},i.toUpExPack=function(t,e){void 0===e&&(e=0);var i=new Object;i.className="m_item_upgrade_extend_bag_tos",i.bagid=t,i.num=e,this.sendSocketMessage(i)},i.onUpExPack=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{xo.handlerOneBagExtends(t.bagid,t.extend_times);var e=xo.getPackDataByBagId(t.bagid);e&&(e.columns=t.columns,e.rows=t.rows,xo.isCommonPackageBag(t.bagid)&&this.updatePack(),this.dispatch("PACK_UPDATE_EXTEND_SUCCESS",t.bagid))}},i.toMeltingEquip=function(t,e){if(e&&0<e.length){for(var i,s=[],n=0;n<e.length;n++)(i=new Object).className="p_kv",i.id=1,i.val=e[n],s.push(i);Tr.ins().toExchange(11,30001,1,s)}},i.openPackView=function(t){void 0===t&&(t=0),se.has("modules/bag")?(this._packView=this._packView||new FV,this._packView.tab.selectedIndex=t,this._packView.openWindow()):se.add("modules/bag","正在加载背包模块",this,this.openPackView,[t])},i.openMeltView=function(){this._meltView=this._meltView||new RV,this._meltView.openWindow(),this._meltView.parent&&this._meltView.update()},i.addMeltEquip=function(t){this._meltView.addMeltEquip(t)},i.toSmeltInfo=function(){var t=new Object;t.className="m_role_smelt_info_tos",this.sendSocketMessage(t)},i.onSmeltInfo=function(t){xo.handlerSmeltInfo(t),this._meltView&&this._meltView.parent&&this._meltView.update()},i.toSmelt=function(t){var e=new Object;e.className="m_role_smelt_smelt_tos",e.goods_id=t,this.sendSocketMessage(e)},i.onSmelt=function(t){0<t.err_code?ce.addTip(t.err_code):(xo.handlerSmelt(t),this._meltView&&this._meltView.parent&&this._meltView.showEff())},i.onItemEffectState=function(t){var e=xo.getItemLimitVO(t.type_id,t.state);if(e)switch(e.actionType){case 1:Jt.addTip(e.msg);break;case 2:case 3:e.showAlertVO()}},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),dr=function(t){function e(){e.__super.call(this)}w(e,"modules.pet.book.PetBookCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo),this.addSocketListener("m_pet_book_info_toc",this,this.onPetBookInfo)},i.enterGameToInfo=function(){_t.setTimeout(this,this.toPetBookInfo,null,St.ENTER_DELAY)},i.toPetBookInfo=function(){var t=new Object;t.className="m_pet_book_info_tos",this.sendSocketMessage(t)},i.onPetBookInfo=function(t){t&&(Po.setPetBookHas(t.pet_ids),mr.ins().updateBookView())},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),pr=function(t){function e(){this.tenRoundRewardView=null,this.clearView=null,this.curIndexDic=null,this.petFightView=null,this.fightViewKey=NaN,e.__super.call(this)}w(e,"modules.pet.embattle.PetEmbattleModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("PACK_DATA_INITED",this,this.onPackInited),this.addMessageListener("OPEN_TENROUND_REWARD",this,this.openTenRoundReward),this.addSocketListener("m_pet_embattle_change_pos_toc",this,this.onPetEmbattleChangePos),this.addSocketListener("m_pet_embattle_choose_skill_toc",this,this.onPetEmbattleChangeSkill),this.addSocketListener("m_pet_embattle_power_toc",this,this.onPetEmbattlePower),this.addSocketListener("m_pet_tower_auto_play_toc",this,this.onPetTowerAutoPlay),this.addSocketListener("m_pet_tower_auto_toc",this,this.onPetTowerAuto),this.addSocketListener("m_pet_tower_end_toc",this,this.onPetTowerEnd),this.addSocketListener("m_pet_tower_enter_toc",this,this.onPetTowerEnter),this.addSocketListener("m_pet_tower_info_toc",this,this.onPetTowerInfo),this.addSocketListener("m_pet_tower_play_toc",this,this.onPetTowerPlay),this.addSocketListener("m_pet_tower_quick_finish_toc",this,this.onPetQuickFinsh),this.addSocketListener("m_embattle_fightinfo_toc",this,this.onFightInfoREC)},i.toPetEmbattlePower=function(t,e){var i=new Object;i.className="m_pet_embattle_power_tos",i.role_id=t,i.embattle_index=e,this.sendSocketMessage(i)},i.onPetEmbattlePower=function(t){0<t.err_code?ce.addTip(t.err_code):(To.handlerPetEmbattlePower(t),this.dispatch("UPDATE_PETEMBATTLE_POWER",t.role_id))},i.openTenRoundReward=function(){this.tenRoundRewardView=this.tenRoundRewardView||new QV,this.tenRoundRewardView.parent||this.tenRoundRewardView.openWindow()},i.onGrowUp=function(){110==pe.myEquipLevel&&this.toDelayPackInit()},i.onPackInited=function(){_t.setTimeout(this,this.toDelayPackInit,null,St.ENTER_DELAY)},i.toDelayPackInit=function(){this.addMessageListener("REGROWLV_UP",this,this.onGrowUp),Ne.isOpenPetEmbattle()&&this.toPetTowerInfo(1)},i.toPetQuickFinsh=function(t){var e=new Object;e.className="m_pet_tower_quick_finish_tos",e.tower_id=t,this.sendSocketMessage(e)},i.onPetQuickFinsh=function(t){To.handlerPetTowerQuickToc(t),this.dispatch("PET_TOWER_UPDATE",t.tower_id);var e,i=[];for(var s in t.rewards){e=t.rewards[s];for(var n=!1,o=0;o<i.length;o++)if(i[o].id==e.id&&i[o].type==e.type){i[o].val+=e.val,n=!0;break}n||i.push(e)}this.clearView=this.clearView||new qV,this.clearView.parent||this.clearView.openWindow(),this.clearView.update(t.stop_barrier,i)},i.toPetTowerPlay=function(t,e){void 0===e&&(e=0);var i=new Object;i.className="m_pet_tower_play_tos",i.tower_id=0,i.barrier=0,i.embattle_index=0,this.curIndexDic=this.curIndexDic||new Object,i.embattle_index=e<=0?this.curIndexDic[t]:this.curIndexDic[t]=e,i.tower_id=t,i.barrier=To.getRound(t)+1,this.sendSocketMessage(i)},i.onPetTowerPlay=function(t){0<t.err_code?ce.addTip(t.err_code):(To.handlerPetTowerPlayToc(t),this.showPetFightView(t.tower_id,t.barrier))},i.getPetFightView=function(){return this.petFightView=this.petFightView||new KV,this.petFightView},i.showPetFightView=function(t,e,i){0!=se.has("modules/petFight")?(null==this.petFightView&&(this.petFightView=new KV,this.petFightView.on("undisplay",this,this.onFightViewUndisplay)),_t.clearTimeout(this.fightViewKey),null==this.petFightView.parent&&this.petFightView.openWindow(),i?this.petFightView.setRecFight(i):this.petFightView.setPetTowerFight(t,e)):se.add("modules/petFight","加载仙宠战斗",this,this.showPetFightView,[t,e,i])},i.onFightViewUndisplay=function(){this.fightViewKey=_t.setTimeout(this,this.clearPetFightSource,null,ya.coldTime)},i.clearPetFightSource=function(){this.petFightView&&(this.petFightView.destroy(),this.petFightView=null);var t=ut.loadedMap,e=[];for(var i in t)0<=i.indexOf("modules/petFight")&&e.push(i);for(var s=0;s<e.length;s++)ut.clearRes(e[s],!0)},i.onPetTowerInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(To.initInfo(t,t.tower_id),this.petFightView&&this.petFightView.parent||this.dispatch("PET_TOWER_UPDATE",t.tower_id),t.passed_max_barrier>t.passed_barrier&&Nt.show("RP_PET_TOWER_BARRIER"))},i.toPetTowerInfo=function(t){var e=new Object;e.className="m_pet_tower_info_tos",e.tower_id=t,this.sendSocketMessage(e)},i.toPetTowerEnter=function(t,e,i){var s=new Object;s.className="m_pet_tower_enter_tos",s.op_type=t,s.tower_id=e,s.relive_times=i,this.sendSocketMessage(s)},i.onPetTowerEnter=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.toPetTowerEnd=function(t){var e=new Object;e.className="m_pet_tower_end_tos",e.tower_id=t,this.sendSocketMessage(e)},i.onPetTowerEnd=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.toPetTowerAuto=function(){var t=new Object;t.className="m_pet_tower_auto_tos",this.sendSocketMessage(t)},i.onPetTowerAuto=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.onPetTowerAutoPlay=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.toPetEmbattleChangeSkill=function(t,e,i){var s=new Object;s.className="m_pet_embattle_choose_skill_tos",s.skill_id=i,s.pet_id=t,s.index=e,this.sendSocketMessage(s)},i.onPetEmbattleChangeSkill=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetEmbattleChange(t.new_pet_embattle),this.dispatch("PET_TOWER_UPDATE",1))},i.toPetEmbattleChangePos=function(t,e,i){var s=new Object;s.className="m_pet_embattle_change_pos_tos",s.new_pos=i,s.pet_id=t,s.index=e,this.sendSocketMessage(s)},i.onPetEmbattleChangePos=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetEmbattleChange(t.new_pet_embattles),this.dispatch("PET_TOWER_UPDATE",1))},i.gotoNextLogs=function(){this.petFightView.playRound()},i.toFightInfoREC=function(t){console.log("fight log id: "+t);var e=new Object;e.className="m_embattle_fightinfo_tos",e.fight_id=t,this.sendSocketMessage(e)},i.onFightInfoREC=function(t){0<t.err_code?ce.addTip(t.err_code):this.showPetFightView(0,0,t.fight_info)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),mr=function(t){function e(){this.bookView=null,this.petGuideGetView=null,this.godPetView=null,this.petChangeNameView=null,this.petRPSetView=null,this.outKey=0,this.sumExp=0,this.selSoulView=null,this.huntSetView=null,this.deview=null,this.soulChangeView=null,this.soulPackView=null,this._spiritBuyView=null,this._soulHuntView=null,this.fuseView=null,this.petGetView=null,this.compPetID=NaN,this.resView=null,this.alertVO=null,this.secAlertView=null,this.initView=!1,this.back=!0,this.petPanel=null,this.devoteView=null,this.trainView=null,this.lvUpView=null,this.expBoxPanel=null,this.expBoxUpDescView=null,this.petFuseSelView=null,this.petFuseTipsPanel=null,e.__super.call(this)}w(e,"modules.pet.PetModule",l);var i=e.prototype;return i.initListeners=function(){fr.ins(),dr.ins(),this.addMessageListener("PACK_DATA_INITED",this,this.bagInitedHandler),this.addMessageListener("PET_OPEN_PANEL",this,this.openPetPanel),this.addMessageListener("PET_OPEN_DEVOTE_PANEL",this,this.openDevotePanel),this.addMessageListener("PET_OPEN_TRAIN_PANEL",this,this.openTrainPanel),this.addMessageListener("PET_OPEN_FUSE_PANEL",this,this.openFusePanel),this.addMessageListener("PET_OPEN_DEPOTE_VIEW",this,this.openDepoteView),this.addMessageListener("PET_OPEN_SOUL_HUNT_PANEL",this,this.openSoulHuntView),this.addMessageListener("PET_OPEN_SPIRIT_BUY_PANEL",this,this.openSpiritBuyView),this.addMessageListener("PET_OPEN_SOUL_PACK_PANEL",this,this.openSoulPackView),this.addMessageListener("PET_OPEN_SOUL_CHANGE_PANEL",this,this.openSoulChangeView),this.addMessageListener("PET_OPEN_SOUL_DECOMPOSE_PAENL",this,this.openSoulDecomposeView),this.addMessageListener("PET_OPEN_HUNT_SET",this,this.openSoulHuntSetView),this.addMessageListener("PET_OPEN_SELSOUL_PANEL",this,this.openSoulSelView),this.addMessageListener("PET_CLOSE_SELSOUL_PANEL",this,this.closeSoulSelView),this.addMessageListener("PET_UPDATA_DE_PANEL",this,this.updateDePanel),this.addMessageListener("PET_OPEN_RPSET_VIEW",this,this.openPetRPSetView),this.addMessageListener("PET_OPEN_CHANGENAME_VIEW",this,this.openPetChangeNameView),this.addMessageListener("PET_OPEN_BOOKVIEW",this,this.openPetBookView),this.addMessageListener("CLOSE_PET_BOOK_VIEW",this,this.closePetBookView),this.addMessageListener("BANNER_VIDEO_FINISH",this,this.toFininBanner),this.addSocketListener("m_pet_get_new_pet_toc",this,this.onGetNewPet),this.addSocketListener("m_pet_level_up_toc",this,this.onPetLevelUp),this.addSocketListener("m_pet_power_info_toc",this,this.onPetPowerInfo),this.addSocketListener("m_pet_info_toc",this,this.onPetInfo),this.addSocketListener("m_pet_fight_toc",this,this.onPetFight),this.addSocketListener("m_pet_fuse_toc",this,this.onPetFuse),this.addSocketListener("m_pet_discard_toc",this,this.onPetDiscard),this.addSocketListener("m_pet_devote_info_toc",this,this.onPetDevoteInfo),this.addSocketListener("m_pet_devote_toc",this,this.onPetDevote),this.addSocketListener("m_pet_train_toc",this,this.onPetTrain),this.addSocketListener("m_pet_update_pet_toc",this,this.onUpdatePet),this.addSocketListener("m_pet_skill_upgrade_toc",this,this.onPetSkillUpgrade),this.addSocketListener("m_pet_skill_forget_toc",this,this.onPetSkillForget),this.addSocketListener("m_pet_skill_seal_toc",this,this.onPetSkillSeal),this.addSocketListener("m_pet_skill_move_toc",this,this.onPetSkillMove),this.addSocketListener("m_pet_skill_extend_toc",this,this.onPetSkillExtend),this.addSocketListener("m_pet_skill_bag_toc",this,this.onPetSkillBag),this.addSocketListener("m_pet_set_red_point_toc",this,this.onPetSetRedPoint),this.addSocketListener("m_pet_soul_add_exp_toc",this,this.onPetSoulAddExp),this.addSocketListener("m_pet_soul_buy_spirit_toc",this,this.onPetSoulBuySpirit),this.addSocketListener("m_pet_soul_decompose_toc",this,this.onPetSoulDecompose),this.addSocketListener("m_pet_soul_hunt_toc",this,this.onPetSoulHurt),this.addSocketListener("m_pet_soul_info_toc",this,this.onPetSoulInfo),this.addSocketListener("m_pet_soul_move_toc",this,this.onPetSoulMove),this.addSocketListener("m_pet_soul_pick_toc",this,this.onPetSoulPick),this.addSocketListener("m_pet_soul_special_hunt_toc",this,this.onPetSoulSpecialHunt),this.addSocketListener("m_pet_soul_exchange_toc",this,this.onSoulExchange),this.addSocketListener("m_pet_rename_toc",this,this.onChangePetName),this.addSocketListener("m_role_random_gift_toc",this,this.onRoleRandomGift),this.addSocketListener("m_pet_box_info_toc",this,this.onPetBoxInfo),this.addSocketListener("m_pet_box_fill_exp_toc",this,this.onPetBoxFillExp),this.addSocketListener("m_pet_box_level_up_toc",this,this.onPetBoxLevelUp),this.addSocketListener("m_pet_guide_get_toc",this,this.onPetGuideGet),this.addSocketListener("m_pet_guide_info_toc",this,this.onPetGuideInfo),this.addSocketListener("m_pet_soul_hunt_setting_toc",this,this.onPetSoulHuntSetting)},i.closePetBookView=function(){this.bookView&&this.bookView.parent&&this.bookView.removeSelf()},i.toPetSoulHuntSetting=function(t){var e=new Object;e.className="m_pet_soul_hunt_setting_tos",e.save_soul_color=t,this.sendSocketMessage(e)},i.onPetSoulHuntSetting=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulHuntSetting(t),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.update())},i.openPetBookView=function(){this.bookView=this.bookView||new WV,this.bookView.parent||this.bookView.openWindow(),this.bookView.update(),Eo.bagSkill||this.toPetSkillBag()},i.updateBookView=function(){this.bookView&&this.bookView.update()},i.toPetGuideInfo=function(){var t=new Object;t.className="m_pet_guide_info_tos",this.sendSocketMessage(t)},i.onPetGuideInfo=function(t){0<t.err_code?ce.addTip(t.err_code):Eo.handlerPetGuide(t)},i.toPetGuideGet=function(){var t=new Object;t.className="m_pet_guide_get_tos",this.sendSocketMessage(t)},i.onPetGuideGet=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.hasPetGuide=!1,this.petGuideGetView&&this.petGuideGetView.parent&&this.petGuideGetView.closeWindow(),1==t.type&&this.getNewPet(t.new_pet,!0))},i.openPetGuideGetView=function(){this.petGuideGetView=this.petGuideGetView||new OB,this.petGuideGetView.openWindow()},i.onRoleRandomGift=function(t){0<t.err_code?ce.addTip(t.err_code):2==t.op_type?this.godPetView&&this.godPetView.parent&&this.godPetView.closeWindow():(this.godPetView=this.godPetView||new pB,null==this.godPetView.parent&&this.godPetView.openWindow(),this.godPetView.data=t)},i.toRoleRandomGift=function(t,e){var i=new Object;i.className="m_role_random_gift_tos",i.good_id=t,i.op_type=e,this.sendSocketMessage(i)},i.openPetChangeNameView=function(t){this.petChangeNameView=this.petChangeNameView||new _B,this.petChangeNameView.data=t,null==this.petChangeNameView.parent&&t&&this.petChangeNameView.openWindow()},i.openPetRPSetView=function(t){this.petRPSetView=this.petRPSetView||new MB,this.petRPSetView.data=t,null==this.petRPSetView.parent&&this.petRPSetView.openWindow()},i.toPetSetRedPoint=function(t,e){e=~e;var i=new Object;i.className="m_pet_set_red_point_tos",i.pet_id=t,i.red_point=e,this.sendSocketMessage(i)},i.onPetSetRedPoint=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetRedPoint(t.pet_id,t.red_point),this.checkPetRedPoint())},i.checkPetRedPoint=function(){this.checkPetLevelUpRP(),this.checkPetSkillLvUpRP(),this.checkPetSoulRP(),Oo.checkSPRP()},i.updatePetPanelList=function(){0<this.outKey&&_t.clearTimeout(this.outKey),this.outKey=_t.setTimeout(this,this.realUpdatePetPanelList,null,50),this.petPanel&&this.petPanel.parent&&this.petPanel.list.refresh()},i.realUpdatePetPanelList=function(){this.petPanel&&this.petPanel.parent&&this.petPanel.list.refresh()},i.checkPetSoulRP=function(){var t=Eo.getBagSoulPosArr(),e=pe.getScore(12),i=!1,s=!1;if(this.updatePetPanelList(),Eo.pets&&0<Eo.pets.length){var n;for(var o in Eo.pets){if(n=Eo.pets[o],!this.checkMaskRP(n,4))if(0<(2&~n.red_point)){if(0==i)for(var a=1;a<9;a++)if(null!=t[a]){var l,r=!1;for(var h in n.soul_info.pet_souls){var u=(l=n.soul_info.pet_souls[h]).type_id%10;if(u==a){r=!0;var c=t[u],d=Math.floor(c.type_id/1e4)%10,p=Math.floor(l.type_id/1e4)%10;(p<d||d==p&&c.soul_level>l.soul_level)&&(i=!0);break}}if(0==r){i=!0;break}}if(0==s)for(h in n.soul_info.pet_souls){if(l=n.soul_info.pet_souls[h],d=Math.floor(l.type_id/1e4)%10,Eo.getSoulExpByColorAndLv(d,l.soul_level)-l.soul_exp<=e){s=!0;break}}}}}i?Nt.show("RP_PET_SOUL_EQUIP"):Nt.hide("RP_PET_SOUL_EQUIP"),s?Nt.show("RP_PET_SOUL_LEVEL_UP"):Nt.hide("RP_PET_SOUL_LEVEL_UP")},i.checkMaskRP=function(t,e){var i=~t.red_point;return!(t&&i&&0<(i&e))},i.checkPetSkillLvUpRP=function(){this.updatePetPanelList();var t,e=pe.getScore(9);if(Eo.pets&&0<Eo.pets.length)for(var i in Eo.pets){var s=~(t=Eo.pets[i]).red_point;if(t.skill_info&&0<(2&s))for(var n,o=t.skill_info.pet_skills.length,a=0;a<o;a++){n=t.skill_info.pet_skills[a];var l=Eo.getPetSkillVO(n.type_id),r=l.getNeedByLv(n.skill_level),h=n.skill_exp;if(n.skill_level<l.maxlv&&r-h<=e)return Nt.show("RP_PET_SKILL_LEVEL_UP"),void(this.petPanel&&this.petPanel.updatePetSkillLevelUpRP())}}Nt.hide("RP_PET_SKILL_LEVEL_UP"),this.petPanel&&this.petPanel.updatePetSkillLevelUpRP()},i.checkPetCanDevote=function(){if(null!=Eo.pets){var t=pe.myEquipLevel,e=0,i=0;for(var s in Ao.lvArrs)Ao.lvArrs[s]<=t&&++e;for(var n in Eo.pets)2==Eo.pets[n].state&&++i;i<e&&Eo.pets.length>i+1?Nt.show("RP_PET_DEVOTE"):Nt.hide("RP_PET_DEVOTE")}},i.checkPetLevelUpRP=function(){for(var t=this.sumExp=0;t<Ao.PET_EXP_GOOD.length;t++){var e=xo.getGoodsNumByType(xo.GOODS_ID,Ao.PET_EXP_GOOD[t]);this.sumExp+=e*Ao.PET_EXP_UP[t]}var i;if(Eo.pets&&0<Eo.pets.length)for(var s in Eo.pets){if(0<(1&~(i=Eo.pets[s]).red_point)&&i.level<100&&this.sumExp>=i.next_level_exp-i.exp)return void Nt.show("RP_PET_LEVEL_UP")}Nt.hide("RP_PET_LEVEL_UP"),modules.pet.PetModule.ins().updateListRp(),this.updatePetPanelList()},i.onPackInit=function(){_t.setTimeout(this,this.bagInitedHandler,null,St.ENTER_DELAY)},i.checkRp=function(){Eo.checkShowRP(),this.checkPetSkillLvUpRP(),this.checkPetSoulRP(),Oo.checkSPRP()},i.onScoreChange=function(t){switch(t.id){case 13:Eo.checkShowRP();break;case 9:this.checkPetSkillLvUpRP();break;case 12:this.checkPetSoulRP();break;case 16:Eo.checkExpBoxIsFull();break;case 11:Eo.checkPetSoulHuntRP();break;case 22:Oo.checkSPSoulStepRP(),this.updatePetPanel()}},i.toSoulExchange=function(t,e){var i=new Object;i.className="m_pet_soul_exchange_tos",i.pet_soul_type=t,i.num=e,this.sendSocketMessage(i)},i.onSoulExchange=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e,i;for(var s in Eo.handlerPetExchange(t),t.update_souls)i=t.update_souls[s],e=Eo.getPetSoulVO(i.type_id),Jt.addTip("兑换得到 兽魂·"+Ao.PETSOUL_NAME[e.pos-1]+"，请在兽魂背包中查看",U.getColorDark(e.color));this.checkPetSoulRP(),this.updatePetPanel(),this.updateSoulChangeView(),this.updateSoulPackView()}},i.updateDePanel=function(){this.deview&&this.deview.parent&&this.deview.update()},i.closeSoulSelView=function(){this.selSoulView&&this.selSoulView.parent&&this.selSoulView.closeWindow()},i.openSoulSelView=function(t){this.selSoulView=this.selSoulView||new tM,this.selSoulView.color=t,this.selSoulView.openWindow()},i.openSoulHuntSetView=function(){this.huntSetView=this.huntSetView||new jB,this.huntSetView.openWindow()},i.openSoulDecomposeView=function(){this.deview=this.deview||new WB,this.deview.openWindow(),this.deview.parent&&this.deview.update()},i.openSoulChangeView=function(){this.soulChangeView=this.soulChangeView||new HB,this.soulChangeView.openWindow(),this.soulChangeView.parent&&this.soulChangeView.update()},i.updateSoulChangeView=function(){this.soulChangeView&&this.soulChangeView.parent&&this.soulChangeView.update()},i.openSoulPackView=function(){this.soulPackView=this.soulPackView||new XB,this.soulPackView.openWindow(),this.soulPackView.parent&&this.soulPackView.update()},i.updateSoulPackView=function(){this.soulPackView&&this.soulPackView.parent&&this.soulPackView.update()},i.openSpiritBuyView=function(){this._spiritBuyView=this._spiritBuyView||new $B,this._spiritBuyView.openWindow(),this._spiritBuyView.parent&&this._spiritBuyView.update()},i.openSoulHuntView=function(){this._soulHuntView=this._soulHuntView||new DB,this._soulHuntView.openWindow(),this._soulHuntView.parent&&this._soulHuntView.update()},i.toPetSoulAddExp=function(t,e){var i=new Object;i.className="m_pet_soul_add_exp_tos",i.soul_index=t,i.add_exp=e,this.sendSocketMessage(i)},i.onPetSoulAddExp=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulAddExp(t),this.checkPetSoulRP(),this.petPanel&&this.petPanel.parent&&this.petPanel.upgradeSoul())},i.toPetSoulBuySpirit=function(t){var e=new Object;e.className="m_pet_soul_buy_spirit_tos",e.buy_times=t,this.sendSocketMessage(e)},i.onPetSoulBuySpirit=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.petSoulInfo&&(Eo.petSoulInfo.spirit_free_times=t.spirit_free_times),this.checkPetSpriteFree(),Jt.addTip("获得"+t.spirit+"灵气"),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.update(),this._spiritBuyView&&this._spiritBuyView.parent&&this._spiritBuyView.update())},i.checkPetSpriteFree=function(){Eo.petSoulInfo&&0<Eo.petSoulInfo.spirit_free_times?Nt.show("RP_SPRITE_BUY_FREE"):Nt.hide("RP_SPRITE_BUY_FREE")},i.toPetSoulDecompose=function(){var t=new Object;t.className="m_pet_soul_decompose_tos",t.soul_indexes=Eo.deComposeArr,this.sendSocketMessage(t)},i.onPetSoulDecompose=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("获得兽魂经验"+t.return_soul_exp),Eo.handlerPetDecompose(t),this.checkPetSoulRP(),this.updateSoulPackView(),this.deview&&this.deview.parent&&this.deview.reset())},i.toPetSoulHurt=function(t,e){if(void 0===e&&(e=!1),Eo.petSoulInfo){var i=new Object;i.className="m_pet_soul_hunt_tos",i.hunt_type=t,i.is_batch=e,i.save_soul_color=Eo.petSoulInfo.save_soul_color,e&&this._soulHuntView?(this._soulHuntView.batching=!0,this._soulHuntView.curGetSoulExp=pe.getScore(12),this._soulHuntView.curGetSprite=pe.getScore(11)):this._soulHuntView.batching=!1,this.sendSocketMessage(i)}},i.onPetSoulHurt=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulHurt(t),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.update(t),this.updateSoulPackView())},i.toPetSoulInfo=function(){var t=new Object;t.className="m_pet_soul_info_tos",this.sendSocketMessage(t)},i.onPetSoulInfo=function(t){Eo.handlerPetSoulInfo(t),this.checkPetSpriteFree(),this.checkPetSoulRP(),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.update()},i.toPetSoulMove=function(t,e){var i=new Object;i.className="m_pet_soul_move_tos",i.pet_id=t,i.move_actions=e,this.sendSocketMessage(i)},i.onPetSoulMove=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulMove(t),this.checkPetSoulRP(),this.updatePetPanel(),this.updateSoulPackView(),this.dispatch("PET_SOUL_CHANGE",t.update_souls))},i.toPetSoulPick=function(){var t=new Object;t.className="m_pet_soul_pick_tos",this.sendSocketMessage(t)},i.onPetSoulPick=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulPick(t),this.checkPetSoulRP(),this.updatePetPanel(),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.pickBack(),this.updateSoulPackView(),Eo.checkPetSoulHuntRP())},i.toPetSoulSpecialHunt=function(){var t=new Object;t.className="m_pet_soul_special_hunt_tos",this._soulHuntView&&(this._soulHuntView.batching=!1),this.sendSocketMessage(t)},i.onPetSoulSpecialHunt=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSoulSpecialHurt(t),t.available_hunt_types&&0<=t.available_hunt_types.indexOf(6)&&Jt.addTip("遇到了九天神女，可进行顶级猎魂"),this._soulHuntView&&this._soulHuntView.parent&&this._soulHuntView.update(t),this.updateSoulPackView())},i.openDepoteView=function(){this.fuseView&&this.fuseView.parent&&this.fuseView.closeWindow(),this.openPetPanel(1),this.petPanel.selectDepotView()},i.onUpdatePet=function(t){Eo.handlerPetUpdatePet(t),this.updatePetView()},i.toPetSkillBag=function(){var t=new Object;t.className="m_pet_skill_bag_tos",this.sendSocketMessage(t)},i.onPetSkillBag=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSkillBag(t),this.checkPetSkillLvUpRP(),this.updatePetPanel(),this.updateBookView(),this.petGetView&&this.petGetView.parent&&this.petGetView.updateSkillHasNum())},i.toPetSkillUpgrade=function(t){var e=new Object;e.className="m_pet_skill_upgrade_tos",e.index=t,this.sendSocketMessage(e)},i.onPetSkillUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSkillUpgrade(t),this.checkPetSkillLvUpRP(),this.petPanel&&this.petPanel.parent&&this.petPanel.upgradeSkill())},i.toPetSkillFoget=function(t,e){var i=new Object;i.className="m_pet_skill_forget_tos",i.pet_id=t,i.indexes=e,this.sendSocketMessage(i)},i.onPetSkillForget=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSkillForget(t),Jt.addTip("仙宠技能经验 ×"+t.add_skill_exp),this.updatePetPanel(),this.checkPetSkillLvUpRP())},i.toPetSkillSeal=function(t){var e=new Object;e.className="m_pet_skill_seal_tos",e.index=t,this.sendSocketMessage(e)},i.onPetSkillSeal=function(t){if(0<t.err_code)ce.addTip(t.err_code);else if(Eo.handlerPetSkillSeal(t),this.updatePetPanel(),Eo.bagSkill.all_skills&&Eo.bagSkill.all_skills.length<60){for(var e=[],i=e.length=0;i<Eo.bagSkill.all_skills.length;i++){var s=Eo.bagSkill.all_skills[i];e.push(s.index)}e.sort();Math.floor(t.update_skill.index/1e3),pe.roleID;for(var n=0;n<e.length&&e[n]%1e3==n+1;n++);var o=new Object;o.className="p_pet_skill_action",o.from_index=t.update_skill.index,o.to_index=n+1+1e5,o.action=1,modules.pet.PetModule.ins().toPetSkillMove(Math.floor(t.update_skill.index/1e3)+pe.roleID,[o])}else Jt.addTip("没有多余的仓库格子")},i.toPetSkillMove=function(t,e){var i=new Object;i.className="m_pet_skill_move_tos",i.pet_id=t,i.move_actions=e,this.sendSocketMessage(i)},i.onPetSkillMove=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSkillMove(t),this.checkPetSkillLvUpRP(),this.updatePetPanel())},i.toPetSkillExtend=function(t){var e=new Object;e.className="m_pet_skill_extend_tos",e.pet_id=t,this.sendSocketMessage(e)},i.onPetSkillExtend=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetSkillExtend(t),this.updatePetPanel())},i.openFusePanel=function(){Eo.pets&&0<Eo.pets.length?(this.fuseView=this.fuseView||new RB,this.fuseView.openWindow(),this.fuseView&&this.fuseView.parent&&this.fuseView.update()):Jt.addTip("当前未拥有仙宠")},i.toPetPowerInfo=function(t){var e=new Object;e.className="m_pet_power_info_tos",e.pet_id=t,this.sendSocketMessage(e)},i.onPetPowerInfo=function(t){},i.onPetLevelUp=function(t){Eo.handlerPetLevelUp(t),this.updatePetView()},i.onGetNewPet=function(t){this.getNewPet(t.new_pet)},i.getNewPet=function(t,e){void 0===e&&(e=!1),Eo.handlerGetNewPet(t),qo.resetTimeToCheckRP(),Po.updateNewHas(t),this.checkPetLevelUpRP(),this.checkPetCanDevote(),this.checkPetSoulRP(),this.checkPetSkillLvUpRP(),Oo.checkSPRP(),this.updatePetView(),this.updateBookView(),this.petGetView=this.petGetView||new pU,this.petGetView.parent||this.petGetView.popup(),this.petGetView.update(t,e)},i.toPetInfo=function(){var t=new Object;t.className="m_pet_info_tos",this.sendSocketMessage(t)},i.onPetInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetInfo(t),this.checkPetLevelUpRP(),this.checkPetCanDevote(),this.checkPetSkillLvUpRP(),this.checkPetSoulRP(),this.updatePetView(),Oo.checkSPRP(),this.dispatch("PET_INFO_INIT"))},i.toPetFigth=function(t,e){var i=new Object;i.className="m_pet_fight_tos",i.pet_id=t,i.op_type=e,this.sendSocketMessage(i)},i.onPetFight=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetFight(t),this.checkPetCanDevote(),this.updatePetView())},i.toPetFuse=function(t,e,i,s){this.compPetID=t;var n=new Object;n.className="m_pet_fuse_tos",n.pet_id1=t,n.pet_id2=e,n.new_skin_id=i,n.new_att_type=s,this.sendSocketMessage(n)},i.onPetFuse=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("融合成功，请在仙宠信息页面查看融合的仙宠"),this.resView=this.resView||new CB,this.resView.parent||this.resView.openWindow(),this.resView.update(t.new_pet,this.compPetID),Eo.handlerPetFuse(t),qo.resetTimeToCheckRP(),this.checkPetLevelUpRP(),this.checkPetCanDevote(),this.checkPetSkillLvUpRP(),this.checkPetSoulRP(),this.updatePetPanel(),Oo.checkSPRP(),this.dispatch("PLAYS_UPDATE_PANEL"),this.dispatch("PET_EXPLORE_HANDLER_CLOSE"),this.trainView&&this.trainView.parent&&this.trainView.update(),this.devoteView&&this.devoteView.parent&&this.devoteView.update(),this.fuseView&&this.fuseView.parent&&this.fuseView.update(t.new_pet))},i.updatePetView=function(){this.updatePetPanel(),this.trainView&&this.trainView.parent&&this.trainView.update(),this.devoteView&&this.devoteView.parent&&this.devoteView.update(),this.fuseView&&this.fuseView.parent&&this.fuseView.update(),T.dispatch("PET_TOWER_UPDATE",1),Ll.ins.updateSignView()},i.disCardPet=function(t,e){if(1==t.state)Jt.addTip("请先取消仙宠出战");else if(2==t.state)Jt.addTip("请先取消仙宠附身");else if(qo.isPetFree(t.pet_id)){var i=Math.floor(t.type_id%1e5/1e4),s=!1;if(t.skill_info&&t.soul_info.pet_souls)for(var n in t.soul_info.pet_souls){s=5<=t.soul_info.pet_souls[n].soul_level;break}5<i||t.skill_info&&2<=t.skill_info.pet_skills.length||s?(this.secAlertView=this.secAlertView||new cU,this.secAlertView.parent||this.secAlertView.popup(),this.secAlertView.update(t,e)):this.showGoodPetAlert(t,e)}else Jt.addTip("仙宠正在探险哦")},i.showGoodPetAlert=function(t,e){var i=Eo.pets.concat();i.sort(this.zzSort);for(var s,n=NaN,o=0;o<i.length;o++)if(t.pet_id==i[o].pet_id){n=o+1;break}if(n<=5&&(s="资质"),!s){for(i.sort(this.initPSort),o=0;o<i.length;o++)if(t.pet_id==i[o].pet_id){n=o+1;break}n<=5&&(s="初始属性")}if(!s){for(i.sort(this.pSort),o=0;o<i.length;o++)if(t.pet_id==i[o].pet_id){n=o+1;break}n<=5&&(s="成长属性")}if(s){s=t.pet_name+"的"+s+"在已领养仙宠中排名第"+n+",建议领养。确定放生吗？";var a=new Ee;a.msg=s,a.yesCaller=this,a.yesArgs=[t.pet_id,e],a.yesFun=this.toPetDiscard,EF.showVO(a)}else this.showDiscardAlert(t,e)},i.zzSort=function(t,e){return t.aptitude==e.aptitude?t.init_property==e.init_property?t.property==e.property?t.pet_id<e.pet_id?-1:1:t.property>e.property?-1:1:t.init_property>e.init_property?-1:1:t.aptitude>e.aptitude?-1:1},i.initPSort=function(t,e){return t.init_property==e.init_property?t.aptitude==e.aptitude?t.property==e.property?t.pet_id<e.pet_id?-1:1:t.property>e.property?-1:1:t.aptitude>e.aptitude?-1:1:t.init_property>e.init_property?-1:1},i.pSort=function(t,e){return t.property==e.property?t.aptitude==e.aptitude?t.init_property==e.init_property?t.pet_id<e.pet_id?-1:1:t.init_property>e.init_property?-1:1:t.aptitude>e.aptitude?-1:1:t.property>e.property?-1:1},i.showDiscardAlert=function(t,e){this.alertVO=this.alertVO||new Ee;var i=Math.floor(t.type_id%1e5/1e4),s=0;if(t.skill_info&&t.skill_info.pet_skills)for(var n in t.skill_info.pet_skills)s+=t.skill_info.pet_skills[n].skill_exp;var o,a=0,l=!1;if(t.skill_info&&t.soul_info.pet_souls)for(var r in t.soul_info.pet_souls){a+=(o=t.soul_info.pet_souls[r]).soul_exp;var h=Eo.getPetSoulVO(o.type_id);l=l||5<=h.color}this.alertVO.msg=Z.span("放生","#5d3924")+Z.span(t.pet_name,U.getColorDark(i))+Z.span("（Lv"+t.level+"），技能和兽魂将会被丢弃，获得技能经验","#5d3924")+Z.span(""+s,"#ffffff")+Z.span("，获得兽魂经验","#5d3924")+Z.span(""+a,"#ffffff")+Z.span("，","#5d3924"),i=i<=5?i:5;var u=ur.getItem(13e6+i-1);this.alertVO.msg+=Z.span(u.name+"×1",U.getColorDark(i))+Z.span("，确定放生吗?","#5d3924"),(this.alertVO.yesCaller=this).alertVO.yesArgs=[t.pet_id,e],this.alertVO.yesFun=this.toPetDiscard,this.alertVO.key="petDiscard",EF.showVO(this.alertVO)},i.callNextPet=function(){var t=xo.getGoodsData();if(t){var e,i,s=t.goods;for(var n in s)if(i=s[n],(e=ur.getItem(i.typeid))&&e.useType%1e3==9)return void cr.ins().useItem(i.id,1)}Jt.addTip("背包中仙宠召唤符已用完"),this.petGetView&&this.petGetView.parent&&this.petGetView.close()},i.toPetDiscard=function(t,e){var i=new Object;i.className="m_pet_discard_tos",i.pet_id=t,this.sendSocketMessage(i),null!=e&&e.run()},i.onPetDiscard=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e=Eo.getPetByPetID(t.pet_id),i=e?e.pet_name:"仙宠";Eo.handlerPetDisCard(t),Jt.addTip("放生"+i+"成功"),0<t.pet_skill_exp&&Jt.addTip("返还技能经验"+t.pet_skill_exp),this.dispatch("PET_SKILL_EXP_CHANGE"),qo.resetTimeToCheckRP(),this.checkPetLevelUpRP(),this.checkPetCanDevote(),this.checkPetSkillLvUpRP(),this.checkPetSoulRP(),Oo.checkSPRP(),Eo.pets&&0<Eo.pets.length?this.updatePetView():(Eo.curSelPetID=0,this.petPanel&&this.petPanel.parent&&this.petPanel.closeWindow(),this.trainView&&this.trainView.parent&&this.trainView.closeWindow(),this.devoteView&&this.devoteView.parent&&this.devoteView.closeWindow(),this.fuseView&&this.fuseView.parent&&this.fuseView.closeWindow(),T.dispatch("PET_TOWER_UPDATE",1))}},i.toPetDevoteInfo=function(){var t=new Object;t.className="m_pet_devote_info_tos",this.sendSocketMessage(t)},i.onPetDevoteInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetDevoteInfo(t),this.updatePetPanel(),this.trainView&&this.trainView.parent&&this.trainView.update(),this.fuseView&&this.fuseView.parent&&this.fuseView.updateState(),0==this.initView?(this.devoteView&&this.devoteView.parent&&this.devoteView.update(),this.initView=!0):this.devoteView&&this.devoteView.parent&&this.devoteView.updateDownAttr())},i.toPetDevote=function(t,e){var i=new Object;i.className="m_pet_devote_tos",i.pet_id=t,i.op_type=e,this.sendSocketMessage(i)},i.onPetDevote=function(t){0<t.err_code?ce.addTip(t.err_code):(Eo.handlerPetDevote(t),this.checkPetCanDevote(),this.updatePetPanel(),this.trainView&&this.trainView.parent&&this.trainView.update(),this.devoteView&&this.devoteView.parent&&this.devoteView.devoteBack(t.op_type),this.fuseView&&this.fuseView.parent&&this.fuseView.updateState())},i.toPetTrain=function(t,e){if(this.back){var i=new Object;i.className="m_pet_train_tos",i.pet_id=t,i.item_id=e,this.sendSocketMessage(i),this.back=!1}},i.onPetTrain=function(t){if(this.back=!0,0<t.err_code)ce.addTip(t.err_code);else{for(var e=this.sumExp=0;e<Ao.PET_EXP_GOOD.length;e++){var i=xo.getGoodsNumByType(xo.GOODS_ID,Ao.PET_EXP_GOOD[e]);this.sumExp+=i*Ao.PET_EXP_UP[e]}Eo.handlerPetTrain(t),Jt.addTip("仙宠获得"+t.train_exp+"经验"),this.dispatch("PET_TRAIN_BACK"),this.updatePetPanel()}},i.toPet55Info=function(){this.toPetInfo(),this.toPetSoulInfo()},i.bagInitedHandler=function(){this.toPetGuideInfo(),this.toPet55Info(),this.addMessageListener("BAGDATA_CHANGE",this,this.bagDataChange),this.addMessageListener("REGROWLV_UP",this,this.checkPetCanDevote),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.addMessageListener("ROLE_LEVEL_UP",this,this.roleLevelUp),this.checkRp(),Ne.isOpenPet()&&this.toPetBoxInfo()},i.roleLevelUp=function(){55<=pe.myLevel&&(this.toPetBoxInfo(),this.toPet55Info(),this.removeMessageListener("ROLE_LEVEL_UP",this,this.roleLevelUp))},i.bagDataChange=function(){this.checkPetLevelUpRP(),Eo.checkExpBoxCanUp(),Oo.checkSPRP()},i.openPetPanel=function(t){if(void 0===t&&(t=0),Eo.pets&&0<Eo.pets.length){if(!se.has("modules/pet"))return void se.add("modules/pet","正在加载仙宠模块",this,this.openPetPanel,[t]);this.petPanel=this.petPanel||new BB,this.petPanel.openWindow(),0<=t?this.petPanel.tab.selectedIndex=t:this.petPanel.tab.selectedIndex<0&&(this.petPanel.tab.selectedIndex=0),this.petPanel.update()}else Jt.addTip("当前未拥有仙宠")},i.updatePetPanel=function(){this.petPanel&&this.petPanel.parent&&this.petPanel.update()},i.openDevotePanel=function(){Eo.pets&&0<Eo.pets.length?(this.devoteView=this.devoteView||new vB,this.devoteView.openWindow(),this.devoteView&&this.devoteView.parent&&this.devoteView.update()):Jt.addTip("当前未拥有仙宠")},i.openTrainPanel=function(){this.trainView=this.trainView||new ZB,this.trainView.openWindow(),this.back=!0,this.trainView&&this.trainView.parent&&this.trainView.update()},i.updateListRp=function(){this.trainView&&this.trainView.parent&&this.trainView.updateListRp()},i.toChangePetName=function(t,e){var i=new Object;i.className="m_pet_rename_tos",i.pet_id=t,i.new_name=e,this.sendSocketMessage(i)},i.onChangePetName=function(t){0<t.err_code?ce.addTip(t.err_code):(this.petChangeNameView&&this.petChangeNameView.parent&&this.petChangeNameView.closeWindow(),Jt.addTip("您的仙宠获得了新的名字【"+t.new_name+"】"),Eo.handlerPetChangeName(t),this.updatePetView())},i.toPetBoxInfo=function(){var t=new Object;t.className="m_pet_box_info_tos",this.sendSocketMessage(t)},i.onPetBoxInfo=function(t){0==t.err_code?(Eo.petExpBoxLv=t.box_level,this.updateExpBoxPanel(),Eo.checkExpBoxCanUp(),Eo.checkExpBoxIsFull()):ce.addTip(t.err_code)},i.toPetBoxFillExp=function(t){var e=new Object;e.className="m_pet_box_fill_exp_tos",e.pet_id=t,this.sendSocketMessage(e)},i.onPetBoxFillExp=function(t){if(0==t.err_code){var e=Eo.getPetByPetID(t.pet_id);e&&(e.level=t.now_level,t.now_level>t.old_level&&(Eo.curInjectPetId=0,this.showLvUp(e,t.old_level,t.now_level)),t.now_level==t.old_level&&(e.exp+=t.use_exp)),this.updateExpBoxPanel(),Eo.checkExpBoxIsFull()}else Eo.curInjectPetId=0,ce.addTip(t.err_code)},i.showLvUp=function(t,e,i){this.lvUpView=this.lvUpView||new VB,this.lvUpView.openWindow(),this.lvUpView.setData(t,e,i)},i.toPetBoxLevelUp=function(){var t=new Object;t.className="m_pet_box_level_up_tos",this.sendSocketMessage(t)},i.onPetBoxLevelUp=function(t){0==t.err_code?(Eo.petExpBoxLv=t.new_level,this.updateExpBoxPanel(),Eo.checkExpBoxCanUp(),this.expBoxPanel&&this.expBoxPanel.isPopup()&&this.expBoxPanel.showSucc()):ce.addTip(t.err_code)},i.openExpBoxPanel=function(){this.expBoxPanel=this.expBoxPanel||new cB,this.expBoxPanel.openWindow(),this.expBoxPanel.update(),Eo.checkExpBoxCanUp()},i.updateExpBoxPanel=function(){this.expBoxPanel&&this.expBoxPanel.isPopup()&&this.expBoxPanel.update()},i.openExpBoxUpDescView=function(){this.expBoxUpDescView=this.expBoxUpDescView||new dB,this.expBoxUpDescView.openWindow(),this.expBoxUpDescView.update()},i.openPetFuseSelView=function(t,e,i){this.petFuseSelView=this.petFuseSelView||new kB,this.petFuseSelView.openWindow(),this.petFuseSelView.updateByDate(t,e,i)},i.openPetFuseTipsPanel=function(){this.petFuseTipsPanel=this.petFuseTipsPanel||new EB,this.petFuseTipsPanel.openWindow()},i.bannerConfirm=function(){var t=new Ee;t.msg="观看广告可以领取仙宠养成礼包，是否观看？",t.yesCaller=this,t.yesLabel="领取",t.noLabel="取消",t.yesFun=this.goToBanner,t.key=null,EF.showVO(t)},i.goToBanner=function(){Bt.sdk.showBannerVideo(9)},i.toFininBanner=function(t){if(9==t){var e=new Object;e.className="m_role_pf_operate_end_tos",e.op_type=14,e.reward_id=909,this.sendSocketMessage(e)}},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),fr=function(t){function e(){this.composePanel=null,this.goalPanel=null,this._beadArchivePanel=null,this._beadChangePanel=null,e.__super.call(this)}w(e,"modules.pet.spsoul.SPSoulCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addSocketListener("m_pet_bead_load_toc",this,this.onLoad),this.addSocketListener("m_pet_bead_step_toc",this,this.onStep),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onCompose)},i.toLoad=function(t,e,i){var s=new Object;s.className="m_pet_bead_load_tos",s.pet_id=t,s.pos=e,s.type_id=i,this.sendSocketMessage(s)},i.createNewPInfo=function(){var t=new p_pet_bead_info;return t.step=0,t.pet_beads=[],t},i.onLoad=function(t){if(0==t.err_code){var e=Ro.getBeadVOByType(t.type_id);e&&Jt.addTip("成功装备"+e.name);var i=Eo.getPetByPetID(t.pet_id);if(i){i.bead_info||(i.bead_info=this.createNewPInfo());var s,n=!1;for(var o in i.bead_info.pet_beads)if((s=i.bead_info.pet_beads[o]).pos==t.pos){s.type_id=t.type_id,n=!0;break}n||((s=new Object).className="p_pet_bead",s.pos=t.pos,s.type_id=t.type_id,i.bead_info.pet_beads.push(s)),mr.ins().updatePetPanel()}Oo.checkSPSoulPolyRP(),this.updatePolyChangePanel()}else ce.addTip(t.err_code)},i.toStep=function(t){var e=new Object;e.className="m_pet_bead_step_tos",e.pet_id=t,this.sendSocketMessage(e)},i.onStep=function(t){if(0==t.err_code){Jt.addTip("进阶成功");var e=Eo.getPetByPetID(t.pet_id);e&&(e.bead_info||(e.bead_info=this.createNewPInfo()),e.bead_info.step=t.new_step),Oo.checkSPSoulStepRP(),mr.ins().updatePetPanel()}else ce.addTip(t.err_code)},i.toCompose=function(t){for(var e=[],i=0;i<t.length;i++){var s=new Object;s.className="p_kv",s.val=t[i],e.push(s)}Tr.ins().toExchange(19,10010,1,e)},i.onCompose=function(t){19==t.module_id&&(Ro.composeRewards=t.reward,this.composePanel&&this.composePanel.isPopup()&&this.composePanel.updateByCompose(),Jt.addTip("合成成功！"))},i.openComposePanel=function(){this.composePanel=this.composePanel||new iB,this.composePanel.openWindow()},i.openGoalPanel=function(){this.goalPanel=this.goalPanel||new sB,this.goalPanel.openWindow()},i.onOpenArchivePanel=function(){this._beadArchivePanel=this._beadArchivePanel||new JV,this._beadArchivePanel.openWindow()},i.openPolyChangePanel=function(t){this._beadChangePanel=this._beadChangePanel||new oB,this._beadChangePanel.openWindow(),this._beadChangePanel.beadIndex=t},i.updatePolyChangePanel=function(){this._beadChangePanel&&this._beadChangePanel.update()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),_r=function(t){function i(){this.collectView=null,this.sharePanel=null,this.collectDelayKey=0,this.shareDelayKey=0,this.daliyGiftDelayKey=0,this._initInfo=!1,this.beginOpenLoadAppView=!1,this.hasLoadApp=!1,this.qqDJRewardView=null,this.evaluateView=null,this.wechatShareView=null,this.wechatShareView2=null,this.needCheckSubscribed=!1,this.appLoadNeedCheck=!1,this.speed=.8,this.shareTip=null,this.giftPanel=null,this.vipGiftPanel=null,this.attentionSuccPanel=null,i.__super.call(this),this.checkOpenLoadAppView()}w(i,"modules.pfSdk.PfSdkModule",l);var e=i.prototype;return e.initListeners=function(){Hr.ins(),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("OPEN_COLLECT_GAME",this,this.openCollect),this.addMessageListener("OPEN_SHARE_GAME",this,this.openShareGame),this.addMessageListener("PF_REWARD_GET_TOS",this,this.toPfRewardGet),this.addMessageListener("ON_EVALUATE",this,this.toEvaluate),this.addMessageListener("ROLE_LEVEL_UP",this,this.levelUpCheckRP),this.addMessageListener("ASK_FOR_ATTENTION",this,this.askForAttention),this.addMessageListener("ICON_CLICK_COLLOECT_OR_ATTENTION",this,this.onIconCollectOrAttention),this.addMessageListener("OPEN_ATTENTION_SUCC_PANEL",this,this.openAttentionSuccPanel),this.addMessageListener("CROSS_DAY",this,this.crossDayHandler),this.addMessageListener("SDK_APPINSTALLED",this,this.checkAppLoadRp),this.addMessageListener("ICON_NOTICE",this,this.checkWelfareAppLoadRp),this.addMessageListener("PF_SDK_QQ_DJ_REWARD_VIEW",this,this.openQQDJRewardView),this.addMessageListener("RESHOW_MUSIC",this,this.reshowMusic),this.addSocketListener("m_role_pf_reward_get_toc",this,this.onPfRewardGet),this.addSocketListener("m_role_pf_reward_info_toc",this,this.onRolePfReward),this.addSocketListener("m_role_pf_vip_toc",this,this.onPfVip),this.addMessageListener("ON_SHARE_SUCC",this,this.onShareSucc),this.addMessageListener("ON_SHARE_FAIL",this,this.onShareFail),this.addMessageListener("SHOW_TOP_TIP",this,this.onToptip),this.addMessageListener("SHOW_SHARE_TIP",this,this.showTip),this.addMessageListener("ON_ATTENTION",this,this.onAttention),this.addMessageListener("SDK_SHARE_TO_GET_VIA",this,this.toRoleShareVia),this.addSocketListener("m_role_share_via_toc",this,this.onRoleShareVia)},e.reshowMusic=function(){var t=ca.city.music;null!=t&&""!=t&&Ht.playMusic(t)},e.toRoleShareVia=function(){console.log("viaviavia发给后端");var t=new Object;t.className="m_role_share_via_tos",this.sendSocketMessage(t)},e.onRoleShareVia=function(t){console.log("via后端回调m_role_share_via_toc：",t),""!=t.share_via&&Bt.sdk.setQuery("shareVia",t.share_via),Bt.sdk.shareAppMessage()},e.toEvaluate=function(){this.evaluateView=this.evaluateView||new iM,this.evaluateView.openWindow()},e.checkLvToOpenShareGamePanel=function(){yt.isWX||S.onPC||!Bt.isTencentSDK()&&!Bt.isEyouH5()||15!=pe.myLevel&&5!=pe.myLevel||("gdtand"!=G.pf||this.hasLoadApp?this.openCollect():(T.dispatch("WELFARE_OPEN_PANEL",5001),i.hasCheck||this.checkOpenLoadAppView()))},e.checkOpenLoadAppView=function(){yt.isWX||Bt.isTencentSDK()&&15<=pe.myLevel&&("gdtand"!=G.pf||this.hasLoadApp||(i.hasCheck=!0,i.openTimes<2?i.setTimeoutId=_t.setTimeout(this,this.creatAppLoadView,null,18e5):2==i.openTimes&&(i.setTimeoutId=_t.setTimeout(this,this.creatAppLoadView,null,6e5))))},e.creatAppLoadView=function(){T.dispatch("WELFARE_OPEN_PANEL",5001),i.openTimes++,this.checkOpenLoadAppView()},e.onAttention=function(t){t?(T.dispatch("PF_REWARD_GET_TOS",Bt.QRCodeRewardParam),pt.send(42,1,"二维码关注-成功")):pt.send(42,2,"二维码关注-失败")},e.onToptip=function(t){Jt.addTip(t)},e.onShareFail=function(){this.hideTip()},e.onShareSucc=function(){this.hideTip()},e.crossDayHandler=function(){this.toRolePfRewardInfo(),this.setAppLoadState(!1)},e.onIconCollectOrAttention=function(){"4399"==G.pf&&Bt.showQRCode()},e.askForAttention=function(){yt.isWX||(Bt.isZM_SDK()||Bt.isAWY_SDK()||Bt.isYLC_SDK()?(Bt.sdk.showQRCode(),Do.getRewardTimes(Bt.QRCodeRewardParam[0],Bt.QRCodeRewardParam[1])<=0&&Bt.isYLC_SDK()&&T.dispatch("PF_REWARD_GET_TOS",Bt.QRCodeRewardParam),-1<["9g","xyouwang","7724","4177"].indexOf(G.pf)&&T.dispatch("PF_REWARD_GET_TOS",Bt.QRCodeRewardParam)):Bt.Eyou_SDK()?(this.wechatShareView2=this.wechatShareView2||new oM,this.wechatShareView2.openWindow()):(this.wechatShareView=this.wechatShareView||Aa.getIns(6e4,"wechatShare.WeChatShareView"),this.wechatShareView.openWindow(),-1<["mcyx-wxgzh","ljxz-wxgzh"].indexOf(G.pf)&&T.dispatch("PF_REWARD_GET_TOS",Bt.QRCodeRewardParam)))},e.levelUpCheckRP=function(){this.checkCollectRP(),this.checkShareGameRP(),this.checkLvToOpenShareGamePanel(),this.checkLvToOpenEvaluateView()},e.checkLvToOpenEvaluateView=function(){Bt.isEyou()&&40==pe.myLevel&&Bt.showEval()},e.checkSubscribed=function(){Do.getRewardInfos()?Bt.sdk.isSubscribed("wx344a94d88f030b5c",this.callBack):this.needCheckSubscribed=!0},e.callBack=function(t){switch(t){case"0":0==Do.getRewardTimes(4,0)&&T.dispatch("PF_REWARD_GET_TOS",[4,0])}},e.checkShareGameRP=function(){Do.getRewardInfos()&&(Do.getRewardTimes(1,0)<=0&&50<=pe.myLevel?T.dispatch("ICON_REDPOINT_CHANGE",[106,"RP_ICON_SHARE_GAME",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[106,"RP_ICON_SHARE_GAME",!1]))},e.checkCollectRP=function(){Do.getRewardInfos()&&(Do.getRewardTimes(2,0)<=0&&25<=pe.myLevel?T.dispatch("ICON_REDPOINT_CHANGE",[107,"RP_ICON_COLLECT",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[107,"RP_ICON_COLLECT",!1]))},e.checkCollectReward=function(){if(!yt.isWX&&Do.getRewardInfos()){var t=Do.getRewardTimes(2,0);Bt.is4177()&&t<=0&&1==S.window.is_favorite&&T.dispatch("PF_REWARD_GET_TOS",Bt.collectRewardParam)}},e.setAppLoadState=function(t){this.appLoadNeedCheck=t,this.checkWelfareAppLoadRp()},e.checkWelfareAppLoadRp=function(){this.appLoadNeedCheck?Bt.sdk.isAppInstalled():ka.checkIconShow(5001)?this.showAppLoadShow(!0):this.showAppLoadShow(!1)},e.checkAppLoadRp=function(t){this.hasLoadApp=t,this.hasLoadApp&&_t.clearTimeout(i.setTimeoutId);var e=0<Do.getRewardTimes(9,0);t&&!e?this.showAppLoadShow(!0):this.showAppLoadShow(!1)},e.showAppLoadShow=function(t){T.dispatch("ICON_REDPOINT_CHANGE",[5001,"RP_ICON_APP_LOAD",t]),T.dispatch("ICON_REDPOINT_CHANGE",[103,"RP_ICON_APP_LOAD",t])},e.onRolePfReward=function(t){0==t.err_code?(Do.handlerRewardInfo(t),this.initInfo=!0,this.checkCollectRP(),this.checkShareGameRP(),this.checkWelfareAppLoadRp(),this.checkCollectReward(),this.needCheckSubscribed&&(this.checkSubscribed(),this.needCheckSubscribed=!1),this.dispatch("UPDATE_OFF_LINE_BUTTON")):ce.addTip(t.err_code)},e.showTip=function(){null==this.shareTip&&(this.shareTip=new mx,this.shareTip.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.shareTip.right=5,this.shareTip.top=0),null==this.shareTip.parent&&this.shareTip.openWindow(),_t.addToFrame(this,this.onEnterFrame)},e.onEnterFrame=function(){this.shareTip&&(this.shareTip.imgEff.y+=this.speed,(this.shareTip.imgEff.y<=5||25<=this.shareTip.imgEff.y)&&(this.speed*=-1))},e.hideTip=function(){null!=this.shareTip&&this.shareTip.closeWindow(),_t.removeFromFrame(this,this.onEnterFrame)},e.disposeTip=function(){null!=this.shareTip&&(this.shareTip.destroy(),this.shareTip=null),_t.removeFromFrame(this,this.onEnterFrame)},e.onEnterGame=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY),this.onEnterTOS()},e.toDelay=function(){900<G.gift&&G.gift<990?this.toPfRewardGet([3,G.gift]):800<G.gift&&G.gift<899?this.toPfRewardGet([5,G.gift]):700<G.gift&&G.gift<799?(this.toPfVip(),this.toPfRewardGet([6,G.gift])):990==G.gift?this.toPfRewardGet([11,G.gift]):1999==G.gift&&this.toPfRewardGet([10,G.gift]),this.toRolePfRewardInfo(),this.checkLvToOpenShareGamePanel()},e.toRolePfRewardInfo=function(){var t=new Object;t.className="m_role_pf_reward_info_tos",this.sendSocketMessage(t)},e.openShareGame=function(){_t.clearTimeout(this.shareDelayKey),0!=se.has("modules/share")?(this.sharePanel=this.sharePanel||new nM,this.sharePanel.openWindow(),this.sharePanel.update(),this.sharePanel.on("undisplay",this,this.delayDestoryShare)):se.add("modules/share","正在加载分享模块",this,this.openShareGame)},e.openCollect=function(){_t.clearTimeout(this.collectDelayKey),0!=se.has("modules/collectGame")?(null==this.collectView&&("txspqqand"==G.pf||"txspwxand"==G.pf?this.collectView=new eM(1):this.collectView=new eM,this.collectView.on("undisplay",this,this.delayDestoryCollect)),this.collectView.openWindow()):se.add("modules/collectGame","正在加载收藏游戏模块",this,this.openCollect)},e.openPfGiftPanel=function(t,e,i){void 0===i&&(i=0),_t.clearTimeout(this.daliyGiftDelayKey),0!=se.has("modules/pfDaliyGift")?(this.giftPanel=this.giftPanel||new gU,this.giftPanel.popup(!0),this.giftPanel.update(t,e,i),this.giftPanel.on("undisplay",this,this.delayDestoryDaliyGift)):se.add("modules/pfDaliyGift",null,this,this.openPfGiftPanel,[t,e,i])},e.openPfVipGiftPanel=function(t,e,i){void 0===i&&(i=0),_t.clearTimeout(this.daliyGiftDelayKey),0!=se.has("modules/pfDaliyGift")?(this.vipGiftPanel=this.vipGiftPanel||new yU,this.vipGiftPanel.popup(!0),this.vipGiftPanel.update(t,e,i),this.vipGiftPanel.on("undisplay",this,this.delayDestoryDaliyGift),this.toPfVip()):se.add("modules/pfDaliyGift",null,this,this.openPfVipGiftPanel,[t,e,i])},e.udpatePfVipGiftPanelLv=function(){this.vipGiftPanel&&this.vipGiftPanel.parent&&this.vipGiftPanel.updateVipLv()},e.openAttentionSuccPanel=function(){_t.clearTimeout(this.daliyGiftDelayKey),0!=se.has("modules/pfDaliyGift")?(this.attentionSuccPanel=this.attentionSuccPanel||new _U,this.attentionSuccPanel.popup(!0),this.attentionSuccPanel.on("undisplay",this,this.delayDestoryDaliyGift)):se.add("modules/pfDaliyGift",null,this,this.openAttentionSuccPanel)},e.toPfRewardGet=function(t){var e=new Object;e.className="m_role_pf_reward_get_tos",e.op_type=null==t||null==t[0]?1:t[0],e.reward_id=null==t||null==t[1]?0:t[1],zn.addDebugInfo("send m_role_pf_reward_get_tos,param:"+e.op_type+"#"+e.reward_id,"ALL"),this.sendSocketMessage(e)},e.onEnterTOS=function(){if("eyouweiduan"==G.pf||"eyouios"==G.pf){var t=new Object;t.className="m_role_pf_reward_get_tos",t.op_type=9,t.reward_id=1,this.sendSocketMessage(t)}},e.onPfRewardGet=function(t){if(zn.addDebugInfo("receive m_role_pf_reward_get_toc,code:"+t.err_code,"ALL"),0==t.err_code){switch(Do.updatePfRewards(t.op_type,t.goods),Do.handlerReward(t),t.op_type){case 1:this.sharePanel&&this.sharePanel.closeWindow(),this.dispatch("SHARE_SUCC",t.reward_id),Jt.addTip("分享成功，请到邮箱处领取奖励！");break;case 7:this.dispatch("SHARE_SUCC"),Jt.addTip("许愿池分享成功，请到邮箱处领取奖励！");break;case 2:this.collectView&&this.collectView.closeWindow(),Jt.addTip("收藏成功，请到邮箱处领取奖励！");break;case 3:this.openPfGiftPanel(!0,t.op_type),Jt.addTip("获得每日礼包，请到邮箱处领取奖励！");break;case 5:this.openPfGiftPanel(!0,t.op_type),Jt.addTip("获得玩吧积分礼包，请到邮箱处领取奖励！");break;case 6:this.openPfVipGiftPanel(!0,t.op_type),Jt.addTip("获得玩吧VIP特权礼包，请到邮箱处领取奖励！"),this.dispatch("WELFARE_UPDATE_PANEL");break;case 4:if(!yt.isWX){-1==["youlechang","9g","xyouwang","7724","yiniu","mcyx-wxgzh","8090"].indexOf(G.pf)&&this.openAttentionSuccPanel(),Jt.addTip("获得关注礼包，请到邮箱处领取奖励！")}break;case 8:Jt.addTip("获得专属背景礼包，请到邮箱领取奖励！"),Jr.ins().toTxCover();break;case 10:this.openPfGiftPanel(!0,t.op_type),Jt.addTip("获得小游戏节日礼包，请到邮箱领取奖励！");break;case 11:this.openPfGiftPanel(!0,t.op_type),Jt.addTip("获得小游戏星级礼包，请到邮箱领取奖励！");break;case 12:if(!yt.isWX){Jt.addTip("获得礼包奖励，请到邮箱领取奖励！"),this.qqDJRewardView&&this.qqDJRewardView.isPopup()&&this.qqDJRewardView.update();break}}this.checkCollectRP(),this.checkShareGameRP(),this.checkWelfareAppLoadRp()}else if("eyouweiduan"==G.pf&&30969003==t.err_code);else switch(ce.addTip(t.err_code),t.op_type){case 3:case 5:case 11:case 10:Do.updatePfRewards(t.op_type,t.goods),this.openPfGiftPanel(!1,t.op_type,t.err_code);break;case 6:Do.updatePfRewards(t.op_type,t.goods),this.openPfVipGiftPanel(!1,t.op_type,t.err_code),this.dispatch("WELFARE_UPDATE_PANEL")}},e.toPfVip=function(){var t=new Object;t.className="m_role_pf_vip_tos",this.sendSocketMessage(t)},e.onPfVip=function(t){0==t.err_code?(Do.pfVip=t.vip_level,Do.isPfVip=1==t.is_vip,this.udpatePfVipGiftPanelLv(),this.dispatch("WELFARE_UPDATE_PANEL")):ce.addTip(t.err_code)},e.delayDestoryCollect=function(){this.collectDelayKey=_t.setTimeout(this,this.destoryCollect,null,ya.coldTime)},e.destoryCollect=function(){null!=this.collectView&&(this.collectView.destroy(),this.collectView=null),se.destroy("modules/collectGame")},e.delayDestoryShare=function(){this.shareDelayKey=_t.setTimeout(this,this.destoryShare,null,ya.coldTime)},e.destoryShare=function(){null!=this.sharePanel&&(this.sharePanel.destroy(),this.sharePanel=null),this.disposeTip(),se.destroy("modules/share")},e.delayDestoryDaliyGift=function(){this.daliyGiftDelayKey=_t.setTimeout(this,this.destoryDaliyGift,null,ya.coldTime)},e.destoryDaliyGift=function(){null!=this.giftPanel&&(this.giftPanel.close(),this.giftPanel.destroy(),this.giftPanel=null),this.vipGiftPanel&&(this.vipGiftPanel.close(),this.vipGiftPanel.destroy(),this.vipGiftPanel=null),this.attentionSuccPanel&&(this.attentionSuccPanel.close(),this.attentionSuccPanel.destroy(),this.attentionSuccPanel=null),se.destroy("modules/pfDaliyGift")},e.onMusicControl=function(t){if(1==t){Ht.soundMuted=Ht.musicMuted=!1;var e=ca.city.music;null!=e&&""!=e&&Ht.playMusic(e)}else 0==t&&(Ht.soundMuted=Ht.musicMuted=!0)},e.openQQDJRewardView=function(){this.qqDJRewardView=this.qqDJRewardView||new sM,this.qqDJRewardView.openWindow()},I(0,e,"initInfo",function(){return this._initInfo},function(t){this._initInfo=!0,Da.ins().checkActPre()}),i.ins=function(){return null==i._ins&&(i._ins=new i),i._ins},i._ins=null,i.openTimes=0,i.hasCheck=!1,i.setTimeoutId=0,i}(),gr=function(t){function e(){this.enterPanel=null,this.controlView=null,this.helpBtnView=null,this.resultPanel=null,this.handler=null,this.targetImg=null,this.sourceImg=null,this.beachKey=NaN,e.__super.call(this)}w(e,"modules.plays.beach.PlaysBeachCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_beach_action_info_toc",this,this.onActionInfo),this.addSocketListener("m_beach_action_toc",this,this.onAction),this.addSocketListener("m_beach_family_info_toc",this,this.onFamilyInfo),this.addSocketListener("m_beach_role_reward_spirit_toc",this,this.onRewardSpirit),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("COPY_EXIT",this,this.onCopyExit),this.addMessageListener("ENTER_GAME",this,this.onEnterGame)},i.onRewardSpirit=function(t){var e=t.accumulated_spirit-Vo.accumulatedSpirit;0<e&&WS.main&&sh.showBuff(e,"spirit",WS.main.x,WS.main.y-.7*WS.main.bodyHeight),Vo.accumulatedSpirit=t.accumulated_spirit,t.beach_end?this.openResultPanel():this.helpBtnView&&this.helpBtnView.update()},i.onEnterGame=function(){_t.setTimeout(_t,_t.addToSecond,[modules.plays.beach.PlaysBeachCase.ins(),this.loopCheckRp],2e3)},i.loopCheckRp=function(){Vo.checkRp(),Mo.isBeachTimeEnd()&&_t.removeFromSceond(this,this.loopCheckRp)},i.checkBeachMapCanWalk=function(){if(ua.isPlaysBeachMap()&&WS.main&&WS.main.pvo){if(1101==WS.main.pvo.state)return this.doWalk(),!1;if(1102==WS.main.pvo.state){var t=new Ee;return t.msg="你确定要终止双修吗？",t.yesFun=this.doWalk,t.yesCaller=modules.plays.beach.PlaysBeachCase.ins(),EF.showVO(t),!1}return 1103==WS.main.pvo.state?(Jt.addTip("晕眩状态下不可操作"),!1):(WS.main.pvo.state,!0)}return!1},i.doWalk=function(){this.toAction(pe.roleID,0)},i.toActionInfo=function(){var t=new Object;t.className="m_beach_action_info_tos",this.sendSocketMessage(t)},i.onActionInfo=function(t){Vo.setActionTimes(t.action_times),this.controlView&&this.controlView.update()},i.sitToOtherAction=function(t,e){this.toAction(t,0),this.handler=Q.create(this,this.callBackToRunToPoint,[e])},i.callBackToRunToPoint=function(t){var e=Se.getUnit(t+1);if(e){var i=Mo.getTargetPt(WS.main.pt,e.pt);i?WS.main.runToPoint(i,0,Q.create(this,this.runToPointComplete,[t],!0)):WS.main.runToPoint(e.pt,1,Q.create(this,this.runToPointComplete,[t],!0))}},i.runToPointComplete=function(t){this.toAction(t,Vo.curType)},i.toAction=function(t,e){var i=new Object;i.className="m_beach_action_tos",i.action_id=e,i.target_role_id=t,this.sendSocketMessage(i)},i.onAction=function(t){0==t.err_code?(t.source_role_id==pe.roleID&&Vo.updateActionTimes(t.action_id,t.times),this.doActionEffect(t.action_id,t.target_role_id,t.source_role_id),this.handler&&(this.handler.run(),this.handler=null),this.controlView&&this.controlView.update()):ce.addTip(t.err_code)},i.doActionEffect=function(t,e,i){if(!(4!=t&&3!=t||e!=pe.roleID&&i!=pe.roleID)){var s=Se.getUnit(e+1),n=Se.getUnit(i+1);if(s&&n){switch(this.targetImg=this.targetImg||new et,this.sourceImg=this.sourceImg||new et,t){case 4:this.targetImg.skin="modules/beach/beKiss.png",this.sourceImg.skin="modules/beach/kiss.png";break;case 3:this.targetImg.skin="modules/beach/beDizzy.png",this.sourceImg.skin="modules/beach/dizzy.png"}this.targetImg.pos(-58,-295,!0),s.addChild(this.targetImg),this.sourceImg.pos(-58,-295,!0),n.addChild(this.sourceImg),_t.setTimeout(modules.plays.beach.PlaysBeachCase.ins(),this.timeOutRemoveEffect,[this.targetImg,this.sourceImg],2e3)}}},i.timeOutRemoveEffect=function(t,e){t&&t.removeSelf(),e&&e.removeSelf()},i.toFamilyInfo=function(){var t=new Object;t.className="m_beach_family_info_tos",this.sendSocketMessage(t)},i.onFamilyInfo=function(t){Vo.myBeach=t.my_beach,Vo.beachFamilies=t.beach_families.sort(this.sortBeachFamilies),this.updateEnterPanel()},i.sortBeachFamilies=function(t,e){return t.id>e.id?1:t.id<e.id?-1:0},i.openEnterPanel=function(){0!=se.has("modules/beach")?(_t.clearTimeout(this.beachKey),null==this.enterPanel&&(this.enterPanel=new rM,this.enterPanel.on("undisplay",this,this.clearBeachSource)),this.enterPanel.openWindow(),this.updateEnterPanel()):se.add("modules/beach","正在加载沙滩浴资源",this,this.openEnterPanel)},i.clearBeachSource=function(){this.beachKey=_t.setTimeout(this,this.clearBeach,null,ya.coldTime)},i.clearBeach=function(){Mo.isBeachTime()?this.beachKey=_t.setTimeout(this,this.clearBeach,null,ya.coldTime):(null!=this.enterPanel&&(this.enterPanel.destroy(),this.enterPanel=null),null!=this.helpBtnView&&(this.helpBtnView.destroy(),this.helpBtnView=null),null!=this.controlView&&(this.controlView.destroy(),this.controlView=null),null!=this.sourceImg&&(this.sourceImg.destroy(),this.sourceImg=null),null!=this.targetImg&&(this.targetImg.destroy(),this.targetImg=null),null!=this.resultPanel&&(this.resultPanel.destroy(),this.resultPanel=null),se.destroy("modules/beach"))},i.updateEnterPanel=function(){this.enterPanel&&this.enterPanel.update()},i.onEnterMap=function(){if(ua.isPlaysBeachMap()){if(yr.ins().clearBeachBossUI(7),0==se.has("modules/beach"))return void se.add("modules/beach","正在加载黄金沙滩资源",this,this.onEnterMap);this.showControlView(),this.showHelpBtnView(),this.toActionInfo()}},i.onCopyExit=function(){this.helpBtnView&&this.helpBtnView.removeSelf(),this.controlView&&this.controlView.removeSelf(),this.sourceImg&&this.sourceImg.removeSelf(),this.targetImg&&this.targetImg.removeSelf()},i.showHelpBtnView=function(){this.helpBtnView=this.helpBtnView||new hM,null==this.helpBtnView.parent&&lt.uiLayer.addChild(this.helpBtnView)},i.showControlView=function(){this.controlView=this.controlView||new lM,null==this.controlView.parent&&lt.uiLayer.addChild(this.controlView)},i.openResultPanel=function(){this.resultPanel=this.resultPanel||new uM,this.resultPanel.openWindow()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),yr=function(t){function e(){this.enterPanel=null,this.isRaining=!1,this.lastTime=0,this.lsatTimes=null,this.beachBossKey=NaN,this.blood=null,this.controlView=null,this.collectScoreView=null,this.blockPanel=null,this.resultPanel=null,this.skillTipView=null,e.__super.call(this)}w(e,"modules.plays.beachBoss.PlaysBeachBossCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_beach_boss_family_damage_toc",this,this.onBossFamilyDamage),this.addSocketListener("m_beach_collect_toc",this,this.onCollect),this.addSocketListener("m_beach_sunny_info_toc",this,this.onSunnyInfo),this.addSocketListener("m_beach_attr_remaining_time_toc",this,this.onAttrRemainingTime),this.addMessageListener("BEACH_BOSS_WIN",this,this.onWin),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("COPY_EXIT",this,this.clearBeachBossUI),this.addMessageListener("BOSS_FIGHT_DEST",this,this.checkOpenBossBlood),this.addMessageListener("BOSS_FIGHT_SRC",this,this.updateBossGoal),this.addMessageListener("ENTER_GAME",this,this.onEnterGame)},i.onWin=function(t){var e=ys.getMsg(t.bc_id,t.strings,t.nums);_M.show(e)},i.onEnterGame=function(){_t.setTimeout(_t,_t.addToSecond,[modules.plays.beachBoss.PlaysBeachBossCase.ins(),this.loopCheckRp],2e3)},i.loopCheckRp=function(){Bo.checkRp(),Mo.isBossTimeEnd()&&_t.removeFromSceond(this,this.loopCheckRp)},i.toAttrRemainingTime=function(){var t=new Object;t.className="m_beach_attr_remaining_time_tos",this.sendSocketMessage(t)},i.onAttrRemainingTime=function(t){0==t.err_code?(Bo.remainingTime=t.time,this.updateCollectScoreViewInfo()):ce.addTip(t.err_code)},i.toSunnyInfo=function(){if(!Bo.isHasSunnyInfo){var t=new Object;t.className="m_beach_sunny_info_tos",this.sendSocketMessage(t)}},i.onSunnyInfo=function(t){0==t.err_code?(this.isRaining=!0,Bo.setSunnyInfo(t.collect_vals,t.collect_limits),this.startProduceNimbus(),this.showCollectScoreView()):ce.addTip(t.err_code)},i.toCollect=function(t){var e=new Object;e.className="m_beach_collect_tos",e.collect_values=t,this.sendSocketMessage(e)},i.onCollect=function(t){0==t.err_code?(Bo.familyProgress=t.family_progress,Bo.remainingTime=t.expire_time,this.updateCollectScoreViewInfo()):ce.addTip(t.err_code)},i.onBossFamilyDamage=function(t){Bo.updateBossHurt(t.all_families_damage,t.my_family_damage),this.blood&&this.blood.updatePeopleFight()},i.clearBeachBossUI=function(t){7==t&&(Bo.hideFightEffect=!1,_t.removeFromFrame(this,this.onNimbusFrame),_t.removeFromSceond(this,this.loopCheckShow),this.collectScoreView&&this.collectScoreView.removeSelf(),this.controlView&&this.controlView.removeSelf(),this.blood&&this.blood.removeSelf(),this.resultPanel&&this.resultPanel.close(),this.removeNimbus())},i.onEnterMap=function(){ua.isPlaysBeachBossMap()&&(this.loopCheckShow(),_t.addToSecond(this,this.loopCheckShow),this.toAttrRemainingTime(),this.showControlView(),Se.hideAll=!0,Bo.hideFightEffect=!0,Se.hideOtherRole(),Se.hideOtherPet())},i.loopCheckShow=function(){switch(Bo.curBeachStep=Mo.getStep(),Bo.curBeachStep){case 0:_t.removeFromSceond(this,this.loopCheckShow),this.hideControlView();break;case 1:break;case 2:this.showCollectScoreView();break;case 3:this.showCollectScoreView(),0==this.isRaining?this.toSunnyInfo():this.startProduceNimbus();break;case 4:case 5:this.isRaining=!1,Bo.familyProgress=0,this.removeNimbus(),0<Bo.remainingTime-ya.serverTime?this.updateCollectScoreViewInfo():this.hideCollectScoreView();break;case 6:this.isRaining=!1,this.showCollectScoreView();break;case 7:this.showCollectScoreView(),0==this.isRaining?this.toSunnyInfo():this.startProduceNimbus();break;case 8:this.isRaining=!1,Bo.familyProgress=0,this.removeNimbus(),0<Bo.remainingTime-ya.serverTime?this.updateCollectScoreViewInfo():this.hideCollectScoreView();break;case 9:Bo.familyProgress=0,this.removeNimbus(),0<Bo.remainingTime-ya.serverTime?this.updateCollectScoreViewInfo():this.hideCollectScoreView();break;case 10:this.showCollectScoreView();break;case 11:this.openResultPanel(),this.hideCollectScoreView(),_t.removeFromSceond(this,this.loopCheckShow)}},i.removeNimbus=function(){Fo.instance.resetRaceSprite(),_t.removeFromFrame(this,this.onNimbusFrame),Bo.isHasSunnyInfo=!1},i.startProduceNimbus=function(){Fo.instance.showRaceSprite(),this.lsatTimes=[],_t.addToFrame(this,this.onNimbusFrame)},i.onNimbusFrame=function(){var t,e=S.now(),i=0;if(Bo.checkSunnyDataIsExist())for(var s=0;s<Bo.raceTimes.length;s++)null==this.lsatTimes[s]&&(this.lsatTimes[s]=0),i=e-this.lsatTimes[s],0<(t=Bo.raceTimes[s]).id&&t&&Bo.checkSunnyDataIsExistById(t.id)&&i>=t.val?(Bo.popSunnyDataById(t.id),this.lsatTimes[s]=e,Fo.instance.addRaceNimbus(t.id)):t.id<0&&i>=t.val&&(Bo.popSunnyDataById(t.id),this.lsatTimes[s]=e,Fo.instance.addRaceNimbus(t.id));else this.removeNimbus()},i.openBossEnterPanel=function(){0!=se.has("modules/beachBoss")?(_t.clearTimeout(this.beachBossKey),null==this.enterPanel&&(this.enterPanel=new fM,this.enterPanel.on("undisplay",this,this.clearBeachBossSource)),this.enterPanel.openWindow()):se.add("modules/beachBoss","正在加载沙滩BOSS资源",this,this.openBossEnterPanel)},i.clearBeachBossSource=function(){this.beachBossKey=_t.setTimeout(this,this.clearBeachBoss,null,ya.coldTime)},i.clearBeachBoss=function(){Mo.isBossTime()?this.beachBossKey=_t.setTimeout(this,this.clearBeachBoss,null,ya.coldTime):(null!=this.enterPanel&&(this.enterPanel.destroy(),this.enterPanel=null),null!=this.blood&&(this.blood.destroy(),this.blood=null),null!=this.resultPanel&&(this.resultPanel.close(),this.resultPanel.removeSelf(),this.resultPanel.destroy(),this.resultPanel=null),null!=this.controlView&&(this.controlView.destroy(),this.controlView=null),null!=this.collectScoreView&&(this.collectScoreView.destroy(),this.collectScoreView=null),null!=this.blockPanel&&(this.blockPanel.destroy(),this.blockPanel=null),null!=this.skillTipView&&(this.skillTipView.destroy(),this.skillTipView=null),Fo.instance.destroyRaceSprite(),se.destroy("modules/beachBoss"))},i.showSkillTipView=function(){this.skillTipView=this.skillTipView||new IU,this.skillTipView.popup()},i.openResultPanel=function(){this.resultPanel=this.resultPanel||new vU,this.resultPanel.popup(),this.resultPanel.update()},i.openBlockPanel=function(){this.blockPanel=this.blockPanel||new cM,this.blockPanel.openWindow(),this.blockPanel.update()},i.showCollectScoreView=function(){this.collectScoreView=this.collectScoreView||new pM,this.collectScoreView&&null==this.collectScoreView.parent&&lt.uiLayer.addChild(this.collectScoreView),this.collectScoreView.update()},i.hideCollectScoreView=function(){this.collectScoreView&&this.collectScoreView.removeSelf()},i.updateCollectScoreViewInfo=function(){this.collectScoreView&&this.collectScoreView.update()},i.checkOpenBossBlood=function(t,e,i,s){ua.isPlaysBeachBossMap()&&this.openBossBlood(t,e,i,s)},i.openBossBlood=function(t,e,i,s){this.blood=this.blood||new dM,null==this.blood.parent&&(this.blood.reset(),lt.uiLayer.addChild(this.blood)),this.blood.bossID=t,this.blood.monsterID=i,this.blood.updateBlood(e)},i.showControlView=function(){this.controlView=this.controlView||new mM,null==this.controlView.parent&&(lt.uiLayer.addChild(this.controlView),this.controlView.y=(lt.stageHeight-this.controlView.height)/2)},i.hideControlView=function(){this.controlView&&this.controlView.parent&&this.controlView.removeSelf()},i.updateBossGoal=function(t,e){this.blood&&this.blood.updateGoal(t,e)},i.getCollectBarPos=function(){return null!=this.collectScoreView?this.collectScoreView.localToGlobal(new Tt(this.collectScoreView.spBar.x+this.collectScoreView.spBar.width/2,this.collectScoreView.spBar.y-200)):null},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),vr=function(t){function e(){this._exchangeTip=null,this._tipColor=null,this.curOpType=0,this.holdInfoPanel=null,this.helpPanel=null,this.otherInfoPanel=null,this.myHarryInfoPanel=null,this.buildPanel=null,this.myInfoPanel=null,this.resultPanel=null,this.crystalIntroPanel=null,this.myTowerPanel=null,this.myCrystalPanel=null,this.loopKey=0,this.dragonCavePanel=null,this.playsCityCavePanel=null,this.dragonChoosePanel=null,this.itemChoosePanel=null,this.sacriBookPanel=null,this.otherCrystalPanel=null,this.notePanel=null,this.revengePanel=null,this.missionPanel=null,this.monsterPanel=null,this.tipPanel=null,this.eventPanel=null,this.levelIncomeView=null,this.amethystPanel=null,this.exploreRewardPanel=null,e.__super.call(this)}w(e,"modules.plays.city.PlaysCityCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_city_info_toc",this,this.onCityInfo),this.addSocketListener("m_world_role_city_info_toc",this,this.onWorldRoleInfo),this.addSocketListener("m_role_city_search_toc",this,this.onSearch),this.addSocketListener("m_role_city_mission_change_toc",this,this.onMissionChange),this.addSocketListener("m_role_city_level_up_toc",this,this.onLvUp),this.addSocketListener("m_role_city_get_reward_toc",this,this.onGetReward),this.addSocketListener("m_role_city_get_benifit_toc",this,this.onGetBenifit),this.addSocketListener("m_city_fight_toc",this,this.onFight),this.addSocketListener("m_role_city_buy_ap_toc",this,this.onBuyAp),this.addSocketListener("m_role_city_score_change_toc",this,this.onCityScoreChange),this.addSocketListener("m_city_fight_result_toc",this,this.onFightResult),this.addSocketListener("m_role_boss_fight_result_toc",this,this.onBossFightResult),this.addSocketListener("m_world_city_logs_update_toc",this,this.onLogsUpdate),this.addSocketListener("m_role_update_event_toc",this,this.onEventUpdate),this.addSocketListener("m_role_city_do_event_toc",this,this.onDoEvent),this.addSocketListener("m_role_city_refresh_mine_toc",this,this.onReflashCrystal),this.addSocketListener("m_role_city_smelt_toc",this,this.onSmelt),this.addSocketListener("m_role_purple_mine_expedition_toc",this,this.onPurpleMineExpedition),this.addSocketListener("m_role_purple_mine_toc",this,this.onPurpleMine),this.addSocketListener("m_role_purple_mine_upgrade_toc",this,this.onPurpleMineUpgrade),this.addSocketListener("m_role_city_train_mine_toc",this,this.onBuild),this.addSocketListener("m_city_mine_get_reward_toc",this,this.onCrystalGetReward),this.addSocketListener("m_city_search_give_up_toc",this,this.onGiveUp),this.addSocketListener("m_city_mine_help_info_toc",this,this.onMineHelpInfo),this.addSocketListener("m_city_role_mine_info_toc",this,this.onRoleMineInfo),this.addSocketListener("m_city_world_update_toc",this,this.onWorldUpdate),this.addSocketListener("m_role_dragon_hole_info_toc",this,this.onCaveInfo),this.addSocketListener("m_role_dragon_hole_active_toc",this,this.onUnlockCave),this.addSocketListener("m_role_dragon_hole_upgrade_toc",this,this.onCaveUp),this.addSocketListener("m_role_dragon_hole_block_active_toc",this,this.onUnlockCaveBlock),this.addSocketListener("m_role_dragon_hole_sacrifice_toc",this,this.onCaveSacrifice),this.addSocketListener("m_role_dragon_hole_reward_toc",this,this.onGainCaveReward),this.addSocketListener("m_role_dragon_hole_bless_upgrade_toc",this,this.onCaveGragonBless),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.updateByRoleScoreChange),this.addMessageListener("ROLE_SIMPLE_INFO",this,this.onRoleSimpleInfo),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("PLAYS_CITY_CRYSTAL_FAMILY_HELP_PANEL",this,this.toMineHelpInfo),this.addMessageListener("PLAYS_CITY_OPEN_MY_CRYSTAL_PANEL",this,this.openMyCrystalPanel),this.addMessageListener("PLAYS_CITY_CAVE_BLESS",this,this.toOpenCave)},i.onEnterGame=function(){Ho.isCityOpen()&&(_t.setTimeout(this,this.toPurpleMine,null,St.ENTER_DELAY),_t.setTimeout(this,this.toWorldRoleInfo,null,St.ENTER_DELAY),_t.setTimeout(this,this.toCaveInfo,null,St.ENTER_DELAY))},i.updateByRoleScoreChange=function(t){!t||8!=t.id&&15!=t.id||(this.updateMyTowerPanel(),this.updateMyCrystalPanel(),Wo.checkAllRP())},i.toPurpleMineUpgrade=function(){var t=new Object;t.className="m_role_purple_mine_upgrade_tos",this.sendSocketMessage(t)},i.onPurpleMineUpgrade=function(t){0==t.err_code?(Ho.purpleMineLevel=t.level,this.dispatch("PLAYS_UPDATE_PANEL"),this.updateAmethystPanel()):ce.addTip(t.err_code)},i.toPurpleMine=function(){var t=new Object;t.className="m_role_purple_mine_tos",this.sendSocketMessage(t)},i.onPurpleMine=function(t){0==t.err_code?(Ho.purpleMineExpeditionTs=t.expedition_ts,Ho.purpleMineLevel=t.level,Ho.purpleMineMapList=t.map_list,Ho.purpleMineMoraleTs=t.morale_ts,this.dispatch("PLAYS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toPurpleMineExpedition=function(){var t=new Object;t.className="m_role_purple_mine_expedition_tos",this.sendSocketMessage(t)},i.onPurpleMineExpedition=function(t){0==t.err_code?(Ho.expeditionRewards=t.reward,0==Ho.expeditioning&&this.openExploreRewardPanel(),Ho.purpleMineExpeditionTs=t.expedition_ts,this.updateAmethystPanel(),Wo.checkAllRP(),this.dispatch("PLAYS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toSmelt=function(){var t=new Object;t.className="m_role_city_smelt_tos",this.sendSocketMessage(t)},i.onSmelt=function(t){if(0==t.err_code){Jt.addTip("熔炼成功，紫晶币+"+Ho.mainVO.smeltProduct);var e=Ho.getCityLvVO();e&&Jt.addTip("当日剩余熔炼次数"+(e.smelt-t.new_times)+"次"),Ho.smeltTimes=t.new_times,this.updateMyTowerPanel(),this.dispatch("PLAYS_UPDATE_PANEL")}else ce.addTip(t.err_code)},i.onCityInfo=function(t){Ho.curVigor=t.action_point,Ho.missionInfo=t.mission_infos,Ho.curCityLv=t.city_level,Ho.curCityExp=t.city_exp,Ho.searchTime=t.search_time,Ho.getBenifitTime=t.benifit_time,Ho.curBuyVigorTime=t.buy_time,Ho.smeltTimes=t.smelt_times,Ho.curEvent=t.event,this.dispatch("PLAYS_UPDATE_PANEL"),Wo.checkAllRP()},i.toWorldRoleInfo=function(){var t=new Object;t.className="m_world_role_city_info_tos",this.sendSocketMessage(t)},i.onWorldRoleInfo=function(t){0==t.err_code?(Ho.myCrystalInfo=t.mines,Ho.setSearchList(t.search_list),Ho.logs=t.logs,this.dispatch("PLAYS_UPDATE_PANEL"),this.updateMyCrystalPanel(),Wo.checkAllRP()):ce.addTip(t.err_code)},i.toSearch=function(){if(pe.getScore(15)<Ho.searchMoney)Jt.addTip("紫晶币不足");else{var t=new Object;t.className="m_role_city_search_tos",this.sendSocketMessage(t)}},i.onSearch=function(t){0==t.err_code?(Ho.searchTime=t.search_time,Ho.otherCityInfo=t.search_role,Jt.addTip("寻找到【"+Ho.otherCityInfo.name+"】的符域"),this.dispatch("PLAYS_UPDATE_PANEL"),this.dispatch("PLAYS_CITY_SCENE_MOVE_SIDE",!1)):ce.addTip(t.err_code)},i.toExchangeScore=function(t,e,i){void 0===t&&(t=1),void 0===e&&(e=""),void 0===i&&(i="#f4f1b2");var s=new Object;s.className="m_role_city_exchange_score_tos",s.num=t,this._exchangeTip=e,this._tipColor=i,this.sendSocketMessage(s)},i.onExchangeScore=function(t){0==t.err_code?(""!=this._exchangeTip&&Jt.addTip(this._exchangeTip,this._tipColor),this.dispatch("PLAYS_UPDATE_PANEL"),this.updateMyTowerPanel(),Wo.checkAllRP()):ce.addTip(t.err_code)},i.onMissionChange=function(t){Ho.updateMissionInfo(t.mission_infos),this.updateMissionPanel(),Wo.checkAllRP()},i.toLvUp=function(){var t=new Object;t.className="m_role_city_level_up_tos",this.sendSocketMessage(t)},i.onLvUp=function(t){0==t.err_code?(Jt.addTip("升级成功"),Ho.curCityExp=t.exp,Ho.curCityLv=t.city_level,this.dispatch("PLAYS_UPDATE_PANEL"),this.updateMyTowerPanel(),Wo.checkAllRP(),this.toCaveInfo()):ce.addTip(t.err_code)},i.toGetReward=function(t){var e=new Object;e.className="m_role_city_get_reward_tos",e.id=t,this.sendSocketMessage(e)},i.onGetReward=function(t){0==t.err_code?(Jt.addTip("领取成功"),Ho.updateMissionInfo(t.update_mission),this.updateMissionPanel(),Wo.checkAllRP()):ce.addTip(t.err_code)},i.toFight=function(t,e,i){var s=new Object;s.className="m_city_fight_tos",s.id=t,s.fight_type=e,s.mine_id=i,this.sendSocketMessage(s)},i.onFight=function(t){0==t.err_code||ce.addTip(t.err_code)},i.toGetBenifit=function(){var t=new Object;t.className="m_role_city_get_benifit_tos",this.sendSocketMessage(t)},i.onGetBenifit=function(t){0==t.err_code?(Jt.addTip("领取成功"),Ho.getBenifitTime=t.benifit_time,this.updateMyTowerPanel(),this.dispatch("PLAYS_UPDATE_PANEL"),Wo.checkAllRP()):ce.addTip(t.err_code)},i.toBuyAp=function(t){var e=new Object;e.className="m_role_city_buy_ap_tos",e.num=1,this.sendSocketMessage(e)},i.onBuyAp=function(t){if(0==t.err_code){var e=t.update_ap-Ho.curVigor;Jt.addTip("购买成功，体力+"+e),Ho.curVigor=t.update_ap,Ho.curBuyVigorTime=t.buy_time;Ho.mainVO.maxBuyVigorTime,Ho.curBuyVigorTime;this.dispatch("PLAYS_UPDATE_PANEL"),Wo.checkAllRP()}else ce.addTip(t.err_code)},i.onFightNotify=function(t){Ho.updateLogs(t.update_logs),t.update_logs[0]&&Wo.checkRP_log(t.update_logs[0])&&Nt.show("RP_CITY_BE_FIGHT"),this.dispatch("PLAYS_UPDATE_PANEL"),this.updateNotePanel(),this.updateMyTowerPanel(),this.updateMyCrystalPanel(),Wo.checkAllRP()},i.onWorldUpdate=function(t){Ho.updateMyCrystalInfo(t.update_mine),Ho.updateSearchCrystal(t.update_search,t.del_search_role),Ho.updateLogs(t.update_logs),this.updateMyTowerPanel(),this.updateMyCrystalPanel(),Wo.checkAllRP()},i.onCityScoreChange=function(t){var e;for(var i in t.score_list)switch((e=t.score_list[i]).id){case 1:Ho.curVigor=e.val;break;case 2:Ho.curCityExp=e.val;break;case 5:Ho.searchTime=e.val;break;case 6:Ho.getBenifitTime=e.val;break;case 7:Ho.curBuyVigorTime=e.val}this.dispatch("PLAYS_UPDATE_PANEL"),this.updateMyTowerPanel(),this.updateMyCrystalPanel(),Wo.checkAllRP()},i.onFightResult=function(t){var e=new sa;e.result=1==t.result?2:1,e.mapID=ca.mapID,e.goods=t.rewards,e.leftFunCaller=modules.plays.city.PlaysCityCase.ins(),e.leftBtnFun=modules.plays.city.PlaysCityCase.ins().resultCallBack,e.timeOutCaller=modules.plays.city.PlaysCityCase.ins(),e.timeOutFun=modules.plays.city.PlaysCityCase.ins().resultCallBack,2!=e.result||t.dst_id!=pe.roleID&&2!=t.fight_type||(e.msgTitle="你成功驱逐了水晶掠夺者",e.titleY=490,e.leftBtnLabel="确定"),ia.show(e)},i.onBossFightResult=function(t){var e=new sa;if(2==t.fight_result&&24005==t.map_id){var i=new Object;i.className="p_tkv",i.id=10201378,i.type=5,i.val=0,t.rewards=[i],Wo.checkAllRP(),e.goodsMsg="矿工工作效率提高，产出提高"}e.result=t.fight_result,e.mapID=t.map_id,e.goods=t.rewards,e.leftFunCaller=modules.plays.city.PlaysCityCase.ins(),e.leftBtnFun=modules.plays.city.PlaysCityCase.ins().resultCallBack,e.timeOutCaller=modules.plays.city.PlaysCityCase.ins(),e.timeOutFun=modules.plays.city.PlaysCityCase.ins().resultCallBack,ia.show(e)},i.resultCallBack=function(){el.ins().toExit(),me.linkTo(11702)},i.onLogsUpdate=function(t){Ho.updateLogs(t.update_log),this.dispatch("PLAYS_UPDATE_PANEL"),this.updateNotePanel(),Wo.checkAllRP()},i.onRoleSimpleInfo=function(t){Ho.curRevengeRoleID==t&&this.revengePanel&&(this.revengePanel.roleInfo=oa.getRoleOtherSimpleInfo(Ho.curRevengeRoleID))},i.onEventUpdate=function(t){Ho.curEvent=t.event,this.updateMyTowerPanel()},i.toDoEvent=function(t){var e=new Object;e.className="m_role_city_do_event_tos",e.answer=t,this.sendSocketMessage(e)},i.onDoEvent=function(t){0==t.err_code?(Ho.curEvent=t.update_event,this.updateMyTowerPanel(),this.updateEventPanel(t.result),Wo.checkAllRP()):ce.addTip(t.err_code)},i.toReflashCrystal=function(t){var e=new Object;e.className="m_role_city_refresh_mine_tos",e.type=t,this.curOpType=t,this.sendSocketMessage(e)},i.onReflashCrystal=function(t){0==t.err_code?(Ho.curReflashType=t.type_id,Ho.curReflashTime=t.refresh_time,this.updateBuildPanel(),1==this.curOpType&&Jt.addTip("刷新成功")):ce.addTip(t.err_code)},i.toBuild=function(t){var e=new Object;e.className="m_role_city_train_mine_tos",e.id=t,this.sendSocketMessage(e)},i.onBuild=function(t){0==t.err_code?(Ho.addMyCrystalInfo(t.mine),this.updateMyCrystalPanel(),Wo.checkAllRP(),Jt.addTip("成功建造水晶，并获得【符文礼包】")):ce.addTip(t.err_code)},i.toCrystalGetReward=function(t){var e=new Object;e.className="m_city_mine_get_reward_tos",e.mine_id=t,this.sendSocketMessage(e)},i.onCrystalGetReward=function(t){0==t.err_code?(Jt.addTip("收成成功"),Ho.delMyCrystalInfo(t.mine_id),this.closeResultPanel(),this.updateMyCrystalPanel(),Wo.checkAllRP()):ce.addTip(t.err_code)},i.toGiveUp=function(t){var e=new Object;e.className="m_city_search_give_up_tos",e.role_id=t,this.sendSocketMessage(e)},i.onGiveUp=function(t){0==t.err_code?(Ho.delMyHarryCrystal(t.role_id),Jt.addTip("放弃成功"),this.updateMyCrystalPanel(),this.closeMyHarryInfoPanel()):ce.addTip(t.err_code)},i.toMineHelpInfo=function(t){if(t){var e=new Object;e.className="m_city_mine_help_info_tos",e.mine_id=t.mineID,e.role_id=t.roleID,this.sendSocketMessage(e)}},i.onMineHelpInfo=function(t){0==t.err_code?this.openHelpPanel(t):ce.addTip(t.err_code)},i.toRoleMineInfo=function(t){var e=new Object;e.className="m_city_role_mine_info_tos",e.role_id=t,this.sendSocketMessage(e)},i.onRoleMineInfo=function(t){0==t.err_code?(Ho.otherCityCrystalInfo=t,this.updateOtherCrystalPanel()):ce.addTip(t.err_code)},i.toCaveInfo=function(){var t=new Object;t.className="m_role_dragon_hole_info_tos",this.sendSocketMessage(t)},i.onCaveInfo=function(t){0==t.err_code?(Ho.setCaveInfo(t),Wo.checkDragonCaveOpenRP(),Wo.checkDragonCaveUpRP(),Wo.checkDragonCaveBlessRP(),Wo.checkDragonCaveRewardRP(),this.updateCavePanel(),this.dispatch("PLAYS_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toUnlockCave=function(){var t=new Object;t.className="m_role_dragon_hole_active_tos",this.sendSocketMessage(t)},i.onUnlockCave=function(t){0==t.err_code?this.closeCaveOpenPanel():ce.addTip(t.err_code)},i.toCaveUp=function(){var t=new Object;t.className="m_role_dragon_hole_upgrade_tos",this.sendSocketMessage(t)},i.onCaveUp=function(t){0==t.err_code?Jt.addTip("升级成功"):ce.addTip(t.err_code)},i.toUnlockCaveBlock=function(){var t=new Object;t.className="m_role_dragon_hole_block_active_tos",this.sendSocketMessage(t)},i.onUnlockCaveBlock=function(t){0==t.err_code?Jt.addTip("解锁成功"):ce.addTip(t.err_code)},i.toCaveSacrifice=function(t){var e=new Object;e.className="m_role_dragon_hole_sacrifice_tos",1==(e.action=t)?(e.tpye=Ho._sacrificeDragonType,1==Ho._sacrificeDragonType&&Jt.addTip("献祭完成。请领取奖励"),e.block_info=Ho._sacrificeItemArr):(e.tpye=0,e.block_info=[]),this.sendSocketMessage(e)},i.onCaveSacrifice=function(t){0==t.err_code||ce.addTip(t.err_code)},i.toGainCaveReward=function(){var t=new Object;t.className="m_role_dragon_hole_reward_tos",this.sendSocketMessage(t)},i.onGainCaveReward=function(t){if(0==t.err_code){var e=t.reward_info[0];e&&Jt.addTip("领取成功，龙灵结晶增加"+e.val)}else ce.addTip(t.err_code)},i.toCaveGragonBless=function(){var t=new Object;t.className="m_role_dragon_hole_bless_upgrade_tos",this.sendSocketMessage(t)},i.onCaveGragonBless=function(t){0==t.err_code||ce.addTip(t.err_code)},i.toGetAllInfo=function(){wl.getInstance().toInfo()},i.openHoldInfoPanel=function(t){t&&t.history&&1<t.history.length?(this.holdInfoPanel=this.holdInfoPanel||new IM,this.holdInfoPanel.data=t,this.holdInfoPanel.openWindow()):Jt.addTip("其他玩家没有掠夺过该水晶")},i.closeHoldInfoPanel=function(){this.holdInfoPanel&&this.holdInfoPanel.isPopup()&&this.holdInfoPanel.closeWindow()},i.openHelpPanel=function(t){t&&(pe.roleID==t.own_id||pe.roleID==t.occupy_id?Jt.addTip("事件双方不能参与协助"):t.own_id==t.occupy_id?Jt.addTip("掠夺者已被驱逐"):(this.helpPanel=this.helpPanel||new yM,this.helpPanel.update(t),this.helpPanel.openWindow(null,!0)))},i.openOtherInfoPanel=function(t){this.otherInfoPanel=this.otherInfoPanel||new CM,this.otherInfoPanel.data=t,this.otherInfoPanel.openWindow()},i.openMyHarryInfoPanel=function(t){this.myHarryInfoPanel=this.myHarryInfoPanel||new bM,this.myHarryInfoPanel.data=t,this.myHarryInfoPanel.openWindow()},i.closeMyHarryInfoPanel=function(){this.myHarryInfoPanel&&this.myHarryInfoPanel.isPopup()&&this.myHarryInfoPanel.closeWindow()},i.openBuildPanel=function(t){this.buildPanel=this.buildPanel||new gM,this.buildPanel.index=t,this.buildPanel.update(),this.buildPanel.openWindow(null,!0),modules.plays.city.PlaysCityCase.ins().toReflashCrystal(0)},i.updateBuildPanel=function(){this.buildPanel&&this.buildPanel.isPopup()&&this.buildPanel.update()},i.openMyInfoPanel=function(t){this.myInfoPanel=this.myInfoPanel||new SM,this.myInfoPanel.data=t,this.myInfoPanel.openWindow()},i.openResultPanel=function(t){this.resultPanel=this.resultPanel||new TM,this.resultPanel.data=t,this.resultPanel.openWindow()},i.closeResultPanel=function(){this.resultPanel&&this.resultPanel.isPopup()&&this.resultPanel.closeWindow()},i.openCrystalIntroPanel=function(){this.crystalIntroPanel=this.crystalIntroPanel||new wM,this.crystalIntroPanel.openWindow()},i.openMyTowerPanel=function(){this.myTowerPanel=this.myTowerPanel||new jM,this.myTowerPanel.update(),this.myTowerPanel.openWindow()},i.updateMyTowerPanel=function(){this.myTowerPanel&&this.myTowerPanel.isPopup()&&this.myTowerPanel.update()},i.closeMyTowerPanel=function(){this.myTowerPanel&&this.myTowerPanel.isPopup()&&this.myTowerPanel.closeWindow()},i.openMyCrystalPanel=function(){se.has("modules/playsCity")?(this.myCrystalPanel=this.myCrystalPanel||new BM,this.myCrystalPanel.openWindow(),this.myCrystalPanel.update()):se.add("modules/playsCity","正在加载符域资源",this,this.openMyCrystalPanel)},i.updateMyCrystalPanel=function(){this.myCrystalPanel&&this.myCrystalPanel.isPopup()&&this.myCrystalPanel.update()},i.delayCheckCrystalReward=function(){var t=Wo.delayCheckCrystalTime;0<t&&(0<this.loopKey&&_t.clearTimeout(this.loopKey),t>ya.serverTime?this.loopKey=_t.setTimeout(modules.plays.city.PlaysCityCase.ins(),this.loopCallBackRPCrystalReward,null,1e3*(t-ya.serverTime)):Wo.checkAllRP())},i.loopCallBackRPCrystalReward=function(){Wo.checkAllRP()},i.closeMyCrystalPanel=function(){this.myCrystalPanel&&this.myCrystalPanel.isPopup()&&this.myCrystalPanel.closeWindow()},i.toOpenCave=function(t){void 0===t&&(t=0),Ho.isCityOpen()?0<Ho._openFlag?this.openCavePanel(t):this.openCaveOpenPanel():Jt.addTip("请先开启符域")},i.openCaveOpenPanel=function(){se.has("modules/playsCity")?(this.dragonCavePanel=this.dragonCavePanel||Aa.getIns(42e3,"city.PlaysCityCaveOpenPanel"),this.dragonCavePanel.openWindow(),this.dragonCavePanel.update()):se.add("modules/playsCity","正在加载符域资源",this,this.openCaveOpenPanel)},i.closeCaveOpenPanel=function(){this.dragonCavePanel&&this.dragonCavePanel.parent&&this.dragonCavePanel.closeWindow()},i.openCavePanel=function(t){se.has("modules/playsCity")?(null==this.playsCityCavePanel&&(this.playsCityCavePanel=Aa.getIns(42e3,"city.PlaysCityCavePanel")),this.playsCityCavePanel&&null==this.playsCityCavePanel.parent&&this.playsCityCavePanel.openWindow(),this.playsCityCavePanel.chooseTab(t)):se.add("modules/playsCity","正在加载符域资源",this,this.openCavePanel,[t])},i.updateCavePanel=function(){this.playsCityCavePanel&&this.playsCityCavePanel.isPopup()&&this.playsCityCavePanel.update()},i.openDragonChoosePanel=function(){this.dragonChoosePanel=this.dragonChoosePanel||Aa.getIns(42e3,"city.PlaysCityCaveDragonChoosePanel"),this.dragonChoosePanel.openWindow(),this.dragonChoosePanel.update()},i.openItemChoosePanel=function(){this.itemChoosePanel=this.itemChoosePanel||Aa.getIns(42e3,"city.PlaysCityCaveItemChoosePanel"),this.itemChoosePanel.openWindow(),this.itemChoosePanel.update()},i.openSacriBookPanel=function(){this.sacriBookPanel=this.sacriBookPanel||Aa.getIns(42e3,"city.PlaysCityCaveSacriBookPanel"),this.sacriBookPanel.openWindow(),this.sacriBookPanel.update()},i.openOtherCrystalPanel=function(){this.otherCrystalPanel=this.otherCrystalPanel||new UM,this.otherCrystalPanel.openWindow(),this.otherCrystalPanel.update()},i.updateOtherCrystalPanel=function(){this.otherCrystalPanel&&this.otherCrystalPanel.isPopup()&&this.otherCrystalPanel.update()},i.openCityNotePanel=function(){this.notePanel=this.notePanel||new FM,this.notePanel.update(),this.notePanel.openWindow()},i.updateNotePanel=function(){this.notePanel&&this.notePanel.isPopup()&&this.notePanel.update()},i.openRevengePanel=function(t){this.revengePanel=this.revengePanel||new GM,this.revengePanel.log=t,this.revengePanel.openWindow()},i.openMissionPanel=function(){this.missionPanel=this.missionPanel||new NM,this.missionPanel.openWindow(),this.missionPanel.update()},i.updateMissionPanel=function(){this.missionPanel&&this.missionPanel.isPopup()&&this.missionPanel.update()},i.openMonsterPanel=function(t){this.monsterPanel=this.monsterPanel||new VM,this.monsterPanel.openWindow(),this.monsterPanel.monsterID=t},i.openTipPanel=function(){this.tipPanel=this.tipPanel||new qM,this.tipPanel.openWindow()},i.openEventPanel=function(){Ho.curEvent&&0<Ho.curEvent.id&&(this.eventPanel=this.eventPanel||new RM,this.eventPanel.eventID=Ho.curEvent.id,this.eventPanel.openWindow())},i.updateEventPanel=function(t){this.eventPanel&&this.eventPanel.isPopup()&&(this.eventPanel.result=t)},i.openLevelIncomeView=function(){this.levelIncomeView=this.levelIncomeView||new LM,this.levelIncomeView.openWindow(),this.levelIncomeView.update()},i.openAmethystPanel=function(){this.amethystPanel=this.amethystPanel||new kM,this.amethystPanel.openWindow(),this.amethystPanel.update()},i.updateAmethystPanel=function(){this.amethystPanel&&this.amethystPanel.update()},i.openExploreRewardPanel=function(){this.exploreRewardPanel=this.exploreRewardPanel||new OM,this.exploreRewardPanel.openWindow(),this.exploreRewardPanel.update()},i.destoryPanel=function(){this.myTowerPanel&&(this.myTowerPanel.destroy(),this.myTowerPanel=null),this.otherCrystalPanel&&(this.otherCrystalPanel.destroy(),this.otherCrystalPanel=null),this.myCrystalPanel&&(this.myCrystalPanel.closeWindow(),this.myCrystalPanel.destroy(),this.myCrystalPanel=null),this.revengePanel&&(this.revengePanel.destroy(),this.revengePanel=null),this.missionPanel&&(this.missionPanel.destroy(),this.missionPanel=null),this.monsterPanel&&(this.monsterPanel.destroy(),this.monsterPanel=null),this.tipPanel&&(this.tipPanel.destroy(),this.tipPanel=null),this.eventPanel&&(this.eventPanel.destroy(),this.eventPanel=null),this.notePanel&&(this.notePanel.closeWindow(),this.notePanel.destroy(),this.notePanel=null),this.resultPanel&&(this.resultPanel.closeWindow(),this.resultPanel.destroy(),this.resultPanel=null),this.myInfoPanel&&(this.myInfoPanel.closeWindow(),this.myInfoPanel.destroy(),this.myInfoPanel=null),this.buildPanel&&(this.buildPanel.closeWindow(),this.buildPanel.destroy(),this.buildPanel=null),this.myHarryInfoPanel&&(this.myHarryInfoPanel.closeWindow(),this.myHarryInfoPanel.destroy(),this.myHarryInfoPanel=null),this.otherInfoPanel&&(this.otherInfoPanel.closeWindow(),this.otherInfoPanel.destroy(),this.otherInfoPanel=null),this.helpPanel&&(this.helpPanel.closeWindow(),this.helpPanel.destroy(),this.helpPanel=null),this.holdInfoPanel&&(this.holdInfoPanel.closeWindow(),this.holdInfoPanel.destroy(),this.holdInfoPanel=null),this.levelIncomeView&&(this.levelIncomeView.closeWindow(),this.levelIncomeView.destroy(),this.levelIncomeView=null),this.amethystPanel&&(this.amethystPanel.closeWindow(),this.amethystPanel.destroy(),this.amethystPanel=null),this.exploreRewardPanel&&(this.exploreRewardPanel.closeWindow(),this.exploreRewardPanel.destroy(),this.exploreRewardPanel=null),this.crystalIntroPanel&&(this.crystalIntroPanel.closeWindow(),this.crystalIntroPanel.destroy(),this.crystalIntroPanel=null)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Ir=function(t){function e(){this.id=0,this.name=null,this.pastTimeDesc=null,this.level=0,this.color=0,this.path=null,this.title=null,this.price=null,this.desc=null,this.platform=null,this.tempNum=0,this._priceDic=null,this._htmlPastTimeDesc=null,e.__super.call(this)}w(e,"modules.pack.vo.BaseItemVO",ue);var i=e.prototype;return I(0,i,"realMaxico",function(){return"modules/goods/maxico/"+this.path+".png"}),I(0,i,"priceDic",function(){if(!this._priceDic){this._priceDic=new Object;for(var t=this.price.split("|"),e=0;e<t.length;e++){var i=t[e].split(",");this._priceDic[i[0]]=i[1]}}return this._priceDic}),I(0,i,"htmlPastTimeDesc",function(){if(!this._htmlPastTimeDesc||""==this._htmlPastTimeDesc){var t;this._htmlPastTimeDesc="";var e,i=this.pastTimeDesc.split("|");for(var s in i)-1!=(e=i[s]).indexOf("&&")?(t=e.split("&&"),this._htmlPastTimeDesc+=Z.span(t[0],t[1])):this._htmlPastTimeDesc+=e}return this._htmlPastTimeDesc}),e}(),wr=function(t){function e(){this.petExploreSelView=null,this.petExploreHandlerView=null,this.petExploreRewardView=null,e.__super.call(this)}w(e,"modules.plays.petExplore.PetExploreCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.toDelayInfo),this.addMessageListener("PET_EXPLORE_HANDLER",this,this.openPetExploreHandler),this.addMessageListener("PET_EXPLORE_HANDLER_CLOSE",this,this.closeExploreHandlerView),this.addMessageListener("PET_EXPLORE_SEL",this,this.openPetExploreSelHandler),this.addSocketListener("m_pet_adventure_info_toc",this,this.onPetAdventureInfo),this.addSocketListener("m_pet_adventure_refresh_toc",this,this.onPetAdventureRefresh),this.addSocketListener("m_pet_adventure_reward_toc",this,this.onPetAdventureReward),this.addSocketListener("m_pet_adventure_send_toc",this,this.onPetAdventureSend),this.addSocketListener("m_pet_adventure_cancel_toc",this,this.onPetAdventureCancel)},i.toPerAdventureCancel=function(t){var e=new Object;e.className="m_pet_adventure_cancel_tos",e.task_index=t,this.sendSocketMessage(e)},i.onPetAdventureCancel=function(t){0<t.err_code?ce.addTip(t.err_code):(qo.handlerTaskUpdate(t.new_task),this.dispatch("PET_EXPLORE_UPDATE"),qo.resetTimeToCheckRP())},i.openPetExploreSelHandler=function(t){this.petExploreSelView=this.petExploreSelView||new wB,this.petExploreSelView.update(t),this.petExploreSelView.parent||this.petExploreSelView.openWindow()},i.destoryView=function(){this.petExploreSelView&&(this.petExploreSelView.destroy(),this.petExploreSelView=null)},i.openPetExploreHandler=function(t){this.petExploreHandlerView=this.petExploreHandlerView||new $M,this.petExploreHandlerView.parent||this.petExploreHandlerView.openWindow(),this.petExploreHandlerView.data=t},i.closeExploreHandlerView=function(){this.petExploreHandlerView&&this.petExploreHandlerView.parent&&this.petExploreHandlerView.closeWindow()},i.toPetAdventureSend=function(t,e,i){var s=new Object;s.className="m_pet_adventure_send_tos",s.task_index=t,s.task_time=i,s.pet_id=e,this.sendSocketMessage(s)},i.onPetAdventureSend=function(t){0<t.err_code?ce.addTip(t.err_code):(qo.handlerTaskUpdate(t.new_task),this.dispatch("PET_EXPLORE_UPDATE"),this.openPetExploreHandler(t.new_task),Jt.addTip("仙宠成功派遣"),qo.resetTimeToCheckRP())},i.toPetAdventureReward=function(t){var e=new Object;e.className="m_pet_adventure_reward_tos",e.task_index=t,this.sendSocketMessage(e)},i.onPetAdventureReward=function(t){0<t.err_code?ce.addTip(t.err_code):(this.petExploreRewardView=this.petExploreRewardView||new JM,this.petExploreRewardView.parent||this.petExploreRewardView.openWindow(),this.petExploreRewardView.data=t,qo.handlerTaskUpdate(t.new_task),this.dispatch("PET_EXPLORE_UPDATE"),qo.resetTimeToCheckRP())},i.toPetAdventureRefresh=function(t){var e=new Object;e.className="m_pet_adventure_refresh_tos",e.task_index=t,this.sendSocketMessage(e)},i.onPetAdventureRefresh=function(t){0<t.err_code?ce.addTip(t.err_code):(qo.handlerTaskUpdate(t.new_task),this.dispatch("PET_EXPLORE_UPDATE"),Jt.addTip("刷新派遣任务成功"),qo.resetTimeToCheckRP())},i.toPetAdventureInfo=function(){if(Ne.isOpenPetExplore()){var t=new Object;t.className="m_pet_adventure_info_tos",this.sendSocketMessage(t)}},i.onPetAdventureInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(qo.tasks=t.tasks,this.dispatch("PET_EXPLORE_UPDATE"),qo.resetTimeToCheckRP())},i.toDelayInfo=function(){_t.setTimeout(this,this.toPetAdventureInfo,null,St.ENTER_DELAY),this.addMessageListener("ROLE_LEVEL_UP",this,this.onRoleLvUp)},i.onRoleLvUp=function(){55==pe.myLevel&&this.toPetAdventureInfo()},i.toPetCancel=function(t){var e=new Ee;e.msg="终止探险后不会获得任何奖励，探险时间也将重置，是否确认终止？",e.yesCaller=modules.plays.petExplore.PetExploreCase.ins(),e.yesFun=modules.plays.petExplore.PetExploreCase.ins().toPerAdventureCancel,e.yesArgs=[t],EF.showVO(e)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),br=function(t){function e(){this._playPanel=null,this._playKey=NaN,e.__super.call(this)}w(e,"modules.plays.PlaysModule",l);var i=e.prototype;return i.initListeners=function(){vr.ins(),yr.ins(),gr.ins(),this.addMessageListener("OPEN_PLAYS_PANEL",this,this.openPlaysPanel),this.addMessageListener("PLAYS_UPDATE_PANEL",this,this.updatePlaysPanel),this.addMessageListener("PLAYS_CLOSE_PANEL",this,this.closePlaysPanel),this.addMessageListener("PLAYS_CITY_SCENE_MOVE_SIDE",this,this.cityViewMoveSide),this.addMessageListener("PET_TOWER_UPDATE",this,this.updatePetTower),this.addMessageListener("PET_EXPLORE_UPDATE",this,this.updatePetExplore),this.addMessageListener("TREASURE_UPDATE",this,this.updateTreasure),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("COPY_QUICK_FINISH",this,this.updateBailingyuanView)},i.updateBailingyuanView=function(){this._playPanel&&this._playPanel.parent&&this._playPanel.updateViewByIndex(4)},i.onEnterGame=function(){Yo.checkBaiLingYuanRP()},i.updatePetTower=function(t){1==t&&this._playPanel&&this._playPanel.parent&&this._playPanel.updateViewByIndex(5)},i.updatePetExplore=function(){this._playPanel&&this._playPanel.parent&&this._playPanel.updateViewByIndex(3)},i.updateTreasure=function(){this._playPanel&&this._playPanel.parent&&this._playPanel.updateViewByIndex(8)},i.openPlaysPanel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),se.has("modules/plays")?(_t.clearTimeout(this._playKey),null==this._playPanel&&(this._playPanel=new oF,this._playPanel.on("undisplay",this,this.clearPlaySource)),this._playPanel.checkOpen(t,e)):se.add("modules/plays","正在加载玩法资源",this,this.openPlaysPanel,[t,e])},i.clearPlaySource=function(){this._playKey=_t.setTimeout(this,this.clearPlay,null,ya.coldTime+5e3)},i.clearPlay=function(){null!=this._playPanel&&(this._playPanel.destroy(),this._playPanel=null),se.destroy("modules/plays")},i.updatePlaysPanel=function(){this._playPanel&&this._playPanel.displayedInStage&&this._playPanel.update()},i.closePlaysPanel=function(){this._playPanel&&this._playPanel.closeWindow()},i.cityViewMoveSide=function(t){this._playPanel&&this._playPanel.cityViewMoveSide(t)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Sr=function(t){function e(){this.redPointView=null,this.resView=null,this.huntPos=null,this.goods=[],e.__super.call(this)}w(e,"modules.plays.treasure.TreasureCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_treasure_info_toc",this,this.onTreasureInfo),this.addSocketListener("m_treasure_hunt_toc",this,this.onTreasureHunt),this.addSocketListener("m_treasure_auto_hunt_toc",this,this.onTreasureAutoHunt),this.addSocketListener("m_treasure_refresh_toc",this,this.onTreasureRefresh),this.addSocketListener("m_treasure_set_red_pint_toc",this,this.onTreasureSetRedPoint),this.addMessageListener("OPEN_TREASURE_RP_VIEW",this,this.openRedPointView),this.addMessageListener("OPEN_TREASURE_LOG_VIEW",this,this.openLogView),this.addMessageListener("OPEN_TREASURE_LIST_VIEW",this,this.openListView),this.addMessageListener("ENTER_GAME",this,this.onEnterGame)},i.onEnterGame=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){this.addMessageListener("ROLE_LEVEL_UP",this,this.checkLvUp),this.checkLvUp()},i.checkLvUp=function(){Ne.isOpenTreasure()&&(this.toTreasureInfo(),this.addMessageListener("BAGDATA_CHANGE",Xo,Xo.checkRedPoint),this.removeMessageListener("ROLE_LEVEL_UP",this,this.checkLvUp))},i.openRedPointView=function(){this.redPointView=this.redPointView||new hF,this.redPointView.parent||this.redPointView.openWindow()},i.openLogView=function(){Ja.ins().showReCordPanel(4)},i.openListView=function(){Ja.ins().showProbabilityPanel(4)},i.toTreasureSetRedPoint=function(t){var e=new Object;e.className="m_treasure_set_red_pint_tos",e.red_point=t,this.sendSocketMessage(e)},i.onTreasureSetRedPoint=function(t){0<t.err_code?ce.addTip(t.err_code):(Xo.handlerTreasureSetRedPoint(t),Xo.checkRedPoint())},i.toTreasureRewardLog=function(){var t=new Object;t.className="m_treasure_reward_log_tos",this.sendSocketMessage(t)},i.onTreasureRewardLog=function(t){Xo.handlerTreasureRewardLog(t)},i.toTreasureRefresh=function(){var t=new Object;t.className="m_treasure_refresh_tos",this.sendSocketMessage(t)},i.onTreasureRefresh=function(t){0<t.err_code?ce.addTip(t.err_code):(Jt.addTip("刷新地图成功"),Xo.handlerTreasureRefresh(t),this.dispatch("TREASURE_UPDATE"))},i.toTreasureAutoHunt=function(){var t=new Object;t.className="m_treasure_auto_hunt_tos",this.sendSocketMessage(t)},i.onTreasureAutoHunt=function(t){0<t.err_code?ce.addTip(t.err_code):(Xo.handlerTreasureAutoHunt(t),this.dispatch("TREASURE_UPDATE"),Xo.checkRedPoint(),this.resView=this.resView||new rF,this.resView.parent||this.resView.openWindow(),this.resView.setreward(t.rewards))},i.toTreasureHunt=function(t,e,i){var s=new Object;s.className="m_treasure_hunt_tos",s.map_id=t,this.huntPos=[e,i],this.sendSocketMessage(s)},i.onTreasureHunt=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{this.dispatch("PLAY_TREASURE_EFF",[this.huntPos[0]+15,this.huntPos[1]+15,t.hunt_index]);for(var e=[],i=lt.stageWidth;0<t.rewards.length;){var s=new De;s.s=this.goodsImage,s.s.data=ur.getItem(t.rewards.pop().id);var n=new Tt((i-750)/2+55+96*t.hunt_index,560),o=or.ins().getBagPos();s.fX=n.x,s.fY=n.y,s.tX=o.x,s.tY=o.y,s.parents=C.manager,s.compH=Q.create(this,this.disposeDrop,[s.s],!0),e.push(s)}_t.setTimeout(Le.ins,Le.ins.add,[e],2e3),Xo.handlerTreasureHunt(t),this.dispatch("TREASURE_UPDATE"),Xo.checkRedPoint()}},i.disposeDrop=function(t){t.removeSelf(),this.goods.length<15?(t.scale(1,1),this.goods.push(t)):t.destroy()},i.toTreasureInfo=function(){var t=new Object;t.className="m_treasure_info_tos",this.sendSocketMessage(t)},i.onTreasureInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(Xo.handlerTreasureInfo(t),Xo.checkRedPoint(),this.dispatch("TREASURE_UPDATE"))},I(0,i,"goodsImage",function(){return 0<this.goods.length?this.goods.pop():new fh}),I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(),xr=function(t){function e(){this.customStandNum=0,this.rankVOs=[],this.hasGets=[],this.descArr=[2200,3600,5e3],this.showRp=!1,this.rankPanel=null,this._crossRankPanel=null,this.standardRechargeRankPanel=null,this.cumulativeConsumeRankPanel=null,this.costRankPanel=null,this._rankAwardPanel=null,e.__super.call(this)}w(e,"modules.rank.RankModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_RANK_PANEL",this,this.openRankPanel),this.addMessageListener("RANK_STANDARD_RECHARGE_OPEN",this,this.openStandardRechargeRankPanel),this.addMessageListener("RANK_CUMULATIVE_CONSUME_OPEN",this,this.openCumulativeConsumeRankPanel),this.addMessageListener("RANK_COST_OPEN",this,this.openCostRankPanel),this.addMessageListener("ACT_CUSTOM_INFO",this,this.setCustomRankRp),this.addSocketListener("m_rank_get_rank_toc",this,this.onGetRank),this.addSocketListener("m_rank_role_all_rank_toc",this,this.onRoleAllRank),this.addSocketListener("m_rank_adore_toc",this,this.onAdore),this.addSocketListener("m_rank_first_role_extra_info_toc",this,this.onRoleExtraInfo)},i.toGetRank=function(t){var e=new Object;e.className="m_rank_get_rank_tos",e.rank_id=t,this.sendSocketMessage(e)},i.onGetRank=function(t){if(0==t.err_code){jo.setRankData(zo.getVO(t)),this.updateRankPanel(),6001!=t.rank_id&&6002!=t.rank_id&&6003!=t.rank_id||this.customStandNum++,3<=this.customStandNum&&this.checkCustomStandRp(),this.dispatch("RANK_GOT_DATA_UPDATE",t.rank_id);var e=Ko.transformUniqueIdToRankId(t.rank_id);1007==e&&this.standardRechargeRankPanel&&this.standardRechargeRankPanel.update(),1009==e&&this.cumulativeConsumeRankPanel&&this.cumulativeConsumeRankPanel.update(),1102==e&&this.costRankPanel&&this.costRankPanel.update()}else ce.addTip(t.err_code)},i.setCustomRankRp=function(t){this.hasGets[t.target_id]=t.rank_get},i.checkCustomStandRp=function(){for(var t=0;t<3;t++){if(this.rankVOs[t]=new zo,this.rankVOs[t]=jo.getRankVO(6001+t),0<this.rankVOs[t].pData.ranking&&this.rankVOs[t].pData.ranking<=20&&this.rankVOs[t].pData.rank_value>=this.descArr[t]&&0==this.hasGets[t+1]){this.showRp=!0;break}this.showRp=!1}e.checkRP(this.showRp)},i.toRoleAllRank=function(){var t=new Object;t.className="m_rank_role_all_rank_tos",this.sendSocketMessage(t)},i.onRoleAllRank=function(t){0==t.err_code?(jo.setMyAllRankData(t.role_all_ranks),this.updateMyPart()):ce.addTip(t.err_code)},i.toAdore=function(t){var e=new Object;e.className="m_rank_adore_tos",e.rank_id=t,this.sendSocketMessage(e)},i.onAdore=function(t){if(0==t.err_code){jo.updateAdore(t.rank_id,!0);var e=Ko.getRankAdoreRewardTip(t.rank_id);e&&Jt.addTip(e[0],e[1]),this.updateMyPart()}else ce.addTip(t.err_code)},i.toRoleExtraInfo=function(t,e){if(void 0===e&&(e=-1),0!=t){var i=new Object;i.className="m_rank_first_role_extra_info_tos",i.role_id=t,i.rank_id=0<e?e:jo.curRankID,this.sendSocketMessage(i)}},i.onRoleExtraInfo=function(t){0==t.err_code?(jo.setExtraInfoToc(t),this.updateFirstRole()):ce.addTip(t.err_code)},i.openRankPanel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),pe.myLevel<60?Jt.addTip("排行榜60级开启"):se.has("modules/rank")?(this.rankPanel=this.rankPanel||Aa.getIns(43e3,"RankPanel"),this.rankPanel.openWindow(),this.rankPanel.viewIndex=t,this.rankPanel.setRankIndex(e)):se.add("modules/rank","正在加载排行榜模块",this,this.openRankPanel,[t,e])},i.updateRankPanel=function(){this.rankPanel&&this.rankPanel.isPopup()&&this.rankPanel.update(),this._crossRankPanel&&this._crossRankPanel.parent&&this._crossRankPanel.update()},i.updateMyPart=function(){this.rankPanel&&this.rankPanel.isPopup()&&this.rankPanel.updateMyPart(),this._crossRankPanel&&this._crossRankPanel.parent&&this._crossRankPanel.updateMyPart()},i.updateFirstRole=function(){this.rankPanel&&this.rankPanel.isPopup()&&this.rankPanel.updateAvatar(),this._crossRankPanel&&this._crossRankPanel.parent&&this._crossRankPanel.updateAvatar()},i.openCrossRankPanel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),pe.myLevel<60?Jt.addTip("排行榜60级开启"):se.has("modules/rank")?(this._crossRankPanel=this._crossRankPanel||new Kk,this._crossRankPanel.openWindow(),this._crossRankPanel.viewIndex=t,this._crossRankPanel.setRankIndex(e)):se.add("modules/rank","正在加载排行榜模块",this,this.openCrossRankPanel,[t,e])},i.openStandardRechargeRankPanel=function(t){void 0===t&&(t=-1),t<0&&(t=1007),this.standardRechargeRankPanel=this.standardRechargeRankPanel||Aa.getIns(43e3,"StandardRechargeRankPanel"),this.standardRechargeRankPanel.rankType=t,this.standardRechargeRankPanel.openWindow(),modules.rank.RankModule.ins().toGetRank(t)},i.openCumulativeConsumeRankPanel=function(t){void 0===t&&(t=-1),t<0&&(t=1009),this.cumulativeConsumeRankPanel=this.cumulativeConsumeRankPanel||Aa.getIns(43e3,"StandardRechargeRankPanel"),this.cumulativeConsumeRankPanel.rankType=t,this.cumulativeConsumeRankPanel.openWindow(),modules.rank.RankModule.ins().toGetRank(t)},i.openCostRankPanel=function(t){void 0===t&&(t=-1),t<0&&(t=1102),this.costRankPanel=this.costRankPanel||Aa.getIns(43e3,"StandardRechargeRankPanel"),this.costRankPanel.rankType=t,this.costRankPanel.openWindow(),modules.rank.RankModule.ins().toGetRank(t)},i.openRankAwardDisplayPanel=function(){se.has("modules/rank")?(this._rankAwardPanel=this._rankAwardPanel||Aa.getIns(43e3,"RankAwardDisplayPanel"),this._rankAwardPanel.openWindow(),this._rankAwardPanel.updateView()):se.add("modules/rank","正在加载排行榜模块",this,this.openRankAwardDisplayPanel)},e.ins=function(){return e._ins=e._ins||new e},e.checkRP=function(t){t?T.dispatch("ICON_REDPOINT_CHANGE",[126,"RP_ICON_JUBAO",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[126,"RP_ICON_JUBAO",!1])},e._ins=null,e}(),Cr=function(t){function e(){this.panel=null,this.helpPanel=null,this.isInCD=!1,e.__super.call(this)}w(e,"modules.refine.RefineModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_REFINE_PANEL",this,this.openRefinePanel),this.addMessageListener("PACK_DATA_INITED",this,this.onPackInit),this.addMessageListener("BAGDATA_CHANGE",this,this.updateRefinePanel),this.addMessageListener("UPDATE_PAL_DATA",this,this.onPalUpdate),this.addSocketListener("m_role_refining_detail_toc",this,this.onDetail),this.addSocketListener("m_role_refining_up_toc",this,this.onRefineUp),this.addSocketListener("m_role_equip_refining_up_toc",this,this.onSoulUp),this.addSocketListener("m_role_refining_active_up_toc",this,this.onRoleRefiningActveUp),this.addSocketListener("m_role_equip_refining_active_up_toc",this,this.onRoleEquipRefininfActiveUp),this.addMessageListener("RPMASK_INFO_UPDATE",this,this.updateByRPMaskChange)},i.updateByRPMaskChange=function(){ta.checkRP()},i.onPackInit=function(){_t.setTimeout(this,this.toDetail,null,St.ENTER_DELAY)},i.onPalUpdate=function(){ta.checkRP()},i.openRefinePanel=function(t,e){void 0===t&&(t=0),void 0===e&&(e=!1),3==t&&pe.myRegrow<6?Jt.addTip("6转开启装备附魂"):0!=se.has("modules/refine")?(this.panel=this.panel||new cF,this.panel.checkOpen(t,e),1==e&&modules.refine.RefineModule.ins().toDetail()):se.add("modules/refine","正在加载轩辕鼎模块",this,this.openRefinePanel,[t])},i.updateRefinePanel=function(){this.panel&&this.panel.isPopup()&&this.panel.update(),ta.checkRP(),T.dispatch("ROLE_UPDATE_REFINE")},i.updateByRefineUp=function(t){void 0===t&&(t=!0),this.panel&&this.panel.isPopup()&&this.panel.updateByRefineUp(t)},i.openSoulHelpPanel=function(){this.helpPanel=this.helpPanel||Aa.getIns(44e3,"RefineSoulHelpPanel"),this.helpPanel.openWindow()},i.toDetail=function(){var t=new Object;t.className="m_role_refining_detail_tos",this.sendSocketMessage(t)},i.onDetail=function(t){0==t.err_code?(Jo.setInfo(t.refining_info),this.updateRefinePanel()):ce.addTip(t.err_code)},i.toRefineUp=function(){if(!this.isInCD){this.isInCD=!0;var t=new Object;t.className="m_role_refining_up_tos",t.actor_id=Jo.curChooseActor,t.type_id=ta.getServerRefineType(Jo.curViewType),this.sendSocketMessage(t)}},i.onRefineUp=function(t){this.isInCD=!1,0==t.err_code?(Jo.updateReinfInfo(t.actor_id,t.type_id,t.process),this.updateByRefineUp(),ta.checkRP(),t.type_id!=ta.getServerRefineType(1)&&t.type_id!=ta.getServerRefineType(2)||this.dispatch("EXERCISE_KNIGHTHOOD_CONDICTION_UPDATE")):ce.addTip(t.err_code)},i.toSoulUp=function(t,e,i){var s=new Object;s.className="m_role_equip_refining_up_tos",s.actor_id=t,s.item_id=e,s.pos=i,this.sendSocketMessage(s)},i.onSoulUp=function(t){if(0==t.err_code){var e=Jo.updateRefineSoulUpAndCheckSucc(t);this.updateByRefineUp(e)}else ce.addTip(t.err_code)},i.toRoleEquipRefiningActiveUp=function(){var t=new Object;t.className="m_role_equip_refining_active_up_tos",t.actor_id=Jo.curChooseActor,this.sendSocketMessage(t)},i.onRoleEquipRefininfActiveUp=function(t){0==t.err_code?t.actor_id==Jo.curChooseActor&&this.toDetail():ce.addTip(t.err_code)},i.toRoleRefiningActveUp=function(){var t=new Object;t.className="m_role_refining_active_up_tos",t.actor_id=Jo.curChooseActor,t.type_id=ta.getServerRefineType(Jo.curViewType),this.sendSocketMessage(t)},i.onRoleRefiningActveUp=function(t){t.err_code?ce.addTip(t.err_code):t.actor_id==Jo.curChooseActor&&this.toDetail()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Pr=function(t){function e(){this._refineSoulPalaceView=null,this._refineSoulPalaceKey=NaN,this._godSoulMixView=null,this._refineSoulMissionView=null,this._refineSoulShopView=null,this._refineSoulBagPanel=null,this._refineSoulGridUnlockPanel=null,this._refineSoulStoveView=null,this._refineSoulUpgradeView=null,this._refineSoulInlayPanel=null,this._refineSoulStoneMixPanel=null,this._refineSoulTip=null,this._refineSoulNoticeView=null,this._refineSoulGoodsTip=null,e.__super.call(this),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("REGROWLV_UP",this,this.onRegrowLvUp),this.addMessageListener("CROSS_DAY",this,this.updateView),this.addMessageListener("RANK_GOT_DATA_UPDATE",this,this.onGetRankData),this.addMessageListener("REFINE_SOUL_GOODS_USE",this,this.toUseGoods),this.addMessageListener("OPEN_REFINE_SOUL_PALACE_MIX_VIEW",this,this.openGodSoulMixView),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.checkAshesScoreRP),this.addSocketListener("m_refine_souls_toc",this,this.onRefineSoulInfo),this.addSocketListener("m_refine_soul_update_toc",this,this.onRefineSoulInfoUpdate),this.addSocketListener("m_refine_soul_eat_toc",this,this.onEatRefineSoul),this.addSocketListener("m_refine_soul_gen_toc",this,this.onNewRefineSoul),this.addSocketListener("m_refine_soul_upgrade_toc",this,this.onUpgradeSystemSoul),this.addSocketListener("m_refine_soul_remove_toc",this,this.onRemoveRefineSoul),this.addSocketListener("m_refine_soul_pick_toc",this,this.onAshes),this.addSocketListener("m_refine_soul_compose_toc",this,this.onGodSoulMix),this.addSocketListener("m_refine_soul_refresh_formula_toc",this,this.onGodSoulFormulaRefresh),this.addSocketListener("m_refine_soul_missions_toc",this,this.onSoulMissionInfo),this.addSocketListener("m_refine_soul_mission_reward_toc",this,this.onMissionReward),this.addSocketListener("m_refine_soul_extra_toc",this,this.onExtraInfo),this.addSocketListener("m_refine_soul_ashes_supply_toc",this,this.onSoulSupplyInfo),this.addSocketListener("m_refine_soul_receive_ashes_toc",this,this.onGetSoulSupply),this.addSocketListener("m_refine_soul_notice_toc",this,this.onNotice),this.addSocketListener("m_refine_soul_unlock_toc",this,this.onUnlockGrid),this.addSocketListener("m_refine_soul_friends_toc",this,this.onFriendList),this.addSocketListener("m_refine_soul_goods_toc",this,this.onGoodsList),this.addSocketListener("m_refine_soul_use_toc",this,this.onUseGoods),this.addSocketListener("m_refine_soul_exchange_toc",this,this.onExchange),this.addSocketListener("m_refine_soul_inject_toc",this,this.onInject),this.addSocketListener("m_refine_soul_stone_toc",this,this.onSoulStoneInlayInfo),this.addSocketListener("m_refine_soul_stone_move_toc",this,this.onSoulStoneInlay),this.addSocketListener("m_refine_soul_stone_compose_toc",this,this.onMixSoulStone),this.addSocketListener("m_refine_soul_guide_toc",this,this.onRefineSoulGuide)}w(e,"modules.refineSoulPalace.RefineSoulPalaceCase",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addMessageListener("OPEN_REFINE_SOUL_PALACE_VIEW",this,this.openRefineSoulPalaceView)},i.toMyRefineSoulInfo=function(){var t=pe.roleID;this.toRefineSoulInfo(t)},i.toRefineSoulInfo=function(t){var e=new Object;e.className="m_refine_souls_tos",e.role_id=t,this.sendSocketMessage(e)},i.onRefineSoulInfo=function(t){0==t.err_code?(t.role_id==pe.user.role_id?(ea.curRoleId=t.role_id,ea.setGridInfo(t.immortal_souls),ea.setMySoulAshes(t.drop_list),console.log(ea.mySoulGridInfo)):(ea.curRoleId=t.role_id,ea.setOtherGridInfo(t.immortal_souls),ea.setOtherSoulAshes(t.drop_list)),this.updateView()):ce.addTip(t.err_code)},i.onRefineSoulInfoUpdate=function(t){0==t.err_code?(t.role_id==pe.user.role_id?2==t.opt?(ea.deleteGodSoulFromGridInfo(t.lock_girds,1),ea.deleteSoulAshesFromAshesInfo(t.drop_list,1)):(ea.addGodSoulToGridInfo(t.lock_girds),ea.addSoulAshesToMySoulAshes(t.drop_list)):2==t.opt?(ea.deleteGodSoulFromGridInfo(t.lock_girds,2),ea.deleteSoulAshesFromAshesInfo(t.drop_list,2)):(ea.updateOtherGridInfo(t.lock_girds),ea.updateOtherSoulAshes(t.drop_list)),this.updateView()):ce.addTip(t.err_code)},i.toEatRefineSoul=function(t){var e=new Object;e.className="m_refine_soul_eat_tos";var i=new Object;i.className="p_kv",i.id=t[0],i.val=t[1],e.pos=i,this.sendSocketMessage(e)},i.onEatRefineSoul=function(t){0==t.err_code?(ea.tempSoulInfo=t.immortal_souls,this.moveItemByEat(t.immortal_souls)):ce.addTip(t.err_code)},i.toNewRefineSoul=function(t,e){var i=new Object;i.className="m_refine_soul_gen_tos",i.color=t;var s=new Object;s.className="p_kv",s.id=e[0],s.val=e[1],i.pos=s,this.sendSocketMessage(i)},i.onNewRefineSoul=function(t){0==t.err_code?(ea.addGodSoulToGridInfo(t.immortal_souls),this.updateView()):ce.addTip(t.err_code)},i.toUpgradeSystemSoul=function(t,e,i){void 0===i&&(i=0);var s=new Object;s.className="m_refine_soul_upgrade_tos",s.opt=t,s.pos=e,s.color=i,this.sendSocketMessage(s)},i.onUpgradeSystemSoul=function(t){0==t.err_code?(ea.addGodSoulToGridInfo(t.immortal_souls),Jt.addTip("升级真元魂晶成功"),this.updateView()):ce.addTip(t.err_code)},i.toRemoveRefineSoul=function(t){var e=new Object;e.className="m_refine_soul_remove_tos";var i=new Object;i.className="p_kv",i.id=t[0],i.val=t[1],e.pos=i,this.sendSocketMessage(e)},i.onRemoveRefineSoul=function(t){0==t.err_code?(ea.removeRefineSoulFromGridInfo(t.pos),this.updateView()):ce.addTip(t.err_code)},i.toAshes=function(t,e){var i=new Object;i.className="m_refine_soul_pick_tos",i.role_id=t,i.pos=e,this.sendSocketMessage(i)},i.onAshes=function(t){0==t.err_code?this.updateView(!0):ce.addTip(t.err_code)},i.toExtraInfo=function(){var t=new Object;t.className="m_refine_soul_extra_tos",this.sendSocketMessage(t)},i.onExtraInfo=function(t){0==t.err_code?(ea.mixSpEquationId=t.formula,ea.specialGridId=t.special_grid,ea.specialEventId=t.special_event,this.updateView()):ce.addTip(t.err_code)},i.toGodSoulMix=function(t,e){var i=new Object;i.className="m_refine_soul_compose_tos",i.type=t,i.cnt=e,this.sendSocketMessage(i)},i.onGodSoulMix=function(t){0==t.err_code?(this.updateView(),Jt.addTip("合成天魂成功"),this.showSucceedEff()):ce.addTip(t.err_code)},i.toGodSoulFormulaRefresh=function(){var t=new Object;t.className="m_refine_soul_refresh_formula_tos",this.sendSocketMessage(t)},i.onGodSoulFormulaRefresh=function(t){0==t.err_code?(ea.mixSpEquationId=t.formula,this.refreshMixFormulaCallBack(),Jt.addTip("刷新公式成功")):ce.addTip(t.err_code)},i.toSoulMissionInfo=function(){var t=new Object;t.className="m_refine_soul_missions_tos",this.sendSocketMessage(t)},i.onSoulMissionInfo=function(t){0==t.err_code?0==t.opt?(ea.missionList=t.list,this.updateView(),ea.checkMissionRP()):3==t.opt&&(ea.missionList?(ea.intInfoToMissionList(t.list),this.updateView(),ea.checkMissionRP()):this.toSoulMissionInfo()):ce.addTip(t.err_code)},i.toMissionReward=function(t){var e=new Object;e.className="m_refine_soul_mission_reward_tos",e.mission_id=t,this.sendSocketMessage(e)},i.onMissionReward=function(t){0==t.err_code?(Jt.addTip("领取成功，请前往炼魂殿背包查看"),this.updateView()):ce.addTip(t.err_code)},i.toNotice=function(){var t=new Object;t.className="m_refine_soul_notice_tos",this.sendSocketMessage(t)},i.onNotice=function(t){if(0==t.err_code){var e;for(var i in t.notice)e=t.notice[i],ea.noticeList.push(e);this.showNotice()}else ce.addTip(t.err_code)},i.toSoulSupplyInfo=function(){var t=new Object;t.className="m_refine_soul_ashes_supply_tos",this.sendSocketMessage(t)},i.onSoulSupplyInfo=function(t){0==t.err_code?(ea.supplyState=t.ashes_state,this.updateView(),ea.checkSupplyRP()):ce.addTip(t.err_code)},i.toGetSoulSupply=function(t){var e=new Object;e.className="m_refine_soul_receive_ashes_tos",e.id=t,this.sendSocketMessage(e)},i.onGetSoulSupply=function(t){0==t.err_code?(ea.supplyState=t.ashes_state,this.updateView(),ea.checkSupplyRP(),Jt.addTip("领取成功，请前往炼魂殿背包查看")):ce.addTip(t.err_code)},i.toUnlockGrid=function(t,e,i){var s=new Object;s.className="m_refine_soul_unlock_tos",s.role_id=t,s.pos=e,s.typeid=i,this.sendSocketMessage(s)},i.onUnlockGrid=function(t){0==t.err_code?(t.role_id==pe.user.role_id&&Jt.addTip("选择完毕，待好友选择相同解缚令即可解除束缚"),this.closeRefineSoulGridUnlockPanel(),this.updateView()):ce.addTip(t.err_code)},i.toFriendList=function(){var t=new Object;t.className="m_refine_soul_friends_tos",this.sendSocketMessage(t)},i.onFriendList=function(t){0==t.err_code?(ea.friendList=t.list,this.updateView()):ce.addTip(t.err_code)},i.onGetRankData=function(){var t=jo.getRankVO(1204);ea.rankList=ea.getRankInfoFromRankVo(t),this.updateView()},i.toGoodsList=function(){var t=new Object;t.className="m_refine_soul_goods_tos",this.sendSocketMessage(t)},i.onGoodsList=function(t){if(0==t.err_code){if(0==t.opt)ea.goodsList=t.list,this.updateView(),ea.checkBagRP(),ea.checkStoneInlayRP(),this.updateRefineSoulStoveViewItem();else if(3==t.opt&&ea.goodsList&&t.list){var e;for(var i in t.list){e=t.list[i];var s,n=!1;for(var o in ea.goodsList)(s=ea.goodsList[o]).id==e.id&&(s.num=e.num,n=!0);0==n&&(ea.goodsList=ea.goodsList||[],ea.goodsList.push(e))}this.updateView(),ea.checkBagRP(),ea.checkStoneInlayRP(),this.updateRefineSoulStoveViewItem()}}else ce.addTip(t.err_code)},i.toUseGoods=function(t,e){var i=new Object;i.className="m_refine_soul_use_tos",i.id=t,i.num=e,this.sendSocketMessage(i)},i.onUseGoods=function(t){0==t.err_code?(this.showGoodsUseTip(t.reward),this.updateView()):ce.addTip(t.err_code)},i.toExchange=function(t,e,i){var s=new Object;s.className="m_refine_soul_exchange_tos",s.type=t,s.id=e,s.cnt=i,this.sendSocketMessage(s)},i.onExchange=function(t){0==t.err_code?(ea.shopExchangeList=t.exchange,0!=t.type&&Jt.addTip("购买成功"),this.updateRefineSoulShopView()):ce.addTip(t.err_code)},i.toInjectInfo=function(){this.toInject(1)},i.toInject=function(t,e){void 0===e&&(e=0);var i=new Object;i.className="m_refine_soul_inject_tos",i.opt=t,i.exp=e,this.sendSocketMessage(i)},i.onInject=function(t){0==t.err_code?(t.lv>ea.soulStoveLv&&Jt.addTip("升级成功"),ea.soulStoveExp=t.exp,ea.soulStoveLv=t.lv,this.updateView(),ea.checkStoveRP()):ce.addTip(t.err_code)},i.toSoulStoneInlayInfo=function(){var t=new Object;t.className="m_refine_soul_stone_tos",this.sendSocketMessage(t)},i.onSoulStoneInlayInfo=function(t){0==t.err_code?(ea.soulStoneInlayPtkvList=t.list,ea.initInlayList(),ea.updateInlayInfo(t.list),this.updateView(),ea.checkStoneInlayRP()):ce.addTip(t.err_code)},i.toSoulStoneInlay=function(t){var e=new Object;e.className="m_refine_soul_stone_move_tos",e.list=t,this.sendSocketMessage(e)},i.onSoulStoneInlay=function(t){0==t.err_code?(Jt.addTip("镶嵌成功"),this.updateView(),this.clearRefineSoulInlayPanelInfo()):ce.addTip(t.err_code)},i.toMixSoulStone=function(t){var e=new Object;e.className="m_refine_soul_stone_compose_tos",e.ids=t,this.sendSocketMessage(e)},i.onMixSoulStone=function(t){if(0==t.err_code){var e=new Object;e.className="p_kv",e.id=t.type_id,e.val=t.quality,ea.newSoulStone=e,this.SoulStoneMixSucceed()}else ce.addTip(t.err_code)},i.toRefineSoulGuide=function(t){var e=new Object;e.className="m_refine_soul_guide_tos",e.val=t,this.sendSocketMessage(e)},i.onRefineSoulGuide=function(t){0==t.err_code?(0==t.val&&this.showGuide(),ea.isHadGuide=t.val):ce.addTip(t.err_code)},i.checkAshesScoreRP=function(){pe.checkLevel(8,0)&&ea.checkRefineSoulRP()},i.onEnterGame=function(){pe.checkLevel(8,0)&&(this.toMyRefineSoulInfo(),this.toGoodsList(),this.toInjectInfo(),this.toSoulStoneInlayInfo(),this.toSoulMissionInfo(),this.toSoulSupplyInfo())},i.onRegrowLvUp=function(){pe.checkLevel(8,0)&&(this.toMyRefineSoulInfo(),this.toGoodsList(),this.toInjectInfo(),this.toSoulStoneInlayInfo(),this.toSoulMissionInfo(),this.toSoulSupplyInfo())},i.openRefineSoulPalaceView=function(){se.has("modules/refineSoulPalace")?(this._refineSoulPalaceView=this._refineSoulPalaceView||Aa.getIns(45e3,"RefineSoulPalaceView"),this._refineSoulPalaceView.openWindow(),this._refineSoulPalaceView.update(),this._refineSoulPalaceView.on("undisplay",this,this.onStrangeFireHide),_t.clearTimeout(this._refineSoulPalaceKey)):se.add("modules/refineSoulPalace","正在加载炼魂殿模块",this,this.openRefineSoulPalaceView)},i.onStrangeFireHide=function(){this._refineSoulPalaceKey=_t.setTimeout(this,this.clearRefineSoulSource,null,ya.coldTime)},i.clearRefineSoulSource=function(){null!=this._refineSoulPalaceView&&(this._refineSoulPalaceView&&(this._refineSoulPalaceView.destroy(),this._refineSoulPalaceView=null),this._godSoulMixView&&(this._godSoulMixView.destroy(),this._godSoulMixView=null),this._refineSoulMissionView&&(this._refineSoulMissionView.destroy(),this._refineSoulMissionView=null),this._refineSoulShopView&&(this._refineSoulShopView.destroy(),this._refineSoulShopView=null),this._refineSoulBagPanel&&(this._refineSoulBagPanel.destroy(),this._refineSoulBagPanel=null),this._refineSoulGridUnlockPanel&&(this._refineSoulGridUnlockPanel.destroy(),this._refineSoulGridUnlockPanel=null),this._refineSoulStoveView&&(this._refineSoulStoveView.destroy(),this._refineSoulStoveView=null),this._refineSoulUpgradeView&&(this._refineSoulUpgradeView.destroy(),this._refineSoulUpgradeView=null),this._refineSoulInlayPanel&&(this._refineSoulInlayPanel.destroy(),this._refineSoulInlayPanel=null),this._refineSoulStoneMixPanel&&(this._refineSoulStoneMixPanel.destroy(),this._refineSoulStoneMixPanel=null),this._refineSoulTip&&(this._refineSoulTip.destroy(),this._refineSoulTip=null)),se.destroy("modules/refineSoulPalace")},i.openGodSoulMixView=function(){this._godSoulMixView=this._godSoulMixView||Aa.getIns(45e3,"GodSoulMixView"),this._godSoulMixView.openWindow(),this._godSoulMixView.update()},i.showSucceedEff=function(){this._godSoulMixView&&this._godSoulMixView.isPopup()&&this._godSoulMixView.showSucceedEff()},i.refreshMixFormulaCallBack=function(){this._godSoulMixView&&this._godSoulMixView.isPopup()&&this._godSoulMixView.resetInputText()},i.openRefineSoulMissionView=function(){this._refineSoulMissionView=this._refineSoulMissionView||Aa.getIns(45e3,"RefineSoulMissionView"),this._refineSoulMissionView.openWindow(),this._refineSoulMissionView.update()},i.openRefineSoulShopView=function(){this._refineSoulShopView=this._refineSoulShopView||Aa.getIns(45e3,"RefineSoulShopView"),this._refineSoulShopView.openWindow(),this._refineSoulShopView.update},i.updateRefineSoulShopView=function(){this._refineSoulShopView&&this._refineSoulShopView.isPopup()&&this._refineSoulShopView.update()},i.openRefineSoulBagPanel=function(){this._refineSoulBagPanel=this._refineSoulBagPanel||Aa.getIns(45e3,"RefineSoulBagPanel"),this._refineSoulBagPanel.openWindow(),this._refineSoulBagPanel.update()},i.openRefineSoulGridUnlockPanel=function(t,e){this._refineSoulGridUnlockPanel=this._refineSoulGridUnlockPanel||Aa.getIns(45e3,"RefineSoulGridUnlockPanel"),this._refineSoulGridUnlockPanel.type=t,this._refineSoulGridUnlockPanel.data=e,this._refineSoulGridUnlockPanel.openWindow(),this._refineSoulGridUnlockPanel.update()},i.closeRefineSoulGridUnlockPanel=function(){this._refineSoulGridUnlockPanel&&this._refineSoulGridUnlockPanel.isPopup()&&this._refineSoulGridUnlockPanel.closeWindow()},i.openRefineSoulStoveView=function(){this._refineSoulStoveView=this._refineSoulStoveView||Aa.getIns(45e3,"RefineSoulStoveView"),this._refineSoulStoveView.openWindow(),this._refineSoulStoveView.update()},i.updateRefineSoulStoveViewItem=function(){this._refineSoulStoveView&&this._refineSoulStoveView.isPopup()&&this._refineSoulStoveView.updateItem()},i.openRefineSoulUpgradeView=function(){this._refineSoulUpgradeView=this._refineSoulUpgradeView||Aa.getIns(45e3,"RefineSoulUpgradeView"),this._refineSoulUpgradeView.openWindow(),this._refineSoulUpgradeView.update()},i.openRefineSoulInlayPanel=function(t){this._refineSoulInlayPanel=this._refineSoulInlayPanel||Aa.getIns(45e3,"RefineSoulInlayPanel"),this._refineSoulInlayPanel.type=t,this._refineSoulInlayPanel.openWindow(),this._refineSoulInlayPanel.update()},i.clearRefineSoulInlayPanelInfo=function(){this._refineSoulInlayPanel&&this._refineSoulInlayPanel.isPopup()&&this._refineSoulInlayPanel.clearGoods2()},i.openRefineSoulStoneMixPanel=function(){this._refineSoulStoneMixPanel=this._refineSoulStoneMixPanel||Aa.getIns(45e3,"RefineSoulStoneMixPanel"),this._refineSoulStoneMixPanel.openWindow(),this._refineSoulStoneMixPanel.update()},i.SoulStoneMixSucceed=function(){this._refineSoulStoneMixPanel.mixSucceedCallback()},i.openRefineSoulTip=function(t){this._refineSoulTip=this._refineSoulTip||Aa.getIns(45e3,"RefineSoulTip"),this._refineSoulTip.type=t,this._refineSoulTip.openWindow(),this._refineSoulTip.update()},i.updateView=function(t){void 0===t&&(t=!1),this._refineSoulPalaceView&&this._refineSoulPalaceView.isPopup()&&this._refineSoulPalaceView.update(t),this._godSoulMixView&&this._godSoulMixView.isPopup()&&this._godSoulMixView.update(),this._refineSoulMissionView&&this._refineSoulMissionView.isPopup()&&this._refineSoulMissionView.update(),this._refineSoulShopView&&this._refineSoulShopView.isPopup()&&this._refineSoulShopView.update(),this._refineSoulBagPanel&&this._refineSoulBagPanel.isPopup()&&this._refineSoulBagPanel.update(),this._refineSoulGridUnlockPanel&&this._refineSoulGridUnlockPanel.isPopup()&&this._refineSoulGridUnlockPanel.update(),this._refineSoulStoveView&&this._refineSoulStoveView.isPopup()&&this._refineSoulStoveView.update(),this._refineSoulUpgradeView&&this._refineSoulUpgradeView.isPopup()&&this._refineSoulUpgradeView.update(),this._refineSoulInlayPanel&&this._refineSoulInlayPanel.isPopup()&&this._refineSoulInlayPanel.update(),this._refineSoulStoneMixPanel&&this._refineSoulStoneMixPanel.isPopup()&&this._refineSoulStoneMixPanel.update()},i.moveItemByEat=function(t){this._refineSoulPalaceView.moveRefineSoul(t)},i.showNotice=function(){var t;this._refineSoulNoticeView&&this._refineSoulNoticeView.isPopup()||ea.noticeList&&0<ea.noticeList.length&&(t=ea.noticeList.pop(),this._refineSoulNoticeView=this._refineSoulNoticeView||Aa.getIns(45e3,"RefineSoulNoticeView"),this._refineSoulNoticeView.noticeItem=t,this._refineSoulNoticeView.openWindow(),this._refineSoulNoticeView.update())},i.showGuide=function(){this._refineSoulPalaceView&&this._refineSoulPalaceView.isPopup()&&this._refineSoulPalaceView.showGuide()},i.showGoodsUseTip=function(t){var e;for(var i in t)if(4==(e=t[i]).type)35==e.id?Jt.addTip("魂烬 x "+e.val):36==e.id&&Jt.addTip("天魂积分 x "+e.val);else if(5==e.type){var s=ur.getItem(e.id);Jt.addTip(s.name+" x "+e.val)}},i.showGoodsTip=function(t){this._refineSoulGoodsTip=this._refineSoulGoodsTip||Aa.getIns(45e3,"RefineSoulGoodsTip"),this._refineSoulGoodsTip.data=t,this._refineSoulGoodsTip.openWindow(),this._refineSoulGoodsTip.update()},i.showOneKeyInlayEff=function(t){this._refineSoulStoveView&&this._refineSoulStoveView.isPopup()&&this._refineSoulStoveView.showBtnEffect(t)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),Tr=function(t){function e(){this.panel=null,this.categoryPanel=null,this.huntTeasurePanel=null,this.beautyView=null,this.roleChangeNamePanel=null,this.fashionTarPanel=null,this.dominaPanel=null,this._legendDecomposeView=null,this.showFashionRP1=!1,this.showFashionRP2=!1,this.showFashionRP3=!1,this.needListenerFashionTar=!0,this.palArr=[2,3,5,7],this.showEffPalID=1,this.arr=[10201222,10201223,10201224,10201225],this.isShowTip=!0,this._ignorePowUp=!1,this._start=0,this._end=0,this._wingEquipView=null,this.curActor=0,this.curSpEquipID=0,this.spEquipView=null,this.spEquipActID=NaN,this.spEquipActIndex=NaN,this.spEquipID=NaN,this.buildSoulView=null,this.isOneKey=!1,this.roleForgePanel=null,this.curP=null,this.exchangeCallBack=null,this.exchangeCaller=null,this._curOranPos=0,this._curActorID=0,this._decomposeView=null,this.roleFashionPanel=null,this.getView=null,e.__super.call(this)}w(e,"modules.role.RoleModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_ROLE_PANEL",this,this.openRolePanel),this.addMessageListener("OPEN_CATEGORY_PANEL",this,this.openCategoryPanel),this.addMessageListener("OPEN_SPECIAL_EQUIP",this,this.openSpEquipView),this.addMessageListener("OPEN_BUILDSOUL_VIEW",this,this.openBuildSoulView),this.addMessageListener("OPEN_ORANGE_VIEW",this,this.openOrangeView),this.addMessageListener("OPEN_ORAN_DECOMP_VIEW",this,this.openDecomposeView),this.addMessageListener("OPEN_LEGEND_DECOMP_VIEW",this,this.openLegendDecView),this.addMessageListener("UPDATE_DECOMP_VIEW",this,this.undateDecomposeView),this.addMessageListener("PACK_DATA_INITED",this,this.onPackInited),this.addMessageListener("FASHION_OPEN",this,this.openRoleFashionPanel),this.addMessageListener("OPEN_DOMINAPANEL",this,this.openDominaPanel),this.addMessageListener("OPEN_FASHION_TAR",this,this.openFashionTarPanel),this.addMessageListener("OPEN_ROLE_CHANGE_NAME",this,this.openRoleChangeNamePanel),this.addMessageListener("OPEN_BEAUTY_VIEW",this,this.openBeautyView),this.addMessageListener("OPEN_WING_EQUIP_PANEL",this,this.openRoleWingEquip),this.addMessageListener("ROLE_REORDER",this,this.onRoleReorder),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("RPMASK_INFO_UPDATE",this,this.updateByRPMaskChange),this.addMessageListener("GET_ORAN_EQUIP_PURIFY_ATTRS",this,this.toGetOranEquipPurifyAttrs),this.addSocketListener("m_role_dead_toc",this,this.onRoleDead),this.addSocketListener("m_role_power_update_toc",this,this.onPowerUpdate),this.addSocketListener("m_role_special_equips_upgrade_toc",this,this.onRoleSpecialUpdate),this.addSocketListener("m_role_exchange_toc",this,this.onExchange),this.addSocketListener("m_role_exchange_info_toc",this,this.onRoleExchangeInfo),this.addSocketListener("m_equip_up_toc",this,this.onEquipUp),this.addSocketListener("m_equip_purify_load_toc",this,this.onEquipPurifyLoad),this.addSocketListener("m_equip_purify_toc",this,this.onEquipPurify),this.addSocketListener("m_equip_purify_lock_toc",this,this.onEquipPurifyLock),this.addSocketListener("m_equip_purify_replace_toc",this,this.onEquipPurifyReplace),this.addSocketListener("m_role_base_reload_toc",this,this.onRoleBaseReload),this.addSocketListener("m_equip_load_toc",this,this.onEquipLoad),this.addSocketListener("m_role_pal_open_toc",this,this.onOpneNewPal),this.addSocketListener("m_role_score_change_toc",this,this.onScoreChange),this.addSocketListener("m_role_wing_info_toc",this,this.onRoleWingInfo),this.addSocketListener("m_role_wing_equip_load_toc",this,this.onRoleWingLoad),this.addSocketListener("m_role_wing_upgrade_toc",this,this.onRoleWingUpgrade),this.addSocketListener("m_role_split_info_toc",this,this.onRoleSplitInfo),this.addSocketListener("m_role_split_upgrade_toc",this,this.onRoleSplitUpgrade),this.addSocketListener("m_role_split_info_toc",this,this.onRoleSplitInfo),this.addSocketListener("m_role_split_upgrade_toc",this,this.onRoleSplitUpgrade),this.addSocketListener("m_role_regrow_info_toc",this,this.onRoleRegrowInfo),this.addSocketListener("m_role_regrow_regrow_toc",this,this.onRoleRegrowUp),this.addSocketListener("m_role_regrow_buy_toc",this,this.onRoleRegrowBuy),this.addSocketListener("m_role_function_open_info_toc",this,this.onRoleFunctionInfo),this.addSocketListener("m_role_function_open_open_toc",this,this.onRoleFunctionOpen),this.addSocketListener("m_role_advance_info_toc",this,this.onRoleAdvanceInfo),this.addSocketListener("m_role_advance_confirm_toc",this,this.onRoleAdvanceOpen),this.addSocketListener("m_role_simple_info_toc",this,this.onSimpleInfo),this.addSocketListener("m_role_attr_change_toc",this,this.onAttrChange),this.addSocketListener("m_role_rename_toc",this,this.onChangeRoleName),this.addSocketListener("m_role_regrow_equip_info_toc",this,this.onRegrowEquipInfo),this.addSocketListener("m_role_regrow_equip_load_toc",this,this.onRegrowEquipLoad),this.addSocketListener("m_role_regrow_equip_quench_toc",this,this.onRegrowEquipQuench),this.addSocketListener("m_role_regrow_equip_upgrade_toc",this,this.onRegrowEquipUpgrade),this.addSocketListener("m_role_regrow_equip_step_toc",this,this.onRegrowEquipStep),this.addSocketListener("m_fashion_info_toc",this,this.onFashionInfo),this.addSocketListener("m_fashion_change_toc",this,this.onFashionChange),this.addSocketListener("m_fashion_update_toc",this,this.onFashionUpdate),this.addSocketListener("m_fashion_goal_active_toc",this,this.onFashionGoalAct),this.addSocketListener("m_fashion_goal_info_toc",this,this.onFashionGoalInfo),this.addSocketListener("m_fashion_goal_item_active_toc",this,this.onFashionGoalItemActive),this.addSocketListener("m_fashion_suit_info_toc",this,this.onSuitInfo),this.addSocketListener("m_fashion_suit_activate_toc",this,this.onSuitActivate),this.addSocketListener("m_chaotic_equip_info_toc",this,this.onChaoTicEquipInfo),this.addSocketListener("m_chaotic_equip_load_toc",this,this.onChaoTicEquipLoad),this.addSocketListener("m_chaotic_equip_upgrade_toc",this,this.onChaoTicEquipUpdate),this.addSocketListener("m_role_special_equips_lv_active_toc",this,this.onSpecicalEquipAct)},i.onEnterGame=function(){yt.isWX||Bt.isQQyxdt()||yt.isQQ||_t.setTimeout(k,k.initJS,null,6e3)},i.onRoleReorder=function(){this.requestWingInfo(),this.requestSpliteInfo(),this.checkRoleTarRP()},i.requestWingInfo=function(){if(oa.checkFunctionIsOpen(1))for(var t=1;t<=pe.pals.length;t++)this.toRoleWingInfo(t,!0)},i.requestSpliteInfo=function(){for(var t=1;t<=pe.pals.length;t++)this.toRoleSplitInfo(t,!0)},i.toFashionGoalItemActive=function(t,e){var i=new Object;i.className="m_fashion_goal_item_active_tos",i.active_fashions=t,i.pal_id=e,this.sendSocketMessage(i)},i.onFashionGoalItemActive=function(t){0<t.error_code&&ce.addTip(t.error_code)},i.openBeautyView=function(t){this.beautyView=this.beautyView||Aa.getIns(47e3,"fashion.FashionBeautyView"),this.beautyView.openWindow(),this.beautyView.parent&&this.beautyView.update(t)},i.openRoleChangeNamePanel=function(t){this.roleChangeNamePanel=this.roleChangeNamePanel||new pN,this.roleChangeNamePanel.openWindow(),this.roleChangeNamePanel.data=t},i.toFashionGoalInfo=function(){var t=new Object;t.className="m_fashion_goal_info_tos",this.sendSocketMessage(t),this.checkRoleTarRP()},i.checkRoleTarRP=function(){if(this.needListenerFashionTar){for(var t=xo.getGoodsNumByType(xo.GOODS_ID,10201398),e=0;e<pe.pals.length;e++)0<t&&oa.checkIsCanChange(e)?Nt.show("RP_FASHION_TAR_"+e):Nt.hide("RP_FASHION_TAR_"+e);var i,s,n=oa.fashionTarDic[1],o=oa.getGoal(0);if(0<o){for(var a=0;a<n.length;a++){if(n[a].goalId==o)break}s=++a<n.length?n[a]:null}else n&&0<n.length&&(s=n[0]);var l=0,r=100;if(s){var h=pe.silver>=s.cop;l=0,r=s.needs.length;for(var u=!1,c=0;c<s.needs.length;c++){var d=s.needs[c];i=oa.tarDic[d.id];var p=d.val;switch(i.id){case 1:var m=0;for(var f in pe.pals)m+=pe.pals[f].ext.power;u=p<=m;break;case 7:u=pe.getPalByIndex(0).ext.power>=p;break;case 2:u=pe.myEquipLevel>=p;break;case 3:var _,g=1e4;if(pe.pals[0].equip.length<8)g=0;else for(var y in pe.pals[0].equip){_=pe.pals[0].equip[y];var v=ur.getItem(_.type_id);v&&v.color<6&&v.level<g&&(g=v.level)}u=p<=g;break;case 4:g=1e4;var I,w=0;if(5<=pe.pals[0].skills.length)for(var b in pe.pals[0].skills){I=pe.pals[0].skills[b],fa.getSkill(I.skill_id)&&(++w,I.skill_lv<g&&(g=I.skill_lv))}u=p<=(g=5<=w?g:0);break;case 5:u=Os.curBarrier>=p;break;case 6:u=Ds.curBarrier>p}u&&++l}l==r&&h?Nt.show("RP_FASHION_TAR"):Nt.hide("RP_FASHION_TAR")}else Nt.hide("RP_FASHION_TAR");this.dispatch("FASHION_TAR_PRO",[l,r])}},i.onFashionGoalInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerFashionGoalInfo(t),this.fashionTarPanel&&this.fashionTarPanel.parent&&this.fashionTarPanel.updateView())},i.toFashionGoalAct=function(t,e){var i=new Object;i.className="m_fashion_goal_active_tos",i.pal_id=t,i.goal_id=e,this.sendSocketMessage(i)},i.onFashionGoalAct=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerFashionGoalAct(t),this.checkRoleTarRP(),this.fashionTarPanel&&this.fashionTarPanel.parent&&this.fashionTarPanel.updateView())},i.openFashionTarPanel=function(){se.has("modules/fashionTar")?(this.fashionTarPanel=this.fashionTarPanel||Aa.getIns(47e3,"fashion.FashionTarView"),this.fashionTarPanel.openWindow()):se.add("modules/fashionTar","正在加载时装目标模块",this,this.openFashionTarPanel)},i.onRoleDead=function(t){T.dispatch("ROLE_ALL_DEAD",t.role_id,t.killer_id,t.killer_name)},i.toRegrowEquipStep=function(t,e){var i=new Object;i.className="m_role_regrow_equip_step_tos",i.item_id=t,i.item_num=e,this.sendSocketMessage(i)},i.onRegrowEquipStep=function(t){0<t.err_code?ce.addTip(t.err_code):(ur.getItem(t.equip_type_id)&&this.dispatch("DOMINA_ADV_GET",t.equip_type_id),this.dominaPanel&&this.dominaPanel.parent&&this.dominaPanel.update())},i.toRegrowEquipInfo=function(){var t=new Object;t.className="m_role_regrow_equip_info_tos",this.sendSocketMessage(t)},i.onRegrowEquipInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(sn.handlerRegrowEquipInfo(t),this.checkDominateChange(),this.dominaPanel&&this.dominaPanel.parent&&this.dominaPanel.update())},i.toRegrowEquipLoad=function(t,e){var i=new Object;i.className="m_role_regrow_equip_load_tos",i.pal_id=t,i.load_info=e,this.sendSocketMessage(i)},i.onRegrowEquipLoad=function(t){0<t.err_code?ce.addTip(t.err_code):(sn.handlerRegrowEquipLoad(t),this.dominaPanel&&this.dominaPanel.parent&&this.dominaPanel.update(),this.panel&&this.panel.parent&&this.panel.update())},i.toRegrowEquipQuench=function(t,e){var i=new Object;i.className="m_role_regrow_equip_quench_tos",i.pal_id=t,i.pos=e,this.sendSocketMessage(i)},i.onRegrowEquipQuench=function(t){0<t.err_code?ce.addTip(t.err_code):(sn.handlerRegrowEquipQuench(t),0<t.result?Jt.addTip("淬炼成功，淬炼星级 +"+t.result):Jt.addTip("淬炼失败，主宰装备星级不变"),this.dominaPanel&&this.dominaPanel.parent&&this.dominaPanel.update(),this.panel&&this.panel.parent&&this.panel.update())},i.toRegrowEquipUpgrade=function(t,e){var i=new Object;i.className="m_role_regrow_equip_upgrade_tos",i.pal_id=t,i.pos=e,this.sendSocketMessage(i)},i.onRegrowEquipUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(sn.handlerRegrowEquipUpgrade(t),this.dominaPanel&&this.dominaPanel.parent&&(this.dominaPanel.update(),this.dominaPanel.ShowSucc()),this.panel&&this.panel.parent&&this.panel.update())},i.openDominaPanel=function(t){void 0===t&&(t=0),pe.myEquipLevel<110?Jt.addTip("1转开启主宰装备"):(this.dominaPanel=this.dominaPanel||new VA,this.dominaPanel.openWindow(),this.dominaPanel.parent&&this.dominaPanel.showViewByIndex(t))},i.openLegendDecView=function(t){this._legendDecomposeView=this._legendDecomposeView||new MD,this._legendDecomposeView.openWindow(),this._legendDecomposeView.type=t,this._legendDecomposeView.parent&&this._legendDecomposeView.updateView()},i.undateLegendDecomposeView=function(){this._legendDecomposeView.parent&&this._legendDecomposeView.updateView()},i.checkRegrow=function(){oa.checkRegrowRedPoint(),oa.getRegrowTOCVO()&&this.checkRegrowScoreRP(oa.getRegrowTOCVO().regrow_lv)},i.checkAllFashion=function(){for(var t=0;t<4;t++)for(var e=1;e<4;e++)Nt.hide("RP_FASHION"+e+"_"+t);var i;for(var s in this.showFashionRP1=this.showFashionRP2=this.showFashionRP3=!1,pe.pals)i=pe.pals[s],this.checkFashion(oa.getFashionInfoByActID(i.pal_id));this.showFashionRP1?Nt.show("RP_FASHION1"):Nt.hide("RP_FASHION1"),this.showFashionRP2?Nt.show("RP_FASHION2"):Nt.hide("RP_FASHION2"),this.showFashionRP3?Nt.show("RP_FASHION3"):Nt.hide("RP_FASHION3"),oa.checkSuitRedPoint()?Nt.show("RP_FASHION4"):Nt.hide("RP_FASHION4")},i.onPackInited=function(){_t.setTimeout(this,this.toDelayPackInit,null,St.ENTER_DELAY)},i.removeFashiontarListener=function(){this.removeMessageListener("ROLE_POWER_CHANGE",this,this.checkRoleTarRP),this.removeMessageListener("SKILLS_UPDATE",this,this.checkRoleTarRP),this.removeMessageListener("CUSTOM_BARRIER_UPDATE",this,this.checkRoleTarRP),this.removeMessageListener("DREAM_BARRIER",this,this.checkRoleTarRP),this.removeMessageListener("REGROWLV_UP",this,this.checkRoleTarRP),this.removeMessageListener("ROLE_LEVEL_UP",this,this.checkRoleTarRP),this.needListenerFashionTar=!1},i.toDelayPackInit=function(){var t;for(var e in this.addMessageListener("UPDATE_PAL_DATA",this,this.checkByUpdatePalData),this.addMessageListener("BAGDATA_CHANGE",this,this.checkByBagdata),this.addMessageListener("VIP_LEVEL_CHANGE",this,this.checkOpenPal),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkByLevelUP),this.addMessageListener("EQUIP_UPDATE",this,this.checkByEquipChange),this.addMessageListener("REGROWLV_UP",this,this.checkByRegrow),this.addMessageListener("MONEY_CHANGE",this,this.checkByMoney),this.addMessageListener("ROLE_LEVEL_UP",this,this.checkRoleTarRP),this.addMessageListener("REGROWLV_UP",this,this.checkRoleTarRP),this.addMessageListener("ROLE_POWER_CHANGE",this,this.checkRoleTarRP),this.addMessageListener("SKILLS_UPDATE",this,this.checkRoleTarRP),this.addMessageListener("CUSTOM_BARRIER_UPDATE",this,this.checkRoleTarRP),this.addMessageListener("DREAM_BARRIER",this,this.checkRoleTarRP),this.checkOpenPal(),this.checkEquipChange(),this.checkDominateAd(),this.toRoleFunctionInfo(),this.toRoleAdvanceInfo(),this.toRoleRegrowInfo(),this.checkBuildSoul(),this.checkRoleOrange(),this.checkSPEquip(),this.toRegrowEquipInfo(),this.toFashionGoalInfo(),this.toChaoTicEquipInfo(),pe.pals)t=pe.pals[e],this.toFashionInfo(t.pal_id);for(var i=1;i<=pe.pals.length;i++)this.toRoleSplitInfo(i)},i.checkByMoney=function(){this.checkWingCanUp(),this.checkRoleTarRP()},i.checkWingCanUp=function(){for(var t=0;t<4;t++){var e=oa.getWingTOCVO(t);if(e){var i=oa.getWingXMLVO(e.level);if(e.level<20||20==e.level&&e.star<10)if(e.star==i.starNum){if(o(!0,t,1))return}else if(0<xo.getGoodsNumByType(xo.GOODS_ID,10201112)){if(o(!0,t,0))return}else{var s=i.WingStarDic[e.star],n=s.exp-e.exp;if(pe.user.attr.silver>=Math.ceil(n/s.copperUp)*s.oneTimeUse){if(o(!0,t,1))return}else if(xo.getGoodsNumByType(xo.GOODS_ID,10201111)>=Math.ceil(n/s.wingUp)&&o(!0,t,1))return}}}function o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t&&!ha.checkIsPing(2,e,i);return s?Nt.show("WING_LEVEL_UP"):Nt.hide("WING_LEVEL_UP"),s}Nt.hide("WING_LEVEL_UP")},i.checkWingOpen=function(){if(16<=pe.myLevel&&!oa.checkFunctionIsOpen(1)?Nt.show("RP_WING_EQUIP_OPEN"):Nt.hide("RP_WING_EQUIP_OPEN"),oa.checkFunctionIsOpen(1))for(var t=1;t<=pe.pals.length;t++)this.toRoleWingInfo(t)},i.checkByEquipChange=function(){this.checkEquipChange(),this.checkRoleOrange(),this.checkRoleTarRP()},i.checkByUpdatePalData=function(){this.checkOpenPal(),this.checkBuildSoul(),this.checkSPEquip(),this.checkRoleOrange(),this.checkAllFashion(),this.checkEquipChange(),this.toRoleSplitInfo(pe.pals.length),this.toRoleWingInfo(pe.pals.length),this.toFashionInfo(pe.pals[pe.pals.length-1].pal_id),this.toChaoTicEquipInfo(),this.toRegrowEquipInfo(),this.checkDominateDe(),this.toSuitInfo()},i.checkByBagdata=function(){this.checkRegrow(),this.checkSplitRedPoint(),this.checkBuildSoul(),this.checkSPEquip(),this.checkRoleOrange(),this.checkAllFashion(),this.checkEquipChange(),this.checkWingEquipChange(),this.checkWingCanUp(),this.checkDominateDe(),this.checkDominateUpAndQu(),this.checkDominateAd(),this.checkDominateChange()},i.updateByRPMaskChange=function(){this.updateRolePanel(),this.checkSplitRedPoint(),this.checkSPEquip(),this.checkWingCanUp()},i.checkSPEquip=function(){var t;for(var e in pe.pals){var i;for(var s in(t=pe.pals[e]).spec_equips)if((i=t.spec_equips[s]).id<20){var n=sn.getSpEquipVO(i.id);if(n&&i.lv<n.level){var o=n.goodsID;if(xo.getGoodsNumByType(xo.GOODS_ID,o)>=n.getNeedByLv(i.lv)&&!ha.checkIsPing2(ra.getSpeEquipModID(i.id),t.pal_id,0))return void Nt.show("RP_SPEQUIP")}}}Nt.hide("RP_SPEQUIP")},i.checkWingEquipChange=function(){for(var t=0;t<4;t++)if(oa.getWingTOCVO(t)&&xo.checkHasBetterWingEquipCanEquip(oa.getWingTOCVO(t)))return void Nt.show("RP_WING_EQUIP");Nt.hide("RP_WING_EQUIP")},i.checkByLevelUP=function(){this.checkByRegrow(),this.checkWingOpen()},i.checkByRegrow=function(){this.checkRegrow(),this.checkOpenPal(),this.checkRoleOrange(),this.checkEquipChange(),this.checkDominateChange()},i.checkSplitRedPoint=function(){for(var t=0;t<pe.pals.length;t++){var e=oa.getSplitTOCVO(t);if(!e)return;var i=oa.getSplitXMLVO();if(i.stepNum>e.step){if(i.levelNum==e.level)return void Nt.show("RP_SPLIT");var s=xo.getGoodsNumByType(xo.GOODS_ID,10201122),n=xo.getGoodsNumByType(xo.GOODS_ID,10201160);if(0<s&&!ha.checkIsPing(3,t,0)||10<=n&&!ha.checkIsPing(3,t,1))return void Nt.show("RP_SPLIT")}}Nt.hide("RP_SPLIT")},i.checkDominateChange=function(){if(110<=pe.myEquipLevel){var t=sn.getRegrowEquipInfo();if(t){var e,i=!(this.showEffPalID=1);for(var s in t){e=t[s];var n=pe.getPalIndexByID(e.pal_id),o=sn.getCanChangeRegrowEquip(e);o&&0<o.length?(this.showEffPalID*=this.palArr[n],i=!0,Nt.show("RP_DOMINATE_CHANGE_"+n)):Nt.hide("RP_DOMINATE_CHANGE_"+n)}i?Nt.show("RP_DOMINATE_CHANGE"):Nt.hide("RP_DOMINATE_CHANGE"),this.dominaPanel&&this.dominaPanel.showBtnEff()}}},i.checkDominateDe=function(){if(110<=pe.myEquipLevel){var t=sn.getCanMeltRegrowEquip();t&&0<t.length?Nt.show("RP_DOMINATE_DE"):Nt.hide("RP_DOMINATE_DE")}},i.checkDominateAd=function(){if(110<=pe.myEquipLevel){for(var t=0;t<this.arr.length;t++){if(0<xo.getGoodsNumByType(xo.GOODS_ID,this.arr[t]))return void Nt.show("RP_DOMINATE_AD")}Nt.hide("RP_DOMINATE_AD")}},i.checkDominateUpAndQu=function(){if(110<=pe.myEquipLevel){var t=sn.getRegrowEquipInfo();if(t){var e,i=!1,s=!1;for(var n in t){e=t[n];var o,a=!1,l=!1,r=pe.getPalIndexByID(e.pal_id);for(var h in e.pos_list){o=e.pos_list[h];var u=sn.getXMLVObyPos(o.pos);a=a||0<o.equip_type_id&&o.level<u.upTotal&&xo.getGoodsNumByType(xo.GOODS_ID,10201217)>=u.getUpNeedByLevel(o.level),l=l||0<o.equip_type_id&&o.quench<u.quenchTotal&&xo.getGoodsNumByType(xo.GOODS_ID,na.DOMIN_CHIP_ARR[Math.floor(o.quench/10)])>=u.getQuenchNeedByLevel(o.quench)}a?(i=!0,Nt.show("RP_DOMINATE_UP_"+r)):Nt.hide("RP_DOMINATE_UP_"+r),l?(s=!0,Nt.show("RP_DOMINATE_QU_"+r)):Nt.hide("RP_DOMINATE_QU_"+r)}i?Nt.show("RP_DOMINATE_UP"):Nt.hide("RP_DOMINATE_UP"),s?Nt.show("RP_DOMINATE_QU"):Nt.hide("RP_DOMINATE_QU")}}},i.checkOpenPal=function(){if(pe.pals.length<4)for(var t=!1,e=1;e<4;e++){var i=oa.getRoleOpenVO(e+1);(pe.checkLevel(i.regrow,i.lv)||Ia.curLv>=i.vip)&&null==pe.getPalByIndex(e)?(t=t||!0,Nt.show("RP_OPEN_PAL_"+e)):Nt.hide("RP_OPEN_PAL_"+e)}else for(e=1;e<4;e++)Nt.hide("RP_OPEN_PAL_"+e);t?Nt.show("RP_OPEN_PAL"):Nt.hide("RP_OPEN_PAL")},i.checkEquipChange=function(){var t,e,i,s,n=xo.getEquipData()?xo.getEquipData().goods:[],o=0,a=0;for(var l in pe.pals){var r;for(var h in t=(s=pe.pals[l]).equip,q.ALLPUTSINBODY){var u,c;for(var d in r=q.ALLPUTSINBODY[h],i=null,o=0,a=q.PUT2TYPEMAP[r],t)if((u=t[d]).pos==r){i=u,o=ur.getItem(i.type_id).basePow+W.getAddExtraPower(i.extra_attr);break}for(var p in n)if(c=n[p],(e=ur.getItem(c.typeid)).type==a&&e.level<=pe.myEquipLevel&&(0==e.category||e.category==s.ext.category)&&ur.isNormalEquip(e.type)&&e.basePow+W.getAddExtraPower(c.equip_info.extra_attrs)>o)return void Nt.show("RP_EQUIP_CHANGE")}}Nt.hide("RP_EQUIP_CHANGE")},i.checkRoleOrange=function(){sn.checkOrangeDe(),sn.checkOrangeUP(),sn.checkLegendUP(),sn.checkLegendDe(),sn.checkOrangePU()},i.checkBuildSoul=function(){var t;for(var e in pe.pals){var i;for(var s in(t=pe.pals[e]).spec_equips)if(20<(i=t.spec_equips[s]).id&&i.lv<1){var n=sn.getSpEquipVO(i.id).goodsID;if(0<xo.getGoodsNumByType(xo.GOODS_ID,n))return void Nt.show("RP_BUILDSOUL")}}Nt.hide("RP_BUILDSOUL")},i.toRoleAdvanceInfo=function(){var t=new Object;t.className="m_role_advance_info_tos",this.sendSocketMessage(t)},i.onRoleAdvanceInfo=function(t){oa.handlerAdvanceInfo(t),nr.ins().functionOK=!0,nr.ins().updateFunPreview()},i.toRoleAdvanceOpen=function(t,e){void 0===e&&(e=!0);var i=new Object;i.className="m_role_advance_confirm_tos",i.id=t,this.isShowTip=e,this.sendSocketMessage(i)},i.onRoleAdvanceOpen=function(t){if(0<t.err_code){if(0==this.isShowTip)return void(this.isShowTip=!0);ce.addTip(t.err_code)}else{oa.handlerAdvanceOpen(t);var e,i=go.getFuncVOByID(t.id);if(i&&0<i.awards.length)for(var s in i.awards)if(10201147==(e=i.awards[s])[0]||10201116==e[0]||10201113==e[0]){var n=ur.getItem(e[0]);Jt.addTip(n.name+"  ×"+e[1],U.getColorDark(n.color))}this.dispatch("ROLE_ADVANCE_OPEN",t.id)}},i.toRoleFunctionInfo=function(){var t=new Object;t.className="m_role_function_open_info_tos",this.sendSocketMessage(t)},i.onRoleFunctionInfo=function(t){oa.handlerFunctionInfo(t),this.checkWingOpen()},i.toRoleFunctionOpen=function(t){var e=new Object;e.className="m_role_function_open_open_tos",e.id=t,this.sendSocketMessage(e)},i.onRoleFunctionOpen=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerFunctionOpen(t),this.dispatch("ROLE_FUNCTION_OPEN",t.id),this.checkWingOpen())},i.onPowerUpdate=function(t){var e=pe.totalPower,i=0;(i=1==pe.updatePower(t)?pe.totalPower:e+t.power)!=e&&(this._ignorePowUp?(this._end=i,this._start=0==this._start?e:this._start):wx.Ins.show(e,i)),this.dispatch("ROLE_POWER_CHANGE")},i.toRoleRegrowBuy=function(t){var e=new Object;e.className="m_role_regrow_buy_tos",e.op_type=t,this.sendSocketMessage(e)},i.onRoleRegrowBuy=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerRegrowBuy(t),this.panel.update())},i.toRoleRegrowUp=function(){var t=new Object;t.className="m_role_regrow_regrow_tos",this.sendSocketMessage(t)},i.onRoleRegrowUp=function(t){0<t.err_code?ce.addTip(t.err_code):(pe.updateRegrowLV(t.regrow_lv),oa.handlerRegrowUp(t),this.panel.update(),this.checkRegrowScoreRP(t.regrow_lv),this.dispatch("REGROWLV_UP"))},i.toRoleRegrowInfo=function(){var t=new Object;t.className="m_role_regrow_info_tos",this.sendSocketMessage(t)},i.onRoleRegrowInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerRegrowInfo(t),this.panel&&this.panel.parent&&this.panel.update(),this.checkRegrowScoreRP(t.regrow_lv))},i.checkRegrowScoreRP=function(t){var e=pe.getScore(4),i=oa.getRegrowLvVO(t);oa.getRegrowLvVO(t+1)&&e>=i.needExp?Nt.show("RP_REGROW_SCORE"):Nt.hide("RP_REGROW_SCORE")},i.toRoleSplitUpgrade=function(t,e){var i=new Object;i.className="m_role_split_upgrade_tos",i.pal_id=t,i.op_type=e,this.sendSocketMessage(i)},i.onRoleSplitUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerSplitUpgrade(t),this.checkSplitRedPoint(),this.panel.update())},i.toRoleSplitInfo=function(t,e){if(void 0===e&&(e=!1),!oa.getSplitTOCVO(t)||e){var i=new Object;i.className="m_role_split_info_tos",i.pal_id=t,this.sendSocketMessage(i)}},i.onRoleSplitInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerSplitInfoVO(t),this.checkSplitRedPoint(),this.panel&&this.panel.parent&&this.panel.update())},i.toRoleWingUpgrade=function(t,e){var i=new Object;i.className="m_role_wing_upgrade_tos",i.pal_id=t,i.op_type=e,this.sendSocketMessage(i)},i.onRoleWingUpgrade=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerWingUpgrade(t),this.panel.update(),this._wingEquipView&&this._wingEquipView.parent&&this._wingEquipView.updateView())},i.toRoleWingLoad=function(t,e){var i=new Object;i.className="m_role_wing_equip_load_tos",i.pal_id=t,i.load_info=e,this.sendSocketMessage(i)},i.onRoleWingLoad=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handerWingEquipLoad(t),this._wingEquipView&&this._wingEquipView.parent&&this._wingEquipView.updateView())},i.openRoleWingEquip=function(){this._wingEquipView=this._wingEquipView||Aa.getIns(47e3,"wings.RoleWingEquipView"),this._wingEquipView.openWindow()},i.toRoleWingInfo=function(t,e){if(void 0===e&&(e=!1),oa.checkFunctionIsOpen(1)&&(!oa.getWingTOCVO(t-1)||e)){var i=new Object;i.className="m_role_wing_info_tos",i.pal_id=t,this.sendSocketMessage(i)}},i.onRoleWingInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerWingInfoVO(t),this.checkWingCanUp(),this.dispatch("WING_INIT"),this.panel&&this.panel.parent&&this.panel.update())},i.openRolePanel=function(t){if(void 0===t&&(t=0),1==t&&pe.myLevel<100)Jt.addTip("100级开放转生系统");else{if(!se.has("modules/role"))return c.send(29003),void se.add("modules/role","正在加载角色模块",this,this.openRolePanel,[t]);c.send(29004),this.panel=this.panel||new mF,this.panel.showViewByIndex(t),this.panel.parent?this.panel.closeWindow():this.panel.openWindow()}},i.updateRolePanel=function(){this.panel&&this.panel.update()},i.openCategoryPanel=function(){se.has("modules/role")?(this.categoryPanel=this.categoryPanel||Aa.getIns(47e3,"CategoryPanel"),this.categoryPanel.openWindow(null,!0)):se.add("modules/role","正在加载角色模块",this,this.openCategoryPanel)},i.toRoleSpecialUpdate=function(t,e){var i=new Object;i.className="m_role_special_equips_upgrade_tos",i.actor_id=this.curActor=t,i.spec_equip_id=this.curSpEquipID=e,this.sendSocketMessage(i)},i.onRoleSpecialUpdate=function(t){0<t.err_code?(this.ignorePowUp=!1,ce.addTip(t.err_code)):(0<this.curActor&&0<this.curSpEquipID&&(oa.updateSpEquipTOC(this.curActor,this.curSpEquipID),12!=this.curSpEquipID&&13!=this.curSpEquipID||this.dispatch("EXERCISE_KNIGHTHOOD_CONDICTION_UPDATE"),this.curActor=this.curSpEquipID=0,this.checkBuildSoul(),this.checkSPEquip()),this.spEquipView&&this.spEquipView.parent&&this.spEquipView.spEquipUpgradeBack(),this.buildSoulView&&this.buildSoulView.parent&&this.buildSoulView.spEquipUpgradeBack(),this.panel&&this.panel.parent&&this.panel.update())},i.toSpecicalEquipAct=function(t){var e=new Object;e.className="m_role_special_equips_lv_active_tos",e.actor_id=this.spEquipActID,e.spec_equip_id=this.spEquipID=t,this.sendSocketMessage(e)},i.onSpecicalEquipAct=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.updateSpEquipStageLv(this.spEquipActID,this.spEquipID),T.dispatch("ROLE_UPDATE_REFINE"))},i.openSpEquipView=function(t,e){this.spEquipView=this.spEquipView||Aa.getIns(47e3,"RoleSpecialEquipView"),this.spEquipView.changeActorAndEquip(t,e),this.spEquipActID=t,this.spEquipView.openWindow(),this.spEquipView.parent&&this.spEquipView.updateView()},i.openBuildSoulView=function(t){this.buildSoulView=this.buildSoulView||Aa.getIns(47e3,"BuildSoulView"),this.buildSoulView.changeActor(t),this.buildSoulView.openWindow(),this.buildSoulView.parent&&this.buildSoulView.updateView()},i.toEquipLoad=function(t,e){var i=new Object;i.className="m_equip_load_tos",i.actor_id=t,i.load_info=e,this.sendSocketMessage(i)},i.onEquipLoad=function(t){if(0==t.err_code){if(pe.updateActorEquip(t.actor_id,t.skin,t.update_equip),this.isOneKey){var e=oa.getCanChangeEquips();if(e&&0<e.length){var i=pe.getPalByIndex(oa.curActorIndex).base.role_id;this.toEquipLoad(i,e)}else this.isOneKey=!1,this.updateRolePanel(),this.dispatch("EQUIP_UPDATE")}else this.updateRolePanel(),this.dispatch("EQUIP_UPDATE");this.panel&&this.panel.displayedInStage&&this.panel.visible&&this.panel.showGuide(),this.dispatch("EQUIP_UPDATE_POS",t.update_equip)}else this.isOneKey=!1,ce.addTip(t.err_code)},i.openOrangeView=function(t){me.linkTo(11401)},i.toEquipUp=function(t,e){var i=new Object;i.className="m_equip_up_tos",i.actor_id=t,i.pos=e,this.sendSocketMessage(i)},i.onEquipUp=function(t){if(0==t.err_code){for(var e=pe.getPal(t.actor_id),i=e.equip.length,s=0;s<i;s++)if(e.equip[s].pos==t.update_equip.pos){e.equip[s]=t.update_equip;break}Jt.addTip("升级成功并在角色面板穿戴"),this.updateRolePanel(),this.dispatch("EQUIP_UPGRADE",t.update_equip)}else this.ignorePowUp=!1,ce.addTip(t.err_code)},i.toEquipPurifyLoad=function(t,e){var i=new Object;i.className="m_equip_purify_load_tos",i.actor_id=t,i.pos=e,this.sendSocketMessage(i)},i.onEquipPurifyLoad=function(t){0==t.err_code?(this.dispatch("LOAD_ORAN_EQUIP_PURIFY_ATTR",t.update_purify),this.onGetOranEquipPurifyAttrs(t)):ce.addTip(t.err_code)},i.openEquipPurifyPanel=function(t,e,i){this.curP=t,this.roleForgePanel=new JD,this.roleForgePanel.openWindow(),this.roleForgePanel.curEquip=this.curP,this.roleForgePanel.actID=e,this.roleForgePanel.equipPos=i,this.toEquipPurifyLoad(e,i)},i.toEquipPurify=function(t,e){var i=new Object;i.className="m_equip_purify_tos",i.actor_id=t,i.pos=e,this.sendSocketMessage(i)},i.onEquipPurify=function(t){0==t.err_code?this.roleForgePanel.data(t.update_purify):ce.addTip(t.err_code)},i.toEquipPurifyLock=function(t,e,i,s){var n=new Object;n.className="m_equip_purify_lock_tos",n.actor_id=t,n.pos=e,n.prop_id=i,n.lock_state=s,this.sendSocketMessage(n)},i.onEquipPurifyLock=function(t){0==t.err_code?this.dispatch("UPDATE_ORAN_EQUIP_PURIFY_LOCK_STATE",t.update_purify):ce.addTip(t.err_code)},i.toEquipPurifyReplace=function(t,e){var i=new Object;i.className="m_equip_purify_replace_tos",i.actor_id=t,i.pos=e,this.sendSocketMessage(i)},i.onEquipPurifyReplace=function(t){if(0==t.err_code){var e=t.update_purify;this.dispatch("UPDATE_ORAN_EQUIP_PURIFY_REPLACE",e),this.dispatch("GET_ORAN_EQUIP_PURIFY_ATTRS")}else ce.addTip(t.err_code)},i.toRoleExchangeInfo=function(){var t=new Object;t.className="m_role_exchange_info_tos",this.sendSocketMessage(t)},i.onRoleExchangeInfo=function(t){0==t.err_code?(oa.exchangeInfos=t.exchange_info,this.dispatch("ROLE_EXCHANGE_INFO")):ce.addTip(t.err_code)},i.toExchange=function(t,e,i,s,n,o){this.exchangeCallBack=n,this.exchangeCaller=o;var a=new Object;a.className="m_role_exchange_tos",a.module_id=t,a.num=i,a.scheme=e,a.use_item=s,this.sendSocketMessage(a)},i.onExchange=function(t){0==t.err_code?(T.dispatch("ROLE_EXCHANGE_BACK_SUCC",t),this.onRoleExchange(t),this.exchangeCallBack&&this.exchangeCaller&&this.exchangeCallBack.call(this.exchangeCaller)):(T.dispatch("ROLE_EXCHANGE_BACK_FAIL"),10000012==t.err_code?Lo.showAlert():ce.addTip(t.err_code))},i.toEquipCompose=function(t,e,i,s){void 0===e&&(e=1),void 0===i&&(i=0),void 0===s&&(s=0),this._curOranPos=i,this._curActorID=s,this.toExchange(6,t,e,null)},i.onRoleExchange=function(t){if(6==t.module_id)if(0==t.err_code)for(var e=0;e<t.reward.length;e++){var i=xo.getEquipByTypeID(t.reward[e].id);if(i&&0<this._curOranPos){var s=new Object;s.className="p_kv",s.id=i.id,s.val=this._curOranPos,this.toEquipLoad(this._curActorID,[s]),this.dispatch("EQUIP_COMPOSE",[this._curOranPos,i.typeid]),this._curOranPos=this._curActorID=0}}else this.ignorePowUp=!1,ce.addTip(t.err_code)},i.onRoleBaseReload=function(t){var e;for(var i in t.role_base){var s;for(var n in e=t.role_base[i],pe.pals)s=pe.pals[n],e.role_id==s.base.role_id&&(s.base=e)}this.dispatch("EXERCISE_KNIGHTHOOD_CONDICTION_UPDATE")},i.openDecomposeView=function(){this._decomposeView=this._decomposeView||new KD,this._decomposeView.openWindow(),this._decomposeView.parent&&this._decomposeView.updateView()},i.undateDecomposeView=function(){this._decomposeView&&this._decomposeView.parent&&this._decomposeView.updateView(),this._legendDecomposeView&&this._legendDecomposeView.parent&&this._legendDecomposeView.updateView(),this.dominaPanel&&this.dominaPanel.parent&&this.dominaPanel.update()},i.toOpneNewPal=function(t,e,i){var s=new Object;s.className="m_role_pal_open_tos",s.pal_id=t,s.sex=e,s.category=i,this.sendSocketMessage(s)},i.onOpneNewPal=function(t){0==t.err_code?(this.categoryPanel&&this.categoryPanel.parent&&this.categoryPanel.closeWindow(),Cr.ins().toDetail(),pe.updatePal(t.new_pal),this.dispatch("UPDATE_PAL_DATA"),this.dispatch("ROLE_POWER_CHANGE")):ce.addTip(t.err_code)},i.onScoreChange=function(t){var e;for(var i in t.role_scores)e=t.role_scores[i],this.dispatch("ROLE_SCORE_BEFORE_CHANGE",e),pe.setScore(e.id,e.val),this.dispatch("ROLE_SCORE_CHANGE",e)},i.openRoleFashionPanel=function(t){void 0===t&&(t=0),this.roleFashionPanel=this.roleFashionPanel||Aa.getIns(47e3,"fashion.RoleFashionPanel"),this.roleFashionPanel.openWindow(),this.roleFashionPanel.parent&&(this.roleFashionPanel.tab.selectedIndex=t,this.checkAllFashion())},i.toFashionInfo=function(t){var e=new Object;e.className="m_fashion_info_tos",e.pal_id=t,this.sendSocketMessage(e)},i.onFashionInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerFashionInfo(t),this.dispatch("FASHION_DICINIT"),this.checkAllFashion(),this.checkRoleTarRP(),this.roleFashionPanel&&this.roleFashionPanel.parent&&this.roleFashionPanel.updateView())},i.toChangeRoleName=function(t,e){var i=new Object;i.className="m_role_rename_tos",i.new_name=t,i.goods_id=e,this.sendSocketMessage(i)},i.onChangeRoleName=function(t){if(0<t.err_code)Jt.addTip(t.new_name);else{Jt.addTip("恭喜你成功将角色名称改为"+t.new_name),pe.user.attr.role_name=t.new_name;for(var e=WS.all,i=0;i<e.length;i++){var s=e[i];null!=s&&null!=s.pvo&&(s.pvo.pal_name=t.new_name,s.reset(s.pvo,!1))}this.dispatch("ROLE_CHANGE_NAME"),Bt.reportChangeName()}},i.checkFashion=function(t){if(t&&xo.getGoodsData())for(var e=xo.getGoodsData().goods,i=1;i<4;i++){var s,n=!1,o=oa.getFashionArr(i),a=oa.getFashionListDicByActID(t.pal_id);for(var l in o){var r;if(s=o[l],!a.hasOwnProperty(s.id+""))for(var h in s.needsArr){for(var u in r=s.needsArr[h],e)if(e[u].typeid==parseInt(r)){n=!0;break}}}if(this["showFashionRP"+i]=this["showFashionRP"+i]||n,n&&this.roleFashionPanel&&this.roleFashionPanel.tab.selectedIndex==i-1)for(var c=0;c<pe.pals.length;c++)if(pe.pals[c].pal_id==t.pal_id){Nt.show("RP_FASHION"+i+"_"+c);break}}},i.toFashionreinf=function(t,e){var i=new Object;i.className="m_fashion_reinf_tos",i.pal_id=t,i.fashion_id=e,this.sendSocketMessage(i)},i.onFashionUpdate=function(t){if(0<t.err_code)ce.addTip(t.err_code);else{var e,i=oa.getFashionInfoByActID(t.pal_id),s=[];for(var n in t.fashion){if(e=t.fashion[n],2==t.op_type){var o=!1;if(i&&i.fashion_list)for(var a in i.fashion_list)if(i.fashion_list[a].fashion_id==e.fashion_id){o=!0;break}if(o)Jt.addTip("续期成功，有效期延长");else for(var l=pe.getPalIndexByID(t.pal_id),r=1;r<4;r++){var h=oa.getFashionDic(r),u=h[e.fashion_id];if(u){switch(u.isNew=!0,r){case 1:Nt.show("RP_FASHION_NEW1_"+l);break;case 2:Nt.show("RP_FASHION_NEW2_"+l);break;case 3:Nt.show("RP_FASHION_NEW3_"+l)}if(1==u.popUp){var c=new Object;c.className="p_kv",c.id=t.pal_id,c.val=e.fashion_id,s.push(c)}break}}}0<s.length&&(this.getView=this.getView||Aa.getIns(47e3,"fashion.FashionGetView"),this.getView.data=s,this.getView.parent||this.getView.openWindow())}for(n in oa.handlerFashionUpdate(t),t.fashion)switch(e=t.fashion[n],t.op_type){case 1:Jt.addTip("淬炼成功"),this.roleFashionPanel&&this.roleFashionPanel.parent&&this.roleFashionPanel.levelUp(e);break;case 2:this.roleFashionPanel&&this.roleFashionPanel.parent&&this.roleFashionPanel.updateCurView(e.fashion_id);break;case 3:for(this.roleFashionPanel&&this.roleFashionPanel.parent&&this.roleFashionPanel.updateCurView(),r=1;r<4;r++)if(u=(h=oa.getFashionDic(r))[e.fashion_id]){switch(r){case 1:Jt.addTip("时装【"+u.name+"】过期，请重新激活",U.getColorDark(u.color));break;case 2:Jt.addTip("武饰【"+u.name+"】过期，请重新激活",U.getColorDark(u.color));break;case 3:Jt.addTip("羽翼【"+u.name+"】过期，请重新激活",U.getColorDark(u.color))}return void this.checkAllFashion()}}}this.checkAllFashion(),this.dispatch("FASHION_NUM_CHANGE"),this.checkRoleTarRP()},i.toFashionChange=function(t,e,i){var s=new Object;s.className="m_fashion_change_tos",s.pal_id=t,s.take_id=e,s.wear_id=i,this.sendSocketMessage(s)},i.onFashionChange=function(t){0==t.err_code?(oa.handlerFashionChange(t),0<t.wear_id&&Jt.addTip("成功穿戴外观"),this.roleFashionPanel&&this.roleFashionPanel.parent&&this.roleFashionPanel.updateView()):ce.addTip(t.err_code)},i.toFashionActive=function(t,e){var i=new Object;i.className="m_fashion_active_tos",i.pal_id=t,i.good_id=e,this.sendSocketMessage(i)},i.toSimpleInfo=function(t){var e=new Object;e.className="m_role_simple_info_tos",e.role_id=t,this.sendSocketMessage(e)},i.onSimpleInfo=function(t){0==t.err_code?(oa.updateRoleOtherSimpleInfo(t.role_info),this.dispatch("ROLE_SIMPLE_INFO",t.role_info.role_id)):ce.addTip(t.err_code)},i.toChaoTicEquipInfo=function(){var t=new Object;t.className="m_chaotic_equip_info_tos",this.sendSocketMessage(t)},i.onChaoTicEquipInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerChaoTicInfo(t),this.dispatch("LEGEND_EQUIP_INFO"))},i.toChaoTicEquipUpdate=function(t,e){var i=new Object;i.className="m_chaotic_equip_upgrade_tos",i.pal_id=t,i.type_id=e,this.sendSocketMessage(i)},i.onChaoTicEquipUpdate=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerChaoTicUpgrade(t),this.dispatch("LEGEND_EQUIP_UPGRADE",t.type_id))},i.toChaoTicEquipLoad=function(t,e){var i=new Object;i.className="m_chaotic_equip_load_tos",i.pal_id=t,i.type_id=e,this.sendSocketMessage(i)},i.onChaoTicEquipLoad=function(t){0<t.err_code?ce.addTip(t.err_code):(oa.handlerChaoTicLoad(t),this.dispatch("LEGEND_EQUIP_COMPOSE",t.type_id))},i.onAttrChange=function(t){for(var e=pe.user,i=0;i<t.changes.length;i++){var s=t.changes[i];switch(s.change_type){case 13:0==s.new_value&&(Ol.ins().resetMyFamilyView(),Dn.resetMyFamilyData()),e.attr.family_id=s.new_value,Ol.ins().checkFamilyRedPoint();break;case 30:e.attr.pk_mode=s.new_value,this.dispatch("CROSS_SERVER_TOWER_PK_MOD_CHANGE")}}},i.toSuitActivate=function(t,e){var i=new Object;i.className="m_fashion_suit_activate_tos",i.pal_id=t,i.suit_id=e,this.sendSocketMessage(i)},i.onSuitActivate=function(t){if(t.err_code)ce.addTip(t.err_code);else{var e=t.pal_id,i=t.suit_id,s=oa.getSuitNameBySuitID(i);Jt.addTip("【"+s+"】套装属性已激活"),oa.updateRoleSuitInfo(e,i),this.roleFashionPanel&&this.roleFashionPanel.parent&&(this.roleFashionPanel.updateSuitShow(),this.roleFashionPanel.updateSuitActivate(e,i)),oa.checkSuitRedPoint()}},i.toSuitInfo=function(){var t=new Object;t.className="m_fashion_suit_info_tos",this.sendSocketMessage(t)},i.onSuitInfo=function(t){if(t.err_code)ce.addTip(t.err_code);else{var e;for(var i in oa.initRoleSuitInfo(),t.pal_fashion_suits)e=t.pal_fashion_suits[i],oa.updateRoleSuitInfoByPpfs(e.pal_id,e.suits);this.roleFashionPanel&&this.roleFashionPanel.parent&&(this.roleFashionPanel.updateSuitShow(),this.roleFashionPanel.updateSuitActivateAll())}},i.toGetOranEquipPurifyAttrs=function(){for(var t,e=0;e<4;e++){var i;if(t=pe.getPalByIndex(e))for(var s in t.equip)(i=t.equip[s])&&this.toEquipPurifyLoad(t.pal_id,i.pos)}},i.onGetOranEquipPurifyAttrs=function(t){var e=[];e.push(t.actor_id),e.push(t.pos),e.push(t.update_purify.purify_list),oo.ins().setCurEquipPurifyAttr(e)},I(0,i,"ignorePowUp",null,function(t){0==(this._ignorePowUp=t)&&this._end>this._start&&(wx.Ins.show(this._start,this._end),this._start=this._end=0)}),e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),kr=function(t){function e(){this.changeNameView=null,this.roleSetCityView=null,this.roleSetView=null,this.roleReorderView=null,this.changeSexView=null,this.selfPanel=null,this.frameTip=null,this.bubbleTip=null,e.__super.call(this)}w(e,"modules.roleSet.RoleSetCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_CHANGESEX_VIEW",this,this.openChangeSexView),this.addMessageListener("OPEN_CHANGECITY_VIEW",this,this.openRoleSetCityView),this.addMessageListener("OPEN_REORDER_VIEW",this,this.openReorderView),this.addMessageListener("OPEN_ROLESET_VIEW",this,this.openRoleSetView),this.addMessageListener("OPEN_ROLE_SETNAME_VIEW",this,this.openChangeNameView),this.addMessageListener("ENTER_GAME",this,this.enterGame),this.addSocketListener("m_pal_set_city_toc",this,this.onPalSetCity),this.addSocketListener("m_pal_change_sex_toc",this,this.onPalChangeSex),this.addSocketListener("m_pal_reorder_toc",this,this.onPalReorder),this.addSocketListener("m_role_avatar_frame_info_toc",this,this.onAvatarFrameInfo),this.addSocketListener("m_role_avatar_frame_add_toc",this,this.onAvatarFrameAdd),this.addSocketListener("m_role_avatar_frame_expire_toc",this,this.onAvatarFrameExpire),this.addSocketListener("m_role_avatar_frame_use_toc",this,this.onAvatarFrameUse),this.addSocketListener("m_role_chat_bubble_info_toc",this,this.onBubbleInfo),this.addSocketListener("m_role_chat_bubble_add_toc",this,this.onBubbleAdd),this.addSocketListener("m_role_chat_bubble_expire_toc",this,this.onBubbleExpire),this.addSocketListener("m_role_chat_bubble_use_toc",this,this.onBubbleUse)},i.enterGame=function(){_t.setTimeout(this,this.toAvatarFrameInfo,null,St.ENTER_DELAY),_t.setTimeout(this,this.toBubbleInfo,null,St.ENTER_DELAY)},i.toBubbleInfo=function(){var t=new Object;t.className="m_role_chat_bubble_info_tos",this.sendSocketMessage(t)},i.onBubbleInfo=function(t){0==t.err_code?(la.setBubbleInfo(t.cur_bubble_id,t.chat_bubbles),this.updateSelfPanel()):ce.addTip(t.err_code)},i.onBubbleAdd=function(t){la.addBubble(t.chat_bubbles),la.checkBubbleRedPoint(),this.updateSelfPanel()},i.onBubbleExpire=function(t){la.updateBubbleListByExpire(t.chat_bubble_ids),la.checkBubbleRedPoint(),this.updateSelfPanel()},i.toBubbleUse=function(t){var e=new Object;e.className="m_role_chat_bubble_use_tos",e.chat_bubble_id=t,this.sendSocketMessage(e)},i.onBubbleUse=function(t){0==t.err_code?(la.updateCurBubbleId(t.chat_bubble_id),la.checkBubbleRedPoint(),this.updateSelfPanel()):ce.addTip(t.err_code)},i.openChangeNameView=function(){this.changeNameView=this.changeNameView||Aa.getIns(48e3,"RoleSetChangeNameView"),this.changeNameView.parent||this.changeNameView.openWindow(),this.changeNameView.update()},i.openRoleSetCityView=function(){this.roleSetCityView=this.roleSetCityView||Aa.getIns(48e3,"RoleSetCityView"),this.roleSetCityView.parent||this.roleSetCityView.openWindow(),this.roleSetCityView.update()},i.openRoleSetView=function(){this.roleSetView=this.roleSetView||Aa.getIns(48e3,"RoleSetView"),this.roleSetView.parent||this.roleSetView.openWindow(),this.roleSetView.update()},i.openReorderView=function(){this.roleReorderView=this.roleReorderView||Aa.getIns(48e3,"RoleSetReorderView"),this.roleReorderView.parent||this.roleReorderView.openWindow(),this.roleReorderView.update()},i.openChangeSexView=function(){this.changeSexView=this.changeSexView||Aa.getIns(48e3,"RoleChangeSexView"),this.changeSexView.parent||this.changeSexView.openWindow()},i.toPalReorder=function(t){var e=new Object;e.className="m_pal_reorder_tos",e.pal_seqs=t,this.sendSocketMessage(e)},i.onPalReorder=function(t){0<t.err_code?ce.addTip(t.err_code):(pe.reorderPal(t.pal_seqs),this.dispatch("ROLE_REORDER"),this.roleReorderView&&this.roleReorderView.parent&&this.roleReorderView.closeWindow(),Jt.addTip("调整顺序成功"))},i.toPalChangeSex=function(t,e){var i=new Object;i.className="m_pal_change_sex_tos",i.pal_id=t,i.new_sex=e,this.sendSocketMessage(i)},i.onPalChangeSex=function(t){0<t.err_code?ce.addTip(t.err_code):(pe.getPal(t.pal_id).ext.sex=t.new_sex,this.dispatch("ROLE_CHANGE_SEX"),Jt.addTip("性别转换成功"))},i.toPalSetCity=function(t){var e=new Object;e.className="m_pal_set_city_tos",e.city=t,this.sendSocketMessage(e)},i.onPalSetCity=function(t){0<t.err_code?ce.addTip(t.err_code):this.roleSetCityView&&this.roleSetCityView.update()&&this.roleSetCityView.update()},i.toAvatarFrameUse=function(t){var e=new Object;e.className="m_role_avatar_frame_use_tos",e.frame_id=t,this.sendSocketMessage(e)},i.onAvatarFrameUse=function(t){0==t.err_code?(la.updateCurAvatarFrameId(t.frame_id),la.checkFrameRedPoint(),this.dispatch("ON_AVATARFRAMEINFO"),this.updateSelfPanel()):ce.addTip(t.err_code)},i.onAvatarFrameExpire=function(t){la.updateAvatarFrameListByExpire(t.frame_ids),la.checkFrameRedPoint(),this.dispatch("ON_AVATARFRAMEINFO"),this.updateSelfPanel()},i.onAvatarFrameAdd=function(t){la.addAvatarFrame(t.frames),la.checkFrameRedPoint(),this.updateSelfPanel()},i.toAvatarFrameInfo=function(){var t=new Object;t.className="m_role_avatar_frame_info_tos",this.sendSocketMessage(t)},i.onAvatarFrameInfo=function(t){0==t.err_code?(la.setAvatarFrameInfo(t.cur_frame_id,t.avatar_frames),this.dispatch("ON_AVATARFRAMEINFO")):ce.addTip(t.err_code)},i.openSelfPanel=function(){this.selfPanel=this.selfPanel||Aa.getIns(48e3,"RoleSetSelfPanel"),this.selfPanel.openWindow(),this.selfPanel.update()},i.updateSelfPanel=function(){this.selfPanel&&this.selfPanel.isPopup()&&this.selfPanel.update()},i.openFrameTip=function(t){this.frameTip=this.frameTip||Aa.getIns(48e3,"RoleSetSelfFrameTip"),this.frameTip.openWindow(),this.frameTip.update(t)},i.openBubbleTip=function(t){this.bubbleTip=this.bubbleTip||Aa.getIns(48e3,"RoleSetSelfBubbleTip"),this.bubbleTip.openWindow(),this.bubbleTip.update(t)},I(1,e,"ins",function(){return e._ins=e._ins||new e},com.managers.BaseModule._$SET_ins),e._ins=null,e}(),Ar=function(t){function e(){this.tempP=null,this.tempActorP=null,e.__super.call(this)}w(e,"modules.rpMask.RpMaskModule",t);var i=e.prototype;return i.initListeners=function(){t.prototype.initListeners.call(this),this.addSocketListener("m_hidden_red_point_info_toc",this,this.onInfo),this.addSocketListener("m_hidden_red_point_save_toc",this,this.onRPSave),this.addMessageListener("ENTER_GAME",this,this.enterGameToInfo)},i.enterGameToInfo=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_hidden_red_point_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(ha.setMaskInfo(t.red_points),this.dispatch("RPMASK_INFO_UPDATE")):ce.addTip(t.err_code)},i.toRPSave=function(t,e,i){this.tempP=ha.getPInfo(t),this.tempActorP=ha.getPActorInfo(t,this.tempP),this.tempActorP||(this.tempActorP=new Object,this.tempActorP.className="p_actor_hidden_red_point",this.tempActorP.actor_id=e),this.tempActorP.red_points=i;var s=new Object;s.className="m_hidden_red_point_save_tos",s.mod_id=t,s.hidden_red_point=this.tempActorP,this.sendSocketMessage(s)},i.onRPSave=function(t){0==t.err_code?(ha.updateMaskInfo(t.mod_id,t.hidden_red_point),Jt.addTip("设置成功"),this.dispatch("RPMASK_INFO_UPDATE")):ce.addTip(t.err_code)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(l),Er=function(t){function s(){s.__super.call(this)}w(s,"modules.scene.cases.CollectCase",l);var e=s.prototype;return e.initListeners=function(){this.addSocketListener("m_collect_get_toc",this,this.onCollectGet),this.addSocketListener("m_collect_collects_toc",this,this.onCollectCollects),this.addSocketListener("m_collect_remove_toc",this,this.onCollectRemove)},e.collectEnter=function(t){var e=s.collectQuit.indexOf(t.id);-1!=e&&s.collectQuit.splice(e,1);var i=Se.getUnit(t.id);null==i?((i=xe.getCollectThing()).reset(t),_e.addUnit(i)):i.reset(t)},e.toCollectGet=function(t,e){var i=new Object;i.className="m_collect_get_tos",i.pal_id=t,i.id=e,this.sendSocketMessage(i)},e.onCollectGet=function(t){if(0!=t.err_code)return 31024020!=t.err_code&&ce.addTip(t.err_code),void T.dispatch("COLLECT_GET_FINISH_RESULT");for(var e in Se.collectDict){var i=Se.collectDict[e];if(i.collectVo&&i.collectVo.id&&i.collectVo.id==t.id){T.dispatch("COLLECT_ROLE_COLLECT",t.id);break}}},e.onCollectCollects=function(t){if(0!=t.err_code)return ce.addTip(t.err_code),void(WS&&WS.main&&(WS.main.removeCollectingShow(),T.dispatch("COLLECT_GET_FINISH_RESULT")));var e=mn.getFightSoulVO(t.type_id);e&&(Jt.addTip(e.name+"×1"),tn.curWillCollectId=0),T.dispatch("COLLECT_GET_FINISH_RESULT")},e.toCollectSotop=function(t){var e=new Object;e.className="m_collect_stop_tos",e.id=t,this.sendSocketMessage(e),WS&&WS.main&&WS.main.removeCollectingShow()},e.onCollectRemove=function(t){var e=t.id;for(var i in Se.collectDict){var s=Se.collectDict[i];if(s.collectVo&&s.collectVo.id&&s.collectVo.id==e){_e.removeUnit(e),T.dispatch("COLLECT_IN_MAP_SLICE_CHANGE");break}}},s.ins=function(){return s._ins=s._ins||new s},s._ins=null,s.collectQuit=[],s}(),Rr=function(t){function n(){n.__super.call(this)}w(n,"modules.scene.cases.DropCase",l);var e=n.prototype;return e.initListeners=function(){this.addSocketListener("m_role_drop_collect_toc",this,this.onDropCollect),this.addSocketListener("m_role_drop_info_toc",this,this.onDropInfo)},e.toDropCollect=function(){if(n.dorpArr&&0<n.dorpArr.length){var t=new Object;t.className="m_role_drop_collect_tos",this.sendSocketMessage(t)}},e.onDropCollect=function(t){0!=t.err_code&&13200008!=t.err_code?ce.addTip(t.err_code):(this.getAllDrop(),_t.setTimeout(this,this.totalGetTip,[t.dropping],100*n.dorpArr.length+1500),13200008==t.err_code&&_t.setTimeout(this,ce.addTip,[13200008],100*(n.dorpArr.length+1)+1500))},e.toDropInfo=function(){var t=new Object;t.className="m_role_drop_info_tos",this.sendSocketMessage(t)},e.onDropInfo=function(t){this.setDrops(t.dropping),this.toDropCollect()},e.setDrops=function(t,e){if(t&&0<t.length){if(null==e&&null==WS.main)return;e=e||WS.main.pt;var i=0,s=0;for(_e.mapGrid.getNodeWalkAble(e.x,e.z)&&this.createDrop(t[s++],Rt.getOne(e.x,e.z));s<=t.length-1;){++i;var n=0;for(n=e.x-i;n<=e.x+i;n++)if(_e.mapGrid.getNodeWalkAble(n,e.z-i)&&this.createDrop(t[s++],Rt.getOne(n,e.z-i)),s>=t.length)return;for(n=e.z-i+1;n<=e.z+i;n++)if(_e.mapGrid.getNodeWalkAble(e.x+i,n)&&this.createDrop(t[s++],Rt.getOne(e.x+i,n)),s>=t.length)return;for(n=e.x-i;n<=e.x+i-1;n++)if(_e.mapGrid.getNodeWalkAble(n,e.z+i)&&this.createDrop(t[s++],Rt.getOne(n,e.z+i)),s>=t.length)return;for(n=e.z-i+1;n<=e.z+i-1;n++)if(_e.mapGrid.getNodeWalkAble(e.x-i,n)&&this.createDrop(t[s++],Rt.getOne(e.x-i,n)),s>=t.length)return}}},e.createDrop=function(t,e){var i=n.getDrop();i.reset(t);var s=Ot.ptToPoint(e);i.pos(s.x,s.y),_e.mid.addChild(i),n.dorpArr.push(i)},e.getAllDrop=function(){for(var t=[];0<n.dorpArr.length;){var e=new De;e.s=n.dorpArr.pop();var i=_e.mid.localToGlobal(new Tt(e.s.x,e.s.y)),s=or.ins().getBagPos();e.fX=i.x,e.fY=i.y,e.tX=s.x,e.tY=s.y,e.compH=Q.create(this,n.disposeDrop,[e.s],!0),t.push(e)}Le.ins.add(t)},e.totalGetTip=function(t){var e;for(var i in t){e=t[i];var s=ur.getRewardByTkv(e);s&&Jt.addTip(s.name+"  ×"+e.val,U.getColorDark(s.color),1)}},n.ins=function(){return null==n._instance&&(n._instance=new n),n._instance},n.onChangeMap=function(){var t;for(var e in n.dorpArr)t=n.dorpArr[e],n.disposeDrop(t)},n.getDrop=function(){return 0<n.dropPool.length?n.dropPool.pop():new Ih},n.disposeDrop=function(t){t.removeSelf(),n.dropPool.length<15?(t.scale(1,1),n.dropPool.push(t)):t.destroy()},n._instance=null,n.dorpArr=[],n.dropPool=[],n}(),Or=function(t){function h(){this.aparter=null,this.buffAparter=null,this.showHPDownID=0,this.hasShowHPDown=!1,this.petAttackAbled=!0,this.timeKey=0,this.aparter=new M(this,this.onfight,2),this.buffAparter=new M(this,this.onBuffEffect,2),h.__super.call(this)}w(h,"modules.scene.cases.FightCase",l);var e=h.prototype;return e.initListeners=function(){this.addMessageListener("ENTER_MAP",this,this.onChangeMap),this.addSocketListener("m_fight_attack_toc",this,this.onFightWork),this.addSocketListener("m_fight_buff_effect_toc",this,this.onBuffEffectWork)},e.onBuffEffectWork=function(t){this.buffAparter.work(t)},e.onFightWork=function(t){1==pe.isMyPal(t.src_id)?this.onfight(t):this.aparter.work(t),this.dispatch("FIGHT_CASE__ON_FIGHT_WORK",t)},e.onfight=function(t){var e=pe.isMyPal(t.src_id);if(1==e){var i=WS.getIns(t.src_id);null!=i?-1==h.SKILLS_SERVER_ACT.indexOf(t.skill_id)&&(i.onAttackTime=S.now(),i.isAttackBack=!0):t.src_id==YS.ins.id&&(YS.ins.onAttackTime=S.now(),YS.ins.isAttackBack=!0)}if(0==t.err_code)this.showFight(t,e),1==e&&T.dispatch("FIGHT_ATTACK_TOC_MYSELF_BACK",t.skill_id);else{if(10002017==t.err_code)return ce.addTip(t.err_code),void(WS&&WS.main&&this.dispatch("CAN_NOT_AUTO_HIT"));10002005!=t.err_code&&10002006!=t.err_code&&ce.addTip(t.err_code)}},e.showFight=function(t,e){var i=fa.getFightVO(t.skill_id);if(null!=i){var s=this.getSrc(t);if(null!=s&&(1!=s.unitType||1!=s.hideLimit)||ua.isFamilyFightMap()){var n=this.getDest(t);if(null==s&&ua.isFamilyFightMap()&&0<n.length&&(s=n[0]),null!=i.actions)for(var o=i.actions.length-1;0<=o;o--){var a=i.actions[o];this.excAction(t,a,s,n,e)}if(!(ua.isBattlefieldOfShuraMap()&&(7<=Se.roleInMapSliceNum||ds.isUnShowSkillEff)||ua.isCross()&&Xs.isUnShowSkillEff)&&null!=i.effects&&0==Bo.hideFightEffect&&ya.getFunOpen(2)){if(1==Se.justHideRole&&!e)return;if(e||s instanceof com.scene.unit.Monster||0==Se.hideAll)for(o=i.effects.length-1;0<=o;o--){var l=i.effects[o];"fly"==l.type?this.excArrowEffect(t,l,s,n,e):this.excEffect(t,l,s,n,e)}}}}},e.playAct=function(t,e,i,s,n,o){if("src"==i.target)null!=s&&(s instanceof com.scene.unit.Pet==0&&(10100003!=t.skill_id?s.curPt.x==Ot.posToTx(t.src_pos)&&s.curPt.z==Ot.posToTz(t.src_pos)||(s.x=Ot.posToX(t.src_pos),s.y=Ot.posToY(t.src_pos)):(s.afterImage(Ot.posToX(t.src_pos),Ot.posToY(t.src_pos)),ie.to(s,{x:Ot.posToX(t.src_pos),y:Ot.posToY(t.src_pos)},150)),s.onBloodDown(s.reallyHP)),s instanceof com.scene.unit.Pet&&n?s.attack(i.act,Ot.getDirByPt(s.pt,n.pt)):s.attack(i.act,Ot.posToDir(t.src_pos)));else{if(null==n)return;if(n.onBloodDown(n.reallyHP),0<n.reallyHP?n.play(i.act):n instanceof com.scene.unit.Monster&&(Dr.ins().delayDie(n,s,t.skill_id),n.pvo&&(ua.isCrossTowerBoss()||ua.isCrossTower()?this.dispatch("ANIMAL_DIE",n.pvo.monster_id):this.dispatch("ANIMAL_DIE",n.pvo.type_id))),1==o&&n instanceof com.scene.unit.Monster&&99999999==t.skill_id&&fe.shakeScene(),ua.isFamilyFightMap()||ua.isLoveCopyMap()||1==o||pe.isMyPal(n.id)&&"hurt"==i.act){var a=this.checkReduce(e.type),l=this.checkMiss(e.type),r=this.checkErupt(e.type),h=(this.checkPojia(e.type),this.checkSuck(e.type),this.checkShield(e.type)),u=3==s.category||4==s.category,c=this.checkDir(s,n);sh.show(e.value,a?1:2,n.x,n.y-.7*n.bodyHeight,o?s.unitType:2,r,l,h,u,c,t.skill_id)}1==n.isBoss&&null!=n.pvo&&T.dispatch("BOSS_FIGHT_DEST",n.pvo.type_id,n.reallyHP,n.pvo.monster_id,n.maxHp),1==s.isBoss&&null!=s.pvo&&T.dispatch("BOSS_FIGHT_SRC",s.pvo.type_id,n.pvo)}},e.excAction=function(t,e,i,s,n){if("src"==e.target)_t.setTimeout(this,this.playAct,[t,null,e,i,s[0],n],e.delay);else for(var o=0;o<s.length;o++){var a=s[o];null!=a&&(ua.isBattlefieldOfShuraMap()&&s instanceof com.scene.unit.Monster&&0==ds.getMonsterIsShowUnit(s.pvo.type_id)||"hurt"!=e.act&&"no"!=e.act||_t.setTimeout(this,this.playAct,[t,t.attacks[o],e,i,a,n],e.delay+100*t.extend))}},e.getSrc=function(t){return Se.getUnit(t.src_id)},e.getDest=function(t){for(var e,i,s=new Array(t.attacks.length),n=t.attacks.length-1;0<=n;n--)e=t.attacks[n],(i=Se.getUnit(e.actor_id))&&((s[n]=i).reallyHP=e.hp,e.hp<=0&&(i.status=3));return s},e.excEffect=function(t,e,i,s,n){var o,a,l=!1;if(e.hasDir&&i){var r=i.curDir;4<r&&(r=8-r,l=!0)}if(a=1==e.hasDir?"unit/effect/"+e.url+"_"+r:"unit/effect/"+e.url,"normal"==e.type)switch(o=this.getPosByType(e.pos),e.parent){case"scene":var h;if("src_bottom"==e.pos||"src_middle"==e.pos||"src_high"==e.pos)h=this.getPosTarget(e.pos,i,s[0]),ih.confineShow(a,h,o.x,o.y,"top"==e.layer?_e.top:_e.low,!0,e.delay+100*t.extend,l);else for(var u=0;u<s.length&&u<4;u++)h=this.getPosTarget(e.pos,i,s[u]),ih.confineShow(a,h,o.x,o.y,"top"==e.layer?_e.top:_e.low,!0,e.delay+100*t.extend+50*u,l);break;case"src":ih.confineShow(a,null,o.x,o.y,i,"top"==e.layer,e.delay+100*t.extend+50*u,l);break;case"dest":for(var c=0;c<s.length;c++)ih.confineShow(a,null,o.x,o.y,s[c],"top"==e.layer,e.delay+100*t.extend+50*u,l)}},e.excArrowEffect=function(t,e,i,s,n){if(i&&0<s.length)for(var o=(5<s.length?5:s.length)-1;0<=o;o--){var a=s[o];if(null!=a){var l=0;"dest_bottom"==e.pos?l=a.y:"dest_middle"==e.pos?l=50:"dest_high"==e.pos&&(l=60),eh.showFly("unit/effect/"+e.url,i.x,i.getRealY()-55,a,l,_e.top,!0,e.delay+100*t.extend,!0)}}else i&&t.attacks.length},e.showBattlefieldSkillBuff=function(t,e){var i=fa.getFightVO(t);if(null!=i){var s=Se.getUnit(e);if(null!=s)for(var n=i.effects.length-1;0<=n;n--){var o=i.effects[n];if(WS&&WS.main){var a=new Object;a.className="m_fight_attack_toc",a.extend=0,this.excEffect(a,o,WS.main,[s],!0)}}}},e.onChangeMap=function(t){this.aparter.dispose(),this.buffAparter.dispose()},e.toFight=function(t,e,i){var s=new Object;s.className="m_fight_attack_tos",s.src_id=t.id,s.src_pos=10100003==e?Ve.getRushPos(t.x,t.y,i.x,i.y,t.curDir):Ot.getPos(t.pt.x,t.pt.z,t.curDir),s.skill_id=e,s.target_id=i.id,this.sendSocketMessage(s),fa.updateCD(e)},e.toPetFight=function(t,e,i,s){var n=new Object;n.className="m_fight_attack_tos",n.src_id=t,n.src_pos=e,n.skill_id=i,n.target_id=s,this.sendSocketMessage(n),Eo.updatePetSkillCD(t,i)},e.getPosTarget=function(t,e,i){switch(t){case"src_bottom":case"src_middle":case"src_high":return e;case"dest_bottom":case"dest_middle":case"dest_high":return i}return null},e.getPosByType=function(t){var e=new Tt;switch(t){case"src_bottom":e.x=0,e.y=0;break;case"src_middle":e.x=0,e.y=-50;break;case"src_high":e.x=0,e.y=-60;break;case"dest_bottom":e.x=0,e.y=0;break;case"dest_middle":e.x=0,e.y=-50;break;case"dest_high":e.x=0,e.y=-60}return e},e.checkReduce=function(t){return 0<(1&t)},e.checkMiss=function(t){return 0<(t>>1&1)},e.checkErupt=function(t){return 0<(t>>2&1)},e.checkPojia=function(t){return 0<(t>>3&1)},e.checkSuck=function(t){return 0<(t>>4&1)},e.checkShield=function(t){return 0<(t>>5&1)},e.checkDir=function(t,e){return null==t||null==e?1:t.x<=e.x?1:-1},e.onBuffEffect=function(t){var e=Se.getUnit(t.actor_id);if(null!=e&&(e instanceof com.scene.unit.Monster&&t.dst_left_hp<=0&&(_t.clearTimeout(e.delayAttackKey),Dr.ins().delayDie(e,null)),1==pe.isMyPal(t.actor_id)&&(e.reallyHP=t.dst_left_hp,e.onBloodDown(e.reallyHP)),3!=e.status))for(var i=0;i<t.buff_effect.length;i++){var s=t.buff_effect[i],n=h.getBuffEffectType(s);if(1!=e.unitType||1!=n&&3!=n||e.play("hurt"),n<5){var o=pe.isMyPal(t.src_id),a=pe.isMyPal(t.actor_id);a&&!o&&1==n&&(n=5);var l=Se.getUnit(t.src_id),r=!1;l instanceof com.scene.unit.Pal&&(r=3==l.category||4==l.category),(o||a)&&sh.show(h.getBuffEffectVal(s),1==n?1:2,e.x,e.y-100,1,!1,!1,!1,r,1,0)}}},h.ins=function(){return h._ins=h._ins||new h},h.getBuffType=function(t){return t/1e8},h.getBuffEffectType=function(t){return t%1e8/1e6},h.getBuffEffectVal=function(t){return t%1e6},h._ins=null,_(h,["SKILLS_SERVER_ACT",function(){return this.SKILLS_SERVER_ACT=[50000001,50001017]}]),h}(),Lr=function(t){function e(){this._isOnEnter=!1,this._tarMap=0,this.isFirstEnterMap=!0,e.__super.call(this)}w(e,"modules.scene.cases.MapCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_map_change_map_toc",this,this.onMapChange),this.addSocketListener("m_map_transfer_toc",this,this.onMapTransfer),this.addSocketListener("m_map_enter_toc",this,this.onMapEnter),this.addSocketListener("m_map_slice_enter_toc",this,this.onMapSliceEnter),this.addSocketListener("m_map_actor_attr_toc",this,this.onActorAttr),this.addSocketListener("m_map_actor_buf_toc",this,this.onActorBuff),this.addSocketListener("m_map_change_pos_toc",this,this.onChangePos),this.addSocketListener("m_map_pal_skin_toc",this,this.onPalSkin)},i.onPalSkin=function(t){var e=Se.getUnit(t.pal_id);if(null!=e&&null!=e.pvo){var i=e.pvo;i.skin=t.skin,e.reset(i,!1),1==pe.isMyPal(t.pal_id)&&(pe.getPal(t.pal_id).ext.skin=t.skin,this.dispatch("FASHION_UPDATE"))}},i.onChangePos=function(t){var e=Se.getUnit(t.actor_id);e&&(e instanceof com.scene.unit.MyPal?e.resetPos(t.pos):(e.x=Ot.posToX(t.pos),e.y=Ot.posToY(t.pos),e instanceof com.scene.unit.Pal?e.pvo.pos=t.pos:e instanceof com.scene.unit.base.Animal&&(e.pvo.pos=t.pos)))},i.onActorBuff=function(t){Se.getUnit(t.actor_id)},i.onMapTransfer=function(t){0==t.err_code?console.log(t):ce.addTip(t.err_code,t.reason)},i.toMapChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),console.warn("m_map_change_map_tos:"+t);var s=new Object;s.className="m_map_change_map_tos",s.map_id=t,s.extra_id=e,s.line_id=i,this.sendSocketMessage(s)},i.onMapChange=function(t){console.warn("m_map_change_map_toc:",t),0==t.err_code?(_t.clearTimeoutFight(Or.ins()),ca.lastMap=ca.mapID,T.dispatch("RESET_SCENE",ca.mapID,t.map_id,t.line_id)):ce.addTip(t.err_code,t.reason)},i.toMapTransfer=function(t,e,i,s){void 0===e&&(e=0),void 0===i&&(i=1),void 0===s&&(s=!0);var n=new Object;n.className="m_map_transfer_tos",n.line_id=ca.curLine,n.map_id=t,n.change_type=i,n.pos=e,n.is_near=s,console.log("toMapTransfer",n),this.sendSocketMessage(n)},i.onMapEnter=function(t){if(mt.show("m_map_enter_toc:"+t.err_code),1==this.isFirstEnterMap&&(c.send(c.MAP_ENTER_TOC),(yt.isWX||yt.isQQ)&&Ut.getScreen(c.MAP_ENTER_TOC),GF.show()),0==t.err_code){ca.curLine=t.line_id,ca.resetMap();for(var e=0;e<t.self_pals.length;e++){var i=t.self_pals[e],s=WS.getIns(i.pal_id);null==s&&(s=WS.getOne()),s.reset(i,!0),_e.addUnit(s)}for(a=0;a<t.monsters.length;a++)Dr.ins().monsterEnter(t.monsters[a]);for(var n=[],o=NaN,a=0;a<t.pals.length;a++){var l=Vr.ins().palEnter(t.pals[a]);o=Math.floor(t.pals[a].pal_id/100),1==Se.checkUnitLimit()&&-1==n.indexOf(o)&&30300!=t.map_id?l.hideLimit=!0:(l.hideLimit=!1,n.push(o))}for(a=0;a<t.pets.length;a++){var r=Br.ins().petEnter(t.pets[a]);o=Math.floor(t.pets[a].pet_id/100),1==Se.checkUnitLimit()&&-1==n.indexOf(o)?r.hideLimit=!0:r.hideLimit=!1}for(a=0;a<t.collects.length;a++)Er.ins().collectEnter(t.collects[a]);_e.isGaming=!0,1==this.isFirstEnterMap&&(this.isFirstEnterMap=!1,this.dispatch("ENTER_GAME"),mt.show("MyRole:"+(WS.main.x+ca.mapData.offsetX)+","+(WS.main.y+ca.mapData.offsetY)),_t.setTimeout(mt,mt.hide,null,1e4),_t.setTimeout(this,this.toAllReady,null,2e3)),T.dispatch("ENTER_MAP")}else console.log(ce.getError(t.err_code))},i.toAllReady=function(){_e.allReady=!0},i.onActorAttr=function(t){var e,i;if(3==t.actor_type){var s=!1,n=Se.getUnit(t.actor_id);if(null==n||null==n.pvo)return;var o,a,l,r=n.pvo,h=r.state;for(var u in e=Et.getAttrByVO(r),t.key_bools)o=t.key_bools[u],this.resetValue(e,r,o.id,o.val);for(var c in t.key_vals)a=t.key_vals[c],"move_speed"==(i=this.resetValue(e,r,a.id,a.val))?n.onSpeedChange(a.val):"state"==i&&(3==h&&0==a.val&&(s=!0),this.dispatch("ROLE_STATE_CHANGE"));for(var d in t.key_strs)l=t.key_strs[d],this.resetValue(e,r,l.id,l.str);n.reset(r,s)}else if(2==t.actor_type){var p=Se.getUnit(t.actor_id);if(null==p||null==p.pvo)return;var m,f,_=p.pvo;for(var g in e=Et.getAttr("p_map_monster"),t.key_bools)m=t.key_bools[g],this.resetValue(e,_,m.id,m.val);for(var y in t.key_vals)f=t.key_vals[y],this.resetValue(e,_,f.id,f.val);for(var v in t.key_strs)t.key_strs[v],this.resetValue(e,_,m.id,m.val);p.reset(_,!1)}},i.resetValue=function(t,e,i,s){if(t&&0<t.length){var n=t[i-1];if(null!=n)return e[n[0]]=s,n[0]}return null},i.onMapSliceEnter=function(t){t.pals&&0<t.pals.length&&Se.setPalsInMapSlice(t.pals,!0),t.monsters&&0<t.monsters.length&&Se.setMonsterInMapSlice(t.monsters,!0),t.pets&&0<t.pets.length&&Se.setPetInMapSlice(t.pets,!0),t.collects&&0<t.collects.length&&Se.setCollectInMapSlice(t.collects,!0),t.del_pals&&0<t.del_pals.length&&Se.setPalsInMapSlice(t.del_pals,!1),t.del_monsters&&0<t.del_monsters.length&&Se.setMonsterInMapSlice(t.del_monsters,!1),t.del_pets&&0<t.del_pets.length&&Se.setPetInMapSlice(t.del_pets,!1),t.del_collects&&0<t.del_collects.length&&Se.setCollectInMapSlice(t.del_collects,!1),T.dispatch("COLLECT_IN_MAP_SLICE_CHANGE")},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e._ins=null,e}(),Dr=function(t){function s(){s.__super.call(this)}w(s,"modules.scene.cases.MonsterCase",l);var e=s.prototype;return e.onWalk=function(t){if(0!=_e.isGaming){var e=Se.getUnit(t.monster_id);null!=e&&e.runByPos(t.pos)}},e.onEnter=function(t){if(0!=_e.isGaming)for(var e=0;e<t.monsters.length;e++)this.monsterEnter(t.monsters[e])},e.monsterEnter=function(t){var e=s.prepareQuit.indexOf(t.monster_id);-1!=e&&s.prepareQuit.splice(e,1),s.clearQuitTimeOut(t.monster_id);var i=Se.getUnit(t.monster_id);null==i?((i=xe.getMonster()).reset(t,!0),_e.addUnit(i),Rs.COPY_STRANGE_FIRE_MONSTER_TYPE_ID_FIELD&&t.type_id>=Rs.COPY_STRANGE_FIRE_MONSTER_TYPE_ID_FIELD[0]&&t.type_id<=Rs.COPY_STRANGE_FIRE_MONSTER_TYPE_ID_FIELD[1]&&i.showSpcBottomEff()):i.reset(t,!0),this.dispatch("MONSTER_ENTER",i)},e.doQuit=function(t){-1==s.prepareQuit.indexOf(t)&&s.prepareQuit.push(t);var e=Se.monsterDict[t],i=0;e&&(ua.isBattlefieldOfShuraMap()&&0==ds.getMonsterIsShowUnit(e.pvo.type_id)?this.sendToRoleState(t):(i=_t.setTimeout(this,this.sendToRoleState,[t],1e3),s.quitTimeOut[e.id]=i),e.pvo&&ga.checkIsNeedShowStory(3,0,e.pvo.type_id)&&T.dispatch("STORY_SHOW",3,0,e.pvo.type_id))},e.onQuit=function(t){ca.mapID==t.map_id&&this.doQuit(t.monster_id)},e.sendToRoleState=function(t){var e=s.prepareQuit.indexOf(t);-1!=e&&(s.prepareQuit.splice(e,1),s.clearQuitTimeOut(t),_e.removeUnit(t))},e.onDead=function(t){s.deadID=t.monster_id;var e=Se.getUnit(t.monster_id);if(null!=e)return e.status=3,e.deadX=e.x,e.deadY=e.y,void(e.deadTime=S.now())},e.delayDie=function(t,e,i){void 0===i&&(i=0);var s=fe.getMonsterDiePoint(t,e);t.die(),fe.shakeMonsterDie(t,s),t.deadTime=S.now()},e.onMonsterSay=function(t){},e.onChangeMap=function(){s.lastMonsterBornPos=null},e.initListeners=function(){this.addSocketListener("m_monster_enter_toc",this,this.onEnter),this.addSocketListener("m_monster_walk_toc",this,this.onWalk),this.addSocketListener("m_monster_dead_toc",this,this.onDead),this.addSocketListener("m_monster_quit_toc",this,this.onQuit)},s.ins=function(){return null==s._ins&&(s._ins=new s),s._ins},s.clearQuitTimeOut=function(t){s.quitTimeOut[t]&&(_t.clearTimeout(s.quitTimeOut[t]),delete s.quitTimeOut[t])},s._ins=null,s.lastMonsterBornPos=null,s.prepareQuit=[],s.deadID=NaN,_(s,["quitTimeOut",function(){return this.quitTimeOut=new Object}]),s}(),Nr=function(t){function e(){this.follow_id=-1,this.timeoutId=0,e.__super.call(this)}w(e,"modules.scene.cases.MoveCase",l);var i=e.prototype;return i.toWalk=function(t,e,i){var s=new Object;s.className="m_move_walk_tos",s.actor_id=t,s.pos=Ot.getPos(e.x,e.z,i),this.sendSocketMessage(s)},i.toWalkPath=function(t,e){var i=new Object;i.className="m_move_walk_path_tos",i.actor_id=t,i.walk_path=Ot.walkPathPos(e),this.sendSocketMessage(i)},i.onWalkPath=function(t){if(null!=t.walk_path&&0!=t.walk_path.length){var e=Ot.walkPathPt(t.walk_path),i=Se.getUnit(t.actor_id);null!=i&&i.run(e)}},i.toWalkDir=function(t,e){if(WS&&WS.main){var i=new Object;i.className="m_move_walk_dir_tos",i.actor_id=WS.main.pvo.pal_id;var s=Ot.ptToPoint(t);i.px_pos=(e<<28)+(s.y<<15)+(Math.abs(s.x)<<1)+(0<=s.x?1:0),this.sendSocketMessage(i)}},i.onWalkDir=function(t){var e=Se.getUnit(t.actor_id);if(null!=e){var i=t.px_pos>>28&15,s=t.px_pos>>15&8191,n=t.px_pos>>1&8191,o=1&t.px_pos;e instanceof com.scene.unit.MyPal||e.runByPos(new Tt(0<o?n:-1*n,s),i)}},i.onSYNC=function(t){if(0!=ca.hasCell(Ot.posToTx(t.pos),Ot.posToTz(t.pos))){var e=Se.getUnit(t.actor_id);null!=e&&e instanceof com.scene.unit.MyPal&&(e instanceof com.scene.unit.MyPal?e.resetPos(t.pos):(e.x=Ot.posToX(t.pos),e.y=Ot.posToY(t.pos)))}},i.initListeners=function(){this.addSocketListener("m_move_walk_dir_toc",this,this.onWalkDir),this.addSocketListener("m_move_walk_path_toc",this,this.onWalkPath),this.addSocketListener("m_move_sync_toc",this,this.onSYNC)},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e.NAME="MOVE",e._ins=null,e}(),Vr=function(t){function s(){this.visibleRole=[],s.__super.call(this)}w(s,"modules.scene.cases.PalCase",l);var e=s.prototype;return e.initListeners=function(){this.addSocketListener("m_pal_main_id_toc",this,this.onMainPal),this.addSocketListener("m_pal_enter_toc",this,this.onPalEnter),this.addSocketListener("m_pal_dead_toc",this,this.onPalDead),this.addSocketListener("m_pal_quit_toc",this,this.onPalQuit),this.addSocketListener("m_pal_hmp_change_toc",this,this.onHMPChange)},e.onHMPChange=function(t){var e=pe.getPal(t.pal_id);0<=t.new_hp&&(e.fight.hp=t.new_hp,3==e.ext.status&&0<t.new_hp&&(e.ext.status=0),WS.getIns(t.pal_id)&&WS.getIns(t.pal_id).onBloodDown(t.new_hp))},e.onMainPal=function(t){pe.user.main_pal_id=t.pal_id},e.onPalDead=function(t){var e=Se.getUnit(t.pal_id);e&&e.die()},e.onPalQuit=function(t){if(ca.mapID==t.map_id){-1==s.prepareQuit.indexOf(t.pal_id)&&s.prepareQuit.push(t.pal_id);var e=0;Se.getUnit(t.pal_id)&&(e=_t.setTimeout(this,this.excQuit,[t.pal_id],1e3),s.quitTimeOut[t.pal_id]=e,T.dispatch("PAL_ROLE_QUIT",t.pal_id))}},e.excQuit=function(t){var e=s.prepareQuit.indexOf(t);-1!=e&&(s.prepareQuit.splice(e,1),s.clearQuitTimeOut(t),_e.removeUnit(t))},e.onPalEnter=function(t){this.visibleRole.length=0;var e=Se.roleDict,i=NaN;for(var s in e){var n=e[s];i=Math.floor(n.id/100),0==n.hideLimit&&-1==this.visibleRole.indexOf(i)&&this.visibleRole.push(i)}for(var o=0;o<t.pals.length;o++){var a=this.palEnter(t.pals[o]);0==Se.checkUnitLimit()||1==pe.isMyPal(t.pals[o].pal_id)?a.hideLimit=!1:(i=Math.floor(t.pals[o].pal_id/100),-1==this.visibleRole.indexOf(i)?a.hideLimit=!0:a.hideLimit=!1)}},e.palEnter=function(t){var e=s.prepareQuit.indexOf(t.pal_id);-1!=e&&s.prepareQuit.splice(e,1),s.clearQuitTimeOut(t.pal_id);var i=Se.getUnit(t.pal_id);return null==i?(0==pe.isMyPal(t.pal_id)?i=xe.getRole():null==(i=WS.getIns(t.pal_id))&&(i=WS.getOne()),i.reset(t,!0),_e.addUnit(i)):(i.reset(t,!0),null==i.parent&&_e.mid.addChild(i)),i},s.ins=function(){return s._ins=s._ins||new s},s.clearQuitTimeOut=function(t){s.quitTimeOut[t]&&(_t.clearTimeout(s.quitTimeOut[t]),delete s.quitTimeOut[t])},s._ins=null,s.prepareQuit=[],_(s,["quitTimeOut",function(){return this.quitTimeOut=new Object}]),s}(),Br=function(t){function e(){this.visibleRole=[],e.__super.call(this)}w(e,"modules.scene.cases.PetCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_pet_enter_toc",this,this.onPetEnter),this.addSocketListener("m_pet_quit_toc",this,this.onPetQuit),this.addSocketListener("m_pet_change_main_pal_toc",this,this.onChangeMainPal)},i.onChangeMainPal=function(t){var e=Se.getUnit(t.pet_id);null!=e&&e.changeMaster(t.main_pal_id)},i.onPetQuit=function(t){ca.mapID==t.map_id&&_e.removeUnit(t.pet_id)},i.onPetEnter=function(t){for(var e=0;e<t.pets.length;e++)this.petEnter(t.pets[e])},i.petEnter=function(t){this.visibleRole.length=0;var e=Se.roleDict,i=NaN;for(var s in e){var n=e[s];i=Math.floor(n.id/100),0==n.hideLimit&&-1==this.visibleRole.indexOf(i)&&this.visibleRole.push(i)}var o=Se.getUnit(t.pet_id);return null==o?((o=0==pe.isMyPal(t.pet_id)?xe.getPet():YS.ins).reset(t,!0),_e.addUnit(o)):(o.reset(t,!0),null==o.parent&&_e.mid.addChild(o)),0==Se.checkUnitLimit()||1==pe.isMyPal(t.pet_id)?o.hideLimit=!1:(i=Math.floor(t.pet_id/100),-1==this.visibleRole.indexOf(i)?o.hideLimit=!0:o.hideLimit=!1),o},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Mr=function(t){function e(){this.inited=!1,e.__super.call(this)}w(e,"modules.scene.SceneModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("RESET_SCENE",this,this.resetScene),this.addMessageListener("ROLE_LEVEL_UP",this,this.onLevelup),this.addMessageListener("AUTO_HIT",this,this.autoHit),this.addMessageListener("CAN_AUTO_HIT",this,this.canAutoHit),this.addMessageListener("CAN_NOT_AUTO_HIT",this,this.cannotAutoHit)},i.onLevelup=function(){for(var t=WS.all,e=0;e<t.length;e++){var i=t[e];null!=i&&null!=i.parent&&ih.confineShow("unit/effect/shengji_guang",null,0,0,i,!0,1e3)}},i.autoHit=function(){ua.isBattlefieldOfShuraMap()||ua.isCross()||(e.isAutoHit=!e.isAutoHit,WS.autoHit())},i.canAutoHit=function(){e.isAutoHit=!0,WS.autoHit()},i.cannotAutoHit=function(){e.isAutoHit=!1,WS&&WS.main&&(WS.main.lockedTarget=0,WS.autoHit())},i.resetScene=function(t,e,i){if(void 0===i&&(i=0),_e.clear(),_e.showMask(),t!=e){var s=Ce.getMapData(e);ca.setMapData(s),_e.reset(e)}this.toMapEnter(e,i)},i.toMapEnter=function(t,e){void 0===e&&(e=0),mt.show("m_map_enter_tos"),c.send(c.MAP_ENTER_TOS);var i=new Object;i.className="m_map_enter_tos",i.map_id=t,i.line_id=e,v.send(i)},i.checkSameMap=function(t,e){if(0==t)return!1;if(t==e)return!0;var i=Ce.getCityVO(t),s=Ce.getCityVO(e);return null!=i&&null!=s&&i.url==s.url},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e.isAutoHit=!0,e}(),Fr=function(t){function e(){e.__super.call(this)}w(e,"modules.shop.cultivation.CultivationCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack)},i.toExchangeRequest=function(t,e){Tr.ins().toExchange(9,t,e)},i.onExchangeBack=function(t){if(9==t.module_id){Jt.addTip("成功兑换，请前往背包使用");var e,i,s=!1;for(var n in oa.exchangeInfos)if((e=oa.exchangeInfos[n]).id==t.scheme){e.val+=t.num,s=!0;break}0==s&&((i=new Object).className="p_kv",i.id=t.scheme,i.val=t.num,oa.exchangeInfos=oa.exchangeInfos||[],oa.exchangeInfos.push(i)),this.dispatch("SHOP_UPDATE_PANEL"),this.dispatch("EXERCISE_PEARL_CONDICTION_UPDATE")}},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Ur=function(t){function e(){this.debugShopPanel=null,e.__super.call(this)}w(e,"modules.shop.debugShop.DebugShopCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("SHOP_DEBUG_OPEN_PANEL",this,this.openDebugShopPanel)},i.openDebugShopPanel=function(){this.debugShopPanel=this.debugShopPanel||new wF,this.debugShopPanel.openWindow(),this.debugShopPanel.updateList()},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Gr=function(t){function e(){this.shopPanel=null,this.getWayPanel=null,e.__super.call(this)}w(e,"modules.shop.ShopModule",l);var i=e.prototype;return i.initListeners=function(){Ur.getInstance(),Fr.getInstance(),this.addMessageListener("SHOP_OPEN_PANEL",this,this.openShopPanel),this.addMessageListener("SHOP_UPDATE_PANEL",this,this.updateShopPanel),this.addMessageListener("ROLE_EXCHANGE_INFO",this,this.updateShopPanel),this.addMessageListener("SHOP_CLOSE_ALL_PANEL",this,this.closeAllPanel),this.addMessageListener("MONEY_CHANGE",this,this.onMoneyChange),this.addMessageListener("ROLE_SCORE_CHANGE",this,this.updateScoreChange),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.updateByExchangeBack),this.addSocketListener("m_shop_buy_toc",this,this.onShopBuy),this.addSocketListener("m_mystery_shop_info_toc",this,this.onMysteryInfo),this.addSocketListener("m_role_exchange_discount_toc",this,this.onShopDiscountInfo)},i.updateByExchangeBack=function(t){if(1==t.module_id){var e=t.reward[0];e&&10201517==e.id&&ua.isCross()||Jt.addTip("购买成功"),this.updateShopPanel()}else if(2==t.module_id)Jt.addTip("购买成功"),0<da.curMysteryItemBuyID&&da.updateMysteryGoods(da.curMysteryItemBuyID),this.updateShopPanel();else if(18==t.module_id){Jt.addTip("兑换成功");var i,s,n=!1;for(var o in oa.exchangeInfos)if((i=oa.exchangeInfos[o]).id==t.scheme){i.val+=t.num,n=!0;break}0==n&&((s=new Object).className="p_kv",s.id=t.scheme,s.val=t.num,oa.exchangeInfos=oa.exchangeInfos||[],oa.exchangeInfos.push(s)),this.updateShopPanel()}},i.updateScoreChange=function(t){!t||6!=t.id&&2!=t.id||this.shopPanel&&this.shopPanel.updateScore()},i.onMoneyChange=function(){this.shopPanel&&this.shopPanel.updateMoney()},i.toShopDiscountInfo=function(t){var e=new Object;e.className="m_role_exchange_discount_tos",e.scheme=t,e.shop_id=3,this.sendSocketMessage(e)},i.onShopDiscountInfo=function(t){0==t.err_code?T.dispatch("SHOP_GOODS_DISCOUNT",t):ce.addTip(t.err_code)},i.toShopBuy=function(t,e,i,s){void 0===s&&(s=0);var n=new Object;n.className="m_shop_buy_tos",n.shop_id=t,n.goods_id=e,n.goods_num=i,n.op_type=s,this.sendSocketMessage(n)},i.onShopBuy=function(t){0==t.err_code?(Jt.addTip("购买成功"),this.updateShopPanel()):10000012==t.err_code?Lo.showAlert():ce.addTip(t.err_code)},i.toMysteryInfo=function(){var t=new Object;t.className="m_mystery_shop_info_tos",this.sendSocketMessage(t)},i.onMysteryInfo=function(t){0==t.err_code?(1==t.refresh_type&&Ia.updatePrivilegeUse(2),da.mysteryGoods=t.goods,da.reflashTime=t.refresh_time,this.updateShopPanel(),2==t.refresh_type&&(this.shopPanel&&this.shopPanel.isPopup()?T.dispatch("MYSTERY_UN_SHOP_TIP"):T.dispatch("MYSTERY_SHOP_TIP"))):ce.addTip(t.err_code)},i.toMysteryReflash=function(){var t=new Object;t.className="m_mystery_shop_refresh_tos",this.sendSocketMessage(t)},i.openShopPanel=function(t){void 0===t&&(t=0),0!=se.has("modules/shop")?(this.shopPanel=this.shopPanel||Aa.getIns(51e3,"ShopPanel"),this.shopPanel.openWindow(),this.shopPanel.showViewByIndex(t),this.shopPanel.update()):se.add("modules/shop","正在加载商城模块",this,this.openShopPanel,[t])},i.updateShopPanel=function(){this.shopPanel&&this.shopPanel.isPopup()&&this.shopPanel.update()},i.closeAllPanel=function(){this.shopPanel&&this.shopPanel.isPopup()&&this.shopPanel.closeWindow(),this.getWayPanel&&this.getWayPanel.isPopup()&&this.getWayPanel.closeWindow()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e.PAYER_REFRESH=1,e.SYSTEM_REFRESH=2,e}(),Hr=function(t){function e(){this.handBookPanel=null,this.learnPanel=null,this.replacePanel=null,this.composePanel=null,e.__super.call(this)}w(e,"modules.skill.book.SkillBookCase",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ROLE_LEVEL_UP",this,this.onLvUp),this.addSocketListener("m_role_book_info_toc",this,this.onInfo),this.addSocketListener("m_role_book_load_toc",this,this.onLoad),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onCompose)},i.onEnterGame=function(){80<=pe.myLevel&&_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},i.onLvUp=function(){Ne.isOpenSkillBook()&&_t.setTimeout(this,this.toInfo,null,1800)},i.toInfo=function(){for(var t=pe.pals,e=0;e<t.length;e++){var i=new Object;i.className="m_role_book_info_tos",i.pal_id=t[e].pal_id,this.sendSocketMessage(i)}},i.onInfo=function(t){0==t.err_code?(pa.setBookInfo(t),this.dispatch("UPDATE_SKILL_PANEL")):ce.addTip(t.err_code)},i.toLoad=function(t,e,i){var s=new Object;s.className="m_role_book_load_tos",s.pal_id=t,s.pos=e,s.type_id=i,this.sendSocketMessage(s)},i.onLoad=function(t){if(0==t.err_code){var e=pa.getBookVO(t.update.type_id);Jt.addTip("学习秘籍《"+e.name+"》成功"),pa.updateBookInfo(t.pal_id,t.update),this.closeReplacePanel(),this.dispatch("UPDATE_SKILL_PANEL")}else ce.addTip(t.err_code)},i.toCompose=function(t){for(var e=[],i=0;i<t.length;i++){var s=new Object;s.className="p_kv",s.id=2,s.val=t[i],e.push(s)}Tr.ins().toExchange(8,10001,1,e)},i.onCompose=function(t){8==t.module_id&&(pa.composeReward=t.reward,this.composePanel&&this.composePanel.isPopup()&&this.composePanel.updateByCompose(),Jt.addTip("合成成功！"))},i.openHandBookPanel=function(){this.handBookPanel=this.handBookPanel||Aa.getIns(52e3,"book.SkillHandBookPanel"),this.handBookPanel.openWindow()},i.openLearnPanel=function(){this.learnPanel=this.learnPanel||Aa.getIns(52e3,"book.SkillBookLearnPanel"),this.learnPanel.openWindow()},i.openReplacePanel=function(){this.replacePanel=this.replacePanel||Aa.getIns(52e3,"book.SkillBookReplacePanel"),this.replacePanel.openWindow()},i.closeReplacePanel=function(){this.replacePanel&&this.replacePanel.isPopup()&&this.replacePanel.closeWindow()},i.openComposePanel=function(){this.composePanel=this.composePanel||Aa.getIns(52e3,"book.SkillBookComposePanel"),this.composePanel.openWindow()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Wr=function(t){function e(){this.view=null,e.__super.call(this)}w(e,"modules.skill.SkillModule",l);var i=e.prototype;return i.initListeners=function(){Hr.ins(),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("OPEN_SKILL_PANEL",this,this.openPanel),this.addMessageListener("UPDATE_SKILL_PANEL",this,this.updatePanel),this.addMessageListener("ROLE_LEVEL_UP",this,this.onLevelUp),this.addMessageListener("MONEY_CHANGE",this,this.onMoneyChange),this.addMessageListener("UPDATE_PAL_DATA",this,this.onPalData),this.addMessageListener("BAGDATA_CHANGE",this,this.onBagDataChange),this.addMessageListener("ROLE_POWER_CHANGE",this,this.onPowerChange),this.addMessageListener("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),this.addSocketListener("m_pal_skill_update_toc",this,this.onUpdate),this.addSocketListener("m_pal_skill_stepup_toc",this,this.onStepup)},i.onExchangeBack=function(t){10==t.module_id&&this.updatePanel()},i.onEnterMap=function(){1==ua.isPKMap()&&fa.resetCD()},i.onEnterGame=function(){_t.setTimeout(this,this.checkLevelRedPoint,null,St.ENTER_DELAY),_t.setTimeout(this,this.checkStepRedPoint,null,St.ENTER_DELAY),_t.setTimeout(this,this.checkBookRedPoint,null,St.ENTER_DELAY)},i.onBagDataChange=function(){this.checkStepRedPoint(),this.checkBookRedPoint()},i.onPalData=function(){this.checkLevelRedPoint()},i.onMoneyChange=function(){this.checkLevelRedPoint()},i.onLevelUp=function(){this.checkLevelRedPoint()},i.checkLevelRedPoint=function(){1==fa.checkSkillLevelRPAll()?Nt.show("RP_SKILL_LEVEL"):Nt.hide("RP_SKILL_LEVEL")},i.checkStepRedPoint=function(){1==fa.checkSkillStepRPAll()?Nt.show("RP_SKILL_STEP"):Nt.hide("RP_SKILL_STEP")},i.checkBookRedPoint=function(){1==pa.checkSkillBookRPAll()?Nt.show("RP_SKILL_BOOK"):Nt.hide("RP_SKILL_BOOK")},i.onStepup=function(t){0==t.err_code?(Jt.addTip("突破成功"),fa.updateStep(t),null!=this.view&&this.view.update()):ce.addTip(t.err_code)},i.onUpdate=function(t){0==t.err_code?(30300==ca.lastMap||ua.isBattlefieldOfShuraMap()||ua.isCross()||Jt.addTip("升级成功"),fa.updateSkill(t),null!=this.view&&this.view.update(),this.checkLevelRedPoint(),this.dispatch("SKILLS_UPDATE")):ce.addTip(t.err_code)},i.openPanel=function(t){if(void 0===t&&(t=0),1==t&&pe.myLevel<80)Jt.addTip("80级开启秘籍功能");else{if(0==se.has("modules/skill"))return c.send(29020),void se.add("modules/skill","正在加载技能模块",this,this.openPanel,[t]);c.send(29021),null==this.view&&(this.view=new xF),this.view.checkOpen(t)}},i.updatePanel=function(){this.view&&this.view.isPopup()&&this.view.update()},i.onPowerChange=function(){this.updatePanel()},e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e._ins=null,e}(),qr=function(t){function e(){this.storyView=null,this._panelKey=0,e.__super.call(this)}w(e,"modules.story.StoryModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addMessageListener("COPY_EXIT",this,this.onCopyExit),this.addMessageListener("STORY_SHOW",this,this.showStoryView)},i.showStoryView=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),e=0<e?e:ca.mapID;var s=[];switch(t){case 1:s=ga.getStroyVOs(t,e,i);break;case 2:case 3:s=ga.getStroyVOs(t,e,i)}0<s.length&&(ga.curStoryType=t,_t.clearTimeout(this._panelKey),null==this.storyView&&(this.storyView=Aa.getIns(54e3,"StoryView"),this.storyView.on("undisplay",this,this.onPanelUndisplay)),null==this.storyView.parent&&this.storyView.openWindow(),this.storyView.update(s))},i.onPanelUndisplay=function(){this._panelKey=_t.setTimeout(this,this.clearStorySource,null,ya.coldTime)},i.clearStorySource=function(){this.storyView&&(this.storyView.destroy(),this.storyView=null),se.destroy("modules/story")},i.onEnterMap=function(){ga.checkIsNeedShowStory(1)&&this.showStoryView(1)},i.onCopyExit=function(){this.closeStoryView()},i.closeStoryView=function(){this.storyView&&this.storyView.closeWindow()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Yr=function(t){function e(){this.hbTime=NaN,this._offlinePanel=null,this.delayTxt=null,this.error=null,this.showed=!1,this.tendingView=null,this.notReconnet=[10001,10002,10006,10010],this.pingBack=!0,this.now=NaN,this.showTipTime=0,this.delay=25,this.tomorrowTime=0,e.__super.call(this),v.reset(Q.create(this,this.onSocketConnected),Q.create(this,this.onSocketClose),Q.create(this,this.onSocketError))}w(e,"modules.system.SystemModule",l);var i=e.prototype;return i.initListeners=function(){v.removeSocketListeners("m_auth_key_toc"),v.removeSocketListeners("m_role_create_toc"),v.removeSocketListeners("m_role_detail_toc"),v.removeSocketListeners("m_system_error_toc"),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("ENTER_MAP",this,this.onEnterMap),this.addSocketListener("m_auth_key_toc",this,this.onAuthKey),this.addSocketListener("m_bgp_toc",this,this.onBGP),this.addSocketListener("m_role_detail_toc",this,this.onRoleDetail),this.addSocketListener("m_system_error_toc",this,this.onSystemError),this.addSocketListener("m_system_hb_toc",this,this.onHeartBeat),this.addSocketListener("m_role_sys_conf_info_toc",this,this.onInfo),this.addSocketListener("m_role_sys_conf_update_toc",this,this.onUpdate),this.addSocketListener("m_role_pf_reward_ban_toc",this,this.onRolePFRewardBan)},i.onRolePFRewardBan=function(t){ya.pfBanList=t.ids},i.onInfo=function(t){var e=null==ya.sysInfo;if(ya.sysInfo=t.opt,Ht.musicMuted=!ya.getFunOpen(0),Ht.soundMuted=!ya.getFunOpen(1),1==e&&1==ya.getFunOpen(0)&&ca.city){var i=ca.city.music;null!=i&&""!=i&&Ht.playMusic(i)}this.dispatch("ON_SYS_CONFIG")},i.toRoleSysCon=function(t,e){var i=new Object;i.className="m_role_sys_conf_update_tos";var s=new Object;s.className="p_kv",s.id=t,s.val=e,i.opt=[s],this.sendSocketMessage(i)},i.onUpdate=function(t){if(0==t.err_code){if(ya.sysInfo=t.opt,Ht.soundMuted=!ya.getFunOpen(1),Ht.musicMuted==ya.getFunOpen(0)){Ht.musicMuted=!ya.getFunOpen(0);var e=ca.city.music;null!=e&&""!=e&&Ht.playMusic(e)}this.dispatch("ON_SYS_UPDATE"),Jt.addTip("保存成功")}else ce.addTip(t.err_code)},i.onEnterMap=function(){if(1==ya.getFunOpen(0)){var t=ca.city.music;null!=t&&""!=t&&Ht.playMusic(t)}},i.onAuthKey=function(t){if(0==t.err_code){var e=new Object;e.className="m_role_detail_tos",v.send(e)}else s.show(t.reason)},i.onRoleDetail=function(t){pe.user=t.role_details,pe.fullVersion=t.full_version,ya.serverTime=t.server_time,T.dispatch("RESET_SCENE",ca.mapID,pe.user.pos.map_id)},i.onEnterGame=function(){1==G.isDev&&null==this.delayTxt&&(this.delayTxt=new jt,this.delayTxt.color="#ffffff",this.delayTxt.fontSize=24,this.delayTxt.x=lt.stageWidth-200,this.delayTxt.y=180,this.delayTxt.text="延迟：5000",h.stage.addChild(this.delayTxt)),h.timer.clear(e,e.preHeartbeat),_t.addToSecond(this,this.toHeartbeat),yt.isWX||_t.setTimeout(Bt,Bt.initQRCode,null,5e3),_t.setTimeout(e,this.toInfo,null,6e3)},i.toInfo=function(){var t=new Object;t.className="m_role_sys_conf_info_tos",v.send(t)},i.onSystemError=function(t){null==this.tendingView&&(this.tendingView=Aa.getIns(55e3,"TendingView"),this.tendingView.btn.on("click",this,this.onClickYes)),10002==t.error_no||10007==t.error_no||10024==t.error_no||10025==t.error_no||10026==t.error_no?(this.tendingView.tipImg.visible=!1,this.tendingView.offLineTxt.visible=!0):(this.tendingView.tipImg.visible=!0,Bt.isFanTi?this.tendingView.tipImg.x=99:this.tendingView.tipImg.x=31,this.tendingView.offLineTxt.visible=!1),this.tendingView.txtInfo.text=t.error_info,this.tendingView.popup(),this.error=t},i.onClickYes=function(){if(yt.isWX)S.window.location.reload(),S.window&&S.window.wx&&null!=S.window.wx.exitMiniProgram&&S.window.wx.exitMiniProgram();else{if(10002==this.error.error_no&&"qqwdzsand"==G.pf)return void Lt.showLoginPage();if("4399"==G.pf){try{new Game4399({isTest:!1,frameDeep:0}).loginOut()}catch(t){S.window.location.reload()}return}"eyouios"==G.pf?S.window.setupWebViewJavascriptBridge?(T.dispatch("DEBUG_INFO","调用：window.setupWebViewJavascriptBridge.logout","all"),S.window.setupWebViewJavascriptBridge(function(t){T.dispatch("DEBUG_INFO","调用：bridge.callHandler-logout","all"),t.callHandler("logout")})):T.dispatch("DEBUG_INFO","找不到接口：window.setupWebViewJavascriptBridge","all"):"letangxxcy"==G.pf||"letangyjxz"==G.pf?S.window.setupWebViewJavascriptBridge?(T.dispatch("DEBUG_INFO","调用：window.setupWebViewJavascriptBridge.sdkLogout","all"),S.window.setupWebViewJavascriptBridge(function(t){T.dispatch("DEBUG_INFO","调用：bridge.callHandler-sdkLogout","all"),t.callHandler("sdkLogout")})):T.dispatch("DEBUG_INFO","找不到接口：window.setupWebViewJavascriptBridge","all"):"mcfxweb"==G.pf&&GameMc.loginOut(),S.window.location.reload()}},i.toAuthKey=function(){var t=new Object;if(t.className="m_auth_key_tos",t.account_name=G.openId,t.server_id=G.serverId,yt.isWX||(t.extra_params=G.extraParams),t.pf=G.pf,t.fcm=G.fcm,t.agent_id=G.agentId,t.key=G.key,t.time=G.time,yt.isWX){var e=new Object;e.accountName=G.openId,e.openKey=G.openKey,e.phoneSystem=Bt.os,e.isReview=G.isReview,Bt.sdk.wxLaunchData&&Bt.sdk.wxLaunchData.shareRoleId&&0<Bt.sdk.wxLaunchData.shareRoleId&&(e.shareRoleId=Bt.sdk.wxLaunchData.shareRoleId),e.openData=new Object,e.openData.pf=G.pf,null!=Bt.viaVal&&(e.openData.via=Bt.viaVal),t.extra_params=nt.getJsonString(e)}v.send(t)},i.onSocketConnected=function(){this.offlinePanel&&(this.offlinePanel.close(),this.showed=!1),this.error=null,this.pingBack,G.succServer==G.server?this.toAuthKey():this.toBGP()},i.toBGP=function(){var t=new Object;t.className="m_bgp_tos",t.host=G.realServer[0],t.port=parseInt(G.realServer[1]),v.send(t),c.send(c.TO_BGP)},i.onBGP=function(t){c.send(c.ON_BGP),0==t.err_code?(this.toAuthKey(),console.log("bgp连接成功")):console.log("bgp连接错误:"+t.reason)},i.onSocketClose=function(t){null!=this.error&&-1!=this.notReconnet.indexOf(this.error.error_no)||0==this.showed&&null==this.error&&(this.offlinePanel.popup(!0),v.connect(G.succServer),this.showed=!0)},i.onSocketError=function(){yt.isWX&&0==this.showed&&null==this.error&&(this.offlinePanel.popup(!0),v.connect(G.succServer),this.showed=!0)},i.toHeartbeat=function(){if(this.now=S.now(),1==this.pingBack){var t=new Object;return t.className="m_system_hb_tos",t.time=this.now,t.server_time=ya.serverTimeMs,this.sendSocketMessage(t),this.pingBack=!1,void(this.hbTime=this.now)}this.delay=this.now-this.hbTime,5e3<this.delay&&(this.delay=5e3)<=this.now-this.showTipTime&&(this.showTipTime=this.now,Jt.addTip("网络不稳定"),this.pingBack=!0),null!=this.delayTxt&&null!=this.delayTxt.parent&&(this.delayTxt.text="延迟："+this.delay+"\n帧率："+_t.FPS)},i.onHeartBeat=function(t){this.pingBack=!0,ya.serverTimeMs=t.server_time;var e=Math.floor(t.server_time/1e3);if(ya.serverTime=e,this.now=S.now(),this.delay=this.now-t.time,this.hbTime=this.now,5e3<this.delay&&(this.delay=5e3),null!=this.delayTxt&&null!=this.delayTxt.parent&&(this.delayTxt.text="延迟："+this.delay+"\n帧率："+_t.FPS),e>=this.tomorrowTime){var i=new Date(t.server_time);(0<this.tomorrowTime||0==i.getHours()&&0==i.getMinutes()&&0==i.getMilliseconds()&&0==i.getSeconds())&&this.dispatch("CROSS_DAY"),i.setHours(24),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),this.tomorrowTime=i.getTime()/1e3}},I(0,i,"offlinePanel",function(){return null==this._offlinePanel&&(this._offlinePanel=Aa.getIns(55e3,"OfflinePanel")),this._offlinePanel}),e.ins=function(){return null==e._ins&&(e._ins=new e),e._ins},e.preHeartbeat=function(){var t=new Object;t.className="m_system_hb_tos",t.time=S.now(),t.server_time=0,v.send(t)},e.startHeartbeat=function(){h.timer.loop(1e3,e,e.preHeartbeat)},e._ins=null,e}(),Xr=function(t){function e(){this.getView=null,this.titlePanel=null,this.attrPanel=null,e.__super.call(this)}w(e,"modules.title.TitleModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_TITLE_PANEL",this,this.openTitlePanel),this.addMessageListener("UPDATE_TITLE_PANEL",this,this.updateTitlePanel),this.addSocketListener("m_role_title_info_toc",this,this.onInfo),this.addSocketListener("m_role_title_change_toc",this,this.onChange),this.addSocketListener("m_role_title_update_toc",this,this.onTitleUpdate)},i.toInfo=function(){var t=new Object;t.className="m_role_title_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(va.setData(t.title_list),this.updateTitlePanel(),T.dispatch("TITLE_UPDATE")):ce.addTip(t.err_code)},i.toChange=function(t){var e=new Object;e.className="m_role_title_change_tos",va.curPartner==pe.curTitleParnerID?e.new_type_id=t==pe.curTitleID?0:t:e.new_type_id=t,1==isNaN(va.curPartner)&&(va.curPartner=pe.mainPalID),e.pal_id=va.curPartner,this.sendSocketMessage(e)},i.onChange=function(t){0==t.err_code?(pe.updateParnerTitle(t.pal_id,t.new_type_id),this.updateTitlePanel()):ce.addTip(t.err_code)},i.onTitleUpdate=function(t){if(1==t.type){var e;for(var i in va.newTitles=va.newTitles||[],t.title_ids)e=t.title_ids[i],va.newTitles.push(e);if(Nt.show("RP_TITLE"),null!=t.title_ids&&0<t.title_ids.length){var s=va.getTitleVO(t.title_ids[0]);s&&1==s.popUp&&(this.getView=this.getView||Aa.getIns(57e3,"TitleGetView"),this.getView.data=t.title_ids[0],this.getView.popup())}}else if(2==t.type){for(i in t.title_ids){var n;for(var o in e=t.title_ids[i],pe.user.attr.title_type_id==e&&(pe.user.attr.title_type_id=0),pe.user.pals)(n=pe.user.pals[o]).ext.title==e&&(n.ext.title=0);(s=va.getTitleVO(e))&&Jt.addTip("称号【"+s.name+"】失效")}}},i.openTitlePanel=function(){this.toInfo(),this.titlePanel=this.titlePanel||Aa.getIns(57e3,"TitlePanel"),this.titlePanel.openWindow()},i.updateTitlePanel=function(){this.titlePanel&&this.titlePanel.isPopup()&&this.titlePanel.update()},i.openAttrPanel=function(){this.attrPanel=this.attrPanel||Aa.getIns(57e3,"TitleAllAttrPanel"),this.attrPanel.openWindow()},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Kr=function(t){function e(){this.vipPanel=null,this.guidePanel=null,e.__super.call(this)}w(e,"modules.vip.VipModule",l);var i=e.prototype;return i.initListeners=function(){this.addMessageListener("OPEN_VIP_PANEL",this,this.openVipPanel),this.addMessageListener("ENTER_GAME",this,this.enterGame),this.addMessageListener("OPEN_VIP_GUIDE_PANEL",this,this.openVipGuidePanel),this.addMessageListener("CROSS_DAY",this,this.checkVipGuide),this.addSocketListener("m_role_vip_info_toc",this,this.onInfo),this.addSocketListener("m_role_vip_get_reward_toc",this,this.onGetReward)},i.hideVIPGuideAndShowCharge=function(){},i.enterGame=function(){_t.setTimeout(this,this.toInfo,[],St.ENTER_DELAY)},i.toInfo=function(){var t=new Object;t.className="m_role_vip_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){0==t.err_code?(Ia.curLv!=t.vip_lv&&(Ia.curLv=t.vip_lv,yt.curVipLv=Ia.curLv,this.dispatch("VIP_LEVEL_CHANGE"),Bt.reportVipUp()),yt.myVipLevel=t.vip_lv,Ia.curMoney=t.vip_exp,Ia.reward=t.get_reward,Ia.privilegeUse=t.privilege_use,this.updateVipPanel(),this.checkVipGuide(),this.checkVipGift(),this.dispatch("VIP_INFO_UPDATE"),nr.ins().vipOk=!0,nr.ins().updateFunPreview()):ce.addTip(t.err_code)},i.toGetReward=function(t){var e=new Object;e.className="m_role_vip_get_reward_tos",e.reward_id=t,this.sendSocketMessage(e)},i.onGetReward=function(t){0==t.err_code?(Ia.addGetReward(t.reward_id),this.updateVipPanel(),this.checkVipGuide(),this.checkVipGift(),Jt.addTip("领取成功")):ce.addTip(t.err_code)},i.openVipPanel=function(t){void 0===t&&(t=1),se.has("modules/vip")?(this.vipPanel=this.vipPanel||Aa.getIns(58e3,"VipPanel"),this.vipPanel.openWindow(null,!0),1==t?this.updateVipPanel():this.vipPanel.curChoseLv=t):se.add("modules/vip","正在加载VIP模块",this,this.openVipPanel,[t])},i.updateVipPanel=function(){this.vipPanel&&this.vipPanel.isPopup()&&(0!=Ia.canRewardLv?this.vipPanel.curChoseLv=Ia.canRewardLv:this.vipPanel.curChoseLv=Ia.curLv+1)},i.openVipGuidePanel=function(){se.has("modules/vip")?(this.guidePanel=this.guidePanel||Aa.getIns(58e3,"Vip3Panel"),this.guidePanel.openWindow()):se.add("modules/vip","正在加载VIP模块",this,this.openVipGuidePanel)},i.checkVipGuide=function(){ya.serverTime-pe.user.attr.create_time<86400?3<=Ia.curLv?Zl.ins().removeVIcon(4101):Zl.ins().addIcon(4101):(Zl.ins().removeVIcon(4101),La.ins.isOpenInvest()?(Zl.ins().removeVIcon(4004),Zl.ins().addIcon(4012),La.ins.toRoleInvestClickToday(0)):(Zl.ins().removeVIcon(4004),Zl.ins().removeVIcon(4012)))},i.checkVipGift=function(){0<Ia.canRewardLv?(Nt.show("RP_VIP_CAN_GET"),3<=Ia.curLv&&-1==Ia.reward.indexOf(3)?(Nt.show("RP_VIP3_CAN_GET"),T.dispatch("ICON_REDPOINT_CHANGE",[4101,"RP_VIP3_CAN_GET",!0])):(Nt.hide("RP_VIP3_CAN_GET"),T.dispatch("ICON_REDPOINT_CHANGE",[4101,"RP_VIP3_CAN_GET",!1]))):(Nt.hide("RP_VIP_CAN_GET"),Nt.hide("RP_VIP3_CAN_GET"),T.dispatch("ICON_REDPOINT_CHANGE",[4101,"RP_VIP3_CAN_GET",!1]))},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),jr=function(t){function e(){this.confirmPanel=null,e.__super.call(this)}w(e,"modules.welfare.fortuneCat.FortuneCatCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_fortune_cat_buy_toc",this,this.onFortuneCatBuy),this.addSocketListener("m_role_fortune_cat_info_toc",this,this.onFortuneCatInfo),this.addSocketListener("m_role_fortune_cat_reward_toc",this,this.onFortuneCatReward),this.addMessageListener("MONEY_CHANGE",this,this.onMoneyChange),this.addMessageListener("ENTER_GAME",this,this.toFortuneCatInfo)},i.onMoneyChange=function(){this.dispatch("WELFARE_UPDATE_PANEL",4001)},i.toFortuneCatBuy=function(){Sa.isMultiple=1;var t=new Object;t.className="m_role_fortune_cat_buy_tos",this.sendSocketMessage(t)},i.onFortuneCatBuy=function(t){0==t.err_code?(Sa.infoVO.times=t.times,Sa.infoVO.star=t.star,Sa.infoVO.reward_info=t.reward_info,Sa.isMultiple=t.mul,Jt.addTip("铜钱 + "+t.get_silver),this.dispatch("WELFARE_UPDATE_PANEL"),Sa.checkRedPoint()):ce.addTip(t.err_code)},i.toFortuneCatInfo=function(){_t.setTimeout(this,this.toDelay,null,St.ENTER_DELAY)},i.toDelay=function(){var t=new Object;t.className="m_role_fortune_cat_info_tos",this.sendSocketMessage(t)},i.onFortuneCatInfo=function(t){0==t.err_code?(Sa.infoVO=t,Sa.checkRedPoint(),this.dispatch("WELFARE_UPDATE_PANEL")):ce.addTip(t.err_code)},i.toFortuneCatReward=function(t){var e=new Object;e.className="m_role_fortune_cat_reward_tos",e.id=t,this.sendSocketMessage(e)},i.onFortuneCatReward=function(t){if(0==t.err_code){var e;if(Sa.infoVO)for(var i in Sa.infoVO.reward_info)(e=Sa.infoVO.reward_info[i]).id==t.id&&(e.val=2);Sa.checkRedPoint(),this.dispatch("WELFARE_UPDATE_PANEL"),this.confirmPanel&&this.confirmPanel.isPopup()&&this.confirmPanel.closeWindow()}else ce.addTip(t.err_code)},i.openConfirmPanel=function(t,e){this.confirmPanel=this.confirmPanel||Aa.getIns(6e4,"fortuneCat.WelfareFortuneCatConfirmPanel"),this.confirmPanel.openWindow(),this.confirmPanel.update(t,e)},e.getInstance=function(){return e.instance=e.instance||new e},e.instance=null,e}(),Qr=function(t){function o(){this.GiftView=null,o.__super.call(this)}w(o,"modules.welfare.gift.WelareGiftCase",l);var e=o.prototype;return e.initListeners=function(){this.addSocketListener("m_role_continue_pay_info_toc",this,this.onInfo),this.addSocketListener("m_role_continue_pay_reward_toc",this,this.onPay),this.addMessageListener("PACK_DATA_INITED",this,this.onPackInit),this.addMessageListener("WELFARE_GIFT_OPEN_PANEL",this,this.openGiftView)},e.onPackInit=function(){_t.setTimeout(this,this.toInfo,null,St.ENTER_DELAY)},e.toInfo=function(){var t=new Object;t.className="m_role_continue_pay_info_tos",this.sendSocketMessage(t)},e.onInfo=function(t){0<t.err_code?ce.addTip(t.err_code):(xa.handlerInfo(t),o.checkRedPoint(),this.GiftView&&this.GiftView.parent&&this.GiftView.update(),this.checkGiftState())},e.toPay=function(t){var e=new Object;e.className="m_role_continue_pay_reward_tos",e.reward_id=t,this.sendSocketMessage(e)},e.onPay=function(t){0<t.err_code?ce.addTip(t.err_code):(xa.handlerPay(t),o.checkRedPoint(),this.GiftView&&this.GiftView.parent&&this.GiftView.update(),this.checkGiftState())},e.openGiftView=function(){se.has("modules/act")?(this.GiftView=this.GiftView||Aa.getIns(6e4,"gift.WelfareGiftView"),this.GiftView.openWindow(),this.GiftView&&this.GiftView.parent&&this.GiftView.update()):se.add("modules/act","正在加载活动图标",this,this.openGiftView)},e.checkGiftState=function(){var t=xa.getInfo();if(t&&t.rewards){var e=ao.getIconVO(4004);e&&(72==t.rewards.length?(e.alwayShow=0,Zl.ins().deleteIcon(4004)):1!=e.alwayShow&&(e.alwayShow=1,Zl.ins().addIcon(4004)))}},o.ins=function(){return o._ins=o._ins||new o},o.checkRedPoint=function(){o.checkGetGift()?T.dispatch("ICON_REDPOINT_CHANGE",[4004,"RP_ICON_WELGIFT",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[4004,"RP_ICON_WELGIFT",!1])},o.checkGetGift=function(){var t=xa.getInfo(),e=!1,i=!1,s=!1,n=!1;return!!(t&&(e=o.checkRedPointTabById(1,t),i=o.checkRedPointTabById(2,t),s=o.checkRedPointTabById(3,t),n=o.checkRedPointTabById(4,t),e?Nt.show("RP_WELFARE_GIFT_BTN1"):Nt.hide("RP_WELFARE_GIFT_BTN1"),i?Nt.show("RP_WELFARE_GIFT_BTN2"):Nt.hide("RP_WELFARE_GIFT_BTN2"),s?Nt.show("RP_WELFARE_GIFT_BTN3"):Nt.hide("RP_WELFARE_GIFT_BTN3"),n?Nt.show("RP_WELFARE_GIFT_BTN4"):Nt.hide("RP_WELFARE_GIFT_BTN4"),e||i||s||n))},o.checkRedPointTabById=function(t,e){var i,s=xa.getWelfareGiftArrByTabId(t),n=xa.getPayDayInfo(t);for(var o in s)if((i=s[o]).day<=n&&e.rewards.indexOf(i.id)<0)return!0;return 1==t&&14==n&&e.rewards.indexOf(114)<0||(2==t&&14==n&&e.rewards.indexOf(214)<0||(3==t&&14==n&&e.rewards.indexOf(314)<0||4==t&&30==n&&e.rewards.indexOf(30)<0))},o._ins=null,o}(),zr=function(t){function e(){e.__super.call(this)}w(e,"modules.welfare.montyCard.WelfareMonthCardCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_month_card_info_toc",this,this.onInfo),this.addMessageListener("ROLE_LEVEL_UP",this,this.updateShow)},i.onInfo=function(t){0==t.err_code?(Ca.endTime=t.end_time,this.updateShow(),this.dispatch("ACT_HUXIANCOIN_MONTHCARD"),this.dispatch("WELFARE_UPDATE_PANEL"),this.dispatch("WELFARE_MONTH_CARD_INFO"),this.dispatch("TO_GET_PAY_INFO"),this.dispatch("CUSTOM_BARRIER_UPDATE")):ce.addTip(t.err_code)},i.updateShow=function(){Ca.isHasCard()?Zl.ins().removeVIcon(4002):10<=pe.myLevel&&Zl.ins().addIcon(4002)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),$r=function(t){function e(){e.__super.call(this)}w(e,"modules.welfare.notice.WelfareNoticeCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_update_notice_info_toc",this,this.onInfo),this.addSocketListener("m_update_notice_feedback_toc",this,this.onFeedback)},i.toInfo=function(){var t=new Object;t.className="m_update_notice_info_tos",this.sendSocketMessage(t)},i.onInfo=function(t){Pa.curTitle=t.title,Pa.curNotice=t.notice,Pa.feedBackTimes=t.feedback_times,this.dispatch("WELFARE_UPDATE_PANEL")},i.toFeedback=function(t,e){var i=new Object;i.className="m_update_notice_feedback_tos",i.star=t,i.content=e,this.sendSocketMessage(i)},i.onFeedback=function(t){0==t.err_code?(Jt.addTip("感谢您的反馈意见。"),Pa.feedBackTimes=t.feedback_times,this.dispatch("WELFARE_UPDATE_PANEL")):ce.addTip(t.err_code)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),Zr=function(t){function e(){this.count=0,e.__super.call(this),_t.addToSecond(this,this.loop)}w(e,"modules.welfare.weekCard.WelfareWeekCardCase",l);var i=e.prototype;return i.initListeners=function(){this.addSocketListener("m_role_week_card_info_toc",this,this.onInfo),this.addMessageListener("ENTER_GAME",this,this.onEnterGame)},i.onEnterGame=function(){"shouQxcxIos"==G.pf&&yt.isQQ&&(e.enterGameReqFlag=!0,Nl.ins().toPaySwitch(1198))},i.loop=function(){this.count++,7<=this.count&&(this.updateShow(),_t.removeFromSceond(this,this.loop))},i.updateShow=function(){Ta.isCanSwitch&&(Ta.isHasCard()?Zl.ins().deleteIcon(4029):Zl.ins().addIcon(4029))},i.onInfo=function(t){0==t.err_code?(Ta.endTime=t.end_time,this.updateShow(),this.dispatch("WELFARE_UPDATE_PANEL",4029),this.dispatch("CUSTOM_BARRIER_UPDATE")):ce.addTip(t.err_code)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e.enterGameReqFlag=!1,e}(),Jr=function(t){function e(){this.panel=null,this.welfareCleanKey=NaN,this.noticeUpView=null,this.levelOfTimeLimitView=null,e.__super.call(this)}w(e,"modules.welfare.WelfareModule",l);var i=e.prototype;return i.initListeners=function(){jr.getInstance(),zr.ins(),$r.ins(),Zr.ins(),this.addSocketListener("m_role_activation_code_toc",this,this.onCDKey),this.addSocketListener("m_bind_phone_get_code_toc",this,this.onGetCode),this.addSocketListener("m_bind_phone_verify_code_toc",this,this.onBindVerify),this.addSocketListener("m_role_tx_cover_toc",this,this.onTxCover),this.addSocketListener("m_role_condition_gift_buy_toc",this,this.onRoleConditionGiftBuy),this.addSocketListener("m_role_condition_gift_info_toc",this,this.onRoleConditionGiftInfo),this.addSocketListener("m_copy_benefit_replevy_toc",this,this.onCopyBenefitReplevy),this.addSocketListener("m_benefit_replevy_toc",this,this.onBenefitReplevy),this.addSocketListener("m_role_honor_vip_info_toc",this,this.onHonorVIPInfo),this.addMessageListener("WELFARE_OPEN_PANEL",this,this.openPanel),this.addMessageListener("WELFARE_UPDATE_PANEL",this,this.updatePanel),this.addMessageListener("ICON_REDPOINT_UPDATE",this,this.onIconRedPointUpdate),this.addMessageListener("ICON_NOTICE",this,this.onIconNotice),this.addMessageListener("OPEN_ROLE_LEVEL_TIME_LIMIT_GIFT",this,this.openLevelOfTimeLimitView),this.addMessageListener("ENTER_GAME",this,this.onEnterGame),this.addMessageListener("SDK_APPINSTALLED",this,this.checkAppLoad)},i.onEnterGame=function(){_t.setTimeout(this,this.delayDoSomething,null,1e4),Bt.sdk.isAppInstalled()},i.delayDoSomething=function(){this.checkSetQzoonBgRP()},i.toHonorVIPInfo=function(){var t=new Object;t.className="m_role_honor_vip_info_tos",this.sendSocketMessage(t)},i.onHonorVIPInfo=function(t){0==t.err_code?(ka.honorVIPToc=t,this.panel&&this.panel.parent&&this.panel.update(4020)):ce.addTip(t.err_code)},i.checkSetQzoonBgRP=function(){-1!=ka.openIconIDs.indexOf(4016)?T.dispatch("ICON_REDPOINT_CHANGE",[4016,"RP_ICON_SET_QZOON_BG",!0]):T.dispatch("ICON_REDPOINT_CHANGE",[4016,"RP_ICON_SET_QZOON_BG",!1])},i.checkAppLoadInstalled=function(){yt.isWX||yt.isQQ||(Bt.isMobileQQAnd()||Bt.isWanbaAnd()||Bt.isGdtand())&&Bt.sdk.isAppInstalled()},i.onAppLoadIcon=function(){0<Do.getRewardTimes(9,0)?T.dispatch("ICON_REDPOINT_CHANGE",[5002,"RP_ICON_APP_LOAD",!1]):T.dispatch("ICON_REDPOINT_CHANGE",[5002,"RP_ICON_APP_LOAD",!0])},i.checkAppLoad=function(t){if(!yt.isWX&&!yt.isQQ&&(Bt.isMobileQQAnd()||Bt.isWanbaAnd()||Bt.isGdtand())){var e=0<Do.getRewardTimes(9,0);t&&(ka.isAppLoad=!0,ka.checkIconChange(),Zl.ins().updateIconList()),t&&!e&&_r.ins().toPfRewardGet([9,0])}},i.toTxCover=function(){var t=new Object;t.className="m_role_tx_cover_tos",this.sendSocketMessage(t)},i.onTxCover=function(t){0==t.err_code?(ka.setQzoonBGState=t.state,this.panel&&this.panel.parent&&this.panel.update(4016),this.checkSetQzoonBgRP()):ce.addTip(t.err_code)},i.toBindVerify=function(t){var e=new Object;e.className="m_bind_phone_verify_code_tos",e.code=t,this.sendSocketMessage(e)},i.onBindVerify=function(t){0<t.err_code?(this.dispatch("BIND_PHONE_ERROR"),ce.addTip(t.err_code)):(ka.HAD_BIND_PHONE=!0,this.panel&&this.panel.parent&&this.panel.update(4008))},i.toGetCode=function(t){var e=new Object;e.className="m_bind_phone_get_code_tos",e.phone_num=t,this.sendSocketMessage(e)},i.onGetCode=function(t){0<t.err_code&&ce.addTip(t.err_code)},i.onIconNotice=function(){1==ka.checkIconChange()&&null!=this.panel&&this.panel.updateIcon(),this.onAppLoadIcon()},i.onIconRedPointUpdate=function(t){this.panel&&this.panel.updateRedPoint(t)},i.toCDKey=function(t){var e=new Object;e.className="m_role_activation_code_tos",e.code=t,this.sendSocketMessage(e)},i.onCDKey=function(t){0==t.err_code||ce.addTip(t.err_code)},i.openPanel=function(t){void 0===t&&(t=0),0!=se.has("modules/welfare")?(_t.clearTimeout(this.welfareCleanKey),this.checkAppLoadInstalled(),t=0==t?ka.openIconIDs[0]:t,this.panel||(this.panel=Aa.getIns(6e4,"WelfarePanel"),this.panel.on("undisplay",this,this.onUndisplay)),this.panel.parent||this.panel.openWindow(),this.panel.chooseView(t),modules.welfare.WelfareModule.ins().toTxCover()):se.add("modules/welfare","正在加载福利大厅资源",this,this.openPanel,[t])},i.onUndisplay=function(){this.welfareCleanKey=_t.setTimeout(this,this.cleanWelRes,null,ya.coldTime)},i.cleanWelRes=function(){this.panel&&(this.panel.destroy(),this.panel=null),se.destroy("modules/welfare")},i.updatePanel=function(t){void 0===t&&(t=0),this.panel&&this.panel.isPopup()&&this.panel.update(t)},i.isWelfarePanelTop=function(){return this.panel&&re.checkIsTop(this.panel)},i.closePanel=function(){this.panel&&this.panel.isPopup()&&this.panel.closeWindow()},i.openNoticeUpView=function(){this.noticeUpView=this.noticeUpView||Aa.getIns(6e4,"notice.WelfareNoticeUpView"),this.noticeUpView.openWindow()},i.openLevelOfTimeLimitView=function(){this.levelOfTimeLimitView=this.levelOfTimeLimitView||Aa.getIns(6e4,"roleLevelOfTimeLimitGift.RoleLevelOfTimeLimitGiftView"),this.levelOfTimeLimitView.buyId=Bt.sdk instanceof com.sdk.AiWeiYouSDK?11461:1029,this.levelOfTimeLimitView.openWindow()},i.closeLevelOfTimeLimitView=function(){this.levelOfTimeLimitView&&this.levelOfTimeLimitView.parent&&this.levelOfTimeLimitView.closeWindow()},i.toRoleConditionGiftInfo=function(t){var e=new Object;e.className="m_role_condition_gift_info_tos",e.buy_id=t,this.sendSocketMessage(e)},i.onRoleConditionGiftInfo=function(t){0<t.err_code?ce.addTip(t.err_code):this.levelOfTimeLimitView&&this.levelOfTimeLimitView.parent&&this.levelOfTimeLimitView.updateByInfo(t)},i.toRoleConditionGiftBuy=function(t){var e=new Object;e.className="m_role_condition_gift_buy_tos",e.buy_id=t,this.sendSocketMessage(e)},i.onRoleConditionGiftBuy=function(t){0<t.err_code?ce.addTip(t.err_code):t.buy_id?Nl.ins().toPay(t.buy_id):me.linkTo(11454)},i.toCopyBenefitReplevy=function(){var t=new Object;t.className="m_copy_benefit_replevy_tos",this.sendSocketMessage(t)},i.onCopyBenefitReplevy=function(t){0<t.err_code?ce.addTip(t.err_code):(ka.allRecoverInfo=t.all_replevy_times,this.updateRecoverPanel())},i.toBenefitReplevy=function(t,e){var i=new Object;i.className="m_benefit_replevy_tos",i.map_id=t,i.replevy_num=e,this.sendSocketMessage(i)},i.onBenefitReplevy=function(t){0<t.err_code?ce.addTip(t.err_code):(ka.updateRecoverVOByMapAndTimes(t.map_id,t.replevy_times),this.updateRecoverPanel())},i.updateRecoverPanel=function(){if(this.panel&&this.panel.parent){this.panel.update(4018);for(var t=0;t<ka.allRecoverInfo.length;t++){if(0<ka.allRecoverInfo[t].replevy_times){this.panel.updateRecoverIconFlash();break}}}},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),th=(function(t){function e(){this.day=null,this.iconDesc=null,this.id=NaN,this.linkArr=null,this.needFamilyAndLv=null,this.openDesc=null,this.rw=null,this.stateArr=null,this.timeArr=null,this.title=null,this.txt=null,this.openByServerStart=0,this.pday=null,this.plinkArr=null,this.ptimeArr=null,this.pstateArr=null,this.piconDesc=null,this.pRw=null,this.pTxt=null,e.__super.call(this)}w(e,"xml.ActPreVO",ue);var i=e.prototype;i.checkServerOpenedOpen=function(){return 0==this.openByServerStart},i.checkCanJoin=function(){var t=parseInt(this.needFamilyAndLv.substr(2,this.needFamilyAndLv.length-2));return pe.myEquipLevel>=t?"1"==this.needFamilyAndLv.charAt(0)&&pe.user.attr.family_id<=0?"未有仙盟":"":(100<t?(t-100)/10+"转":t+"级")+"开启"},i.getNextTime=function(){var t=new Date;t.setTime(1e3*ya.serverTime);var e=t.getDay(),i=3600*t.getHours()+60*t.getMinutes()+t.getSeconds(),s=7;if(0<=this.pday.indexOf(e)&&i<=this.ptimeArr[this.ptimeArr.length-1][1])s=e;else for(var n=0;n<this.pday.length;n++)if(this.pday[n]>e){s=this.pday[n];break}return this.ptimeArr[this.ptimeArr.length-1][0]-i+86400*(s-e)},i.initArr=function(){this.pday=this.day.split(",");for(var t=0;t<this.pday.length;t++){var e=parseInt(this.pday[t]);e=0==e?7:e,this.pday[t]=e}for(this.day=null,this.plinkArr=this.linkArr.split("|"),t=0;t<this.plinkArr.length;t++)this.plinkArr[t]=parseInt(this.plinkArr[t]);for(this.linkArr=null,this.ptimeArr=this.timeArr.split("|"),t=0;t<this.ptimeArr.length;t++){var i=this.ptimeArr[t];this.ptimeArr[t]=i.split("-");for(var s=0;s<this.ptimeArr[t].length;s++){var n=(i=this.ptimeArr[t][s]).split(":");this.ptimeArr[t][s]=60*parseInt(n[0])*60+60*parseInt(n[1])}}for(this.timeArr=null,this.pstateArr=this.stateArr.split("|"),this.stateArr=null,this.piconDesc=this.iconDesc.split("|"),this.iconDesc=null,this.pRw=this.rw.split("|"),t=0;t<this.pRw.length;t++){i=this.pRw[t],this.pRw[t]=i.split(",");var o=new Object;o.className="p_kv",o.id=parseInt(this.pRw[t][0]),o.val=parseInt(this.pRw[t][1]),this.pRw[t]=o}this.rw=null,this.pTxt=this.txt.split("|"),this.txt=null},i.addChild=function(t){},I(0,i,"attrArr",function(){return["day","iconDesc","id","linkArr","needFamilyAndLv","openByServerStart","openDesc","rw","stateArr","timeArr","title","txt"]})}(),function(t){function e(){this.id=null,this.name=null,this.reward=null,this.rank=0,this.pRw=null,e.__super.call(this)}w(e,"xml.BattlefieldRoleRewardVO",ue);var i=e.prototype;i.addChild=function(t){},i.initArr=function(){if(null!=this.reward){this.pRw=this.reward.split("|");for(var t=0;t<this.pRw.length;t++){var e=this.pRw[t];this.pRw[t]=e.split(",");var i=new Object;i.className="p_kv",i.id=parseInt(this.pRw[t][0]),i.val=parseInt(this.pRw[t][1]),this.pRw[t]=i}this.reward=null}},I(0,i,"attrArr",function(){return["id","name","rank","reward"]}),e._allProperty=null}(),function(t){function e(){this.animalID=0,this.cardWay=null,this.getWayLink=null,this.color=0,this.name=null,this.openCard=0,this.openTime=0,this.openTip=null,this.quality=0,this.scale=0,this.skillMsg=null,this.skillPower=0,this.getPos=null,this.mainPos=null,this.starPos=null,this.step=0,this.star=0,this._getWayLinkArr=null,this._cardWayArr=null,this._mainPosArr=null,this._getPosArr=null,this._starPosArr=null,e.__super.call(this)}w(e,"xml.BeastsAnimalVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"starPosArr",function(){return this._starPosArr||this.parseToSimpleIntArr("_starPosArr",this.starPos),this._starPosArr}),I(0,i,"isLoaded",function(){return 0<this.step}),I(0,i,"wayLinkArr",function(){return this._getWayLinkArr||this.parseToSimpleIntArr("_getWayLinkArr",this.getWayLink),this._getWayLinkArr}),I(0,i,"cardLink",function(){return this.wayLinkArr?this.wayLinkArr[1]:0}),I(0,i,"cardLinkType",function(){return this.wayLinkArr?this.wayLinkArr[0]:0}),I(0,i,"isTimeShow",function(){return this.openTime<ya.serverTime}),I(0,i,"cardWayArr",function(){return this._cardWayArr||(this._cardWayArr=this.cardWay.split("%")),this._cardWayArr}),I(0,i,"mainPosArr",function(){return this._mainPosArr||this.parseToSimpleIntArr("_mainPosArr",this.mainPos),this._mainPosArr}),I(0,i,"getPosArr",function(){return this._getPosArr||this.parseToSimpleIntArr("_getPosArr",this.getPos),this._getPosArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["animalID","cardWay","color","getPos","getWayLink","mainPos","name","openCard","openTime","openTip","quality","scale","skillMsg","skillPower","starPos"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.BlueDailyGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this.level=0,this.trans=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.BlueLevelGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index","level","trans"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.BlueNoviceGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index"]}),e._allProperty=null}(),function(t){function e(){this.bossLv=null,this.bossName=null,this.copyType=0,this.headUrl=null,this.id=NaN,this.mapID=0,this.maxBlood=NaN,this.openLv=null,this.reward=null,this.shield=null,this._showBossLvArr=null,this._openArr=null,this._rewardsArr=null,this._shieldArr=null,e.__super.call(this)}w(e,"xml.BossVO",ue);var i=e.prototype;i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.isShowRegrowLv=function(){return 0<this.openArr[0]},i.getRewards=function(){return this._rewardsArr||this.parseToSimpleIntArr("_rewardsArr",this.reward),this._rewardsArr},i.getShields=function(){return this._shieldArr||(this._shieldArr=this.shield.split("|")),this._shieldArr},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.addChild=function(t){},I(0,i,"showBossLvStr",function(){return this.showBossLvArr&&0<this.showBossLvArr[1]?this.showBossLvArr[1]+"转":this.showBossLvArr[0]+"级"}),I(0,i,"showBossLvArr",function(){return this._showBossLvArr||this.parseToSimpleIntArr("_showBossLvArr",this.bossLv),this._showBossLvArr}),I(0,i,"showBossLv",function(){return this.showBossLvArr&&0<this.showBossLvArr[1]?this.showBossLvArr[1]:this.showBossLvArr[0]}),I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv),this._openArr}),I(0,i,"showBossLvStr2",function(){return this.showBossLvArr&&0<this.showBossLvArr[1]?this.showBossLvArr[1]+"转":this.showBossLvArr[0]+""}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["bossLv","bossName","copyType","headUrl","id","mapID","maxBlood","openLv","reward","shield"]}),e._allProperty=null}(),function(t){function e(){this.goodsID=0,this.index=0,this.mode=0,this.openLv=null,this.reward=null,this.titleName=null,this.vipAddTime=null,this._openArr=null,this._vipAdd=null,this._rewardsArr=null,e.__super.call(this)}w(e,"xml.CallBossVO",ue);var i=e.prototype;i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.isShowRegrowLv=function(){return 0<this.openArr[0]},i.getAddTime=function(t){return this._vipAdd||(this._vipAdd=this.parseToArr(this.vipAddTime)),t<=0?0:parseInt(this._vipAdd[t-1][1])},i.getRewards=function(){return this._rewardsArr||this.parseToSimpleIntArr("_rewardsArr",this.reward),this._rewardsArr},i.addChild=function(t){},I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv),this._openArr}),I(0,i,"attrArr",function(){return["goodsID","index","mode","openLv","reward","titleName","vipAddTime"]})}(),function(t){function e(){this.attrPerLv=null,this.costPerLv=NaN,this.img=null,this.maxLv=0,e.__super.call(this)}w(e,"xml.CityCaveBlessVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"perAttr",function(){return this.attrPerLv.split("|")}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["attrPerLv","costPerLv","img","maxLv"]}),e._allProperty=null}(),function(t){function e(){this.desc=null,this.id=0,this.img=null,this.name=null,this.rate=NaN,this.time=NaN,e.__super.call(this)}w(e,"xml.CityCaveDragonVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["desc","id","img","name","rate","time"]}),e._allProperty=null}(),function(t){function e(){this.openDes=null,this.openLv=null,e.__super.call(this)}w(e,"xml.CityCaveOpenVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["openDes","openLv"]}),e._allProperty=null}(),function(t){function e(){this.condition=null,this.costTime=NaN,this.id=NaN,this.limitNum=0,this.rewardRate=NaN,e.__super.call(this)}w(e,"xml.CityCaveSacriItemVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["condition","costTime","id","limitNum","rewardRate"]}),e._allProperty=null}(),function(t){function e(){this.cost=null,this.pos=null,e.__super.call(this)}w(e,"xml.CityCaveSacriPosVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["cost","pos"]}),e._allProperty=null}(),function(t){function e(){this.effect=NaN,this.lv=0,this.upCondition=null,this._conArr=null,e.__super.call(this)}w(e,"xml.CityCaveVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"time",function(){return 1-this.effect/100}),I(0,i,"upLv",function(){return this._conArr&&this._conArr[0]||(this._conArr=this.upCondition.split("|")),this._conArr[0]}),I(0,i,"upNum",function(){return this._conArr&&this._conArr[1]||(this._conArr=this.upCondition.split("|")),this._conArr[1]}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["effect","lv","upCondition"]}),e._allProperty=null}(),function(t){function e(){this.eventID=0,this.eventType=0,this.falseWord=null,this.mapID=0,this.name=null,this.needVigor=0,this.optionFalse=null,this.optionTrue=null,this.result=null,this.title=null,this.trueWord=null,this.url=null,this.optionArr=null,e.__super.call(this)}w(e,"xml.CityEventVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"options",function(){if(!this.optionArr){this.optionArr=W.parseAttrToArr(this.optionFalse,",","|");var t=W.parseAttrToArr(this.optionTrue,",","|");this.optionArr=this.optionArr.concat(t)}return this.optionArr.sort(function(t,e){return.5<Math.random()?-1:Math.random()<.5?1:0}),this.optionArr}),I(0,i,"attrArr",function(){return["eventID","eventType","falseWord","mapID","name","needVigor","optionFalse","optionTrue","result","title","trueWord","url"]})}(),function(t){function e(){this.buyVigorPay=null,this.fightCanGetExp=0,this.fightGetPercent=0,this.fightPayVigor=0,this.lootRewards=null,this.maxBuyVigorTime=0,this.maxCityLv=0,this.maxCityScore=0,this.maxVigor=0,this.missionIDs=null,this.monsterIDs=null,this.openLv=null,this.revengeRewards=0,this.vigorItem=0,this.reflashCrystalNeed=0,this.amethystMaxLevel=NaN,this.smeltCost=NaN,this.smeltProduct=NaN,this._buyVigorArr=null,this._missionIDs=null,this._monsterIDs=null,this._openArr=null,e.__super.call(this)}w(e,"xml.CityMainVO",ue);var i=e.prototype;i.getMissionIDs=function(){return this._missionIDs||this.parseToSimpleIntArr("_missionIDs",this.missionIDs),this._missionIDs},i.getMonsterIDs=function(){return this._monsterIDs||this.parseToSimpleIntArr("_monsterIDs",this.monsterIDs),this._monsterIDs},i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.isShowRegrowLv=function(){return 0<this.openArr[0]},i.addChild=function(t){},I(0,i,"buyVigorArr",function(){return this._buyVigorArr||this.parseToSimpleIntArr("_buyVigorArr",this.buyVigorPay,"|"),this._buyVigorArr}),I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv),this._openArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["amethystMaxLevel","buyVigorPay","fightCanGetExp","fightGetPercent","fightPayVigor","lootRewards","maxBuyVigorTime","maxCityLv","maxCityScore","maxVigor","missionIDs","monsterIDs","openLv","reflashCrystalNeed","revengeRewards","smeltCost","smeltProduct","vigorItem"]}),e._allProperty=null}(),function(t){function e(){this.bossId=0,this.bossUrl=null,this.buyCost=0,this.familyAward=null,this.limitTime=null,this.previewAward=null,this._familyAward=null,this._previewAward=null,e.__super.call(this)}w(e,"xml.CmBaseVO",ue);var i=e.prototype;i.addChild=function(t){},i.getFamilyAwards=function(){return this._familyAward||(this._familyAward=W.parseAttrToArr(this.familyAward,"|",",",!0)),this._familyAward},i.getPreviewAward=function(){return this._previewAward||(this._previewAward=W.parseAttrToArr(this.previewAward,"|",",",!0)),this._previewAward},I(0,i,"attrArr",function(){return["bossId","bossUrl","buyCost","familyAward","limitTime","previewAward"]})}(),function(t){function e(){this.awards=null,this.damage=NaN,this._awards=null,e.__super.call(this)}w(e,"xml.CmBossDamageVO",ue);var i=e.prototype;i.addChild=function(t){},i.getAwards=function(){return this._awards||(this._awards=W.parseAttrToArr(this.awards,"|",",",!0)),this._awards},I(0,i,"attrArr",function(){return["awards","damage"]})}(),function(t){function e(){this.hp=NaN,e.__super.call(this)}w(e,"xml.CmBossHpVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["hp"]})}(),function(t){function e(){this.awards=null,this.rank=null,this._awards=null,e.__super.call(this)}w(e,"xml.CmRankAwardVO",ue);var i=e.prototype;i.addChild=function(t){},i.getAwards=function(){return this._awards||(this._awards=W.parseAttrToArr(this.awards,"|",",",!0)),this._awards},I(0,i,"attrArr",function(){return["awards","rank"]})}(),function(t){function e(){this.cop=NaN,this.exchangeID=0,this.need=null,this.ord=NaN,this.typeID=NaN,this.needRP=0,this._need=null,this.kind=NaN,e.__super.call(this)}w(e,"xml.CompKindCompSubVO",ue);var i=e.prototype;i.initNeed=function(){if(null==this._need){var t,e;this._need=this.need.split("|");for(var i=0;i<this._need.length;i++)(e=new Object).className="p_kv",t=this._need[i].split(","),e.id=parseInt(t[0]),e.val=parseInt(t[1]),this._need[i]=e}},i.getNeedArr=function(){return this.initNeed(),this._need},i.checkCan=function(t){var e;for(var i in void 0===t&&(t=!0),this.initNeed(),this._need)if(e=this._need[i],xo.getGoodsNumByType(xo.GOODS_ID,e.id)<e.val)return t&&Jt.addTip("材料数量不满足炼制条件"),!1;return pe.silver>=this.cop||(t&&ba.show(10201113),!1)},i.getCanTimes=function(){this.initNeed();var t,e=0;for(var i in this._need){t=this._need[i];var s=xo.getGoodsNumByType(xo.GOODS_ID,t.id);if(s<t.val)return Jt.addTip("材料数量不满足炼制条件"),0;e=0==e?Math.floor(s/t.val):Math.floor(s/t.val)<e?Math.floor(s/t.val):e}return pe.silver>=this.cop*e?e:0!=e&&pe.silver>=this.cop?e=Math.floor(pe.silver/this.cop):(ba.show(10201113),0)},i.checkRP=function(){return 0!=this.needRP&&this.checkCan(!1)},i.addChild=function(t){},I(0,i,"attrArr",function(){return["cop","exchangeID","need","needRP","ord","typeID"]})}(),function(t){function e(){this.id=NaN,this.name=null,this.CompKindCompSubArr=null,e.__super.call(this)}w(e,"xml.CompKindVO",ue);var i=e.prototype;i.getIndex=function(t){for(var e=this.CompKindCompSubArr.length,i=0;i<e;i++)if(this.CompKindCompSubArr[i].typeID==t)return i;return-1},i.addChild=function(t){t instanceof xml.CompKindCompSubVO&&(this.CompKindCompSubArr=this.CompKindCompSubArr||[],t.kind=this.id,this.CompKindCompSubArr.push(t))},I(0,i,"attrArr",function(){return["id","name"]})}(),function(t){function e(){this.img=null,this.mapID=NaN,this.needPow=NaN,this.rws=null,this.subTxt=null,this._rwArr=null,e.__super.call(this)}w(e,"xml.CopySelVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"rwArr",function(){if(!this._rwArr){var t,e;this._rwArr=this.rws.split("|");for(var i=0;i<this._rwArr.length;i++)e=this._rwArr[i].split(","),(t=new Object).className="p_kv",t.id=parseInt(e[0]),t.val=parseInt(e[1]),this._rwArr[i]=t}return this._rwArr}),I(0,i,"attrArr",function(){return["img","mapID","needPow","rws","subTxt"]})}(),function(t){function e(){this.desc=null,this.mapId=NaN,this.missionId=NaN,this.reward=null,this.title=null,this.countProce=null,this.monsterType=null,this.monsterMapPos=null,this.descArr=null,this.rewardArr=null,this.mapArrs=null,e.__super.call(this)}w(e,"xml.CrossTowerMissionVO",ue);var i=e.prototype;i.getMissionDescs=function(){return null!=this.descArr&&0<this.descArr.length||(this.descArr=this.desc.split("|")),this.descArr},i.getRewardInfos=function(){if(this.rewardArr&&0<this.rewardArr.length)return this.rewardArr;this.rewardArr=this.rewardArr||[];for(var t=this.reward.split("|"),e=0,i=t.length;e<i;e++){var s=t[e].split(","),n=new Object;n.className="p_kv",n.id=s[0],n.val=s[1],this.rewardArr.push(n)}return this.rewardArr},i.getMonsterPosMaps=function(){if(this.mapArrs=this.mapArrs||[],this.mapArrs&&0<this.mapArrs.length)return this.mapArrs;for(var t=this.monsterMapPos.split(","),e=0,i=t.length;e<i;e++)this.mapArrs.push(Number(t[e]));return this.mapArrs},i.addChild=function(t){},I(0,i,"attrArr",function(){return["countProce","desc","mapId","missionId","monsterMapPos","monsterType","reward","title"]}),e._allProperty=null}(),function(t){function e(){this.bg=null,this.bossMap=null,this.floor=null,this.monster=null,this.name=null,this.needKill=null,this.output=null,this.reward=null,this.spcReward=null,this._needkillArr=null,this._needKillNum=0,this._needKillWave=0,this._eachWaveNum=0,this._curFloor=0,this.tempArr=null,e.__super.call(this)}w(e,"xml.CustomVO",ue);var i=e.prototype;i.isFloor=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.tempArr=this.floor.split(","),t>=this.tempArr[0]&&t<=this.tempArr[1]},i.getIndex=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.tempArr=this.floor.split(","),t-this.tempArr[0]},i.getOutput=function(t){if(void 0===t&&(t=0),t=0==t?this._curFloor:t,this.isFloor(t)){var e=this.getIndex(t);this.tempArr=W.parseAttrToArr(this.output,",","|");var i,s=[];for(var n in this.tempArr)i=this.tempArr[n],s.push([parseInt(i[0]),parseInt(i[1]),parseInt(i[2])+i[3]*e]);return s}return null},i.getSpcReward=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.isFloor(t)?parseInt(this.parseCommon(t,this.spcReward)):0},i.getMapID=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.isFloor(t)?parseInt(this.parseCommon(t,this.bossMap)):0},i.getMonsterInfo=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.isFloor(t)?this.parse2(t,this.monster):null},i.getBg=function(t){return void 0===t&&(t=0),t=0==t?this._curFloor:t,this.isFloor(t)?parseInt(this.parseCommon(t,this.bg)):0},i.getName=function(t){void 0===t&&(t=0),t=0==t?this._curFloor:t;var e="";if(this.isFloor(t)){var i=this.getIndex(t);this.tempArr=this.name.split("/");var s=this.tempArr[0];this.tempArr=this.tempArr[1].split("|");var n=Math.floor(i/s);e=this.tempArr[n%this.tempArr.length]+(i%s+1)}return e},i.parseCommon=function(t,e){var i=this.getIndex(t);this.tempArr=e.split("/");var s=this.tempArr[0];this.tempArr=this.tempArr[1].split("|");var n=Math.floor(i/s);return this.tempArr[n%this.tempArr.length]},i.parse2=function(t,e){var i=this.getIndex(t);this.tempArr=e.split("/");var s=this.tempArr[0];this.tempArr=W.parseAttrToArr(this.tempArr[1],",","|");var n=Math.floor(i/s);return this.tempArr[n%this.tempArr.length]},i.addChild=function(t){},I(0,i,"needKillArr",function(){return this._needkillArr||(this._needkillArr=this.needKill.split("|")),this._needkillArr}),I(0,i,"eachWaveNum",function(){return this._eachWaveNum<=0&&(this._eachWaveNum=parseInt(this.needKillArr[1])),this._eachWaveNum}),I(0,i,"needKillNum",function(){return this._needKillNum<=0&&(this._needKillNum=this.needKillWave*this.eachWaveNum),this._needKillNum}),I(0,i,"needKillWave",function(){return this._needKillWave<=0&&(this._needKillWave=parseInt(this.needKillArr[0])),this._needKillWave}),I(0,i,"curFloor",function(){return this._curFloor},function(t){this._curFloor=t}),I(0,i,"floors",function(){return this.tempArr=this.floor.split(","),this.tempArr[1]-this.tempArr[0]+1}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["bg","bossMap","floor","monster","name","needKill","output","reward","spcReward"]}),I(0,i,"rewardArr",function(){return this.reward.split(",")}),I(0,i,"curMaxFloor",function(){return this.tempArr=this.floor.split(","),this.tempArr[1]}),e._allProperty=null}(),function(t){function e(){this.level=0,this.pos=0,this.quench=null,this.quenchNeed=null,this.quenchPer=0,this.quenchTotal=0,this.upNeed=null,this.upTotal=0,this.upgrade=null,this.upNeedArr=null,this._powUp=0,this._powQuench=0,this.quenchNeedArr=null,this.upAttrArray=null,this.quenchAttrArray=null,e.__super.call(this)}w(e,"xml.DominEquipVO",ue);var i=e.prototype;i.getPowUp=function(){return 0==this._powQuench&&(this.initUp(),this._powUp=this.getPow(this.upAttrArray)),this._powUp},i.getPowQuench=function(){return 0==this._powQuench&&(this.initQuench(),this._powQuench=this.getPow(this.quenchAttrArray)),this._powQuench},i.getPow=function(t){for(var e=0,i=NaN,s=0;s<t.length;s++)i=parseFloat(t[s][1]),e+=W.getAttrPower(parseInt(t[s][0]),i);return e},i.getUpNeedByLevel=function(t){if(!this.upNeedArr){this.upNeedArr=this.upNeed.split(",");for(var e=0;e<this.upNeedArr.length;e++)this.upNeedArr[e]=parseInt(this.upNeedArr[e])}return this.upNeedArr[0]*t+this.upNeedArr[1]},i.getQuenchNeedByLevel=function(t){if(!this.quenchNeedArr){this.quenchNeedArr=this.quenchNeed.split(",");for(var e=0;e<this.quenchNeedArr.length;e++)this.quenchNeedArr[e]=parseInt(this.quenchNeedArr[e])}return this.quenchNeedArr[0]*t+this.quenchNeedArr[1]},i.getUpAttrByLevel=function(t){return this.initUp(),this.getAttrByLv(t,this.upAttrArray)},i.getUpAttrByLevel2=function(t){return this.initUp(),this.getAttrByLv2(t,this.upAttrArray)},i.getUpAttrSubAttr=function(){return this.initUp(),this.getSubAttr(this.upAttrArray)},i.getQuenchAttrSubAttr=function(t){return this.initQuench(),this.getSubAttr(this.quenchAttrArray,t)},i.initUp=function(){this.upAttrArray||this.parseToIntArr("upAttrArray",this.upgrade,"|",",")},i.initQuench=function(){if(!this.quenchAttrArray){this.quenchAttrArray=this.quench.split("|");for(var t=0;t<this.quenchAttrArray.length;t++)this.quenchAttrArray[t]=this.quenchAttrArray[t].split(","),this.quenchAttrArray[t][0]=parseInt(this.quenchAttrArray[t][0]),this.quenchAttrArray[t][1]=this.quenchAttrArray[t][1].split("~"),this.quenchAttrArray[t][2]=parseInt(this.quenchAttrArray[t][2])}},i.getSubAttr=function(t,e){void 0===e&&(e=-1);for(var i="",s=0;s<t.length;s++){var n=0;n=e<0?parseFloat(t[s][1])+parseFloat(t[s][2]):parseFloat(t[s][1][e])+parseFloat(t[s][2]),n=Math.floor(10*n)/10,37==parseInt(t[s][0])||38==parseInt(t[s][0])||41==parseInt(t[s][0])||42==parseInt(t[s][0])||52==parseInt(t[s][0])||53==parseInt(t[0])?i+="（ + "+n+"％ ）\n":60==parseInt(t[s][0])||(i+="（ + "+n+" ）\n")}return i},i.getAttrByLv=function(t,e,i){void 0===i&&(i=-1);for(var s="",n=0;n<e.length;n++){var o=0;if(i<0)o=parseFloat(e[n][1])*t+parseFloat(e[n][2]);else for(var a=0;a<=i;a++)o+=a<i?10*parseFloat(e[n][1][a]):parseFloat(e[n][1][a])*(t-10*a);o=Math.floor(10*o)/10,37==parseInt(e[n][0])||38==parseInt(e[n][0])||41==parseInt(e[n][0])||42==parseInt(e[n][0])||52==parseInt(e[n][0])||53==parseInt(e[0])?s+=W.getAttrStrByNum(parseInt(e[n][0]),o,"","：","％\n"):60==parseInt(e[n][0])||(s+=W.getAttrStrByNum(parseInt(e[n][0]),o,"","：","\n"))}return s},i.getAttrByLv2=function(t,e,i){void 0===i&&(i=-1);for(var s=e.length,n=[],o=0;o<s;o++){var a=0;if(i<0)a=parseFloat(e[o][1])*t+parseFloat(e[o][2]);else for(var l=0;l<=i;l++)a+=l<i?10*parseFloat(e[o][1][l]):parseFloat(e[o][1][l])*(t%10);a=Math.floor(10*a)/10,37==parseInt(e[o][0])||38==parseInt(e[o][0])||41==parseInt(e[o][0])||42==parseInt(e[o][0])||52==parseInt(e[o][0])||53==parseInt(e[0])?n[o]=W.getAttrStrByNum(parseInt(e[o][0]),a,"  ","：","％"):60==parseInt(e[o][0])||(n[o]=W.getAttrStrByNum(parseInt(e[o][0]),a,"  ","：",""))}return n},i.getQuenchAttrByLevel=function(t){this.initQuench();var e=Math.ceil(t/10)-1;return e<0&&(e=0),this.getAttrByLv(t,this.quenchAttrArray,e)},i.getQuenchAttrByLevel2=function(t){this.initQuench();var e=Math.ceil(t/10)-1;return e<0&&(e=0),this.getAttrByLv2(t,this.quenchAttrArray,e)},i.getQuenchPerByLevel=function(t){return this.quenchPer},i.addChild=function(t){},I(0,i,"attrArr",function(){return["level","pos","quench","quenchNeed","quenchPer","quenchTotal","upNeed","upTotal","upgrade"]})}(),function(t){function i(){this.award=null,this.awardNum=null,this.barrier=null,this.exp=null,this.mapID=null,this.money=null,this.power=null,this.spcAward=null,this.spcAwardNum=null,this._curBarrier=0,this._maxBarrier=0,i.__super.call(this)}w(i,"xml.DreamCopyVO",ue);var e=i.prototype;e.isBarrier=function(t){var e=this.barrier.split(",");return t>=e[0]&&t<=e[1]},e.getPower=function(t){return void 0===t&&(t=0),this.getCommonAttr(this.power,t)},e.getExp=function(t){return void 0===t&&(t=0),this.getCommonAttr(this.exp,t)},e.getMoney=function(t){return void 0===t&&(t=0),this.getCommonAttr(this.money,t)},e.getAwardArr=function(t){return void 0===t&&(t=0),t=0==t?this._curBarrier:t,this.isBarrier(t)?this.parse2(t,this.award):null},e.getAwardNumArr=function(t){return void 0===t&&(t=0),t=0==t?this._curBarrier:t,this.isBarrier(t)?this.parse2(t,this.awardNum):null},e.getSpcAwardArr=function(t){return void 0===t&&(t=0),t=0==t?this._curBarrier:t,this.isBarrier(t)?this.parse2(t,this.spcAward):null},e.getSpcAwardNumArr=function(t){return void 0===t&&(t=0),t=0==t?this._curBarrier:t,this.isBarrier(t)?this.parse2(t,this.spcAwardNum):null},e.getMapID=function(t){return void 0===t&&(t=0),t=0==t?this._curBarrier:t,this.isBarrier(t)?parseInt(this.parseCommon(t,this.mapID)):null},e.getIndex=function(t){return void 0===t&&(t=0),(t=0==t?this._curBarrier:t)-this.barrier.split(",")[0]},e.getCommonAttr=function(t,e){if(void 0===e&&(e=0),e=0==e?this._curBarrier:e,this.isBarrier(e)){var i=t.split("|");return parseInt(i[0])+this.getIndex(e)*parseInt(i[1])}return 0},e.parseCommon=function(t,e){var i=this.getIndex(t),s=e.split("/"),n=s[0];return(s=s[1].split(","))[Math.floor(i/n)%s.length]},e.parse2=function(t,e){this.getIndex(t);var i=e.split("/"),s=i[0];return(i=W.parseAttrToArr(i[1],",","|"))[Math.floor(this.getIndex(t)/s)%i.length]},e.copy=function(){var t=new i;for(var e in this)t[e]=this[e];return t},e.addChild=function(t){},I(0,e,"curBarrier",function(){return this._curBarrier},function(t){this._curBarrier=t}),I(0,e,"maxBarrier",function(){if(this._maxBarrier<=0){var t=this.barrier.split(",");this._maxBarrier=t[1]}return this._maxBarrier}),I(0,e,"attrArr",function(){return["award","awardNum","barrier","exp","mapID","money","power","spcAward","spcAwardNum"]})}(),function(t){function e(){this.desc=null,this.id=0,this.item=null,this.name=null,this.originAttr=null,this.quality=0,e.__super.call(this)}w(e,"xml.ExerBeastsBookCardVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["desc","id","item","name","originAttr","quality"]})}(),function(t){function e(){this.id=0,this.items=null,this.step=0,e.__super.call(this)}w(e,"xml.ExerBeastsBookExtraVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","items","step"]})}(),function(t){function e(){this.attrs=null,this.cards=null,this.id=0,this.name=null,e.__super.call(this)}w(e,"xml.ExerBeastsBookSuitVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["attrs","cards","id","name"]})}(),function(t){function e(){this.reinfAttrs=null,this.reinfMaterial=null,this.step=0,this.upStarAttrs=null,this.upStarMaterial=null,this.upStepAttrs=null,this.upStepMaterial=null,this.upStarAttrsArr=null,this.upStepAttrsArr=null,this.reinfAttrsArr=null,e.__super.call(this)}w(e,"xml.ExerBeastsBookUpExerBeastsBookSubVO",ue);var i=e.prototype;i.addChild=function(t){},i.initArr=function(){if(!this.upStarAttrsArr){this.upStarAttrsArr=new P,this.upStepAttrsArr=new P,this.reinfAttrsArr=new P;var t=this.upStarAttrs.split("|"),e=[];for(var i in t)e=t[i].split(","),this.upStarAttrsArr.set(e[0],e[1]);var s=this.upStepAttrs.split("|");for(var i in s)e=s[i].split(","),this.upStepAttrsArr.set(e[0],e[1]);var n=this.reinfAttrs.split("|");for(var i in n)e=n[i].split(","),this.reinfAttrsArr.set(e[0],e[1])}},I(0,i,"attrArr",function(){return["reinfAttrs","reinfMaterial","step","upStarAttrs","upStarMaterial","upStepAttrs","upStepMaterial"]})}(),function(t){function e(){this.quality=0,this.ExerBeastsBookUpExerBeastsBookSubArr=null,e.__super.call(this)}w(e,"xml.ExerBeastsBookUpVO",ue);var i=e.prototype;i.addChild=function(t){t instanceof xml.ExerBeastsBookUpExerBeastsBookSubVO&&(this.ExerBeastsBookUpExerBeastsBookSubArr=this.ExerBeastsBookUpExerBeastsBookSubArr||[],this.ExerBeastsBookUpExerBeastsBookSubArr.push(t))},I(0,i,"attrArr",function(){return["quality"]})}(),function(t){function e(){this.cards=null,this.maxReinf=0,this.maxStar=0,this.maxStep=0,e.__super.call(this)}w(e,"xml.ExerBeastsBookVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["cards","maxReinf","maxStar","maxStep"]})}(),function(t){function e(){this.oneBox=0,this.oneCost=0,this.rewards=null,this.tenBox=0,this.tenCost=0,this.useItem=0,this._rewardDatas=null,e.__super.call(this)}w(e,"xml.ExerBeastsLotteryVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"rewardDatas",function(){if(null==this._rewardDatas){this._rewardDatas=[];var t=this.rewards.split("|"),e=[];for(var i in t)e=t[i].split(","),this._rewardDatas.push([parseInt(e[0]),parseInt(e[1]),parseInt(e[2])])}return this._rewardDatas}),I(0,i,"attrArr",function(){return["oneBox","oneCost","rewards","tenBox","tenCost","useItem"]})}(),function(t){function e(){this.bg=null,this.desc=null,this.exp=NaN,this.goods=null,this.goods1=null,this.id=NaN,this.name=null,this.color=NaN,this.descArr=null,this.goodsArr=null,this.goods1Arr=null,this._allGoods=null,e.__super.call(this)}w(e,"xml.ExploreVO",ue);var i=e.prototype;i.getDesc=function(){return null==this.descArr&&(this.descArr=this.desc.split("|")),this.descArr},i.getMustGet=function(){if(null==this.goodsArr){this.goodsArr=this.goods.split("|");for(var t=0;t<this.goodsArr.length;t++){var e=new Object;e.className="p_kv";var i=this.goodsArr[t].split(",");e.id=parseInt(i[0]),e.val=parseInt(i[1]),this.goodsArr[t]=e}}return this.goodsArr},i.getMaybeGet=function(){if(null==this.goods1Arr){this.goods1Arr=this.goods1.split("|");for(var t=0;t<this.goods1Arr.length;t++){var e=new Object;e.className="p_kv";var i=this.goods1Arr[t].split(",");e.id=parseInt(i[0]),e.val=parseInt(i[1]),this.goods1Arr[t]=e}}return this.goods1Arr},i.addChild=function(t){},I(0,i,"allCanGet",function(){return this._allGoods||(this._allGoods=this.getMustGet().concat(this.getMaybeGet())),this._allGoods}),I(0,i,"attrArr",function(){return["bg","color","desc","exp","goods","goods1","id","name"]})}(),function(t){function e(){this.clothIds=null,this.weaponIds=null,this.cloths=null,this.weapons=null,e.__super.call(this)}w(e,"xml.FashionShowVO",ue);var i=e.prototype;i.getCloths=function(){if(null==this.cloths){var t;this.cloths=[],this.cloths=this.clothIds.split(",");for(var e=0;e<this.cloths.length;e++){var i=this.cloths[e];(t=new Object).className="p_kv",t.id=parseInt(i.split("|")[0]),t.val=parseInt(i.split("|")[1]),this.cloths[e]=t}}return this.cloths},i.getWeapons=function(){if(null==this.weapons){var t;this.weapons=[],this.weapons=this.weaponIds.split(",");for(var e=0;e<this.weapons.length;e++){var i=this.weapons[e];(t=new Object).className="p_kv",t.id=parseInt(i.split("|")[0]),t.val=parseInt(i.split("|")[1]),this.weapons[e]=t}}return this.weapons},i.addChild=function(t){},I(0,i,"attrArr",function(){return["clothIds","weaponIds"]})}(),function(t){function e(){this.goalId=0,this.need=null,this.cop=0,this._needs=null,e.__super.call(this)}w(e,"xml.FashionTarVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"needs",function(){if(!this._needs){this._needs=[],this._needs=this.need.split("|");for(var t=0;t<this._needs.length;t++){var e=this._needs[t].split(","),i=new Object;i.className="p_kv",i.id=parseInt(e[0]),i.val=parseInt(e[1]),this._needs[t]=i}}return this._needs}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["cop","goalId","need"]}),e._allProperty=null}(),function(t){function e(){this.rewards=null,this.timeLimit=NaN,this.timeLimitWE=NaN,this.visitLimit=NaN,this._rewards=null,e.__super.call(this)}w(e,"xml.FcmBaseVO",ue);var i=e.prototype;i.addChild=function(t){},i.getRewards=function(){if(!this._rewards){this._rewards=[];for(var t=this.rewards.split(","),e=0;e<t.length;e++){var i=t[e].split("#");this._rewards.push([parseInt(i[0]),parseInt(i[1])])}}return this._rewards},I(0,i,"attrArr",function(){return["rewards","timeLimit","timeLimitWE","visitLimit"]})}(),function(t){function e(){this.award1=null,this.award2=null,this.award3=null,this.award4=null,this.id=0,this.imgBg=null,this.title=null,this.state=0,this._awardArr1=null,this._awardArr2=null,this._awardArr3=null,this._awardArr4=null,e.__super.call(this)}w(e,"xml.FirstChargeVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"awardArr1",function(){if(!this._awardArr1){this._awardArr1=[];for(var t=this.award1.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_act_goods",s.type_id=parseInt(i[0]),s.num=parseInt(i[1]),s.reserve=parseInt(i[2]),this._awardArr1.push(s)}}return this._awardArr1}),I(0,i,"awardArr2",function(){if(!this._awardArr2){this._awardArr2=[];for(var t=this.award2.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_act_goods",s.type_id=parseInt(i[0]),s.num=parseInt(i[1]),s.reserve=parseInt(i[2]),this._awardArr2.push(s)}}return this._awardArr2}),I(0,i,"awardArr3",function(){if(!this._awardArr3){this._awardArr3=[];for(var t=this.award3.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_act_goods",s.type_id=parseInt(i[0]),s.num=parseInt(i[1]),s.reserve=parseInt(i[2]),this._awardArr3.push(s)}}return this._awardArr3}),I(0,i,"awardArr4",function(){if(!this._awardArr4){this._awardArr4=[];for(var t=this.award4.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_act_goods",s.type_id=parseInt(i[0]),s.num=parseInt(i[1]),s.reserve=parseInt(i[2]),this._awardArr4.push(s)}}return this._awardArr4}),I(0,i,"attrArr",function(){return["award1","award2","award3","award4","id","imgBg","title"]})}(),function(t){function e(){this.attrs=null,this.ccost=0,this.footId=0,this.lv=0,this._attrs=null,e.__super.call(this)}w(e,"xml.FootPrintChangeVO",ue);var i=e.prototype;i.addChild=function(t){},i.getAttrs=function(){return this._attrs||(this._attrs=W.parseAttrToArr(this.attrs,",","|",!0)),this._attrs},I(0,i,"attrArr",function(){return["attrs","ccost","footId","lv"]})}(),function(t){function e(){this.attrs=null,this.footId=0,this.lv=0,this.pcost=0,this._attrs=null,e.__super.call(this)}w(e,"xml.FootPrintPurifyVO",ue);var i=e.prototype;i.addChild=function(t){},i.getAttrs=function(){return this._attrs||(this._attrs=W.parseAttrToArr(this.attrs,",","|",!0)),this._attrs},I(0,i,"attrArr",function(){return["attrs","footId","lv","pcost"]})}(),function(t){function e(){this.color=0,this.desc=null,this.effectUrl=null,this.id=0,this.itemId=0,this.type=0,e.__super.call(this)}w(e,"xml.FootPrintVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["color","desc","effectUrl","id","itemId"]})}(),function(t){function e(){this.conditionCreateDay=0,this.conditionMonthDay=null,this.id=null,e.__super.call(this)}w(e,"xml.ForeverBuyVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["conditionCreateDay","conditionMonthDay","id"]}),e._allProperty=null}(),function(t){function e(){this.desc=null,this.id=NaN,this.name=null,this.num=NaN,this.pos=null,this.pow=NaN,this.pre=null,this.sp=NaN,this._descArr=null,e.__super.call(this)}w(e,"xml.GodHoodEquipPtVO",ue);var i=e.prototype;i.getDesc=function(t,e){var i,s="",n=0<e?"#ffe0cf":"#6d6d6d";if("1"==this.desc[0])for(var o=1;o<this.descArr.length;o++){i=this.descArr[o].split(",");var a=0<e?parseInt(i[1])*e:parseInt(i[1]);s+=Z.font(W.getName(parseInt(i[0]))+"+"+a,n,24),0<e&&e<this.num&&(s+=Z.font("(下级+"+parseInt(i[1])*(e+1)+")","#96f254",24)),s+="<br/>"}else"2"==this.desc[0]&&(s=(i=this.descArr[t].split(","))[0],1<i.length&&(a=0<e?parseInt(i[1])*e:parseInt(i[1]),s=s.replace("~",a+"")),s=Z.font(s,n,24));return s},i.addChild=function(t){},I(0,i,"descArr",function(){return null==this._descArr&&(this._descArr=this.desc.split("|")),this._descArr}),I(0,i,"attrArr",function(){return["desc","id","name","num","pos","pow","pre","sp"]})}(),function(t){function e(){this.id=NaN,this.needStage=NaN,this.totalLV=0,this.GodHoodEquipPtArr=null,e.__super.call(this)}w(e,"xml.GodHoodEquipVO",ue);var i=e.prototype;i.addChild=function(t){t instanceof xml.GodHoodEquipPtVO&&(this.GodHoodEquipPtArr=this.GodHoodEquipPtArr||[],this.GodHoodEquipPtArr.push(t),this.totalLV+=t.num)},I(0,i,"attrArr",function(){return["id","needStage"]})}(),function(t){function e(){this.attr=null,this.getT=null,this.hook=NaN,this.lv=NaN,this.name=null,this.need=NaN,this.fightMap=NaN,this.attrStr="",this.getTStr="",e.__super.call(this)}w(e,"xml.GodHoodVO",ue);var i=e.prototype;i.getAttr=function(){if(""==this.attrStr)for(var t=this.attr.split(","),e=t.length,i=0;i<e;i++)this.attrStr+=W.getAttrStrByArr(t[i].split("|"),"","：","\n");return this.attrStr},i.getGets=function(){if(""==this.getTStr)for(var t=this.getT.split("|"),e=t.length,i=0;i<e;i++){t[i]=t[i].split(",");for(var s=Zn.getHoodGetByID(t[i][0]).descArr,n=0;n<s.length-1;n++)this.getTStr+=s[n]+t[i][n+1];this.getTStr+=s[n]+"<br>"}return this.getTStr},i.getHasEquip=function(){var t=this.getT.split("|");return"4"==t[t.length-1].split(",")[0]},i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["attr","fightMap","getT","hook","lv","name","need"]}),e._allProperty=null}(),function(t){function e(){this.beastsAnimal=null,this.fashion=null,this.godEquip=null,this.taliman=null,this.title=null,this.beastsAnimalArrs=null,this.godEquipArrs=null,this.fashionArrs=null,this.titleArrs=null,this.talimanArrs=null,e.__super.call(this)}w(e,"xml.GoodsConversionVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"beastsAnimalArr",function(){if(!this.beastsAnimalArrs){this.beastsAnimalArrs=[];for(var t,e,i=this.beastsAnimal.split("|"),s=0;s<i.length;s++)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this.beastsAnimalArrs.push(e)}return this.beastsAnimalArrs}),I(0,i,"godEquipArr",function(){if(!this.godEquipArrs){this.godEquipArrs=[];for(var t,e,i=this.godEquip.split("|"),s=0;s<i.length;s++)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this.godEquipArrs.push(e)}return this.godEquipArrs}),I(0,i,"talimanArr",function(){if(!this.talimanArrs){this.talimanArrs=[];for(var t,e,i=this.taliman.split("|"),s=0;s<i.length;s++)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this.talimanArrs.push(e)}return this.talimanArrs}),I(0,i,"fashionArr",function(){if(!this.fashionArrs){this.fashionArrs=[];for(var t,e,i=this.fashion.split("|"),s=0;s<i.length;s++)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this.fashionArrs.push(e)}return this.fashionArrs}),I(0,i,"titleArr",function(){if(!this.titleArrs){this.titleArrs=[];for(var t,e,i=this.title.split("|"),s=0;s<i.length;s++)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this.titleArrs.push(e)}return this.titleArrs}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["beastsAnimal","fashion","godEquip","taliman","title"]}),e._allProperty=null}(),function(t){function e(){this.actionType=NaN,this.handleParm=null,this.label=null,this.link_id=NaN,this.msg=null,this.state=NaN,this._leftLables=null,e.__super.call(this)}w(e,"xml.ItemLimitTypeVO",ue);var i=e.prototype;i.addChild=function(t){},i.showAlertVO=function(){var t=new Ee;t.msg=this.msg,this._leftLables=this._leftLables||this.label.split(","),t.yesLabel=this._leftLables[0],this._leftLables.length<=1?t.showRight=!1:(t.showRight=!0,t.noLabel=this._leftLables[1]),this.link_id&&30001!=this.link_id?(t.yesCaller=this,t.yesFun=this.linktoActView,t.yesArgs=[this.handleParm,this.link_id]):(t.yesCaller=me,t.yesFun=me.linkTo,t.yesArgs=[this.handleParm]),EF.showVO(t)},i.linktoActView=function(t,e){T.dispatch("OPEN_ACT_SPC_PANEL",t,e)},I(0,i,"attrArr",function(){return["actionType","handleParm","label","link_id","msg","state"]})}(),function(t){function e(){this.id=NaN,this.ItemLimitTypeDic=null,e.__super.call(this)}w(e,"xml.ItemLimitVO",ue);var i=e.prototype;i.addChild=function(t){t instanceof xml.ItemLimitTypeVO&&(this.ItemLimitTypeDic=this.ItemLimitTypeDic||new Object,this.ItemLimitTypeDic[t.state]=t)},I(0,i,"attrArr",function(){return["id"]})}(),function(t){function e(){this.desc=null,this.id=0,this.linkId=0,this.openLv=null,this.point=0,this.totalTime=null,e.__super.call(this)}w(e,"xml.JinliItemVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["desc","id","linkId","openLv","point","totalTime"]}),e._allProperty=null}(),function(t){function e(){this.rewardInterval=null,this.type=0,e.__super.call(this)}w(e,"xml.JinliRewardVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["rewardInterval","type"]}),e._allProperty=null}(),function(t){function e(){this.awardstr=null,this.day=NaN,this.id=NaN,this.img=NaN,this._awards=null,e.__super.call(this)}w(e,"xml.LogVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"awards",function(){if(!this._awards){this._awards=[];for(var t,e=this.awardstr.split("|"),i=0;i<e.length;i++){(t=new Object).className="p_act_goods";var s=e[i].split(",");t.type_id=s[0],t.num=s[1],t.reserve=s[2],this._awards.push(t)}}return this._awards}),I(0,i,"attrArr",function(){return["awardstr","day","id","img"]})}(),function(t){function e(){this.copyName=null,this.itemBg=null,this.mapID=NaN,this.openLv=null,this.reward=null,this._rewardArr=null,this._limitData=null,e.__super.call(this)}w(e,"xml.LoveCopyVO",ue);var i=e.prototype;i.isOpen=function(){var t=this.getLimitGrowLvl(),e=this.getLimitLvl();return pe.myLevel>=e&&pe.myRegrow>=t},i.getLimitLvl=function(){return this._limitData||(this._limitData=this.openLv.split(",")),parseInt(this._limitData[1])},i.getLimitGrowLvl=function(){return this._limitData||(this._limitData=this.openLv.split(",")),parseInt(this._limitData[0])},i.addChild=function(t){},I(0,i,"attrArr",function(){return["copyName","itemBg","mapID","openLv","reward"]}),I(0,i,"rewardArr",function(){return this._rewardArr||(this._rewardArr=this.reward.split(",")),this._rewardArr})}(),function(t){function e(){this.mapID=NaN,this.reward=null,this.rwArr=null,e.__super.call(this)}w(e,"xml.MapReVO",ue);var i=e.prototype;i.getReward=function(){if(!this.rwArr){var t,e;this.rwArr=this.reward.split("|");for(var i=0;i<this.rwArr.length;i++)(t=new Object).className="p_kv",e=this.rwArr[i].split(","),t.id=parseInt(e[0]),t.val=parseInt(e[1]),this.rwArr[i]=t}return this.rwArr},i.addChild=function(t){},I(0,i,"attrArr",function(){return["mapID","reward"]})}(),function(t){function e(){this.copyName=null,this.itemBg=null,this.mapID=0,this.needMoney=0,this.openLv=null,this.reward=null,this._rewardArr=null,this._openArr=null,e.__super.call(this)}w(e,"xml.MaterialsCopyVO",ue);var i=e.prototype;i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.isShowRegrowLv=function(){return 0<this.openArr[0]},i.addChild=function(t){},I(0,i,"attrArr",function(){return["copyName","itemBg","mapID","needMoney","openLv","reward"]}),I(0,i,"rewardArr",function(){return this._rewardArr||this.parseToSimpleIntArr("_rewardArr",this.reward,"|"),this._rewardArr}),I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv),this._openArr})}(),function(t){function e(){this.att=null,this.color=NaN,this.eff=null,this.pos=NaN,this.typeId=NaN,this.attrs=null,e.__super.call(this)}w(e,"xml.PetSoulVO",ue);var i=e.prototype;i.initAttr=function(){if(null==this.attrs){this.attrs=[],this.attrs=this.att.split("|");for(var t=0;t<this.attrs.length;t++){var e=this.attrs[t];this.attrs[t]=[],this.attrs[t][0]=parseFloat(e.split(",")[0]),this.attrs[t][1]=parseFloat(e.split(",")[1]),this.attrs[t][2]=parseFloat(e.split(",")[2])}}},i.getAttrByLv=function(t,e){void 0===e&&(e=!0),this.initAttr();for(var i=e?"\n":" ",s="",n=0;n<this.attrs.length;n++){var o=this.attrs[n][1]*t+this.attrs[n][2];s+=W.getName(parseInt(this.attrs[n][0]))+"+"+o+i}return s},i.getPowerByLv=function(t){this.initAttr();for(var e=0,i=0;i<this.attrs.length;i++){var s=this.attrs[i][1]*t+this.attrs[i][2];e+=W.getAttrPower(parseInt(this.attrs[i][0]),s)}return e},i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["att","color","eff","pos","typeId"]}),e._allProperty=null}(),function(t){function e(){this.name=null,this.openLv=null,this.rewards=null,this.viewType=0,this.times=0,this.mapId=0,this._openArr=null,e.__super.call(this)}w(e,"xml.PlaysItemVO",ue);var i=e.prototype;i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.isShowRegrowLv=function(){return 0<parseInt(this.openArr[0])},i.addChild=function(t){},I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv,"|"),this._openArr}),I(0,i,"attrArr",function(){return["mapId","name","openLv","rewards","times","viewType"]})}(),function(t){function n(){this.color=0,this.desc=null,this.goal=0,this.lv=0,this.power=0,this.index=0,this._itemStr=null,this._attrs=null,this.normalStrArr=null,this.spcStrArr=null,n.__super.call(this)}w(n,"xml.PotentialLvVO",ue);var e=n.prototype;e.getEffStrArr=function(){var t;if(!this.normalStrArr||!this.spcStrArr)for(var e in this.normalStrArr=[],this.spcStrArr=[],this.attrs){t=this.attrs[e];var i=W.getName(parseInt(t[0])),s=t[1];-1!=n.SPC_EFF_INDEX_ARR.indexOf(t[0])?this.spcStrArr.push({name:i,val:s}):this.normalStrArr.push({name:i,val:s})}},e.addChild=function(t){},I(0,e,"attrs",function(){return this._attrs||(this._attrs=W.parseAttrToArr(this.desc)),this._attrs}),I(0,e,"attrArr",function(){return["color","desc","goal","lv","power"]}),I(0,e,"itemStr",function(){var t;if(!this._itemStr||""==this._itemStr)for(var e in this._itemStr="",this.attrs)"20"==(t=this.attrs[e])[0]||"41"==t[0]||"53"==t[0]?this._itemStr+="额外增加"+t[1]+W.getName(parseInt(t[0]))+"\n":this._itemStr+=W.getAttrStrByArr(t,""," +","\n");return this._itemStr}),_(n,["SPC_EFF_INDEX_ARR",function(){return this.SPC_EFF_INDEX_ARR=["20","41","53","55","54","37"]}])}(),function(t){function e(){this.pos=0,this.title=null,this.PotentialLvArr=null,this._titleArr=null,e.__super.call(this)}w(e,"xml.PotentialVO",ue);var i=e.prototype;i.getTitleArr=function(){return this._titleArr||(this._titleArr=this.title.split("|")),this._titleArr},i.addChild=function(t){t instanceof xml.PotentialLvVO&&(this.PotentialLvArr=this.PotentialLvArr||[],this.PotentialLvArr.push(t),t.index=this.PotentialLvArr.length)},I(0,i,"attrArr",function(){return["pos","title"]})}(),function(t){function e(){this.award=null,this.con=null,this.ord=0,this.sub=0,this.linkid=0,this.desc1=null,this.desc2=null,this.functionID=0,this._awards=null,this._cons=null,e.__super.call(this)}w(e,"xml.PreviewVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"awards",function(){if(null==this._awards)if(""!=this.award){this._awards=this.award.split("|");for(var t=0;t<this._awards.length;t++){var e=this._awards[t].split(",");e[0]=parseInt(e[0]),e[1]=parseInt(e[1]),this._awards[t]=e}}else this._awards=[];return this._awards}),I(0,i,"cons",function(){if(null==this._cons){this._cons=this.con.split("|");for(var t=0;t<this._cons.length;t++){for(var e=this._cons[t].split("*"),i=0;i<e.length;i++){var s=e[i].split(","),n=new Object;n.className="p_kv",n.id=parseInt(s[0]),n.val=parseInt(s[1]),e[i]=n}this._cons[t]=e}}return this._cons}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["award","con","desc1","desc2","functionID","linkid","ord","sub"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this.level=0,this.trans=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.QqyxdtDailyGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index","level","trans"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this.level=0,this.trans=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.QqyxdtGrowUpGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index","level","trans"]}),e._allProperty=null}(),function(t){function e(){this.gift=null,this.id=0,this.index=0,this.level=0,this.trans=0,this._rewardArr=null,e.__super.call(this)}w(e,"xml.QqyxdtNewGuideGiftVO",ue);var i=e.prototype;i.addChild=function(t){},i.getReward=function(){if(this._rewardArr&&0<this._rewardArr.length)return this._rewardArr;this._rewardArr=this._rewardArr||[];for(var t=this.gift.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");this._rewardArr.push({itemType:Number(s[0])||0,itemNum:Number(s[1])||0})}return this._rewardArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["gift","id","index","level","trans"]}),e._allProperty=null}(),function(t){function e(){this.needNum=NaN,this.subAttr=null,this.val=NaN,this.attr=null,this.desc=null,this.power=NaN,this._subAttrs=null,e.__super.call(this)}w(e,"xml.RedtypeLvVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"subAttrs",function(){if(null==this._subAttrs){var t;this._subAttrs=this.subAttr.split("|");for(var e=0;e<this._subAttrs.length;e++)(t=new Object).className="p_kv",this._subAttrs[e]=this._subAttrs[e].split(","),t.id=parseInt(this._subAttrs[e][0]),t.val=parseInt(this._subAttrs[e][1]),this._subAttrs[e]=t}return this._subAttrs}),I(0,i,"attrArr",function(){return["attr","desc","needNum","power","subAttr","val"]})}(),function(t){function e(){this.id=NaN,this.RedtypeLvArr=null,e.__super.call(this)}w(e,"xml.RedtypeVO",ue);var i=e.prototype;i.addChild=function(t){t instanceof xml.RedtypeLvVO&&(this.RedtypeLvArr=this.RedtypeLvArr||[],this.RedtypeLvArr.push(t))},I(0,i,"attrArr",function(){return["id"]})}(),function(t){function e(){this.fire=null,this.maxLv=0,this._fireArr=null,e.__super.call(this)}w(e,"xml.RefineSoulVO",ue);var i=e.prototype;i.getFireSource=function(t){return this._fireArr||(this._fireArr=W.parseAttrObj(this.fire,",","|")),this._fireArr[t]},i.addChild=function(t){},I(0,i,"attrArr",function(){return["fire","maxLv"]})}(),function(t){function i(){this.addAttr=null,this.lv=null,this.material=null,this.putWhere=null,this.type=null,this._tempArr=null,this._goalLv=0,this._curLv=0,this._parseAttrArr=null,this._parseMaterialArr=null,i.__super.call(this)}w(i,"xml.RefineVO",ue);var e=i.prototype;e.getAttrs=function(t){if(void 0===t&&(t=0),t=0==t?this._curLv:t,this.isLvIn(t)){for(var e=[],i=0;i<this.parseAttrArr.length;i++)e.push([this.parseAttrArr[i][0],Math.floor(this.parseAttrArr[i][1]+this.parseAttrArr[i][2]*(t-1)+(t-1)*t/2*(this.parseAttrArr[i][3]/1e4))]);return e}return null},e.getNeeds=function(t){if(void 0===t&&(t=0),t=0==t?this._goalLv:t,this.isLvIn(t)){var e=this.getDiffParseNeedFun().apply(this,[t]);return[this.parseMaterialArr[0],e]}return null},e.getDiffParseNeedFun=function(){switch(parseInt(this.type)){case 1:case 2:return this.diffNeedNumFun_material;case 3:return this.diffNeedNumFun_score;default:return null}},e.diffNeedNumFun_material=function(t){return Math.floor(Math.pow(t/this.parseMaterialArr[1]*1e4,2)*this.parseMaterialArr[2]+this.parseMaterialArr[3])},e.diffNeedNumFun_score=function(t){return Math.ceil(t/this.parseMaterialArr[1])*this.parseMaterialArr[2]},e.isLvIn=function(t){return this._tempArr=this.lv.split(","),this._tempArr[0]<=t&&this._tempArr[1]>=t},e.copy=function(){var t=new i;for(var e in this)t[e]=this[e];return t},e.addChild=function(t){},I(0,e,"parseMaterialArr",function(){return this._parseMaterialArr||this.parseToSimpleIntArr("_parseMaterialArr",this.material,"|"),this._parseMaterialArr}),I(0,e,"goalLv",null,function(t){this._goalLv=t}),I(0,e,"curLv",function(){return this._curLv},function(t){this.isLvIn(t)&&(this._curLv=t,this.goalLv=t+1)}),I(0,e,"maxLv",function(){return this._tempArr=this.lv.split(","),this._tempArr[1]}),I(0,e,"parseAttrArr",function(){if(!this._parseAttrArr){this._parseAttrArr=W.parseAttrToArr(this.addAttr,",","|");for(var t=0;t<this._parseAttrArr.length;t++)for(var e=0;e<this._parseAttrArr[t].length;e++)this._parseAttrArr[t][e]=parseInt(this._parseAttrArr[t][e])}return this._parseAttrArr}),I(0,e,"attrArr",function(){return i._allProperty=i._allProperty||["addAttr","lv","material","putWhere","type"]}),i._allProperty=null}(),function(t){function e(){this.index=0,this.name=null,this.reward=null,this.spcReward=null,this._rankRewards=null,this._spcRewards=null,e.__super.call(this)}w(e,"xml.RegrowKillRankRewardVO",ue);var i=e.prototype;i.getRankRewards=function(){return this._rankRewards||(this._rankRewards=W.parseAttrToArr(this.reward,",","|")),this._rankRewards},i.getSpcRewards=function(){return this._spcRewards||(this._spcRewards=this.spcReward.split("|")),this._spcRewards},i.addChild=function(t){},I(0,i,"attrArr",function(){return["index","name","reward","spcReward"]})}(),function(t){function e(){this.buyFifty=NaN,this.buyOne=NaN,this.buyTen=NaN,this.openLv=null,this.upgradeScoreId=NaN,this.runeMaxLevel=NaN,this.coreMaxLevel=NaN,this._openArr=null,e.__super.call(this)}w(e,"xml.RuneBaseVO",ue);var i=e.prototype;i.isOpen=function(){return this.isShowRegrowLv()?pe.myRegrow>=this.openArr[0]:pe.myLevel>=this.openArr[1]},i.getOpenRegrow=function(){return this.openArr[0]},i.getOpenLv=function(){return this.openArr[1]},i.isShowRegrowLv=function(){return 0<this.openArr[0]},i.addChild=function(t){},I(0,i,"openStr",function(){return this.isShowRegrowLv()?this.getOpenRegrow()+"转":this.getOpenLv()+"级"}),I(0,i,"openArr",function(){return this._openArr||this.parseToSimpleIntArr("_openArr",this.openLv),this._openArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["buyFifty","buyOne","buyTen","coreMaxLevel","openLv","runeMaxLevel","upgradeScoreId"]}),e._allProperty=null}(),function(t){function e(){this.category=0,this.cost=null,this.desc=null,this.id=0,this.lv=0,this.num=0,this.typeId=0,this.exchangeNums=0,this.showNum=0,this.discount=0,this._costArr=null,e.__super.call(this)}w(e,"xml.ShopTypeItemVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"costArr",function(){if(!this._costArr){this._costArr=[];for(var t,e=this.cost.split(","),i=0;i<e.length;i++){(t=new Object).className="p_kv";var s=e[i].split("|");t.id=parseInt(s[0]),t.val=parseInt(s[1]),this._costArr.push(t)}}return this._costArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["category","cost","desc","discount","id","lv","num","showNum","typeId"]}),e._allProperty=null}(),function(t){function e(){this.id=null,this.shopID=null,this.ShopTypeItemArr=null,e.__super.call(this)}w(e,"xml.ShopTypeVO",ue);var i=e.prototype;i.addChild=function(t){t instanceof xml.ShopTypeItemVO&&(this.ShopTypeItemArr=this.ShopTypeItemArr||[],this.ShopTypeItemArr.push(t))},I(0,i,"attrArr",function(){return["id","shopID"]})}(),function(t){function e(){this.attr=null,this.desc=null,this.goodsID=0,this.id=0,this.level=0,this.name=null,this.num=null,this.num1=0,this.num2=0,this.arr=null,e.__super.call(this)}w(e,"xml.SpEquipVO",ue);var i=e.prototype;i.getAttrByLv=function(t){this.initArr();for(var e="",i=NaN,s=0;s<this.arr.length;s++)0==t?i=0:(i=parseFloat(this.arr[s][1])*t+parseFloat(this.arr[s][2]),i=Math.floor(10*i)/10),41==parseInt(this.arr[s][0])||42==parseInt(this.arr[s][0])||52==parseInt(this.arr[s][0])||53==parseInt(this.arr[0])?e+=W.getAttrStrByNum(parseInt(this.arr[s][0]),i,"","：","％\n"):60==parseInt(this.arr[s][0])||(e+=W.getAttrStrByNum(parseInt(this.arr[s][0]),i,"","：","\n"));return e},i.getPowerByLv=function(t){this.initArr();for(var e=0,i=NaN,s=0;s<this.arr.length;s++)i=0==t?0:parseFloat(this.arr[s][1])*t+parseFloat(this.arr[s][2]),e+=W.getAttrPower(parseInt(this.arr[s][0]),i);return e},i.initArr=function(){if(!this.arr){this.arr=this.attr.split("|");for(var t=0;t<this.arr.length;t++)this.arr[t]=this.arr[t].split(",")}},i.initNum=function(){if(0==this.num1&&0==this.num2){var t=this.num.split(",");this.num1=parseInt(t[0]),this.num2=parseInt(t[1])}},i.getNeedByLv=function(t){return this.initNum(),this.num1*t+this.num2},i.addChild=function(t){},I(0,i,"attrArr",function(){return["attr","desc","goodsID","id","level","name","num"]})}(),function(t){function e(){this.id=null,this.level=0,this.num=null,this._reObj=null,e.__super.call(this)}w(e,"xml.SpiritreAdConVO",ue);var i=e.prototype;i.getObj=function(){if(!this._reObj){this._reObj={};var t=this.id.split("|");this._reObj.ids=[t[0],t[1]],t=this.num.split("|"),this._reObj.nums=[t[0],t[1]]}return this._reObj},i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","level","num"]})}(),function(t){function e(){this.id=0,this.val=0,e.__super.call(this)}w(e,"xml.SpiritreAttXVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","val"]})}(),function(t){function e(){this.id=0,this.level=0,this.num=0,e.__super.call(this)}w(e,"xml.SpiritreDecompVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","level","num"]})}(),function(t){function e(){this.desc=null,this.lv=0,this.power=0,this.suitId=0,e.__super.call(this)}w(e,"xml.SpiritreDesVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["desc","lv","power","suitId"]})}(),function(t){function e(){this.id=0,this.suitname=null,this.suittime=null,e.__super.call(this)}w(e,"xml.SpiritreNameVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","suitname","suittime"]})}(),function(t){function e(){this.id=0,this.level=0,this.num=0,e.__super.call(this)}w(e,"xml.SpiritreQuconVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["id","level","num"]})}(),function(t){function e(){this.value=null,e.__super.call(this)}w(e,"xml.SpiritreQuProVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["value"]})}(),function(t){function e(){this.att=null,this.id=0,this.pos=0,e.__super.call(this)}w(e,"xml.SpiritreQuVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["att","id","pos"]})}(),function(t){function e(){this.desc=null,this.power=0,this.suitId=0,e.__super.call(this)}w(e,"xml.SpiritreSuitVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["desc","power","suitId"]})}(),function(t){function e(){this.att=null,this.color=null,this.id=0,this.level=0,this.name=null,this.pos=0,this.slot=null,this.suitId=0,e.__super.call(this)}w(e,"xml.SpiritreVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["att","color","id","level","name","pos","slot","suitId"]})}(),function(t){function e(){this.attrVals=null,this.id=0,this.name=null,this.quality=0,this._attrValList=null,e.__super.call(this)}w(e,"xml.StrangeFireStoneVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return["attrVals","id","name","quality"]}),I(0,i,"attrValList",function(){if(null==this._attrValList){this._attrValList=[];for(var t=this.attrVals.split(","),e=An.baseInfo.comAttrKeyList,i=0;i<e.length;i++){var s=e[i],n=t[i];this._attrValList.push({key:parseInt(s),val:parseInt(n)})}}return this._attrValList})}(),function(t){function e(){this.count=0,this.effStr=null,this.part=null,this.suitID=NaN,this.suitName=null,this._partArr=null,this._effArr=null,e.__super.call(this)}w(e,"xml.SuitVO",ue);var i=e.prototype;i.addChild=function(t){},i.getSuitPartArr=function(){if(this.suitID<=-1)return null;if(!this._partArr){this._partArr=[];for(var t=this.part.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_kv",s.id=parseInt(i[0]),s.val=parseInt(i[1]),this._partArr.push(s)}}return this._partArr},i.getEffNums=function(){if(this.suitID<=-1)return null;if(!this._effArr){this._effArr=[];for(var t=this.effStr.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_kv",s.id=parseInt(i[0]),s.val=parseInt(i[1]),this._effArr.push(s)}}return this._effArr},i.getSuitFashionNum=function(){var t,e=0;for(var i in this.getEffNums(),this._effArr)9==(t=this._effArr[i]).id&&(e+=t.val);return e},i.isUnOpenSuitShow=function(){return this.suitID<=-1},I(0,i,"attrArr",function(){return["count","effStr","part","suitID","suitName"]}),e._allProperty=null,_(e,["EFF_CH_ZH",function(){return this.EFF_CH_ZH=["无","攻击","生命","物防","法防","暴击","韧性","伤害加成","伤害减免","华丽度"]}])}(),function(t){function e(){this.copyName=null,this.itemBg=null,this.mapID=NaN,this.openLv=NaN,this.reward=null,this._rewardArr=null,e.__super.call(this)}w(e,"xml.TeamCopyVO",ue);var i=e.prototype;i.isOpen=function(){return pe.myEquipLevel>=this.openLv},i.getLimitGrowLvl=function(){return this.openLv},i.addChild=function(t){},I(0,i,"attrArr",function(){return["copyName","itemBg","mapID","openLv","reward"]}),I(0,i,"rewardArr",function(){return this._rewardArr||this.parseToSimpleIntArr("_rewardArr",this.reward,"|"),this._rewardArr})}(),function(t){function e(){this.award=null,this.id=NaN,this.posArr=null,this.awards=null,this._posDetailDic=null,e.__super.call(this)}w(e,"xml.TowerRoundVO",ue);var i=e.prototype;i.getTowerAward=function(){if(null==this.awards){var t;this.awards=this.award.split("|");for(var e=0;e<this.awards.length;e++)this.awards[e]=this.awards[e].split(","),(t=new Object).className="p_kv",t.id=parseInt(this.awards[e][0]),t.val=parseInt(this.awards[e][1]),this.awards[e]=t}return this.awards},i.getPosDetailDic=function(){return this.initPos(),this._posDetailDic},i.initPos=function(){if(null==this._posDetailDic){this._posDetailDic=new Object;var t=this.posArr.split("|");for(var e in t){var i=t[e].split(","),s=new Object;s.className="p_kv",s.id=i[1],s.val=i[2],this._posDetailDic[i[0]]=s}}},i.getDetailByPos=function(t){return this.initPos(),this._posDetailDic.hasOwnProperty(t)?this._posDetailDic[t]:null},i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["award","id","posArr"]}),e._allProperty=null}(),function(t){function e(){this.id=NaN,this.maps=null,this.reward=NaN,this._mapsArr=null,this._mapsNameArr=null,e.__super.call(this)}w(e,"xml.TreasureEventVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"mapsArr",function(){return this._mapsArr||this.parseToSimpleIntArr("_mapsArr",this.maps),this._mapsArr}),I(0,i,"mapsNameArr",function(){if(!this._mapsNameArr){this._mapsNameArr=[];for(var t=this.mapsArr,e=0;e<t.length;e++)this._mapsNameArr[e]=Xo.getMapVOByID(t[e]).name}return this._mapsNameArr}),I(0,i,"attrArr",function(){return["id","maps","reward"]})}(),function(t){function e(){this.attrs=null,this.effurl=null,this.goods=null,this.power=0,this.goodsArr=null,this.attrArrs=null,e.__super.call(this)}w(e,"xml.VipGuideVO",ue);var i=e.prototype;i.getGoodID=function(t){return this.goodsArr||(this.goodsArr=this.goods.split(",")),this.goodsArr[t]},i.getAttrArrs=function(){return this.attrArrs||(this.attrArrs=W.parseAttrToArr3(this.attrs)),this.attrArrs},i.addChild=function(t){},I(0,i,"attrArr",function(){return["attrs","effurl","goods","power"]})}(),function(t){function e(){this.award=null,this.canTime=null,this.id=NaN,this.king=NaN,this.type=NaN,this._awards=null,e.__super.call(this)}w(e,"xml.WanbaGiftVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"awards",function(){if(null==this._awards){this._awards=this.award.split("|");for(var t=0;t<this._awards.length;t++){this._awards[t]=this._awards[t].split("|");var e=new Object;e.className="p_tkv",e.type=5,e.id=parseInt(this._awards[t][0]),e.val=parseInt(this._awards[t][1]),this._awards[t]=e}}return this._awards}),I(0,i,"attrArr",function(){return["award","canTime","id","king","type"]})}(),function(t){function e(){this.animPath=null,this.des=null,this.id=0,this.reward=null,this._rewardArr=null,this._effArr=null,e.__super.call(this)}w(e,"xml.WelfareDesVO",ue);var i=e.prototype;i.addChild=function(t){},i.initReward=function(){if(!this._rewardArr){this._rewardArr=[],this._effArr=[];for(var t=this.reward.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_tkv",s.type=parseInt(i[0]),s.id=parseInt(i[1]),s.val=parseInt(i[2]),this._effArr.push(parseInt(i[3])),this._rewardArr.push(s)}}},I(0,i,"giftArr",function(){return this.initReward(),this._rewardArr}),I(0,i,"effArr",function(){return this.initReward(),this._effArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["animPath","des","id","reward"]}),e._allProperty=null}(),function(t){function e(){this.day=0,this.gift=null,this.id=0,this.tabId=0,this._giftEffArr=null,this._giftArr=null,e.__super.call(this)}w(e,"xml.WelfareGiftVO",ue);var i=e.prototype;i.initGift=function(){if(!this._giftArr||!this._giftEffArr){this._giftArr=[],this._giftEffArr=[];for(var t=this.gift.split("|"),e=0;e<t.length;e++){var i=t[e].split(","),s=new Object;s.className="p_tkv",s.type=parseInt(i[0]),s.id=parseInt(i[1]),s.val=parseInt(i[2]),this._giftArr.push(s),this._giftEffArr.push(parseInt(i[3]))}}},i.addChild=function(t){},I(0,i,"giftArr",function(){return this.initGift(),this._giftArr}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["day","gift","id","tabId"]}),I(0,i,"giftEffArr",function(){return this.initGift(),this._giftEffArr}),e._allProperty=null}(),function(t){function e(){this.id=0,this.mapID=null,this.rewards=null,this.sectionName=null,this._rewards=null,this._mapIDArr=null,e.__super.call(this)}w(e,"xml.ZhuXianRoadBarrierVO",ue);var i=e.prototype;i.addChild=function(t){},i.getRewardArr=function(){if(this._rewards&&0<this._rewards.length)return this._rewards;this._rewards=[];for(var t=this.rewards.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|"),n=new Object;n.className="p_kv",n.id=parseInt(s[0]),n.val=parseInt(s[1]),this._rewards.push(n)}return this._rewards},i.getMapIdArr=function(){if(this._mapIDArr&&0<this._mapIDArr.length)return this._mapIDArr;this._mapIDArr=[];for(var t=this.mapID.split(","),e=0;e<t.length;e++){var i=t[e].split("|");this._mapIDArr.push([parseInt(i[0]),parseInt(i[1])])}return this._mapIDArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["id","mapID","rewards","sectionName"]}),e._allProperty=null}(),function(t){function e(){this.copyName=null,this.itemBg=null,this.openLv=null,this.reward=null,this.starLevel=null,this.sweepCost=0,this._rewardArr=null,this._limitData=null,this._starLevel=null,e.__super.call(this)}w(e,"xml.ZhuXianRoadCopyVO",ue);var i=e.prototype;i.isOpen=function(){var t=this.getLimitGrowLvl(),e=this.getLimitLvl();return pe.myLevel>=e&&pe.myRegrow>=t},i.getLimitLvl=function(){return this._limitData||(this._limitData=this.openLv.split(",")),parseInt(this._limitData[1])},i.getLimitGrowLvl=function(){return this._limitData||(this._limitData=this.openLv.split(",")),parseInt(this._limitData[0])},i.starLevelArr=function(){if(!this._starLevel){this._starLevel=[];for(var t=this.starLevel.split(","),e=0,i=t.length;e<i;e++){var s=t[e].split("|");s&&0<s.length&&this._starLevel.push({min:parseInt(s[0]),max:parseInt(s[1])})}}return this._starLevel||[{min:0,max:10},{min:11,max:20},{min:20,max:1800}]},i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["copyName","itemBg","openLv","reward","starLevel","sweepCost"]}),I(0,i,"rewardArr",function(){return this._rewardArr||(this._rewardArr=this.reward.split(",")),this._rewardArr}),e._allProperty=null}(),function(t){function e(){this.content1=null,this.content2=null,this.content3=null,this.title1=null,this.title2=null,this.title3=null,e.__super.call(this)}w(e,"xml.ZhuXianRoadRuleVO",ue);var i=e.prototype;i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["content1","content2","content3","title1","title2","title3"]}),e._allProperty=null}(),function(t){function e(){this.barriers=null,this.flagPos=null,this.id=0,this.mapUrl=null,this.sectionName=null,this._barrierArr=null,this._flagPosArr=null,e.__super.call(this)}w(e,"xml.ZhuXianRoadSectionVO",ue);var i=e.prototype;i.addChild=function(t){},i.barriersArr=function(){return this._barrierArr||this.parseToSimpleIntArr("_barrierArr",this.barriers,"|"),this._barrierArr},i.flagPosArr=function(){if(!this._flagPosArr){this._flagPosArr=[];for(var t=this.flagPos.split(","),e=0;e<t.length;e++){var i=t[e].split("|");this._flagPosArr.push({x:parseInt(i[0]),y:parseInt(i[1])})}}return this._flagPosArr},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["barriers","flagPos","id","mapUrl","sectionName"]}),e._allProperty=null}(),function(t){function e(){this.attr=null,this.category=0,this.type=0,this._basePow=0,e.__super.call(this)}w(e,"xml.EquipVO",Ir);var i=e.prototype;return i.addChild=function(t){},I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["attr","category","color","desc","id","level","name","path","price","title","type"]}),I(0,i,"basePow",function(){if(0==this._basePow){var t,e=W.parseAttrToArr(this.attr);for(var i in e)t=e[i],this._basePow+=W.getAttrPowerS(t[0],t[1])}return this._basePow}),e._allProperty=null,e}()),eh=(function(t){function e(){this.useType=0,this.product=null,this.img=null,this.specialTip=null,this.giftType=null,this.linkTo=null,this._products=null,e.__super.call(this)}w(e,"xml.GoodsVO",Ir);var i=e.prototype;i.dirUse=function(){return 1e3<=this.useType},i.oneTimeUseOne=function(){var t=Math.floor(this.useType/1e3);return 3==t||4==t},i.needShowRP=function(){var t=Math.floor(this.useType/1e3);return 1==t||3==t||5==t},i.addChild=function(t){},I(0,i,"products",function(){if(!this._products){var t;this._products=[];var e,i=this.product.split("|");for(var s in i)t=i[s].split(","),(e=new Co).typeId=t[0],e.num=t[1],e.effect=t[2],e.sex=t[3],e.category=t[4],this._products.push(e)}return this._products}),I(0,i,"type",function(){return"modules/act/discounts/giftType/"+this.giftType+".png"}),I(0,i,"attrArr",function(){return e._allProperty=e._allProperty||["color","desc","giftType","id","img","level","linkTo","name","pastTimeDesc","path","platform","price","product","specialTip","title","useType"]}),e._allProperty=null}(),function(t){function u(){this._fromX=NaN,this._fromY=NaN,this._target=null,this._offsetY=NaN,this._targetX=NaN,this._targetY=NaN,this.onlyKey=null,this._isLoop=!1,this._url=null,this._act=null,this._dir=0,this._key=null,this._hold=0,this._holdCount=0,this._currentFrame=0,this._endFrame=0,this._time=0,this._delay=0,u.__super.call(this),this.onlyKey=Ct.createID(),this._act="default"}w(u,"com.scene.effect.ArrowEffect",Wt);var e=u.prototype;return e.resetUrl=function(t){Mt.setClipRecord(this._url,t),this._url=t},e.excShowFly=function(t,e,i,s,n,o,a,l,r,h,u,c,d){void 0===a&&(a=!0),void 0===l&&(l=0),void 0===r&&(r=!1),void 0===h&&(h=3e3),void 0===u&&(u=1),void 0===c&&(c=0),void 0===d&&(d="default"),this.resetUrl(t),this._time=S.now(),this._act=d,this.x=e,this.y=i,this._fromX=e,this._fromY=i,this._target=s,this._offsetY=n,this._delay=l,this._hold=c,this._isLoop=r,null!=o&&(1==a?o.addChild(this):o.addChildAt(this,0)),1==Mt.hasComplete(this._url)?this.play(this._act,0):(Mt.addCompleteHandler(this,this.onResourceComplete),Mt.load(this._url))},e.onResourceComplete=function(t){t==this._url&&(Mt.removeCompleteHandler(this,this.onResourceComplete),this.play(this._act,0))},e.play=function(t,e){void 0===t&&(t="default"),void 0===e&&(e=0),this._currentFrame=0,this._act=t,this._key=this._act+"_d"+e,this._endFrame=Mt.getEndFrame(this._url,this._act),Mt.addToLoop(this.onlyKey,this,this.loop)},e.loop=function(){var t=S.now();3e3<t-this._time?this.unload():t-this._time<this._delay||this.onStep()},e.onStep=function(){if(null!=this._target&&(this._targetX=this._target.x,this._targetY=this._target.y-this._offsetY,this.rotation=Math.atan2(this._targetY-this.y,this._targetX-this.x)*(180/Math.PI),this._target=null),this._holdCount>=this._hold||0==this._currentFrame){if(this._currentFrame>this._endFrame)return void this.unload();this.setFrame(),this._currentFrame++,this._holdCount=0}this.updataPosition(),this._holdCount++},e.setFrame=function(){if(1==Mt.hasComplete(this._url)){var t=Mt.getResource(this._url).getFrame(this._key+"_"+this._currentFrame);t&&(0<t.hold&&(this._hold=t.hold),this.graphics=t.graphics)}},e.updataPosition=function(){this.x=this.x-.2*(this._fromX-this._targetX),this.y=this.y-.2*(this._fromY-this._targetY),(this.y-this._targetY)*(this.y-this._targetY)+(this.x-this._targetX)*(this.x-this._targetX)<100&&(this.x=this._targetX,this.y=this._targetY,this.unload())},e.unload=function(){Mt.setClipRecord(this._url,null),this.removeSelf(),this._target=null,this._offsetY=0,this._url=null,this._act=null,this._dir=0,this._key=null,this._hold=0,this._holdCount=0,this._currentFrame=0,this._endFrame=0,this.graphics=null,this._url=null,Mt.removeFromLoop(this.onlyKey),Mt.removeCompleteHandler(this,this.onResourceComplete);var t=u.inUse.indexOf(this);-1!=t&&u.inUse.splice(t,1),u.pool.push(this)},u.getOne=function(){var t;return 0<u.pool.length?(t=u.pool.pop(),-1==u.inUse.indexOf(t)&&u.inUse.push(t)):u.createNum<6?(u.createNum++,t=new u,u.inUse.push(t)):0<u.inUse.length&&(t=u.inUse.shift(),u.inUse.push(t)),t},u.showFly=function(t,e,i,s,n,o,a,l,r,h){(void 0===a&&(a=!0),void 0===l&&(l=0),void 0===r&&(r=!1),void 0===h&&(h="default"),null!=o)&&u.getOne().excShowFly(t,e,i,s,n,o,a,l,h)},u.MAX_CREATE_NUM=6,u.TIME_OUT=3e3,u.pool=[],u.inUse=[],u.createNum=0,u}()),ih=function(t){function u(){this.onlyKey=null,this._target=null,this._offsetX=NaN,this._offsetY=NaN,this._url=null,this._act=null,this._dir=0,this._key=null,this._hold=0,this._holdCount=0,this._currentFrame=0,this._endFrame=0,this._time=0,this._delay=0,u.__super.call(this),this.onlyKey=Ct.createID(),this._act="default"}w(u,"com.scene.effect.Effect",Wt);var e=u.prototype;return e.resetUrl=function(t){Mt.setClipRecord(this._url,t),this._url=t},e.excShow=function(t,e,i,s,n){void 0===n&&(n="default"),this.resetUrl(t),this._time=S.now(),this._act=n,this.x=e,this.y=i,null!=s&&s.addChild(this),1==Mt.hasComplete(this._url)?this.play(this._act,0):(Mt.addCompleteHandler(this,this.onResourceComplete),Mt.load(this._url));var o=Pe.getEffectScale(this._url);this.scaleX=o,this.scaleY=o,this.rotation=0},e.onResourceComplete=function(t){t==this._url&&(Mt.removeCompleteHandler(this,this.onResourceComplete),this.play(this._act,0))},e.play=function(t,e){void 0===t&&(t="default"),void 0===e&&(e=0),this._currentFrame=0,this._act=t,this._key=this._act+"_d"+e,this._endFrame=Mt.getEndFrame(this._url,this._act),Mt.addToLoop(this.onlyKey,this,this.loop)},e.loop=function(){var t=S.now();3e3<t-this._time?this.unload():t-this._time<this._delay||this.onStep()},e.onStep=function(){if(null!=this._target&&this._target!=this.parent&&(this.x=this._target.x+this._offsetX,this.y=this._target.y+this._offsetY,this._target=null),this._holdCount>=this._hold||0==this._currentFrame){if(this._currentFrame>this._endFrame)return void this.unload();this.setFrame(),this._currentFrame++,this._holdCount=0}this._holdCount++},e.setFrame=function(){if(1==Mt.hasComplete(this._url)){var t=Mt.getResource(this._url).getFrame(this._key+"_"+this._currentFrame);t&&(0<t.hold&&(this._hold=t.hold),this.graphics=t.graphics)}},e.excConfineShow=function(t,e,i,s,n,o,a,l,r){void 0===o&&(o=!0),void 0===a&&(a=0),void 0===l&&(l=!1),void 0===r&&(r=!1),this.resetUrl(t),this.graphics=null,this._time=S.now(),this._target=e,this._offsetX=i,this._offsetY=s,null==e||e==n?(this.x=i,this.y=s):(this.x=this._target.x+i,this.y=this._target.y+s),this._delay=a,n==this.parent?1==o?n.setChildIndex(this,n.numChildren-1):n.setChildIndex(this,0):1==o?n.addChild(this):n.addChildAt(this,0),1==Mt.hasComplete(this._url)?this.play(this._act,0):(Mt.addCompleteHandler(this,this.onResourceComplete),Mt.load(this._url));var h=Pe.getEffectScale(this._url);this.scaleX=h,this.scaleY=h,1==l&&(this.scaleX*=-1),1==r&&(this.scaleY*=-1),this.rotation=0},e.unload=function(){Mt.setClipRecord(this._url,null),this.removeSelf(),this._target=null,this._url=null,this._dir=0,this._key=null,this._hold=0,this._holdCount=0,this._currentFrame=0,this._endFrame=0,this.graphics=null,Mt.removeFromLoop(this.onlyKey),Mt.removeCompleteHandler(this,this.onResourceComplete);var t=u.confineUse.indexOf(this);-1!=t&&u.confineUse.splice(t,1);var e=u.inUse.indexOf(this);-1!=e&&u.inUse.splice(e,1),u.pool.push(this)},I(1,u,"poolNum",function(){return u.pool.length},laya.display.Sprite._$SET_poolNum),I(1,u,"useNum",function(){return u.inUse.length},laya.display.Sprite._$SET_useNum),u.getEffect=function(){var t;return 0<u.pool.length?(t=u.pool.pop(),-1==u.inUse.indexOf(t)&&u.inUse.push(t)):u.createNum<30?(u.createNum++,t=new u,u.inUse.push(t)):0<u.inUse.length&&(t=u.inUse.shift(),u.inUse.push(t)),t},u.show=function(t,e,i,s,n){void 0===n&&(n="default");var o=u.getEffect();return o.excShow(t,e,i,s,n),o},u.confineShow=function(t,e,i,s,n,o,a,l,r){var h;(void 0===o&&(o=!0),void 0===a&&(a=0),void 0===l&&(l=!1),void 0===r&&(r=!1),null!=n)&&(h=u.confineUse.length<9?u.getEffect():u.confineUse.shift(),u.confineUse.push(h),h.excConfineShow(t,e,i,s,n,o,a,l,r))},u.MAX_CREATE_NUM=30,u.TIME_OUT=3e3,u.createNum=0,u.pool=[],u.inUse=[],u.confineUse=[],u}(),sh=function(t){function p(){this.BAO_JI="Bao_Ji",this.QIANG_JI="Qiang_Ji",this.Duration=.7,this.TYPE_FIGHT=1,this.TYPE_BUFF=2,this.digit=0,this.type=0,this.sps=null,this.startTime=0,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.target=null,this.t=NaN,p.__super.call(this)}w(p,"com.scene.kit.FightNumber",Wt);var e=p.prototype;return e.resetCommon=function(t,e,i,s,n,o){this.type=this.TYPE_FIGHT,this.startTime=S.now();var a=0;if(this.width=0,s&&this.updateBitmap(this.sps[a++],s[0],s[1]),n&&this.updateBitmap(this.sps[a++],n[0],n[1]),o)for(var l=t.toString(),r=a;r<this.sps.length;r++)this.updateBitmap(this.sps[r],o[0]+l.substr(r-a,1),o[1]);this.sortPostion(),this.startX=e-this.width/2,this.startY=i,this.endX=this.startX,this.endY=this.startY-120,this.x=this.startX,this.y=this.startY,this.alpha=1,_e.top.addChild(this),_t.addToFrame(this,this.loop)},e.updateBitmap=function(t,e,i){void 0===i&&(i="com/ui/"),t.graphics=t.graphics||new X;var s=ut.getRes(i+e+".png");t&&s&&(t.graphics.clear(),t.graphics.drawTexture(s),t.size(s.sourceWidth,s.sourceHeight),this.width+=s.sourceWidth)},e.resetBuff=function(t,e,i,s){this.type=this.TYPE_FIGHT,this.startTime=S.now();var n=0,o="";switch(e){case"spirit":default:o="add_"}this.width=0,e&&""!=e&&(this.updateBitmap(this.sps[n++],e,"modules/beach/"),this.updateBitmap(this.sps[n++],"add_+"));for(var a=t.toString(),l=n;l<this.sps.length;l++)this.updateBitmap(this.sps[l],o+a.substr(l-n,1));this.sortPostion(),this.startX=i-this.width/2,this.startY=s,this.endX=this.startX,this.endY=this.startY-120,this.x=this.startX,this.y=this.startY,this.alpha=1,_e.top.addChild(this),_t.addToFrame(this,this.loop)},e.reset=function(t,e,i,s,n,o,a,l,r,h,u,c){this.type=this.TYPE_FIGHT,this.startTime=S.now();var d=0,p="";this.width=0;var m=ma.needWord(u,a,l,n);if(0==o)switch(null!=m&&this.updateBitmap(this.sps[d++],m),e){case 2:this.updateBitmap(this.sps[d++],"add_+"),p="add_";break;case 1:p=this.getSrcString(n,r,u),this.updateBitmap(this.sps[d++],p+"-")}else null==m?(this.updateBitmap(this.sps[d++],"role_bj"),this.updateBitmap(this.sps[d++],"role_bj_-"),p="role_bj_"):(p=this.getSrcString(n,r,u),this.updateBitmap(this.sps[d++],this.getBjStr(u,m)),this.updateBitmap(this.sps[d++],m),this.updateBitmap(this.sps[d++],p+"-"));for(var f=t.toString(),_=d;_<this.sps.length;_++)this.updateBitmap(this.sps[_],p+f.substr(_-d,1));this.sortPostion(),this.startX=i-this.width/2,this.startY=s,this.endX=this.startX+40*h,this.endY=this.startY-(o?150:120),this.x=this.startX,this.y=this.startY,this.alpha=1,c.addChild(this),_t.addToFrame(this,this.loop)},e.loop=function(){this.t=(S.now()-this.startTime)/1e3/this.Duration,this.type==this.TYPE_FIGHT&&(this.t*=2),.9<=this.t&&(this.alpha-=.035,this.alpha<=0)?this.remove():(this.t<0?this.t=0:1<this.t&&(this.t=1),null!=this.target&&(this.startX=this.target.x,this.startY=this.target.y,this.endX=this.target.x+40,this.endY=this.target.y-120),this.type!=this.TYPE_FIGHT?(this.x=p.EaseOutBack(this.startX,this.endX,this.t),this.y=p.EaseOutBack(this.startY,this.endY,this.t)):(this.x=p.EaseOutExpo(this.startX,this.endX,this.t),this.y=p.EaseOutExpo(this.startY,this.endY,this.t)))},e.sortPostion=function(){for(var t,e=0,i=0;i<this.sps.length;i++)(t=this.sps[i]).height>e&&(e=t.height);for(var s=0,n=0;n<this.sps.length;n++)(t=this.sps[n]).x=s,s+=t.width,t.y=(e-t.height)/2-e},e.getSrcString=function(t,e,i){switch(i){case 30000011:return"du_";case 30000012:return"huo_";case 30000013:return"lei_";case 30000014:case 30000006:case 30000007:return"bing_"}switch(t){case 1:case 3:return 1==e?"mp_":"role_";case 2:default:return"monster_"}return"monster_"},e.getBjStr=function(t,e){switch(t){case 30000011:return"duBJ";case 30000012:return"huoBJ";case 30000013:return"leiBJ";case 30000014:case 30000006:case 30000007:return"bingBJ"}return null==e?"role_bj":"role_bj2"},e.createBitmap=function(){this.sps=new Array(this.digit);for(var t=0;t<this.digit;t++){var e=new Wt;this.addChild(e),this.sps[t]=e}},e.remove=function(){this.parent&&this.parent.removeChild(this),this.target=null,_t.removeFromFrame(this,this.loop),this.alpha=1;var t=p.poolDict[this.digit];null==t&&(t=new Array,p.poolDict[this.digit]=t),t.push(this)},p.showCommon=function(t,e,i,s,n,o){(function(t,e,i){t=Math.abs(t);var s=2;for(;10<=t;)t/=10,s++;e&&(s+=1);i&&(s+=1);var n=p.poolDict[s];if(null==n||0==n.length)return p.create(s);return n.pop()})(t,s,n).resetCommon(t,e,i,s,n,o)},p.showBuff=function(t,e,i,s){p.getOneBuff(t,e).resetBuff(t,e,i,s)},p.show=function(t,e,i,s,n,o,a,l,r,h,u,c){var d=p.getOne(t,e,o,a,l,u,n);return c=c||_e.top,d.reset(t,e,i,s,n,o,a,l,r,h,u,c),d},p.getOneBuff=function(t,e){t=Math.abs(t);for(var i=2;10<=t;)t/=10,i++;e&&""!=e&&(i+=1);var s=p.poolDict[i];return null==s||0==s.length?p.create(i):s.pop()},p.getOne=function(t,e,i,s,n,o,a){t=Math.abs(t);for(var l=1;10<=t;)t/=10,l++;var r=ma.needWord(o,s,n,a);if(r&&""!=r&&(l+=1),0==i)switch(e){case 2:case 1:default:l+=1}else l+=2;var h=p.poolDict[l];return null==h||0==h.length?p.create(l):h.pop()},p.create=function(t){var e=new p;return e.digit=t,e.createBitmap(),e},p.EaseOutBack=function(t,e,i){return(e-=t)*((i-=1)*i*(2.70158*i+1.70158)+1)+t},p.EaseOutExpo=function(t,e,i){return(e-=t)*(1-Math.pow(2,-10*i))+t},_(p,["poolDict",function(){return this.poolDict=new Object}]),p}(),nh=function(t){function r(){this.SIZE=320,this.SCALE=1.25,this.allSprite=null,this.loadDict=null,this.visibleList=null,this.visibleKey=null,this.waitList=[],this._path=null,this.preMap=null,this.curMap=null,this._startX=-1,this._startY=-1,this._endX=-1,this._endY=-1,this.key=null,this.sprite=null,this.t=0,r.__super.call(this),this.name="Map2D",this.preMap=new Object,this.curMap=new Object,this.allSprite=[this.preMap,this.curMap]}w(r,"com.scene.kit.Map2D",Wt);var e=r.prototype;return e.reset=function(t){var e=Ce.getCityVO(t).url;if(e!=this._path){if(this._path=e,this.clear(),this.preMap.path==this._path){var i=this.preMap;this.preMap=this.curMap,this.curMap=i}else this.destoryPreMap(),this.preMap=this.curMap,this.curMap=new Object,this.curMap.path=this._path;this.allSprite[0]=this.preMap,this.allSprite[1]=this.curMap,this.loadDict=new Object,this.visibleList=[],this.visibleKey=[],this.loadMosaic(),_t.addToFrame(this,this.checkPiece)}},e.destoryPreMap=function(){var t=[];for(var e in this.preMap)t.push(e);for(;0<t.length;){var i=t.pop(),s=this.preMap[i];if(null!=s&&s instanceof laya.display.Sprite){var n=s.texture;s.destroy(!0),null!=n&&n instanceof laya.resource.Texture&&n.destroy(!0)}delete this.preMap[i]}},e.loadMosaic=function(){var t=this.curMap.mosaic;null!=t?this.graphics.drawTexture(t,0,0,ca.mapWidth,ca.mapHeight):bt.add(this._path+"map.jpg",this,this.onMasic,{path:this._path},null,null,0)},e.onMasic=function(t){var e=new $t(t.data);if(null!=e&&e instanceof laya.resource.Texture){var i=t.arg.path;i==this._path?(this.curMap.mosaic=e,this.graphics.drawTexture(e,0,0,ca.mapWidth,ca.mapHeight)):i==this.preMap.path&&(this.preMap.mosaic=e)}},e.checkPiece=function(){if(0!=_e.isGaming){var t=_e.scale,e=Math.floor(-_e.x/t/this.SIZE),i=Math.floor(-_e.y/t/this.SIZE),s=Math.floor((-_e.x+lt.stageWidth)/t/this.SIZE),n=Math.floor((-_e.y+lt.stageHeight)/t/this.SIZE);this._startX==e&&this._startY==i&&this._endX==s&&this._endY==n||(this._startX=e,this._startY=i,this._endX=s,this._endY=n,this.onPieceChange())}},e.onPieceChange=function(){var t=this._startX+this._endX>>1,e=this._startY+this._endY>>1,i=[];this.visibleKey.length=0;for(var s=this._startY;s<=this._endY;s++)for(var n=this._startX;n<=this._endX;n++)if(!(s<0||n<0||s*this.SIZE>=ca.mapHeight||n*this.SIZE>=ca.mapWidth))if(this.key=s+"_"+n,this.visibleKey.push(this.key),this.sprite=this.curMap[this.key],null==this.sprite){if(null==this.loadDict[this.key]){var o=Math.abs(s-e)+Math.abs(n-t),a=this._path+this.key+".jpg";i.push({index:o,url:a,pos:{x:n,y:s,path:this._path,dispose:!0}}),this.loadDict[this.key]=!0}}else null==this.sprite.parent&&(this.addChild(this.sprite),this.visibleList.push(this.sprite));0<i.length&&(i.sort(r.sortOnIndex),this.waitList=i.concat(this.waitList),this.doSingleLoad());for(var l=this.visibleList.length-1;0<=l;l--)this.sprite=this.visibleList[l],-1==this.visibleKey.indexOf(this.sprite.name)&&(this.sprite.removeSelf(),this.visibleList.splice(l,1))},e.doSingleLoad=function(){if(0!=this.waitList.length){var t=this.waitList.shift();bt.add(t.url,this,this.onPieceComplete,t)}},e.onPieceComplete=function(t){var e=t.arg.pos,i=new $t(t.data);if(i&&null!=i.bitmap&&(i.bitmap.enableMerageInAtlas=!1),e.path!=this._path&&i)i.destroy(!0);else{this.key=e.y+"_"+e.x;var s=new Wt;s.name=this.key,s.texture=i,s.scaleX=this.SCALE,s.scaleY=this.SCALE,s.pos(e.x*this.SIZE,e.y*this.SIZE),-1!=this.visibleKey.indexOf(this.key)&&(this.addChild(s),this.visibleList.push(s)),this.curMap[this.key]=s,this.doSingleLoad()}},e.clear=function(){for(this.graphics.clear(),_t.removeFromFrame(this,this.checkPiece);0<this.numChildren;)this.removeChildAt(0);this.loadDict=null,this.visibleList=null,this.visibleKey=null,this._startX=-1,this._startY=-1,this._endX=-1,this._endY=-1,this.waitList.length=0},r.sortOnIndex=function(t,e){return t.index<e.index?-1:t.index>e.index?1:0},r}(),oh=function(t){function e(){this.barBg=null,this.bar=null,this.nameTxt=null,this.bloodText=null,this.title=null,this.percent=NaN,this.collectingBGImg=null,this.collectingBar=null,this.blueVipOutShowBox=null,this.collectTime=0,this.tween=null,this.scoreImg=null,e.__super.call(this),this.barBg=Me.createSprite("com/ui/bloodBg.png",this,-53,-6,106,10,[4,4,4,4]),this.bar=new et("com/ui/bloodGreen.png"),this.bar.sizeGrid="3, 3, 3, 3",this.bar.pos(2,2),this.bar.size(102,6),this.barBg.addChild(this.bar),Me.createSprite("com/ui/bloodFen.png",this.barBg,21,2,64,6),this.bloodText=new jt,this.bloodText.width=200,this.bloodText.align="center",this.bloodText.bold=!0,this.bloodText.fontSize=24,this.bloodText.stroke=2,this.bloodText.color="#ffffff",this.bloodText.x=-100,this.bloodText.y=-33,this.nameTxt=new jt,this.nameTxt.width=200,this.nameTxt.align="center",this.nameTxt.bold=!0,this.nameTxt.fontSize=24,this.nameTxt.stroke=2,this.nameTxt.color="#ffe100",this.nameTxt.x=-100,this.nameTxt.y=-60,this.addChild(this.bloodText),this.addChild(this.nameTxt),this.createCollectBar(),this.mouseEnabled=!1,this.scaleX=1/_e.scale,this.scaleY=1/_e.scale+1e-5}w(e,"com.scene.kit.MyPalName",Wt);var i=e.prototype;return i.createCollectBar=function(){this.collectingBGImg=Me.createSprite("com/ui/uiBarBg.png",this,-100,-163,246,38,[0,57,0,57]),this.collectingBGImg.visible=!1,this.collectingBar=new At,this.collectingBar.size(200,20),this.collectingBar.bar.skin="com/ui/uiBar.png",this.collectingBar.bar.sizeGrid="6,11,6,8",this.collectingBar.bar.x=22,this.collectingBar.bar.y=8,this.collectingBar.x=-100,this.collectingBar.y=-163,this.collectingBar.visible=!1,this.collectingBar.value=0,this.addChild(this.collectingBar)},i.reset=function(t){if(this.nameTxt.changeText(t.pal_name),this.showBlueVip(),0<t.title_id){null==this.title&&(this.title=new b),this.title.y=-64,this.addChild(this.title);var e=va.getTitleSceneUrl(t.title_id);null!=e&&this.title.loadAndPlay(e,"default",0,!0),this.collectingBar.y=-163,this.collectingBGImg.y=-163}else null!=this.title&&this.title.unload(),this.collectingBar.y=-93,this.collectingBGImg.y=-93;0==ua.isBeachMap?(this.updateBlood(t.hp,t.max_hp),this.showBar(),this.blueVipOutShowBox&&this.blueVipOutShowBox.removeSelf()):this.hideBar(),this.collectTime=t.collect_time,t.collect_time<=0||t.collect_time<=ya.serverTime||13!=t.state?this.removeCollectTween():this.showCollectTween(),this.hideScoreImg(),this.nameTxt.color=ua.isCross()&&1e4<t.tag?"#b60202":"#ffe100"},i.showCollectTween=function(){this.collectingBGImg.visible=!0,this.collectingBar.visible=!0,this.collectingBar.value=0,this.tween=ie.to(this.collectingBar,{value:1},1e3*(this.collectTime-ya.serverTime),A.linearIn)},i.removeCollectTween=function(){this.tween&&(ie.clear(this.tween),this.tween=null,this.collectingBar.visible=!1,this.collectingBGImg.visible=!1)},i.updateBlood=function(t,e){this.percent=t/e,this.bloodText.changeText(t+"/"+e),1<this.percent?this.percent=1:this.percent<0&&(this.percent=0),this.bar.width=102*this.percent,0<t?this.showBar():this.hideBar()},i.showBar=function(){this.barBg.visible=this.bloodText.visible=!0},i.hideBar=function(){this.barBg.visible=this.bloodText.visible=!1},i.showScoreImg=function(t){this.scoreImg=this.scoreImg||new et,this.scoreImg.skin=t;var e=this.bloodText.textWidth>this.nameTxt.textWidth?this.bloodText.x:this.nameTxt.x;this.scoreImg.pos(e-this.scoreImg.width/2,-49),this.addChild(this.scoreImg)},i.hideScoreImg=function(){null!=this.scoreImg&&this.scoreImg.removeSelf()},i.hideTitle=function(){null!=this.title&&this.title.unload()},i.showTitle=function(t){if(0<t.title_id){null==this.title&&(this.title=new b),this.title.y=-64,this.addChild(this.title);var e=va.getTitleSceneUrl(t.title_id);null!=e&&this.title.loadAndPlay(e,"default",0,!0)}},i.showBlueVip=function(){this.blueVipOutShowBox=this.blueVipOutShowBox||new Rh,this.addChild(this.blueVipOutShowBox);var t=new ms;t.blueInfo=pe.getRoleBlueVipInfo(),t.nameText=this.nameTxt,this.blueVipOutShowBox.updateShowing(t)},e}(),ah=function(t){function e(t){this.heightChangeHandler=null,this.isMine=!1,this.campID=0,this.isAnimal=!1,this._moveSpeed=0,e.__super.call(this),void 0===t&&(t=!0),this.isAnimal=t}w(e,"com.scene.unit.base.IAvatar",Wt);var i=e.prototype;return i.resetSkin=function(t,e,i){void 0===i&&(i=!1)},i.resetURL=function(t,e,i,s){},i.checkHeightChange=function(t,e,i){if(1==Mt.hasComplete(t)){var s=Mt.getResource(t).getActHeight(e,i<5?i:8-i);null!=this.heightChangeHandler&&this.heightChangeHandler.runWith(s)}},i.hideShadow=function(){this.graphics=null},i.showShadow=function(){},i.resetState=function(t){},i.play=function(t,e,i,s){void 0===i&&(i=4),void 0===s&&(s=!1)},i.gotoStop=function(t){},i.stop=function(){},i.resume=function(){},i.getRealY=function(){return 0},i.unload=function(){},I(0,i,"showFashion",null,function(t){}),I(0,i,"curAct",function(){return null}),I(0,i,"curDir",function(){return 0}),I(0,i,"body",function(){return null}),I(0,i,"isVisible",function(){return!1},function(t){}),I(0,i,"moveSpeed",null,function(t){this._moveSpeed=t,this._moveSpeed<64&&(this._moveSpeed=64)}),e}(),lh=function(t){function e(){this.id=NaN,this.unitType=0,this.onlyKey=null,this.avatar=null,this.shadow=null,this._status=0,this._hideAvatar=!1,this._hideShadow=!1,this._canWeak=!0,this.hideLimit=!1,this.inScreen=!1,this.inMapSlice=!1,this._pt=new Rt,e.__super.call(this),this.init()}w(e,"com.scene.unit.base.SceneUnit",Wt);var i=e.prototype;return i.init=function(){this.mouseEnabled=!1,this.onlyKey=Ct.createID()},i.play=function(t,e){void 0===e&&(e=-1),-1==e&&(e=this.curDir),this.avatar.play(t,e)},i.setWeak=function(t){t&&this._canWeak?.6!=this.avatar.alpha&&(this.avatar.alpha=.6):1!=this.avatar.alpha&&(this.avatar.alpha=1)},i.remove=function(){this.parent&&this.parent.removeChild(this)},i.showSelectShadow=function(){this.shadow&&this.shadow.parent&&this.shadow.showSelectShadow()},i.hideSelectShadow=function(){this.shadow&&this.shadow.parent&&this.shadow.hideSelectShadow()},I(0,i,"curAct",function(){return this.avatar.curAct}),I(0,i,"hideAvatar",function(){return this._hideAvatar},function(t){null!=this.avatar&&(this.avatar.isVisible=!t),this._hideAvatar=t}),I(0,i,"curDir",function(){return this.avatar.curDir}),I(0,i,"status",function(){return this._status},function(t){this._status=t}),I(0,i,"canWeak",null,function(t){this._canWeak=t}),I(0,i,"hideShadow",function(){return this._hideShadow},function(t){this._hideShadow=t}),I(0,i,"pt",function(){return this._pt=Ot.xyToPt(this.x,this.y,this._pt),this._pt}),e}(),rh=function(t){function e(){this.isAnimal=!1,this.isBody=!1,this.skinID=0,this.moveSpeed=160,this._url=null,this._actEndHandler=null,this._offsetX=0,this._offsetY=0,this._isLoop=!1,this._currentFrame=0,this._endFrame=0,this._hold=0,this._holdCount=0,this._act=null,this._dir=4,this._actAndDir=null,this._isURLComplete=!1,this.useURL=null,this._frameKey=null,this.percent=0,this.roundTime=0,e.__super.call(this),this.on("undisplay",this,this.onRemoveFromStage)}w(e,"com.scene.unit.base.AvatarPart",t);var i=e.prototype;return i.onRemoveFromStage=function(t){0==Mt.isDropThing(this._url)&&(Mt.setClipRecord(this._url,null),this._url=null,this.graphics=null,this._isURLComplete=!1)},i.setEndHandler=function(t){this._actEndHandler=t},i.resetURL=function(t,e){if(void 0===e&&(e=0),Mt.setClipRecord(this._url,t),this._url=t,this._isURLComplete=Mt.hasComplete(this._url),0!=e){var i=Pe.getScale(e);this.scaleX=i,this.scaleY=i}},i.resetStandURL=function(t){},i.resetAction=function(t,e,i){void 0===i&&(i=0),this._currentFrame=0,this._act=t,this._dir=e,this._actAndDir=this._act+"_d"+this._dir,this._hold=i,this._holdCount=i,this._isLoop="default"==this._act||"stand"==this._act||"walk"==this._act||"sit"==this._act,1==Mt.hasComplete(this._url)?this._endFrame=Mt.getEndFrame(this._url,this._act):this._endFrame=0},i.clearBitmap=function(){null!=this.graphics&&(this.graphics=null)},i.onStep=function(t){if(null==this._url||null==this._act)return!0;if(this.useURL=this._url,0==this._isURLComplete&&(this._isURLComplete=Mt.hasComplete(this._url)),0==this._isURLComplete)return 1==this.parent.parent.visible&&Mt.load(this._url),this._endFrame=0,this.isBody?(this.showEgg(),Pe.isAttackAct(this._act)&&null!=this._actEndHandler&&this._actEndHandler.run(),!0):(this.clearBitmap(),!1);if(1==isNaN(this._endFrame)&&(this._endFrame=Mt.getEndFrame(this.useURL,this._act)),"walk"==this._act)return this.onStepRun(t),!1;if(this._holdCount>=this._hold){if(this._currentFrame>this._endFrame){if(0==this._isLoop)return null!=this._actEndHandler&&(this._actEndHandler.run(),!0);this._currentFrame=0}this._frameKey=this._actAndDir+"_"+this._currentFrame;var e=Mt.getResource(this.useURL);if(e){var i=e.getFrame(this._frameKey);null!=i&&(this._hold=i.hold,this.graphics=i.graphics)}this._currentFrame++,this._holdCount=0}return this._holdCount++,!1},i.onStepRun=function(t){0==this._endFrame&&Mt.getResource(this.useURL)&&(this._endFrame=Mt.getEndFrame(this.useURL,this._act)),this.roundTime=Math.round(160/this.moveSpeed*720),this.percent=t%this.roundTime/this.roundTime,this._currentFrame=Math.floor((this._endFrame+1)*this.percent),this._frameKey=this._actAndDir+"_"+this._currentFrame;var e=Mt.getResource(this.useURL);if(e){var i=e.getFrame(this._frameKey);null!=i&&(this.graphics=i.graphics,null==i.graphics&&console.log("graphics==null"))}},i.gotoStop=function(t){if(null!=this._url&&null!=this._act&&(this.useURL=this._url,0!=this._isURLComplete)){this._currentFrame=Math.floor(this._endFrame*t),this._frameKey=this._actAndDir+"_"+this._currentFrame;var e=Mt.getResource(this.useURL);if(e){var i=e.getFrame(this._frameKey);null!=i&&(this.graphics=i.graphics)}}},i.showEgg=function(){var t=Mt.getEggFrame();this.graphics!=t.graphics&&(this.graphics=t.graphics)},i.unload=function(){this.removeSelf(),this.isAnimal=!1,this.isBody=!1,this._offsetX=0,this._offsetY=0,this.graphics=null,this._actEndHandler=null,this._url=null,e.pool.push(this)},I(0,i,"url",function(){return this._url}),I(0,i,"isURLComplete",function(){return this._isURLComplete}),I(0,i,"offsetY",null,function(t){this._offsetY=t}),I(0,i,"superX",function(){return h.superGet(Wt,this,"x")}),I(0,i,"y",function(){return this._offsetY},t.prototype._$set_y),I(0,i,"key",function(){return this._frameKey}),I(0,i,"superY",function(){return h.superGet(Wt,this,"y")}),I(0,i,"x",function(){return this._offsetX},t.prototype._$set_x),e.getOne=function(){return 0<e.pool.length?e.pool.pop():new e},_(e,["pool",function(){return this.pool=new Array}]),e}(Wt),hh=function(t){function e(){this.selectShadow=null,e.__super.call(this)}w(e,"com.scene.unit.base.Shadow",Wt);var i=e.prototype;return i.loop=function(t){this.x=t.x,this.y=t.y},i.show=function(){_e.sha&&_e.sha.addChild(this)},i.hide=function(){this.hideSelectShadow(),this.removeSelf()},i.showSelectShadow=function(){this.selectShadow=this.selectShadow||new et("com/ui/yellowShadow.png"),this.selectShadow.pos(-50,-15),this.addChild(this.selectShadow)},i.hideSelectShadow=function(){(ua.isCrossTowerBoss()||ua.isCrossTower())&&this.selectShadow&&this.selectShadow.parent&&this.selectShadow.removeSelf()},I(1,e,"roundShadow",function(){if(null==e._roundShadow){e._roundShadow=new X;var t=ut.getRes("com/ui/shadow.png");e._roundShadow.drawTexture(t,-30,-15,60,30)}return e._roundShadow},laya.display.Sprite._$SET_roundShadow),e.create=function(){var t=new e;return t.graphics=e.roundShadow,t},e._roundShadow=null,e}(),uh=function(t){function e(){this.url="unit/effect/transfer",this._vo=null,this.clip=null,this.nameTxt=null,this._seeable=!1,e.__super.call(this),this.nameTxt=new jt,this.nameTxt.color="#ffffff",this.nameTxt.stroke=1,this.nameTxt.strokeColor="#000000",this.nameTxt.fontSize=26,this.nameTxt.width=200,this.nameTxt.align="center",this.clip=b.getOne(),this.addChild(this.clip),this.on("display",this,this.onDisplay)}w(e,"com.scene.unit.MapTransfer",t);var i=e.prototype;return i.onDisplay=function(){this.off("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),_t.addToFrame(this,this.loop)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay),_t.removeFromFrame(this,this.loop),this.clip&&this.clip.stop(),kt.recover("MapTransfer",this)},i.loop=function(){this.nameTxt.x=Math.floor((_e.mid.x+this.x)*_e.scale-100),this.nameTxt.y=Math.floor((_e.mid.y+this.y-125)*_e.scale)},i.updateName=function(){if(""==this.nameTxt.text){var t,e="";0<this.vo.tar_Map_2?t=Ce.getCityVO(this.vo.tar_Map_2):(t=Ce.getCityVO(this.vo.tar_Map))&&(e=t.name),this.nameTxt.text=e}},i.setTransferNameByStr=function(t){this.nameTxt.text=t},i.dispose=function(){this.clip&&(this.clip.stop(),this.clip.parent&&this.clip.parent.removeChild(this))},I(0,i,"vo",function(){return this._vo},function(t){if(this._vo=t,this._vo){var e=Ot.txtzToPoint(this._vo.tx,this._vo.ty);this.x=e.x,this.y=e.y}}),I(0,i,"seeable",function(){return this._seeable},function(t){this.showName=t,this.visible=t,(this._seeable=t)?this.clip.loadAndPlay(this.url,"default",0,!0,0):this.clip&&this.clip.stop()}),I(0,i,"showName",null,function(t){t?(_e.unitNameText.addChild(this.nameTxt),this.updateName()):this.nameTxt.removeSelf()}),I(0,i,"visible",t.prototype._$get_visible,function(t){h.superSet(Wt,this,"visible",t),this.nameTxt.visible=t}),e.getOne=function(){return kt.getItemByClass("MapTransfer",e)},e}(Wt),ch=function(t){function e(){this.imgHole=null,this.imgStone=null,e.__super.call(this),this.imgHole=new et("modules/taliman/stoneBg.png"),this.imgStone=new et,this.addChild(this.imgHole),this.addChild(this.imgStone),this.imgStone.pos(4,5),this.imgStone.visible=!1}w(e,"modules.exercise.talisman.item.TalimanStoneHole",t);var i=e.prototype;return I(0,i,"showStone",null,function(t){if(null!=t){var e=Rn.getTalimanGemVO(t);e?(this.imgStone.skin="modules/taliman/stone"+e.color+".png",this.imgStone.visible=!0):this.imgStone.visible=!1}else this.imgStone.visible=!1}),I(0,i,"width",t.prototype._$get_width,function(t){h.superSet(Wt,this,"width",t),this.imgHole.width=t,this.imgStone.width=t}),I(0,i,"height",t.prototype._$get_height,function(t){h.superSet(Wt,this,"height",t),this.imgHole.height=t,this.imgStone.height=t}),e}(Wt),dh=function(t){function e(){this.t=null,this.auto,e.__super.call(this),this.t=Me.createHTMLDivElement(null,0,0,300,36,this),this.t.style.fontSize=24,this.t.style.wordWrap=!1,this.t.y=4,this.t.style.color="#F4F1B2";var t=ut.getRes("com/ui/tipBg.png");this.auto=new u,this.auto.sizeGrid=[22,26,22,24],this.auto.source=t,this.graphics=this.auto}return w(e,"modules.gm.view.item.GMTip",Wt),e.prototype.show=function(t,e,i,s){this.t.style.wordWrap=!1,this.t.innerHTML=t,750<this.t.contextWidth?(this.t.style.wordWrap=!0,this.t.width=750,this.t.innerHTML=t):this.t.width=this.t.contextWidth+40,this.t.x=20,this.t.y=10,this.auto.width=this.t.width+30,this.auto.height=this.t.contextHeight+20,this.x=i;var n=e.globalToLocal(new Tt(0,s)).y;this.y=n,e.addChild(this)},e}(),ph=function(t){function e(){this.txtDesc=null,this._p=null,this._init=!1,this.imgRp=null,this._itemVO=null,this.goodsImage=null,this._size=108,e.__super.call(this)}w(e,"modules.pack.packView.PackItem",Wt);var i=e.prototype;return i.init=function(){this._init=!0,this.width=this._size,this.height=this._size+30,this.mouseEnabled=!0,this.goodsImage=new fh(null,!0,!0,105,!0),this.addChild(this.goodsImage),this.txtDesc=Me.createText("",-10,109,128,20,this,H.defaultTextFormat),this.txtDesc.align="center",this.txtDesc.fontSize=24,this.txtDesc.color="#5d3924",this.imgRp=new et},i.updateView=function(){if(this._init||this.init(),this._itemVO){if(this._itemVO instanceof xml.GoodsVO&&this._itemVO.level<=pe.myEquipLevel&&this._itemVO.needShowRP())if(1010==this._itemVO.useType){var t=oa.getRegrowTOCVO();if(t&&oa.getRegrowLvVO(t.regrow_lv+1)){var e,i=10,s=10,n=10,o=10,a=10;for(var l in t.buy)switch((e=t.buy[l]).id){case 2:i-=e.val;break;case 3:s-=e.val;break;case 4:n-=e.val;break;case 5:o-=e.val;break;case 6:a-=e.val}0<i&&10201117==this._itemVO.id||0<s&&10201118==this._itemVO.id||0<n&&10201884==this._itemVO.id||0<o&&10201885==this._itemVO.id||0<a&&10201886==this._itemVO.id?this.showRP(!0):this.showRP(!1)}else this.showRP(!1)}else 3015==this._itemVO.useType?this.showRP(Eo.godPetAlert):this.showRP(!0);else this.showRP(!1);this.txtDesc.text=this._itemVO.title,this.goodsImage.num=this._p.current_num}else this.txtDesc.text="",this.showRP(!1);this.goodsImage.data=this._itemVO},i.showRP=function(t){t&&this._itemVO&&!ha.checkGoodMask(this._itemVO.id)?this.imgRp.skin="com/ui/redPoint.png":this.imgRp.skin=null},I(0,i,"goods",function(){return this._p},function(t){this._p=t,this._itemVO=t?ur.getItem(t.typeid):null,this.updateView()}),e}(),mh=function(t){function e(){this.list=null,this._type=0,this._curWearingID=0,e.__super.call(this),this.list=new ht,this.addChild(this.list),this.list.spaceX=50,this.list.spaceY=10,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.itemRender=CU,this.list.mouseHandler=Q.create(this,this.onClickListItem),this.list.renderHandler=Q.create(this,this.onRenderItem)}w(e,"modules.pet.spsoul.view.SPSoulPolyChangeList",t);var i=e.prototype;return i.selectOne=function(){if(this.list.array)for(var t,e=!1,i=0;i<this.list.length;i++)if(t=this.list.getItem(i),1==this.type?e=Oo.checkMaskLoad(t.typeid):2==this.type&&(e=Oo.checkMaskReplace(t.typeid,this._curWearingID)),t&&!e){this.selectedIndex=i;break}},i.onClickListItem=function(t,e){if("click"==t.type&&this.list.selectedIndex!=e){var i=this.list.getCell(e);i&&!i.has?this.selectedIndex=e:Jt.addTip("你已装备该类灵珠")}},i.onRenderItem=function(t,e){if(void 0===e&&(e=0),t){var i=t;i.select=e==this.list.selectedIndex;var s=this.list.getItem(e);if(!s)return;var n=!1;1==this.type?n=Oo.checkMaskLoad(s.typeid):2==this.type&&(n=Oo.checkMaskReplace(s.typeid,this._curWearingID)),i.has=n}},i.repeat=function(t,e){this.list.repeatX=t,this.list.repeatY=e},I(0,i,"type",function(){return this._type},function(t){this._type=t}),I(0,i,"width",t.prototype._$get_width,function(t){h.superSet(Wt,this,"width",this.list.width=t)}),I(0,i,"curWearingID",null,function(t){this._curWearingID=t}),I(0,i,"dataSource",null,function(t){this.list.dataSource=t}),I(0,i,"selectedIndex",null,function(t){this.list.selectedIndex=t,this.list.refresh(),this.event("select",this.list.getItem(t))}),I(0,i,"height",t.prototype._$get_height,function(t){h.superSet(Wt,this,"height",this.list.height=t)}),e}(Wt),fh=function(t){function l(t,e,i,s,n,o,a){this._data=null,this.imgBG=null,this.imgContent=null,this.imgCa=null,this.txtNum=null,this._isBig=!1,this._bgSkin=null,this._bgSize=0,this._bgSizeGrid=null,this._showBg=!1,this._showNum=!1,this._isShowTips=!1,this._num=0,this._pData=null,void 0===e&&(e=!1),void 0===i&&(i=!0),void 0===s&&(s=91),void 0===n&&(n=!1),void 0===o&&(o="com/ui/goodsBg1.png"),void 0===a&&(a="5,5,5,5"),l.__super.call(this),this._isBig=e,this._showBg=i,this._bgSkin=o,this._bgSize=s,this._bgSizeGrid=a,this._showBg&&(this.imgBG=new et,this.imgBG.sizeGrid="5,5,5,5",this.imgBG.skin=o,this.imgBG.width=s,this.imgBG.height=s,this.addChild(this.imgBG)),this.imgContent=new et,this.imgContent.sizeGrid="0,0,0,0",this.imgContent.width=s,this.imgContent.height=s,this.imgContent.pos(0,0),this.addChild(this.imgContent),this.imgCa=new et,this.imgCa.x=this._bgSize-37,this.addChild(this.imgCa),this.txtNum=new jt,this.txtNum.align="right",this.txtNum.fontSize=24,this.txtNum.size(this._bgSize-5,20),this.txtNum.color="#ffffff",this.txtNum.stroke=1,this.txtNum.strokeColor="#000000",this.txtNum.pos(0,this._bgSize-28),this.addChild(this.txtNum),this._showNum=n,t&&(this._data=t,this._$4_update())}w(l,"modules.pack.packView.GoodsImage",m);var e=l.prototype;return e.showNum=function(t){this._showNum=t,this.txtNum.visible=t},e._$4_update=function(){this._data?(this.imgBG&&(this.imgBG.skin="com/ui/goodsBg"+this._data.color+".png"),0<this._data.id&&3==ur.getItemType(this._data.id)&&0<this._data.category?this.imgCa.skin="com/ui/voca"+this._data.category+".png":this.imgCa.skin=null,this.imgContent.skin=this._data.realMaxico,this._showNum?this.txtNum.text=W.getShortenPowerStr(this.num,!1):this.txtNum.visible=!1):(this.imgBG.skin=this._bgSkin,this.imgCa.skin=null,this.txtNum.text="",this.imgContent.skin=null)},e.onClickGoods=function(t){if(this._data){var e,i,s=!1;this._pData?(e=this._pData,s=!0):(e=this._data,this._data.tempNum=0<this._num?this._num:1),i=3==ur.getItemType(this._data.id)?s?"EQUIP_TIP":"BASE_EQUIP_TIP":s?"GOODS_TIP":"BASE_GOODS_TIP",Ae.show(e,i)}},I(0,e,"pData",function(){return this._pData},function(t){var e=(this._pData=t)?ur.getItem(t.typeid):null;this.data=e,this.num=t?t.current_num:0}),I(0,e,"bgSize",function(){return this._bgSize}),I(0,e,"num",function(){return this._num},function(t){this._num=t,this.txtNum.text=W.getShortenPowerStr(t,!1)}),I(0,e,"data",function(){return this._data},function(t){this._data=t,this._$4_update()}),I(0,e,"typeId",null,function(t){this._data=ur.getItem(t),this._$4_update()}),I(0,e,"isShowTips",function(){return this._isShowTips},function(t){(this._isShowTips=t)?this.on("click",this,this.onClickGoods):this.off("click",this,this.onClickGoods)}),l}(),_h=function(t){function e(){this.onlyKey=null,this._isStop=!1,this._act=null,this._dir=3,this._isStandMount=!1,this._mountY=0,this._skin=null,this._newBodyURL=null,this._mountURL=null,this._wingURL=null,this._bodyURL=null,this._weaponURL=null,this._mountUpURL=null,this.partsURL=null,this.reActKey=0,this.status=0,this._sex=0,this.standURL=null,this._showFashion=!0,this.isMonsterBody=!1,this.parts=null,this.changeEffect=null,this._isShowChangeEff=!0,this.i=0,this.attackCount=0,this._isVisible=!0,e.__super.call(this),this.init()}w(e,"com.scene.unit.base.RichAvatar",ah);var i=e.prototype;return i.init=function(){null==this.onlyKey&&(this.onlyKey="RichAvatar"+Ct.createID(),this._act="stand",this.parts=[],this.partsURL=[],Mt.addCompleteHandler(this,this.onResourceComplete),this.on("display",this,this.onAddToStage),this.on("undisplay",this,this.onRemoveFromStage))},i.onAddToStage=function(t){0!=this._isStop&&0!=this.visible&&1!=this.isMine||Mt.addToLoop(this.onlyKey,this,this.step),Mt.addCompleteHandler(this,this.onResourceComplete)},i.onRemoveFromStage=function(t){Mt.removeFromLoop(this.onlyKey)},i.resetSkin=function(t,e,i){void 0===i&&(i=!1),this._sex=e,(0==Pe.isEqual(t,this._skin)||i)&&(this.standURL=Pe.createActPartURL(t,"body","stand",0,this._dir),this._newBodyURL=Pe.createActPartURL(t,"body","stand",this.status,this._dir),this._skin=t,this.toChangeLook()),0==this._isStop&&Mt.addToLoop(this.onlyKey,this,this.step)},i.resetState=function(t){if(this.status!=t){if(13==(this.status=t))return;this.standURL=Pe.createActPartURL(this._skin,"body","stand",this.status,this._dir),this._newBodyURL=Pe.createActPartURL(this._skin,"body","stand",this.status,this._dir),this.toChangeLook();var e,i=Pe.statusToAct(this.status,this._act);if(i!=this._act)return"sit"==i&&(this._dir=4),void this.play(i,this.curDir);if(1103==t)return void this.play(i,4);for(var s in this.parts)0==(e=this.parts[s]).isBody&&0==Mt.hasComplete(e.url)&&e.clearBitmap()}},i.checkNeedChangeEffect=function(t,e,i,s){if(null==t||null==this.stage)return!1;if(0==Pe.isEqual(t,e)){if(t.body!=e.body)return!0;if(t.mount!=e.mount)return!0}return i.toString().substr(0,2),s.toString().substr(0,2),!1},i.onChangeEffectEnd=function(){this.changeEffect&&this.changeEffect.parent&&this.changeEffect.parent.removeChild(this.changeEffect)},i.toChangeLook=function(){this._bodyURL=this._newBodyURL,this.createURLS(this._act,this._dir),this.sortURLS(),this.resetPartNum(),this.resetPartsAct(),this.checkHeightChange(this._bodyURL,this._act,this._dir)},i.onResourceComplete=function(t){-1!=this.partsURL.indexOf(t)&&("attack"!=this._act&&"attack_arrow"!=this._act&&"attack_casting"!=this._act&&"hurt"!=this._act&&this.resetPartsAct(),t==this._bodyURL&&this.checkHeightChange(t,this._act,this._dir))},i.resetPartNum=function(){for(var t=this.parts.length>this.partsURL.length?this.parts.length:this.partsURL.length,e=0;e<t;e++)if(null!=this.partsURL[e]){null==this.parts[e]&&(this.parts[e]=rh.getOne()),null==this.parts[e].parent&&this.addChild(this.parts[e]),this.parts[e].isAnimal=!0;var i=Pe.getPartSkinID(this.partsURL[e],this._wingURL,this._bodyURL,this._weaponURL,this._skin);this.parts[e].resetURL(this.partsURL[e],i),this.parts[e].resetStandURL(this.standURL),this.parts[e].moveSpeed=this._moveSpeed,this.partsURL[e]==this._bodyURL?this.parts[e].setEndHandler(Q.create(this,this.onActionEnd)):this.parts[e].setEndHandler(null),this.parts[e].isBody,this.partsURL[e]==this._bodyURL?this.parts[e].setEndHandler(Q.create(this,this.onActionEnd)):this.parts[e].setEndHandler(null)}else null!=this.parts[this.parts.length-1]&&(this.parts[this.parts.length-1].unload(),this.parts.pop())},i.resetPartsAct=function(){for(var t=this._dir<5?this._dir:8-this._dir,e=this.parts.length,i=0;i<e;i++)this.parts[i].resetAction(this._act,t)},i.play=function(t,e,i,s){void 0===i&&(i=4),void 0===s&&(s=!1),null==this._skin||t==this._act&&e==this._dir&&0==s||"hurt"==t&&"stand"!=this._act||(1==this.checkBodyURLChange(t,this._act,e,this._dir,s)?(this.status=Pe.actToStatus(t,this.status),this._newBodyURL=Pe.createActPartURL(this._skin,"body",t,this.status,e),0==Mt.hasComplete(this._newBodyURL)&&this.parent&&1==this.parent.visible&&Mt.load(this._newBodyURL),t!=this._act&&this.checkHeightChange(this._newBodyURL,t,e),this._act=t,this._dir=e,this.createURLS(this._act,this._dir),this.sortURLS(),this.resetPartNum(),this.resetPartsAct(),this.step()):(this._act=t,this._dir=e,(this._wingURL||this._weaponURL)&&(this.sortURLS(),this.resetPartNum()),this.resetPartsAct(),0==this._isStop&&(0==this.visible||this.parent instanceof com.scene.unit.MyPal)&&this.step()))},i.checkBodyURLChange=function(t,e,i,s,n){return i!=s&&(4<i&&(i=8-i),4<s&&(s=8-s),i!=s)||(1==n||t!=e&&("stand"!=t&&"walk"!=t||"stand"!=e&&"walk"!=e))},i.createURLS=function(t,e){this._mountURL=null,this._wingURL=Pe.createActPartURL(this._skin,"wing",t,this.status,e),this._bodyURL=Pe.createActPartURL(this._skin,"body",t,this.status,e),this._weaponURL=Pe.createActPartURL(this._skin,"weapon",t,this.status,e),this._mountUpURL=null},i.sortURLS=function(){Pe.sortURLS(this.partsURL,this._act,this._dir,this._mountURL,this._wingURL,this._bodyURL,this._weaponURL,this._mountUpURL)},i.step=function(){if(null!=this.parent){var t=S.now();for(this.i=this.parts.length-1;0<=this.i;this.i--)this.parts[this.i].onStep(t);this._dir<5?1!=this.scaleX&&(this.scaleX=Math.abs(this.scaleX)):-1!=this.scaleX&&(this.scaleX=-Math.abs(this.scaleX)),Pe.isAttackAct(this._act)?this.attackCount<30?this.attackCount++:(this.attackCount=0,this.play("stand",this._dir)):this.attackCount=0}},i.onActionEnd=function(){switch(this._act){case"sit":case"die":break;default:this.play("stand",this._dir)}},i.stop=function(){0==this._isStop&&(this._isStop=!0,Mt.removeFromLoop(this.onlyKey))},i.resume=function(){1==this._isStop&&(this._isStop=!1,Mt.addToLoop(this.onlyKey,this,this.step))},i.gotoStop=function(t){for(this._isStop=!1,Mt.removeFromLoop(this.onlyKey),this.i=this.parts.length-1;0<=this.i;this.i--)this.parts[this.i].gotoStop(t);this._dir<5?1!=this.scaleX&&(this.scaleX=1):-1!=this.scaleX&&(this.scaleX=-1)},i.showChangeEffect=function(t){null!=this.changeEffect&&null==this.changeEffect.parent&&(this.changeEffect.y=this._mountY,this.changeEffect.loadAndPlay("unit/effect/changeStatus","default",0,!1,4),this.addChild(this.changeEffect))},i.checkHeightChange=function(t,e,i){if(1==Mt.hasComplete(t)){var s=0;s=0==this.isMonsterBody?Mt.getResource(t).getActHeight(e,i):Mt.getResource(t).getDefaultHeight(),null!=this.heightChangeHandler&&this.heightChangeHandler.runWith(s-this._mountY)}},i.unload=function(){Mt.removeFromLoop(this.onlyKey),this._skin=null,this._isStop=!1,this.status=0,this._act="",this._dir=0},I(0,i,"showFashion",null,function(t){this._showFashion!=t&&(this._showFashion=t,this.play(this._act,this._dir,4,!0))}),I(0,i,"isVisible",function(){return this._isVisible},function(t){this._isVisible=t,1==this._isVisible?(this.resume(),this.play(this._act,this._dir)):this.stop(),this.visible=this._isVisible}),I(0,i,"moveSpeed",null,function(t){h.superSet(ah,this,"moveSpeed",t);for(var e=0;e<this.parts.length;e++)this.parts[e].moveSpeed=this._moveSpeed}),I(0,i,"curAct",function(){return this._act}),I(0,i,"curDir",function(){return this._dir},function(t){this._dir=t}),e}(),gh=function(t){function i(t,e){this.onlyKey=null,this._url=null,this._attackURL=null,this._hurtURL=null,this._dieURL=null,this._isStop=!1,this._act=null,this._dir=0,this._actionAndDir=null,this._isNPC=!1,this._body=null,this.isURLChange=!1,this._useURL=null,this._isVisible=!0,void 0===e&&(e=!1),i.__super.call(this,t),this._isNPC=e,this.init()}w(i,"com.scene.unit.base.Avatar",ah);var e=i.prototype;return e.init=function(){null==this.onlyKey&&(this.onlyKey="Avatar"+Ct.createID(),0==this._isNPC&&1==this.isAnimal?this._act="stand":this._act="default",this._body=rh.getOne(),this._body.isBody=!0,this._body.isAnimal=this.isAnimal,this._body.setEndHandler(Q.create(this,this.onActionEnd)),this.addChild(this._body),Mt.addCompleteHandler(this,this.onResourceComplete),this.on("display",this,this.onAddToStage),this.on("undisplay",this,this.onRemoveFromStage))},e.onAddToStage=function(t){Mt.addCompleteHandler(this,this.onResourceComplete);var e=Mt.getResource(this._useURL);0==this._isStop&&null!=e&&0<e.getEndFrame(this._act)&&Mt.addToLoop(this.onlyKey,this,this.step)},e.onRemoveFromStage=function(t){Mt.removeFromLoop(this.onlyKey)},e.resetURL=function(t,e,i,s){if(null!=t){this.isURLChange=!0,this._url=t,this._attackURL=e,this._hurtURL=i,this._dieURL=s;var n=this._dir<5?this._dir:8-this._dir;this._body.resetURL(this._url+"_"+n),this._body.resetStandURL(this._url),this._body.resetAction(this._act,n),1==Mt.hasComplete(this._url)&&this.checkHeightChange(this._url,this._act,this._dir),1==this.isAnimal&&0==Mt.hasComplete(t)&&this._body.showEgg()}},e.onResourceComplete=function(t){this._useURL==t&&(this._body.resetURL(this._useURL),this._body.resetAction(this._act,this._dir<5?this._dir:8-this._dir),0==this._isStop&&0<Mt.getEndFrame(this._useURL,this._act)?Mt.addToLoop(this.onlyKey,this,this.step):(Mt.removeFromLoop(this.onlyKey),this.step()),this.checkHeightChange(this._useURL,this._act,this._dir))},e.step=function(){null!=this.parent&&(this._body.onStep(S.now()),this._dir<5?1!=this.scaleX&&(this.scaleX=1):-1!=this.scaleX&&(this.scaleX=-1))},e.actToURL=function(t,e){switch(4<e&&(e=8-e),t){case"default":case"stand":case"walk":return this._url+"_"+e;case"attack":case"attack_arrow":case"attack_casting":return this._attackURL+"_"+e;case"die":return this._dieURL+"_"+e;case"hurt":return this._hurtURL+"_"+e}return this._url},e.play=function(t,e,i,s){void 0===i&&(i=4),void 0===s&&(s=!1),this._useURL=this.actToURL(t,e),null!=this._useURL&&(1==Mt.hasComplete(this._useURL)?(t==this._act&&1!=this.isURLChange||this.checkHeightChange(this._useURL,t,e),this.isURLChange=!1,this._act=t,this._dir=e,this._body.resetURL(this._useURL),this._body.resetAction(this._act,this._dir<5?this._dir:8-this._dir),this.step(),0==this._isStop&&0<Mt.getEndFrame(this._useURL,this._act)&&Mt.addToLoop(this.onlyKey,this,this.step)):(this.isURLChange=!1,this._act=t,this._dir=e,"stand"==this._act&&this._body.showEgg(),Mt.load(this._useURL),"die"==this._act&&Mt.removeFromLoop(this.onlyKey)))},e.onActionEnd=function(){switch(this._act){case"sit":case"die":break;case"hurt":default:this.play("stand",this._dir)}},e.gotoStop=function(t){this._isStop=!1,Mt.removeFromLoop(this.onlyKey),this._body.gotoStop(t),this._dir<5?1!=this.scaleX&&(this.scaleX=1):-1!=this.scaleX&&(this.scaleX=-1)},e.stop=function(){this._isStop=!0,Mt.removeFromLoop(this.onlyKey)},e.resume=function(){this._isStop=!1,Mt.addToLoop(this.onlyKey,this,this.step)},e.getRealY=function(){return this._body.y},e.unload=function(){Mt.removeFromLoop(this.onlyKey)},I(0,e,"curAct",function(){return this._act}),I(0,e,"curDir",function(){return this._dir}),I(0,e,"body",function(){return this._body}),I(0,e,"isVisible",function(){return this._isVisible},function(t){this._isVisible=t,1==this._isVisible?0==this._isStop?(this.isURLChange=!0,this.play(this._act,this._dir)):this.resume():this.stop(),this._body.visible=this._isVisible}),I(0,e,"moveSpeed",null,function(t){h.superSet(ah,this,"moveSpeed",t),this._body.moveSpeed=this._moveSpeed}),i}(),yh=function(t){function e(){this.speed=NaN,this.path=null,this.prePt=null,this._curPt=null,this.tarPt=null,this.startTime=0,this.endTime=0,this._isMoving=!1,this._isTouchMoving=!1,this.isBoss=!1,this._bodyHeight=0,this._lastTime=0,this._rad=NaN,this.deadTime=0,this._buff=0,this._reallyHP=9999999,this._maxHp=9999999,this.startPos=new Tt,this.endPos=new Tt,this.velocity=new Tt,this.clipDict=new Object,e.__super.call(this)}w(e,"com.scene.unit.base.Animal",t);var i=e.prototype;return i.init=function(){t.prototype.init.call(this),this.on("display",this,this.onAddToStage),this.on("undisplay",this,this.onRemoveFromStage)},i.onRemoveFromStage=function(){_t.removeFromFrame(this,this.loop)},i.onAddToStage=function(){_t.addToFrame(this,this.loop)},i.loop=function(){1==this._isMoving&&this.exeMove(),1==this._isTouchMoving&&this.exeTouchMove()},i.exeTouchMove=function(){var t=S.now(),e=NaN;e=0!=this._lastTime?(t-this._lastTime)/1e3:(t-this.startTime)/1e3;var i=new Tt(this.x,this.y),s=_e.mapGrid.getNearbyAblePot(i,this.velocity,e);s?(this.x=s.x,this.y=s.y,this.onMoving(),this._lastTime=t):(this._isMoving=!1,this._isTouchMoving=!1,this._lastTime=0,3!=this._status&&this.play("walk",this.avatar.curDir))},i.run=function(t){3!=this._status&&(this.path=t,this.doNextMove())},i.doNextMove=function(){if(null!=this.path&&0<this.path.length){null!=this.tarPt&&(this.tarPt.dispose(),this.tarPt=null),this.tarPt=this.path.shift(),this.startPos.x=this.x,this.startPos.y=this.y,this.endPos=Ot.ptToPoint(this.tarPt),this.startTime=S.now();var t=Ve.getDretion(this.x,this.y,this.endPos.x,this.endPos.y),e=this.startPos.distance(this.endPos.x,this.endPos.y),i=99999;if(0<this.speed)i=e/Ve.getRealSpeed(this.speed,t);this.velocity.x=(this.endPos.x-this.startPos.x)/i,this.velocity.y=(this.endPos.y-this.startPos.y)/i,this.endTime=this.startTime+1e3*i,this._isMoving=!0,this._isTouchMoving=!1,this.play("walk",t)}},i.exeMove=function(){var t=S.now(),e=(t-this.startTime)/1e3;this.x=this.startPos.x+this.velocity.x*e,this.y=this.startPos.y+this.velocity.y*e,t>=this.endTime&&(this.pos(this.endPos.x,this.endPos.y),null!=this.path&&0<this.path.length?this.doNextMove():(this._isMoving=!1,this.onArriveRunEnd())),this.onMoving(),0==this.speed&&this.normal()},i.normal=function(){this._isMoving=!1,this._isTouchMoving=!1,this._lastTime=0,this.path=null,3!=this._status&&this.play("stand",this.avatar.curDir)},i.onArriveRunEnd=function(){this.normal(),this._isMoving=!1},i.onMoving=function(){this._curPt=this.pt,null!=this.prePt&&this.prePt.x==this._curPt.x&&this.prePt.z==this._curPt.z||this.changeCell(this._curPt)},i.touchMove=function(t){if(3!=this._status&&0<this.speed&&(!this._isTouchMoving||this._rad!=t)){this._rad=t,this._isTouchMoving=!0,this._isMoving=!1;var e=Ve.getDre(t),i=Ve.getRealSpeed(this.speed,e);this.velocity.x=i*Math.cos(t/180*Math.PI),this.velocity.y=i*Math.sin(t/180*Math.PI),0==this._lastTime&&(this._lastTime=S.now()),this.play("walk",e)}},i.stopTouchMove=function(){this.normal()},i.changeCell=function(t){this.prePt.x=t.x,this.prePt.z=t.z,this.setWeak(Ve.checkAlphaCell(t))},i.attack=function(t,e){this.play(t,e),this._isMoving=!1},i.die=function(){this._isMoving=!1,this.deadTime=S.now(),this instanceof com.scene.unit.Monster?this.play("hurt"):(this._status=3,this.play("die"))},i.remove=function(){t.prototype.remove.call(this),this._isMoving=!1,_t.removeFromFrame(this,this.loop)},i.updateBuff=function(t){if(t!=this._buff){this._buff=t;for(var e,i=0,s=NaN;i<63;){s=t>>i&1;var n=this.clipDict[i];1==s?(e=fa.getBuff(i),null==n?null!=e&&((n=b.getOne()).loadAndPlay("unit/effect/"+e.effect,"default",0,!0),this.addChild(n),this.clipDict[i]=n):(n.loadAndPlay("unit/effect/"+e.effect,"default",0,!0),this.addChild(n))):null!=n&&(n.unload(),delete this.clipDict[i]),i++}}},i.hurt=function(){3!=this.status&&this.play("hurt")},i.getRealY=function(){return this.avatar.getRealY()+this.y},i.getAvatar=function(){return this.avatar},i.onBloodDown=function(t){},I(0,i,"bodyHeight",function(){return 0<this._bodyHeight?this._bodyHeight:100}),I(0,i,"isMoving",function(){return this._isMoving}),I(0,i,"maxHp",function(){return this._maxHp},function(t){this._maxHp=t}),I(0,i,"curPt",function(){return null==this._curPt&&(this._curPt=this.pt),this._curPt}),I(0,i,"reallyHP",function(){return this._reallyHP},function(t){this._reallyHP=t}),e}(lh),vh=function(t){function e(){this._collectVo=null,this._skinUrl=null,this._clip=null,this._name=null,this._color=0,this._nameTxt=null,e.__super.call(this),this.unitType=9}w(e,"com.scene.unit.CollectThing",t);var i=e.prototype;return i.init=function(){t.prototype.init.call(this)},i.remove=function(){this._collectVo=null,this._clip&&this._clip.stop(),t.prototype.remove.call(this),xe.disposeCollectThing(this)},i.reset=function(t){this.inMapSlice=!0,this.id=t.id,this._collectVo=t,this._skinUrl=this.getURL(),this.x=Ot.posToX(t.pos),this.y=Ot.posToY(t.pos),this.playEff(),this._name=Ie.getCollectNameByTypeId(t.type_id),this.showName()},i.playEff=function(){this._clip=this._clip||b.getOne(),this._clip.loadAndPlay(this._skinUrl,"default",0,!0),this.addChild(this._clip)},i.showName=function(){var t=Ie.getCollectNameColor(this._collectVo.type_id);this._nameTxt=this._nameTxt||new jt,this._nameTxt.size(300,18),this._nameTxt.pos(-38,-85),this._nameTxt.fontSize=18,this._nameTxt.text=this._name,this._nameTxt.color=t<=0?"#ffe100":U.getColorLight(t),this.addChild(this._nameTxt)},i.getURL=function(){if(!this._collectVo)return null;if(this._collectVo.type_id){var t=Ie.getCollectAnimPathByTypeId(this._collectVo.type_id);if(t)return t}return null},I(0,i,"visible",t.prototype._$get_visible,function(t){h.superSet(lh,this,"visible",t)}),I(0,i,"collectVo",function(){return this._collectVo}),e}(lh),Ih=function(t){function e(){this._pvo=null,this._goodsVO=null,this._bodyHeight=80,this._skinUrl=null,e.__super.call(this),this.unitType=5}w(e,"com.scene.unit.DropThing",t);var i=e.prototype;return i.init=function(){t.prototype.init.call(this),this.avatar=new gh(!1),this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange),this.addChild(this.avatar),this.on("display",this,this.onAddToStage),this.on("undisplay",this,this.onRemoveFromStage)},i.onHeightChange=function(t){this._bodyHeight=t+20},i.onRemoveFromStage=function(){_t.removeFromFrame(this,this.loop)},i.onAddToStage=function(){_t.addToFrame(this,this.loop)},i.loop=function(){},i.reset=function(t){this.id=t.id,this._pvo=t,this._skinUrl=this.getURL(),this.avatar.resetURL(this._skinUrl),this.avatar.play("default",0)},i.getURL=function(){switch(this._pvo.type){case 1:return"unit/drop/dayuanbao";case 2:return"unit/drop/datongqian";case 3:case 4:case 5:default:return"unit/drop/everything"}return null},i.remove=function(){this._pvo=null,t.prototype.remove.call(this)},I(0,i,"pvo",function(){return this._pvo}),I(0,i,"visible",t.prototype._$get_visible,function(t){h.superSet(lh,this,"visible",t)}),e}(lh),wh=function(t){function e(){this.txtTitle=null,this.arrTxtArr=null,this.iconArr=null,this.line=null,e.__super.call(this),this.init()}w(e,"modules.equip.View.EquipSubTip",m);var i=e.prototype;return i.init=function(){this.width=570,this.line=new et,this.line.skin="com/ui/line3.png",this.line.x=15,this.line.width=540,this.line.height=3,this.addChild(this.line)},i.update=function(t,e,i){void 0===i&&(i=""),this.height=55,this.arrTxtArr=this.arrTxtArr||[],this.iconArr=this.iconArr||[],this.txtTitle=this.txtTitle||Me.createText("",31,10,116,30,this),this.txtTitle.color="#f4f1b2",this.txtTitle.fontSize=30,this.txtTitle.text=t;for(var s,n,o=e.length>this.iconArr.length?e.length:this.iconArr.length,a=65,l=0;l<o;l++)""!=i&&l<e.length?(this.iconArr[l]=this.iconArr[l]||new et,(n=this.iconArr[l]).x=a,n.y=this.height+40*l-3,n.skin=i,this.addChild(n)):0<this.iconArr.length&&this.iconArr.pop().removeSelf();for(""!=i&&(a=95),o=e.length>this.arrTxtArr.length?e.length:this.arrTxtArr.length,l=0;l<o;l++)l<e.length?(this.arrTxtArr[l]=this.arrTxtArr[l]||Me.createText("",a,30,116,30,this),(s=this.arrTxtArr[l]).fontSize=26,s.color="#ffffff",s.text=e[l],s.x=a,s.y=this.height,s.leading=10,this.height+=s.textHeight+5,this.addChild(s)):Me.disposeTxt(this.arrTxtArr.pop())},e}(),bh=function(t){function e(){this.items=null,e.__super.call(this),this.initItems(),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),Nt.register("RP_STRANGEFIRE_MAGATAMA_1",this.items[0]),Nt.register("RP_STRANGEFIRE_MAGATAMA_2",this.items[1]),Nt.register("RP_STRANGEFIRE_MAGATAMA_3",this.items[2]),Nt.register("RP_STRANGEFIRE_MAGATAMA_4",this.items[3])}w(e,"modules.exercise.strangeFire.view.StrangeFireListView",m);var i=e.prototype;return i.onUndisplay=function(){},i.onDisplay=function(t){this.update()},i.initItems=function(){this.items=[];for(var t=An.fires,e=0;e<t.length;e++){var i=new ZR;i.x=160*e,this.addChild(i),this.items.push(i),i.on("click",this,this.onItemClick)}},i.onItemClick=function(t){this.resetItemSelected();var e=t.target;e&&(e.isSelected(!0),this.event("StrangeFireListView.CHOOSE",e.data))},i.update=function(){this.resetItemSelected();for(var t=An.fires,e=0;e<this.items.length;e++){var i=this.items[e],s=t[e];An.curFireId==s.id?i.isSelected(!0):i.isSelected(!1),i.dataSource=s}},i.resetItemSelected=function(){for(var t=0;t<this.items.length;t++){var e=this.items[t];e&&e.isSelected(!1)}},e}(),Sh=function(t){function d(){this.allItem=null,this.nameTxtArr=null,this.fightPosNameTxtArr=null,this.winnerOrLoseTagImgs=null,this._panelIsWitness=!1,d.__super.call(this),this.createShowHeadItem(),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.winnerOrLoseTagImgs=[]}w(d,"modules.family.view.FamilyFightMemberPart",m);var e=d.prototype;return e.onDisplay=function(){},e.onUnDisplay=function(){},e.createShowHeadItem=function(){var t,e,i;this.allItem=[],this.nameTxtArr=[],this.fightPosNameTxtArr=[];for(var s=0;s<5;s++)t=new dF,1==this.panelIsWitness?t.loack=!0:t.open=!0,t.pos(s*t.width+45+5*s,129),t.on("click",this,this.onClickHeadItem),this.allItem.push(t),e=Me.createText("??????",t.x,t.y+t.height,t.width,NaN,this,d.createTxtFormat(20,"center","#ffe0cf")),this.nameTxtArr.push(e),(i=Me.createText("位置",t.x,0,t.width,NaN,this,d.createTxtFormat(20,"center","#ffffff"))).y=t.y-i.height,this.fightPosNameTxtArr.push(i),this.addChild(t);var n=Ln.FAMILY_FIGHT_POS_SCORE,o=0;for(var a in n){var l=n[a],r=l.name,h=l.score,u=l.fontColor,c=this.fightPosNameTxtArr[o];c.text=r+"("+h+"分)",c.color=u,o++}},e.onClickHeadItem=function(t){if(t.target instanceof modules.role.view.HeadItem){var e=this.allItem.indexOf(t.target);-1!=e&&T.dispatch("FAMILY_BATTLE_MEMBER_ITEM_CLICK",e)}},e.update=function(t,e){var i=e&&0<e.length;this.clearWinnerAndLoseTagImgShow();for(var s=0,n=t.length;s<n;s++)null!=t[s]?this.updateByPosIndex(s,t[s],i&&e[s]&&e[s]==t[s].role_id,i):(1==this.panelIsWitness?this.nameTxtArr[s].text="空闲":this.nameTxtArr[s].text="??????",this.allItem[s].data=null,1==this.panelIsWitness?this.allItem[s].loack=!0:this.allItem[s].open=!0)},e.updateByPosIndex=function(t,e,i,s){if(this.clearWinnerTagByIndex(t),null!=this.allItem[t]){if(null==e)return 1==this.panelIsWitness?this.nameTxtArr[t].text="空闲":this.nameTxtArr[t]="??????",this.allItem[t].data=null,void(1==this.panelIsWitness?this.allItem[t].loack=!0:this.allItem[t].open=!0);var n=e.role_name.indexOf("-");this.nameTxtArr[t].text=e.role_name.substring(n+1,e.role_name.length);var o=e.category,a=e.sex,l=new Object;l.className="p_pal_ext",l.category=o,l.sex=a;var r=new Object;r.className="p_pal_data",r.ext=l,this.allItem[t].data=r,1==this.panelIsWitness?this.allItem[t].loack=!0:this.allItem[t].open=!0,s?this.showWinnerAndLoseTag(t,i):this.clearWinnerTagByIndex(t)}},e.showWinnerAndLoseTag=function(t,e){if(this.winnerOrLoseTagImgs=this.winnerOrLoseTagImgs||[],this.winnerOrLoseTagImgs[t]instanceof laya.ui.Image)this.winnerOrLoseTagImgs[t].skin=e?"modules/family/FightWin.png":"modules/family/fightLose.png";else{var i=new et;i.skin=e?"modules/family/FightWin.png":"modules/family/fightLose.png",i.pos(this.allItem[t].x+this.allItem[t].width/2+10,this.allItem[t].y+this.allItem[t].height/2),this.winnerOrLoseTagImgs[t]=i,this.addChild(i)}},e.clearWinnerAndLoseTagImgShow=function(){if(this.winnerOrLoseTagImgs&&0<this.winnerOrLoseTagImgs.length)for(var t in this.winnerOrLoseTagImgs)this.winnerOrLoseTagImgs[t].skin=""},e.clearWinnerTagByIndex=function(t){-1!=this.winnerOrLoseTagImgs.indexOf(t)&&(this.winnerOrLoseTagImgs[t].skin="")},I(0,e,"panelIsWitness",function(){return this._panelIsWitness},function(t){this._panelIsWitness=t}),d.createTxtFormat=function(t,e,i){var s=new Qt;return s.color=i,s.align=e,s.fontSize=t,s},d.ROLE_ITEM_COUNT=5,d}(),xh=function(t){function s(){var t;this.headNum=4,this.headArr=null,this.xmlVO=null,this._index=0,s.__super.call(this),this.headArr=[];for(var e=20,i=0;i<this.headNum;i++)(t=new dF).x=e,e+=t.width+10,this.addChild(t),t.data=bo.getRankRolePartnerData(bo.curRoleID,i),t.open=this.getItemOpen(i),this.headArr.push(t),t.on("click",this,this.onHeadItemClick)}w(s,"modules.otherRole.view.RoleHeadsOtherPart",m);var e=s.prototype;return e.getItemOpen=function(t){this.xmlVO=oa.getRoleOpenVO(t+1);var e=bo.getRankRoleData(bo.curRoleID);return!(!this.xmlVO||!e)&&!!this.checkOpen(this.xmlVO.regrow,this.xmlVO.lv,this.xmlVO.vip)},e.checkOpen=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0);var s=bo.getRankRoleData(bo.curRoleID);return s.regrow>=t&&s.level>=e||s.vip_level>=i},e.onHeadItemClick=function(t){var e=this.headArr.indexOf(t.target);0<=e&&(t.target.date&&(this.selectOne(e),this.event("RoleHeadsOtherPart.CHOOSE",e)))},e.resetSelect=function(t){this.event("RoleHeadsOtherPart.CHOOSE",t),this.selectOne(t)},e.resetHead=function(){for(var t,e=0;e<this.headNum;e++)(t=this.headArr[e]).data=bo.getRankRolePartnerData(bo.curRoleID,e),t.open=this.getItemOpen(e),this.resetSelect(0)},e.selectOne=function(t){this._index=t;for(var e=0;e<this.headArr.length;e++)this.headArr[e].select=t==e},I(0,e,"index",function(){return this._index}),s}(),Ch=function(t){function e(){this.goods=null,this.txt=null,this.txtNum=null,this.txtNum1=null,this._data=NaN,this._has=NaN,this._need=NaN,e.__super.call(this),this.size(91,91),this.goods=new fh,this.txt=Me.createText("",-20,95,131,30),this.txtNum=Me.createText("",-20,120,131,30),this.txtNum1=Me.createText("",-20,120,131,30),this.txt.fontSize=this.txtNum.fontSize=24,this.txt.align="center",this.txtNum1.x=41,this.txtNum1.color="#ffffff",this.txtNum1.fontSize=this.txt.fontSize=this.txtNum.fontSize=24,this.addChild(this.txt),this.addChild(this.txtNum),this.addChild(this.txtNum1),this.addChild(this.goods),this.on("click",this,this.onClick)}w(e,"modules.pack.composeView.ComposeNeedItem",m);var i=e.prototype;return i.onClick=function(){if(this._data){var t=ur.getItem(this._data);t.tempNum=this._has,Ae.show(t,"BASE_GOODS_TIP")}},i.setData=function(t,e){if(this._need!=e&&(this._need=e,this.txtNum1.text="/"+e),this._data!=t){this._data=t;var i=ur.getItem(t);this.goods.data=i,this.txt.text=i.name,this.txt.x=6<this.txt.text.length?-20-20*(this.txt.text.length-6):-20,this.txt.color=U.getColorLight(i.color)}this.updateNum()},i.updateNum=function(){var t=xo.getGoodsNumByTypeID(this._data);this._has=t,this.txtNum.text=t+"",this.txtNum.x=41-this.txtNum.textWidth,this.txtNum.color=t>=this._need?"#96f254":"#b60202"},e}(),Ph=function(t){function e(){this.avatar=null,this.shadow=null,this._bodyHeight=0,this._url=null,this._status=0,this.unitName=null,this._data=null,this.urlArr=null,this.imgSkillBot=null,this.imgSkill=null,this.playStartTime=NaN,this.curBuffs=[],this.nuqiEff=null,this.yunxuanEff=null,e.__super.call(this),this.init()}w(e,"modules.pet.embattle.PetFightUnit",m);var i=e.prototype;return i.init=function(){this.mouseEnabled=!1,this.on("display",this,this.onAddToStage),this.on("undisplay",this,this.reset),this.avatar=new gh(!0),this.addChild(this.avatar),this.unitName=new bB,this.addChild(this.unitName),this.shadow=hh.create(),this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange)},i.play=function(t,e){void 0===e&&(e=-1),-1==e&&(e=this.curDir),this.avatar.play(t,e)},i.startFight=function(t){if(3!=this._status){var e=To.getTowerSkill(t.skill_id);if(e)t.is_rage||!t.is_rage&&1==e.type?(this.playSkillName(e.id),pr.ins().getPetFightView().spSkillMask.visible=!0,ih.confineShow("unit/effect/embattle_release",null,0,-20,this),_t.setTimeout(this,this.playAct,[t],To.petActTime)):this.playAct(t);else{var i;for(var s in t.buff_effects)if((i=t.buff_effects[s]).buffs){var n=To.getPetUnitByPos(i.pos);n&&n.parent&&n.setBuffer(i.buffs,t.round)}pr.ins().gotoNextLogs()}}},i.playAct=function(t){switch(pr.ins().getPetFightView().spSkillMask.visible=!1,To.getTowerSkill(t.skill_id).moveType){case 0:_t.setTimeout(this,this.fightIn,[t],To.befSkill);break;case 1:var e=To.getPetXYByPos(t.passive_pos),i=pr.ins().getPetFightView();_t.addToFrame(i,i.resetDepth),e.y=20<t.passive_pos?e.y+80:e.y-80;var s=20<t.passive_pos?0:4,n=(S.now(),Ve.getDistance(this.x,this.y,e.x,e.y)),o=Ve.getRealSpeed(To.moveSpeed,s),a=99999;0!=o&&(a=n/o*1e3),this.play("walk",s);var l=To.getScaleByPos(t.passive_pos);ie.to(this,{scale:l,x:e.x,y:e.y},a,null,Q.create(this,this.fightIn,[t],!0),To.befSkill)}},i.checkRoundStart=function(t){},i.playSkillName=function(t){this.imgSkillBot=this.imgSkillBot||new et,this.imgSkillBot.skin="modules/petFight/bottom.png",this.imgSkill=this.imgSkill||new et,this.imgSkill.scale(.4,.4),this.imgSkill.pivot(27,13),this.imgSkill.skin="modules/petFight/img/txt"+t+".png",this.imgSkillBot.pos(-44,-this._bodyHeight-98),this.imgSkill.pos(0,-this._bodyHeight-78),this.addChild(this.imgSkillBot),this.addChild(this.imgSkill),this.playStartTime=S.now(),_t.addToFrame(this,this.loopSkillName)},i.loopSkillName=function(){var t=S.now();if(t-this.playStartTime<To.befSkill){var e=this.line(.4,4,(t-this.playStartTime)/To.befSkill);this.imgSkill.scale(e,e)}else this.hideSkillName()},i.line=function(t,e,i){var s=t+(e-t)*i;return 1<s?1:s},i.hideSkillName=function(){this.imgSkillBot&&this.imgSkillBot.parent&&this.imgSkillBot.removeSelf(),this.imgSkill&&this.imgSkill.parent&&this.imgSkill.removeSelf(),this.imgSkill&&ie.clearAll(this.imgSkill)},i.playAttackedEffByUrl=function(t){ih.confineShow(t,null,0,0,this)},i.fightIn=function(t){var e=pr.ins().getPetFightView();_t.removeFromFrame(e,e.resetDepth);var i,s=To.getTowerSkill(t.skill_id),n=20<t.passive_pos?0:4;if(this.play("attack",n),t.is_rage||!t.is_rage&&1==s.type){var o,a="unit/effect/"+s.skillUrl;if(18==s.id){var l=NaN;l=(o=t.attack_effects[0]).pos<20?o.pos<14?o.pos+3:o.pos:o.pos<24?o.pos:o.pos-3;var r=To.getPetXYByPos(l);r.y=l<20?r.y-220:r.y,ih.confineShow(a,null,r.x,r.y,e,!0,0,!1,l<20)}else{var h;for(h in t.attack_effects){o=t.attack_effects[h];var u=ko.getPetFightChangeHP(o),c=ko.getPetFightMiss(o),d=ko.getPetHurtShield(o),p=0!=ko.getPetFightChangeRage(o);if(u<0||c||d||p){var m=To.getPetUnitByPos(o.pos);m&&m.parent&&m.playAttackedEffByUrl(a)}}}}for(var f in t.buff_effects)if((i=t.buff_effects[f]).buffs){var _=To.getPetUnitByPos(i.pos);_&&_.parent&&_.setBuffer(i.buffs,t.round)}_t.setTimeout(this,this.makeSrcsHurt,[t.attack_effects],16*s.getHurtTime()),_t.setTimeout(this,this.afterFight,[t],16*s.getEffTotalTime()+To.aftSkill)},i.setBuffer=function(t,e){var i,s,n,o=[],a=[];for(var l in t){i=t[l];var r=ko.getPetPKBuffID(i);this.curBuffs.indexOf(i)<=0&&o.push(r)}for(var h in this.curBuffs){s=this.curBuffs[h];var u,c=!1;for(var d in t)if(u=t[d],s==(r=ko.getPetPKBuffID(u))){c=!0;break}c||a.push(s)}for(var p in o){switch(n=o[p],Math.floor(r/1e4)){case 1001:case 1002:break;case 1003:this.showYunxuan(!0)}this.curBuffs.push(n)}for(p in a){switch(n=a[p],Math.floor(n/1e4)){case 1001:case 1002:break;case 1003:this.showYunxuan(!1)}var m=this.curBuffs.indexOf(n);this.curBuffs.splice(m,1)}},i.makeSrcsHurt=function(t){for(var e,i=t.length-1;0<=i;i--){e=t[i];var s=To.getPetUnitByPos(e.pos);s&&s.parent&&s.showHurt(e)}},i.showHurt=function(t){var e=ko.getPetFightChangeHP(t);if(e<0){this.play("hurt");var i=0<e?2:1,s=t.pos<20?1:3,n=ko.getPetFightDouble(t),o=ko.getPetFightMiss(t),a=ko.getPetHurtShield(t),l=0,r=0;ko.getDu(t)?(r=100,l=30000011):ko.getHuo(t)?(r=200,l=30000012):ko.getLei(t)?(r=300,l=30000013):ko.getBing(t)&&(r=400,l=30000014),0<r?_t.setTimeout(sh,sh.show,[Math.abs(e),i,this.x,this.y-45,s,n,o,a,!1,-2,l,pr.ins().getPetFightView().box],r):sh.show(Math.abs(e),i,this.x,this.y-45,s,n,o,a,!1,1,l,pr.ins().getPetFightView().box),n&&fe.sharkSp(pr.ins().getPetFightView());var h=20<t.pos?this.y-10:this.y+10;ie.to(this,{y:h},To.hurtTime/10*3,null,Q.create(this,this.hurtEnd,[this.y],!0))}var u=ko.getPetFightRemainHP(t),c=ko.getPetFightRemainRage(t);this.unitName.bloodBar.width=u/this._data.max_hp*80,c=75<c?75:c,this.unitName.nuqiBar.width=c/75*80,this.showNuqi(75<=c),u<=0&&_t.setTimeout(this,this.showDie,null,To.hurtTime)},i.showNuqi=function(t){t?(null==this.nuqiEff&&(this.nuqiEff=b.getOne(),this.nuqiEff.pos(0,0)),this.nuqiEff.parent||this.addChild(this.nuqiEff),this.nuqiEff.loadAndPlay("unit/effect/nuqi","default",0,!0)):this.nuqiEff&&this.nuqiEff.parent&&this.nuqiEff.removeSelf()},i.showYunxuan=function(t){t?(null==this.yunxuanEff&&(this.yunxuanEff=b.getOne(),this.yunxuanEff.pos(0,-this._height-68)),this.yunxuanEff.parent||this.addChild(this.yunxuanEff),this.yunxuanEff.loadAndPlay("unit/effect/hurt_embattle_yunxuan","default",0,!0)):this.yunxuanEff&&this.yunxuanEff.parent&&this.yunxuanEff.removeSelf()},i.hurtEnd=function(t){ie.to(this,{y:t},To.hurtTime/10*2)},i.showDie=function(){ih.show("unit/effect/monster_dead",this.x,this.y,pr.ins().getPetFightView().box),pr.ins().getPetFightView().disposePet(this)},i.afterFight=function(t){this.unitName.nuqiBar.width=t.active_remain_rage/75*80;var e=To.getPetXYByPos(t.active_pos);if((this.x-e.x)*(this.x-e.x)+(this.y-e.y)*(this.y-e.y)<10)_t.setTimeout(this,this.fightEnd,[t],To.extraTime);else{S.now();var i=Ve.getDretion(this.x,this.y,e.x,e.y),s=Ve.getDistance(this.x,this.y,e.x,e.y),n=Ve.getRealSpeed(To.moveSpeed,i),o=99999;0!=n&&(o=s/n*1e3),this.play("walk",i);To.getScaleByPos(t.active_pos);ie.to(this,{x:e.x,y:e.y},o,null,Q.create(this,this.fightEnd,[t],!0),50);var a=pr.ins().getPetFightView();_t.addToFrame(a,a.resetDepth)}},i.fightEnd=function(t){var e=pr.ins().getPetFightView();_t.removeFromFrame(e,e.resetDepth),this.play("stand",20<t.active_pos?4:0),pr.ins().gotoNextLogs()},i.loop=function(){this.shadow.loop(this),this.unitName.x=-this.unitName.width/2,this.unitName.y=-this._bodyHeight-50,this.imgSkillBot&&this.imgSkillBot.pos(-44,-this._bodyHeight-98),this.imgSkill&&this.imgSkill.pos(0,-this._bodyHeight-78)},i.onHeightChange=function(t){this._bodyHeight=t+6},i.reset=function(){ie.clearAll(this),_t.clearTimeOutByObj(this),_t.removeFromFrame(this,this.loopSkillName),_t.removeFromFrame(this,this.loop),this.hideSkillName()},i.onAddToStage=function(){_t.addToFrame(this,this.loop)},I(0,i,"data",function(){return this._data},function(t){if(null!=t){this.reset(),this._data=t;var e=1,i=To.getTowerMonster(this._data.pet_type);if(i)e=i.color;else{var s=Eo.getPetByPetID(this._data.pet_type);s&&(e=Math.floor(s.type_id%1e5/1e4))}this.unitName.txtName.color=U.getColorDark(e),this._data.pet_type,this.urlArr=this.urlArr||[],this.urlArr[0]="unit/monster/"+this._data.skin_id,this.urlArr[1]="unit/monster/"+this._data.skin_id+"_attack",this.urlArr[2]="unit/monster/"+this._data.skin_id+"_hurt",this.unitName.txtName.text=this._data.pet_name,this.unitName.bloodBar.width=this._data.hp/this._data.max_hp*80,this.unitName.nuqiBar.width=0/this._data.max_hp*80,this.showNuqi(!1),this.avatar.resetURL(this.urlArr[0],this.urlArr[1],this.urlArr[2],null),this.avatar.play("stand",20<this._data.pos?4:0),_t.addToFrame(this,this.loop)}}),I(0,i,"curAct",function(){return this.avatar.curAct}),I(0,i,"curDir",function(){return this.avatar.curDir}),I(0,i,"status",function(){return this._status},function(t){this._status=t}),e.pugongSkillVO=null,e}(),Th=function(t){function n(){this.bmp=null,this.speed=NaN,this._type=0,this._graph=null,this._hitA=null,n.__super.call(this),this.size(100,100),this.mouseEnabled=!0,this.bmp=new et,this.addChild(this.bmp),this.on("undisplay",this,this.onUndisplay),this._graph=new X,this._hitA=new $}w(n,"modules.plays.beachBoss.view.RaceNimbus",m);var e=n.prototype;return e.onUndisplay=function(){this.dispose()},e.reset=function(t,e,i){this.bmp.skin=t,this.width=this.bmp.width,this.height=this.bmp.height;var s=this.bmp.width/2;this._graph&&this._hitA&&(this._graph.drawCircle(s,s,s,"#ffe578"),this._hitA.hit=this._graph),this.hitArea=this._hitA,this._type=e,this.speed=i,this.y=-50,this.x=Math.random()*lt.stageWidth,Fo.instance.spRace.addChild(this),-1==n.inUse.indexOf(this)&&n.inUse.push(this)},e.onFrame=function(){this.y+=this.speed,this.y>lt.stageHeight&&this.dispose()},e.dispose=function(){null!=this.bmp&&(this.bmp.source=null),null!=this.parent&&this.parent.removeChild(this);var t=n.inUse.indexOf(this);-1!=t&&n.inUse.splice(t,1),n.pool.push(this)},I(0,e,"type",function(){return this._type}),n.getOne=function(){return 0<n.pool.length?n.pool.pop():new n},n.pool=[],n.inUse=[],n}(),kh=function(t){function s(){var t;this.headNum=4,this._index=0,this.allItem,s.__super.call(this),this.allItem=[];for(var e=20,i=0;i<this.headNum;i++)(t=new dF).x=e,e+=t.width+10,this.addChild(t),t.data=pe.getPalByIndex(i),t.open=oa.getItemOpen(i),this.allItem.push(t),t.on("click",this,this.onHeadItemClick),0<i&&Nt.register("RP_OPEN_PAL_"+i,t,new Tt(39,10));this.on("display",this,this.onDisplay)}w(s,"modules.role.view.RoleHeadsPart",m);var e=s.prototype;return e.getItem=function(t){return this.allItem[t]},e.onDisplay=function(){T.register("UPDATE_PAL_DATA",this,this.update),T.register("ROLE_LEVEL_UP",this,this.update),T.register("REGROWLV_UP",this,this.update),T.register("VIP_LEVEL_CHANGE",this,this.update),T.register("ROLE_CHANGE_SEX",this,this.update),T.register("ROLE_REORDER",this,this.update),this.update(),this.on("undisplay",this,this.onUNDisplay)},e.onUNDisplay=function(){T.remove("UPDATE_PAL_DATA",this,this.update),T.remove("ROLE_LEVEL_UP",this,this.update),T.remove("REGROWLV_UP",this,this.update),T.remove("VIP_LEVEL_CHANGE",this,this.update),T.remove("ROLE_CHANGE_SEX",this,this.update),T.remove("ROLE_REORDER",this,this.update),this.off("undisplay",this,this.onUNDisplay)},e.onHeadItemClick=function(t){pt.send(4,6,"开启角色界面入口按钮");var e=this.allItem.indexOf(t.target);0<=e&&(t.target.date?(this.selectOne(e),this.event("RoleHeadsPart.CHOOSE",e)):oa.getRoleOpenVO(e+1)&&T.dispatch("OPEN_CATEGORY_PANEL"))},e.resetSelect=function(t){this.selectOne(t),this.event("RoleHeadsPart.CHOOSE",t)},e.update=function(){for(var t,e=0;e<this.headNum;e++)if((t=this.allItem[e]).data=pe.getPalByIndex(e),null==pe.getPalByIndex(e)){var i=oa.getItemOpen(e);(t.open=i)?t.imgOpen.visible=!1:(t.imgOpen.visible=!0,t.imgOpen.skin="modules/role/pal"+e+".png")}else t.imgOpen.visible=!1},e.selectOne=function(t){this._index=t;for(var e=0;e<this.allItem.length;e++)this.allItem[e].select=t==e},I(0,e,"index",function(){return this._index}),s}(),Ah=function(t){function r(t,e,i,s,n,o,a,l){this.txtDesc=null,this._p=null,this._init=!1,this._bgSize=0,this._isBig=!1,this._showBg=!1,this._showNum=!1,this._lightColor=!1,this._showTip=!1,this.textArr=null,this._itemVO=null,this._goodsImage=null,this._stroke=NaN,void 0===t&&(t=91),void 0===e&&(e=100),void 0===i&&(i=!1),void 0===s&&(s=!0),void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===a&&(a=180),void 0===l&&(l=!0),r.__super.call(this),this.width=a,this._bgSize=t,this.height=e,this._isBig=i,this._showBg=s,this._showNum=n,this.textArr=o?U.COLORS_LIGHT:U.COLORS_DARK,this._showTip=l,this.mouseEnabled=!0}w(r,"com.ui.GoodsItem",t);var e=r.prototype;return e.init=function(){this._init=!0,this._goodsImage=new fh(null,this._isBig,this._showBg,this._bgSize,this._showNum),this._goodsImage.x=(this.width-this._bgSize)/2,this._showTip?(this.mouseThrough=!0,this._goodsImage.mouseEnabled=!0,this._goodsImage.on("click",this,this.onClick)):(this._goodsImage.mouseEnabled=!1,this.mouseThrough=!1),this.addChild(this._goodsImage),this.txtDesc=Me.createText("",-41,this.height+4,this.width+80,30,this,r.getTxtFormat()),0<this._stroke&&(this.txtDesc.stroke=this._stroke,this.txtDesc.strokeColor="#000000")},e.updateView=function(){this._goodsImage.data=this._itemVO,this._itemVO?(this.txtDesc.color=this.textArr[this._itemVO.color],this.txtDesc.text=this._itemVO.title):this.txtDesc.text=""},e.getItemVO=function(){return this._itemVO},e.onClick=function(t){if(this._itemVO){this._itemVO.tempNum=this._goodsImage.num;var e="";e=ur.isEquip(this._itemVO.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(this._itemVO,e)}},e.hideGoodsName=function(){this.txtDesc&&(this.txtDesc.visible=!1)},e.setGoodsNameColor=function(t){this.txtDesc&&(this.txtDesc.color=t)},e.setGoodsName=function(t){this.txtDesc&&(this.txtDesc.text=t)},I(0,e,"num",function(){return this._goodsImage.num},function(t){this._goodsImage.num=t}),I(0,e,"bgSize",function(){return this._bgSize}),I(0,e,"showNum",null,function(t){this._showNum=t,this._goodsImage.showNum(t)}),I(0,e,"goods",function(){return this._p},function(t){this._init||this.init(),(this._p=t)?(this._itemVO=ur.getItem(t.typeid),this._itemVO.tempNum=t.current_num,this._goodsImage.num=t.current_num):this._itemVO=null,this.updateView()}),I(0,e,"stroke",null,function(t){this._stroke=t,this.txtDesc&&(this.txtDesc.stroke=this._stroke,this.txtDesc.strokeColor="#000000")}),I(0,e,"lightColor",null,function(t){this.textArr=t?U.COLORS_LIGHT:U.COLORS_DARK,this.updateView()}),I(0,e,"text",function(){return this.txtDesc}),I(0,e,"dataSource",t.prototype._$get_dataSource,function(t){this._init||this.init(),null==t?this._itemVO=null:t&&t[0]&&t[0].className&&"p_tkv"==t[0].className?(this._itemVO=ur.getRewardByTkv(t[0]),this._goodsImage.showNum(t[1]),this._goodsImage.num=t[0].val):t instanceof Array?(this._itemVO=ur.getItem(t[0]),this._goodsImage.num=t[1]):t instanceof modules.pack.vo.BaseItemVO?(this._itemVO=t,this._goodsImage.num=1):"p_kv"==t.className?(this._itemVO=ur.getItem(t.id),this._goodsImage.num=t.val):"p_tkv"==t.className?(this._itemVO=ur.getRewardByTkv(t),this._goodsImage.num=t.val):0<t?(this._itemVO=ur.getItem(t),this._goodsImage.num=1):this._itemVO=null,this.updateView()}),r.getTxtFormat=function(){var t=new Qt;return t.fontSize=24,t.align="center",t.color="#000000",t},r}(y),Eh=function(t){function f(t,e,i,s,n,o,a,l,r,h,u,c,d,p){this.list=null,this.btnL=null,this.btnR=null,this.completeHanlder=null,this._data=null,this._btnShow=!1,f.__super.call(this),this.pos(i,s),this.size(t,e),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.list=new ht,this.list.size(t,e),this.addChild(this.list),this.list.itemRender=o,this.list.repeatX=a,this.list.repeatY=l,this.list.spaceX=r,this.list.hScrollBarSkin="",this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelected),this.list.renderHandler=h,this.list.on("change",this,this.checkBtnVisible);var m=(e-p)/2;this.btnL=Me.createButton("",-d,m,d,p,this),this.btnL.skin=u,this.btnR=Me.createButton("",t,m,d,p,this),this.btnR.skin=c,this._btnShow=!1,this.on("click",this,this.onClick),n&&n.addChild(this)}w(f,"com.ui.SmoothList",y);var e=f.prototype;return e.reflash=function(){this.list.refresh()},e.getItem=function(t){return this.list.getItem(t)},e.getListCell=function(t){return this.list.getCell(t)},e.onSelected=function(t){this.event("select",t)},e.onClick=function(t){switch(t.target){case this.btnL:this.turnLeft();break;case this.btnR:this.turnRight()}},e.checkBtnVisible=function(){this.btnL.visible=0<this.list.startIndex,this.btnR.visible=this.list.startIndex<this.endFirstIndex,this._btnShow&&(this.btnL.visible=this.btnR.visible=!0)},e.turnRight=function(){var t=this.list.startIndex+this.list.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},e.showButton=function(){this.btnR.visible=this.btnL.visible=!0,this._btnShow=!0},I(0,e,"data",null,function(t){this._data=t,this.list.dataSource=this._data;for(var e=0;e<this.list.content._childs.length;e++)this.list.content._childs[e].pivot=0,this.list.content._childs[e].y=(this.list.height-this.list.content._childs[e].height)/2;var i=this.list.startIndex+this.list.repeatX;i=i>this.endFirstIndex?this.endFirstIndex:i,this.list.tweenTo(i,1,this.completeHanlder)}),I(0,e,"selectedIndex",function(){return this.list.selectedIndex},function(t){this.list.selectedIndex=t,this.list.scrollTo(t)}),I(0,e,"endFirstIndex",function(){return this._data?this._data.length-this.list.repeatX:0}),f}(),Rh=function(t){function e(){this._blueDiamondImg=null,this._yearDiamondImg=null,this._nameText=null,this._nameStr=null,e.__super.call(this),this.init(),this.initEvent()}w(e,"modules.blueDiamond.blueVipShow.BlueVipOutShowBox",y);var i=e.prototype;return i.init=function(){this.height=28},i.initEvent=function(){},i.updateShowing=function(t){if(this.width=0,t){var e=t.blueInfo;if(e)if(e instanceof Array)e={is_blue_vip:"true"==e[0],is_blue_year_vip:"true"==e[1],is_super_blue_vip:"true"==e[2],blue_vip_level:e[3]},this.updateBlueDiamondShow(e.is_blue_vip,e.is_super_blue_vip,e.blue_vip_level),this.updateYearDiamondShow(e.is_blue_year_vip);else if("object"==typeof e)this.updateBlueDiamondShow(e.is_blue_vip,e.is_super_blue_vip,e.blue_vip_level),this.updateYearDiamondShow(e.is_blue_year_vip);else if("string"==typeof e){var i=e.split("#");i&&0<i.length&&(e={is_blue_vip:"true"==i[0],is_blue_year_vip:"true"==i[1],is_super_blue_vip:"true"==i[2],blue_vip_level:i[3]},this.updateBlueDiamondShow(e.is_blue_vip,e.is_super_blue_vip,e.blue_vip_level),this.updateYearDiamondShow(e.is_blue_year_vip))}var s=t.nameStr;s&&this.updateNameStr(s,t.textFormat),t.pos?(this.x=t.pos.x,this.y=t.pos.y):t.nameText&&(t.nameText instanceof laya.display.Text?this.x=t.nameText.x+t.nameText.width/2-t.nameText.textWidth/2-this.width:t.nameText instanceof laya.ui.Label?this.x=t.nameText.x+t.nameText.width/2-this.width:t.nameText instanceof com.ui.FontLabel&&(this.x=t.nameText.x),this.y=t.nameText.y+t.nameText.height/2-this.height/2)}else this.parent&&this.removeSelf()},i.updateBlueDiamondShow=function(t,e,i){if(0==t&&0==e)this._blueDiamondImg&&this._blueDiamondImg.removeSelf();else{var s=e?"modules/qqBlueVip/superblue28":t?"modules/qqBlueVip/blue28":null;s&&0<i?(this._blueDiamondImg=this._blueDiamondImg||new et,this._blueDiamondImg.skin=s+i+".png",this.addChild(this._blueDiamondImg),this.width=28):this._blueDiamondImg&&this._blueDiamondImg.removeSelf()}},i.updateYearDiamondShow=function(t){t?(this._yearDiamondImg=this._yearDiamondImg||new et,this._yearDiamondImg.skin="modules/qqBlueVip/yearblue28.png",this.addChild(this._yearDiamondImg),this._blueDiamondImg&&this._blueDiamondImg.parent?(this._yearDiamondImg.x=31,this.width+=31):this.width+=this._yearDiamondImg.width):this._yearDiamondImg&&this._yearDiamondImg.removeSelf()},i.updateNameStr=function(t,e){this._nameStr=t,this._nameStr?(this._nameText=this._nameText||new jt,this._nameText.text=this._nameStr,e&&(this._nameText.fontSize=e.fontSize||24,this._nameText.color=e.color||"#ffffff",this._nameText.leading=e.leading||0,this._nameText.align=e.align||"left"),this.addChild(this._nameText),this._nameText.x=0<this.width?this.width:3+this.width,this.width+=3+this._nameText.textWidth):this._nameText&&this._nameText.removeSelf()},e.SIZE_CONST=28,e.DIFF_CONST=3,e}(),Oh=function(t){function o(){this._descBox=null,this._textArr=null,this._startY=NaN,o.__super.call(this),this.init(),this.initEvent()}w(o,"modules.blueDiamond.part.BuleDiamondTip",et);var e=o.prototype;return e.init=function(){this.initShow()},e.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},e.onDisplay=function(){},e.onUnDisplay=function(){},e.initShow=function(){this._textArr=[],this.skin="modules/icon/shopTipBg.png",this.sizeGrid="14,42,16,32",this._descBox=new y,this.addChild(this._descBox)},e.updateTipShow=function(t){if(!(t<=0)){var e=Zl.ins().getIconPosByIconId(t);if(e){var i;if(this.pos(e.x,e.y),5007==t?i=o.TIP_DESC[1]:5012==t&&(i=o.TIP_DESC[0]),this._descBox.width=0,this._descBox.height=0,this._startY=0,this.initDescText(),i&&0<i.length)for(var s=0;s<i.length;s++){var n=i[s];n&&this.createDescItem(n,0==s?U.COLORS_LIGHT[2]:"#ffffff",s)}this.width=this._descBox.width+50,this.height=this._descBox.height+20,this._descBox.x=this.width/2-this._descBox.width/2,this._descBox.y=this.height/2-this._descBox.height/2,this.x=e.x-this.width/3,this.y=e.y+100}}},e.initDescText=function(){for(var t=0;t<this._textArr.length;t++)this._textArr[t].innerHTML=""},e.createDescItem=function(t,e,i){var s=this._textArr[i];s||(s=new K,this._textArr[i]=s),s.innerHTML=Z.font(t,e),s.width=300,this._descBox.width=300,s.height=s.contextHeight,s.y=this._startY+5,this._startY+=s.height+5,this._descBox.addChild(s)},_(o,["TIP_DESC",function(){return this.TIP_DESC=[["从QQ游戏大厅登陆享受以下特权","1.新手注册礼包","2.每天活跃礼包","3.游戏成长礼包"],["蓝钻用户可以享受以下特权","1.蓝钻新手礼包","2.购买元宝8折优惠","3.更多蓝钻特权，请关注蓝钻官网"]]}]),o}(),Lh=function(t){function e(){this.good=null,e.__super.call(this),this.good=new Ah(105,105,!0,!0,!0),this.addChild(this.good)}return w(e,"modules.exercise.rune.view.RunePackItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){this.good.dataSource=t}),e}(y),Dh=function(t){function e(t){this._nameColor=null,this.txtName=null,this.bigTxtNum=null,this._val=null,void 0===t&&(t="#cab2a8"),e.__super.call(this,null,!1,!0,91,!1,"com/ui/goodsBgs1.png"),this._nameColor=t,this.init()}w(e,"modules.athletics.encounter.view.DropItem",fh);var i=e.prototype;return i.init=function(){this.width=91,this.height=125,this.txtName=Me.createText("",-20,95,131,30,this,H.defaultTextFormat),this.txtName.align="center",this.txtName.fontSize=20,""!=this._nameColor&&(this.txtName.color=this._nameColor),this.bigTxtNum=Me.createText("",0,63,88,30,this,H.defaultTextFormat),this.bigTxtNum.color="#ffffff",this.bigTxtNum.fontSize=20,this.bigTxtNum.align="right",this.bigTxtNum.zOrder=100},i.setDrop=function(t){if(this._val=t){var e=ur.getRewardByTkv(t);e&&(this.data=e,this.txtName.text=e.title,this.num=t.val,""==this._nameColor&&(this.txtName.color=U.getColorDark(e.color)),1<t.val?this.bigTxtNum.text=""+t.val:this.bigTxtNum.text="")}},I(0,i,"val",function(){return this._val}),e}(),Nh=function(t){function o(){o.__super.call(this),this.on("display",this,this._$5_onAddToStage),this.on("undisplay",this,this._$5_onRemoveFromStage)}w(o,"com.scene.unit.AfterPhantom",_h);var e=o.prototype;return e._$5_onRemoveFromStage=function(){_t.removeFromFrame(this,this.loop)},e._$5_onAddToStage=function(){_t.addToFrame(this,this.loop)},e.loop=function(){this.alpha-=.02,this.alpha<=0&&this.remove()},e.remove=function(){this.removeSelf(),o.pool.push(this)},o.getOne=function(){return 0<o.pool.length?o.pool.pop():new o},o.show=function(t,e,i,s){var n=o.getOne();return n.x=e,n.y=i,_e.mid.addChild(n),n.resetSkin(t.pvo.skin,1),n.play("attack",t.curDir),n.gotoStop(s),n.alpha=.5+.5*s,n},o.pool=[],o}(),Vh=function(e){function t(){this.allLoadFun=null,t.__super.call(this),this._dir=4,this.hideShadow()}w(t,"com.scene.unit.base.PanelRichAvatar",e);var i=t.prototype;return i.onResourceComplete=function(t){e.prototype.onResourceComplete.call(this,t),this.checkUrlDown()&&null!=this.allLoadFun&&this.allLoadFun.run()},i.checkUrlDown=function(){var t;for(var e in this.partsURL)if(t=this.partsURL[e],!Mt.hasComplete(t))return!1;return!0},i.createURLS=function(t,e){this._wingURL=Pe.createActPartURL(this._skin,"wing",t,this.status,e),this._bodyURL=Pe.createActPartURL(this._skin,"body",t,this.status,e),this._weaponURL=Pe.createActPartURL(this._skin,"weapon",t,this.status,e),"sit"!=t&&(null!=this._wingURL&&(this._wingURL=this._wingURL.replace("unit","unit2")),null!=this._bodyURL&&(this._bodyURL=this._bodyURL.replace("unit","unit2")),null!=this._weaponURL&&(this._weaponURL=this._weaponURL.replace("unit","unit2")),null!=this.standURL&&(this.standURL=this.standURL.replace("unit","unit2")))},i.resetPartNum=function(){for(var t=this.parts.length>this.partsURL.length?this.parts.length:this.partsURL.length,e=0;e<t;e++)if(null!=this.partsURL[e]){null==this.parts[e]&&(this.parts[e]=rh.getOne()),null==this.parts[e].parent&&this.addChild(this.parts[e]),this.parts[e].isAnimal=!0;var i=Pe.getPartSkinID(this.partsURL[e],this._wingURL,this._bodyURL,this._weaponURL,this._skin);this.parts[e].resetURL(this.partsURL[e],i),this.parts[e].resetStandURL(this.standURL),this.parts[e].moveSpeed=this._moveSpeed,this.parts[e].scaleX=1,this.parts[e].scaleY=1,this.partsURL[e]==this._bodyURL?this.parts[e].setEndHandler(Q.create(this,this.onActionEnd)):this.parts[e].setEndHandler(null)}else null!=this.parts[this.parts.length-1]&&(this.parts[this.parts.length-1].unload(),this.parts.pop())},i.resetSkin=function(t,e,i){void 0===i&&(i=!1),this._sex=e,(0==Pe.isEqual(t,this._skin)||i)&&(this.standURL=Pe.createActPartURL(t,"body","stand",0,this._dir),this._newBodyURL=Pe.createActPartURL(t,"body","stand",this.status,this._dir),this.standURL&&(this.standURL=this.standURL.replace("unit","unit2")),this._newBodyURL&&(this._newBodyURL=this._newBodyURL.replace("unit","unit2")),this._skin=t,this.toChangeLook()),0==this._isStop&&Mt.addToLoop(this.onlyKey,this,this.step)},i.resetState=function(t){if(this.status!=t){this.status=t,this.standURL=Pe.createActPartURL(this._skin,"body","stand",this.status,this._dir),this._newBodyURL=Pe.createActPartURL(this._skin,"body","stand",this.status,this._dir),this.standURL&&(this.standURL=this.standURL.replace("unit","unit2")),this._newBodyURL&&(this._newBodyURL=this._newBodyURL.replace("unit","unit2")),this.toChangeLook();var e,i=Pe.statusToAct(this.status,this._act);if(i!=this._act)return"sit"==i&&(this._dir=4),void this.play(i,this.curDir);if(1103==t)return void this.play(i,4);for(var s in this.parts)0==(e=this.parts[s]).isBody&&0==Mt.hasComplete(e.url)&&e.clearBitmap()}},i.play=function(t,e,i,s){void 0===i&&(i=4),void 0===s&&(s=!1),null==this._skin||t==this._act&&e==this._dir&&0==s||"hurt"==t&&"stand"!=this._act||(1==this.checkBodyURLChange(t,this._act,e,this._dir,s)?(this.status=Pe.actToStatus(t,this.status),this._newBodyURL=Pe.createActPartURL(this._skin,"body",t,this.status,e),this._newBodyURL&&(this._newBodyURL=this._newBodyURL.replace("unit","unit2")),t!=this._act&&this.checkHeightChange(this._newBodyURL,t,e),this._act=t,this._dir=e,this.createURLS(this._act,this._dir),this.sortURLS(),this.resetPartNum(),this.resetPartsAct(),this.step()):(this._act=t,this._dir=e,(this._wingURL||this._weaponURL)&&(this.sortURLS(),this.resetPartNum()),this.resetPartsAct(),0==this._isStop&&(0==this.visible||this.parent instanceof com.scene.unit.MyPal)&&this.step()))},t}(_h),Bh=function(t){function e(){this.unitName=null,this._pvo=null,this.monsterVO=null,this.secondCount=0,this._rarity=0,this.skinID=0,this.deadX=NaN,this.deadY=NaN,this.hadDead=!1,this.isCollect=!1,this.lastShakeTime=0,this.shakeKey=0,this.delayHurtKey=0,this.delayDieKey=0,this.delayAttackKey=0,this.scpBottomEff=null,e.__super.call(this),this.unitType=2}w(e,"com.scene.unit.Monster",t);var i=e.prototype;return i.loop=function(){t.prototype.loop.call(this),this.shadow.loop(this),this.unitName.loop(this,this._bodyHeight)},i.init=function(){t.prototype.init.call(this),this.shadow=hh.create(),this.avatar=new gh(!0),this.addChild(this.avatar),this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange),this.unitName=new ge},i.onHeightChange=function(t){null!=this.monsterVO&&0!=this.monsterVO.h||(this._bodyHeight=t+6)},i.reset=function(t,e){if(this.inMapSlice=!0,this.speed=t.move_speed,this.avatar.moveSpeed=this.speed,this.isCollect=!1,this._pvo=t,this.updateBuff(t.buff_show),this.unitName.updateBlood(t.hp,t.max_hp),1==e){this.id=t.monster_id,this.status=0,this.x=Ot.posToX(t.pos),this.y=Ot.posToY(t.pos),this.shadow.show(),this.monsterVO=we.getMonsterVO(t.type_id),4!=this.monsterVO.rarity&&(this.unitName.show(),this.unitName.loop(this,this._bodyHeight)),this.reallyHP=t.hp,this.maxHp=t.max_hp,this.alpha=1,_t.clearTimeout(this.delayDieKey),_t.clearTimeout(this.delayHurtKey),fe.clearDieMove(this.onlyKey),this.hadDead=!1,null==this.monsterVO&&O.show("缺少配置，怪物类型为："+t.type_id),this.isBoss=3==this.monsterVO.rarity,this._bodyHeight=this.monsterVO.h+6;var i=Ot.posToDir(t.pos),s="unit/monster/"+this.monsterVO.skin,n="unit/monster/"+this.monsterVO.skin+"_attack",o="unit/monster/"+this.monsterVO.skin+"_hurt";this.unitName.reset(t,this.monsterVO.rarity),this.avatar.resetURL(s,n,o,null);var a=Pe.getScale(t.skin_id);this.avatar.scaleX=a,this.avatar.scaleY=a,this.play("stand",i),this.avatar.resume(),this.avatar.body.filters=null,this._isMoving=!1,this.prePt=Rt.getOne(Ot.posToTx(t.pos),Ot.posToTz(t.pos)),this.setWeak(Ve.checkAlphaCell(this.prePt))}},i.runByPos=function(t){if(3!=this._status){this.startPos.x=this.x,this.startPos.y=this.y,this.endPos=Ot.posToPoint(t),this.startTime=S.now();var e=Ve.getDretion(this.x,this.y,this.endPos.x,this.endPos.y),i=this.startPos.distance(this.endPos.x,this.endPos.y),s=99999;if(0!=this.speed)s=i/Ve.getRealSpeed(this.speed,e);this.velocity.x=(this.endPos.x-this.startPos.x)/s,this.velocity.y=(this.endPos.y-this.startPos.y)/s,this.endTime=this.startTime+1e3*s,this._isMoving=!0,this.play("walk",e)}},i.stateConver=function(t){return 3==t?3:0},i.play=function(t,e){void 0===e&&(e=-1),"hurt"!=t&&("hurt"==t&&"hurt"==this.curAct||(-1==e&&(e=this.curDir),this.reallyHP<=0&&"attack"==t||this.avatar.play(t,e)))},i.onBloodDown=function(t){this._pvo&&(this._pvo.hp=t,this.unitName.updateBlood(t,this._pvo.max_hp))},i.gotoStop=function(t){this.avatar.gotoStop(t)},i.remove=function(){this._pvo=null,t.prototype.remove.call(this),xe.disposeMonster(this),this.alpha=1,this.shadow.hide(),this.unitName.hide()},i.getParts=function(){return this.avatar.body},i.unShowUnitName=function(){this.unitName.hideTextAndBar()},i.showUnitName=function(){this.unitName.showTextAndBar()},i.setNameVisible=function(t){this.unitName&&this.unitName.visible(t)},i.showSpcBottomEff=function(){this.scpBottomEff=this.scpBottomEff||b.getOne(),this.scpBottomEff.setEndHandler(Q.create(this,this.unloadSpcBottomEff)),this.scpBottomEff.loadAndPlay("unit/effect/strangeFireMonsterBottom","default"),this.addChild(this.scpBottomEff)},i.unloadSpcBottomEff=function(){this.scpBottomEff&&this.scpBottomEff.unload()},I(0,i,"pvo",function(){return this._pvo}),I(0,i,"visible",t.prototype._$get_visible,function(t){this.isCollect&&(t=!1,this.shadow.hide()),h.superSet(yh,this,"visible",t),t&&this.monsterVO&&4!=this.monsterVO.rarity?this.unitName.show():this.unitName.hide(),t?this.shadow.show():this.shadow.hide()}),I(0,i,"campID",function(){return this._pvo?this._pvo.camp_id:0}),e}(yh),Mh=function(e){function t(){this.unitName=null,this._pvo=null,this.zazenEffect=null,this.dizzyEffect=null,this.fellowShipEffect=null,this.now=0,this.levelEff=null,this.palSkin=new Object,this.palSkin.className="p_skin",t.__super.call(this),this.unitType=1}w(t,"com.scene.unit.Pal",e);var i=t.prototype;return i.init=function(){e.prototype.init.call(this),this.shadow=hh.create(),this.avatar=new _h,this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange),this.addChild(this.avatar),this instanceof com.scene.unit.MyPal==0&&(this.unitName=new ye)},i.onHeightChange=function(t){this._bodyHeight=t+6},i.loop=function(){e.prototype.loop.call(this),this.shadow.loop(this),null!=this.unitName&&this.unitName.loop(this,this._bodyHeight)},i.reset=function(t,e){this.id=t.pal_id,this.inMapSlice=!0,this.speed=t.move_speed,13==this.status&&(e=!1),this.doStatus(t),this._pvo=t,this.palSkin.wing=this._pvo.skin.wing,this.palSkin.weapon=this._pvo.skin.weapon,this.palSkin.body=this._pvo.skin.body,this.palSkin.mount=this._pvo.skin.mount,this.palSkin.track=this._pvo.skin.track,8!=this.status&&(this.avatar.curDir=Ot.posToDir(t.pos)),this.checkPalSkinShow(),this.updateSkin(this._pvo.skin,e),this.resetStatus(this.status),this.avatar.moveSpeed=this.speed,this.updateBuff(t.buff_show),null!=this.unitName&&this.unitName.reset(t),1==e&&(this.shadow.show(),null!=this.unitName&&this.unitName.show(),this.x=Ot.posToX(t.pos),this.y=Ot.posToY(t.pos),this.reallyHP=t.hp,this.hideAvatar=!1,this.prePt=Ot.pos2Pt(t.pos),1!=ua.isFamilyFightMap()&&this.setWeak(Ve.checkAlphaCell(this.prePt)),8!=this.status&&1101!=this.status&&1103!=this.status&&1102!=this.status&&this.normal())},i.onSpeedChange=function(t){this._pvo&&(this._pvo.move_speed=t),this.speed=t,this.avatar.moveSpeed=this.speed},i.resetStatus=function(t){this.status=t,this.updateState(this.status)},i.doStatus=function(t){this.status=t.state},i.checkPalSkinShow=function(){if(ua.isBattlefieldOfShuraMap()&&ds.isUnShowRoleFashion||ua.isCross()&&Xs.unifyFashion)switch(this._pvo.category){case 1:1==this._pvo.sex?(this._pvo.skin.body=212000011,this._pvo.skin.weapon=1120000111,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011)):2==this._pvo.sex&&(this._pvo.skin.body=212000012,this._pvo.skin.weapon=1120000121,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011));break;case 2:1==this._pvo.sex?(this._pvo.skin.body=212000021,this._pvo.skin.weapon=1120000212,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011)):2==this._pvo.sex&&(this._pvo.skin.body=212000022,this._pvo.skin.weapon=1120000222,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011));break;case 3:1==this._pvo.sex?(this._pvo.skin.body=212000031,this._pvo.skin.weapon=1120000313,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011)):2==this._pvo.sex&&(this._pvo.skin.body=212000032,this._pvo.skin.weapon=1120000323,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011));break;case 4:1==this._pvo.sex?(this._pvo.skin.body=212000041,this._pvo.skin.weapon=1120000414,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011)):2==this._pvo.sex&&(this._pvo.skin.body=212000042,this._pvo.skin.weapon=1120000424,0<this._pvo.skin.wing&&(this._pvo.skin.wing=431000011))}},i.resetPalSkin=function(){this.palSkin&&(this._pvo.skin.mount=this.palSkin.mount,this._pvo.skin.track=this.palSkin.track,this._pvo.skin.body=this.palSkin.body,this._pvo.skin.weapon=this.palSkin.weapon,this._pvo.skin.wing=this.palSkin.wing,this._pvo.skin.track=this.palSkin.track,this.updateSkin(this._pvo.skin,!0))},i.setAutoSkin=function(){this.checkPalSkinShow(),this.updateSkin(this._pvo.skin,!0)},i.updateSkin=function(t,e){this.avatar.isMonsterBody=!1,this.avatar.resetSkin(this.pvo.skin,this._pvo.sex,e)},i.updateState=function(t){this.avatar.resetState(t)},i.changeCell=function(t){e.prototype.changeCell.call(this,t),(ua.isBattlefieldOfShuraMap()||ua.isCross())&&(this instanceof com.scene.unit.MyPal||(this._pvo.skin.track=0)),this._pvo&&this._pvo.skin.track&&this.visible&&this.showFootEff()},i.showFootEff=function(){if(!(S.now()-this.now<200)){this.now=S.now();var t=kt.getItemByClass("footBm",b);t.loadAndPlay("unit/effect/footEff_"+this._pvo.skin.track),t.pos(this.x,this.y+23),t.setEndHandler(Q.create(this,function(){t.unload(),kt.recover("footBm",t),t=null})),_e.low.addChild(t)}},i.play=function(t,e){void 0===e&&(e=-1),"hurt"!=t&&com.scene.unit.base.SceneUnit.prototype.play.call(this,t,e)},i.remove=function(){e.prototype.remove.call(this),xe.disposeRole(this),this._pvo=null,this.zazenEffect&&this.zazenEffect.unload(),this.dizzyEffect&&this.dizzyEffect.unload(),this.fellowShipEffect&&this.fellowShipEffect.unload(),this.levelEff&&this.levelEff.unload(),this.avatar&&this.avatar.unload(),this.shadow.hide(),null!=this.unitName&&this.unitName.hide()},i.resetVisible=function(){0==this.inScreen||this.hideLimit||Se.hideAll||Se.justHideRole?Se.justHideRole?(this.visible=!1,this.unitName&&(this.unitName.hideBar(),this.unitName.hideTitle())):this.unShowPal():this.showPal()},i.unShowPal=function(){this.visible=!1,this.shadow.hide(),this.unitName&&this.unitName.hide()},i.showPal=function(){this.visible=!0,this.shadow.show(),this.unitName&&(this.unitName.show(),ua.isCrossMain()?this.unitName.hideBar():this.unitName.showBar(),(ua.isBattlefieldOfShuraMap()||ua.isCross())&&ds.isUnShowRoleFashion?this.unitName.hideTitle():this.unitName.showTitle(),Bt.isQQyxdt()&&this.showBlueVip(ua.isBeachMap?null:this._pvo))},i.attack=function(t,e){3!=this.status&&(this.play(t,e),this._isMoving=!1)},i.die=function(){e.prototype.die.call(this),null!=this.pvo&&(this.pvo.pos=Ot.getPos(this.curPt.x,this.curPt.z,this.curDir)),null!=this.unitName&&null!=this._pvo&&this.unitName.updateBlood(0,this._pvo.max_hp),T.dispatch("PAL_DIE",this.pvo.pal_id)},i.reNotePos=function(){null!=this.pvo&&(this.pvo.pos=Ot.getPos(this.pt.x,this.pt.z,this.curDir))},i.onBloodDown=function(t){this._pvo&&(this._pvo.hp=t,null!=this.unitName&&this.unitName.updateBlood(t,this._pvo.max_hp))},i.afterImage=function(t,e){for(var i=(t-this.x)/5,s=(e-this.y)/5,n=0;n<5;n++)Nh.show(this,this.x+i*n,this.y+s*n,n/5)},i.runByPos=function(t,e){if(3!=this._status){this.startPos.x=this.x,this.startPos.y=this.y,this.endPos=t,this.startTime=S.now();var i=this.startPos.distance(this.endPos.x,this.endPos.y),s=99999;if(0!=this.speed)s=i/Ve.getRealSpeed(this.speed,e);this.velocity.x=(this.endPos.x-this.startPos.x)/s,this.velocity.y=(this.endPos.y-this.startPos.y)/s,this.endTime=this.startTime+1e3*s,this._isMoving=!0,this.play("walk",e)}},i.updateBattlefieldLevelEff=function(t){if(t<=0||ua.isBattlefieldOfShuraMap()&&ds.isUnShowLevelEff)this.unloadLevelEff();else{var e=1;5<t&&t<=10?e=2:10<t&&t<=15?e=3:15<t&&t<=20&&(e=4),this.levelEff=this.levelEff||b.getOne(),this.levelEff.loadAndPlay("unit/effect/battlefieldLv"+e,"default",0,!0),this.addChild(this.levelEff)}},i.unloadLevelEff=function(){this.levelEff&&this.levelEff.unload()},i.getIsDie=function(){return 3==this._status},i.addBattlefieldScoreImg=function(t){this.unitName&&this.unitName.showScoreImg(t)},i.showBlueVip=function(t){this.unitName&&t&&t.blue_vip?this.unitName.showBlueVip(t.blue_vip):this.unitName&&this.unitName.removeBlueVipBox()},I(0,i,"hideAvatar",e.prototype._$get_hideAvatar,function(t){}),I(0,i,"pvo",function(){return this._pvo}),I(0,i,"palState",function(){return this.pvo?this.pvo.state:0}),I(0,i,"category",function(){return this._pvo?this._pvo.category:0}),t}(yh),Fh=function(t){function e(){this.unitName=null,this._pvo=null,this._masPos=null,this._mas=null,this.skinID=0,this.dis=0,this.noMastarCount=0,e.__super.call(this),this.unitType=3}w(e,"com.scene.unit.Pet",t);var i=e.prototype;return i.loop=function(){0==this._isMoving&&0==this.status&&this.doNextMove(),1==this._isMoving&&this.exeMove(),this.shadow.loop(this),this.unitName.loop(this,this._bodyHeight),null!=this._mas?(this.dis=(this.x-this._mas.x)*(this.x-this._mas.x)+(this.y-this._mas.y)*(this.y-this._mas.y),36e4<=this.dis&&(this.x=this._mas.x,this.y=this._mas.y,this.normal())):this._pvo&&(this._mas=Se.getUnit(this._pvo.main_pal_id))},i.init=function(){t.prototype.init.call(this),this.shadow=hh.create(),this.avatar=new gh(!0),this.addChild(this.avatar),this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange),this.unitName=new ve},i.onHeightChange=function(t){this._bodyHeight=t+6},i.reset=function(t,e){if(this.speed=t.move_speed,this.avatar.moveSpeed=this.speed,this._pvo=t,this.skinID=t.skin_id,this.inMapSlice=!0,1==e){this.id=t.pet_id,this._mas=Se.getUnit(t.main_pal_id),this.status=0,this.x=Ot.posToX(t.pos),this.y=Ot.posToY(t.pos),this.shadow.show(),this.unitName.show(),this.unitName.loop(this,this._bodyHeight),this.alpha=1;var i=Ot.posToDir(t.pos),s="unit/monster/"+t.skin_id,n="unit/monster/"+t.skin_id+"_attack",o="unit/monster/"+t.skin_id+"_hurt";this.unitName.reset(t),this.avatar.resetURL(s,n,o,null);var a=Pe.getScale(t.skin_id);this.avatar.scaleX=a,this.avatar.scaleY=a,this.play("stand",i),this.avatar.resume(),this.avatar.body.filters=null,this._isMoving=!1,this.prePt=Rt.getOne(Ot.posToTx(t.pos),Ot.posToTz(t.pos)),this.setWeak(Ve.checkAlphaCell(this.prePt))}},i.changeMaster=function(t){this._mas=Se.getUnit(t)},i.onArriveRunEnd=function(){if(this._isMoving=!1,this._mas){var t=this._mas.pt;1==Rt.isEqual(t,this._masPos)&&"walk"==this.curAct&&this.play("stand",this._mas.curDir)}},i.gotoStop=function(t){this.avatar.gotoStop(t)},i.doNextMove=function(){if(null!=this._mas){var t=this._mas.pt;if(null==this._masPos||0==Rt.isEqual(t,this._masPos)){this._isMoving=!0,null==this._masPos&&(this._masPos=new Rt),this._masPos.x=t.x,this._masPos.z=t.z,this.startPos.x=this.x,this.startPos.y=this.y,this.startTime=S.now(),this.tarPt=Ve.getPetPt(this._masPos,this._mas.curDir,2),this.endPos=Ot.ptToPoint(this.tarPt);var e=Ve.getDretion(this.x,this.y,this.endPos.x,this.endPos.y),i=this.startPos.distance(this.endPos.x,this.endPos.y);if(700<i)return this.x=this.endPos.x,this.y=this.endPos.y,void this.normal();var s=99999;if(0<this.speed)s=i/Ve.getRealSpeed(this.speed,e);this.velocity.x=(this.endPos.x-this.startPos.x)/s,this.velocity.y=(this.endPos.y-this.startPos.y)/s,this.endTime=this.startTime+1e3*s,this._isMoving=!0,this.play("walk",e)}else this.onArriveRunEnd();this.noMastarCount=0}else this.noMastarCount++,100<this.noMastarCount&&this.remove()},i.normal=function(){this._isMoving=!1,this.path=null,this.play("stand",this.avatar.curDir)},i.resetVisible=function(){0==this.inScreen||this.hideLimit||Se.hideAll||Se.justHideRole?(this.visible=!1,this.shadow.hide(),this.unitName&&this.unitName.hide()):(this.visible=!0,this.shadow.show(),this.unitName&&this.unitName.show())},i.remove=function(){this._pvo=null,t.prototype.remove.call(this),xe.disposePet(this),this.alpha=1,this.shadow.hide(),this.unitName.hide()},I(0,i,"mas",function(){return this._mas}),I(0,i,"pvo",function(){return this._pvo}),I(0,i,"visible",t.prototype._$get_visible,function(t){h.superSet(yh,this,"visible",t),t?this.shadow.show():this.shadow.hide(),t?this.unitName.show():this.unitName.hide()}),e}(yh),Uh=function(t){var e;function i(){this.pvo=null,this.unitName=null,this._graph=null,this._hitA=null,i.__super.call(this),this.unitType=8}w(i,"com.scene.unit.NPC",t);var s=i.prototype;return s.loop=function(){t.prototype.loop.call(this),this.shadow.loop(this),this.unitName.loop(this,this.bodyHeight)},s.init=function(){t.prototype.init.call(this),this._graph=new X,this._hitA=new $,this.mouseEnabled=!0,this.shadow=hh.create(),this.avatar=new gh(!0,!0),this.addChild(this.avatar),this.avatar.heightChangeHandler=Q.create(this,this.onHeightChange),this.unitName=new e,this.on("click",this,this.onClick)},s.onClick=function(t){t.stopPropagation(),this.pvo&&(me.linkTo(this.pvo.linkID),console.log("点击NPC"+this.pvo.id))},s.reset=function(t){if(this._bodyHeight=t?t.bodyHeight:0,this.pvo=t,this.pvo){this.id=t.id,this.avatar.resetURL("unit/npc/"+this.pvo.skinID);var e=Pe.getScale(this.pvo.skinID);this.avatar.scaleX=e,this.avatar.scaleY=e,this.play(this.pvo.act,0),this.width=t.bodyWidth,this.height=t.bodyHeight,this._graph&&this._hitA&&(this._graph.drawRect(-this.width/2,-this.height,this.width,this.height,"#ffffff"),this._hitA.hit=this._graph),this.hitArea=this._hitA,this.shadow.show(),this.unitName.reset(t),this.unitName.show(),this.unitName.loop(this,this._bodyHeight)}},s.onHeightChange=function(t){null!=this.pvo&&0!=this.pvo.bodyHeight||(this._bodyHeight=t+6)},s.setNameVisible=function(t){this.unitName&&this.unitName.visible(t)},s.remove=function(){this.pvo=null,t.prototype.remove.call(this),kt.recover("NPC",this),this.shadow.hide(),this.unitName.hide()},I(0,s,"visible",t.prototype._$get_visible,function(t){h.superSet(yh,this,"visible",t),t?this.unitName.show():this.unitName.hide(),t?this.shadow.show():this.shadow.hide()}),i.__init$=function(){e=function(){function t(){this.txtJob=null,this.txtName=null,this.txtJob=new jt,this.txtJob.color=U.getColorDark(2),this.txtName=new jt,this.txtName.color="#ffffff",this.txtName.stroke=this.txtJob.stroke=1,this.txtName.strokeColor=this.txtJob.strokeColor="#000000",this.txtName.fontSize=this.txtJob.fontSize=26,this.txtName.width=this.txtJob.width=200,this.txtName.align=this.txtJob.align="center"}w(t,"");var e=t.prototype;return e.show=function(){_e.unitNameText.addChild(this.txtJob),_e.unitNameText.addChild(this.txtName)},e.hide=function(){this.txtJob.removeSelf(),this.txtName.removeSelf()},e.visible=function(t){this.txtJob.visible=t,this.txtName.visible=t},e.reset=function(t){t&&(this.txtJob.text=t.jobName,this.txtName.text=t.name)},e.loop=function(t,e){this.txtName.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.txtName.y=Math.floor((_e.mid.y+t.y-e-25)*_e.scale),this.txtJob.x=Math.floor((_e.mid.x+t.x)*_e.scale-100),this.txtJob.y=Math.floor((_e.mid.y+t.y-e-44)*_e.scale)},t}()},i}(yh),Gh=(function(t){function e(){this.txtScore=null,this.imgSelect=null,e.__super.call(this),this.init()}w(e,"modules.refineSoulPalace.view.RefineSoulGoodsItem",fh);var i=e.prototype;i.init=function(){this.txtScore=this.txtScore||new jt,this.txtScore.pos(3,99),this.txtScore.text="评分:666",this.txtScore.fontSize=18,this.txtScore.align="center",this.txtScore.color="#5d3924",this.addChild(this.txtScore),this.imgSelect=this.imgSelect||new et,this.imgSelect.width=105,this.imgSelect.height=105,this.imgSelect.skin="com/ui/selectedBig.png",this.imgSelect.pos(-7,-7),this.imgSelect.visible=!1,this.addChild(this.imgSelect)},i.update=function(){this.pData=this._dataSource,this.score?(this.txtScore.visible=!0,this.txtScore.text="评分:"+this.score,this.txtScore.color=U.getColorDark(this.vo.color)):this.txtScore.visible=!1},I(0,i,"dataSource",function(){return this._dataSource},function(t){for(var e in this._dataSource=t,this._dataSource)this.hasOwnProperty(e)&&(this[e]=this._dataSource[e]);this.update()}),I(0,i,"score",function(){return this._dataSource?ea.getSoulStoenScoreById(this._dataSource.id):0}),I(0,i,"quality",function(){return this._dataSource?ea.getSoulStoenQualityById(this._dataSource.id):0}),I(0,i,"vo",function(){return this._data?ur.getItem(this._dataSource.typeid):null})}(),function(t){function e(){this.imgBottom=null,this.imgPow=null,this.imgNum=null,this.imgAdd=null,e.__super.call(this)}return w(e,"ui.modules.PowerNumberUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/PowerNumber")},e}()),Hh=function(t){function e(){this.closeBtn=null,this.yesBtn=null,this.cancelBtn=null,this.titleTxt=null,this.valNumBox=null,this.btnAdd=null,this.btnCut=null,this.valTxt=null,this.descStartTxt=null,this.descEndTxt=null,this.remaskTxt=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActBuyGoodsAlertUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActBuyGoodsAlert")},e}(),Wh=function(t){function e(){this.bg=null,this.imgHead=null,this.imgTitleBg=null,this.btnClose=null,this.box=null,this.spView=null,this.list=null,this.btnRight=null,this.imgF2=null,this.imgF1=null,this.btnClose2=null,this.btnLeft=null,this.imgTitle=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActivityCommonPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActivityCommonPanel")},e}(),qh=function(t){function e(){this.bg=null,this.imgIcon=null,this.num=null,e.__super.call(this)}return w(e,"ui.modules.activity.baguaFurnace.BaguaFurnaceItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/baguaFurnace/BaguaFurnaceItem")},e}(),Yh=function(t){function e(){this.imgTop=null,this.imgMaterial=null,this.gainBtn=null,this.help=null,this.actTime=null,this.labelHas=null,this.fireNum=null,this.desTip=null,this.des=null,this.page=null,this.laojun=null,this.imgHas=null,this.xiantongBtn=null,this.laojunBtn=null,this.light=null,this.extraFire=null,this.extra=null,this.previewBtn=null,this.list1=null,this.list2=null,this.labelOne=null,this.labelTen=null,this.countDown=null,this.spPro=null,this.txtDisplay=null,this.duble=null,e.__super.call(this)}return w(e,"ui.modules.activity.baguaFurnace.BaguaFurnaceLaojunViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/baguaFurnace/BaguaFurnaceLaojunView")},e}(),Xh=function(t){function e(){this.closeBtn1=null,this.pagePreview=null,this.txtTalisman=null,this.talisman=null,this.immediateBtn=null,this.box=null,this.sp=null,this.tab=null,this.closeBtn2=null,e.__super.call(this)}return w(e,"ui.modules.activity.baguaFurnace.BaguaFurnaceViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/baguaFurnace/BaguaFurnaceView")},e}(),Kh=function(t){function e(){this.imgTop=null,this.imgMaterial=null,this.gainBtn=null,this.help=null,this.actTime=null,this.labelHas=null,this.fireNum=null,this.desTip=null,this.des=null,this.page=null,this.imgHas=null,this.xiantongBtn=null,this.laojunBtn=null,this.light=null,this.extraFire=null,this.extra=null,this.list1=null,this.list2=null,this.labelOne=null,this.labelTen=null,this.spPro=null,this.txtDisplay=null,this.duble=null,e.__super.call(this)}return w(e,"ui.modules.activity.baguaFurnace.BaguaFurnaceXiantongViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/baguaFurnace/BaguaFurnaceXiantongView")},e}(),jh=function(t){function e(){this.imgBg=null,this.imgHelp=null,this.txt1=null,this.txt2=null,this.txtLeftTime=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.activity.billboard.Billboard1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/billboard/Billboard1")},e}(),Qh=function(t){function e(){this.txtExchangeNum=null,this.btnExchange=null,this.imgRedPoint=null,e.__super.call(this)}return w(e,"ui.modules.activity.exchange.ActExchangeItem1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/exchange/ActExchangeItem1")},e}(),zh=function(t){function e(){this.btnExchange=null,this.imgExchange=null,this.spItems=null,this.txtExchangeNum=null,this.imgRedPoint=null,e.__super.call(this)}return w(e,"ui.modules.activity.exchange.ActExchangeItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/exchange/ActExchangeItem2")},e}(),$h=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.activity.exchange.ActExchangeViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/exchange/ActExchangeView")},e}(),Zh=function(t){function e(){this.imgBg=null,this.txtInfo=null,this.imgIcon=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.activity.exchange.ACTGoodsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/exchange/ACTGoodsItem")},e}(),Jh=function(t){function e(){this.cardBg=null,this.cardContxtSp=null,this.origCost=null,this.preCost=null,this.missionTxt=null,this.nameTxt=null,this.goldimg1=null,this.goldimg2=null,this.itemSp=null,e.__super.call(this)}return w(e,"ui.modules.activity.fortuneDay.FortuneCardUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/fortuneDay/FortuneCard")},e}(),tu=function(t){function e(){this.imgTip=null,this.txtTime=null,this.cardsList=null,this.sigCardSp=null,this.itemSp=null,this.origCost=null,this.preCost=null,this.missionTxt=null,this.txtGetTime=null,this.getBtn=null,this.nameTxt=null,this.goldimg1=null,this.goldimg2=null,e.__super.call(this)}return w(e,"ui.modules.activity.fortuneDay.FortuneDayViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/fortuneDay/FortuneDayView")},e}(),eu=function(t){function e(){this.btnClose=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.activity.fortuneDay.FortuneTipViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/fortuneDay/FortuneTipView")},e}(),iu=function(t){function e(){this.closeBtn=null,this.closeBtn1=null,this.buyBtn1=null,this.buyBtn3=null,this.buyBtn2=null,this.buyBtn4=null,e.__super.call(this)}return w(e,"ui.modules.activity.huxian.HuxianChargeViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/huxian/HuxianChargeView")},e}(),su=function(t){function e(){this.bg=null,this.sp1=null,this.itemSp=null,this.disImg=null,this.ownImg=null,this.nameTxt=null,this.sp2=null,this.priPrice=null,this.prePrice=null,this.buyBtn=null,this.bg1=null,this.tip=null,this.bg2=null,e.__super.call(this)}return w(e,"ui.modules.activity.huxian.HuXianItemViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/huxian/HuXianItemView")},e}(),nu=function(t){function e(){this.titleImg=null,this.limitTime=null,this.des=null,this.help=null,this.money=null,this.buyBtn=null,this.closeBtn1=null,this.rp1=null,this.rp2=null,this.rp3=null,this.rp4=null,this.pan=null,this.closeBtn=null,e.__super.call(this)}return w(e,"ui.modules.activity.huxian.HuXianViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/huxian/HuXianView")},e}(),ou=function(t){function e(){this.imghead=null,this.txtdes=null,this.txtname=null,this.sp=null,this.btngo=null,this.btnleft=null,this.btnright=null,e.__super.call(this)}return w(e,"ui.modules.activity.productNotice.ActProductNoticeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/productNotice/ActProductNoticeView")},e}(),au=function(t){function e(){this.chb=null,e.__super.call(this)}return w(e,"ui.modules.pack.PackRpChbUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/PackRpChb")},e}(),lu=function(t){function e(){this.btnClose=null,this.btnBack=null,this.panel=null,this.descTxt=null,e.__super.call(this)}return w(e,"ui.modules.pack.PackRPSetPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/PackRPSetPanel")},e}(),ru=function(t){function e(){this.chooseFrame=null,this.descTxt=null,this.goodsCtn=null,e.__super.call(this)}return w(e,"ui.modules.activity.userback.UserBackRewardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/userback/UserBackRewardItem")},e}(),hu=function(t){function e(){this.closeBtn=null,this.backBtn=null,this.lst=null,e.__super.call(this)}return w(e,"ui.modules.activity.userback.UserBackRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/userback/UserBackRewardView")},e}(),uu=function(t){function e(){this.bg=null,this.bottomBox=null,this.backBtn=null,this.tab=null,this.honorRed=null,this.welFareRed=null,this.welfareBox=null,this.powerNum=null,this.buyBtn1=null,this.buyBtn2=null,this.buyBtn3=null,this.rechargeRwdBtn=null,this.oldPrice1=null,this.oldPrice2=null,this.oldPrice3=null,this.newPrice1=null,this.newPrice2=null,this.newPrice3=null,this.rechargeCtn=null,this.buy1Ctn=null,this.buy2Ctn=null,this.buy3Ctn=null,this.honorBox=null,this.itemBg1=null,this.itemBg2=null,this.bgImg=null,this.showRwdBtn=null,this.getRwdBtn=null,this.limitTimeRwdBtn=null,this.backRwdRP=null,this.bigRwdRP=null,this.everyDayRP=null,this.rewardLb=null,this.bigRewardLb=null,this.limitTimeTitle=null,this.limitTimeLb=null,this.backDay=null,this.helpImg=null,this.bigRwdCtn=null,this.everyDayCtn=null,this.aniCtn=null,this.starBox=null,e.__super.call(this)}return w(e,"ui.modules.activity.userback.UserBackViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/userback/UserBackView")},e}(),cu=function(t){function e(){this.imgGold=null,this.btnGet=null,this.txtDesc=null,this.txtNeed=null,this.txtNow=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActChargeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActChargeItem")},e}(),du=function(t){function e(){this.txtDay=null,this.imgBox=null,this.imgSel=null,this.imgRp=null,this.imgGot=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginItem")},e}(),pu=function(t){function e(){this.imgHasGet=null,this.imgSel=null,this.imgDay=null,this.txtState=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginItem1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginItem1")},e}(),mu=function(t){function e(){this.imgBg=null,this.imgHasGet=null,this.imgDouble=null,this.imgSel=null,this.txtState=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginItem2")},e}(),fu=function(t){function e(){this.imgBg=null,this.btnGet=null,this.imgTitle=null,this.txtNow=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginView")},e}(),_u=function(t){function e(){this.imgTop=null,this.imgBg=null,this.btnGet=null,this.imgTip=null,this.imgTitle=null,this.txtLeftTime=null,this.txtDesc=null,this.pan=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginView1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginView1")},e}(),gu=function(t){function e(){this.imgBg=null,this.btnGet=null,this.imgTitle=null,this.pan=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginView2UI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginView2")},e}(),yu=function(t){function e(){this.titleBg=null,this.imgTip=null,this.txtLeftTime=null,this.txtDesc=null,this.btnGet1=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActChargeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActChargeView")},e}(),vu=function(t){function e(){this.spGoods=null,this.txtName=null,this.imgState=null,e.__super.call(this)}return w(e,"ui.modules.activity.sign.SignItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/sign/SignItem")},e}(),Iu=function(t){function e(){this.panel=null,this.btnClose=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.activity.sign.SignSubViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/sign/SignSubView")},e}(),wu=function(t){function e(){this.txtD=null,e.__super.call(this)}return w(e,"ui.modules.activity.sign.SignTotalItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/sign/SignTotalItem")},e}(),bu=function(t){function e(){this.imgDay=null,this.spDesignation=null,this.imgTip=null,this.panel=null,this.imgSel=null,this.imgMonth=null,this.btnSign=null,this.txtNow=null,this.spReward=null,this.btnGet=null,this.imgRp=null,this.imgRp2=null,e.__super.call(this)}return w(e,"ui.modules.activity.sign.SignViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/sign/SignView")},e}(),Su=function(t){function e(){this.img2=null,this.txtName2=null,this.txtPow2=null,this.spAward2=null,this.img3=null,this.txtName3=null,this.txtPow3=null,this.spAward3=null,this.spAward4=null,this.img1=null,this.txtPow1=null,this.txtName1=null,this.spTitle=null,this.spAward1=null,this.txtLink=null,this.txtCondit=null,this.conditionTxt=null,e.__super.call(this)}return w(e,"ui.modules.activity.standard.FlowerStandanrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/standard/FlowerStandanrView")},e}(),xu=function(t){function e(){this.img=null,this.spAward=null,this.txtName=null,this.txtPow=null,this.btnGet=null,this.txtD=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.standard.StandardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/standard/StandardItem")},e}(),Cu=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.activity.standard.StandardListUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/standard/StandardList")},e}(),Pu=function(t){function e(){this.imgSp2=null,this.img2=null,this.txtName2=null,this.second=null,this.txtPow2=null,this.spAward2=null,this.imgSp3=null,this.img3=null,this.txtName3=null,this.third=null,this.txtPow3=null,this.spAward3=null,this.spAward4=null,this.imgSp1=null,this.img1=null,this.txtName1=null,this.txtPow1=null,this.spAward1=null,this.spTitle=null,this.first=null,this.txtLink=null,this.txtCondit=null,this.conditionTxt=null,e.__super.call(this)}return w(e,"ui.modules.activity.standard.StandardOriginShowUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/standard/StandardOriginShow")},e}(),Tu=function(t){function e(){this.topBg=null,this.imgHelp=null,this.spDisplay=null,this.txtDisplayName=null,this.txtLeftTime=null,this.txtDesc=null,this.showSp=null,this.btnWatch=null,e.__super.call(this)}return w(e,"ui.modules.activity.standard.StandardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/standard/StandardView")},e}(),ku=function(t){function e(){this.txtDay=null,this.imgBox=null,this.imgSel=null,this.imgRp=null,this.imgGot=null,e.__super.call(this)}return w(e,"ui.modules.activity.ActLoginFunItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginFunItem")},e}(),Au=(function(t){function e(){this.btnClose1=null,this.btnClose=null,this.txt1=null,this.txt2=null,this.pan=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsChangeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsChangeView")}}(),function(t){function e(){this.sp=null,this.btnJoin=null,this.fTab=null,this.txtS=null,this.txtTime=null,this.txtName1=null,this.txtRank1=null,this.txtPow1=null,this.txtName2=null,this.txtRank2=null,this.txtPow2=null,this.spEff=null,this.btnLeft=null,this.btnRight=null,this.list=null,this.imgRight=null,this.selPetBg=null,this.selPetImg=null,this.txtName=null,this.txtLv=null,this.txtSkill=null,this.imgLeft=null,this.fTab1=null,this.imgKuang=null,this.imgFinger=null,this.tab=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsSetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsSetView")}}(),function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.imgFront=null,this.txtFront=null,this.txtLv=null,this.imgSel=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetEmbattleItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetEmbattleItem")},e}()),Eu=(function(t){function e(){this.imgBar=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.imgRw=null,this.imgRec=null,this.imgRank=null,this.txtRecoverTitle=null,this.txtTime=null,this.txtSub=null,this.btnAno=null,this.btnChange=null,this.btnRule=null,this.btnAdd=null,this.txtLeft=null,this.txtRank=null,this.txtPower=null,this.txtReTime=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.petSportsViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/petSportsView")}}(),function(t){function e(){this.btnClose=null,this.btnSure=null,this.imgHead=null,this.txtName=null,this.txtPower=null,this.txtTime=null,this.spReward=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchAvengeUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchAvenge")},e}()),Ru=function(t){function e(){this.imgBg=null,this.imgSelected2=null,this.imgSpcBg=null,this.spGoods=null,this.spExt=null,this.imgSelected=null,this.spIcon=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchChooseItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchChooseItem")},e}(),Ou=function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,this.spBar=null,this.txtGold=null,this.txtFreeTimes=null,this.txtTimes=null,this.btnRefresh=null,this.btnStart=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchChooseUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchChoose")},e}(),Lu=function(t){function e(){this.txtInfo=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchFinishLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchFinishLogItem")},e}(),Du=function(t){function e(){this.btnClose1=null,this.btnSure=null,this.txtCopper2=null,this.txtCapacity2=null,this.txtCopper1=null,this.txtCapacity1=null,this.txtSpc=null,this.spIcon=null,this.txtName=null,this.listLog=null,this.txtTip=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchFinishUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchFinish")},e}(),Nu=function(t){function e(){this.btnClose1=null,this.btnSure=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchIntroduceUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchIntroduce")},e}(),Vu=function(t){function e(){this.YuanYingBg=null,this.imgFAQ=null,this.boxSp=null,this.btnSnatch=null,this.txtTimes1=null,this.txtTimes2=null,this.imgMsgLog=null,this.spTimesInfo=null,this.txtMyTimes=null,this.txtQuite=null,this.btnPrev=null,this.btnNext=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchMainUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchMain")},e}(),Bu=function(t){function e(){this.txtTime=null,this.txtInfo=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchMsgLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchMsgLogItem")},e}(),Mu=function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchMsgLogUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchMsgLog")},e}(),Fu=function(t){function e(){this.spEffect=null,this.imgRob=null,this.spInfo=null,this.imgIcon=null,this.txtName=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchPlayerItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchPlayerItem")},e}(),Uu=function(t){function e(){this.titleRob=null,this.btnClose=null,this.btnRob=null,this.txtName=null,this.txtSoc=null,this.txtTimes=null,this.spReward=null,this.txtPow=null,this.txtType=null,e.__super.call(this)}return w(e,"ui.modules.athletics.snatch.SnatchRobEnterUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/snatch/SnatchRobEnter")},e}(),Gu=function(t){function e(){this.rankNumTxt=null,this.roleNameTxt=null,this.scoreTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefieldRankingItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefieldRankingItem")},e}(),Hu=function(t){function e(){this.rankNumTxt=null,this.nameTxt=null,this.killTxt=null,this.scoreTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefieldRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefieldRankItem")},e}(),Wu=function(t){function e(){this.rankTxt=null,this.roleName=null,this.scroeTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.HightScoresRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/HightScoresRankItem")},e}(),qu=function(t){function e(){this.killerName=null,this.dieName=null,e.__super.call(this)}return w(e,"ui.modules.ashura.KillInfoItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/KillInfoItem")},e}(),Yu=function(t){function e(){this.rankTxt=null,this.roleName=null,this.scroeTxt=null,this.killTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.LastRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/LastRankItem")},e}(),Xu=function(t){function e(){this.nameText=null,e.__super.call(this)}return w(e,"ui.modules.ashura.RoleRewardShowItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/RoleRewardShowItem")},e}(),Ku=function(t){function e(){this.scoreTxt1=null,this.scoreTxt2=null,this.scoreTxt3=null,this.scoreTxt4=null,this.scoreTxt5=null,this.dropTxt1=null,this.dropTxt2=null,this.dropTxt3=null,this.dropTxt4=null,this.dropTxt5=null,this.killTxt1=null,this.killTxt2=null,this.killTxt3=null,this.killTxt4=null,this.killTxt5=null,e.__super.call(this)}return w(e,"ui.modules.ashura.RoleScoreBoxUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/RoleScoreBox")},e}(),ju=function(t){function e(){this.selfSecordBox=null,this.selfSecordTxt=null,this.collectInfo=null,this.collectTxt=null,this.levelBox=null,this.levelTxt=null,this.exeBar=null,this.exeTxt=null,this.roleInfoBox=null,this.nextOtherRoleBtn=null,this.rankingBg=null,this.rankingList=null,this.myRankText=null,this.packSp=null,this.packTxtImg=null,this.packBtn=null,this.killInfoBox=null,this.endTimeTxt=null,this.flyBox=null,this.quitBtn=null,this.roleDieBox=null,this.dieBg=null,this.timeImg=null,this.skillUpgrendBtn=null,this.canAddPassivePoint=null,this.canAddPassiveTxt=null,this.ruleBtn=null,this.settingBtn=null,this.skillBox1=null,this.skill1=null,this.skillmc1=null,this.skillLevelTxt1=null,this.lockLevelTxt1=null,this.cdTxt1=null,this.upSkillBtn1=null,this.skillBox2=null,this.skill2=null,this.skillmc2=null,this.skillLevelTxt2=null,this.lockLevelTxt2=null,this.cdTxt2=null,this.upSkillBtn2=null,this.skillBox3=null,this.skill3=null,this.skillmc3=null,this.skillLevelTxt3=null,this.lockLevelTxt3=null,this.upSkillBtn3=null,this.cdTxt3=null,this.skillBox4=null,this.skill4=null,this.skillmc4=null,this.skillLevelTxt4=null,this.lockLevelTxt4=null,this.upSkillBtn4=null,this.cdTxt4=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefiledBattlePenalUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefiledBattlePenal")},e}(),Qu=function(t){function e(){this.closeBtn=null,this.panelSp=null,this.closeBtn2=null,this.btnTabs=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefiledOfShuraViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefiledOfShuraView")},e}(),zu=function(t){function e(){this.closeBtn=null,this.closeBtn2=null,this.btnTabs=null,this.signUpPanel=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefieldReadyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefieldReadyView")},e}(),$u=function(t){function e(){this.signUpBtn=null,this.dragTipTxt=null,this.roleOfLifeTxt=null,this.roleOfPhyDifTxt=null,this.roleOfMgcDifTxt=null,this.resonateNumTxt=null,this.resonateDesc1=null,this.resonateDesc2=null,this.resonateDesc3=null,this.raidersTxt=null,this.resetAllRoleBtn=null,this.saveAllRoleBtn=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattlefieldSetRolePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattlefieldSetRolePanel")},e}(),Zu=function(t){function e(){this.descTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattleHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattleHelpPanel")},e}(),Ju=function(t){function e(){this.closeBtn=null,this.closeBtn2=null,this.ruleSp=null,this.titleTop=null,this.titleBottom=null,this.monsterIcon1=null,this.monsterIcon3=null,this.monsterIcon2=null,this.monsterIcon4=null,this.txtName1=null,this.txtDesc1=null,this.txtName3=null,this.txtDesc3=null,this.txtName2=null,this.txtDesc2=null,this.txtName4=null,this.txtDesc4=null,this.rulePanl=null,this.effSp1=null,this.effSp3=null,this.effSp2=null,this.effSp4=null,this.skillDecs1=null,this.skillDecs3=null,this.skillDecs4=null,this.skillDecs2=null,this.btnTabs=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattleRulePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattleRulePanel")},e}(),tc=function(t){function e(){this.closeBtn=null,this.simplifyRoleCheck=null,this.simplifyCollcetCheck=null,this.simplifySkillCheck=null,this.simplifyLevelEffCheck=null,this.saveSettingBtn=null,this.modu1=null,this.modu2=null,this.modu3=null,this.selectBg=null,this.desc1=null,this.desc2=null,this.desc3=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattleSettingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattleSettingView")},e}(),ec=function(t){function e(){this.closeBtn=null,this.closeBtn2=null,this.upgradeBtn=null,this.quan=null,this.skill1=null,this.skill2=null,this.skill3=null,this.skill4=null,this.skillPointTxt1=null,this.skillPointTxt2=null,this.skillPointTxt3=null,this.skillPointTxt4=null,this.pointTxt=null,this.skillNameTxt=null,this.skillDesc=null,this.skillName1=null,this.skillName4=null,this.skillName3=null,this.skillName2=null,e.__super.call(this)}return w(e,"ui.modules.ashura.BattleSkillPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/BattleSkillPanel")},e}(),ic=function(t){function e(){this.rankList=null,this.selfRankTxt=null,this.selfName=null,this.selfScore=null,e.__super.call(this)}return w(e,"ui.modules.ashura.HighScoresPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/HighScoresPanel")},e}(),sc=function(t){function e(){this.godTagImg=null,this.rankTxt=null,this.scroeTxt=null,this.historyRank=null,this.historyScoreTxt=null,this.killTxt=null,this.historyKillTxt=null,this.btnYes=null,this.goToShopBtn=null,this.closeBtn=null,this.rankList=null,this.closeBtn2=null,this.helpBtn=null,e.__super.call(this)}return w(e,"ui.modules.ashura.LastTimeRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/LastTimeRankPanel")},e}(),nc=function(t){function e(){this.partTxt=null,this.partTitle=null,e.__super.call(this)}return w(e,"ui.modules.ashura.PartTxtPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/PartTxtPanel")},e}(),oc=function(t){function e(){this.lastTimeRankTxt=null,this.rulePanel=null,this.enterBtn=null,this.timeTxt=null,this.rewardTxt=null,e.__super.call(this)}return w(e,"ui.modules.ashura.PlayLawPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/PlayLawPanel")},e}(),ac=function(t){function e(){this.godTag=null,this.rankNumTxt=null,this.killEnemyTxt=null,this.scroeNumTxt=null,this.historyRankTxt=null,this.histroyKillEnemyTxt=null,this.historyScroeTxt=null,this.btnYes=null,this.btnExchangeScroe=null,this.closeBtn=null,this.rankList=null,this.closeBtn2=null,this.helpBtn=null,e.__super.call(this)}return w(e,"ui.modules.ashura.ResultPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/ResultPanel")},e}(),lc=function(t){function e(){this.closeBtn=null,this.closeBtn2=null,this.itemList=null,e.__super.call(this)}return w(e,"ui.modules.ashura.RoleRewardShowPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/RoleRewardShowPanel")},e}(),rc=function(t){function e(){this.toGet=null,this.spGoods=null,this.txtbg=null,this.txtImg=null,this.levelImg=null,this.tagImg=null,this.rp=null,e.__super.call(this)}return w(e,"ui.modules.blueDiamond.BlueDiamondItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/blueDiamond/BlueDiamondItem")},e}(),hc=function(t){function e(){this.btnClose2=null,this.spView=null,this.list=null,this.topImg=null,this.openBtn=null,this.openYBtn=null,this.rechargeBtn=null,this.rechargeYBtn=null,this.itemList=null,this.privilegeBox=null,this.toNovice=null,this.toDaily=null,this.toUpgrade=null,this.toMore=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.blueDiamond.blueDiamondPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/blueDiamond/blueDiamondPanel")},e}(),uc=function(t){function e(){this.rewardNameTxt=null,this.rewardBtn=null,this.getRewardRp=null,e.__super.call(this)}return w(e,"ui.modules.activity.qqyxdtPrivilege.GrowUpRewardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/qqyxdtPrivilege/GrowUpRewardItem")},e}(),cc=function(t){function e(){this.closeBtn1=null,this.box=null,this.guideAndDailyBox=null,this.descImg=null,this.rewardBg=null,this.rewardBtn=null,this.rewardBox=null,this.growUpItemList=null,this.closeBtn=null,this.newGuideImgF=null,this.dailyImgF=null,this.growUpImgF=null,this.newGuideImg=null,this.dailyImg=null,this.growUpImg=null,this.newGuideRP=null,this.dailyRP=null,this.growupRP=null,this.getRewardRP=null,e.__super.call(this)}return w(e,"ui.modules.activity.qqyxdtPrivilege.QQyxdtPrivilegeViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/qqyxdtPrivilege/QQyxdtPrivilegeView")},e}(),dc=function(t){function e(){this.list=null,this.light=null,this.imgFaceEnter=null,this.btnSend=null,this.inputMsg=null,this.imgFace=null,this.listFace=null,this.spPage=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatFamilyFightViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatFamilyFightView")},e}(),pc=function(t){function e(){this.imgBg=null,this.textBg=null,this.imgSex=null,this.imgVIP=null,this.imgMonth=null,this.imgNoble=null,this.imgHead=null,this.imgFrame=null,this.imgMate=null,this.txtMsg=null,this.txtFamily=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatFamilyLeftItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatFamilyLeftItem")},e}(),mc=function(t){function e(){this.textBg=null,this.imgBg=null,this.imgVIP=null,this.imgMonth=null,this.imgNoble=null,this.imgHead=null,this.imgFrame=null,this.txtName=null,this.txtTitle=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatFamilyRightItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatFamilyRightItem")},e}(),fc=function(t){function e(){this.list=null,this.light=null,this.imgFaceEnter=null,this.btnSend=null,this.inputMsg=null,this.imgFace=null,this.listFace=null,this.spPage=null,this.spAction=null,this.btnFriend=null,this.btnBlack=null,this.btnLook=null,this.btnCompare=null,this.btnFlower=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatFamilyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatFamilyView")},e}(),_c=function(t){function e(){this.laba=null,this.indexTxt=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatLabaBrocastUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatLabaBrocast")},e}(),gc=function(t){function e(){this.gold=null,this.btnClose=null,this.input=null,this.btn=null,this.infoTxt=null,this.goldTxt=null,this.txtSVIP=null,this.txtXiaoQi=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatLabaUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatLaba")},e}(),yc=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.txtNoticeInfo=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatNoticeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatNoticeItem")},e}(),vc=function(t){function e(){this.list=null,this.txtNoticeTip=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatNoticeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatNoticeView")},e}(),Ic=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnBack=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatPanel")},e}(),wc=function(t){function e(){this.labaBg=null,this.laba=null,this.imgBg=null,this.imgOperate=null,this.imgArrow=null,this.imgRedPoint=null,this.spInfo=null,this.list=null,this.labaTxt=null,this.indexTxt=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatPreviewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatPreview")},e}(),bc=function(t){function e(){this.spTop=null,this.txtFriends=null,this.list=null,this.spTip=null,this.txtTip=null,this.btnOperate=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatPrivateViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatPrivateView")},e}(),Sc=function(t){function e(){this.btn=null,this.img2=null,this.txtInput=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatServiceViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatServiceView")},e}(),xc=function(t){function e(){this.textBg=null,this.imgBg=null,this.imgSex=null,this.imgMonth=null,this.imgGuide=null,this.imgVIP=null,this.imgNoble=null,this.imgMate=null,this.imgHead=null,this.imgFrame=null,this.txtFamily=null,this.txtTitle=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatWorldLeftItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatWorldLeftItem")},e}(),Cc=function(t){function e(){this.textBg=null,this.imgBg=null,this.imgVIP=null,this.imgNoble=null,this.imgMonth=null,this.imgHead=null,this.imgFrame=null,this.imgGuide=null,this.txtFamily=null,this.txtTitle=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatWorldRightItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatWorldRightItem")},e}(),Pc=function(t){function e(){this.list=null,this.light=null,this.btnLaba=null,this.imgFaceEnter=null,this.btnSend=null,this.inputMsg=null,this.downBtn=null,this.imgFace=null,this.listFace=null,this.spPage=null,this.spAction=null,this.btnFriend=null,this.btnBlack=null,this.btnLook=null,this.btnCompare=null,this.btnFlower=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatWorldViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatWorldView")},e}(),Tc=function(t){function e(){this.spTab=null,this.tab=null,this.imgRedPoint2=null,this.imgRedPoint3=null,this.spChat=null,this.imgBg=null,this.imgOperate=null,this.list=null,this.imgArrow=null,this.spInput=null,this.imgFaceEnter=null,this.btnSend=null,this.inputMsg=null,this.imgFace=null,this.listFace=null,this.spPage=null,this.imgRedPoint=null,e.__super.call(this)}return w(e,"ui.modules.chat.CrossChatPreviewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/CrossChatPreview")},e}(),kc=function(t){function e(){this.eqTxt=null,this.proTxt=null,e.__super.call(this)}return w(e,"ui.modules.ForCheck.ForCheckItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ForCheck/ForCheckItem")},e}(),Ac=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.titleText=null,this.probText=null,this.proRewardText=null,this.protxt=null,this.probList=null,this.recordBG=null,this.recordList=null,this.tabs=null,e.__super.call(this)}return w(e,"ui.modules.ForCheck.ForCheckViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ForCheck/ForCheckView")},e}(),Ec=function(t){function e(){this.bg=null,this.container=null,this.btnClose2=null,this.txtName=null,this.htmlTime=null,this.htmlLink=null,this.btnEnter=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossCallPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossCallPanel")},e}(),Rc=function(t){function e(){this.chb=null,this.txtName=null,this.txtLv=null,this.txtTip=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossNoticeItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossNoticeItem")},e}(),Oc=function(t){function e(){this.btnClose=null,this.panel=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossNoticePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossNoticePanel")},e}(),Lc=function(t){function e(){this.bg=null,this.container=null,this.spView=null,this.tab=null,this.btnClose2=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossPanel")},e}(),Dc=function(t){function e(){this.chbHide=null,this.chbAuto=null,this.imgRe=null,this.btnAttack=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowControlItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowControlItem")},e}(),Nc=function(t){function e(){this.imgSelect=null,this.bmpHead=null,this.txtName=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowItem")},e}(),Vc=function(t){function e(){this.txtTime=null,this.txtName=null,this.txtPower=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossKillNoteItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossKillNoteItem")},e}(),Bc=function(t){function e(){this.btnClose=null,this.txt1=null,this.txt2=null,this.txt3=null,this.list=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossKillNotePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossKillNotePanel")},e}(),Mc=function(t){function e(){this.txtRank=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowRewardsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowRewardsItem")},e}(),Fc=function(t){function e(){this.bg=null,this.container=null,this.spRank=null,this.btnClose2=null,this.txtName=null,this.spSpc=null,this.tab=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowRewardsPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowRewardsPanel")},e}(),Uc=function(t){function e(){this.btnClose=null,this.spMy=null,this.htmlMy=null,this.spRoll=null,this.btnYes=null,this.btnNo=null,this.html=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowRollPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowRollPanel")},e}(),Gc=function(t){function e(){this.btn=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRegrowViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRegrowView")},e}(),Hc=function(t){function e(){this.btnClose=null,this.btnYes=null,this.btnNow=null,this.msg=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRelivePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRelivePanel")},e}(),Wc=function(t){function e(){this.txtTime=null,this.btnNow=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossReliveSmallPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossReliveSmallPanel")},e}(),qc=function(t){function e(){this.bmpHead=null,this.txtBossName=null,this.txtOpen=null,this.txtLast=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRoleListItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRoleListItem")},e}(),Yc=function(t){function e(){this.btnClose=null,this.txtHtml=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRoleTipPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRoleTipPanel")},e}(),Xc=function(t){function e(){this.list=null,this.btnTip=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossRoleViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossRoleView")},e}(),Kc=function(t){function e(){this.bmpHead=null,this.btn=null,this.txtblood=null,this.txtPeople=null,this.txtBossName=null,this.txtOpen=null,this.txtRelife=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossWorldListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossWorldListItem")},e}(),jc=function(t){function e(){this.txtTime=null,this.txtNext=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.BossWorldViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/BossWorldView")},e}(),Qc=function(t){function e(){this.chbHide=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.boss.ShieldRolePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/boss/ShieldRolePanel")},e}(),zc=function(t){function e(){this.bmpHead=null,this.txtName=null,this.txtLv=null,this.txtMy=null,this.txtBest=null,this.btn=null,this.imgArrow=null,this.shieldPart=null,this.txtShieldInfo=null,this.goalPart=null,this.txtGoalInfo=null,this.imgHead=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.BossBloodUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/BossBlood")},e}(),$c=function(t){function e(){this.btnQuit=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.CopyQuitUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/CopyQuit")},e}(),Zc=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatNoticeSubViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatNoticeSubView")},e}(),Jc=function(t){function e(){this.iconImg=null,this.timeTxt=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyAncienExoticIconUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyAncienExoticIcon")},e}(),td=function(t){function e(){this.ancientplaceSp=null,this.ancientmonsterSp=null,this.closeBtn2=null,this.closeBtn=null,this.gotoTxt=null,this.btnFight=null,this.timeTxt=null,this.fightTimeTxt=null,this.monstHpImg=null,this.hpPercenTxt=null,this.goodsPercentTxt=null,this.timeTxt2=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyAncienExoticViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyAncienExoticView")},e}(),ed=function(t){function e(){this.txtNum=null,this.txtName=null,this.txtPower=null,this.txtCustom=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamRankItem")},e}(),id=function(t){function e(){this.btnClose2=null,this.list=null,this.txtMy=null,this.btnClose=null,this.imageHead1=null,this.txtName1=null,this.txtPower1=null,this.txtCustom1=null,this.xuwei1=null,this.imageHead2=null,this.txtName2=null,this.txtPower2=null,this.txtCustom2=null,this.xuwei2=null,this.imageHead3=null,this.txtName3=null,this.txtPower3=null,this.txtCustom3=null,this.xuwei3=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamRankPanel")},e}(),sd=function(t){function e(){this.imgBg=null,this.txtBarrier=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamSmallTowerUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamSmallTower")},e}(),nd=function(t){function e(){this.btnUp=null,this.imgCenter=null,this.spLight=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.img6=null,this.txtCur=null,this.txtNext=null,this.btnClose2=null,this.btnClose=null,this.htmlNeed=null,this.spPower=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamSoulPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamSoulPanel")},e}(),od=function(t){function e(){this.imgBg=null,this.imgSelect=null,this.txtBarrier=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamTowerUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamTower")},e}(),ad=function(t){function e(){this.spTower=null,this.btnChallenge=null,this.txtBarrierName=null,this.spExp=null,this.txtExp=null,this.spGoods=null,this.btnBox=null,this.btnSoul=null,this.btnRank=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamView")},e}(),ld=function(t){function e(){this.bg=null,this.container=null,this.spView=null,this.btnClose2=null,this.tab=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyEnterPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyEnterPanel")},e}(),rd=function(t){function e(){this.imgBg=null,this.btn=null,this.spMoney=null,this.txtMoney=null,this.txtQuan=null,this.txtTip=null,this.txtOpen=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyMaterialsListItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyMaterialsListItem")},e}(),hd=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyMaterialsViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyMaterialsView")},e}(),ud=function(t){function e(){this.imgStep=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.DreamTowerInCopyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/DreamTowerInCopyView")},e}(),cd=function(t){function e(){this.btnClose=null,this.btnYes=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomTipPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomTipPanel")},e}(),dd=function(t){function e(){this.imgIcon=null,this.btn=null,this.imgTip=null,this.imgRp=null,this.spBar=null,this.txtWave=null,this.txtTip=null,this.imgEnterTip=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomEnterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomEnterItem")},e}(),pd=function(t){function e(){this.bg=null,this.btnClose=null,this.container=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomEnterPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomEnterPanel")},e}(),md=function(t){function e(){this.imgGodHood=null,this.btnEnter=null,this.listRank=null,this.txtFloor=null,this.linkTxt=null,this.txtTip=null,this.txtGodHood=null,this.reWard=null,this.nameImg=null,this.tip=null,this.textGet=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomEnterViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomEnterView")},e}(),fd=function(t){function e(){this.img=null,this.txt=null,this.imgArrow=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomPointItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomPointItem")},e}(),_d=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtPower=null,this.txtCustom=null,this.imgRank=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomRankItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomRankItem")},e}(),gd=function(t){function e(){this.btnClose=null,this.listRank=null,this.txtMy=null,this.btnClose2=null,this.linkTxt=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomRankPanel")},e}(),yd=function(t){function e(){this.tab=null,this.html=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomRewardView")},e}(),vd=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtCustom=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomSimpleRankItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomSimpleRankItem")},e}(),Id=function(t){function e(){this.txtLeft1=null,this.txtLeft2=null,this.img1=null,this.img2=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomUpTipPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomUpTipPanel")},e}(),wd=function(t){function e(){this.btnClose2=null,this.btnGet=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.customs.CustomWorldPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/customs/CustomWorldPanel")},e}(),bd=function(t){function e(){this.imgTip=null,this.imgLine0=null,this.imgLine1=null,this.imgLine2=null,this.imgLine3=null,this.imgBg0=null,this.imgBg1=null,this.imgBg2=null,this.imgBg3=null,this.imgBg4=null,this.txtNum1=null,this.txtNum2=null,this.txtNum3=null,this.txtNum4=null,this.txtName0=null,this.txtName1=null,this.txtName2=null,this.txtName3=null,this.txtName4=null,this.imgIcon0=null,this.imgIcon1=null,this.imgIcon2=null,this.imgIcon3=null,this.imgIcon4=null,this.imgArrow=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.eternalSky.CopyEternalSkyBottomdViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/eternalSky/CopyEternalSkyBottomdView")},e}(),Sd=function(t){function e(){this.imgBg=null,this.btn=null,this.imgRedPoint=null,this.txtTimes=null,this.spMoney=null,this.txtMoney=null,this.imgIcon1=null,this.imgIcon2=null,this.txtTip=null,this.txtLimit=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.eternalSky.CopyEternalSkyListItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/eternalSky/CopyEternalSkyListItem")},e}(),xd=function(t){function e(){this.btnLeft=null,this.btnRight=null,this.spBaseGoods=null,this.imgIcon=null,this.txtGold=null,this.spCostGoods=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.eternalSky.CopyEternalSkyResultPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/eternalSky/CopyEternalSkyResultPanel")},e}(),Cd=function(t){function e(){this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.eternalSky.CopyEternalSkyTopViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/eternalSky/CopyEternalSkyTopView")},e}(),Pd=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.eternalSky.CopyEternalSkyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/eternalSky/CopyEternalSkyView")},e}(),Td=function(t){function e(){this.spClip=null,this.imgState=null,this.btn=null,this.txtName=null,this.txtCondicion=null,this.txtReward=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.godHood.CopyGodHoodForbiddenItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/godHood/CopyGodHoodForbiddenItem")},e}(),kd=function(t){function e(){this.imgIcon=null,this.imgUp=null,this.spItems=null,this.txtDesc=null,this.txtName=null,this.txtScore=null,this.btnUse=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.godHood.CopyGodHoodForbiddenViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/godHood/CopyGodHoodForbiddenView")},e}(),Ad=function(t){function e(){this.btnClose=null,this.btnCancel=null,this.btnOk=null,this.spRewards=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.godHood.CopyGodHoodStoryEnterConfirmPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/godHood/CopyGodHoodStoryEnterConfirmPanel")},e}(),Ed=function(t){function e(){this.imgBg=null,this.imgRP=null,this.txtName=null,this.txtDesc=null,this.imgState=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.godHood.CopyGodHoodStoryEnterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/godHood/CopyGodHoodStoryEnterItem")},e}(),Rd=function(t){function e(){this.spItems=null,this.imgIcon=null,this.btnLeft=null,this.btnRight=null,this.txtDesc=null,this.imgOpen=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.godHood.CopyGodHoodStoryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/godHood/CopyGodHoodStoryView")},e}(),Od=function(t){function e(){this.bossBar0=null,this.bossBar1=null,this.bmpHead=null,this.txtName=null,this.txtLv=null,this.txtMy=null,this.txtBest=null,this.numTxt=null,this.btn=null,this.imgArrow=null,this.goalPart=null,this.txtGoalInfo=null,this.imgHead=null,this.escapeTxt=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyBossBloodUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyBossBlood")},e}(),Ld=function(t){function e(){this.txtSkill=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyFlowerSkillPowerViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyFlowerSkillPowerView")},e}(),Dd=function(t){function e(){this.imgTitle=null,this.txtTitle=null,this.btnClose=null,this.btnBack=null,this.list=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueFriendListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueFriendListPanel")},e}(),Nd=function(t){function e(){this.tab=null,this.btnClose2=null,this.spView=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyPanel")},e}(),Vd=function(t){function e(){this.btnClose=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRankExplainPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRankExplainPanel")},e}(),Bd=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtHurt=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRankItem")},e}(),Md=function(t){function e(){this.txtHurt=null,this.txtReward=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRankScoreItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRankScoreItem")},e}(),Fd=function(t){function e(){this.pan=null,this.btnHelp=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRankViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRankView")},e}(),Ud=function(t){function e(){this.spRole=null,this.imgRw=null,this.btnFind=null,this.btnReady=null,this.imgRp=null,this.chatTab=null,this.spChat=null,this.btnHelp=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyReadyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyReadyView")},e}(),Gd=function(t){function e(){this.txtRank=null,this.boxGoods=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRewardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRewardItem")},e}(),Hd=function(t){function e(){this.pan=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRewardDisplayViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRewardDisplayView")},e}(),Wd=function(t){function e(){this.spRole=null,this.btnFind=null,this.imgReady=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRoleItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRoleItem")},e}(),qd=function(t){function e(){this.pan=null,this.btnClose=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyRulePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyRulePanel")},e}(),Yd=function(t){function e(){this.imgBar=null,this.btn=null,this.spMask=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopySkillShieldItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopySkillShieldItem")},e}(),Xd=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopySkillShieldViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopySkillShieldView")},e}(),Kd=function(t){function e(){this.imgBg=null,this.txtSkill=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopySkillTipsViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopySkillTipsView")},e}(),jd=function(t){function e(){this.imgBg=null,this.btn=null,this.txtNum=null,this.spReward=null,this.txtLimit=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.strangeFire.CopyStrangeFireEnterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/strangeFire/CopyStrangeFireEnterItem")},e}(),Qd=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.spSchedule=null,this.btnBoss=null,this.imgRedPointBoss=null,this.btnEnter=null,this.imgRedPointEnter=null,this.imgFireL=null,this.imgFireR=null,this.imgQualityL=null,this.imgQualityR=null,this.imgFull=null,this.txtDesc=null,this.txtNameL=null,this.txtScoreL=null,this.txtRewardL=null,this.txtNameR=null,this.txtScoreR=null,this.txtRewardR=null,this.txtNum=null,this.txtTime=null,this.spLv=null,this.imgHead=null,this.imgQuick=null,this.txtDesc1=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.strangeFire.CopyStrangeFireEnterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/strangeFire/CopyStrangeFireEnterPanel")},e}(),zd=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.btnEnter=null,this.txtNum=null,this.txtGoods=null,this.spEff=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.strangeFire.CopyStrangeFireQuickFinishPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/strangeFire/CopyStrangeFireQuickFinishPanel")},e}(),$d=function(t){function e(){this.btn=null,this.sp=null,this.txtLimit=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.talimanCopy.TalimanCopyItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/talimanCopy/TalimanCopyItem")},e}(),Zd=function(t){function e(){this.itemBox=null,this.itemSp=null,this.btn=null,this.btn1=null,this.txt=null,this.numTxt2=null,this.numTxt1=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.talimanCopy.TalimanCopyQuickFinishViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/talimanCopy/TalimanCopyQuickFinishView")},e}(),Jd=function(t){function e(){this.btnClose=null,this.itemBox=null,this.btnBack=null,this.btnSweep=null,this.btnFight=null,this.fightRp=null,this.missionName=null,this.gold=null,this.imgSkin=null,this.skinSp=null,this.nameBg=null,this.imgName=null,this.img1=null,this.mission1=null,this.img2=null,this.mission2=null,this.img3=null,this.mission3=null,this.img4=null,this.mission4=null,this.img5=null,this.mission5=null,this.img6=null,this.mission6=null,this.img7=null,this.mission7=null,this.img8=null,this.mission8=null,this.img9=null,this.mission9=null,this.img10=null,this.mission10=null,this.sp=null,this.imgVip2=null,this.getReward=null,this.getRp=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.talimanCopy.TalimanCopyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/talimanCopy/TalimanCopyView")},e}(),tp=function(t){function e(){this.imgBar=null,this.spMask=null,this.imgHead=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.BossRebornViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/BossRebornView")},e}(),ep=function(t){function e(){this.spRole=null,this.btnFind=null,this.imgReady=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.CopyReadyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/CopyReadyItem")},e}(),ip=function(t){function e(){this.imgBg=null,this.txtPow=null,this.imgSel=null,this.imgs1=null,this.imgs2=null,this.imgs3=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.CopySelectItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/CopySelectItem")},e}(),sp=function(t){function e(){this.btnClose2=null,this.txt=null,this.btnCreate=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.CopySelectViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/CopySelectView")},e}(),np=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.imgRw=null,this.txtLv=null,this.tab=null,this.btnClose2=null,this.btnFind=null,this.btnReady=null,this.imgRp=null,this.chatTab=null,this.spChat=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.CopySelReadyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/CopySelReadyView")},e}(),op=function(t){function e(){this.imgBar=null,this.txt=null,this.txtTime=null,this.btnNo=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.teamCopy.CountDownViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/teamCopy/CountDownView")},e}(),ap=function(t){function e(){this.box=null,this.btnClose=null,this.imgPower=null,this.spPower=null,this.spFirst=null,this.txtSub=null,this.btn1=null,this.btn2=null,this.btn3=null,this.spNoFir=null,this.btnQuit=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.TeamCopyResViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/TeamCopyResView")},e}(),lp=function(t){function e(){this.closeBtn=null,this.backBtn=null,this.title1=null,this.content1=null,this.title2=null,this.content2=null,this.title3=null,this.content3=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.RuleDesViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/RuleDesView")},e}(),rp=function(t){function e(){this.closeBtn=null,this.backBtn=null,this.totalNum=null,this.costNum=null,this.starNum=null,this.endNum=null,this.reduceBtn1=null,this.addBtn1=null,this.reduceBtn2=null,this.addBtn2=null,this.starSweepBtn=null,this.spBar=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianAutoThroughViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianAutoThroughView")},e}(),hp=function(t){function e(){this.bg=null,this.flag=null,this.build=null,this.star1=null,this.star2=null,this.star3=null,this.flagname=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianFlagItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianFlagItem")},e}(),up=function(t){function e(){this.bg=null,this.level=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianLevelItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianLevelItem")},e}(),cp=function(t){function e(){this.bg=null,this.level=null,this.timesStamp=null,this.grade=null,this.rewardLb=null,this.rewardList=null,this.star1=null,this.star2=null,this.star3=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianRoadColorInfoViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianRoadColorInfoView")},e}(),dp=function(t){function e(){this.chapterList=null,this.mapBg=null,this.difficultyList=null,this.rewardList=null,this.barrierName=null,this.levelStar1=null,this.levelStar2=null,this.levelStar3=null,this.timeStamp=null,this.rule=null,this.arrowLeftBtn1=null,this.arrowRightBtn1=null,this.autoBtn=null,this.chanllageBtn=null,this.backBtn=null,this.closeBtn=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianRoadViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianRoadView")},e}(),pp=function(t){function e(){this.build=null,this.SectionName=null,this.passState=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianSectionItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianSectionItem")},e}(),mp=function(t){function e(){this.closeBtn=null,this.difficultyCombo=null,this.stageInfo=null,this.rewardLb=null,this.rewardList=null,this.checkBox1=null,this.checkBox2=null,this.btnLeft=null,this.btnRight=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianStageSetViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianStageSetView")},e}(),fp=function(t){function e(){this.closeBtn=null,this.okBtn=null,this.rewardList=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianThroughRewardViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianThroughRewardView")},e}(),_p=function(t){function e(){this.btn=null,this.txtSoul=null,this.txtTower=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossGuideFightSoulViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossGuideFightSoulView")},e}(),gp=function(t){function e(){this.html0=null,this.html1=null,this.html2=null,this.btnBack=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossGuideHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossGuideHelpPanel")},e}(),yp=function(t){function e(){this.spView=null,this.btnClose=null,this.btnBack=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossGuidePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossGuidePanel")},e}(),vp=function(t){function e(){this.coin0=null,this.btnCopper=null,this.coin1=null,this.btnGold=null,this.coin2=null,this.btnCoin=null,this.txtMap=null,this.btnRank=null,this.txtMyCopper=null,this.txtMyGold=null,this.txtSoulCoin=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossMainInfoViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossMainInfoView")},e}(),Ip=function(t){function e(){this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossMainSoulDisplayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossMainSoulDisplayItem")},e}(),wp=function(t){function e(){this.imgGuide=null,this.imgSet=null,this.imgRed=null,this.txtRed=null,this.imgMark=null,this.imgStore=null,this.imgSoul=null,this.imgGuideRP=null,this.imgMap=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossNavViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossNavView")},e}(),bp=function(t){function e(){this.btnImg=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossQuitUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossQuit")},e}(),Sp=function(t){function e(){this.btnClose=null,this.html=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossRedNamePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossRedNamePanel")},e}(),xp=function(t){function e(){this.btnClose=null,this.box=null,this.tab=null,this.html=null,this.txtLimit=null,this.txtTabTip=null,this.btnBack=null,this.btnEnter=null,this.imgHelp=null,this.panel=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossServerEnterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossServerEnterPanel")},e}(),Cp=function(t){function e(){this.roleSetBtn=null,this.skillEffSetBtn=null,this.roleVisSetBtn=null,this.attingTipBtn=null,this.fixedModImg=null,this.freeModImg=null,this.selecttingImg=null,this.clickModImg=null,this.backBtn=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.CrossServerSettingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/CrossServerSettingView")},e}(),Pp=function(t){function e(){this.imgSelect=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.main.ServerBtnUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/main/ServerBtn")},e}(),Tp=function(t){function e(){this.backBtn=null,this.closeBtn=null,this.titleTxt=null,this.mapImg=null,this.pathDrawSp=null,this.unitSp=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.miniMap.CrossServerMiniMapPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/miniMap/CrossServerMiniMapPanel")},e}(),kp=function(t){function e(){this.imgRank=null,this.imgVip=null,this.imgVipInfo=null,this.txtExtra=null,this.txtRanklv=null,this.txtRank=null,this.txtNull=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.rank.CrossRankListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/rank/CrossRankListItem")},e}(),Ap=function(t){function e(){this.bg=null,this.container=null,this.spView=null,this.tab=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.rank.CrossRankPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/rank/CrossRankPanel")},e}(),Ep=function(t){function e(){this.imgRank=null,this.txtExtra=null,this.txtRanklv=null,this.txtRank=null,this.txtNull=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.rank.CrossRankPetListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/rank/CrossRankPetListItem")},e}(),Rp=function(t){function e(){this.imgBg=null,this.firstPart=null,this.imgRoleBg=null,this.imgRankLv=null,this.txtExtra=null,this.txtRankLv=null,this.txtNull=null,this.txtName=null,this.btnAdore=null,this.spExtraClick=null,this.txtMy=null,this.txtTip=null,this.txtShare=null,this.list=null,this.tab=null,this.tabTwo=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.rank.CrossRankPetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/rank/CrossRankPetView")},e}(),Op=function(t){function e(){this.imgBg=null,this.firstPart=null,this.imgRoleBg=null,this.imgRankLv=null,this.imgVip=null,this.btnAdore=null,this.imgVipInfo=null,this.txtExtra=null,this.txtRankLv=null,this.txtNull=null,this.spExtraClick=null,this.txtMy=null,this.txtTip=null,this.txtShare=null,this.list=null,this.tab=null,this.txtBg=null,this.resetText=null,this.tabTwo=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.rank.CrossRankRoleViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/rank/CrossRankRoleView")},e}(),Lp=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnSold=null,this.txtName=null,this.txtQuality=null,this.txtDesc=null,this.tab=null,this.txtPrice=null,this.imgGoodBg=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.CrossServerShopConfirmPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/CrossServerShopConfirmPanel")},e}(),Dp=function(t){function e(){this.btnQuality=null,this.btnPrice=null,this.btnSelect=null,this.imgStataQua=null,this.imgStatePri=null,this.btnCopper=null,this.btnGold=null,this.txtSilver=null,this.txtGold=null,this.txtJade=null,this.btnCoin=null,this.list=null,this.txtEmptyTips=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.CrossServerShopListViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/CrossServerShopListView")},e}(),Np=function(t){function e(){this.tab=null,this.btnBack=null,this.btnExchange=null,this.spView=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.CrossServerShopPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/CrossServerShopPanel")},e}(),Vp=function(t){function e(){this.imgBg=null,this.boxSuit=null,this.btnSuit0=null,this.btnSuit1=null,this.btnSuit2=null,this.btnSuit3=null,this.btnSuit4=null,this.btnSuit5=null,this.btnSuit6=null,this.btnSuit7=null,this.btnSuit8=null,this.boxPart=null,this.btnPos0=null,this.btnPos1=null,this.btnPos2=null,this.btnPos3=null,this.btnPos4=null,this.btnPos5=null,this.txtLow=null,this.txtHight=null,this.btnReset=null,this.btnComplete=null,this.btnQua0=null,this.btnQua1=null,this.btnQua2=null,this.btnQua3=null,this.btnQua4=null,this.btnQua5=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.CrossServerShopSelectViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/CrossServerShopSelectView")},e}(),Bp=function(t){function e(){this.listPack=null,this.txtSoldNum=null,this.listSold=null,this.txtBagEmptyTips=null,this.boxSoldTips=null,this.txtSoldEmptyTips=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.CrossServerShopSoldViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/CrossServerShopSoldView")},e}(),Mp=function(t){function e(){this.txtName=null,this.txtPrice=null,this.btnBuy=null,this.imgRp=null,this.imgGoodBg=null,this.imgPass=null,this.imgSold=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.shop.item.CrossServerShopDisplayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/shop/item/CrossServerShopDisplayItem")},e}(),Fp=function(t){function e(){this.img=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.sit.SitIconUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/sit/SitIcon")},e}(),Up=function(t){function e(){this.imgBtn=null,this.txtTime=null,this.txtExp=null,this.txtCoin=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.sit.SitInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/sit/SitInfoPanel")},e}(),Gp=function(t){function e(){this.btnCopper=null,this.btnGold=null,this.txtSilver=null,this.txtGold=null,this.txtJade=null,this.btnCoin=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.CrossServerStoreListViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/CrossServerStoreListView")},e}(),Hp=function(t){function e(){this.imgGold1=null,this.imgBg=null,this.imgGold2=null,this.btnBuy=null,this.btnClose=null,this.btnAdd=null,this.btnRe=null,this.btnRe1=null,this.btnAdd1=null,this.txtName=null,this.txtTotal=null,this.txtPrice=null,this.inputNum=null,this.imgGoods=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.CrossServerStoreMutilBuyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/CrossServerStoreMutilBuyPanel")},e}(),Wp=function(t){function e(){this.tab=null,this.btnBack=null,this.btnExchange=null,this.spView=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.CrossServerStorePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/CrossServerStorePanel")},e}(),qp=function(t){function e(){this.txtTimeDesc=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.CrossServerStoreTreasureViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/CrossServerStoreTreasureView")},e}(),Yp=function(t){function e(){this.btnBack=null,this.list=null,this.btnClose=null,this.imgLeft=null,this.spBar=null,this.imgRight=null,this.txtBar=null,this.txtH=null,this.btnHelp=null,this.boxFirstCharge=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.FightSoulCoinExchangePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/FightSoulCoinExchangePanel")},e}(),Xp=function(t){function e(){this.txtName=null,this.imgCoin=null,this.txtPrice=null,this.btnBuy=null,this.txtNum=null,this.imgSilver=null,this.imgGold=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.item.CrossServerStoreListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/item/CrossServerStoreListItem")},e}(),Kp=function(t){function e(){this.btnCharge=null,this.imgPrice=null,this.imgIcon=null,this.txtPrice=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.item.CrossServerStorePayitemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/item/CrossServerStorePayitem")},e}(),jp=function(t){function e(){this.txtPrice=null,this.txtLeft=null,this.btnBuy=null,this.txtNum=null,this.boxUnknow=null,this.txtName=null,this.imgSilver=null,this.imgGold=null,this.imgCoin=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.store.item.CrossServerStoreTreasureItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/store/item/CrossServerStoreTreasureItem")},e}(),Qp=function(t){function e(){this.btn=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerAutoBtnPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerAutoBtnPanel")},e}(),zp=function(t){function e(){this.bossImg=null,this.nameTxt=null,this.timeTxt=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerBossBtnUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerBossBtn")},e}(),$p=function(t){function e(){this.itemNameTxt=null,this.itemDescTxt=null,this.useBtn=null,this.useItemName1=null,this.useItemName2=null,this.useItemName3=null,this.useItemName4=null,this.haveTxt1=null,this.haveTxt2=null,this.haveTxt3=null,this.haveTxt4=null,this.useTimeTxt1=null,this.useTimeTxt2=null,this.useTimeTxt3=null,this.useTimeTxt4=null,this.backBtn=null,this.nothingTxt=null,this.selectImg=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerItemPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerItemPanel")},e}(),Zp=function(t){function e(){this.reliveBtn=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerMiniDeadPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerMiniDeadPanel")},e}(),Jp=function(t){function e(){this.levelNumTxt=null,this.stateTxt=null,this.rewTxt=null,this.getRewardBtn=null,this.redPoint=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerMissionItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerMissionItem")},e}(),tm=function(t){function e(){this.deadTxt=null,this.reliveOnHereBtn=null,this.reliveOnTowerBtn=null,this.backToReliveBtn=null,this.itemNumTxt=null,this.closeBtn=null,this.backBtn=null,this.timeOutTxt=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerRoleDeadPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerRoleDeadPanel")},e}(),em=function(t){function e(){this.skillGary=null,this.timeTxt=null,this.descBox=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossServerTowerSkillBtnUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossServerTowerSkillBtn")},e}(),im=function(t){function l(t,e,i,s,n,o,a){this._eff=null,void 0===t&&(t=91),void 0===e&&(e=100),void 0===i&&(i=!1),void 0===s&&(s=!0),void 0===n&&(n=!1),void 0===o&&(o=!0),void 0===a&&(a=180),l.__super.call(this,t,e,i,s,n,o,a),this.top=15}w(l,"com.ui.EffGoodsItem",Ah);var e=l.prototype;return e.initEff=function(){null==this._eff&&(this._eff=b.getOne(),this._eff.mouseEnabled=!1,this._eff.pos(90,93),this.addChild(this._eff))},e.showEff=function(){this.initEff(),this._eff.visible&&this._eff.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0)},I(0,e,"effVisible",null,function(t){this.initEff(),this._eff.visible=t}),l}(),sm=function(t){function e(){this.enterTowerBtn=null,this.leftBtn=null,this.rightBtn=null,this.bossInfoPanLis=null,this.openLevelTxt=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerBossEnterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerBossEnterPanel")},e}(),nm=function(t){function e(){this.nameTxt=null,this.posTxt=null,this.bornTxt=null,this.goToFightWithBossBtn=null,this.monsterIconImg=null,this.txtblood=null,this.fightSoulText=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerBossInfoItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerBossInfoItem")},e}(),om=function(t){function e(){this.curLevelTxt=null,this.infoList=null,this.backBtn=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerBossInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerBossInfoPanel")},e}(),am=function(t){function e(){this.getCollectBtn=null,this.collectList=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerCollectPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerCollectPanel")},e}(),lm=function(t){function e(){this.selectImg=null,this.effSp=null,this.nameTxt=null,this.dropTypeTxt=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerCollectPanelItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerCollectPanelItem")},e}(),rm=function(t){function e(){this.closeBtn=null,this.btnTab=null,this.backBtn=null,this.showViewSp=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerEnterViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerEnterView")},e}(),hm=function(t){function e(){this.titleTxt=null,this.missionSp=null,this.levelTxt=null,this.missionTxt=null,this.missionDesc1=null,this.missionDesc2=null,this.getRewardBtn=null,this.redPoint=null,this.rewardDescTxt=null,this.posTxt=null,this.allMissionSp=null,this.missionList=null,this.btnTab=null,this.backBtn=null,this.allRedPoint=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerLevelMissionPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerLevelMissionPanel")},e}(),um=function(t){function e(){this.switchBtn=null,this.pkModSettingBtn=null,this.missionBtn=null,this.bossInfoBtn=null,this.itemBtn=null,this.moreBtn=null,this.mapBtn=null,this.moreBtnPart=null,this.fightSoulBtn=null,this.mackBtn=null,this.packBtn=null,this.redNameBtn=null,this.txtRed=null,this.friendBtn=null,this.fightSettingBtn=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerNavBarPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerNavBarPanel")},e}(),cm=function(t){function e(){this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerPKModPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerPKModPanel")},e}(),dm=function(t){function e(){this.pan=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.CrossTowerRulePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/CrossTowerRulePanel")},e}(),pm=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.RoleHeadListIconUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/RoleHeadListIcon")},e}(),mm=function(t){function e(){this.headList=null,this.listTitle=null,this.collectingTag=null,e.__super.call(this)}return w(e,"ui.modules.crossServer.tower.RoleHeadListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/crossServer/tower/RoleHeadListPanel")},e}(),fm=function(t){function e(){this.imghead=null,this.txtdes=null,this.txtname=null,this.btngo=null,this.btnleft=null,this.btnright=null,this.sp=null,this.btnback=null,e.__super.call(this)}return w(e,"ui.modules.dailyProductNotice.DailyProductNoticePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/dailyProductNotice/DailyProductNoticePanel")},e}(),_m=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnGet=null,this.imgCost=null,this.btnClose2=null,this.imgGoods=null,this.imgTip=null,this.spRewards=null,this.imgTR1=null,this.imgTR2=null,this.imgTR3=null,this.imgR=null,this.imgLine=null,e.__super.call(this)}return w(e,"ui.modules.dailyRecharge.DailyRechargePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/dailyRecharge/DailyRechargePanel")},e}(),gm=function(t){function e(){this.imgUpBg=null,this.imgUp=null,this.imgDownBg=null,this.imgDown=null,this.btnUp=null,this.imgName=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateEquipAdvanceViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateEquipAdvanceView")},e}(),ym=function(t){function e(){this.panel=null,this.panel1=null,this.btnDe=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateEquipDeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateEquipDeView")},e}(),vm=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnClose2=null,this.spView=null,this.spHead=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateEquipPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateEquipPanel")},e}(),Im=function(t){function e(){this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.imgPut1=null,this.imgPut2=null,this.imgBg1=null,this.imgGoods1=null,this.rp1=null,this.imgBg2=null,this.imgGoods2=null,this.rp2=null,this.imgBg3=null,this.imgGoods3=null,this.rp3=null,this.imgBg4=null,this.imgGoods4=null,this.rp4=null,this.spPow=null,this.txtDe1=null,this.txtDe2=null,this.txtCol1=null,this.txtCol2=null,this.txtCol3=null,this.txtCol4=null,this.txtStar1=null,this.txtStar2=null,this.txtStar3=null,this.txtStar4=null,this.txtLink=null,this.txtPer=null,this.txtName1=null,this.txtName2=null,this.txtName3=null,this.txtName4=null,this.txtLink1=null,this.txtLink2=null,this.txtLink3=null,this.txtLink4=null,this.txtNow=null,this.txtSub=null,this.txtDe=null,this.txtHas=null,this.btnQu=null,this.btnClo=null,this.imgSel=null,this.imgStone=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateEquipQuenchViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateEquipQuenchView")},e}(),wm=function(t){function e(){this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.imgBg1=null,this.imgGoods1=null,this.rp1=null,this.imgBg2=null,this.imgGoods2=null,this.rp2=null,this.imgBg3=null,this.imgGoods3=null,this.rp3=null,this.imgBg4=null,this.imgGoods4=null,this.rp4=null,this.imgPut=null,this.txtName1=null,this.txtName2=null,this.txtName3=null,this.txtName4=null,this.txtLV1=null,this.txtLV2=null,this.txtLV3=null,this.txtLV4=null,this.txtLink1=null,this.txtLink2=null,this.txtLink3=null,this.txtLink4=null,this.txtNow=null,this.txtSub=null,this.txtD=null,this.txtLink=null,this.txtDe=null,this.txtHas=null,this.btnUp=null,this.btnClo=null,this.imgSel=null,this.spPow=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateEquipUpViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateEquipUpView")},e}(),bm=function(t){function e(){this.bg=null,this.btnClose=null,this.btnY=null,this.btnN=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DominateSelectViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DominateSelectView")},e}(),Sm=function(t){function e(){this.bathUse=null,this.btnD=null,this.btnU=null,this.txtInput=null,this.btnMin=null,this.btnMax=null,this.btnUse=null,this.btnUseM=null,e.__super.call(this)}return w(e,"ui.modules.Equip.GoodsUseItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/GoodsUseItem")},e}(),xm=function(t){function e(){this.imgEquip=null,this.imgVoca=null,this.txtLevel=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.Equip.OrangeEquipDropViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/OrangeEquipDropView")},e}(),Cm=function(t){function e(){this.spFire=null,this.txtCon=null,e.__super.call(this)}return w(e,"ui.modules.Equip.SubTipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/SubTipView")},e}(),Pm=function(t){function e(){this.txtProp=null,this.txtStar=null,e.__super.call(this)}return w(e,"ui.modules.Equip.SubTipView2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/SubTipView2")},e}(),Tm=function(t){function e(){this.img=null,this.imgSelect=null,this.imgMask=null,this.imgRP=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsHeadItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsHeadItem")},e}(),km=function(t){function e(){this.btnUpStep=null,this.imgRPStep=null,this.btnLvUp=null,this.txtAlready=null,this.txtNeed=null,this.txtSkillMsg=null,this.txtSkillLv=null,this.htmlNeedNum=null,this.html=null,this.spMask=null,this.txtLoadTip=null,this.btnLoad=null,this.imgRPActive=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsAloneViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsAloneView")},e}(),Am=function(t){function e(){this.container=null,this.spEff=null,this.btn=null,this.spPower=null,this.txtSkill=null,this.txtAttr0=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsGetPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsGetPanel")},e}(),Em=function(t){function e(){this.imgInfo=null,this.txtName=null,this.txtSkill=null,this.spEff=null,this.spPower=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsInfoPartUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsInfoPart")},e}(),Rm=function(t){function e(){this.tab=null,this.imgStar=null,this.txtStar=null,this.imgRPStar=null,this.imgTeam=null,this.imgRPResonate=null,this.btnUp=null,this.imgRPStep=null,this.txtNeed=null,this.htmlNeedNum=null,this.spMask=null,this.btnLoad=null,this.imgRPActive=null,this.txtLoadTip=null,this.txtCardName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsSocialViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsSocialView")},e}(),Om=function(t){function e(){this.spEff=null,this.imgFull=null,this.imgName=null,this.btnClose=null,this.btnUp=null,this.btnBack=null,this.imgRP=null,this.spPower=null,this.txtStar=null,this.txtStep=null,this.txtStepTip=null,this.txtAttrCur=null,this.txtAttrNext=null,this.txtGet=null,this.star0=null,this.star1=null,this.star2=null,this.star3=null,this.star4=null,this.star5=null,this.star6=null,this.star7=null,this.star8=null,this.star9=null,this.htmlNeed=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsStarPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsStarPanel")},e}(),Lm=function(t){function e(){this.img=null,this.imgSelect=null,this.imgAlready=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsTeamItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsTeamItem")},e}(),Dm=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnLoad=null,this.imgRP=null,this.spPower=null,this.txtAttr0=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,this.txtSkill=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsTeamPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsTeamPanel")},e}(),Nm=function(t){function e(){this.spView=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beasts.ExerBeastsViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beasts/ExerBeastsView")},e}(),Vm=function(t){function e(){this.spinfo1=null,this.imghead=null,this.imgname=null,this.btnmax=null,this.txtdes=null,this.spinfo2=null,this.imgcardbg1=null,this.imgcard1=null,this.imgfont1=null,this.imgcardname1=null,this.spstar1=null,this.imgup=null,this.imgcardbg2=null,this.imgcard2=null,this.imgfont2=null,this.imgcardname2=null,this.spstar2=null,this.imgpower=null,this.sppower=null,this.btnup=null,this.imgrp=null,this.btnback=null,this.imgtitle=null,this.txtgetattr=null,this.txtneed=null,this.attrup1=null,this.txtnowlv=null,this.txtnowattr1=null,this.txtnowattr2=null,this.txtnowattr3=null,this.txtnowattr4=null,this.attrup2=null,this.txtnextlv=null,this.txtnextattr1=null,this.txtnextattr2=null,this.txtnextattr3=null,this.txtnextattr4=null,this.imgArrowR=null,this.imgmaxstep=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookCardAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookCardAttrView")},e}(),Bm=function(t){function e(){this.filterbox=null,this.imgbg=null,this.imgcard=null,this.imgframe=null,this.imgname=null,this.spstar=null,this.imgrp=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookCardItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookCardItem")},e}(),Mm=function(t){function e(){this.imgbg=null,this.imgcard=null,this.imgname=null,this.txtname=null,this.txtattr1=null,this.txtattr2=null,this.txtattr3=null,this.txtattr4=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookCardTargetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookCardTargetView")},e}(),Fm=function(t){function e(){this.linkattr=null,this.cmb=null,this.list=null,this.txttip=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookCardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookCardView")},e}(),Um=function(t){function e(){this.imgbg=null,this.btnone=null,this.btnten=null,this.spreward=null,this.imgbg1=null,this.imgicon1=null,this.btnbuy1=null,this.txtname1=null,this.txtprice1=null,this.imgbg2=null,this.imgicon2=null,this.btnbuy2=null,this.txtname2=null,this.txtprice2=null,this.txtnum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookLotteryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookLotteryView")},e}(),Gm=function(t){function e(){this.txtdes=null,this.txtTitle=null,this.sppower=null,this.txtattr1=null,this.txtval1=null,this.txtattr2=null,this.txtval2=null,this.txtattr3=null,this.txtval3=null,this.txtattr4=null,this.txtval4=null,this.btnclose=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookSuitAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookSuitAttrView")},e}(),Hm=function(t){function e(){this.suitname=null,this.imgclick=null,this.imghas=null,this.imgred=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookSuitItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookSuitItem")},e}(),Wm=function(t){function e(){this.btnactive=null,this.list=null,this.linktotalattr=null,this.imgrp=null,this.txtattr1=null,this.txtattr2=null,this.txtattr3=null,this.txtattr4=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookSuitViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookSuitView")},e}(),qm=function(t){function e(){this.tab=null,this.spview=null,e.__super.call(this)}return w(e,"ui.modules.exercise.beastsBook.BeastsBookViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/beastsBook/BeastsBookView")},e}(),Ym=function(t){function e(){this.tab=null,this.list=null,this.txtNum=null,this.linkAttr=null,this.spPower=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyCardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyCardView")},e}(),Xm=function(t){function e(){this.spBar=null,this.txtName=null,this.txtNum=null,this.txtInfo1=null,this.btnCompound=null,this.btnUp=null,this.btnBack=null,this.btnClose=null,this.txtCost=null,this.imgRPCompose=null,this.imgRPUpgrade=null,this.txtOwn=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyComposePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyComposePanel")},e}(),Km=function(t){function e(){this.imgBg=null,this.btn=null,this.spStar=null,this.spReward=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyCopyEnterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyCopyEnterItem")},e}(),jm=function(t){function e(){this.spItems=null,this.btnRefresh=null,this.btnIssue=null,this.txtCost=null,this.txtTimes=null,this.txtTime=null,this.btnSetting=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyCopyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyCopyView")},e}(),Qm=function(t){function e(){this.imgSelected=null,this.imgHead=null,this.txtName=null,this.txtPower=null,this.txtOnline=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueFriendItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueFriendItem")},e}(),zm=function(t){function e(){this.spBg=null,this.spFriend=null,this.imgSex=null,this.imgHead=null,this.btnFight=null,this.txtOnline=null,this.txtName=null,this.txtPower=null,this.txtLevel=null,this.txtState=null,this.imgReward=null,this.imgCaptain=null,this.imgRP=null,this.spRequest=null,this.imgAdd=null,this.btnRequest=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueItem")},e}(),$m=function(t){function e(){this.btnClose=null,this.btn=null,this.list=null,this.txtTime=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssuePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssuePanel")},e}(),Zm=function(t){function e(){this.btnClose=null,this.txtPower=null,this.btnFamily=null,this.btnFriend=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueRequestPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueRequestPanel")},e}(),Jm=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnMember=null,this.btnCaptain=null,this.txtCaptain=null,this.spReward1=null,this.spReward2=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueRewardPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueRewardPanel")},e}(),tf=function(t){function e(){this.imgGoods1=null,this.imgGoods2=null,this.imgGoods3=null,this.btnClose=null,this.btn1=null,this.btn2=null,this.btn3=null,this.txtNum1=null,this.txtNum2=null,this.txtNum3=null,this.txtCost1=null,this.txtCost2=null,this.txtCost3=null,this.txtLink1=null,this.txtLink2=null,this.txtLink3=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyIssueTypePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyIssueTypePanel")},e}(),ef=function(t){function e(){this.imgCard=null,this.txtStar=null,this.txtPower=null,this.imgFilter=null,this.imgRP=null,this.spBar=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyItem")},e}(),sf=function(t){function e(){this.imgBg=null,this.btnOne=null,this.btnTen=null,this.spReward=null,this.imgBg1=null,this.imgIcon1=null,this.btnBuy1=null,this.txtName1=null,this.txtPrice1=null,this.imgBg2=null,this.imgIcon2=null,this.btnBuy2=null,this.txtName2=null,this.txtPrice2=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyLottoViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyLottoView")},e}(),nf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.chb1=null,this.chb2=null,this.chb3=null,this.chb4=null,this.chb5=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyRefreshNoticePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyRefreshNoticePanel")},e}(),of=function(t){function e(){this.imgSkill=null,this.imgFilter=null,this.txtName=null,this.txtLevel=null,this.panel=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographySkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographySkillItem")},e}(),af=function(t){function e(){this.btnClose=null,this.btnBack=null,this.spPower=null,this.btnUpgrade=null,this.imgRP=null,this.imgIcon=null,this.spStar=null,this.txtDesc=null,this.txtName=null,this.txtMaterialsInfo=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographySkillPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographySkillPanel")},e}(),lf=function(t){function e(){this.txtTitle=null,this.txt49=null,this.input49=null,this.txt11=null,this.input11=null,this.txt13=null,this.input13=null,this.txt14=null,this.input14=null,this.txt37=null,this.input37=null,this.txt38=null,this.input38=null,this.btnHide=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyTotalAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyTotalAttrView")},e}(),rf=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyView")},e}(),hf=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.spView=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.exercise.ExercisePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/ExercisePanel")},e}(),uf=function(t){function e(){this.btn1=null,this.btn2=null,this.btn4=null,this.btn3=null,this.btn6=null,this.btn7=null,this.btn8=null,this.btn9=null,this.btn10=null,this.btn11=null,this.btn12=null,e.__super.call(this)}return w(e,"ui.modules.exercise.ExerGuideViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/ExerGuideView")},e}(),cf=function(t){function e(){this.btnClose=null,this.btnAdd0=null,this.btnAdd1=null,this.btnAdd2=null,this.txtPrice0=null,this.txtPrice1=null,this.txtPrice2=null,this.txtCurExp=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulAddSpiritPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulAddSpiritPanel")},e}(),df=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnCollect=null,this.btnLeft=null,this.btnRight=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulCollectSoulPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulCollectSoulPanel")},e}(),pf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnSure=null,this.txtName=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulCollectSucPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulCollectSucPanel")},e}(),mf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnSure=null,this.list=null,this.txtDesc=null,this.imgTitle=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulConfirmPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulConfirmPanel")},e}(),ff=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnEquip=null,this.list=null,this.spTips=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulListPanel")},e}(),_f=function(t){function e(){this.btnEuip=null,this.txtGetSoul=null,this.btnBag=null,this.spPow=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulMainViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulMainView")},e}(),gf=function(t){function e(){this.cloBtn=null,this.yBtn=null,this.nBtn=null,this.downBtn=null,this.upBtn=null,this.txtInput=null,this.txtPrice=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulOpenPackageCellPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulOpenPackageCellPanel")},e}(),yf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnDisassembly=null,this.item=null,this.txtName=null,this.btnExchange=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulOperatePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("ui.modules.exercise.fightSoul.item.FightSoulEuipItemUI",Af),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulOperatePanel")},e}(),vf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,this.txtNum=null,this.btnAdd=null,this.btnCollect=null,this.btnResolve=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulPackagePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulPackagePanel")},e}(),If=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.list=null,this.bgImg=null,this.imgBg=null,this.imgGood=null,this.noticeTxt=null,this.toRecast=null,this.spGoods=null,this.spConsume=null,this.attrTxt=null,this.afterTxt=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulRecastSoulPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulRecastSoulPanel")},e}(),wf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnResolve=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulResolveSoulPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulResolveSoulPanel")},e}(),bf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnSure=null,this.list=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulSelectSoulPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulSelectSoulPanel")},e}(),Sf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnEquip=null,this.list=null,this.spTips=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulSpiritListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulSpiritListPanel")},e}(),xf=function(t){function e(){this.btnEuip=null,this.txtGetSoul=null,this.btnBag=null,this.spPow=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulSpiritMainViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulSpiritMainView")},e}(),Cf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnUpgrade=null,this.txtName=null,this.txtDesc=null,this.btnDisassemble=null,this.txtAttrCur=null,this.txtAttrNext=null,this.imgMax=null,this.txtLvl=null,this.boxExp=null,this.txtExpNumDesc=null,this.txtMyExp=null,this.txtCostExp=null,this.btnAdd=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulSpiritOperatePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulSpiritOperatePanel")},e}(),Pf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,this.txtNum=null,this.btnAdd=null,this.btnRecast=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.pureSpirit.FightSoulSpiritPackagePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/pureSpirit/FightSoulSpiritPackagePanel")},e}(),Tf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnCheck=null,this.txtName=null,this.btnOpen=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulUsePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulUsePanel")},e}(),kf=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulView")},e}(),Af=function(t){function e(){this.btnAdd=null,this.txtPart=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.item.FightSoulEuipItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/item/FightSoulEuipItem")},e}(),Ef=function(t){function e(){this.btnSelect=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.item.FightSoulSelectItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/item/FightSoulSelectItem")},e}(),Rf=function(t){function e(){this.imgBg=null,this.btnAdd=null,this.imgLock=null,this.imgSelect=null,this.txtName=null,this.txtLevel=null,this.imgUp=null,this.txtPart=null,this.imgNew=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.item.FightSoulShowItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/item/FightSoulShowItem")},e}(),Of=function(t){function e(){this.txtName=null,this.txtTitle=null,this.btnBack=null,this.txt1=null,this.input1=null,this.txt2=null,this.input2=null,this.txt3=null,this.input3=null,this.txt4=null,this.input4=null,this.txt5=null,this.input5=null,this.txt7=null,this.input7=null,this.input6=null,this.txt6=null,this.input8=null,this.txt8=null,this.btnL=null,this.btnR=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipAttrView")},e}(),Lf=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.imgSelected=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipBagStoneItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipBagStoneItem")},e}(),Df=function(t){function e(){this.list=null,this.btnOneKey=null,this.btnOne=null,this.txtCost1=null,this.txtCost2=null,this.txtSchedule=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipExchangeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipExchangeView")},e}(),Nf=function(t){function e(){this.btnInlay=null,this.txtAttr=null,this.spCost=null,this.txtCost=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipInlayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipInlayItem")},e}(),Vf=function(t){function e(){this.bg=null,this.img=null,this.txt=null,this.imgSelect=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodequipItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodequipItem")},e}(),Bf=function(t){function e(){this.btnUp=null,this.imgRP=null,this.btnLeft=null,this.btnRight=null,this.spNeed=null,this.txtNeed=null,this.txtNum=null,this.txtHas=null,this.spWay=null,this.txtLink=null,this.spAttr1=null,this.curTitle=null,this.txtAttr1=null,this.spAttr2=null,this.txtAttr2=null,this.nextTitle=null,this.txtSpc=null,this.list=null,this.txtName=null,this.imgArrow=null,this.spPow=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipMainView")},e}(),Mf=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.imgSelected=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipPartItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipPartItem")},e}(),Ff=function(t){function e(){this.txtPrice=null,this.btnYes=null,this.btnNo=null,this.btnClose=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipStoneDisassemblePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipStoneDisassemblePanel")},e}(),Uf=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.radioGroup=null,this.list=null,this.txtTitle=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipStoneInlayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipStoneInlayPanel")},e}(),Gf=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.txtTitle=null,this.imgSource=null,this.imgTarget=null,this.txtSourceName=null,this.txtTargetName=null,this.txtSourceAttr=null,this.txtTargetAttr=null,this.list=null,this.btnReplace=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipStoneReplacePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipStoneReplacePanel")},e}(),Hf=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.imgSource=null,this.imgTarget=null,this.btnUp=null,this.txtTitle=null,this.txtSourceName=null,this.txtTargetName=null,this.txtSourceAttr=null,this.txtTargetAttr=null,this.txtCost=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipStoneUpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipStoneUpPanel")},e}(),Wf=function(t){function e(){this.btnLeft=null,this.btnRight=null,this.list=null,this.imgBg=null,this.btnOperation=null,this.btnDisa=null,this.txtName=null,this.txtDesc=null,this.txtAttrs=null,this.txtAttrView=null,this.txtEquipName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodEquipStoneViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodEquipStoneView")},e}(),qf=function(t){function e(){this.spView=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.exercise.godEquip.ExerGodequipViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/godEquip/ExerGodequipView")},e}(),Yf=function(t){function e(){this.bg=null,this.imgPath=null,this.imgLine0=null,this.imgLine1=null,this.imgLine2=null,this.imgLine3=null,this.imgLine4=null,this.imgLine5=null,this.imgPoint0=null,this.imgPoint1=null,this.imgPoint2=null,this.imgPoint3=null,this.imgPoint4=null,this.imgPoint5=null,this.imgPoint6=null,e.__super.call(this)}return w(e,"ui.modules.exercise.meridian.MeridianItemViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/meridian/MeridianItemView")},e}(),Xf=function(t){function e(){this.txtNext=null,this.html0=null,this.html1=null,e.__super.call(this)}return w(e,"ui.modules.exercise.meridian.MeridianPointTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/meridian/MeridianPointTip")},e}(),Kf=function(t){function e(){this.txtAttr=null,this.spItems=null,this.spPower=null,this.btn=null,this.btnBox=null,this.txtLv=null,this.txtLink=null,this.html=null,this.htmlCur=null,this.htmlNeed=null,e.__super.call(this)}return w(e,"ui.modules.exercise.meridian.MeridianViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/meridian/MeridianView")},e}(),jf=function(t){function e(){this.imgIcon=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlIcon1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlIcon1")},e}(),Qf=function(t){function e(){this.imgIcon=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlIcon2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlIcon2")},e}(),zf=function(t){function e(){this.txtName=null,this.txtNum=null,this.txtReward=null,this.txtLink=null,this.imgState=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlMissionItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlMissionItem")},e}(),$f=function(t){function e(){this.imgSkill=null,this.txtLv=null,this.redPoint=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlSkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlSkillItem")},e}(),Zf=function(t){function e(){this.btnClose=null,this.btnBack=null,this.line1=null,this.line2=null,this.line3=null,this.imgSkill=null,this.txtName=null,this.txtInfo1=null,this.txtCurAttr=null,this.txtNextAttr=null,this.txtInfo=null,this.txtInfo2=null,this.upgradeBtn=null,this.fullLevelImg=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlSkillPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlSkillPanel")},e}(),Jf=function(t){function e(){this.imgLine=null,this.line0=null,this.line1=null,this.line2=null,this.line3=null,this.line4=null,this.line5=null,this.line6=null,this.line7=null,this.line8=null,this.spIcons=null,this.spBar=null,this.spSkillItem=null,this.list=null,this.btnUp=null,this.txtCurAttr=null,this.txtNextAttr=null,e.__super.call(this)}return w(e,"ui.modules.exercise.pearl.ExerPearlViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/pearl/ExerPearlView")},e}(),t_=function(t){function e(){this.btnClose=null,this.btnOne=null,this.btnTen=null,this.btnFifty=null,this.imgRP=null,this.spOne=null,this.txt1=null,this.txt50=null,this.txt10=null,this.htmlCur=null,this.htmlTip=null,this.spWay1=null,this.spWay2=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneBuyElitePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneBuyElitePanel")},e}(),e_=function(t){function e(){this.btnClose=null,this.nextTitle=null,this.txtTitle=null,this.txtExtra=null,this.spScore=null,this.txtCost=null,this.txtTitle1=null,this.txtCondition=null,this.btnUpgrade=null,this.txtMaxLevelTip=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneCoreUpgradeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneCoreUpgradeView")},e}(),i_=function(t){function e(){this.imgIconBg=null,this.imgIcon=null,this.btn=null,this.txtName=null,this.txtDesc=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneInlayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneInlayItem")},e}(),s_=function(t){function e(){this.imgIcon=null,this.imgGoods=null,this.txtAttr=null,this.txtBlock=null,this.list=null,this.txtName=null,this.spTip=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneInlayViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneInlayView")},e}(),n_=function(t){function e(){this.imgIconBg=null,this.imgNameBg=null,this.imgIcon=null,this.txtName=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneItem")},e}(),o_=function(t){function e(){this.txtLevel=null,this.txtCondition=null,this.btn=null,this.txtAttr=null,this.spIcon=null,this.imgRPCore=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneMainView")},e}(),a_=function(t){function e(){this.spView=null,this.tab=null,this.btnBack=null,this.btnClose=null,this.imgRP1=null,this.imgRP2=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneOperationPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneOperationPanel")},e}(),l_=function(t){function e(){this.btnDel=null,this.txtNum=null,this.html=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RunePackViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RunePackView")},e}(),r_=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneResolveItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneResolveItem")},e}(),h_=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.txtStoneNum=null,this.txtNum=null,this.btn=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneResolvePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneResolvePanel")},e}(),u_=function(t){function e(){this.chk=null,this.imgBg=null,this.imgGoods=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneSelectResolveItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneSelectResolveItem")},e}(),c_=function(t){function e(){this.btnY=null,this.txtSelNum=null,this.panelSel=null,this.closeBtn=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.pack.SelectMeltingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/SelectMeltingView")},e}(),d_=function(t){function e(){this.btnUpgrade=null,this.imgIcon=null,this.imgGoods=null,this.imgRP=null,this.txtAttr=null,this.txtBlock=null,this.txtNextAttr=null,this.txtCurAttr=null,this.txtCost=null,this.txtLink=null,this.txtName=null,this.txtMaxTip=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneUpgradeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneUpgradeView")},e}(),p_=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.exercise.rune.RuneViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/rune/RuneView")},e}(),m_=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.imgRedPoint=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireStoneItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireStoneItem")},e}(),f_=function(t){function e(){this.imgBg=null,this.imgSelect=null,this.img=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreItem")},e}(),__=function(t){function e(){this.btnReplace=null,this.txtLv=null,this.txtAtt=null,this.txtHas=null,this.imgBg=null,this.imgSpiriTre=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreReplaceItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreReplaceItem")},e}(),g_=function(t){function e(){this.selEquip=null,this.rpList=null,this.imgBg1=null,this.imgBg2=null,this.imgBg3=null,this.imgBg4=null,this.btnAdvance=null,this.rpAd=null,this.txtName=null,this.imgEquip1=null,this.imgEquip2=null,this.imgFull=null,this.imgConsume1=null,this.txt1=null,this.imgConsume2=null,this.txt2=null,this.spConsume1=null,this.txtConsume1=null,this.spConsume2=null,this.txtConsume2=null,this.txtQuality1=null,this.txtAdd1=null,this.txtQuality2=null,this.txtAdd2=null,this.htmlDes=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreAdvanceViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreAdvanceView")},e}(),y_=function(t){function e(){this.list=null,this.decompDes=null,this.decompGet=null,this.spItem=null,this.btnDecomp=null,this.rpDe=null,this.btnAll=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreDecompViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreDecompView")},e}(),v_=function(t){function e(){this.selEquip=null,this.imgBg=null,this.imgSelect=null,this.btnInlay=null,this.btnOff=null,this.imgCur=null,this.txtName=null,this.imgSlot=null,this.imgStone=null,this.txtNum1=null,this.txtNum2=null,this.txtNum3=null,this.txtNum4=null,this.rpList=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreInlayViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreInlayView")},e}(),I_=function(t){function e(){this.spSuit=null,this.selSuit=null,this.imgDes=null,this.imgSuit=null,this.imgBg1=null,this.imgBg2=null,this.imgBg3=null,this.imgBg4=null,this.imgBg5=null,this.imgBg6=null,this.imgBg7=null,this.imgBg8=null,this.imgSelect=null,this.imgPos1=null,this.imgPos2=null,this.imgPos3=null,this.imgPos4=null,this.imgPos5=null,this.imgPos6=null,this.imgPos7=null,this.imgPos8=null,this.rp8=null,this.rp7=null,this.rp6=null,this.rp5=null,this.rp4=null,this.rp3=null,this.rp2=null,this.rp1=null,this.rpSuit=null,this.rpLV=null,this.rpList=null,this.spMain=null,this.btnChange=null,this.rpCh=null,this.btnQuench=null,this.rpQu=null,this.txtTitle1=null,this.txtAtt11=null,this.txtAtt12=null,this.txtAtt13=null,this.txtAtt14=null,this.txtNo1=null,this.txtLV=null,this.txtPower1=null,this.btnAdvance=null,this.rpAd=null,this.txtTitle2=null,this.txtAtt21=null,this.txtAtt22=null,this.txtAtt23=null,this.txtAtt24=null,this.txtNo2=null,this.txtQuality=null,this.txtPower2=null,this.txtAdd=null,this.btnInlay=null,this.rpIn=null,this.txtTitle3=null,this.txtAtt31=null,this.txtAtt32=null,this.txtNo3=null,this.txtStone=null,this.txtPower3=null,this.imgBgCurs=null,this.imgCurs=null,this.txtName=null,this.txtLevel=null,this.txtRandLevel=null,this.txtAtt1=null,this.txtAtt2=null,this.imgSlot=null,this.imgStone=null,this.checkBox=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreMainView")},e}(),w_=function(t){function e(){this.txtCurAtt1=null,this.txtCurAtt2=null,this.txtNextAtt1=null,this.txtNextAtt2=null,this.txtPro=null,this.selEquip=null,this.imgDes=null,this.txtName=null,this.imgBgEquip=null,this.star1=null,this.star2=null,this.star3=null,this.star4=null,this.star5=null,this.star6=null,this.star7=null,this.star8=null,this.star9=null,this.star10=null,this.imgBgCon=null,this.txtCon=null,this.btnQuench=null,this.rpQu=null,this.imgEquip=null,this.imgCon=null,this.spCon=null,this.rpList=null,this.rpTarget=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreQuenchViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreQuenchView")},e}(),b_=function(t){function e(){this.imgBg1=null,this.imgBg2=null,this.imgBg3=null,this.imgBg4=null,this.imgBg5=null,this.selSuit=null,this.list=null,this.btnRecast=null,this.rpRe=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreRecastViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreRecastView")},e}(),S_=function(t){function e(){this.btnClose=null,this.imgBg=null,this.imgCurs=null,this.txtSlot=null,this.txtAtt2=null,this.txtAtt1=null,this.txtLevel=null,this.txtName=null,this.list=null,this.titleBg=null,this.txtLink=null,this.btnclose2=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreReplacePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreReplacePanel")},e}(),x_=function(t){function e(){this.btnClose1=null,this.spView=null,this.tab=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreSecViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreSecView")},e}(),C_=function(t){function e(){this.btnClose=null,this.imgCir1=null,this.imgCir2=null,this.imgCir3=null,this.imgCir4=null,this.imgCir5=null,this.imgCir6=null,this.imgCir7=null,this.imgCir8=null,this.imgCir9=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreSortPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreSortPanel")},e}(),P_=function(t){function e(){this.btnClose=null,this.imgCir1=null,this.imgCir2=null,this.imgCir3=null,this.imgCir4=null,this.imgCir5=null,this.imgCir6=null,this.imgCir7=null,this.imgCir8=null,this.imgCir9=null,this.cb=null,this.btnSure=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreSuitSortViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreSuitSortView")},e}(),T_=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreTransferViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreTransferView")},e}(),k_=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreView")},e}(),A_=function(t){function e(){this.txtName=null,this.btnClose=null,this.input49=null,this.input11=null,this.input13=null,this.input14=null,this.inputSpc=null,this.btnL=null,this.btnR=null,this.txtQualityName=null,this.txtQualityDesc=null,this.txtGet=null,this.txtTip=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireAttrView")},e}(),E_=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.btnInlay=null,this.list=null,this.imgSelected=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireBagPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireBagPanel")},e}(),R_=function(t){function e(){this.imgTarget=null,this.btnClose=null,this.btnClose1=null,this.btnOneKey=null,this.imgRP=null,this.txtDesc=null,this.txtName=null,this.spBar=null,this.imgStone=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireInlayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireInlayPanel")},e}(),O_=function(t){function e(){this.imgBg=null,this.txtName=null,this.spBar=null,this.imgStone=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireItem")},e}(),L_=function(t){function e(){this.imgViewTarget=null,this.btnInaly=null,this.imgRP=null,this.imgName=null,this.imgArrt=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,this.txtAttr4=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireMainView")},e}(),D_=function(t){function e(){this.txtName=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireQualityEffItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireQualityEffItem")},e}(),N_=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireQualityEffPreviewPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireQualityEffPreviewPanel")},e}(),V_=function(t){function e(){this.imgViewEff=null,this.btnQualityUp=null,this.txtDesc=null,this.imgName=null,this.spTip=null,this.spBar=null,this.txtUpRate=null,this.txtCostDesc=null,this.txtCost=null,this.imgQuality=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireQualityViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireQualityView")},e}(),B_=function(t){function e(){this.imgTarget=null,this.btnRefine=null,this.imgRP=null,this.txtTitle=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,this.txtAttr4=null,this.txtDesc=null,this.txtScore=null,this.imgName=null,this.imgArrt=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireRefineViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireRefineView")},e}(),M_=function(t){function e(){this.imgBg=null,this.txtDesc=null,this.txtTarget2=null,this.txtTarget3=null,this.txtTarget4=null,this.txtTarget5=null,this.txtTarget6=null,this.txtSkill2=null,this.txtSkill3=null,this.txtSkill4=null,this.txtSkill5=null,this.txtSkill6=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireTargetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireTargetView")},e}(),F_=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireView")},e}(),U_=function(t){function e(){this.imgCard=null,this.lightImg=null,this.imgTaliman=null,this.spStone=null,this.PRimg=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanCardItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanCardItem")},e}(),G_=function(t){function e(){this.btnInlay=null,this.txtAttr=null,this.spCost=null,this.priceImg=null,this.txtCost=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanStoneInlayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanStoneInlayItem")},e}(),H_=function(t){function e(){this.imgBg=null,this.imgStone=null,this.arrow=null,this.txtAttr0=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,this.txtNo=null,this.potentialActive=null,this.offBtn=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanStoneItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanStoneItem")},e}(),W_=function(t){function e(){this.txtName=null,this.txt0=null,this.txt3=null,this.txt2=null,this.txt1=null,this.txt4=null,this.btnClose=null,this.btnL=null,this.btnR=null,this.attrImg0=null,this.attr0=null,this.attrImg3=null,this.attr3=null,this.attrImg2=null,this.attr2=null,this.attrImg1=null,this.attr1=null,this.attrImg4=null,this.attr4=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanAttrPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanAttrPanel")},e}(),q_=function(t){function e(){this.spView=null,this.tab=null,this.spDetail=null,this.stoneBg=null,this.stone=null,this.spPower=null,this.txtAttr1=null,this.txtAttr2=null,this.txtAttr3=null,this.txtAttr4=null,this.txtLink=null,this.panel=null,this.inputSearch=null,this.btnSearch=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanDetailPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanDetailPanel")},e}(),Y_=function(t){function e(){this.container=null,this.viewPanel=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanMainPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanMainPanel")},e}(),X_=function(t){function e(){this.txtLv=null,this.html0=null,this.html2=null,this.html1=null,this.html3=null,this.txtLink=null,this.btn=null,this.RPimg=null,this.txtNum=null,this.imgMax=null,this.payIconImg=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanRefineViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanRefineView")},e}(),K_=function(t){function e(){this.imgStar0=null,this.imgStar1=null,this.imgStar2=null,this.btn=null,this.RPimg=null,this.txtNum=null,this.imgMax=null,this.payIconImg=null,this.html0=null,this.html2=null,this.html1=null,this.html3=null,this.txtTip=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanStepViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanStepView")},e}(),j_=function(t){function e(){this.bg=null,this.helpBtn=null,this.btnClose2=null,this.btnClose=null,this.radioGroup=null,this.list=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanStoneInlayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanStoneInlayPanel")},e}(),Q_=function(t){function e(){this.sp=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanStoneViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanStoneView")},e}(),z_=function(t){function e(){this.txtMy=null,this.txtName=null,this.txtCon=null,this.txtTime=null,this.lastTimeRank=null,this.imgHead=null,this.ImgVip=null,this.btnAdd=null,this.btnRe=null,this.inputNum=null,this.imgBg=null,this.txtNeed=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.FamilyMaterialAssItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/FamilyMaterialAssItem")},e}(),$_=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.imgBot=null,this.btnYes=null,this.txtNum=null,this.txtName=null,this.pan=null,this.lastFighterCheckBox=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.FamilyMaterialAssViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/FamilyMaterialAssView")},e}(),Z_=function(t){function e(){this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.FamilyMaterialLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/FamilyMaterialLogItem")},e}(),J_=function(t){function e(){this.btnClose=null,this.btnBuy=null,this.btnAdd=null,this.btnRe=null,this.btnRe1=null,this.btnAdd1=null,this.txtName=null,this.inputNum=null,this.txtLeft=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.FamilyMaterialResViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/FamilyMaterialResView")},e}(),tg=function(t){function e(){this.btnYes=null,this.btnNo=null,this.btnClose=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.FamilyMaterialSecViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/FamilyMaterialSecView")},e}(),eg=function(t){function e(){this.txtName1=null,this.txtName2=null,this.txtFamName1=null,this.txtFamName2=null,this.img1=null,this.img2=null,this.btnWatch=null,this.imgWin=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleLogItem")},e}(),ig=function(t){function e(){this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleLogRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleLogRankItem")},e}(),sg=function(t){function e(){this.btnClose=null,this.tab=null,this.spLog=null,this.tog1=null,this.tog2=null,this.pan=null,this.spRank=null,this.txtTitle1=null,this.txtNo=null,this.txtTitle2=null,this.rankPan=null,this.txtRank=null,this.txtName=null,this.txtWin=null,this.txtScore=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleLogViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleLogView")},e}(),ng=function(t){function e(){this.txt1=null,this.txt2=null,this.txt3=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleMemberStateItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleMemberStateItem")},e}(),og=function(t){function e(){this.btnClose=null,this.btnCall=null,this.btnClose2=null,this.panel=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleMemberStateViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleMemberStateView")},e}(),ag=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtWin=null,this.txtScore=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PerBattlerRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PerBattlerRankItem")},e}(),lg=function(t){function e(){this.btnClose=null,this.pan=null,this.txtNo=null,this.txtT=null,this.txt2=null,this.txt4=null,this.tab=null,this.txtSub=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleRankViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleRankView")},e}(),rg=function(t){function e(){this.txt=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleRewardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleRewardItem")},e}(),hg=function(t){function e(){this.btnClose=null,this.tab=null,this.pan=null,this.txtT=null,this.txt2=null,this.txtDown2=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleRewardView")},e}(),ug=function(t){function e(){this.spTower=null,this.txtRound=null,this.imgLeftOne=null,this.btnYes=null,this.btn1=null,this.btn2=null,this.btn3=null,this.imgRightUp=null,this.pan1=null,this.txtNo=null,this.imgRightDown=null,this.pan2=null,this.txtNo1=null,this.spEff=null,this.btnLeft=null,this.btnRight=null,this.list=null,this.imgRight=null,this.selPetBg=null,this.selPetImg=null,this.txtName=null,this.txtLv=null,this.txtSkill=null,this.imgLeft=null,this.imgKuang=null,this.imgFinger=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleSignUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleSign")},e}(),cg=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.spView=null,this.spGuide=null,this.pan=null,this.spAward=null,this.txtLink2=null,this.txtTime=null,this.btnYes=null,this.txtTime1=null,this.txtTime2=null,this.txtLink1=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.family.petBattle.PetBattleSignViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/petBattle/PetBattleSignView")},e}(),dg=function(t){function e(){this.txtMain=null,this.txtSub=null,e.__super.call(this)}return w(e,"ui.modules.family.PetSignItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/PetSignItem")},e}(),pg=function(t){function e(){this.bgImg=null,this.btnClose=null,this.timeBar=null,this.timeLab=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightMemberTimePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightMemberTimePanel")},e}(),mg=function(t){function e(){this.bg=null,this.btnClose=null,this.btnClose2=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.FamilyActPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/FamilyActPanel")},e}(),fg=function(t){function e(){this.txtDesc=null,this.txtLeft1=null,this.txtLeft=null,this.txtLeft2=null,this.txtLeft3=null,this.btnGo=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyActViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyActView")},e}(),_g=function(t){function e(){this.txtName=null,this.txtUser=null,this.txtUserName=null,this.txtLv=null,this.txtRoleNum=null,this.txtRank=null,this.txtChangeName=null,this.txtRequest=null,this.panel1=null,this.txtNotice=null,this.panel=null,this.txtEvent=null,this.txtChangeNotice=null,this.txtDelate=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyBaseViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyBaseView")},e}(),gg=function(t){function e(){this.bg=null,this.btnClose=null,this.txtTime=null,this.txtTime1=null,this.panel=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyBossPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyBossPanel")},e}(),yg=function(t){function e(){this.btnClose=null,this.btnSave=null,this.input=null,this.goloNum=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyChangeNameViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyChangeNameView")},e}(),vg=function(t){function e(){this.btnClose=null,this.img2=null,this.input=null,this.txtLeft=null,this.btnSave=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyChangeNoticeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyChangeNoticeView")},e}(),Ig=function(t){function e(){this.btnClose=null,this.panel=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyRankPanel")},e}(),wg=function(t){function e(){this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.btnClose=null,this.img1=null,this.img5=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyRewardTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyRewardTip")},e}(),bg=function(t){function e(){this.sp=null,this.txtRound=null,this.txtRoleNum=null,this.txtRoleNum2=null,this.btnFight=null,this.txtCurRound=null,this.txtDayTime=null,this.btnClear=null,this.imgRp1=null,this.btnEn=null,this.txtRoleName=null,this.txtCurRound1=null,this.txtBuff=null,this.txtLink=null,this.imgHead=null,this.btnGet=null,this.imgRp=null,this.btnRight=null,this.btnLeft=null,this.imgward1=null,this.txtWard1=null,this.imgward2=null,this.txtWard2=null,this.imgward3=null,this.txtWard3=null,this.imgward4=null,this.txtWard4=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyView")},e}(),Sg=function(t){function e(){this.btnClose=null,this.btnCreate=null,this.imgSel=null,this.img1=null,this.txt1=null,this.txtRoleNum1=null,this.txt2=null,this.img2=null,this.txt3=null,this.txtRoleNum2=null,this.txt5=null,this.txt7=null,this.txt4=null,this.txt6=null,this.input=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCreateViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCreateView")},e}(),xg=function(t){function e(){this.btnClose=null,this.btnYes=null,this.btnClose1=null,this.txtNext=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyDelateViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyDelateView")},e}(),Cg=function(t){function e(){this.bg=null,this.btnClose=null,this.btnClose1=null,this.btn2=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyDonateViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyDonateView")},e}(),Pg=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.familysSp=null,this.btnWitness=null,this.familysTxt=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightAgainsViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightAgainsView")},e}(),Tg=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.btnYes=null,this.tab=null,this.signList=null,this.powTxt=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightReadyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightReadyView")},e}(),kg=function(t){function e(){this.imgLeftBg=null,this.imgRightBg=null,this.imgVS=null,this.imgMyHead=null,this.imgTargetHead=null,this.txtMyPower=null,this.txtMyName=null,this.txtMyFamily=null,this.txtTargetPower=null,this.txtTargetName=null,this.txtTargetFamily=null,this.txtEndTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightRoleInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightRoleInfoPanel")},e}(),Ag=function(t){function e(){this.btnClose=null,this.btnReady=null,this.btnSignUp=null,this.btnClose1=null,this.signUpNumTxt=null,this.openTimeTxt=null,this.titleText=null,this.memberBox=null,this.changeText=null,this.ruleList=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightSignSelfPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightSignSelfPanel")},e}(),Eg=function(t){function e(){this.btnClose=null,this.list=null,this.btnClose2=null,this.topText=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightSignUpFamilyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightSignUpFamilyPanel")},e}(),Rg=function(t){function e(){this.familyNameTxt=null,this.witnessNumTxt=null,this.inspireNumTxt=null,this.throwNumTxt=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightWitnessInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightWitnessInfoPanel")},e}(),Og=function(t){function e(){this.throwImg=null,this.inspireImg=null,this.tipsImg=null,this.thorwGray=null,this.inspireGray=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightWitnessOptionPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightWitnessOptionPanel")},e}(),Lg=function(t){function e(){this.selfFamilyNameTxt=null,this.otherFamilyNameTxt=null,this.fightPointTxt=null,this.btnClose=null,this.btnClose1=null,this.btnWitness=null,this.tabPanels=null,this.witnessSp=null,this.imgVS=null,this.tab=null,this.infoShowImg=null,this.worldChatSp=null,this.chatSp=null,this.fightDetailList=null,this.ruleList=null,this.fightDetailsSp=null,this.imgVSDetails=null,this.nextBattleTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightWitnessUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightWitness")},e}(),Dg=function(t){function e(){this.btnClose1=null,this.btnClose=null,this.selectImg1=null,this.selectImg2=null,this.selectImg3=null,this.selectImg4=null,this.btnEnter=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightWitnessSelectPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightWitnessSelectPanel")},e}(),Ng=function(t){function e(){this.bg=null,this.box=null,this.panel=null,this.preBtn=null,this.nextBtn=null,this.btnCreate=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyListPanel")},e}(),Vg=function(t){function e(){this.panel=null,this.preBtn=null,this.nextBtn=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyListViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyListView")},e}(),Bg=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose1=null,this.imgSkill=null,this.imgMgr=null,this.imgShop=null,this.imgAct=null,this.btnAct=null,this.btnMgr=null,this.btnSkill=null,this.btnShop=null,this.battleSp=null,this.imgFight=null,this.btnFight=null,this.imgPetBat=null,this.btnPetBat=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMainPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMainPanel")},e}(),Mg=function(t){function e(){this.spBar=null,this.txtLv1=null,this.txtLv2=null,this.txtLv3=null,this.txtNeed2=null,this.txtNeed3=null,this.txtBar1=null,this.txtBar2=null,this.txtBar3=null,this.btn1=null,this.btn2=null,this.btn3=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyManagerViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyManagerView")},e}(),Fg=function(t){function e(){this.panel=null,this.txtMy=null,this.txtCon=null,this.btnExit=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMemberViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMemberView")},e}(),Ug=function(t){function e(){this.bg=null,this.btnClose=null,this.btnClose2=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMgrPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMgrPanel")},e}(),Gg=function(t){function e(){this.panel=null,e.__super.call(this)}return w(e,"ui.modules.FamilyMissionViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/FamilyMissionView")},e}(),Hg=function(t){function e(){this.btnClose=null,this.panel=null,this.chBox=null,this.input=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyRequestViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyRequestView")},e}(),Wg=function(t){function e(){this.bg=null,this.btnClose=null,this.btnClose2=null,this.spShop=null,this.spEff=null,this.txtGoodsName=null,this.txtGet=null,this.txtHas=null,this.txtMsgName=null,this.txtAdd=null,this.txtTime=null,this.txtNeed=null,this.img=null,this.btnBuy=null,this.spMaterial=null,this.btnMaterial=null,this.pan1=null,this.pan2=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyShopPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyShopPanel")},e}(),qg=function(t){function e(){this.bg=null,this.btnClose=null,this.btnClose2=null,this.icon0=null,this.icon1=null,this.icon2=null,this.icon3=null,this.icon4=null,this.selectedImg=null,this.imgNow=null,this.txtName=null,this.txtLv=null,this.txtDesc=null,this.txtNext1=null,this.txtNow1=null,this.txtNow=null,this.txtNext=null,this.imgArrow=null,this.btnLearn=null,this.txtCon=null,this.txtCopper=null,this.txtConNeed=null,this.txtCopperNeed=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilySkillPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilySkillPanel")},e}(),Yg=function(t){function e(){this.imgBg=null,this.btnFight=null,this.txtCon=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyBossItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyBossItem")},e}(),Xg=function(t){function e(){this.imgBlood=null,this.spBar=null,this.txtName=null,this.txtLv=null,this.bmpHead=null,this.txtPro=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyBloodUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyBlood")},e}(),Kg=function(t){function e(){this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyCountDownUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyCountDown")},e}(),jg=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtRound=null,this.imgRank=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyCopyRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyCopyRankItem")},e}(),Qg=function(t){function e(){this.txtMy=null,this.txtName=null,this.txtCon=null,this.txtPow=null,this.txtTime=null,this.imgHead=null,this.btnGoToFight=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightMemberItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightMemberItem")},e}(),zg=function(t){function e(){this.rankText=null,this.familyNameText=null,this.numText=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightSignUpFamilyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightSignUpFamilyItem")},e}(),$g=function(t){function e(){this.txtRank=null,this.btnAdd=null,this.txtName=null,this.txtUser=null,this.txtLv=null,this.txtRoleNum=null,this.txtPower=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyListItem")},e}(),Zg=function(t){function e(){this.txtRank=null,this.txtName=null,this.txtUser=null,this.txtLv=null,this.txtRoleNum=null,e.__super.call(this)}return w(e,"ui.modules.FamilyListItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/FamilyListItem2")},e}(),Jg=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.imgSel=null,this.imgRes=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMaterialItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMaterialItem")},e}(),ty=function(t){function e(){this.txtMy=null,this.txtName=null,this.txtCon=null,this.txtPow=null,this.btnUp=null,this.btnOut=null,this.txtTime=null,this.imgHead=null,this.spAction=null,this.btnFriend=null,this.btnLook=null,this.ImgVip=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMemberItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMemberItem")},e}(),ey=function(t){function e(){this.spAction=null,this.btnCaptain=null,this.btnSubCaptain=null,this.btnEliteOne=null,this.btnEliteTwo=null,this.btnVanguard=null,this.btnRemove=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMemberPositionTabsUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMemberPositionTabs")},e}(),iy=function(t){function e(){this.imgIcon=null,this.txtDesc=null,this.txtReward=null,this.btnDo=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyMissionItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyMissionItem")},e}(),sy=function(t){function e(){this.txtName=null,this.txtPower=null,this.btnY=null,this.btnN=null,this.imgHead=null,this.ImgVip=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyRequestItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyRequestItem")},e}(),ny=function(t){function e(){this.btnClose=null,this.txtT=null,this.btnYes=null,e.__super.call(this)}return w(e,"ui.modules.fcm.FcmIdentifyRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fcm/FcmIdentifyRewardView")},e}(),oy=function(t){function e(){this.btnClose=null,this.inputName=null,this.inputNumber=null,e.__super.call(this)}return w(e,"ui.modules.fcm.FcmInfoViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fcm/FcmInfoView")},e}(),ay=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.spBar=null,this.btnClose2=null,this.txtH=null,this.spView=null,this.btnHelp=null,this.imgLeft=null,this.imgRight=null,this.txtBar=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackFanTiViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackFanTiView")},e}(),ly=function(t){function e(){this.bg=null,this.title=null,this.btnClose=null,this.box=null,this.spBar=null,this.btnClose2=null,this.pan=null,this.txtH=null,this.btnHelp=null,this.imgLeft=null,this.imgRight=null,this.txtBar=null,this.queBtn=null,this.imgBottom=null,this.imgDiamondBg=null,this.txtDiamond=null,this.blueVipBtn=null,this.imgStarIcon=null,this.txtStarIcon=null,this.blueVipTipTxt=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackView")},e}(),ry=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.firstCharge.NewFirstChargeADViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/NewFirstChargeADView")},e}(),hy=function(t){function e(){this.btnClose=null,this.btn1=null,this.btn2=null,this.btn3=null,this.btn4=null,this.imgGoods1=null,this.imgGoods2=null,this.imgGoods3=null,this.imgGoods4=null,this.imgGoods5=null,this.imgGoods6=null,this.imgHelp=null,this.petSp=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.NewFirstChargePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/NewFirstChargePanel")},e}(),uy=function(t){function e(){this.imgItem=null,this.imgTip=null,this.imgTitle=null,this.imgBack=null,this.btnCharge=null,this.txtNum=null,this.txtLink=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackItem")},e}(),cy=function(t){function e(){this.pan=null,this.txtCoin=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackGodCoinViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackGodCoinView")},e}(),dy=function(t){function e(){this.pan=null,this.txtCoin=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackGoldFanTiViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackGoldFanTiView")},e}(),py=function(t){function e(){this.btnClose1=null,this.imgInfo=null,this.txt=null,this.btnYes=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.ChargeBackQuestionPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/ChargeBackQuestionPanel")},e}(),my=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.imgBg=null,this.tab=null,this.btnGet=null,this.btnClose2=null,this.imgCost=null,this.imgTR1=null,this.imgTR2=null,this.imgTR3=null,this.imgR=null,this.imgPow=null,e.__super.call(this)}return w(e,"ui.modules.firstCharge.FirstChargePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/firstCharge/FirstChargePanel")},e}(),fy=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnBack=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.friend.achievement.FriendAchievementPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/achievement/FriendAchievementPanel")},e}(),_y=function(t){function e(){this.btnGet=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.friend.achievement.FriendAchRequestItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/achievement/FriendAchRequestItem")},e}(),gy=function(t){function e(){this.imgRequest=null,this.spList=null,e.__super.call(this)}return w(e,"ui.modules.friend.achievement.FriendAchRequestViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/achievement/FriendAchRequestView")},e}(),yy=function(t){function e(){this.spInfos=null,this.btnLeft=null,this.btnRight=null,this.listRequest=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.friend.achievement.FriendAchTargetListViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/achievement/FriendAchTargetListView")},e}(),vy=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.friend.achievement.FriendAchTargetViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/achievement/FriendAchTargetView")},e}(),Iy=function(t){function e(){this.textBg=null,this.imgHeadBg=null,this.imgHead=null,this.imgFrame=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.friend.ChatPrivateLeftItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/ChatPrivateLeftItem")},e}(),wy=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnBack=null,this.light=null,this.list=null,this.txtTime=null,this.tab=null,this.inputMsg=null,this.imgFaceEnter=null,this.btnSend=null,this.imgFace=null,this.listFace=null,this.spPage=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.friend.ChatPrivatePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/ChatPrivatePanel")},e}(),by=function(t){function e(){this.textBg=null,this.imgHeadBg=null,this.imgHead=null,this.imgFrame=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.friend.ChatPrivateRightItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/ChatPrivateRightItem")},e}(),Sy=function(t){function e(){this.bg=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.chat.ChatWarningTipsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/chat/ChatWarningTipsItem")},e}(),xy=function(t){function e(){this.imgHead=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendAddItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendAddItem")},e}(),Cy=function(t){function e(){this.btnClose=null,this.inputServer=null,this.inputName=null,this.list=null,this.btnAdd=null,this.btnChange=null,this.btnAddAll=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendAddPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendAddPanel")},e}(),Py=function(t){function e(){this.imgHeadBg=null,this.imgHead=null,this.imgFrame=null,this.imgSex=null,this.imgVIP=null,this.imgNoble=null,this.imgMonth=null,this.cbSelected=null,this.imgFavorBg=null,this.imgFavor=null,this.txtName=null,this.txtFavor=null,this.txtPower=null,this.txtLevel=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendBatchDeleteItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendBatchDeleteItem")},e}(),Ty=function(t){function e(){this.btnClose=null,this.btnBack=null,this.cbTypes=null,this.btnSelecteAll=null,this.btnDelete=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendBatchDeletePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendBatchDeletePanel")},e}(),ky=function(t){function e(){this.bg=null,this.imgHead=null,this.txtName=null,this.txtPower=null,this.btnRemove=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendBlackListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendBlackListItem")},e}(),Ay=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnBack=null,this.list=null,this.txtTip=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendBlackPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendBlackPanel")},e}(),Ey=function(t){function e(){this.spBg=null,this.imgFlowerBg=null,this.imgFavorBg=null,this.imgHead=null,this.imgFrame=null,this.spFrameEff=null,this.imgRedPoint=null,this.imgSex=null,this.imgVIP=null,this.imgNoble=null,this.imgMonth=null,this.imgMate=null,this.spFlower=null,this.imgFlower=null,this.spBlack=null,this.imgBlack=null,this.spGrant=null,this.imgGrant=null,this.imgFavor=null,this.txtPower=null,this.txtOnline=null,this.txtTalk=null,this.txtFavor=null,this.spAction=null,this.btnDelete=null,this.btnBlack=null,this.btnBatchDelete=null,this.txtLevel=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendListItem")},e}(),Ry=function(t){function e(){this.list=null,this.txtNum=null,this.btnAdd=null,this.btnRequest=null,this.btnBlack=null,this.txtTip1=null,this.txtTip2=null,this.btnGift=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendListViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendListView")},e}(),Oy=function(t){function e(){this.frame=null,this.imgHead=null,this.txtName=null,this.btnAgree=null,this.btnReject=null,this.txtPower=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendRequestListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendRequestListItem")},e}(),Ly=function(t){function e(){this.bg=null,this.box=null,this.imgSetting=null,this.btnBack=null,this.btnArgee=null,this.btnReject=null,this.list=null,this.txtTip=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendRequestListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendRequestListPanel")},e}(),Dy=function(t){function e(){this.btnClose=null,this.cbNotice=null,this.cbReject=null,this.btnBack=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendSettingPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},_(e,["uiView",function(){return this.uiView={type:"View",props:{width:600,height:370},child:[{type:"Image",props:{y:0,x:0,top:0,skin:"com/ui/panelBg2.png",sizeGrid:"54,200,113,200",right:0,left:0,bottom:0}},{type:"Button",props:{y:25,x:0,var:"btnClose",skin:"com/ui/btn_close.png",right:22}},{type:"CheckBox",props:{y:104,x:417,var:"cbNotice",skin:"com/ui/checkBox2.png"}},{type:"CheckBox",props:{y:189,x:417,var:"cbReject",skin:"com/ui/checkBox2.png"}},{type:"Button",props:{var:"btnBack",skin:"com/ui/btn_return.png",right:40,bottom:35}},{type:"Text",props:{y:107,x:107,width:185,text:"显示提示红点",height:30,fontSize:30,color:"#ffffff"}},{type:"Text",props:{y:191,x:107,width:247,text:"拒绝接受好友申请",height:30,fontSize:30,color:"#ffffff"}},{type:"Button",props:{y:261,x:200,width:199,var:"btn",skin:"com/ui/btn_yellow.png",labelSize:30,label:"确认",height:68}},{type:"Image",props:{y:12,x:229,skin:"modules/friend/titleRequest1.png"}}]}}]),e}(),Ny=function(t){function e(){this.imgHead=null,this.imgFrame=null,this.imgTime=null,this.btn=null,this.txtName=null,this.txtReward=null,this.txtDesc=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxHelpItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxHelpItem")},e}(),Vy=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxHelpViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxHelpView")},e}(),By=function(t){function e(){this.imgGold=null,this.btn=null,this.imgTime=null,this.txtName=null,this.txtDesc=null,this.txtTime=null,this.txtCost=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxRefreshItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxRefreshItem")},e}(),My=function(t){function e(){this.btn=null,this.imgTime=null,this.txtHelper=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxSeekItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxSeekItem")},e}(),Fy=function(t){function e(){this.btnRefresh=null,this.btnLeft=null,this.btnRight=null,this.txtTip=null,this.txtTime=null,this.txtRefreshCost=null,this.txtTip1=null,this.txtTip2=null,this.list1=null,this.list2=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxSeekViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxSeekView")},e}(),Uy=function(t){function e(){this.tab=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.friend.box.FriendBoxViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/box/FriendBoxView")},e}(),Gy=function(t){function e(){this.icomImg=null,e.__super.call(this)}return w(e,"ui.modules.friend.flower.FlowerReceiveIconUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/flower/FlowerReceiveIcon")},e}(),Hy=function(t){function e(){this.bg=null,this.btnTalk=null,this.btnReceive=null,this.btnKiss=null,this.btnClose=null,this.html=null,e.__super.call(this)}return w(e,"ui.modules.friend.flower.FlowerReceivePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/flower/FlowerReceivePanel")},e}(),Wy=function(t){function e(){this.bg=null,this.btnClose=null,this.contxtBox=null,this.cbName=null,this.cbFlower=null,this.imgTip=null,this.tipTxt=null,this.btnSub=null,this.btnAdd=null,this.numInput=null,this.wordInput=null,this.sendWhoTxt=null,this.txtAddInfo=null,this.radio=null,this.btnSend=null,e.__super.call(this)}return w(e,"ui.modules.friend.flower.FlowerSendPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/flower/FlowerSendPanel")},e}(),qy=function(t){function e(){this.btnClose=null,this.txtTitle=null,this.txtContent=null,this.spAttachment=null,this.txtTip=null,this.btnGet=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.friend.gift.FriendLetterDetailPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/gift/FriendLetterDetailPanel")},e}(),Yy=function(t){function e(){this.imgIcon=null,this.txtTitle=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.friend.gift.FriendLetterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/gift/FriendLetterItem")},e}(),Xy=function(t){function e(){this.list=null,this.txtNothing=null,this.btnGetAll=null,e.__super.call(this)}return w(e,"ui.modules.friend.gift.FriendLetterViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/gift/FriendLetterView")},e}(),Ky=function(t){function e(){this.bg=null,this.title=null,this.btnClose=null,this.box=null,this.tab=null,this.btnBack=null,this.spView=null,e.__super.call(this)}return w(e,"ui.modules.friend.FriendPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/friend/FriendPanel")},e}(),jy=function(t){function e(){this.panel=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMCommandUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMCommand")},e}(),Qy=function(t){function e(){this.radio=null,this.btnClear=null,this.btnLast=null,this.btnUpdate=null,this.panel=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.gm.GmDebugInfoUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GmDebugInfo")},e}(),zy=function(t){function e(){this.btnFPS=null,this.btnShowTile=null,this.btnShowUI=null,this.txtScene=null,this.txtInputSend=null,this.btnSend=null,this.txtParameters=null,this.txtMyRoleInfo=null,this.btnCopyParameter=null,this.btnSound=null,this.txtUser=null,this.btnFrame=null,this.btnScreen=null,this.txtTime=null,this.btnDebug=null,this.btnRole=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMGameDataUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMGameData")},e}(),$y=function(t){function e(){this.bg=null,this.gmTitle=null,this.container=null,this.spView=null,this.tabBar=null,this.inputSearch=null,this.btnSearch=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMPanel")},e}(),Zy=function(t){function e(){this.totalTxt=null,this.panel=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMResUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMRes")},e}(),Jy=function(t){function e(){this.input=null,this.txtTip=null,this.btnClient=null,this.btnServer=null,this.container=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMVirtualVOUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMVirtualVO")},e}(),tv=function(t){function e(){this.btn=null,this.input=null,e.__super.call(this)}return w(e,"ui.modules.gm.GMCodeOneRowUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/GMCodeOneRow")},e}(),ev=function(t){function e(){this.btnUserInfo=null,this.btnHideShareMenu=null,this.btnShowShareMenu=null,this.btnShareAppMessage=null,this.btnOffShareAppMessage=null,this.btnShare=null,this.btnNetwork=null,this.btnLocation=null,this.btnSetMenuStyle=null,this.txtArea=null,e.__super.call(this)}return w(e,"ui.modules.gm.WeixinInterfaceViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/gm/WeixinInterfaceView")},e}(),iv=function(t){function e(){this.txtVoca=null,this.txtTitle=null,this.btnBack=null,this.btnL=null,this.btnR=null,this.tab=null,this.pan=null,this.txtDesc=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,e.__super.call(this)}return w(e,"ui.modules.GodHoodAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/GodHoodAttrView")},e}(),sv=function(t){function e(){this.imgKuang=null,this.imgSkill=null,this.imgSel=null,this.txtPer=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodSkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodSkillItem")},e}(),nv=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.txtName=null,this.txtLv=null,this.img1=null,this.box1=null,this.img2=null,this.box2=null,this.img3=null,this.box3=null,this.img4=null,this.box4=null,this.img5=null,this.box5=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodEquipRPSetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodEquipRPSetView")},e}(),ov=function(t){function e(){this.spEquip=null,this.imgEquip1=null,this.imgEquip5=null,this.imgEquip2=null,this.imgEquip4=null,this.imgEquip3=null,this.imgRp1=null,this.imgRp2=null,this.imgRp3=null,this.imgRp5=null,this.imgRp4=null,this.imgName1=null,this.imgName5=null,this.imgName2=null,this.imgName4=null,this.imgName3=null,this.txtNeed1=null,this.txtNeed5=null,this.txtNeed2=null,this.txtNeed4=null,this.txtNeed3=null,this.imgLink=null,this.resetGodHoodSkill=null,this.imgRPSet=null,this.spHandler=null,this.imgBg=null,this.imgEquipLink=null,this.imgEquip=null,this.imgEquipBg=null,this.imgNane=null,this.txtName=null,this.txtDesc=null,this.txtD=null,this.imgBarBg=null,this.imgBar=null,this.btnAct=null,this.txt=null,this.txtNeed=null,this.btnEx=null,this.txtPow=null,this.txtPer=null,this.changeR=null,this.changeL=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodEquipView")},e}(),av=function(t){function e(){this.btnClose=null,this.txtTop=null,this.imgGod1=null,this.spGet=null,this.txtZ=null,this.spUp=null,this.imgArrow=null,this.txtNext1=null,this.txtNow1=null,this.txtNext=null,this.txtNow=null,this.imgGod2=null,this.btnYes=null,this.btnNo=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodOpenTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodOpenTip")},e}(),lv=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.spView=null,this.btnBack=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodPanel")},e}(),rv=function(t){function e(){this.imgHood=null,this.imgFight=null,this.spHood=null,this.imgHoodBg=null,this.imgMax=null,this.txtNowLv=null,this.txtNeed=null,this.txtGet=null,this.txtNowAttr=null,this.txtNextAttr=null,this.spHoodFight=null,this.imgNext=null,this.imgNow=null,this.txtLvNow=null,this.txtLvNext=null,this.btnFight=null,this.txtNeed2=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodView")},e}(),hv=function(t){function e(){this.frame=null,this.txt=null,this.quan=null,e.__super.call(this)}return w(e,"ui.modules.guide.GuideTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/guide/GuideTip")},e}(),uv=function(t){function e(){this.bg=null,this.imgTitle=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.list=null,this.btnGet=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.mystery.MysteryDepotPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/mystery/MysteryDepotPanel")},e}(),cv=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.btnOne=null,this.btnTen=null,this.btnFifty=null,this.list=null,this.txtInfo=null,this.noticeTxt=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.mystery.HuntTreasureMysteryRewardsPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/mystery/HuntTreasureMysteryRewardsPanel")},e}(),dv=function(t){function e(){this.btnAddGold=null,this.btnDepot=null,this.btnOne=null,this.btnTen=null,this.btnFifty=null,this.btnBuy1=null,this.btnBuy2=null,this.btnBuy3=null,this.txtName1=null,this.txtName2=null,this.txtGold=null,this.txtNum=null,this.imgBg1=null,this.imgIcon1=null,this.imgBg2=null,this.imgIcon2=null,this.imgBg3=null,this.imgIcon3=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.deepSea.HuntTreasureDeepSeaViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/deepSea/HuntTreasureDeepSeaView")},e}(),pv=function(t){function e(){this.bg=null,this.titleImg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnClose2=null,this.spView=null,this.spHead=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.HuntTreasurePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/HuntTreasurePanel")},e}(),mv=function(t){function e(){this.btnClose2=null,this.btnCloseWin=null,this.imgLink1=null,this.imgLink2=null,this.imgLink3=null,this.imgLink4=null,this.panList=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.legend.RoleLegendEquipDecomposeUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/legend/RoleLegendEquipDecompose")},e}(),fv=function(t){function e(){this.txtName=null,this.txtGet=null,this.btnRecom=null,this.txtB=null,this.txtLv=null,this.imgGoods=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.legend.RoleLegendEquipDecomposeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/legend/RoleLegendEquipDecomposeItem")},e}(),_v=function(t){function e(){this.imgBg=null,this.txtName=null,this.txtLv=null,this.imgSel=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.legend.RoleLegendEquipItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/legend/RoleLegendEquipItem")},e}(),gv=function(t){function e(){this.btnUp=null,this.spMax=null,this.txtLink=null,this.spNotMax=null,this.txtNeed=null,this.imgInput=null,this.txtHas=null,this.txtNeed1=null,this.spTwo=null,this.txtCurAttr=null,this.txtNextAttr=null,this.imgArrow=null,this.spOne=null,this.txtAttr=null,this.htmlNeed=null,this.htmlDesc=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.legend.RoleLegendEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/legend/RoleLegendEquipView")},e}(),yv=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnClose2=null,this.btnUp=null,this.txtCurAttr=null,this.htmlDesc=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.legend.RoleOtherLegendEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/legend/RoleOtherLegendEquipView")},e}(),vv=function(t){function e(){this.btnAddGold=null,this.btnDepot=null,this.btnOne=null,this.btnTen=null,this.btnFifty=null,this.btnBuy1=null,this.btnBuy2=null,this.btnBuy3=null,this.txtName2=null,this.txtName1=null,this.txtGold=null,this.txtNum=null,this.imgBg1=null,this.imgIcon1=null,this.imgBg2=null,this.imgIcon2=null,this.imgBg3=null,this.imgIcon3=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.mystery.HuntTreasureMysteryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/mystery/HuntTreasureMysteryView")},e}(),Iv=function(t){function e(){this.btnClose2=null,this.btnCloseWin=null,this.imgLink1=null,this.imgLink2=null,this.imgLink3=null,this.panList=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.orangeEquip.RoleOrangeEquipDecomposeUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/orangeEquip/RoleOrangeEquipDecompose")},e}(),wv=function(t){function e(){this.txtName=null,this.txtGet=null,this.btnRecom=null,this.txtB=null,this.txtLv=null,this.imgGoods=null,this.imgVoca=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.orangeEquip.RoleOrangeEquipDecomposeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/orangeEquip/RoleOrangeEquipDecomposeItem")},e}(),bv=function(t){function e(){this.imgBg=null,this.goodsImg=null,this.txtName=null,this.txtLv=null,this.imgSel=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.orangeEquip.RoleOrangeEquipItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/orangeEquip/RoleOrangeEquipItem")},e}(),Sv=function(t){function e(){this.btnUp=null,this.spMax=null,this.txtLink=null,this.spNotMax=null,this.txtNeed=null,this.imgInput=null,this.txtHas=null,this.txtNeed1=null,this.spTwo=null,this.txtNextPower=null,this.txtCurAttr=null,this.txtNextAttr=null,this.txtCurPower=null,this.imgArrow=null,this.spOne=null,this.txtOne=null,this.txtPower=null,this.txtAttr=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.orangeEquip.RoleOrangeEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/orangeEquip/RoleOrangeEquipView")},e}(),xv=function(t){function e(){this.html0=null,this.html1=null,this.html2=null,this.html3=null,this.btnBack=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.purify.RoleEquipPurifyHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/purify/RoleEquipPurifyHelpPanel")},e}(),Cv=function(t){function e(){this.spBig=null,this.txtAttribute1=null,this.txtSLv1=null,this.imgGoldLock1=null,this.imgSilverLock1=null,this.spSmall=null,this.txtAttribute2=null,this.txtSLv2=null,this.imgGoldLock2=null,this.imgSilverLock2=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.purify.RoleOrangeEquipPurifyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/purify/RoleOrangeEquipPurifyItem")},e}(),Pv=function(t){function e(){this.txtLink=null,this.spNotMax=null,this.imgInput=null,this.txtHas=null,this.txtNeed=null,this.btnReplace=null,this.btnPurify=null,this.txtUse=null,this.txtUseNum=null,this.btnBack=null,this.btnClose=null,this.imgCurPower=null,this.spCurPower=null,this.txtNon1=null,this.txtAttr=null,this.txtMaxNum=null,this.txtLv=null,this.txtMaxLv=null,this.spNextPower=null,this.txtNon2=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.purify.RoleOrangeEquipPurifyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/purify/RoleOrangeEquipPurifyPanel")},e}(),Tv=function(t){function e(){this.btnUp=null,this.imgHelp=null,this.imgPower=null,this.spPower=null,this.txtLink=null,this.spNotMax=null,this.imgInput=null,this.txtHas=null,this.txtNeed=null,this.sp=null,this.txtAttr=null,this.txtMaxNum=null,this.txtSLv=null,this.txtMaxLv=null,this.txtNon=null,e.__super.call(this)}return w(e,"ui.modules.huntTreasure.purify.RoleOrangeEquipPurifyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/huntTreasure/purify/RoleOrangeEquipPurifyView")},e}(),kv=function(t){function e(){this.imgIcon=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.actPrew.ActPreItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/actPrew/ActPreItem")},e}(),Av=function(t){function e(){this.btnClose=null,this.box=null,this.imgBg=null,this.html1=null,this.html2=null,this.html3=null,this.txtState=null,this.txtTitle=null,this.btnCLose2=null,this.btnEnter=null,this.btnRight=null,this.btnLeft=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.actPrew.ActPreViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/actPrew/ActPreView")},e}(),Ev=function(t){function e(){this.img=null,this.imgRp=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.icon.IconItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/icon/IconItem")},e}(),Rv=function(t){function e(){this.panel=null,this.spTip=null,this.luckydaySpTip=null,this.spIconTxt=null,e.__super.call(this)}return w(e,"ui.modules.icon.IconListUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/icon/IconList")},e}(),Ov=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.icon.IconListVUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/icon/IconListV")},e}(),Lv=function(t){function e(){this.panel=null,e.__super.call(this)}return w(e,"ui.modules.CommonPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/CommonPanel")},e}(),Dv=function(t){function e(){this.joystickBtn=null,e.__super.call(this)}return w(e,"ui.modules.ashura.JoystickUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/ashura/Joystick")},e}(),Nv=function(t){function e(){this.btnClose=null,this.txtTitle=null,this.spAttachment=null,this.txtTip=null,this.btnGet=null,this.btnBack=null,this.contentPanel=null,this.txtContent=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.mail.MailDetailUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/mail/MailDetail")},e}(),Vv=function(t){function e(){this.imgIcon=null,this.txtTitle=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.mail.MailListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/mail/MailListItem")},e}(),Bv=function(t){function e(){this.bg=null,this.title=null,this.btnClose=null,this.box=null,this.btnBack=null,this.list=null,this.txtNothing=null,this.btnGetAll=null,this.btnReadAll=null,this.btnDelete=null,e.__super.call(this)}return w(e,"ui.modules.mail.MailPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/mail/MailPanel")},e}(),Mv=function(t){function e(){this.btnSound=null,this.spRound1=null,this.spRound2=null,this.spRound3=null,this.spRound4=null,this.spOtherInfo1=null,this.spEff=null,this.spPower=null,this.btnRank=null,this.btnVip=null,this.imgVipTxt=null,this.imgVip=null,this.btnCopper=null,this.btnGold=null,this.btnGodCoin=null,this.txtRound=null,this.txtExp=null,this.txtCopper=null,this.txtMyCopper=null,this.txtMyGold=null,this.txtMyGodCoin=null,this.txtRoleName=null,this.txtLevel=null,this.txtFPS=null,this.txtCopyName=null,this.txtCopyMsg=null,this.imgHead=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.MainInfoFanTiViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/MainInfoFanTiView")},e}(),Fv=function(t){function e(){this.btnSound=null,this.spRound1=null,this.spRound2=null,this.spRound3=null,this.spRound4=null,this.spOtherInfo1=null,this.spEff=null,this.spPower=null,this.btnRank=null,this.btnVip=null,this.imgVipTxt=null,this.imgVip=null,this.btnCopper=null,this.btnGold=null,this.txtRound=null,this.txtExp=null,this.txtCopper=null,this.txtMyCopper=null,this.txtMyGold=null,this.txtRoleName=null,this.txtLevel=null,this.txtFPS=null,this.txtCopyName=null,this.txtCopyMsg=null,this.imgHead=null,this.fcmBtn=null,this.fcmDown=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.MainInfoViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/MainInfoView")},e}(),Uv=function(t){function e(){this.btnClose=null,this.btnSave=null,this.btnClose2=null,this.input=null,this.html=null,this.txtHad=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.RoleChangeNameViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/RoleChangeNameView")},e}(),Gv=function(t){function e(){this.spView=null,this.btnClose=null,this.btnBack=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerFaeriePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerFaeriePanel")},e}(),Hv=function(t){function e(){this.imgPetal=null,this.btnUp=null,this.spPet=null,this.txtLv=null,this.spAttr=null,this.txtAttr=null,this.imgStep=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerFaerieViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerFaerieView")},e}(),Wv=function(t){function e(){this.txtInfo=null,this.btnSure=null,this.btnCancel=null,this.imgClose=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryRequestConfirmViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryRequestConfirmView")},e}(),qv=function(t){function e(){this.imgLanguage=null,this.txtDesc=null,this.txtName=null,this.imgFlower=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerLanguageItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerLanguageItem")},e}(),Yv=function(t){function e(){this.txtTime=null,this.txtMsg=null,this.txtGoodsName=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenLogItem")},e}(),Xv=function(t){function e(){this.imgToken=null,this.imgMy=null,this.imgCouple=null,this.btnBuy=null,this.btnSend=null,this.btnAdd=null,this.btnRemove=null,this.txtAttr=null,this.txtEffDesc=null,this.txtGold=null,this.txtNum=null,this.txtName=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerLanguageShopItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerLanguageShopItem")},e}(),Kv=function(t){function e(){this.tab=null,this.cb=null,this.list=null,this.txtNum=null,this.btnMy=null,this.btnTa=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerLanguageShopViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerLanguageShopView")},e}(),jv=function(t){function e(){this.box=null,this.spItems=null,this.txtTitle=null,this.list=null,this.spAttr=null,this.txtAttr1=null,this.txtAttr2=null,this.txtOperate=null,this.btnLeft=null,this.btnRight=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerLanguageViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerLanguageView")},e}(),Qv=function(t){function e(){this.btnClose=null,this.btnBack=null,this.tab=null,this.list=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerLanguageWishListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerLanguageWishListPanel")},e}(),zv=function(t){function e(){this.imgClose=null,this.btnMonth=null,this.btnAnniversary=null,this.txtDate=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryAnniversaryRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryAnniversaryRewardView")},e}(),$v=function(t){function e(){this.btnSure=null,this.btnCancel=null,this.imgClose=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryDivorceCoerceViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryDivorceCoerceView")},e}(),Zv=function(t){function e(){this.btnSure=null,this.btnCancel=null,this.imgClose=null,this.txtInfo=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryDivorceReplyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryDivorceReplyView")},e}(),Jv=function(t){function e(){this.btnSure=null,this.btnCancel=null,this.imgClose=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryDivorceRequestViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryDivorceRequestView")},e}(),tI=function(t){function e(){this.btnPeace=null,this.btnCoerce=null,this.imgClose=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryDivorceTypeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryDivorceTypeView")},e}(),eI=function(t){function e(){this.imgSelect=null,this.imgFavor=null,this.txtFavor=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryExtraDescItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryExtraDescItem")},e}(),iI=function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,this.txtFavor=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryExtraDescViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryExtraDescView")},e}(),sI=function(t){function e(){this.imgClose=null,this.list=null,this.txtTitle=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryFriendListViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryFriendListView")},e}(),nI=function(t){function e(){this.spBg=null,this.imgHead=null,this.txtPower=null,this.txtFavor=null,this.txtLevel=null,this.btnMarry=null,this.imgGift=null,this.imgGold=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryFriendListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryFriendListItem")},e}(),oI=function(t){function e(){this.imgClose=null,this.btnGo=null,this.btnCancel=null,this.txtInfo=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryReplyAgreeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryReplyAgreeView")},e}(),aI=function(t){function e(){this.bg=null,this.imgClose=null,this.img2=null,this.btnCancel=null,this.btnSure=null,this.list=null,this.txtMsg=null,this.txtTitle=null,this.txtFavor=null,this.txtInfo=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryReplyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryReplyPanel")},e}(),lI=function(t){function e(){this.bg=null,this.img2=null,this.txtInput=null,this.txtTip=null,this.imgSelected=null,this.imgClose=null,this.btnRequest=null,this.txtTokenName3=null,this.txtTokenName2=null,this.txtTokenName1=null,this.txtTokenName0=null,this.txtCost=null,this.txtName=null,this.txtFavor0=null,this.txtFavor1=null,this.txtFavor2=null,this.txtFavor3=null,this.txtInfo=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryRequestPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryRequestPanel")},e}(),rI=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.txtName=null,this.imgAdd=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenItem")},e}(),hI=function(t){function e(){this.spView=null,this.tab=null,this.btnClose=null,this.btnBack=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenPanel")},e}(),uI=function(t){function e(){this.imgToken=null,this.imgMy=null,this.imgCouple=null,this.btnBuy=null,this.btnSend=null,this.btnAdd=null,this.btnRemove=null,this.txtAttr=null,this.txtEffDesc=null,this.txtGold=null,this.txtNum=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenShopItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenShopItem")},e}(),cI=function(t){function e(){this.tab=null,this.cb=null,this.list=null,this.txtNum=null,this.btnMy=null,this.btnTa=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenShopViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenShopView")},e}(),dI=function(t){function e(){this.spItems=null,this.btnBefor=null,this.btnNext=null,this.list=null,this.spAttr=null,this.txtAttr1=null,this.txtAttr2=null,this.txtTitle=null,this.txtOperate=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenShowViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenShowView")},e}(),pI=function(t){function e(){this.btnClose=null,this.btnBack=null,this.tab=null,this.list=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryTokenWishListPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryTokenWishListPanel")},e}(),mI=function(t){function e(){this.spDay=null,this.txtDay=null,this.txtAnniversary=null,this.spTip=null,this.imgEgg=null,this.spDesc=null,this.spEff=null,this.imgToken=null,this.imgWall=null,this.btnFind=null,this.txtViewReward=null,this.txtFavor=null,this.txtMyName=null,this.txtDearName=null,this.txtRequestName=null,this.imgDesc=null,this.imgFaerie=null,e.__super.call(this)}return w(e,"ui.modules.marry.MarryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/MarryView")},e}(),fI=function(t){function e(){this.imgCon=null,this.imgTitle=null,this.btnClose=null,this.txtDesc2=null,this.btnYes=null,this.imgLine=null,this.txtDesc1=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.FuncPreviewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/FuncPreview")},e}(),_I=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.txtTitle=null,this.txtTip=null,this.spWay1=null,this.txtDesc1=null,this.spWay2=null,this.txtDesc2=null,this.txtDesc3=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.mission.MissionLevelTipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/mission/MissionLevelTipView")},e}(),gI=function(t){function e(){this.spInfo=null,this.txtDesc=null,this.txtNum=null,this.txtReward=null,e.__super.call(this)}return w(e,"ui.modules.mission.MissionMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/mission/MissionMainView")},e}(),yI=function(t){function e(){this.imgTitle=null,this.imgCon=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.PreIconUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/PreIcon")},e}(),vI=function(t){function e(){this.imgClose=null,this.txtLink=null,this.panel=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.moneyLess.MoneyLessPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/moneyLess/MoneyLessPanel")},e}(),II=function(t){function e(){this.imgMail=null,this.imgFashion=null,this.imgBtm=null,this.imgBar=null,e.__super.call(this)}return w(e,"ui.modules.navigation.LeftNavBarUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/navigation/LeftNavBar")},e}(),wI=function(t){function e(){this.bg=null,this.imgRole=null,this.imgSkill=null,this.imgRefine=null,this.imgBag=null,this.imgShop=null,this.shopTip=null,this.imgFriend=null,this.imgPet=null,e.__super.call(this)}return w(e,"ui.modules.navigation.NavBarUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/navigation/NavBar")},e}(),bI=function(t){function e(){this.bg=null,this.container=null,this.btnClose2=null,this.btn=null,this.btn2=null,this.htmlTime=null,this.htmlTime2=null,this.htmlDes=null,this.tip=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.noble.NoblePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/noble/NoblePanel")},e}(),SI=function(t){function e(){this.btnClose=null,this.txtTime=null,this.txtMonth=null,this.txtExp=null,this.txtExpExt1=null,this.txtExpExt2=null,this.txtSilver=null,this.txtSilverExt1=null,this.txtSilverExt2=null,this.txtEquip=null,this.txtSell=null,this.btnBack=null,this.btnSure=null,this.goldImg=null,e.__super.call(this)}return w(e,"ui.modules.offLineReward.OffLineRewardPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/offLineReward/OffLineRewardPanel")},e}(),xI=function(t){function e(){this.txtHp=null,this.txtPhyDefence=null,this.txtDoubleAttack=null,this.txtAttack=null,this.txtMagicDefence=null,this.txtDoubleAttackAnti=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetAttrPartUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetAttrPart")},e}(),CI=function(t){function e(){this.txtLv=null,this.txtType=null,this.txtTalent=null,this.txtName=null,this.txtOwnName=null,this.imgType=null,this.spPower=null,this.spStar=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetInfoPartUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetInfoPart")},e}(),PI=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.imgState=null,this.txtState=null,this.txtLv=null,this.imgSel=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetListItem")},e}(),TI=function(t){function e(){this.bg=null,this.container=null,this.panel=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetPanel")},e}(),kI=function(t){function e(){this.sp=null,this.btn=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetShowItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetShowItem")},e}(),AI=function(t){function e(){this.txt=null,this.sp=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetSkillPartUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetSkillPart")},e}(),EI=function(t){function e(){this.txtTitle=null,this.txtType0=null,this.txtLv0=null,this.txtName0=null,this.txtAttr0=null,this.txtType1=null,this.txtLv1=null,this.txtName1=null,this.txtAttr1=null,this.txtType2=null,this.txtLv2=null,this.txtName2=null,this.txtAttr2=null,this.txtType3=null,this.txtLv3=null,this.txtName3=null,this.txtAttr3=null,this.txtType4=null,this.txtLv4=null,this.txtName4=null,this.txtAttr4=null,this.txtType5=null,this.txtLv5=null,this.txtName5=null,this.txtAttr5=null,this.txtType6=null,this.txtLv6=null,this.txtName6=null,this.txtAttr6=null,this.txtType7=null,this.txtLv7=null,this.txtName7=null,this.txtAttr7=null,e.__super.call(this)}return w(e,"ui.modules.otherPet.OtherPetSoulPartUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherPet/OtherPetSoulPart")},e}(),RI=function(t){function e(){this.bg=null,this.container=null,this.tab=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.otherRole.ComparePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherRole/ComparePanel")},e}(),OI=function(t){function e(){this.btnAdd=null,this.btn=null,this.bar1=null,this.bar2=null,this.score1=null,this.score2=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.otherRole.CompareTotalItem1UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherRole/CompareTotalItem1")},e}(),LI=function(t){function e(){this.bar1=null,this.bar2=null,this.btn=null,this.score1=null,this.score2=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.otherRole.CompareTotalItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherRole/CompareTotalItem2")},e}(),DI=function(t){function e(){this.panel=null,this.spPower1=null,this.spPower2=null,this.btnRight=null,this.btnLeft=null,this.imgHead1=null,this.imgHead2=null,this.role1=null,this.role2=null,this.cateCom=null,e.__super.call(this)}return w(e,"ui.modules.otherRole.CompareTotalUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/otherRole/CompareTotal")},e}(),NI=function(t){function e(){this.imgGoodsBg=null,this.imgGoods=null,this.imgSoul=null,this.imgSp=null,this.txtInfo=null,this.txtLeft=null,this.txtRight=null,this.imgRp=null,this.boxSoul=null,this.imgSoulBg=null,e.__super.call(this)}return w(e,"ui.modules.role.EquipItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/EquipItem")},e}(),VI=function(t){function e(){this.spRole=null,this.spPower=null,this.txtAttr=null,this.btnCompare=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankRoleEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRoleEquipView")},e}(),BI=function(t){function e(){this.img=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.rank.OtherRoleLegendItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/OtherRoleLegendItem")},e}(),MI=function(t){function e(){this.bg=null,this.txtName=null,this.btnClose=null,this.container=null,this.btnClose2=null,this.spRole=null,this.spView=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankRolePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRolePanel")},e}(),FI=function(t){function e(){this.icon0=null,this.icon1=null,this.icon2=null,this.icon3=null,this.icon4=null,this.lv0=null,this.lv1=null,this.lv2=null,this.lv3=null,this.lv4=null,this.skill0=null,this.skill1=null,this.skill2=null,this.skill3=null,this.skill4=null,this.selectedImg=null,this.desc=null,this.curTxt=null,this.nextTxt=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankRoleSkillViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRoleSkillView")},e}(),UI=function(t){function e(){this.imgArrow=null,this.txtNow=null,this.txtNext=null,this.img4=null,this.img3=null,this.img2=null,this.img1=null,this.txtLv=null,this.imgMax=null,this.spPower=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankRoleSplitViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRoleSplitView")},e}(),GI=function(t){function e(){this.imgWing=null,this.spActive=null,this.txtNowLev=null,this.txtNextLev=null,this.spPro=null,this.txtBar=null,this.bar2=null,this.bar1=null,this.spPower=null,this.spStar=null,this.imgMax=null,this.txtWing=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankRoleWingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRoleWingView")},e}(),HI=function(t){function e(){this.imgRight=null,this.btnComp=null,this.btnAll=null,this.txtCop=null,this.txtName=null,this.txtHas=null,this.imgRp=null,this.imgLeft=null,this.pan=null,this.panDes=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pack.ComposeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/ComposeView")},e}(),WI=function(t){function e(){this.btn=null,this.txt=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pack.CompTreeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/CompTreeItem")},e}(),qI=function(t){function e(){this.imgSel=null,this.txt=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pack.CompTreeSubItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/CompTreeSubItem")},e}(),YI=function(t){function e(){this.btnClose=null,this.btnMelt=null,this.btnRe=null,this.txtGet=null,this.txtGet1=null,this.txtGet2=null,this.txtGet3=null,this.txtGet4=null,e.__super.call(this)}return w(e,"ui.modules.pack.BathMeltViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/BathMeltView")},e}(),XI=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.imgCa=null,e.__super.call(this)}return w(e,"ui.modules.pack.MeltingItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/MeltingItem")},e}(),KI=function(t){function e(){this.tab=null,this.btnClose=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.pack.MeltingViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/MeltingView")},e}(),jI=function(t){function e(){this.btnMelt=null,this.btnOne=null,this.txtTip=null,e.__super.call(this)}return w(e,"ui.modules.pack.RoleEquipMeltViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/RoleEquipMeltView")},e}(),QI=function(t){function e(){this.chk=null,this.imgBg=null,this.imgGoods=null,this.imgCa=null,this.txtName=null,this.txtPow=null,e.__super.call(this)}return w(e,"ui.modules.pack.SelectMeltingItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/SelectMeltingItem")},e}(),zI=function(t){function e(){this.btnMelt=null,this.btnAdd=null,this.spPower=null,this.txtLv=null,this.txtNow=null,this.txtNext=null,e.__super.call(this)}return w(e,"ui.modules.pack.WingEquipMeltViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/WingEquipMeltView")},e}(),$I=function(t){function e(){this.btnClose1=null,this.hadList=null,this.listBg=null,this.toClose=null,this.list=null,this.noneLabel=null,e.__super.call(this)}return w(e,"ui.modules.pack.BatchResultViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/BatchResultView")},e}(),ZI=function(t){function e(){this.btnClose1=null,this.btnClose2=null,this.toUse=null,this.noLabel=null,e.__super.call(this)}return w(e,"ui.modules.pack.BatchUseViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/BatchUseView")},e}(),JI=function(t){function e(){this.btnClose=null,this.btnUse=null,this.noLabel=null,this.btnCheck=null,e.__super.call(this)}return w(e,"ui.modules.pack.LingBaoBatchUseViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/LingBaoBatchUseView")},e}(),tw=function(t){function e(){this.cloBtn=null,this.yBtn=null,this.nBtn=null,this.downBtn=null,this.upBtn=null,this.txtInput=null,this.txtPrice=null,e.__super.call(this)}return w(e,"ui.modules.pack.OpenPackTileViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/OpenPackTileView")},e}(),ew=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.imgLine=null,this.tab=null,this.spSet=null,this.batchBtn=null,this.subSp=null,this.btnEx=null,this.btnMel=null,this.txtZone=null,this.title=null,e.__super.call(this)}return w(e,"ui.modules.pack.PackViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/PackView")},e}(),iw=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.txtNum=null,this.txtName=null,this.btnAct=null,e.__super.call(this)}return w(e,"ui.modules.pack.WishSelectBoxItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/WishSelectBoxItem")},e}(),sw=function(t){function e(){this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.pack.WishSelectBoxTipUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pack/WishSelectBoxTip")},e}(),nw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgSel=null,this.imgMask=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetBookItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetBookItem")},e}(),ow=function(t){function e(){this.imgType=null,this.btnClose=null,this.txtTip=null,this.txtName=null,this.spStar=null,this.imgSkillBg=null,this.imgSkill=null,this.txtGet=null,this.panel=null,this.txtDesc=null,this.tab=null,this.list=null,this.btnRight=null,this.btnLeft=null,this.imgBarrier=null,this.btnClose2=null,this.txtPage=null,this.txtHas=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetBookViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetBookView")},e}(),aw=function(t){function e(){this.btnClose=null,this.list=null,this.txtT=null,this.btnYes=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetClearRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetClearRewardView")},e}(),lw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.imgFront=null,this.txtFront=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetEmbattleItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetEmbattleItem2")},e}(),rw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.txtLv=null,this.imgSel=null,this.imgFight=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFightItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFightItem")},e}(),hw=function(t){function e(){this.box=null,this.bg=null,this.spSkillMask=null,this.imgSpeed=null,this.imgRe=null,this.spBot=null,this.imgBg=null,this.imgBar=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.img6=null,this.img7=null,this.img8=null,this.img9=null,this.img10=null,this.imgWard=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.txt6=null,this.txt7=null,this.txt8=null,this.txt9=null,this.txt10=null,this.txtSubRound=null,this.txtRound=null,this.imgRec=null,this.txtDown=null,this.spPet=null,this.txtDown1=null,this.spCloseMask=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetFightViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetFightView")},e}(),uw=function(t){function e(){this.txtRound=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetTenRoundAwardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetTenRoundAwardItem")},e}(),cw=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetTenRoundAwardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetTenRoundAwardView")},e}(),dw=function(t){function e(){this.imgDoor=null,this.imgRound1=null,this.txt1=null,this.imgSuo1=null,this.imgRound2=null,this.txt2=null,this.imgSuo2=null,this.imgRound3=null,this.txt3=null,this.imgSuo3=null,this.imgRound4=null,this.txt4=null,this.imgSuo4=null,this.imgRound5=null,this.txt5=null,this.imgSuo5=null,this.imgNow=null,this.imgBg=null,this.imgGoods=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetTowerItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetTowerItem")},e}(),pw=function(t){function e(){this.imgSkill=null,this.txtSkill=null,this.imgSel=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetTowerSkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetTowerSkillItem")},e}(),mw=function(t){function e(){this.spTower=null,this.boxTower=null,this.btnClear=null,this.fTab=null,this.txtRound=null,this.txtLink=null,this.spEff=null,this.btnLeft=null,this.btnRight=null,this.list=null,this.imgRight=null,this.selPetBg=null,this.selPetImg=null,this.txtName=null,this.txtLv=null,this.txtSkill=null,this.imgLeft=null,this.fTab1=null,this.imgKuang=null,this.imgFinger=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetTowerViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetTowerView")},e}(),fw=function(t){function e(){this._closeBtn=null,this._backBtn=null,this._getBeadBtn=null,this._beadNameTxt=null,this._beadDescTxt=null,this._beadList=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulBeadArchivePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulBeadArchivePanel")},e}(),_w=function(t){function e(){this._selectImg=null,this._nameTxt=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulBeadItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulBeadItem")},e}(),gw=function(t){function e(){this.bg=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulComposeItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulComposeItem")},e}(),yw=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnCompose=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulComposePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulComposePanel")},e}(),vw=function(t){function e(){this.txtCur=null,this.txt0=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.img0=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulGoalPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulGoalPanel")},e}(),Iw=function(t){function e(){this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulGoodsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulGoodsItem")},e}(),ww=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btn=null,this.spPower=null,this.sp=null,this.txtNow=null,this.txtNext=null,this.txtTitleR=null,this.txtName=null,this.txtSoul=null,this.txtCenter=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulPolyChangePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulPolyChangePanel")},e}(),bw=function(t){function e(){this.imgBg=null,this.imgStone=null,this.imgSel=null,this.txtTip=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulPolyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulPolyItem")},e}(),Sw=function(t){function e(){this.btn=null,this.imgRP=null,this.spPower=null,this.btnCompose=null,this._archiveBtn=null,this._getBeadTxt=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulPolyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulPolyView")},e}(),xw=function(t){function e(){this.imgLogo=null,this.imgFull=null,this.btnGoal=null,this.spPower=null,this.txtStep=null,this.txtTip=null,this.txtAttrCur=null,this.txtAttrNext=null,this.htmlScore=null,this.btnUp=null,this.imgRP=null,this.btnAdd=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulStepViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulStepView")},e}(),Cw=function(t){function e(){this.spView=null,this.btnPoly=null,this.btnStep=null,this.rpStep=null,this.rpPoly=null,e.__super.call(this)}return w(e,"ui.modules.pet.SPSoul.SPSoulViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SPSoul/SPSoulView")},e}(),Pw=function(t){function e(){this.imgBg=null,this.imgIcon=null,this.imgType=null,this.imgState=null,this.imgBarBg=null,this.imgBar=null,this.btn=null,this.imgRP=null,this.txtName=null,this.txtLv=null,this.txtState=null,this.txtBar=null,e.__super.call(this)}return w(e,"ui.modules.pet.expBox.PetExpBoxInjectItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/expBox/PetExpBoxInjectItem")},e}(),Tw=function(t){function e(){this.bg=null,this.btnClose=null,this.btnUp=null,this.imgGoodsBg=null,this.imgGoodsIcon=null,this.list=null,this.btnClose2=null,this.txtTitle=null,this.txtStep=null,this.txtLink=null,this.txtExp=null,this.txtCostDesc=null,this.txtGoodsNum=null,e.__super.call(this)}return w(e,"ui.modules.pet.expBox.PetExpBoxPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/expBox/PetExpBoxPanel")},e}(),kw=function(t){function e(){this.txtCurStep=null,this.txtCurMax=null,this.spNext=null,this.txtNextStep=null,this.txtNextMax=null,this.txtFull=null,e.__super.call(this)}return w(e,"ui.modules.pet.expBox.PetExpBoxUpDescViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/expBox/PetExpBoxUpDescView")},e}(),Aw=function(t){function e(){this.btnClose=null,this.btnGet=null,this.checkBox=null,this.txt1=null,this.txt2=null,this.txtSub1=null,this.txtSub2=null,this.txtSub3=null,this.btnClose1=null,this.txtNum=null,this.txtTime=null,this.txtNow=null,this.txtNeed=null,this.spCenter=null,this.spGoods=null,this.pan=null,this.txtSub4=null,this.txtSell=null,e.__super.call(this)}return w(e,"ui.modules.pet.GodPetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/GodPetView")},e}(),Ew=function(t){function e(){this.imgBg=null,this.imgSel=null,this.imgSkill=null,this.imgSuo=null,this.imgNotOpen=null,this.imgGray=null,this.imgRp=null,this.txtLv=null,this.txtSub=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSkillItem")},e}(),Rw=function(t){function e(){this.spBar=null,this.imgBg=null,this.btnL=null,this.btnR=null,this.txtTitle=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.txt6=null,this.txt7=null,this.txt8=null,this.btnChange=null,this.btnBack=null,this.input1=null,this.input2=null,this.input3=null,this.input4=null,this.input5=null,this.input7=null,this.input6=null,this.input8=null,this.txtName=null,this.txtLv=null,this.txtZZ=null,this.txtBase=null,this.txtPro=null,this.imgPet=null,this.txtInit=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetAttrView")},e}(),Ow=function(t){function e(){this.btnClose=null,this.btnSave=null,this.input=null,this.btnClose2=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetChangeNameViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetChangeNameView")},e}(),Lw=function(t){function e(){this.spPower=null,this.imgTrain=null,this.imgFuse=null,this.imgType=null,this.btnFight=null,this.html=null,this.txtRelease=null,this.txtAttr=null,this.txtName=null,this.spRole=null,this.imgDevote=null,this.imgRPSet=null,this.imgBook=null,this.imgChangeName=null,this.btnRight=null,this.btnLeft=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetDescViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetDescView")},e}(),Dw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.txtLv=null,this.txtNotOpen=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetDevoteItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetDevoteItem")},e}(),Nw=function(t){function e(){this.btnClose=null,this.list=null,this.btnRight=null,this.btnLeft=null,this.txtAttr=null,this.txtZZZ=null,this.txtChangee=null,this.txtZZ=null,this.txtChange=null,this.btn=null,this.btnClose2=null,this.txtAttrTotal=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetDevoteViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetDevoteView")},e}(),Vw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.txtName=null,this.txtLv=null,this.imgSel=null,this.imgMax=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreSelItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreSelItem")},e}(),Bw=function(t){function e(){this.btnLeft=null,this.btnRight=null,this.btn=null,this.img0=null,this.txtName0=null,this.txtHours0=null,this.txtGet0=null,this.img1=null,this.txtName1=null,this.txtHours1=null,this.txtGet1=null,this.img2=null,this.txtName2=null,this.txtHours2=null,this.txtGet2=null,this.pan=null,this.imgSel=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreSelViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreSelView")},e}(),Mw=function(t){function e(){this.txtName=null,this.bloodBar=null,this.nuqiBar=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetFightUnitNameUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetFightUnitName")},e}(),Fw=function(t){function e(){this.btnClose=null,this.panSkill=null,this.txtDesc=null,this.btnYes=null,this.btnNo=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetForgetAlertViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetForgetAlertView")},e}(),Uw=function(t){function e(){this.btnClose=null,this.panSkill=null,this.btnYes=null,this.btnNo=null,this.txtLink=null,this.txtPs=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseAlertViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseAlertView")},e}(),Gw=function(t){function e(){this.btnClose=null,this.btn=null,this.spPower=null,this.txtZZ=null,this.txtInit=null,this.txtBase=null,this.gre1=null,this.gre2=null,this.gre3=null,this.gre4=null,this.spRole=null,this.imgType=null,this.txtFuseName=null,this.txtFuseLv=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseResultViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseResultView")},e}(),Hw=function(t){function e(){this.btnClose=null,this.btnYes=null,this.btnNo=null,this.txtTip=null,this.txtInput=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseSecAlertViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseSecAlertView")},e}(),Ww=function(t){function e(){this.txtName=null,this.txtZZ=null,this.txtInit=null,this.txtBase=null,this.txtSkill=null,this.gre1=null,this.gre2=null,this.gre3=null,this.gre4=null,this.gre5=null,this.spCon=null,this.spStar=null,this.spMask=null,this.imgSel=null,this.imgExploring=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseSelItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseSelItem")},e}(),qw=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.btn=null,this.btnSel=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseSelViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseSelView")},e}(),Yw=function(t){function e(){this.imgBg=null,this.imgSkill=null,this.imgNew=null,this.txt=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseSkillItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseSkillItem")},e}(),Xw=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseTipsPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseTipsPanel")},e}(),Kw=function(t){function e(){this.btnClose=null,this.imgMain=null,this.btnMain=null,this.txtMainLv=null,this.txtMainName=null,this.imgSub=null,this.btnSub=null,this.txtSubLv=null,this.txtSubName=null,this.btn=null,this.btnClose2=null,this.imgFuse=null,this.spHas=null,this.btnChange=null,this.txtFuseName=null,this.txtFuseLv=null,this.boxL=null,this.txtL=null,this.boxR=null,this.txtR=null,this.txtZZ=null,this.txtInit=null,this.txtBase=null,this.gre1=null,this.gre2=null,this.gre3=null,this.gre4=null,this.txtNo=null,this.btnRight=null,this.btnLeft=null,this.btnHelp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseView")},e}(),jw=function(t){function e(){this.btnClose=null,this.btnYes=null,e.__super.call(this)}return w(e,"ui.modules.guide.PetGetGuideUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/guide/PetGetGuide")},e}(),Qw=function(t){function e(){this.doTxt=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetHuntSoulUseItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetHuntSoulUseItem")},e}(),zw=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.imgGirl1=null,this.spMask1=null,this.imgGirl2=null,this.spMask2=null,this.imgGirl3=null,this.spMask3=null,this.imgGirl4=null,this.spMask4=null,this.imgGirl5=null,this.spMask5=null,this.btnPick=null,this.btnChange=null,this.imgBag=null,this.imgPickRP=null,this.txtSoulExp=null,this.txtLingQi=null,this.txtLink=null,this.btnHunt1=null,this.btnHunt2=null,this.btnSet=null,this.imgThiGold=null,this.txtThi=null,this.txtSet=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetHuntSoulViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetHuntSoulView")},e}(),$w=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.txtLv=null,this.imgState=null,this.txtState=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetItem")},e}(),Zw=function(t){function e(){this.imgBg=null,this.imgPet=null,this.imgType=null,this.spStar=null,this.txtAttr1=null,this.txtAttr2=null,this.txtLv1=null,this.txtLv2=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetLvUpViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetLvUpView")},e}(),Jw=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnClose2=null,this.spView=null,this.list=null,this.btnRight=null,this.btnLeft=null,this.title=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetPanel")},e}(),tb=function(t){function e(){this.selPetBg=null,this.selPetImg=null,this.spPower=null,this.btnClose=null,this.btnClose2=null,this.box1=null,this.box2=null,this.box3=null,this.box4=null,this.txtName=null,this.txtLv=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetRpSetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetRpSetView")},e}(),eb=function(t){function e(){this.imgSkillBg=null,this.imgSkill=null,this.panel=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSkillDescItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSkillDescItem")},e}(),ib=function(t){function e(){this.selPetSp=null,this.selPetBg=null,this.selPetImg=null,this.txtName=null,this.txtLv=null,this.imgTitle=null,this.panLeft=null,this.btnBg1=null,this.btnImg1=null,this.btnTxt1=null,this.btnBg2=null,this.btnImg2=null,this.btnTxt2=null,this.btnBg3=null,this.btnImg3=null,this.btnTxt3=null,this.spUpLv=null,this.skillUpBg=null,this.skillUpImg=null,this.txtUpName=null,this.txtUpLv=null,this.imgLine=null,this.btnUp=null,this.txtUp1=null,this.txtLink=null,this.panel=null,this.txtUp=null,this.txtHas1=null,this.spDepote=null,this.spCheck=null,this.box=null,this.panDepot=null,this.spThrow=null,this.txtForgetExp=null,this.btnThrow=null,this.panThrow=null,this.spNotHas=null,this.txt1=null,this.txtLink3=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSkillViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSkillView")},e}(),sb=function(t){function e(){this.imgBg=null,this.txtAttr=null,this.txtName=null,this.txtHas=null,this.btnChange=null,this.imgRp=null,this.txtNeed=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulChangeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulChangeItem")},e}(),nb=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.pan=null,this.txtHas=null,this.spCheck=null,this.box=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulChangeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulChangeView")},e}(),ob=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.btnDe=null,this.pan=null,this.box2=null,this.box3=null,this.box4=null,this.box5=null,this.box6=null,this.txtLink2=null,this.txtLink3=null,this.txtLink4=null,this.txtLink5=null,this.txtLink6=null,this.txtNum2=null,this.txtNum3=null,this.txtNum4=null,this.txtNum5=null,this.txtNum6=null,this.txtGet=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulDecomposeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulDecomposeView")},e}(),ab=function(t){function e(){this.imgBg=null,this.spEff=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulHuntItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulHuntItem")},e}(),lb=function(t){function e(){this.spEff=null,this.txtDesc=null,this.txtType=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulItem")},e}(),rb=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.pan=null,this.btnClose2=null,this.txtZone=null,this.txtLink=null,this.btnDe=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulPackUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulPack")},e}(),hb=function(t){function e(){this.imgBg=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulPackItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulPackItem")},e}(),ub=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.txt=null,this.txt6=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.img6=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulSetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulSetView")},e}(),cb=function(t){function e(){this.btnChange=null,this.imgChangeRP=null,this.txtLink=null,this.spPower=null,this.imgItemBg=null,this.txtName=null,this.txtLv=null,this.imgSel=null,this.spHas=null,this.txtAttrNow=null,this.txtAttrNext=null,this.txtLink2=null,this.txtNeed=null,this.txtHas=null,this.btnUp=null,this.imgMax=null,this.imgUpRP=null,this.spNotHas=null,this.txt1=null,this.txtLink3=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulView")},e}(),db=function(t){function e(){this.btnClose=null,this.btnOne=null,this.btnTen=null,this.btnFifty=null,this.spOne=null,this.txt1=null,this.txt50=null,this.txt10=null,this.htmlCur=null,this.htmlTip=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSpiritBuyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSpiritBuyPanel")},e}(),pb=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.spPower=null,this.txtName=null,this.txtLV=null,this.spBar=null,this.txtPro=null,this.list=null,this.btnRight=null,this.btnLeft=null,this.spNotmax=null,this.txtLink=null,this.spGoods=null,this.imgRp0=null,this.imgRp1=null,this.imgRp2=null,this.imgRp3=null,this.btnOneKey=null,this.spMax=null,this.txtAttr1=null,this.txtAtr2=null,this.imgExp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetTrainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetTrainView")},e}(),mb=function(t){function e(){this.chk=null,this.imgBg=null,this.imgGoods=null,this.imgCa=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.pet.SelectSoulItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SelectSoulItem")},e}(),fb=function(t){function e(){this.btnY=null,this.panelSel=null,this.closeBtn=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.pet.SelectSoulViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/SelectSoulView")},e}(),_b=function(t){function e(){this.box1=null,this.bg1=null,this.closeBtn=null,this.btn=null,this.box2=null,this.bg2=null,this.btn2=null,e.__super.call(this)}return w(e,"ui.modules.collectGame.CollectGameViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/collectGame/CollectGameView")},e}(),gb=function(t){function e(){this.btnClose=null,this.btnNo=null,this.btnYes=null,this.sp=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.EvaluateViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/EvaluateView")},e}(),yb=function(t){function e(){this.btnClose=null,this.btnClose1=null,this.btnGet=null,this.btnLook=null,this.spReward=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.QQDJRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/QQDJRewardView")},e}(),vb=function(t){function e(){this.btnClose=null,this.btn=null,this.imgBtn=null,this.txtTip=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.share.ShareGamePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/share/ShareGamePanel")},e}(),Ib=function(t){function e(){this.btnClose=null,this.sp=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.WeixinFocusViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/WeixinFocusView")},e}(),wb=function(t){function e(){this.imgBg=null,this.txtTimes=null,this.btnClear=null,e.__super.call(this)}return w(e,"ui.modules.plays.BailingyuanQuickViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/BailingyuanQuickView")},e}(),bb=function(t){function e(){this.imgShield=null,this.imgInspire=null,this.spInspire=null,this.imgDizzy=null,this.imgDoubleSit=null,this.imgKiss=null,this.imgInspire2=null,this.txtDizzy=null,this.txtKiss=null,e.__super.call(this)}return w(e,"ui.modules.plays.beach.BeachControlViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beach/BeachControlView")},e}(),Sb=function(t){function e(){this.bg=null,this.container=null,this.spInfo=null,this.imgEnter1=null,this.imgInfoBg1=null,this.imgHead1=null,this.imgEnter2=null,this.imgInfoBg2=null,this.imgHead2=null,this.imgEnter3=null,this.imgInfoBg3=null,this.imgHead3=null,this.imgEnter4=null,this.imgInfoBg4=null,this.imgHead4=null,this.txtMyName=null,this.txtTime=null,this.txtFamilyName1=null,this.txtFamilyName2=null,this.txtFamilyName4=null,this.txtFamilyName3=null,this.imgRp=null,this.spEnterInfo=null,this.txtEndTime=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.beach.BeachEnterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beach/BeachEnterPanel")},e}(),xb=function(t){function e(){this.imgHelp=null,this.txtTime=null,this.txtScore=null,e.__super.call(this)}return w(e,"ui.modules.plays.beach.BeachHelpBtnViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beach/BeachHelpBtnView")},e}(),Cb=function(t){function e(){this.btnClose=null,this.btn=null,this.txtName=null,this.txtScore=null,e.__super.call(this)}return w(e,"ui.modules.plays.beach.BeachResultPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beach/BeachResultPanel")},e}(),Pb=function(t){function e(){this.cb1=null,this.cb2=null,this.btnBack=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossBlockPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossBlockPanel")},e}(),Tb=function(t){function e(){this.bossBar0=null,this.bossBar1=null,this.bmpHead=null,this.txtName=null,this.txtLv=null,this.txtMy=null,this.txtBest=null,this.numTxt=null,this.btn=null,this.imgArrow=null,this.goalPart=null,this.txtGoalInfo=null,this.imgHead=null,this.escapeTxt=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossBloodUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossBlood")},e}(),kb=function(t){function e(){this.imgBg=null,this.spDetail=null,this.spPart1=null,this.txtActiveInfo=null,this.txtTime1=null,this.spPart2=null,this.imgSkill=null,this.spBar=null,this.imgLine5=null,this.imgLine4=null,this.imgLine3=null,this.imgLine2=null,this.imgLine1=null,this.txtInfo1=null,this.txtTime2=null,this.txtCur=null,this.txtNext=null,this.sp100=null,this.txtInfo2=null,this.txtTime3=null,this.spEnd=null,this.txtEndTime=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossCollectScoreViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossCollectScoreView")},e}(),Ab=function(t){function e(){this.imgShield=null,this.imgInspire=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossControlViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossControlView")},e}(),Eb=function(t){function e(){this.bg=null,this.btnClose=null,this.container=null,this.btnClose2=null,this.btnEnter=null,this.txtTimeDesc=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossEnterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossEnterPanel")},e}(),Rb=function(t){function e(){this.txt=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachWinTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachWinTip")},e}(),Ob=function(t){function e(){this.bg=null,this.imgCrystal=null,this.imgScore=null,this.btnClose2=null,this.btnClose=null,this.btnFlash=null,this.btnBuild=null,this.txtTitle=null,this.txtLv=null,this.txtTime=null,this.txtExp=null,this.txtNeedScore=null,this.txtOutputName=null,this.txtLink=null,this.html=null,this.txtNeedPower=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalBuildPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalBuildPanel")},e}(),Lb=function(t){function e(){this.bg=null,this.infoBg=null,this.txtTitle=null,this.txtName=null,this.txtNameOther=null,this.txtPower=null,this.txtPowerOther=null,this.txtFamily=null,this.btn=null,this.btnClose2=null,this.btnClose=null,this.imgBg1=null,this.imgHead1=null,this.imgBg2=null,this.imgHead2=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalFamilyHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalFamilyHelpPanel")},e}(),Db=function(t){function e(){this.html=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalHoldInfoItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalHoldInfoItem")},e}(),Nb=function(t){function e(){this.bg=null,this.infoBg=null,this.txtTitle=null,this.btn=null,this.btnClose2=null,this.btnClose=null,this.panel=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalHoldInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalHoldInfoPanel")},e}(),Vb=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalIntroPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalIntroPanel")},e}(),Bb=function(t){function e(){this.bg=null,this.infoBg=null,this.imgCrystal=null,this.txtOtherName=null,this.txtOtherFamily=null,this.txtTitle=null,this.txtLv=null,this.txtTime=null,this.txtExp=null,this.txtGet=null,this.txtScoreName=null,this.btn=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalMyHarryInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalMyHarryInfoPanel")},e}(),Mb=function(t){function e(){this.bg=null,this.infoBg=null,this.imgCrystal=null,this.spHarry=null,this.txtOtherName=null,this.txtLost=null,this.txtPower=null,this.txtOtherFamily=null,this.txtLink=null,this.txtTitle=null,this.txtLv=null,this.txtTime=null,this.txtExp=null,this.txtGet=null,this.txtScoreName=null,this.btn=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalMyInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalMyInfoPanel")},e}(),Fb=function(t){function e(){this.bg=null,this.infoBg=null,this.imgCrystal=null,this.spHarry=null,this.txtOtherName=null,this.txtPower=null,this.txtFamily=null,this.txtTitle=null,this.txtLv=null,this.txtScoreName=null,this.txtTime=null,this.txtExp=null,this.txtLink=null,this.html=null,this.btn=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalOtherInfoPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalOtherInfoPanel")},e}(),Ub=function(t){function e(){this.txtName=null,this.txtExp=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalResultItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalResultItem")},e}(),Gb=function(t){function e(){this.bg=null,this.infoBg=null,this.imgCrystal=null,this.spHarry=null,this.panel=null,this.txtTitle=null,this.txtLv=null,this.txtGet=null,this.btn=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.CrystalResultPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/CrystalResultPanel")},e}(),Hb=function(t){function e(){this.bg=null,this.imgIcon=null,this.btnClose2=null,this.btnClose=null,this.btnUp=null,this.btnExplore=null,this.btnFight=null,this.txtTitle=null,this.txtLevel=null,this.txtCurEffect=null,this.txtNextEffect=null,this.txtCondition=null,this.txtNum=null,this.txtProduct=null,this.txtUp=null,this.txtColdTime=null,this.txtColdTime1=null,this.txtAmethyst=null,this.imgRPUp=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityAmethystPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityAmethystPanel")},e}(),Wb=function(t){function e(){this.imgIcon=null,this.imgTitle=null,this.txtLevel=null,this.imgRP=null,this.imgTip=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityBuilderItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityBuilderItem")},e}(),qb=function(t){function e(){this.bmpCrystal=null,this.bmpDefault=null,this.txtLv=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityCrystalItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCrystalItem")},e}(),Yb=function(t){function e(){this.btnClose=null,this.btn=null,this.img=null,this.txtTitle=null,this.txtName=null,this.spResult=null,this.txtResult=null,this.txtNeed=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityEventPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityEventPanel")},e}(),Xb=function(t){function e(){this.bg=null,this.imgIconBg=null,this.imgIcon=null,this.btnClose=null,this.btn=null,this.txtTitle=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityExploreRewardPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityExploreRewardPanel")},e}(),Kb=function(t){function e(){this.btn=null,this.txtLevel=null,this.txtCurWelfare=null,this.txtCurFind=null,this.txtCurSmelt=null,this.spNext=null,this.txtNextWelfare=null,this.txtNextFind=null,this.txtNextSmelt=null,this.txtFull=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityLevelIncomeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityLevelIncomeView")},e}(),jb=function(t){function e(){this.bg=null,this.btnClose=null,this.btn1=null,this.btn2=null,this.btnClose2=null,this.txtName1=null,this.txtName2=null,this.txtTitle=null,this.txtRewards2=null,this.txtRewards1=null,this.htmlNeed1=null,this.htmlNeed2=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityMissionPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityMissionPanel")},e}(),Qb=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.btn=null,this.img=null,this.txtName=null,this.txtPower=null,this.txtTitle=null,this.txtNeed=null,this.spRewards=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityMonsterPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityMonsterPanel")},e}(),zb=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityMyCrystalPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityMyCrystalPanel")},e}(),$b=function(t){function e(){this.txtTime=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityNoteItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityNoteItem")},e}(),Zb=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.list=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityNotePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityNotePanel")},e}(),Jb=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityOtherCrystalPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityOtherCrystalPanel")},e}(),tS=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.btn=null,this.imgHead=null,this.txtName=null,this.txtPower=null,this.txtTime=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityRevengePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityRevengePanel")},e}(),eS=function(t){function e(){this.bmpCrystal=null,this.bmpTip=null,this.bmpDefault=null,this.imgRP=null,this.bmpNameBg=null,this.txtName=null,this.txtLv=null,this.txtTime=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCitySceneCrystalItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCitySceneCrystalItem")},e}(),iS=function(t){function e(){this.txtName=null,this.txtLv=null,this.imgShield=null,this.imgExp=null,this.txtAmethyst=null,this.txtGold=null,this.txtCrystal=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCitySceneViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCitySceneView")},e}(),sS=function(t){function e(){this.btnClose=null,this.txtTitle=null,this.txtHtml=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCitysTipPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCitysTipPanel")},e}(),nS=function(t){function e(){this.imgTower=null,this.imgNameBg=null,this.spScore=null,this.txtScore1=null,this.txtScore2=null,this.txtScore3=null,this.txtLv=null,this.txtLink=null,this.txtName=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityTowerCrystalViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityTowerCrystalView")},e}(),oS=function(t){function e(){this.imgTower=null,this.btnUp=null,this.btnElite=null,this.btnFind=null,this.btnAmethyst=null,this.txtLv=null,this.txtUpNeed=null,this.txtCurAmethyst=null,this.txtCrystal=null,this.txtGold=null,this.txtAmethyst=null,this.txtLinkGet=null,this.txtElite=null,this.txtFindColdTime=null,this.txtCost=null,this.txtSmeltProduct=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityTowerInfoViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityTowerInfoView")},e}(),aS=function(t){function e(){this.img=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityTowerItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityTowerItem")},e}(),lS=function(t){function e(){this.bg=null,this.spView=null,this.tab=null,this.txtTitle=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityTowerPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityTowerPanel")},e}(),rS=function(t){function e(){this.spScene=null,this.btnL=null,this.btnR=null,this.imgMsg=null,this.imgHome=null,this.btnTip=null,this.spInfo=null,this.btnSearch=null,this.txtTip=null,this.txtVigor=null,this.txtLinkBuy=null,e.__super.call(this)}return w(e,"ui.modules.plays.city.PlaysCityViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityView")},e}(),hS=function(t){function e(){this.btnClose=null,this.btnYes=null,this.imgInfo=null,this.txtMsg=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.plays.CopyRewardGetUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/CopyRewardGet")},e}(),uS=function(t){function e(){this.btnClose1=null,this.btnClose=null,this.btn=null,this.imgBg=null,this.txtTitle=null,this.htmlDesc=null,this.txtLine=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txtState=null,this.txtTime=null,this.txtExp=null,this.htmlGet=null,this.txtDown=null,this.imgPetBg=null,this.imgPet=null,this.txtName=null,this.imgBarBg=null,this.sp=null,this.imgBar=null,this.txtPre=null,this.imgHelp=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreHandlerViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreHandlerView")},e}(),cS=function(t){function e(){this.imgBg=null,this.txtTitle=null,this.imgClock=null,this.txtTime=null,this.btn=null,this.imgPetBg=null,this.imgPet=null,this.imgRp=null,this.txtOpen=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreItem")},e}(),dS=function(t){function e(){this.imgSucc=null,this.btn=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreSuccViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreSuccView")},e}(),pS=function(t){function e(){this.pan=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetExploreViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetExploreView")},e}(),mS=function(t){function e(){this.bg=null,this.txtLv=null,this.txtRewards=null,this.txtTimes=null,e.__super.call(this)}return w(e,"ui.modules.plays.PlaysGuideItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/PlaysGuideItem")},e}(),fS=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.plays.PlaysGuidePetViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/PlaysGuidePetView")},e}(),_S=function(t){function e(){this.list=null,e.__super.call(this)}return w(e,"ui.modules.plays.PlaysGuideRoleViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/PlaysGuideRoleView")},e}(),gS=function(t){function e(){this.spSubView=null,this.tab=null,e.__super.call(this)}return w(e,"ui.modules.plays.PlaysGuideViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/PlaysGuideView")},e}(),yS=function(t){function e(){this.bg=null,this.container=null,this.spView=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.plays.PlaysPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/PlaysPanel")},e}(),vS=function(t){function e(){this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.plays.TreasureGoodItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/TreasureGoodItem")},e}(),IS=function(t){function e(){this.imgMap=null,this.imgDown=null,this.imgOver=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.plays.TreasureItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/TreasureItem")},e}(),wS=function(t){function e(){this.btnClose1=null,this.btnClose2=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.plays.TreasureResViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/TreasureResView")},e}(),bS=function(t){function e(){this.btnClose=null,this.btnClose2=null,this.box1=null,this.box2=null,e.__super.call(this)}return w(e,"ui.modules.plays.TreasureRpViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/TreasureRpView")},e}(),SS=function(t){function e(){this.imgBg=null,this.txtFree=null,this.txtMap=null,this.txtLink1=null,this.txtLink2=null,this.txtLink3=null,this.txtLink4=null,this.btnRefresh=null,this.imgThiGold=null,this.txtThi=null,this.imgRpSet=null,this.imgSp=null,this.imgMap1=null,this.imgMap2=null,this.imgMap3=null,this.imgGet=null,this.imgWen1=null,this.imgWen2=null,this.imgWen3=null,this.pan=null,e.__super.call(this)}return w(e,"ui.modules.plays.TreasureViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/TreasureView")},e}(),xS=function(t){function e(){this.imgBg=null,this.txtName=null,this.imgDetail=null,this.boxDetail=null,this.txtAttr=null,this.box=null,this.spPow=null,e.__super.call(this)}return w(e,"ui.modules.rank.RankAwardDisplayItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankAwardDisplayItem")},e}(),CS=function(t){function e(){this.bg=null,this.title=null,this.container=null,this.spEquip=null,this.btnClose2=null,this.tab=null,this.btnClose1=null,e.__super.call(this)}return w(e,"ui.modules.refine.RefinePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefinePanel")},e}(),PS=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.imgSel=null,this.imgHas=null,e.__super.call(this)}return w(e,"ui.modules.fashion.FashionTarItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/FashionTarItem")},e}(),TS=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtStar=null,this.spHas=null,this.garyTxt=null,this.grayImg=null,this.hasText=null,this.txtTime=null,this.imgSel=null,this.imgRP=null,this.imgNew=null,e.__super.call(this)}return w(e,"ui.modules.fashion.RoleFashionItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/RoleFashionItem")},e}(),kS=function(t){function e(){this.txtName=null,this.txtDesc=null,this.imgBg=null,this.imgGoods=null,e.__super.call(this)}return w(e,"ui.modules.fashion.RoleFashionNeedItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/RoleFashionNeedItem")},e}(),AS=function(t){function e(){this.imgHeadBg=null,this.imgHead=null,this.imgOpen=null,e.__super.call(this)}return w(e,"ui.modules.role.HeadItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/HeadItem")},e}(),ES=function(t){function e(){this.imgVoca=null,this.spRole=null,this.imgHas=null,e.__super.call(this)}return w(e,"ui.modules.role.RoleCategoryItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleCategoryItem")},e}(),RS=function(t){function e(){this.btnChange=null,this.spPower=null,this.spRole=null,this.txtViewAttr=null,this.imgBuildSoul=null,this.imgBuildRp=null,this.imgOran=null,this.imgDom=null,this.imgDomRp=null,this.imgLegend=null,this.imgLegendRp=null,this.imgTitle=null,this.imgFashion=null,e.__super.call(this)}return w(e,"ui.modules.role.RoleEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleEquipView")},e}(),OS=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.tab=null,this.btnClose2=null,this.spHead=null,this.spView=null,this.title=null,e.__super.call(this)}return w(e,"ui.modules.role.RolePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RolePanel")},e}(),LS=function(t){function e(){this.imgArrow=null,this.img4=null,this.img3=null,this.img2=null,this.img1=null,this.imgMax=null,this.imgRp=null,this.imgInput=null,this.spPower=null,this.btn2=null,this.btn1=null,this.txtNow=null,this.txtNext=null,this.txtLv=null,this.txtDesc=null,this.txtHas=null,this.txtNeed1=null,e.__super.call(this)}return w(e,"ui.modules.split.SplitViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/split/SplitView")},e}(),DS=function(t){function e(){this.imgBg=null,this.imgEquip=null,this.txtName=null,this.imgRp=null,e.__super.call(this)}return w(e,"ui.modules.wing.RoleWingEquipItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/wing/RoleWingEquipItem")},e}(),NS=function(t){function e(){this.imgWing=null,this.spActive=null,this.btnUp=null,this.btnWIngs=null,this.btnCopper=null,this.btnAuto=null,this.spPro=null,this.imgBar=null,this.spPower=null,this.spStar=null,this.imgMax=null,this.imgUp=null,this.imgRp=null,this.imgFashion=null,this.imgEquip=null,this.sp1=null,this.imgCopper=null,this.txtCopper=null,this.txtWings=null,this.txtLvLim=null,this.txtNowLev=null,this.txtNextLev=null,this.txtBar=null,this.spUnActive=null,this.btnActive=null,this.txtActive=null,this.txtWing=null,e.__super.call(this)}return w(e,"ui.modules.wing.RoleWingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/wing/RoleWingView")},e}(),VS=function(t){function e(){this.txttag=null,e.__super.call(this)}return w(e,"ui.modules.role.RoleSetCityItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleSetCityItem")},e}(),BS=function(t){function e(){this.imgBg=null,this.imgHead=null,this.imgKuang=null,this.spMain=null,this.imgSel=null,this.imgOpen=null,e.__super.call(this)}return w(e,"ui.modules.roleSet.RoleSetHeadItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetHeadItem")},e}(),MS=function(t){function e(){this.imgBubble=null,this.imgState=null,this.imgTxt=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.roleSet.RoleSetSelfBubbleItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfBubbleItem")},e}(),FS=function(t){function e(){this.imgBg=null,this.imgLock=null,this.imgFrame=null,this.imgRP=null,e.__super.call(this)}return w(e,"ui.modules.roleSet.RoleSetSelfFrameItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfFrameItem")},e}(),US=function(t){function e(){this.chb=null,e.__super.call(this)}return w(e,"ui.modules.rpMask.RpMaskChbUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rpMask/RpMaskChb")},e}(),GS=function(t){function e(){this.btn=null,e.__super.call(this)}return w(e,"ui.modules.rpMask.RpMaskSetBtnUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rpMask/RpMaskSetBtn")},e}(),HS=function(t){function e(){this.btnClose=null,this.btnBack=null,this.panel=null,this.txtTip=null,this.btnCancel=null,this.btnSelect=null,this.img=null,e.__super.call(this)}return w(e,"ui.modules.rpMask.RpMaskSetPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rpMask/RpMaskSetPanel")},e}(),WS=function(i){function o(){this.myPalName=null,this.runMode="NORMAL_RUN",this._underControl=!0,this._underControlID=0,this._lockedTarget=0,this.toAttackTime=0,this.onAttackTime=0,this.isAttackBack=!0,this.arriveAction=null,this._fightVO=null,this.inCD=!1,o.__super.call(this),this.lastSendPt=new Rt}w(o,"com.scene.unit.MyPal",i);var t=o.prototype;return t.init=function(){i.prototype.init.call(this),this.myPalName=new oh,this.myPalName.y=-120,this.addChild(this.myPalName),this.showMyBlueVip()},t.reset=function(t,e){i.prototype.reset.call(this,t,e),this.myPalName.reset(t),e&&(_t.clearTimeout(this._underControlID),this._underControl=!0,o.autoHit(),-1==o._all.indexOf(this)&&o._all.push(this)),this.showMyBlueVip()},t.onHeightChange=function(t){i.prototype.onHeightChange.call(this,t),this.myPalName.y=8==o.mainPalState?-this._bodyHeight-10:-120},t.runToPoint=function(t,e,i,s){if(void 0===e&&(e=0),void 0===s&&(s="NORMAL_RUN"),this.runMode=s,0!=this.speed){var n=_e.astar.findPath(this.pt,t,e,!0);if(T.dispatch("MY_PAL_FIND_PATH_TO_WALK",n),this.arriveAction=i,null!=n&&1!=Rt.isEqual(n[0],n[n.length-1]))2<=n.length?(1==Rt.isEqual(n[0],this.pt)&&n.shift(),0<n.length&&Nr.ins().toWalkPath(this.id,n)):null!=this.arriveAction&&(this.arriveAction.run(),this.arriveAction=null);else if(null!=this.arriveAction&&(this.arriveAction.run(),this.arriveAction=null),null==n){var o=new Object;o.className="m_move_sync_tos",o.actor_id=this.id,v.send(o)}}},t.onArriveRunEnd=function(){this.normal(),null!=this.arriveAction&&(this.arriveAction.run(),this.arriveAction=null)},t.runAndHit=function(t,e){if(3!=this.status&&1==this.underControl){var i=Se.getUnit(t);if(null!=i){if(3==i.status)return void this.normal();var s=fa.getFightSkill(this.id,this._pvo.category);if(this._fightVO=fa.getFightVO(s),null==this._fightVO){if(this.id!=pe.mainPalID)5<Rt.distance(this.pt,o.main.pt)&&this.runToPoint(o.main.pt,2);return}if(Rt.distance(this.pt,i.pt)<=this._fightVO.dist)this.normal(),this.runMode="ATTACK_RUN",this.doAttack(this._fightVO.id,i),this.path=null;else if(0==e)this.runToPoint(i.pt,1,null,"ATTACK_RUN");else{var n=Ve.getOffsetPt(this.x,this.y,i.x,i.y,this.pt,i.pt,this.category);0!=ca.hasCell(n.x,n.z)&&1!=Rt.isEqual(n,this.pt)||(n=i.pt),this.runToPoint(n,0,null,"ATTACK_RUN")}}}else this.lockedTarget=0,this.runMode="NORMAL_RUN",this.normal()},t.doAttack=function(t,e,i){null!=e&&(e!=this&&this.play(this.curAct,Ve.getDretion(this.x,this.y,e.x,e.y)),this.isAttackBack=!1,Or.ins().toFight(this,t,e),this._fightVO=null)},t.useCrossTowerSkill=function(t,e){this.doAttack(t,e)},t.onMoving=function(){com.scene.unit.base.Animal.prototype.onMoving.call(this),this.checkAttack(),this.checkTurn()},t.checkTurn=function(){var t=this,e=ca.getTouchTranID(this.pt);if(0<=e){var i=ca.getTouchTranMap(this.pt);if(this.inCD)return void console.log("跳转CD中");_t.setTimeout(this,function(){t.inCD=!1},null,1e3),this.inCD=!0,T.dispatch("PAL_TOUCH_TRAN_POINT",e,i),console.log("触碰传送点")}},t.checkAttack=function(){if("ATTACK_RUN"==this.runMode){if(0==ca.hasCell(this.curPt.x,this.curPt.z))return;var t=Se.getUnit(this.lockedTarget);if(null!=t){if(3==t.status||null==this._fightVO)return void this.normal();Rt.distance(this.pt,t.pt)<=this._fightVO.dist&&(this.normal(),this.runMode="ATTACK_RUN",this.doAttack(this._fightVO.id,t),this.path=null)}}},t.changeCell=function(t){this.setWeak(Ve.checkAlphaCell(t)),this.sendWalkTile(t),this._pvo&&this._pvo.skin.track&&this.showFootEff()},t.sendWalkTile=function(t){var e=Rt.distance(this.prePt,t);if(1==ca.hasCell(t.x,t.z))if(e<=1)this.prePt.x=t.x,this.prePt.z=t.z,this._isTouchMoving||ua.isCross()?Nr.ins().toWalkDir(t,this.curDir):Nr.ins().toWalk(this.id,t,this.curDir),this.lastSendPt.x=t.x,this.lastSendPt.z=t.z;else if(1<e){var i=_e.astar.findPath(this.lastSendPt,t,0,!1);if(null==i)return;for(1==Rt.isEqual(this.lastSendPt,i[0])&&1<i.length&&i.shift();0<i.length;){var s=i.shift();if(1!=(e=Rt.distance(s,this.lastSendPt)))return;this.prePt.x=s.x,this.prePt.z=s.z,this._isTouchMoving||ua.isCross()?Nr.ins().toWalkDir(t,this.curDir):Nr.ins().toWalk(this.id,s,this.curDir),this.lastSendPt.x=s.x,this.lastSendPt.z=s.z}}},t.onBloodDown=function(t){this._pvo&&(this._pvo.hp=t,this._reallyHP=t,this.myPalName.updateBlood(t,this._pvo.max_hp))},t.resetPos=function(t){this.x=Ot.posToX(t),this.y=Ot.posToY(t),this.prePt=Ot.pos2Pt(t),this._curPt=Ot.pos2Pt(t),this.lastSendPt.x=this._curPt.x,this.lastSendPt.z=this._curPt.z,this.normal()},t.resetVisible=function(){},t.remove=function(){i.prototype.remove.call(this),this.lockedTarget=0,this._isMoving=!1;var t=o._all.indexOf(this);-1!=t&&(o._all.splice(t,1),o._pool.push(this)),this==o._main&&(o._main=null)},t.createBattlefieldScoreImg=function(t){this.myPalName&&this.myPalName.showScoreImg(t)},t.hideTile=function(){this.myPalName&&this.myPalName.parent&&this.myPalName.hideTitle()},t.showTitle=function(){this.myPalName&&this.myPalName.parent&&this.myPalName.showTitle(this._pvo)},t.removeCollectingShow=function(){this.myPalName&&this.myPalName.parent&&this.myPalName.removeCollectTween()},t.showMyBlueVip=function(){0!=Bt.isQQyxdt()&&this.myPalName&&this.myPalName.parent&&this.myPalName.showBlueVip()},I(0,t,"underControl",function(){return this._underControl}),I(0,t,"lockedTarget",function(){return this._lockedTarget},function(t){this._lockedTarget=t,T.dispatch("MY_PAL_LOCAL_TARGET_CHANGE",t)}),I(1,o,"mainLockedTarget",function(){return null!=o.main?o.main.lockedTarget:0},com.scene.unit.Pal._$SET_mainLockedTarget),I(1,o,"all",function(){return o._all},com.scene.unit.Pal._$SET_all),I(1,o,"main",function(){if(null!=o._main&&o._main.id==pe.mainPalID)return o._main;for(var t=0;t<o._all.length;t++)if(o._all[t].id==pe.mainPalID)return o._main=o._all[t];return null},com.scene.unit.Pal._$SET_main),I(1,o,"mainPalState",function(){return o.main?o.main.palState:0},com.scene.unit.Pal._$SET_mainPalState),o.getOne=function(){return 0<o._pool.length?o._pool.pop():new o},o.getIns=function(t){for(var e=0;e<o._all.length;e++)if(o._all[e].id==t)return o._all[e];return null},o.autoHit=function(){Mr.isAutoHit&&1!=ua.isFamilyFightMap()?_t.addToTimer(o,o.excAutoHit):_t.removeFromTimer(o,o.excAutoHit)},o.excAutoHit=function(){if(0!=o._all.length&&0!=_e.isGaming&&0!=_e.allReady&&1!=GF.isExist){var t=o._all[o.autoIndex];if(null!=t){var e=S.now();if(1==t.isAttackBack&&900<=e-t.onAttackTime&&("stand"==t.curAct||"hurt"==t.curAct||0==t.isMoving&&"walk"==t.curAct)){t.toAttackTime=e;var i=Se.getUnit(t.lockedTarget);if(i&&3==i.status&&(i=null,t.lockedTarget=0),null==i&&(i=Te.searcEnemy(t)),null!=i)t.lockedTarget=i.id,1==Se.monsterNUM&&1==i.isBoss&&1!=t.category?t.runAndHit(i.id,!0):t.runAndHit(i.id,!1);else if(t.id!=pe.mainPalID)5<Rt.distance(t.pt,o.main.pt)&&t.runToPoint(o.main.pt,2)}(2e3<e-t.toAttackTime&&0==t.isAttackBack||2e4<e-t.onAttackTime&&Pe.isAttackAct(t.curAct))&&(t.isAttackBack=!0,t.toAttackTime=e,t.lockedTarget=0,t.normal())}++o.autoIndex>o._all.length-1&&(o.autoIndex=0)}else o.autoIndex=0},o.ATTACK_TIME=900,o.NORMAL_RUN="NORMAL_RUN",o.ATTACK_RUN="ATTACK_RUN",o._pool=[],o._all=[],o._main=null,o.autoIndex=0,o}(Mh),qS=function(t){function e(){this.btnSearch=null,this.inputSearch=null,this.btnBack=null,this.listResult=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.shop.DebugShopUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/DebugShop")},e}(),YS=function(i){function t(){this.toAttackTime=0,this.onAttackTime=0,this.isAttackBack=!0,t.__super.call(this)}w(t,"com.scene.unit.MyPet",i);var e=t.prototype;return e.reset=function(t,e){i.prototype.reset.call(this,t,e),1==e&&(this.isAttackBack=!0)},e.onArriveRunEnd=function(){this._isMoving=!1,null!=this._mas&&1==Rt.isEqual(this._mas.pt,this._masPos)&&("walk"==this.curAct&&this.play("stand",this.mas.curDir),0<WS.mainLockedTarget&&this.checkAttack())},e.checkAttack=function(){var t=S.now();if(1==this.isAttackBack&&900<=t-this.onAttackTime&&(this.toAttackTime=t,"stand"==this.curAct||"hurt"==this.curAct||0==this.isMoving&&"walk"==this.curAct)){var e=Se.getUnit(this.myPetMas.lockedTarget);if(null==e||3==e.status)return!1;if(!this._mas||5<Rt.distance(this._mas.pt,e.pt))return!1;var i=Eo.getPetFightSkill(this.id);if(0<i){var s=Ot.getPos(this._mas.pt.x,this._mas.pt.z,this._mas.curDir);return Or.ins().toPetFight(this.id,s,i,e.id),!(this.isAttackBack=!1)}}return!1},e.resetVisible=function(){this.visible=!0,this.shadow.show(),this.unitName&&this.unitName.show()},I(0,e,"myPetMas",function(){return this._mas}),I(1,t,"ins",function(){return null==t._ins&&(t._ins=new t),t._ins},com.scene.unit.Pet._$SET_ins),t._ins=null,t.ATTACK_TIME=900,t}(Fh),XS=function(t){function e(){this.txtName=null,this.inputNum=null,this.btnDown=null,this.btnUp=null,this.btnBuy=null,e.__super.call(this)}return w(e,"ui.modules.shop.DebugShopResultItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/DebugShopResultItem")},e}(),KS=function(t){function e(){this.imgGold1=null,this.imgBg=null,this.imgGold2=null,this.btnBuy=null,this.btnClose=null,this.btnAdd=null,this.btnRe=null,this.btnRe1=null,this.btnAdd1=null,this.txtName=null,this.txtTotal=null,this.txtPrice=null,this.inputNum=null,this.imgGoods=null,this.title=null,this.exchangeTitle=null,e.__super.call(this)}return w(e,"ui.modules.shop.BuyGoodsViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/BuyGoodsView")},e}(),jS=function(t){function e(){this.bg=null,this.img=null,this.imgSelect=null,e.__super.call(this)}return w(e,"ui.modules.skill.book.SkillBookItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookItem")},e}(),QS=function(t){function e(){this.bg=null,this.title=null,this.container=null,this.spView=null,this.tab=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.skill.SkillPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/SkillPanel")},e}(),zS=function(t){function e(){this.btnWear=null,this.txtLimit=null,this.imgInfo=null,this.txtNo=null,e.__super.call(this)}return w(e,"ui.modules.Title.TitleItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleItem")},e}(),$S=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.spWay=null,this.txtTip=null,this.btnCharge=null,this.btnBuy=null,this.imgGold=null,this.txtMoney=null,this.txtInput=null,this.btnU=null,this.btnD=null,e.__super.call(this)}return w(e,"ui.modules.warn.GoodsGetWayBuyPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/warn/GoodsGetWayBuyPanel")},e}(),ZS=function(t){function e(){this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.warn.GoodsGetWayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/warn/GoodsGetWayItem")},e}(),JS=function(t){function e(){this.html=null,e.__super.call(this)}return w(e,"ui.modules.warn.GoodsGetWayListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/warn/GoodsGetWayListItem")},e}(),tx=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.txtTip=null,this.btnClose2=null,this.spWay=null,this.imgTitle=null,e.__super.call(this)}return w(e,"ui.modules.warn.GoodsGetWayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/warn/GoodsGetWayPanel")},e}(),ex=function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.imgTitle=null,this.list=null,e.__super.call(this)}return w(e,"ui.modules.warn.GoodsGetWayPanel2UI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/warn/GoodsGetWayPanel2")},e}(),ix=function(t){function e(){this.imgGirl=null,this.btnCopy1=null,this.btnCopy2=null,e.__super.call(this)}return w(e,"ui.modules.welfare.honorVIP.WelfareHonorVIPFanTiViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/honorVIP/WelfareHonorVIPFanTiView")},e}(),sx=function(t){function e(){this.imgGirl=null,this.imgTxt2=null,this.btnRecharege=null,this.btnCopy=null,this.spQQNum=null,this.spNum=null,this.imgTxt3=null,this.imgTxt4=null,e.__super.call(this)}return w(e,"ui.modules.welfare.honorVIP.WelfareHonorVIPViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/honorVIP/WelfareHonorVIPView")},e}(),nx=function(t){function e(){this.btn=null,e.__super.call(this)}return w(e,"ui.modules.welfare.wanbaTopic.WelfareWanbaTopicViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/wanbaTopic/WelfareWanbaTopicView")},e}(),ox=function(t){function i(t,e){this.bgSp=null,this.comtentSp=null,this.caSP=null,this.txtSP=null,this.packItemArr=null,void(this._column=0)===t&&(t=5),void 0===e&&(e=720),i.__super.call(this),this._column=t,this.init(),this.width=680,this.height=e,this.vScrollBar.autoHide=!0,this.bgSp=new m,this.comtentSp=new m,this.comtentSp.mouseEnabled=!0,this.caSP=new m,this.txtSP=new m,this.addChild(this.bgSp),this.addChild(this.comtentSp),this.addChild(this.caSP),this.addChild(this.txtSP)}w(i,"modules.pack.packView.BasePackTile",Pt);var e=i.prototype;return e.init=function(){Xr.ins().toInfo(),this.vScrollBarSkin="com/ui/vscroll.png",this.on("click",this,this.onMouseDown)},e.onMouseDown=function(t){if(t.target instanceof modules.pack.packView.PackItem){var e=t.target,i=ur.getItem(e.goods.typeid);if(i&&i.useType%1e3==24)kr.ins.openFrameTip(e.goods);else if(i&&i.useType%1e3==25)kr.ins.openBubbleTip(e.goods);else if(i&&i.useType%1e3==32){var s=parseInt(i.img),n=nn.getAnimalVO(s);n.isLoaded?xo.goodsConversionAlert(e.goods.id,32,n.color):Ae.show(e.goods,xo.getItemToolTipType(e.goods.typeid))}else if(i&&i.useType%1e3==33){0!=_n.getStep(i.id)?xo.goodsConversionAlert(e.goods.id,33,i.color):Ae.show(e.goods,xo.getItemToolTipType(e.goods.typeid))}else if(i&&i.useType%1e3==19&&3<i.color){var o,a,l,r=pe.pals,h=parseInt(i.img),u=0;for(var c in r)(l=r[c])&&(o=oa.getFashionListDicByActID(l.pal_id))&&o.hasOwnProperty(h+"")&&u++;a=oa.getFashionTimesByTypeID(i.id),4==u&&a<0?xo.goodsConversionAlert(e.goods.id,19,i.color):Ae.show(e.goods,xo.getItemToolTipType(e.goods.typeid))}else if(i&&i.useType%1e3==8&&3==i.color){var d=parseInt(i.img);va.isHas(d)&&0==va.getTitleLimit(d)?xo.goodsConversionAlert(e.goods.id,8,i.color):Ae.show(e.goods,xo.getItemToolTipType(e.goods.typeid))}else i&&i.useType%1e3==31&&3<i.color&&Rn.getTalimanIsActiveByID(i.id)?xo.goodsConversionAlert(e.goods.id,31,i.color):i&&i.useType%1e3==38?cr.ins().toOpenWishSelectBox(e.goods.id):Ae.show(e.goods,xo.getItemToolTipType(e.goods.typeid))}},e.updateGoods=function(t){this.clearAllItem(),t&&0<t.length&&(this.packItemArr=this.packItemArr||[]),this.txtSP.removeChildren(0,this.txtSP.numChildren),this.caSP.removeChildren(0,this.caSP.numChildren),this.bgSp.removeChildren(0,this.bgSp.numChildren);for(var e=0;e<t.length;e++)this.createItem(t[e],e);this.caSP.height=this.bgSp.height=this.txtSP.height=this.comtentSp.height=168*Math.ceil(t.length/this._column)+15,this.refresh()},e.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e];i.goods=t,i.pos(e%this._column*(i.width+23)+20,168*Math.floor(e/this._column)+15),i.goodsImage.imgBG.pos(i.x,i.y),i.goodsImage.imgCa.pos(i.x+68,i.y),i.imgRp.pos(i.x+83,i.y-7),i.goodsImage.txtNum.pos(i.x,i.y+77),i.txtDesc.pos(i.x-10,i.y+109),this.txtSP.addChild(i.goodsImage.txtNum),this.txtSP.addChild(i.txtDesc),this.caSP.addChild(i.goodsImage.imgCa),this.caSP.addChild(i.imgRp),this.bgSp.addChild(i.goodsImage.imgBG),this.comtentSp.addChild(i)},e.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},i}(),ax=function(t){function e(){this.bg=null,this.btnClose2=null,this.btnClose=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.welfare.wanbaVipGift.WanbaVipHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/wanbaVipGift/WanbaVipHelpPanel")},e}(),lx=function(t){function e(){this.btn=null,e.__super.call(this)}return w(e,"ui.modules.welfare.weChat.WelfareWeChatGiftView1UI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/weChat/WelfareWeChatGiftView1")},e}(),rx=function(t){function e(){this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.welfare.weChat.WelfareWeChatGiftViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/weChat/WelfareWeChatGiftView")},e}(),hx=function(t){function e(){e.__super.call(this,105,110,!0,!0,!0,!0,135)}return w(e,"modules.pet.embattle.ClearRwardItem",Ah),e}(),ux=(function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.imgBg=null,this.imgTitle=null,this.btnGet=null,this.imgRp=null,this.txtNow=null,e.__super.call(this)}w(e,"ui.modules.activity.ActLoginFunViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/ActLoginFunView")}}(),function(t){function e(){this.txtInfo=null,e.__super.call(this)}w(e,"ui.modules.activity.bagua.BaguaLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bagua/BaguaLogItem")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.list=null,this.textInfo=null,this.btnOne=null,this.btnTen=null,this.box=null,e.__super.call(this)}w(e,"ui.modules.activity.bagua.BaguaRewardViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bagua/BaguaRewardView")}}(),function(t){function e(){this.spBagua=null,this.imgBg=null,this.imgTurn=null,this.img0=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.img6=null,this.img7=null,this.btnGet=null,this.getRP=null,this.btnOne=null,this.btnTen=null,this.rewardCDTxt=null,this.txtLeftTime=null,this.imgTip=null,this.spPro=null,this.imgBar=null,this.imgSub3=null,this.imgSub2=null,this.imgSub1=null,this.resTimes0=null,this.resTimes1=null,this.resTimes2=null,this.resSp0=null,this.resSp1=null,this.resSp2=null,this.imgTxt=null,this.panlis=null,this.imgShare=null,this.spChange=null,this.list=null,this.imgPost=null,this.btnSuit=null,this.redTip=null,this.tab=null,this.openRP=null,this.exchangeRP=null,e.__super.call(this)}w(e,"ui.modules.activity.bagua.BaguaViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bagua/BaguaView")}}(),function(t){function e(){this.img=null,this.btn=null,this.imgCon=null,this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.activity.BaguaShareViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/BaguaShareView")},e}()),cx=(function(t){function e(){this.spreward=null,this.btnget=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.activity.bannerQQ.BannerQQItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bannerQQ/BannerQQItem")}}(),function(t){function e(){this.btnClose=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.activity.bannerQQ.BannerQQViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bannerQQ/BannerQQView")}}(),function(t){function e(){this.imgHead=null,this.txtName=null,this.txtGoodsName=null,this.btnCut=null,e.__super.call(this)}w(e,"ui.modules.activity.bargain.BargainFriendCutItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bargain/BargainFriendCutItem")}}(),function(t){function e(){this.btnClose=null,this.box=null,this.btnBack=null,this.txtFree=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.activity.bargain.BargainFriendCutViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bargain/BargainFriendCutView")}}(),function(t){function e(){this.imgTitle=null,this.txtTitle=null,this.btnClose=null,this.btnBack=null,this.spFriend=null,this.btn=null,this.list=null,this.spShow=null,this.txtDes=null,this.btnGo=null,e.__super.call(this)}w(e,"ui.modules.activity.bargain.BargainInviteViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bargain/BargainInviteView")}}(),function(t){function e(){this.sp1=null,this.txtGoods=null,this.ownBg=null,this.sp2=null,this.txtOrginal=null,this.txtNow=null,this.txtFinal=null,this.btnCut=null,this.txtFinish=null,this.btnBuy=null,this.txtLimit=null,this.txtLink=null,e.__super.call(this)}w(e,"ui.modules.activity.bargain.BargainItemViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bargain/BargainItemView")}}(),function(t){function e(){this.boxCenter=null,this.limitTime=null,this.txtDes=null,this.txtFriend=null,this.txtOwn=null,this.btnBuy=null,this.btnRight=null,this.btnLeft=null,this.closeBtn=null,e.__super.call(this)}w(e,"ui.modules.activity.bargain.BargainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/bargain/BargainView")}}(),function(t){function e(){this.box=null,this.spPower=null,this.txtTimeTip=null,this.txtPriceCur=null,this.txtPriceOriginal=null,this.btnBuy=null,this.imgGoto=null,this.imgLabel=null,this.spHeart=null,this.imgName=null,this.spEffect=null,this.btnClose1=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.activity.beastsBuy.BeastsBuyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/beastsBuy/BeastsBuyView")}}(),function(t){function e(){this.imgBg=null,this.imgIcon=null,this.txtTip=null,this.maskImg=null,this.rpImg=null,e.__super.call(this)}w(e,"ui.modules.activity.constellation.ConstellationItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/constellation/ConstellationItem")}}(),function(t){function e(){this.list=null,this.rightBtn=null,this.leftBtn=null,this.imgBg=null,this.role=null,this.tipMask=null,this.txtTip=null,this.maleBtn=null,this.femaleBtn=null,this.wishBtn=null,this.txtCost=null,this.callBtn=null,this.txtRate=null,this.txtLink=null,this.nameImg=null,this.nameTxt=null,this.spShpw=null,this.proBar=null,this.wishValue=null,this.limitTime=null,this.help=null,e.__super.call(this)}w(e,"ui.modules.activity.constellation.ConstellationViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/constellation/ConstellationView")}}(),function(t){function e(){this.btnGet=null,this.htmlCharge=null,this.htmlDes=null,this.imgRP=null,this.imgBack=null,e.__super.call(this)}w(e,"ui.modules.activity.consumeBack.ConsumeBackItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/consumeBack/ConsumeBackItem")}}(),function(t){function e(){this.imgBg=null,this.imgTip=null,this.list=null,this.htmlDes1=null,this.htmlDes2=null,this.htmlTime=null,e.__super.call(this)}w(e,"ui.modules.activity.consumeBack.ConsumeBackViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/consumeBack/ConsumeBackView")}}(),function(t){function e(){this.titleBg=null,this.bg=null,this.imgHelp=null,this.txtLeftTime=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.activity.copyDropReward.ActCopyDropRewardUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/copyDropReward/ActCopyDropReward")}}(),function(t){function e(){this.imgRank=null,this.txtRank=null,this.txtName=null,this.txtCustom=null,this.needNum=null,this.txtLink=null,this.star=null,e.__super.call(this)}w(e,"ui.modules.activity.customStand.CustomStandItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/customStand/CustomStandItem")}}(),function(t){function e(){this.listRank=null,this.closeBtn=null,this.myRank=null,this.descNum=null,this.linkTxt=null,this.getBtn=null,this.rewardSp=null,this.linkTxt2=null,this.linkImg=null,this.tab1=null,this.tab2=null,this.tab3=null,this.descTxt1=null,this.descTxt2=null,this.descTxt3=null,this.descTxt=null,this.limitTime=null,this.num1=null,this.num2=null,this.num3=null,this.num4=null,this.help=null,this.rewardSp2=null,this.tipTxt=null,this.closeBtn2=null,this.redPoint=null,e.__super.call(this)}w(e,"ui.modules.activity.customStand.CustomStandViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/customStand/CustomStandView")}}(),function(t){function e(){this.rankTxt=null,this.nameTxt=null,this.itemSp=null,e.__super.call(this)}w(e,"ui.modules.activity.customStand.RankDetailItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/customStand/RankDetailItem")}}(),function(t){function e(){this.closeBtn=null,this.rankList=null,e.__super.call(this)}w(e,"ui.modules.activity.customStand.RankDetailsViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/customStand/RankDetailsView")}}(),function(t){function e(){this.discountImg=null,this.btnBuy=null,this.rpImg=null,this.buyItem=null,this.titleImg=null,this.txt1=null,this.hasBuy=null,e.__super.call(this)}w(e,"ui.modules.activity.dayLimitBuy.DayLimitBuyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/dayLimitBuy/DayLimitBuyItem")}}(),function(t){function e(){this.btnClose2=null,this.title=null,this.btnClose=null,this.itemList=null,this.timeTxt=null,this.txt1=null,this.txt2=null,this.tip2=null,this.tip1=null,this.explainTxt=null,e.__super.call(this)}w(e,"ui.modules.activity.dayLimitBuy.DayLimitBuyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/dayLimitBuy/DayLimitBuyView")}}(),function(t){function e(){this.txtItem=null,this.txtPro=null,e.__super.call(this)}w(e,"ui.modules.activity.dial.DialDisplayItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/dial/DialDisplayItem")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.titleText=null,this.probText=null,this.proRewardText=null,this.protxt=null,this.proList=null,this.recordBG=null,this.recordList=null,e.__super.call(this)}w(e,"ui.modules.activity.dial.DialDisplayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/dial/DialDisplayPanel")}}(),function(t){function e(){this.box=null,this.dial=null,this.btnStart=null,this.imgRec=null,this.imgPro=null,this.txtTimes=null,this.txtGold=null,this.htmlTxt=null,this.btn=null,e.__super.call(this)}w(e,"ui.modules.activity.dial.DialPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/dial/DialPanel")}}(),function(t){function e(){this.imgKuang=null,this.imgTitle=null,this.imgSelectedEffect=null,this.sp1=null,this.imgName1=null,this.imgIcon1=null,this.sp2=null,this.imgName2=null,this.imgIcon2=null,this.sp3=null,this.imgName3=null,this.imgIcon3=null,this.sp4=null,this.imgName4=null,this.imgIcon4=null,this.imgItemBg=null,this.imgBot=null,this.imgTipBg=null,this.imgSelected=null,this.spGoodsItem=null,this.btnBuy=null,this.txtTip=null,this.specialTip=null,this.imgRedPoint=null,this.redtip=null,e.__super.call(this)}w(e,"ui.modules.activity.discounts.ActDiscountsViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/discounts/ActDiscountsView")}}(),function(t){function e(){this.titleBg=null,this.imgTip=null,this.txtLeftTime=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.activity.display.ActDisplayViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/display/ActDisplayView")}}(),function(t){function e(){this.imgTitle=null,this.spGoods=null,this.btnGet=null,this.imgRedPoint=null,e.__super.call(this)}w(e,"ui.modules.activity.familyBattle.ActFamilyBattleItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/familyBattle/ActFamilyBattleItem")}}(),function(t){function e(){this.pan=null,e.__super.call(this)}w(e,"ui.modules.activity.familyBattle.ActFamilyBattlePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/familyBattle/ActFamilyBattlePanel")}}(),function(t){function e(){this.getImg=null,this.nameImg=null,this.nameImg2=null,this.canGetImg=null,this.goidImg=null,this.getDesc=null,this.itemSp=null,this.item1=null,this.itemTxt1=null,this.item2=null,this.itemTxt2=null,this.powerImg=null,this.timeTxt=null,this.getBtn=null,this.sp=null,this.closeBtn=null,this.redSp=null,e.__super.call(this)}w(e,"ui.modules.activity.firstDayCharge.FirstDayChargeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/firstDayCharge/FirstDayChargeView")}}(),function(t){function e(){this.txtName=null,this.txtOldPrice=null,this.imgOld=null,this.labelNew=null,this.txtNewPrice=null,this.imgNew=null,this.toBuy=null,this.tipBg=null,this.imgDiscount=null,e.__super.call(this)}w(e,"ui.modules.activity.freeMall.FreeMallItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/freeMall/FreeMallItem")}}(),function(t){function e(){this.toClose=null,this.tohelp=null,this.txtOrderDes1=null,this.txtOrderDes2=null,this.txtOrderID=null,this.txtTitle=null,this.txtNum=null,this.toOrder=null,this.btnGet=null,this.goodList=null,this.txtTime=null,this.tap1=null,this.tap2=null,this.tap3=null,this.guideImg=null,this.toClose2=null,e.__super.call(this)}w(e,"ui.modules.activity.freeMall.FreeMallPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/freeMall/FreeMallPanel")}}(),function(t){function e(){this.orderCode=null,this.orderInfo1=null,this.orderInfo2=null,this.tipFree=null,e.__super.call(this)}w(e,"ui.modules.activity.freeMall.PlayerOrderItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/freeMall/PlayerOrderItem")}}(),function(t){function e(){this.toClose=null,this.toClose2=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.activity.freeMall.PlayerOrderViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/freeMall/PlayerOrderView")}}(),function(t){function e(){this.titleBg=null,this.imgTip=null,this.timeTxt=null,this.actDesc=null,this.midBgImg=null,this.vsImg=null,this.titleImg=null,this.chioceSp=null,this.chioceDescTxt=null,this.btnSweet=null,this.btnsalty=null,this.redpointSweet=null,this.redpointSalty=null,this.rewardShowSp=null,this.getZhongzi=null,this.getZongziTxt=null,this.buyZongziTxt=null,this.goldTxt=null,this.zongziImg=null,this.redPoint=null,this.winOrLoseSp=null,this.sweetPopo=null,this.sweetSayTxt=null,this.saltyPopo=null,this.saltySayTxt=null,this.sweetImg=null,this.saltyImg=null,this.sweetHotTxt=null,this.saltytHotTxt=null,this.sweetBar=null,this.saltyBar=null,this.saltyWinImg=null,this.sweetWinImg=null,this.fansImg=null,e.__super.call(this)}w(e,"ui.modules.activity.groupPk.ActGroupPkViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/groupPk/ActGroupPkView")}}(),function(t){function e(){this.btnGet=null,this.imgRp=null,this.txt=null,this.num=null,e.__super.call(this)}w(e,"ui.modules.activity.invest.InvestItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/invest/InvestItem")}}(),function(t){function e(){this.imgTip=null,this.txtLeftTime=null,this.imgGift=null,this.btnGet1=null,this.pan=null,this.tab=null,this.btnInv=null,this.imgRp=null,this.num1=null,this.num2=null,this.num3=null,this.num4=null,e.__super.call(this)}w(e,"ui.modules.activity.invest.InvestViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/invest/InvestView")}}(),function(t){function e(){this.title=null,this.btnGo=null,this.desc=null,this.desc2=null,this.txt=null,e.__super.call(this)}w(e,"ui.modules.activity.jinliDFS.JinLiDFSItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/jinliDFS/JinLiDFSItem")}}(),function(t){function e(){this.bar=null,this.img_20=null,this.img_40=null,this.img_60=null,this.img_80=null,this.img_100=null,this.tab=null,this.list=null,this.btnClose=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.activity.jinliDFS.JinLiDFSViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/jinliDFS/JinLiDFSView")}}(),function(t){function e(){this.closeBtn=null,this.limitTime=null,this.help=null,this.descTxt=null,this.goldNum=null,this.killNum=null,this.buyBtn1=null,this.tree=null,this.buyBtn=null,this.bar=null,this.rpImg=null,this.rpImg1=null,this.closeBtn1=null,e.__super.call(this)}w(e,"ui.modules.activity.jubao.JubaoViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/jubao/JubaoView")}}(),function(t){function e(){this.imgTitle=null,this.spGoods=null,this.imgMonthCard=null,this.btnGet=null,this.txtNum=null,this.spMonthCardGoods=null,this.imgKuang=null,this.imgRedPoint=null,e.__super.call(this)}w(e,"ui.modules.activity.levelGift.ActLevelGiftItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/levelGift/ActLevelGiftItem")}}(),function(t){function e(){this.list=null,e.__super.call(this)}w(e,"ui.modules.activity.levelGift.ActLevelGiftUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/levelGift/ActLevelGift")}}(),function(t){function e(){this.imgBg=null,this.btnBuy=null,this.imgConsumeType=null,this.txtGold=null,this.txtTimes=null,this.imgRedPoint=null,this.imgDesc=null,this.imgVip=null,this.imgVipNum=null,this.tag=null,e.__super.call(this)}w(e,"ui.modules.activity.limit.ActLimitItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/limit/ActLimitItem")}}(),function(t){function e(){this.imgKuang=null,this.pnl=null,this.redTip=null,e.__super.call(this)}w(e,"ui.modules.activity.limit.ActLimitViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/limit/ActLimitView")}}(),function(t){function e(){this.imgBg=null,this.imgTxtBg=null,this.btn=null,this.imgRp=null,this.spGoods=null,this.txtLastTime=null,this.imgMin=null,this.imgHas=null,e.__super.call(this)}w(e,"ui.modules.activity.online.ActOnlineItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/online/ActOnlineItem")}}(),function(t){function e(){this.imgBg=null,this.list=null,this.imgTip=null,this.txtLeftTime=null,this.imgBannerTip=null,this.btnGo=null,e.__super.call(this)}w(e,"ui.modules.activity.online.ActOnlineViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/online/ActOnlineView")}}(),function(t){function e(){this.nameTxt=null,this.tipImg=null,this.distxt=null,this.discount=null,this.hasNum=null,this.canbuyNum=null,this.priPrice=null,this.prePrice=null,this.buyBtn=null,this.Rp=null,this.itemSp=null,e.__super.call(this)}w(e,"ui.modules.activity.serverLimitBuy.ServerLimitBuyItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/serverLimitBuy/ServerLimitBuyItem")}}(),function(t){function e(){this.limitTime=null,this.helpBtn=null,this.rewardSp=null,this.getReward=null,this.rpSet=null,this.rewardRp=null,this.pan=null,e.__super.call(this)}w(e,"ui.modules.activity.serverLimitBuy.ServerLimitBuyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/serverLimitBuy/ServerLimitBuyView")}}(),function(t){function e(){this.btnClose=null,this.txtImg1=null,this.txtImg2=null,this.txtImg3=null,this.txtImg4=null,this.imgItem1=null,this.imgItem2=null,this.imgItem3=null,this.imgItem4=null,this.btnBuy=null,this.lbOldPrice=null,this.lbNowPrice=null,this.timeLimit=null,this.spPowerUp=null,this.spBeast=null,this.btnMing=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.activity.strBeastLimit.StrBeastLimitViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/strBeastLimit/StrBeastLimitView")}}(),function(t){function e(){this.btnGoto=null,this.btnClose=null,this.timeLimit=null,this.spSuit1=null,this.spSuit2=null,this.spSuit3=null,this.spPower=null,this.spImg1=null,this.spImg2=null,this.spImg3=null,this.txtImg1=null,this.txtImg2=null,this.txtImg3=null,this.hasItem1=null,this.hasItem2=null,this.hasItem3=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.activity.suitShow.SuitShowViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/suitShow/SuitShowView")}}(),function(t){function e(){this.imgIcon=null,this.imgEff=null,e.__super.call(this)}w(e,"ui.modules.activity.wish.ActWishRewardItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/wish/ActWishRewardItem")}}(),function(t){function e(){this.imgBg=null,this.img=null,this.btn=null,this.imgCon=null,this.btnClose=null,this.txtTip=null,this.txtTip2=null,e.__super.call(this)}return w(e,"ui.modules.activity.wish.ActWishShareViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/wish/ActWishShareView")},e}()),dx=(function(t){function e(){this.spChange=null,this.list=null,this.separator=null,this.reward=null,this.need=null,this.spWish=null,this.imgBg=null,this.imgHelp=null,this.spScheduleSkin=null,this.imgBar=null,this.spGoods=null,this.resTimes0=null,this.resTimes1=null,this.resTimes2=null,this.resTimes3=null,this.resTimes4=null,this.imgRedPoint0=null,this.imgRedPoint1=null,this.imgRedPoint2=null,this.imgRedPoint3=null,this.imgRedPoint4=null,this.imgHas0=null,this.imgHas1=null,this.imgHas2=null,this.imgHas3=null,this.imgHas4=null,this.spScheduleCom=null,this.imgReward1=null,this.reward1Had=null,this.imgReward2=null,this.reward2Had=null,this.imgReward3=null,this.reward3Had=null,this.imgReward4=null,this.reward4Had=null,this.imgRP1=null,this.imgRP2=null,this.imgRP3=null,this.imgRP4=null,this.resTime0=null,this.resTime1=null,this.resTime2=null,this.resTime3=null,this.imgShare=null,this.imgShareRP=null,this.imgCost1=null,this.imgCost2=null,this.imgNum=null,this.txtNum=null,this.btnOne=null,this.btnTen=null,this.spShow=null,this.imgShowBg1=null,this.imgShowBg2=null,this.imgShowBg3=null,this.imgShowBg4=null,this.imgShowBg5=null,this.imgShowBg6=null,this.effSp=null,this.spReward=null,this.imgBig=null,this.btnKnow=null,this.btnAdd=null,this.btnCharge=null,this.txtDesc=null,this.txtCost=null,this.txtTotal=null,this.txtLeftTime=null,this.tab=null,this.wishRp=null,this.changeRp=null,this.imgTip=null,e.__super.call(this)}w(e,"ui.modules.activity.wish.ActWishViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/wish/ActWishView")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.list=null,this.tab=null,e.__super.call(this)}w(e,"ui.modules.activity.yunyou.YunyouRecordViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/yunyou/YunyouRecordView")}}(),function(t){function e(){this.txtLink=null,this.bigReward=null,this.help=null,this.limitTime=null,this.bigName=null,this.reward=null,this.close=null,this.bar=null,this.numTxt=null,this.btnOne=null,this.txtLimitBuy=null,this.btnTen=null,e.__super.call(this)}w(e,"ui.modules.activity.yunyou.YunyouViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/yunyou/YunyouView")}}(),function(t){function e(){this.bg=null,this.imgTitle=null,this.btnClose=null,this.box=null,this.spFir=null,this.tab=null,this.btnBack=null,e.__super.call(this)}w(e,"ui.modules.athletics.AthleticsPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/AthleticsPanel")}}(),function(t){function e(){this.imgHead=null,this.txtName=null,this.txtLv=null,this.btnEnc=null,this.txtExp=null,this.txtCopper=null,this.txtRaiqi=null,e.__super.call(this)}w(e,"ui.modules.athletics.encounter.EncounterItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/encounter/EncounterItem")}}(),function(t){function e(){this.txtName=null,this.txtTime=null,this.imgRes=null,e.__super.call(this)}w(e,"ui.modules.athletics.encounter.EncounterLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/encounter/EncounterLogItem")}}(),function(t){function e(){this.btnClose=null,this.plitem=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.athletics.encounter.EncounterLogPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/encounter/EncounterLogPanel")}}(),function(t){function e(){this.txtLook=null,this.txtRec=null,this.txtCopper=null,this.txtReiki=null,this.txtScore=null,this.txtRank=null,this.spItem=null,this.panItem=null,e.__super.call(this)}w(e,"ui.modules.athletics.encounter.EncounterMainViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/encounter/EncounterMainView")}}(),function(t){function e(){this.btnSear=null,this.txtTime=null,e.__super.call(this)}w(e,"ui.modules.athletics.encounter.EncounterWaitItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/encounter/EncounterWaitItem")}}(),function(t){function e(){this.pan=null,this.txtRank=null,this.btnClose=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PerSportsRankViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PerSportsRankView")}}(),function(t){function e(){this.txtName=null,this.btnChange=null,this.sp1=null,this.img1=null,this.txt1=null,this.sp2=null,this.img2=null,this.txt2=null,this.imgNon=null,this.txtTip=null,this.txtMoney=null,this.imgGodCoin=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsChangeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsChangeItem")}}(),function(t){function e(){this._checkBtn=null,this._leftIconImg=null,this._rightIconImg=null,this._winImg=null,this._leftNameTxt=null,this._rightNameTxt=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsGlobalLogItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsGlobalLogItem")}}(),function(t){function e(){this.imgHead=null,this.txtR=null,this.txtP=null,this.txtRank=null,this.txtName=null,this.txtPow=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsItem")}}(),function(t){function e(){this.imgHead=null,this.txtName=null,this.txtState=null,this.txtRank=null,this.txtTime=null,this.imgState=null,this.imgRank=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsLogItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsLogItem")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.pan=null,this.btnMyRecord=null,this.btnGlobalReport=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsLogViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsLogView")}}(),function(t){function e(){this.txtRank=null,this.txtName=null,this.txtPow=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsRankItem")}}(),function(t){function e(){this.txt1=null,this.txt2=null,this.txtRank=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsRuleItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsRuleItem")}}(),function(t){function e(){this.pan=null,this.btnClose=null,this.btn_Close2=null,this.txtRule=null,e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsRuleViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsRuleView")}}(),function(t){function e(){e.__super.call(this)}w(e,"ui.modules.athletics.petSports.PetSportsRWViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/petSports/PetSportsRWView")}}(),function(t){function e(){this.imgLeftBg=null,this.imgRightBg=null,this.imgVS=null,this.imgMyDivision=null,this.imgMyNumBg=null,this.imgMyNum=null,this.imgTargetDivision=null,this.imgTargetNumBg=null,this.imgTargetNum=null,this.spIng=null,this.imgDot1=null,this.imgDot2=null,this.imgDot3=null,this.imgMatch=null,this.imgMyHead=null,this.imgTargetHead=null,this.txtMyPower=null,this.txtMyName=null,this.txtMyServer=null,this.txtTargetPower=null,this.txtTargetName=null,this.txtTargetServer=null,this.txtEndTime=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingMatchPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingMatchPanel")}}(),function(t){function e(){this.txtNum=null,this.txtName=null,this.txtDivision=null,this.txtWin=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingRankItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.tab=null,this.imageHead1=null,this.txtName1=null,this.txtDivision1=null,this.txtWin1=null,this.xuwei1=null,this.imageHead2=null,this.txtName2=null,this.txtDivision2=null,this.txtWin2=null,this.xuwei2=null,this.imageHead3=null,this.txtName3=null,this.txtDivision3=null,this.txtWin3=null,this.xuwei3=null,this.list=null,this.txtMyRank=null,this.txtMyWin=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingRankPanel")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.list=null,this.img=null,this.btnGet=null,this.txtDivision=null,this.txtTimeDesc=null,this.reward=null,this.btnGetStr=null,this.txt=null,this.sp=null,this.spPower=null,this.tab=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingSettlementPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingSettlementPanel")}}(),function(t){function e(){this.imgReward=null,this.imgRank=null,this.imgIcon=null,this.spStar=null,this.btnMatch=null,this.txtDivision=null,this.txtWin=null,this.txtRealWin=null,this.spResidue=null,this.txtResidue=null,this.spTime=null,this.txtTime=null,this.txtBuy=null,this.imgStage=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingView")}}(),function(t){function e(){this.txtRank=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyAwardItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyAwardItem")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyAwardPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyAwardPanel")}}(),function(t){function e(){this.bossBar0=null,this.bossBar1=null,this.bmpHead=null,this.txtName=null,this.txtLv=null,this.numTxt=null,this.txtBest=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyBloodUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyBlood")}}(),function(t){function e(){this.txtNum=null,this.txtName=null,this.txtDmg=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyRankItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.tab=null,this.imageHead1=null,this.txtName1=null,this.txtDivision1=null,this.txtWin1=null,this.xuwei1=null,this.imageHead2=null,this.txtName2=null,this.txtDivision2=null,this.txtWin2=null,this.xuwei2=null,this.imageHead3=null,this.txtName3=null,this.txtDivision3=null,this.txtWin3=null,this.xuwei3=null,this.list=null,this.txtMyRank=null,this.txtTime=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyRankPanel")}}(),function(t){function e(){this.txtTime=null,this.sp=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyTopViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyTopView")}}(),function(t){function e(){this.btn=null,this.awardSp=null,this.btnAward=null,this.imgRolePart=null,this.imgRole=null,this.txtRole=null,this.txtDmg=null,this.imgCrown=null,this.btnRank=null,this.txtCost=null,this.imgGold=null,this.txtGold=null,e.__super.call(this)}w(e,"ui.modules.commonCopy.copy.MonsterCopyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/MonsterCopyView")}}(),function(t){function e(){this._img0=null,this._img1=null,this._img2=null,this._img3=null,this._selectImg=null,this.txtPower=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyFlowerSkillInteractiveViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/loveCopy/LoveCopyFlowerSkillInteractiveView")},e}()),px=(function(t){function e(){this.imgNum=null,this.spcEffTxt=null,this.effTxt=null,this.upLevelTxt=null,e.__super.call(this)}w(e,"ui.modules.Equip.SpequipPotentialSubItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/SpequipPotentialSubItem")}}(),function(t){function e(){this.btnClose=null,this.btnRe=null,this.spPower=null,this.txtCa=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.fashion.FashionBeautyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/FashionBeautyView")}}(),function(t){function e(){this.container=null,this.txtBase=null,this.txtBase1=null,this.spPow=null,this.txtBea=null,this.spRole=null,this.btnLeft=null,this.btnRight=null,this.htmlName=null,e.__super.call(this)}w(e,"ui.modules.fashion.FashionGetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/FashionGetView")}}(),function(t){function e(){this.btnBack=null,this.input1=null,this.input2=null,this.input3=null,this.input4=null,this.input5=null,this.input7=null,this.input6=null,this.input8=null,this.txtVoca=null,this.txt1=null,this.txt2=null,this.txt3=null,this.txt4=null,this.txt5=null,this.txt7=null,this.txt6=null,this.txt8=null,this.spPow=null,this.btnL=null,this.btnR=null,this.tab=null,e.__super.call(this)}w(e,"ui.modules.fashion.RoleFashionAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/RoleFashionAttrView")}}(),function(t){function e(){this.spItem=null,this.btnClose=null,this.imgSel=null,this.txtNowtime=null,this.txtNextTime=null,this.btnY=null,this.btnN=null,e.__super.call(this)}w(e,"ui.modules.fashion.RoleFashionNeedViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/RoleFashionNeedView")}}(),function(t){function e(){this.bg=null,this.imgTitle=null,this.box=null,this.btnClose2=null,this.tab=null,this.fashionShowBox=null,this.spRole=null,this.btnTotal=null,this.btnDown=null,this.inputSearch=null,this.panel=null,this.btnAct=null,this.imgRp=null,this.spTip=null,this.txtTipAttr=null,this.txtName=null,this.txtStarNum=null,this.txtpow=null,this.txtAttrNext=null,this.spStar=null,this.txtNeed1=null,this.txtNeed=null,this.txtBeaAttr=null,this.txtBeaNext=null,this.spPow=null,this.imgBea=null,this.txtBea=null,this.btnSearch=null,this.suitBox=null,this.suitName=null,this.actSuitBtn=null,this.suitList=null,this.suitEffTxt=null,this.suitShowBg=null,this.suitLeft=null,this.suitRight=null,this.suitDown=null,this.suitTop=null,this.imgAct=null,this.redPoint=null,this.effText1=null,this.effText2=null,this.effText3=null,this.effText4=null,this.effText5=null,this.effText6=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.fashion.RoleFashionPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/RoleFashionPanel")}}(),function(t){function e(){this.suitName=null,this.imgSel=null,this.gouImg=null,this.redPoint=null,e.__super.call(this)}w(e,"ui.modules.fashion.suitInfoItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/suitInfoItem")}}(),function(t){function e(){this.txtTar=null,this.btnLink=null,this.imgGet=null,e.__super.call(this)}w(e,"ui.modules.fashion.TarItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashion/TarItem")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.btnNo=null,this.btnYes=null,this.spRole=null,this.imgBg1=null,this.imgBg2=null,this.img1=null,this.img2=null,this.txt1=null,this.txt2=null,e.__super.call(this)}w(e,"ui.modules.fashionTar.FashionTarSecViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashionTar/FashionTarSecView")}}(),function(t){function e(){this.bg=null,this.box=null,this.btnClose2=null,this.spRole=null,this.imgLeft=null,this.btnLeft=null,this.imgRight=null,this.btnRight=null,this.btnAct=null,this.imgGoods=null,this.txtNum=null,this.imgRp=null,this.txtMax=null,this.spNotMax=null,this.txtNeed=null,this.btnGet=null,this.btnClose=null,this.spMask=null,this.spTop=null,this.spStep1=null,this.imgArr1=null,this.imgQuan1=null,this.spStep2=null,this.imgQuan2=null,this.imgQuan3=null,this.imgArr2=null,this.imgArr3=null,this.imgArr4=null,e.__super.call(this)}w(e,"ui.modules.fashionTar.FashionTarViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fashionTar/FashionTarView")}}(),function(t){function e(){this.btnClose=null,this.btnRe=null,e.__super.call(this)}w(e,"ui.modules.footPrint.FootPrintBeautyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/FootPrintBeautyView")}}(),function(t){function e(){this.list=null,this.inputSearch=null,this.btnSearch=null,this.tab=null,this.curStage=null,this.nxtStage=null,this.attr1=null,this.attr2=null,this.btn=null,this.txtCost=null,this.imgFull=null,e.__super.call(this)}w(e,"ui.modules.footPrint.FootPrintChangeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/FootPrintChangeView")}}(),function(t){function e(){this.sp=null,this.bg=null,this.icon=null,this.txtName=null,this.desc=null,this.imgRp=null,e.__super.call(this)}w(e,"ui.modules.footPrint.FootPrintItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/FootPrintItem")}}(),function(t){function e(){this.btnClose=null,this.sp=null,this.tab=null,this.btnBack=null,this.imgTitle=null,e.__super.call(this)}w(e,"ui.modules.footPrint.FootPrintPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/FootPrintPanel")}}(),function(t){function e(){this.list=null,this.tab=null,this.inputSearch=null,this.btnSearch=null,this.star0=null,this.star1=null,this.star2=null,this.star3=null,this.star4=null,this.star5=null,this.star6=null,this.star7=null,this.star8=null,this.star9=null,this.txtDesc=null,this.btnP=null,this.txtAttr=null,this.btnS=null,this.txtCost=null,this.txtLink=null,e.__super.call(this)}w(e,"ui.modules.footPrint.FootPrintPurifyViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/FootPrintPurifyView")}}(),function(t){function e(){this.btnClose=null,this.box=null,this.btn1=null,this.btn2=null,this.btn3=null,this.btn4=null,this.btn5=null,this.btnBack=null,e.__super.call(this)}w(e,"ui.modules.footPrint.SuitPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/footPrint/SuitPanel")}}(),function(t){function e(){this.imgBoss=null,this.imgAthletics=null,this.imgCopy=null,this.imgExercise=null,this.imgFamily=null,this.imgPlays=null,this.imgPal=null,this.palTip=null,this.imgCross=null,e.__super.call(this)}w(e,"ui.modules.navigation.FunctionBarUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/navigation/FunctionBar")}}(),function(t){function e(){this.txtFam=null,this.txtRole=null,e.__super.call(this)}return w(e,"ui.modules.PetBattlerResItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/PetBattlerResItem")},e}()),mx=(function(t){function e(){this.txtLv=null,this.imgArrow=null,this.attrCur=null,this.attrNext=null,this.btnUp=null,this.imgGold=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveBlessViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveBlessView")}}(),function(t){function e(){this.imgBg=null,this.txtName=null,this.txtDes=null,this.cBox=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveChooseItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveChooseItem")}}(),function(t){function e(){this.panel=null,this.btnChoose=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveDragonChoosePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveDragonChoosePanel")}}(),function(t){function e(){this.imgBg=null,this.imgDragon=null,this.txtName=null,this.txtDes=null,this.txtTime=null,this.txtReward=null,this.imgSelected=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveDragonItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveDragonItem")}}(),function(t){function e(){this.bg=null,this.txtTitle=null,this.list=null,this.btnChoose=null,this.btnClose=null,this.btnClose2=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveItemChoosePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveItemChoosePanel")}}(),function(t){function e(){this.bg=null,this.txtTitle=null,this.des=null,this.btnOpen=null,this.txtDes=null,this.txtItem1=null,this.imgItem1=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveOpenPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveOpenPanel")}}(),function(t){function e(){this.bg=null,this.spView=null,this.tab=null,this.txtTitle=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCavePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCavePanel")}}(),function(t){function e(){this.bg=null,this.txtTitle=null,this.panel=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveSacriBookPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveSacriBookPanel")}}(),function(t){function e(){this.bmpDefault=null,this.txtName=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveSacrificeItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveSacrificeItem")}}(),function(t){function e(){this.imgTitle=null,this.txtLv=null,this.txtCurr=null,this.txtNext=null,this.txtCon=null,this.btnUp=null,this.imgClock=null,this.imgBar=null,this.txtTimeDes=null,this.btnSacri=null,this.imgBook=null,this.imgGold=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.plays.city.PlaysCityCaveSacrificeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/city/PlaysCityCaveSacrificeView")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.panel=null,e.__super.call(this)}w(e,"ui.modules.rank.RankAwardDisplayPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankAwardDisplayPanel")}}(),function(t){function e(){this.imgRank=null,this.imgVip=null,this.imgVipInfo=null,this.txtExtra=null,this.txtRanklv=null,this.txtRank=null,this.txtNull=null,e.__super.call(this)}w(e,"ui.modules.rank.RankListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankListItem")}}(),function(t){function e(){this.bg=null,this.container=null,this.spView=null,this.tab=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.rank.RankPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankPanel")}}(),function(t){function e(){this.imgRank=null,this.txtExtra=null,this.txtRanklv=null,this.txtRank=null,this.txtNull=null,this.txtName=null,e.__super.call(this)}w(e,"ui.modules.rank.RankPetListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankPetListItem")}}(),function(t){function e(){this.imgBg=null,this.firstPart=null,this.imgRoleBg=null,this.imgRankLv=null,this.txtExtra=null,this.txtRankLv=null,this.txtNull=null,this.txtName=null,this.btnAdore=null,this.spExtraClick=null,this.txtMy=null,this.txtTip=null,this.txtShare=null,this.list=null,this.tab=null,this.imgRankAward=null,e.__super.call(this)}w(e,"ui.modules.rank.RankPetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankPetView")}}(),function(t){function e(){this.imgBg=null,this.firstPart=null,this.imgRoleBg=null,this.imgRankLv=null,this.imgVip=null,this.btnAdore=null,this.imgVipInfo=null,this.txtExtra=null,this.txtRankLv=null,this.txtNull=null,this.spExtraClick=null,this.txtMy=null,this.txtTip=null,this.txtShare=null,this.list=null,this.tab=null,this.txtBg=null,this.resetText=null,this.imgRankAward=null,e.__super.call(this)}w(e,"ui.modules.rank.RankRoleViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/RankRoleView")}}(),function(t){function e(){this.txtNum=null,this.txtName=null,this.txtPay=null,e.__super.call(this)}w(e,"ui.modules.rank.StandardRechargeRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/StandardRechargeRankItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.titleText=null,this.imageHead1=null,this.txtName1=null,this.txtPay1=null,this.xuwei1=null,this.imageHead2=null,this.txtName2=null,this.txtPay2=null,this.xuwei2=null,this.imageHead3=null,this.txtName3=null,this.txtPay3=null,this.xuwei3=null,this.showText=null,this.list=null,this.txtMyRank=null,e.__super.call(this)}w(e,"ui.modules.rank.StandardRechargeRankPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/rank/StandardRechargeRankPanel")}}(),function(t){function e(){this.btnUp=null,this.imgArrow=null,this.imgSelect=null,this.spPow=null,this.imgMaterial=null,this.imgFull=null,this.txtAttrLeft=null,this.txtAttrRight=null,this.txtLv=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineEngraveViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineEngraveView")}}(),function(t){function e(){this.img=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineEquipItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineEquipItem")}}(),function(t){function e(){this.tagImg=null,this.parbg=null,this.progressBar=null,this.progressNum=null,this.redPoint=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineImgLinkPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineImgLinkPanel")}}(),function(t){function e(){this.btnUp=null,this.imgArrow=null,this.spPow=null,this.imgSelect=null,this.imgMaterial=null,this.imgFull=null,this.txtAttrLeft=null,this.txtAttrRight=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineQualityViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineQualityView")}}(),function(t){function e(){this.btnUp=null,this.imgSelect=null,this.imgArrow=null,this.spPow=null,this.imgMaterial=null,this.imgFull=null,this.btnOne=null,this.txtAttrLeft=null,this.txtAttrRight=null,this.linkTxt=null,this.txtTip=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineReinfViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineReinfView")}}(),function(t){function e(){this.imgGoodsBg=null,this.imgGoods=null,this.imgSelect=null,this.imgRp=null,this.txtInfo=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineSoulEquipItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineSoulEquipItem")}}(),function(t){function e(){this.html=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineSoulHelpPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineSoulHelpPanel")}}(),function(t){function e(){this.imgGoods=null,this.txtNow=null,this.txtNeed=null,this.spBox=null,this.txtPercent=null,this.imgPoint=null,this.imgSelect=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineSoulMaterialItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineSoulMaterialItem")}}(),function(t){function e(){this.imgArrow=null,this.btnHelp=null,this.btnUp=null,this.imgGoodsBg=null,this.imgGoods=null,this.imgSoul=null,this.imgFull=null,this.spFire=null,this.spMaterial=null,this.txtAttrLeft=null,this.txtAttrRight=null,this.html=null,e.__super.call(this)}w(e,"ui.modules.refine.RefineSoulViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refine/RefineSoulView")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.tab=null,this.btnRefresh=null,this.btnMix=null,this.txtNum1=null,this.txtNum2=null,this.txtNum3=null,this.txtNum4=null,this.inputNum=null,this.btnDown=null,this.btnUp=null,this.btnMax=null,this.txtCoin=null,this.txtDesc=null,this.txtMix=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.GodSoulMixViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/GodSoulMixView")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.listGoods=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulBagPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulBagPanel")}}(),function(t){function e(){this.txtNum=null,this.txtLv=null,this.txtAttr=null,this.txtDesc=null,this.txtName=null,this.txtPos=null,this.txtLevel=null,this.imgBg=null,this.goodImg=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulGoodsTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulGoodsTip")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.imgType1=null,this.txtNum1=null,this.imgType2=null,this.txtNum2=null,this.imgType3=null,this.txtNum3=null,this.imgType4=null,this.txtNum4=null,this.btnYes=null,this.imgChoes1=null,this.imgChoes2=null,this.imgMove=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulGridUnlockPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulGridUnlockPanel")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.spGood1=null,this.spGood2=null,this.txtScore1=null,this.txtScore2=null,this.txtDesc1=null,this.txtDesc2=null,this.txtDesc3=null,this.txtDesc4=null,this.listGoods=null,this.btnInlay=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulInlayPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulInlayPanel")}}(),function(t){function e(){this.btnGet=null,this.txtMission=null,this.txtReward=null,this.txtNum=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulMissionItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulMissionItem")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.tab=null,this.list=null,this.spView=null,this.btnGet1=null,this.btnGet2=null,this.btnGet3=null,this.btnGet4=null,this.txtGet1=null,this.txtGet2=null,this.txtGet3=null,this.txtGet4=null,this.imgGood1=null,this.imgGood2=null,this.imgGood3=null,this.imgGood4=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulMissionViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulMissionView")}}(),function(t){function e(){this.imgTxtBg=null,this.btnConfirm=null,this.txtDesc=null,this.btnClose=null,this.spGood=null,this.txtScore=null,this.imgScore=null,this.txtScoreNum=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulNoticeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulNoticeView")}}(),function(t){function e(){this.txtCoinBlue=null,this.txtCoinYellow=null,this.txtCoinRed=null,this.txtCoinGreen=null,this.imgMix=null,this.imgGoal=null,this.txtGoal=null,this.spView=null,this.imgGrid=null,this.spAshes=null,this.spInfo=null,this.spBar=null,this.btnClear=null,this.txtBar=null,this.spPoint=null,this.imgPoint=null,this.txtPoint=null,this.imgMission=null,this.txtProgress=null,this.btnBack=null,this.imgBag=null,this.imgRefine=null,this.imgShop=null,this.imgStove=null,this.spRefine=null,this.imgSoul1=null,this.imgSoul2=null,this.imgSoul3=null,this.imgSoul4=null,this.txtAshes=null,this.btnClose2=null,this.imgSelect=null,this.panel=null,this.spRank=null,this.imgRank=null,this.tabRank=null,this.list=null,this.btnRank=null,this.imgHelp=null,this.spMask=null,this.spTop=null,this.spStep1=null,this.spStep2=null,this.spStep3=null,this.spStep4=null,this.spStep5=null,this.spStep6=null,this.spStep7=null,this.spStep8=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulPalaceViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulPalaceView")}}(),function(t){function e(){this.imgBg=null,this.txtRank=null,this.txtName=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulRankItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulRankItem")}}(),function(t){function e(){this.txtName=null,this.btnChange=null,this.txt1=null,this.img1=null,this.img2=null,this.imgNon=null,this.txtTip=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulShopItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulShopItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.txtCoinGreen=null,this.txtCoinBlue=null,this.txtCoinYellow=null,this.txtCoinRed=null,this.pan=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulShopViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulShopView")}}(),function(t){function e(){this.imgBg=null,this.imgStone=null,this.imgRP=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulStoneItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulStoneItem")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.spGood1=null,this.spGood2=null,this.spGood3=null,this.spGood4=null,this.spMix=null,this.txtMix=null,this.listGoods=null,this.imgSelect1=null,this.imgSelect2=null,this.imgSelect3=null,this.imgSelect4=null,this.btnMix=null,this.txtStoneScore=null,this.imgHelp=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulStoneMixPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulStoneMixPanel")}}(),function(t){function e(){this.btnClose=null,this.spStove=null,this.spBar=null,this.imgBar=null,this.txtStoveLv=null,this.txtArrt1=null,this.txtSoul=null,this.txtGetSoul=null,this.spInlay=null,this.txtGet=null,this.txtArrt2=null,this.imgOther=null,this.textArrt3=null,this.btnBack=null,this.btnUp=null,this.tab=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulStoveViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulStoveView")}}(),function(t){function e(){this.txtTitle=null,this.btnClose=null,this.btnBack=null,this.txtTip=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulTip")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnUp=null,this.spLvUp=null,this.spSelect=null,this.imgGood1=null,this.imgGood2=null,this.imgGood3=null,this.imgGold=null,this.txtGold=null,this.tab=null,this.spChange=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.imgSelect=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.RefineSoulUpgradeViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/RefineSoulUpgradeView")}}(),function(t){function e(){this.spDrop=null,this.imgGrid=null,this.spEff=null,this.imgItem=null,this.imgAshes=null,this.imgCanUp=null,e.__super.call(this)}w(e,"ui.modules.refineSoulPalace.SoulGridItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/refineSoulPalace/SoulGridItem")}}(),function(t){function e(){this.spGoods=null,this.imgMoney=null,this.txtName=null,this.txtMoney=null,this.txtLimit=null,this.txtWarn=null,this.btnBuy=null,this.imgRed=null,e.__super.call(this)}w(e,"ui.modules.regrow.RegrowNeedItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/regrow/RegrowNeedItem")}}(),function(t){function e(){this.btnClose2=null,this.btnClose=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.regrow.RegrowNeedViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/regrow/RegrowNeedView")}}(),function(t){function e(){this.spPower=null,this.spTwo=null,this.imgMax=null,this.imgDesc=null,this.txtNext=null,this.txtNow=null,this.spMid=null,this.spPro=null,this.btnUp=null,this.txtLink=null,this.nowLv=null,e.__super.call(this)}w(e,"ui.modules.regrow.RegrowViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/regrow/RegrowView")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.spOne=null,this.txtOne=null,this.txtAttr=null,this.spNotMax=null,this.txtNeed=null,this.imgInput=null,this.txtHas=null,this.txtNeed1=null,this.txtLink=null,this.btnUp=null,this.btnClose2=null,this.imgPower=null,this.spPow=null,e.__super.call(this)}w(e,"ui.modules.role.BuildSoulViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/BuildSoulView")}}(),function(t){function e(){this.imgSp=null,this.imgBuild=null,this.imgSel=null,this.imgRp=null,e.__super.call(this)}w(e,"ui.modules.role.BuildySoulItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/BuildySoulItem")}}(),function(t){function e(){this.bg=null,this.box=null,this.spRole=null,this.btnNew=null,this.btnTurnRight=null,this.btnTurnLeft=null,this.btnClose2=null,this.btn_w=null,this.btn_M=null,this.txt=null,this.txtNeedLv=null,this.txtVip=null,this.txtSub=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.role.CategoryPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/CategoryPanel")}}(),function(t){function e(){this.btnClose=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.role.RoleAttrElementViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleAttrElementView")}}(),function(t){function e(){this.txtVoca=null,this.txtTitle=null,this.btnBack=null,this.txt1=null,this.input1=null,this.txt2=null,this.input2=null,this.txt3=null,this.input3=null,this.txt4=null,this.input4=null,this.txt5=null,this.input5=null,this.txt7=null,this.input7=null,this.input6=null,this.txt6=null,this.input8=null,this.txt8=null,this.btnL=null,this.btnR=null,this.tab=null,this.txtViewAttr=null,e.__super.call(this)}w(e,"ui.modules.role.RoleAttrViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleAttrView")}}(),function(t){function e(){this.txtCity=null,e.__super.call(this)}w(e,"ui.modules.role.RoleSetCityItem2UI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleSetCityItem2")}}(),function(t){function e(){this.btnClose=null,this.btnUp=null,this.chb=null,this.txtName=null,this.txtNeed=null,this.imgInput=null,this.txtHas=null,this.txtNeed1=null,this.txtNowAttr=null,this.txtNextAttr=null,this.txtDesc=null,this.btnClose2=null,this.img=null,this.imgTitle=null,e.__super.call(this)}w(e,"ui.modules.role.RoleSpecialEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/role/RoleSpecialEquipView")}}(),function(t){function e(){this.imgHead=null,this.txtCate=null,this.txtSex=null,this.btnClose=null,this.btnClose2=null,this.btnChange=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleChangeSexViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleChangeSexView")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.input=null,this.txtDesc=null,this.pan=null,this.pan2=null,this.btnSel=null,this.imgTop=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetCityViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetCityView")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.btnChange=null,this.txtSub=null,this.img1=null,this.imgHead1=null,this.spMain=null,this.img2=null,this.imgHead2=null,this.img3=null,this.imgHead3=null,this.img4=null,this.imgHead4=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetReorderViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetReorderView")}}(),function(t){function e(){this.btnOperate=null,this.imgTxtBg1=null,this.imgTxtBg2=null,this.txtName=null,this.txtNum=null,this.txtLv=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetSelfBubbleTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfBubbleTip")}}(),function(t){function e(){this.list=null,this.imgBubble=null,this.btnOperate=null,this.txtName=null,this.txtDesc=null,this.txt=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetSelfBubbleViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfBubbleView")}}(),function(t){function e(){this.imgFrame=null,this.txtName=null,this.txtNum=null,this.txtLv=null,this.txtDesc=null,this.btnOperate=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetSelfFrameTipUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfFrameTip")}}(),function(t){function e(){this.list=null,this.imgFrame=null,this.btnOperate=null,this.txtName=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetSelfFrameViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfFrameView")}}(),function(t){function e(){this.spView=null,this.btnClose1=null,this.btnClose=null,this.tab=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetSelfPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetSelfPanel")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.spTop=null,this.txtArea=null,this.txtName=null,this.txtSex=null,this.txtCity=null,this.imgHead=null,this.imgFrame=null,this.imgCSex=null,this.imgCCity=null,this.imgCName=null,this.btnCopy=null,this.btnSp=null,this.imgMid=null,this.txtLink=null,this.tog1=null,this.tog2=null,this.tog3=null,this.tog4=null,this.btnClose2=null,this.txtUser=null,e.__super.call(this)}w(e,"ui.modules.roleSet.RoleSetViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/roleSet/RoleSetView")}}(),function(t){function e(){this.imgEff=null,e.__super.call(this)}return w(e,"ui.modules.share.ShareTipUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/share/ShareTip")},e}()),fx=(function(t){function e(){this.list=null,this.txtScore=null,this.btnAdd=null,this.btnCopper=null,this.btnGold=null,this.txtMyCopper=null,this.txtMyGold=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopBattlefieldViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopBattlefieldView")}}(),function(t){function e(){this.img=null,this.txtGold=null,this.txtName=null,this.btnBuy=null,this.spGoods=null,this.txtTimesDesc=null,this.txtTimes=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopCultivationItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopCultivationItem")}}(),function(t){function e(){this.list=null,this.txtScore=null,this.btnAdd=null,this.btnCopper=null,this.btnGold=null,this.txtMyCopper=null,this.txtMyGold=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopCultivationViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopCultivationView")}}(),function(t){function e(){this.engraveTypeCombo=null,this.list=null,this.txtScore=null,this.btnAdd=null,this.btnCopper=null,this.btnGold=null,this.txtMyCopper=null,this.txtMyGold=null,this.autoComboTxt=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopEngraveViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopEngraveView")}}(),function(t){function e(){this.img=null,this.txtGold=null,this.btnBuy=null,this.spGoods=null,this.txtName=null,this.img2=null,this.txtGold2=null,this.buyTimes=null,this.help=null,this.isNew=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopGoodsItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopGoodsItem")}}(),function(t){function e(){this.list=null,this.txtScore=null,this.btnAdd=null,this.btnCopper=null,this.btnGold=null,this.txtMyCopper=null,this.txtMyGold=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopGoodsViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopGoodsView")}}(),function(t){function e(){this.img=null,this.txtGold=null,this.btnBuy=null,this.txtTip=null,this.spGoods=null,this.offImg=null,this.txtName=null,this.arrow=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopMysteryItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopMysteryItem")}}(),function(t){function e(){this.list=null,this.imgGold=null,this.btnRefresh=null,this.btnCopper=null,this.btnGold=null,this.txtTime=null,this.txtCost=null,this.txtMyCopper=null,this.txtMyGold=null,this.txtScore=null,this.btnScore=null,this.txtSVIP=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopMysteryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopMysteryView")}}(),function(t){function e(){this.bg=null,this.title=null,this.btnClose=null,this.box=null,this.tab=null,this.btnBack=null,this.spView=null,this.tabBottom=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopPanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopPanel")}}(),function(t){function e(){this.img1=null,this.txtGold1=null,this.btnBuy=null,this.img2=null,this.txtGold2=null,this.txtName=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopScoreItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopScoreItem")}}(),function(t){function e(){this.list=null,this.btnCopper=null,this.btnGold=null,this.txtMyCopper=null,this.txtMyGold=null,this.txtScore=null,e.__super.call(this)}w(e,"ui.modules.shop.ShopScoreViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/shop/ShopScoreView")}}(),function(t){function e(){this.btnClose=null,this.list=null,this.txtMsg=null,this.btnBack=null,this.btn=null,this.txtNon=null,this.txtLink=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookComposePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookComposePanel")}}(),function(t){function e(){this.img=null,this.txtLearn=null,this.txtNum=null,this.imgSelect=null,this.txtName=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookLearnItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookLearnItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.list=null,this.txtName=null,this.txtMsg=null,this.txtLink=null,this.btn=null,this.imgLeft=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookLearnPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookLearnPanel")}}(),function(t){function e(){this.img=null,this.txtNum=null,this.imgSelect=null,this.txtName=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookListItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookListItem")}}(),function(t){function e(){this.btnBack=null,this.btnClose=null,this.list=null,this.txtName1=null,this.txtMsg1=null,this.txtName2=null,this.txtMsg2=null,this.txtLink=null,this.btn=null,this.imgLeft=null,this.imgRight=null,this.txtNon=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookReplacePanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookReplacePanel")}}(),function(t){function e(){this.txtTip=null,this.btn=null,this.imgBook=null,this.spPow=null,this.txtLink=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillBookViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillBookView")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.txtName=null,this.txtMsg=null,this.txtLink=null,this.imgLeft=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.skill.book.SkillHandBookPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/book/SkillHandBookPanel")}}(),function(t){function e(){this.container=null,this.curInfo=null,this.img1=null,this.img2=null,this.img3=null,this.img4=null,this.img5=null,this.selectedImg=null,this.desc0=null,this.desc1=null,this.desc2=null,this.desc3=null,this.desc4=null,this.select4=null,this.select3=null,this.select2=null,this.select1=null,this.select0=null,this.btn=null,this.cost=null,this.getGoods=null,this.compoundBtn=null,this.rpCompound=null,this.goodsNumTxt=null,this.icon0=null,this.icon1=null,this.icon2=null,this.icon3=null,this.icon4=null,this.skillname0=null,this.skillStep0=null,this.skillname1=null,this.skillStep1=null,this.skillname2=null,this.skillStep2=null,this.skillname3=null,this.skillStep3=null,this.skillname4=null,this.skillStep4=null,this.rp0=null,this.rp1=null,this.rp2=null,this.rp3=null,this.rp4=null,this.spPow=null,e.__super.call(this)}w(e,"ui.modules.skill.SkillStepViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/SkillStepView")}}(),function(t){function e(){this.icon0=null,this.icon1=null,this.icon2=null,this.icon3=null,this.icon4=null,this.lv0=null,this.lv1=null,this.lv2=null,this.lv3=null,this.lv4=null,this.skill0=null,this.skill1=null,this.skill2=null,this.skill3=null,this.skill4=null,this.selectedImg=null,this.desc=null,this.curTxt=null,this.nextTxt=null,this.txtCost=null,this.btn=null,this.btnAll=null,this.txtCostAll=null,this.goal1=null,this.goal2=null,e.__super.call(this)}w(e,"ui.modules.skill.SkillViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/skill/SkillView")}}(),function(t){function e(){this.box=null,this.txtInfo=null,this.imgNpc=null,this.imgMy=null,e.__super.call(this)}w(e,"ui.modules.story.StoryViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/story/StoryView")}}(),function(t){function e(){this.txtVoca=null,this.btnBack=null,this.btnChange=null,this.txtPower=null,e.__super.call(this)}w(e,"ui.modules.Title.TitleAllAttrPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleAllAttrPanel")}}(),function(t){function e(){this.txt=null,this.input=null,e.__super.call(this)}w(e,"ui.modules.Title.TitleAttrItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleAttrItem")}}(),function(t){function e(){this.txtAttr=null,this.txtWay=null,this.box=null,this.spPow=null,e.__super.call(this)}w(e,"ui.modules.Title.TitleInfoItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleInfoItem")}}(),function(t){function e(){this.bg=null,this.container=null,this.list=null,this.btnClose2=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.Title.TitlePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitlePanel")}}(),function(t){function e(){this.txthas=null,this.txtNum=null,this.btn=null,e.__super.call(this)}w(e,"ui.modules.Title.TitleStateItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleStateItem")}}(),function(t){function e(){this.bg=null,this.container=null,this.imgTxt=null,this.btnClose2=null,this.btn=null,this.spPower=null,this.txtAttr1b=null,this.txtAttr1a=null,this.txtPower1=null,this.txtAttr2b=null,this.txtAttr2a=null,this.txtPower2=null,this.txtAttr3b=null,this.txtAttr3a=null,this.txtPower3=null,this.txtAttr4b=null,this.txtAttr4a=null,this.txtPower4=null,this.btnClose=null,e.__super.call(this)}w(e,"ui.modules.vip.Vip3PanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/vip/Vip3Panel")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.container=null,this.imgBg=null,this.htmlDesc=null,this.btnTake=null,this.imgRP=null,this.btnClose2=null,this.btnRight=null,this.btnLeft=null,this.btnMoney=null,this.txtTip2=null,this.panel=null,this.imgTitle2=null,this.imgLvLeft=null,this.imgLvRight=null,this.imgTitle=null,this.vipBg=null,this.imgMoney=null,this.txtTip1=null,e.__super.call(this)}w(e,"ui.modules.vip.VipPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/vip/VipPanel")}}(),function(t){function e(){this.btnAdd=null,this.spReward=null,this.imgTip=null,e.__super.call(this)}w(e,"ui.modules.welfare.addApp.AddAppTipViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/addApp/AddAppTipView")}}(),function(t){function e(){this.imgBg=null,this.btn=null,this.imgRp=null,this.imgCode=null,e.__super.call(this)}w(e,"ui.modules.welfare.appLoad.WelfareAppLoadViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/appLoad/WelfareAppLoadView")}}(),function(t){function e(){this.btn=null,this.spNotBind=null,this.btnGet=null,this.input1=null,this.input2=null,this.txtErr1=null,this.txtErr2=null,this.imgRight=null,this.spHadBind=null,this.txtHad=null,this.inputSel1=null,this.inputSel2=null,e.__super.call(this)}w(e,"ui.modules.welfare.bindPhone.BindPhoneGiftViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/bindPhone/BindPhoneGiftView")}}(),function(t){function e(){this.txtKey=null,this.btnGet=null,e.__super.call(this)}w(e,"ui.modules.welfare.cdKey.CDKeyViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/cdKey/CDKeyView")}}(),function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnGet=null,this.spReward=null,this.txtInfo=null,e.__super.call(this)}w(e,"ui.modules.welfare.fortuneCat.WelfareFortuneCatConfirmPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/fortuneCat/WelfareFortuneCatConfirmPanel")}}(),function(t){function e(){this.btnAddGold=null,this.txtGold=null,this.txtCopper=null,this.txtVip=null,this.imgVip=null,this.spReward3=null,this.imgReward3=null,this.redPoint3=null,this.spReward2=null,this.imgReward2=null,this.redPoint2=null,this.spReward1=null,this.imgReward1=null,this.redPoint1=null,this.spInfo=null,this.txtPlus=null,this.spStar=null,this.txtTip=null,this.imgMaxTip=null,this.txtCostGold=null,this.btnBuy=null,this.txtCostCopper=null,this.txtTimes=null,this.spRewardTip=null,this.txtRewardTip=null,this.txtCopperAdd=null,e.__super.call(this)}w(e,"ui.modules.welfare.fortuneCat.WelfareFortuneCatViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/fortuneCat/WelfareFortuneCatView")}}(),function(t){function e(){this.imgBg=null,this.btnBuy=null,this.btnBuy2=null,this.html=null,this.html2=null,this.html3=null,this.tip=null,e.__super.call(this)}w(e,"ui.modules.welfare.monthCard.WelfareMonthCardNewViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/monthCard/WelfareMonthCardNewView")}}(),function(t){function e(){this.panel=null,this.btn=null,this.imgBarrier=null,this.txtTitle=null,e.__super.call(this)}w(e,"ui.modules.welfare.notice.WelfareNoticeViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/notice/WelfareNoticeView")}}(),function(t){function e(){this.getBtn=null,this.btnRight=null,this.btnLeft=null,this.goldImg=null,this.copyNameTxt=null,this.sp=null,this.goldNumTxt=null,this.itemNameText=null,this.recoveTimeTxt=null,this.nobleImg=null,this.haveNotTimeText=null,e.__super.call(this)}w(e,"ui.modules.welfare.recover.WelfareRecoverItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/recover/WelfareRecoverItem")}}(),function(t){function e(){this.itemList=null,e.__super.call(this)}w(e,"ui.modules.welfare.recover.WelfareRecoverViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/recover/WelfareRecoverView")}}(),function(t){function e(){this.closeBtn=null,this.buyBtn=null,this.txtLeftTime=null,this.showSp=null,e.__super.call(this)}w(e,"ui.modules.welfare.roleLevelOfTimeLimit.RoleLevelOfTimeLimitViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/roleLevelOfTimeLimit/RoleLevelOfTimeLimitView")}}(),function(t){function e(){this.btn=null,this.imgRP=null,e.__super.call(this)}w(e,"ui.modules.welfare.setQzoonBG.WelfareSetQZoonBgViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/setQzoonBG/WelfareSetQZoonBgView")}}(),function(t){function e(){this.imgSel1=null,this.imgSel2=null,this.imgSel3=null,this.imgGift1=null,this.imgGift2=null,this.imgGift3=null,this.imgSt1=null,this.imgSt2=null,this.imgSt3=null,e.__super.call(this)}w(e,"ui.modules.welfare.wanbaGift.WanbaGiftViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/wanbaGift/WanbaGiftView")}}(),function(t){function e(){this.bmpVip=null,this.spGoods=null,this.btn=null,e.__super.call(this)}w(e,"ui.modules.welfare.wanbaVipGift.WanbaVIpGiftListItemUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/wanbaVipGift/WanbaVIpGiftListItem")}}(),function(t){function e(){this.spVip=null,this.bmpVip=null,this.btn=null,this.btnHelp=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.welfare.wanbaVipGift.WanbaVipViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/wanbaVipGift/WanbaVipView")}}(),function(t){function e(){this.imgBg=null,this.des=null,this.btnBuy=null,this.tip=null,e.__super.call(this)}w(e,"ui.modules.welfare.weekCard.WeekCardPanelUI",oe),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/weekCard/WeekCardPanel")}}(),function(t){function e(){this.bg=null,this.btnGet=null,this.imgFinish=null,this.imgRp=null,this.txtDays=null,this.txtTip=null,this.txtDesc=null,e.__super.call(this)}w(e,"ui.modules.welfare.WelfareGift.WelfareGiftItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/WelfareGift/WelfareGiftItem")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnClose2=null,this.imgBg=null,this.imgTitle=null,this.pan=null,this.txtDes=null,this.btnGet=null,this.imgFinish=null,this.imgRP=null,this.txtGet=null,this.giftTab=null,this.spEff=null,this.boardtitle=null,this.txtTitle=null,e.__super.call(this)}w(e,"ui.modules.welfare.WelfareGift.WelfareGiftViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/WelfareGift/WelfareGiftView")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.btnRight=null,this.btnLeft=null,this.spView=null,this.btnClose2=null,this.list=null,e.__super.call(this)}w(e,"ui.modules.welfare.WelfarePanelUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/welfare/WelfarePanel")}}(),function(t){function e(){this.btnClose=null,this.btnClose2=null,this.spStar=null,this.btn=null,this.txtGrade=null,this.img2=null,this.txtInput=null,this.txtLast=null,e.__super.call(this)}w(e,"ui.modules.WelfareNoticeUpViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/WelfareNoticeUpView")}}(),function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtNeed=null,this.txtScore=null,e.__super.call(this)}w(e,"ui.modules.wing.RoleEquipListItemUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/wing/RoleEquipListItem")}}(),function(t){function e(){this.bg=null,this.btnClose=null,this.box=null,this.imgWing=null,this.btnChange=null,this.changeRp=null,this.panItems=null,this.btnReturn=null,this.spEquips=null,this.txtWings=null,e.__super.call(this)}w(e,"ui.modules.wing.RoleWingEquipViewUI",oe),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/wing/RoleWingEquipView")}}(),function(t){function e(){this.titleImg=null,this.btnClose=null,this.btnYes=null,this.btnNo=null,this.imgInfo=null,this.txtMsg=null,this.spCheck=null,this.box=null,this.titleTxt=null,this.spConsume=null,this.yesConsume=null,this.consumeType=null,e.__super.call(this)}return w(e,"ui.com.AlertUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("com/Alert")},e}()),_x=function(t){function e(){this.title=null,this.closeBtn=null,this.bg1=null,this.talisman1=null,this.bg2=null,this.talisman2=null,this.bg3=null,this.talisman3=null,this.imgNum1=null,this.txtNum=null,this.purchaseBtn1=null,this.purchaseBtn2=null,this.purchaseBtn3=null,this.name1=null,this.name2=null,this.name3=null,this.money1=null,this.money2=null,this.money3=null,this.times1=null,this.times2=null,this.times3=null,e.__super.call(this)}return w(e,"ui.modules.activity.baguaFurnace.BaguaFurnaceTreasureDialogUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/baguaFurnace/BaguaFurnaceTreasureDialog")},e}(),gx=function(t){function e(){this.btnClose1=null,this.imgInfo=null,this.txt=null,this.btnYes=null,e.__super.call(this)}return w(e,"ui.modules.activity.GeneralRuleViewUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/GeneralRuleView")},e}(),yx=function(t){function e(){this.txt1=null,this.btnY=null,this.btnN=null,this.btnBanner=null,this.txtNum=null,this.chB=null,this.btnClo=null,e.__super.call(this)}return w(e,"ui.modules.activity.sign.SignAlertViewUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/sign/SignAlertView")},e}(),vx=function(t){function e(){this.btnClose=null,this.btnBack=null,this.btnGet=null,this.spGoods=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.copy.CopyDreamBoxUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/copy/CopyDreamBox")},e}(),Ix=function(t){function e(){this.btnLeft=null,this.btnRight=null,this.difficulty=null,this.star1=null,this.star2=null,this.star3=null,this.stageNum=null,this.time=null,this.rewardList=null,this.setting=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.zhuXianRoad.ZhuXianResultViewUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/commonCopy/zhuXianRoad/ZhuXianResultView")},e}(),wx=function(t){function e(){this.notLoadStack=null,this._state=0,this.key=0,this._now=0,this._end=0,this._sub=0,this._fir=0,this._start=0,this._endTime=0,this.step=0,this.curTime=0,e.__super.call(this)}w(e,"com.scene.kit.PowerNumber",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.zOrder=3e3},i.pushToStack=function(t,e){this.notLoadStack=this.notLoadStack||[],this.notLoadStack.push(t,e)},i.handlerStackFun=function(){if(this.notLoadStack)for(;0<this.notLoadStack.length;)this.show(this.notLoadStack.shift(),this.notLoadStack.shift())},i.show=function(t,e){if(1!=GF.isExist){if(!se.has("modules/power"))return this.pushToStack(t,e),void se.add("modules/power",null,this,this.handlerStackFun,null);this.imgPow.skin&&"modules/power/txtPow.png"==this.imgPow.skin||(this.imgPow.skin="modules/power/txtPow.png"),this.imgBottom.skin&&"modules/power/bottom.png"==this.imgBottom.skin||(this.imgBottom.skin="modules/power/bottom.png"),this.imgAdd.visible=!1,0==this.state?(this._start=t,this.state=1,this.key=_t.setTimeout(this,this.play,null,400),this._now=t,this._end=e):1==this.state?(_t.clearTimeout(this.key),this._end=e,this._start!=this._end?this.key=_t.setTimeout(this,this.play,null,400):this.comp()):(2==this.state?this._end=e:(this._start=t,this.state=2,this._end=e,_t.clearTimeout(this.key),this._endTime=S.now()+250),_t.addToFrame(this,this.loop))}},i.play=function(){for(this.state=2,this._fir=this._end,this.step=1;10<this._fir;)this._fir/=10,++this.step;this._fir=Math.floor(this._fir),this.width=210+39*this.step,this.x=(lt.stageWidth-this.width)/2,this.y=lt.stageHeight-450,this.parent||h.stage.addChild(this),this._endTime=S.now()+500,_t.addToFrame(this,this.loop)},i.loop=function(){var t=S.now();if(30<=t-this.curTime){this.curTime=t,this._endTime>S.now()?this._now=1e3*this._fir+Math.floor(1e3*Math.random()):(this._now=this._end,this.state=3,_t.removeFromFrame(this,this.loop),this.key=_t.setTimeout(this,this.comp,null,500),this.tweenAdd());var e=k.numToTexture(this._now,"modules/power/pow");this.imgNum.graphics.clear();for(var i=0;i<e.length;i++){var s=e[i];this.imgNum.graphics.drawTexture(s,39*i)}}},i.comp=function(){this.removeSelf(),this.state=0},i.tweenAdd=function(){var t,e,i=NaN,s=NaN;0<this._end-this._start?(t="modules/power/add",e="modules/power/add.png",i=-32,s=-70):(t="modules/power/red",e="modules/power/red.png",i=-70,s=-32),this.imgAdd.y=i;var n=k.numToTexture(Math.abs(this._end-this._start),t);this.imgAdd.graphics.clear(),this.imgAdd.graphics.drawTexture(ut.getRes(e),0);for(var o=0;o<n.length;o++){var a=n[o];this.imgAdd.graphics.drawTexture(a,29*o+29)}this.imgAdd.x=this.width-27-29*n.length,ie.to(this.imgAdd,{y:s},500,A.cubicOut)},I(0,i,"state",function(){return this._state},function(t){3==t?(this.imgAdd.y=-32,this.imgAdd.visible=!0):this.imgAdd.visible=!1,this._state=t}),I(1,e,"Ins",function(){return e._ins=e._ins||new e},ui.modules.PowerNumberUI._$SET_Ins),e._ins=null,e.FINISH_TIME=500,e.DELAY_PLAY=400,e.SHOW_TIME=500,e.SUB_TIME=200,e.TWEEN_TIME=500,e}(Gh),bx=function(t){function e(){this._showData=null,this._curWantToBuyNum=1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.on("click",this,this.onDisplay),this.on("click",this,this.onUnDisplay),this.descStartTxt.style.align="right"}w(e,"modules.activity.ActBuyGoodsAlert",Hh);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.cancelBtn:case this.closeBtn:this._showData&&null!=this._showData.cancelFuncCaller&&null!=this._showData.cancelFunc&&this._showData.cancelFunc.apply(this._showData.cancelFuncCaller,this._showData.cancelArgs),this.closeWindow();break;case this.btnAdd:this._showData&&(this._curWantToBuyNum>=this._showData.maxCanBuyNum?this._curWantToBuyNum=this._showData.maxCanBuyNum:this._curWantToBuyNum++,this.updateShowView());break;case this.btnCut:this._showData&&(this._curWantToBuyNum<=this._showData.minCanBuyNum?this._curWantToBuyNum=this._showData.minCanBuyNum:this._curWantToBuyNum--,this.updateShowView());break;case this.yesBtn:this._showData&&null!=this._showData.yesFuncCaller&&null!=this._showData.yesFunc&&(this.useYesFunction(),T.dispatch("ACT_CONSTELLATION_WISH_TIMES",this._curWantToBuyNum)),this.closeWindow()}},i.useYesFunction=function(){if(1==this._showData.useCurrency){if(pe.gold<this._curWantToBuyNum*this._showData.price)return void Lo.showAlert()}else if(2==this._showData.useCurrency&&pe.silver<=this._curWantToBuyNum*this._showData.price)return void Lo.showAlert();if(-1<this._showData.timeForArgsIndex)if(null==this._showData.yesArgs)this._showData.yesArgs[this._showData.timeForArgsIndex]=this._curWantToBuyNum;else{for(var t=[],e=0,i=this._showData.yesArgs.length+1;e<i;e++)e<this._showData.timeForArgsIndex?t[e]=this._showData.yesArgs[e]:e==this._showData.timeForArgsIndex?t[e]=this._curWantToBuyNum:t[e]=this._showData.yesArgs[e-1];this._showData.yesArgs=t}this._showData.yesFunc.apply(this._showData.yesFuncCaller,this._showData.yesArgs)},i.onDisplay=function(){},i.onUnDisplay=function(){},i.updateShowView=function(){this.valTxt.text=this._curWantToBuyNum+"",this.updateStartDescTxt(),this.updateEndDescTxt(),this.setRemaskTxt(),0==this._showData.yesBtnVisible?(this.yesBtn.visible=!1,this.cancelBtn.pos.x=266):(this.yesBtn.visible=!0,this.yesBtn.x=412),0==this._showData.cancelBtnVisible?(this.cancelBtn.visible=!1,this.yesBtn.pos.x=266):(this.cancelBtn.visible=!0,this.cancelBtn.pos.x=160)},i.updateStartDescTxt=function(){var t=this._curWantToBuyNum*this._showData.price+this.getUseCurrencyName()+this._showData.actionName;this.descStartTxt.innerHTML=Z.font("是否花费","#5d3924",26)+Z.font(t,"#fff000",26)},i.updateEndDescTxt=function(){this.descEndTxt.innerHTML=Z.font(this._showData.unitName+this._showData.goodsName+"?","#5d3924",26)},i.insertString=function(t,e,i){for(var s="",n=t.length,o=0;o<=n;o++)t.charAt(o)==e?s+=i:s+=t.charAt(o);return s},i.setRemaskTxt=function(){var t=this._showData.remaskStr,e=(this._showData.args[0]*this._curWantToBuyNum).toString(),i=this.insertString(t,"s",e);this.remaskTxt.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font(i,"#5d3924",22)},i.getUseCurrencyName=function(){var t="";switch(this._showData.useCurrency){case 1:t="元宝";break;case 2:t="铜钱";break;default:t="元宝"}return t},I(0,i,"showData",null,function(t){null!=t&&(this._showData=t,this._curWantToBuyNum=this._showData.minCanBuyNum,this.updateShowView())}),e}(),Sx=function(t){function e(){this.txtName=null,this.txtScore=null,this.txtPos=null,this.txtLevel=null,this.txtVoca=null,this.spPow=null,this.imgBg=null,this.imgGoods=null,this.txtPos1=null,this.txtLevel1=null,this.txtVoca1=null,this.panel=null,this.attrTxt=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.Equip.EquipTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/EquipTip")},e}(),xx=function(t){function e(){this.bg=null,this.roleBg=null,this.body=null,this.opSprite=null,this.cate1Default=null,this.cate2Default=null,this.cate3Default=null,this.cate4Default=null,this.cate1=null,this.cate2=null,this.cate3=null,this.cate4=null,this.male=null,this.female=null,this.switchState=null,this.bottomPart=null,this.txtNum=null,this.txtLv=null,this.txtName=null,this.txtPos=null,this.txtLevel=null,this.box1=null,this.txtBath=null,this.txtDesc=null,this.imgBg=null,this.goodImg=null,e.__super.call(this)}return w(e,"ui.modules.Equip.GoodsTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/GoodsTip")},e}(),Cx=function(t){function e(){this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.Equip.DefaultTipUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/DefaultTip")},e}(),Px=function(t){function e(t){this._iconID=0,this._url=null,this.completeHanlder=null,this.curView=null,this.repeatX=5,this.clickFirst=!0,this.glowFilter=null,this.itemSelecteStates=null,this.typeIDS=null,this.tabs=null,this._actIDS=null,this._skinS=null,this._groups=null,this.bitmapClip=null,this.actBriefs=null,this._iconID=t,e.__super.call(this)}w(e,"modules.activity.ActivityCommonPanel",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActPanel":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),311==this._iconID?(this._url="modules/act/"+this._iconID+"/",this.btnClose2.skin=this._url+"btn_re.png"):(this._url="modules/act/",this.btnClose2.skin="com/ui/btn_ret3.png"),this.imgF1.skin=this.imgF2.skin=this._url+"flower.png",this.bg.skin=this._url+"panelBg.jpg",this.imgHead.skin=this._url+"titleBg.png",this.imgTitleBg.skin=this._url+"headBg.png",this.imgTitle.skin="modules/act/"+this._iconID+"/title.png",this.imgTitle.centerX=0,this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.on("click",this,this.onClick),this.list.itemRender=SU,this.list.spaceX=22,this.list.mouseHandler=new Q(this,this.onClickIcon),this.list.repeatX=this.repeatX,this.list.selectHandler=new Q(this,this.onSelected),this.list.renderHandler=new Q(this,this.onRenderHandler),this.on("display",this,this.onDisplay),this.glowFilter=new Y("#ffff00",10,0,0)},i.onRenderHandler=function(t,e){var i=this.itemSelecteStates[e];t.img.filters=i?[this.glowFilter]:[]},i.onSelected=function(t){for(var e=0;e<this.itemSelecteStates.length;e++)this.itemSelecteStates[e]=!1;this.itemSelecteStates[t]=!0},i.onDisplay=function(){T.register("CROSS_DAY",this,this.onCrossDay),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("CROSS_DAY",this,this.onCrossDay),this.off("undisplay",this,this.onUnDisplay)},i.onCrossDay=function(){var t,e=this.list.selectedIndex;if(this._actIDS&&this._actIDS.length>e)for(var i in this._actIDS[e])t=this._actIDS[e][i],Da.ins().toActDetail(t)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnLeft:this.turnLeft();break;case this.btnRight:this.clickFirst=!1,this.turnRight()}},i.setlistTabBar=function(t){this._actIDS=[],this.typeIDS=[],this.tabs=[],this._groups=[],this._skinS=[],this.itemSelecteStates=[];for(var e,i=0,s=t.length,n=0;n<s;n++){e=t[n];var o=this._groups.indexOf(e.ugroup);if(0<=o)this._actIDS[o].indexOf(e.act_id)<0&&this._actIDS[o].push(e.act_id),this.typeIDS[o].indexOf(e.com_types[0])<0&&this.typeIDS[o].push(e.com_types[0]),this.tabs[o][2].indexOf(e.act_id)<0&&this.tabs[o][2].push(e.act_id);else if(yt.isWX){if(1106==e.com_types[0])continue;if(ya.getChargeOpen())this._groups.push(e.ugroup),this.typeIDS.push([e.com_types[0]]),this._skinS.push(e.skin_id),this.tabs.push([this._iconID,e.ugroup,[e.act_id],e.skin_id]),this._actIDS.push([e.act_id]);else{var a=e.ugroup%1e4;if(3001==a){var l=NaN,r=We.getActDetailByActID(e.act_id);r instanceof modules.activity.vo.StandardRankVO&&(l=r.rankID),l&&1007!=l&&(this._groups.push(e.ugroup),this.typeIDS.push([e.com_types[0]]),this._skinS.push(e.skin_id),this.tabs.push([this._iconID,e.ugroup,[e.act_id],e.skin_id]),this._actIDS.push([e.act_id]))}else if(1001==a||3004==a||4012==a||4045==a||1006==a&&"ios"==Bt.os);else{if(1001==e.com_types[0]&&pe.myLevel<40)continue;if(1106==e.com_types[0]||1805==e.com_types[0]||1806==e.com_types[0])continue;if(i&&e.ugroup==i)continue;if(1701==e.com_types[0]&&pe.myLevel<60){i=e.ugroup;continue}this._groups.push(e.ugroup),this.typeIDS.push([e.com_types[0]]),this._skinS.push(e.skin_id),this.tabs.push([this._iconID,e.ugroup,[e.act_id],e.skin_id]),this._actIDS.push([e.act_id])}}}else{if(1001==e.com_types[0]&&pe.myLevel<40)continue;if(1106==e.com_types[0]||1805==e.com_types[0]||1806==e.com_types[0])continue;if(i&&e.ugroup==i)continue;if(1701==e.com_types[0]&&pe.myLevel<60){i=e.ugroup;continue}this._groups.push(e.ugroup),this.typeIDS.push([e.com_types[0]]),this._skinS.push(e.skin_id),this.tabs.push([this._iconID,e.ugroup,[e.act_id],e.skin_id]),this._actIDS.push([e.act_id])}this.itemSelecteStates[n]=!1}this.list.dataSource&&this.isEquip(this.list.dataSource,this.tabs)||(this.list.dataSource=this.tabs),this.checkBtnVisible()},i.isEquip=function(t,e){if(t.length!=e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!=e[i])return!1;return!0},i.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},i.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},i.showBtnEffect=function(t){t?(this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(13,75)),this.bitmapClip.loadAndPlay("moduleEffect/iconBtn","default",0,!0),this.btnRight.addChild(this.bitmapClip)):this.bitmapClip&&(this.btnRight.removeChild(this.bitmapClip),this.bitmapClip.unload(),this.bitmapClip=null)},i.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex,this.showBtnEffect(this.btnRight.visible&&this.clickFirst)},i.setActVO=function(){this.actBriefs=We.getActInfoBriefs(this._iconID),this.actBriefs.sort(this.memSortFun),this.setlistTabBar(this.actBriefs)},i.memSortFun=function(t,e){return t.order<e.order?-1:t.order>e.order?1:0},i.onClickIcon=function(t,e){if("click"==t.type&&this.list.selectedIndex!=e){var i;for(var s in this._actIDS[e])i=this._actIDS[e][s],Da.ins().toActDetail(i);this.chooseView(e)}},i.chooseView=function(t){if(this.actBriefs&&0<this.actBriefs.length){var e=Math.floor(t/this.list.repeatX)*this.list.repeatX;this.list.tweenTo(e,200,this.completeHanlder),this.list.selectedIndex=t,this.spView.removeChildren();var i=0;if(i=this.typeIDS[t]&&0<this.typeIDS[t].length?this.typeIDS[t][0]:this.typeIDS[t],this.curView=He.getActView(this.groups[t]),this.curView){var s,n;for(var o in this.curView.typeID=this.typeIDS[t],this.curView.actID=this._actIDS[t],this.curView.iconID=this._iconID,this.curView.skinID=this._skinS[t],this._actIDS[t])s=this._actIDS[t][o],We.registerActCBFunc(s,this.curView,this.curView.callBackUpdate);for(var a in this.update(),this.spView.addChild(this.curView),this._actIDS[t])n=this._actIDS[t][a],this.checkOnceRP(n)}else Jt.addTip("请配置"+i+"对应的界面")}},i.checkOnceRP=function(t){var e=We.getActDetailByActID(t);e instanceof modules.activity.consumeBack.ActConsumeBackVO&&0<e.joinTime&&e.deblockTime<=0&&(Da.ins().toDeblock(t),Da.ins().toActDetail(t))},i.update=function(){this.curView?this.curView.update():this.chooseView(0),this.checkBtnVisible()},i.updateRedPoint=function(){if(this&&this.parent)for(var t,e=this.list.startIndex;e<this.list.startIndex+this.list.repeatX;e++)(t=this.list.getCell(e))&&(t.redPoint=t&&t.data&&ao.checkIconRedPoint(t.uGroup))},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},i.selectByIndex=function(t){var e;for(var i in t=0<=t?t:0,this.list.selectedIndex=t,this.chooseView(t),this._actIDS[t])e=this._actIDS[t][i],Da.ins().toActDetail(e)},i.openByUgroupID=function(t){this.parent||(this.openWindow(),this.updateRedPoint()),this.selectByUGruop(t)},i.selectByUGruop=function(t){this._groups||this.setActVO();for(var e=0;e<this.groups.length;e++)if(this.groups[e]%1e4==t)return void this.selectByIndex(e);0!=this.groups.length&&this.selectByIndex(0)},i.openByActID=function(t){this.parent||(this.openWindow(),this.updateRedPoint()),this.selectByActID(t)},i.selectByActID=function(t){var e;this._actIDS||this.setActVO();for(var i=0;i<this._actIDS.length;i++){for(var s in e=this._actIDS[i])if(e[s]==t)return void this.selectByIndex(i)}this.selectByIndex(0)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"endFirstIndex",function(){return this.actBriefs?(Math.ceil(this.tabs.length/this.list.repeatX)-1)*this.list.repeatX:0}),I(0,i,"groups",function(){return this._groups}),I(0,i,"actIDS",function(){return this._actIDS}),e}(Wh),Tx=function(t){function e(){this._typeId=0,this._num=0,this.clip=new b,e.__super.call(this),this.on("click",this,this.onClick),this.scale(.8,.8),this.addChild(this.clip)}w(e,"modules.activity.baguaFurnace.BaguaFurnaceItem",t);var i=e.prototype;return i.onClick=function(){if(this._typeId){var t=ur.getItem(this._typeId);if(t){t.tempNum=this._num;var e="";e=ur.isEquip(t.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(t,e)}}},i.update=function(){if(0<this._typeId){var t=ur.getItem(this._typeId);t&&(this.imgIcon.skin=t.realMaxico,this.num.text=1==this._num?"":this._num+"",this.clip.visible=!0,this.clip.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.clip.pos(52.5,104),this.clip.scale(1.1,1.1))}else this.clip.stop(),this.imgIcon.skin=null,this.visible=!1},I(0,i,"typeId",function(){return this._typeId}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._typeId=t.typeID,this._num=t.num,this.update())}),e}(qh),kx=function(t){function e(){this.bar1=null,this.mainVO=null,this.timeStamp=0,this.btnType=NaN,this.avo=null,this.alertType=0,this.imgPro=null,this.imgRec=null,this.baguaFurnaceTreasureDialog=null,this.hasclickLaojunBtn=!1,this.speed=.8,this._actID=NaN,e.__super.call(this)}w(e,"modules.activity.baguaFurnace.BaguaFurnaceLaojunView",t);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.bar1=new p(0,0,367,0,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",20),this.spPro.addChild(this.bar1),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.list1.mouseEnabled=!0,this.list1.itemRender=Tx,this.list1.spaceX=-16,this.list1.spaceY=-16,this.list2.hScrollBarSkin="",this.list2.mouseEnabled=!0,this.list2.itemRender=Tx,this.list2.spaceX=-14},i.onDisplay=function(){T.register("ACT_BAGUAFURNACE_UPDATE",this,this.openLaojunTreasureBuyDialog),T.register("UPDATE_ACT_BOX_LOG_INFO",this,this.showBoxLogInfoImgs),T.register("ACT_BOX_OPEN",this,this.getLotteryItemArr),T.register("UPDATE_ACT_FURNACE_ITEM_INFO",this,this.getPreviewItemArr),T.register("ACT_BAGUA_FURNACE_PROGRESSBAR",this,this.updateProgressBar),_t.addToSecond(this,this.updateTime),_t.addToSecond(this,this.updateLaojunDisplayTime),_t.addToFrame(this,this.onTipFrame),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("ACT_BAGUAFURNACE_UPDATE",this,this.openLaojunTreasureBuyDialog),T.remove("ACT_BOX_OPEN",this,this.getLotteryItemArr),T.remove("UPDATE_ACT_FURNACE_ITEM_INFO",this,this.getPreviewItemArr),T.remove("UPDATE_ACT_BOX_LOG_INFO",this,this.showBoxLogInfoImgs),T.remove("ACT_BAGUA_FURNACE_PROGRESSBAR",this,this.updateProgressBar),_t.removeFromSceond(this,this.updateTime),_t.removeFromSceond(this,this.updateLaojunDisplayTime),_t.removeFromFrame(this,this.onTipFrame)},i.initData=function(){this.mainVO=null,this.mainVO=We.getActDetailByActID(He.getInstance().baguaFurnaceLaojunAId),this.mainVO&&(this.timeStamp=this.mainVO.conditions[1].timestamp)},i.getLotteryItemArr=function(t){Da.ins().lotteryItemArr_Laojun=t[0],this.updateList1(!0),this.updateImgHas(),Da.ins().toActDetail(this._actID)},i.getPreviewItemArr=function(t){Da.ins().previewItemArr_Laojun=t,this.updateList2(),this.updateImgHas(),this.updateProgressBar()},i.update=function(){if(this.initData(),this.mainVO){this.des.innerHTML=Z.span(this.mainVO.conditions[0].desc,"#621e09",22),this.desTip.innerHTML=Z.span("<span>活动说明：</span>","#621e09",22,!0);var t=this.mainVO.conditions[0].goodId;this.fireNum.text=xo.getGoodsNumByTypeID(t)+""}this.updateList1(!1),this.updateList2(),Ja.ins().toRoleActFurnaceSelfLog(He.getInstance().baguaFurnaceLaojunAId)},i.updateList1=function(t){var l=this;if(Da.ins().lotteryItemArr_Laojun&&Da.ins().lotteryItemArr_Laojun.length<=0||!Da.ins().lotteryItemArr_Laojun)this.list1.visible=this.light.visible=this.extra.visible=this.extraFire.visible=!1;else{this.list1.visible=this.light.visible=this.extra.visible=this.extraFire.visible=!0;for(var e=[],i=0;i<11;i++)if(Da.ins().lotteryItemArr_Laojun&&Da.ins().lotteryItemArr_Laojun[i]){var s=Da.ins().lotteryItemArr_Laojun[i];e.push({typeID:s.id,num:s.val})}else e.push({typeID:0,num:0});var r=new Tx;if(Da.ins().lotteryItemArr_Laojun&&Da.ins().lotteryItemArr_Laojun[10]){s=Da.ins().lotteryItemArr_Laojun[10];r.dataSource={typeID:s.id,num:s.val},this.light.visible=this.extra.visible=!0}else r.dataSource={typeID:0,num:0},this.light.visible=this.extra.visible=!1;this.extraFire.removeChildren(),this.extraFire.addChild(r),this.list1.dataSource=e;for(i=0;i<this.list1.content._childs.length;i++)i<5&&(this.list1.content._childs[4-i].x=26*(5-i)+this.list1.content._childs[i].width*(5-i-1)-36*(5-i-1)+10);if(0<e[0].typeID&&e[2].typeID<=0){var n=this.list1.content._childs[0].x;this.list1.content._childs[0].x=this.list1.content._childs[2].x,this.list1.content._childs[2].x=n}t&&h.timer.callLater(this,function(){for(var t=l.list1.getChildAt(0),e=0;e<t.numChildren;e++){var i=t.getChildAt(e),s=new et(i.imgIcon.skin);s.x=297,s.y=242,s.scaleX=i.imgIcon.scaleX,s.scaleY=i.imgIcon.scaleY,l.list1.parent.addChild(s),i.imgIcon.visible=!1;var n=this;function o(t,e){var i=Q.create(n,function(){e.removeSelf(),t.imgIcon.visible=!0});ie.to(e,{x:t.x+l.list1.x,y:t.y+l.list1.y},200,null,i)}o(i,s)}var a=r.imgIcon;a.x=-275,a.y=176,ie.to(a,{x:0,y:0},300)})}},i.updateList2=function(){if(Da.ins().previewItemArr_Laojun){for(var t=[],e=0;e<Da.ins().previewItemArr_Laojun.length;e++){var i=Da.ins().previewItemArr_Laojun[e];t.push({typeID:i.id,num:i.val})}this.list2.dataSource=t;for(e=0;e<this.list2.content._childs.length;e++)this.list2.content._childs[e].y=10}},i.updateImgHas=function(){this.hasTaliman()?this.imgHas.visible=!0:this.imgHas.visible=!1},i.hasTaliman=function(){if(this.mainVO&&Da.ins().previewItemArr_Laojun&&0<Da.ins().previewItemArr_Laojun.length){var t=Da.ins().previewItemArr_Laojun[0];return!!(0<xo.getGoodsNumByTypeID(t.id)||Rn.getTalimanIsActiveByID(t.id))}return!1},i.updateProgressBar=function(){var t="",e=0,i=0;if(this.mainVO=We.getActDetailByActID(He.getInstance().baguaFurnaceLaojunAId),this.mainVO)for(var s=this.mainVO.conditions,n=0;n<s.length;n++)e=s[n].hasRandoms>e?s[n].hasRandoms:e,i=s[n].maxRandoms>i?s[n].maxRandoms:i;if(Da.ins().previewItemArr_Laojun&&0<Da.ins().previewItemArr_Laojun.length){var o=Da.ins().previewItemArr_Laojun[0];t=ur.getItem(o.id).title}(i-=2)<e||this.hasTaliman()?(this.txtDisplay.visible=!0,this.txtDisplay.text="已获得"+t+"法宝",this.bar1.setTextvisible(!1),e=i-.1):e==i?(this.txtDisplay.visible=!0,this.txtDisplay.text="期望值已满",this.bar1.setTextvisible(!1),e=i-.1):(this.txtDisplay.visible=!1,this.bar1.setTextvisible(!0)),this.bar1.setValuePercent(e,i)},i.onClick=function(t){switch(t.target){case this.help:OF.ins.showMessage(this.mainVO.conditions[0].help);break;case this.gainBtn:this.openLaojunBuyDialog();break;case this.laojun:this.hasclickLaojunBtn=!0,Da.ins().toBaguaFurnaceBuy(He.getInstance().baguaFurnaceLaojunAId);break;case this.previewBtn:Da.ins().firstOpen=!0,He.getInstance().openBaguaFurnaceView();break;case this.xiantongBtn:this.btnType=1,this.btnBuyClick();break;case this.laojunBtn:this.btnType=2,this.btnBuyClick()}},i.btnBuyClick=function(){null!=this.mainVO&&(this.hasTaliman()?(this.alertType=1,this.avo=new Ee,this.avo.msg=Z.span("您当前已拥有本期法宝，是否继续进行抽奖获取珍稀材料？","#621e09"),(this.avo.yesCaller=this).avo.yesLabel="确定",this.avo.noLabel="取消",this.avo.yesFun=this.buyHandle,this.avo.key="1",EF.showVO(this.avo)):(this.alertType=0,this.buyHandle()))},i.buyHandle=function(){var t=xo.getGoodsNumByTypeID(this.mainVO.conditions[0].goodId);this.avo=new Ee,1==this.btnType&&t<=0||2==this.btnType&&t<10?(this.avo.msg=Z.span("您的","#621e09")+Z.span("神火数量不足","#e8c63f")+Z.span("请问是否前往获得？","#621e09"),(this.avo.yesCaller=this).avo.yesLabel="确定",this.avo.noLabel="取消",this.avo.yesFun=this.openLaojunBuyDialog,this.avo.key="LaojunFurnaceOne",EF.showVO(this.avo)):1==this.alertType?this.drawLottery():(this.avo.msg=Z.span("是否花费","#621e09")+Z.span("神火×","#e8c63f")+Z.span(this.mainVO.conditions[this.btnType-1].goodNum,"#e8c63f")+Z.span("(剩余","#e8c63f")+Z.span(t+"","#e8c63f")+Z.span("个)","#e8c63f")+Z.span("进行","#621e09")+Z.span(this.mainVO.conditions[this.btnType-1].lotteryTimes,"#621e09")+Z.span("次抽奖","#621e09"),(this.avo.yesCaller=this).avo.yesLabel="确定",this.avo.noLabel="取消",this.avo.yesFun=this.drawLottery,this.avo.key="LaojunFurnaceTen",EF.showVO(this.avo))},i.drawLottery=function(){Da.ins().toGain(this.mainVO.actID,this.mainVO.conditions[this.btnType-1].conditionId)},i.showBoxLogInfoImgs=function(){this.mainVO&&(null!=this.imgPro&&this.page.removeChild(this.imgPro),this.imgPro=Ja.ins().createCheckShowIcon(1,10003,this.page,590,21,this.mainVO.actID),null!=this.imgRec&&this.page.removeChild(this.imgRec),this.imgRec=Ja.ins().createCheckShowIcon(2,10003,this.page,590,70,this.mainVO.actID))},i.openLaojunTreasureBuyDialog=function(t){if(this.hasclickLaojunBtn?(this.hasclickLaojunBtn=!1,this.baguaFurnaceTreasureDialog=this.baguaFurnaceTreasureDialog||new RF,this.baguaFurnaceTreasureDialog.setViewType(2),this.baguaFurnaceTreasureDialog.openWindow()):(this.timeStamp=this.mainVO.conditions[1].timestamp=t.end_time,this.updateLaojunDisplayTime(),_t.addToSecond(this,this.updateLaojunDisplayTime)),this.baguaFurnaceTreasureDialog&&this.baguaFurnaceTreasureDialog.parent){for(var e=[],i=[],s=0;s<t.buy_list.length;s++){e.unshift(parseInt(t.buy_list[s].id));var n=t.buy_list[s].str.split(",");i.unshift([parseInt(n[0]),parseInt(n[1])])}this.baguaFurnaceTreasureDialog.update(e,[10201685,10201686,10201687],i)}},i.openLaojunBuyDialog=function(){this.baguaFurnaceTreasureDialog=this.baguaFurnaceTreasureDialog||new RF,this.baguaFurnaceTreasureDialog.setViewType(1),this.baguaFurnaceTreasureDialog.openWindow(),this.baguaFurnaceTreasureDialog.update([1136,1137,1138],[10201681,10201682,10201683])},i.updateTime=function(){if(this.mainVO&&this.mainVO.endTime>ya.serverTime){var t=this.mainVO.endTime-ya.serverTime;Math.floor(t/3600/24)<1?this.actTime.text=x.formatDHMS(t,!1):this.actTime.text=x.formatDHMS(t,!0,!1)}else _t.removeFromSceond(this,this.updateTime),this.actTime.text="活动已结束"},i.updateLaojunDisplayTime=function(){if(0<this.timeStamp&&0<this.timeStamp-ya.serverTime){this.laojun.visible=this.countDown.visible=!0;var t=this.timeStamp-ya.serverTime;this.countDown.text=x.formatDHMS(t,!1)+"后消失"}else this.laojun.visible=this.countDown.visible=!1,_t.removeFromSceond(this,this.updateLaojunDisplayTime)},i.callBackUpdate=function(){this.update()},i.onTipFrame=function(){this.duble.y+=this.speed,this.imgHas.visible&&(this.imgHas.y+=this.speed),(this.duble.y<=566||586<=this.duble.y)&&(this.speed*=-1)},I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),e}(Yh),Ax=function(t){function e(){this.clip=null,this.currView=null,this.baguaFurnaceLaojun=null,this.baguaFurnaceXiantong=null,this.viewIndex=2,this.mainVO=null,this.rpVO=null,this.speed1=.5,this.actBriefs=null,this._tabStrs=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this)}w(e,"modules.activity.baguaFurnace.BaguaFurnaceView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.tab.itemClickFun=Q.create(this,this.onClickTab),this.tab.on("change",this,this.onTabChange),this.talisman.zOrder=100},i.onDisplay=function(){this.showByIndex(0),T.register("ROLE_EXCHANGE_BACK_SUCC",this,this.update),T.register("CHARGE_PAY_BACK",this,this.update),T.register("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE",this,this.update),_t.addToFrame(this,this.onTalismanFrame),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("ROLE_EXCHANGE_BACK_SUCC",this,this.update),T.remove("CHARGE_PAY_BACK",this,this.update),T.remove("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE",this,this.update),_t.removeFromFrame(this,this.onTalismanFrame)},i.onClickTab=function(t){this.tab.selectedIndex=t},i.showByIndex=function(t){this.tab.selectedIndex=t},i.onTabChange=function(){var t=this.actBriefs[this.tab.selectedIndex];if(t){var e=t.com_types[0];this.chooseView(e)}},i.chooseView=function(t){switch(this.sp.removeChildren(),t){case 2502:this.baguaFurnaceLaojun=this.baguaFurnaceLaojun||new kx,this.currView=this.baguaFurnaceLaojun,this.sp.addChild(this.baguaFurnaceLaojun),this.baguaFurnaceLaojun.actID=He.getInstance().baguaFurnaceLaojunAId,We.registerActCBFunc(this.baguaFurnaceLaojun.actID,this.currView,this.currView.callBackUpdate);break;case 2503:this.baguaFurnaceXiantong=this.baguaFurnaceXiantong||new Ex,this.currView=this.baguaFurnaceXiantong,this.sp.addChild(this.baguaFurnaceXiantong),this.baguaFurnaceXiantong.actID=He.getInstance().baguaFurnaceXiantongAId,We.registerActCBFunc(this.baguaFurnaceXiantong.actID,this.currView,this.currView.callBackUpdate)}this.update()},i.onClick=function(t){switch(t.target){case this.closeBtn1:case this.closeBtn2:this.closeWindow();break;case this.immediateBtn:this.setViewIndex(2),this.update()}},i.update=function(){if(this.initData(),1==this.viewIndex){var t=!1;if(this.actBriefs&&this.actBriefs.length)for(var e=0;e<this.actBriefs.length;e++)2502==this.actBriefs[e].com_types[0]&&(t=!0);t&&(this.pagePreview.visible=!0,this.box.visible=!1,this.clip=this.clip||new b,this.clip.stop(),this.clip.loadAndPlay("moduleEffect/danlu","default",0,!0),this.clip.pos(350,415),this.clip.parent||this.pagePreview.addChild(this.clip),this.updateTalimans(),this.currView&&(Da.ins().firstOpen=!1))}else this.pagePreview.visible=!1,this.box.visible=!0;this.updateRedPoint(),this.currView||this.onTabChange(),this.currView&&this.currView.update()},i.callBackUpdate=function(){},i.updateRedPoint=function(){this.hasTimes?Nt.hide("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN"):Nt.show("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN")},i.setViewIndex=function(t){this.viewIndex=t},i.initData=function(){this.mainVO=null,this.rpVO=null,this.mainVO=We.getActDetailByActID(He.getInstance().baguaFurnaceLaojunAId),this.rpVO=We.getActDetailByActID(He.getInstance().baguaFurnaceXiantongAId)},i.updateTalimans=function(){if(this.mainVO&&this.mainVO.conditions&&this.mainVO.conditions[0]){var t=this.mainVO.conditions[0].lucyGoodsID;this.talisman.skin="modules/act/baguaFurnace/talisman"+t+".png",this.txtTalisman.skin="modules/act/baguaFurnace/txtTalisman"+t+".png"}},i.onTalismanFrame=function(){this.talisman.y+=this.speed1,(this.talisman.y<=-15||5<=this.talisman.y)&&(this.speed1*=-1)},i.setTabStrs=function(){this.actBriefs=[];var t=-1,e=We.getActInfoBriefs(this._iconID);this._tabStrs="";for(var i=0;i<e.length;i++)2502==e[i].com_types[0]?this.actBriefs.unshift(e[i]):2503==e[i].com_types[0]&&this.actBriefs.push(e[i]);for(var s=0;s<this.actBriefs.length;s++)2502==this.actBriefs[s].com_types[0]?(0<this._tabStrs.length&&(this._tabStrs+=","),this._tabStrs+="老君秘宝"):2503==this.actBriefs[s].com_types[0]&&(0<this._tabStrs.length&&(this._tabStrs+=","),this._tabStrs+="仙童秘宝",t=s);this.tab.labels=this._tabStrs,0<=t&&Nt.register("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN",this.tab.items[t],new Tt(19,-10))},I(0,i,"hasTimes",function(){if(this.rpVO)for(var t=0;t<this.rpVO.conditions.length;t++)if(0<=this.rpVO.conditions[t].canBuyNum)return!0;return!1}),I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(Xh),Ex=function(t){function e(){this.bar2=null,this.mainVO=null,this.btnType=NaN,this.imgPro=null,this.imgRec=null,this.baguaFurnaceTreasureDialog=null,this.speed=.8,this._actID=NaN,e.__super.call(this)}w(e,"modules.activity.baguaFurnace.BaguaFurnaceXiantongView",t);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.bar2=new p(0,0,367,0,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",20),this.spPro.addChild(this.bar2),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.list1.mouseEnabled=!0,this.list1.itemRender=Tx,this.list1.spaceX=-16,this.list1.spaceY=-16,this.list2.hScrollBarSkin="",this.list2.mouseEnabled=!0,this.list2.itemRender=Tx,this.list2.spaceX=-14,Nt.register("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN",this.gainBtn,new Tt(19,-10))},i.onDisplay=function(){T.register("ACT_BOX_OPEN",this,this.getLotteryItemArr),T.register("UPDATE_ACT_FAIRY_ITEM_INFO",this,this.getPreviewItemArr),T.register("UPDATE_ACT_BOX_LOG_INFO",this,this.showBoxLogInfoImgs),T.register("ACT_BAGUA_FURNACE_PROGRESSBAR",this,this.updateProgressBar),_t.addToSecond(this,this.updateTime),_t.addToFrame(this,this.onTipFrame),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("ACT_BOX_OPEN",this,this.getLotteryItemArr),T.remove("UPDATE_ACT_FAIRY_ITEM_INFO",this,this.getPreviewItemArr),T.remove("UPDATE_ACT_BOX_LOG_INFO",this,this.showBoxLogInfoImgs),T.remove("ACT_BAGUA_FURNACE_PROGRESSBAR",this,this.updateProgressBar),_t.removeFromSceond(this,this.updateTime),_t.removeFromFrame(this,this.onTipFrame)},i.initData=function(){this.mainVO=null,this.mainVO=We.getActDetailByActID(He.getInstance().baguaFurnaceXiantongAId)},i.getLotteryItemArr=function(t){Da.ins().lotteryItemArr_Xiantong=t[0],this.updateList1(!0),this.updateImgHas(),Da.ins().toActDetail(this._actID)},i.getPreviewItemArr=function(t){Da.ins().previewItemArr_Xiantong=t,this.updateList2(),this.updateImgHas(),this.updateProgressBar()},i.update=function(){if(this.initData(),this.mainVO){this.des.innerHTML=Z.span(this.mainVO.conditions[0].desc,"#621e09",22),this.desTip.innerHTML=Z.span("<span>活动说明：</span>","#621e09",22,!0);var t=this.mainVO.conditions[0].goodId;this.fireNum.text=xo.getGoodsNumByTypeID(t)+""}this.updateList1(!1),this.updateList2(),this.updateRedPoint(),Ja.ins().toRoleActFairySelfLog(He.getInstance().baguaFurnaceXiantongAId)},i.updateList1=function(t){var l=this;if(Da.ins().lotteryItemArr_Xiantong&&Da.ins().lotteryItemArr_Xiantong.length<=0||!Da.ins().lotteryItemArr_Xiantong)this.list1.visible=this.light.visible=this.extra.visible=this.extraFire.visible=!1;else{this.list1.visible=this.light.visible=this.extra.visible=this.extraFire.visible=!0;for(var e=[],i=0;i<11;i++)if(Da.ins().lotteryItemArr_Xiantong&&Da.ins().lotteryItemArr_Xiantong[i]){var s=Da.ins().lotteryItemArr_Xiantong[i];e.push({typeID:s.id,num:s.val})}else e.push({typeID:0,num:0});var r=new Tx;if(Da.ins().lotteryItemArr_Xiantong&&Da.ins().lotteryItemArr_Xiantong[10]){s=Da.ins().lotteryItemArr_Xiantong[10];r.dataSource={typeID:s.id,num:s.val},this.light.visible=this.extra.visible=!0}else r.dataSource={typeID:0,num:0},this.light.visible=this.extra.visible=!1;this.extraFire.removeChildren(),this.extraFire.addChild(r),this.list1.dataSource=e;for(i=0;i<this.list1.content._childs.length;i++)i<5&&(this.list1.content._childs[4-i].x=26*(5-i)+this.list1.content._childs[i].width*(5-i-1)-36*(5-i-1)+10);if(0<e[0].typeID&&e[2].typeID<=0){var n=this.list1.content._childs[0].x;this.list1.content._childs[0].x=this.list1.content._childs[2].x,this.list1.content._childs[2].x=n}t&&h.timer.callLater(this,function(){for(var t=l.list1.getChildAt(0),e=0;e<t.numChildren;e++){var i=t.getChildAt(e),s=new et(i.imgIcon.skin);s.x=297,s.y=242,s.scaleX=i.imgIcon.scaleX,s.scaleY=i.imgIcon.scaleY,l.list1.parent.addChild(s),i.imgIcon.visible=!1;var n=this;function o(t,e){var i=Q.create(n,function(){e.removeSelf(),t.imgIcon.visible=!0});ie.to(e,{x:t.x+l.list1.x,y:t.y+l.list1.y},200,null,i)}o(i,s)}var a=r.imgIcon;a.x=-275,a.y=176,ie.to(a,{x:0,y:0},300)})}},i.updateList2=function(){if(Da.ins().previewItemArr_Xiantong){for(var t=[],e=0;e<Da.ins().previewItemArr_Xiantong.length;e++){var i=Da.ins().previewItemArr_Xiantong[e];t.push({typeID:i.id,num:i.val})}this.list2.dataSource=t;for(e=0;e<this.list2.content._childs.length;e++)this.list2.content._childs[e].y=10}},i.updateRedPoint=function(){this.hasTimes?Nt.hide("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN"):Nt.show("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_MAIN")},i.updateImgHas=function(){this.hasTaliman()?this.imgHas.visible=!0:this.imgHas.visible=!1},i.hasTaliman=function(){if(this.mainVO&&Da.ins().previewItemArr_Xiantong&&0<Da.ins().previewItemArr_Xiantong.length){var t=Da.ins().previewItemArr_Xiantong[0];return!!(0<xo.getGoodsNumByTypeID(t.id)||Rn.getTalimanIsActiveByID(t.id))}return!1},i.updateProgressBar=function(){var t="",e=0,i=0;if(this.mainVO=We.getActDetailByActID(He.getInstance().baguaFurnaceXiantongAId),this.mainVO)for(var s=this.mainVO.conditions,n=0;n<s.length;n++)e=s[n].timestamp>e?s[n].timestamp:e,i=s[n].lucyGoodsID>i?s[n].lucyGoodsID:i;if(Da.ins().previewItemArr_Xiantong&&0<Da.ins().previewItemArr_Xiantong.length){var o=Da.ins().previewItemArr_Xiantong[0];t=ur.getItem(o.id).title}(i-=2)<e||this.hasTaliman()?(this.txtDisplay.visible=!0,this.txtDisplay.text="已获得"+t+"法宝",this.bar2.setTextvisible(!1),e=i-.1):e==i?(this.txtDisplay.visible=!0,this.txtDisplay.text="期望值已满",this.bar2.setTextvisible(!1),e=i-.1):(this.txtDisplay.visible=!1,this.bar2.setTextvisible(!0)),this.bar2.setValuePercent(e,i)},i.onClick=function(t){switch(t.target){case this.help:OF.ins.showMessage(this.mainVO.conditions[0].help);break;case this.gainBtn:this.openXiantongDialog();break;case this.xiantongBtn:this.btnType=1,this.btnBuyClick();break;case this.laojunBtn:this.btnType=2,this.btnBuyClick()}},i.btnBuyClick=function(){if(null!=this.mainVO){var t=xo.getGoodsNumByTypeID(this.mainVO.conditions[0].goodId),e=new Ee;1==this.btnType&&t<=0||2==this.btnType&&t<10?(e.msg=Z.span("您的","#621e09")+Z.span("丹料数量不足","#e8c63f")+Z.span("请问是否前往获得？","#621e09"),e.yesCaller=this,e.yesLabel="确定",e.noLabel="取消",e.yesFun=this.openXiantongDialog,e.key="XiantongFurnaceOne"):(e.msg=Z.span("是否花费","#621e09")+Z.span("丹料×","#e8c63f")+Z.span(this.mainVO.conditions[this.btnType-1].goodNum,"#e8c63f")+Z.span("(剩余","#e8c63f")+Z.span(t+"","#e8c63f")+Z.span("个)","#e8c63f")+Z.span("进行","#621e09")+Z.span(this.mainVO.conditions[this.btnType-1].lotteryTimes,"#621e09")+Z.span("次抽奖","#621e09"),e.yesCaller=this,e.yesLabel="确定",e.noLabel="取消",e.yesFun=this.drawLottery,e.key="XiantongFurnaceTen"),EF.showVO(e)}},i.drawLottery=function(){Da.ins().toGain(this.mainVO.actID,this.mainVO.conditions[this.btnType-1].conditionId)},i.showBoxLogInfoImgs=function(){this.mainVO&&(null!=this.imgPro&&this.page.removeChild(this.imgPro),this.imgPro=Ja.ins().createCheckShowIcon(1,10003,this.page,590,21,this.mainVO.actID),null!=this.imgRec&&this.page.removeChild(this.imgRec),this.imgRec=Ja.ins().createCheckShowIcon(2,10003,this.page,590,70,this.mainVO.actID))},i.updateTime=function(){if(this.mainVO&&this.mainVO.endTime>ya.serverTime){var t=this.mainVO.endTime-ya.serverTime;Math.floor(t/3600/24)<1?this.actTime.text=x.formatDHMS(t,!1):this.actTime.text=x.formatDHMS(t,!0,!1)}else _t.removeFromSceond(this,this.updateTime),this.actTime.text="活动已结束"},i.callBackUpdate=function(){this.update()},i.openXiantongDialog=function(){this.baguaFurnaceTreasureDialog=this.baguaFurnaceTreasureDialog||new RF,this.baguaFurnaceTreasureDialog.setViewType(3),this.baguaFurnaceTreasureDialog.openWindow(),this.baguaFurnaceTreasureDialog.update([1193,1184,1185],[10201749,10201750,10201751])},i.onTipFrame=function(){this.duble.y+=this.speed,this.imgHas.visible&&(this.imgHas.y+=this.speed),(this.duble.y<=566||586<=this.duble.y)&&(this.speed*=-1)},I(0,i,"hasTimes",function(){if(this.mainVO)for(var t=0;t<this.mainVO.conditions.length;t++)if(0<=this.mainVO.conditions[t].canBuyNum)return!0;return!1}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),e}(Kh),Rx=function(t){function e(){this._helpStr=null,this._endTime=0,e.__super.call(this),this.txtDesc.style.fontSize=24,this.txtDesc.style.color="#621e09",this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.activity.billboard.Billboard1",jh);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgHelp:OF.ins.showMessage(this._helpStr)}},i.onDisplay=function(){this.off("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),_t.addToSecond(this,this.loopTime)},i.loopTime=function(){this._endTime>ya.serverTime?this.txtLeftTime.text=x.formatDHMS(this._endTime-ya.serverTime):(_t.removeFromSceond(this,this.loopTime),this.txtLeftTime.text="活动已结束")},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay),_t.removeFromSceond(this,this.loopTime)},I(0,i,"desc",null,function(t){this.txtDesc.innerHTML=t}),I(0,i,"endTime",null,function(t){this._endTime=t,this.displayedInStage&&_t.addToSecond(this,this.loopTime)}),I(0,i,"bgSkin",null,function(t){this.imgBg.skin=t}),I(0,i,"helpStr",null,function(t){this._helpStr=t}),I(0,i,"showHelp",null,function(t){this.imgHelp.visible=t}),e}(),Ox=function(t){function e(){this.materialItem=null,this.productItem=null,this.bcEffect=null,this.alertStr=null,this.isWish=!1,this.isBagua=!1,this._data=null,e.__super.call(this),this.materialItem=new Vx,this.materialItem.pos(145,22),this.addChild(this.materialItem),this.productItem=new Ah(91,95,!1,!0,!0,!1),this.productItem.pos(355,22),this.addChild(this.productItem),this.btnExchange.on("click",this,this.onClick),this.bcEffect=b.getOne(),this.bcEffect.mouseEnabled=!1,this.bcEffect.visible=!1,this.bcEffect.pos(this.productItem.x+90,this.productItem.y+93),this.addChild(this.bcEffect)}w(e,"modules.activity.exchange.view.ActExchangeItem1",Qh);var i=e.prototype;return i.onClick=function(){var t=this._data.products[0].type_id,e=new Ye;e.goodsTypeID=t,e.defaultCaller=Lo,e.defaultFun=Lo.showSecAlert,e.defaultArgs=[this.alertStr,this,this.getExChange,[],"exchange"],e.yesCaller=this,e.yesFun=this.getExChange,Xe.ins().checkRepeatAlert(e)},i.getExChange=function(){Da.ins().toGain(this._data.actID,this._data.conID)},i.updateBtnExchange=function(){if(this._data.getTime==this._data.maxTime)this.btnExchange.label="已达上限",this.btnExchange.labelColors="#f5e1cd,#f5e1cd,#f5e1cd",this.btnEnable=!1,this.imgRedPoint.visible=!1;else{var t=this._data.materials[0];xo.getGoodsNumByTypeID(t.type_id)<t.num?(this.btnExchange.label="代币不足",this.btnExchange.labelColors="#f5e1cd,#f5e1cd,#f5e1cd",this.btnEnable=!1,this.imgRedPoint.visible=!1):(this.btnExchange.label="兑换",this.btnExchange.labelColors="#ffffff,#f8fdaa,#b8b9b8",this.btnEnable=!0,this.imgRedPoint.visible=!0,this.checkMask())}},i.checkMask=function(){var t=-1;if(this.isWish)t=3;else{if(!this.isBagua)return void console.warn("活动兑换物品未知活动类型！！！");t=4}var e=this._data.products[0].type_id;vi.getIsMask(t,e)&&(this.imgRedPoint.visible=!1)},I(0,i,"btnEnable",null,function(t){yt.isWX||yt.isQQ?this.btnExchange.disabled=!t:(this.btnExchange.state=t?0:2,this.btnExchange.mouseEnabled=t)}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t){var e=t.materials[0];this.materialItem.dataSource=[e.type_id,e.num];var i=t.products[0];this.productItem.dataSource=[i.type_id,i.num],1==i.reserve?(this.bcEffect.visible=!0,this.bcEffect.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0)):this.bcEffect.visible=!1,9999==t.maxTime?this.txtExchangeNum.visible=!1:t.getTime==t.maxTime?this.txtExchangeNum.color="#fa291e":this.txtExchangeNum.color="#f8e715",this.txtExchangeNum.text="已兑换："+t.getTime+"/"+t.maxTime;var s=new Object;s.className="p_tkv",s.val=e.num,s.type=5,s.id=e.type_id;var n=ur.getRewardByTkv(s),o="";n&&(o=n.name);var a=new Object;a.className="p_tkv",a.val=i.num,a.type=5,a.id=i.type_id;var l=ur.getRewardByTkv(a),r="";l&&(r=l.name),this.alertStr=Z.span("是否使用"+e.num+"个","#5d3924")+Z.span(o,"#F7EF5F")+Z.span("兑换"+i.num+"个","#5d3924")+Z.span(r,"#F7EF5F"),this.updateBtnExchange()}}),e}(),Lx=function(t){function e(){this.isWish=!1,this.isBagua=!1,this._data=null,this.clipArr=null,this.lackNum=0,e.__super.call(this),this.btnExchange.on("click",this,this.onClick)}w(e,"modules.activity.exchange.view.ActExchangeItem2",zh);var i=e.prototype;return i.onClick=function(){this._data&&Da.ins().toGain(this._data.actID,this._data.conID)},i.updateBtnExchange=function(){this._data.getTime==this._data.maxTime?(this.btnExchange.label="已达上限",this.btnExchange.labelColors="#f5e1cd,#f5e1cd,#f5e1cd",this.btnEnable=!1,this.imgRedPoint.visible=!1):0<this.lackNum?(this.btnExchange.label="代币不足",this.btnExchange.labelColors="#f5e1cd,#f5e1cd,#f5e1cd",this.btnEnable=!1,this.imgRedPoint.visible=!1):(this.btnExchange.label="兑换",this.btnExchange.labelColors="#ffffff,#f8fdaa,#b8b9b8",this.btnEnable=!0,this.imgRedPoint.visible=!0)},i.cheakMask=function(){var t=-1;this.isWish?t=3:this.isBagua?t=4:console.warn("活动兑换物品未知活动类型！！！");var e=this._data.products[0].type_id;vi.getIsMask(t,e)&&(this.imgRedPoint.visible=!1)},I(0,i,"btnEnable",null,function(t){yt.isWX||yt.isQQ?this.btnExchange.disabled=!t:(this.btnExchange.state=t?0:2,this.btnExchange.mouseEnabled=t)}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t){var e,i;this.spItems.removeChildren(),this.lackNum=t.materials.length;for(var s,n,o=0;o<t.materials.length;o++)(i=new Vx).scale(.9,.9,!0),i.pos(5+85*o,30),this.spItems.addChild(i),e=t.materials[o],i.dataSource=[e.type_id,e.num],xo.getGoodsNumByTypeID(e.type_id)>=e.num&&this.lackNum--;this.clipArr=this.clipArr||[];for(var a=t.products.length-1;0<=a;a--)if((n=new Ah(91,95,!1,!0,!0,!1,100)).scale(.9,.9,!0),n.pos(this.btnExchange.x-100,30),this.spItems.addChild(n),s=t.products[a],n.dataSource=[s.type_id,s.num],1==s.reserve){this.clipArr[a]=this.clipArr[a]||b.getOne();var l=this.clipArr[a];l.mouseEnabled=!1,l.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),l.pos(n.x+45,n.y+87),l.scale(.95,.95),this.addChild(l)}n&&(this.imgExchange.x=n.x-95),9999==t.maxTime?this.txtExchangeNum.visible=!1:t.getTime==t.maxTime?this.txtExchangeNum.color="#fa291e":this.txtExchangeNum.color="#f8e715",this.txtExchangeNum.text="已兑换："+t.getTime+"/"+t.maxTime,this.updateBtnExchange()}}),e}(),Dx=function(t){function e(){this.txtInfo=null,this.spReward=null,e.__super.call(this)}return w(e,"ui.modules.exercise.biography.ExerBiographyBountyRewardTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/biography/ExerBiographyBountyRewardTip")},e}(),Nx=function(t){function e(){this.board=null,this.itemArr=null,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this),this.list.vScrollBarSkin="",this.board=new Rx,this.board.pos(0,5),this.addChild(this.board)}w(e,"modules.activity.exchange.view.ActExchangeView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.update=function(){if(this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO){0<this.skinID?this.board.bgSkin="modules/act/exchange/skin"+this.skinID+"/exchangeBg.png":this.board.bgSkin="modules/act/exchange/exchangeBg.png",this.board.desc=this.curVO.desc,this.board.helpStr=this.curVO.help,this.board.endTime=this.curVO.endTime,this.itemArr=this.itemArr||[],this.curVO.items.sort(this.memSortFun);for(var t,e=this.curVO.items.length,i=0,s=0;s<e;s++)12!=(t=this.curVO.items[s]).state&&(1401==this.typeID[0]?this.itemArr[s]=this.itemArr[s]||new Ox:this.itemArr[s]=this.itemArr[s]||new Lx,this.itemArr[s].x=0,this.itemArr[s].y=155*i,this.itemArr[s].data=t,this.list.addChild(this.itemArr[s]),i++)}},i.memSortFun=function(t,e){return t.state<e.state?1:t.state>e.state?-1:t.conID<e.conID?1:t.conID>e.conID?-1:0},i.callBackUpdate=function(){this.update()},i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}($h),Vx=function(t){function e(){this._data=null,e.__super.call(this),this.txtInfo.style.align="center",this.on("click",this,this.onClick)}w(e,"modules.activity.exchange.view.ACTGoodsItem",t);var i=e.prototype;return i.onClick=function(t){if(this._data){var e=ur.getItem(this._data[0]);e.tempNum=this._data[1],Ae.show(e,"BASE_GOODS_TIP")}},i.update=function(){var t,e=this._data[0],i=this._data[1],s=ur.getItem(e);this.imgBg.skin="com/ui/goodsBgs"+s.color+".png",""!=s.path?this.imgIcon.skin="modules/goods/maxico/"+s.path+".png":this.imgIcon.skin="modules/goods/maxico/"+e+".png",this.imgIcon.scale(.9,.9);var n=xo.getGoodsNumByTypeID(e);t=i<=n?Z.span(n+"","#96f254"):Z.span(n+"","#fa291e"),this.txtInfo.innerHTML=t+Z.span("/"+i,"#f4f1b2")},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Zh),Bx=function(t){function e(){this._data=null,this._tagIndex=0,e.__super.call(this),this.on("click",this,this.onClick),this.initCardBG()}w(e,"modules.activity.fortuneDay.FortuneDayCard",t);var i=e.prototype;return i.initCardBG=function(){this.cardBg.skin="modules/act/fortuneDay/bgCardBack.png"},i.onClick=function(t){},i.update=function(){},i.updateShow=function(t){void 0===t&&(t=-1);var e=0;if(t<0?e=ai.luckyEvent.event_id:0<ai.showEventArr.length&&(e=ai.showEventArr[t]),0<=e){var i=ai.getConfigVOById(e);if(null==i)return;var s=i.event_type;1==s?(this.missionTxt.text="",this.origCost.text="原价:"+i.price,this.preCost.text="现价:"+i.need,this.goldimg1.visible=!0,this.goldimg1.x=this.origCost.width+this.origCost.x+5,this.goldimg2.visible=!0,this.goldimg2.x=this.preCost.width+this.preCost.x+5):2==s?(this.missionTxt.text=i.description,this.origCost.text="",this.preCost.text="",this.goldimg1.visible=!1,this.goldimg2.visible=!1):3==s&&(this.missionTxt.text="",this.origCost.text=Bt.isFanTi?"原价:"+i.price:Bt.isXianLai?"原价:"+i.price+"钻石":"原价:"+i.price+"元",this.preCost.text=Bt.isFanTi?"现价:"+i.need:Bt.isXianLai?"现价:"+i.need+"钻石":"现价:"+i.need+"元",this.goldimg1.visible=!!Bt.isFanTi,this.goldimg2.visible=!!Bt.isFanTi,this.goldimg1.visible&&this.goldimg2.visible&&(this.goldimg1.skin="com/ui/godcoin.png",this.goldimg2.skin="com/ui/godcoin.png")),this.nameTxt.text=i.name;var n=new Dh;n.txtName.visible=!1,n.mouseEnabled=!0,n.name="";var o=new Object;o.className="p_tkv",o.type=5,o.id=i.rewardInfo[0].goodsID,o.val=i.rewardInfo[0].num,n.setDrop(o),n.pos(5,5),n.scale(.7,.7),this.itemSp.addChild(n)}},i.turnCard=function(){ie.to(this.cardBg,{scaleX:0},200,A.linearIn,Q.create(this,function(){this.cardBg.skin="modules/act/fortuneDay/cardBGSmall.png",this.cardContxtSp.visible=!0,ie.to(this.cardBg,{scaleX:1},200,A.linearIn)}))},i.turnAndTurnBack=function(){this.turnCard(),_t.setTimeout(this,this.turnToBack,null,modules.activity.fortuneDay.FortuneDayCard.TURN_WAIT)},i.turnToBack=function(){ie.to(this.cardBg,{scaleX:0},200,A.linearIn,Q.create(this,function(){this.initCardBG(),this.cardContxtSp.visible=!1,ie.to(this.cardBg,{scaleX:1},200,A.linearIn)})),_t.setTimeout(this,this.moveToCenter,null,modules.activity.fortuneDay.FortuneDayCard.TURN_BACK_TIME)},i.moveToCenter=function(){ie.to(this,{x:315-this.width/2,y:270-this.height/2},modules.activity.fortuneDay.FortuneDayCard.MOVE_TIME,A.backIn,Q.create(null,this.moveEnd))},i.delayMoveToCenter=function(){var t=modules.activity.fortuneDay.FortuneDayCard.TURN_BACK_TIME+modules.activity.fortuneDay.FortuneDayCard.TURN_WAIT;_t.setTimeout(this,this.moveToCenter,null,t)},i.moveEnd=function(){T.dispatch("ACT_FORTUNE_DAY_CARD_MOVE")},I(0,i,"uiClass",function(){return"FortuneCard"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),I(0,i,"tagIndex",function(){return this._tagIndex},function(t){this._tagIndex=0<=t?t:0}),e.TURN_WAIT=1e3,e.TURN_BACK_TIME=500,e.MOVE_TIME=500,e}(Jh),Mx=function(t){function e(){this.cardArr=[],this.cardMoveEndCount=0,this._typeID=null,this._actID=null,this._iconID=NaN,e.__super.call(this)}w(e,"modules.activity.fortuneDay.FortuneDayView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop),T.register("ACT_FORTUNE_DAY_CARD_MOVE",this,this.cardMoveEnd),T.register("ACT_FORTUNE_DAT_GET_EVENT",this,this.showCard),T.register("ACT_FORTUNE_DAY_GET_INFO_DISPLAY",this,this.update),this.on("undisplay",this,this.onUnDisplay),T.dispatch("HIDE_FORTUNE_DAY_TIP_ON_ICON_LIST"),ai.isOpenTheFortuneDayPanel=!0},i.onUnDisplay=function(){T.remove("ACT_FORTUNE_DAY_CARD_MOVE",this,this.cardMoveEnd),T.remove("ACT_FORTUNE_DAT_GET_EVENT",this,this.showCard),T.remove("ACT_FORTUNE_DAY_GET_INFO_DISPLAY",this,this.update),_t.removeFromSceond(this,this.timeLoop),ai.isOpenTheFortuneDayPanel=!1},i.timeLoop=function(){var t=ai.startTime,e=ai.endTime,i=ya.serverTime;if(t<=i&&i<=e){var s=e-i;this.txtTime.text=x.formatDHMS(s)}else this.txtTime.text="",_t.removeFromSceond(this,this.timeLoop)},i.onClick=function(t){switch(t.target){case this.imgTip:OF.ins.showMessage('<span style="color: rgb(51, 51, 51); font-size: 24px;">1、好运从天降，幸运日送惊喜；</span><br/><span style="color: rgb(51, 51, 51); font-size: 24px;">2、翻开幸运牌完成任务即可领取奖励；</span><br/><span style="color: rgb(51, 51, 51); font-size: 24px;">3、活动期间，每天幸运日都会重置奖励；</span>');break;case this.getBtn:Ma.getInstance().toDoLuckyEvent();break;default:t.target instanceof modules.activity.fortuneDay.FortuneDayCard&&this.clickSelectCard(t.target)}},i.clickSelectCard=function(t){0==ai.selectCardsState&&(ai.selectCardsState=1,ai.selectCardIndex=t.tagIndex,Ma.getInstance().toLuckyGetEvent())},i.showCard=function(){var t=this.cardArr[ai.selectCardIndex];t&&(t.updateShow(),t.turnCard(),t.zOrder=10),_t.setTimeout(this,this.turnOtherCard,null,1e3)},i.turnOtherCard=function(){for(var t=this.cardArr.length,e=0,i=0;i<t;i++)i!=ai.selectCardIndex&&(this.cardArr[i].updateShow(e),this.cardArr[i].turnAndTurnBack(),e++);0<=ai.selectCardIndex&&this.cardArr[ai.selectCardIndex].delayMoveToCenter()},i.update=function(){var t=ai.luckyEvent;null==t?Ma.getInstance().toLuckyDetail():0!=t.event_id?(ai.selectCardsState=2,this.showSingleCard()):this.updateSelectCards()},i.updateSelectCards=function(){if(!(0<this.cardArr.length)){this.cardsList.visible=!0;for(var t=0;t<6;t++){var e=new Bx;e.pos(e.width*Math.floor(t/2)+30*Math.floor(t/2),e.height*Math.floor(t%2)+15*Math.floor(t%2)),e.tagIndex=t,this.cardsList.addChild(e),this.cardArr.push(e)}this.sigCardSp.visible=!1,ai.selectCardsState=0}},i.cardMoveEnd=function(){if(this.cardMoveEndCount++,this.cardMoveEndCount>=this.cardArr.length){ai.selectCardsState=2;for(var t=0;t<this.cardArr.length;t++)this.cardArr[t]&&this.cardArr[t].removeSelf();this.cardArr=[],this.showSingleCard()}},i.showSingleCard=function(){if(this.cardsList.visible=!1,2==ai.selectCardsState){var t=ai.luckyEvent.event_id,e=ai.luckyEvent.state,i=ai.luckyEvent.process;if(0!=t){var s=ai.getConfigVOById(t);if(null==s)return;this.sigCardSp.visible=!0;var n=s.event_type;if(1==n)this.missionTxt.text="",this.origCost.text="原价:"+s.price,this.preCost.text="现价:"+s.need,this.txtGetTime.text="购买次数:"+i+"/"+s.getTimes,this.goldimg1.visible=!0,this.goldimg1.visible=!0,this.goldimg1.x=this.origCost.width+this.origCost.x+10,this.goldimg2.x=this.preCost.width+this.preCost.x+10,0==e||1==e?this.getBtn.disabled=!1:2==e&&(this.getBtn.disabled=!0,this.getBtn.label="已购买",this.txtGetTime.text="购买次数:"+s.getTimes+"/"+s.getTimes);else if(2==n){this.origCost.text="",this.preCost.text="",this.missionTxt.text=s.description,this.getBtn.label=i+"/"+s.need,this.getBtn.y=287,this.txtGetTime.y=this.getBtn.y-this.txtGetTime.height,this.goldimg1.visible=!1,this.goldimg2.visible=!1;var o=s.rewardInfo[0],a=Number(o.goodsID),l=o.num,r=new Object;r.className="p_tkv",r.val=1,r.type=5,r.id=a;var h=ur.getRewardByTkv(r).title;this.txtGetTime.text="奖励:"+h+"×"+l,1==e?(this.getBtn.disabled=!1,this.getBtn.label="可领取"):0==e?this.getBtn.disabled=!0:2==e&&(this.getBtn.disabled=!0,this.getBtn.label="已完成")}else 3==n&&(this.missionTxt.text="",this.origCost.text=Bt.isFanTi?"原价:"+s.price+"仙尊币":Bt.isXianLai?"原价:"+s.price+"钻石":"原价:"+s.price+"元",this.preCost.text=Bt.isFanTi?"现价:"+s.need+"仙尊币":Bt.isXianLai?"现价:"+s.need+"钻石":"现价:"+s.need+"元",this.txtGetTime.text="购买次数:"+i+"/"+s.getTimes,this.goldimg1.visible=!1,this.goldimg2.visible=!1,0==e||1==e?this.getBtn.disabled=!1:2==e&&(this.getBtn.disabled=!0,this.getBtn.label="已购买",this.txtGetTime.text="购买次数:"+s.getTimes+"/"+s.getTimes));var u=new Dh;u.txtName.visible=!1,u.mouseEnabled=!0,u.name="";var c=new Object;c.className="p_tkv",c.type=5,c.id=s.rewardInfo[0].goodsID,pt.send(10070,1,"幸运日-展示物品",{item_id:c.id}),c.val=s.rewardInfo[0].num,u.setDrop(c),u.pos(8,10),u.on("click",this,this.showGoodInfo),this.itemSp.addChild(u),this.nameTxt.text=s.name}}},i.showGoodInfo=function(t){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")},i.callBackUpdate=function(){this.update()},I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e.CARD_COUNT=6,e}(tu),Fx=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick)}return w(e,"modules.activity.fortuneDay.FortuneTipView",eu),e.prototype.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btn:me.linkTo(11508),this.closeWindow()}},e}(),Ux=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),Bt.isFanTi?(this.buyBtn1.label="6仙尊幣",this.buyBtn2.label="12仙尊幣",this.buyBtn3.label="30仙尊幣",this.buyBtn4.label="50仙尊幣"):(this.buyBtn1.label="6元",this.buyBtn2.label="12元",this.buyBtn3.label="30元",this.buyBtn4.label="50元")}w(e,"modules.activity.huxian.HuXianChargeView",iu);var i=e.prototype;return i.onDisplay=function(){},i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn1:this.closeWindow(),He.getInstance().updateFreeMallView();break;case this.buyBtn1:Bt.isFanTi?Nl.ins().toExchange(1090):Nl.ins().toPay(1090);break;case this.buyBtn2:Bt.isFanTi?Nl.ins().toExchange(1132):Nl.ins().toPay(1132);break;case this.buyBtn3:Bt.isFanTi?Nl.ins().toExchange(1091):Nl.ins().toPay(1091);break;case this.buyBtn4:Bt.isFanTi?Nl.ins().toExchange(1133):Nl.ins().toPay(1133)}},I(0,i,"uiClass",function(){return"HuxianChargeView"}),e}(),Gx=function(t){function e(){this.index=0,this.Index=0,this._data=null,this.isShow=!1,this.isClick=!1,this.itemPos=null,this.hasMonthCard=!1,this.HuxianNums=0,this.chargeView=null,this.item=null,this.itemVo=null,this.bmClip=null,this.hasMove=!1,e.__super.call(this),this.buyBtn.on("mousedown",this,this.onMouseDown)}w(e,"modules.activity.huxian.HuXianItem",t);var i=e.prototype;return i.onMouseDown=function(){if(this.HuxianNums=xo.getGoodsNumByType(xo.GOODS_ID,10201590),pt.send(10071,2,"狐仙秘宝-购买狐仙物品意图"),0<this._data[6]&&this.HuxianNums>=this._data[5]){var t=new Ye;t.goodsTypeID=this.itemVo.id,t.defaultCaller=Da.ins(),t.defaultFun=Da.ins().toGain,t.defaultArgs=[this._data[7],this._data[8]],t.yesCaller=Da.ins(),t.yesFun=Da.ins().toGain,t.yesArgs=[this._data[7],this._data[8]],Xe.ins().checkRepeatAlert(t)}else 0<this._data[6]&&this.HuxianNums<this._data[5]&&(this.chargeView=this.chargeView||new Ux,this.chargeView.openWindow());this.buyBtn.on("mouseup",this,this.onMouseUp),this.buyBtn.on("mouseout",this,this.onMouseUp)},i.onMouseUp=function(){T.dispatch("ACT_HUXIANITEM_UP"),this.buyBtn.off("mouseup",this,this.onMouseUp),this.buyBtn.off("mouseout",this,this.onMouseUp)},i.updatePos=function(){this.itemPos=this.localToGlobal(new Tt(0,0))},i.onUNDisplay=function(){_t.removeFromFrame(this,this.updatePos)},i.onClick=function(t){switch(t.target){case this.buyBtn:break;case this:this.isShow&&!this.hasMonthCard&&3==this.Index?me.linkTo(11431):this.isShow&&!this.isClick&&(this.isClick=!0,this.toClick())}},i.toClick=function(){var t=new Object;t.className="m_role_act_deblock_tos",t.act_id=this._data[7],t.condition_id=this._data[8],v.send(t)},i.update=function(){this.item=this.item||new Ah(105,105,!1,!0,!0,!1),this.itemVo=ur.getItem(this._data[0]),pt.send(10071,1,"狐仙秘宝-展示物品"),this.item.dataSource=[this._data[0],this._data[1]],this.item.pos(0,0),this.item.hideGoodsName(),this.itemSp.addChild(this.item),this.nameTxt.text=this.itemVo.name,this.priPrice.text="原价："+this._data[4],this.prePrice.text="现价："+this._data[5],1==this._data[2]&&(this.bmClip=this.bmClip||b.getOne(),this.bmClip.mouseEnabled=!1,this.bmClip.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.bmClip.pos(this.item.x+90,this.item.y+113),this.bmClip.scaleX=1.2,this.bmClip.scaleY=1.2,this.itemSp.addChild(this.bmClip)),this.isClick=1==this._data[9],3==this.Index&&this.hasMonthCard?this.disImg.skin="modules/act/huxian/monthCard.png":this.disImg.skin="modules/act/huxian/discount_"+this._data[3]+".png",this.ownImg.visible=this.checkHas(this.itemVo.id)},i.show=function(){this.isShow=!0,3!=this.Index||this.hasMonthCard?this.isClick?(this.bg.visible=!0,this.bg.visible&&(this.y=-73),this.bg.scaleX=this.bg.scaleY=1,this.bg.pos(-50,0),this.sp2.visible=!0,this.sp1.scale(1,1),this.sp1.pos(53,200),this.bg1.visible=this.bg2.visible=!1,this.buyBtn.gray=!(0<this._data[6]),this.buyBtn.label=0<this._data[6]?"购买":"已购买",this.buyBtn.mouseEnabled=0<this._data[6]):(this.bg1.visible=!0,this.bg1.scaleX=this.bg1.scaleY=1.58,this.bg1.pos(-60,-104),this.bg.visible=this.bg2.visible=!1):(this.bg2.visible=!0,this.bg2.scaleX=this.bg2.scaleY=1.58,this.bg2.pos(-64,-104),this.hasMove=!0,this.bg.visible=this.bg1.visible=!1)},i.hide=function(){this.isShow=!1,3!=this.Index||this.hasMonthCard?(this.bg1.visible=!this.isClick,this.bg1.scaleX=this.bg1.scaleY=1.2,this.bg1.visible&&this.bg1.pos(-20,-25),this.bg.visible=!!this.isClick,this.bg.scaleX=this.bg.scaleY=.8,this.bg.visible&&this.isClick&&(this.bg.pos(-20,60),this.sp2.visible=!1,this.sp1.scale(1.2,1.2),this.sp1.pos(33,230),this.y=-73),this.bg2.visible=!1,3==this.Index&&this.hasMonthCard?this.tip.visible=!0:this.tip.visible=!1):(this.bg2.visible=!0,this.bg2.scaleX=this.bg2.scaleY=1.2,this.hasMove&&(this.bg2.pos(-10,-35),this.hasMove=!1),this.bg.visible=this.bg1.visible=!1)},i.checkHas=function(t){var e=ur.getItem(t),i=e.useType%1e3,s=xo.getGoodsNumByTypeID(t),n=0;switch(i){case 19:var o,a,l,r=pe.pals,h=parseInt(e.img),u=0;for(var c in r)(l=r[c])&&(o=oa.getFashionListDicByActID(l.pal_id))&&o.hasOwnProperty(h+"")&&u++;if(a=oa.getFashionTimesByTypeID(e.id),4<=s+u&&a<0)return!0;break;case 32:var d=parseInt(e.img);if(nn.getAnimalVO(d).isLoaded&&(n=1),1<=s+n)return!0;break;case 31:if(Rn.getTalimanIsActiveByID(e.id)&&(n=1),1<=s+n)return!0;break;case 37:var p=Un.getFootCfg(e.id),m=Un.getFootPrintVO(p.id);if(4<=s)return!0;if(m&&3<=m.purify_level)return!0;if(m){for(var f=m.purify_level;f<3;f++)n+=Un.getFootChangeCost(p.id,f+1);if(n<=s)return!0}break;case 34:if(4<=s+(n=Tn.getHasSpiritreNum(t+12e6)))return!0}return!1},I(0,i,"uiClass",function(){return"HuXianItemView"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._data=t,this.hasMonthCard=!!Ca.isHasCard(),this.update())}),e}(su),Hx=function(t){function u(){this._typeIDs=[],this._actIDs=[],this._iconID=0,this._skinId=0,this.helpStr=null,this.descStr=null,this.endTime=0,this.items=[],this.img=null,this.actIDS=[],this.actIDS1=[],this.startX=NaN,this.startY=NaN,this.CD=300,this.k=300,this.chargeView=null,this.curVO=null,this.curVO1=null,this.curVOArr=[],this.rewards=[],this.actId=0,this.conIds=[],u.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.pan.on("mousedown",this,this.onMouseDown)}w(u,"modules.activity.huxian.HuXianView",nu);var e=u.prototype;return h.imps(e,{"modules.activity.IActivityView":!0}),e.onMouseDown=function(t){this.startX=this.mouseX,this.startY=this.mouseY,this.pan.on("mousemove",this,this.onMouseMove),this.pan.on("mouseup",this,this.onMouseUp),this.pan.on("mouseout",this,this.onMouseUp)},e.onMouseUp=function(){this.pan.off("mousemove",this,this.onMouseMove),this.pan.off("mouseup",this,this.onMouseUp),this.pan.off("mouseout",this,this.onMouseUp);var t,e,i,s=this.mouseX,n=this.mouseY,o=(s-this.startX)/this.k,a=(n-this.startY)/this.k,l=o-Math.floor(o),r=(Math.floor(a),0),h=0;for(i in this.items)t=this.items[i],.4<=Math.abs(l)?(h=this.getIndex(t.index+Math.floor(o)+1),r=(1-Math.abs(l))*this.CD):(h=this.getIndex(t.index+Math.floor(o)),r=Math.abs(l)*this.CD),t.index=h,0==o&&t.on("click",t,t.onClick),e=u.ItemPos[h],ie.to(t,{x:e.x,y:e.y,zOrder:e.zor,scaleX:e.scale,scaleY:e.scale},r,null,Q.create(this,this.changeRp,null,!0))},e.changeRp=function(){var t,e;for(e in this.items).96<=(t=this.items[e]).scaleX?(this["rp"+(t.Index+1)].skin="modules/act/huxian/point1.png",t.show()):(this["rp"+(t.Index+1)].skin="modules/act/huxian/point.png",t.hide()),t.on("click",t,t.onClick)},e.onMouseMove=function(){var t,e,i,s,n=(this.mouseX-this.startX)/this.k,o=n-Math.floor(n),a=0,l=0,r=NaN;for(s in this.items)t=this.items[s],a=this.getIndex(t.index+Math.floor(n)+1),l=this.getIndex(t.index+Math.floor(n)),t.index=0<=t.index?t.index:t.index+4,e=u.ItemPos[l],i=u.ItemPos[a],t.pos(e.x+(i.x-e.x)*o,e.y+(i.y-e.y)*o),t.zOrder=i.zor,t.off("click",t,t.onClick),r=e.scale+(i.scale-e.scale)*o,t.scale(r,r)},e.getIndex=function(t){for(;t<0;)t+=4;for(;3<t;)t-=4;return t},e.onDisplay=function(){T.register("ACT_HUXIAN_UPDATE",this,this.update),T.register("ON_ACT_HUXIANVO_UPDATE",this,this.update),T.register("ACT_HUXIANCOIN_UPDATE",this,this.updateMoney),T.register("ACT_HUXIANCOIN_MONTHCARD",this,this.updateVo),T.register("ACT_HUXIANITEM_UP",this,this.onItemBuy),_t.addToSecond(this,this.updateTime),this.on("undisplay",this,this.unDisplay)},e.onItemBuy=function(){this.pan.off("mousemove",this,this.onMouseMove),this.pan.off("mouseup",this,this.onMouseUp),this.pan.off("mouseout",this,this.onMouseUp)},e.updateTime=function(){var t=86400-(ya.serverTime%86400+28800);0<t?this.limitTime.text=x.formatDHMS(t,!1,!0):t<0&&(this.limitTime.text=x.formatDHMS(86400+t,!1,!0))},e.unDisplay=function(){T.remove("ACT_HUXIAN_UPDATE",this,this.update),T.remove("ON_ACT_HUXIANVO_UPDATE",this,this.update),T.remove("ACT_HUXIANCOIN_UPDATE",this,this.updateMoney),T.remove("ACT_HUXIANCOIN_MONTHCARD",this,this.updateVo),_t.removeFromSceond(this,this.updateTime)},e.onClick=function(t){switch(t.target){case this.help:OF.ins.showMessage(this.helpStr);break;case this.closeBtn:case this.closeBtn1:this.closeWindow();break;case this.buyBtn:this.chargeView=this.chargeView||new Ux,this.chargeView.openWindow()}},e.updateVo=function(){Da.ins().toActDetail(this.actIDS[0]),Da.ins().toActDetail(this.actIDS1[0])},e.setID=function(t,e){this.actIDS=[t],this.actIDS1=[e]},e.updateMoney=function(){var t=xo.getGoodsNumByType(xo.GOODS_ID,10201590);this.money.text=t+""},e.update=function(){this.initItems(),this.changeRp()},e.initItems=function(){if(T.dispatch("ACT_ACTIVITY_ACTID",4,this.actIDS[0]),this.curVOArr=[],this.rewards=[],this.updateMoney(),this.curVO=We.getActDetailByActID(this.actIDS[0]),this.curVO1=We.getActDetailByActID(this.actIDS1[0]),this.curVO&&this.curVO.items){for(var t=this.curVO.items.length,e=0;e<t;e++)this.curVOArr[e]=new li,this.curVOArr[e].actID=this.curVO.items[e].actID,this.curVOArr[e].conID=this.curVO.items[e].conID,this.curVOArr[e].canBuyNum=this.curVO.items[e].canBuyNum,this.curVOArr[e].origPrice=this.curVO.items[e].origPrice,this.curVOArr[e].realPrice=this.curVO.items[e].realPrice,this.curVOArr[e].saleTag=this.curVO.items[e].saleTag,this.curVOArr[e].goods=this.curVO.items[e].goods,this.curVOArr[e].deblock=this.curVO.items[e].deblock,this.rewards[e]=new Object,this.rewards[e].className="p_act_goods",this.rewards[e]=this.curVOArr[e].goods[0],this.actId=this.curVOArr[e].actID,this.conIds[e]=this.curVOArr[e].conID;this.endTime=this.curVO.endTime,this.helpStr=this.curVO.rule,this.descStr=this.curVO.desc,this.des.innerHTML=this.descStr?this.descStr:"未配置活动展示介绍"}for(this.curVO1&&0<this.curVO1.items.length&&(this.curVOArr[3]=new ri,this.curVOArr[3].actID=this.curVO1.items[0].actID,this.curVOArr[3].conID=this.curVO1.items[0].conID,this.curVOArr[3].canBuyNum=this.curVO1.items[0].canBuyNum,this.curVOArr[3].origPrice=this.curVO1.items[0].origPrice,this.curVOArr[3].realPrice=this.curVO1.items[0].realPrice,this.curVOArr[3].saleTag=this.curVO1.items[0].saleTag,this.curVOArr[3].goods=this.curVO1.items[0].goods,this.curVOArr[3].deblock=this.curVO1.items[0].deblock,this.rewards[3]=new Object,this.rewards[3].className="p_act_goods",this.rewards[3]=this.curVOArr[3].goods[0]),this.items=[];0<this.pan.numChildren;)this.pan.getChildAt(0).removeSelf();for(var i,s=0;s<u.ItemPos.length;s++){i=new Gx;var n=u.ItemPos[s];i.pos(n.x,n.y),i.index=s,i.Index=s,i.zOrder=n.zor,i.scale(n.scale,n.scale);var o=new Object;if(o.className="p_act_goods",o=this.rewards[s],3==s){var a=new ri;a=this.curVOArr[s],o&&a&&(i.dataSource=[o.type_id,o.num,o.reserve,a.saleTag,a.origPrice,a.realPrice,a.canBuyNum,a.actID,a.conID,a.deblock])}else{var l=new li;l=this.curVOArr[s],o&&l&&(i.dataSource=[o.type_id,o.num,o.reserve,l.saleTag,l.origPrice,l.realPrice,l.canBuyNum,l.actID,l.conID,l.deblock])}this.pan.addChild(i),this.items.push(i)}},e.callBackUpdate=function(){},I(0,e,"typeID",function(){return this._typeIDs},function(t){this._typeIDs=t}),I(0,e,"actID",function(){return this._actIDs},function(t){this._actIDs=t}),I(0,e,"skinID",function(){return this._skinId},function(t){this._skinId=t}),I(0,e,"iconID",function(){return this._iconID},function(t){this._iconID=t}),_(u,["ItemPos",function(){return this.ItemPos=[{x:0,y:-18,scale:.95,zor:1},{x:220,y:-18,scale:1,zor:2},{x:460,y:-18,scale:.95,zor:1},{x:690,y:-18,scale:.95,zor:1}]}]),u}(),Wx=function(t){function e(){this._data=null,this._tagIndex=0,e.__super.call(this),this.on("click",this,this.onClick),this.initCardBG()}w(e,"modules.activity.luckyDay.LuckyDayCard",t);var i=e.prototype;return i.initCardBG=function(){this.cardBg.skin="modules/act/fortuneDay/bgCardBack.png"},i.onClick=function(t){},i.update=function(){},i.updateShow=function(t,e,i){void 0===t&&(t=-1),void 0===e&&(e=!1),void 0===i&&(i=-1);var s=We.getActDetailByActID(t);if(null!=s){var n=e?s.showItems[i]:s.targetID,o=ur.getItem(n);this.nameTxt.text=o.name;var a=new Dh;a.txtName.visible=!1,a.mouseEnabled=!0,a.name="";var l=new Object;l.className="p_tkv",l.type=5,l.id=o.id,a.setDrop(l),a.pos(5,5),a.scale(.7,.7);var r=e?s.showItems[i+1]:s.oPrice,h=e?s.showItems[i+2]:s.bPrice;0==s.consumeType?(this.missionTxt.text="",this.origCost.text="原价:"+r,this.preCost.text="现价:"+h,this.goldimg1.visible=!0,this.goldimg1.x=this.origCost.width+this.origCost.x+5,this.goldimg2.visible=!0,this.goldimg2.x=this.preCost.width+this.preCost.x+5):1==s.consumeType?(this.missionTxt.text=s.help,this.origCost.text="",this.preCost.text="",this.goldimg1.visible=!1,this.goldimg2.visible=!1):2==s.consumeType&&(this.missionTxt.text="",this.origCost.text=Bt.isFanTi?"原价:"+r:Bt.isXianLai?"原价:"+r+"钻石":"原价:"+r+"元",this.preCost.text=Bt.isFanTi?"现价:"+h:Bt.isXianLai?"现价:"+h+"钻石":"现价:"+h+"元",this.goldimg1.visible=Bt.isFanTi,this.goldimg2.visible=Bt.isFanTi,this.goldimg1.visible&&this.goldimg2.visible&&(this.goldimg1.skin="com/ui/godcoin.png",this.goldimg2.skin="com/ui/godcoin.png")),this.itemSp.addChild(a)}},i.turnCard=function(){ie.to(this.cardBg,{scaleX:0},200,A.linearIn,Q.create(this,function(){this.cardBg.skin="modules/act/fortuneDay/cardBGSmall.png",this.cardContxtSp.visible=!0,ie.to(this.cardBg,{scaleX:1},200,A.linearIn)}))},i.turnAndTurnBack=function(){this.turnCard(),_t.setTimeout(this,this.turnToBack,null,modules.activity.luckyDay.LuckyDayCard.TURN_WAIT)},i.turnToBack=function(){ie.to(this.cardBg,{scaleX:0},200,A.linearIn,Q.create(this,function(){this.initCardBG(),this.cardContxtSp.visible=!1,ie.to(this.cardBg,{scaleX:1},200,A.linearIn)})),_t.setTimeout(this,this.moveToCenter,null,modules.activity.luckyDay.LuckyDayCard.TURN_BACK_TIME)},i.moveToCenter=function(){ie.to(this,{x:315-this.width/2,y:270-this.height/2},modules.activity.luckyDay.LuckyDayCard.MOVE_TIME,A.backIn,Q.create(null,this.moveEnd))},i.delayMoveToCenter=function(){var t=modules.activity.luckyDay.LuckyDayCard.TURN_BACK_TIME+modules.activity.luckyDay.LuckyDayCard.TURN_WAIT;_t.setTimeout(this,this.moveToCenter,null,t)},i.moveEnd=function(){T.dispatch("ACT_LUCKY_DAY_CARD_MOVE")},I(0,i,"uiClass",function(){return"FortuneCard"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),I(0,i,"tagIndex",function(){return this._tagIndex},function(t){this._tagIndex=0<=t?t:0}),e.TURN_WAIT=1e3,e.TURN_BACK_TIME=500,e.MOVE_TIME=500,e}(Jh),qx=function(t){function e(){this.cardArr=[],this.moveEndCount=0,this.MOVE_END_FLAG=6,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.activity.luckyDay.LuckyDayView",tu);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.onDisplay=function(){this.update(),_t.addToSecond(this,this.timeLoop),T.register("ACT_LUCKY_DAY_CARD_MOVE",this,this.cardMoveEnd),T.register("ACT_FORTUNE_DAT_GET_EVENT",this,this.showCard),T.register("ACT_LUCKYDAY_UPDATE",this,this.update),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("ACT_FORTUNE_DAY_CARD_MOVE",this,this.cardMoveEnd),T.remove("ACT_FORTUNE_DAT_GET_EVENT",this,this.showCard),T.remove("ACT_LUCKYDAY_UPDATE",this,this.update),_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){if(this.curVO){var t=this.curVO.startTime,e=this.curVO.endTime,i=ya.serverTime;if(t<=i&&i<=e){var s=e-i;this.txtTime.text=x.formatDHMS(s)}else this.txtTime.text="",_t.removeFromSceond(this,this.timeLoop)}},i.cardMoveEnd=function(){if(this.moveEndCount++,this.moveEndCount==this.MOVE_END_FLAG){fi.selectCardsState=2,this.moveEndCount=0;var t=new Object;t.className="m_role_act_deblock_tos",t.act_id=this.actID[0],t.condition_id=this.curVO.conID;var e=Da.ins().luckyUgroup;T.dispatch("ICON_REDPOINT_UPDATE",e),v.send(t),this.showSingleCard()}},i.showCard=function(){var t=this.cardArr[fi.selectCardIndex];t&&(t.updateShow(this.curVO.actID),t.turnCard(),t.zOrder=10),_t.setTimeout(this,this.turnOtherCard,null,1e3)},i.turnOtherCard=function(){for(var t=this.cardArr.length,e=0,i=(this.curVO.showItems,0);i<t;i++)i!=fi.selectCardIndex&&(this.cardArr[i].updateShow(this.curVO.actID,!0,e),this.cardArr[i].turnAndTurnBack(),e+=3);0<=fi.selectCardIndex&&this.cardArr[fi.selectCardIndex].delayMoveToCenter()},i.update=function(){this.curVO=We.getActDetailByActID(this.actID[0]),T.dispatch("ACT_ACTIVITY_ACTID",5,this.actID[0]),fi.startTime=this.curVO.startTime,fi.endTime=this.curVO.endTime,this.curVO.todayDeblock?(fi.selectCardsState=2,this.showSingleCard()):this.updateSelectCards()},i.onClick=function(t){switch(t.target){case this.imgTip:OF.ins.showMessage('<span style="color: rgb(51, 51, 51); font-size: 24px;">1、好运从天降，幸运日送惊喜；</span><br/><span style="color: rgb(51, 51, 51); font-size: 24px;">2、翻开幸运牌完成任务即可领取奖励；</span><br/><span style="color: rgb(51, 51, 51); font-size: 24px;">3、活动期间，每天幸运日都会重置奖励；</span>');break;case this.getBtn:this.toGainItem();break;default:t.target instanceof modules.activity.luckyDay.LuckyDayCard&&this.clickSelectCard(t.target)}},i.toGainItem=function(){switch(this.curVO.consumeType){case 0:case 1:Da.ins().toGain(this.curVO.actID,this.curVO.conID);break;case 2:var t=this.curVO.payID;0<t&&(Bt.isFanTi?Nl.ins().toExchange(t):Nl.ins().toPay(t))}},i.clickSelectCard=function(t){0==fi.selectCardsState&&(fi.selectCardsState=1,fi.selectCardIndex=t.tagIndex,this.showCard())},i.updateSelectCards=function(){if(!(0<this.cardArr.length)){this.cardsList.visible=!0;for(var t=0;t<6;t++){var e=new Wx;e.pos(e.width*Math.floor(t/2)+30*Math.floor(t/2),e.height*Math.floor(t%2)+15*Math.floor(t%2)),e.tagIndex=t,this.cardsList.addChild(e),this.cardArr.push(e)}this.sigCardSp.visible=!1}},i.showSingleCard=function(){if(this.cardsList.visible=!1,2==fi.selectCardsState){var t=this.curVO.buyState,e=this.curVO;this.sigCardSp.visible=!0,0==e.consumeType?(this.missionTxt.text="",this.origCost.text="原价:"+e.oPrice,this.preCost.text="现价:"+e.bPrice,this.goldimg1.visible=!0,this.goldimg1.visible=!0,this.goldimg1.x=this.origCost.width+this.origCost.x+10,this.goldimg2.x=this.preCost.width+this.preCost.x+10,t?(this.getBtn.disabled=!0,this.getBtn.label="已购买",this.txtGetTime.text="购买次数:1/1"):(this.getBtn.visible=!1,this.txtGetTime.text="购买次数:0/1")):1==e.consumeType?(this.origCost.text="",this.preCost.text="",this.missionTxt.text=e.help,this.getBtn.y=287,this.txtGetTime.y=this.getBtn.y-this.txtGetTime.height,this.goldimg1.visible=!1,this.goldimg2.visible=!1,t?(this.getBtn.disabled=!0,this.getBtn.label="已兑换"):(this.getBtn.visible=!1,this.getBtn.label="兑换"),this.txtGetTime.text="兑换次数:1/1"):2==e.consumeType&&(this.missionTxt.text="",this.origCost.text=Bt.isFanTi?"原价:"+e.oPrice+"仙尊币":Bt.isXianLai?"原价:"+e.oPrice+"钻石":"原价:"+e.oPrice+"元",this.preCost.text=Bt.isFanTi?"现价:"+e.bPrice+"仙尊币":Bt.isXianLai?"现价:"+e.bPrice+"钻石":"现价:"+e.bPrice+"元",this.goldimg1.visible=!1,this.goldimg2.visible=!1,t?(this.getBtn.disabled=!0,this.getBtn.label="已购买",this.txtGetTime.text="购买次数:1/1"):(this.getBtn.visible=!1,this.txtGetTime.text="购买次数:0/1"));var i=new Dh;i.txtName.visible=!1,i.mouseEnabled=!0,i.name="";var s=new Object;s.className="p_tkv",s.type=5,s.id=e.targetID,i.setDrop(s),i.pos(8,10),i.on("click",this,this.showGoodInfo),this.itemSp.addChild(i),this.nameTxt.text=ur.getItem(e.targetID).name,t?(this.getBtn.disabled=!0,this.getBtn.label="已购买",this.txtGetTime.text="购买次数:1/1"):(this.getBtn.visible=!0,this.txtGetTime.text="购买次数:0/1")}},i.showGoodInfo=function(t){var e=t.target;e.data.tempNum=e.num||1,Ae.show(e.data,"BASE_GOODS_TIP")},i.callBackUpdate=function(){this.update()},I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),I(0,i,"uiClass",function(){return"FortuneDayView"}),I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),e.CARD_COUNT=6,e}(),Yx=function(t){function e(){this.txtName=null,this.imgIcon=null,this.txtDesc=null,this.txtNum=null,this.txtLvl=null,e.__super.call(this)}return w(e,"ui.modules.exercise.fightSoul.FightSoulTipsPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/fightSoul/FightSoulTipsPanel")},e}(),Xx=function(t){function e(){this.effShow=null,this.selectIndex=0,this.curVO=null,this.spClip=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,this.speed1=.5,e.__super.call(this),this.txtdes.style.color="#ffffff",this.txtdes.style.fontSize=26,this.txtdes.style.lineHeight=30,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.activity.productNotice.ActProductNoticeView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.onDisplay=function(){this.selectIndex=0},i.onClick=function(t){switch(t.target){case this.btnleft:this.selectIndex-=1,this.selectIndex<0&&(this.selectIndex=0),this.updateGoodsSprite(this.selectIndex);break;case this.btnright:this.selectIndex+=1,this.selectIndex>this.curVO.goods.length-1&&(this.selectIndex=this.curVO.goods.length-1),this.updateGoodsSprite(this.selectIndex);break;case this.btngo:this.gotoLinkId()}},i.update=function(){this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO&&this.updateGoodsSprite(0)},i.callBackUpdate=function(){this.update()},i.updateGoodsSprite=function(t){if(_t.removeFromFrame(this,this.onTalismanFrame),this.spClip&&this.spClip.removeSelf(),this.curVO){Da.ins().toActDetail(this.curVO.linkid[this.selectIndex]);var e=new Object;e.className="p_tkv",e.type=5,this.curVO&&this.curVO.goods&&this.curVO.goods[t]&&(e.id=this.curVO.goods[t]),this.curVO&&this.curVO.goods&&this.curVO.flash[t]&&(this.effShow=this.effShow||b.getOne(),this.effShow.pos(73,837),this.effShow.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.addChild(this.effShow),this.effShow.visible=1==this.curVO.flash[t]);var i=ur.getRewardByTkv(e);this.imghead.skin=i.realMaxico;var s=i.desc.split("<br>");this.txtdes.innerHTML=s[0],this.txtname.text=i.name;var n=i?i.useType%1e3:-1,o="",a="default",l=0,r=1.5,h=1.5;this.curVO&&this.curVO.scale&&this.curVO.scale[this.selectIndex]&&(r=h=Number(this.curVO.scale[this.selectIndex])/10);var u="0,0";switch(0<=s.length-1&&9!=n&&this.txtdes.appendHTML("<br>"+s[s.length-1]),0<=s.length-2&&31!=n&&this.txtdes.appendHTML("<br>"+s[s.length-2]),n){case 8:o="unit/title/"+i.img;break;case 32:o="unit/monster/"+i.img+"_3",a="stand",l=3;break;case 19:"2"==i.path[0]?(o=Pe.getRoleUnitSubFileStr(i.path)+i.path+"_sit_4",a="sit",l=4,u="0,4"):"1"==i.path[0]?(o=Pe.getWeaponUnitSubFileStr(i.path,"unit2")+i.path+"_4",a="stand",l=4,u="100,4"):"4"==i.path[0]&&(o="unit/wing/"+i.path+"2_4",a="stand",l=4,u="-9,57");break;case 9:o="unit/monster/"+i.img+"_attack_3",a="attack",l=3;break;case 37:var c=502e5;o="unit/effect/footEff_"+(c+=1e6*i.color+e.id%1e3),a="default",l=0;break;case 31:u="-215,-295",l=5,o="modules/act/baguaFurnace/talisman"+e.id+".png",_t.addToFrame(this,this.onTalismanFrame)}var d=u.split(","),p=parseInt(d[0]),m=parseInt(d[1]);5==l?(this.spClip=new et,this.spClip.skin=o):(this.spClip=new b,this.spClip.loadAndPlay(o,a,l,!0)),this.spClip.pos(p,m),this.spClip.scale(r,h),this.sp.addChild(this.spClip)}},i.createChildren=function(){t.prototype.createChildren.call(this)},i.gotoLinkId=function(){var t=We.getActIDInfoByActId(this.curVO.linkid[this.selectIndex]);if(t){var e=t[0],i=t[1];if(e){switch(i){case 1805:case 1806:T.dispatch("ON_ACT_HUXIANID1"),T.dispatch("ON_ACT_HUXIANID2"),T.dispatch("ON_ACT_HUXIANVO_UPDATE"),T.dispatch("ACT_HUXIAN",124);break;case 2502:T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR"),T.dispatch("ACT_BAGUAFURNACE");break;case 2503:T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR"),T.dispatch("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE"),T.dispatch("ACT_BAGUAFURNACE");break;case 1807:T.dispatch("BEASTS_BUY",118),T.dispatch("ON_ACT_BEAST_BUY");break;case 1809:T.dispatch("OPEN_FREE_MALL_PANEL"),T.dispatch("ON_ACT_FREE_MALL");break;default:var s=this.curVO.linkid[this.selectIndex];T.dispatch("OPEN_ACT_SPC_PANEL_BY_ACTID",e,s)}He.getInstance().closeActPanel(this.curVO.iconId)}else Jt.addTip("不存在该活动")}else He.getInstance().closeActPanel(this.curVO.iconId),Da.ins().toActDetail(this.curVO.linkid[this.selectIndex])},i.onTalismanFrame=function(){this.spClip.y+=this.speed1,(this.spClip.y<=-310||-280<=this.spClip.y)&&(this.speed1*=-1)},I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(ou),Kx=function(t){function s(t,e,i){this._actType=-1,this._modType=-1,this._isSelect=!1,this._name=null,s.__super.call(this),this._actType=t,this._modType=e,this._name=i,this.initChb(),this.update()}w(s,"modules.activity.RPControl.ActRpChbView",au);var e=s.prototype;return e.initChb=function(){this.chb.label=this._name,this._isSelect=ct.getItem(s.isSelectKey+"_"+this._actType+"_"+this._modType),this._isSelect="true"==this._isSelect,this.chb.on("click",this,this.onClick),this.update()},e.update=function(){this.chb.dataSource=this._isSelect,vi.updateMask(this._actType)},e.onClick=function(){this._isSelect=!this._isSelect,ct.setItem(s.isSelectKey+"_"+this._actType+"_"+this._modType,this._isSelect+""),this.update()},I(0,e,"uiClass",function(){return"PackRpChb"}),s.isSelectKey="ActRpChbView",s}(),jx=function(t){function i(t,e){this._actType=-1,this._data=null,i.__super.call(this),this._actType=t,e&&(this._data=e),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.panel.vScrollBar.autoHide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.descTxt.text="勾选后，对应物品将不会显示红点"}w(i,"modules.activity.RPControl.ActRpControlView",lu);var e=i.prototype;return e.onDisplay=function(){this.initChbs()},e.initChbs=function(){var t=this.getArrByType();if(this.panel.removeChildren(),t&&t.length)for(var e,i=0;i<t.length;i++)(e=new Kx(this._actType,t[i][0],t[i][1])).pos(i%2==0?60:350,20+60*Math.floor(i/2)),this.panel.addChild(e)},e.getArrByType=function(){var t,e,i=[],s=0,n=0,o=0;switch(this._actType){case 1:i.push([201,"称号礼包"]),i.push([202,"时装礼包"]),i.push([203,"符文礼包"]),i.push([204,"神石礼包"]);break;case 2:for(e=[],s=0,n=this._data.length;s<n;s++){var a=this._data[s];o=a.goods.getItemVO().id,t=a.goods.text.text,0<=e.indexOf(o)||(i.push([o,t]),e.push(o))}break;case 3:case 4:for(e=[],s=0,n=this._data.length;s<n;s++){if(o=this._data[s].data.products[0].type_id,!(0<=e.indexOf(o)))t=ur.getItem(o).title,i.push([o,t]),e.push(o)}break;case 5:break;default:console.warn("传入未知屏蔽红点活动的类型!!!")}return i},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},I(0,e,"data",function(){return this._data},function(t){this._data=t}),I(0,e,"uiClass",function(){return"PackRPSetPanel"}),I(0,e,"actType",function(){return this._actType},function(t){this._actType=t}),i}(),Qx=function(t){function e(){e.__super.call(this),this.chooseFrame.visible=!1}return w(e,"modules.activity.userBack.UserBackRewardItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(t){var e=t.day;this.descTxt.changeText("回归累登"+e+"天");var i,s=t.goods,n=0,o=NaN,a=t.nums;if(a.length==s.length)for(this.goodsCtn.removeChildren(),o=0,i=s.length;o<i;o++){var l=new Ah(90,90,!1,!0,!0,!1,91);l.dataSource=s[o],l.num=a[o],l.hideGoodsName(),l.x=n,l.scale(.9,.9),n+=95,this.goodsCtn.addChild(l)}else console.warn("UserBackRewardItem 数组不匹配")}}),e}(ru),zx=function(t){function e(){this._curIndex=-1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.initList(),this.lst.selectEnable=!0,this.lst.selectHandler=new Q(this,this.onSelect),this.lst.selectedIndex=0}w(e,"modules.activity.userBack.UserBackRewardView",hu);var i=e.prototype;return i.onSelect=function(t){if(this._curIndex!=t){this.lst.getCell(t).chooseFrame.visible=!0;var e=this.lst.getCell(this._curIndex);e&&(e.chooseFrame.visible=!1),this._curIndex=t}},i.initList=function(){this.lst.itemRender=Qx,this.lst.vScrollBarSkin="";for(var t=xi.ins.userBackCfg[Si.BIG_REWARD],e=t.reward.split("#"),i=t.num.split("#"),s=0;s<e.length;s++)e[s]=e[s].split(","),i[s]=i[s].split(",");var n=t.day.split(","),o=n.length;if(o==e.length){for(var a=[],l=0;l<o;l++){var r={};r.day=n[l],r.goods=e[l],r.nums=i[l],a.push(r)}this.lst.dataSource=a}else console.warn("用户回流累计登录奖励配置数据有误！")},i.onClick=function(t){switch(t.target){case this.backBtn:case this.closeBtn:this.closeWindow()}},e}(),$x=function(t){function e(t){this.m_index=-1,this.boxList=null,this._rewardView=null,this.backRewardEff=null,this._backItemVO=null,this.curPowerImgs=[],this.powerImgPool=[],this.curDay=-1,this._hasGetBackReward=!1,this.curRwdArr=null,this.curTime=NaN,e.__super.call(this),void 0===t&&(t=0),this.chooseByIndex(t),this.initPrice(),this.initPower(),this.initBackReward(),this.toggleLimitTime(!1),this.initLimitBtn(),this.initRP(),this.changeView(),this.on("display",this,this.onDisplay)}w(e,"modules.activity.userBack.UserBackView",t);var i=e.prototype;return i.changeView=function(){this.bgImg.skin="modules/act/userBack/bg2.png",this.bgImg.x=32,this.bgImg.y=0,this.bgImg.width=608,this.bgImg.height=491,this.itemBg1.skin=this.itemBg2.skin="modules/act/userBack/itembg.png",this.itemBg1.height=this.itemBg2.height=146},i.initRP=function(){this.backRwdRP.visible=!1,this.everyDayRP.visible=!1,this.bigRwdRP.visible=!1},i.onDisplay=function(){this.backRewardEff.loadAndPlay("unit/title/10904096","default",0,!0),this.curTime||He.getInstance().updateUserBackView(),this.once("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.loopTime)},i.initLimitBtn=function(){this.limitTimeRwdBtn.mouseEnabled=!1,this.limitTimeRwdBtn.gray=!0},i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.boxList=new Array,this.boxList.push(this.honorBox,this.welfareBox),this.tab.selectHandler=new Q(this,this.onTabSelect),this.tab.labels="荣誉回归",this.bottomBox.visible=!1,this.bg.visible=!1},i.updateStars=function(t){for(var e=this.starBox.numChildren,i=0;i<e;i++)this.starBox.getChildAt(i).skin=i+1<=t?"com/ui/star_3.png":"com/ui/star_2.png"},i.onClick=function(t){switch(t.target){case this.backBtn:this.closeWindow();break;case this.limitTimeRwdBtn:if(this._hasGetBackReward)return;Da.ins().toUserBackReward(Si.BIG_REWARD);break;case this.getRwdBtn:this._hasGetBackReward?Da.ins().toUserBackReward(Si.EVERY_DAY):Da.ins().toUserBackReward(Si.BACK_REWARD);break;case this.showRwdBtn:"领取"==this.showRwdBtn.label?Da.ins().toUserBackReward(Si.BIG_REWARD):this.showRwdPnl();break;case this.rechargeRwdBtn:Da.ins().toUserBackReward(Si.FIRST_CHARGE);break;case this.buyBtn1:case this.buyBtn2:case this.buyBtn3:Nl.ins().toPay(xi.ins.getLimitBuyArr()[0]);break;case this.helpImg:OF.ins.showMessage("1、回归六界，天天有好礼；<br>2、回归天数越多，奖励越丰富哟；")}},i.chooseByIndex=function(t){if(this.m_index!=t){this.m_index=t;for(var e=this.boxList.length,i=0;i<e;i++)this.boxList[i].visible=t==i}},i.update=function(){Da.ins().toUserBack()},i.initBackReward=function(){var t=new Ah;t.dataSource=10904096,t._goodsImage.num=0,this._backItemVO=t._itemVO,this.backRewardEff=b.getOne(),this.backRewardEff.scale(1.5,1.5),this.backRewardEff.mouseEnabled=!0,this.backRewardEff.pos(145,93),this.aniCtn.size(300,100),this.aniCtn.on("click",this,this.onEffClick),this.aniCtn.addChild(this.backRewardEff)},i.onEffClick=function(){if(this._backItemVO){this._backItemVO.tempNum=0;var t="";t=ur.isEquip(this._backItemVO.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(this._backItemVO,t)}},i.initPrice=function(){var t=xi.ins.getOldPriceArr(),e=xi.ins.getNewPriceArr();if(3==t.length||3==e.length)for(var i=0;i<3;i++)this["oldPrice"+(i+1)].changeText("原价："+t[i]+"元宝"),this["newPrice"+(i+1)].changeText(e[i]+"元");else console.warn("userBack.xml的价格配置出错了")},i.initPower=function(){this.powerNum.removeChildren();for(var t=this.getPowerImgs(2e4),e=t.length,i=0;i<e;i++)t[i].x=25*i,this.powerNum.addChild(t[i])},i.getPowerImgs=function(t){for(;0<this.curPowerImgs.length;)this.powerImgPool.push(this.curPowerImgs.shift());for(var e=t.toString().split(""),i=e.length,s=0;s<i;s++){var n;(n=0<this.powerImgPool.length?this.powerImgPool.pop():new et).skin="modules/act/StrBeastLimit/font/power"+e[s]+".png",this.curPowerImgs.push(n)}return this.curPowerImgs},i.updateGoods=function(){var t,e,i,s,n,o,a,l,r=xi.ins.userBackCfg;if(e=(t=this._hasGetBackReward?r[Si.EVERY_DAY]:r[Si.BACK_REWARD]).reward.split(","),a=t.num.split(","),this.createGoods(e,this.everyDayCtn,a),i=(t=r[Si.BIG_REWARD]).reward.split("#"),l=t.num.split("#"),s=t.day.split(","),n=this.bigRewardLb.text.charAt(0),(o=s.indexOf(n))<0)console.warn("用户回流累计登录前后端数据不一致");else{e=i[o].split(","),a=l[o].split(","),this.createGoods(e,this.bigRwdCtn,a),e=(t=r[Si.LIMIT_BUY]).reward.split(","),a=t.num.split(","),this.createGoods(e,this.rechargeCtn,a,150),e=(t=r[Si.LIMIT_BUY]).reward.split(",");for(var h=0;h<3;h++){var u=new Ah(100,100,!1,!0,!0,!1,91);u.dataSource=e[h],u.hideGoodsName(),this["buy"+(h+1)+"Ctn"].addChild(u)}}},i.createGoods=function(t,e,i,s){if(void 0===s&&(s=110),t.length==i.length){e.removeChildren();var n,o=0,a=NaN;for(a=0,n=t.length;a<n;a++){if(!t[a])return;var l=new Ah(80,80,!1,!0,!0,!1,91);l.dataSource=t[a],l.num=i[a],l.hideGoodsName(),l.x=o,l.scale(.95,.95),o+=s,e.addChild(l)}}else console.warn("传入的createGoods数组大小不匹配！")},i.updateReward=function(t){this.curDay=Da.ins().userBackData.login_day_acc;for(var e=0,i=t.length;e<i;e++){var s=t[e],n=s.str+"";switch(s.id){case Si.BACK_REWARD:"1"==n?(this._hasGetBackReward=!0,this.rewardLb.text="每日奖励"):this.rewardLb.text="回归奖励",this.updateGoods();break;case Si.EVERY_DAY:this.updateEveryDay(n);break;case Si.BIG_REWARD:this.updateBigReward(n);break;case Si.FIRST_CHARGE:"1"==n&&(this.rechargeRwdBtn.gray=!0,this.rechargeRwdBtn.mouseEnabled=!1);break;case Si.LIMIT_BUY:this.updateLimitBuy(n);break;default:console.warn("未知用户回流奖励数据")}}this.updateGoods()},i.updateLimitBuy=function(t){var e=t.split("#"),i=NaN,s=e.length;for(i=0;i<s;i++)e[i]=e[i].split(","),0==e[i][1]&&(this["buyBtn"+(i+1)].state=1,this["buyBtn"+(i+1)].mouseEnabled=!1)},i.updateEveryDay=function(t){if(this.backDay.changeText(this.curDay+""),!this._hasGetBackReward)return this.getRwdBtn.gray=!1,this.getRwdBtn.mouseEnabled=!0,void(this.everyDayRP.visible=!0);"1"==t?(this.getRwdBtn.gray=!0,this.getRwdBtn.mouseEnabled=!1,this.everyDayRP.visible=!1):(this.getRwdBtn.gray=!1,this.getRwdBtn.mouseEnabled=!0,this.everyDayRP.visible=!0)},i.updateBigReward=function(t){var e=t.split("#"),i=NaN,s=NaN;for(i=0,s=e.length;i<s;i++)e[i]=e[i].split(",");for(e.sort(function(t,e){return t[0]-e[0]}),i=0,s=(this.curRwdArr=e).length;i<s;i++){var n=e[i][0];if(!(this.curDay>=n)){this.bigRewardLb.changeText(n+"天大奖"),this.showRwdBtn.label="查看奖励",this.bigRwdRP.visible=!1;break}if(0==e[i][1]){this.bigRewardLb.changeText(n+"天大奖"),this.showRwdBtn.label="领取",this.bigRwdRP.visible=!0,i==s-1&&(this.limitTimeRwdBtn.gray=!0,this.limitTimeRwdBtn.mouseEnabled=!0,this.backRwdRP.visible=!0);break}i==s-1&&(this.bigRewardLb.changeText(n+"天大奖"),this.showRwdBtn.label="查看奖励",this.bigRwdRP.visible=!1)}1==e[s-1][1]&&(this.limitTimeRwdBtn.gray=!1,this.limitTimeRwdBtn.mouseEnabled=!1,this.backRwdRP.visible=!1)},i.showRwdPnl=function(){this._rewardView=this._rewardView||new zx,this._rewardView.openWindow()},i.toggleLimitTime=function(t){void 0===t&&(t=!1),this.limitTimeTitle.visible=this.limitTimeLb.visible=t},i.updateTimer=function(t){},i.loopTime=function(){this.limitTimeLb.changeText(x.formatDHMS(this.curTime--)),this.curTime<=0&&(_t.removeFromSceond(this,this.loopTime),this.limitTimeRwdBtn.gray=!1,this.limitTimeRwdBtn.mouseEnabled=!1,this.toggleLimitTime(!1))},i.onTabSelect=function(t){this.chooseByIndex(t)},e}(uu),Zx=function(t){function e(t){switch(this._type=0,this._date=null,this.imgArr=null,this.clipArr=null,e.__super.call(this),this._type=t,this._type){case 1001:Bt.isFanTi?(this.txtDesc.text="累計充值",this.imgGold.skin="com/ui/godcoin.png"):(this.txtDesc.text="累计充值",this.imgGold.skin="com/ui/gold.png"),this.txtNow.visible=!0,this.imgGold.x=575,this.imgGold.y=16,this.imgGold.width=this.imgGold.height=35;break;case 1006:Bt.isFanTi?(this.txtDesc.text="單筆充值",this.imgGold.skin="com/ui/godcoin.png"):(this.txtDesc.text="单笔充值",this.imgGold.skin="com/ui/gold.png"),this.txtNow.visible=!1,this.imgGold.x=575,this.imgGold.y=16,this.imgGold.width=this.imgGold.height=35;break;case 1007:this.txtDesc.text="累计充值",this.txtNow.visible=!0,this.imgGold.skin="modules/act/gold2.png",this.imgGold.x=575,this.imgGold.y=20;break;case 1008:this.txtDesc.text="单笔充值",this.txtNow.visible=!1,this.imgGold.skin="modules/act/gold2.png",this.imgGold.x=575,this.imgGold.y=20;break;case 1101:this.txtDesc.text="累计消费",this.txtNow.visible=!0,this.imgGold.skin="com/ui/gold.png",this.imgGold.x=575,this.imgGold.y=16,this.imgGold.width=this.imgGold.height=35}this.on("click",this,this.onClick)}w(e,"modules.activity.views.ActChargeItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnGet:if(!this._date)return;switch(this._date.state){case 11:Da.ins().toGain(this._date.actID,this._date.conID);break;case 22:break;default:var e=new Ee;1101==this._type?e.msg=Z.span("您未达到奖励领取条件哦，是否前往消费？","#5d3924",26):e.msg=Z.span("您未达到奖励领取条件哦，是否前往充值？","#5d3924",26),e.yesFun=this.btnYHandler,e.yesCaller=this,EF.showVO(e)}break;default:if(t.target instanceof modules.athletics.encounter.view.DropItem){var i=t.target;i.data.tempNum=i.num,Ae.show(i.data,"BASE_GOODS_TIP")}}},i.btnYHandler=function(){1101==this._type?me.linkTo(10103):me.linkTo(11454)},i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"data",null,function(t){if(this._date=t,this._date){var e=Bt.isFanTi?k.changeGodCoinPrice(this._date.need):this._date.need,i=Bt.isFanTi?k.changeGodCoinPrice(this._date.now):this._date.now;switch(this.txtNeed.text=e+"",this.txtNow.visible&&(this.txtNow.text=i+"/"+e),this._date.state){case 11:this.btnGet.visible=!0,this.btnGet.disabled=!1,this.btnGet.label="领取",this.imgRp.visible=!0;break;case 22:this.btnGet.visible=!0,this.btnGet.disabled=!0,this.btnGet.label="已领取",this.imgRp.visible=!1;break;default:this.btnGet.visible=!0,this.btnGet.disabled=!1,this.btnGet.label="不可领",this.imgRp.visible=!1}this.imgArr=this.imgArr||[];for(var s=0;s<this.imgArr.length;s++)this.imgArr[s]&&this.imgArr[s].parent&&this.imgArr[s].removeSelf();var n,o=this._date.awards.length;for(var a in this.clipArr=this.clipArr||[],this.clipArr)(n=this.clipArr[a]).removeSelf();var l=0;for(s=0;s<o;s++){this.imgArr[s]=this.imgArr[s]||new Dh("");var r=this.imgArr[s];r.txtName.fontSize=24,r.mouseEnabled=!0;var h=new Object;h.className="p_tkv",h.type=5,h.id=this._date.awards[s].type_id,h.val=this._date.awards[s].num,r.setDrop(h),r.x=22+113*s,r.y=22,this.addChild(r),1==this._date.awards[s].reserve&&(this.clipArr[l]=this.clipArr[l]||b.getOne(),(n=this.clipArr[l]).mouseEnabled=!1,n.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),n.pos(r.x+47,r.y+93),this.addChild(n),l++)}}}),e}(cu),Jx=function(t){function e(){this._data=null,this.iconId=0,e.__super.call(this)}w(e,"modules.activity.views.ActLoginItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},i.setSel=function(t){this.imgSel.visible=t},I(0,i,"date",function(){return this._data},function(t){if(this._data=t,this._data)switch(this.txtDay.text="第"+this._data.need+"天",t.state){case 21:case 10:this.imgGot.visible=!1,2==this._data.need||3==this._data.need||7==this._data.need||14==this._data.need?(this.imgBox.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/boxClose.png":"modules/act/login/box"+this._data.need+".png",this.imgSel.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/selClose.png":"modules/act/login/selCommon.png",310==this._data.iconId?(this.imgSel.x=-7,this.imgSel.y=-7):(this.imgSel.x=14==this._data.need?-2:-10,this.imgSel.y=14==this._data.need?-2:-11)):(this.imgBox.skin="modules/act/login/boxClose.png",this.imgSel.skin="modules/act/login/selClose.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!1;break;case 11:this.imgGot.visible=!1,2==this._data.need||3==this._data.need||7==this._data.need||14==this._data.need?(this.imgBox.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/boxClose.png":"modules/act/login/box"+this._data.need+".png",this.imgSel.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/selClose.png":"modules/act/login/selCommon.png",310==this._data.iconId?(this.imgSel.x=-7,this.imgSel.y=-7):(this.imgSel.x=14==this._data.need?-2:-10,this.imgSel.y=14==this._data.need?-2:-11)):(this.imgBox.skin="modules/act/login/boxClose.png",this.imgSel.skin="modules/act/login/selClose.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!0;break;case 22:this.imgGot.visible=!0,2==this._data.need||3==this._data.need||7==this._data.need||14==this._data.need?(this.imgBox.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/boxOpen.png":"modules/act/login/box"+this._data.need+".png",this.imgSel.skin=310==this._data.iconId||1003==this._data.iconId?"modules/act/login/selOpen.png":"modules/act/login/selCommon.png",310==this._data.iconId?(this.imgSel.x=-7,this.imgSel.y=-7):(this.imgSel.x=14==this._data.need?-2:-10,this.imgSel.y=14==this._data.need?-2:-11)):(this.imgBox.skin="modules/act/login/boxOpen.png",this.imgSel.skin="modules/act/login/selOpen.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!1;break;default:this.imgRp.visible=!1}}),e}(du),tC=function(t){function e(){this._date=null,this.imgArr=null,this.clipArr=null,e.__super.call(this)}w(e,"modules.activity.views.ActLoginItem1",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick)},i.onClick=function(t){if(t.target,t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")}},i.setSel=function(t){this.imgSel.visible=t},I(0,i,"date",function(){return this._date},function(t){if(this._date=t,this._date){switch(this._date.state){case 11:this.imgHasGet.visible=!1,this.txtState.text="（待领取）",this.txtState.color="#96f254";break;case 22:this.imgHasGet.visible=!0,this.txtState.text="";break;default:this.imgHasGet.visible=!1,this.txtState.text="（未达成）",this.txtState.color="#fe2e2e"}this.imgArr=this.imgArr||[];for(var e=0;e<this.imgArr.length;e++)this.imgArr[e]&&this.imgArr[e].parent&&this.imgArr[e].removeSelf();var i,s=this._date.awards.length;for(var n in this.clipArr=this.clipArr||[],this.clipArr)(i=this.clipArr[n]).removeSelf();var o=0;for(e=0;e<s;e++){this.imgArr[e]=this.imgArr[e]||new Dh("");var a=this.imgArr[e];a.txtName.fontSize=24,a.mouseEnabled=!0;var l=new Object;l.className="p_tkv",l.type=5,l.id=this._date.awards[e].type_id,l.val=this._date.awards[e].num,a.setDrop(l),a.x=94+123*e,a.y=26,this.addChild(a),1==this._date.awards[e].reserve&&(this.clipArr[o]=this.clipArr[o]||b.getOne(),(i=this.clipArr[o]).mouseEnabled=!1,i.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),i.pos(a.x+47,a.y+93),this.addChild(i),o++)}}}),e}(pu),eC=function(t){function e(){this._date=null,this.imgArr=null,this.clipArr=null,e.__super.call(this)}w(e,"modules.activity.views.ActLoginItem2",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick)},i.onClick=function(t){if(t.target,t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")}},i.setSel=function(t){this.imgSel.visible=t},I(0,i,"date",function(){return this._date},function(t){if(this._date=t,this._date){switch(311==this._date.iconId?this.imgBg.skin="modules/act/"+this._date.iconId+"/itemBg.png":this.imgBg.skin="modules/act/itemBg.png",this.imgDouble.visible=this._date.week,this._date.week&&2<=this._date.showDoubleType&&(this.imgDouble.skin="modules/act/login/"+this._date.iconId+"/double.png"),this._date.state){case 11:this.imgHasGet.visible=!1,this.txtState.text="（待领取）",this.txtState.color="#96f254";break;case 22:this.imgHasGet.visible=!0,this.txtState.text="";break;default:var e=new Date;e.setTime(ya.serverTimeMs);var i=e.getMonth()+1,s=e.getDate();this._date.month>=i&&this._date.day>s?(this.txtState.text=this._date.month+"月"+this._date.day+"日可领",this.txtState.color="#96f254",this.imgHasGet.visible=!1):(this.imgHasGet.visible=this.imgDouble.visible=!1,this.txtState.text="（未达成）",this.txtState.color="#fe2e2e")}this.imgArr=this.imgArr||[];for(var n=0;n<this.imgArr.length;n++)this.imgArr[n]&&this.imgArr[n].parent&&this.imgArr[n].removeSelf();var o,a=this._date.awards.length;for(var l in this.clipArr=this.clipArr||[],this.clipArr)(o=this.clipArr[l]).removeSelf();var r=0;for(n=0;n<a;n++){this.imgArr[n]=this.imgArr[n]||new Dh("");var h=this.imgArr[n];h.txtName.fontSize=24,h.mouseEnabled=!0;var u=new Object;u.className="p_tkv",u.type=5,u.id=this._date.awards[n].type_id,u.val=this._date.awards[n].num,h.setDrop(u),h.x=30+113*n,h.y=26,this.addChild(h),1==this._date.awards[n].reserve&&(this.clipArr[r]=this.clipArr[r]||b.getOne(),(o=this.clipArr[r]).mouseEnabled=!1,o.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),o.pos(h.x+47,h.y+93),this.addChild(o),r++)}}}),e}(mu),iC=function(t){function e(){this.board=null,this._curSelItem=null,this.clipArr=null,this.itemArr=null,this.posArr=[[17,250],[187,250],[357,250],[527,250],[17,420],[187,420],[357,420],[527,420]],this.awardArr=null,this.curDate=null,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this)}w(e,"modules.activity.views.ActLoginView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.board=new Rx,this.board.pos(0,5),this.addChild(this.board)},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){this.resetSelItem()},i.resetSelItem=function(){if(this.itemArr&&0<this.itemArr.length){for(var t=0;t<this.itemArr.length;t++){var e=this.itemArr[t];if(22!=e.date.state)break}11==e.date.state?this.curSelItem=e:this.curSelItem=0<t?this.itemArr[t-1]:e}},i.onClick=function(t){switch(t.target){case this.btnGet:this.curDate&&Da.ins().toGain(this.curDate.actID,this.curDate.conID);break;default:if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")}else if(t.target instanceof modules.activity.views.ActLoginItem)switch(this.curSelItem=t.target,this._typeID[0]){case 1602:pt.send(10006,2,"累计登录-第"+this._curSelItem.date.need+"天");break;case 1601:pt.send(10006,2,"连续登录-第"+this._curSelItem.date.need+"天")}}},i.updateSel=function(){var t;for(var e in this.itemArr)(t=this.itemArr[e]).setSel(this._curSelItem==t)},i.updateReward=function(){this.awardArr=this.awardArr||[];for(var t=0;t<this.awardArr.length;t++)this.awardArr[t]&&this.awardArr[t].parent&&this.awardArr[t].removeSelf();this.curDate.awards.length;this.clipArr=this.clipArr||[];var e,i=0;for(var s in this.clipArr)(e=this.clipArr[s]).removeSelf();for(t=0;t<this.curDate.awards.length;t++){this.awardArr[t]=this.awardArr[t]||new Dh;var n=this.awardArr[t];n.txtName.fontSize=24,n.mouseEnabled=!0;var o=new Object;o.className="p_tkv",o.type=5,o.id=this.curDate.awards[t].type_id,o.val=this.curDate.awards[t].num,n.setDrop(o),n.x=38+131*t,n.y=615,this.addChild(n),1==this.curDate.awards[t].reserve&&(this.clipArr[i]=this.clipArr[i]||b.getOne(),(e=this.clipArr[i]).mouseEnabled=!1,e.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),e.pos(n.x+47,n.y+93),this.addChild(e),i++)}},i.updateButtonState=function(){switch(this.curDate.state){case 11:this.btnGet.label="领取",this.btnGet.disabled=!1,this.imgRp.visible=!0;break;case 22:this.btnGet.label="已领取",this.btnGet.disabled=!0,this.imgRp.visible=!1;break;default:this.btnGet.label="不可领",this.btnGet.disabled=!0,this.imgRp.visible=!1}},i.update=function(){if(this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO){this.curVO.rule&&""!=this.curVO.rule?this.board.showHelp=!0:this.board.showHelp=!1,this.board.desc=this.curVO.desc,this.board.helpStr=this.curVO.rule,this.board.endTime=this.curVO.endTime,this.itemArr=this.itemArr||[];for(var t=this.curVO.items.length,e=0;e<t;e++)this.itemArr[e]=this.itemArr[e]||new Jx,this.posArr[e]&&(this.itemArr[e].x=this.posArr[e][0],this.itemArr[e].y=this.posArr[e][1],this.curVO.items[e].iconId=this.iconID,this.itemArr[e].date=this.curVO.items[e],this.itemArr[e].mouseEnabled=!0,this.addChild(this.itemArr[e]));this._curSelItem||this.resetSelItem(),this.curDate=this._curSelItem.date,this.updateReward(),this.updateButtonState(),this.txtNow.innerHTML=Z.font("已签","#c46444")+Z.font("  "+this.curDate.now+"  ","#96f254")+Z.font("天","#c46444"),this.typeID=this._typeID}},i.callBackUpdate=function(){this.update()},I(0,i,"curSelItem",null,function(t){this._curSelItem=t,this.curDate=t.date,this.updateSel(),this.updateReward(),this.updateButtonState()}),I(0,i,"typeID",function(){return this._typeID},function(t){switch(this._typeID=t,this._typeID[0]){case 1602:this.imgTitle.skin="modules/act/login/login1602.png",0<this.skinID?this.board.bgSkin="modules/act/login/skin"+this.skinID+"/loginBg1.png":this.board.bgSkin="modules/act/login/loginBg1.png";break;case 1601:this.imgTitle.skin="modules/act/login/login1601.png",this.iconID?this.board.bgSkin="modules/act/login/"+this.iconID+"/loginBg2.png":this.board.bgSkin="modules/act/login/loginBg2.png"}}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(fu),sC=function(t){function e(){this._curSelItem=null,this.itemArr=null,this.curDate=null,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this)}w(e,"modules.activity.views.ActLoginView1",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.pan.vScrollBarSkin="",this.txtDesc.style.fontSize=24,this.txtDesc.style.color="#621e09"},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){this.resetSelItem(),_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){this.curVO&&this.curVO.endTime>ya.serverTime?this.txtLeftTime.text=x.formatDHMS(this.curVO.endTime-ya.serverTime):(_t.removeFromSceond(this,this.timeLoop),this.txtLeftTime.text="活动已结束")},i.resetSelItem=function(){if(this.itemArr&&0<this.itemArr.length){for(var t=0;t<this.itemArr.length;t++){var e=this.itemArr[t];if(22!=e.date.state)break}11==e.date.state?this.curSelItem=e:this.curSelItem=0<t?this.itemArr[t-1]:e}},i.onItemClick=function(t){t.target instanceof modules.activity.views.ActLoginItem1&&(this.curSelItem=t.target)},i.onClick=function(t){switch(t.target){case this.btnGet:this.curDate&&Da.ins().toGain(this.curDate.actID,this.curDate.conID);break;case this.imgTip:this.curDate&&OF.ins.showMessage(this.curVO.rule)}},i.updateSel=function(){var t;for(var e in this.itemArr)(t=this.itemArr[e]).setSel(this._curSelItem==t)},i.updateButtonState=function(){switch(this.curDate.state){case 11:this.btnGet.label="领取",this.btnGet.disabled=!1,this.imgRp.visible=!0;break;case 22:this.btnGet.label="已领取",this.btnGet.disabled=!0,this.imgRp.visible=!1;break;default:this.btnGet.label="不可领",this.btnGet.disabled=!0,this.imgRp.visible=!1}},i.update=function(){if(this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO){this.curVO.rule&&""!=this.curVO.rule?this.imgTip.visible=!0:this.imgTip.visible=!1,this.txtDesc.innerHTML=this.curVO.desc,this.itemArr=this.itemArr||[];for(var t=this.curVO.items.length,e=0;e<t;e++)this.itemArr[e]=this.itemArr[e]||new tC,this.itemArr[e].x=0,this.itemArr[e].y=165*e+3,this.itemArr[e].date=this.curVO.items[e],this.itemArr[e].mouseEnabled=!0,this.itemArr[e].on("click",this,this.onItemClick),this.pan.addChild(this.itemArr[e]);this._curSelItem||this.resetSelItem(),this.curDate=this._curSelItem.date,this.updateButtonState(),this.parent&&_t.addToSecond(this,this.timeLoop),this.typeID=this._typeID}},i.callBackUpdate=function(){this.update()},I(0,i,"curSelItem",null,function(t){this._curSelItem=t,this.curDate=t.date,this.updateSel(),this.updateButtonState()}),I(0,i,"typeID",function(){return this._typeID},function(t){switch(this._typeID=t,this._typeID[0]){case 1603:this.imgTitle.skin="modules/act/login/login1604.png",this.imgTop.skin="modules/act/login/loginBg3.png"}}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this.skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(_u),nC=function(t){function e(){this.board=null,this._curSelItem=null,this.itemArr=null,this.curDate=null,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this),this.board=new Rx,this.board.pos(0,5),this.addChild(this.board)}w(e,"modules.activity.views.ActLoginView2",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.pan.vScrollBarSkin=""},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),T.register("BANNER_VIDEO_FINISH",this,this.updateBanner)},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay),T.remove("BANNER_VIDEO_FINISH",this,this.updateBanner),this.resetSelItem()},i.resetSelItem=function(){if(this.itemArr&&0<this.itemArr.length){for(var t=!1,e=0;e<this.itemArr.length;e++){var i=this.itemArr[e];if(i.date.day==We.today){t=!0,this.curSelItem=i;break}}t||(this.curSelItem=this.itemArr[0])}},i.onItemClick=function(t){t.target instanceof modules.activity.views.ActLoginItem2&&(this.curSelItem=t.target)},i.onClick=function(t){switch(t.target){case this.btnGet:this.curDate&&1==this.curDate.openBanner&&22==this.curDate.state&&0==this.curDate.bannerFinish?Bt.sdk.showBannerVideo(6):this.curDate&&Da.ins().toGain(this.curDate.actID,this.curDate.conID)}},i.updateSel=function(){var t;for(var e in this.itemArr)(t=this.itemArr[e]).setSel(this._curSelItem==t)},i.updateButtonState=function(){switch(this.curDate.state){case 11:this.btnGet.label="领取",this.btnGet.disabled=!1,this.imgRp.visible=!0;break;case 22:1==this.curDate.openBanner&&0==this.curDate.bannerFinish?(this.btnGet.label="观看免费",this.btnGet.disabled=!1,this.imgRp.visible=!0):(this.btnGet.label="已领取",this.btnGet.disabled=!0,this.imgRp.visible=!1);break;default:this.btnGet.label="不可领",this.btnGet.disabled=!0,this.imgRp.visible=!1}},i.update=function(){if(this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO){0<this.skinID?this.board.bgSkin="modules/act/login/skin"+this.skinID+"/loginBg4.png":this.board.bgSkin="modules/act/login/"+this.curVO.iconId+"/loginBg4.png",311==this.curVO.iconId?this.imgBg.skin="modules/act/"+this.curVO.iconId+"/awardBg.png":this.imgBg.skin="modules/act/awardBg.png",this.curVO.rule&&""!=this.curVO.rule?this.board.showHelp=!0:this.board.showHelp=!1,this.board.desc=this.curVO.desc,this.board.helpStr=this.curVO.rule,this.board.endTime=this.curVO.endTime,this.itemArr=this.itemArr||[];var t=this.curVO.items.length;this.curVO.items.sort(this.sortFun);for(var e=0;e<t;e++)this.itemArr[e]=this.itemArr[e]||new eC,this.itemArr[e].x=0,this.itemArr[e].y=165*e+3,this.itemArr[e].date=this.curVO.items[e],this.itemArr[e].mouseEnabled=!0,this.itemArr[e].on("click",this,this.onItemClick),this.pan.addChild(this.itemArr[e]);this._curSelItem||this.resetSelItem(),this.curDate=this._curSelItem.date,this.updateButtonState()}},i.sortFun=function(t,e){var i=qe.STATE_SORT_ARR.indexOf(t.state),s=qe.STATE_SORT_ARR.indexOf(e.state);return i<s?-1:s<i?1:t.week==e.week?t.conID<e.conID?-1:t.conID>e.conID?1:0:t.week?-1:1},i.updateBanner=function(t){6==t&&this.curDate&&Da.ins().toFinishBanner(this.curDate.actID,this.curDate.conID+1)},i.callBackUpdate=function(){this.update()},I(0,i,"curSelItem",null,function(t){this._curSelItem=t,this.curDate=t.date,this.updateSel(),this.updateButtonState()}),I(0,i,"typeID",function(){return this._typeID},function(t){switch(this._typeID=t,this._typeID[0]){case 1604:this.imgTitle.skin="modules/act/login/login1603.png",this.curVO&&(this.board.bgSkin="modules/act/login/"+this.curVO.iconId+"_loginBg4.png",this.imgBg.skin="modules/act/login/"+this.curVO.iconId+"_kuang.png")}}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(gu),oC=function(t){function e(){this.itemArr=null,this.curVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this),this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.txtDesc.style.fontSize=24,this.txtDesc.style.color="#621e09"}w(e,"modules.activity.views.ChargeViews",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.onClick=function(t){switch(t.target){case this.imgTip:OF.ins.showMessage(this.curVO.rule);break;case this.btnGet1:me.linkTo(11454),pt.send(10002,2,"单笔充值-前往充值")}},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){_t.removeFromSceond(this,this.timeLoop),this.off("undisplay",this,this.onUNDisplay)},i.timeLoop=function(){this.curVO&&this.curVO.endTime>ya.serverTime?this.txtLeftTime.text=x.formatDHMS(this.curVO.endTime-ya.serverTime):(_t.removeFromSceond(this,this.timeLoop),this.txtLeftTime.text="活动已结束")},i.update=function(){if(this.curVO=We.getActDetailByActID(this.actID[0]),this.curVO){this.titleBg.skin="modules/act/charge/"+(this.skinID<=0?"skin0/":"skin"+this.skinID+"/")+"/actBg.png",this.txtDesc.innerHTML=this.curVO.desc,this.itemArr=this.itemArr||[],this.curVO.items.sort(this.memSortFun);for(var t=this.curVO.items.length,e=0;e<t;e++)this.itemArr[e]=this.itemArr[e]||new Zx(this.typeID[0]),this.itemArr[e].x=0,this.itemArr[e].y=165*e,this.itemArr[e].data=this.curVO.items[e],this.pan.addChild(this.itemArr[e]);this.parent&&_t.addToSecond(this,this.timeLoop)}},i.memSortFun=function(t,e){var i=qe.STATE_SORT_ARR.indexOf(t.state),s=qe.STATE_SORT_ARR.indexOf(e.state);return i<s?-1:s<i?1:t.conID-e.conID},i.callBackUpdate=function(){this.update()},i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),I(0,i,"uiClass",function(){return"ActChargeView"}),I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),e}(yu),aC=function(t){function e(){this._data=null,this.goodsImage=null,this.clip=null,e.__super.call(this),this.goodsImage=new fh(null,!1,!0,91,!0)}return w(e,"modules.activity.views.sign.SignItem",vu),I(0,e.prototype,"data",function(){return this._data},function(t){if(this._data=t,null!=this._data){if(0<t.awards.length){var e=t.awards[0],i=ur.getItem(e.type_id);this.goodsImage.data=i,this.goodsImage.num=e.num,this.spGoods.addChild(this.goodsImage),this.txtName.text=i.name,this.txtName.color=U.getColorDark(i.color),1==e.reserve?(this.clip=this.clip||b.getOne(),this.clip.mouseEnabled=!1,this.clip.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.clip.pos(56,93),this.addChild(this.clip)):this.clip&&this.clip.parent&&this.clip.removeSelf()}switch(t.state){case 11:this.imgState.skin="";break;case 22:this.imgState.skin="modules/act/sign/had.png",this.imgState.x=12,this.imgState.y=1;break;default:this._data.day<We.today?(this.imgState.skin="modules/act/sign/can.png",this.imgState.x=-1,this.imgState.y=11):this.imgState.skin=""}}}),e}(),lC=function(t){function e(){this._data=null,this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.items=[],this.panel.vScrollBarSkin="",this.btnClose.on("click",this,this.closeWindow),this.btnClose1.on("click",this,this.closeWindow)}return w(e,"modules.activity.views.sign.SignSubView",Iu),I(0,e.prototype,"data",null,function(t){for(var e,i=Math.max(this.items.length,t.items.length),s=0;s<i;s++)s<t.items.length?(this.items[s]=this.items[s]||new rC,(e=this.items[s]).data=t.items[s],e.x=0,e.y=145*s,e.parent||this.panel.addChild(e)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf()}),e}(),rC=function(t){function e(){this._data=null,this.clipArr=null,this.itemArr=null,e.__super.call(this)}return w(e,"modules.activity.views.sign.SignTotalItem",wu),I(0,e.prototype,"data",function(){return this._data},function(t){if(this._data=t,null!=this._data){this.txtD.innerHTML=Z.font("累计签到","#f4f1b2")+Z.font(""+t.day,"#96f254")+Z.font("天奖励","#f4f1b2"),this.itemArr=this.itemArr||[];for(var e=0;e<this.itemArr.length;e++)this.itemArr[e]&&this.itemArr[e].parent&&this.itemArr[e].removeSelf();var i,s=this._data.awards.length;for(var n in this.clipArr=this.clipArr||[],this.clipArr)(i=this.clipArr[n]).removeSelf();var o=0;for(e=0;e<s;e++){this.itemArr[e]=this.itemArr[e]||new Ah(91,90,!1,!0,!0,!1,91);var a=this.itemArr[e];a.mouseEnabled=!0;var l=this._data.awards[e],r=ur.getItem(l.type_id);a.dataSource=r,a.num=l.num,a.x=277+113*e,a.y=12,a.parent||this.addChild(a),1==l.reserve&&(this.clipArr[o]=this.clipArr[o]||b.getOne(),(i=this.clipArr[o]).mouseEnabled=!1,i.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),i.pos(a.x+47,a.y+93),this.addChild(i),o++)}}}),e}(),hC=function(t){function e(){this.subView=null,this.alertView=null,this.reg=!1,this.lineArr=null,this.todayItems=null,this._curSelItem=null,this._curTotalVO=null,this._curTodayVO=null,this.showItem=null,this.showVO=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this)}w(e,"modules.activity.views.sign.SignView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.panel.content.mouseEnabled=!0,this.panel.content.on("click",this,this.onItemClick),this.panel.vScrollBarSkin="",this.imgSel.y=-10},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),T.register("BANNER_VIDEO_FINISH",this,this.updateBanner)},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay),T.remove("BANNER_VIDEO_FINISH",this,this.updateBanner)},i.initDesignation=function(){if(!this.spDesignation.numChildren){var t=new Ah(91,90,!1,!0,!0,!1,91),e=this._curTotalVO.items[this._curTotalVO.items.length-1].awards[0];t.dataSource=e.type_id,t.text.y-=2,t.text.x+=4,this.spDesignation.addChild(t)}},i.onItemClick=function(t){t.target instanceof modules.activity.views.sign.SignItem&&(this.curSelItem=t.target)},i.onClick=function(t){switch(t.target){case this.btnSign:this._curSelItem&&this._curSelItem.data&&11==this._curSelItem.data.state?Da.ins().toGain(this._curSelItem.data.actID,this._curSelItem.data.conID):this.reg&&this._curSelItem&&this._curSelItem.data?10<=pe.gold?Da.ins().toRoleActSign(this._curSelItem.data.actID,this._curSelItem.data.conID):Lo.showAlert():(null==this.alertView&&(this.alertView=new yx,this.alertView.txt1.style.leading=12,this.alertView.btnBanner.visible=!(!this._curTodayVO||1!=this._curTodayVO.openBanner),this.alertView.txt1.innerHTML="<span style='color:#f4f1b2 ;font-size:24px'>补签操作需要</span><span style='color:#fff959 ;font-size:24px'>10元宝</span><span style='color:#f4f1b2 ;font-size:24px'>/次，是否消耗</span><span style='color:#fff959 ;font-size:24px'>10元宝</span><span style='color:#f4f1b2;font-size:24px'>进行本次补签？</span>",this.alertView.on("click",this,this.onAlertClick)),this.alertView.popup());break;case this.btnGet:11==this.showVO.state?Da.ins().toGain(this.showVO.actID,this.showVO.conID):(pt.send(10014,2,"每月签到-点击查看更多奖励"),this._curTotalVO&&(this.subView=this.subView||new lC,this.subView.openWindow(),this.subView.parent&&(this.subView.data=this._curTotalVO)));break;case this.imgTip:OF.ins.showMessage(this._curTotalVO.help)}},i.onAlertClick=function(t){switch(t.target){case this.alertView.btnY:10<=pe.gold?Da.ins().toRoleActSign(this._curSelItem.data.actID,this._curSelItem.data.conID):Lo.showAlert();case this.alertView.btnClo:case this.alertView.btnN:this.alertView.close();break;case this.alertView.chB:this.reg=this.alertView.chB.selected;break;case this.alertView.btnBanner:this.alertView.close(),Bt.sdk.showBannerVideo(7)}},i.updateTodaySign=function(){if(this._curTotalVO){var t;this.lineArr=this.lineArr||[];for(var e=Math.ceil(this._curTodayVO.items.length/5),i=Math.max(e,this.lineArr.length),s=0;s<i;s++)s<e?this.lineArr[s]||(this.lineArr[s]=new et,(t=this.lineArr[s]).skin="modules/act/itemBg.png",t.sizeGrid="5,0,5,0,0",t.width=682,t.height=135,t.x=0,t.y=140*s,this.panel.addChild(t)):this.lineArr[n]&&this.lineArr[n].parent&&this.lineArr[n].removeSelf();this.todayItems=this.todayItems||[],i=Math.max(this._curTodayVO.items.length,this.todayItems.length);for(var n=0;n<i;n++)if(n<this._curTodayVO.items.length){this.todayItems[n]=this.todayItems[n]||new aC;var o=this.todayItems[n];o.mouseEnabled=!0,o.data=this._curTodayVO.items[n],o.x=n%5*131+25,o.y=140*Math.floor(n/5)+15,o.parent||this.panel.addChild(o)}else this.todayItems[n]&&this.todayItems[n].parent&&this.todayItems[n].removeSelf();this._curSelItem&&this.updateButtonState()}},i.updateButtonState=function(){switch(this._curSelItem.data.state){case 11:this.btnSign.label="签到",this.btnSign.disabled=!1,this.imgRp.visible=!0;break;case 22:this.btnSign.label="已签到",this.btnSign.disabled=!0,this.imgRp.visible=!1;break;default:this._curSelItem.data.day<We.today?(this.btnSign.label="补签",this.btnSign.disabled=!1):(this.btnSign.label="不可签",this.btnSign.disabled=!0),this.imgRp.visible=!1}},i.update=function(){for(var t=0;t<this.typeID.length;t++)switch(this.typeID[t]){case 2101:this._curTotalVO=We.getActDetailByActID(this.actID[t]),this.initDesignation();break;case 2102:this._curTodayVO=We.getActDetailByActID(this.actID[t])}if(this.updateTotalSign(),this.updateTodaySign(),this._curTotalVO&&this._curTodayVO){var e=this.todayItems.length;We.today>e&&this._curSelItem!=this.todayItems[e-1]?this.curSelItem=this.todayItems[e-1]:this._curSelItem!=this.todayItems[We.today-1]&&(this.curSelItem=this.todayItems[We.today-1])}this.imgMonth.skin="modules/act/sign/month"+We.toMonth+".png"},i.updateTotalSign=function(){if(this._curTotalVO){this.txtNow.style.align="center",this.txtNow.innerHTML=Z.font("已签 ","#96f254")+Z.font(""+this._curTotalVO.nowSign,"#fde69a")+Z.font(" 天","#96f254");var t=this._curTotalVO.items.length;if(0<t){for(var e=0;this._curTotalVO.items[e]&&22==this._curTotalVO.items[e].state;)++e;if(e=e<this._curTotalVO.items.length?e:this._curTotalVO.items.length-1,this.showVO=this._curTotalVO.items[e],22==this.showVO.state?(this.btnGet.label="已领完",this.btnGet.disabled=!0,this.imgRp2.visible=!1):11==this.showVO.state?(this.btnGet.label="领取",this.btnGet.disabled=!1,this.imgRp2.visible=!0):(this.btnGet.label="查看奖励",this.btnGet.disabled=!1,this.imgRp2.visible=!1),this.showVO){this.imgDay.skin="modules/act/sign/"+this.showVO.day+"day.png",this.showItem=this.showItem||[],t=Math.max(this.showItem.length,this.showVO.awards.length);for(var i=0;i<t;i++)if(i<this.showVO.awards.length){var s=this.showVO.awards[i];this.showItem[i]=this.showItem[i]||new Ah(91,88,!1,!0,!0,!1,91);var n=this.showItem[i],o=ur.getItem(s.type_id);n.dataSource=o,n.num=s.num,n.x=110*i,n.parent||this.spReward.addChild(n)}else this.showItem[i]&&this.showItem[i].parent&&this.showItem[i].removeSelf()}}}},i.updateBanner=function(t){7==t&&this._curSelItem&&Da.ins().toRoleActSign(this._curSelItem.data.actID,this._curSelItem.data.conID+100)},i.callBackUpdate=function(){this.update()},I(0,i,"curSelItem",null,function(t){this._curSelItem=t,this.updateButtonState(),this._curSelItem.addChild(this.imgSel)}),I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this.skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(bu),uC=function(t){function e(){this.skinID=NaN,this._standardVO=null,this._standardRankVO=null,this._title=null,this.list=null,this.imgArr=null,this.clipArr=null,this.cfgRankVO=null,e.__super.call(this),this.txtLink.underline=!0,this.txtLink.mouseEnabled=!0,this.on("click",this,this.onClick),this.txtLink.on("click",this,this.onClickTxtLink),this.list=new dC,this.list.pos(4,515),this.addChild(this.list),this.updateTitleImgMcx()}w(e,"modules.activity.views.standard.FlowerStanderView",Su);var i=e.prototype;return i.onClickTxtLink=function(){pt.send(10017,2,"查看排行"),this.linkToRankPanel()},i.setInfo=function(t,e,i){this._standardVO=t,this._standardRankVO=e,this.skinID=i,this._standardRankVO&&(this.cfgRankVO=Ci.getStandardRankVO(this._standardRankVO.rankID))},i.onClick=function(t){if(t.target,t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")}},i.linkToRankPanel=function(){this.cfgRankVO&&0<=this.cfgRankVO.linkConst&&me.linkTo(this.cfgRankVO.linkConst)},i.update=function(){this.updateMe(),this.updateRank(),this.updateTitleImgMcx()},i.updateMe=function(){this._standardVO&&(this._standardRankVO&&(this.txtCondit.skin="modules/act/standard/"+this._standardRankVO.rankID+"/title1.png"),this.list.setData(this._standardVO.conditions,this.cfgRankVO?this.cfgRankVO.itemTxtsArr:null,this.cfgRankVO?this.cfgRankVO.id:null))},i.updateRank=function(){if(this._standardRankVO)if(jo.getRankVO(this._standardRankVO.rankID)){this.imgArr=this.imgArr||[];for(var t=0;t<this.imgArr.length;t++)this.imgArr[t]&&this.imgArr[t].parent&&this.imgArr[t].removeSelf();for(var e in this.clipArr=this.clipArr||[],this.clipArr)this.clipArr[e].removeSelf();this.updateRankInfoShow()}else xr.ins().toGetRank(this._standardRankVO.rankID)},i.updateTitleImgMcx=function(){if(this._title&&this._title instanceof com.scene.effect.BitmapClip&&this._title.removeSelf(),this._standardRankVO&&this._standardRankVO.rankID){var t=new Object;t.className="p_tkv",t.type=5,this._standardRankVO.items&&this._standardRankVO.items[0].award&&(t.id=this._standardRankVO.items[0].award[0].type_id);var e=ur.getRewardByTkv(t),i="",s="default",n=0,o=1.5,a=1.5,l="0,0";switch(e?e.useType%1e3:-1){case 8:i="unit/title/"+e.img,Bt.isFanTi&&(i+="_ft");break;case 32:i="unit/monster/"+e.img+"_3",s="stand",a=o=.9,n=3;break;case 19:"2"==e.path[0]?(i=Pe.getRoleUnitSubFileStr(e.path)+e.path+"_sit_4",s="sit",n=4,a=o=.9,l="0,4"):"1"==e.path[0]?(i=Pe.getWeaponUnitSubFileStr(e.path,"unit2")+e.path+"_4",s="stand",n=4,a=o=.9,l="100,35"):"4"==e.path[0]&&(i="unit/wing/"+e.path+"2_4",s="stand",n=4,a=o=1.5,l="-9,57");break;case 9:i="unit/monster/"+e.img+"_attack_3",s="attack",n=3,a=o=1}var r=l.split(","),h=parseInt(r[0]),u=parseInt(r[1]);this._title=new b,this._title.loadAndPlay(i,s,n,!0),this._title.scale(o,a),this._title.pos(h,u),this.spTitle.removeChildren(),this.spTitle.addChild(this._title)}},i.updateRankInfoShow=function(){var t,e=0,i=0;if(this._standardRankVO){var s=jo.getRankVO(this._standardRankVO.rankID);if(s){var n,o=this.cfgRankVO?this.cfgRankVO.rankTxt:"";for(var a in this._standardRankVO.items){if((n=this._standardRankVO.items[a]).rank<=3)if(s.rows.length>=n.rank){var l=s.rows[n.rank-1];this["txtName"+n.rank].text=l.elements[0],this.setYesOrNoImgSkin(l.elements[1],l.elements[2],n.pow,s.rankID,n.rank,l.role_id),this.setTextByTxPow(s.rankID,o,l.elements[1],l.elements[2],n.rank)}else this.setNoPlayerInTheRankShow(n.rank,o);for(var r=0,h=n.award.length;r<h;r++)this.imgArr[e]=this.imgArr[e]||this.createDropItem(n.award[r],r),this.imgArr[e].scale(.8,.8),n.rank<=3&&n.award.length<=1&&this.imgArr[e].pos(55,0),this["spAward"+n.rank].addChild(this.imgArr[e]),1==n.award[r].reserve&&(this.clipArr[i]=this.clipArr[i]||b.getOne(),(t=this.clipArr[i]).mouseEnabled=!1,t.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),t.pos(this.imgArr[e].x+38,this.imgArr[e].y+76),t.scale(.8,.8),this["spAward"+n.rank].addChild(t),i++),e++}}}},i.setYesOrNoImgSkin=function(t,e,i,s,n,o){var a=i<=parseInt(e)&&o==pe.roleID?"modules/act/standard/yes.png":"modules/act/standard/no.png";this["img"+n]&&(this["img"+n].skin=a)},i.setNoPlayerInTheRankShow=function(t,e){this["txtName"+t]&&(this["txtName"+t].text="虚位以待"),this["img"+t]&&(this["img"+t].skin="modules/act/standard/no.png"),this["txtPow"+t]&&(this["txtPow"+t].text="0"+e)},i.createDropItem=function(t,e){var i=new Dh("");i.txtName.fontSize=24,i.mouseEnabled=!0;var s=new Object;return s.className="p_tkv",s.type=5,s.id=t.type_id,s.val=t.num,i.setDrop(s),i.x=10+100*e,i.y=0,i},i.setTextByTxPow=function(t,e,i,s,n){if(this["txtPow"+n]){var o="0";1010==this._standardRankVO.rankID&&(o=W.getShortenPowerStr(parseInt(s))),this["txtPow"+n].text=o+e}},I(0,i,"uiClass",function(){return"FlowerStandanrView"}),e}(),cC=function(t){function e(){this._data=null,this.myItems=null,this.myClips=null,this._condictionStrs=null,this._rankid=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.activity.views.standard.StandardItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnGet:this._data&&Da.ins().toGain(this._data.actID,this._data.conID)}},i.update=function(){var t,e=this._data,i=!1;this.condictionStrs&&(this.txtD.text=this.condictionStrs[0]+W.getShortenPowerStr(e.pow)+(Bt.isFanTi&&1007==this.rankid?"仙尊幣":this.condictionStrs[1])),this.myItems=this.myItems||[];for(var s=0,n=this.myItems.length;s<n;s++)this.myItems[s]&&this.myItems[s].parent&&this.myItems[s].removeSelf();for(var o in this.myClips=this.myClips||[],this.myClips)(t=this.myClips[o]).removeSelf();var a=e.awards.length,l=0;for(s=0;s<a;s++){this.myItems[s]=this.myItems[s]||new Dh("");var r=this.myItems[s];r.txtName.visible=!1,r.mouseEnabled=!0;var h=e.awards[s],u=new Object;u.className="p_tkv",u.type=5,u.id=h.type_id,u.val=h.num,r.setDrop(u),r.pos(20+128*s,0),this.spAward.addChild(r),1==h.reserve&&(this.myClips[l]=this.myClips[l]||b.getOne(),(t=this.myClips[l]).mouseEnabled=!1,t.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),t.pos(r.x+47,r.y+93),this.spAward.addChild(t),l++)}switch(e.state){case 11:this.btnGet.disabled=!1,i=this.imgRp.visible=!0,this.btnGet.label="领取";break;case 22:this.btnGet.disabled=!0,this.imgRp.visible=!1,this.btnGet.label="已领取",i=!0;break;default:this.btnGet.disabled=!1,this.imgRp.visible=!1,i=!(this.btnGet.label="未达成")}this.img.skin=i?"modules/act/standard/yes.png":"modules/act/standard/no.png"},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),I(0,i,"condictionStrs",function(){return this._condictionStrs},function(t){t!=this._condictionStrs&&(this._condictionStrs=t),this._condictionStrs&&this._data&&(this.txtD.text=this.condictionStrs[0]+W.getShortenPowerStr(this._data.pow)+(Bt.isFanTi&&1007==this.rankid?"仙尊幣":this.condictionStrs[1]))}),I(0,i,"rankid",function(){return this._rankid},function(t){this._rankid=t}),e}(xu),dC=function(t){function e(){e.__super.call(this),this.list.vScrollBarSkin="",this.list.itemRender=cC}return w(e,"modules.activity.views.standard.StandardList",Cu),e.prototype.setData=function(t,e,i){this.list.dataSource=t;var s,n=this.list.cells;for(var o in n)(s=n[o]).condictionStrs=e,s.rankid=i},e}(),pC=function(t){function e(){this.curVO=null,this.curRankVO=null,this.skinID=NaN,this.list=null,this.cfgRankVO=null,this._title=null,this.sp=null,this.imgArr=null,this.clipArr=null,e.__super.call(this),this.txtLink.underline=!0,this.txtLink.mouseEnabled=!0,this.updateTitleImgMcx(),this.list=new dC,this.list.pos(7,463),this.addChild(this.list),this.txtLink.on("click",this,this.onClickTxtLink)}w(e,"modules.activity.views.standard.StandardOriginShowView",Pu);var i=e.prototype;return i.onClickTxtLink=function(){pt.send(10017,2,"查看排行"),this.linkToRankPanel()},i.linkToRankPanel=function(){this.curRankVO&&(this.cfgRankVO&&0<=this.cfgRankVO.linkConst?me.linkTo(this.cfgRankVO.linkConst,this.curRankVO.rankID):1201==this.curRankVO.rankID?il.ins().openRankPanel():1202==this.curRankVO.rankID&&sl.ins().openRankPanel())},i.setInfo=function(t,e,i){this.curVO=t,this.curRankVO=e,this.skinID=i,this.curRankVO&&(this.cfgRankVO=Ci.getStandardRankVO(this.curRankVO.rankID))},i.update=function(){this.updateTitleImgMcx(),this.updateMe(),this.updateRank()},i.updateTitleImgMcx=function(){if(this._title&&this._title instanceof com.scene.effect.BitmapClip&&this._title.removeSelf(),this.curRankVO&&this.curRankVO.rankID){var t=new Object;t.className="p_tkv",t.type=5,this.curRankVO.items&&this.curRankVO.items[0].award&&(t.id=this.curRankVO.items[0].award[0].type_id);var e=ur.getRewardByTkv(t),i="",s="default",n=0,o=1.5,a=1.5,l="0,0";switch(e?e.useType%1e3:-1){case 8:i="unit/title/"+e.img,Bt.isFanTi&&(i+="_ft");break;case 32:i="unit/monster/"+e.img+"_3",s="stand",a=o=.9,n=3;break;case 19:"2"==e.path[0]?(i=Pe.getRoleUnitSubFileStr(e.path)+e.path+"_sit_4",s="sit",n=4,a=o=.9,l="0,4"):"1"==e.path[0]?(i=Pe.getWeaponUnitSubFileStr(e.path,"unit2")+e.path+"_4",s="stand",n=4,a=o=.9,l="100,4"):"4"==e.path[0]&&(i="unit/wing/"+e.path+"2_4",s="stand",n=4,a=o=1.5,l="-9,57");break;case 9:i="unit/monster/"+e.img+"_attack_3",s="attack",n=3,a=o=1;break;case 38:n=5,a=o=1.2,l="-65,-120",i=e.realMaxico}var r=l.split(","),h=parseInt(r[0]),u=parseInt(r[1]);5==n?(this._title=new et,this._title.skin=i):(this._title=new b,this._title.loadAndPlay(i,s,n,!0)),this._title.pos(h,u),this._title.scale(o,a),this.spTitle.removeChildren(),this.spTitle.addChild(this._title)}},i.updateMe=function(){if(this.curVO){if(this.curRankVO){var t=this.curRankVO.rankID;9999<=t&&(t-=1e4*Math.floor(t/1e4)),this.txtCondit.skin="modules/act/standard/"+t+"/title1.png"}this.list.setData(this.curVO.conditions,this.cfgRankVO?this.cfgRankVO.itemTxtsArr:null,this.cfgRankVO?this.cfgRankVO.id:null)}},i.updateRank=function(){if(this.curRankVO){var t=jo.getRankVO(this.curRankVO.rankID);if(1201!=this.curRankVO.rankID||null!=t)if(t){this.imgArr=this.imgArr||[];for(var e=0;e<this.imgArr.length;e++)this.imgArr[e]&&this.imgArr[e].parent&&this.imgArr[e].removeSelf();for(var i in this.clipArr=this.clipArr||[],this.clipArr)this.clipArr[i].removeSelf();this.updateRankInfoShow()}else xr.ins().toGetRank(this.curRankVO.rankID);else xr.ins().toGetRank(1201)}},i.updateRankInfoShow=function(){var t,e=0,i=0;if(this.curRankVO){var s,n=jo.getRankVO(this.curRankVO.rankID);if(n&&this.cfgRankVO)for(var o in this.curRankVO.items){if((s=this.curRankVO.items[o]).rank<=3)if(n.rows.length>=s.rank){var a=n.rows[s.rank-1];this["txtName"+s.rank].text=a.elements[0];var l=Ko.transformUniqueIdToRankId(n.rankID);console.log("break"),this.setYesOrNoImgSkin(a.elements[1],a.elements[2],s.pow,l,s.rank,a.role_id),this.setTextByTxPow(l,this.cfgRankVO.rankTxt,a.elements[1],a.elements[2],s.rank,this.cfgRankVO.id)}else this.setNoPlayerInTheRankShow(s.rank,this.cfgRankVO.rankTxt,this.cfgRankVO.id);for(var r=0,h=s.award.length;r<h;r++)this.imgArr[e]=this.imgArr[e]||this.createDropItem(s.award[r],r),this["spAward"+s.rank].addChild(this.imgArr[e]),1==s.award[r].reserve&&(this.clipArr[i]=this.clipArr[i]||b.getOne(),(t=this.clipArr[i]).mouseEnabled=!1,t.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),t.pos(this.imgArr[e].x+47,this.imgArr[e].y+93),this["spAward"+s.rank].addChild(t),i++),e++}}},i.setYesOrNoImgSkin=function(t,e,i,s,n,o){var a=i<=(1007==s||1009==s||1102==s?parseInt(e):parseInt(t))&&o==pe.roleID?"modules/act/standard/yes.png":"modules/act/standard/no.png";this["img"+n]&&(this["img"+n].skin=a)},i.setNoPlayerInTheRankShow=function(t,e,i){this["txtName"+t]&&(this["txtName"+t].text="虚位以待"),this["img"+t]&&(this["img"+t].skin="modules/act/standard/no.png"),this["txtPow"+t]&&(this["txtPow"+t].text="0"+(Bt.isFanTi&&1007==i?"仙尊幣":e))},i.setTextByTxPow=function(t,e,i,s,n,o){var a;this["txtPow"+n]&&(a=1101==t?(0<parseInt(i)?i+"转":"")+(Bt.isFanTi&&1007==o?parseInt(s)/10:s):1007==t||1009==t||1102==t?W.getShortenPowerStr(Bt.isFanTi&&1007==o?parseInt(s)/10:parseInt(s)):W.getShortenPowerStr(Bt.isFanTi&&1007==o?parseInt(i)/10:parseInt(i)),this["txtPow"+n].text=a+(Bt.isFanTi&&1007==o?"仙尊幣":e))},i.createDropItem=function(t,e){var i=new Dh("");i.txtName.fontSize=24,i.mouseEnabled=!0;var s=new Object;return s.className="p_tkv",s.type=5,s.id=t.type_id,s.val=t.num,i.setDrop(s),i.x=20+128*e,i.y=0,i},I(0,i,"uiClass",function(){return"StandardOriginShow"}),e}(),mC=function(t){function e(){this.displayItem=null,this.curVO=null,this.curRankVO=null,this.standardOriginShow=null,this.standardFlowerShow=null,this._typeID=null,this._actID=null,this._iconID=NaN,this._skinID=NaN,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.txtDesc.style.fontSize=24,this.txtDesc.style.color="#621e09"}w(e,"modules.activity.views.standard.StandardView",t);var i=e.prototype;return h.imps(i,{"modules.activity.IActivityView":!0}),i.onClick=function(t){switch(t.target){case this.btnWatch:pt.send(10017,2,"查看排行"),this.linkToRankPanel();break;case this.imgHelp:OF.ins.showMessage(this.curVO.help);break;default:if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(e.data,"BASE_GOODS_TIP")}}},i.linkToRankPanel=function(){if(this.curRankVO)var t=Ci.getStandardRankVO(this.curRankVO.rankID);t&&(0<=t.linkConst?me.linkTo(t.linkConst,this.curRankVO.rankID):1201==this.curRankVO.rankID?il.ins().openRankPanel():1202==this.curRankVO.rankID&&sl.ins().openRankPanel())},i.onDisplay=function(){T.register("RANK_GOT_DATA_UPDATE",this,this.rankUpdate),this.on("undisplay",this,this.onUNDisplay),this.curRankVO&&xr.ins().toGetRank(this.curRankVO.rankID)},i.rankUpdate=function(t){this.curRankVO&&t==this.curRankVO.rankID&&(this.standardOriginShow&&this.standardOriginShow.parent&&this.standardOriginShow.update(),this.standardFlowerShow&&this.standardFlowerShow.parent&&this.standardFlowerShow.update())},i.onUNDisplay=function(){T.remove("RANK_GOT_DATA_UPDATE",this,this.rankUpdate),_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){this.curVO&&this.curVO.endTime>ya.serverTime?this.txtLeftTime.text=x.formatDHMS(this.curVO.endTime-ya.serverTime):(this.txtLeftTime.text="活动已结束",_t.removeFromSceond(this,this.timeLoop))},i.update=function(){for(var t=0;t<this.typeID.length;t++)switch(this.typeID[t]){case 1902:this.curVO=We.getActDetailByActID(this.actID[t]);break;case 1701:this.curRankVO=We.getActDetailByActID(this.actID[t])}if(this.curRankVO){1010==this.curRankVO.rankID?(this.standardFlowerShow=this.standardFlowerShow||new uC,this.standardFlowerShow.setInfo(this.curVO,this.curRankVO,this.skinID),this.showSp.addChild(this.standardFlowerShow)):(this.standardOriginShow=this.standardOriginShow||new pC,this.standardOriginShow.setInfo(this.curVO,this.curRankVO,this.skinID),this.showSp.addChild(this.standardOriginShow));var e=Ci.getStandardRankVO(this.curRankVO.rankID);if(e&&1==e.topBgChange&&(this.topBg.skin="modules/act/standard/"+e.id+"/topBg.png"),0<this.curRankVO.displayId){this.displayItem=this.displayItem||new fh(null,!0,!1);var i=ur.getItem(this.curRankVO.displayId);i.tempNum=1,this.displayItem.data=i,this.displayItem.on("click",this,this.onClickDisplay),this.spDisplay.addChild(this.displayItem),this.txtDisplayName.text=i.name}else this.txtDisplayName.text="",this.displayItem&&this.displayItem.parent.removeChild(this.displayItem);this.rankUpdate(this.curRankVO.rankID)}this.updateMe()},i.onClickDisplay=function(){this.displayItem.data&&Ae.show(this.displayItem.data,"BASE_GOODS_TIP")},i.updateMe=function(){this.curVO&&(this.txtDesc.innerHTML=this.curVO.desc),this.parent&&_t.addToSecond(this,this.timeLoop)},i.callBackUpdate=function(){this.update()},i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"typeID",function(){return this._typeID},function(t){this._typeID=t}),I(0,i,"actID",function(){return this._actID},function(t){this._actID=t}),I(0,i,"skinID",function(){return this._skinID},function(t){this._skinID=t}),I(0,i,"iconID",function(){return this._iconID},function(t){this._iconID=t}),e}(Tu),fC=function(t){function e(){this.spBox=null,this.btnLeft=null,this.btnRight=null,this.btnOK=null,this.txt1=null,this.txt4=null,this.txt3=null,this.txt2=null,this.txtLink=null,this.txtName=null,this.attr1=null,this.attr4=null,this.attr3=null,this.attr2=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreGetViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreGetView")},e}(),_C=function(t){function e(){this.imgBg=null,this.img=null,this.txtName=null,this.txtLevel=null,this.txtAtt1=null,this.txtAtt2=null,this.txtSlot=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreShowTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreShowTip")},e}(),gC=function(t){function e(){this.txtTitle=null,this.btnActive=null,this.imgRp=null,this.imgFull=null,this.spPower=null,this.txtTitle1=null,this.txtAtt1=null,this.txtAtt2=null,this.txtAtt3=null,this.txtAtt4=null,this.txtTitle2=null,this.txtDes=null,e.__super.call(this)}return w(e,"ui.modules.exercise.spiriTre.SpiriTreTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/spiriTre/SpiriTreTip")},e}(),yC=function(t){function e(){this.titleBg=null,this.txtTitle=null,this.upgradeBtn=null,this.imgArrt=null,this.txtSkill=null,this.txtTarget=null,this.fullLvImg=null,e.__super.call(this)}return w(e,"ui.modules.exercise.strangeFire.StrangeFireRefineTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/exercise/strangeFire/StrangeFireRefineTip")},e}(),vC=function(t){function e(){this.txtPrice=null,this.btnYes=null,this.btnNo=null,this.btnClose=null,this.txtMsg=null,e.__super.call(this)}return w(e,"ui.modules.talisman.gemsOffTipDialogUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/gemsOffTipDialog")},e}(),IC=(function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.actLoginFun.ActLoginFunItem",t);var i=e.prototype;i.createChildren=function(){t.prototype.createChildren.call(this)},i.setSel=function(t){this.imgSel.visible=t},I(0,i,"date",function(){return this._data},function(t){if(this._data=t,this._data)switch(this.txtDay.text="第"+this._data.day+"天",ss.getLoginItemState(this._data)){case 21:case 10:this.imgGot.visible=!1,1==this._data.img?(this.imgBox.skin="modules/act/login/box"+this._data.day+".png",this.imgSel.skin="modules/act/login/selCommon.png",this.imgSel.x=14==this._data.day?-2:-10,this.imgSel.y=14==this._data.day?-2:-11):(this.imgBox.skin="modules/act/login/boxClose.png",this.imgSel.skin="modules/act/login/selClose.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!1;break;case 11:this.imgGot.visible=!1,1==this._data.img?(this.imgBox.skin="modules/act/login/box"+this._data.day+".png",this.imgSel.skin="modules/act/login/selCommon.png",this.imgSel.x=-10,this.imgSel.y=-11):(this.imgBox.skin="modules/act/login/boxClose.png",this.imgSel.skin="modules/act/login/selClose.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!0;break;case 22:this.imgGot.visible=!0,1==this._data.img?(this.imgBox.skin="modules/act/login/box"+this._data.day+".png",this.imgSel.skin="modules/act/login/selCommon.png",this.imgSel.x=-10,this.imgSel.y=-11):(this.imgBox.skin="modules/act/login/boxOpen.png",this.imgSel.skin="modules/act/login/selOpen.png",this.imgSel.x=-7,this.imgSel.y=-7),this.imgRp.visible=!1;break;default:this.imgRp.visible=!1}})}(ku),function(t){function e(){this.spBox=null,this.btnLeft=null,this.btnRight=null,this.txt1=null,this.txt4=null,this.txt3=null,this.txt2=null,this.txtLink=null,this.txtName=null,this.attr1=null,this.attr4=null,this.attr3=null,this.attr2=null,e.__super.call(this)}return w(e,"ui.modules.talisman.TalismanGetViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalismanGetView")},e}()),wC=function(t){function e(){e.__super.call(this)}return w(e,"ui.modules.talisman.TalimanHelpTipViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/talisman/TalimanHelpTipView")},e}(),bC=function(t){function e(){this._data=null,this._index=0,this._embattleSkill=NaN,e.__super.call(this)}w(e,"modules.pet.embattle.PetEmbattleItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this.select=!1,this._data){this.imgPet.skin="com/petHead/"+this._data.skin_id+".png";var e=Math.floor(this._data.type_id%1e5/1e4);this.imgBg.skin="com/ui/goodsBg"+e+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this.txtLv.text="Lv"+this._data.level;var i;this.index;if(0<this.index&&this._data.embattle_info&&this._data.embattle_info.embattles&&0<this._data.embattle_info.embattles.length)for(var s in this._data.embattle_info.embattles)if((i=this._data.embattle_info.embattles[s]).index==this.index){this.embattleSkill=i.embattle_skill;break}}else this.imgBg.skin="modules/petEmbattle/eff.png",this.imgType.skin=null,this.imgPet.skin=null,this.txtLv.text="",this.txtFront.text="",this.imgFront.visible=!1}),I(0,i,"index",function(){return this._index},function(t){this._index=t}),I(0,i,"embattleSkill",null,function(t){this._embattleSkill=t;var e=To.getTowerSkill(t);e&&(this.imgFront.visible=null!=e,this.txtFront.text=null!=e?e.name:"")}),I(0,i,"select",null,function(t){this.imgSel.visible=t&&this._data}),I(0,i,"data",function(){return this._data}),e}(Au),SC=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.on("click",this,this.onClick)}w(e,"modules.athletics.snatch.view.SnatchAvengePanel",Eu);var i=e.prototype;return i.update=function(){var t;for(this.txtName.text=this.name,this.txtTime.text=x.format(rs.curFightVO.logTs),t=rs.curFightVO.resId<6?rs.snatchProductIds.slice(0,2):rs.snatchProductIds;0<this.spReward.numChildren;)this.spReward.removeChildAt(0);for(var e,i=rs.getSnatchPlunderReward(rs.curFightVO.resId),s=0;s<t.length;s++)e=ur.getItem(t[s]),Me.createGoodsImage(100*s,0,e,this.spReward,!1,!0,90,!0).num=i.rewardDatas[s].num;var n=oa.getRoleOtherSimpleInfo(rs.curRoleSimpleId);n&&(this.txtPower.text=n.power+"",this.imgHead.skin="com/head/big"+n.category+n.sex+".png")},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnSure:pt.send(111,6,"竞技-元婴修炼-复仇"),Ya.getInstance().toFight(2,rs.curFightVO.logId)}},I(0,i,"uiClass",function(){return"SnatchAvenge"}),e}(),xC=function(t){function e(){this._data=null,this.bcIcon=null,e.__super.call(this),this.bcIcon=b.getOne(),this.bcIcon.pos(60,50),this.spIcon.addChild(this.bcIcon)}w(e,"modules.athletics.snatch.view.SnatchChooseItem",t);var i=e.prototype;return i.update=function(){var t,e,i;for(this.bcIcon.loadAndPlay("moduleEffect/"+this._data.iconEffect,"default",0,!0),this.txtName.text=this._data.name,5==this._data.id?(this.spExt.visible=this.imgSpcBg.visible=!0,t=rs.snatchProductIds):(this.spExt.visible=this.imgSpcBg.visible=!1,t=rs.snatchProductIds.slice(0,2));0<this.spGoods.numChildren;)this.spGoods.removeChildAt(0);for(var s=0;s<t.length;s++)(e=ur.getItem(t[s])).tempNum=1,(i=Me.createGoodsImage(100*s,0,e,this.spGoods,!1,!0,90,!0)).num=this._data.rewardDatas[s].num,i.on("click",this,this.onClickGoods)},i.onClickGoods=function(t){var e=t.target,i="";i=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,i)},i.isSelected=function(t){this.imgSelected.visible=this.imgSelected2.visible=t},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Ru),CC=function(t){function e(){this.sbar=null,this.curSelectedItem=null,this.curSelectedIndex=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.sbar=new p(0,0,445,27,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1]),this.spBar.addChild(this.sbar),this.list.vScrollBarSkin="",this.list.itemRender=xC,this.list.selectEnable=!1,this.btnBack.on("click",this,this.onClick),this.btnClose.on("click",this,this.onClick),this.btnRefresh.on("click",this,this.onClick),this.btnStart.on("click",this,this.onClick)}w(e,"modules.athletics.snatch.view.SnatchChoosePanel",Ou);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnRefresh:pt.send(111,3,"竞技-元婴修炼-刷新法阵按钮");var e=parseInt(this.txtGold.text);0<e?e<=pe.user.attr.gold?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(e+"元宝","#F7EF5F")+Z.span("提升法阵？","#5d3924"),Ya.getInstance(),Ya.getInstance().toRefresh,null,"snatchRef"):Lo.showAlert():Ya.getInstance().toRefresh();break;case this.btnStart:if(rs.detailVO&&rs.detailVO.res_id<5){var i=rs.getSnatchChooseItem(rs.detailVO.res_id),s=new Ee;s.title="温馨提示",s.msg=Z.span("当前法阵：","#5d3924",26)+Z.span(i.name,i.color,26)+Z.span("，确认要开始修炼吗？","#5d3924",26)+"<br/>"+Z.span("（","#5d3924")+Z.span("金色法阵","#fff959",26)+Z.span("可获得不可被掠夺的突破礼包）","#5d3924",26),s.yesFun=Ya.getInstance().toBeginGet,s.yesCaller=Ya.getInstance(),EF.showVO(s)}else Ya.getInstance().toBeginGet()}},i.update=function(){this.updateList(),this.updateInfo()},i.updateInfo=function(){var t=rs.detailVO;if(null!=t){this.sbar.setValue(t.lucky,100);var e=rs.snatchMaxGetTime-t.get_times;this.txtTimes.color=0<e?"#f4ecec":"#FF0000",this.txtTimes.text=e+"次";var i=rs.snatchRefreshFreeTimes-t.refresh_times;this.txtFreeTimes.color=0<i?"#f4ecec":"#d32445",this.txtFreeTimes.text=0<=i?i+"":"0",t.get_times==rs.snatchMaxGetTime?(this.btnRefresh.gray=!0,this.btnRefresh.mouseEnabled=!1):(this.btnRefresh.gray=!1,this.btnRefresh.mouseEnabled=!0);var s=rs.snatchRefreshTimeGolds;t.refresh_times>=s.length?this.txtGold.text=rs.snatchCostGold+"":this.txtGold.text=s[t.refresh_times]+"",this.selecteCurItem(t.res_id-1)}},i.selecteCurItem=function(t){this.curSelectedItem&&(this.curSelectedItem.isSelected(!1),this.curSelectedItem.imgBg.source=ut.getRes("com/ui/innerBg2.png")),this.curSelectedItem=this.list.getCell(t),this.curSelectedItem&&(this.curSelectedItem.isSelected(!0),this.curSelectedItem.imgBg.source=ut.getRes("com/ui/innerBg.png"),this.curSelectedIndex=t)},i.updateList=function(){this.list.dataSource=rs.snatchChooseList,this.list.selectedIndex=this.curSelectedIndex},I(0,i,"uiClass",function(){return"SnatchChoose"}),e}(),PC=function(t){function e(){e.__super.call(this),this.txtLink.on("link",this,this.onLink)}w(e,"modules.athletics.snatch.view.SnatchFinishLogItem",Lu);var i=e.prototype;return i.update=function(){var t=this.dataSource;this.txtInfo.text=t.name+"成功掠夺了你的修炼成果",this.txtLink.innerHTML=Z.linkcolor("复仇","",!0,"b0eb5b",26)},i.onLink=function(t){var e=this.dataSource;rs.curFightVO=rs.curFightVO||new ls,rs.detailVO&&(rs.curFightVO.resId=rs.detailVO.res_id),rs.curFightVO.logId=e.log_id,rs.curFightVO.logTs=e.log_ts,rs.curRoleSimpleId=e.src_id,Tr.ins().toSimpleInfo(e.src_id),Ya.getInstance().openAvengePanel()},e}(),TC=function(t){function e(){this.bcIcon=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.listLog.vScrollBarSkin="",this.listLog.itemRender=PC,this.listLog.renderHandler=Q.create(this,this.updateItem),this.bcIcon=b.getOne(),this.bcIcon.pos(65,50),this.spIcon.addChild(this.bcIcon),this.on("click",this,this.onClick)}w(e,"modules.athletics.snatch.view.SnatchFinishPanel",Du);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:Ya.getInstance().toGetReward();break;case this.btnClose1:this.closeWindow()}},i.update=function(){if(rs.detailVO){this.listLog.dataSource=rs.detailVO.revenge_list,0==rs.detailVO.revenge_list.length?this.txtTip.visible=!0:this.txtTip.visible=!1;var t=rs.getSnatchChooseItem(rs.detailVO.res_id);this.txtName.text=t.name,this.bcIcon.loadAndPlay("moduleEffect/"+t.iconEffect,"default",0,!0);var e=rs.getSnatchPlunderReward(rs.detailVO.res_id),i=this.getPlunderData(e);if(this.txtCopper1.text=t.rewardDatas[0].num-i[0]+"",this.txtCapacity1.text=t.rewardDatas[1].num-i[1]+"",0<i[0]?(this.txtCopper2.visible=!0,this.txtCopper2.text="-"+i[0]):this.txtCopper2.visible=!1,0<i[1]?(this.txtCapacity2.visible=!0,this.txtCapacity2.text="-"+i[1]):this.txtCapacity2.visible=!1,5==rs.detailVO.res_id){this.txtSpc.visible=!0;var s=ur.getItem(rs.snatchProductIds[2]);this.txtSpc.color=U.getColorLight(s.color),this.txtSpc.text="【"+s.name+"】×1"}else this.txtSpc.visible=!1}},i.updateItem=function(t,e){t&&t.update()},i.getPlunderData=function(t){var e=[],i=rs.detailVO.revenge_list.length,s=0;s=(t.id,2);for(var n=0;n<s;n++)e.push(i*t.rewardDatas[n].num);return e},I(0,i,"uiClass",function(){return"SnatchFinish"}),e}(),kC=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.btnClose1.on("click",this,this.closeWindow),this.btnSure.on("click",this,this.closeWindow)}return w(e,"modules.athletics.snatch.view.SnatchIntroducePanel",Nu),I(0,e.prototype,"uiClass",function(){return"SnatchIntroduce"}),e}(),AC=(function(t){function i(){this.curPage=0,this.items=null,this.maxPage=0,this.perPageNum=0,i.__super.call(this),this.perPageNum=4,this.curPage=1,this.initItems(),this.on("click",this,this.onClick),this.txtQuite.innerHTML=Z.linkcolor("快速完成","",!0,"06f122",26),this.txtQuite.on("link",this,this.onLink),Nt.register("RP_ATHLETICS_SNATCH_LOG",this.imgMsgLog),Nt.register("RP_ATHLETICS_SNATCH",this.btnSnatch,new Tt(19,-10)),this.on("undisplay",this,this.onUndisplay),Ja.ins().createCheckShowIcon(1,3,this,588,34)}w(i,"modules.athletics.snatch.view.SnatchMainView",Vu);var e=i.prototype;e.onUndisplay=function(){_t.removeFromSceond(this,this.loopUpdate),this.curPage=1},e.initItems=function(){var t;this.items=this.items||[];for(var e=0;e<this.perPageNum;e++)(t=new RC).x=i.itemPos[e].x,t.y=i.itemPos[e].y,t.visible=!1,t.on("click",this,this.onClickItem),this.boxSp.addChild(t),this.items.push(t)},e.update=function(){rs.detailVO&&(this.maxPage=rs.getSnatchListPageMax(this.perPageNum),this.updateItems(),this.updateInfo(),rs.checkLogRedPoint())},e.updateInfo=function(){var t=rs.getSnatchingByRoleId(pe.roleID);t?(this.spTimesInfo.visible=!0,this.txtMyTimes.text=x.formatMS2(t.cold_ts,ya.serverTime)):this.spTimesInfo.visible=!1,rs.detailVO.get_times<rs.snatchMaxGetTime&&!t&&1==rs.detailVO.reward_type?(this.btnSnatch.gray=!1,this.btnSnatch.mouseEnabled=!0):(this.btnSnatch.gray=!0,this.btnSnatch.mouseEnabled=!1);var e=rs.snatchMaxGetTime-rs.detailVO.get_times,i=rs.snatchMaxRobTimes-rs.detailVO.snatch_times;this.txtTimes1.color=0<e?"#f4ecec":"#FF0000",this.txtTimes1.text=rs.snatchMaxGetTime-rs.detailVO.get_times+"次",this.txtTimes2.color=0<i?"#f4ecec":"#FF0000",this.txtTimes2.text=rs.snatchMaxRobTimes-rs.detailVO.snatch_times+"次"},e.updateItems=function(){var t,e,i=rs.getCurPageSnatchList(this.curPage-1,this.perPageNum);i&&0<i.length&&_t.addToSecond(this,this.loopUpdate);for(var s=0;s<this.items.length;s++)t=i[s],(e=this.items[s])&&((e.dataSource=t)?(e.visible=!0,e.update()):e.visible=!1);1==this.curPage?this.btnPrev.visible=!1:this.btnPrev.visible=!0,this.curPage==this.maxPage?this.btnNext.visible=!1:this.btnNext.visible=!0},e.loopUpdate=function(){for(var t,e,i=0;i<this.items.length;i++)(e=(t=this.items[i]).dataSource)&&(0<=e.cold_ts-ya.serverTime?(t.loopUpdateTimes(x.formatMS2(e.cold_ts,ya.serverTime)),e.role_id==pe.roleID&&(this.spTimesInfo.visible=!0,this.txtMyTimes.text=x.formatMS2(e.cold_ts,ya.serverTime))):e.role_id==pe.roleID?this.spTimesInfo.visible=!1:t.visible=!1)},e.onClick=function(t){switch(t.target){case this.btnNext:this.curPage<this.maxPage&&(this.curPage+=1,this.updateItems());break;case this.btnPrev:1<this.curPage&&(this.curPage-=1,this.updateItems());break;case this.imgFAQ:Ya.getInstance().openIntroducePanel();break;case this.imgMsgLog:rs.curAttackedNotifyId=0,rs.checkLogRedPoint(),Ya.getInstance().openMsgLogPanel();break;case this.btnSnatch:pt.send(111,2,"竞技-元婴修炼-修炼按钮"),Ya.getInstance().openChoosePanel()}},e.onClickItem=function(t){if(t.target instanceof modules.athletics.snatch.view.SnatchPlayerItem){var e=t.target.dataSource;e.role_id==pe.roleID?Jt.addTip("不能掠夺自身"):rs.detailVO.snatch_times==rs.snatchMaxRobTimes?Jt.addTip("本日掠夺次数已满"):e.be_snatch.length==rs.snatchMaxGetTime?Jt.addTip("该玩家被掠夺次数已满"):-1!=e.be_snatch.indexOf(pe.roleID)?Jt.addTip("已对该玩家进行掠夺"):(rs.curFightVO=rs.curFightVO||new ls,rs.curFightVO.resId=e.res_id,rs.curFightVO.roleId=e.role_id,rs.curRoleSimpleId=e.role_id,Tr.ins().toSimpleInfo(e.role_id),Ya.getInstance().openRobEnterPanel())}},e.onLink=function(t){pt.send(111,4,"竞技-元婴修炼-快速完成");var e=rs.getSnatchingByRoleId(pe.roleID),i=Math.ceil((e.cold_ts-ya.serverTime)/1800*rs.snatchColdDownMaxCost),s=Z.span("确认花费","#5d3924",24)+Z.span(i+"元宝","#ffea05",24)+Z.span("快速完成本次修炼吗？","#5d3924",24),n=new Ee;n.msg=s,n.yesCaller=Ya.getInstance(),n.yesFun=Ya.getInstance().toColdDown,EF.showVO(n)},I(0,e,"uiClass",function(){return"SnatchMain"}),_(i,["itemPos",function(){return this.itemPos=[{x:260,y:110},{x:450,y:267},{x:265,y:385},{x:70,y:320}]}])}(),function(t){function e(){e.__super.call(this),this.txtLink.on("click",this,this.onClick)}w(e,"modules.athletics.snatch.view.SnatchMsgLogItem",Bu);var i=e.prototype;return i.update=function(){var t=this.dataSource;t&&(this.txtTime.text=x.format(t.log_ts),this.txtInfo.text=this.getInfoStr(t))},i.getInfoStr=function(t){var e="";return t.src_id==pe.roleID?(1==t.win?e="你成功掠夺了"+t.name+"的修炼成果":2==t.win&&(e="你对"+t.name+"发起了掠夺，以失败告终。"),this.txtLink.visible=!1):t.dst_id==pe.roleID&&(this.txtLink.visible=!0,1==t.win?(e=t.name+"掠夺了你的修炼成果",1==t.is_revenge?(this.txtLink.underline=!0,this.txtLink.text="复仇"):2==t.is_revenge&&(this.txtLink.underline=!1,this.txtLink.text="已复仇")):2==t.win&&(this.txtLink.visible=!1,e=t.name+"想要掠夺你的修炼成果，但被你顽强守住了")),e},i.onClick=function(t){var e=this.dataSource;e&&(rs.curFightVO=rs.curFightVO||new ls,rs.curFightVO.resId=e.res_id,rs.curFightVO.logId=e.log_id,rs.curFightVO.logTs=e.log_ts,rs.curRoleSimpleId=e.src_id,Tr.ins().toSimpleInfo(e.src_id),Ya.getInstance().openAvengePanel())},e}()),EC=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.list.itemRender=AC,this.list.scrollBar.autoHide=!0,this.list.renderHandler=Q.create(this,this.updateItem),this.btnBack.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow)}w(e,"modules.athletics.snatch.view.SnatchMsgLogPanel",Mu);var i=e.prototype;return i.updateItem=function(t,e){t&&t.update()},i.update=function(){this.list.dataSource=rs.msgLogs},I(0,i,"uiClass",function(){return"SnatchMsgLog"}),e}(),RC=function(t){function e(){this.bcBg=null,this.role=null,this.loadCompleteHandler=null,e.__super.call(this),this.bcBg=b.getOne(),this.bcBg.pos(80,120),this.spEffect.addChild(this.bcBg),this.on("display",this,this.onDisplay)}w(e,"modules.athletics.snatch.view.SnatchPlayerItem",Fu);var i=e.prototype;return i.onDisplay=function(){this.update()},i.update=function(){var t=this.dataSource;t&&(0<t.cold_ts&&(this.txtTime.text=x.formatMS2(t.cold_ts,ya.serverTime)),t.role_id==pe.roleID?this.txtName.text="我的修炼":this.txtName.text=t.name,this.bcBg.loadAndPlay("moduleEffect/snatch_player_bg_"+t.res_id,"default",0,!0),t.be_snatch.length<rs.snatchMaxBeRobTimes&&t.role_id!=pe.roleID&&-1==t.be_snatch.indexOf(pe.roleID)?this.imgRob.visible=!0:this.imgRob.visible=!1,this.imgIcon.skin="modules/athletics/snatchIcon"+(t.res_id+1)+".png",this.width>this.txtName.textWidth?this.imgIcon.x=(this.width-this.txtName.textWidth)/2-42:this.imgIcon.x=-42,this.updateAvatar(t.fashion,t.sex))},i.onLoadBCComplete=function(){var t=this.dataSource;if(t){var e=Mt.getResource(Pe.getRoleUnitSubFile(t.fashion)+t.fashion+"_sit_4");if(e){var i=e.getActHeight("sit",4);this.role.y=i,this.bcBg.y=this.role.y+5,this.spInfo.y=this.spEffect.y-55,this.imgRob.y=this.role.y+10,this.height=this.role.y+40}}},i.updateAvatar=function(t,e){this.role=this.role||new _h;var i=new Object;i.className="p_skin",i.weapon=0,i.mount=0,i.wing=0,i.track=0,i.body=t,this.role.resetSkin(i,e,!0),this.role.resetState(0),this.role.play("sit",4,4,!0),this.role.pos(80,130),this.spEffect.addChild(this.role),this.onLoadBCComplete(),this.loadCompleteHandler=this.loadCompleteHandler||Q.create(this,this.onLoadBCComplete,null),this.role.heightChangeHandler=this.loadCompleteHandler},i.loopUpdateTimes=function(t){this.txtTime.text=t},e}(),OC=function(t){function e(){this.bcTitle=null,this.btnGet=null,this.detailText=null,e.__super.call(this)}return w(e,"ui.modules.family.FamilyFightResultPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/family/FamilyFightResultPanel")},e}(),LC=function(t){function e(){this.bcBg=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.on("click",this,this.onClick),this.bcBg=b.getOne(),this.bcBg.pos(200,190),this.addChild(this.bcBg)}w(e,"modules.athletics.snatch.view.SnatchRobEnterPanel",Uu);var i=e.prototype;return i.update=function(){var t=oa.getRoleOtherSimpleInfo(rs.curRoleSimpleId);t&&(this.txtPow.text=t.power+"",this.txtSoc.text=t.family_name,this.txtName.text=t.role_name);var e,i=rs.snatchMaxRobTimes-rs.detailVO.snatch_times;for(this.txtTimes.color=0<i?"#ecd4c3":"#FF0000",this.txtTimes.text=i+"次",e=rs.curFightVO.resId<6?rs.snatchProductIds.slice(0,2):rs.snatchProductIds;0<this.spReward.numChildren;)this.spReward.removeChildAt(0);for(var s,n=rs.getSnatchPlunderReward(rs.curFightVO.resId),o=0;o<e.length;o++)s=ur.getItem(e[o]),Me.createGoodsImage(100*o,0,s,this.spReward,!1,!0,90,!0).num=n.rewardDatas[o].num;var a=rs.getSnatchChooseItem(rs.curFightVO.resId);this.txtType.text=a.name,this.bcBg.loadAndPlay("moduleEffect/snatch_player_bg_"+rs.curFightVO.resId,"default",0,!0)},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnRob:pt.send(111,5,"竞技-元婴修炼-进行掠夺"),Ya.getInstance().toFight(1,rs.curFightVO.roleId)}},I(0,i,"uiClass",function(){return"SnatchRobEnter"}),e}(),DC=function(t){function e(){this.val=null,e.__super.call(this)}return w(e,"modules.battlefieldOfShura.item.BattlefieldRankingItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(null!=t){this.val=t,this.scoreTxt.text=this.val.score+"",this.rankNumTxt.text=this.val.rank+"",this.roleNameTxt.text=this.val.role_name+"";var e="#f4f1b2";1==this.val.rank?e="#fff959":2==this.val.rank?e="#bd5713":3==this.val.rank&&(e="#f299ff"),this.rankNumTxt.color=this.roleNameTxt.color=this.scoreTxt.color=e}}),e}(Gu),NC=function(t){function e(){this.data=null,e.__super.call(this)}return w(e,"modules.battlefieldOfShura.item.BattlefieldRankItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(t){this.data=t,this.rankNumTxt.text=this.data.rank+"",this.nameTxt.text=this.data.role_name,this.killTxt.text=this.data.kill+"",this.scoreTxt.text=this.data.score+"";var e="#5d3924";1==this.data.rank?e="#fff959":2==this.data.rank?e="#bd5713":3==this.data.rank&&(e="#f299ff"),this.rankNumTxt.color=this.nameTxt.color=this.killTxt.color=this.scoreTxt.color=e}}),e}(Hu),VC=function(t){function e(){this.data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.battlefieldOfShura.item.HighScoresRankItem",t);var i=e.prototype;return i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.nameText=this.roleName,this._blueVipBox.updateShowing(e)}},I(0,i,"uiClass",function(){return"HightScoresRankItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this.data=t,this.roleName.text=this.data.elements[0],this.scroeTxt.text=this.data.elements[1],this.rankTxt.text=this.data.row_id+"",1==this.data.row_id?(this.roleName.color="#fff959",this.scroeTxt.color="#fff959",this.rankTxt.color="#fff959"):2==this.data.row_id?(this.roleName.color="#bd5713",this.scroeTxt.color="#bd5713",this.rankTxt.color="#bd5713"):3==this.data.row_id?(this.roleName.color="#f299ff",this.scroeTxt.color="#f299ff",this.rankTxt.color="#f299ff"):(this.roleName.color="#5d3924",this.scroeTxt.color="#5d3924",this.rankTxt.color="#5d3924"),this.updateBlueVip(this.data.elements[2]))}),e}(Wu),BC=function(t){function e(){this.startTime=NaN,e.__super.call(this),this.killerName.text="",this.dieName.text=""}w(e,"modules.battlefieldOfShura.item.KillInfoItem",qu);var i=e.prototype;return i.setKillInfo=function(t,e){this.killerName.text=t,this.dieName.text=e},i.getKillInfoName=function(){return this.killerName.text+this.dieName.text},i.disposSelf=function(){this.x=0,this.y=0},e}(),MC=function(t){function e(){this.data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.battlefieldOfShura.item.LastRankingItem",t);var i=e.prototype;return i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.nameText=this.roleName,this._blueVipBox.updateShowing(e)}},I(0,i,"uiClass",function(){return"LastRankItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t){this.data=t,this.roleName.text=this.data.elements[0],this.scroeTxt.text=this.data.elements[1],this.killTxt.text=this.data.elements[2],this.rankTxt.text=this.data.row_id+"";var e="#5d3924";1==this.data.row_id?e="#fff959":2==this.data.row_id?e="#bd5713":3==this.data.row_id&&(e="#f299ff"),this.roleName.color=this.scroeTxt.color=this.rankTxt.color=this.killTxt.color=e,this.updateBlueVip(Qo.getRankBlueVip(5002,this.data.elements))}}),e}(Yu),FC=function(t){function e(){this.val=null,this.items=null,e.__super.call(this)}return w(e,"modules.battlefieldOfShura.item.RoleRewardShowItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(t){this.val=t,this.nameText.text=this.val.name;var e="#5d3924";for(var i in 1==this.val.rank?e="#fff959":2==this.val.rank?e="#bd5713":3==this.val.rank&&(e="#f299ff"),this.nameText.color=e,this.items=this.items||[],this.items)this.items[i].removeSelf();for(var s=(760-135*(this.val.pRw.length-1)-105)/2,n=0;n<this.val.pRw.length;n++){var o=new Ah(91,91,!0,!0,!0,!1,91);o.dataSource=this.val.pRw[n],o.pos(s+135*n,5),this.addChild(o),this.items.push(o)}}}),e}(Xu),UC=function(t){function e(){e.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.battlefieldOfShura.item.RoleScoreBoxItem",Ku);var i=e.prototype;return i.onDisplay=function(){this.update()},i.onUnDisplay=function(){},i.update=function(){var t,e=ds.getScoreConfig(),i=1;for(var s in e){var n=(t=e[s]).initScoreMaxAndMin();this["scoreTxt"+i].text=n[0]+"-"+n[1],this["dropTxt"+i].text=t.dropScore,this["killTxt"+i].text=t.killScore,i++}},I(0,i,"uiClass",function(){return"RoleScoreBox"}),e}(),GC=function(t){function m(){this._lastLevel=0,this._level=0,this._roleInfoIconArr=[],this._isShowRanking=!0,this._killInfoSpPool=[],this._useingKillInfoSp=[],this._skillInfoArr=[],this._skillCDs=[0,0,0,0],this._firstRoleHeadIcon=null,this._monsterHeadIcon=null,this._numberOnePalId=NaN,this._numberOneScore=0,this.flyWait=11,this.dieWaitCount=5,this.waitNextTime=3,this.apfArr=[.02,.02,.02],this._collectTimeOut=-1,this.palAndSkillArr=[],this._partLoop=-1,this._battlePartPanel=null,this._isPartFlying=!1,this.roleIsDieing=!1,m.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0",!0),this.initEvent(),this.rankingList.vScrollBarSkin="",this.rankingList.itemRender=DC,this.rankingList.dataSource=[],this.packBtn.mouseEnabled=!1,this.initRoleInfoBoxShow()}w(m,"modules.battlefieldOfShura.view.BattlefieldBattlePenal",ju);var e=m.prototype;return e.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.skill1.on("click",this,this.useSkill),this.skill2.on("click",this,this.useSkill),this.skill3.on("click",this,this.useSkill),this.skill4.on("click",this,this.useSkill)},e.onClick=function(t){switch(t.target){case this.ruleBtn:me.linkTo(12005);break;case this.settingBtn:T.dispatch("OPEN_BATTLE_FIELD_SETTING_PANEL");break;case this.quitBtn:this.onClickQuit();break;case this.upSkillBtn1:Ka.ins().toBattleUpgradeSkill(1);break;case this.upSkillBtn2:Ka.ins().toBattleUpgradeSkill(3);break;case this.upSkillBtn3:Ka.ins().toBattleUpgradeSkill(2);break;case this.upSkillBtn4:Ka.ins().toBattleUpgradeSkill(4);break;case this.packSp:this.packRanking();break;case this.nextOtherRoleBtn:this.onClickNextOtherRole();break;case this.skillUpgrendBtn:this.clickSkillUpgrend()}},e.onClickNextOtherRole=function(){this.waitNextTime=3,this.nextOtherRoleInfo()},e.onClickQuit=function(){0==ds.PkState()?el.ins().toExit():Jt.addTip("处于PK状态中，无法退出")},e.onDisplay=function(){this.initShow(),this.setSkillInfoArr(),this.skillCanUpgradeShow(),this.rankingList.dataSource=[],this.selfSecordTxt.text=ds.score+"",_t.addToSecond(this,this.timeLooper),_t.addToFrame(this,this.checkMyPalAndMonster),this.nextOtherRoleInfo(),T.register("CAN_NOT_AUTO_HIT",this,this.allHeadItemSelectFalse)},e.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLooper),_t.removeFromFrame(this,this.checkMyPalAndMonster),0<this._partLoop&&_t.clearTimeout(this._partLoop),0<this._collectTimeOut&&_t.clearTimeout(this._collectTimeOut),T.remove("CAN_NOT_AUTO_HIT",this,this.allHeadItemSelectFalse)},e.initShow=function(){this.roleDieBox.visible=!1,this.timeImg.skin="modules/battlefieldOfShura/reviveTime_5.png",this.dieBg.skin="com/ui/panelBg.png",this.dieBg.alpha=.5},e.clickSkillUpgrend=function(){me.linkTo(12003)},e.checkMyPalAndMonster=function(){Ka.ins().checkMonster();var t=0;for(var e in this._roleInfoIconArr){var i=this._roleInfoIconArr[e].getChildByName("attMe");(i.alpha<=.1||1<=i.alpha)&&(this.apfArr[t]*=-1),i.alpha+=this.apfArr[t],2<++t&&(t=0)}},e.timeLooper=function(){ds.checkAttMeStemp(),ds.checkMeAttStemp(),0<this.waitNextTime?this.waitNextTime--:(this.waitNextTime=3,this.nextOtherRoleInfo()),this._isPartFlying&&(this.flyWait--,this.flyWait<=0&&(this._isPartFlying=!1,this.battlePartPanelFlyEnd(),this.flyWait=11));for(var t=0,e=this._skillCDs.length;t<e;t++)0<this._skillCDs[t]?(this["skill"+(t+1)]&&(this["skill"+(t+1)].isSkillCd=!0,this["skillmc"+(t+1)].visible=!0),this["cdTxt"+(t+1)]&&(this["cdTxt"+(t+1)].visible=!0,this["cdTxt"+(t+1)].text=this._skillCDs[t]+"秒"),this._skillCDs[t]--):(this["skill"+(t+1)]&&this["skill"+(t+1)].isSkillCd&&(this["skill"+(t+1)].isSkillCd=!1,this["skillmc"+(t+1)].visible=!1),this["cdTxt"+(t+1)]&&(this["cdTxt"+(t+1)].visible=!1));var i,s=!1;for(var n in Se.monsterDict)if(i=Se.monsterDict[n],ds.getMonsterIsShowUnit(i.pvo.type_id)&&1==i.visible){this.showBuffMonsterIcon(i),s=!0;break}0==s&&this.unShowMonsterIcon(),ds.endTime<=0?(this.endTimeTxt.text="",Ka.ins().toBattleFightInfo()):this.endTimeTxt.text=x.formatMS2(ds.endTime,ya.serverTime),this.roleIsDieing&&(this.dieWaitCount<=0?(this.roleIsDieing=!1,this.dieWaitCount=5,this.timeImg.skin="modules/battlefieldOfShura/reviveTime_5.png",this.roleDieBox.visible=!1):(this.roleDieBox.visible=!0,this.timeImg.skin="modules/battlefieldOfShura/reviveTime_"+this.dieWaitCount+".png",this.dieWaitCount--))},e.setSkillInfoArr=function(){this._skillInfoArr=ds.getSkillInfoByType(2)},e.getSkillLevel=function(t){var e,i=0;for(var s in ds.skills)if((e=ds.skills[s]).id==t){i=e.val;break}return i},e.getSkillId=function(t){var e,i=-1;for(var s in this._skillInfoArr)(e=this._skillInfoArr[s]).id==t+2e3&&(i=e.skillId);return i},e.useSkill=function(t){if(this.roleIsDieing)Jt.addTip("复活期间不可使用技能");else{var e=-1,i=-1;switch(t.target){case this.skill1:e=this.getSkillId(1),i=1;break;case this.skill2:e=this.getSkillId(2),i=2;break;case this.skill3:e=this.getSkillId(3),i=3;break;case this.skill4:e=this.getSkillId(4),i=4}if(!(e<0||this["skillmc"+i].visible)){var s,n=!1;for(var o in this._skillInfoArr)if((s=this._skillInfoArr[o]).skillId==e){n=0<s.isSelf;break}n?WS&&WS.main&&Ka.ins().toBattleUseSkill(e,WS.main.pvo.pal_id):0!=ds.attRoleInfo?Ka.ins().toBattleUseSkill(e,ds.attRoleInfo):0!=ds.attBuffMonsterID&&Ka.ins().toBattleUseSkill(e,ds.attBuffMonsterID)}}},e.skillCdShow=function(t){var e=this.getSkillLevel(t);if(e<=0)Jt.addTip("技能未到等级");else{var i,s=-1;for(var n in this._skillInfoArr)if((i=this._skillInfoArr[n]).skillId==t){s=i.getSkillCoolDown(e);break}0<e&&this.showSkillUsedCoolDown(s,t)}},e.showSkillUsedCoolDown=function(t,e){var i;for(var s in this._skillInfoArr)if((i=this._skillInfoArr[s]).skillId==e){var n=Math.floor(i.id%2e3)-1;this._skillCDs[n]=t;break}},e.skillLock=function(){var t;for(var e in this._skillInfoArr){var i=(t=this._skillInfoArr[e]).lockLv,s=Math.floor(t.id%2e3);this["lockLevelTxt"+s]&&(ds.nowLevel>=i?(this["lockLevelTxt"+s].text="",this["skillmc"+s].visible=!1):(this["lockLevelTxt"+s].text="等级"+i+"\n解锁",this["skillmc"+s].visible=!0))}},e.getSkillPoint=function(){var t,e=0;for(var i in this._skillInfoArr)t=this._skillInfoArr[i],e+=this.getSkillLevel(t.skillId);return e=ds.nowLevel-e},e.skillCanUpgradeShow=function(){var t,e=this.getSkillPoint();if(this.skillLock(),this.passiveSkillUpGradeShow(),e<=0)for(var i=1;i<=4;i++)this["upSkillBtn"+i]&&(this["upSkillBtn"+i].visible=!1);else for(var s in this._skillInfoArr){t=this._skillInfoArr[s];var n=Math.floor(t.id%2e3);if(this["upSkillBtn"+n]){var o=t.lockLv,a=t.maxLv;this["upSkillBtn"+n].visible=ds.nowLevel>=o&&this.getSkillLevel(t.skillId)<a}}},e.passiveSkillUpGradeShow=function(){var t,e=ds.getSkillInfoByType(1),i=0;for(var s in e)t=e[s],i+=this.getSkillLevel(t.skillId);var n=ds.nowLevel-i;this.canAddPassivePoint.visible=0<n,this.canAddPassiveTxt.text=n+""},e.updateSkillUpgrade=function(){var t;for(var e in this._skillInfoArr){t=this._skillInfoArr[e];var i=Math.floor(t.id%2e3),s=this.getSkillLevel(t.skillId);this["skillLevelTxt"+i]&&(this["skillLevelTxt"+i].text="Lv."+s)}this.skillCanUpgradeShow()},e.packRanking=function(){this._isShowRanking=!this._isShowRanking,this.myRankText.visible=this.rankingBg.visible=this.myRankText.visible=this.rankingList.visible=this._isShowRanking,this.packTxtImg.skin=this._isShowRanking?"modules/battlefieldOfShura/packUp.png":"modules/battlefieldOfShura/open.png",this.packBtn.rotation=this._isShowRanking?90:270,this.packSp.y=this._isShowRanking?214:59},e.updateRanking=function(t,e){this.myRankText.text="我的排名:"+e,this.rankingList.dataSource=t.sort(this.sortRank),0<t.length&&t[0]&&(this._numberOneScore=t[0].score)},e.sortRank=function(t,e){return t.rank<e.rank?-1:1},e.updateSelfInfo=function(t,e,i){this.selfSecordTxt.text=t+"",this.levelTxt.text="Lv."+e,this._level=e,this.updateExpShow(i),e!=this._lastLevel&&(this._lastLevel=e,this.updateSkillUpgrade()),Ka.ins().updateRoleLevelEff(!0,e,0,t)},e.updateExpShow=function(t){var e=ds.getExpByLevel(this._level+1);if(null!=e){var i=e.exp;this.exeBar.width=t/i*636,this.exeTxt.text=t+"/"+i}else this.exeBar.width=636},e.collectAndkillInfoShow=function(t){switch(t){case"collect":this.collectInfo.visible=!0,this.collectTxt.text="收集资源+1",this._collectTimeOut=_t.setTimeout(this,this.unShowCollectInfo,null,1e3);break;case"kill":this.collectInfo.visible=!0,this.collectInfo.visible=!0,this.collectTxt.text="杀人+1"}},e.unShowCollectInfo=function(){this.collectInfo.visible=!1},e.addKillInfo=function(t,e){if(-1==this.palAndSkillArr.indexOf(t+e)){var i;this.palAndSkillArr.push(t+e),i=0<this._killInfoSpPool.length?this._killInfoSpPool.shift():new BC,this._useingKillInfoSp.push(i),i.setKillInfo(t,e),i.pos(-i.width,i.height*(this._useingKillInfoSp.length-1<=0?0:this._useingKillInfoSp.length-1)),i.visible=!0,i.alpha=1,this.killInfoBox.addChild(i);var s=this;ie.to(i,{x:0},800,A.backIn,Q.create(null,function(t,e){t&&s.alphaAndMoveUpItem(t)},[i,i.height*(this._useingKillInfoSp.length-1)]))}},e.alphaAndMoveUpItem=function(t){var e=this;t&&(0==t.y?ie.to(t,{y:t.y-t.height,alpha:0},1500,A.circIn,Q.create(null,function(){e.removeKillInfoItemShow(t)})):ie.to(t,{y:t.y-t.height},1500,A.circIn,Q.create(null,function(t){e.alphaAndMoveUpItem(t)},[t])))},e.removeKillInfoItemShow=function(t){if(-1!=this._useingKillInfoSp.indexOf(t)){var e=this.palAndSkillArr.indexOf(t.getKillInfoName());-1!=e&&this.palAndSkillArr.splice(e,1),ie.clearAll(t),t.disposSelf(),this._useingKillInfoSp.splice(this._useingKillInfoSp.indexOf(t),1),this._killInfoSpPool.push(t)}},e.setNextRoleBtnVisible=function(t){this.nextOtherRoleBtn.visible=t},e.showFristRolePos=function(t,e,i){if(this._numberOnePalId=0,WS&&WS.main)if(t!=WS.main.pvo.pal_id){var s;for(var n in Se.roleDict)if((s=Se.roleDict[n]).pvo.pal_id==t){var o=new Object;o.className="p_pal_data",o.pal_id=s.pvo.pal_id,o.ext=new Object,o.ext.className="p_pal_ext",o.ext.sex=s.pvo.sex,o.ext.category=s.pvo.category,this._firstRoleHeadIcon.data=o,this._firstRoleHeadIcon.visible=!0,this._firstRoleHeadIcon.getChildByName("roleName").text=s.pvo.pal_name,this._firstRoleHeadIcon.getChildByName("scoreImg").skin=ds.getScoreImgByScore(this._numberOneScore),this._numberOnePalId=t;break}var a=this._firstRoleHeadIcon.getChildByName("pointer");a.visible=!0;var l=WS.main.pt,r=Ot.ptToPoint(l),h=Ot.ptToPoint(new Rt(e,i)),u=180*Math.atan2(h.y-r.y,h.x-r.x)/Math.PI;a.rotation=u+90}else this._firstRoleHeadIcon.visible=!1},e.showBuffMonsterIcon=function(t){if(this._monsterHeadIcon){this._monsterHeadIcon.visible=!0;var e=t.pvo.type_id;if(this._monsterHeadIcon.getChildByName("roleName")){this._monsterHeadIcon.getChildByName("roleName").text=t.pvo.monster_name;var i=ds.getMonsterIconPath(e);ds.attBuffMonsterID=t.pvo.monster_id,this._monsterHeadIcon.monsterPath=i}}},e.unShowMonsterIcon=function(){ds.attBuffMonsterID=0,this._monsterHeadIcon&&this._monsterHeadIcon.parent&&(this._monsterHeadIcon.visible=!1)},e.nextOtherRoleInfo=function(){Ka.ins().findOtherRoles()},e.initRoleInfoBoxShow=function(){for(var t=0;t<3;t++){var e=this.createHeadIcon(!1,158,150*t,!0,!1,!0);e.on("click",this,this.onClickRoleHead),this.roleInfoBox.addChild(e),this._roleInfoIconArr.push(e)}this._firstRoleHeadIcon=this.createHeadIcon(!1,-30,0,!1,!0),this._firstRoleHeadIcon.on("click",this,this.onClickRoleHead),this.roleInfoBox.addChild(this._firstRoleHeadIcon),this._monsterHeadIcon=this.createHeadIcon(!1,-30,150),this._monsterHeadIcon.on("click",this,this.onClickMonsterHead),this.roleInfoBox.addChild(this._monsterHeadIcon)},e.createHeadIcon=function(t,e,i,s,n,o){void 0===s&&(s=!0),void 0===n&&(n=!1),void 0===o&&(o=!1);var a=new dF;a.open=t,a.y=i,a.x=e,a.visible=!1;var l=new et;l.skin="modules/battlefieldOfShura/txtBg.png",l.pos(-24,114),a.addChild(l),Me.createText("这个是名字",0,120,a.width,20,a,m.createTextFormat("#ffe0cf","center",24)).name="roleName";var r=new et;if(r.name="scoreImg",r.pos(-45,105),r.skin="",a.addChild(r),s){var h=new et;h.skin="modules/battlefieldOfShura/do1.png",h.pos(75,72),a.addChild(h),Me.createText("22",34,80,a.width,20,a,m.createTextFormat("#ffe0cf","center",20)).name="roleScore"}if(o){var u=new et;u.skin="modules/battlefieldOfShura/attMe.png",u.pos(5,0),u.name="attMe",a.addChild(u)}if(n){var c=new y;c.pos(a.width/2,a.height/2),c.rotation=0,a.addChild(c);var d=new f;d.skin="com/ui/arrowLeft3.png",d.stateNum=2,d.rotation=90,d.size(26,39),d.anchorX=d.anchorY=.5,d.pos(0,-77),c.addChild(d),c.name="pointer",a.addChild(c);var p=new et;p.skin="modules/battlefieldOfShura/NO1.png",p.pos(18,0),a.addChild(p)}return a},e.setRoleHeadInfo=function(t,e){var i=new Object;i.className="p_pal_data",i.pal_id=e.pvo.pal_id,i.ext=new Object,i.ext.className="p_pal_ext",i.ext.sex=e.pvo.sex,i.ext.category=e.pvo.category,this._roleInfoIconArr[t].data=i},e.updateOtherRoleInfo=function(t){for(var e=0,i=this._roleInfoIconArr.length;e<i;e++)this._roleInfoIconArr[e].visible=!1;for(var s=0,n=t.length;s<n;s++){var o=t[s],a=o.info,l=a.role_id,r=a.level,h=a.score,u=o.isAttMe,c=o.isAtt;for(var d in Se.roleDict){var p=Se.roleDict[d];if(100*Math.floor(p.id/100)==l){var m=this._roleInfoIconArr[s].getChildByName("roleName"),f=this._roleInfoIconArr[s].getChildByName("roleScore");m.text=p.pvo.pal_name,f.text=r+"",this.setRoleHeadInfo(s,p),this._roleInfoIconArr[s].getChildByName("attMe").visible=u,this._roleInfoIconArr[s].select=c,this._roleInfoIconArr[s].getChildByName("scoreImg").skin=ds.getScoreImgByScore(h),this._roleInfoIconArr[s].visible=!0;break}}}},e.onClickRoleHead=function(t){if(t.target instanceof modules.role.view.HeadItem&&!this.roleIsDieing){var e=t.target.date.pal_id;if(e&&WS&&WS.main&&e!=WS.main.pvo.pal_id){var i=Se.roleDict[e];i&&0==i.getIsDie()&&(T.dispatch("CAN_AUTO_HIT"),ds.attRoleInfo=e,WS.main.lockedTarget=ds.attRoleInfo,WS.main.runAndHit(e,!0),e==this._numberOnePalId?this.setHeadItemSelect(!0,!1):this.setHeadItemSelect(!1,!1,this._roleInfoIconArr.indexOf(t.target)))}}},e.onClickMonsterHead=function(){WS&&WS.main&&0!=ds.attBuffMonsterID&&!this.roleIsDieing&&(T.dispatch("CAN_AUTO_HIT"),WS.main.lockedTarget=ds.attBuffMonsterID,WS.main.runAndHit(ds.attBuffMonsterID,!0),this.setHeadItemSelect(!1,!0))},e.setHeadItemSelect=function(t,e,i){if(void 0===i&&(i=-1),this._firstRoleHeadIcon.select=t,0==(this._monsterHeadIcon.select=e)&&0==t&&-1!=i&&0<this._roleInfoIconArr.length&&this._roleInfoIconArr[i])for(var s=0,n=this._roleInfoIconArr.length;s<n;s++)this._roleInfoIconArr[s].select=s==i;else for(var o=0,a=this._roleInfoIconArr.length;o<a;o++)this._roleInfoIconArr[o].select=!1},e.allHeadItemSelectFalse=function(){this._firstRoleHeadIcon.select=!1,this._monsterHeadIcon.select=!1;for(var t=0,e=this._roleInfoIconArr.length;t<e;t++)this._roleInfoIconArr[t].select=!1},e.updateBattlePart=function(t){2<=t&&this.battlePartPanelFly(t)},e.openBattlePartPanel=function(){this._battlePartPanel=this._battlePartPanel||new JC,this._battlePartPanel.x=this.width+this._battlePartPanel.width,this._battlePartPanel.y=this.flyBox.y,this.addChild(this._battlePartPanel)},e.battlePartPanelFly=function(t){this.openBattlePartPanel(),this._battlePartPanel.partNum=t,ie.to(this._battlePartPanel,{x:this.flyBox.x-this._battlePartPanel.width/2},800,A.circIn),this._isPartFlying=!0},e.battlePartPanelFlyEnd=function(){var e=this;this._battlePartPanel&&this._battlePartPanel.parent&&ie.to(this._battlePartPanel,{x:-this._battlePartPanel.width},800,A.circIn,Q.create(null,function(t){e._battlePartPanel.removeSelf(),e._battlePartPanel=null},[this._battlePartPanel]))},e.addCollectMove=function(t){var e=new Wt,i=new b;i.loadAndPlay("unit/monster/"+t+"_0","stand",0,!0),i.addChild(e),e.pos(this.width/2,this.height/2),e.addChild(i),this&&this.parent&&(this.addChild(e),ie.to(e,{x:this.selfSecordBox.x+this.selfSecordBox.width/2,y:this.selfSecordBox.y+this.selfSecordBox.height/2},800,A.circIn,Q.create(null,function(t){e.removeSelf()},[e])))},e.showRoleDieBox=function(){this.roleIsDieing=!0},e.updateSkillBtnShowMod=function(){ds.joyMod<=2?(this.skillBox1.bottom=250,this.skillBox1.centerX=-200,this.skillBox2.bottom=100,this.skillBox2.centerX=-200,this.skillBox3.bottom=250,this.skillBox3.centerX=200,this.skillBox4.bottom=100,this.skillBox4.centerX=200):(this.skillBox1.bottom=337,this.skillBox1.centerX=119,this.skillBox2.bottom=272,this.skillBox2.centerX=230,this.skillBox3.bottom=145,this.skillBox3.centerX=230,this.skillBox4.bottom=67,this.skillBox4.centerX=113)},I(0,e,"uiClass",function(){return"BattlefiledBattlePenal"}),m.createTextFormat=function(t,e,i){void 0===t&&(t="#ffff00"),void 0===e&&(e="center"),void 0===i&&(i=20);var s=new Qt;return s.color=t,s.align=e,s.fontSize=i,s},m}(),HC=function(t){function e(){this.playLawPanel=null,this.highScoresPanel=null,e.__super.call(this),this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.btnTabs.on("change",this,this.clickBtnTabs),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.battlefieldOfShura.view.BattlefieldOfAshuraView",Qu);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn2:this.closeWindow()}},i.onDisplay=function(){this.btnTabs.selectedIndex=0,T.dispatch("UPDATE_BATTLE_FIELD_RANK",this,this.updateRank),xr.ins().toGetRank(5001),xr.ins().toGetRank(5002)},i.onUnDisplay=function(){T.remove("UPDATE_BATTLE_FIELD_RANK",this,this.updateRank)},i.updateRank=function(){this.highScoresPanel&&this.highScoresPanel.parent&&this.highScoresPanel.updateRank()},i.clickBtnTabs=function(t){switch(this.btnTabs.selectedIndex){case 0:this.playLawPanel=this.playLawPanel||new tP,this.playLawPanel.visible=!0,this.panelSp.addChild(this.playLawPanel),this.highScoresPanel&&this.highScoresPanel.parent&&(this.highScoresPanel.visible=!1);break;case 1:this.highScoresPanel=this.highScoresPanel||new $C,this.highScoresPanel.visible=!0,this.panelSp.addChild(this.highScoresPanel),this.playLawPanel&&this.playLawPanel.parent&&(this.playLawPanel.visible=!1),this.highScoresPanel.updateRank()}},I(0,i,"uiClass",function(){return"BattlefiledOfShuraView"}),e}(),WC=function(t){function e(){this.setRolePanel=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!1,"TYPE_MAIN"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.btnTabs.on("change",this,this.clickBtnTabs)}w(e,"modules.battlefieldOfShura.view.BattlefieldReadyView",zu);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn2:this.closeWindow()}},i.onDisplay=function(){this.btnTabs.selectedIndex=0,Ka.ins().toBattleInfo()},i.onUnDisplay=function(){},i.clickBtnTabs=function(){switch(this.btnTabs.selectedIndex){case 0:this.signUpPanel.visible=!0,this.setRolePanel=this.setRolePanel||new qC,this.signUpPanel.addChild(this.setRolePanel)}},i.update=function(){this.setRolePanel&&this.setRolePanel.parent&&this.setRolePanel.updateHeadIconShow()},e}(),qC=function(t){function s(){this.headIconArr=null,this.exChangeItem=null,this.copyDate=null,this.itemCopy=null,this.roleOfFight=null,this.roleOfLife=null,this.roleOfPhyDif=null,this.roleOfMgcDif=null,this.tempCrossFighterID=NaN,this.tempCrossAssIDArr=[],this.avo=null,s.__super.call(this),this.headIconArr=[],this.roleOfFight=new dF,this.roleOfLife=new dF,this.roleOfPhyDif=new dF,this.roleOfMgcDif=new dF,this.initEvent()}w(s,"modules.battlefieldOfShura.view.BattlefieldSetRolePanel",$u);var e=s.prototype;return e.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.raidersTxt.underline=!0,this.raidersTxt.on("click",this,this.showRaiders),Nt.register("RP_BATTEL_FIELD",this.signUpBtn,new Tt(19,-10))},e.onClick=function(t){switch(t.target){case this.signUpBtn:this.clickSignUp();break;case this.resetAllRoleBtn:this.clickResetBtn();break;case this.saveAllRoleBtn:this.clickSaveBtn()}},e.onDisplay=function(){ua.isCross()?(this.signUpBtn.visible=this.raidersTxt.visible=!1,this.resetAllRoleBtn.visible=this.saveAllRoleBtn.visible=!0,this.tempCrossFighterID=tn.fightPalID,this.tempCrossAssIDArr=tn.assPalPkvArr):(this.signUpBtn.visible=this.raidersTxt.visible=!0,this.resetAllRoleBtn.visible=this.saveAllRoleBtn.visible=!1,_t.addToSecond(this,this.loopCD)),this.initSignUpPanelBattleRole()},e.onUnDisplay=function(){ua.isCross()||_t.removeFromSceond(this,this.loopCD)},e.clickSignUp=function(){if(ds.battleRoleID<=0)Jt.addTip("出战角色为空，请拖动角色头像到出战角色处");else{if(0<this.headIconArr.length){var t=new Ee;return t.msg="还有可以放置到策略位置的角色，确定进入修罗战场吗？（重新进入可重新部署角色）",t.noLabel="返回部署",t.yesLabel="仍要进入",t.yesCaller=Ka.ins(),t.yesFun=Ka.ins().toBattleSet,void EF.showVO(t)}Ka.ins().toBattleSet()}},e.showRaiders=function(){this.avo=this.avo||new Ee,this.avo.msg=Z.font("1、进入战场必须选择","#fef6d9")+Z.font("一名角色作为出战角色","#fff000")+"<br/>"+Z.font("2、不同职业放置到各个战阵上的效果不同，可尝试多种布阵配搭","#fef6d9")+"<br/>"+Z.font("3、当战阵上的辅助角色战力","#fef6d9")+Z.font("达到出战角色战力一半","#fff000")+Z.font("时，将会有战阵效果加成","#fef6d9"),this.avo.title="布阵说明",this.avo.showRight=!1,this.avo.isShowTitle=!0,EF.showVO(this.avo)},e.initSignUpPanelBattleRole=function(){for(var t=[this.roleOfFight,this.roleOfLife,this.roleOfPhyDif,this.roleOfMgcDif],e=[[33,210],[244,46],[244,212],[244,371]],i=0,s=t.length;i<s;i++){var n=e[i],o=t[i];(o=o||new dF).pos(n[0],n[1]),o.open=!1,o.on("mousedown",this,this.onClickBattleRole),o.on("mouseup",this,this.battleRoleMouseUpEvent),this.addChild(o)}},e.battleRoleMouseUpEvent=function(t){if(this.copyDate){switch(t.target){case this.roleOfFight:this.exChangeItem&&(this.exChangeItem.data=this.roleOfFight.date),this.roleOfFight.data=this.copyDate;break;case this.roleOfLife:this.exChangeItem&&(this.exChangeItem.data=this.roleOfLife.date),this.roleOfLife.data=this.copyDate;break;case this.roleOfPhyDif:this.exChangeItem&&(this.exChangeItem.data=this.roleOfPhyDif.date),this.roleOfPhyDif.data=this.copyDate;break;case this.roleOfMgcDif:this.exChangeItem&&(this.exChangeItem.data=this.roleOfMgcDif.date),this.roleOfMgcDif.data=this.copyDate}ua.isCross()?this.tempCrossFighterID=null!=this.roleOfFight.date?this.roleOfFight.date.pal_id:0:ds.battleRoleID=null!=this.roleOfFight.date?this.roleOfFight.date.pal_id:0;var e=[];if(this.roleOfLife.date){var i=new Object;i.className="p_kv",i.id=1,i.val=this.roleOfLife.date.pal_id,e.push(i)}if(this.roleOfMgcDif.date){var s=new Object;s.className="p_kv",s.id=3,s.val=this.roleOfMgcDif.date.pal_id,e.push(s)}if(this.roleOfPhyDif.date){var n=new Object;n.className="p_kv",n.id=2,n.val=this.roleOfPhyDif.date.pal_id,e.push(n)}ua.isCross()?this.tempCrossAssIDArr=e:ds.assistRoleIDs=e,this.setRoleDesc(),this.copyDate=null,this.updateHeadIconShow()}},e.setRoleDesc=function(){var t=-1;null!=this.roleOfFight.date?(this.resonateNumTxt.text=Math.floor(this.roleOfFight.date.ext.power/2)+"",t=Math.floor(this.roleOfFight.date.ext.power/2)):(this.resonateNumTxt.text="请先设置出战角色",t=-1),null!=this.roleOfLife.date?(this.roleOfLifeTxt.text=ds.getAssistDesc(1,this.roleOfLife.date.ext.category),this.setResonateDesc(!1,1,this.roleOfLife.date.ext.power,t,this.roleOfLife.date.ext.category)):(this.roleOfLifeTxt.text="请设置辅助角色",this.setResonateDesc(!0,1)),null!=this.roleOfPhyDif.date?(this.roleOfPhyDifTxt.text=ds.getAssistDesc(2,this.roleOfPhyDif.date.ext.category),this.setResonateDesc(!1,2,this.roleOfPhyDif.date.ext.power,t,this.roleOfPhyDif.date.ext.category)):(this.roleOfPhyDifTxt.text="请设置辅助角色",this.setResonateDesc(!0,2)),null!=this.roleOfMgcDif.date?(this.roleOfMgcDifTxt.text=ds.getAssistDesc(3,this.roleOfMgcDif.date.ext.category),this.setResonateDesc(!1,3,this.roleOfMgcDif.date.ext.power,t,this.roleOfMgcDif.date.ext.category)):(this.roleOfMgcDifTxt.text="请设置辅助角色",this.setResonateDesc(!0,3))},e.setResonateDesc=function(t,e,i,s,n){if(void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=1),t)this["resonateDesc"+e].text="";else{var o="#fef6d9",a="\n(未激活)";0<s&&s<=i&&(o="#96f254",a="\n(已激活)"),this["resonateDesc"+e].color=o;var l="共鸣效果:";l+=ds.getResonateDesc(e,n)+a,this["resonateDesc"+e].text=l}},e.updateHeadIconShow=function(){for(;0<this.headIconArr.length;){this.headIconArr.shift().removeSelf()}this.headIconArr=[],this.roleOfFight.data=null,this.roleOfMgcDif.data=null,this.roleOfPhyDif.data=null,this.roleOfLife.data=null;for(var t=ua.isCross()?this.tempCrossFighterID:ds.battleRoleID,e=ua.isCross()?this.tempCrossAssIDArr:ds.assistRoleIDs,i=0;i<4;i++){var s=pe.getPalByIndex(i);if(s)if(t!=s.pal_id)if(e.length<=0)this.createHeadIcon(s);else{var n,o=!0;for(var a in e)if((n=e[a]).val==s.pal_id){1==n.id?(this.roleOfLife.data=s,o=!1):2==n.id?(this.roleOfPhyDif.data=s,o=!1):3==n.id&&(this.roleOfMgcDif.data=s,o=!1);break}1==o&&this.createHeadIcon(s)}else this.roleOfFight.data=s}this.updateHeadIconPos(),this.setRoleDesc()},e.updateHeadIconPos=function(){var t=this.headIconArr.length;if(!(t<=0))for(var e=0;e<t;e++)4==t?this.headIconArr[e].x=70+127*e:1==t?this.headIconArr[e].x=272:2==t?this.headIconArr[e].x=145+127*e:3==t&&(this.headIconArr[e].x=86.5+127*e)},e.createHeadIcon=function(t){var e=new dF;e.open=!0,e.data=t,e.y=540,e.on("mousedown",this,this.onClickHeadIcon);var i=Me.createText("战力:"+t.ext.power,-e.width/2,e.height,e.width,20,e,s.createTxtFormat());i.x=i.width/2+i.x,i.name="pwText",this.headIconArr.push(e),this.addChild(e)},e.onClickHeadIcon=function(t){var e=t.target.date;this.itemCopy=this.itemCopy||new dF,this.itemCopy.data=e,this.itemCopy.open=!0,this.itemCopy.pos(t.target.x,t.target.y),this.addChild(this.itemCopy),this.itemCopy.startDrag(null,!1,0),this.copyDate=e,this.stage.on("mouseup",this,this.onItemCopyUp)},e.onClickBattleRole=function(t){var e=t.target.date;null!=e&&(this.exChangeItem=t.target,this.itemCopy=this.itemCopy||new dF,this.itemCopy.data=e,this.itemCopy.open=!0,this.itemCopy.pos(t.target.x,t.target.y),this.addChild(this.itemCopy),this.itemCopy.startDrag(null,!1,0),this.copyDate=e,this.stage.on("mouseup",this,this.onItemCopyUp))},e.onItemCopyUp=function(t){this.itemCopy.removeSelf(),this.stage.off("mouseup",this,this.onItemCopyUp),this.copyDate=null,this.exChangeItem=null},e.clickResetBtn=function(){if(ua.isCrossTowerBoss()||ua.isCrossTower())Jt.addTip("混沌之塔内无法切换角色布阵");else{var t=new Ee;t.msg="是否将当前布阵状态重置为初始状态?",t.yesCaller=this,t.yesFun=this.resetFightingRole,EF.showVO(t)}},e.resetFightingRole=function(){tn.fightPalID=this.tempCrossFighterID=0,tn.assPalPkvArr=this.tempCrossAssIDArr=[],_l.ins().toLineTowerSetDeploy(),this.updateHeadIconShow()},e.clickSaveBtn=function(){ua.isCrossTowerBoss()||ua.isCrossTower()?Jt.addTip("混沌之塔内无法切换角色布阵"):(tn.fightPalID=this.tempCrossFighterID,tn.assPalPkvArr=this.tempCrossAssIDArr,_l.ins().toLineTowerSetDeploy())},e.loopCD=function(){0<this.cdTime?(this.signUpBtn.label="冷却（"+this.cdTime+"）",this.signUpBtn.disabled=!0):(this.cdTime,this.signUpBtn.label="确定报名",this.signUpBtn.disabled=!1)},I(0,e,"cdTime",function(){return ds.cdEnterTime+30-ya.serverTime}),s.createTxtFormat=function(){var t=new Qt;return t.align="center",t.fontSize=20,t.color="#fef6d9",t},s}(),YC=function(t){function e(){this.btnClose=null,this.imgInfo=null,this.txtMsg=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.fcm.FcmCountDownViewUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fcm/FcmCountDownView")},e}(),XC=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5")}return w(e,"modules.battlefieldOfShura.view.BattleHelpPanel",Zu),e}(),KC=function(t){function e(){this.ruleDesc=null,this.scoreBox=null,this.clipArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.btnTabs.on("change",this,this.clickBtnTabs),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.rulePanl.vScrollBarSkin="",this.ruleDesc=new K,this.ruleDesc.width=570,this.ruleDesc.height=278}w(e,"modules.battlefieldOfShura.view.BattleRuleView",Ju);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn2:this.closeWindow()}},i.onDisplay=function(){this.btnTabs.selectedIndex=0},i.onUnDisplay=function(){},i.clickBtnTabs=function(){switch(this.btnTabs.selectedIndex){case 0:this.showRule();break;case 1:this.showBattleRule();break;case 2:this.showSkillRule()}},i.showRule=function(){this.titleTop.text="积分相关",this.titleBottom.text="修罗之魂",this.monsterIcon1.visible=this.monsterIcon2.visible=this.monsterIcon3.visible=this.monsterIcon4.visible=!1,this.txtName1.color=this.txtName2.color=this.txtName3.color=this.txtName4.color="#fef6d9",this.txtName1.visible=this.txtName2.visible=this.txtName3.visible=this.txtName4.visible=!0,this.txtName1.text="修罗积分 +5",this.txtName2.text="修罗积分 +40",this.txtName3.text="修罗积分 +120",this.txtName4.text="不增加积分经验，拾取后恢复最大生命5%",this.txtDesc1.text="局内经验 +5",this.txtDesc2.text="局内经验 +50",this.txtDesc3.text="局内经验 +200",this.txtDesc4.text="",this.txtDesc1.visible=this.txtDesc2.visible=this.txtDesc3.visible=this.txtDesc4.visible=!0,this.skillDecs1.visible=this.skillDecs2.visible=this.skillDecs3.visible=this.skillDecs4.visible=!1,this.ruleDesc.style.valign="top",this.ruleDesc.style.color="#5d3924",this.ruleDesc.style.leading=5,this.ruleDesc.y=10,this.ruleDesc.innerHTML=ds.getRuleByType(2),this.rulePanl.addChild(this.ruleDesc),this.scoreBox=this.scoreBox||new UC,this.scoreBox.pos(-18,214),this.rulePanl.addChild(this.scoreBox),this.rulePanl.refresh(),this.effSp1.visible=this.effSp2.visible=this.effSp3.visible=this.effSp4.visible=!0;for(var t=[30300001,30300002,30300003,30300004],e=0;e<4;e++)this.clipArr[e]=this.clipArr[e]||new b,this.clipArr[e].loadAndPlay("unit/monster/"+t[e]+"_0","stand",0,!0),this["effSp"+(e+1)].addChild(this.clipArr[e])},i.showBattleRule=function(){this.titleTop.text="阶段相关",this.titleBottom.text="守卫BUFF",this.txtName1.color=this.txtName2.color=this.txtName3.color=this.txtName4.color="#fff595",this.txtName1.visible=this.txtName2.visible=this.txtName3.visible=this.txtName4.visible=!0,this.monsterIcon1.visible=this.monsterIcon2.visible=this.monsterIcon3.visible=this.monsterIcon4.visible=!0,this.monsterIcon1.skin="unit/monster/10000075.png",this.monsterIcon2.skin="unit/monster/10000059.png",this.monsterIcon3.skin="unit/monster/10000052.png",this.monsterIcon4.skin="unit/monster/10000069.png",this.txtDesc1.text="增加角色伤害20%",this.txtDesc2.text="增加最大生命20%",this.txtDesc3.text="增加伤害减免20%",this.txtDesc4.text="增加移动速度20%",this.txtDesc1.visible=this.txtDesc2.visible=this.txtDesc3.visible=this.txtDesc4.visible=!0,this.txtName1.text="修罗之殇",this.txtName2.text="修罗之命",this.txtName3.text="修罗之守",this.txtName4.text="修罗之迅",this.ruleDesc.style.valign="top",this.ruleDesc.style.color="#5d3924",this.ruleDesc.style.leading=5,this.ruleDesc.y=10,this.scoreBox&&(this.scoreBox.removeSelf(),this.scoreBox=null),this.ruleDesc.innerHTML=ds.getRuleByType(3),this.rulePanl.refresh(),this.effSp1.visible=this.effSp2.visible=this.effSp3.visible=this.effSp4.visible=!1,this.skillDecs1.visible=this.skillDecs2.visible=this.skillDecs3.visible=this.skillDecs4.visible=!1},i.showSkillRule=function(){this.titleTop.text="技能相关",this.titleBottom.text="修罗战技",this.ruleDesc.style.valign="top",this.ruleDesc.style.color="#5d3924",this.ruleDesc.style.leading=5,this.ruleDesc.y=10,this.skillDecs1.style.valign=this.skillDecs2.style.valign=this.skillDecs3.style.valign=this.skillDecs4.style.valign="top",this.skillDecs1.style.leading=this.skillDecs2.style.leading=this.skillDecs3.style.leading=this.skillDecs4.style.leading=7,this.ruleDesc.innerHTML=ds.getRuleByType(4),this.scoreBox&&(this.scoreBox.removeSelf(),this.scoreBox=null),this.rulePanl.refresh(),this.effSp1.visible=this.effSp2.visible=this.effSp3.visible=this.effSp4.visible=!1,this.monsterIcon1.skin="modules/battlefieldOfShura/skill1.png",this.monsterIcon2.skin="modules/battlefieldOfShura/skill3.png",this.monsterIcon3.skin="modules/battlefieldOfShura/skill2.png",this.monsterIcon4.skin="modules/battlefieldOfShura/skill4.png",this.monsterIcon1.visible=this.monsterIcon2.visible=this.monsterIcon3.visible=this.monsterIcon4.visible=!0,this.txtName1.visible=this.txtName2.visible=this.txtName3.visible=this.txtName4.visible=!1,this.txtDesc1.visible=this.txtDesc2.visible=this.txtDesc3.visible=this.txtDesc4.visible=!1,this.skillDecs1.visible=this.skillDecs2.visible=this.skillDecs3.visible=this.skillDecs4.visible=!0,this.skillDecs1.innerHTML=ds.getRuleByType(401),this.skillDecs2.innerHTML=ds.getRuleByType(402),this.skillDecs3.innerHTML=ds.getRuleByType(403),this.skillDecs4.innerHTML=ds.getRuleByType(404)},I(0,i,"uiClass",function(){return"BattleRulePanel"}),e}(),jC=function(t){function e(){this.agreeBox=null,this.agreeTxt=null,this.btnAgree=null,this.btnClose=null,this.pan=null,this.txtContent=null,e.__super.call(this)}return w(e,"ui.modules.fcm.UserAgreementViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fcm/UserAgreementView")},e}(),QC=function(t){function e(){this.isRoleFashion=!1,this.isCollcet=!1,this.isLevelEff=!1,this.isSkillEff=!1,this.opentionMod=1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)}w(e,"modules.battlefieldOfShura.view.BattleSettingView",tc);var i=e.prototype;return i.onDisplay=function(){this.updateBattleSetting(),this.desc1.innerHTML=Z.font("技能键位于","#F4F1B2",24)+Z.font("左右两侧","#fff959",24)+Z.font("，摇杆位置","#F4F1B2",24)+Z.font("固定","#fff959",24),this.desc2.innerHTML=Z.font("技能键位于","#F4F1B2",24)+Z.font("左右两侧","#fff959",24)+Z.font("，摇杆位置","#F4F1B2",24)+Z.font("自由呼出","#fff959",24),this.desc3.innerHTML=Z.font("技能键位于","#F4F1B2",24)+Z.font("右侧","#fff959",24)+Z.font("，摇杆位置","#F4F1B2",24)+Z.font("自由呼出","#fff959",24)},i.onUnDisplay=function(){},i.onClick=function(t){switch(t.target){case this.simplifyRoleCheck:this.isRoleFashion=!this.isRoleFashion;break;case this.simplifyCollcetCheck:this.isCollcet=!this.isCollcet;break;case this.simplifyLevelEffCheck:this.isLevelEff=!this.isLevelEff;break;case this.simplifySkillCheck:this.isSkillEff=!this.isSkillEff;break;case this.saveSettingBtn:this.onSaveSettings();break;case this.modu1:this.opentionMod=1,this.selectBg.pos(this.modu1.x-10,this.modu1.y-10);break;case this.modu2:this.opentionMod=2,this.selectBg.pos(this.modu2.x-10,this.modu2.y-10);break;case this.modu3:this.opentionMod=3,this.selectBg.pos(this.modu3.x-10,this.modu3.y-10);break;case this.closeBtn:this.closeWindow()}},i.updateBattleSetting=function(){var t=ds.getSystemBattleSetting();if(1==t)return this.isLevelEff=!1,this.isSkillEff=!1,this.isCollcet=!1,this.isRoleFashion=!1,this.simplifySkillCheck.selected=!1,this.simplifyLevelEffCheck.selected=!1,this.simplifyCollcetCheck.selected=!1,void(this.simplifyRoleCheck.selected=!1);var e=Math.floor(t/1e4);this.isRoleFashion=1==e,this.simplifyRoleCheck.selected=this.isRoleFashion;var i=Math.floor(t%1e4/1e3);this.isCollcet=1==i,this.simplifyCollcetCheck.selected=this.isCollcet;var s=Math.floor(t%1e4%1e3/100);this.isSkillEff=1==s,this.simplifySkillCheck.selected=this.isSkillEff;var n=Math.floor(t%1e4%1e3%100/10);this.isLevelEff=1==n,this.simplifyLevelEffCheck.selected=this.isLevelEff,this.opentionMod=Math.floor(t%1e4%1e3%100%10);var o=this["modu"+this.opentionMod];this.selectBg.pos(o.x-10,o.y-10)},i.onSaveSettings=function(){var t=new Object;t.className="m_role_sys_conf_update_tos";var e=new Object;e.className="p_kv",e.id=4;var i=0;this.isRoleFashion?i+=1e4:i+=2e4,this.isCollcet?i+=1e3:i+=2e3,this.isSkillEff?i+=100:i+=200,this.isLevelEff?i+=10:i+=20,i+=this.opentionMod,e.val=i,t.opt=[e],v.send(t),this.closeWindow()},e}(),zC=function(t){function e(){this._skillVoArr=[],this._selectSkillId=0,this._selectSkillVoId=1001,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.skillDesc.style.align="center",this.setSkillInfoToArr()}w(e,"modules.battlefieldOfShura.view.BattleSkillPanel",ec);var i=e.prototype;return i.update=function(){this.showSelectSkillInfo(Math.floor(this._selectSkillVoId%1e3)),this.setSkillLevelShow(),this.updatePointShow()},i.onClick=function(t){switch(t.target){case this.upgradeBtn:this.upgradeSkill();break;case this.closeBtn:case this.closeBtn2:this.closeWindow(),T.dispatch("HIDE_NAVBAR");break;case this.skill1:this.showSelectSkillInfo(1);break;case this.skill2:this.showSelectSkillInfo(2);break;case this.skill3:this.showSelectSkillInfo(3);break;case this.skill4:this.showSelectSkillInfo(4)}},i.onDisplay=function(){this.showSelectSkillInfo(1),this.setSkillLevelShow(),this.updatePointShow()},i.onUnDisplay=function(){},i.upgradeSkill=function(){Ka.ins().toBattleUpgradeSkill(this._selectSkillId)},i.showSelectSkillInfo=function(t){this.quan.pos(e.QUAN_POS[t-1].x,e.QUAN_POS[t-1].y),this._selectSkillId=this["skill"+t].skillId,this._selectSkillVoId=t+1e3,this.setSkillDescShow()},i.setSkillInfoToArr=function(){this._skillVoArr=ds.getSkillInfoByType(1),this.setAndShowSkillName()},i.setAndShowSkillName=function(){var t;if(!(this._skillVoArr.length<=0))for(var e in this._skillVoArr){var i=(t=this._skillVoArr[e]).id,s=Math.floor(i%1e3),n="skillName"+s;this[n]&&(this[n].text=t.name);var o="skill"+s;this[o]&&(this[o].skillId=t.skillId,this[o].voID=i)}},i.setSkillDescShow=function(){if(this._skillVoArr.length<=0)return this.skillDesc.innerHTML="",void(this.skillNameTxt.text="");var t,e="",i="",s=this.getSkillLevel(this._selectSkillId);for(var n in this._skillVoArr)if((t=this._skillVoArr[n]).skillId==this._selectSkillId){e=t.getDesc(s),i=t.name,s>=t.maxLv?this.upgradeBtn.label="已满级":this.upgradeBtn.label="升级";break}this.skillNameTxt.text=i,this.skillDesc.innerHTML=e},i.getSkillLevel=function(t){var e,i=0,s=ds.skills;for(var n in s)if(t==(e=s[n]).id){i=e.val;break}return i},i.setSkillLevelShow=function(){var t;for(var e in this._skillVoArr){t=this._skillVoArr[e];var i=Math.floor(t.id%1e3);if(this["skillPointTxt"+i]){var s=t.maxLv,n=this.getSkillLevel(t.skillId);this["skillPointTxt"+i].text=n+"/"+s}}},i.updatePointShow=function(){var t,e=0;for(var i in this._skillVoArr)t=this._skillVoArr[i],e+=this.getSkillLevel(t.skillId);this.pointTxt.text="剩余战意点数:"+(ds.nowLevel-e<=0?0:ds.nowLevel-e)},_(e,["QUAN_POS",function(){return this.QUAN_POS=[{x:281,y:92},{x:42,y:332},{x:279,y:559},{x:519,y:332}]}]),e}(),$C=function(t){function e(){this._blueVipBox=null,e.__super.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.rankList.vScrollBarSkin="",this.rankList.itemRender=VC}w(e,"modules.battlefieldOfShura.view.HighScoresPanel",ic);var i=e.prototype;return i.onClick=function(t){},i.onDisplay=function(){},i.onUnDisplay=function(){},i.updateRank=function(){var t=jo.getRankVO(5001),e=t.rows;this.rankList.dataSource=e;var i=t.pData;this.selfName.text=pe.roleName,this.selfScore.text=i.rank_value+"",this.selfRankTxt.text=i.ranking+"",this.updateVipBox()},i.updateVipBox=function(){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var t=new ms;t.blueInfo=pe.getRoleBlueVipInfo(),t.nameText=this.selfName,this._blueVipBox.updateShowing(t)}},e}(),ZC=function(t){function e(){this.numImgArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.rankList.vScrollBarSkin="",this.rankList.itemRender=MC,this.rankList.dataSource=[],this.rankTxt.color=this.scroeTxt.color="#5d3924",this.historyRank.color=this.historyScoreTxt.color="#e1c6bc"}w(e,"modules.battlefieldOfShura.view.LastRankPanel",sc);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnYes:case this.closeBtn2:case this.closeBtn:this.closeWindow();break;case this.goToShopBtn:me.linkTo(10108);break;case this.helpBtn:Ka.ins().openHelpPenal()}},i.onDisplay=function(){this.godTagImg.visible=!1,Ka.ins().toBattleInfo(),this.update()},i.onUnDisplay=function(){},i.update=function(){var t=jo.getRankVO(5002);if(t){var e=t.rows;this.rankList.dataSource=e;var i,s=t.pData,n=0;for(var o in e)if(i=e[o],pe.isMyPal(i.role_id)){n=i.elements[2];break}this.rankTxt.text="排名:"+s.ranking,this.scroeTxt.text="积分:"+s.rank_value,this.killTxt.text="击倒:"+n,this.godTagImg.visible=1==s.ranking,this.numToImgNum(s.rank_value)}},i.updateHistoryInfo=function(t,e,i){this.historyRank.text="(历史最高:"+i+")",this.historyKillTxt.text="(历史最高:"+e+")",this.historyScoreTxt.text="(历史最高:"+t+")"},i.numToImgNum=function(t){for(var e=0;e<this.numImgArr.length;e++)this.numImgArr[e].removeSelf();if(!(t<0))for(var i=t.toString(),s=i.length,n=24*s+19,o=0;o<s;o++){var a=new et;a.skin="modules/battlefieldOfShura/"+i[o]+".png",a.y=760,a.x=(139-n)/2+a.width*o+507,this.numImgArr.push(a),this.addChild(a)}},I(0,i,"uiClass",function(){return"LastTimeRankPanel"}),e}(),JC=function(t){function e(){this._partNum=0,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.battlefieldOfShura.view.PartTxtPanel",nc);var i=e.prototype;return i.onDisplay=function(){},i.onUnDisplay=function(){},I(0,i,"partNum",function(){return this._partNum},function(t){this._partNum=t,this._partNum<2||(this.partTxt.skin="modules/battlefieldOfShura/partTxt_"+this._partNum+".png",this.partTitle.skin="modules/battlefieldOfShura/partImg_"+this._partNum+".png")}),e}(),tP=function(t){function e(){this._ruleItem=null,this.curY=0,this.items=[],e.__super.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.lastTimeRankTxt.underline=!0,this.lastTimeRankTxt.on("click",this,this.onClickRankTxt),this.rewardTxt.underline=!0,this.rewardTxt.on("click",this,this.onClickRewardText),this.rulePanel.vScrollBarSkin="",this.showRuleText(),Nt.register("RP_BATTEL_FIELD",this.enterBtn,new Tt(19,-10))}w(e,"modules.battlefieldOfShura.view.PlayLawPanel",oc);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.enterBtn:me.linkTo(12004)}},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop),this.showRw()},i.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){var t=ds.getBattlefieldOpenDiff();if(0<t)this.timeTxt.text="开始倒计时:"+x.formatTime(t),this.enterBtn.disabled=!0;else{var e=ds.getBattlefieldEndDiff();if(0<e)this.timeTxt.text="距离活动结束:"+x.formatTime(e),this.enterBtn.disabled=!1;else{var i=ds.getBattlefieldNextDiff();0<i?(this.timeTxt.text="开始倒计时:"+x.formatTime(i),this.enterBtn.disabled=!0):(this.timeTxt.text="",this.enterBtn.disabled=!0,_t.removeFromSceond(this,this.timeLoop))}}1==G.isDev&&(this.enterBtn.disabled=!1)},i.onClickRankTxt=function(){me.linkTo(12002)},i.onClickRewardText=function(){Ka.ins().openBattleRewardPanel()},i.showRuleText=function(){this._ruleItem=this._ruleItem||new K,this._ruleItem.style.align="left",this._ruleItem.style.valign="top",this._ruleItem.style.color="#5d3924",this._ruleItem.style.leading=12,this._ruleItem.width=614,this._ruleItem.innerHTML=ds.getRuleByType(1),this._ruleItem.height=this._ruleItem.contextHeight,this._ruleItem.y=this.curY,this.curY+=this._ruleItem.height,this.rulePanel.addChild(this._ruleItem)},i.showRw=function(){var t,e=ao.getActPreVO(6);this.items=this.items||[];for(var i=Math.max(e.pRw.length,this.items.length),s=(700-135*(e.pRw.length-1)-105)/2,n=0;n<i;n++)n<e.pRw.length?(this.items[n]=this.items[n]||new Ah(91,91,!0,!0,!0,!1,91),(t=this.items[n]).dataSource=e.pRw[n],t.pos(s+135*n,575),this.addChild(t)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf()},e}(),eP=function(t){function o(){this.numImgArr=[],o.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.rankList.vScrollBarSkin="",this.rankList.itemRender=NC,this.rankList.dataSource=[]}w(o,"modules.battlefieldOfShura.view.ResultPanel",ac);var e=o.prototype;return e.onClick=function(t){switch(t.target){case this.closeBtn2:case this.closeBtn:case this.btnYes:this.arlPanelToClose();break;case this.btnExchangeScroe:el.ins().toExit(),this.closeWindow(),me.linkTo(10108);break;case this.helpBtn:Ka.ins().openHelpPenal()}},e.onDisplay=function(){},e.onUnDisplay=function(){},e.arlPanelToClose=function(){var t=new Ee;t.msg="确定关闭修罗战场结算面板吗？",t.yesCaller=this,t.yesFun=this.exitBattleResult,EF.showVO(t)},e.exitBattleResult=function(){this.closeWindow()},e.setResultInfo=function(t,e,i,s,n){void 0===e&&(e=999),void 0===i&&(i=0),void 0===s&&(s=0),void 0===n&&(n=0),0<t.length&&(this.rankList.dataSource=t.sort(o.fcSort)),this.rankNumTxt.text="排名:"+e,this.killEnemyTxt.text="击倒:"+i,this.scroeNumTxt.text="积分:"+s,this.rankNumTxt.color=this.killEnemyTxt.color=this.scroeNumTxt.color="#5d3924",this.historyRankTxt.text="(历史最高:"+ds.historyRank+")",this.histroyKillEnemyTxt.text="(历史最高:"+ds.historyKill+")",this.historyScroeTxt.text="(历史最高:"+ds.historyScroe+")",this.historyRankTxt.color=this.histroyKillEnemyTxt.color=this.historyScroeTxt.color="#e1c6bc",this.numToImgNum(n),this.godTag.visible=1==e},e.numToImgNum=function(t){for(var e=0;e<this.numImgArr.length;e++)this.numImgArr[e].removeSelf();if(!(t<0))for(var i=t.toString(),s=i.length,n=24*s+19,o=0;o<s;o++){var a=new et;a.skin="modules/battlefieldOfShura/"+i[o]+".png",a.y=760,a.x=(139-n)/2+a.width*o+507,this.numImgArr.push(a),this.addChild(a)}},o.fcSort=function(t,e){return t.rank<e.rank?-1:1},o}(),iP=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.itemList.itemRender=FC,this.itemList.vScrollBarSkin=""}w(e,"modules.battlefieldOfShura.view.RoleRewardShowPanel",lc);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn2:this.closeWindow()}},i.onDisplay=function(){this.updateList()},i.onUnDisplay=function(){},i.updateList=function(){var t=ds.getRewardConfig();this.itemList.dataSource=t},e}(),sP=function(t){function e(){this._info=null,this._pageType=0,this._vo=null,this._rewardItemArr=null,e.__super.call(this),this.on("click",this,this.clickEvent)}w(e,"modules.blueDiamond.BlueDiamondItem",t);var i=e.prototype;return i.clickEvent=function(t){switch(t.target){case this.toGet:var e=2==this._pageType?3:3==this._pageType?2:this._pageType;ja.ins().toGetReward(e,this._vo.id);break;case this.tagImg:Bt.sdk.openSpcVip()}},i.updateShow=function(){var t=this._vo.index+1;switch(this._pageType){case 1:this.txtImg.skin="modules/blueDiamond/novice/level"+t+".png",this.txtImg.pos(40,5),this.tagImg.visible=!1;break;case 2:this.txtImg.skin="modules/blueDiamond/daily/t"+t+".png",this.txtImg.pos(60,5),1==t?(this.levelImg.skin="modules/blueDiamond/daily/2_"+t+".png",this.levelImg.pos(110,8),this.tagImg.visible=!1):(this.tagImg.visible=!0,this.tagImg.skin=2==t?"modules/blueDiamond/openybtn2.png":"modules/blueDiamond/openluxurybtn.png");break;case 3:this.txtImg.skin=t<=3?"modules/blueDiamond/levelGift/l"+t+".png":"modules/blueDiamond/levelGift/r"+(t-3)+".png",this.tagImg.visible=!1,this.levelImg.skin="",this.txtImg.pos(150,5)}this.updateBtnState(),this.updateRewardShow()},i.updateBtnState=function(){var t,e=pe.getRoleBlueVipInfo(),i=ps.getRoleBlueVipInfoByType(this._pageType),s=0,n=!1;switch(this._pageType){case 2:for(s=0;s<i.length;s++)if((t=i[s]).id==this._vo.id&&1==t.val){n=!0;break}n?(this.toGet.label="已领取",this.toGet.disabled=!0,this.rp.visible=!1):1==this._vo.id&&e.is_blue_vip||2==this._vo.id&&e.is_blue_year_vip||3==this._vo.id&&e.is_super_blue_vip?(this.toGet.label="可领取",this.toGet.disabled=!1,this.rp.visible=!0):(this.toGet.label="可领取",this.toGet.disabled=!0,this.rp.visible=!1);break;case 3:if(e.is_blue_vip||e.is_blue_year_vip||e.is_super_blue_vip){for(s=0;s<i.length;s++)if((t=i[s]).id==this._vo.id&&1==t.val){n=!0;break}n?(this.toGet.label="已领取",this.toGet.disabled=!0,this.rp.visible=!1):pe.checkLevel(this._vo.trans,this._vo.level)?(this.toGet.label="可领取",this.toGet.disabled=!1,this.rp.visible=!0):(this.toGet.label="可领取",this.toGet.disabled=!0,this.rp.visible=!1)}else this.toGet.label="可领取",this.toGet.disabled=!0,this.rp.visible=!1;break;case 1:for(s=0;s<i.length;s++)if((t=i[s]).id==this._vo.id&&1==t.val){n=!0;break}n?(this.toGet.label="已领取",this.toGet.disabled=!0,this.rp.visible=!1):1==this._vo.id&&e.is_blue_vip||2==this._vo.id&&e.is_blue_year_vip||3==this._vo.id&&e.is_super_blue_vip?(this.toGet.label="可领取",this.toGet.disabled=!1,this.rp.visible=!0):(this.toGet.label="可领取",this.toGet.disabled=!0,this.rp.visible=!1)}},i.updateRewardShow=function(){if(this._vo){this._rewardItemArr=this._rewardItemArr||[null,null,null];for(var t=this._vo.getReward()||0,e=Math.max(this._rewardItemArr.length,t.length),i=0;i<e;i++)if(i<t.length){this._rewardItemArr[i]=this._rewardItemArr[i]||new Dh;var s=this._rewardItemArr[i];s.size(85,85),s.txtName.fontSize=22,this.addChild(s);var n=new Object;n.className="p_tkv",n.type=5,n.id=t[i].itemType,n.val=t[i].itemNum,s.setDrop(n),s.pos(26+(s.width+10)*i,48),s.on("click",this,this.onClickGoodsItem)}else this._rewardItemArr[i]&&this._rewardItemArr[i].removeSelf()}},i.onClickGoodsItem=function(t){if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target.val,i=ur.getItem(e.id);i.tempNum=e.val;var s="";s=ur.isEquip(i.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(i,s)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._info=t,this._pageType=this._info.type,this._vo=this._info.info,this.updateShow())}),e}(rc),nP=function(t){function e(){this._curShowViewIndex=-1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.init(),this.initEvent()}w(e,"modules.blueDiamond.BlueDiamondPanel",hc);var i=e.prototype;return i.init=function(){this.itemList.vScrollBarSkin="",this.itemList.itemRender=sP,this.list.itemRender=xU,this.list.hScrollBarSkin="",this.list.selectEnable=!0,this.list.mouseHandler=new Q(this,this.onClickIcon),this.list.dataSource=ps.clickIconIDs},i.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)},i.onDisplay=function(){this.callLater(this.updateIconRp),this.changeCurView(0),T.register("ROLE_VIP_INFO_UPDATE",this,this.updateInfo),T.register("ROLE_BULE_VIP_REWARD_UPDATE",this,this.updateInfo)},i.onUnDisplay=function(){T.remove("ROLE_VIP_INFO_UPDATE",this,this.updateInfo),T.remove("ROLE_BULE_VIP_REWARD_UPDATE",this,this.updateInfo)},i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose2:this.closeWindow();break;case this.toNovice:this.changeCurView(1);break;case this.toDaily:this.changeCurView(2);break;case this.toUpgrade:this.changeCurView(3);break;case this.toMore:case this.openBtn:case this.openYBtn:case this.rechargeBtn:case this.rechargeYBtn:Bt.sdk.openSpcVip()}},i.onClickIcon=function(t,e){"mousedown"==t.type&&this.changeCurView(e)},i.updateIconRp=function(){for(var t=this.list.cells,e=0;e<t.length;e++){var i=t[e];5010==i.iconID?i.redPoint=ps.checkDailyGiftRP():5009==i.iconID?i.redPoint=ps.checkNoviceGiftRP():5011==i.iconID?i.redPoint=ps.checkLevelGiftRP():i.redPoint=!1}},i.changeCurView=function(t){if(this.updateIconRp(),t!=this._curShowViewIndex)switch(this._curShowViewIndex=t){case 0:this.topImg.skin="modules/blueDiamond/novice/adv.png",this.privilegeBox.visible=!0,this.itemList.visible=!1,this.openBtn.visible=this.openYBtn.visible=this.rechargeBtn.visible=this.rechargeYBtn.visible=!1;break;case 2:this.topImg.skin="modules/blueDiamond/novice/adv.png",this.privilegeBox.visible=!1,this.itemList.visible=!0,ja.ins().toGetInfo(3),this.openBtn.visible=this.openYBtn.visible=this.rechargeBtn.visible=this.rechargeYBtn.visible=!1;break;case 3:this.topImg.skin="modules/blueDiamond/novice/adv.png",this.privilegeBox.visible=!1,this.itemList.visible=!0,ja.ins().toGetInfo(2),this.openBtn.visible=this.openYBtn.visible=this.rechargeBtn.visible=this.rechargeYBtn.visible=!1;break;case 1:this.topImg.skin="modules/blueDiamond/novice/adv.png",this.privilegeBox.visible=!1,this.itemList.visible=!0,ja.ins().toGetInfo(1),this.updateBlueBtns()}},i.updateBlueBtns=function(){var t=pe.getRoleBlueVipInfo();t.is_blue_vip?(this.openBtn.visible=!1,this.rechargeBtn.visible=!0):(this.openBtn.visible=!0,this.rechargeBtn.visible=!1),t.is_blue_year_vip?(this.openYBtn.visible=!1,this.rechargeYBtn.visible=!0):(this.openYBtn.visible=!0,this.rechargeYBtn.visible=!1)},i.updateInfo=function(t){if(this.updateIconRp(),3==t?t=2:2==t&&(t=3),t==this._curShowViewIndex)switch(t){case 1:console.warn("更新新手界面"),this.updateNoviceItems();break;case 3:console.warn("更新等级礼包"),this.updateLevelGiftItems();break;case 2:console.warn("更新每日礼包"),this.updateDailyItems()}},i.updateNoviceItems=function(){var t=ps.blueNoviceGifts;if(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];e.push({type:1,info:s})}this.itemList.array=e}},i.updateLevelGiftItems=function(){var t=ps.blueLevelGifts;if(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];e.push({type:3,info:s})}this.itemList.array=e}},i.updateDailyItems=function(){var t=ps.blueDailyGifts;if(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];e.push({type:2,info:s})}this.itemList.array=e}},I(0,i,"uiClass",function(){return"blueDiamondPanel"}),e}(),oP=function(t){function e(){this._vo=null,this._rewarded=!1,this._rewardItemArr=null,e.__super.call(this),this.rewardBtn.on("click",this,this.onClick)}w(e,"modules.blueDiamond.qqyxdt.GrowUpRewardItem",t);var i=e.prototype;return i.onClick=function(){if(this._vo){var t=this._vo.id;ja.ins().toGetReward(5,t)}},i.updateItemShow=function(){var t=this._vo.level||0,e=this._vo.trans||0;t<=0?this.rewardNameTxt.text="大厅成长礼包"+e+"转":e<=0&&(this.rewardNameTxt.text="大厅成长礼包"+t+"级"),this.updateRewardShow()},i.updateRewardShow=function(){if(this._vo){this._rewardItemArr=this._rewardItemArr||[null,null,null];for(var t=this._vo.getReward()||0,e=Math.max(this._rewardItemArr.length,t.length),i=0;i<e;i++)if(i<t.length){this._rewardItemArr[i]=this._rewardItemArr[i]||new Dh;var s=this._rewardItemArr[i];s.size(85,85),s.txtName.fontSize=22,this.addChild(s);var n=new Object;n.className="p_tkv",n.type=5,n.id=t[i].itemType,n.val=t[i].itemNum,s.setDrop(n),s.pos(26+(s.width+10)*i,53),s.on("click",this,this.onClickGoodsItem)}else this._rewardItemArr[i]&&this._rewardItemArr[i].removeSelf();this._rewarded?this.rewardBtn.disabled=this._rewarded:this.rewardBtn.disabled=!pe.checkLevel(this._vo.trans,this._vo.level),this.rewardBtn.label=this._rewarded?"已领取":"领取",this.getRewardRp.visible=!this.rewardBtn.disabled}},i.onClickGoodsItem=function(t){if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target.val,i=ur.getItem(e.id);i.tempNum=e.val;var s="";s=ur.isEquip(i.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(i,s)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._vo=t.vo,this._rewarded=t.rewarded||!1),this._vo&&this.updateItemShow()}),e}(uc),aP=function(t){function e(){this._curPag=null,this._rewardItemArr=null,this._imgOriginY=NaN,this._glowFilter=null,this._iconImgArr=null,this._iconGlowArr=null,this._flashEffArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0,"",!1),this.init(),this.initEvent()}w(e,"modules.blueDiamond.qqyxdt.QQyxdtPrivilegeView",cc);var i=e.prototype;return i.init=function(){this.growUpItemList.itemRender=oP,this.growUpItemList.vScrollBarSkin="",this._imgOriginY=this.newGuideImg.y,this._glowFilter=new Y("#ffff00",12,0,0)},i.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this._iconImgArr=[this.newGuideImg,this.growUpImg,this.dailyImg],this._iconGlowArr=[this.newGuideImgF,this.growUpImgF,this.dailyImgF];for(var t=0;t<this._iconImgArr.length;t++){var e=this._iconImgArr[t];e.on("mousedown",this,this.onMouseEvent),e.on("mouseup",this,this.onMouseEvent),e.on("mouseout",this,this.onMouseEvent),e.on("mouseover",this,this.onMouseEvent),this._iconGlowArr[t].visible=!1}this.setFlashVisAndPlay()},i.onMouseEvent=function(t){switch(t.type){case"mouseover":t.target.y=this._imgOriginY-3;break;case"mouseout":case"mouseup":if(this.isCurUpIcon(t.target))return;t.target.y=this._imgOriginY;break;case"mousedown":this.updateImgPosAndFilters(t.target),this.updatePage(t.target)}},i.updateImgPosAndFilters=function(t){for(var e=0;e<this._iconImgArr.length;e++)this._iconImgArr[e]==t?(this._iconImgArr[e].y=this._imgOriginY-3,this._iconGlowArr[e].visible=!0,this._iconGlowArr[e].y=this._iconImgArr[e].y,this._iconGlowArr[e].filters=[this._glowFilter]):(this._iconImgArr[e].y=this._imgOriginY,this._iconGlowArr[e].visible=!1,this._iconGlowArr[e].y=this._iconImgArr[e].y,this._iconGlowArr[e].filters=[])},i.isCurUpIcon=function(t){return t==this.dailyImg&&"PAGE_DAILY"==this._curPag||t==this.growUpImg&&"PAGE_GROW_UP"==this._curPag||t==this.newGuideImg&&"PAGE_NEW_GUIDE"==this._curPag},i.updatePage=function(t){switch(t){case this.newGuideImg:this.stopFlashPlay(this._iconImgArr.indexOf(t)),this.curPage="PAGE_NEW_GUIDE",ja.ins().toGetInfo(4);break;case this.dailyImg:this.stopFlashPlay(this._iconImgArr.indexOf(t)),this.curPage="PAGE_DAILY",ja.ins().toGetInfo(6);break;case this.growUpImg:this.stopFlashPlay(this._iconImgArr.indexOf(t)),this.curPage="PAGE_GROW_UP",ja.ins().toGetInfo(5)}},i.onDisplay=function(){this.updateImgPosAndFilters(this.newGuideImg),this.curPage="PAGE_NEW_GUIDE",ja.ins().toGetInfo(4),T.register("ROLE_VIP_INFO_UPDATE",this,this.updateInfo),T.register("ROLE_BULE_VIP_REWARD_UPDATE",this,this.updateInfo),this.updateRedPoint()},i.onUnDisplay=function(){T.remove("ROLE_VIP_INFO_UPDATE",this,this.updateInfo),T.remove("ROLE_BULE_VIP_REWARD_UPDATE",this,this.updateInfo)},i.updateRedPoint=function(){this.newGuideRP.visible=ps.checkPrivilegeNewGuideRP(),this.dailyRP.visible=ps.checkPrivilegeDailyRP(),this.growupRP.visible=ps.checkPrivilegeGrowUpRP()},i.onClick=function(t){switch(t.target){case this.closeBtn1:case this.closeBtn:this.closeWindow();break;case this.rewardBtn:this.onClickReward()}},i.onClickReward=function(){"PAGE_DAILY"==this._curPag?ja.ins().toGetReward(6,1):"PAGE_NEW_GUIDE"==this._curPag&&ja.ins().toGetReward(4,1)},i.changePage=function(){"PAGE_DAILY"==this._curPag||"PAGE_NEW_GUIDE"==this._curPag?(this.guideAndDailyBox.visible=!0,this.growUpItemList.visible=!1):(this.guideAndDailyBox.visible=!1,this.growUpItemList.visible=!0)},i.updateGrowUpItemShow=function(t){for(var e=ps.qqyxdtGrowupGifts,i=[],s=0;s<e.length;s++){var n=e[s],o=!1;if(t&&0<t.length)for(var a=0;a<t.length;a++){var l=t[a];l.id==n.id&&(o=1==l.val)}i.push({vo:n,rewarded:o})}this.growUpItemList.array=i},i.updateInfo=function(t){this.updateRedPoint();var e,i=ps.getRoleBlueVipInfoByType(t);if(i)switch(t){case 6:i.length<=0?(this.rewardBtn.disabled=!1,this.rewardBtn.label="领取",this.getRewardRP.visible=!0):(e=i[0],this.rewardBtn.disabled=!(6==e.id&&1==e.val),this.rewardBtn.label=6!=e.id||1!=e.val?"已领取":"领取",this.getRewardRP.visible=6==e.id&&1==e.val),this.updateDailyPageShow();break;case 4:i.length<=0?(this.rewardBtn.disabled=!1,this.rewardBtn.label="领取",this.getRewardRP.visible=!0):(e=i[0],this.rewardBtn.disabled=!(4==e.id&&1==e.val),this.rewardBtn.label=6!=e.id||1!=e.val?"已领取":"领取",this.getRewardRP.visible=4==e.id&&1==e.val),this.updateNewGuidePageShow();break;case 5:this.getRewardRP.visible=!1,this.updateGrowUpItemShow(i)}},i.updateNewGuidePageShow=function(){this.descImg.skin="modules/blueDiamond/qqyxdtPrivilege/newGuideTitle.png",this.updateRewardShow()},i.updateDailyPageShow=function(){this.descImg.skin="modules/blueDiamond/qqyxdtPrivilege/dailyTitle.png",this.updateRewardShow()},i.updateRewardShow=function(){var t=[];(this._rewardItemArr=this._rewardItemArr||[null,null,null],"PAGE_DAILY"==this._curPag)?t=ps.qqyxdtDailyGift.getReward():t=ps.qqyxdtNewGuideGift.getReward();for(var e=Math.max(this._rewardItemArr.length,t.length),i=0,s=0,n=0;n<e;n++)if(n<t.length){this._rewardItemArr[n]=this._rewardItemArr[n]||new Dh;var o=this._rewardItemArr[n];this.rewardBox.addChild(o);var a=new Object;a.className="p_tkv",a.type=5,a.id=t[n].itemType,a.val=t[n].itemNum,o.setDrop(a),o.txtName.text="",o.bigTxtNum.text="",o.pos((o.width+10)*n,0),i+=o.width+10,s=o.height,o.on("click",this,this.onClickGoodsItem)}else this._rewardItemArr[n]&&this._rewardItemArr[n].removeSelf();this.rewardBox.size(i,s),this.rewardBox.y=this.rewardBg.y+this.rewardBg.height/2-45.5,this.rewardBox.x=this.rewardBg.x+this.rewardBg.width/2-this.rewardBox.width/2},i.onClickGoodsItem=function(t){if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target.val,i=ur.getItem(e.id);i.tempNum=e.val;var s="";s=ur.isEquip(i.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(i,s)}},i.setFlashVisAndPlay=function(){this._flashEffArr=this._flashEffArr||[];for(var t=0;t<this._iconImgArr.length;t++){this._flashEffArr[t]=new b.getOne;var e=this._flashEffArr[t],i=this._iconImgArr[t];i&&(e.pos(i.x+i.width/2,i.y+i.height/2),this.box.addChild(e),e.loadAndPlay("ICON_FLASH_EFF_URL","default",0,!0))}},i.stopFlashPlay=function(t){this._flashEffArr&&0<this._flashEffArr.length&&this._flashEffArr[t]&&(this._flashEffArr[t].stop(),this._flashEffArr[t].removeSelf())},I(0,i,"curPage",null,function(t){this._curPag!=t&&(this._curPag=t,this.changePage())}),e.PAGE_NEW_GUIDE="PAGE_NEW_GUIDE",e.PAGE_DAILY="PAGE_DAILY",e.PAGE_GROW_UP="PAGE_GROW_UP",e}(),lP=function(t){function e(){this.isInitFaceList=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=150,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.syncCount=0,this.curItemY=2,this.iconItems=null,this.msgItems=null,this.isCd=!1,this.sendHdl=new Q(this,function(){this.isCd=!1}),e.__super.call(this),this.iconItems=[],this.msgItems=[],this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.maxChars=40,this.on("click",this,this.onClick),this.list.vScrollBar.autoHide=!0,this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown)}w(e,"modules.chat.view.ChatFamilyFightView",dc);var i=e.prototype;return i.update=function(){this.updateList(),this.updateSpPage()},i.updateList=function(){for(;0<this.iconItems.length;){var t=this.iconItems.shift();t.skin=null,t.visible=!0,t.removeSelf()}for(;0<this.msgItems.length;){var e=this.msgItems.shift();e.visible=!0,e.removeSelf(),this.curItemY-=e.contextHeight+2}for(var i,s=ws.getMsgsByChannel(ws.curChannel),n=0,o=s.length;n<o;n++)i=s[n],this.addLine(i);this.updatePos(),this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.onFocus=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.onClick=function(t){switch(t.target){case this.btnSend:if(this.hideEmoji(),!ws.checkSendWordLimit(this.inputMsg.text,5))return;if(pt.send(18,8,"聊天-仙盟频道-发送"),40<this.inputMsg.text.length)return void Jt.addTip("超过字数上限");if(""==this.inputMsg.text||"点击输入文本..."==this.inputMsg.text)return void Jt.addTip("不能发送空白信息");if(this.isCd)return;this.isCd=!0,bs.sendCd(this.btnSend,this.sendHdl),Za.ins().toSendMsg(ws.curChannel,this.inputMsg.text,5);break;case this.imgFaceEnter:this.onShowFaceView();break;default:if(this.imgFace.contains(t.target)||this.hideEmoji(),t.target.parent instanceof laya.html.dom.HTMLElement){var e=t.target.parent;if(e.href&&0<e.href.split("#").length)return void this.onLink(e.href)}}},i.thisMouseDown=function(t){this.stage.on("mouseup",this,this.thisMouseUp),this.currClickX=t.stageX,this.currTimes=S.now()},i.thisMouseUp=function(t){(this.stage.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance)?0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1:S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1);this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.updateSpPage=function(){for(var t=0,e=this.spPage.numChildren;t<e;t++)this.spPage.getChildAt(t).source=t==this.currIndex?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png")},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,this.updateByEmoji(!0))},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,this.updateByEmoji(!1))},i.updateByEmoji=function(t){or.ins().navbarVisible=!t,this.list.bottom=t?474:344,this.light.bottom=t?474:334,this.inputMsg.bottom=t?412:272,this.imgFaceEnter.bottom=t?412:277,this.btnSend.bottom=t?415:275,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),i="modules/chat/face"+o+"_1.png",e.pos(36+95*s,30+90*n),e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):e.source=ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.onSelect=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.onMessage=function(t){null!=t&&null!=t.role_info&&t.role_info.role_id==pe.roleID&&this.cleanInput(),this.update()},i.cleanInput=function(){this.inputMsg.text="",this.hideEmoji()},i.addLine=function(t){var e,i;40<=this.iconItems.length?((e=this.iconItems.shift()).skin=null,e.visible=!0,e.removeSelf()):e=new et,e.size(43,20),40<=this.msgItems.length?((i=this.msgItems.shift()).visible=!0,i.removeSelf(),this.curItemY-=i.contextHeight+2):(i=new K).x=42,i.style.fontSize=24,i.color="#efdcaf",i.style.lineHeight=30,i.width=560;var s="";switch(t.msg_type){case 2:e.skin="com/ui/preMsgType2.png",i.style.align="left";break;case 3:e.skin="com/ui/preMsgType3.png",i.style.align="left";break;case 5:case 9:e.skin="com/ui/preMsgType5.png",0<t.role_info.vip_level&&(s+=Z.span("VIP"+t.role_info.vip_level,"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left"}var n=100001==t.bc_id?1e4:t.bc_id,o=ys.getMsg(n,t.strings,t.nums),a=5==t.msg_type?bs.getChatContextHtml(o,!1,"#efdcaf"):o,l="";5==t.msg_type&&(l=1==t.role_info.sex?Z.span("♂","#4AFCFA",24,!0):Z.span("♀","#FFABD3",24,!0));try{i.innerHTML=l+s+a,i.height=i.contextHeight,this.msgItems.push(i),this.iconItems.push(e)}catch(t){console.log("模板："+this.dataSource.bc_id+"替换后格式有问题，请查看")}},i.updatePos=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);var t,e;this.curItemY=2;for(var i=0;i<this.iconItems.length;i++)t=this.iconItems[i],this.list.addChild(t);for(var s=0,n=this.msgItems.length;s<n;s++)(e=this.msgItems[s]).y=this.curItemY,this.list.addChild(e),this.curItemY+=e.contextHeight+2;for(var o=0;o<this.iconItems.length;o++)(t=this.iconItems[o]).y=null!=this.msgItems[o]?this.msgItems[o].y+6:t.y},i.onLink=function(t){if("string"==typeof t){pt.send(18,9,"聊天-预览窗口-点击聊天内容链接");var e=String(t).split("#");if(t&&!(t.length<2)){var i=0,s=NaN;switch(e[0]){case"event:link":0<(i=parseInt(e[1]))&&me.linkTo(i);break;case"event:friendRequest":i=parseInt(e[1]),s=parseInt(e[2]);var n=e[3];me.linkTo(i,[s,n]);break;case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s)}}}},I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),rP=function(t){function e(){this.index=0,this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24,this.txtMsg.on("link",this,this.onLink)}w(e,"modules.chat.view.ChatFamilyLeftItem",t);var i=e.prototype;return i.update=function(){var t=this.dataSource;if(0<t.role_info.avatar_frame){var e=la.getSelfFrameVOById(t.role_info.avatar_frame);e&&1==e.urlType?(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(81,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+t.role_info.avatar_frame+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();this.imgHead.skin="com/head/big"+t.role_info.category+t.role_info.sex+".png",this.imgSex.skin=1==t.role_info.sex?"com/ui/man.png":"com/ui/woman.png";var i=176,s=Dn.getNameByTitle(t.role_info.family_title);""!=s?(this.txtFamily.text="["+s+"]",i+=this.txtFamily.textWidth+2):this.txtFamily.text=s,this.txtTitle.text=t.role_info.role_name,this.txtTitle.x=i,i+=this.txtTitle.textWidth+2,0<t.role_info.vip_level?(this.imgVIP.skin="modules/chat/VIP"+t.role_info.vip_level+".png",this.imgVIP.x=i,Ia.isSVIP(t.role_info.vip_level)?i+=74:i+=65):this.imgVIP.skin=null,1==t.role_info.has_month_card?(this.imgMonth.skin="com/ui/month.png",this.imgMonth.x=i,i+=30):this.imgMonth.skin=null,1==t.role_info.has_noble?(this.imgNoble.skin="com/ui/noble.png",this.imgNoble.x=i,i+=30):this.imgNoble.skin=null,fo.coupleInfoP&&t.role_info.role_id==fo.coupleInfoP.role_id?(this.imgMate.skin="modules/friend/mate.png",this.imgMate.x=i):this.imgMate.skin=null;var n="#815841",o=ys.getMsg(t.bc_id,t.strings,t.nums);if(this.textBg.skin="modules/bubble/bubbleL"+t.role_info.bg_color+".png",0<t.role_info.bg_color){this.textBg.sizeGrid="21,46,18,22";var a=la.getSelfBubbleVOById(t.role_info.bg_color);n=a?a.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";this.txtMsg.innerHTML=bs.getChatContextHtml(o,!1,n),this.textBg.width=20+this.txtMsg.contextWidth+20,this.textBg.height=10+this.txtMsg.contextHeight+10},i.onLink=function(t){if("string"==typeof t){pt.send(18,10,"聊天-预览窗口-点击聊天内容链接");var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN;switch(e[0]){case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:petBattle":me.linkTo(11308)}}}},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(pc),hP=function(t){function e(){this.txtSpace=560,this.index=0,this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24,this.txtMsg.on("link",this,this.onLink)}w(e,"modules.chat.view.ChatFamilyRightItem",t);var i=e.prototype;return i.update=function(){var t=this.dataSource,e=pe.getPalByIndex(0);if(this.imgHead.skin="com/head/big"+e.ext.category+e.ext.sex+".png",null!=t.role_info&&0<t.role_info.avatar_frame){var i=la.getSelfFrameVOById(t.role_info.avatar_frame);i&&1==i.urlType?(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(662,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+t.role_info.avatar_frame+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();var s=576;1==t.role_info.has_noble?(this.imgNoble.skin="com/ui/noble.png",s-=28,this.imgNoble.x=s):this.imgNoble.skin=null,1==t.role_info.has_month_card?(this.imgMonth.skin="com/ui/month.png",s-=30,this.imgMonth.x=s):this.imgMonth.skin=null,0<t.role_info.vip_level?(this.imgVIP.skin="modules/chat/VIP"+t.role_info.vip_level+".png",Ia.isSVIP(t.role_info.vip_level)?s-=74:s-=65,this.imgVIP.x=s):this.imgVIP.skin=null,this.txtName.text=t.role_info.role_name,s-=this.txtName.textWidth+2,this.txtName.x=s,this.txtTitle.text="["+Dn.getNameByTitle(t.role_info.family_title)+"]",this.txtTitle.x=this.txtName.x-this.txtTitle.textWidth-2;var n="#815841",o=ys.getMsg(t.bc_id,t.strings,t.nums);if(this.textBg.skin="modules/bubble/bubbleR"+t.role_info.bg_color+".png",0<t.role_info.bg_color){this.textBg.sizeGrid="21,22,18,46";var a=la.getSelfBubbleVOById(t.role_info.bg_color);n=a?a.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";this.txtMsg.innerHTML=bs.getChatContextHtml(o,!1,n),this.txtMsg.x=this.txtSpace-this.txtMsg.contextWidth,this.textBg.x=this.txtMsg.x-20,this.textBg.width=20+this.txtMsg.contextWidth+25,this.textBg.height=10+this.txtMsg.contextHeight+10},i.onLink=function(t){if("string"==typeof t){var e=String(t).split("#");if(e&&2<=e.length)switch(e[0]){case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:petBattle":me.linkTo(11308)}}},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(mc),uP=function(t){function e(){this.isInitFaceList=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=150,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.syncCount=0,this.curItemY=2,this.iconItems=null,this.msgItems=null,this.isCd=!1,this.sendHdl=new Q(this,function(){this.isCd=!1}),e.__super.call(this),this.iconItems=[],this.msgItems=[],this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.maxChars=40,this.on("click",this,this.onClick),this.list.vScrollBar.autoHide=!0,this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown)}w(e,"modules.chat.view.ChatFamilyWorldView",dc);var i=e.prototype;return i.update=function(){this.updateList(),this.updateSpPage()},i.updateList=function(){for(;0<this.iconItems.length;){var t=this.iconItems.shift();t.skin=null,t.visible=!0,t.removeSelf()}for(;0<this.msgItems.length;){var e=this.msgItems.shift();e.visible=!0,e.removeSelf(),this.curItemY-=e.contextHeight+2}for(var i,s=ws.getMsgsByChannel(ws.curChannel),n=0,o=s.length;n<o;n++)i=s[n],this.addLine(i);this.updatePos(),this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.onFocus=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.onClick=function(t){switch(t.target){case this.btnSend:if(this.hideEmoji(),!ws.checkSendWordLimit(this.inputMsg.text,1))return;if(pt.send(18,7,"聊天-世界频道-发送"),40<this.inputMsg.text.length)return void Jt.addTip("超过字数上限");if(""==this.inputMsg.text||"点击输入文本..."==this.inputMsg.text)return void Jt.addTip("不能发送空白信息");if(this.isCd)return;this.isCd=!0,bs.sendCd(this.btnSend,this.sendHdl),Za.ins().toSendMsg(ws.curChannel,this.inputMsg.text,1);break;case this.imgFaceEnter:this.onShowFaceView();break;default:if(this.imgFace.contains(t.target)||this.hideEmoji(),t.target.parent instanceof laya.html.dom.HTMLElement){var e=t.target.parent;if(e.href&&0<e.href.split("#").length)return void this.onLink(e.href)}}},i.thisMouseDown=function(t){this.stage.on("mouseup",this,this.thisMouseUp),this.currClickX=t.stageX,this.currTimes=S.now()},i.thisMouseUp=function(t){(this.stage.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance)?0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1:S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1);this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.updateSpPage=function(){for(var t=0,e=this.spPage.numChildren;t<e;t++)this.spPage.getChildAt(t).source=t==this.currIndex?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png")},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,this.updateByEmoji(!0))},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,this.updateByEmoji(!1))},i.updateByEmoji=function(t){or.ins().navbarVisible=!t,this.list.bottom=t?474:344,this.light.bottom=t?474:334,this.inputMsg.bottom=t?412:272,this.imgFaceEnter.bottom=t?412:277,this.btnSend.bottom=t?415:275,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),i="modules/chat/face"+o+"_1.png",e.pos(36+95*s,30+90*n),e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):e.source=ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.onSelect=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.onMessage=function(t){null!=t&&null!=t.role_info&&t.role_info.role_id==pe.roleID&&this.cleanInput(),this.update()},i.cleanInput=function(){this.inputMsg.text="",this.hideEmoji()},i.addLine=function(t){var e,i;40<=this.iconItems.length?((e=this.iconItems.shift()).skin=null,e.visible=!0,e.removeSelf()):e=new et,e.size(43,20),40<=this.msgItems.length?((i=this.msgItems.shift()).visible=!0,i.removeSelf(),this.curItemY-=i.contextHeight+2):(i=new K).x=42,i.style.fontSize=24,i.color="#efdcaf",i.style.lineHeight=30,i.width=560;var s="";switch(t.msg_type){case 2:e.skin="com/ui/preMsgType2.png",i.style.align="left";break;case 3:e.skin="com/ui/preMsgType3.png",i.style.align="left";break;case 1:case 8:e.skin="com/ui/preMsgType1.png",0<t.role_info.vip_level&&(s+=Z.span("VIP"+t.role_info.vip_level,"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left"}var n=100001==t.bc_id?1e4:t.bc_id,o=ys.getMsg(n,t.strings,t.nums),a=1==t.msg_type||8==t.msg_type?bs.getChatContextHtml(o,!1,"#efdcaf"):o,l="";1!=t.msg_type&&8!=t.msg_type||(l=1==t.role_info.sex?Z.span("♂","#4AFCFA",24,!0):Z.span("♀","#FFABD3",24,!0)),bs.filterHtmlSpcStr(i,l+s+a),i.height=i.contextHeight,this.msgItems.push(i),this.iconItems.push(e)},i.updatePos=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);var t,e;this.curItemY=2;for(var i=0;i<this.iconItems.length;i++)t=this.iconItems[i],this.list.addChild(t);for(var s=0,n=this.msgItems.length;s<n;s++)(e=this.msgItems[s]).y=this.curItemY,this.list.addChild(e),this.curItemY+=e.contextHeight+2;for(var o=0;o<this.iconItems.length;o++)(t=this.iconItems[o]).y=null!=this.msgItems[o]?this.msgItems[o].y+6:t.y},i.onLink=function(t){if("string"==typeof t){pt.send(18,5,"聊天-世界频道-点击聊天内容链接");var e=String(t).split("#");if(t&&!(t.length<2)){var i=0,s=NaN;switch(e[0]){case"event:link":0<(i=parseInt(e[1]))&&me.linkTo(i);break;case"event:friendRequest":i=parseInt(e[1]),s=parseInt(e[2]);var n=e[3];me.linkTo(i,[s,n]);break;case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]))}}}},I(0,i,"uiClass",function(){return"ChatFamilyFightView"}),I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),cP=function(t){function e(){this.isInitFaceList=!1,this.isMouseDown=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=150,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.allItem=null,this.leftPool=null,this.rightPool=null,this.noticePool=null,this.isCd=!1,this.syncCount=0,this.curItemY=0,this.curItemData=null,this.sendHdl=new Q(this,function(){this.isCd=!1}),e.__super.call(this),this.allItem=[],this.leftPool=[],this.rightPool=[],this.noticePool=[],this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.on("enter",this,this.sendInput),this.inputMsg.maxChars=40,this.on("click",this,this.onClick),this.list.vScrollBar.autoHide=!0,this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown)}w(e,"modules.chat.view.ChatFamilyView",fc);var i=e.prototype;return i.sendInput=function(){if(this.hideEmoji(),ws.checkSendWordLimit(this.inputMsg.text,5))if(pt.send(18,8,"聊天-仙盟频道-发送"),40<this.inputMsg.text.length)Jt.addTip("超过字数上限");else if(""!=this.inputMsg.text&&"点击输入文本..."!=this.inputMsg.text){if(!this.isCd){this.isCd=!0,bs.sendCd(this.btnSend,this.sendHdl);var t=this.inputMsg.text;t=bs.replaceSpcInputChar(t),Za.ins().toSendMsg(ws.curChannel,t,5)}}else Jt.addTip("不能发送空白信息")},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.thisMouseDown=function(t){this.stage.on("mouseup",this,this.thisMouseUp),this.currClickX=t.stageX,this.currTimes=S.now()},i.thisMouseUp=function(t){(this.stage.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance)?0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1:S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1);this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.updateSpPage=function(){for(var t,e=0;e<this.spPage.numChildren;e++)t=this.spPage.getChildAt(e),e==this.currIndex?t.source=ut.getRes("com/ui/imgPage1.png"):t.source=ut.getRes("com/ui/imgPage2.png")},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,or.ins().navbarVisible=!1,this.list.bottom=474,this.light.bottom=474,this.inputMsg.bottom=412,this.imgFaceEnter.bottom=417,this.btnSend.bottom=415,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom))},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,or.ins().navbarVisible=!0,this.list.bottom=334,this.light.bottom=334,this.inputMsg.bottom=272,this.imgFaceEnter.bottom=277,this.btnSend.bottom=275,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom))},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),e.pos(36+95*s,30+90*n),i="modules/chat/face"+o+"_1.png",e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.onFocus=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onSelect=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.onClick=function(t){switch(t.target){case this.btnSend:this.sendInput();break;case this.imgFaceEnter:this.onShowFaceView();break;case this.btnLook:T.dispatch("OPEN_OTHER_ROLE_PANLE",this.curItemData.role_info.role_id);break;case this.btnBlack:Ul.getInstance().toBlack(this.curItemData.role_info.role_id);break;case this.btnFriend:"好友"==this.btnFriend.label?Ul.getInstance().toRequest(this.curItemData.role_info.role_id,""):"私聊"==this.btnFriend.label&&T.dispatch("FRIEND_OPEN_PRIVATE_PANEL",this.curItemData.role_info.role_id);break;case this.btnCompare:T.dispatch("OPEN_COMPARE_PANLE",this.curItemData.role_info.role_id);break;case this.btnFlower:var e=jn.getFriendByRoleId(this.curItemData.role_info.role_id);e?(Hl.ins().openSendPanel(e),this.spAction.visible=!1):Jt.addTip("添加该玩家为好友，即可赠送鲜花");break;default:if(this.imgFace.contains(t.target)||this.hideEmoji(),!this.list.contains(t.target))for(var i,s=0;s<this.list.numChildren;s++)if((i=this.list.getChildAt(s))&&i instanceof modules.chat.view.ChatFamilyLeftItem){this.spAction.visible=!1;var n=jn.getFriendByRoleId(i.dataSource.role_info.role_id);n||(n=qn.getFriendByRoleId(i.dataSource.role_info.role_id)),this.btnFriend.label=null==n?"好友":"私聊"}}},i.update=function(){this.updateList(),this.updateSpPage()},i.getItem=function(t){return 3==t.msg_type||2==t.msg_type?0<this.noticePool.length?this.noticePool.pop():new mP:t.role_info.role_id!=pe.user.role_id?0<this.leftPool.length?this.leftPool.pop():new rP:0<this.rightPool.length?this.rightPool.pop():new hP},i.updateList=function(){for(;0<this.allItem.length;){var t=this.allItem.pop();t.y=0,t.removeSelf(),t.off("click",this,this.onClickItem),t instanceof modules.chat.view.ChatFamilyLeftItem?this.leftPool.push(t):t instanceof modules.chat.view.ChatFamilyRightItem?this.rightPool.push(t):t instanceof modules.chat.view.ChatNoticeItem&&this.noticePool.push(t)}for(var e,i=ws.getMsgsByChannel(ws.curChannel),s=0;s<i.length;s++)e=i[s],this.addOneRecord(e);this.updatePos(),this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.updatePos=function(){var t;this.curItemY=15;for(var e=0;e<this.allItem.length;e++)(t=this.allItem[e]).y=this.curItemY,this.curItemY+=t.height+15},i.onClickItem=function(t){for(var e,i,s=t.currentTarget,n=0;n<this.list.numChildren;n++)(e=this.list.getChildAt(n))instanceof modules.chat.view.ChatFamilyLeftItem&&e.index!=s.index&&(this.spAction.visible=!1);"imgHead"==t.target.name?s&&s instanceof modules.chat.view.ChatFamilyLeftItem&&(this.curItemData=s.dataSource,this.spAction.y=this.list.y+(s.y-this.list.content.scrollRect.y),this.spAction.visible=!this.spAction.visible,(i=jn.getFriendByRoleId(s.dataSource.role_info.role_id))||(i=qn.getFriendByRoleId(s.dataSource.role_info.role_id)),this.btnFriend.label=null==i?"好友":"私聊"):s&&s instanceof modules.chat.view.ChatFamilyLeftItem&&(this.spAction.visible=!1)},i.onMessage=function(t){if(null!=t&&null!=t.role_info&&t.role_info.role_id==pe.roleID&&this.cleanInput(),40<=this.allItem.length){var e=this.allItem.shift();e.y=0,e.removeSelf(),e.off("click",this,this.onClickItem),e instanceof modules.chat.view.ChatFamilyLeftItem?this.leftPool.push(e):e instanceof modules.chat.view.ChatFamilyRightItem?this.rightPool.push(e):e instanceof modules.chat.view.ChatNoticeItem&&this.noticePool.push(e)}this.addOneRecord(t),this.updatePos(),this.list.refresh(),this.scrollToBottom()},i.addOneRecord=function(t){var e=this.getItem(t);e instanceof modules.chat.view.ChatNoticeItem?e.x=20:e.on("click",this,this.onClickItem),e.dataSource=t,e.update(),this.list.addChild(e),this.allItem.push(e)},i.cleanInput=function(){this.inputMsg.text="",this.hideEmoji()},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),dP=function(t){function e(){this.txt=null,this.LABA_DUR=15e3,this.speed=1.5,this.waitMsgs=null,this._$7_scrollRect=null,this.labaStartTime=0,this.needScorll=!1,e.__super.call(this),this.txt=Me.createHTMLDivElement(null,0,7),this.txt.style.fontSize=26,this.txt.style.wordWrap=!1,this.txt.color="#ffffff",this.addChild(this.txt),this._$7_scrollRect=new Dt(0,0,0,42),this.waitMsgs=[]}w(e,"modules.chat.view.ChatLabaBrocast",_c);var i=e.prototype;return i.add=function(t,e){this.waitMsgs.push({msg:t,len:t.length,index:e.show_type}),0==this.displayedInStage&&this.showNext()},i.showNext=function(){if(0==this.waitMsgs.length)return _t.removeFromFrame(this,this.onFrame),void this.removeSelf();var t=this.waitMsgs.shift();this.needScorll=19<t.len,this.needScorll?this.txt.innerHTML=t.msg+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+t.msg:this.txt.innerHTML=t.msg,this.txt.width=this.txt.contextWidth+10,this.indexTxt.text=t.index.toString(),1==t.index||2==t.index?this.laba.skin="com/ui/laba1.png":3==t.index||4==t.index?this.laba.skin="com/ui/laba2.png":this.laba.skin="com/ui/laba3.png",this.txt.x=90,this._$7_scrollRect.x=0,this._$7_scrollRect.width=690,this.labaStartTime=S.now(),this.x=(lt.stageWidth-this.width)/2,this.y=6,h.stage.addChild(this),_t.addToFrame(this,this.onFrame)},i.onFrame=function(){this.needScorll&&(60<this.txt.x?(this.txt.x-=this.speed,this._$7_scrollRect.width+=this.speed):this._$7_scrollRect.x+=this.speed,690<this._$7_scrollRect.width&&(this._$7_scrollRect.width=690),this._$7_scrollRect.x>this.txt.contextWidth&&(this.txt.x=750,this._$7_scrollRect.x=0,this._$7_scrollRect.width=0),this.txt.scrollRect=this._$7_scrollRect);var t=S.now();(t-this.labaStartTime>=this.LABA_DUR||6e3<t-this.labaStartTime&&0<this.waitMsgs.length)&&this.showNext()},e}(),pP=function(t){function e(){this._vo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),this.input.maxChars=20,this.txtSVIP.style.align="center",this.txtSVIP.style.fontSize=24}w(e,"modules.chat.view.ChatLabaSendView",gc);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.onSecond)},i.onDisplay=function(){this.input.text="";var t=new Object;t.className="m_chat_laba_info_tos",v.send(t)},i.onInfo=function(t){this._vo=t;var e=Ia.isSVIP(),i=Ia.getPrivilegeUse(1);e&&0<i?(this.gold.visible=this.goldTxt.visible=!1,this.txtSVIP.visible=!0,this.txtSVIP.innerHTML=Z.span("SVIP","#fff959")+Z.span("免费次数："+i),_t.removeFromSceond(this,this.onSecond),this.infoTxt.text=""):(this.gold.visible=this.goldTxt.visible=!0,this.txtSVIP.visible=!1,this.goldTxt.text=t.need_gold.toString(),0<t.relive_ts?(this.gold.x=448,this.goldTxt.x=500,this.onSecond(),_t.addToSecond(this,this.onSecond)):(_t.removeFromSceond(this,this.onSecond),this.infoTxt.text="",this.gold.x=300,this.goldTxt.x=352)),this.txtXiaoQi.visible=37==G.agentId&&Ia.curLv<4,this.txtXiaoQi.visible&&this.gold.visible&&(this.gold.visible=this.goldTxt.visible=!1)},i.onSecond=function(){if(null!=this._vo)if(this._vo.relive_ts>ya.serverTime)this.infoTxt.text=x.formatTime(this._vo.relive_ts-ya.serverTime)+"内再次发送，需要";else{this.infoTxt.text="",this.gold.x=300,this.goldTxt.x=352,_t.removeFromSceond(this,this.onSecond);var t=new Object;t.className="m_chat_laba_info_tos",v.send(t)}},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btn:if(Ia.curLv<4&&37==G.agentId)return void Jt.addTip("vip4开启传音功能");if(Ia.curLv<1){var e=new Ee;return e.msg="需达VIP1才可发送传音，是否前往提升VIP等级？",e.yesCaller=this,e.yesFun=this.onClickVipYes,void EF.showVO(e)}if(null==this.input.text||""==this.input.text)return void Jt.addTip("不能发送空白信息");var i=Ia.isSVIP(),s=Ia.getPrivilegeUse(1);if(i&&0<s)this.onClickSend();else{var n=new Ee;n.msg="是否花费"+Z.span(this._vo.need_gold+"元宝","#fff959")+"发送传音？",n.yesCaller=this,n.yesFun=this.onClickSend,n.key="ChatLabaSendView.clickBuy",EF.showVO(n)}}},i.onClickVipYes=function(){me.linkTo(11454)},i.onClickSend=function(){var t=new Object;t.className="m_chat_in_channel_tos",t.channel=1e4,t.msg=this.input.text,t.msg_type=7,v.send(t)},I(0,i,"uiClass",function(){return"ChatLaba"}),e}(),mP=function(t){function e(){e.__super.call(this),this.txtNoticeInfo.style.fontSize=24,this.txtNoticeInfo.style.lineHeight=35,this.txtNoticeInfo.color="#5d3924",this.txtNoticeInfo.on("link",this,this.onLink)}w(e,"modules.chat.view.ChatNoticeItem",t);var i=e.prototype;return i.onLink=function(t){if("string"==typeof t){1e4==ws.curChannel?pt.send(18,5,"聊天-世界频道-点\t击聊天内容链接"):3e4==ws.curChannel&&pt.send(18,6,"聊天-公告频道-点击聊天内容链接");var e=String(t).split("#");if(e&&2<=e.length){var i=parseInt(e[1]);if(0<i){if(11423==i){var s=ao.getIconVO(115).openLv;if(pe.myLevel<s)return void Jt.addTip("角色等级不足"+s+"级!")}me.linkTo(i),T.dispatch("NOTICE_LINK_CLICK",i)}}}},i.update=function(){var t=this.dataSource;if(t){1==_s.checkGoldBg(t.bc_id)?this.imgBg.skin="modules/chat/onlineNoticeBg.png":this.imgBg.skin="com/ui/innerBg2.png";try{this.txtNoticeInfo.innerHTML=this.getNoticeInfoContext()}catch(t){console.log("模板："+this.dataSource.bc_id+"替换后格式有问题，请查看")}this.imgIcon.source=ut.getRes(bs.getMsgTypeIconUrl(t.msg_type)),this.imgBg.height=this.txtNoticeInfo.y+this.txtNoticeInfo.contextHeight+20,this.imgBg.height<100&&(this.imgBg.height=100)}},i.getNoticeInfoContext=function(){var t=this.dataSource,e=0;return e=100001==t.bc_id?1e4:t.bc_id,ys.getMsg(e,t.strings,t.nums)},I(0,i,"height",function(){return this.imgBg.y+this.imgBg.height},t.prototype._$set_height),e}(yc),fP=function(t){function e(){this.curItemY=0,e.__super.call(this),this.list.vScrollBar.autoHide=!0,this.list.on("change",this,this.onListChange)}w(e,"modules.chat.view.ChatNoticeView",vc);var i=e.prototype;return i.onListChange=function(t){if(null!=t)for(var e,i=0,s=0;s<this.list.numChildren;s++)i=(e=this.list.getChildAt(0)).y+e.height,e.y>t.y+t.height||i<t.y?e.visible=!1:e.visible=!0},i.update=function(){this.clearListInfo(),this.updateList()},i.clearListInfo=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);this.curItemY=10,this.list.visible=!1},i.updateList=function(){var t,e,i=ws.getMsgsByChannel(ws.curChannel);for(var s in this.list.removeChildren(),i)e=i[s],10<this.list.numChildren?(t=this.list.getChildAt(0)).dataSource=null:t=new mP,t.y=this.curItemY,t.dataSource=e,t.update(),this.curItemY+=t.height+10,Bt.isXYX9992()||this.list.addChild(t);this.list.refresh(),_t.setTimeout(this,this.timeoutUpdateScrollBar,[],100)},i.updatePos=function(){for(var t,e=this.curItemY=0;e<this.list.numChildren;e++)(t=this.list.getChildAt(e)).y=this.curItemY,this.curItemY+=t.height+10},i.timeoutUpdateScrollBar=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.addOneRecord=function(t){var e;10<this.list.numChildren?(e=this.list.getChildAt(0)).dataSource=null:e=new mP,e.dataSource=t,e.update(),e.y=this.curItemY,Bt.isXYX9992()||this.list.addChild(e),this.curItemY+=e.height,this.updatePos()},e}(),_P=function(t){function e(){this.worldView=null,this.familyView=null,this.noticeView=null,this.serviceView=null,this.privateView=null,this.curView,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.tab.itemClickFun=new Q(this,this.onItemClick),this.on("display",this,this.onDisplay)}w(e,"modules.chat.view.ChatPanel",Ic);var i=e.prototype;return i.onDisplay=function(){var t=[];t=ua.isCross()?Is.CHAT_TAB_ITEM_LABELS_CROSS:Is.CHAT_TAB_ITEM_LABELS;var e="";for(var i in t)e+=t[i]+",";e=e.substring(0,e.length-1),this.tab.labels=e;var s=this.tab.items[4];Bt.isQQyxdt()?s.visible=!0:(s.visible=!1,1==ya.getFunOpen(100)&&(s.visible=!0));ua.isCross()?Nt.unRegister(this.tab.items[2]):Nt.register("RP_CHAT_PRIVATE_NEWS",this.tab.items[2])},i.onItemClick=function(t){if(ua.isCross())switch(t){case 0:case 1:this.tab.selectedIndex=t;break;case 2:pe.myLevel<Ln.FAMILY_LEVEL?Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):0==pe.user.attr.family_id?Jt.addTip("请先加入仙盟"):this.tab.selectedIndex=t;break;case 3:case 4:this.tab.selectedIndex=t}else switch(t){case 0:this.tab.selectedIndex=t;break;case 1:pe.myLevel<Ln.FAMILY_LEVEL?Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):0==pe.user.attr.family_id?Jt.addTip("请先加入仙盟"):this.tab.selectedIndex=t;break;case 2:pe.myLevel<40?Jt.addTip("40级开启好友功能"):this.tab.selectedIndex=t;break;case 3:case 4:this.tab.selectedIndex=t}},i.onTabChange=function(t){if(this.spView.removeChild(this.curView),ua.isCross())switch(t){case 0:pt.send(18,2,"聊天-世界频道"),ws.curChannel=4e4,this.worldView=this.worldView||new bP,this.worldView.hideEmoji(),this.curView=this.worldView;break;case 1:ws.curChannel=1e4,this.worldView=this.worldView||new bP,this.worldView.hideEmoji(),this.curView=this.worldView;break;case 2:pt.send(18,3,"聊天-仙盟频道"),ws.curChannel=2e4,this.familyView=this.familyView||new cP,this.familyView.hideEmoji(),this.curView=this.familyView;break;case 3:pt.send(18,4,"聊天-公告频道"),ws.curChannel=5e4,this.noticeView=this.noticeView||new fP,this.curView=this.noticeView;break;case 4:if(Bt.isEyou())return void Bt.openCustomerService();if(Bt.isQQyxdt())return void S.window.open("http://wpa.qq.com/msgrd?v=3&uin=1360655400&site=qq&menu=yes%22%3E");pt.send(18,11,"聊天-GM反馈"),this.serviceView=this.serviceView||new vP,this.curView=this.serviceView}else switch(t){case 0:pt.send(18,2,"聊天-世界频道"),ws.curChannel=1e4,this.worldView=this.worldView||new bP,this.worldView.hideEmoji(),this.curView=this.worldView;break;case 1:pt.send(18,3,"聊天-仙盟频道"),ws.curChannel=2e4,this.familyView=this.familyView||new cP,this.familyView.hideEmoji(),this.curView=this.familyView;break;case 2:this.privateView=this.privateView||new yP,this.curView=this.privateView,Wl.ins().toInfo(1,1),Wl.ins().toInfo(1,2);break;case 3:pt.send(18,4,"聊天-公告频道"),ua.isCross()?ws.curChannel=5e4:ws.curChannel=3e4,this.noticeView=this.noticeView||new fP,this.curView=this.noticeView;break;case 4:if(Bt.isEyou())return void Bt.openCustomerService();if(Bt.isQQyxdt())return void S.window.open("http://wpa.qq.com/msgrd?v=3&uin=1360655400&site=qq&menu=yes%22%3E");pt.send(18,11,"聊天-GM反馈"),this.serviceView=this.serviceView||new vP,this.curView=this.serviceView}this.spView.addChild(this.curView),this.curView.update()},i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;default:this.privateView&&this.curView==this.privateView&&!this.privateView.contains(t.target)&&this.privateView.hideActionBtn()}},i.update=function(){0==ws.curChannel?this.tab.selectedIndex=0:this.curView.update()},i.onMessage=function(t,e){var i=!1;null!=t.role_info&&(i=ws.isInBlack(t.role_info.role_id)),!i&&this.curView&&(ua.isCross()?(0==this.tab.selectedIndex&&(4e4==e||5e4==e)&&this.curView==this.worldView&&this.curView instanceof modules.chat.view.ChatWorldView&&this.curView.onMessage(t),1==this.tab.selectedIndex&&1e4==e&&this.curView==this.worldView&&this.curView instanceof modules.chat.view.ChatWorldView&&this.curView.onMessage(t),5e4==e&&this.curView instanceof modules.chat.view.ChatNoticeView&&this.curView.addOneRecord(t)):(1e4==e&&this.curView instanceof modules.chat.view.ChatWorldView&&this.curView.onMessage(t),3e4==e&&this.curView instanceof modules.chat.view.ChatNoticeView&&this.curView.addOneRecord(t)),2e4==e&&this.curView instanceof modules.chat.view.ChatFamilyView&&this.curView.onMessage(t))},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),ua.isCross()?ws.curChannel=4e4:ws.curChannel=1e4,this.tab.selectedIndex=0,this.curView instanceof modules.chat.view.ChatWorldView?this.worldView.hideEmoji():this.curView instanceof modules.chat.view.ChatFamilyView&&this.familyView.hideEmoji()},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),or.ins().navbarVisible=!0},e}(),gP=function(t){function e(){this.iconItems=null,this.iconPool=null,this.msgItems=null,this.msgPool=null,this.mousePoint=null,this.clip=null,this.stateShow=!0,this.curItemY=2,this.sr=null,this.speed=1.5,this.waitMsgs=null,this.LABA_DUR=15e3,this.labaStartTime=0,this.needScorll=!1,e.__super.call(this),this.mousePoint=new Tt,this.imgArrow.on("click",this,this.onClick),this.imgOperate.on("click",this,this.onClick),this.list.vScrollBarSkin="",this.list.vScrollBar.autoHide=!0,this.list.content.scrollRect=new Dt(0,0,464,133),this.list.on("mousedown",this,this.onListMouseDown),this.iconItems=[],this.iconPool=[],this.msgItems=[],this.msgPool=[],this.labaTxt.style.lineHeight=35,this.labaTxt.style.fontSize=24,this.labaTxt.style.wordWrap=!1,this.labaTxt.color="#efdcaf",this.clip=b.getOne(),this.clip.scaleX=2.98,this.clip.scaleY=3,this.clip.x=-7,this.clip.y=-6,this.labaTxt.visible=!1,this.laba.visible=!1,this.labaBg.visible=!1,this.indexTxt.visible=!1,this.labaBg.addChild(this.clip),this.labaBg.on("click",this,this.onClickLaba)}w(e,"modules.chat.view.ChatPreviewView",wc);var i=e.prototype;return i.onClickLaba=function(){Za.ins().openLabaSendView()},i.onListMouseDown=function(t){this.mousePoint.x=t.stageX,this.mousePoint.y=t.stageY,h.stage.on("mouseup",this,this.onListMouseUp)},i.getHtmlItem=function(t){var e;return 10==this.list.numChildren?(e=this.list.getChildAt(0)).removeSelf():e=new K,e},i.onClick=function(t){switch(t.target){case this.imgArrow:case this.imgOperate:this.stateShow?this.hideChat():(this.showChat(),this.showOrHideRedPoint(!1))}},i.onListMouseUp=function(t){if(h.stage.off("mouseup",this,this.onListMouseUp),t.stageX==this.mousePoint.x&&t.stageY==this.mousePoint.y){if(t.target&&t.target.parent instanceof laya.html.dom.HTMLElement){var e=t.target.parent;if(e&&e.href&&0<e.href.split("#").length)return void this.onLink(e.href)}pt.send(18,1,"聊天入口"),T.dispatch("CHAT_OPEN_PANEL")}},i.hideChat=function(){this.stateShow=this.spInfo.visible=this.imgBg.visible=!1,this.imgOperate.source=ut.getRes("com/ui/imgEnter2.png"),this.imgOperate.y=71,this.imgArrow.rotation=0},i.showChat=function(){this.stateShow=this.spInfo.visible=this.imgBg.visible=!0,this.imgOperate.source=ut.getRes("com/ui/imgEnter1.png"),this.imgOperate.y=51,this.imgArrow.rotation=180},i.showOrHideRedPoint=function(t){0==this.stateShow&&1==t?this.imgRedPoint.visible=!0:this.imgRedPoint.visible=!1},i.update=function(){this.reset();var t,e=ws.getPreviewMsgs();for(var i in e)t=e[i],this.addLine(t);this.updatePos(),this.list.refresh(),this.list.visible=!1,_t.setTimeout(this,this.scrollToBottom,null,200)},i.reset=function(){var t,e;for(var i in this.iconItems&&10<this.iconItems.length&&(this.iconItems.length=10),this.iconItems)(t=this.iconItems[i]).skin=null,t.removeSelf(),this.iconPool.push(t);for(var s in this.iconItems.length=0,this.msgItems&&10<this.msgItems.length&&(this.msgItems.length=10),this.msgItems)(e=this.msgItems[s]).innerHTML="",e.removeSelf(),this.msgPool.push(e);this.msgItems.length=0},i.addLine=function(t){if(t&&(!Bt.isXYX9992()||3!=t.msg_type)){var e,i;10<=this.iconItems.length?((e=this.iconItems.shift()).skin=null,e.visible=!0,e.removeSelf()):e=0<this.iconPool.length?this.iconPool.pop():new et,e.size(43,20),10<=this.msgItems.length?((i=this.msgItems.shift()).visible=!0,i.removeSelf(),this.curItemY-=i.contextHeight+2):0<this.msgPool.length?(i=this.msgPool.pop()).x=45:(i=new K).x=45,i.style.fontSize=24,i.color="#efdcaf",i.style.lineHeight=30,i.width=410;var s="";switch(t.msg_type){case 1:case 8:e.skin="com/ui/preMsgType1.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left";break;case 2:e.skin="com/ui/preMsgType2.png",i.style.align="left";break;case 3:e.skin="com/ui/preMsgType3.png",i.style.align="left";break;case 4:e.skin="com/ui/preMsgType4.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f"));var n=jn.getFriendByRoleId(t.role_info.role_id);n||(n=qn.getFriendByRoleId(t.role_info.role_id)),n&&(s+=Z.span(" "+n.role_name+"：","#1aade4")),i.style.align="left";break;case 5:case 9:e.skin="com/ui/preMsgType5.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left";break;case 6:e.skin="com/ui/preMsgType1.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="center"}var o=0;o=100001==t.bc_id?1e4:t.bc_id;var a,l=ys.getMsg(o,t.strings,t.nums);a=1==t.msg_type||4==t.msg_type||5==t.msg_type||8==t.msg_type||9==t.msg_type?bs.getChatContextHtml(l,!1,"#efdcaf"):l;var r="";1!=t.msg_type&&5!=t.msg_type&&4!=t.msg_type&&8!=t.msg_type&&9!=t.msg_type||(r=1==t.role_info.sex?Z.span("♂","#4AFCFA",24,!0):Z.span("♀","#FFABD3",24,!0));var h="";t.role_info&&t.role_info.is_guide&&(h=Z.image("com/ui/guideMan.png",55,20)),bs.filterHtmlSpcStr(i,h+r+s+a),i.height=i.contextHeight,this.msgItems.push(i),this.iconItems.push(e)}},i.updatePos=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);var t,e;this.curItemY=2;for(var i=0;i<this.iconItems.length;i++)t=this.iconItems[i],this.list.addChild(t);for(var s=0;s<this.msgItems.length;s++)(e=this.msgItems[s]).y=this.curItemY,this.list.addChild(e),this.curItemY+=e.contextHeight+2;for(var n=0;n<this.iconItems.length;n++)t=this.iconItems[n],null!=this.msgItems[n]&&(t.y=this.msgItems[n].y+7)},i.onLink=function(t){if("string"==typeof t){pt.send(18,9,"聊天-预览窗口-点击聊天内容链接"),Za.ins().closeChatPanel();var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN;switch(e[0]){case"event:link":if(0<(i=parseInt(e[1]))){if(11423==i){var n=ao.getIconVO(115).openLv;if(pe.myLevel<n)return void Jt.addTip("角色等级不足"+n+"级!")}me.linkTo(i)}break;case"event:friendRequest":i=parseInt(e[1]),s=parseInt(e[2]);var o=e[3];me.linkTo(i,[s,o]);break;case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:petBattle":me.linkTo(11308);break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]));break;case"event:BargainFriendCut":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s)}}}},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.addOneRecord=function(t,e){var i=!1,s=!1;if(7==t.msg_type){if(!e)return;(i=ws.isInBlack(e.role_info.role_id))||this.addLaba(t,e)}else t.role_info&&(i=ws.isInBlack(t.role_info.role_id),s=ws.isInBlackRole(t.role_info.role_id)),i||s||(this.addLine(t),this.updatePos(),this.list.refresh(),this.scrollToBottom())},i.addLaba=function(t,e){this.waitMsgs=this.waitMsgs||[],this.sr=this.sr||new Dt(0,0,0,42),this.waitMsgs.push({msg:Z.span(t.role_info.role_name+"：","#1aade4")+t.strings[0],len:t.role_info.role_name.length+t.strings[0].length,index:e.show_type}),0==this.labaTxt.visible&&this.showNext()},i.onFrame=function(){this.needScorll&&(90<this.labaTxt.x?(this.labaTxt.x-=this.speed,this.sr.width+=this.speed):this.sr.x+=this.speed,450<this.sr.width&&(this.sr.width=450),this.sr.x>this.labaTxt.contextWidth&&(this.labaTxt.x=528,this.sr.x=0,this.sr.width=0),this.labaTxt.scrollRect=this.sr);var t=S.now();(t-this.labaStartTime>=this.LABA_DUR||6e3<t-this.labaStartTime&&0<this.waitMsgs.length)&&this.showNext()},i.showNext=function(){if(0==this.waitMsgs.length)return this.labaTxt.visible=!1,this.laba.visible=!1,this.labaBg.visible=!1,this.indexTxt.visible=!1,void _t.removeFromFrame(this,this.onFrame);this.labaTxt.visible=!0,this.laba.visible=!0,this.labaBg.visible=!0,this.indexTxt.visible=!0;var t=this.waitMsgs.shift();this.needScorll=19<t.len,this.needScorll?this.labaTxt.innerHTML=t.msg+"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+t.msg:this.labaTxt.innerHTML=t.msg,this.labaTxt.width=this.labaTxt.contextWidth+10,this.indexTxt.text=t.index.toString(),1==t.index||2==t.index?this.laba.skin="com/ui/laba1.png":3==t.index||4==t.index?this.laba.skin="com/ui/laba2.png":this.laba.skin="com/ui/laba3.png",this.labaTxt.x=90,this.sr.x=0,this.sr.width=438,this.labaStartTime=S.now(),this.clip.loadAndPlay("moduleEffect/chuanyin","default",0,!0),_t.addToFrame(this,this.onFrame)},I(0,i,"uiClass",function(){return"ChatPreview"}),e}(),yP=function(t){function e(){this.operateType=0,this.curItemY=0,e.__super.call(this),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick),this.txtFriends.on("click",this,this.onLink)}w(e,"modules.chat.view.ChatPrivateView",bc);var i=e.prototype;return i.onLink=function(t){me.linkTo(11501)},i.onClick=function(t){switch(t.target){case this.btnOperate:1==this.operateType?me.linkTo(11502):2==this.operateType&&me.linkTo(11501);break;default:"spBlack"!=t.target.name&&this.hideActionBtn()}},i.hideActionBtn=function(){for(var t=0;t<this.list.numChildren;t++)this.list.getChildAt(t).showOrHideActionBtn(!1)},i.update=function(){this.clearListInfo();var t=ws.getPrivateChatFriends();t&&0<t.length?(this.spTop.visible=this.list.visible=!0,this.spTip.visible=!1,this.list.dataSource=t,this.updateList(t)):(this.spTop.visible=this.list.visible=!1,this.spTip.visible=!0,this.btnOperate.visible=!0,0<jn.friends.length?(this.txtTip.text="选择好友进行私聊",this.btnOperate.label="前往",this.operateType=2):(ua.isCross()?(this.btnOperate.visible=!1,this.txtTip.text="暂时没有任何跨服好友私聊"):this.txtTip.text="添加好友进行私聊",this.btnOperate.label="添加好友",this.operateType=1))},i.updateList=function(t){for(var e,i=0;i<t.length;i++)(e=$L.getOne()).y=this.curItemY,e.dataSource=t[i],e.update(),this.curItemY+=e.height+10,this.list.addChild(e);this.list.refresh()},i.clearListInfo=function(){for(;0<this.list.numChildren;){var t=this.list.getChildAt(0);null!=t&&t instanceof modules.friend.base.view.FriendListItem&&t.remove()}this.curItemY=10,this.list.visible=!1},e}(),vP=function(t){function e(){e.__super.call(this),this.btn.on("click",this,this.onClick),this.txtInput.vScrollBarSkin="com/ui/vscroll.png",this.txtInput.vScrollBar.autoHide=!0,this.txtInput.vScrollBar.mouseWheelEnable=!0}w(e,"modules.chat.view.ChatServiceView",Sc);var i=e.prototype;return i.onClick=function(t){if("kanshuju"==this.txtInput.text)return this.txtInput.text="",void T.dispatch("OPEN_GM_PANEL");"kanfps"!=this.txtInput.text?"woyaoshuaxin"!=this.txtInput.text?""!=this.txtInput.text&&Za.ins().toGmTalk(this.txtInput.text):S.window.location.reload():qt.show()},i.update=function(){this.txtInput.text=""},e}(),IP=function(t){function e(){this.index=0,this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24,this.txtMsg.style.valign="top",this.txtMsg.on("link",this,this.onLink),this.on("click",this,this.onClick)}w(e,"modules.chat.view.ChatWorldLeftItem",t);var i=e.prototype;return i.onClick=function(t){t.target},i.onLink=function(t){if("string"==typeof t){pt.send(18,10,"聊天-预览窗口-点击聊天内容链接");var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN;switch(e[0]){case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]))}}}},i.update=function(){var t=this.dataSource;if(t){if(0<t.role_info.avatar_frame){var e=la.getSelfFrameVOById(t.role_info.avatar_frame);e&&1==e.urlType?(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(81,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+t.role_info.avatar_frame+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();this.imgHead.skin="com/head/big"+t.role_info.category+t.role_info.sex+".png",this.imgSex.skin=1==t.role_info.sex?"com/ui/man.png":"com/ui/woman.png";var i=176;""!=t.role_info.family_name?(this.txtFamily.text="["+t.role_info.family_name+"]",i+=this.txtFamily.textWidth+2):this.txtFamily.text=t.role_info.family_name,this.txtTitle.text=t.role_info.role_name,this.txtTitle.x=i,i+=this.txtTitle.textWidth+2,t.role_info&&t.role_info.is_guide?(this.imgGuide.skin="com/ui/guideMan.png",this.imgGuide.x=i,i+=57):this.imgGuide.skin=null,0<t.role_info.vip_level?(this.imgVIP.skin="modules/chat/VIP"+t.role_info.vip_level+".png",this.imgVIP.x=i,Ia.isSVIP(t.role_info.vip_level)?i+=74:i+=65):this.imgVIP.skin=null,1==t.role_info.has_month_card?(this.imgMonth.skin="com/ui/month.png",this.imgMonth.x=i,i+=30):this.imgMonth.skin=null,1==t.role_info.has_noble?(this.imgNoble.skin="com/ui/noble.png",this.imgNoble.x=i,i+=30):this.imgNoble.skin=null,fo.coupleInfoP&&t.role_info.role_id==fo.coupleInfoP.role_id?(this.imgMate.skin="modules/friend/mate.png",this.imgMate.x=i):this.imgMate.skin=null;var s=ys.getMsg(t.bc_id,t.strings,t.nums);switch(t.msg_type){case 1:this.txtMsg.style.align="left";break;case 6:this.txtMsg.style.align="center"}if(7==t.msg_type){var n=t.show_type;s=1==n||2==n?Z.image("com/ui/laba1.png",24,24)+s:3==n||4==n?Z.image("com/ui/laba2.png",24,24)+s:Z.image("com/ui/laba3.png",24,24)+s}var o="#815841";switch(t.msg_type){case 1:case 8:if(this.textBg.skin="modules/bubble/bubbleL"+t.role_info.bg_color+".png",0<t.role_info.bg_color){this.textBg.sizeGrid="21,46,18,22";var a=la.getSelfBubbleVOById(t.role_info.bg_color);o=a?a.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";break;case 6:this.textBg.skin="modules/bubble/bubbleL0.png";break;case 7:this.textBg.skin="modules/chat/labaBgL.png"}6==t.msg_type||7==t.msg_type?(this.txtMsg.style.color="#815841","<br/>"==s.substr(0,5)&&(s=s.substr(5)),bs.filterHtmlSpcStr(this.txtMsg,s),this.txtMsg.width=this.txtMsg.contextWidth):bs.filterHtmlSpcStr(this.txtMsg,bs.getChatContextHtml(s,!1,o)),this.textBg.width=20+this.txtMsg.contextWidth+20,this.textBg.height=10+this.txtMsg.contextHeight+10}},i.getCommonInfoName=function(){var t="",e=this.dataSource;return e&&(t+=1==e.role_info.sex?Z.image("com/ui/man.png",20,27):Z.image("com/ui/woman.png",20,27),""!=e.role_info.family_name&&(t+=Z.span("["+e.role_info.family_name+"]","#ffd075")),e.role_info.role_id,pe.roleID,t+=Z.span(e.role_info.role_name,"#5d3924"),0<e.role_info.vip_level&&(t+=Z.image("modules/chat/VIP"+e.role_info.vip_level+".png",63,23))),t},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(xc),wP=function(t){function e(){this.txtSpace=560,this.index=0,this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24,this.txtMsg.style.valign="top",this.txtMsg.on("link",this,this.onLink),this.on("click",this,this.onClick)}w(e,"modules.chat.view.ChatWorldRightItem",t);var i=e.prototype;return i.onClick=function(t){t.target},i.onLink=function(t){if("string"==typeof t){pt.send(18,10,"聊天-预览窗口-点击聊天内容链接");var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN;switch(e[0]){case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]))}}}},i.update=function(){var t=this.dataSource,e=pe.getPalByIndex(0);if(this.imgHead.skin="com/head/big"+e.ext.category+e.ext.sex+".png",null!=t.role_info&&0<t.role_info.avatar_frame){var i=la.getSelfFrameVOById(t.role_info.avatar_frame);i&&1==i.urlType?(this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(662,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+t.role_info.avatar_frame+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();var s=576;1==t.role_info.has_noble?(this.imgNoble.skin="com/ui/noble.png",s-=28,this.imgNoble.x=s):this.imgNoble.skin=null,1==t.role_info.has_month_card?(this.imgMonth.skin="com/ui/month.png",s-=30,this.imgMonth.x=s):this.imgMonth.skin=null,0<t.role_info.vip_level?(this.imgVIP.skin="modules/chat/VIP"+t.role_info.vip_level+".png",Ia.isSVIP(t.role_info.vip_level)?s-=74:s-=65,this.imgVIP.x=s):this.imgVIP.skin=null,t.role_info&&t.role_info.is_guide?(this.imgGuide.skin="com/ui/guideMan.png",s-=57,this.imgGuide.x=s):this.imgGuide.skin=null,this.txtTitle.text=t.role_info.role_name,s-=this.txtTitle.textWidth+2,this.txtTitle.x=s,""!=t.role_info.family_name?this.txtFamily.text="["+t.role_info.family_name+"]":this.txtFamily.text=t.role_info.family_name,s-=this.txtFamily.textWidth+2,this.txtFamily.x=s;var n=ys.getMsg(t.bc_id,t.strings,t.nums);switch(t.msg_type){case 1:this.txtMsg.style.align="left";break;case 6:this.txtMsg.style.align="center"}if(7==t.msg_type){var o=t.show_type;n=1==o||2==o?Z.image("com/ui/laba1.png",24,24)+n:3==o||4==o?Z.image("com/ui/laba2.png",24,24)+n:Z.image("com/ui/laba3.png",24,24)+n}var a="#815841";switch(t.msg_type){case 1:case 8:if(this.textBg.skin="modules/bubble/bubbleR"+t.role_info.bg_color+".png",0<t.role_info.bg_color){this.textBg.sizeGrid="21,22,18,46";var l=la.getSelfBubbleVOById(t.role_info.bg_color);a=l?l.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";break;case 6:this.textBg.skin="modules/bubble/bubbleR0.png";break;case 7:this.textBg.skin="modules/chat/labaBgR.png"}6==t.msg_type||7==t.msg_type?(this.txtMsg.style.color="#815841","<br/>"==n.substr(0,5)&&(n=n.substr(5)),this.txtMsg.innerHTML=n,this.txtMsg.width=this.txtMsg.contextWidth,this.txtMsg.innerHTML=n):this.txtMsg.innerHTML=bs.getChatContextHtml(n,!1,a),this.txtMsg.x=this.txtSpace-this.txtMsg.contextWidth,this.textBg.x=this.txtMsg.x-20,this.textBg.width=20+this.txtMsg.contextWidth+20,this.textBg.height=10+this.txtMsg.contextHeight+10},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(Cc),bP=function(t){function e(){this.isInitFaceList=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=100,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.allItem=null,this.leftPool=null,this.rightPool=null,this.noticePool=null,this.isCd=!1,this._preSendTime=NaN,this._sendTimeArr=[],this._toCdTime=-1,this.syncCount=0,this.curItemY=0,this.curItemData=null,this.sendHdl=new Q(this,function(){this.isCd=!1}),e.__super.call(this),this.allItem=[],this.leftPool=[],this.rightPool=[],this.noticePool=[],this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.on("enter",this,this.sendInput),this.inputMsg.maxChars=40,this.on("click",this,this.onClick),this.list.vScrollBar.on("change",this,this.onScrollChange),this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown)}w(e,"modules.chat.view.ChatWorldView",Pc);var i=e.prototype;return i.sendInput=function(){if(this.hideEmoji(),ws.checkSendWordLimit(this.inputMsg.text,1))if(pt.send(18,7,"聊天-世界频道-发送"),40<this.inputMsg.text.length)Jt.addTip("超过字数上限");else if(""!=this.inputMsg.text&&"点击输入文本..."!=this.inputMsg.text){if(!this.isCd&&(this.isCd=!0,bs.sendCd(this.btnSend,this.sendHdl),this.checkTimesCD())){var t=this.inputMsg.text;t=bs.replaceSpcInputChar(t),Za.ins().toSendMsg(ws.curChannel,t,1)}}else Jt.addTip("不能发送空白信息")},i.checkTimesCD=function(){var t=S.now();if(t<this._toCdTime){var e=(this._toCdTime-t)/1e3>>0,i=e/60>>0,s=e%60;return 0<i?Jt.addTip("您发言太快了，休息"+i+"分钟"+s+"秒"):Jt.addTip("您发言太快了，休息"+s+"秒"),!1}this._toCdTime=-1;return 4<=this._sendTimeArr.length?t-this._sendTimeArr[0]<=1e4?(this._toCdTime=t+12e4,this._sendTimeArr=[]):(this._sendTimeArr.shift(),this._sendTimeArr.push(t)):this._sendTimeArr.push(t),this._preSendTime=t,!0},i.onScrollChange=function(){this.list.vScrollBar.max-this.list.vScrollBar.value<=5?this.downBtn.visible=!1:this.downBtn.visible=!0},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.thisMouseDown=function(t){this.stage.on("mouseup",this,this.thisMouseUp),this.currClickX=t.stageX,this.currTimes=S.now()},i.thisMouseUp=function(t){(this.stage.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance)?0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1:S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1);this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.updateSpPage=function(){for(var t,e=0;e<this.spPage.numChildren;e++)t=this.spPage.getChildAt(e),e==this.currIndex?t.source=ut.getRes("com/ui/imgPage1.png"):t.source=ut.getRes("com/ui/imgPage2.png")},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,or.ins().navbarVisible=!1,this.list.bottom=474,this.light.bottom=474,this.inputMsg.bottom=404,this.imgFaceEnter.bottom=406,this.btnLaba.bottom=404,this.btnSend.bottom=405,this.downBtn.bottom=480,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom))},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,or.ins().navbarVisible=!0,this.list.bottom=334,this.light.bottom=334,this.inputMsg.bottom=264,this.imgFaceEnter.bottom=266,this.btnLaba.bottom=264,this.btnSend.bottom=265,this.downBtn.bottom=340,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom),this.inputMsg.repaint())},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),e.pos(36+95*s,30+90*n),i="modules/chat/face"+o+"_1.png",e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.onFocus=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onSelect=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.onClick=function(t){switch(t.target){case this.btnSend:this.sendInput();break;case this.btnLaba:Za.ins().openLabaSendView();break;case this.imgFaceEnter:this.onShowFaceView();break;case this.downBtn:this.scrollToBottom();break;case this.btnLook:pt.send(17,8,"好友-世界频道-查看"),T.dispatch("OPEN_OTHER_ROLE_PANLE",this.curItemData.role_info.role_id),this.spAction.visible=!1;break;case this.btnBlack:pt.send(17,3,"好友-世界频道-屏蔽"),Ul.getInstance().toBlack(this.curItemData.role_info.role_id),this.spAction.visible=!1;break;case this.btnFriend:"添加好友"==this.btnFriend.label?(pt.send(17,2,"好友-世界频道-添加好友"),Ul.getInstance().toRequest(this.curItemData.role_info.role_id,"")):"私聊"==this.btnFriend.label&&T.dispatch("FRIEND_OPEN_PRIVATE_PANEL",this.dataSource.role_info.role_id),this.spAction.visible=!1;break;case this.btnCompare:T.dispatch("OPEN_COMPARE_PANLE",this.curItemData.role_info.role_id),this.spAction.visible=!1;break;case this.btnFlower:var e=jn.getFriendByRoleId(this.curItemData.role_info.role_id);if(!e&&(e=qn.getFriendByRoleId(this.curItemData.role_info.role_id)))return void Jt.addTip("跨服好友无法赠送鲜花");e?(Hl.ins().openSendPanel(e),this.spAction.visible=!1):ua.isCross()?Jt.addTip("添加为好友，即可赠送鲜花（跨服好友除外）"):Jt.addTip("添加为好友，即可赠送鲜花");break;default:if(this.imgFace.contains(t.target)||this.hideEmoji(),!this.list.contains(t.target))for(var i,s=0;s<this.list.numChildren;s++)(i=this.list.getChildAt(s))&&i instanceof modules.chat.view.ChatWorldLeftItem&&(this.spAction.visible=!1)}},i.update=function(){this.updateList(),this.currIndex=0,this.updateSpPage(),ua.isCross()?this.btnLaba.visible=!1:this.btnLaba.visible=!0,37==G.agentId&&(this.btnLaba.visible=7<=Xs.curServerOpenDay)},i.getItem=function(t){return 3==t.msg_type||2==t.msg_type?0<this.noticePool.length?this.noticePool.pop():new mP:t.role_info.role_id!=pe.user.role_id?0<this.leftPool.length?this.leftPool.pop():new IP:0<this.rightPool.length?this.rightPool.pop():new wP},i.updateList=function(){for(;0<this.allItem.length;){var t=this.allItem.pop();t.y=0,t.removeSelf(),t.off("click",this,this.onClickItem),t instanceof modules.chat.view.ChatWorldLeftItem?this.leftPool.push(t):t instanceof modules.chat.view.ChatWorldRightItem?this.rightPool.push(t):t instanceof modules.chat.view.ChatNoticeItem&&this.noticePool.push(t)}for(var e,i=ws.getMsgsByChannel(ws.curChannel),s=0;s<i.length;s++)e=i[s],this.addOneRecord(e);this.updatePos(),this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom)},i.checkChange=function(){var t=ws.getMsgsByChannel(ws.curChannel);if(null==t||0==t.length)return!1;if(this.allItem.length!=t.length)return!0;for(var e=0;e<t.length;e++){if(this.allItem[e].dataSource!=t[e])return!0}return!1},i.updatePos=function(){var t;this.curItemY=15;for(var e=0;e<this.allItem.length;e++)(t=this.allItem[e]).y=this.curItemY,this.curItemY+=t.height+15},i.onClickItem=function(t){for(var e,i=t.currentTarget,s=0;s<this.list.numChildren;s++)(e=this.list.getChildAt(s))&&e instanceof modules.chat.view.ChatWorldLeftItem&&e.index!=i.index&&(this.spAction.visible=!1);"imgHead"==t.target.name?i&&i instanceof modules.chat.view.ChatWorldLeftItem&&(this.spAction.visible=!this.spAction.visible,this.spAction.y=this.list.y+(i.y-this.list.content.scrollRect.y),this.curItemData=i.dataSource):i&&(this.spAction.visible=!1)},i.onMessage=function(t){if(null!=t&&null!=t.role_info&&t.role_info.role_id==pe.roleID&&this.cleanInput(),!t.role_info||!ws.isInBlackRole(t.role_info.role_id)){if(40<=this.allItem.length){var e=this.allItem.shift();e.y=0,e.removeSelf(),e.off("click",this,this.onClickItem),e instanceof modules.chat.view.ChatWorldLeftItem?this.leftPool.push(e):e instanceof modules.chat.view.ChatWorldRightItem?this.rightPool.push(e):e instanceof modules.chat.view.ChatNoticeItem&&this.noticePool.push(e)}var i=this.list.vScrollBar.max;this.addOneRecord(t),this.updatePos(),this.list.refresh(),i-this.list.vScrollBar.value<=5&&this.scrollToBottom()}},i.addOneRecord=function(t){var e=this.getItem(t);e instanceof modules.chat.view.ChatNoticeItem?e.x=20:e.on("click",this,this.onClickItem),e.dataSource=t,e.update(),e instanceof modules.chat.view.ChatNoticeItem&&Bt.isXYX9992()||(this.list.addChild(e),this.allItem.push(e))},i.cleanInput=function(){this.inputMsg.text="",this.hideEmoji()},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0,this.list.vScrollBar.stopScroll()},I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),SP=function(t){function e(){this.iconItems=null,this.iconPool=null,this.msgItems=null,this.msgPool=null,this.stateShow=!0,this._templateType=0,this.mousePoint=null,this.syncCount=0,this.isInitFaceList=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=100,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.msgType=0,this.curItemY=2,e.__super.call(this),this.iconItems=[],this.iconPool=[],this.msgItems=[],this.msgPool=[],this.mousePoint=new Tt,this.list.vScrollBarSkin="",this.list.vScrollBar.autoHide=!0,this.list.content.scrollRect=new Dt(0,0,624,133),this.list.on("mousedown",this,this.onListMouseDown),this.tab.selectHandler=Q.create(this,this.onTabChange),this.tab.itemClickFun=new Q(this,this.onItemClick),this.imgOperate.on("click",this,this.onClick),this.imgArrow.on("click",this,this.onClick),this.imgFaceEnter.on("click",this,this.onClick),this.btnSend.on("click",this,this.onClick),this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.on("enter",this,this.sendInput),this.inputMsg.maxChars=40,this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown),ua.isCrossMain()?this.templateType=1:(ua.isCrossTowerBoss()||ua.isCrossTower())&&(this.templateType=2),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.chat.view.CrossChatPreview",Tc);var i=e.prototype;return i.onUndisplay=function(){this.onItemClick(0)},i.thisMouseDown=function(t){this.stage.on("mouseup",this,this.thisMouseUp),this.currClickX=t.stageX,this.currTimes=S.now()},i.thisMouseUp=function(t){(this.stage.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance)?0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1:S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1);this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.sendInput=function(){if(this.hideEmoji(),ws.checkSendWordLimit(this.inputMsg.text,this.msgType))if(pt.send(18,7,"聊天-世界频道-发送"),40<this.inputMsg.text.length)Jt.addTip("超过字数上限");else if(""!=this.inputMsg.text&&"点击输入文本..."!=this.inputMsg.text){var t=this.inputMsg.text;t=bs.replaceSpcInputChar(t),Za.ins().toSendMsg(ws.curChannel,t,this.msgType)}else Jt.addTip("不能发送空白信息")},i.onFocus=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,or.ins().navbarVisible=!1,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom),this.height=645)},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,or.ins().navbarVisible=!0,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom),this.inputMsg.repaint(),this.height=245)},i.onListMouseDown=function(t){this.mousePoint.x=t.stageX,this.mousePoint.y=t.stageY,h.stage.on("mouseup",this,this.onListMouseUp)},i.onListMouseUp=function(t){if(h.stage.off("mouseup",this,this.onListMouseUp),t.stageX==this.mousePoint.x&&t.stageY==this.mousePoint.y){if(t.target&&t.target.parent instanceof laya.html.dom.HTMLElement){var e=t.target.parent;if(e&&e.href&&0<e.href.split("#").length)return void this.onLink(e.href)}ua.isCrossMain()?T.dispatch("CHAT_OPEN_PANEL"):(ua.isCrossTower()||ua.isCrossTowerBoss())&&(this.templateType=3)}},i.onLink=function(t){if("string"==typeof t){pt.send(18,9,"聊天-预览窗口-点击聊天内容链接"),Za.ins().closeChatPanel();var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN;switch(e[0]){case"event:link":if(0<(i=parseInt(e[1]))){if(11423==i){var n=ao.getIconVO(115).openLv;if(pe.myLevel<n)return void Jt.addTip("角色等级不足"+n+"级!")}me.linkTo(i)}break;case"event:friendRequest":i=parseInt(e[1]),s=parseInt(e[2]);var o=e[3];me.linkTo(i,[s,o]);break;case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:playsCityCrystalFamilyHelp":me.linkTo(11704,Uo.makeVO(String(t)));break;case"event:petBattle":me.linkTo(11308);break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]))}}}},i.onItemClick=function(t){switch(t){case 0:case 1:case 2:this.tab.selectedIndex=t;break;case 3:pe.myLevel<Ln.FAMILY_LEVEL?Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):0==pe.user.attr.family_id?Jt.addTip("请先加入仙盟"):this.tab.selectedIndex=t;break;case 4:this.tab.selectedIndex=t}},i.onTabChange=function(t){switch(ws.curCrossPreviewTabIndex=t){case 0:ua.isCrossMain()?this.spInput.visible=!1:this.spInput.visible=!0,ws.curChannel=4e4,this.msgType=1;break;case 1:this.spInput.visible=!0,ws.curChannel=4e4,this.msgType=1;break;case 2:this.spInput.visible=!0,ws.curChannel=1e4,this.msgType=1;break;case 3:this.spInput.visible=!0,ws.curChannel=2e4,this.msgType=5,this.imgRedPoint2.visible=!1;break;case 4:this.spInput.visible=!1,ws.curChannel=5e4,this.imgRedPoint3.visible=!1}this.updateByTabChange()},i.onClick=function(t){switch(t.target){case this.imgArrow:case this.imgOperate:this.stateShow?this.hideChat():(this.showChat(),this.showOrHideRedPoint(!1));break;case this.imgFaceEnter:this.onShowFaceView();break;case this.btnSend:this.sendInput()}},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),e.pos(36+95*s,30+90*n),i="modules/chat/face"+o+"_1.png",e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.onSelect=function(t){"点击输入文本..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.updateSpPage=function(){for(var t,e=0;e<this.spPage.numChildren;e++)t=this.spPage.getChildAt(e),e==this.currIndex?t.source=ut.getRes("com/ui/imgPage1.png"):t.source=ut.getRes("com/ui/imgPage2.png")},i.hideChat=function(){this.stateShow=this.list.visible=this.imgBg.visible=!1,ua.isCrossMain()?(this.imgOperate.source=ut.getRes("com/ui/imgEnter2.png"),this.imgArrow.pos(65,108)):(this.imgOperate.source=ut.getRes("modules/chat/imgEnterS2.png"),this.imgArrow.pos(55,78)),this.imgArrow.rotation=0,this.width=70},i.showChat=function(){this.stateShow=this.list.visible=this.imgBg.visible=!0,ua.isCrossMain()?(this.imgOperate.source=ut.getRes("com/ui/imgEnter1.png"),this.imgArrow.pos(65,108)):(this.imgOperate.source=ut.getRes("modules/chat/imgEnterS1.png"),this.imgArrow.pos(55,78)),this.imgArrow.rotation=180,this.width=750},i.showOrHideRedPoint=function(t){0==this.stateShow&&1==t?this.imgRedPoint.visible=!0:this.imgRedPoint.visible=!1},i.showOrHideTabRedPoint=function(t){2e4==t&&3!=this.tab.selectedIndex&&(this.imgRedPoint2.visible=!0),3e4==t&&4!=this.tab.selectedIndex&&(this.imgRedPoint3.visible=!0)},i.reset=function(){var t,e;for(var i in this.iconItems&&10<this.iconItems.length&&(this.iconItems.length=10),this.iconItems)(t=this.iconItems[i]).skin=null,t.removeSelf(),this.iconPool.push(t);for(var s in this.iconItems.length=0,this.msgItems&&10<this.msgItems.length&&(this.msgItems.length=10),this.msgItems)(e=this.msgItems[s]).innerHTML="",e.removeSelf(),this.msgPool.push(e);this.msgItems.length=0},i.updatePos=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);var t,e;this.curItemY=2;for(var i=0;i<this.iconItems.length;i++)t=this.iconItems[i],this.list.addChild(t);for(var s=0;s<this.msgItems.length;s++)(e=this.msgItems[s]).y=this.curItemY,this.list.addChild(e),this.curItemY+=e.contextHeight+2;for(var n=0;n<this.iconItems.length;n++)t=this.iconItems[n],null!=this.msgItems[n]&&(t.y=this.msgItems[n].y+7)},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.show=function(t){void 0===t&&(t=1),this.visible=!0,this.templateType=t,this.reset(),this.update()},i.hide=function(){this.visible=!1},i.templateTypeChange=function(){switch(this._templateType){case 1:this.spTab.visible=this.spInput.visible=this.imgFace.visible=!1,this.imgOperate.visible=this.imgArrow.visible=!0,this.spChat.height=136,this.height=160,(yt.isWX||yt.isQQ)&&S.isIphoneX?this.bottom=187:this.bottom=157,h.stage.off("click",this,this.onClickStage);break;case 2:this.spTab.visible=this.spInput.visible=this.imgFace.visible=!1,this.imgOperate.visible=this.imgArrow.visible=!0,this.spChat.height=98,this.height=125,(yt.isWX||yt.isQQ)&&S.isIphoneX?this.bottom=50:this.bottom=10,h.stage.off("click",this,this.onClickStage);break;case 3:this.spTab.visible=!0,this.imgOperate.visible=this.imgArrow.visible=!1,this.spChat.height=yt.isWX||yt.isQQ?200:135,this.height=235,this.tab.selectedIndex<0&&(this.tab.selectedIndex=0),4!=this.tab.selectedIndex?this.spInput.visible=!0:this.spInput.visible=!1,(yt.isWX||yt.isQQ)&&S.isIphoneX?this.bottom=50:this.bottom=10,h.stage.on("click",this,this.onClickStage);break;default:h.stage.off("click",this,this.onClickStage)}},i.onClickStage=function(t){0==this.contains(t.target)&&(this.templateType=2)},i.addLine=function(t){if(t){var e,i;10<=this.iconItems.length?((e=this.iconItems.shift()).skin=null,e.visible=!0,e.removeSelf()):e=0<this.iconPool.length?this.iconPool.pop():new et,e.size(43,20),10<=this.msgItems.length?((i=this.msgItems.shift()).visible=!0,i.removeSelf(),this.curItemY-=i.contextHeight+2):0<this.msgPool.length?(i=this.msgPool.pop()).x=45:(i=new K).x=45,i.style.fontSize=24,i.color="#efdcaf",i.style.lineHeight=30,i.width=570;var s="";switch(t.msg_type){case 1:case 8:2==this.tab.selectedIndex?e.skin="com/ui/preMsgType1.png":e.skin="com/ui/preMsgTypeCross.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left";break;case 2:e.skin="com/ui/preMsgType2.png",i.style.align="left";break;case 3:e.skin="com/ui/preMsgType3.png",i.style.align="left";break;case 4:e.skin="com/ui/preMsgType4.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f"));var n=jn.getFriendByRoleId(t.role_info.role_id);n||(n=qn.getFriendByRoleId(t.role_info.role_id)),n&&(s+=Z.span(" "+n.role_name+"：","#1aade4")),i.style.align="left";break;case 5:case 9:e.skin="com/ui/preMsgType5.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left";break;case 6:e.skin="com/ui/preMsgType1.png",0<t.role_info.vip_level&&(s+=Z.span(Ia.getVIPStr(t.role_info.vip_level),"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="center"}var o=0;o=100001==t.bc_id?1e4:t.bc_id;var a,l=ys.getMsg(o,t.strings,t.nums);a=1==t.msg_type||4==t.msg_type||5==t.msg_type||8==t.msg_type||9==t.msg_type?bs.getChatContextHtml(l,!1,"#efdcaf"):l;var r="";1!=t.msg_type&&5!=t.msg_type&&4!=t.msg_type&&8!=t.msg_type&&9!=t.msg_type||(r=1==t.role_info.sex?Z.span("♂","#4AFCFA",24,!0):Z.span("♀","#FFABD3",24,!0));var h="";t.role_info&&t.role_info.is_guide&&(h=Z.image("com/ui/guideMan.png",55,20)),bs.filterHtmlSpcStr(i,h+r+s+a),i.height=i.contextHeight,this.msgItems.push(i),this.iconItems.push(e)}},i.update=function(){this.reset();var t,e=ws.getPreviewMsgs(!0);for(var i in e)t=e[i],this.addLine(t);this.updatePos(),this.list.refresh(),this.list.visible=!1,_t.setTimeout(this,this.scrollToBottom,null,200)},i.updateByTabChange=function(){switch(this.reset(),this._templateType){case 1:this.spChat.height=136;break;case 2:this.spChat.height=98;break;case 3:this.spChat.height=136}var t,e=[];switch(this.tab.selectedIndex){case 0:e=ws.getPreviewMsgs(!0);break;case 1:e=ws.getMsgsByChannel(4e4);break;case 2:e=ws.getMsgsByChannel(1e4);break;case 3:e=ws.getMsgsByChannel(2e4);break;case 4:this.spChat.height=200,e=ws.getMsgsByChannel(5e4)}for(var i in e)t=e[i],this.addLine(t);this.updatePos(),this.list.refresh(),this.list.visible=!1,_t.setTimeout(this,this.scrollToBottom,null,200)},i.addOneRecord=function(t){var e=!1;t.role_info&&(e=ws.isInBlack(t.role_info.role_id)),e||(this.addLine(t),this.updatePos(),this.list.refresh(),this.scrollToBottom()),null!=t&&null!=t.role_info&&t.role_info.role_id==pe.roleID&&this.cleanInput()},i.cleanInput=function(){this.inputMsg.text="",this.hideEmoji()},I(0,i,"templateType",null,function(t){this._templateType=t,this.templateTypeChange()}),I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),xP=function(t){function e(){this.btnGet=null,this.spGoods=null,this.spEffect=null,this.txtTitle=null,e.__super.call(this)}return w(e,"ui.modules.goodsShow.GoodsGetShowViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/goodsShow/GoodsGetShowView")},e}(),CP=function(t){function e(){this._data=null,e.__super.call(this)}return w(e,"modules.CheckForMOC.view.ForCheckItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(null!=t){this._data=t;var e=this._data.goodStr,i=this._data.rate;this.eqTxt.text=e,this.proTxt.text=i}}),e}(kc),PP=function(t){function e(){this.bg=null,this.btnClose=null,this.btnYes=null,this.spGoods=null,this.list=null,this.title=null,this.txt=null,e.__super.call(this)}return w(e,"ui.modules.goodsShow.GoodsShowViewUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/goodsShow/GoodsShowView")},e}(),TP=function(t){function s(t,e,i){this._viewType=0,this._infoType=0,this._actId=NaN,this.logItems=null,this.curItemY=2,s.__super.call(this),this._infoType=e,this._viewType=t,this._actId=i}w(s,"modules.CheckForMOC.view.ForCheckView",t);var e=s.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.probList.itemRender=CP,this.probList.vScrollBarSkin="",this.recordList.vScrollBarSkin=""},e.onDisplay=function(){T.register("UPDATE_RECORD_VIEW_SHOW",this,this.updateRecordList),2==this._viewType?this._actId<=0?Ja.ins().toRoleShowLog(this._infoType):this.updateRecordList():2==this._infoType?(this.tabs.labels="十抽必出,奇遇概率",this.tabs.selectHandler=new Q(this,this.selectTabs)):this.tabs.removeSelf(),this.update()},e.onUnDisplay=function(){T.remove("UPDATE_RECORD_VIEW_SHOW",this,this.updateRecordList)},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e.selectTabs=function(){var t=[];switch(this.tabs.selectedIndex){case 0:t=Cs.getProbabilyByTimesAndType(this._infoType,10),this.probList.dataSource=t;break;case 1:t=Cs.getProbabilyByTimesAndType(this._infoType,1),this.probList.dataSource=t}this.probList.refresh()},e.update=function(){if(1==this._viewType){if(this.probText.visible=!0,this.probList.visible=!0,this._actId<=0){var t=Cs.getProbabilyByTimesAndType(this._infoType,1);this.probList.dataSource=t}else{var e=Cs.getActBoxlogByActId(this._actId);if(e){var i,s=e.rate_list,n=[];for(var o in s){i=s[o];var a=ur.getItem(i.id).name,l=(i.val/1e4*100).toFixed(2)+"%";n.push({goodStr:a,rate:l})}this.probList.dataSource=n}}3==this._infoType?(this.proRewardText.text="法阵升级情况",this.titleText.text="刷新概率"):2==this._infoType?this.tabs.selectedIndex=0:4==this._infoType&&(this.titleText.text="寻宝概率"),this.recordBG.visible=!1,this.recordList.visible=!1}else this.probText.visible=!1,this.probList.visible=!1,this.titleText.text="个人抽奖记录",this.recordBG.visible=!0,this.recordList.visible=!0},e.updateRecordList=function(){var t;if(this.logItems=this.logItems||[],this._actId<=0)t=Cs.logArr;else{var e=Cs.getActBoxlogByActId(this._actId);if(!e)return;t=e.logs}for(;0<this.logItems.length;){var i=this.logItems.shift();i.visible=!0,i.removeSelf()}for(var s=0,n=0,o=t.length;n<o;n++){var a=t[n],l=a.ts,r=a.items;if(50<=s)break;for(var h=0;h<r.length;h++){var u=r[h],c=u.id,d=u.val;if(50<=s)break;var p=ur.getItem(c);this.createItemShow(p,d,l),s++}}this.updatePos()},e.createItemShow=function(t,e,i){var s=new K;s.style.fontSize=24,s.color="#efdcaf",s.style.lineHeight=30,s.width=590;var n=U.getColorLight(t.color),o=t.name,a=x.getTotalTime(i),l=a[0],r=a[1]+1,h=a[2],u=a[3],c=a[4],d=a[5]<10?"0"+a[5]:a[5]+"",p=t.level,m="";m=100<p?(p-100)/10+"转"+(p-(p-100))+"级":p+"级";var f="";f=3==ur.getItemType(t.id)?"【"+o+" （"+m+" "+sn.getVOCAName(t.category)+"）】":10001==this._infoType||10002==this._infoType||4==this._infoType||10003==this._infoType||6==this._infoType?"【"+o+"】":"【"+o+" （"+m+"）】";var _=l+"-"+r+"-"+h+" "+u+":"+c+":"+d+" 获得 ";s.innerHTML=Z.span(_,"#5D3924",26)+Z.span(f,n,26)+Z.span("×"+e,"#5D3924",26),s.height=s.contextHeight,this.logItems.push(s)},e.updatePos=function(){for(var t=0;t<this.logItems.length;t++){var e=this.logItems[t];this.recordList.addChild(e),e.y=this.curItemY,this.curItemY+=e.height+2}},s}(Ac),kP=function(t){function e(){this.goodsPool=null,this.goods=null,this.curVO=null,this.curTypeID=0,e.__super.call(this),this.setWindowType(),this.htmlTime.style.align="center",this.htmlLink.innerHTML=Z.linkcolor("提升VIP","",!0,"96f254")+Z.span("增加次数","#f4f1b2"),this.htmlLink.on("link",this,this.onLink),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.boss.view.BossCallPanel",Ec);var i=e.prototype;return i.update=function(){if(this.curVO){var t=this.curVO.getAddTime(Ia.curLv);this.htmlTime.innerHTML=Z.span("已挑战：","#f4f1b2")+Z.span(Ts.getCallBossTime(this.curVO.mode)+"/"+(1+t),"#96f254")+Z.span("次","#f4f1b2")}},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose1:this.closeWindow();break;case this.btnEnter:if(this.curVO)if(this.curVO.isOpen()){var e=this.curVO.getAddTime(Ia.curLv);Ts.getCallBossTime(this.curVO.mode)<1+e?tl.ins().toCallBoss(this.curTypeID):Jt.addTip("次数不足")}else{var i=ur.getItem(this.curVO.goodsID);i&&Jt.addTip(this.curVO.openStr+"可开启"+i.name)}}},i.checkOpen=function(){this.openWindow(null,!0),tl.ins().toCallBossTime()},i.onLink=function(t){me.linkTo(10201)},i.getOneItem=function(){return this.goodsPool=this.goodsPool||[],0<this.goodsPool.length?this.goodsPool.shift():new Ah(91,95)},i.rePool=function(){if(this.goodsPool&&this.goods)for(;0<this.goods.length;){var t=this.goods.pop();t&&this.goodsPool.push(t.removeSelf())}},I(0,i,"goodsType",null,function(t){if(this.rePool(),this.curTypeID=t,this.curVO=Ts.getCallBossVO(this.curTypeID),this.curVO){this.txtName.text=this.curVO.titleName;for(var e=0;e<this.curVO.getRewards().length;e++){var i=this.getOneItem();i.dataSource=this.curVO.getRewards()[e],i.pos(60+110*e,600),this.goods=this.goods||[],this.goods.push(i),this.container.addChild(i)}}}),e}(),AP=function(t){function e(){this._vo=null,e.__super.call(this),this.chb.clickHandler=Q.create(this,this.onClick)}w(e,"modules.commonCopy.boss.view.BossNoticeItem",t);var i=e.prototype;return i.onClick=function(){if(this._vo){var t=new Object;t.className="p_kv",t.id=this._vo.id,t.val=this.chb.selected?1:2,Ts.noticeChange(t)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&t instanceof xml.BossVO&&(this._vo=t,this.txtName.text=this._vo.bossName,this.txtLv.text=this._vo.openStr,this._vo.isOpen()?(this.txtTip.visible=!1,this.chb.visible=!0):(this.txtTip.visible=!0,this.chb.visible=!1),this.chb.visible&&Ts.unNoticeBoss&&-1!=Ts.unNoticeBoss.indexOf(this._vo.id)&&(this.chb.selected=!1))}),e}(Rc),EP=function(t){function i(){var t;if(this.items=null,this.bossVOs=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.panel.vScrollBar.autoHide=!0,this.items=[],this.bossVOs=Ts.getBossCfgDatasByCopyType(1),this.bossVOs)for(var e=0;e<this.bossVOs.length;e++)(t=new AP).pos(0,80*e),this.panel.addChild(t),this.items.push(t);this.btnClose.on("click",this,this.closeWindow),this.btnBack.on("click",this,this.closeWindow)}w(i,"modules.commonCopy.boss.view.BossNoticePanel",Oc);var e=i.prototype;return e.update=function(){if(this.bossVOs)for(var t=0;t<this.items.length;t++)this.items[t].dataSource=this.bossVOs[t]},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),Ts.resetNoticeChangeDic()},e.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),tl.ins().toBossNoticeSet()},i}(),RP=function(t){function e(){this.worldView=null,this.roleView=null,this.regrowView=null,this.monsterView=null,this.curView=null,this.curViewType=0,e.__super.call(this),this.setWindowType(),(yt.isWX||yt.isQQ)&&(this.tab.visible=!G.isReviewVersion),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=Q.create(this,this.checkOpen),Nt.register("RP_BOSS_ROLE",this.tab.items[0]),Nt.register("RP_BOSS_WORLD",this.tab.items[1]),Nt.register("RP_REGROW_BOSS",this.tab.items[2]),Nt.register("RP_MONSTER_BOSS",this.tab.items[3]),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.commonCopy.boss.view.BossPanel",Lc);var i=e.prototype;return i.onDisplay=function(){pe.myRegrow<10?this.tab.labels="个人,世界,转生":this.tab.labels="个人,世界,转生,异兽"},i.checkOpen=function(t){2==t&&pe.myRegrow<=0?Jt.addTip("转生BOSS转生后开放"):(this.tab.selectedIndex=t,this.openWindow(null,!0))},i.onTabChange=function(t){this.chooseView(this.tab.selectedIndex)},i.updateWorldView=function(){this.worldView&&this.worldView.parent&&this.worldView.update()},i.chooseView=function(t){switch(this.spView.removeChildren(),(yt.isWX||yt.isQQ)&&G.isReviewVersion&&(t=0),this.curViewType=t,this.curViewType){case 0:this.roleView=this.roleView||new KP,this.curView=this.roleView,this.spView.addChild(this.roleView);break;case 1:this.worldView=this.worldView||new QP,this.curView=this.worldView,this.spView.addChild(this.worldView);break;case 2:this.regrowView=this.regrowView||new FP,this.curView=this.regrowView,this.spView.addChild(this.regrowView);break;case 3:xr.ins().toGetRank(5101),this.monsterView=this.monsterView||Aa.getIns(62e3,"MonsterCopyView"),this.curView=this.monsterView,this.spView.addChild(this.monsterView)}this.update()},i.showViewByIndex=function(t){void 0===t&&(t=0),this.checkOpen(t)},i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose2:this.closeWindow()}},i.update=function(){this.curView.update()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),OP=function(t){function e(){this.btnAttackTs=0,e.__super.call(this),this.chbHide.clickHandler=Q.create(this,this.onClickHide),this.chbAuto.clickHandler=Q.create(this,this.onClickAuto),this.on("click",this,this.onClick),this.on("click",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.commonCopy.boss.view.BossRegrowControlItem",Dc);var i=e.prototype;return i.onDisplay=function(){this.chbHide.selected=As.regrowBosHideRole,this.onClickHide(),ua.isRegrowBossMap()&&el.ins().toRoleCopyHide(this.chbHide.selected)},i.onUndisplay=function(){_t.removeFromSceond(this,this.loopAttackBtnTime)},i.onClickHide=function(){this.chbHide.selected?(Se.justHideRole=!0,As.regrowBosHideRole=!0):(Se.justHideRole=!1,As.regrowBosHideRole=!1),ua.isRegrowBossMap()&&el.ins().toRoleCopyHide(this.chbHide.selected)},i.onClickAuto=function(){if(0!=this.chbAuto.selected)if(this.chbAuto.selected=!1,pe.gold<10)Lo.showAlert();else{var t=new Ee;t.msg=Z.span("勾选立即复活后，")+Z.span("每次被boss击败","#F4F1B2")+Z.span("都将会")+Z.span("消耗10元宝","#fff959")+Z.span("立即复活，是否确定开启？"),t.showRight=!0,t.yesFun=this.chooseYes,t.yesCaller=e.ins(),EF.showVO(t)}},i.chooseYes=function(){var t;for(var e in this.chbAuto.selected=!0,pe.pals){t=pe.pals[e];var i=Se.getUnit(t.pal_id);if(i&&3!=i.status)return}el.ins().toRoleRelive(1)},i.onClick=function(t){switch(t.target){case this.imgRe:tl.ins().openRegrowRewardsPanel(Ts.curRegrowBossIndex);break;case this.btnAttack:tl.ins().toRegrowBossAttack()}},i.updateAttackBtn=function(t){this.btnAttackTs=t-ya.serverTime,0<this.btnAttackTs?(this.btnAttack.disabled=!0,this.btnAttack.label=this.btnAttackTs+"秒",_t.addToSecond(e.ins(),this.loopAttackBtnTime)):(this.btnAttack.disabled=!1,_t.removeFromSceond(e.ins(),this.loopAttackBtnTime))},i.loopAttackBtnTime=function(){0<this.btnAttackTs?(this.btnAttack.disabled=!0,this.btnAttack.label=this.btnAttackTs+"秒",this.btnAttackTs--):(this.btnAttack.disabled=!1,this.btnAttack.label="飞瀑怒潮",_t.removeFromSceond(e.ins(),this.loopAttackBtnTime))},e.ins=function(){return e._ins=e._ins||new e},e.isChooseRelife=function(){return!(!e.ins().parent||!e.ins().chbAuto.selected)},e.show=function(){se.has("modules/boss")?(e.ins().parent||lt.uiLayer.addChild(e.ins()),e.ins().onClickHide(),e.ins().btnAttack.disabled=!1,e.ins().btnAttack.label="飞瀑怒潮"):se.add("modules/boss",null,e.ins(),e.show)},e.remove=function(){e.ins().removeSelf(),e.reset()},e.reset=function(){e.ins().chbHide.selected=!0,e.ins().chbAuto.selected=!1,Se.hideAll=!1,Se.showRole()},e._ins=null,e}(),LP=function(t){function s(){var t;this.items=null,this._vo=null,s.__super.call(this),this.items=[];for(var e=30,i=0;i<3;i++)(t=Me.createGoodsImage(e,230,null,this,!1,!0,91)).on("click",this,this.onClick),e+=100,this.items.push(t);this.txtLink.color="#00ff00",this.txtLink.fontSize=22,this.txtLink.text="上次排名",this.txtLink.underline=!0,this.txtLink.on("click",this,this.onLink)}w(s,"modules.commonCopy.boss.view.BossRegrowItem",Nc);var e=s.prototype;return e.onLink=function(t){this._vo&&(tl.ins().openRegrowKillNotePanel(this._vo.id),tl.ins().toRegrowHistory(this._vo.id))},e.updateRewards=function(t){for(var e,i=0;i<this.items.length;i++)e=this.items[i],t&&t[i]?(e.data=ur.getItem(t[i]),e.visible=!0):e.visible=!1},e.onClick=function(t){var e=t.currentTarget;if(e&&e.data){e.data.tempNum=1;var i="";i=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,i)}},I(0,e,"select",null,function(t){this.imgSelect.visible=t}),I(0,e,"data",null,function(t){this._vo=t,this._vo&&(this.txtName.text=this._vo.bossName,this.bmpHead.skin=this._vo.headUrl,this.updateRewards(this._vo.getRewards()))}),s}(),DP=function(t){function e(){e.__super.call(this)}w(e,"modules.commonCopy.boss.view.BossRegrowKillNoteItem",t);var i=e.prototype;return I(0,i,"uiClass",function(){return"BossKillNoteItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t){var e=t[1];this.txtTime.text=t[0]+"",this.txtName.text=e.role_name,this.txtPower.text=W.getShortenPowerStr(e.hurt)+""}}),e}(Vc),NP=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.txt1.text="排名",this.list.itemRender=DP,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.btnClose.on("click",this,this.closeWindow),this.btnBack.on("click",this,this.closeWindow)}w(e,"modules.commonCopy.boss.view.BossRegrowKillNotePanel",Bc);var i=e.prototype;return i.update=function(t){this.list.dataSource=t},I(0,i,"uiClass",function(){return"BossKillNotePanel"}),e}(),VP=function(t){function e(){e.__super.call(this)}w(e,"modules.commonCopy.boss.view.BossRegrowRewardsItem",Mc);var i=e.prototype;return i.onClick=function(t){var e=t.currentTarget;if(e&&e.data){var i="";e.data.tempNum=1,i=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,i)}},i.getOneItem=function(){return 0<(e.goodsPool=e.goodsPool||[]).length?e.goodsPool.shift():Me.createGoodsImage(0,0,null,this,!1,!0,91)},i.rePool=function(){for(e.goodsPool=e.goodsPool||[];0<this.spGoods.numChildren;){var t=this.spGoods.getChildAt(0);t&&e.goodsPool.push(t.removeSelf())}},I(0,i,"data",null,function(t){if(this.rePool(),t){this.txtRank.text=t[0];for(var e=1;e<t.length;e++){var i=this.getOneItem();i.data=ur.getItem(t[e]),i.pos(120*(e-1),25),i.on("click",this,this.onClick),this.spGoods.addChild(i)}}}),e.goodsPool=null,e}(),BP=function(t){function i(){this.GOOD_POS=[[55,55],[243,55],[355,55],[535,55]],this.items=null,this.goods=null,i.__super.call(this),this.setWindowType(),this.goods=[];for(var t=0;t<this.GOOD_POS.length;t++){var e=Me.createGoodsImage(this.GOOD_POS[t][0],this.GOOD_POS[t][1],null,this,!1,!0,91);e.on("click",this,this.onGoodsClick),this.goods.push(e),this.spSpc.addChild(e)}this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick)}w(i,"modules.commonCopy.boss.view.BossRegrowRewardsPanel",Fc);var e=i.prototype;return e.update=function(){this.rePool();var t=Ts.getRegrowBossRewards(this.tab.selectedIndex);if(t){if(this.txtName.text=t.name,t.getRankRewards()){for(var e=0;e<t.getRankRewards().length;e++){var i=this.getOneItem();i.data=t.getRankRewards()[e],this.spRank.addChild(i)}rt.layoutVectical(this.spRank)}if(t.getSpcRewards())for(e=0;e<this.goods.length;e++)this.goods[e].data=ur.getItem(t.getSpcRewards()[e])}},e.onTabChange=function(t){this.update()},e.onGoodsClick=function(t){var e=t.currentTarget;if(e&&e.data){var i="";e.data.tempNum=1,i=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,i)}},e.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose2:this.closeWindow()}},e.getOneItem=function(){return this.items=this.items||[],0<this.items.length?this.items.shift():new VP},e.rePool=function(){for(this.items=this.items||[];0<this.spRank.numChildren;){var t=this.spRank.getChildAt(0);t&&this.items.push(t.removeSelf())}},e.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,e,"select",null,function(t){this.tab.selectedIndex=t}),i}(),MP=function(t){function e(){this.bar=null,this.goods=null,this.time=10,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.goods=new Ah(91,91),this.goods.pos(20,100),this.addChild(this.goods),this.htmlMy.style.align="center",this.bar=new p(150,275,360,27,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1]),this.bar.text.stroke=1,this.bar.text.strokeColor="#000000",this.bar.setSpcVal(10,10),this.addChild(this.bar),this.btnClose.on("click",this,this.onClick),this.btnYes.on("click",this,this.onClick),this.btnNo.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.commonCopy.boss.view.BossRegrowRollPanel",Uc);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loop)},i.updateRoll=function(){Ts.rollToc&&(this.spRoll.visible=Ts.rollToc.roll<=0,this.spMy.visible=0<Ts.rollToc.roll,""!=Ts.rollToc.max_roll_name?this.html.innerHTML=Z.span(Ts.rollToc.max_roll_name,"#f4f1b2",26)+Z.span("投出了","#5d3924",26)+Z.span(Ts.rollToc.max_roll+"","#139604",26)+Z.span("点","#5d3924",26):this.html.innerHTML="",this.time=10-(ya.serverTime-Ts.rollToc.begin_ts),this.htmlMy.innerHTML=Z.span(Ts.rollToc.roll+"","#139604",36)+Z.span("点","#5d3924",36))},i.onClick=function(t){switch(t.currentTarget){case this.btnClose:this.closeWindow();break;case this.btnYes:tl.ins().toRegrowRoll(As.curBossID,0);break;case this.btnNo:this.closeWindow()}},i.loop=function(){this.time--,this.time<=0&&this.closeWindow(),this.bar.setSpcVal(this.time,10)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.reset();var i=Ts.getSuitRegrowBossRewards();i&&i.getSpcRewards()&&(this.goods.dataSource=parseInt(i.getSpcRewards()[3])),_t.addToSecond(this,this.loop)},i.reset=function(){this.spRoll.visible=!0,this.spMy.visible=!1,this.htmlMy.innerHTML="",this.html.innerHTML="",this.goods.dataSource=null},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),_t.removeFromSceond(this,this.loop),Ts.rollToc.roll<=0&&tl.ins().toRegrowRoll(As.curBossID,1),Ts.rollToc=null},e.TIME=10,e}(),FP=function(t){function s(){this.items=null,s.__super.call(this),this.items=[];var t=Ts.getBossCfgDatasByCopyType(2);if(t)for(var e=0;e<t.length;e++){var i=new LP;i.data=t[e],this.items.push(i),this.addChild(i),i.pos(22+(e%2==0?0:i.width+30),135+Math.floor(e/2)*(i.height+15))}this.txtLink.color="#00ff00",this.txtLink.fontSize=24,this.txtLink.text="查看奖励",this.txtLink.underline=!0,this.txtLink.on("click",this,this.onLink),this.btn.on("click",this,this.onClick),Nt.register("RP_REGROW_BOSS",this.btn,new Tt(19,-10))}w(s,"modules.commonCopy.boss.view.BossRegrowView",Gc);var e=s.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onClick=function(t){tl.ins().toRegrowBossEnter()},e.onLink=function(){tl.ins().openRegrowRewardsPanel(ks.getRegrowBossIndex())},e.update=function(){for(var t=ks.getRegrowBossIndex(),e=0;e<this.items.length;e++){this.items[e].select=e==t}},s}(),UP=function(t){function e(){e.__super.call(this)}w(e,"modules.commonCopy.boss.view.BossWorldKillNoteItem",t);var i=e.prototype;return I(0,i,"uiClass",function(){return"BossKillNoteItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t&&"p_boss_kill"==t.className){var e=t;this.txtTime.text=x.formatHMS(e.kill_time),this.txtName.text=e.role_name,this.txtPower.text=W.getShortenPowerStr(e.power)+""}}),e}(Vc),GP=function(t){function e(){this.time=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.boss.view.BossRelivePanel",Hc);var i=e.prototype;return i.onAdd=function(t){this.time=20,_t.addToSecond(this,this.loop)},i.updateDesc=function(t){t.length?this.msg.text=t:this.msg.text="你已经被世界BOSS击败，可选择自动复活或立即复活"},i.loop=function(){this.time--,0!=this.time?this.btnYes.label="自动复活（"+this.time+"）":this.closeWindow()},i.onRemove=function(t){_t.removeFromSceond(this,this.loop)},i.onClick=function(t){switch(t.target){case this.btnClose:ua.isWorldBossMap()&&tl.ins().openReliveSmallView(this.time+ya.serverTime),this.closeWindow();break;case this.btnNow:10<=pe.gold?(el.ins().toRoleRelive(1),this.closeWindow()):Lo.showAlert()}},e}(),HP=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.list.itemRender=UP,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.btnClose.on("click",this,this.closeWindow),this.btnBack.on("click",this,this.closeWindow)}w(e,"modules.commonCopy.boss.view.BossWorldKillNotePanel",Bc);var i=e.prototype;return i.update=function(t){this.list.dataSource=t},I(0,i,"uiClass",function(){return"BossKillNotePanel"}),e}(),WP=function(t){function e(){this.endTime=0,e.__super.call(this),this.btnNow.on("click",this,this.onClick),this.on("display",this,this.onAdd)}w(e,"modules.commonCopy.boss.view.BossReliveSmallView",Wc);var i=e.prototype;return i.onAdd=function(t){this.off("display",this,this.onAdd),this.on("undisplay",this,this.onRemove),_t.addToSecond(this,this.loop)},i.onRemove=function(t){this.on("display",this,this.onAdd),_t.removeFromSceond(this,this.loop)},i.loop=function(){var t=this.endTime-ya.serverTime;0<t?this.txtTime.text="复活时间倒计时："+t:this.close()},i.onClick=function(t){10<=pe.gold?(el.ins().toRoleRelive(1),this.close()):Lo.showAlert()},i.open=function(t){this.endTime=t,lt.uiLayer.addChild(this)},i.close=function(){this.removeSelf()},I(0,i,"uiClass",function(){return"BossReliveSmallPanel"}),e}(),qP=function(t){function n(){var t;this._vo=null,this.items=null,this.bar=null,this.p=null,n.__super.call(this),this.items=[];for(var e=143,i=0;i<3;i++)(t=new Ah(91,95)).y=50,t.x=e,e+=-70+t.width,this.addChild(t),this.items.push(t);this.btn.on("click",this,this.onClick),this.bar=new Gt("com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7]),this.bar.x=526,this.bar.y=132,this.bar.width=136,this.bar.posGrid=[1,0,1,0],this.addChild(this.bar);var s=new at;s.text="进行中",s.align="center",s.stroke=1,s.strokeColor="#000000",s.fontSize=15,s.color="#ffffff",s.width=136,s.height=10,this.bar.addChild(s)}w(n,"modules.commonCopy.boss.view.BossRoleListItem",t);var e=n.prototype;return e.onBarComplete=function(){null!=this._vo&&el.ins().toQuickFinish(this.vo.mapID,!1),this.bar.visible=!1,this.btn.mouseEnabled=!0},e.onClick=function(t){if(this.vo){if(xo.getBagEmpty(xo.EQUIP_ID)<20)return void el.ins().openBagFullTipPanel();"快速挑战"==this.btn.label?(this.bar.value=0,this.btn.mouseEnabled=!1,this.bar.visible=!0,this.bar.value=1,_t.setTimeout(this,this.onBarComplete,null,1e3)):(As.curBossID=this.vo.id,tl.ins().closeBossPanel(),Lr.ins().toMapChange(this.vo.mapID))}},e.updateRewards=function(t){for(var e,i=0;i<this.items.length;i++)e=this.items[i],t&&t[i]?(e.dataSource=t[i],e.visible=!0):e.visible=!1},I(0,e,"btnEnable",null,function(t){this.btn.mouseEnabled=t,this.btn.setState(t?0:1)}),I(0,e,"dataSource",t.prototype._$get_dataSource,function(t){if(this.bar.visible=!1,t&&t instanceof xml.BossVO){this._vo=t,this.updateRewards(this.vo.getRewards()),this.bmpHead.skin=this.vo.headUrl,this.txtBossName.text=this.vo.bossName,this._vo.isOpen()?(this.txtOpen.visible=!1,this.btn.visible=!0):(this.txtOpen.visible=!0,this.txtOpen.text=this.vo.openStr+"开启",this.btn.visible=!1);var e=As.getCopyTime(this.vo.mapID);e&&this.vo.isOpen()&&e.max_free_times>e.finished_times?(this.txtLast.text="剩余次数："+(e.max_free_times-e.finished_times)+"次",this.btnEnable=!0):(this.txtLast.text="剩余次数：0次",this.btnEnable=!1),null!=e&&0<e.quick_finish_times?this.btn.label="快速挑战":this.btn.label="挑战"}}),I(0,e,"vo",function(){return this._vo},function(t){this._vo=t}),n}(qc),YP=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnClose.on("click",this,this.closeWindow),this.makeHtml()}return w(e,"modules.commonCopy.boss.view.BossRoleTipPanel",Yc),e.prototype.makeHtml=function(){this.txtHtml.style.lineHeight=30;var t=Z.span("1、达到对应等级可解锁个人BOSS")+"<br/>";t+=Z.span("2、个人BOSS可掉落对应等级的各品质装备，还有几率掉落"),t+=Z.span("橙色装备和橙装碎片","#ff9600")+"<br/>",t+=Z.span("3、个人BOSS挑战次数每天0点重置"),this.txtHtml.innerHTML=t},e}(),XP=function(t){function e(){this.bg=null,this.imgClose=null,e.__super.call(this)}return w(e,"ui.modules.icon.TecentVideoGuidePanelUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/icon/TecentVideoGuidePanel")},e}(),KP=function(t){function e(){e.__super.call(this),this.list.itemRender=qP,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.btnTip.on("click",this,this.onClick)}w(e,"modules.commonCopy.boss.view.BossRoleView",Xc);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){if(this.parent){var t=Ts.getBossCfgDatasByCopyType(0).concat();t.sort(this.sort),this.list.dataSource=t}},i.onClick=function(t){tl.ins().openRoleHelpPanel()},i.sort=function(t,e){var i=As.getCopyTime(t.mapID),s=As.getCopyTime(e.mapID);if(pe.myLevel<t.getOpenLv()&&pe.myLevel>=e.getOpenLv())return 1;if(pe.myLevel<e.getOpenLv()&&pe.myLevel>=t.getOpenLv())return-1;if(i&&!s)return-1;if(s&&!i)return 1;if(i&&s){if(i.max_free_times>i.finished_times&&s.max_free_times<=s.finished_times)return-1;if(i.max_free_times<=i.finished_times&&s.max_free_times>s.finished_times)return 1}return t.getOpenRegrow()<e.getOpenRegrow()?-1:t.getOpenRegrow()>e.getOpenRegrow()?1:t.getOpenLv()<e.getOpenLv()?-1:t.getOpenLv()>e.getOpenLv()?1:0},e}(),jP=function(t){function n(){this.linkTxt=null,this._vo=null,this.bar=null,this.items=null,this.p=null,this.relifeTime=0,this.outTime=0,n.__super.call(this);var t,e=new Wt;e.graphics.drawTexture(ut.getRes("modules/boss/bloodLeft.png"),-22.5,-10),e.graphics.drawTexture(ut.getRes("modules/boss/bloodRight.png"),110,-10),this.bar=new At,this.bar.bar.skin="modules/boss/bar1.png",this.bar.sizeGrid="5,5,5,5,0",this.bar.width=125,this.bar.pos(28,122),this.addChild(this.bar),this.bar.addChild(e),this.addChild(this.txtblood),this.linkTxt=new jt,this.linkTxt.color="#139604",this.linkTxt.fontSize=24,this.linkTxt.text="查看击败记录",this.linkTxt.underline=!0,this.linkTxt.pos(180,15),this.linkTxt.on("click",this,this.onLink),this.addChild(this.linkTxt),this.items=[];for(var i=143,s=0;s<3;s++)(t=new Ah(91,95)).y=50,t.x=i,i+=-70+t.width,this.addChild(t),this.items.push(t);this.btn.on("click",this,this.onClick),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}w(n,"modules.commonCopy.boss.view.BossWorldListItem",t);var e=n.prototype;return e.updateRewards=function(t){for(var e,i=0;i<this.items.length;i++)e=this.items[i],t&&t[i]?(e.dataSource=t[i],e.visible=!0):e.visible=!1},e.onClick=function(t){this.vo&&(As.curBossID=this.vo.id,tl.ins().closeBossPanel(),Lr.ins().toMapChange(this.vo.mapID))},e.onLink=function(){this.vo&&(tl.ins().openWorldKillNotePanel(this.vo.id),0==this.vo.showBossLvArr[1]?pt.send(105,1,"查看"+this.vo.showBossLvArr[0]+"级世界BOSS击败记录"):pt.send(105,1,"查看"+this.vo.showBossLvArr[1]+"转世界BOSS击败记录"))},e.update=function(){this.vo&&(this.updateRewards(this.vo.getRewards()),this.bmpHead.skin=this.vo.headUrl,this.txtBossName.text=this.vo.bossName,this.vo.isOpen()?(this.txtOpen.visible=!1,this.txtRelife.visible=this.txtPeople.visible=this.btn.visible=!0):(this.txtOpen.visible=!0,this.txtOpen.text=this.vo.openStr+"开启",this.txtRelife.visible=this.txtPeople.visible=this.btn.visible=!1),this.p=Ts.getBossData(this.vo.id),this.p&&(this.txtRelife.visible=0!=this.p.state,this.bar.value=this.p.hp_rate/100,this.txtblood.text=this.p.hp_rate+"%",this.txtPeople.text="当前争夺："+this.p.attack_role_num+"人",this.relifeTime=this.p.next_revive_ts-ya.serverTime,0<this.relifeTime&&this.onAdd(null)),this.outTime=Ts.getWorldBossLastOutTime(this.vo.id),this.checkBtnState())},e.loopTime=function(){this.loopRelife(),this.loopCD()},e.loopRelife=function(){0<this.relifeTime?this.txtRelife.text=x.formatTime(this.relifeTime)+"后重生":0==this.relifeTime&&(this.txtRelife.text="",this.p&&(this.p.state=0,this.p.hp_rate=100,this.update()),tl.ins().updateWorldBossView(),this.onRemove(null)),this.relifeTime--},e.loopCD=function(){0<this.cdTime?(this.btn.label="冷却（"+this.cdTime+"）",this.checkBtnState()):0==this.cdTime?(this.btn.label="挑战",this.checkBtnState()):this.btn.label="挑战"},e.onAdd=function(t){_t.addToSecond(this,this.loopTime)},e.onRemove=function(t){_t.removeFromSceond(this,this.loopTime)},e.checkBtnState=function(){this.vo&&this.p&&0==this.p.state&&this.cdTime<=0&&this.relifeTime<=0?this.btnEnable=!0:this.btnEnable=!1},I(0,e,"btnEnable",null,function(t){this.btn.mouseEnabled=t,this.btn.gray=!t}),I(0,e,"dataSource",t.prototype._$get_dataSource,function(t){t&&t instanceof xml.BossVO&&(this._vo=t,this.update())}),I(0,e,"cdTime",function(){return this.outTime+30-ya.serverTime}),I(0,e,"vo",function(){return this._vo},function(t){this._vo=t}),n}(Kc),QP=function(t){function n(){this.linkTxt=null,this.relifeTime=0,n.__super.call(this),this.linkTxt=new jt,this.linkTxt.color="#96f254",this.linkTxt.fontSize=24,this.linkTxt.underline=!0,this.linkTxt.text="BOSS设置提醒",this.linkTxt.pos(570,147),this.linkTxt.height=30,this.linkTxt.on("click",this,this.onLink),this.addChild(this.linkTxt),this.list.itemRender=jP,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,_t.addToSecond(this,this.loopTime),this.on("display",this,this.onAdd)}w(n,"modules.commonCopy.boss.view.BossWorldView",jc);var e=n.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.update=function(){var t=Ts.getBossCfgDatasByCopyType(1);t&&(t=t.concat(),null!=(n.allNoticeID=Ts.noticeBossIDs)&&t.sort(this.sortBoss)),this.list.dataSource=t,this.txtTime.text=Ts.LastChallenge+"/10",this.relifeTime=Ts.nextReviveTs-ya.serverTime,this.txtNext.visible=Ts.LastChallenge<10,this.relifeTime<=0&&(this.txtNext.text="")},e.sortBoss=function(t,e){var i=Ts.getBossData(t.id),s=Ts.getBossData(e.id);return null==i&&null==s?0:null==i?1:null==s?-1:t.isOpen&&!e.isOpen?-1:!t.isOpen&&e.isOpen?1:-1!=n.allNoticeID.indexOf(t.id)&&-1==n.allNoticeID.indexOf(e.id)?-1:-1==n.allNoticeID.indexOf(t.id)&&-1!=n.allNoticeID.indexOf(e.id)?1:i.state<s.state?-1:i.state>s.state?1:t.getOpenRegrow()<e.getOpenRegrow()?-1:t.getOpenRegrow()>e.getOpenRegrow()?1:t.getOpenLv()<e.getOpenLv()?-1:t.getOpenLv()>e.getOpenLv()?1:0},e.loopTime=function(){this.relifeTime=Ts.nextReviveTs-ya.serverTime,0<this.relifeTime?this.txtNext.text="恢复倒计时："+x.formatTime(this.relifeTime):(this.txtNext.text="",0==this.relifeTime&&_t.setTimeout(tl.ins(),tl.ins().toWorldBossInfo,[1],1e3)),this.relifeTime--},e.onAdd=function(t){tl.ins().toWorldBossInfo(3),tl.ins().toWorldBossInfo(1),this.list&&this.list.scrollTo(0)},e.onLink=function(t){tl.ins().openNoticePanel()},n.allNoticeID=null,n}(),zP=function(t){function e(){this.imgInfo=null,this.txtMsg=null,this.btnClose=null,this.btnYes=null,this.btnNo=null,this.btnCopyName=null,e.__super.call(this)}return w(e,"ui.modules.MainInfo.CopyNameAlertUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/CopyNameAlert")},e}(),$P=function(t){function e(){e.__super.call(this),this.chbHide.clickHandler=Q.create(this,this.onClickHide),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.commonCopy.boss.view.ShieldRolePanel",Qc);var i=e.prototype;return i.onDisplay=function(){ua.isTeamCopyMap()?(this.chbHide.selected=As.copyMeridianHideRole,As.copyMeridianHideRole=As.copyMeridianHideRole,this.setRoleHide(As.copyMeridianHideRole)):ua.isWorldBossMap()&&(this.chbHide.selected=As.worldBossHideRole,As.worldBossHideRole=As.worldBossHideRole,this.setRoleHide(As.worldBossHideRole))},i.onUnDisplay=function(){},i.onClickHide=function(){var t=!0;ua.isTeamCopyMap()?(t=!As.copyMeridianHideRole,this.setRoleHide(t),As.copyMeridianHideRole=t,this.chbHide.selected=t):ua.isWorldBossMap()&&(t=!As.worldBossHideRole,this.setRoleHide(t),this.chbHide.selected=t,As.worldBossHideRole=t)},i.setRoleHide=function(t){Se.justHideRole=t},i.open=function(){lt.uiLayer.addChild(this)},i.close=function(){this.removeSelf()},e}(),ZP=function(t){function e(){this.txtTitle=null,this.imgLine=null,this.closeBtn=null,this.imgFullLv=null,this.txtDesc1=null,this.txtAttr1=null,this.imgStep=null,this.txtDesc2=null,this.txtAttr2=null,this.imgBottom1=null,this.imgNum1=null,this.imgBottom2=null,this.imgNum2=null,e.__super.call(this)}return w(e,"ui.modules.marry.flowerFaerie.FlowerFaerieTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/marry/flowerFaerie/FlowerFaerieTip")},e}(),JP=function(t){var e;function i(){this._vo=null,this.note=null,this.bossBar=null,this.txtBossBlood=null,this.shieldBar=null,this.txtShieldBlood=null,this.goalBar=null,this.txtGoalBlood=null,this._monsterID=NaN,this.maxBossHp=NaN,i.__super.call(this),this.initMain(),this.initShieldPart(),this.initGoalPart(),this.note=new e(this.txtBest.width),this.note.x=this.txtBest.x,this.note.y=this.txtBest.y+this.txtBest.height+1,this.addChild(this.note),this.txtBest.on("click",this,this.onClick),this.btn.on("click",this,this.onClick),this.on("display",this,this.checkShow),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(i,"modules.commonCopy.commonView.BossBlood",zc);var s=i.prototype;return s.onDisplay=function(){(ua.isTeamCopyMap()||ua.isWorldBossMap()||ua.isRegrowBossMap())&&(this.imgArrow.skin="modules/boss/arrowDown.png",this.noteShow())},s.onUnDisplay=function(){},s.initMain=function(){var t=new et("modules/boss/bar2Bg.png");t.x=120,t.y=45,this.addChild(t),this.bossBar=new At,this.bossBar.bar.skin="modules/boss/bar2.png",this.bossBar.sizeGrid="0,5,0,5,0",this.bossBar.width=600,this.bossBar.height=13,this.bossBar.x=120,this.bossBar.y=45,this.addChild(this.bossBar),this.txtBossBlood=new jt,this.txtBossBlood.width=600,this.txtBossBlood.fontSize=20,this.txtBossBlood.align="center",this.txtBossBlood.color="#ffffff",this.txtBossBlood.pos(119,41),this.addChild(this.txtBossBlood)},s.initShieldPart=function(){this.shieldBar=new At,this.shieldBar.bar.skin="modules/boss/bar2.png",this.shieldBar.sizeGrid="0,5,0,5,0",this.shieldBar.width=240,this.shieldBar.height=10,this.shieldBar.x=73,this.shieldBar.y=17,this.shieldPart.addChild(this.shieldBar),this.txtShieldBlood=new jt,this.txtShieldBlood.width=240,this.txtShieldBlood.fontSize=16,this.txtShieldBlood.align="center",this.txtShieldBlood.color="#ffffff",this.txtShieldBlood.pos(73,15),this.shieldPart.addChild(this.txtShieldBlood)},s.initGoalPart=function(){this.goalBar=new At,this.goalBar.bar.skin="modules/boss/bar2.png",this.goalBar.sizeGrid="0,5,0,5,0",this.goalBar.width=240,this.goalBar.height=10,this.goalBar.x=73,this.goalBar.y=17,this.goalPart.addChild(this.goalBar),this.txtGoalBlood=new jt,this.txtGoalBlood.width=240,this.txtGoalBlood.fontSize=16,this.txtGoalBlood.align="center",this.txtGoalBlood.color="#ffffff",this.txtGoalBlood.pos(73,15),this.goalPart.addChild(this.txtGoalBlood)},s.reset=function(){this.bmpHead.skin="",this.txtName.text="",this.txtLv.text="",this.txtMy.text="",this.txtBest.text="",this.shieldPart.visible=this.goalPart.visible=this.note.visible=!1,this.imgArrow.skin="modules/boss/arrowDown.png"},s.checkShow=function(t){ua.isRegrowBossMap()?this.goalPart.visible=!0:this.goalPart.visible=!1},s.onClick=function(t){this.noteShow()},s.noteShow=function(){this.imgArrow.skin="modules/boss/arrowDown.png"==this.imgArrow.skin?"modules/boss/arrowUp.png":"modules/boss/arrowDown.png",this.note.visible="modules/boss/arrowUp.png"==this.imgArrow.skin,this.goalPart.alpha=this.note.visible?0:1},s.updateBlood=function(t,e){if(this.vo){this.maxBossHp=e,this.bossBar.value=t/e;var i=t/e*100;i=k.getDecimalsTwo(i),this.txtBossBlood.text=t+"/"+e+"（"+i+"%）"}},s.updateShield=function(t){if(ua.isRegrowBossMap()&&this.monsterID==t&&this.vo&&this.vo.getShields()){var e=vs.getActorBuff(this.monsterID,this.vo.getShields()[2]);e?(this.shieldBar.value=e.trigger_value/Math.floor(this.maxBossHp/2),this.txtShieldBlood.text=e.trigger_value+"/"+Math.floor(this.maxBossHp/2),this.txtShieldInfo.text=this.vo.getShields()[0],0==e.trigger_value?this.shieldPart.visible=!1:this.shieldPart.visible=!0):this.shieldPart.visible=!1}else this.shieldPart.visible=!1},s.updateGoal=function(t,e){this.vo&&this.vo.id==t&&e&&(this.imgHead.skin="com/head/tiny"+e.category+e.sex+".png",this.txtGoalInfo.text=e.pal_name,this.goalBar.value=e.hp/e.max_hp,this.txtGoalBlood.text=e.hp+"/"+e.max_hp)},s.updatePeopleFight=function(){var t=As.getBossHurtArr(),e=As.getMyHurt();e&&(this.txtMy.text="自己："+W.getShortenPowerStr(e.hurt)),t&&t[0]&&(this.txtBest.text=t[0].role_name+"："+W.getShortenPowerStr(t[0].hurt),this.txtBest.color=pe.roleID==t[0].role_id?"#f4f1b2":"#c29d88"),this.note.update(t)},s.updateMulBossHurt=function(){var t=As.getBossHurtArrByID(this._vo.id);if(t){if(0<t.length){var e=t[0].role_id==pe.roleID?pe.roleName:t[0].role_name;this.txtBest.text=e+"："+W.getShortenPowerStr(t[0].hurt),this.txtBest.color=pe.roleID==t[0].role_id?"#f4f1b2":"#c29d88"}this.note.update(t)}},s.sortBest=function(t,e){return t.hurt<e.hurt?1:t.hurt>e.hurt?-1:0},I(0,s,"bossID",null,function(t){this._vo=Ts.getBossVO(t),this.vo&&(this.txtName.text=this.vo.bossName,this.txtLv.text=this.vo.showBossLvStr2,this.bmpHead.skin=this.vo.headUrl)}),I(0,s,"vo",function(){return this._vo}),I(0,s,"monsterID",function(){return this._monsterID},function(t){this._monsterID=t}),i.__init$=function(){e=function(t){function e(t){this.w=0,this.startY=3,this.itemH=25,this.items=null,this._data=null,this.bg=null,this.spItem=null,e.__super.call(this),this.items=this.items||[],this.w=t,this.bg=new Wt,this.addChild(this.bg),this.bg.alpha=.8,this.spItem=new Wt,this.addChild(this.spItem)}w(e,"",Wt);var i=e.prototype;return i.update=function(t){if(this.putInPool(),this._data=t,this._data&&1<this._data.length){for(var e,i,s=1;s<this._data.length;s++){if(e=this._data[s],i=this.getItem(),e){var n=e.role_id==pe.roleID?pe.roleName:e.role_name;i.text=n+"："+W.getShortenPowerStr(e.hurt),i.color=pe.roleID==e.role_id?"#f4f1b2":"#c29d88"}i.y=(s-1)*this.itemH+this.startY,this.spItem.addChild(i)}this.drawBg()}else this.bg.graphics.clear()},i.drawBg=function(){this._data&&(this.bg.graphics.clear(),this.bg.graphics.drawRect(0,0,this.w,(this._data.length-1)*this.itemH+this.startY,"#110b0d"))},i.getItem=function(){this.items=this.items||[];var t=this.items.shift();return null==t&&((t=Me.createText("",0,0,this.w,this.itemH,this.spItem,H.defaultTextFormat)).align="right",t.color="#c29d88",t.fontSize=22),t},i.putInPool=function(){for(var t;0<this.spItem.numChildren;)t=this.spItem.getChildAt(0),this.items.push(t.removeSelf())},e}()},i}(),tT=function(t){function e(){e.__super.call(this),this.init(),this.btnQuit.on("click",this,this.onQuit)}w(e,"modules.commonCopy.commonView.CopyQuit",$c);var i=e.prototype;return i.init=function(){this.right=50,this.bottom=205},i.onQuit=function(t){var e;return ua.isCopyEternalSkyMap()?((e=new Ee).msg="离开副本将扣除当日的挑战次数，确定离开副本吗？",e.yesCaller=el.ins(),e.yesFun=el.ins().toExit,void EF.showVO(e)):ua.isTeamCopyMap()||ua.isLoveCopyMap()||ua.isCopyStrangeFire()?((e=new Ee).msg="此时退出副本将无法获得副本奖励，是否退出",e.yesCaller=el.ins(),e.yesFun=el.ins().toExit,void EF.showVO(e)):(el.ins().toExit(),void(ua.isCustomMap()&&(sl.ins().toAutoChallenge(!1),sl.ins().setAutoChallenge(!1))))},e}(),eT=function(t){function e(){this.iconItems=null,this.msgItems=null,this.curItemY=0,e.__super.call(this),this.iconItems=[],this.msgItems=[],this.list.vScrollBar.autoHide=!0,this.list.on("change",this,this.onListChange)}w(e,"modules.commonCopy.copy.view.ChatNoticeSubView",Zc);var i=e.prototype;return i.onListChange=function(t){if(null!=t)for(var e,i=0,s=0;s<this.list.numChildren;s++)i=(e=this.list.getChildAt(0)).y+e.height,e.y>t.y+t.height||i<t.y?e.visible=!1:e.visible=!0},i.update=function(){this.clearListInfo(),this.updateList()},i.clearListInfo=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);this.curItemY=10,this.list.visible=!1},i.updateList=function(){for(this.list.removeChildren();0<this.msgItems.length;){var t=this.msgItems.shift();t.visible=!0,t.removeSelf(),this.curItemY-=t.contextHeight+2}for(;0<this.iconItems.length;){var e=this.iconItems.shift();e.skin=null,e.visible=!0,e.removeSelf()}var i,s=ws.getMsgsByChannel(ws.curChannel);for(var n in s)i=s[n],this.addOneRecord(i);this.updatePos(),this.list.refresh(),_t.setTimeout(this,this.timeoutUpdateScrollBar,[],100)},i.updatePos=function(){for(;0<this.list.numChildren;)this.list.removeChildAt(0);var t,e;this.curItemY=2;for(var i=0;i<this.iconItems.length;i++)t=this.iconItems[i],this.list.addChild(t);for(var s=0,n=this.msgItems.length;s<n;s++)(e=this.msgItems[s]).y=this.curItemY,this.list.addChild(e),this.curItemY+=e.contextHeight+2;for(var o=0;o<this.iconItems.length;o++)(t=this.iconItems[o]).y=null!=this.msgItems[o]?this.msgItems[o].y+6:t.y},i.timeoutUpdateScrollBar=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.addOneRecord=function(t){var e,i;10<=this.iconItems.length?((e=this.iconItems.shift()).skin=null,e.visible=!0,e.removeSelf()):e=new et,e.size(43,20),40<=this.msgItems.length?((i=this.msgItems.shift()).visible=!0,i.removeSelf(),this.curItemY-=i.contextHeight+2):(i=new K).x=42,i.style.fontSize=24,i.color="#efdcaf",i.style.lineHeight=30,i.width=564;var s="";switch(t.msg_type){case 2:e.skin="com/ui/preMsgType2.png",i.style.align="left";break;case 3:e.skin="com/ui/preMsgType3.png",i.style.align="left";break;case 5:case 9:e.skin="com/ui/preMsgType5.png",0<t.role_info.vip_level&&(s+=Z.span("VIP"+t.role_info.vip_level,"#f5aa3f")),s+=Z.span(" "+t.role_info.role_name+"：","#1aade4"),i.style.align="left"}var n=100001==t.bc_id?1e4:t.bc_id,o=ys.getMsg(n,t.strings,t.nums),a=5==t.msg_type?bs.getChatContextHtml(o,!1,"#efdcaf"):o,l="";5==t.msg_type&&(l=1==t.role_info.sex?Z.span("♂","#4AFCFA",24,!0):Z.span("♀","#FFABD3",24,!0));try{i.innerHTML=l+s+a,i.height=i.contextHeight,this.msgItems.push(i),this.iconItems.push(e)}catch(t){console.log("模板："+this.dataSource.bc_id+"替换后格式有问题，请查看")}},e}(),iT=function(t){function e(){this.iconEff=null,e.__super.call(this),this.on("mousedown",this,this.onMouseDown),this.on("mouseup",this,this.onMouseUp),this.on("mouseout",this,this._$7_onMouseOut),this.on("mouseover",this,this._$7_onMouseOver),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),Nt.register("RP_COPY_ANCIENT_EXOTICE",this,new Tt(24,9))}w(e,"modules.commonCopy.copy.view.CopyAncienExoticIcon",Jc);var i=e.prototype;return i.onMouseDown=function(){this.iconImg.scale(.9,.9),this.iconEff.scale(.9,.9),me.linkTo(10607)},i.onMouseUp=function(){this.iconImg.scale(1,1),this.iconEff.scale(1,1),this.iconImg.y=0,this.iconEff.y=101},i._$7_onMouseOut=function(){this.iconImg.scale(1,1),this.iconEff.scale(1,1),this.iconImg.y=0,this.iconEff.y=101},i._$7_onMouseOver=function(){this.iconImg.y=-3,this.iconEff.y=98},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLoop)},i.showIcon=function(){this.parent||(this.iconEff=this.iconEff||b.getOne(),this.iconEff.pos(50,101),Bt.isFanTi?this.iconImg.skin="modules/icon/116.png":this.iconEff.loadAndPlay("unit/effect/anciententer","default",0,!0),this.addChild(this.iconEff),lt.uiLayer.addChild(this),il.ins().toRoleAncient())},i.removeIcon=function(){this.parent&&(this.iconEff.removeSelf(),this.removeSelf())},i.timeLoop=function(){var t=Os.ancienExoticEndTime-ya.serverTime;if(0<t){var e=x.formatDHMSArrInt(t);0<e[0]?this.timeTxt.text=e[0]+"天"+e[1]+"小时":this.timeTxt.text=e[1]+":"+e[2]+":"+e[3]}else _t.removeFromSceond(this,this.timeLoop),this.removeIcon()},e.IMG_SCALE=.9,e}(),sT=function(t){function e(){this.endTime=0,this.fightCD=0,this.placeEff=null,this.monstEff=null,this.bitmapClip=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.gotoTxt.underline=!0,this.gotoTxt.on("click",this,this.doTask),this.timeTxt.width=600,this.timeTxt.style.align="center",this.timeTxt.innerHTML=Z.font("恭喜你遇到了上古时期才存在的上古异域","#fcf476",24),this.timeTxt2.width=600,this.timeTxt2.style.align="center",this.fightTimeTxt.style.align="center",this.fightTimeTxt.innerHTML=Z.font("活动时间内可重复挑战","#f4f1b2",24)}w(e,"modules.commonCopy.copy.view.CopyAncienExoticView",td);var i=e.prototype;return i.showMonsterEff=function(){this.placeEff=this.placeEff||b.getOne(),this.ancientplaceSp.addChild(this.placeEff),this.placeEff.loadAndPlay("unit/effect/ancientplace","default",0,!0),this.monstEff=this.monstEff||b.getOne(),this.ancientmonsterSp.addChild(this.monstEff),this.monstEff.loadAndPlay("unit/effect/ancientmonster","default",0,!0)},i.onClick=function(t){switch(t.target){case this.closeBtn:case this.closeBtn2:this.closeWindow();break;case this.btnFight:this.gotoFight()}},i.doTask=function(){me.linkTo(10106)},i.gotoFight=function(){Lr.ins().toMapChange(23100)},i.onDisplay=function(){il.ins().toRoleAncient(),this.showMonsterEff()},i.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLoop),_t.removeFromSceond(this,this.fightCDTimeLoop),this.placeEff&&this.placeEff.removeSelf(),this.monstEff&&this.monstEff.removeSelf()},i.update=function(t,e,i){if(this.endTime=t+ya.serverTime,this.parent&&0<t&&_t.addToSecond(this,this.timeLoop),this.fightCD=e,i<=0?(this.btnFight.label="已成功击倒异兽",this.btnFight.disabled=!0):0<e?(this.btnFight.disabled=!0,_t.addToSecond(this,this.fightCDTimeLoop)):(this.btnFight.label="开始挑战",this.btnFight.disabled=!1),this.monstHpImg.width=i/100*534,this.hpPercenTxt.text=i+"%",i<=0)Nt.show("RP_COPY_ANCIENT_EXOTICE"),this.goodsPercentTxt.text="免费(0元宝)",this.showGoEff();else if(100<=i)this.goodsPercentTxt.text="原价(5000元宝)";else{var s=this.getGoldPercent(i);this.goodsPercentTxt.text=s+"折("+s/10*5e3+"元宝)"}},i.getGoldPercent=function(t){var e=0;return 0<t&&t<=10?e=1:10<t&&t<=20?e=2:20<t&&t<=30?e=3:30<t&&t<=40?e=4:40<t&&t<=50?e=5:50<t&&t<=60?e=6:60<t&&t<=70?e=7:70<t&&t<=80?e=8:80<t&&t<=90?e=9:90<t&&t<100&&(e=9.5),e},i.timeLoop=function(){if(0<this.endTime){var t=x.formatDHMSArrInt(this.endTime-ya.serverTime);this.timeTxt2.innerHTML=Z.font("由于虚天裂缝极不稳定，异域只能维持:","#fcf476",24)+Z.font(t[0]+"天"+t[1]+"时"+t[2]+"分"+t[3]+"秒","#fd8e8e",24)}else _t.removeFromSceond(this,this.timeLoop)},i.fightCDTimeLoop=function(){0<this.fightCD?(this.btnFight.disabled=!0,this.btnFight.label="冷却时间:"+x.formatTotalHMS(this.fightCD),this.fightCD--):(this.btnFight.disabled=!1,this.btnFight.label="开始挑战",_t.removeFromSceond(this,this.fightCDTimeLoop))},i.showGoEff=function(){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(57,27),this.bitmapClip.scaleY=.3),this.bitmapClip.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.gotoTxt.addChild(this.bitmapClip)},e.DESC_TEXT="恭喜你遇到了上古时期才存在的上古异域",e.DESC_TEXT_1="由于虚天裂缝极不稳定，异域只能维持:",e.MONSTER_GOLD_COUNT=5e3,e}(),nT=function(t){function e(){this._data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.commonCopy.copy.view.CopyDreamRankItem",t);var i=e.prototype;return i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.nameText=this.txtName,e.blueInfo=t,this._blueVipBox.updateShowing(e)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&(this.txtNum.text=this._data.row_id+"",this._data.elements&&(this.txtName.text=this._data.elements[0],this.txtCustom.text=this._data.elements[1]+"关",this.txtPower.text=W.getShortenPowerStr(this._data.elements[2])+"",this.updateBlueVip(Qo.getRankBlueVip(1201,this._data.elements))))}),e}(ed),oT=function(t){function e(){this._blueVipBox1=null,this._blueVipBox2=null,this._blueVipBox3=null,this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=nT,this.list.scrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.commonCopy.copy.view.CopyDreamRankPanel",id);var i=e.prototype;return i.updateBlueVip=function(t,e){if(0!=Bt.isQQyxdt()){var i=new ms;switch(i.blueInfo=t,e){case 1:i.pos=new Tt(316,135),this._blueVipBox1=this._blueVipBox1||new Rh,this.addChild(this._blueVipBox1),this._blueVipBox1.updateShowing(i);break;case 2:i.pos=new Tt(158,335),this._blueVipBox2=this._blueVipBox2||new Rh,this.addChild(this._blueVipBox2),this._blueVipBox2.updateShowing(i);break;case 3:i.pos=new Tt(496,335),this._blueVipBox3=this._blueVipBox3||new Rh,this.addChild(this._blueVipBox3),this._blueVipBox3.updateShowing(i)}}},i.update=function(){if(this._data=jo.getRankVO(1201),this._data){if(this._data.rows){for(var t=this._data.rows.concat(),e=t.splice(0,3),i=0;i<3;i++)e&&e[i]?(this["txtName"+(i+1)].text=e[i].elements[0],this["txtCustom"+(i+1)].text="关卡："+e[i].elements[1]+"关",this["txtPower"+(i+1)].text="战斗力："+W.getShortenPowerStr(e[i].elements[2]),this["xuwei"+(i+1)].visible=!1,this["imageHead"+(i+1)].skin="com/head/"+e[i].elements[3]+".png",this.updateBlueVip(Qo.getRankBlueVip(1201,e[i].elements),i+1)):(this["txtName"+(i+1)].text="",this["txtPower"+(i+1)].text="",this["txtCustom"+(i+1)].text="",this["xuwei"+(i+1)].visible=!0,this["imageHead"+(i+1)].skin="",this.updateBlueVip(null,i+1));this.list.dataSource=t}this._data.pData&&(0<this._data.pData.ranking?this.txtMy.text="我的排名："+this.getMyCustom()+"关（第"+this._data.pData.ranking+"名）":this.txtMy.text="我的排名：未上榜")}},i.getMyCustom=function(){var t;if(this._data)for(var e in this._data.rows)if((t=this._data.rows[e]).role_id==pe.roleID)return t.elements[1];return 0},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e}(),aT=function(t){function e(){this._barrier=0,this._data=null,this._eff=null,e.__super.call(this),this._eff=b.getOne(),this._eff.pos(59,69),this.addChild(this._eff),this.on("undisplay",this,this.onRemove),this.on("display",this,this.onAdd)}w(e,"modules.commonCopy.copy.view.CopyDreamSmallTower",t);var i=e.prototype;return i.onAdd=function(){this._data&&this._data.curBarrier==Os.curBarrier+1&&this.parent&&this.parent.addChild(this)},i.reset=function(){this.txtBarrier.text="",this.imgBg.skin="modules/copy/tower_0_0.png"},i.onRemove=function(){this._eff&&this._eff.unload()},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._eff.visible=!1,this._barrier=t,this._data=Os.getDreamCopyVO(t),this._data?(this.txtBarrier.text=""+this._data.curBarrier,this.txtBarrier.color=this._data.curBarrier<=Os.curBarrier?"#f9d615":"#d8c7b4",this.imgBg.skin="modules/copy/tower_"+(Os.isSpcBarrier(this._data.curBarrier)?1:0)+"_"+(this._data.curBarrier<=Os.curBarrier?1:0)+".png",this.select=this._data.curBarrier==Os.curBarrier+1):this.reset()}),I(0,i,"select",null,function(t){(this._eff.visible=t)&&(this.addChild(this._eff),this._eff.loadAndPlay("moduleEffect/copyDreamInMapSelect","default",0,!0),this.parent&&this.parent.addChild(this))}),e}(sd),lT=function(t){function e(){this._eff=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._eff=b.getOne(),this._eff.pos(346,352),this._eff.visible=!1,this.addChild(this._eff),this.htmlNeed.style.align="center",this.on("click",this,this.onClick)}w(e,"modules.commonCopy.copy.view.CopyDreamSoulPanel",nd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnUp:il.ins().toSoulLight()}},i.update=function(){this.txtCur.text=Ls.getDreamSoulAttrsStr(!0),this.txtNext.text=Ls.getDreamSoulAttrsStr(!1);var t,e=pe.getScore(3),i=e>=Os.dreamSoulCost?"#b0eb5b":"#f82c10";this.htmlNeed.innerHTML=Z.span(e+"",i,26)+Z.span("/"+Os.dreamSoulCost,"#ffffff",26);for(var s=0;s<this.spLight.numChildren;s++)t=this.spLight.getChildAt(s),s<this.getLightNum()?t.visible=!0:t.visible=!1;this.imgCenter.skin=this.getCenterUrl(),this._eff.visible=6==this.getLightNum(),this._eff.visible&&this._eff.loadAndPlay("moduleEffect/soulLight","default",0,!0),this.updatePower()},i.showUpEff=function(){var t=this.spLight.getChildAt(this.getLightNum()-1);ih.show("moduleEffect/lightSplit",26,74,t)},i.updatePower=function(){var t,e=k.numToTexture(Os.getDreamSoulPower(),"com/ui/powerNum");this.spPower.graphics.clear();for(var i=0;i<e.length;i++)t=e[i],this.spPower.graphics.drawTexture(t,t.width*i)},i.getLightNum=function(){return 0==Os.soulLv?0:Os.soulLv%6==0?6:Os.soulLv%6},i.getCenterUrl=function(){var t=Math.floor(Os.soulLv/6);if(0<Os.soulLv%6)var e=t%9+1;else e=0==t?0:t%9==0?9:t%9;return"modules/copy/center"+Math.max(e,1)+".png"},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.update()},e}(),rT=function(t){function e(){this._barrier=0,this._data=null,e.__super.call(this)}w(e,"modules.commonCopy.copy.view.CopyDreamTower",t);var i=e.prototype;return i.reset=function(){this.txtBarrier.text="",this.imgBg.skin="modules/copy/tower_0_0.png"},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._barrier=t,this._data=Os.getDreamCopyVO(t),this._data?(this.txtBarrier.text="第"+this._data.curBarrier+"关",this.txtBarrier.color=this._data.curBarrier<=Os.curBarrier?"#f9d615":"#d8c7b4",this.imgBg.skin="modules/copy/tower_"+(Os.isSpcBarrier(this._data.curBarrier)?1:0)+"_"+(this._data.curBarrier<=Os.curBarrier?1:0)+".png",this.imgSelect.skin=Os.isSpcBarrier(this._data.curBarrier)?"modules/copy/spcSelect.png":"modules/copy/select.png",this.imgSelect.visible=this._data.curBarrier==Os.curBarrier+1,this.imgSelect.visible&&this.parent&&this.parent.addChild(this)):this.reset()}),e}(od),hT=function(t){function i(){this.tower=null,this._eff=null,i.__super.call(this),this.tower=new te(450,710,6,rT,0),this.tower.pos(43,112),this.tower.on("end",this,this.update),this.spTower.addChild(this.tower),this.addChild(this.btnBox),this._eff=b.getOne(),this._eff.pos(500,300),this.addChild(this._eff);for(var t=0;t<2;t++){var e=new Ah(91,95,!1,!0,!0,!1);e.pos(6+t*(e.width-52),20),this.spGoods.addChild(e)}Nt.register("RP_DREAM_SOUL",this.btnSoul),this.on("click",this,this.onClick)}w(i,"modules.commonCopy.copy.view.CopyDreamView",ad);var e=i.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.update=function(){var t;this.btnBox.mouseEnabled=!0,this._eff.visible=Os.isNeedOpenNextDream(),this._eff.visible&&this._eff.loadAndPlay("moduleEffect/copyDreamCanGetBox","default",0,!0),this.tower.dataSource=Os.getDreamCopyShowVOs(),Os.isMaxBarrier(Os.curBarrier)?(t=Os.getDreamCopyVO(Os.curBarrier),this.challengeEnable=!1):(t=Os.getDreamCopyVO(Os.curBarrier+1),this.challengeEnable=!0);for(var e=0;e<this.spGoods.numChildren;e++){var i=this.spGoods.getChildAt(e);i.dataSource=parseInt(t.getAwardArr()[e]),i.num=t.getAwardNumArr()[e]}this.challengeEnable=!0,this.txtBarrierName.text="第"+t.curBarrier+"关",this.txtExp.text=t.getExp()+"",0<t.getExp()?this.spExp.visible=!0:this.spExp.visible=!1},e.showNextTower=function(){this.tower.scrollToNext(),this.btnBox.mouseEnabled=!1},e.onClick=function(t){switch(t.target){case this.btnRank:il.ins().openRankPanel(),pt.send(102,2,"副本-回魂仙梦-排行榜");break;case this.btnSoul:il.ins().openSoulPanel(),pt.send(102,3,"副本-回魂仙梦-魂印");break;case this.btnChallenge:il.ins().dreamGoNext();break;case this.btnBox:il.ins().openDreamBox(Os.getBoxBarrier())}},I(0,e,"challengeEnable",null,function(t){this.btnChallenge.mouseEnabled=t,this.btnChallenge.gray=!t,t||(this.btnChallenge.label="已通关")}),i}(),uT=function(t){function e(){this.materialView=null,this.dreamView=null,this.eternalSkyView=null,this.curView=null,this.curViewType=0,e.__super.call(this),this.setWindowType(),this.materialView=new dT,this.dreamView=new hT,Nt.register("RP_COPY_MATERIALS",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_DREAM_BOX",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_DREAM_SOUL",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_ETERNAL_SKY",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_TEAM_COPY",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_LOVE_COPY",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_COPY_STRANGE_FIRE",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_COPY_TALIMAN",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_ZHUXIAN_COPY",this.tab.items[2],new Tt(19,-10)),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=Q.create(this,this.checkOpen),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.copy.view.CopyEnterPanel",ld);var i=e.prototype;return i.checkOpen=function(t){1==t&&pe.myLevel<50?Jt.addTip("50级开启回魂仙梦"):2==t&&pe.myRegrow<1?Jt.addTip("1转开启进阶副本"):(this.tab.selectedIndex=t,this.openWindow(null,!0))},i.onTabChange=function(t){switch(this.tab.selectedIndex){case 0:this.chooseView(0);break;case 1:il.ins().toDreamInfo(),this.chooseView(1),pt.send(102,1,"副本-回魂仙梦");break;case 2:this.chooseView(2),pt.send(112,1,"副本-永恒星空");break;case Rs.VIEW_MONSTER:this.chooseView(Rs.VIEW_MONSTER)}},i.chooseView=function(t){switch(this.spView.removeChildren(),this.curViewType=t,this.curViewType){case 0:this.curView=this.materialView,this.spView.addChild(this.materialView);break;case 1:this.curView=this.dreamView,this.spView.addChild(this.dreamView);break;case 2:if(!se.has("modules/copyEternalSky"))return void se.add("modules/copyEternalSky","正在加载永恒星空资源",this,this.chooseView,[t]);nl.getInstance().toInfo(),ul.ins.toTeamCopyStep(),this.eternalSkyView=this.eternalSkyView||new AT,this.curView=this.eternalSkyView,this.spView.addChild(this.eternalSkyView)}this.update()},i.showViewByIndex=function(t){void 0===t&&(t=0),this.checkOpen(t)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},i.update=function(){this.curView&&this.curView.update()},i.showNextTower=function(){this.dreamView&&this.dreamView.showNextTower()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),cT=function(t){function e(){this._vo=null,this.bar=null,this.spRed=null,e.__super.call(this),this.bar=new Gt("com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7]),this.bar.x=498,this.bar.y=155,this.bar.width=136,this.bar.posGrid=[1,0,1,0],this.bar.on("complete",this,this.onBarComplete),this.resetBar(),this.addChild(this.bar);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.bar.addChild(t),this.btn.on("click",this,this.onClick)}w(e,"modules.commonCopy.copy.view.CopyMaterialsListItem",t);var i=e.prototype;return i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.onClick=function(t){if(null!=this.vo)switch(this.btn.label){case"挑战":Lr.ins().toMapChange(this.vo.mapID),il.ins().closeEnterPanel();break;case"扫荡":0<xo.getGoodsNumByType(xo.GOODS_ID,10201249)?this.yes():pe.user.attr.gold>=this.vo.needMoney?Lo.showSecAlert(Z.span("是否消耗","#5d3924")+Z.span(this.vo.needMoney+"元宝","#F7EF5F")+Z.span("扫荡一次【"+this.vo.copyName+"】？","#5d3924")+"<br/>"+Z.span("扫荡将直接获得副本奖励","#5d3924"),this,this.yes,null,"copyMaterial"+this.vo.mapID):Lo.showAlert();break;case"快速挑战":this.yes()}},i.onBarComplete=function(){if(1==this.bar.value&&this.vo){var t=As.getCopyTime(this.vo.mapID);t&&el.ins().toQuickFinish(this.vo.mapID,t.finished_times>=t.max_free_times),this.resetBar()}},i.yes=function(){this.btn.mouseEnabled=!1,this.btn.gray=!0,this.bar.visible=!0,this.bar.value=1},i.resetBar=function(){this.bar.value=0,this.bar.visible=!1,this.bar.updateNow()},i.getOneImg=function(){if(0<(e.pool=e.pool||[]).length)return e.pool.shift();var t=Me.createGoodsImage(0,0,null,null,!0,!1,100);return t.on("click",this,this.onTip),t},i.rePool=function(){for(;0<this.spGoods.numChildren;)e.pool.push(this.spGoods.removeChildAt(0))},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this.vo=t,this.vo){var e;this.rePool();for(var i=0;i<this.vo.rewardArr.length;i++)(e=this.getOneImg()).data=ur.getItem(this.vo.rewardArr[i]),e.pos(40+117*i,60),this.spGoods.addChild(e);this.txtMoney.text=this.vo.needMoney+"",this.txtOpen.text=this.vo.openStr+"开启",this.txtOpen.visible=!this.vo.isOpen(),this.txtTip.visible=this.btn.visible=!this.txtOpen.visible,this.txtQuan.visible=this.spMoney.visible=!1,this.imgBg.skin=this.vo.itemBg;var s=As.getCopyTime(this.vo.mapID);if(s){if(s.finished_times>=s.max_free_times)if(this.spMoney.visible=!this.txtOpen.visible,this.redPoint=!1,this.btn.label="扫荡",s.can_buy_times<=0){var n=Ia.getNextAddMaterialsTime();this.txtTip.text=n?"VIP"+n[0]+"可额外扫荡"+n[1]+"次":""}else{if(this.txtTip.text="可用扫荡次数："+s.can_buy_times+"次",0<xo.getGoodsNumByType(xo.GOODS_ID,10201249)){this.spMoney.visible=!1,this.txtQuan.visible=!0;var o=ur.getItem(10201249);o&&(this.txtQuan.text="消耗"+o.name+"×1")}}else this.redPoint=!0,this.txtTip.text="今日可挑战次数："+(s.max_free_times-s.finished_times)+"次",0<s.quick_finish_times?this.btn.label="快速挑战":this.btn.label="挑战";s.can_buy_times<=0&&s.max_free_times-s.finished_times<=0?(this.btn.mouseEnabled=!1,this.btn.gray=!0):(this.btn.mouseEnabled=!0,this.btn.gray=!1)}}}),I(0,i,"vo",function(){return this._vo},function(t){this._vo=t}),I(0,i,"redPoint",function(){return!!this.spRed&&null!=this.spRed.parent},function(t){null==this.spRed&&(this.spRed=Me.createSprite("com/ui/redPoint.png")),t?null==this.spRed.parent&&(this.addChild(this.spRed),this.spRed.x=this.btn.x+this.btn.width-15,this.spRed.y=this.btn.y-15):this.spRed.removeSelf()}),e.pool=null,e}(rd),dT=function(t){function e(){this.listArr=null,e.__super.call(this),this.list.itemRender=cT,this.list.vScrollBarSkin=""}w(e,"modules.commonCopy.copy.view.CopyMaterialsView",hd);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){this.listArr=Os.getMaterialsCopyVOs(),this.list.dataSource=this.listArr,this.checkWarn()},i.checkWarn=function(){var t;for(var e in this.listArr){t=this.listArr[e];var i=As.getCopyTime(t.mapID);if(i&&i.finished_times<i.max_free_times)return}},e}(),pT=function(t){function e(){this.tower=null,e.__super.call(this),this.tower=new te(120,190,6,aT,0),this.tower.pos(0,0),this.addChildAt(this.tower,0)}return w(e,"modules.commonCopy.copy.view.DreamTowerInCopyView",ud),e.prototype.update=function(){this.tower.dataSource=Os.getDreamCopyShowVOs()},e}(),mT=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtMsg.style.lineHeight=30,this.txtMsg.style.align="center",this.txtMsg.innerHTML=Z.span("背包空间不足","#5d3924",26)+Z.span("20","#b60202",26)+Z.span("，请先清理背包，","#5d3924",26)+"<br/>"+Z.span("以免不能获得怪物掉落物品。","#5d3924",26),this.btnClose.on("click",this,this.closeWindow),this.btnYes.on("click",this,this.onClick)}w(e,"modules.commonCopy.custom.view.BagFullTipPanel",cd);var i=e.prototype;return i.onClick=function(t){this.closeWindow(),me.linkTo(11101)},I(0,i,"uiClass",function(){return"CustomTipPanel"}),e}(),fT=function(t){function e(){this.TIP_LV=[11,15],this.bar=null,this.eff=null,this.effBtn=null,this.hasTouch=!1,e.__super.call(this),this.bar=new Gt("com/ui/roundBar.png","com/ui/roundBg.png",[0,19,0,19],[0,34,0,34]),this.bar.size(137,22),this.bar.posGrid=[1,16,4,16],this.spBar.addChild(this.bar),this.eff=b.getOne(),this.eff.pos(74,72),this.eff.loadAndPlay("unit/effect/customFull","default",0,!0),this.addChild(this.eff),this.eff.visible=!1,this.effBtn=b.getOne(),this.effBtn.pos(71,164),this.effBtn.loadAndPlay("unit/effect/customFull2","default",0,!0),this.addChild(this.effBtn),this.effBtn.visible=!1,this.imgEnterTip.removeSelf(),this.on("click",this,this.onClick),this.imgIcon.on("mousedown",this,this.onMouseDown),this.imgIcon.on("mouseup",this,this.onMouseUp),this.imgIcon.on("mouseout",this,this._$7_onMouseOut),this.imgIcon.on("mouseover",this,this._$7_onMouseOver),Nt.register("RP_GODHOOD_STORY",this,new Tt(29,-60)),Nt.register("RP_GODHOOD_FORBIDDEN",this,new Tt(29,-60)),Nt.register("RP_GODHOOD_CAN_FIGHT",this,new Tt(29,-60)),Nt.register("RP_GODHOOD_EQUIP",this,new Tt(29,-60));var t=Bt.getUiIndex();this.imgIcon.skin=1<t?"com/ui"+t+"/customEnter.png":"com/ui/customEnter.png",S.isIphoneX?this.bottom=280:this.bottom=260}w(e,"modules.commonCopy.custom.view.CustomEnterItem",dd);var i=e.prototype;return i._$7_onMouseOver=function(t){this.imgIcon.y-=3},i._$7_onMouseOut=function(t){this.imgIcon.scale(1,1),this.imgIcon.y+=3},i.onMouseUp=function(t){this.imgIcon.scale(1,1)},i.onMouseDown=function(t){this.imgIcon.scale(.9,.9)},i.onClick=function(t){switch(t.target){case this.btn:10<Ds.curBarrier?(this.hasTouch=!0,this.btn.selected=!this.btn.selected,this.btn.selected?pt.send(10,4,"主线关卡-自动挑战-关闭"):pt.send(10,3,"主线关卡-自动挑战-开启"),this.txtTip.visible=this.imgTip.visible=this.needTip,sl.ins().toAutoChallenge(this.btn.selected)):(pt.send(10,2,"主线关卡-自动挑战"),Jt.addTip("修仙之路通关10关后开启")),this.effBtn.visible=this.btn.selected;break;default:pt.send(10,1,"主线关卡入口"),c.send(29008),me.linkTo(10600)}},i.setBtnAuto=function(t){this.btn.selected=t,this.effBtn.visible=t},i.update=function(){this.txtTip.visible=this.imgTip.visible=this.needTip;var t=Ds.getCustomVO(Ds.curBarrier);t&&(this.bar.value=Math.min(pe.user.attr.current_monster_num,t.needKillNum)/t.needKillNum,this.txtWave.text=Math.min(pe.user.attr.current_monster_num,t.needKillNum)+"/"+t.needKillNum,pe.user.attr.current_monster_num>=t.needKillNum&&!G.isReviewVersion?Bt.isZKPf9991Server()||Bt.isHuoWu()||Bt.isQiYuxtzzios()||Bt.isQiYuxfcyios()||Bt.isChangKu()?this.eff.visible=!1:this.eff.visible=!0:this.eff.visible=!1),this.checkRP(),this.checkEnterTip()},i.checkRP=function(){this.imgRp.visible=Ds.isCanGetReward,Vs.checkForbiddenRP(),Vs.checkStoryRP()},i.checkEnterTip=function(){Ds.curBarrier<50&&1==this.eff.visible?null==this.imgEnterTip.parent&&(this.imgEnterTip.visible=!0,this.addChild(this.imgEnterTip)):this.imgEnterTip.removeSelf()},I(0,i,"needTip",function(){return!this.btn.selected&&Ds.curBarrier>=this.TIP_LV[0]&&Ds.curBarrier<=this.TIP_LV[1]&&!this.hasTouch}),e.IMG_SCALE=.9,e}(),_T=function(t){function e(){this.customView=null,this.rewardView=null,this.curView=null,e.__super.call(this),this.setWindowType(),this.customView=new gT,this.rewardView=new wT,this.on("click",this,this.onClick)}w(e,"modules.commonCopy.custom.view.CustomEnterPanel",pd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.update=function(){this.customView.removeSelf(),this.rewardView.removeSelf(),Ds.isCanGetReward?this.curView=this.rewardView:this.curView=this.customView,this.curView.update(),this.container.addChildAt(this.curView,0)},i.updateWave=function(){this.customView&&this.customView.parent&&this.customView.updateWave()},i.updateReward=function(){this.customView&&this.customView.parent&&this.customView.updateReward()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),gT=function(t){function o(){this.bar=null,this.spcReward=null,this.pointItems=null,this.rewardItems=null,this.clip=null,this.curVO=null,this.spBeast=null,this.eff=null,this.curBeastReward=0,this.curval=NaN,this.des=[20,200,800],this.sp=null,o.__super.call(this),this.linkTxt.innerHTML=Z.linkcolor("查看排名","",!0,"96f254",26),this.linkTxt.on("link",this,this.onLink),this.listRank.itemRender=bT,this.listRank.vScrollBarSkin="",this.clip=b.getOne(),this.clip.pos(385,563),this.addChild(this.clip),this.addChild(this.listRank),this.bar=new p(90,684,568,32,"modules/customs/bar.png","modules/customs/barBg.png",[10,40,10,40,0],[5,10,5,10,0],[4,0,8,0]),this.bar.setTextvisible(!1),this.addChild(this.bar);var t,e=new Wt;e.graphics.drawTexture(ut.getRes("modules/customs/maskL.png"),-26,-12),e.graphics.drawTexture(ut.getRes("modules/customs/maskR.png"),543,-12),this.bar.addChild(e),this.pointItems=[];for(var i,s=137,n=0;n<5;n++)(t=new yT).x=s+n*t.width,t.y=636,this.addChild(t),this.pointItems.push(t);for(this.rewardItems=[],s=120,n=0;n<5;n++)(i=new Ah(91,95,!1,!0,!1,!1)).x=s+n*(i.bgSize+10),i.y=755,this.addChild(i),this.rewardItems.push(i);this.spcReward=new Ah(91,95),this.spcReward.pos(535,460),this.addChild(this.spcReward),this.btnEnter.on("click",this,this.onClick),this.imgGodHood.on("click",this,this.onGodHoodClick),Nt.register("RP_GODHOOD_STORY",this.imgGodHood),Nt.register("RP_GODHOOD_FORBIDDEN",this.imgGodHood),Nt.register("RP_GODHOOD_CAN_FIGHT",this.imgGodHood),Nt.register("RP_GODHOOD_EQUIP",this.imgGodHood),T.register("BAGDATA_CHANGE",this,this.updateReward),this.on("display",this,this.onDisplay)}w(o,"modules.commonCopy.custom.view.CustomEnterView",md);var e=o.prototype;return e.onDisplay=function(){LD.nextStep==LD.CLICK_CUSTOM_BTN&&LD.showStep(LD.CLICK_CUSTOM_BTN,this.btnEnter)},e.onGodHoodClick=function(){Ne.isGodHoodOpen()?me.linkTo(11801):Jt.addTip("请先通关修仙之路10关")},e.toInfo=function(t){var e=new Object;e.className="m_role_beasts_receive_tos",e.cond_type=1,e.cond_val=t,v.send(e)},e.updateReward=function(){var t=nn.getBeastsGetInfo(1);if(t&&t[0]&&(this.curval=t[0].type,this.curval==this.des[2]))this.reWard.visible=!1;else{if(this.textGet.underline=!0,this.textGet.on("click",this,this.onTextClick),this.tip.style.valign="top",this.tip.style.leading=8,this.curval)for(var e=0;e<3;e++)this.curval>=this.des[e]&&(this.curBeastReward=10407002+e,this.nameImg.skin="modules/customs/img/beastName"+(e+2).toString()+".png",this.tip.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font("通关","#e1c6bc",24)+Z.font(this.des[e+1]+"关","#fcf476",24)+"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font("可","#e1c6bc",24)+Z.font("免费领取","#fcf476",24));else this.curBeastReward=10407001,this.tip.innerHTML="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font("通关","#e1c6bc",24)+Z.font("20关","#fcf476",24)+"<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font("可","#e1c6bc",24)+Z.font("免费领取","#fcf476",24);if(this.spBeast=this.spBeast||new Ah(92,92,!1,!0,!0,!1),this.spBeast.dataSource=[this.curBeastReward,1],this.spBeast.hideGoodsName(),this.spBeast.y=55,this.eff=this.eff||b.getOne(),this.eff.pos(90,150),this.reWard.addChild(this.eff),this.eff.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.eff.scale(1,1),this.eff.visible=!1,this.reWard.addChild(this.spBeast),(yt.isWX||yt.isQQ)&&G.isReviewVersion&&(this.reWard.visible=this.textGet.visible=this.tip.visible=this.nameImg.visible=!1),this.spBeast)if(this.curval)for(var i=0;i<this.des.length;i++)this.curval==this.des[i]&&(Ds.curBarrier-1>=this.des[i+1]?this.eff.visible=!0:this.eff.visible=!1);else Ds.curBarrier-1>=this.des[0]?this.eff.visible=!0:this.eff.visible=!1}},e.clickDown=function(t){if(void 0===t&&(t=20),Ds.curBarrier-1>=t){if(this.toInfo(t),this.pickBack(),this.curBeastReward++,10407004==this.curBeastReward)return void(this.reWard.visible=!1)}else Jt.addTip("通关修仙之路"+t+"关可领")},e.onTextClick=function(){this.curval?this.curval==this.des[0]?this.clickDown(this.des[1]):this.curval==this.des[1]&&this.clickDown(this.des[2]):this.clickDown()},e.creatPickImage=function(){this.sp=this.sp||new et,this.sp.visible||(this.sp.visible=!0),this.sp.skin="modules/goods/maxico/"+this.spBeast.getItemVO().path+".png",this.sp.width=this.sp.height=this.spBeast.bgSize,this.sp.x=this.reWard.x,this.sp.y=this.reWard.y+55,G.isReviewVersion||this.addChild(this.sp)},e.pickBack=function(){if(this.creatPickImage(),this.sp){ie.to(this.sp,{x:1200,y:1e3},600),ie.to(this.sp,{scaleX:.5,scaleY:.5},600),_t.setTimeout(this,this.hideSp,null,600)}},e.hideSp=function(){this.sp.visible=!1},e.update=function(){if(Ds.curBarrier>Ds.maxFloor)return this.txtFloor.text="已是最高层",this.bar.setValue(6,6),this.btnEnter.mouseEnabled=!1,void(this.btnEnter.gray=!0);if(this.curVO=Ds.getCustomVO(Ds.curBarrier),this.curVO){var t=this.curVO.getMonsterInfo();t&&(this.txtFloor.text="第"+Ds.curBarrier+"关\n"+this.curVO.getName(),this.clip.loadAndPlay("unit/monster/"+t[0]+"_3","stand",3,!0),this.clip.scale(t[1],t[1]))}this.updateWave(),this.curBeastReward<=10407003&&this.updateReward();var e=jo.getRankVO(1202);e&&(this.listRank.dataSource=e.rows);var i,s=Math.floor((Ds.curBarrier-1)%5);this.bar.setValue(s+1,6);for(var n=5*Math.max(0,Ds.curStep-1)+1,o=0;o<this.pointItems.length;o++)(i=this.pointItems[o]).text=999<n+o?n+o+"关":"第"+(n+o)+"关",i.light=o+1<=s,i.select=o==s;var a,l=Ds.getReward(Ds.curBarrier);for(o=0;o<this.rewardItems.length;o++)a=this.rewardItems[o],l?(a.dataSource=l[o],a.visible=!0):a.visible=!1;this.curVO=Ds.getCustomVO(this.getSpcRewardBarrier()),this.curVO&&(this.spcReward.dataSource=ur.getItem(this.curVO.getSpcReward())),G.isReviewVersion?this.imgGodHood.visible=this.txtGodHood.visible=!1:(this.imgGodHood.visible=this.txtGodHood.visible=!0,0<Zn.godHoodLv?(this.txtGodHood.color=Zn.getGodHoodStageColorByLv(Zn.godHoodLv),this.txtGodHood.text=Zn.godHoodLv+"阶-"+Zn.getGodHoodStageNameByLv(Zn.godHoodLv)):(this.txtGodHood.color="#ffffff",this.txtGodHood.text="仙阶"))},e.updateWave=function(){this.curVO=Ds.getCustomVO(Ds.curBarrier),this.curVO&&(pe.user.attr.current_monster_num>=this.curVO.needKillNum?(this.btnEnter.label="挑战",this.txtTip.text=""):(this.btnEnter.label="挑战("+pe.user.attr.current_monster_num+"/"+this.curVO.needKillNum+")",this.txtTip.text="再击败"+(this.curVO.needKillNum-Math.min(pe.user.attr.current_monster_num,this.curVO.needKillNum))+"只怪物可挑战"))},e.onLink=function(t){pt.send(10,5,"主线关卡-排行榜入口"),sl.ins().openRankPanel()},e.onClick=function(t){c.send(29011);var e=Ds.getCustomVO(Ds.curBarrier);if(xo.getBagEmpty(xo.EQUIP_ID)<20)return el.ins().openBagFullTipPanel(),void sl.ins().closeEnterPanel();e&&pe.user.attr.current_monster_num>=e.needKillNum?ua.isMainMap()?(sl.ins().toChallengGuard(),sl.ins().closeEnterPanel()):Jt.addTip("请在野外地图再挑战"):e&&Jt.addTip("再击败"+(e.needKillNum-Math.min(pe.user.attr.current_monster_num,e.needKillNum))+"只怪物可挑战")},e.getSpcRewardBarrier=function(){return 5*Ds.curStep},o}(),yT=function(t){function e(){e.__super.call(this)}w(e,"modules.commonCopy.custom.view.CustomPointItem",fd);var i=e.prototype;return I(0,i,"light",null,function(t){this.img.skin=t?"modules/customs/point1.png":"modules/customs/point0.png"}),I(0,i,"select",null,function(t){this.imgArrow.visible=t}),I(0,i,"text",null,function(t){this.txt.text=t}),e}(),vT=function(t){function e(){this._data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.commonCopy.custom.view.CustomRankItem",t);var i=e.prototype;return i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(104,18),this._blueVipBox.updateShowing(e)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&(this.imgRank.skin=this._data.row_id<=3?"modules/rank/rank"+this._data.row_id+".png":null,this.txtRank.text=3<this._data.row_id?this._data.row_id+"":"",this._data.elements&&(this.txtName.text=this._data.elements[0],this.txtCustom.text=this._data.elements[1]+"关",this.txtPower.text=W.getShortenPowerStr(this._data.elements[2]),this.updateBlueVip(Qo.getRankBlueVip(1202,this._data.elements))))}),e}(_d),IT=function(t){function e(){this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.listRank.itemRender=vT,this.listRank.vScrollBarSkin="com/ui/vscroll.png",this.listRank.scrollBar.autoHide=!0,this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.linkTxt.innerHTML=Z.linkcolor("查看排名","",!0,"96f254",26),this.linkTxt.on("link",this,this.onLink)}w(e,"modules.commonCopy.custom.view.CustomRankPanel",gd);var i=e.prototype;return i.onLink=function(t){this._data&&this._data.pData&&0<this._data.pData.ranking&&this.listRank.scrollTo(this._data.pData.ranking-1)},i.update=function(){this._data=jo.getRankVO(1202),this._data&&(this._data.pData&&0<this._data.pData.ranking?(this.txtMy.text="我的排名："+this._data.pData.ranking,this.linkTxt.visible=!0):(this.txtMy.text="我的排名：未上榜",this.linkTxt.visible=!1),this.listRank.dataSource=this._data.rows)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.listRank.scrollTo(0)},e}(),wT=function(t){function e(){this.goods=null,this.cvo=null,this.bmclip=null,e.__super.call(this),this.html.style.align="center",this.goods=new Ah(91,95,!1,!0,!1,!1),this.goods.pos(290,360),this.goods.stroke=1,this.addChild(this.goods),this.btn.on("click",this,this.onClick)}w(e,"modules.commonCopy.custom.view.CustomRewardView",yd);var i=e.prototype;return i.update=function(){this.html.innerHTML=Z.span("通关修仙之路"+Kt.getHtmlSpaceStr(1),"#bb8b5c",30)+Z.span(Ds.curRewardBarrier+5+"关","#96f254",30)+Z.span("奖励","#bb8b5c",30),this.cvo=Ds.getCustomVO(Ds.curRewardBarrier+5),this.cvo&&(this.goods.dataSource=ur.getItem(this.cvo.getSpcReward()),this.bmclip=this.bmclip||b.getOne(),this.bmclip.mouseEnabled=!1,this.bmclip.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.bmclip.pos(this.goods.x+90,this.goods.y+93),this.bmclip&&null==this.bmclip.parent&&this.addChild(this.bmclip))},i.onClick=function(t){sl.ins().toPhaseReward()},e}(),bT=function(t){function e(){this._data=null,e.__super.call(this),this.mouseEnabled=!0}return w(e,"modules.commonCopy.custom.view.CustomSimpleRankItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this._data.elements&&(this.txtRank.text=this._data.row_id+"",this.txtName.text=this._data.elements[0],this.txtCustom.text=this._data.elements[1]+"关")}),e}(vd),ST=function(t){function e(){this.ftxt1=null,this.ftxt2=null,this.handShow=null,this.handClose=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_NO",!1,"",!1),this.ftxt1=new V,this.ftxt1.pos(285,94),this.addChild(this.ftxt1),this.ftxt2=new V,this.ftxt2.pos(285,144),this.addChild(this.ftxt2),this.handShow=Q.create(this,this.showComplete),this.handClose=Q.create(this,this.hideComplete)}w(e,"modules.commonCopy.custom.view.CustomUpTipPanel",Id);var i=e.prototype;return i.openWindow=function(t,e){void 0===e&&(e=!1),this.alpha=0,laya.ui.View.prototype.openWindow.call(this,t,e),ie.to(this,{alpha:1,complete:this.handShow},1e3)},i.showComplete=function(){var t=this;_t.setTimeout(this,function(){ie.to(this,{alpha:0,complete:t.handClose},1e3)},null,1e3)},i.hideComplete=function(){ie.clearAll(this),this.closeWindow()},i.update=function(){var t=Ds.getCustomVO(Ds.curBarrier-1);if(t){var e,i=t.getOutput();if(i)for(var s in i)switch((e=i[s])[0]){case 2:this.txtLeft1.text=e[2];break;case 3:this.txtLeft2.text=e[2]}var n=Math.max(this.txtLeft1.textWidth,this.txtLeft2.textWidth);this.img1.x=215-n-50,this.img2.x=215-n-58}var o=Ds.getCustomVO(Ds.curBarrier);if(o&&(i=o.getOutput()))for(s in i)switch((e=i[s])[0]){case 2:this.ftxt1.clear(),this.ftxt1.addLinkText(e[2],"#96f254",!1,24),this.ftxt1.addLinkText("/小时","#fff7b5",!1,24);break;case 3:this.ftxt2.clear(),this.ftxt2.addLinkText(e[2],"#96f254",!1,24),this.ftxt2.addLinkText("/小时","#fff7b5",!1,24)}},e}(),xT=function(t){function e(){this.bar=null,e.__super.call(this),this.setWindowType(),this.bar=new p(117,850,450,35,"com/ui/hp$bar.png","com/ui/hp.png",[1,40,1,40,0],[5,60,5,60,0],[1,0,1,0]),this.addChild(this.bar),this.btnClose2.on("click",this,this.closeWindow),this.btnGet.on("click",this,this.onClick)}return w(e,"modules.commonCopy.custom.view.CustomWorldPanel",wd),e.prototype.onClick=function(t){},e}(),CT=function(t){function e(){this.curWave=0,this.curStep=0,this.oldStep=0,this.arrowPos=[10,146,280,420,556],e.__super.call(this)}w(e,"modules.commonCopy.eternalSky.view.CopyEternalSkyBottomdView",bd);var i=e.prototype;return i.update=function(){if(this.curWave=Ns.wave,this.oldStep=this.curStep,0<=this.curWave&&(this.curStep=Math.floor(this.curWave/3)),this.checkStepIsUp(),0<=this.curStep){for(var t=0;t<5;t++)t<=this.curStep?(this["imgBg"+t].skin="modules/copyEternalSky/eternalSkyBright.png",0<t&&(this["txtNum"+t].visible=!1),t<this.curStep?this["txtName"+t].visible=!0:this["txtName"+t].visible=!1):(this["imgBg"+t].skin="modules/copyEternalSky/eternalSkyGray.png",0<t&&(this["txtNum"+t].visible=!0),this["txtName"+t].visible=!1);this.resetIconVisible(),this["imgIcon"+this.curStep].visible=!0,this.updateImgLine(),0<this.curStep?(this.imgArrow.visible=!0,this.imgArrow.x=this.arrowPos[this.curStep]):this.imgArrow.visible=!1}else this.imgArrow.visible=!1,this.resetIconVisible(),this.txtNum1.visible=this.txtNum2.visible=this.txtNum3.visible=this.txtNum4.visible=!0,this.txtName1.visible=this.txtName2.visible=this.txtName3.visible=this.txtName4.visible=!1,this.imgBg0.skin=this.imgBg1.skin=this.imgBg2.skin=this.imgBg3.skin=this.imgBg4.skin="modules/copyEternalSky/eternalSkyGray.png",this.imgLine0.visible=this.imgLine1.visible=this.imgLine2.visible=this.imgLine3.visible=!1},i.updateImgLine=function(){for(var t=Math.floor(this.curWave/3),e=this.curWave%3,i=0;i<4;i++)i<t?(this["imgLine"+i].visible=!0,this["imgLine"+i].width=60):i==t?(this["imgLine"+i].visible=!0,this["imgLine"+i].width=20*e):this["imgLine"+i].visible=!1},i.resetIconVisible=function(){this.imgIcon0.visible=this.imgIcon1.visible=this.imgIcon2.visible=this.imgIcon3.visible=this.imgIcon4.visible=!1},i.checkStepIsUp=function(){0<this.curWave&&this.curStep>this.oldStep&&0<this.curStep&&(this.imgTip.skin="modules/copyEternalSky/eternalSkyTip"+this.curStep+".png",this.imgTip.visible=!0,this.imgTip.scale(.5,.5,!0),ie.to(this.imgTip,{scaleX:1,scaleY:1},2e3,A.backOut,Q.create(this,this.tweenComplete,null,!0)))},i.tweenComplete=function(){this.imgTip.visible=!1},e}(),PT=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.eternalSky.view.CopyEternalSkyListItem",Sd);var i=e.prototype;return i.onClick=function(t){var e,i="";switch(t.target){case this.btn:6<=pe.myRegrow?("挑战"==this.btn.label&&Lr.ins().toMapChange(this._data.mapId),"领取"==this.btn.label&&(pe.gold>=Os.eternalSkyVO.cost?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(Os.eternalSkyVO.cost+"元宝","#F7EF5F")+Z.span("领取奖励？","#5d3924")+"<br>"+Z.span("（使用元宝领取奖励可额外获得幸运宝箱）","#5d3924"),nl.getInstance(),nl.getInstance().toBuyReward,null,"copyEternalGet"):this.toOpenChargePanel())):Jt.addTip(Os.eternalSkyVO.getLimitGrowLvl()+"转开启永恒星空副本");break;case this.imgIcon1:e=ur.getItem(10201231),i=ur.isEquip(10201231)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i);break;case this.imgIcon2:e=ur.getItem(10201237),i=ur.isEquip(10201237)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i)}},i.toOpenChargePanel=function(){var t;(!yt.isWX&&!yt.isQQ||ya.getChargeOpen())&&((t=new Ee).msg="你的元宝不足，是否前往充值？",t.yesLabel="充值",t.yesCaller=this,t.yesFun=this.openChargePanel,EF.showVO(t))},i.openChargePanel=function(){Bt.isFanTi?me.linkTo(11454,1):me.linkTo(11454)},i.update=function(t){this._data=t;var e=6<=pe.myRegrow;this.imgIcon1.skin="modules/copyEternalSky/eternalSkyBX2.png";var i=As.getCopyTime(10400);i&&0<i.finished_times?(this.imgBg.skin="modules/copyEternalSky/image/eternalSkyItemBg2.png",this.txtTimes.visible=!1,this.imgIcon2.visible=this.spMoney.visible=!0,this.txtMoney.text=t.cost+"",this.btn.label="领取",this.updateRedPoint(!1),0<Ns.buyRewardTimes?(this.btn.visible=!1,this.txtTip.visible=!0,this.spMoney.visible=!1,this.imgBg.skin="modules/copyEternalSky/image/eternalSkyItemBg1.png",this.imgIcon2.visible=!1):(this.btn.visible=e,this.txtTip.visible=!1,this.spMoney.visible=!0,this.imgBg.skin="modules/copyEternalSky/image/eternalSkyItemBg2.png",this.imgIcon2.visible=!0)):(this.imgBg.skin="modules/copyEternalSky/image/eternalSkyItemBg1.png",this.txtTimes.visible=e,this.imgIcon2.visible=this.spMoney.visible=this.txtTip.visible=!1,this.txtTimes.text="今天可挑战次数："+(t.times-i.finished_times)+"次",this.btn.label="挑战",this.btn.visible=e,this.updateRedPoint(6<=pe.myRegrow)),this.txtLimit.visible=!e,this.txtLimit.visible&&(this.txtLimit.text=Os.eternalSkyVO.getLimitGrowLvl()+"转开启")},i.updateRedPoint=function(t){this.imgRedPoint.visible=t},e}(),TT=function(t){function e(){this.baseItem=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!1,"",!1),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.eternalSky.view.CopyEternalSkyResultPanel",xd);var i=e.prototype;return i.goldGet=function(){nl.getInstance().toBuyReward(),this.closeWindow(),el.ins().toExit()},i.onClick=function(t){switch(t.target){case this.btnRight:pe.gold>=Os.eternalSkyVO.cost?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(Os.eternalSkyVO.cost+"元宝","#F7EF5F")+Z.span("领取奖励？","#5d3924")+"<br>"+Z.span("（使用元宝领取奖励可额外获得幸运宝箱）","#5d3924"),this,this.goldGet,null,"copyEternal"):Lo.showAlert();break;case this.btnLeft:this.closeWindow(),el.ins().toExit();break;case this.spCostGoods:var e="";e=ur.isEquip(10201237)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP";var i=ur.getItem(10201237);i.tempNum=1,Ae.show(i,e)}},i.openChargePanel=function(){me.linkTo(11454)},i.update=function(){var t=Math.floor(Ns.wave/3),e=Os.getEternalSkyBarrierByStep(t);this.baseItem=this.baseItem||new Ah(105,105,!0,!0,!0,!1),this.baseItem.dataSource=[e.typeId,1],this.baseItem.pos(-35,0),this.spBaseGoods.addChild(this.baseItem);var i=Os.eternalSkyVO;this.txtGold.text=i.cost+"",this.imgIcon.skin="modules/copyEternalSky/icon"+t+".png"},e}(),kT=function(t){function e(){this.loopTime=0,e.__super.call(this),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.commonCopy.eternalSky.view.CopyEternalSkyTopView",Cd);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopUpdateTime)},i.update=function(){this.loopTime=As.shutDownTime-ya.serverTime,_t.addToSecond(this,this.loopUpdateTime)},i.loopUpdateTime=function(){0<this.loopTime?(this.txtTime.text=x.formatTotalHMS(this.loopTime),this.loopTime--):_t.removeFromSceond(this,this.loopUpdateTime)},e}(),AT=function(t){function e(){this.eternalSkyListItem=null,this.teamCopyItem=null,this.talimanCopyItem=null,this.loveCopyItem=null,this.strangeFireItem=null,this.zhuXianRoadEnterItem=null,e.__super.call(this),this.list.vScrollBar.autoHide=!0}w(e,"modules.commonCopy.eternalSky.view.CopyEternalSkyView",Pd);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){var t=[];this.eternalSkyListItem=this.eternalSkyListItem||new PT,this.eternalSkyListItem.update(Os.eternalSkyVO),t.push({vo:Os.eternalSkyVO,item:this.eternalSkyListItem}),this.teamCopyItem||(this.teamCopyItem=new jT,Nt.register("RP_TEAM_COPY",this.teamCopyItem,new Tt(-5,80))),this.teamCopyItem.dataSource=Os.teamCopyVO,t.push({vo:Os.teamCopyVO,item:this.teamCopyItem}),this.loveCopyItem||(this.loveCopyItem=new OT,Nt.register("RP_LOVE_COPY",this.loveCopyItem,new Tt(-5,80))),this.loveCopyItem.dataSource=Os.loveCopyVO,t.push({vo:Os.loveCopyVO,item:this.loveCopyItem}),this.strangeFireItem||(this.strangeFireItem=new sk),this.strangeFireItem.update(Os.strangeFireCopyVO),t.push({vo:Os.strangeFireCopyVO,item:this.strangeFireItem}),this.talimanCopyItem=this.talimanCopyItem||new ak,this.talimanCopyItem.update(Os.talimanCopyVO),t.push({vo:Os.talimanCopyVO,item:this.talimanCopyItem}),this.zhuXianRoadEnterItem||(this.zhuXianRoadEnterItem=new tk),this.zhuXianRoadEnterItem.dataSource=Os.zhuXianRoadCopyVO,t.push({vo:Os.zhuXianRoadCopyVO,item:this.zhuXianRoadEnterItem}),t.sort(this.sortItem);for(var e,i=0,s=0;s<t.length;s++)i=200*s,(e=t[s].item).pos(0,i),e.parent||this.list.addChild(e)},i.sortItem=function(t,e){return t.vo.getLimitGrowLvl()-e.vo.getLimitGrowLvl()},e}(),ET=function(t){function e(){this._data=null,this.clip=null,this.coldTime=0,e.__super.call(this),this.clip=b.getOne(),this.clip.pos(165,235),this.spClip.addChild(this.clip),this.on("undisplay",this,this.onUndisplay),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.godHood.view.CopyGodHoodForbiddenItem",Td);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:Lr.ins().toMapChange(this._data.mapId)}},i.onUndisplay=function(){_t.removeFromSceond(this,this.loopColdTime)},i.update=function(t,e){if(void 0===e&&(e=0),this._data=t,this.coldTime=e,t){this.txtName.text=t.name,this.txtCondicion.text=t.openDesc1,this.txtReward.text=t.reward+"/次";var i=0;Zn.godHoodLv==Zn.getHoodGetMaxLV()?Zn.godHoodLv==t.id?0<Vs.challengTimes?(this.btn.disabled=!1,this.btn.label="挑战",_t.removeFromSceond(this,this.loopColdTime)):0<e?(0<(i=this.coldTime-ya.serverTime)&&(this.btn.disabled=!0,this.btn.label=x.formatTime(i)),_t.addToSecond(this,this.loopColdTime)):this.btn.disabled=!1:(this.btn.disabled=!0,this.btn.label="挑战"):Zn.godHoodLv>=t.id?0<Vs.challengTimes?(this.btn.disabled=!1,this.btn.label="挑战",_t.removeFromSceond(this,this.loopColdTime)):0<e?(0<(i=this.coldTime-ya.serverTime)&&(this.btn.disabled=!0,this.btn.label=x.formatTime(i)),_t.addToSecond(this,this.loopColdTime)):this.btn.disabled=!1:(this.btn.disabled=!0,this.btn.label="未开启"),Zn.godHoodLv==Zn.getHoodGetMaxLV()&&Zn.godHoodLv-1==t.id?this.imgState.visible=!0:this.imgState.visible=!1,this.clip.loadAndPlay("unit/monster/"+t.monster+"_3","stand",3,!0)}},i.loopColdTime=function(){var t=this.coldTime-ya.serverTime;0<t?(this.btn.disabled=!0,this.btn.label=x.formatTime(t)):(this.btn.disabled=!1,this.btn.label="挑战",_t.removeFromSceond(this,this.loopColdTime),Vs.nextReviveTs=0)},e}(),RT=function(t){function e(){this.curItem=null,this.nextItem=null,e.__super.call(this),this.curItem=new ET,this.curItem.pos(0,0,!0),this.spItems.addChild(this.curItem),this.nextItem=new ET,this.nextItem.pos(362,0,!0),this.spItems.addChild(this.nextItem),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.godHood.view.CopyGodHoodForbiddenView",kd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgUp:pt.send(114,2,"仙阶-八荒禁地-仙阶标签跳转按钮"),me.linkTo(11802);break;case this.btnUse:pt.send(114,3,"仙阶-八荒禁地-使用按钮"),me.linkTo(11804)}},i.update=function(){var t,e;this.curItem.visible=this.nextItem.visible=!0,this.txtScore.text=""+pe.getScore(14),this.txtName.color=Zn.getGodHoodStageColorByLv(Zn.godHoodLv),this.txtName.text=Zn.godHoodLv+"阶-"+Zn.getGodHoodStageNameByLv(Zn.godHoodLv),this.imgUp.visible=!0,0<Zn.godHoodLv&&(Zn.godHoodLv<Zn.getHoodGetMaxLV()?(t=Vs.getForbiddenVOById(Zn.godHoodLv),e=Vs.getForbiddenVOById(Zn.godHoodLv+1),this.txtDesc.text=t.openDesc2,Vs.nextReviveTs>ya.serverTime?this.curItem.update(t,Vs.nextReviveTs):(this.curItem.update(t),Vs.nextReviveTs=0),this.nextItem.update(e)):Zn.godHoodLv==Zn.getHoodGetMaxLV()?(this.imgUp.visible=!1,t=Vs.getForbiddenVOById(Zn.godHoodLv-1),e=Vs.getForbiddenVOById(Zn.godHoodLv),this.txtDesc.text=e.openDesc2,this.curItem.update(t),Vs.nextReviveTs>ya.serverTime?this.nextItem.update(e,Vs.nextReviveTs):(this.nextItem.update(e),Vs.nextReviveTs=0)):this.curItem.visible=this.nextItem.visible=!1,this.imgIcon.skin="modules/godhood/img/hood"+Zn.godHoodLv+".png")},e}(),OT=function(t){function e(){this._vo=null,this.items=null,e.__super.call(this);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.btn.on("click",this,this.onClick),this.txtTip.visible=this.imgIcon2.visible=this.spMoney.visible=this.txtTip.visible=this.redPoint=!1}w(e,"modules.commonCopy.loveCopy.view.LoveCopyEnterItem",t);var i=e.prototype;return i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.onClick=function(t){if(null!=this.vo)switch(this.btn.label){case"挑战":me.linkTo(10609)}},I(0,i,"uiClass",function(){return"CopyEternalSkyListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this.vo=t,this.vo){this.items=this.items||[];for(var e,i,s=Math.max(this.vo.rewardArr.length,this.items.length),n=this.vo.rewardArr,o=0;o<s;o++)o<this.vo.rewardArr.length?(this.items[o]=this.items[o]||new fh(null,!0,!0,105,!1),e=this.items[o],i=String(n[o]).split(":"),e.data=ur.getItem(i[0]),e.on("click",this,this.onTip),e.pos(40+117*o,70),this.addChild(e)):this.items[o]&&this.items[o].parent&&this.items[o].removeSelf();this.txtMoney.text="",this.imgBg.skin=this.vo.itemBg,this.txtTimes.visible=this.vo.isOpen(),this.txtTimes.visible&&(0==Ms.challengeTimes?this.txtTimes.text="今天可挑战次数：1次":this.txtTimes.text="今天可挑战次数：0次"),this.btn.visible=this.vo.isOpen(),this.txtLimit.visible=!this.vo.isOpen(),this.txtLimit.visible&&(this.txtLimit.text=this.vo.getLimitGrowLvl()+"转开启")}}),I(0,i,"vo",function(){return this._vo},function(t){this._vo=t}),I(0,i,"redPoint",function(){return this.imgRedPoint.visible},function(t){this.imgRedPoint.visible=t}),e}(Sd),LT=function(t){function e(){this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.godHood.view.CopyGodHoodStoryEnterConfirmPanel",Ad);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnOk:Lr.ins().toMapChange(Vs.curGodHoodVO.mapId),this.closeWindow();break;case this.btnCancel:case this.btnClose:this.closeWindow()}},i.update=function(){this.txtName.text="第"+Vs.curGodHoodVO.id+"章"+k.getEmpty(1)+Vs.curGodHoodVO.name,this.spRewards.removeChildren();var t,e,i=Vs.curGodHoodVO.rewardList;this.items=this.items||[];for(var s=0;s<i.length;s++)this.items[s]=this.items[s]||new Ah(91,110,!1,!0,!0,!0,110),(t=this.items[s]).x=110*s,this.spRewards.addChild(t),e=i[s],t.dataSource=[e.typeId,e.num];this.spRewards.width=110*i.length,this.spRewards.x=(700-this.spRewards.width)/2},e}(),DT=function(t){function e(){this._data=null,e.__super.call(this),this.imgBg.on("loaded",this,this.onLoadedFun)}w(e,"modules.commonCopy.godHood.view.CopyGodHoodStoryEnterItem",t);var i=e.prototype;return i.onLoadedFun=function(){null!=this.imgBg.source&&(this.width=this.imgBg.width,this.height=this.imgBg.height,this.txtName.pos(10,10,!0),this.txtDesc.pos(this.txtName.x,this.txtName.y+this.txtName.textHeight+15,!0),this.imgRP.pos(this.width-20,-9,!0),this.imgState.pos(this.width-112,40,!0))},i.update=function(){this.imgBg.skin="modules/godhoodCopy/img/"+this._data.id+".png",this.txtName.text="第"+this._data.id+"章"+k.getEmpty(1)+this._data.name,this.txtDesc.text=this._data.desc,Vs.openedMaxChapter>=this._data.id?this.gray=!1:this.gray=!0,Vs.passedMaxChapter>=this._data.id?this.imgState.visible=!0:this.imgState.visible=!1,this._data.id==Vs.passedMaxChapter+1&&Vs.openedMaxChapter>=this._data.id?this.imgRP.visible=!0:this.imgRP.visible=!1},I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Ed),NT=function(t){function e(){this.curPage=0,this.items=null,e.__super.call(this),this.txtDesc.innerHTML=Z.span("完成","#5d3924",26)+Z.span("6章","#139604",26)+Z.span("剧情副本开启","#5d3924",26)+Z.span("强大仙阶","#139604",26),this.on("click",this,this.onClick),this.initItems()}w(e,"modules.commonCopy.godHood.view.CopyGodHoodStoryView",Rd);var i=e.prototype;return i.initItems=function(){var t;this.items=this.items||[];for(var e=0;e<6;e++)t=new DT,this.items.push(t)},i.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight()}},i.onClickItem=function(t){if(t.target instanceof modules.commonCopy.godHood.view.CopyGodHoodStoryEnterItem){var e=t.target.data;e&&(Vs.passedMaxChapter>=e.id?Jt.addTip("已完成的章节不可再挑战"):Vs.openedMaxChapter>=e.id&&e.id>Vs.passedMaxChapter+1?Jt.addTip("请先通关剧情副本第"+(e.id-1)+"章"):Vs.openedMaxChapter<e.id?Jt.addTip("达到修仙之路"+e.customLevel+"关解锁本章节"):(Vs.curGodHoodVO=e,ol.ins().showEnterConfirmPanel()))}},i.turnLeft=function(){0<this.curPage&&(this.curPage--,this.update())},i.turnRight=function(){this.curPage<Vs.maxPage&&(this.curPage++,this.update())},i.checkBtnVisible=function(){this.btnLeft.visible=0!=this.curPage,this.btnRight.visible=this.curPage==Vs.maxPage},i.update=function(){var t,e,i=Vs.getGodHoodVOsByPage(this.curPage);this.spItems.removeChildren();for(var s=0;s<i.length;s++)t=this.items[s],this.spItems.addChild(t),e=i[s],t.dataSource=e,t.pos(e.posPoint.x,e.posPoint.y,!0),t.on("click",this,this.onClickItem);this.checkBtnVisible(),6<=Vs.passedMaxChapter?this.imgOpen.visible=!0:this.imgOpen.visible=!1},e}(),VT=function(t){var e;function i(){this._vo=null,this.note=null,this.goalBar=null,this.bloodTxt=null,this._monsterID=NaN,i.__super.call(this),this.initGoalPart(),this.escapeTxt.style.fontSize=20,this.escapeTxt.style.align="right",this.escapeTxt.style.color="#ffff00",this.note=new e(this.txtBest.width),this.note.x=this.txtBest.x,this.note.y=this.txtBest.y+this.txtBest.height+1,this.addChild(this.note),this.txtBest.on("click",this,this.onClick),this.btn.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(i,"modules.commonCopy.loveCopy.view.LoveCopyBossBlood",Od);var s=i.prototype;return s.onUndisplay=function(){},s.onDisplay=function(){this.checkShow()},s.initGoalPart=function(){this.goalBar=new At,this.goalBar.bar.skin="modules/loveCopy/bar2.png",this.goalBar.sizeGrid="0,5,0,5,0",this.goalBar.width=240,this.goalBar.height=10,this.goalBar.x=73,this.goalBar.y=17,this.goalPart.addChild(this.goalBar),this.bloodTxt=new jt,this.bloodTxt.width=240,this.bloodTxt.fontSize=16,this.bloodTxt.align="center",this.bloodTxt.color="#ffffff",this.bloodTxt.pos(73,15),this.goalPart.addChild(this.bloodTxt)},s.reset=function(){this.bmpHead.skin="",this.txtName.text="",this.txtLv.text="",this.txtMy.text="",this.txtBest.text="",this.goalPart.visible=this.note.visible=!1,this.imgArrow.skin="modules/loveCopy/arrowDown.png"},s.checkShow=function(t){ua.isRegrowBossMap()?this.goalPart.visible=!0:this.goalPart.visible=!1},s.onClick=function(t){this.imgArrow.skin="modules/loveCopy/arrowDown.png"==this.imgArrow.skin?"modules/loveCopy/arrowUp.png":"modules/loveCopy/arrowDown.png",this.note.visible="modules/loveCopy/arrowUp.png"==this.imgArrow.skin,this.goalPart.alpha=this.note.visible?0:1},s.updateBlood=function(t){if(this.vo){var e=Math.floor(1e9*(this.vo.maxBlood-t)/this.vo.maxBlood)/10,i=this.binGetIndex(0,1e4,e)+1,s=(i*i-1e8*(this.vo.maxBlood-t)/this.vo.maxBlood)/(2*i-1);this.numTxt.text="×"+(1e4-i),0<s?(this.bossBar1.visible=!0,this.bossBar1.width=596*s):this.bossBar1.visible=!1,this.bossBar1.skin="modules/loveCopy/bar"+(1e4==i?6:i%5+1)+".png",i++,this.bossBar0.skin=1e4<i?null:"modules/loveCopy/bar"+(1e4==i?6:i%5+1)+".png"}},s.checkInFun=function(t,e){return e<t*t?-1:(t+1)*(t+1)<=e?1:0},s.binGetIndex=function(t,e,i){var s=Math.floor((t+e)/2);return 1<e-t?this.checkInFun(s,i)<0?this.binGetIndex(t,s,i):0<this.checkInFun(s,i)?this.binGetIndex(s,e,i):s:s},s.updateGoal=function(t,e){this.vo&&this.vo.id==t&&e&&(this.imgHead.skin="com/head/tiny"+e.category+e.sex+".png",this.txtGoalInfo.text=e.pal_name,this.goalBar.value=e.hp/e.max_hp,this.bloodTxt.text=e.hp+"/"+e.max_hp)},s.updatePeopleFight=function(){var t=Ms.myHistoryHurt,e=Ms.myCurHurt;t<e&&(t=e),this.txtMy.text="历史最高："+Ms.getBigNumberShowStr(t,2),this.txtBest.text="伤害量："+Ms.getBigNumberShowStr(e,2)},s.updateMulBossHurt=function(){var t=As.getBossHurtArrByID(this._vo.id);if(t){if(0<t.length){var e=t[0].role_id==pe.roleID?pe.roleName:t[0].role_name;this.txtBest.text=e+"："+W.getShortenPowerStr(t[0].hurt),this.txtBest.color=pe.roleID==t[0].role_id?"#f4f1b2":"#c29d88"}this.note.update(t)}},I(0,s,"bossID",null,function(t){this._vo=Ts.getBossVO(t),this.vo&&(this.txtName.text=this.vo.bossName,this.txtLv.text=this.vo.showBossLvStr2,this.bmpHead.skin=this.vo.headUrl)}),I(0,s,"vo",function(){return this._vo}),I(0,s,"monsterID",function(){return this._monsterID},function(t){this._monsterID=t}),i.__init$=function(){e=function(t){function e(t){this.w=0,this.startY=3,this.itemH=25,this.items=null,this._data=null,this.bg=null,this.spItem=null,e.__super.call(this),this.items=this.items||[],this.w=t,this.bg=new Wt,this.addChild(this.bg),this.bg.alpha=.8,this.spItem=new Wt,this.addChild(this.spItem)}w(e,"",Wt);var i=e.prototype;return i.update=function(t){if(this.putInPool(),this._data=t,this._data&&1<this._data.length){for(var e,i,s=1;s<this._data.length;s++)e=this._data[s],i=this.getItem(),e&&(i.text=e.family_name+"："+W.getShortenPowerStr(e.damage),i.color=pe.user.attr.family_id==e.family_id?"#f4f1b2":"#c29d88"),i.y=(s-1)*this.itemH+this.startY,this.spItem.addChild(i);this.drawBg()}else this.bg.graphics.clear()},i.drawBg=function(){this._data&&(this.bg.graphics.clear(),this.bg.graphics.drawRect(0,0,this.w,(this._data.length-1)*this.itemH+this.startY,"#110b0d"))},i.getItem=function(){this.items=this.items||[];var t=this.items.shift();return null==t&&((t=Me.createText("",0,0,this.w,this.itemH,this.spItem,H.defaultTextFormat)).align="right",t.color="#c29d88",t.fontSize=22),t},i.putInPool=function(){for(var t;0<this.spItem.numChildren;)t=this.spItem.getChildAt(0),this.items.push(t.removeSelf())},e}()},i}(),BT=function(t){function e(){this._curSelectSp=null,this._curSelectIndex=0,this._selectSpList=null,this._curScale=NaN,this._scaleSpeed=NaN,this._evaluateList=null,this._isEnd=!1,this._effect=null,this._curAdditionRate=NaN,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.initView(),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyFlowerSkillInteractiveView",dx);var i=e.prototype;return i.onDisplay=function(t){this.on("undisplay",this,this.unDisplay),this.resetView(),_t.addToTimer(this,this.onTick)},i.unDisplay=function(t){this.off("undisplay",this,this.unDisplay),_t.removeFromTimer(this,this.onTick)},i.onClick=function(t){if(t.target==this._curSelectSp&&!this._isEnd){this._curSelectSp&&(this._effect.pos(this._curSelectSp.x+this._curSelectSp.width/2,this._curSelectSp.y+this._curSelectSp.height/2),this._effect.loadAndPlay("moduleEffect/changeover","default",0));var e=this.checkEvaluate();this.setEvaluate(e)}},i.showEvaluateTips=function(t){var e=this.getEvaluateTipsImg(t),i=(lt.stageWidth-e.width)/2,s=lt.stageHeight/2+1,n=s-150;Fs.showFloatImg(e,i,s,i,n)},i.checkEvaluate=function(){for(var t,e,i=0;i<Bs.FLOWER_SKILL_EVALUATE_SCALE.length;i++){t=Bs.FLOWER_SKILL_EVALUATE_SCALE[i];for(var s=0;s<t.length;s++)if((e=t[s])[0]<=this._curScale&&this._curScale<e[1])return Bs.FLOWER_SKILL_EVALUATE_LIST[i]}return 1},i.initView=function(){var t;this._selectSpList=[];for(var e=0;e<4;e++)t=this["_img"+e],this._selectSpList.push(t);this._evaluateList=[],this._selectImg.pivotX=this._selectImg.width/2,this._selectImg.pivotY=this._selectImg.height/2,this._selectImg.mouseEnabled=!1,this._effect=b.getOne(),this._effect.mouseEnabled=!1,this.addChild(this._effect),this._isEnd=!1},i.resetView=function(){this._evaluateList.length=0,this.txtPower.text="0%",this._curAdditionRate=0,this._curSelectIndex=-1,this._scaleSpeed=80/3e3,this.switchTarget(),this._isEnd=!1},i.onTick=function(){this._curScale-=this._scaleSpeed,this.updateView(),this._curScale<=0&&this.setEvaluate(1)},i.updateView=function(){this._selectImg.scaleX=this._selectImg.scaleY=this._curScale},i.switchTarget=function(){this._curScale=1,this._curSelectIndex++,this._curSelectSp=this._selectSpList[this._curSelectIndex],this._selectImg.pos(this._curSelectSp.x+this._curSelectSp.width/2,this._curSelectSp.y+this._curSelectSp.height/2),this.updateView()},i.setEvaluate=function(t){this.showEvaluateTips(t),this.updateAddition(t),this._evaluateList.push(t),4==this._evaluateList.length?(_t.removeFromTimer(this,this.onTick),al.ins.toSendFlowerSkillEvaluate(this._evaluateList),this._isEnd=!0):this.switchTarget()},i.getEvaluateTipsImg=function(t){return new et("modules/loveCopy/eva"+t+".png")},i.updateAddition=function(t){this._curAdditionRate+=Ms.getFlowerSkillAdditionByEva(t),this.txtPower.text=this._curAdditionRate+"%"},e.NUM=4,e}(),MT=function(t){function e(){e.__super.call(this),this.txtSkill.style.align="center",this.left=NaN,this.right=0,this.bottom=350}return w(e,"modules.commonCopy.loveCopy.view.LoveCopyFlowerSkillPowerView",Ld),e.prototype.updateTips=function(t,e){var i;i=Z.font("千花神诀","#96f254",20)+Z.font("威力：","#e1c6bc",20)+Z.font(t.toFixed()+"%","#fcf476",20)+"<br>",i+=Z.font("我方伤害","#96f254",20)+Z.font("加成：","#e1c6bc",20)+Z.font(e.toFixed()+"%","#fcf476",20),this.txtSkill.innerHTML=i},e.RIGHT_X=0,e.RIGHT_Y=350,e}(),FT=function(t){function e(){this.friendItems=null,this.curItem=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.list.vScrollBarSkin="",this.list.vScrollBar.autoHide=!0}w(e,"modules.exercise.biography.view.ExerBiographyIssueFriendListPanel",Dd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btn:this.clickHandler()}},i.clickHandler=function(){if(this.curItem){var t=pe.roleName+"邀请你参加";switch(hn.bountyStar){case 10:t+="初级";break;case 11:t+="中级";break;case 12:t+="高级"}t+="悬赏。"+Z.linkcolor("【点击参与】","biographyCopyBountyEnter#10804#"+pe.roleID,!1),Za.ins().toInPairs(this.curItem.data.role_id,t,10),this.closeWindow()}else Jt.addTip("请选择要邀请的好友！")},i.update=function(){var t;this.list.removeChildren(),this.friendItems=this.friendItems||[];for(var e=0,i=0,s=jn.getOnlineFriends(),n=0;n<s.length;n++)e=Math.floor(n/2),i=n%2,(t=(t=this.friendItems[n])||new dE).pos(10+350*i,115*e+10),this.list.addChild(t),t.dataSource=jn.friends[n],t.on("click",this,this.onClickItem),t.isSelected(!1),0==n&&(t.isSelected(!0),this.curItem=t)},i.onClickItem=function(t){if(this.curItem=t.target,this.curItem&&this.curItem.data){for(var e=0;e<this.list.numChildren;e++)this.list.getChildAt(e).isSelected(!1);this.curItem.isSelected(!0)}},e}(),UT=function(t){function e(){this.bg=null,this.imgSkill=null,this.txtName=null,this.txtType=null,this.txtUp=null,this.spDown=null,this.btnSel=null,this.img4=null,this.img5=null,this.img6=null,this.img3=null,this.img2=null,this.img1=null,e.__super.call(this)}return w(e,"ui.modules.petEmbattle.PetFightSkillTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/petEmbattle/PetFightSkillTip")},e}(),GT=function(t){function e(){this._mapId=0,this._selIndex=-1,this._readyView=null,this._rankView=null,this._rewardView=null,e.__super.call(this),this.setWindowType(),this._readyView=new KT,this._rankView=new YT,this._rewardView=new zT,this.tab.itemClickFun=Q.create(this,this.checkChangeTab),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyPanel",Nd);var i=e.prototype;return i.setData=function(t,e){this._mapId=t,this.checkChangeTab(-1),this.checkChangeTab(e)},i.updateView=function(){switch(this.spView.removeChildren(),this._selIndex){case 0:this._readyView.mapId=this._mapId,this.spView.addChild(this._readyView),this._readyView.updateView();break;case 1:this.spView.addChild(this._rankView),al.ins.toGetRankInfo();break;case 2:this.spView.addChild(this._rewardView),this._rewardView.updateView()}},i.checkChangeTab=function(t){this.tab.selectedIndex=t},i.onTabChange=function(t){this.tab.selectedIndex!=this._selIndex&&(this._selIndex=this.tab.selectedIndex,this.updateView())},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.closeWindow=function(){if(1<Ms.teamRoles.length){var t=new Ee;t.msg="离开本界面将退出队伍，请问是否离开？",t.yesCaller=this,t.yesLabel="离开",t.yesFun=this.toExit,EF.showVO(t)}else this.toExit()},i.toExit=function(){laya.ui.View.prototype.closeWindow.call(this),al.ins.leaveTeam()},i.updateReadyView=function(){this._readyView&&this._readyView.parent&&this._readyView.updateView()},i.updateRankView=function(){this._rankView&&this._rankView.parent&&this._rankView.updateView()},e}(),HT=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}return w(e,"modules.commonCopy.loveCopy.view.LoveCopyRankExplainPanel",Vd),e.prototype.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},e}(),WT=function(t){function e(){this.blueVip1=null,this.blueYear1=null,this.blueVip2=null,this.blueYear2=null,e.__super.call(this),this.blueVip1=this.blueVip1||new et,this.blueYear1=this.blueYear1||new et,this.blueVip2=this.blueVip2||new et,this.blueYear2=this.blueYear2||new et,this.blueVip1.visible=this.blueYear1.visible=this.blueVip2.visible=this.blueYear2.visible=!1,this.addChild(this.blueVip1),this.addChild(this.blueYear1),this.addChild(this.blueVip2),this.addChild(this.blueYear2)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRankItem",Bd);var i=e.prototype;return i.updateBlueVip=function(t){var e=(t=t||"").split("_"),i="",s="";2==e.length&&(i=e[0],s=e[1]),Qa.ins().showVipByString(i,this.blueVip1,this.blueYear1,this.txtName.x+30,this.txtName.y+30),Qa.ins().showVipByString(s,this.blueVip2,this.blueYear2,this.txtName.x+30,this.txtName.y+65)},I(0,i,"data",null,function(t){if(t){var e;switch(t.row_id){case 3:e="#FF99FF";break;case 2:e="#FF9900";break;case 1:e="#FFFF00";break;default:e="#FFFFCC"}this.txtRank.color=e,this.txtRank.text=t.row_id+"",this.txtName.color=e;var i=String(t.elements[0]).split("&");this.txtName.text=i[0]+"\n"+i[1];var s=parseFloat(t.elements[1]);this.txtHurt.text=Ms.getBigNumberShowStr(s,2),this.txtHurt.color=this.txtName.color=this.txtRank.color=e,this.updateBlueVip(t.elements[2])}}),e}(),qT=function(t){function e(){e.__super.call(this)}return w(e,"modules.commonCopy.loveCopy.view.LoveCopyRankScoreItem",Md),I(0,e.prototype,"data",null,function(t){t?(this.txtHurt.text=t.score,this.txtReward.text=t.rewardNum):(this.txtHurt.text="",this.txtReward.text="")}),e}(),YT=function(t){function e(){this._helpPanel=null,this.items=null,e.__super.call(this),this.pan.vScrollBar.hide=!0,this.btnHelp.on("click",this,this.onClickHelp)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRankView",Fd);var i=e.prototype;return i.updateView=function(){var t=jo.getRankVO(1203);if(null!=t){var e;this.items=this.items||[];for(var i=Math.max(this.items.length,t.rows.length),s=0;s<i;s++)s<t.rows.length?(this.items[s]=this.items[s]||new WT,(e=this.items[s]).data=t.rows[s],e.pos(0,115*s),this.pan.addChild(e)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf()}else xr.ins().toGetRank(1203)},i.onClickHelp=function(t){this._helpPanel=this._helpPanel||new HT,this._helpPanel.openWindow()},e}(),XT=function(t){function e(){this.btnClose=null,this.btnYes=null,this.btnNo=null,this.imgB=null,this.txtHas0=null,this.txtHas1=null,this.txtHas2=null,this.txtName=null,this.txtTip=null,this.txtInput=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetDiscardAlertViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetDiscardAlertView")},e}(),KT=function(t){function e(){this.chatFamily=null,this.chatWorld=null,this.chatNotice=null,this.callCD=0,this._mapId=0,this.items=null,this._leaderRoleItem=null,this._npcRoleItem=null,this._teammateRoleItem=null,this._rulePanel=null,e.__super.call(this),this.initRoleItem(),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.chatTab.itemClickFun=Q.create(this,this.checkOpen),this.chatTab.on("change",this,this.onChatTabChanged)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyReadyView",Ud);var i=e.prototype;return i.initRoleItem=function(){this._leaderRoleItem=this.getRoleItemParam(0),this._npcRoleItem=this.getRoleItemParam(1),this._teammateRoleItem=this.getRoleItemParam(2)},i.getRoleItemParam=function(t){var e=Bs.ROLE_POS_DATA_LIST[t],i=new $T;return i.pos(e.x,e.y),i.scale(e.scale,e.scale),i.zOrder=e.zor,i.roleID=-1,this.spRole.addChild(i),i},i.onChatTabChanged=function(){switch(this.chatTab.selectedIndex){case 0:this.chatFamily&&this.chatFamily.removeSelf(),this.chatNotice&&this.chatNotice.removeSelf(),this.chatWorld=this.chatWorld||new uP,this.chatWorld.list.width=636,this.chatWorld.hideEmoji(),this.spChat.addChild(this.chatWorld),ws.curChannel=1e4,this.chatWorld.update();break;case 1:this.chatWorld&&this.chatWorld.removeSelf(),this.chatNotice&&this.chatNotice.removeSelf(),this.chatFamily=this.chatFamily||new lP,this.chatFamily.list.width=636,this.chatFamily.hideEmoji(),this.spChat.addChild(this.chatFamily),ws.curChannel=2e4,this.chatFamily.update();break;case 2:this.chatWorld&&this.chatWorld.removeSelf(),this.chatFamily&&this.chatFamily.removeSelf(),this.chatNotice=this.chatNotice||new eT,this.spChat.addChild(this.chatNotice),ws.curChannel=3e4,this.chatNotice.update()}},i.checkOpen=function(t){1==t?pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?this.chatTab.selectedIndex=t:Jt.addTip("请先加入仙盟"):Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):this.chatTab.selectedIndex=t},i.onDisplay=function(t){T.register("WINDOWS_INDEX_CHANGE",this,this.onIndexChange),T.register("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.register("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.register("CHAT_UPDATE_TO_NOTICE_FIGHT",this,this.updateNoticeChatPanelMsg),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){ws.curChannel=1e4,T.remove("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.remove("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.remove("CHAT_UPDATE_TO_NOTICE_FIGHT",this,this.updateNoticeChatPanelMsg),T.remove("WINDOWS_INDEX_CHANGE",this,this.onIndexChange),_t.removeFromSceond(this,this.secLoop),Jt.hideTipType(1),this.off("undisplay",this,this.onUndisplay)},i.onIndexChange=function(){1==re.checkIsTop(this)?Jt.showTipType(1):Jt.hideTipType(1)},i.updateChatPanelMsg=function(t){1==this.chatTab.selectedIndex&&null!=this.chatFamily&&this.chatFamily.parent&&this.chatFamily.onMessage(t)},i.updateWorldChatPanelMsg=function(t){0==this.chatTab.selectedIndex&&null!=this.chatWorld&&this.chatWorld.parent&&this.chatWorld.onMessage(t)},i.updateNoticeChatPanelMsg=function(t){null!=this.chatNotice&&this.chatNotice.parent&&this.chatNotice.update()},i.updateView=function(){this.items=this.items||[];for(var t,e,i=Os.loveCopyVO.rewardArr,s=Math.max(i.length,this.items.length),n=0;n<s;n++)n<i.length?(this.items[n]=this.items[n]||new Ah(105,100,!0,!0,!0,!1,105),(t=this.items[n]).pos(155+135*n,18),e=String(i[n]).split(":"),t.dataSource=parseInt(e[0]),2==e.length?(t.showNum=!0,t.num=parseInt(e[1])):t.showNum=!1,t.text.visible=!1,this.imgRw.addChild(t)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf();this._leaderRoleItem.roleID=Ms.leaderID;var o,a=0;for(var l in Ms.teamRoles)if((o=Ms.teamRoles[l])!=Ms.leaderID){a=o;break}this._teammateRoleItem.roleID=a,this._npcRoleItem.updateNpcAvatar(),1<Ms.teamRoles.length?this.btnFind.disabled=!0:ya.serverTime<this.callCD?(this.btnFind.disabled=!0,Ms.leaderID==pe.roleID?(this.btnFind.label="冷却中（"+(this.callCD-ya.serverTime)+"s）",_t.addToSecond(this,this.secLoop)):(this.btnFind.label="一键招募",_t.removeFromSceond(this,this.secLoop))):(this.btnFind.disabled=Ms.leaderID!=pe.roleID,this.btnFind.label="一键招募",_t.removeFromSceond(this,this.secLoop)),this.btnReady.label=1==Ms.getRoleReady(pe.roleID)?"取消准备":"准备",this.imgRp.visible=0==Ms.getRoleReady(pe.roleID),this.chatTab.selectedIndex=-1,this.chatTab.selectedIndex=0},i.onClick=function(t){switch(t.target){case this.btnFind:this.findTeammate();break;case this.btnReady:this.changeReadyState();break;case this.btnHelp:this.showRulePanel()}},i.findTeammate=function(){if(ya.serverTime>=this.callCD){var t="我正准备前往"+Os.loveCopyVO.copyName+"，求一强力队友！";t+=Z.linkcolor("【进入队伍】","loveCopy#"+Ms.teamID,!1),Za.ins().toSendMsg(1e4,t,8),Jt.addTip("招募信息发送成功"),this.callCD=ya.serverTime+5,_t.addToSecond(this,this.secLoop)}},i.changeReadyState=function(){1==Ms.getRoleReady(pe.roleID)?al.ins.toRoleCopyTeamReady(0):al.ins.toRoleCopyTeamReady(1)},i.secLoop=function(){ya.serverTime>=this.callCD?(_t.removeFromSceond(this,this.secLoop),this.btnFind.label="一键招募",this.btnFind.disabled=1<Ms.teamRoles.length):(this.btnFind.disabled=!0,this.btnFind.label="冷却中("+(this.callCD-ya.serverTime)+"s)")},i.showRulePanel=function(){this._rulePanel=this._rulePanel||new ZT,this._rulePanel.openWindow()},I(0,i,"mapId",null,function(t){this._mapId=t,ws.curChannel=2e4,this.chatTab.selectedIndex=-1,this.chatTab.selectedIndex=0}),e}(),jT=function(t){function e(){this._vo=null,this.items=null,e.__super.call(this);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.btn.on("click",this,this.onClick),this.txtTip.visible=this.imgIcon2.visible=this.spMoney.visible=this.txtTip.visible=this.redPoint=!1}w(e,"modules.commonCopy.teamCopy.TeamCopyItem",t);var i=e.prototype;return i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.onClick=function(t){if(null!=this.vo)switch(this.btn.label){case"挑战":T.dispatch("OPEN_COPYSEL_VIEW",this.vo.mapID),pt.send(115,1,"副本-经脉副本")}},I(0,i,"uiClass",function(){return"CopyEternalSkyListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this.vo=t,this.vo){this.items=this.items||[];for(var e,i=Math.max(this.vo.rewardArr.length,this.items.length),s=0;s<i;s++)s<this.vo.rewardArr.length?(this.items[s]=this.items[s]||new fh(null,!0,!0,105,!1),(e=this.items[s]).data=ur.getItem(this.vo.rewardArr[s]),e.on("click",this,this.onTip),e.pos(40+117*s,70),this.addChild(e)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf();this.txtMoney.text="",this.imgBg.skin=this.vo.itemBg,Ws.myStepInfo?(this.txtTimes.visible=!0,0==Ws.myStepInfo.is_challenge?this.txtTimes.text="今天可挑战次数：1次":this.txtTimes.text="今天可挑战次数：0次"):this.txtTimes.visible=!1}}),I(0,i,"vo",function(){return this._vo},function(t){this._vo=t}),I(0,i,"redPoint",function(){return this.imgRedPoint.visible},function(t){this.imgRedPoint.visible=t}),e}(Sd),QT=function(t){function e(){this.items=null,e.__super.call(this)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRewardDisplayItem",Gd);var i=e.prototype;return I(0,i,"data",null,function(t){if(t){var e;switch(t.id){case 3:e="#FF99FF";break;case 2:e="#FF9900";break;case 1:e="#FFFF00";break;default:e="#FFFFCC"}this.txtRank.color=e,null==t.rankStr||""==t.rankStr?this.txtRank.text=t.id.toString():this.txtRank.text=t.rankStr,this.items=this.items||[];for(var i,s,n=t.rewardArr,o=Math.max(n.length,this.items.length),a=0,l=0;l<o;l++)l<n.length?(this.items[l]=this.items[l]||new Ah(105,100,!0,!0,!0,!1,105),(i=this.items[l]).pos(135*l,0),s=String(n[l]).split(":"),i.dataSource=parseInt(s[0]),2==s.length?(i.showNum=!0,i.num=parseInt(s[1])):i.showNum=!1,i.text.visible=!1,this.boxGoods.addChild(i),a+=135):this.items[l]&&this.items[l].parent&&this.items[l].removeSelf();this.boxGoods.x=330-a/2}}),I(0,i,"uiClass",function(){return"LoveCopyRewardItem"}),e}(),zT=function(t){function e(){this.items=null,e.__super.call(this),this.pan.vScrollBar.hide=!0}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRewardDisplayView",Hd);var i=e.prototype;return i.updateView=function(){this.items=this.items||[];var t=Os.loveCopyRankRewardList;t.sort(this.sort);for(var e,i=Math.max(t.length,this.items.length),s=0;s<i;s++)s<t.length?(this.items[s]=this.items[s]||new QT,(e=this.items[s]).pos(0,125*s),e.data=t[s],this.pan.addChild(e)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf()},i.sort=function(t,e){return t.id-e.id},e}(),$T=function(t){function e(){this._roleID=0,this.role=null,this._npcPSkin=null,this._blueVipShowPart=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.btnFind.on("click",this,this.onClick)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRoleItem",Wd);var i=e.prototype;return i.updateNpcAvatar=function(){this._npcPSkin||(this._npcPSkin=new Object,this._npcPSkin.className="p_skin",this._npcPSkin.body=260000001),this.txtName.color="#f4f1b2",this.txtName.text="花仙子",this.updateAvatar(this._npcPSkin,2),this.btnFind.visible=!1,this.imgReady.visible=!1},i.onClick=function(){T.dispatch("LOVE_COPY_OPEN_INVITE_PANEL")},i.onDisplay=function(){T.register("ON_OTHERROLE_INFO",this,this.checkRoleUpdate),this.updateRole()},i.checkRoleUpdate=function(t){this._roleID==t&&this.updateRole()},i.updateRole=function(){if(0<this._roleID){var t;this.btnFind.visible=!1;var e=NaN;if(this._roleID==pe.roleID)t=pe.pals[0].ext.skin,e=pe.pals[0].ext.sex,this.txtName.color="#ffe100",this.txtName.text=pe.roleName,this.updateBlueVipShow(pe.getRoleBlueVipInfo());else if(bo.isNeedRequest(this._roleID))T.dispatch("TO_ROLE_INFO",this._roleID),this.txtName.text="";else{var i=bo.getRankRoleData(this._roleID);i?(t=i.pals[0].pal.ext.skin,e=i.pals[0].pal.ext.sex,this.txtName.color="#f4f1b2",this.txtName.text=i.role_name,this.updateBlueVipShow(i.blue_vip)):this.txtName.text=""}t&&this.updateAvatar(t,e),this.imgReady.visible=1==Ms.getRoleReady(this._roleID)}else this.imgReady.visible=!1,this.btnFind.visible=!0,this.role&&this.role.parent&&this.role.removeSelf(),this.txtName.text="",this.updateBlueVipShow()},i.updateAvatar=function(t,e){this.role=this.role||new Vh,this.role.resetSkin(t,e,!0),this.role.resetState(0),this.role.play("stand",4),this.spRole.addChild(this.role)},i.updateBlueVipShow=function(t){if(t){this._blueVipShowPart=this._blueVipShowPart||new Rh;var e=new ms;e.nameText=this.txtName,e.blueInfo=t,this.addChild(this._blueVipShowPart),this._blueVipShowPart.updateShowing(e)}else this._blueVipShowPart&&this._blueVipShowPart.removeSelf()},I(0,i,"roleID",null,function(t){this._roleID=t,this.updateRole()}),e}(),ZT=function(t){function e(){this._items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.pan.vScrollBar.hide=!0,this.initView(),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.loveCopy.view.LoveCopyRulePanel",qd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},i.initView=function(){this._items=this._items||[];for(var t,e=Os.loveCopyRankScoreList,i=Math.max(this._items.length,e.length),s=0;s<i;s++)s<e.length?(this._items[s]=this._items[s]||new qT,(t=this._items[s]).data=e[s],t.pos(0,55*s),this.pan.addChild(t)):this._items[s]&&this._items[s].parent&&this._items[s].removeSelf()},e}(),JT=function(t){function e(t){this._curCdTime=0,this._skillType=0,this._effect=null,e.__super.call(this),this._skillType=t,this.spMask.removeSelf(),this.imgBar.mask=this.spMask,this._effect=b.getOne(),this._effect.mouseEnabled=!1,this.addChild(this._effect),this._effect.pos(70,65),2==t&&(this.btn.skin="modules/loveCopy/shieldIce.png"),this.updateBar(0),this.on("display",this,this.onDisplay)}w(e,"modules.commonCopy.loveCopy.view.LoveCopySkillShieldItem",Yd);var i=e.prototype;return i.onDisplay=function(){T.register("ENTER_MAP",this,this.resetState),this.btn.on("click",this,this.onClick),this.on("undisplay",this,this.onUnDisplay),_t.addToTimer(this,this.onTick)},i.onUnDisplay=function(){T.remove("ENTER_MAP",this,this.resetState),_t.removeFromTimer(this,this.onTick),this.btn.off("click",this,this.onClick),this.off("undisplay",this,this.onUnDisplay)},i.resetState=function(){ua.isLoveCopyMap()||this.removeSelf()},i.onClick=function(t){this.curCdTime+=200,this._effect&&"PLAY"!=this._effect.state&&this._effect.loadAndPlay("moduleEffect/changeover","default",0)},i.updateBar=function(t){var e=360*(1-t);this.spMask.graphics.clear(),this.spMask.graphics.drawPie(67,67,70,-90+e,270,"#000000")},i.onTick=function(){this.curCdTime-=20},I(0,i,"curCdTime",function(){return this._curCdTime},function(t){this._curCdTime=t,2e3<=this._curCdTime&&(this._curCdTime=2e3),this._curCdTime<=0&&(this._curCdTime=0);var e=this._curCdTime/2e3;this.updateBar(e),1<=e&&(al.ins.toSwitchShield(this._skillType),this.curCdTime=0)}),e}(),tk=function(t){function e(){this._vo=null,this.items=null,e.__super.call(this);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,Nt.register("RP_ZHUXIAN_COPY",this.btn,new Tt(19,-10)),this.btn.on("click",this,this.onClick),this.txtTip.visible=this.imgIcon2.visible=this.spMoney.visible=this.txtTip.visible=this.redPoint=!1}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianRoadEnterItem",t);var i=e.prototype;return i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.onClick=function(t){if(null!=this.vo)switch(this.btn.label){case"挑战":me.linkTo(10612)}},I(0,i,"uiClass",function(){return"CopyEternalSkyListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this.vo=t,this.vo){this.items=this.items||[];for(var e,i,s=Math.max(this.vo.rewardArr.length,this.items.length),n=this.vo.rewardArr,o=0;o<s;o++)o<this.vo.rewardArr.length?(this.items[o]=this.items[o]||new fh(null,!0,!0,105,!1),e=this.items[o],i=String(n[o]).split(":"),e.data=ur.getItem(i[0]),e.on("click",this,this.onTip),e.pos(40+117*o,70),this.addChild(e)):this.items[o]&&this.items[o].parent&&this.items[o].removeSelf();this.txtMoney.text="",this.imgBg.skin=this.vo.itemBg,this.txtTimes.visible=this.vo.isOpen(),this.txtTimes.visible&&(this.txtTimes.text=""),this.btn.visible=this.vo.isOpen(),this.txtLimit.visible=!this.vo.isOpen(),this.txtLimit.visible&&(this.txtLimit.text=this.vo.getLimitGrowLvl()+"转开启")}}),I(0,i,"vo",function(){return this._vo},function(t){this._vo=t}),I(0,i,"redPoint",function(){return this.imgRedPoint.visible},function(t){this.imgRedPoint.visible=t}),e}(Sd),ek=function(t){function e(){this._fireItem=null,this._iceItem=null,e.__super.call(this),this._fireItem=new JT(1),this._fireItem.pos(36,30),this.addChild(this._fireItem),this._iceItem=new JT(2),this._iceItem.pos(220,30),this.addChild(this._iceItem)}return w(e,"modules.commonCopy.loveCopy.view.LoveCopySkillShieldView",Xd),e}(),ik=function(t){function e(){this._curLeftTime=0,this._curSkillTips=null,e.__super.call(this),this.txtSkill.style.align="center"}w(e,"modules.commonCopy.loveCopy.view.LoveCopySkillTipsView",Kd);var i=e.prototype;return i.updateTips=function(t){var e,i,s;13==t?(this.left=NaN,this.right=0,this.bottom=350,this.imgBg.skin="modules/loveCopy/skillTipsBgRight.png",i="#96f254",e="花仙子",s="千花神诀"):(this.right=NaN,this.left=0,this.bottom=600,this.imgBg.skin="modules/loveCopy/skillTipsBg.png",i="#fd8e8e",e="蚀灵邪树",s=12==t?"寒霜冰封":"红莲业火"),this._curSkillTips=Z.font(e,i)+Z.font("准备释放","#e1c6bc")+"<br>"+Z.font(s,"#fcf476"),this._curSkillTips+=Z.font("({0}s)","#e1c6bc"),this._curLeftTime=5,_t.removeFromSceond(this,this.updateTime),_t.addToSecond(this,this.updateTime),this.updateTime()},i.updateTime=function(){this._curLeftTime<=0&&_t.removeFromSceond(this,this.updateTime),this.txtSkill.innerHTML=Xt.format(this._curSkillTips,this._curLeftTime),this._curLeftTime--},e.COOR_X=0,e.LEFT_Y=600,e.RIGHT_Y=350,e}(),sk=function(t){function e(){this.items=null,e.__super.call(this),Nt.register("RP_COPY_STRANGE_FIRE",this.btn,new Tt(19,-10)),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.strangeFire.view.CopyStrangeFireEnterItem",jd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:rl.ins().openEnterPanel()}},i.update=function(t){if(t){if(Os.strangeFireCopyVO&&pe.myRegrow>=Os.strangeFireCopyVO.getLimitGrowLvl()){var e=0,i=0,s=Gs.infoToc;if(s){e=s.ticket;var n=Os.getStrangeFireCopyBarrierVo(s.boss_barrier);n&&(i=n.times)}this.txtNum.text="挑战次数："+e+"/"+i,this.txtLimit.visible=!1,this.txtNum.visible=this.btn.visible=!0}else this.txtNum.visible=this.btn.visible=!1,this.txtLimit.visible=!0,this.txtLimit.text=t.getLimitGrowLvl()+"转开启";var o;this.items=this.items||[];for(var a=0;a<t.rewardList.length;a++){this.items[a]=this.items[a]||new fh(null,!0,!0,105),o=this.items[a];var l=parseInt(t.rewardList[a]),r=ur.getItem(l);o.data=r,o.on("click",this,this.onTip),o.pos(12+117*a,22),o&&null==o.parent&&this.spReward.addChild(o)}}},i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},e}(),nk=function(t){function e(){this.bar=null,this.time=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.bar=new p(0,0,120,18,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",18),this.spSchedule.addChild(this.bar),this.on("click",this,this.onClick),this.on("undisplay",this,this.unDisplay)}w(e,"modules.commonCopy.strangeFire.view.CopyStrangeFireEnterPanel",Qd);var i=e.prototype;return i.unDisplay=function(){_t.removeFromSceond(this,this.updateTxtTime)},i.onClick=function(t){var e,i=0;switch(t.target){case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.btnBoss:Gs.infoToc&&(i=Gs.infoToc.boss_barrier),e=Os.getStrangeFireCopyBarrierVo(i),Lr.ins().toMapChange(e.bossMapId);break;case this.btnEnter:Gs.infoToc&&0<Gs.infoToc.ticket?(i=Gs.infoToc.boss_barrier,e=Os.getStrangeFireCopyBarrierVo(i),Lr.ins().toMapChange(e.baseMapId)):Jt.addTip("挑战次数不足");break;case this.imgQuick:rl.ins().openQuickFinishPanel()}},i.update=function(){var t,e=0,i=0,s=0,n=0;this.time=0,Gs.infoToc&&(e=Gs.infoToc.boss_barrier,this.time=Gs.infoToc.count_down,i=Gs.infoToc.ticket,s=Gs.infoToc.complete_times);var o=Os.getStrangeFireCopyBarrierVo(e);if(o){n=o.barrierTimes,this.txtNameL.text="异火圣域 Lv."+e,this.txtScoreL.text=o.scoreList[1]+Ft.getScoreName(parseInt(o.scoreList[0]))+" /次",(t=ur.getItem(o.rewardObj.typeId))&&(this.txtRewardL.text=t.name+"×"+o.rewardObj.num),this.txtNum.text="挑战次数："+i+"/"+o.times,s=s>o.barrierTimes?o.barrierTimes:s,this.bar.setValue(s,o.barrierTimes);var a=Ts.getBossVO(o.bossMonsterId);a&&(this.imgHead.skin=a.headUrl),e<10&&s==o.barrierTimes?this.btnBoss.disabled=!1:this.btnBoss.disabled=!0}if(e<10){var l=Os.getStrangeFireCopyBarrierVo(e+1);this.txtNameR.visible=this.txtScoreR.visible=this.txtRewardR.visible=!0,this.imgFull.visible=!1,this.txtDesc.text="累计通关"+n+"次异火圣域",this.txtDesc1.text="（Lv."+e+"）可挑战",this.txtNameR.text="异火圣域 Lv."+(e+1),this.txtScoreR.text=l.scoreList[1]+Ft.getScoreName(parseInt(l.scoreList[0]))+" /次",(t=ur.getItem(l.rewardObj.typeId))&&(this.txtRewardR.text=t.name+"×"+l.rewardObj.num)}else this.txtNameR.visible=this.txtScoreR.visible=this.txtRewardR.visible=!1,this.imgFull.visible=!0,this.txtDesc.text="异火圣域已满级",this.btnBoss.disabled=!0;0<this.time?(this.time=this.time-ya.serverTime,0<this.time?(this.txtTime.visible=!0,this.txtTime.text=x.formatTime(this.time)+"后恢复",_t.addToSecond(this,this.updateTxtTime)):this.txtTime.visible=!1):this.txtTime.visible=!1,this.updateLv(e),Gs.checkComRedPoint()?this.imgRedPointEnter.visible=!0:this.imgRedPointEnter.visible=!1,Gs.checkBossRedPoint()?this.imgRedPointBoss.visible=!0:this.imgRedPointBoss.visible=!1},i.updateLv=function(t){this.spLv.graphics.clear();for(var e,i=k.numToTexture(t,"modules/copyStrangeFire/"),s=0;s<i.length;s++)e=i[s],this.spLv.graphics.drawTexture(e,e.width*s)},i.updateTxtTime=function(){0<this.time?(this.time--,this.txtTime.text=x.formatTime(this.time)+"后恢复"):_t.removeFromSceond(this,this.updateTxtTime)},e}(),ok=function(t){function e(){this.COST_MONEY=200,this.bar=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.bar=new Gt("com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7]),this.bar.width=136,this.bar.posGrid=[1,0,1,0],this.bar.on("complete",this,this.onBarComplete),this.resetBar(),this.spEff.addChild(this.bar);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.bar.addChild(t),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.strangeFire.view.CopyStrangeFireQuickFinishPanel",zd);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnEnter:Gs.infoToc&&0<Gs.infoToc.ticket?pe.gold>=this.COST_MONEY?Lo.showSecAlert(Z.span("是否消耗","#5d3924")+Z.span(this.COST_MONEY+"元宝","#F7EF5F")+Z.span("快速挑战一次【异火圣域】？","#5d3924"),this,this.toQuickFinish,null,"CopyStrangeFireQuickFinishPanel.showSecAlert"):Lo.showAlert():Jt.addTip("挑战次数不足");break;case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.txtGoods:var e=ur.getItem(10309025);e&&Ae.show(e,"BASE_GOODS_TIP")}},i.resetBar=function(){this.bar.value=0,this.bar.visible=!1,this.bar.updateNow()},i.onBarComplete=function(){1==this.bar.value&&(rl.ins().toQuickFinish(),this.resetBar(),this.btnEnter.mouseEnabled=!0,this.btnEnter.gray=!1)},i.toQuickFinish=function(){this.bar.visible=!0,this.bar.value=1,this.btnEnter.mouseEnabled=!1,this.btnEnter.gray=!0},i.update=function(){if(Gs.infoToc){var t=Os.getStrangeFireCopyBarrierVo(Gs.infoToc.boss_barrier);t&&(this.txtNum.text="挑战次数："+Gs.infoToc.ticket+"/"+t.times)}},e}(),ak=function(t){function e(){this._data=null,e.__super.call(this),Nt.register("RP_COPY_TALIMAN",this.btn,new Tt(19,-10)),this.on("click",this,this.onClick),hl.ins().toInfo()}w(e,"modules.commonCopy.talimanCopy.view.TalimanCopyItem",$d);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:hl.ins().openEnterPanel()}},i.update=function(t){for(;0<this.sp.numChildren;)this.sp.removeChildAt(0);if(t){for(var e=t.rewards.split(","),i=0;i<e.length;i++){var s=e[i].split("|"),n=new fh(null,!0,!0,105),o=parseInt(s[0]);n.typeId=o,n.on("click",this,this.onTip),n.pos(12+117*i,22),n&&null==n.parent&&this.sp.addChild(n)}pe.myRegrow>=Os.talimanCopyVO.getLimitGrowLvl()&&(3<=Xs.curServerOpenDay||0<Xs.curCombineServerTimes)?(this.btn.visible=!0,this.txtLimit.visible=!1):(this.txtLimit.visible=!0,this.txtLimit.text="开服达3天且"+t.getLimitGrowLvl()+"转开启",this.btn.visible=!1)}},i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},e}(),lk=function(t){function e(){this.rewards=[],this.direction=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUNDisplay)}w(e,"modules.commonCopy.talimanCopy.view.TalimanCopyResultView",Zd);var i=e.prototype;return i.onUNDisplay=function(){_t.removeFromFrame(this,this.updatePos)},i.updatePos=function(){if(4<this.itemBox.numChildren){var t=this.itemBox.getChildAt(0).x,e=this.itemBox.getChildAt(this.itemBox.numChildren-1).x+170;if(0==t&&1!=this.direction?this.direction=1:e==this.itemBox.width&&2!=this.direction&&(this.direction=2),1==this.direction)for(var i=0;i<this.itemBox.numChildren;i++)this.itemBox.getChildAt(i).x+=-1;else for(var s=0;s<this.itemBox.numChildren;s++)this.itemBox.getChildAt(s).x+=1}},i.onDisplay=function(){_t.addToFrame(this,this.updatePos)},i.onClick=function(t){switch(t.target){case this.btn:case this.btn1:this.closeWindow()}},i.update=function(){var t=Hs.infoToc.current_barrier,e=Hs.infoToc.max_barrier;for(this.numTxt1.text="第"+t+"关",this.numTxt2.text="第"+e+"关";0<this.itemBox.numChildren;)this.itemBox.removeChildAt(0);this.rewards=Hs.sweepRewards;var i,s=[];for(var n in this.rewards){i=this.rewards[n];for(var o=!1,a=0;a<s.length;a++)if(s[a].id==i.id&&s[a].type==i.type){s[a].val+=i.val,o=!0;break}o||s.push(i)}var l=s.length;if(s&&0<l)for(var r=0;r<s.length;r++){var h=new Ah(90,90,!1,!0,!0,!1);h.dataSource=s[r],h.showNum=!0,h.y=10,h.x=105*r,this.itemBox.addChild(h)}},I(0,i,"uiClass",function(){return"TalimanCopyQuickFinishView"}),e}(),rk=function(t){function e(){this.rewards=null,this.curBarrierNum=NaN,this.isCanSweep=!1,this.MaxBarrierNum=NaN,this.tens_rewordNum=NaN,this.chapterNum=0,this.effect=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.talimanCopy.view.TalimanCopyView",Jd);var i=e.prototype;return i.onClick=function(t){var e=0,i=0;switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnFight:Hs.infoToc?101<=(e=Hs.infoToc.current_barrier)?Jt.addTip("恭喜你已通关玄法圣殿，后续关卡敬请期待！"):this.getReward.visible?Jt.addTip("请先领取十关首通奖励"):0!=(i=parseInt(Hs.getMapId(e)))&&(this.closeWindow(),il.ins().closeEnterPanel(),Lr.ins().toMapChange(i),Hs.firstEnter=!1):Jt.addTip("副本数据错误");break;case this.btnSweep:hl.ins().openQuickFinishPanel();break;case this.getReward:hl.ins().toChapterInfo()}},i.creatEffect=function(t){this.effect=this.effect||b.getOne(),this.effect.loadAndPlay("moduleEffect/tailsmannow","default",0,!0),this.effect.mouseEnabled=!1;var e;e=t%10==0?10:t%10,this.effect.pos(this["img"+e].x+59,this["img"+e].y+35),this.itemBox.addChild(this.effect)},i.changeBg=function(t){var e;(e=e||b.getOne()).loadAndPlay("unit/effect/talisman_"+t,"default",0,!0),e.mouseEnabled=!1,e.pos(6,88),this.skinSp.addChild(e)},i.update=function(){Hs.infoToc&&(this.curBarrierNum=Hs.infoToc.current_barrier,this.MaxBarrierNum=Hs.infoToc.max_barrier,this.tens_rewordNum=Hs.infoToc.tens_reword,this.isCanSweep=Hs.infoToc.can_quick_finish),this.curBarrierNum=101<=this.curBarrierNum?100:this.curBarrierNum,this.chapterNum=Math.floor((this.curBarrierNum-1)/10);for(var t=0;t<10;t++)this["mission"+(t+1)].text=10*this.chapterNum+t+1+"",this["img"+(t+1)].skin=this.curBarrierNum>=10*this.chapterNum+t+1?"modules/copyTaliman/item.png":"modules/copyTaliman/item_gray.png",this.curBarrierNum==10*this.chapterNum+t+1&&this.creatEffect(this.curBarrierNum);this.getReward.visible=!!Hs.GetTenRewards(),this.MaxBarrierNum<100&&!this.getReward.visible&&Hs.firstEnter?this.fightRp.visible=!0:this.fightRp.visible=!1,this.gold.visible=!(2<=yt.myVipLevel),this.imgVip2.x=2<=yt.myVipLevel?537:571,this.missionName.text="玄法圣殿-第"+this.curBarrierNum+"关",!this.isCanSweep||this.curBarrierNum>this.MaxBarrierNum||this.MaxBarrierNum<1||this.getReward.visible?(this.btnSweep.gray=!0,this.btnSweep.mouseEnabled=!1):(this.btnSweep.gray=!1,this.btnSweep.mouseEnabled=!0);var e=0;e=this.curBarrierNum>this.tens_rewordNum?Math.min(Math.floor(this.tens_rewordNum/10+1),10):Math.min(Math.floor(this.curBarrierNum/10+1),10),this.imgSkin.skin="modules/copyTaliman/img/skin_"+e+".png",this.imgName.skin="modules/copyTaliman/name_"+e+".png";var i=parseInt(Hs.getRewardsColor(e));for(this.changeBg(i),this.imgName.x=this.nameBg.width/2-this.imgName.width/2;0<this.sp.numChildren;)this.sp.removeChildAt(0);if(this.rewards=Hs.getRewards(this.curBarrierNum),this.rewards&&0<this.rewards.length)for(var s=0;s<this.rewards.length;s++){var n,o=new Ah(90,90,!1,!0,!0,!1),a=this.rewards[s].split("|");n=ur.getItem(a[0]),o.dataSource=n,o.hideGoodsName(),o.num=a[1],o.showNum=!0,o.y=10,o.x=100*s,this.sp.addChild(o)}},I(0,i,"isHideNav",function(){return!0}),e}(),hk=function(t){function e(){this.startTime=NaN,this._totalTime=NaN,this._monType=NaN,e.__super.call(this),this.spMask.removeSelf(),this.imgBar.mask=this.spMask,this.on("display",this,this.onDisplay)}w(e,"modules.commonCopy.teamCopy.BossRebornView",tp);var i=e.prototype;return i.onDisplay=function(){this.startTime=ya.serverTime,T.register("ENTER_MAP",this,this.resetState),_t.addToSecond(this,this.onSec),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("ENTER_MAP",this,this.resetState),_t.removeFromSceond(this,this.onSec),this.off("undisplay",this,this.onUnDisplay)},i.resetState=function(){ua.isTeamCopyMap()||this.removeSelf()},i.onSec=function(){var t=Ws.getReborn();t?this.data=t:(_t.removeFromSceond(this,this.onSec),this.removeSelf())},I(0,i,"data",null,function(t){this._monType!=t.monster_type&&(this._monType=t.monster_type,this._totalTime=t.born_ts-ya.serverTime);var e=(this._totalTime-t.born_ts+ya.serverTime)/this._totalTime*360;this.spMask.graphics.clear(),this.spMask.graphics.drawPie(62,62,65,-90+e,270,"#000000"),this.txtTime.text="出生倒计时："+(t.born_ts-ya.serverTime)+"s";var i=we.getMonsterVO(t.monster_type);i&&(this.imgHead.skin="unit/monster/"+i.skin+".png")}),e}(),uk=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtLevel1=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetFuseSkillTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetFuseSkillTip")},e}(),ck=function(t){function e(){this._roleID=NaN,this.role=null,this._blueVipShowPart=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.btnFind.on("click",this,this.onClick)}w(e,"modules.commonCopy.teamCopy.CopyReadyItem",ep);var i=e.prototype;return i.onClick=function(){T.dispatch("OPEN_COPY_ISSUEFRI_VIEW")},i.onDisplay=function(){T.register("ON_OTHERROLE_INFO",this,this.checkRoleUpdate),this.updateRole()},i.checkRoleUpdate=function(t){this._roleID==t&&this.updateRole()},i.updateRole=function(){if(0<this._roleID){var t;this.btnFind.visible=!1;var e=NaN;if(this._roleID==pe.roleID)t=pe.pals[0].ext.skin,e=pe.pals[0].ext.sex,this.txtName.color="#ffe100",this.txtName.text=pe.roleName,this.updateBlueVipShow(pe.getRoleBlueVipInfo());else if(bo.isNeedRequest(this._roleID))T.dispatch("TO_ROLE_INFO",this._roleID),this.txtName.text="";else{var i=bo.getRankRoleData(this._roleID);i?(t=i.pals[0].pal.ext.skin,e=i.pals[0].pal.ext.sex,this.txtName.color="#f4f1b2",this.txtName.text=i.role_name):this.txtName.text="",this.updateBlueVipShow(i.blue_vip)}t&&(this.role=this.role||new Vh,this.role.resetSkin(t,e,!0),this.role.resetState(0),this.role.play("stand",4),this.spRole.addChild(this.role)),this.imgReady.visible=1==Ws.getRoleReady(this._roleID)}else this.imgReady.visible=!1,this.btnFind.visible=!0,this.role&&this.role.parent&&this.role.removeSelf(),this.txtName.text="",this.updateBlueVipShow()},i.updateBlueVipShow=function(t){if(t){this._blueVipShowPart=this._blueVipShowPart||new Rh;var e=new ms;e.nameText=this.txtName,e.blueInfo=t,this.addChild(this._blueVipShowPart),this._blueVipShowPart.updateShowing(e)}else this._blueVipShowPart&&this._blueVipShowPart.removeSelf()},I(0,i,"roleID",null,function(t){this._roleID=t,this.updateRole()}),e}(),dk=function(t){function e(){this._data=null,this.items=null,this._sel=!1,e.__super.call(this)}w(e,"modules.commonCopy.teamCopy.CopySelectItem",ip);var i=e.prototype;return I(0,i,"sel",function(){return this._sel},function(t){this._sel=t,this.imgSel.visible=t}),I(0,i,"data",null,function(t){if(this._data=t,this._data){this.imgBg.skin=this._data.img,this.txtPow.text=W.getShortenPowerStr(this._data.needPow),this.items=this.items||[];for(var e,i=this._data.rwArr,s=Math.max(i.length,this.items.length),n=0;n<s;n++)n<i.length?(this.items[n]=this.items[n]||new Ah(105,105,!0,!0,!0,!1,105),(e=this.items[n]).pos(520-135*n,36),e.dataSource=i[n],this.addChild(e)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf();switch(this._data.subTxt){case"低":this.imgs1.visible=!0,this.imgs2.visible=this.imgs3.visible=!1;break;case"中":this.imgs1.visible=this.imgs2.visible=!0,this.imgs3.visible=!1;break;case"高":this.imgs1.visible=this.imgs2.visible=this.imgs3.visible=!0}}}),e}(),pk=function(t){function e(){this.spBox=null,this.btnLeft=null,this.btnRight=null,this.spCheck=null,this.box=null,this.chTxt=null,this.txtZZ=null,this.txtLink=null,this.txtName=null,this.txtBase=null,this.spStar=null,this.txtInit=null,this.notHasSkill=null,this.txtSkill=null,this.hasSkill=null,this.imgSkillBg=null,this.imgSkill=null,this.panel=null,this.txtDesc=null,this.txtHas=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetGetViewUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetGetView")},e}(),mk=function(t){function e(){this._copyMapID=NaN,this.items=null,this._selIndex=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txt.style.valign="top",this.txt.style.leading=12,this.txt.innerHTML=Z.font("每天只有","#3e1e0c")+Z.font("一次挑战次数","#fff959")+Z.font("，所有难度","#3e1e0c")+Z.font("共享挑战次数","#fff959")+Z.font("，挑战","#3e1e0c")+Z.font("失败不扣除次数","#fff959")+Z.font("，次数用完依然可以进行挑战，但没有奖励。","#3e1e0c")}w(e,"modules.commonCopy.teamCopy.CopySelectView",sp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnCreate:ul.ins.toRoleTeamCreateAndSet(this._selIndex+1);break;default:if(t.target instanceof modules.commonCopy.teamCopy.CopySelectItem){var e=this.items.indexOf(t.target);this.selIndex=e}}},I(0,i,"copyMapID",null,function(t){var e;this._copyMapID=t,this.items=this.items||[];for(var i=Os.getSelCopyVOArr(t),s=Math.max(i.length,this.items.length),n=0;n<s;n++)n<i.length?(this.items[n]=this.items[n]||new dk,(e=this.items[n]).pos(39,150+185*n),e.data=i[n],this.addChild(e)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf()}),I(0,i,"selIndex",null,function(t){if(this._selIndex=t,this.items)for(var e=0;e<this.items.length;e++)this.items[e].sel=e==this._selIndex}),e}(),fk=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtNeed=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetHuntGirlTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetHuntGirlTip")},e}(),_k=function(t){function e(){this.leftItem=null,this.rightItem=null,this.chatFamily=null,this.chatWorld=null,this.chatNotice=null,this.callCD=0,this._copyMapID=NaN,this._copySelArrs=null,this.items=null,this._selIndex=NaN,e.__super.call(this),this.setWindowType(),this.tab.on("change",this,this.onClickTab),this.tab.itemClickFun=Q.create(this,this.checkChangeStep),this.leftItem=new ck,this.rightItem=new ck,this.leftItem.pos(69,276),this.rightItem.pos(399,276),this.box.addChild(this.leftItem),this.box.addChild(this.rightItem),this.on("click",this,this.onClick),ws.curChannel=2e4,this.chatTab.on("change",this,this.onChangeTab),this.chatTab.selectedIndex=0,this.on("display",this,this.onDisplay),this.chatTab.itemClickFun=Q.create(this,this.checkOpen),this.box.addChild(this.btnFind),this.box.addChild(this.btnReady)}w(e,"modules.commonCopy.teamCopy.CopySelEnterView",np);var i=e.prototype;return i.onIndexChange=function(){1==re.checkIsTop(this)?Jt.showTipType(1):Jt.hideTipType(1)},i.checkOpen=function(t){1==t?pe.myLevel>=Ln.FAMILY_LEVEL?0<pe.user.attr.family_id?this.chatTab.selectedIndex=t:Jt.addTip("请先加入仙盟"):Jt.addTip("仙盟功能"+Ln.FAMILY_LEVEL+"级开启"):this.chatTab.selectedIndex=t},i.onDisplay=function(){T.register("WINDOWS_INDEX_CHANGE",this,this.onIndexChange),T.register("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.register("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.register("CHAT_UPDATE_TO_NOTICE_FIGHT",this,this.updateNoticeChatPanelMsg),this.on("undisplay",this,this.onUndisplay)},i.updateNoticeChatPanelMsg=function(t){null!=this.chatNotice&&this.chatNotice.parent&&this.chatNotice.update()},i.onUndisplay=function(){ws.curChannel=1e4,T.remove("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.remove("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.remove("CHAT_UPDATE_TO_NOTICE_FIGHT",this,this.updateNoticeChatPanelMsg),T.remove("WINDOWS_INDEX_CHANGE",this,this.onIndexChange),_t.removeFromSceond(this,this.secLoop),Jt.hideTipType(1),this.off("undisplay",this,this.onUndisplay)},i.updateChatPanelMsg=function(t){1==this.chatTab.selectedIndex&&null!=this.chatFamily&&this.chatFamily.parent&&this.chatFamily.onMessage(t)},i.updateWorldChatPanelMsg=function(t){0==this.chatTab.selectedIndex&&null!=this.chatWorld&&this.chatWorld.parent&&this.chatWorld.onMessage(t)},i.onChangeTab=function(){switch(this.chatTab.selectedIndex){case 0:this.chatFamily&&this.chatFamily.removeSelf(),this.chatNotice&&this.chatNotice.removeSelf(),this.chatWorld=this.chatWorld||new uP,this.chatWorld.list.width=636,this.chatWorld.hideEmoji(),this.spChat.addChild(this.chatWorld),ws.curChannel=1e4,this.chatWorld.update();break;case 1:this.chatWorld&&this.chatWorld.removeSelf(),this.chatNotice&&this.chatNotice.removeSelf(),this.chatFamily=this.chatFamily||new lP,this.chatFamily.list.width=636,this.chatFamily.hideEmoji(),this.spChat.addChild(this.chatFamily),ws.curChannel=2e4,this.chatFamily.update();break;case 2:this.chatWorld&&this.chatWorld.removeSelf(),this.chatFamily&&this.chatFamily.removeSelf(),this.chatNotice=this.chatNotice||new eT,this.spChat.addChild(this.chatNotice),ws.curChannel=3e4,this.chatNotice.update()}},i.closeWindow=function(){if(1<Ws.teamRoles.length){var t=new Ee;t.msg="离开本界面将退出队伍，请问是否离开？",t.yesCaller=this,t.yesLabel="离开",t.yesFun=this.toExit,EF.showVO(t)}else this.toExit()},i.secLoop=function(){ya.serverTime>=this.callCD?(_t.removeFromSceond(this,this.secLoop),this.btnFind.label="一键招募",this.btnFind.disabled=1<Ws.teamRoles.length):(this.btnFind.disabled=!0,this.btnFind.label="冷却中("+(this.callCD-ya.serverTime)+"s)")},i.toExit=function(){laya.ui.View.prototype.closeWindow.call(this),ul.ins.toRoleTeamExit()},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnFind:if(ya.serverTime>=this.callCD&&this._copySelArrs){var e="我正准备前往"+this._copySelArrs[this.tab.selectedIndex].subTxt+"级难度的经脉副本，求一强力队友！";e+=Z.linkcolor("【进入队伍】","teamCopy#"+Ws.teamID,!1),Za.ins().toSendMsg(1e4,e,8),Jt.addTip("招募信息发送成功"),this.callCD=ya.serverTime+5,_t.addToSecond(this,this.secLoop)}break;case this.btnReady:1==Ws.getRoleReady(pe.roleID)?ul.ins.toRoleCopyTeamReady(0):ul.ins.toRoleCopyTeamReady(1)}},i.checkChangeStep=function(t){if(Ws.leaderID==pe.roleID)if(1<Ws.teamRoles.length){var e=new Ee;e.msg="切换难度将取消所有准备状态，确定切换难度吗？",e.yesCaller=this,e.yesFun=this.chooseSelIndex,e.yesArgs=[t],EF.showVO(e)}else this.chooseSelIndex(t);else{var i;switch(t){case 0:i="低级";break;case 1:i="中级";break;case 2:i="高级"}(e=new Ee).msg="只有队长有权限更改难度，是否请求队长将难度切换为："+Z.font(i,"#ffffcc",26)+"?",e.yesCaller=ul.ins,e.yesFun=ul.ins.toRoleCopyTeamReqSet,e.yesArgs=[t+1],e.yesLabel="是",e.noLabel="否",EF.showVO(e)}},i.chooseSelIndex=function(t){this.tab.selectedIndex=t,0<=Ws.teamID?ul.ins.toRoleCopyTeamSet(t+1):Jt.addTip("队伍不存在")},i.onClickTab=function(){this._copyMapID,this.update()},i.update=function(){if(this._copySelArrs&&this._copySelArrs.length>this.tab.selectedIndex){var t=this._copySelArrs[this.tab.selectedIndex];this.txtLv.text=t.subTxt+"级难度",this.items=this.items||[];for(var e,i=t.rwArr,s=Math.max(i.length,this.items.length),n=0;n<s;n++)n<i.length?(this.items[n]=this.items[n]||new Ah(105,100,!0,!0,!0,!1,105),(e=this.items[n]).pos(155+135*n,18),e.dataSource=i[n],e.text.visible=!1,this.imgRw.addChild(e)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf()}var o;if(Ws.leaderID==pe.roleID)if(this.leftItem.roleID=pe.roleID,1<Ws.teamRoles.length)for(var a in Ws.teamRoles)(o=Ws.teamRoles[a])!=pe.roleID&&(this.rightItem.roleID=o);else this.rightItem.roleID=0;else this.rightItem.roleID=pe.roleID,this.leftItem.roleID=Ws.leaderID;1<Ws.teamRoles.length?this.btnFind.disabled=!0:ya.serverTime<this.callCD?(this.btnFind.disabled=!0,Ws.leaderID==pe.roleID?(this.btnFind.label="冷却中（"+(this.callCD-ya.serverTime)+"s）",_t.addToSecond(this,this.secLoop)):(this.btnFind.label="一键招募",_t.removeFromSceond(this,this.secLoop))):(this.btnFind.disabled=Ws.leaderID!=pe.roleID,this.btnFind.label="一键招募",_t.removeFromSceond(this,this.secLoop)),this.btnReady.label=1!=Ws.getRoleReady(pe.roleID)?"准备":"已准备",this.imgRp.visible=1<Ws.teamRoles.length&&1!=Ws.getRoleReady(pe.roleID)},I(0,i,"uiClass",function(){return"CopySelReadyView"}),I(0,i,"copyMapID",null,function(t){if(this._copyMapID!=t){this._copyMapID=t,this._copySelArrs=Os.getSelCopyVOArr(this._copyMapID);for(var e="",i=0;i<this._copySelArrs.length;i++)e+=this._copySelArrs[i].subTxt+"级",i!=this._copySelArrs.length-1&&(e+=",");this.tab.labels=e}}),I(0,i,"selIndex",null,function(t){this._selIndex=this.tab.selectedIndex=t}),e}(),gk=function(t){function e(){this.endTime=NaN,this._countDown=NaN,this._deaHandler=null,this._noHandler=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("undisplay",this,this.onUndisplay),this.btnNo.on("click",this,this.onClick)}w(e,"modules.commonCopy.teamCopy.CountDownView",op);var i=e.prototype;return i.onClick=function(){this._noHandler&&this._noHandler.run(),this.closeWindow()},i.onUndisplay=function(){_t.removeFromSceond(this,this.secLoop)},i.secLoop=function(){var t=S.now();if(t<this.endTime){var e=Math.floor((this.endTime-t)/1e3);this.txtTime.text=e+"s",this.setBar(436*e/this._countDown)}else _t.removeFromSceond(this,this.secLoop),this._deaHandler&&this._deaHandler.run(),this.setBar(0),this.closeWindow()},i.setBar=function(t){this.imgBar.width=t,this.imgBar.visible=0<t},i.showCountDown=function(t,e,i,s){var n=S.now();this.txt.text=t,this._countDown=e,this.endTime=1e3*e+n,this.secLoop(),_t.addToSecond(this,this.secLoop),this._deaHandler=i,this._noHandler=s,this.parent||this.openWindow()},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.commonCopy.teamCopy.CountDownViewUI._$SET_ins),e._ins=null,e}(),yk=function(t){function e(){this._data=null,this._key=-1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.txtSub.style.align="center"}w(e,"modules.commonCopy.teamCopy.TeamCopyResView",ap);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnQuit:case this.btnClose:case this.btn1:this.chooseAndClose(1);break;case this.btn2:90<=pe.gold?Lo.showSecAlert("是否花费"+Z.font("90元宝","#F7EF5F")+"三倍领取内力",this,this.chooseAndClose,[2]):Lo.showAlert();break;case this.btn3:120<=pe.gold?Lo.showSecAlert("是否花费"+Z.font("120元宝","#F7EF5F")+"五倍领取内力",this,this.chooseAndClose,[3]):Lo.showAlert()}},i.chooseAndClose=function(t){this._data&&1==this._data.is_first&&ul.ins.toRoleCopyTeamReward(t),ua.isTeamCopyMap()&&el.ins().toExit(),this.closeWindow()},i.onUnDisplay=function(){_t.removeFromSceond(this,this.onSec),0<=this._key&&(_t.clearTimeout(this._key),this._key=-1)},i.onSec=function(){if(this._data.finish_ts+180<=ya.serverTime)this.closeWindow(),ua.isTeamCopyMap()&&el.ins().toExit();else{var t,e=this._data.finish_ts+180-ya.serverTime;t=60<e?Math.floor(e/60)+"分钟":e+"秒",this.txtSub.innerHTML=Z.font("副本将于","#5d3924")+Z.font(t,"#b60202")+Z.font("后关闭，届时将","#5d3924")+Z.font("自动选择单倍领取","#e1c6bc")}},i.update=function(t){var e,i=(this._data=t).score,s=k.numToTexture(i,"modules/teamCopy/num");this.spPower.graphics.clear();for(var n=0;n<s.length;n++)e=s[n],this.spPower.graphics.drawTexture(e,e.width*n);var o=this.spPower.x+e.width*n-this.imgPower.x;this.imgPower.x=(626-o)/2,this.spPower.x=this.imgPower.x+216,1==t.is_first?(this.box.height=505,this.spFirst.visible=!0,this.spNoFir.visible=!1,_t.addToSecond(this,this.onSec)):(this.box.height=472,this.spFirst.visible=!1,this.spNoFir.visible=!0,_t.removeFromSceond(this,this.onSec),this._key=_t.setTimeout(this,this.closeWindow,null,18e4))},e}(),vk=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.title1.style.lineHeight=this.title2.style.lineHeight=this.title3.style.lineHeight=30,this.content1.style.lineHeight=this.content2.style.lineHeight=this.content3.style.lineHeight=33,this.title1.style.fontSize=this.title2.style.fontSize=this.title3.style.fontSize=26,this.content1.style.fontSize=this.content2.style.fontSize=this.content3.style.fontSize=24,this.title1.style.bold=this.title2.style.bold=this.title3.style.bold=!0,this.update()}w(e,"modules.commonCopy.zhuXianRoadCopy.RuleDesView",lp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.backBtn:this.closeWindow()}},i.update=function(){var t=Os.zhuXianRoadRuleVO;this.title1.innerHTML=t.title1,this.title2.innerHTML=t.title2,this.title3.innerHTML=t.title3,this.content1.innerHTML=t.content1,this.content2.innerHTML=t.content2,this.content3.innerHTML=t.content3,this.title2.y=this.content1.y+this.content1.contextHeight+35,this.content2.y=this.title2.y+this.title2.contextHeight+10,this.title3.y=this.content2.y+this.content2.contextHeight+35,this.content3.y=this.title3.y+this.title3.contextHeight+10},e}(),Ik=function(t){function e(){this._starBarrier=1,this._endBarrier=0,this._curEndBarrier=0,this.bar=null,this.finsihAuthoThrough=!1,this.boolAuthoThrough=!1,this.curValue=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._endBarrier=qs.maxStage,this._curEndBarrier=qs.maxStage,this.on("click",this,this.onClick),this.bar=new p(-12,0,290,0,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",20),this.spBar.addChild(this.bar),this.bar.visible=!1,this.bar.setTextvisible(!1),this.costNum.text=Os.zhuXianRoadCopyVO.sweepCost+"",this.update()}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianAutoThroughView",rp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.backBtn:this.closeWindow(),this.finsihAuthoThrough||this.cancelAutoThrough();break;case this.reduceBtn1:this.changeStarNum(!1);break;case this.reduceBtn2:this.changeEndNum(!1);break;case this.addBtn1:this.changeStarNum(!0);break;case this.addBtn2:this.changeEndNum(!0);break;case this.starSweepBtn:this.beginSweep()}},i.beginSweep=function(){for(var t=cl.ins().roadInfo.stage_info,e=0;e<t.length;e++)if(!t[e].is_reward&&this._starBarrier<=t[e].stage&&this._curEndBarrier>=t[e].stage){this.boolAuthoThrough=!0;var i=new Ee;return Os.zhuXianRoadCopyVO.sweepCost<=pe.gold?(i.msg="是否要花费"+Os.zhuXianRoadCopyVO.sweepCost+"元宝进行诛仙古路自动扫关？",i.yesCaller=this,i.yesFun=this.enterSweep,i.yesArgs=null):(i.msg="元宝不足",i.yesCaller=me,i.yesFun=me.linkTo,i.yesArgs=[11454]),void EF.showVO(i)}this.boolAuthoThrough=!1,Jt.addTip("所选关卡今日已完成，无需进行扫关")},i.enterSweep=function(){this.boolAuthoThrough?(this.starSweepBtn.label="正在扫关",this.starSweepBtn.disabled=!0,this.bar.visible=!0,this.bar.setValue(this.curValue,1),h.timer.frameLoop(1,this,this.proValChange)):Jt.addTip("所选关卡今日已完成，无需进行扫关")},i.sweepResult=function(t){0==t.err_code?(this.starSweepBtn.label="正在扫关",this.starSweepBtn.disabled=!0,this.bar.visible=!0,this.bar.setValue(this.curValue,1),h.timer.frameLoop(1,this,this.proValChange)):Jt.addTip("所选关卡今日已完成，无需进行扫关")},i.proValChange=function(){this.curValue=this.curValue+.0033,1<=this.curValue?(this.bar.setValue(1,1),h.timer.clearAll(this),this.bar.visible=!1,this.curValue=0,this.starSweepBtn.disabled=!1,this.starSweepBtn.label="开始扫关",cl.ins().toAutoInfo([this._starBarrier,this._curEndBarrier]),this.finsihAuthoThrough=!0):this.bar.setValue(this.curValue,1)},i.openReward=function(){cl.ins().autoRewardInfo&&(cl.ins().openthroughRewardView(cl.ins().autoRewardInfo.rewards),this.finsihAuthoThrough=!1)},i.cancelAutoThrough=function(){console.log("取消扫关"),this.bar.setValue(0,1),h.timer.clearAll(this),this.bar.visible=!1,this.curValue=0,this.starSweepBtn.disabled=!1,this.starSweepBtn.label="开始扫关",this.finsihAuthoThrough=!1},i.changeEndNum=function(t){t?this._endBarrier>this._curEndBarrier&&this._curEndBarrier++:this._starBarrier<this._curEndBarrier&&this._curEndBarrier--,this.update()},i.changeStarNum=function(t){t?this._starBarrier<this._curEndBarrier&&this._starBarrier++:1<this._starBarrier&&this._starBarrier--,this.update()},i.update=function(){this.starNum.text=this._starBarrier+"",this.endNum.text=this._curEndBarrier+"",this.totalNum.text="共："+(this._curEndBarrier-this._starBarrier+1)+"关("+(this._curEndBarrier-this._starBarrier+1)+"次)"},e}(),wk=function(t){function e(){this._dataId=0,this._isLastBarrier=!1,this._curChapter=0,this._isOpen=!1,this._isSelect=!1,this._starNum=0,e.__super.call(this)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianFlagItem",hp);var i=e.prototype;return i.update=function(){if(this.data){this.bg.visible=!this.isLastBarrier,this.build.visible=this.isLastBarrier;var t=Os.getBarrierVOById(this.data),e=cl.ins().roadInfo.stage_info;if(e&&0<e.length)for(var i=0;i<e.length;i++){if(this.data==e[i].stage){this.flagname.text=t.sectionName+"("+e[i].is_reward+"/1)";break}this.flagname.text=t.sectionName+"(0/1)"}else this.flagname.text=t.sectionName+"(0/1)";this.isOpen?this.isSelect?(this.bg.skin="modules/zhuXianRole/bottom2.png",this.flag.skin="modules/zhuXianRole/flag2.png",this.build.skin="modules/zhuXianRole/build"+this.curChapter+"1.png"):(this.bg.skin="modules/zhuXianRole/bottom1.png",this.flag.skin="modules/zhuXianRole/flag1.png",this.build.skin="modules/zhuXianRole/build"+this.curChapter+"0.png"):(this.bg.skin="modules/zhuXianRole/bottom3.png",this.flag.skin="modules/zhuXianRole/flag3.png",this.build.skin="modules/zhuXianRole/build"+this.curChapter+"2.png");for(i=0;i<3;i++)i<this.starNum?this["star"+(i+1)].skin="modules/zhuXianRole/star3.png":this["star"+(i+1)].skin="modules/zhuXianRole/star4.png"}},I(0,i,"isSelect",function(){return this._isSelect},function(t){this._isSelect=t}),I(0,i,"data",function(){return this._dataId},function(t){this._dataId=t,this.update()}),I(0,i,"isLastBarrier",function(){return this._isLastBarrier},function(t){this._isLastBarrier=t}),I(0,i,"curChapter",function(){return this._curChapter},function(t){this._curChapter=t}),I(0,i,"isOpen",function(){return this._isOpen},function(t){this._isOpen=t}),I(0,i,"starNum",function(){return this._starNum},function(t){this._starNum=t}),e}(),bk=function(t){function e(){this.imgLine=null,this.txtT=null,this.spPow=null,this.imgBg=null,this.imgGoods=null,this.imgPow=null,this.txtName=null,this.txtLevel=null,this.attrTxt=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.pet.PetSoulTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pet/PetSoulTip")},e}(),Sk=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianLevelItem",t);var i=e.prototype;return i.update=function(){this.data&&(this.data.isSelect?this.bg.skin="modules/zhuXianRole/btnLight.png":this.data.isGray?this.bg.skin="modules/zhuXianRole/btnGray.png":this.bg.skin="modules/zhuXianRole/btnNoGray.png",this.level.skin="modules/zhuXianRole/level"+this.data.curLevel+".png")},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data}),e}(up),xk=function(t){function e(){this.difficultArr=["简单","普通","困难","炼狱","修罗","灭世"],this.starNum=0,this.isOpen=!1,this.starInfoArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.rewardList.vScrollBarSkin="",this.rewardList.itemRender=Ah,this.rewardList.selectEnable=!0,this.rewardList.repeatX=2,this.rewardList.repeatY=3,this.rewardList.spaceX=-45,this.rewardList.spaceY=20,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianRoadColorInfoView",cp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:this.isOpen=!this.isOpen,this.update()}},i.onDisplay=function(){T.register("COPY_REWARD_TOC",this,this.removeTimeUpdate),this.starInfoArr=Os.zhuXianRoadCopyVO.starLevelArr(),this.curTime=0,this.isOpen=!1;var t=cl.ins().curChallengeDifindex;this.level.text="关卡难度："+this.difficultArr[t],this.rewardLb.visible=!1,this.rewardList.visible=!1,this.height=260,this.btn.y=158;for(var e=Os.getBarrierVOById(cl.ins().curChallengeStage).getRewardArr(),i=[],s=0;s<e.length;s++){var n=e[s];n.val==t+1&&i.push(n.id)}this.rewardList.dataSource=i,this.rewardList.selectedIndex=0,this.rewardList.scrollTo(0);for(s=0;s<this.rewardList.content._childs.length;s++)this.rewardList.content._childs[s].width=100,this.rewardList.content._childs[s].scale(.8,.8),this.rewardList.content._childs[s].y=this.rewardList.content._childs[s].height*(Math.ceil((s+1)/2)-1)+this.rewardList.spaceY*s+6;this.update(),this.updateTime(),_t.addToSecond(this,this.updateTime)},i.onUnDisplay=function(){T.remove("COPY_REWARD_TOC",this,this.removeTimeUpdate),this.removeTimeUpdate(),this.off("undisplay",this,this.onUnDisplay)},i.removeTimeUpdate=function(){_t.removeFromSceond(this,this.updateTime)},i.update=function(){this.isOpen?(this.rewardLb.visible=!0,this.rewardList.visible=!0,this.height=610,this.btn.y=508):(this.rewardLb.visible=!1,this.rewardList.visible=!1,this.height=260,this.btn.y=158)},i.updateTime=function(){if(this.starNum=1,this.starInfoArr&&0<this.starInfoArr.length)for(var t=0;t<this.starInfoArr.length;t++){var e=this.starInfoArr[t];if(this.curTime>=e.min&&this.curTime<=e.max){this.starNum=3-t;break}}this.timesStamp.text=x.formatTime(this.curTime),this.star1.skin=1<=this.starNum?"modules/zhuXianRole/star1.png":"modules/zhuXianRole/star2.png",this.star2.skin=2<=this.starNum?"modules/zhuXianRole/star1.png":"modules/zhuXianRole/star2.png",this.star3.skin=3<=this.starNum?"modules/zhuXianRole/star1.png":"modules/zhuXianRole/star2.png",++this.curTime},e}(),Ck=function(t){function e(){this.btnClose=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.PfAttentionPanelUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/PfAttentionPanel")},e}(),Pk=function(t){function e(){this.curChapterIndex=0,this.curBarrier=1,this.curMaxBarrier=1,this.curMaxDifficult=0,this.curDifficultIndex=0,this.completeHanlder1=null,this.curTotalBarrierInfo=null,this.flagItemArr=[],e.__super.call(this),this.setWindowType(),this.initDisplayList(),this.initEvent()}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianRoadView",dp);var i=e.prototype;return i.initDisplayList=function(){this.completeHanlder1=Q.create(this,this.updateBtnVisible1),this.chapterList.hScrollBarSkin="",this.chapterList.itemRender=Ak,this.chapterList.selectEnable=!0,this.chapterList.repeatX=4,this.chapterList.selectHandler=Q.create(this,this.onSelectChapter),this.chapterList.renderHandler=Q.create(this,this.onRenderChapterItem),this.chapterList.on("change",this,this.updateBtnVisible1),this.difficultyList.itemRender=Sk,this.difficultyList.selectEnable=!0,this.difficultyList.repeatX=6,this.difficultyList.spaceX=9,this.difficultyList.selectHandler=Q.create(this,this.onSelectedDifficulty),this.rewardList.hScrollBarSkin="",this.rewardList.itemRender=Ah,this.rewardList.selectEnable=!0,this.rewardList.repeatX=5,this.rewardList.spaceX=-50,this.rewardList.renderHandler=Q.create(this,this.onRenderRewardItem)},i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)},i.onDisplay=function(){this.curChapterIndex=0,this.setFirstRewardStage(),this.setFirstRewardDifficult(),this.update()},i.updateChatperList=function(){var t=Os.zhuXianRoadSectionVO;this.chapterList.dataSource=t,this.chapterList.scrollTo(this.curChapterIndex),this.updateBtnVisible1()},i.updateRewardList=function(){for(var t=Os.getBarrierVOById(this.curBarrier).getRewardArr(),e=[],i=0;i<t.length;i++){var s=t[i];s.val==this.curDifficultIndex+1&&e.push(s.id)}this.rewardList.dataSource=null,this.rewardList.dataSource=e;for(var n=0;n<this.rewardList.content._childs.length;n++)this.rewardList.content._childs[n].width=100,this.rewardList.content._childs[n].scale(.9,.9)},i.updateDifficultList=function(){for(var t=[],e=0;e<6;e++)e<this.curDifficultIndex?t.push({isSelect:!1,curLevel:e+1,isGray:e+1>this.curMaxDifficult}):e==this.curDifficultIndex?t.push({isSelect:!0,curLevel:this.curDifficultIndex+1,isGray:e+1>this.curMaxDifficult}):t.push({isSelect:!1,curLevel:e+1,isGray:e+1>this.curMaxDifficult});this.difficultyList.dataSource=null,this.difficultyList.dataSource=t;for(var i=0;i<this.difficultyList.content._childs.length;i++)this.difficultyList.content._childs[i].scale(.9,.9)},i.updateFlag=function(){for(var t=Os.zhuXianRoadSectionVO[this.curChapterIndex];0<this.flagItemArr.length;){var e=this.flagItemArr.shift();e&&e.removeSelf()}this.flagItemArr=[];for(var i=0,s=t.barriersArr().length;i<s;i++){var n=new wk;n.on("click",this,this.onFlagClick,[i]),this.flagItemArr.push(n),this.mapBg.addChild(n)}},i.setMaxData=function(){var t=qs.getStageInfo(),e=Os.zhuXianRoadSectionVO;this.curChapterIndex>=e.length?this.curChapterIndex=e.length-1:this.curChapterIndex;var i=e[this.curChapterIndex],s=i.id;this.curMaxDifficult=0;var n,o,a=this.curMaxBarrier=0,l=0;if(t)if(t[s])for(n=t[s],l=0;l<n.length;l++)(o=n[l]).stage>=this.curMaxBarrier&&(this.curMaxBarrier=o.stage,o.stage==this.curBarrier&&this.curMaxDifficult<o.difficulty&&(this.curMaxDifficult=o.difficulty),a=o.star);else t[s-1]&&(this.curMaxBarrier=qs.maxStage);var r=i.barriersArr().length,h=!1;this.curMaxBarrier-r*this.curChapterIndex<r&&(this.curMaxBarrier++,h=!0),3<=a&&0==h&&(this.curDifficultIndex=this.curMaxDifficult-1,this.curMaxDifficult<6&&this.curMaxDifficult++),this.curBarrier=this.curMaxBarrier},i.setFirstRewardStage=function(){var t,e=qs.getStageInfo(),i=[],s=qs.maxStage+1;for(var n in e)for(var o=0,a=(t=e[n]).length;o<a;o++){var l=t[o];1==l.difficulty&&(1==l.is_reward&&i.push(l.stage))}for(var r=1;r<=qs.maxStage;r++)if(-1==i.indexOf(r)){s=r;break}s>qs.getFullStage()&&(s=1),this.curChapterIndex=Math.floor((s-1)/5),this.curBarrier=s},i.setFirstRewardDifficult=function(){var t=qs.getStageInfo(),e=Os.zhuXianRoadSectionVO;this.curChapterIndex>=e.length?this.curChapterIndex=e.length-1:this.curChapterIndex;var i=e[this.curChapterIndex],s=i.id;this.curMaxDifficult=0;this.curMaxBarrier=0;var n,o,a=0;if(t&&t[s])for(n=t[s],a=0;a<n.length;a++)(o=n[a]).stage==this.curBarrier&&this.curMaxDifficult<=o.difficulty&&3==o.star&&(this.curMaxDifficult=o.difficulty+1),o.stage>=this.curMaxBarrier&&(this.curMaxBarrier=o.stage);else t[s-(this.curMaxDifficult=1)]&&(this.curMaxBarrier=qs.maxStage);var l=i.barriersArr().length;this.curMaxBarrier-l*this.curChapterIndex<l&&this.curMaxBarrier++,6<this.curMaxDifficult?this.curMaxDifficult-=1:this.curMaxDifficult<1&&(this.curMaxDifficult=1),this.curDifficultIndex=this.curMaxDifficult-1},i.settleCurChapterInfo=function(){var t=qs.getStageInfo(),e={};if(t&&t[this.curChapterIndex+1])for(var i=t[this.curChapterIndex+1],s=0;s<i.length;s++)e[i[s].stage]=e[i[s].stage]||[],e[i[s].stage].push(i[s]);this.curTotalBarrierInfo=e},i.updateLevelStartShow=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);for(var i=1;i<4;i++)this["levelStar"+i].skin=t<=0?"modules/zhuXianRole/star2.png":i<=t?"modules/zhuXianRole/star1.png":"modules/zhuXianRole/star2.png";this.timeStamp.text=x.formatTime(e)},i.update=function(){this.updateChatperList(),this.updateDifficultList(),this.updateFlag();var t=Os.zhuXianRoadSectionVO[this.curChapterIndex],e=t.flagPosArr(),i=t.id,s=Os.getBarrierVOById(this.curBarrier),n=qs.getStageInfo();this.mapBg.skin="modules/zhuXianRole/img/map"+i+".png",this.barrierName.text="关卡名："+s.sectionName;var o=!0,a=0;if(n&&n[i])for(var l=n[i],r=0;r<l.length;r++){var h=l[r];if(h.stage==this.curBarrier&&h.difficulty==this.curDifficultIndex+1){this.updateLevelStartShow(h.star,h.least_ts),a=l[r].star,o=!1;break}}o&&(this.updateLevelStartShow(),a=0),this.settleCurChapterInfo();for(var u=t.barriersArr(),c=0,d=u.length;c<d;c++){var p=this.flagItemArr[c],m=u[c],f=e[c];if(c==d-1&&(p.isLastBarrier=!0),p.curChapter=t.id,p.pos(f.x,f.y),p.isSelect=this.curBarrier%d==c+1||this.curBarrier%d==0&&c==d-1,p.isOpen=this.curMaxBarrier%d>=c+1||this.curMaxBarrier%d==0,this.curTotalBarrierInfo&&this.curTotalBarrierInfo[m])if(m==this.curBarrier)p.starNum=a;else for(var _=this.curTotalBarrierInfo[m],g=this.curDifficultIndex+1,y=0;y<_.length;y++){var v=_[y];v.difficulty==g&&(p.starNum=3<v.star?0:v.star)}else p.starNum=0;p.data=m}this.updateRewardList()},i.onClick=function(t){switch(t.target){case this.closeBtn:case this.backBtn:this.closeWindow();break;case this.arrowLeftBtn1:this.turnLeft1();break;case this.arrowRightBtn1:this.turnRight1();break;case this.chanllageBtn:this.startChallenge();break;case this.autoBtn:this.startAutoSweep();break;case this.rule:cl.ins().openRuleDesView()}},i.onSelectChapter=function(t){if(t!=this.curChapterIndex){var e,i=this.chapterList.array[t].id,s=qs.getStageInfo();if(1<i&&(e=Os.getSectionVOById(i-1)),s)if(s[i])this.curChapterIndex=t,this.setMaxData(),this.updateMaxAndCurDifficult(),this.update();else if(e&&s[i-1]){for(var n=0,o=0;o<s[i-1].length;o++)s[i-1][o].stage>n&&(n=s[i-1][o].stage);n%e.barriersArr().length==0?(this.curChapterIndex=t,this.setMaxData(),this.updateMaxAndCurDifficult(),this.update()):Jt.addTip("当前篇章尚未解锁，请通关前一篇章")}else Jt.addTip("当前篇章尚未解锁，请通关前一篇章")}},i.onRenderChapterItem=function(t,e){if(t){var i,s=this.chapterList.array[e].id,n=qs.getStageInfo();if(1<s&&(i=Os.getSectionVOById(s-1)),n)if(n[s])t.isOpening=!0;else if(i&&n[s-1]){for(var o=0,a=0;a<n[s-1].length;a++)n[s-1][a].stage>o&&(o=n[s-1][a].stage);t.isOpening=o%i.barriersArr().length==0}else t.isOpening=!1;t.select=e==this.curChapterIndex}},i.onSelectedDifficulty=function(t){t!=this.curDifficultIndex&&(t<this.curMaxDifficult?(this.curDifficultIndex=t,this.update()):Jt.addTip("该难度尚未开启，请三星评分通关前一难度"))},i.onRenderRewardItem=function(t,e){t&&(t.showNum=!1,t.y=8)},i.turnLeft1=function(){var t=this.chapterList.startIndex-4;t=t<0?0:t,this.chapterList.tweenTo(t,200,this.completeHanlder1)},i.turnRight1=function(){var t=this.chapterList.startIndex+4;t=t>this.chapterList.length-1?this.chapterList.length-1:t,this.chapterList.tweenTo(t,200,this.completeHanlder1)},i.updateBtnVisible1=function(){this.arrowLeftBtn1.visible=0<this.chapterList.startIndex,this.arrowRightBtn1.visible=this.chapterList.startIndex<this.chapterList.length-4},i.startChallenge=function(){for(var t=Os.getBarrierVOById(this.curBarrier).getMapIdArr(),e=0;e<t.length;e++)if(t[e][1]==this.curDifficultIndex+1){cl.ins().curChallengeStage=this.curBarrier,cl.ins().curChallengeDifindex=this.curDifficultIndex,cl.ins().curChallengeChapter=this.curChapterIndex+1,Lr.ins().toMapChange(t[e][0]);break}},i.startAutoSweep=function(){cl.ins().roadInfo?cl.ins().openAutoThroughView():Jt.addTip("当前未有能扫关的关卡，请先进行挑战")},i.updateMaxAndCurDifficult=function(){var t=qs.getStageInfo();if(t&&t[this.curChapterIndex+1]){var e=t[this.curChapterIndex+1],i=0,s=0;if(e&&0<e.length)for(var n=0,o=e.length;n<o;n++){var a=e[n];a.stage==this.curBarrier&&a.difficulty>i&&(i=a.difficulty,s=a.star)}3<=s?(this.curDifficultIndex=i,this.curMaxDifficult=i+1):(this.curDifficultIndex=i<=1?0:i-1,this.curMaxDifficult=this.curDifficultIndex+1)}else this.curDifficultIndex=0,this.curMaxDifficult=1,this.curMaxBarrier=this.curBarrier;6<=this.curDifficultIndex&&(this.curDifficultIndex=5)},i.onFlagClick=function(t){if(this.flagItemArr&&!(this.flagItemArr.length<=0)&&this.flagItemArr[t]){var e=this.flagItemArr[t];if(e.isOpen){e.isSelect=!0,this.curBarrier=e.data,this.updateMaxAndCurDifficult(),this.update();for(var i=0;i<this.flagItemArr.length;i++)i!=t&&(this.flagItemArr[i].isSelect=!1)}else Jt.addTip("当前关卡尚未开启，请通关前一关卡")}},e.REPEAT_X=4,e.TOTAL_DIFFICULTY=6,e.STAR_GLOW_PATH="modules/zhuXianRole/star1.png",e.STAR_GRAY_PATH="modules/zhuXianRole/star2.png",e}(),Tk=function(t){function e(){this.boxSucc=null,this.imgSuccInfo=null,this.boxAlready=null,this.imgAlreadyInfo=null,this.btnClose=null,this.imgTitle=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.PfGiftPanelUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/PfGiftPanel")},e}(),kk=function(t){function e(){this.bg=null,this.imgTitle=null,this.btnClose=null,this.spGoods=null,this.imgTip=null,this.imgResult=null,e.__super.call(this)}return w(e,"ui.modules.pfSdk.PfVipGiftPanelUI",C),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/pfSdk/PfVipGiftPanel")},e}(),Ak=function(t){function e(){this._data=null,this._isSelect=!1,this._isOpen=!1,e.__super.call(this)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianSectionItem",t);var i=e.prototype;return i.update=function(){if(this.data){var t=this.data.id;this.SectionName.text=this.data.sectionName,this.build.skin="modules/zhuXianRole/build"+t+"2.png",this.passState.text="尚未解锁";var e=qs.getStageInfo();if(e&&e[t]){for(var i=[],s=0;s<e[t].length;s++)i.indexOf(e[t][s].stage)<0&&e[t][s].is_reward&&i.push(e[t][s].stage);this.passState.text=i.length+"/"+this.data.barriersArr().length,this._isSelect?this.build.skin="modules/zhuXianRole/build"+t+"1.png":this.build.skin="modules/zhuXianRole/build"+t+"0.png"}else this._isSelect?(this.build.skin="modules/zhuXianRole/build"+this.data.id+"1.png",this.passState.text="0/"+this.data.barriersArr().length):this.isOpening&&(this.build.skin="modules/zhuXianRole/build"+t+"0.png",this.passState.text="0/"+this.data.barriersArr().length)}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"select",function(){return this._isSelect},function(t){this._isSelect=t,this.update()}),I(0,i,"data",function(){return this._data}),I(0,i,"isOpening",function(){return this._isOpen},function(t){this._isOpen=t}),e}(pp),Ek=function(t){function e(){this.comboLabels=["简单","普通","困难","炼狱","修罗","灭世"],this.curSelecetStage=0,this.curSelectedDiffi=0,this.nextStageMaxDiffi=0,this.curTime=120,this.curChapter=0,this.starNum=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.rewardList.hScrollBarSkin="",this.rewardList.itemRender=Ah,this.rewardList.selectEnable=!0,this.rewardList.repeatX=5,this.rewardList.spaceX=-65,this.rewardList.spaceY=20,this.onChangeAllBox(),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.difficultyCombo.on("change",this,this.onChange),this.checkBox1.on("click",this,this.onChangeBox1),this.checkBox2.on("click",this,this.onChangeBox2)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianStageSetView",mp);var i=e.prototype;return i.onChangeAllBox=function(){this.checkBox1.selected=cl.ins().isSelectBox1,this.checkBox2.selected=cl.ins().isSelectBox2,this.onChangeBox1(),this.onChangeBox2()},i.onChangeBox1=function(){this.checkBox1.selected?(this.checkBox2.selected=!1,cl.ins().isSelectBox1=!0,cl.ins().isSelectBox2=!1,this.difficultyCombo.disabled=!0):(cl.ins().isSelectBox1=!1,this.checkBox2.selected||(this.difficultyCombo.disabled=!1))},i.onChangeBox2=function(){this.checkBox2.selected?(this.checkBox1.selected=!1,cl.ins().isSelectBox1=!1,cl.ins().isSelectBox2=!0,this.difficultyCombo.disabled=!0):(cl.ins().isSelectBox2=!1,this.checkBox1.selected||(this.difficultyCombo.disabled=!1))},i.onDisplay=function(){var t=qs.getStageInfo(),e=cl.ins().curChallengeStage;this.curChapter=cl.ins().curChallengeChapter,this.curSelecetStage=e+1,e%5==0&&this.curChapter++,this.nextStageMaxDiffi=0;var i,s=this.curChapter,n=[];for(var o in t)for(var a=0,l=(i=t[o]).length;a<l;a++){var r=i[a];1==r.is_reward&&1==r.difficulty&&n.push(r.stage)}for(var h=e+1;h<=qs.maxStage+1;h++)if(-1==n.indexOf(h)){this.curSelecetStage=h;break}s=Math.floor((this.curSelecetStage-1)/5)+1;var u=Os.getBarrierVOById(this.curSelecetStage);if(u&&u.sectionName&&(this.stageInfo.text=u.sectionName+"—"+this.curSelecetStage+"关"),t&&t[s]){var c=t[s];for(h=0;h<c.length;h++)c[h].stage==this.curSelecetStage&&c[h].difficulty>this.nextStageMaxDiffi&&(3==c[h].star&&(this.nextStageMaxDiffi=c[h].difficulty),this.starNum=c[h].star)}this.nextStageMaxDiffi<6&&this.nextStageMaxDiffi++;for(var d="",p=0;p<this.comboLabels.length;p++)p<this.nextStageMaxDiffi&&(d+=this.comboLabels[p]+(p==this.nextStageMaxDiffi-1?"":","));this.difficultyCombo.labels=d,this.difficultyCombo.selectedIndex=this.nextStageMaxDiffi-1,this.update(),this.updateTime(),_t.addToSecond(this,this.updateTime)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.updateTime)},i.onClick=function(t){switch(t.target){case this.closeBtn:case this.btnRight:el.ins().toExit(),this.closeWindow();break;case this.btnLeft:this.enterSelectStage()}},i.enterSelectStage=function(){var t=Os.getBarrierVOById(this.curSelecetStage);if(null==t)Jt.addTip("暂无可继续挑战的关卡");else{this.closeWindow();var e=0;this.checkBox2.selected?(6!=this.nextStageMaxDiffi&&3==this.starNum||(this.nextStageMaxDiffi+=1),e=1==this.nextStageMaxDiffi?1:this.nextStageMaxDiffi-1):e=this.checkBox1.selected?this.nextStageMaxDiffi:this.curSelectedDiffi;for(var i=t.getMapIdArr(),s=0;s<i.length;s++)if(i[s][1]==e)return cl.ins().removeRoadColorInfoView(),cl.ins().curChallengeChapter=this.curChapter,cl.ins().curChallengeStage=this.curSelecetStage,cl.ins().curChallengeDifindex=e-1,void Lr.ins().toMapChange(i[s][0])}},i.onChange=function(t){this.update()},i.update=function(){this.curSelectedDiffi=this.difficultyCombo.selectedIndex+1,this.rewardLb.text="通关奖励("+this.comboLabels[this.difficultyCombo.selectedIndex]+")";var t=[];null!=Os.getBarrierVOById(this.curSelecetStage)&&(t=Os.getBarrierVOById(this.curSelecetStage).getRewardArr());var e=[],i=0;for(i=0;i<t.length;i++){var s=t[i];s.val==this.curSelectedDiffi&&e.push(s.id)}for(this.rewardList.dataSource=e,this.rewardList.selectedIndex=0,this.rewardList.scrollTo(0),i=0;i<this.rewardList.content._childs.length;i++){var n=this.rewardList.content._childs[i];n.width=100,n.scale(.9,.9),n.mouseEnabled=!1,n.y=3}},i.updateTime=function(){--this.curTime,0<this.curTime?this.btnRight.label="离开副本("+this.curTime+"S)":(el.ins().toExit(),this.closeWindow())},i.resetComboShow=function(){this.difficultyCombo.selectedIndex=-1,this.difficultyCombo.button.label=""},I(0,i,"time",function(){return this.curTime},function(t){this.curTime=t}),e}(),Rk=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.rewardList.vScrollBarSkin="",this.rewardList.itemRender=Ah,this.rewardList.selectEnable=!0,this.rewardList.repeatX=5,this.rewardList.spaceX=-65,this.rewardList.spaceY=20,this.on("click",this,this.onClick)}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianThroughRewardView",fp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.closeBtn:case this.okBtn:this.closeWindow()}},i.update=function(t){this.rewardList.dataSource=t;for(var e=0;e<this.rewardList.content._childs.length;e++)this.rewardList.content._childs[e].width=100,this.rewardList.content._childs[e].scale(.85,.85)},e}(),Ok=function(t){function e(){this.vo=null,e.__super.call(this),this.vo=Xs.getGuideVO(),this.vo&&(this.txtSoul.text=this.vo.getSoulMsg(),this.txtTower.text=this.vo.getTowerMsg()),this.initView(),this.on("click",this,this.onClick)}w(e,"modules.crossServer.main.CrossGuideFightSoulView",_p);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.txtLink:me.linkTo(10809);break;case this.btn:be.runToNpc(70000001,Q.create(this,function(){me.linkTo(13001)},null,!0)),dl.ins().closeGuidePanel()}},i.initView=function(){var t=Xs.displayVO;if(t)for(var e=t.getSoulIdList(),i=0;i<e.length;i++){var s=e[i],n=new Mk;this.addChild(n),n.pos(Ks.DISPLAY_SOUL_POS_LIST[i].x,Ks.DISPLAY_SOUL_POS_LIST[i].y),n.setTypeId(s)}},i.update=function(){},e}(),Lk=function(t){function s(){var t;s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5");var e=Xs.getCrossHelpStrs();if(e)for(var i=0;i<3;i++)(t=this["html"+i]).style.valign="top",t.style.leading=10,t.innerHTML=Z.parseStringFont(e[i]);this.on("click",this,this.onClick)}return w(s,"modules.crossServer.main.CrossGuideHelpPanel",gp),s.prototype.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},s}(),Dk=function(t){function e(){this.fightSoulView=null,this.curView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=Q.create(this,this.checkOpen),this.on("click",this,this.onClick)}w(e,"modules.crossServer.main.CrossGuidePanel",yp);var i=e.prototype;return i.checkOpen=function(t){0==t?this.tab.selectedIndex=t:Jt.addTip("敬请期待")},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.fightSoulView=this.fightSoulView||new Ok,this.spView.addChild(this.fightSoulView),this.curView=this.fightSoulView}this.curView&&this.curView.update()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.checkOpen(0)},e}(),Nk=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick),Bt.isJiqiuAndH5yy()&&(this.btnCopper.visible=this.btnGold.visible=!1)}w(e,"modules.crossServer.main.CrossMainInfoView",vp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnCopper:me.linkTo(11430);break;case this.btnGold:me.linkTo(11454);break;case this.btnCoin:me.linkTo(13004);break;case this.btnRank:me.linkTo(13007)}},i.update=function(){this.txtName.text=pe.roleName,this.txtMyGold.text=pe.user.attr.gold+"",this.txtMyCopper.text=k.getShortenSilverStr(pe.user.attr.silver);var t=uo.getName();ua.isCrossMain()&&(t+=Xs.getCurLineName()),this.txtMap.text=t,this.txtSoulCoin.text=pe.getScore(29)+""},e}(),Vk=function(t){function e(){this.bcTitle=null,this.list=null,this.txtMy=null,this.txtReward=null,this.txtInfo=null,this.btn=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossResultPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossResultPanel")},e}(),Bk=function(t){function e(){this.imgBg=null,this.imgGoods=null,this.txtName=null,this.txtLevel1=null,this.txtDesc=null,e.__super.call(this)}return w(e,"ui.modules.plays.beachBoss.BeachBossSkillTipViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/plays/beachBoss/BeachBossSkillTipView")},e}(),Mk=function(t){function e(){this._itemEffect=null,this._curUrl=null,e.__super.call(this),this.on("display",this,this.onDisplay)}w(e,"modules.crossServer.main.CrossMainSoulDisplayItem",Ip);var i=e.prototype;return i.onDisplay=function(){this._curUrl&&this.changeEff(this._curUrl)},i.setTypeId=function(t){var e=mn.getFightSoulVO(t);this._itemEffect||(this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.txtName)),this._itemEffect.mouseEnabled=!1),this._curUrl=e.eff,this.changeEff(e.eff);var i=e.name;i=i.substring(0,i.indexOf("·")),this.txtName.color=U.getColorDark(e.color),this.txtName.text=i},i.changeEff=function(t){this._itemEffect&&(this._itemEffect.loadAndPlay("moduleEffect/"+t,"default",0,!0),this._itemEffect.visible=!0,this._itemEffect.pos(62,53))},e}(),Fk=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick),Nt.register("RP_CROSS_SERVER_SHOP_CAN_GAIN",this.imgMark,new Tt(35,10)),Nt.register("RP_CROSS_SERVER_SHOP_CAN_REMOVE",this.imgMark,new Tt(35,10)),Nt.register("RP_FIGHT_SOUL_TAB",this.imgSoul,new Tt(35,10)),Nt.register("RP_FIGHT_SOUL_SPIRIT_TAB",this.imgSoul,new Tt(35,10))}w(e,"modules.crossServer.main.CrossNavView",wp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgGuide:dl.ins().openGuidePanel(),this.imgGuideRP.visible=!1;break;case this.imgSet:me.linkTo(13002);break;case this.imgRed:dl.ins().openRedNamePanel();break;case this.imgMark:me.linkTo(13003);break;case this.imgStore:me.linkTo(13005);break;case this.imgSoul:me.linkTo(10809);break;case this.imgMap:me.linkTo(13008)}},i.update=function(){this.txtRed.text=pe.getScore(27)+""},e}(),Uk=function(t){function e(){this._avo=null,e.__super.call(this),this.init(),this.on("click",this,this.onQuit)}w(e,"modules.crossServer.main.CrossQuit",bp);var i=e.prototype;return i.init=function(){this.top=60,this.left=20},i.onQuit=function(t){null!=this.avo&&EF.showVO(this.avo)},i.updateSkinOnEnterMap=function(){ua.isCrossTower()||ua.isCrossTowerBoss()?(this.btnImg.skin="com/ui/btn_ret2.png",this.btnImg.stateNum=2):(this.btnImg.skin="modules/crossServer/exit.png",this.btnImg.stateNum=1)},I(0,i,"avo",function(){return ua.isCrossMain()?(this._avo=this._avo||new Ee,this._avo.msg="是否要离开混沌虚天回到本服？",(this._avo.yesCaller=this)._avo.yesFun=function(){Lr.ins().toMapChange(ua.MAIN_MAP_ID[0])}):ua.isCrossTower()||ua.isCrossTowerBoss()?(this._avo=this._avo||new Ee,this._avo.msg="是否要回到混沌虚天？",(this._avo.yesCaller=this)._avo.yesFun=function(){_l.ins().stopCollectAndPalNormal(),_t.setTimeout(null,function(){Lr.ins().toMapChange(7e4,0,ca.curLine)},null,500)}):this._avo=null,this._avo}),e}(),Gk=function(t){var s;function n(){var t;this.itemXs=[124,295,455],this.items=null,n.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.items=[];var e=Xs.redNameGoods;if(e)for(var i=0;i<e.length;i++)(t=new s).data=e[i],t.pos(this.itemXs[i],610),this.addChild(t),this.items.push(t);this.html.style.valign="top",this.html.style.align="center",this.btnClose.on("click",this,this.onClick)}w(n,"modules.crossServer.main.CrossRedNamePanel",Sp);var e=n.prototype;return e.onClick=function(t){this.closeWindow()},e.update=function(){for(var t in this.html.innerHTML=Z.span("红名值：")+Z.span(pe.getScore(27)+"","#b60202"),this.items)this.items[t].update()},n.__init$=function(){s=function(t){function e(){this.item=null,this.btn=null,this.curID=NaN,this.curP=null,e.__super.call(this),this.item=new Ah(105,105,!0,!0,!0),this.item.x=-35,this.addChild(this.item),this.btn=new f,this.btn.skin="com/ui/btn_small.png",this.btn.label="购买",this.btn.labelSize=26,this.btn.labelColors="#ffffff,#ffffff,#ffffff",this.btn.size(110,45),this.btn.y=150,this.addChild(this.btn),this.btn.on("click",this,this.onClick)}w(e,"",Wt);var i=e.prototype;return i.update=function(){this.curP=xo.getGoodsByTypeID(this.curID);var t=this.curP?this.curP.current_num:0;this.btn.label=t<=0?"购买":"使用",this.item.dataSource=[this.curID,t]},i.onClick=function(t){(this.curP?this.curP.current_num:0)<=0?ba.show(this.curID):cr.ins().useItem(this.curP.id,1)},I(0,i,"data",null,function(t){this.curID=t,this.update()}),e}()},n}(),Hk=function(t){function e(){this.curBtn=null,e.__super.call(this),this.setWindowType();var t=Xs.getGuideVO();this.tab.labels=t?t.tabLabels:"",this.tab.labelColors="#c4a89a,#513e1b,#513e1b",this.tab.labelSize=24,this.tab.on("change",this,this.onTabChange),this.html.style.valign="top",this.html.style.align="center",this.html.style.leading=10,this.panel.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.crossServer.main.CrossServerEnterPanel",xp);var i=e.prototype;return i.onTabChange=function(t){this.update()},i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnEnter:this.curBtn&&this.curBtn.data?(Xs.curLineName=this.curBtn.getLabelTxt(),Lr.ins().toMapChange(7e4,0,this.curBtn.data.line_id)):Jt.addTip("请选择一个线路");break;case this.imgHelp:dl.ins().openHelpPanel()}},i.update=function(){this.rePool(),this.html.innerHTML=Z.span("当前可进入频道：","#e1c6bc")+Z.span(Xs.getCanEnterTabStr(),"#fcf476"),this.txtTabTip.text=Xs.getTabTipByIndex(this.tab.selectedIndex);for(var t,e=Xs.getLineDataByIndex(this.tab.selectedIndex),i=e?e.length:0,s=0;s<i;s++)(t=kt.getItemByClass("ServerBtn",qk)).on("click",this,this.serverClick),t.pos(35,10+75*s),t.index=s,t.data=e[s],this.panel.addChild(t);var n=pe.myRegrow<Xs.enterNeedLv,o=!(0<Xs.curCombineServerTimes)&&Xs.curServerOpenDay<Xs.enterServerNum;this.txtLimit.visible=n||o,o?this.txtLimit.text="当前服务器开服时间"+Xs.curServerOpenDay+"天":n&&(this.txtLimit.text="角色达到"+Xs.enterNeedLv+"转可进入"),this.btnCan=!n&&!o,0<this.panel.numChildren?this.selectServerBtn(this.panel.getChildAt(0)):this.selectServerBtn(null)},i.updateByGodLvInfo=function(){var t=Xs.getCanEnterIndexs();this.tab.selectedIndex=t&&0<t.length?t.shift():0},i.serverClick=function(t){this.selectServerBtn(t.currentTarget)},i.selectServerBtn=function(t){if(this.curBtn&&(this.curBtn.selected=!1),this.curBtn=t,this.curBtn){var e;for(var i in this.curBtn.data.line_infos)if(11==(e=this.curBtn.data.line_infos[i]).id){Xs.curServerBtnVal=e.val-1;break}this.curBtn.selected=!0}},i.rePool=function(){var t;for(this.curBtn&&(this.curBtn.selected=!1),this.curBtn=null;0<this.panel.numChildren;)(t=this.panel.removeChildAt(this.panel.numChildren-1)).offAll("click"),kt.recover("ServerBtn",t)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),dl.ins().toEntryPanel(2)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e);var i=Xs.getCanEnterIndexs();this.tab.selectedIndex=i&&0<i.length?i.shift():0},I(0,i,"btnCan",null,function(t){this.btnEnter.disabled=!t}),e}(),Wk=function(t){function e(){this.joyMod=1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.initEvent()}w(e,"modules.crossServer.main.CrossServerSettingView",Cp);var i=e.prototype;return i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onClick=function(t){switch(t.target){case this.roleSetBtn:case this.roleVisSetBtn:case this.skillEffSetBtn:break;case this.fixedModImg:this.selecttingImg.pos(this.fixedModImg.x-12,this.fixedModImg.y-10),this.joyMod=1;break;case this.freeModImg:this.selecttingImg.pos(this.freeModImg.x-12,this.freeModImg.y-10),this.joyMod=2;break;case this.clickModImg:this.selecttingImg.pos(this.clickModImg.x-12,this.clickModImg.y-10),this.joyMod=3;break;case this.backBtn:case this.btnClose:this.closeWindow()}},i.onDisplay=function(){this.initSettingShow()},i.onUnDisplay=function(){this.saveSettings()},i.initSettingShow=function(){this.roleSetBtn.selected=Xs.unifyFashion,this.roleVisSetBtn.selected=Xs.isUnShowOrtherRole,this.skillEffSetBtn.selected=Xs.isUnShowSkillEff,this.attingTipBtn.selected=Xs.isShowTipOfAttaking,this.joyMod=Xs.joyStickMod,2==this.joyMod?this.selecttingImg.pos(this.freeModImg.x-12,this.freeModImg.y-10):1==this.joyMod?this.selecttingImg.pos(this.fixedModImg.x-12,this.fixedModImg.y-10):this.selecttingImg.pos(this.clickModImg.x-12,this.clickModImg.y-10)},i.saveSettings=function(){var t=new Object;t.className="m_role_sys_conf_update_tos";var e=new Object;e.className="p_kv";var i=0;i+=this.roleSetBtn.selected?1e4:2e4,i+=this.skillEffSetBtn.selected?1e3:2e3,i+=this.roleVisSetBtn.selected?100:200,i+=10*this.joyMod,i+=this.attingTipBtn.selected?1:2,e.id=5,e.val=i,t.opt=[e],v.send(t),this.closeWindow()},e}(),qk=function(t){function e(){this.curP=null,this._index=0,e.__super.call(this)}w(e,"modules.crossServer.main.ServerBtn",Pp);var i=e.prototype;return i.getLabelTxt=function(){return this.txt.text},I(0,i,"index",null,function(t){this._index=t}),I(0,i,"showLineNum",function(){return this._index+1}),I(0,i,"data",function(){return this.curP},function(t){if(this.curP=t,this.curP){var e,i=0;for(var s in this.curP.line_infos)if(11==(e=this.curP.line_infos[s]).id){i=e.val;break}var n=Xs.getTabLineName(i-1);this.txt.text=n+this.showLineNum+"线"}else this.txt.text=""}),I(0,i,"selected",function(){return this.imgSelect.visible},function(t){this.imgSelect.visible=t}),e}(),Yk=function(t){function I(){this._sx=NaN,this._sy=NaN,this._offsetX=NaN,this._offsetY=NaN,this._selfPointImg=null,this._guideTagImg=null,this._unitArrPool=null,this._npcPool=null,this._textNameArr=null,this._textNamePool=null,I.__super.call(this),this.init(),this.initEvent()}w(I,"modules.crossServer.miniMap.CrossServerMiniMapPanel",Tp);var e=I.prototype;return e.init=function(){this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.unitSp.mouseEnabled=!0,this.unitSp.mouseThrough=!0,this.pathDrawSp.mouseEnabled=!0,this.pathDrawSp.mouseThrough=!0},e.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.unDisplay),this.on("click",this,this.onClick),this.mapImg.on("click",this,this.onClickMap)},e.update=function(){this.getMapInfo(),this.updateMapInfo(),this.updateSceneUnitShow()},e.onDisplay=function(){this.update(),_t.setTimeout(this,this.update,null,100),_t.addToFrame(this,this.showSelfPoint),T.register("MY_PAL_FIND_PATH_TO_WALK",this,this.drawMyPath)},e.unDisplay=function(){_t.removeFromFrame(this,this.showSelfPoint),T.remove("MY_PAL_FIND_PATH_TO_WALK",this,this.drawMyPath)},e.onClickMap=function(t){var e=this;if(WS&&WS.main&&!WS.main.getIsDie()){(ua.isCrossTower()||ua.isCrossTowerBoss())&&_l.ins().restoreAutoHangUp(),this.getMapInfo();var i=this.mapImg.globalToLocal(new Tt(t.stageX,t.stageY)),s=i.x/this._sx,n=i.y/this._sy;s-=this._offsetX,n-=this._offsetY;var o=Ot.xyToPt(s,n);WS&&WS.main&&0==WS.main.getIsDie()&&WS.main.runToPoint(o,0,Q.create(this,function(){e.initDrawPathSp()}))}},e.onClick=function(t){var e=this;switch(t.target){case this.closeBtn:case this.backBtn:this.closeWindow();break;default:if(t.target instanceof laya.ui.Image){var i=t.target;i.linkID&&0<i.linkID&&i.pt&&WS&&WS.main&&0==WS.main.getIsDie()&&WS.main.runToPoint(i.pt,3,Q.create(this,function(){e.initDrawPathSp(),e.closeWindow(),me.linkTo(i.linkID)}))}}},e.getMapInfo=function(){var t=ca.mapID,e=Ce.getMapData(t);this._sx=this.mapImg.width/e.width,this._sy=this.mapImg.height/e.height,this._offsetX=e.offsetX,this._offsetY=e.offsetY},e.updateMapInfo=function(){var t=ca.mapID,e=Ce.getCityName(t),i="";ua.isCrossMain()?i="modules/crossServerMap/70000.png":ua.isCrossTower()?i="modules/crossServerMap/71000.png":ua.isCrossTowerBoss()&&(i="modules/crossServerMap/72000.png"),this.mapImg.skin=i,this.initDrawPathSp(),this.titleTxt.text="当前位置:"+e,this.updateSceneUnitShow()},e.initDrawPathSp=function(){this.pathDrawSp.graphics.clear(),this.removeTagPoint()},e.createSelfPointImg=function(){this._selfPointImg=this._selfPointImg||new et("modules/crossServerMap/selfPoint.png"),this.unitSp.addChild(this._selfPointImg)},e.removeSelfPointImg=function(){this._selfPointImg&&this._selfPointImg.parent&&this._selfPointImg.removeSelf(),this._selfPointImg=null},e.showSelfPoint=function(){var t;if(null==this._selfPointImg&&this.createSelfPointImg(),WS&&WS.main&&(t=WS.main.pt),t){var e=this.ptToMiniMap(t);this._selfPointImg.pos(e.x-this._selfPointImg.width/2,e.y-this._selfPointImg.height/2)}else this.removeSelfPointImg()},e.drawMyPath=function(t){if(t&&0<t.length){this.initDrawPathSp();for(var e=0;e<t.length-1;e++)this.drawDashed(this.ptToMiniMap(t[e]),this.ptToMiniMap(t[e+1]));this.showTagPoint(this.ptToMiniMap(t[t.length-1]))}},e.drawDashed=function(t,e){this.pathDrawSp.graphics.drawLine(t.x,t.y,e.x,e.y,"#15e341",4)},e.ptToMiniMap=function(t){var e=Ot.ptToPoint(t),i=(e.x+this._offsetX)*this._sx,s=(e.y+this._offsetY)*this._sy;return new Tt(i,s)},e.showTagPoint=function(t){t&&(this._guideTagImg=this._guideTagImg||new et("modules/crossServerMap/guidePoint.png"),this._guideTagImg.pos(t.x-13,t.y-13),this.unitSp.addChild(this._guideTagImg))},e.removeTagPoint=function(){this._guideTagImg&&this._guideTagImg.parent&&this._guideTagImg.removeSelf(),this._guideTagImg=null},e.updateSceneUnitShow=function(){this._unitArrPool=this._unitArrPool||[],this.removeAllShowText();var t=ca.mapTransfers;if(t&&0<t.length)for(var e=Math.max(this._unitArrPool.length,t.length),i=0;i<e;i++)if(i<t.length){var s=t[i],n=Ot.xyToPt(s.x,s.y),o=ca.getTouchTranID(n),a=ua.isCrossTowerBoss()?"modules/crossServerMap/bossPointImg.png":0<o?"modules/crossServerMap/sendPoint.png":"modules/crossServerMap/bossPointImg.png";this._unitArrPool[i]=this._unitArrPool[i]||new et;var l=this._unitArrPool[i];l.skin=a;var r=this.ptToMiniMap(Ot.pointToPt(new Tt(s.x,s.y)));if(l.pos(r.x-l.width/2,r.y-l.height/2),this.unitSp.addChild(l),0<o)this.createNameText(this._unitArrPool[i],I.NAME_POS[o],I.NAME_CONSTEN[o],"#fef6d9");else{var h=ca.getTouchTranMap(n);if(0<h){var u=Ce.getCityName(h);this.createNameText(this._unitArrPool[i],null,u)}}}else this._unitArrPool[i]&&(this._unitArrPool[i].removeSelf(),this._unitArrPool[i]=null);else this.cleanUnitArrPool();var c=ca.npcs;if(this._npcPool=this._npcPool||[],c&&0<c.length)for(var d=Math.max(this._npcPool.length,c.length),p=0;p<d;p++)if(p<c.length){var m=c[p];this._npcPool[p]=this._npcPool[p]||new et("modules/crossServerMap/bossPointImg.png"),this._npcPool[p].mouseEnabled=!0;var f=this._npcPool[p],_=new Rt(m.tx,m.ty),g=this.ptToMiniMap(_);f.pos(g.x-f.width/2,g.y-f.height/2),this.unitSp.addChild(f);var y=be.getNpcVO(m.id);this.createNameText(this._npcPool[p],null,y.name,"#96f254"),this._npcPool[p].linkID=y.linkID,this._npcPool[p].pt=_}else this._npcPool[p]&&(this._npcPool[p].linkID=null,this._npcPool[p].pt=null,this._npcPool[p].removeSelf(),this._npcPool[p]=null);else this.cleanNpcPool();if(ua.isCrossTower())for(var v=0;v<4;v++)this.createNameText(null,new Tt(I.CROSS_TOWER_SCENE_TXT[v].x,I.CROSS_TOWER_SCENE_TXT[v].y),I.CROSS_TOWER_SCENE_TXT[v].name,"#96f254")},e.cleanUnitArrPool=function(){if(this._unitArrPool){for(var t=0,e=this._unitArrPool.length;t<e;t++)this._unitArrPool[t]&&this._unitArrPool[t].removeSelf(),this._unitArrPool[t]=null;this._unitArrPool=null}},e.cleanNpcPool=function(){if(this._npcPool){for(var t=0,e=this._npcPool.length;t<e;t++)this._npcPool[t]&&this._npcPool[t].removeSelf(),this._npcPool[t]=null;this._npcPool=null}},e.createNameText=function(t,e,i,s,n){var o;(void 0===i&&(i=""),void 0===s&&(s="#7fd6fe"),void 0===n&&(n=24),null!=t||null!=e)&&(null==t&&e?(o=this.getTextUi(i,s,n)).pos(e.x,e.y):t&&(o=this.getTextUi(i,s,n),e?o.pos(e.x,e.y):o.pos(0<t.x-o.width/2?t.x-o.width/2:10,t.y-t.height/2-10)),o&&this.unitSp.addChild(o))},e.getTextUi=function(t,e,i){var s;return void 0===t&&(t=""),void 0===e&&(e="#7fd6fe"),void 0===i&&(i=24),this._textNamePool=this._textNamePool||[],this._textNameArr=this._textNameArr||[],(s=this._textNamePool.shift())||(s=new jt),s.text=t,s.fontSize=i,s.color=e,s.strokeColor="#000000",s.stroke=2,this._textNameArr.push(s),s},e.removeAllShowText=function(){if(this._textNameArr){for(var t=0,e=this._textNameArr.length;t<e;t++)this._textNameArr[t]&&this._textNameArr[t].removeSelf(),this._textNamePool.push(this._textNameArr[t]),this._textNameArr[t]=null;this._textNameArr=[]}},I.CROSS_MAIN_MAP_PATH="modules/crossServerMap/70000.png",I.CROSS_TOWER_MAP_PATH="modules/crossServerMap/71000.png",I.CROSS_TOWER_BOSS_MAP_PATH="modules/crossServerMap/72000.png",I.SELF_POINT_IMG_PATH="modules/crossServerMap/selfPoint.png",I.GUIDE_POINT_IMG_PATH="modules/crossServerMap/guidePoint.png",I.SEND_POINT_IMG_PATH="modules/crossServerMap/sendPoint.png",I.BOSS_POINT_IMG_PATH="modules/crossServerMap/bossPointImg.png",_(I,["NAME_CONSTEN",function(){return this.NAME_CONSTEN=["","火·随机跳转点","冰·随机跳转点","木·随机跳转点","土·随机跳转点"]},"NAME_POS",function(){return this.NAME_POS=[null,{x:16.2,y:43.8},{x:486.2,y:81.9},{x:490.4,y:500.7},{x:32.3,y:532.7}]},"CROSS_TOWER_SCENE_TXT",function(){return this.CROSS_TOWER_SCENE_TXT=[{name:"炽焰·月蛇",x:70.2,y:127.8},{name:"冰龙·人鱼",x:501.2,y:113.9},{name:"坤阳·黄衣",x:509.4,y:418.7},{name:"青木·白面",x:71.3,y:431.7}]}]),I}(),Xk=function(t){function e(){this._data=null,this.ftxtName=null,this._fTxtNameOriginX=NaN,this._blueVipBox=null,this._blueVipBoxMarry=null,e.__super.call(this),this.ftxtName=new V,this.ftxtName.pos(107,17),this.addChild(this.ftxtName),this._fTxtNameOriginX=this.ftxtName.x,this.on("click",this,this.onClick)}w(e,"modules.crossServer.rank.CrossRankListItem",t);var i=e.prototype;return i.reset=function(){this.ftxtName.clear(),this.txtRanklv.text=this.txtExtra.text="",this._blueVipBox&&this._blueVipBox.removeSelf(),this._blueVipBoxMarry&&this._blueVipBoxMarry.removeSelf(),this.ftxtName.x=this._fTxtNameOriginX},i.onClick=function(t){console.log("点击")},i.updateBlueVip=function(t,e){if(Bt.isQQyxdt()){this.ftxtName.x=this._fTxtNameOriginX;var i=new ms;if(10001008==e){i.blueInfo=i[0],i.nameText=this.ftxtName,this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox),this._blueVipBox.updateShowing(i);var s=new ms;s.blueInfo=i[1],s.nameText=this.ftxtName,this._blueVipBoxMarry=this._blueVipBoxMarry||new Rh,this.addChild(this._blueVipBoxMarry),this._blueVipBoxMarry.updateShowing(s),0<this._blueVipBoxMarry.width&&(this._blueVipBoxMarry.x=this._blueVipBox.x+this._blueVipBox.width),this.ftxtName.x=this._fTxtNameOriginX+this._blueVipBox.width+this._blueVipBoxMarry.width}else i.blueInfo=t,i.nameText=this.ftxtName,this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox),this._blueVipBox.updateShowing(i),this.ftxtName.x=this._fTxtNameOriginX+this._blueVipBox.width}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this.reset(),this._data)if(this.txtRank.text=this._data.row_id+"",3<this._data.row_id?(this.txtRank.visible=!0,this.imgRank.visible=!1):(this.txtRank.visible=!1,this.imgRank.visible=!0,this.imgRank.skin="modules/rank/rank"+this._data.row_id+".png"),this._data.elements){var e=Qo.getRankStr(jo.curCrossRankID,this._data.elements);if(e){this.ftxtName.clear(),this.ftxtName.addLinkText(e[0]+e[3],"#5d3924",!1),this.txtRanklv.text=e[1],this.txtExtra.text=e[2];var i=parseFloat(this._data.elements[this._data.elements.length-2]);0<i?(this.imgVip.visible=!0,this.imgVip.skin="modules/chat/VIP"+i+".png",this.imgRank.y=21):(this.imgVip.visible=!1,this.imgRank.y=30)}this.txtNull.visible=!1,this.updateBlueVip(Qo.getRankBlueVip(jo.curCrossRankID,this._data.elements),jo.curCrossRankID)}else this.txtNull.visible=!0,this.imgVip.visible=!1,this.imgRank.y=30}),e}(kp),Kk=function(t){function e(){this.curView=null,this.roleView=null,this.petView=null,e.__super.call(this),this.setWindowType(),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick)}w(e,"modules.crossServer.rank.CrossRankPanel",Ap);var i=e.prototype;return i.update=function(){this.curView&&this.curView.update()},i.updateAvatar=function(){this.curView&&this.curView.updateAvatar&&this.curView.updateAvatar()},i.updateMyPart=function(){this.curView&&this.curView.updateMyPart()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.roleView=this.roleView||new zk,this.curView=this.roleView,this.spView.addChild(this.roleView);break;case 1:this.petView=this.petView||new Qk,this.curView=this.petView,this.spView.addChild(this.petView)}this.update()},i.setRankIndex=function(t){this.curView&&this.curView.setIndex(t)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"viewIndex",null,function(t){this.tab.selectedIndex==t?this.onTabChange(null):this.tab.selectedIndex=t}),e}(),jk=function(t){function e(){this._data=null,this._fTxtNameOriginX=NaN,this._blueVipBox=null,e.__super.call(this),this.on("click",this,this.onClick),this._fTxtNameOriginX=this.txtName.x}w(e,"modules.crossServer.rank.CrossRankPetListItem",t);var i=e.prototype;return i.reset=function(){this.txtName.text=this.txtRanklv.text=this.txtExtra.text=""},i.onClick=function(t){console.log("点击")},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){var e=new ms;e.blueInfo=t,e.pos=new Tt(this._fTxtNameOriginX,this.txtName.y),this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox),this._blueVipBox.updateShowing(e),this.txtName.x=this._fTxtNameOriginX+this._blueVipBox.width}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this.reset(),this._data)if(this.txtRank.text=this._data.row_id+"",3<this._data.row_id?(this.txtRank.visible=!0,this.imgRank.visible=!1):(this.txtRank.visible=!1,this.imgRank.visible=!0,this.imgRank.skin="modules/rank/rank"+this._data.row_id+".png"),this.updateBlueVip(Qo.getRankBlueVip(jo.curCrossRankID,this._data.elements)),this._data.elements){var e=Qo.getRankStr(jo.curCrossPetRankID,this._data.elements);e&&(this.txtName.text=e[0],this.txtRanklv.text=e[1],this.txtExtra.text=e[2]),this.txtNull.visible=!1}else this.txtNull.visible=!0}),e}(Ep),Qk=function(t){function e(){this.curRankData=null,this.clip=null,this.firstRankData=null,this._originX=NaN,this.tempArr=null,this._blueVipBox=null,this.myRow=0,e.__super.call(this),this.tab.on("change",this,this.onTabChange),this.tabTwo.on("change",this,this.onTabChange),this.clip=b.getOne(),this.clip.pos(282,-50),this.firstPart.addChildAt(this.clip,0),this.list.itemRender=jk,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelect),this._originX=this.txtName.x,this.on("display",this,this.onAdd),this.on("click",this,this.onClick)}w(e,"modules.crossServer.rank.CrossRankPetView",Rp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.txtShare:if(yt.isWX&&ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));Bt.resetShareParm("我是"+Ko.getRankName(jo.curCrossPetRankID)+"排名第"+this.myRow+"名，快来六界带你装逼带你飞！","5",[0,3]),yt.isWX?Bt.shareAppMessage():Bt.shareMenu();break;case this.spExtraClick:case this.firstPart:this.firstRankData&&this.firstRankData.elements&&(rr.ins().toObservePet(this.firstRankData.role_id),wo.curInrankPetID=this.firstRankData.elements[4],wo.curInrankPetName=this.firstRankData.elements[1]);break;case this.btnAdore:xr.ins().toAdore(jo.curCrossPetRankID),this.setLog(2)}},i.onRemove=function(){this.off("undisplay",this,this.onRemove),this.on("display",this,this.onAdd),this.clip.stop()},i.onAdd=function(){this.on("undisplay",this,this.onRemove),this.off("display",this,this.onAdd),0==this.tab.selectedIndex?this.onTabChange(null):this.tab.selectedIndex=0,this.tabTwo.selectedIndex==Xs.curServerBtnVal||3<=Xs.curServerBtnVal&&2==this.tabTwo.selectedIndex?this.onTabChange(null):this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.updatePet=function(t){this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0),this.clip.scale(_e.scale,_e.scale)},i.onSelect=function(t){var e=this.list.getItem(t);e&&e.elements&&0<e.elements.length&&(rr.ins().toObservePet(e.role_id),wo.curInrankPetID=e.elements[4],wo.curInrankPetName=e.elements[1])},i.onTabChange=function(t){3<=Xs.curServerBtnVal?this.tabTwo.visible=!1:this.tabTwo.visible=!0,-1!=this.tabTwo.selectedIndex?(jo.curCrossPetRankID=Ko.CROSS_PANEL_PET_RANKS[this.tab.selectedIndex][this.tabTwo.selectedIndex],0<=this.tab.selectedIndex&&(this.list.scrollTo(0),xr.ins().toGetRank(jo.curCrossPetRankID),this.setLog(1))):this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.update=function(){this.reset(),this.curRankData=jo.getRankVO(jo.curCrossPetRankID),this.curRankData&&this.curRankData.rows?this.curRankData.rows.length<5?this.tempArr=Qo.buildShamData(this.curRankData.rows):this.tempArr=this.curRankData.rows.concat():this.tempArr=Qo.buildShamData(null),this.firstRankData=this.tempArr.shift(),this.list.dataSource=this.tempArr,this.updateMyPart(),this.updateFirstPart()},i.reset=function(){this.firstRankData=null,this.list.dataSource=null,this.txtName.text=this.txtRankLv.text=this.txtExtra.text="",this.txtMy.text="我的排名：暂未上榜",this.txtTip.text=""},i.updateFirstPart=function(){if(this.firstRankData&&this.firstRankData.elements){var t=Qo.getRankStr(jo.curCrossPetRankID,this.firstRankData.elements);t&&(this.txtName.text=t[0],this.txtRankLv.text=t[1],this.txtExtra.text=t[2]),this.updatePet(t[3]),this.clip.visible=!0,this.imgRoleBg.visible=this.txtNull.visible=!1,this.btnAdore.visible=!0,this.updateBlueVip(Qo.getRankBlueVip(jo.curCrossRankID,this.firstRankData.elements))}else this.clip.visible=!1,this.imgRoleBg.visible=this.txtNull.visible=!0,this.btnAdore.visible=!1,this.updateBlueVip(null)},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.firstPart.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(this._originX,this.txtName.y),this._blueVipBox.updateShowing(e),this.txtName.x=this._blueVipBox.width+this._originX}},i.updateMyPart=function(){if(this.myRow=0,this.curRankData){var t,e,i;for(var s in this.curRankData.rows)if(e=this.curRankData.rows[s],(t=Qo.getRankStr(jo.curCrossPetRankID,e.elements))&&t[0]==pe.roleName){this.myRow=e.row_id;break}this.txtMy.text=0<this.myRow?"我的排名："+this.myRow:"我的排名：暂未上榜",this.btnAdoreEnable=!0;for(var n=0;n<Ko.CROSS_PANEL_PET_RANKS[this.tab.selectedIndex].length;n++){var o=Ko.CROSS_PANEL_PET_RANKS[this.tab.selectedIndex][n];if((i=jo.getMyRankData(o))&&i.adored){this.btnAdoreEnable=!1;break}}}this.txtTip.text=Ko.getRankTip(jo.curCrossPetRankID),this.txtShare.visible=ya.isOpenShare(0,3)&&0<this.myRow},i.setIndex=function(t){this.tab.selectedIndex=t,this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.setLog=function(t){var e=this.tab.labels.split(",")[this.tab.selectedIndex];1==t?pt.send(41,this.tab.selectedIndex+1,"仙宠排行榜页签按钮-"+e):pt.send(41,this.tab.selectedIndex+201,e+"-膜拜")},I(0,i,"btnAdoreEnable",null,function(t){this.btnAdore.mouseEnabled=t,this.btnAdore.gray=!t,this.btnAdore.label=t?"膜拜":"已膜拜"}),e}(),zk=function(t){function e(){this.curRankData=null,this.firstRankData=null,this.myRole=null,this.ftxtName=null,this.title=null,this.otherRole=null,this.otherTxtName=null,this.otherTitle=null,this._fTxtNameOriginX=NaN,this.tempArr=null,this.myRow=0,this._blueVipBox=null,this._blueVipBoxMarry=null,e.__super.call(this),this.tab.on("change",this,this.onTabChange),this.tabTwo.on("change",this,this.onTabChange),this.ftxtName=new V,this.ftxtName.pos(109,3),this.firstPart.addChild(this.ftxtName),this._fTxtNameOriginX=this.ftxtName.x,this.myRole=this.myRole||new Vh,this.myRole.pos(270,-30),this.spExtraClick.on("click",this,this.onClickFirst),this.firstPart.addChildAt(this.myRole,0),this.otherTxtName=new V,this.otherTxtName.pos(109,3),this.firstPart.addChild(this.otherTxtName),this.otherRole=this.otherRole||new Vh,this.otherRole.pos(270,-30),this.firstPart.addChildAt(this.otherRole,0),this.list.itemRender=Xk,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelect),this.on("click",this,this.onClick),this.on("display",this,this.onAdd)}w(e,"modules.crossServer.rank.CrossRankRoleView",Op);var i=e.prototype;return i.onSelect=function(t){var e=this.list.getItem(t);e&&e.elements&&0<e.elements.length&&10001008!=jo.curCrossRankID&&T.dispatch("OPEN_OTHER_ROLE_PANLE",e.role_id)},i.update=function(){this.reset(),this.curRankData=jo.getRankVO(jo.curCrossRankID),this.resetText.visible=!1,this.resetText.text="",this.txtBg.visible=!1,this.curRankData&&this.curRankData.rows?this.curRankData.rows.length<5?this.tempArr=Qo.buildShamData(this.curRankData.rows):this.tempArr=this.curRankData.rows.concat():this.tempArr=Qo.buildShamData(null),this.firstRankData=this.tempArr.shift(),this.list.dataSource=this.tempArr,this.updateMyPart(),this.updateFirstPart()},i.reset=function(){this.firstRankData=null,this.list.dataSource=null,this.ftxtName.clear(),this.ftxtName.pos(109,3),this.txtRankLv.text=this.txtExtra.text="",this.txtMy.text="我的排名：暂未上榜",this.txtTip.text="",this.updateTitle(!1)},i.updateAvatar=function(){var t=jo.getExtraInfoToc(this.firstRankData.role_id);t&&this.firstRankData&&t.role_id==this.firstRankData.role_id?(this.myRole.resetSkin(t.skin,t.sex,!0),this.myRole.resetState(0),10001008==jo.curCrossRankID?this.myRole.play("sit",4,4,!0):this.myRole.play("stand",4,4,!0),this.myRole.visible=!0,this.updateTitle(!0)):(this.myRole.visible=!1,this.updateTitle(!1));var e=jo.getExtraInfoToc(this.firstRankData.ext_role_id);e&&this.firstRankData&&e.role_id==this.firstRankData.ext_role_id?(this.otherRole.resetSkin(e.skin,e.sex,!0),this.otherRole.resetState(0),10001008==jo.curCrossRankID?this.otherRole.play("sit",4,4,!0):this.otherRole.play("stand",4,4,!0),this.otherRole.visible=!0):this.otherRole.visible=!1,10001008==jo.curCrossRankID?(this.myRole.pos(160,-30),this.otherRole.pos(390,-30)):this.myRole.pos(270,30)},i.updateTitle=function(t){var e=jo.getRankCfgVO(jo.curCrossRankID);!t||e&&null==e.titleIds?(this.title&&(this.title.visible=!1),this.otherTitle&&(this.otherTitle.visible=!1)):e&&(null==this.title&&(this.title=new b,this.firstPart.addChild(this.title)),this.title.visible=!0,this.title.loadAndPlay("unit/title/"+e.titleIds[0],"default",0,!0),10001008==jo.curCrossRankID?(null==this.otherTitle&&(this.otherTitle=new b,this.otherTitle.pos(265,-235),this.firstPart.addChild(this.otherTitle)),this.otherTitle.visible=!0,this.otherTitle.loadAndPlay("unit/title/"+e.titleIds[1],"default",0,!0),this.otherTitle.pos(385,-235),this.title.pos(155,-235)):this.title.pos(265,-235))},i.updateFirstPart=function(){if(this.firstRankData&&this.firstRankData.elements){0<this.firstRankData.role_id&&xr.ins().toRoleExtraInfo(this.firstRankData.role_id,jo.curCrossRankID),0<this.firstRankData.ext_role_id&&xr.ins().toRoleExtraInfo(this.firstRankData.ext_role_id,jo.curCrossRankID);var t=Qo.getRankStr(jo.curCrossRankID,this.firstRankData.elements);t&&(this.ftxtName.clear(),this.ftxtName.addLinkText(t[0]+t[3],"#f4f1b2",!1),this.txtRankLv.text=t[1],this.txtExtra.text=t[2]);var e=this.firstRankData.elements[this.firstRankData.elements.length-1];0<e?(this.imgVip.visible=!0,this.imgVip.skin="modules/chat/VIP"+e+".png",this.imgRankLv.y=6):(this.imgVip.visible=!1,this.imgRankLv.y=16),this.imgRoleBg.visible=this.txtNull.visible=!1,this.btnAdore.visible=!0}else this.imgRankLv.y=16,this.btnAdore.visible=this.imgVip.visible=!1,this.imgRoleBg.visible=this.txtNull.visible=!0,this.myRole.visible=!1,this.otherRole.visible=!1;console.warn(this.firstRankData.elements),this.updateBlueVip(Qo.getRankBlueVip(jo.curCrossRankID,this.firstRankData.elements),jo.curCrossRankID)},i.updateMyPart=function(){var t;this.myRow=0,this.btnAdoreEnable=!0;for(var e=0;e<Ko.CROSS_PANEL_RANKS[this.tab.selectedIndex].length;e++){var i=Ko.CROSS_PANEL_RANKS[this.tab.selectedIndex][e];(t=jo.getMyRankData(i))&&(i==jo.curCrossRankID&&(this.myRow=t.ranking,this.txtMy.text=0<this.myRow?"我的排名："+this.myRow:"我的排名：暂未上榜",this.txtTip.text=Ko.getRankTip(jo.curCrossRankID)),t.adored&&(this.btnAdoreEnable=!1))}this.txtShare.visible=ya.isOpenShare(0,3)&&0<this.myRow},i.onClick=function(t){switch(t.target){case this.btnAdore:xr.ins().toAdore(jo.curCrossRankID),this.setLog(2);break;case this.firstPart:this.onClickFirst(null);break;case this.txtShare:if(yt.isWX&&ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));Bt.resetShareParm("本尊乃跨服"+Ko.getRankName(jo.curCrossRankID)+"第"+this.myRow+"名，来六界有我罩着你！","4",[0,3]),yt.isWX||yt.isQQ?Bt.shareAppMessage():Bt.shareMenu()}},i.onRemove=function(){this.off("undisplay",this,this.onRemove),this.on("display",this,this.onAdd)},i.onAdd=function(){this.on("undisplay",this,this.onRemove),this.off("display",this,this.onAdd),0==this.tab.selectedIndex?this.onTabChange(null):this.tab.selectedIndex=0,this.tabTwo.selectedIndex==Xs.curServerBtnVal||3<=Xs.curServerBtnVal&&2==this.tabTwo.selectedIndex?this.onTabChange(null):this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.onClickFirst=function(t){this.firstRankData&&this.firstRankData.elements&&10001008!=jo.curCrossRankID&&T.dispatch("OPEN_OTHER_ROLE_PANLE",this.firstRankData.role_id)},i.onTabChange=function(t){!this.tabTwo.visible&&Xs.curServerBtnVal<3&&(this.tabTwo.visible=!0),-1!=this.tabTwo.selectedIndex?(jo.curCrossRankID=Ko.CROSS_PANEL_RANKS[this.tab.selectedIndex][this.tabTwo.selectedIndex],(10001008==jo.curCrossRankID||3<=Xs.curServerBtnVal)&&(this.tabTwo.visible=!1),0<=this.tab.selectedIndex&&(this.list.scrollTo(0),xr.ins().toGetRank(jo.curCrossRankID),this.setLog(1))):this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.setLog=function(t){switch(this.tab.labels.split(",")[this.tab.selectedIndex]){case"战力榜":1;break;case"等级榜":2;break;case"时装榜":3;break;case"狂战榜":4;break;case"飞羽榜":5;break;case"舞天榜":6;break;case"碧落榜":7;break;case"结缘榜":8;break;case"天境榜":9}},i.setIndex=function(t){this.tab.selectedIndex!=t?this.tab.selectedIndex=t:this.onTabChange(null),this.tabTwo.selectedIndex=3<=Xs.curServerBtnVal?2:Xs.curServerBtnVal},i.updateBlueVip=function(t,e){if(Bt.isQQyxdt()){this.ftxtName.x=this._fTxtNameOriginX;var i=new ms;if(10001008==e){i.blueInfo=i[0],i.nameText=this.ftxtName,this._blueVipBox=this._blueVipBox||new Rh,this.firstPart.addChild(this._blueVipBox),this._blueVipBox.updateShowing(i);var s=new ms;s.blueInfo=i[1],s.nameText=this.ftxtName,this._blueVipBoxMarry=this._blueVipBoxMarry||new Rh,this.firstPart.addChild(this._blueVipBoxMarry),this._blueVipBoxMarry.updateShowing(s),0<this._blueVipBoxMarry.width&&(this._blueVipBoxMarry.x=this._blueVipBox.x+this._blueVipBox.width),this.ftxtName.x=this._fTxtNameOriginX+this._blueVipBox.width+this._blueVipBoxMarry.width,this._blueVipBox.y=this._blueVipBoxMarry.y=this.ftxtName.y-2}else i.blueInfo=t,i.nameText=this.ftxtName,this._blueVipBox=this._blueVipBox||new Rh,this.firstPart.addChild(this._blueVipBox),this._blueVipBox.updateShowing(i),this._blueVipBox.y=this.ftxtName.y-2,this.ftxtName.x=this._fTxtNameOriginX+this._blueVipBox.width}},I(0,i,"btnAdoreEnable",null,function(t){this.btnAdore.mouseEnabled=t,this.btnAdore.gray=!t,this.btnAdore.label=t?"膜拜":"已膜拜"}),e}(),$k=function(t){function e(){this._curGoods=null,this._itemEffect=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txtPrice.restrict="0-9",this.txtPrice.on("mousedown",this,this.onInputDown),this.txtPrice.on("blur",this,this.onBlur),this.on("display",this,this.onDisplay),this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.imgGoodBg)+1)}w(e,"modules.crossServer.shop.view.CrossServerShopConfirmPanel",Lp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnSold:this.onSold()}},i.onSold=function(){if(Qs.isMyGoodsFull())Jt.addTip("你寄售的战魂数量已满喔!");else if(0<=this.txtPrice.text.indexOf("价格")||""==this.txtPrice.text)Jt.addTip("请输入价格");else{var t=parseFloat(this.txtPrice.text),e=Xs.getCrossShopVO();if(t<e.minSellPrice)Jt.addTip("价格最低为"+e.minSellPrice);else if(t>e.maxSellPrice)Jt.addTip("价格最高为"+e.maxSellPrice);else{var i=js.SELL_DURATION_NAME_LIST[this.tab.selectedIndex],s=3600*js.SELL_DURATION_HOUR[this.tab.selectedIndex],n=Z.parseStringFont("{/s24{#5d3924是否以价格{#f6d518{0}虚天玉}寄售}}",t)+Z.font(this.txtName.text+"("+this.txtQuality.text+")",this.txtName.color)+"持续"+i+"?",o=new Ee;o.yesCaller=this,o.yesArgs=[this._curGoods.id,t,s],o.yesFun=this.confirmSold,o.msg=n,EF.showVO(o)}}},i.confirmSold=function(t,e,i){pl.ins.toPutaway(this._curGoods.id,e,i),this.closeWindow()},i.onDisplay=function(t){this.tab.selectedIndex=0},i.setGoods=function(t){this._curGoods=t,this.updateView()},i.updateView=function(){var t=mn.getFightSoulVO(this._curGoods.typeid),e=mn.getSoulAddValue(this._curGoods),i=mn.getSoulQualityName(e);this.txtName.color=U.getColorLight(t.color),this.txtName.text=t.name,this.txtQuality.color=U.getColorLight(t.color),this.txtQuality.text=i+"+"+e;var s=mn.getTotalAddValueStr(mn.getSoulKVByGoods(this._curGoods));this.txtDesc.innerHTML=Z.parseStringFont(t.desc,s),this.tab.dataSource=js.SELL_DURATION_NAME_LIST,this.txtPrice.text="点击输入价格",this.imgGoodBg.skin="com/ui/goodsBg"+t.color+".png",this._itemEffect.loadAndPlay("moduleEffect/"+t.eff,"default",0,!0),this._itemEffect.pos(160,150)},i.onInputDown=function(t){this.txtPrice.focus=!0,this.txtPrice.text&&0<=this.txtPrice.text.indexOf("价格")&&(this.txtPrice.text="")},i.onBlur=function(t){if(this.txtPrice.focus=!1,this.txtPrice.text&&""!=this.txtPrice.text){var e=parseFloat(this.txtPrice.text),i=Xs.getCrossShopVO();e>i.maxSellPrice?(Jt.addTip("价格最高为"+i.maxSellPrice),this.txtPrice.text="点击输入价格"):e<i.minSellPrice&&(Jt.addTip("价格最低为"+i.minSellPrice),this.txtPrice.text="点击输入价格")}else this.txtPrice.text="点击输入价格"},e}(),Zk=function(t){function e(){this._curSortType=0,this._qualityBtnState=0,this._priceBtnState=0,e.__super.call(this),this.list.itemRender=iA,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.scrollBar.hide=!0,this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.crossServer.shop.view.CrossServerShopListView",Dp);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onRenderItem=function(t,e){},i.onDisplay=function(t){this.on("undisplay",this,this.onUndisplay),this._curSortType=0,this.updateSortBtn(0)},i.onUndisplay=function(t){this.off("undisplay",this,this.onUndisplay),Qs.removeSelectType(this._curSortType)},i.onClick=function(t){switch(t.target){case this.btnPrice:this.updateSortBtn(1);break;case this.btnQuality:this.updateSortBtn(2);break;case this.btnSelect:pl.ins.openSelectView();break;case this.btnCopper:me.linkTo(11430);break;case this.btnGold:me.linkTo(11454);break;case this.btnCoin:me.linkTo(13004)}},i.updateSortBtn=function(t){Qs.removeSelectType(this._curSortType);var e=0;1==t?(this._priceBtnState=this.updateState(this._priceBtnState),this._qualityBtnState=0,e=this._priceBtnState):2==t?(this._qualityBtnState=this.updateState(this._qualityBtnState),this._priceBtnState=0,e=this._qualityBtnState):(this._priceBtnState=0,e=this._qualityBtnState=0),this.imgStatePri.skin="modules/crossServerShop/selectState"+this._priceBtnState+".png",this.imgStataQua.skin="modules/crossServerShop/selectState"+this._qualityBtnState+".png",this.updateSortCondition(e,t)},i.updateState=function(t){return t++,t%=3},i.updateSortCondition=function(t,e){switch(t){case 1:this._curSortType=1==e?1:4;break;case 2:this._curSortType=1==e?2:8;break;default:this._curSortType=0}Qs.addSelectType(this._curSortType),this.update()},i.update=function(){var t=Qs.allGoodsInfo;t=zs.selectData(t,Qs.curSelectType),this.list.dataSource=t,this.updateMoney(),this.txtEmptyTips.visible=0==t.length,this.btnSelect.selected=Qs.isSelectCondition},i.updateMoney=function(){this.txtGold.text=pe.gold+"",this.txtSilver.text=k.getShortenSilverStr(pe.silver),this.txtJade.text=Qs.myFightSoulCoin+""},e.ACTIVE_TYPE_PRICE=1,e.ACTIVE_TYPE_QUALITY=2,e}(),Jk=function(t){function e(){this._curView=null,this._listView=null,this._soldView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.tab.on("change",this,this.onTabChange),Nt.register("RP_CROSS_SERVER_SHOP_CAN_GAIN",this.tab.items[1],new Tt(20,0)),Nt.register("RP_CROSS_SERVER_SHOP_CAN_REMOVE",this.tab.items[1],new Tt(20,0))}w(e,"modules.crossServer.shop.view.CrossServerShopPanel",Np);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow(),pt.send(51,2,"跨服市场-离开");break;case this.btnExchange:me.linkTo(13004)}},i.onDisplay=function(){this.tab.selectedIndex=-1,this.tab.selectedIndex=0,pl.ins.toGetShopInfo()},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this._listView=this._listView||new Zk,this.spView.addChild(this._listView),this._curView=this._listView;break;case 1:this._soldView=this._soldView||new eA,this.spView.addChild(this._soldView),this._curView=this._soldView,Sl.ins.toGetPackageBagInfo()}this.update()},i.update=function(){this._curView&&this._curView.update()},i.updateShopListView=function(){this._curView&&this._curView==this._listView&&this._curView.update()},i.updateMoney=function(){this._listView&&this._listView.parent&&this._listView.updateMoney()},e}(),tA=function(t){function e(){this._suitBtnList=null,this._posBtnList=null,this._qualityBtnList=null,this._selectSuitIdList=null,this._selectPosIdList=null,this._selectQualityList=null,this._lowPrice=NaN,this._highPrice=NaN,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.initView(),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.txtLow.restrict="0-9",this.txtLow.on("mousedown",this,this.onInputDown),this.txtLow.on("blur",this,this.onBlur),this.txtHight.restrict="0-9",this.txtHight.on("mousedown",this,this.onInputDown),this.txtHight.on("blur",this,this.onBlur)}w(e,"modules.crossServer.shop.view.CrossServerShopSelectView",Vp);var i=e.prototype;return i.initView=function(){this._suitBtnList=[];for(var t=0;t<9;t++)this._suitBtnList.push(this["btnSuit"+t]);for(this._posBtnList=[],this._qualityBtnList=[],t=0;t<6;t++)this._posBtnList.push(this["btnPos"+t]),this._qualityBtnList.push(this["btnQua"+t])},i.onClick=function(t){switch(t.target){case this.btnReset:return void this.onReset();case this.btnComplete:return void this.onComplete()}var e=t.target;if(e){var i=!1,s=this._suitBtnList.indexOf(e),n=this._posBtnList.indexOf(e),o=this._qualityBtnList.indexOf(e);if(0<=s){var a=mn.getSuitInfoList()[s],l=this._selectSuitIdList.indexOf(a.suitId);l<0?(this._selectSuitIdList.push(a.suitId),i=!0):this._selectSuitIdList.splice(l,1),this.changeSelectCondition()}else if(0<=n){var r,h=Qs.getPosIdListByIndex(n),u=0;for(var c in h)r=h[c],(u=this._selectPosIdList.indexOf(r))<0?(this._selectPosIdList.push(r),i=!0):this._selectPosIdList.splice(u,1);this.changeSelectCondition()}else if(0<=o){for(var d=mn.getSoulQualityRangeByIndex(o),p=0,m=d[0];m<=d[d.length-1];m++)(p=this._selectQualityList.indexOf(m))<0?(this._selectQualityList.push(m),i=!0):this._selectQualityList.splice(p,1);this.changeSelectCondition()}e.selected=i}},i.onDisplay=function(t){this.on("undisplay",this,this.onUndisplay),this.resetCondition(),this.updateView(),this.changeSelectCondition()},i.onUndisplay=function(t){this.off("undisplay",this,this.onUndisplay)},i.onReset=function(){this.resetCondition(),this.updateView(),this.changeSelectCondition()},i.onComplete=function(){""!=this.txtLow.text&&this.txtLow.text.indexOf("价")<0?this._lowPrice=parseFloat(this.txtLow.text):this._lowPrice=0,""!=this.txtHight.text&&this.txtHight.text.indexOf("价")<0?this._highPrice=parseFloat(this.txtHight.text):this._highPrice=NaN,this.changeSelectCondition(),this.closeWindow()},i.onInputDown=function(t){var e=t.target;e&&(e.focus=!0,e.text&&0<=e.text.indexOf("价")&&(e.text=""))},i.onBlur=function(t){var e=t;if(e)if(e.focus=!1,e.text&&""!=e.text){var i=parseFloat(e.text);e==this.txtLow?!isNaN(this._highPrice)&&i>this._highPrice?(Jt.addTip("最低价不可以高于最高价喔！"),e.text="最低价"):this._lowPrice=i:i<this._lowPrice?(Jt.addTip("最高价不可以低于最低价喔！"),e.text="最高价"):this._highPrice=i}else e.text=e==this.txtLow?"最低价":"最高价"},i.resetCondition=function(){this._selectSuitIdList=[],this._selectPosIdList=[],this._selectQualityList=[],this._lowPrice=0,this._highPrice=NaN},i.updateView=function(){for(var t,e,i=0,s=mn.getSuitInfoList(),n=!1,o=0;o<this._suitBtnList.length;o++)(t=this._suitBtnList[o]).visible=o<s.length,t.visible&&(e=s[o],n=Qs.checkHasSellSoulBySuitId(e.suitId),t.labelColors=U.getColorDark(e.color)+","+U.getColorDark(e.color)+","+U.getColorDark(e.color)+","+U.getColorDark(e.color),t.label=e.name.substr(0,2),t.mouseEnabled=n,t.mouseEnabled=n,t.gray=!n,t.selected=n&&0<=this._selectSuitIdList.indexOf(e.suitId),i++);var a,l,r=125*Math.ceil(i/3);this.boxPart.y=r-54,this.imgBg.height=this.boxPart.y+this.boxPart.height+10;var h,u,c,d=!1,p=!1;for(o=0;o<this._posBtnList.length;o++){var m;for(var f in(a=this._posBtnList[o]).label=q.TYPE2NAMEMAP[q.ROLEEQUIPTYPEMAP[o]],l=Qs.getPosIdListByIndex(o))m=l[f],0<=this._selectPosIdList.indexOf(m)&&(d=!0);p=Qs.checkHaaSellSoulByPosTypeList(l),a.selected=p&&d,a.mouseEnabled=p,a.gray=!p}var _=!1,g=!1;for(o=0;o<this._qualityBtnList.length;o++){h=this._qualityBtnList[o],u=(c=mn.getSoulQualityByIndex(o)).name+"+"+c.getRangeList()[0],1<c.getRangeList().length&&(u+="~"+c.getRangeList()[1]),h.label=u,_=Qs.checkHasSellSoulByQuality(c);for(var y=c.getRangeList()[0];y<=c.getRangeList()[c.getRangeList().length-1];y++)0<=this._selectQualityList.indexOf(y)&&(g=!0);h.selected=g,h.mouseEnabled=_,h.gray=!_}this.txtLow.text=0==this._lowPrice?"最低价":this._lowPrice.toString(),this.txtHight.text=isNaN(this._highPrice)?"最高价":this._highPrice.toString()},i.changeSelectCondition=function(){var t=!1;0<this._selectSuitIdList.length?(Qs.updateSelectParam(16,this._selectSuitIdList.concat()),Qs.addSelectType(16),t=!0):Qs.removeSelectType(16),0<this._selectPosIdList.length?(Qs.updateSelectParam(32,this._selectPosIdList.concat()),Qs.addSelectType(32),t=!0):Qs.removeSelectType(32),0<this._selectQualityList.length?(Qs.updateSelectParam(128,this._selectQualityList.concat()),Qs.addSelectType(128),t=!0):Qs.removeSelectType(128),(0<this._lowPrice||!isNaN(this._highPrice))&&(t=!0),Qs.updateSelectParam(64,[this._lowPrice,this._highPrice]),Qs.addSelectType(64),Qs.isSelectCondition=t,pl.ins.updateShopListView()},e}(),eA=function(t){function e(){e.__super.call(this),this.listPack.itemRender=KE,this.listPack.renderHandler=Q.create(this,this.onRenderSoulItem),this.listPack.scrollBar.hide=!0,this.listPack.selectEnable=!0,this.listPack.selectHandler=Q.create(this,this.onSoulItemSelected),this.listSold.itemRender=iA,this.listSold.renderHandler=Q.create(this,this.onRenderShopItem),this.listSold.scrollBar.hide=!0,T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onSoulPackUpdate)}w(e,"modules.crossServer.shop.view.CrossServerShopSoldView",Bp);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onSoulPackUpdate)},i.onSoulPackUpdate=function(){this.updateSoulPack()},i.onRenderSoulItem=function(t,e){t&&(t.isShowAddValue=!0)},i.onRenderShopItem=function(t,e){},i.onSoulItemSelected=function(t){if(Qs.isMyGoodsFull())Jt.addTip("你寄售的战魂数量已满喔!");else{var e=this.listPack.getCell(t);e&&e.curGoods&&pl.ins.openSellConfirmPanel(e.curGoods)}},i.update=function(){this.updateSoulPack();var t=Qs.myGoodsInfo;this.listSold.dataSource=t,this.boxSoldTips.visible=0==t.length,this.txtSoldNum.text=Qs.myGoodsInfo.length+"/"+Xs.getCrossShopVO().maxSellNum},i.updateSoulPack=function(){var t=mn.getAllSoulGoods();this.listPack.dataSource=t,this.txtBagEmptyTips.visible=0==t.length},e}(),iA=function(t){function e(){this._itemEffect=null,this._curData=null,e.__super.call(this),this._itemEffect=b.getOne(),this._itemEffect.mouseEnabled=!1,this.addChildAt(this._itemEffect,this.getChildIndex(this.imgGoodBg)+1),this.imgGoodBg.mouseEnabled=!0,this.on("click",this,this.onClick)}w(e,"modules.crossServer.shop.view.item.CrossServerShopDisplayItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:this.onClickBtn();break;case this.imgGoodBg:this._curData&&Sl.ins.openFightSoulTipsPanel(this._curData.type_id,this._curData.quality)}},i.onClickBtn=function(){switch(this.btnBuy.label){case"购买":this.onBuy();break;case"撤下":this.onRemove();break;case"领取":this.onGetAward()}},i.onBuy=function(){if(this._curData)if(Qs.myFightSoulCoin<this._curData.sale_price)fl.ins.showFightSoulCoinNotEnoughPanel();else if(mn.isPackageFull(xo.FIGHT_SOUL_ID))this.askAddPackCell();else{var t=Z.parseStringFont("{/s24{#5d3924是否花费{#f6d518{0}虚天玉}购买}}",this._curData.sale_price)+Z.font(this.txtName.text,this.txtName.color);Lo.showSecAlert(t,pl.ins,pl.ins.toBuySoul,[this._curData.market_id,this._curData.owner_id],"cross_server_shop_buy_exp")}},i.onGetAward=function(){this._curData&&pl.ins.toOperateGoods(2,this._curData.market_id)},i.onRemove=function(){if(mn.isPackageFull(xo.FIGHT_SOUL_ID))this.askAddPackCell();else{var t=new Ee;t.title="温馨提示",t.msg="是否确定撤下"+Z.font(this.txtName.text,this.txtName.color),t.yesCaller=pl.ins,t.yesArgs=[1,this._curData.market_id],t.yesFun=pl.ins.toOperateGoods,EF.showVO(t)}},i.askAddPackCell=function(){var t=new Ee;t.title="温馨提示",t.msg="战魂背包已满，请扩展背包",t.noLabel="扩展",t.noCaller=Sl.ins,t.noArgs=[xo.FIGHT_SOUL_ID],t.noFun=Sl.ins.openAddPackageCellPanel,t.yesLabel="确定",EF.showVO(t)},i.setData=function(t){(this._curData=t)&&this.updateView()},i.updateView=function(){var t=mn.getFightSoulVO(this._curData.type_id),e=mn.getSoulQualityName(this._curData.quality);this.txtName.color=U.getColorLight(t.color),this.txtName.text=Xt.format("{0}({1}+{2})",t.name,e,this._curData.quality),this.txtPrice.text=this._curData.sale_price+"",this.imgGoodBg.skin="com/ui/goodsBg"+t.color+".png",this._itemEffect.loadAndPlay("moduleEffect/"+t.eff,"default",0,!0),this._itemEffect.pos(65,60),_t.removeFromSceond(this,this.updateTime),this._curData.owner_id==pe.roleID?(this.imgSold.visible=this.isSold,this.imgPass.visible=!this.isSold&&this.isPast,this.isSold?(this.btnBuy.label="领取",this.imgRp.visible=!0,this.txtTime.visible=!1):(this.btnBuy.label="撤下",this.imgRp.visible=this.isPast,this.txtTime.visible=!0,this.isPast?this.txtTime.text="下架时间：已过期":(this.updateTime(),_t.addToSecond(this,this.updateTime)))):(this.txtTime.visible=!1,this.imgRp.visible=!1,this.imgPass.visible=!1,this.imgSold.visible=!1,this.btnBuy.label="购买")},i.updateTime=function(){if(this._curData){var t=(1e3*this._curData.expire_ts-x.getMillisecond(ya.serverTimeMs))/1e3;this.txtTime.text=t<=0?"下架时间：已过期":"下架时间："+x.formatLeftHourMinStr(t)}else this.txtTime.text=""},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this.setData(t)}),I(0,i,"isPast",function(){return!!this._curData&&x.isPassTimeMS(1e3*this._curData.expire_ts,ya.serverTimeMs)}),I(0,i,"curData",function(){return this._curData}),I(0,i,"isSold",function(){return!!this._curData&&2==this._curData.state}),e}(Mp),sA=function(t){function e(){this._state=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.crossServer.sit.SitIcon",Fp);var i=e.prototype;return i.update=function(){8==WS.mainPalState?this.iconState=8:this.iconState=0},i.onClick=function(t){switch(this._state){case 8:ml.ins().toRoleHook(0);break;case 0:ml.ins().toRoleHook(8)}},I(0,i,"iconState",null,function(t){switch(this._state=t,this._state){case 8:this.img.skin="modules/crossSit/icon2.png";break;case 0:this.img.skin="modules/crossSit/icon1.png"}}),e}(),nA=function(t){function e(){this.HIDE_X=-288,this.SHOW_X=0,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.crossServer.sit.SitInfoPanel",Up);var i=e.prototype;return i.onDisplay=function(){this.off("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),this.reset()},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay),_t.removeFromSceond(this,this.onLoop),ie.clearAll(this),Jt.addTip("本次打坐共获得"+this.txtExp.text+"经验，"+this.txtCoin.text+"铜钱")},i.onClick=function(t){0<=this.right?this.hide():this.show()},i.reset=function(){this.imgBtn.mouseEnabled=!0,this.right=this.SHOW_X,this.imgBtn.skin="modules/crossSit/btnShou.png",this.txtCoin.text=this.txtExp.text=this.txtTime.text="",_t.addToSecond(this,this.onLoop)},i.onLoop=function(){this.txtTime.text=x.formatTime($s.sitTime)},i.update=function(){this.txtExp.text=$s.getRewardByKey(3)+"",this.txtCoin.text=$s.getRewardByKey(2)+""},i.show=function(){var t=this;this.imgBtn.mouseEnabled=!1,ie.to(this,{right:this.SHOW_X,complete:Q.create(this,function(){t.imgBtn.mouseEnabled=!0,t.imgBtn.skin="modules/crossSit/btnShou.png"},null,!0)},500,A.sineIn)},i.hide=function(){var t=this;this.imgBtn.mouseEnabled=!1,ie.to(this,{right:this.HIDE_X,complete:Q.create(this,function(){t.imgBtn.mouseEnabled=!0,t.imgBtn.skin="modules/crossSit/btnKan.png"},null,!0)},500,A.sineOut)},e}(),oA=function(t){function e(){e.__super.call(this),this.list.itemRender=hA,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.scrollBar.hide=!0,this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),Bt.isJiqiuAndH5yy()&&(this.btnCopper.visible=this.btnGold.visible=!1)}w(e,"modules.crossServer.store.view.CrossServerStoreListView",Gp);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onRenderItem=function(t,e){t.curIndex=e},i.onDisplay=function(t){},i.onClick=function(t){switch(t.target){case this.btnCopper:me.linkTo(11430);break;case this.btnGold:me.linkTo(11454);break;case this.btnCoin:me.linkTo(13004)}},i.update=function(){this.list.dataSource=Js.getShopItemVOList(),this.updateMoney()},i.updateMoney=function(){this.txtGold.text=pe.gold+"",this.txtSilver.text=k.getShortenSilverStr(pe.silver),this.txtJade.text=Qs.myFightSoulCoin+""},e}(),aA=function(t){function e(){this.item=null,this._price=0,this._type=0,this._maxNum=0,this._goodsId=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.inputNum.restrict="0-9",this.on("click",this,this.onClick),this.inputNum.on("focuschange",this,this.onFocusChange),this.inputNum.on("input",this,this.onInputChange)}w(e,"modules.crossServer.store.view.CrossServerStoreMutilBuyPanel",Hp);var i=e.prototype;return i.onFocusChange=function(){0==this.inputNum.focus&&this.inputNum.text},i.onInputChange=function(){var t=0;switch(this._type){case 2:t=9999}t=0<t?t:1;var e=parseInt(this.inputNum.text);e=(e=1<e?e:1)<t?e:t,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e},i.onClick=function(t){var e=parseInt(this.inputNum.text)?parseInt(this.inputNum.text):1;switch(t.target){case this.btnBuy:this.onBuy();break;case this.btnClose:this.closeWindow();break;case this.btnRe1:e=1<(e-=10)?e:1,this.updateGoodsNum(e);break;case this.btnRe:e=1<(e-=1)?e:1,this.updateGoodsNum(e);break;case this.btnAdd:e+=1,this.updateGoodsNum(e);break;case this.btnAdd1:e+=10,this.updateGoodsNum(e)}},i.updateGoodsNum=function(t){0<this._maxNum&&t>this._maxNum?Jt.addTip("超过今日可兑换次数"):(this.inputNum.text=""+t,this.txtTotal.text=""+this._price*t)},i.onBuy=function(){var t=parseInt(this.inputNum.text)?parseInt(this.inputNum.text):1;if(t<=0)Jt.addTip("你还没有选择数量喔");else if(0<this._maxNum&&t>this._maxNum)Jt.addTip("超过今日可兑换次数");else{var e=this._price*t;if(1001==this._type){if(pe.gold<e)return void Lo.showAlert()}else if(1002==this._type){if(pe.silver<e)return void ba.show(10201113)}else{if(29!=this._type)return void Jt.addTip("未知货币类型:"+this._type);if(pe.getScore(29)<e)return void fl.ins.showFightSoulCoinNotEnoughPanel()}var i=Zs.MONEY_NAME_DIC[this._type],s=Z.parseStringFont("{/s24{#5d3924是否花费{#f6d518{0}{1}}购买{2}}}",e,i,t+"个")+Z.font(this.item.name,U.getColorLight(this.item.color));Lo.showSecAlert(s,this,this.onConfirmExchange,[this._goodsId,t],"cross_server_store_exchange")}},i.onConfirmExchange=function(t,e){fl.ins.toExchange(t,e),this.closeWindow()},i.show=function(t,e,i,s,n){switch(void 0===e&&(e=2),void 0===i&&(i=0),void 0===s&&(s=-1),void 0===n&&(n=1),this._goodsId=t,this._maxNum=s,this.item=ur.getItem(t),this._price=i,this._type=e,this.inputNum.text=n+"",this.txtTotal.text=""+this._price*n,this.imgBg.skin="com/ui/goodsBg"+this.item.color+".png",this.imgGoods.skin=this.item.realMaxico,this.txtName.color=U.COLORS_LIGHT[this.item.color],this.txtName.text=this.item.title,this.txtPrice.text=""+this._price,e){case 1001:this.imgGold1.skin=this.imgGold2.skin="com/ui/gold.png";break;case 1002:this.imgGold1.skin=this.imgGold2.skin="com/ui/copper.png";break;case 29:this.imgGold1.skin=this.imgGold2.skin="modules/crossServerStore/xutianyu.png"}this.parent||this.openWindow()},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.crossServer.store.CrossServerStoreMutilBuyPanelUI._$SET_ins),e._ins=null,e}(),lA=function(t){function e(){this._curView=null,this._listView=null,this._treasureView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=Q.create(this,this.onTabItemClick)}w(e,"modules.crossServer.store.view.CrossServerStorePanel",Wp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnExchange:fl.ins.openExchangePanel()}},i.onDisplay=function(){this.tab.selectedIndex=-1,this.tab.selectedIndex=0,fl.ins.toGetStoreInfo(1),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),fl.ins.toGetStoreInfo(2)},i.onTabChange=function(t){switch(this.tab.selectedIndex){case 0:this.spView.removeChildren(),this._listView=this._listView||new oA,this.spView.addChild(this._listView),this._curView=this._listView,Tr.ins().toRoleExchangeInfo()}},i.onTabItemClick=function(t){1==t?Jt.addTip("藏宝阁功能暂未开启喔！"):this.tab.selectedIndex=t},i.update=function(){this._curView&&this._curView.update()},i.updateTreasureView=function(){this._treasureView&&this._treasureView.parent&&this._treasureView.update()},i.updateListView=function(){this._listView&&this._listView.parent&&this._listView.update()},i.updateMoney=function(){this._listView&&this._listView.parent&&this._listView.updateMoney()},e}(),rA=(function(t){function i(){this._items=null,i.__super.call(this),this._items=[];for(var t=0;t<4;t++){var e=new cA;this.addChild(e),e.pos(Zs.TREASURE_ITEM_POS_LIST[t].x,Zs.TREASURE_ITEM_POS_LIST[t].y),this._items.push(e)}this.on("display",this,this.onDisplay)}w(i,"modules.crossServer.store.view.CrossServerStoreTreasureView",qp);var e=i.prototype;h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),_t.addToSecond(this,this.updateCountDown)},e.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),_t.removeFromSceond(this,this.updateCountDown)},e.update=function(){for(var t=0;t<this._items.length;t++){this._items[t].setData(Js.getTreasureByIndex(t))}this.txtTime.color=Js.isTreasureOpen?"#00ff00":"#ff0000",this.txtTimeDesc.text=Js.isTreasureOpen?"消失时间：":"重现时间："},e.updateCountDown=function(){var t=Js.targetTime-x.getSeconds(ya.serverTimeMs);this.txtTime.text=0<t?x.formatHMS(t):"00:00:00"}}(),function(t){function e(){this.bar=null,this._hasPay=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=uA,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.scrollBar.hide=!0,this.bar=new p(0,0,568,32,"modules/vip/bar.png","modules/vip/barBg.png",[5,5,5,5],[0,7,0,12],[5,0,10,0],"#ffffff",16),this.bar.setTextvisible(!1),this.spBar.addChild(this.bar),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.crossServer.store.view.FightSoulCoinExchangePanel",Yp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnHelp:me.linkTo(10201)}},i.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),T.register("CHARGE_PAY_BACK",this,this.onPaySuccess),T.register("VIP_LEVEL_CHANGE",this,this.updateVIP)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("CHARGE_PAY_BACK",this,this.onPaySuccess),T.remove("VIP_LEVEL_CHANGE",this,this.updateVIP)},i.onPaySuccess=function(){this.updateView()},i.onRenderItem=function(t,e){},i.updateView=function(){this.boxFirstCharge.visible=!this._hasPay,this._hasPay?(this.list.y=277,this.list.height=596):(this.list.y=413,this.list.height=460);var t=Js.coinInfoList;this.list.dataSource=t,this.list.scrollTo(0),this.updateVIP()},i.updateVIP=function(){var t;this.imgLeft.skin="modules/vip/VIP_"+Ia.curLv+".png",Ia.curLv>=Ia.maxLv?(t=Ia.getVipVO(Ia.curLv),this.imgRight.skin="modules/vip/max.png",this.txtH.innerHTML="",this.bar.setValue(Ia.curMoney,t.needMoney)):(t=Ia.getVipVO(Ia.curLv+1),this.imgRight.skin="modules/vip/VIP_"+(Ia.curLv+1)+".png",Bt.isFanTi?(this.txtH.innerHTML=Z.span("再儲值","#ffffff",30)+Z.span((t.needMoney-Ia.curMoney)/10+"仙尊幣","#fcf476",30)+Z.span("即可成為VIP"+t.lv,"#ffffff",30),this.txtBar.text=Ia.curMoney/10+"/"+t.needMoney/10):(this.txtH.innerHTML=Z.span("再充值","#ffffff",30)+Z.span(t.needMoney-Ia.curMoney+"元宝","#fcf476",30)+Z.span("即可成为VIP"+t.lv,"#ffffff",30),this.txtBar.text=Ia.curMoney+"/"+t.needMoney),this.bar.setValue(Ia.curMoney,t.needMoney),this.btnHelp.x=this.txtH.contextWidth+this.txtH.x+10)},I(0,i,"hasPay",function(){return this._hasPay},function(t){this._hasPay=t}),e}()),hA=function(t){function e(){this._curVo=null,this._goodsImg=null,this._isLimitByNum=!1,this._curIndex=0,e.__super.call(this),this._goodsImg=new fh(null,!0,!0,105),this.addChild(this._goodsImg),this._goodsImg.pos(14,8),this._goodsImg.on("click",this,this.onClick),this.on("click",this,this.onClick)}w(e,"modules.crossServer.store.view.item.CrossServerStoreListItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:this.onBuy();break;case this._goodsImg:this._goodsImg.data.tempNum=this._goodsImg.num,Ae.show(this._goodsImg.data,"BASE_GOODS_TIP")}},i.onBuy=function(){if(this._curVo)if(this._isLimitByNum)Jt.addTip("今日可兑换次数已用完，请明天再试。");else{var t=parseInt(this._curVo.costArr[0].id),e=parseFloat(this._curVo.costArr[0].val);if(0!=this._curIndex){if(1001==t){if(pe.gold<e)return void Lo.showAlert()}else if(1002==t){if(pe.silver<e)return void ba.show(10201113)}else{if(29!=t)return void Jt.addTip("未知货币类型:"+t);if(pe.getScore(29)<e)return void fl.ins.showFightSoulCoinNotEnoughPanel()}var i=ur.getItem(this._curVo.typeId),s=Zs.MONEY_NAME_DIC[t],n=Z.parseStringFont("{/s24{#5d3924是否花费{#f6d518{0}{1}}购买{2}}}",e,s,"")+Z.font(i.name,U.getColorLight(i.color));Lo.showSecAlert(n,fl.ins,fl.ins.toExchange,[this._curVo.id,1],"cross_server_store_exchange")}else{var o=-1;if(this._curVo.showNum){var a=oa.getExchangeVOById(this._curVo.id),l=a?a.val:0;o=this._curVo.showNum-l}aA.ins.show(this._curVo.id,t,e,o)}}},i.setVo=function(t){(this._curVo=t)&&this.updateView()},i.updateView=function(){this._goodsImg.typeId=this._curVo.typeId;var t=ur.getItem(this._curVo.typeId);if(this.txtName.color=U.getColorLight(t.color),this.txtName.text=t.name,this.txtPrice.text=this._curVo.costArr[0].val,this.imgCoin.visible=29==parseInt(this._curVo.costArr[0].id),this.imgSilver.visible=1002==parseInt(this._curVo.costArr[0].id),this.imgGold.visible=1001==parseInt(this._curVo.costArr[0].id),this._curVo.showNum){var e=oa.getExchangeVOById(this._curVo.id);e?this.setBuyNum(e.val):this.setBuyNum(0),this.txtNum.visible=!0}else this.txtNum.visible=!1},i.setBuyNum=function(t){this._curVo&&(this.txtNum.text=Xt.format("今天已兑换{0}/{1}",t,this._curVo.showNum),this._isLimitByNum=t>=this._curVo.showNum)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this.setVo(t)}),I(0,i,"curIndex",function(){return this._curIndex},function(t){this._curIndex=t}),e}(Xp),uA=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onclick),Bt.isFanTi?this.btnCharge.label="購買":this.btnCharge.label="充值"}w(e,"modules.crossServer.store.view.item.CrossServerStorePayItem",t);var i=e.prototype;return i.onclick=function(t){switch(t.target){case this.btnCharge:this.onCharge()}},i.onCharge=function(){this._data&&(Bt.isFanTi?Nl.ins().toExchange(this._data.pay_id):Nl.ins().toPay(this._data.pay_id))},i.setData=function(t){if(this._data=t){var e=Bn.getChargeBackVO(t.pay_id);if(e){0<e.showMoney?this.txtPrice.text=Bt.isFanTi?e.showMoney+"仙尊幣":e.showMoney+"元":this.txtPrice.text=Bt.isFanTi?e.money+"仙尊幣":e.money+"元";var i=10*e.money;this.imgPrice.skin="modules/crossServerStore/yu"+i+".png",this.imgIcon.skin=e.img}}},I(0,i,"uiClass",function(){return"CrossServerStorePayitem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this.setData(t)}),e}(Kp),cA=function(t){function e(){this._goodsImg=null,this._curInfo=null,e.__super.call(this),this._goodsImg=new fh,this.addChild(this._goodsImg),this._goodsImg.pos(93,11),this.on("click",this,this.onClick)}w(e,"modules.crossServer.store.view.item.CrossServerStoreTreasureItem",jp);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:this.onBuy()}},i.onBuy=function(){if(this._curInfo)if(this._curInfo.remaining_num<=0)Jt.addTip("该商品已售罄，请下次再试。");else if(this._curInfo.limit_buy_num<=0)Jt.addTip("今日可兑换次数已用完，请明天再试。");else{if(this.imgCoin.visible){if(Qs.myFightSoulCoin<this._curInfo.consume_num)return void fl.ins.showFightSoulCoinNotEnoughPanel()}else if(this.imgGold.visible){if(pe.gold<this._curInfo.consume_num)return void Lo.showAlert()}else{if(!this.imgSilver.visible)return void Jt.addTip("未知货币类型");if(pe.silver<this._curInfo.consume_num)return void Jt.addTip("你的铜钱不足喔！")}var t=Zs.MONEY_NAME_DIC[this._curInfo.consume_type],e=ur.getItem(this._curInfo.item_id),i=Z.parseStringFont("{/s24{#5d3924是否花费{#f6d518{0}{1}}购买{2}}}",this._curInfo.consume_num,t,"")+Z.font(e.name,U.getColorLight(e.color));Lo.showSecAlert(i,fl.ins,fl.ins.toBuyTreasure,[this._curInfo.index],"cross_server_store_buy")}},i.setData=function(t){this._curInfo=t,this.updateView()},i.updateView=function(){if(this._curInfo){var t=ur.getItem(this._curInfo.item_id);this._goodsImg.data=t,this.txtName.color=U.getColorDark(t.color),this.txtName.text=t.name,this.txtName.visible=!0,this.txtPrice.innerHTML=0==this._curInfo.consume_num?Z.font("免费","#ffffff",20):Z.parseStringFont("{/s24{#ffffff{0}}}",this._curInfo.consume_num);var e=0==this._curInfo.limit_buy_num,i=0==this._curInfo.remaining_num;this.txtLeft.color=i?"#e1c6bc":"#ffffff",this.txtLeft.text=i?"已售罄":this._curInfo.remaining_num+"",this.txtNum.text=Xt.format("限购次数：{0}次",this._curInfo.limit_buy_num),this.btnBuy.disabled=!1,this.btnBuy.gray=i||!Js.isTreasureOpen||e,this.boxUnknow.visible=!1,this._goodsImg.visible=!0;var s=4==this._curInfo.consume_type&&29==this._curInfo.consume_id;this.imgCoin.visible=s,this.imgSilver.visible=2==this._curInfo.consume_type,this.imgGold.visible=1==this._curInfo.consume_type}else this.boxUnknow.visible=!0,this.txtPrice.innerHTML=Z.font("？？？","#ffffff",20),this.txtLeft.text="？？？",this.txtNum.text=Xt.format("限购次数：{0}次","？"),this.btnBuy.disabled=!0,this._goodsImg.visible=!1,this.txtName.visible=!1,this.imgGold.visible=!1,this.imgSilver.visible=!1,this.imgCoin.visible=!1},e}(),dA=function(t){function e(){e.__super.call(this),this.initEvent()}w(e,"modules.crossServer.tower.CrossServerTowerAutoBtnPanel",Qp);var i=e.prototype;return i.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)},i.onDisplay=function(){T.register("CROSS_SERVER_TOWER_RESTORE_AUTO_HANGUP",this,this.updateAutoState),this.updateAutoState()},i.onUnDisplay=function(){T.remove("CROSS_SERVER_TOWER_RESTORE_AUTO_HANGUP",this,this.updateAutoState)},i.onClick=function(){WS&&WS.main&&WS.main.getIsDie()?Jt.addTip("角色已倒地，请先复活再进行该操作"):(_l.ins().changeAutoHangUp(),this.updateAutoState())},i.updateAutoState=function(){this.btn.skin=tn.isAutoHangUp?"modules/crossTower/stopHangUp.png":"modules/crossTower/hangupImg.png"},e}(),pA=function(t){function e(){this._info=null,this._voInfo=null,this.deathCd=NaN,e.__super.call(this),this.initEvent()}w(e,"modules.crossServer.tower.CrossServerTowerBossBtn",zp);var i=e.prototype;return i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){},i.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLoop)},i.nothingToShow=function(){this.timeTxt.text="尚未开启",this.timeTxt.color="#b60202",this.nameTxt.text="??????",this.bossImg.skin="unit/monster/10000073.png"},i.onClick=function(){if(this._info)if(0!=this._info.state){var t=new Ee;pe.gold<10?(t.msg="元宝不足,是否前往充值?",t.yesCaller=this,t.yesFun=this.toShopByGold,EF.showVO(t)):(t.msg="是否消耗10元宝传送至"+this._voInfo.monsterName+"?",t.yesCaller=_l.ins(),t.yesFun=_l.ins().toRoleActivityBossTran,t.yesArgs=[this._info.key]),EF.showVO(t)}else Jt.addTip("BOSS尚未出生，无法进行传送")},i.toShopByGold=function(){me.linkTo(11454)},i.update=function(){null==this._info&&null==this._voInfo||(this.bossImg.skin=this._voInfo.headUrl,this.nameTxt.text=this._voInfo.monsterName,0==this._info.state?(this.deathCd=this._info.ts,this.timeTxt.color="#96f254",_t.addToSecond(this,this.timeLoop)):(this.timeTxt.text="已出生",this.timeTxt.color="#96f254"))},i.timeLoop=function(){this.timeTxt.text=x.formatTotalHMS(this.deathCd-ya.serverTime)},I(0,i,"info",null,function(t){if(null==t)return this._info=null,this._voInfo=null,void this.nothingToShow();this._info=t,this._voInfo=tn.getTowerBossInfoVoByMonsterID(this._info.monster_id)}),e}(),mA=function(t){function c(){this.itemArrs=[],this.willUseItemId=0,this.willUseItemType=0,this.isFirst=!0,this.timeInfo=[],c.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.init(),this.initEvent()}w(c,"modules.crossServer.tower.CrossServerTowerItemPanel",$p);var e=c.prototype;return e.init=function(){},e.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},e.onClick=function(t){switch(t.target){case this.backBtn:this.closeWindow();break;case this.useBtn:if(xo.getGoodsNumByTypeID(this.willUseItemId)<=0)Jt.addTip("通过分解战魂获得定魂符碎片，背包炼制中合成获得定魂符");else{var e=xo.getGoodsArrByTypeID(this.willUseItemId);cr.ins().useItem(e[0].id,1)}break;default:if(t.target instanceof modules.athletics.encounter.view.DropItem){var i=t.target;i.data.tempNum=i.num;var s=ur.getRewardByTkv(i.val);this.itemNameTxt.text=i.txtName.text,this.itemNameTxt.color=U.getColorDark(s.color),this.itemDescTxt.text=s.desc,this.willUseItemId=i.val.id,this.willUseItemType=i.val.type,this.selectImg.visible=!0,this.selectImg.pos(i.x-12,i.y-10)}}},e.onDisplay=function(){if(this.showItems(),this.isFirst?(this.isFirst=!1,this.initBuffShow()):this.updateBuffShow(),0<this.itemArrs.length){var t=this.itemArrs[0];t.data.tempNum=t.num;var e=ur.getRewardByTkv(t.val);this.itemNameTxt.text=t.txtName.text,this.itemNameTxt.color=U.getColorDark(e.color),this.itemDescTxt.text=e.desc,this.willUseItemId=t.val.id,this.willUseItemType=t.val.type,this.selectImg.visible=!0,this.selectImg.pos(t.x-12,t.y-10)}else this.selectImg.visible=!1;T.register("BAGDATA_CHANGE",this,this.showItems)},e.onUnDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.showItems),_t.removeFromSceond(this,this.timeLoop)},e.showItems=function(){for(var t=0,e=c.ITEM_ARR.length;t<e;t++){this.itemArrs[t]=this.itemArrs[t]||new Dh;var i=new Object;i.className="p_tkv",i.type=5,i.id=c.ITEM_ARR[t],i.val=xo.getGoodsNumByTypeID(c.ITEM_ARR[t]),this.itemArrs[t].setDrop(i),this.itemArrs[t].pos(60+130*t,110),this.itemArrs[t].txtName.visible=!1,this.itemArrs[t].mouseEnabled=!0,this.itemArrs[t].bigTxtNum.text=i.val+"",this.addChild(this.itemArrs[t])}},e.initBuffShow=function(){var t=NaN;this.timeInfo=[],this.initItemTxts();var s=[],e=[];if(WS&&WS.main){var i;for(var n in t=WS.main.pvo.pal_id,e=pe.getPal(t).buffs)i=e[n],-1!=c.BUFFARR.indexOf(i.buff_id)&&s.push(i);for(var o=function(t){if(s.length<=0)return null;var e;for(var i in s)if((e=s[i]).buff_id==t)return e;return null},a=1,l=0;l<4;l++){var r=o(c.BUFFARR[l]);if(r&&0<r.end_time){var h=this.itemArrs[l],u=ur.getRewardByTkv(h.val);this["useItemName"+a].text=h.txtName.text,this["useItemName"+a].visible=this["useTimeTxt"+a].visible=!0,this["useItemName"+a].color=this["useTimeTxt"+a].visible=U.getColorDark(u.color),this["haveTxt"+a].visible=!0,this["haveTxt"+a].text="剩余",this.timeInfo.push(r.end_time),a++}}0<this.timeInfo.length?(this.nothingTxt.visible=!1,_t.addToSecond(this,this.timeLoop)):(this.nothingTxt.visible=!0,_t.removeFromSceond(this,this.timeLoop))}},e.updateBuffShow=function(){var t=NaN;if(this.timeInfo=[],this.initItemTxts(),WS&&WS.main){t=WS.main.pvo.pal_id;for(var e=1,i=0;i<4;i++){var s=c.BUFFARR[i],n=vs.getActorBuff(t,s);if(n&&0<n.end_time){var o=this.itemArrs[i],a=ur.getRewardByTkv(o.val);this["useItemName"+e].text=o.txtName.text,this["useItemName"+e].visible=this["useTimeTxt"+e].visible=!0,this["useItemName"+e].color=this["useTimeTxt"+e].visible=U.getColorDark(a.color),this["haveTxt"+e].visible=!0,this["haveTxt"+e].text="剩余",this.timeInfo.push(n.end_time),e++}}0<this.timeInfo.length?(this.nothingTxt.visible=!1,_t.addToSecond(this,this.timeLoop)):(this.nothingTxt.visible=!0,_t.removeFromSceond(this,this.timeLoop))}},e.timeLoop=function(){for(var t=1;t<=4;t++)this.timeInfo[t-1]>ya.serverTime&&(this["useTimeTxt"+t].text=x.formatTotalHMS(this.timeInfo[t-1]-ya.serverTime))},e.initItemTxts=function(){for(var t=1;t<=4;t++)this["useItemName"+t].text="",this["useItemName"+t].visible=!1,this["useItemName"+t].color="#fef6d9",this["haveTxt"+t].text="",this["haveTxt"+t].visible=!1,this["haveTxt"+t].color="#fef6d9",this["useTimeTxt"+t].text="",this["useTimeTxt"+t].visible=!1,this["useTimeTxt"+t].color="#fef6d9"},_(c,["ITEM_ARR",function(){return this.ITEM_ARR=[10201519,10201520,10201521,10201522]},"BUFFARR",function(){return this.BUFFARR=[20690001,20700001,20680001,20710001]}]),c}(),fA=function(t){function e(){this.roleId=0,this.killId=0,this.killerName="",e.__super.call(this),this.initEvent()}w(e,"modules.crossServer.tower.CrossServerTowerMiniDeadPanel",Zp);var i=e.prototype;return i.initEvent=function(){this.reliveBtn.on("click",this,this.onClickChooseRelive)},i.onClickChooseRelive=function(){_l.ins().doRoleDead(this.roleId,this.killId,this.killerName),this.removeSelf()},i.setParInfo=function(t,e,i){this.roleId=t,this.killId=e,this.killerName=i},e}(),_A=function(t){function e(){this._missionId=-1,this._data=null,e.__super.call(this),this.getRewardBtn.on("click",this,this.getReward)}w(e,"modules.crossServer.tower.CrossServerTowerMissionItem",t);var i=e.prototype;return i.getReward=function(){0<=this._missionId&&_l.ins().toLineTowerMissionGet(this._missionId)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t){this._data=t,this._missionId=this._data.mission_id;var e=this._data.map_id%71e3;this.levelNumTxt.text="混沌之塔"+e+"层";var i=this._data.state;0==i?(this.stateTxt.text="未完成",this.rewTxt.text="未领取",this.getRewardBtn.visible=!1,this.redPoint.visible=!1):1==i?(this.stateTxt.text="已完成",this.rewTxt.text="",this.getRewardBtn.visible=!0,this.redPoint.visible=!0):2==i&&(this.stateTxt.text="已完成",this.rewTxt.text="已领取",this.getRewardBtn.visible=!1,this.redPoint.visible=!1)}}),e}(Jp),gA=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0,"",!1),this.init(),this.initEvent()}w(e,"modules.crossServer.tower.CrossServerTowerRoleDeadPanel",tm);var i=e.prototype;return i.init=function(){this.deadTxt.style.align="center"},i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onClick=function(t){switch(t.target){case this.reliveOnHereBtn:if(xo.getGoodsNumByTypeID(10201517)<=0){var e=ur.getItem(10201517),i=e.priceDic;if(i[2]>pe.gold)return void Lo.showAlert();var s=e.name,n=e.color,o=Z.span("是否花费","#5d3924")+Z.span(i[2]+"元宝","#F7EF5F")+Z.span("购买","#5d3924")+Z.span("【"+s+"】",U.getColorLight(n))+Z.span("进行原地复活？","#5d3924");Lo.showSecAlert(o,this,this.buyConfirm,[1,e.id,1],"BuyGoodsView"+e.id)}else el.ins().toRoleRelive(3);break;case this.reliveOnTowerBtn:el.ins().toRoleRelive(4);break;case this.backToReliveBtn:this.backToCrossServerMain();break;case this.backBtn:case this.closeBtn:_l.ins().showMiniDeadPanel(),this.closeWindow()}},i.buyConfirm=function(t,e,i,s){Tr.ins().toExchange(t,e,i,s,this.buyCallBack,this)},i.buyCallBack=function(){el.ins().toRoleRelive(3)},i.onDisplay=function(){this.updateGoodsNum(),T.register("BAGDATA_CHANGE",this,this.updateGoodsNum),_t.addToSecond(this,this.timeLoop)},i.onUnDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.updateGoodsNum),_t.removeFromSceond(this,this.timeLoop)},i.backToCrossServerMain=function(){Lr.ins().toMapChange(7e4,0,ca.curLine)},i.killerShowInfo=function(t,e){this.deadTxt.innerHTML=Z.font("你被","#ffffff",26)+Z.font("["+e+"]","#ff0000",26)+Z.font("击倒在地","#ffffff",26)},i.updateGoodsNum=function(){var t=xo.getGoodsNumByTypeID(10201517);this.itemNumTxt.text="回天续命丸："+t},i.timeLoop=function(){this.timeOutTxt.text=tn.roleDeadEndTime-ya.serverTime+"秒后自动回城复活"},e}(),yA=function(t){function e(){this.timeCount=35,this.touchTime=NaN,this.timeOutKey=0,e.__super.call(this),this.initEvent(),this.skillGary.visible=!1}w(e,"modules.crossServer.tower.CrossServerTowerSkillBtn",em);var i=e.prototype;return i.initEvent=function(){this.on("mousedown",this,this.onClick),this.on("mouseup",this,this.onClick),this.on("mouseout",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){},i.onUnDisplay=function(){},i.onClick=function(t){if("mousedown"==t.type)this.touchTime=ya.serverTime,this.timeOutKey=_t.setTimeout(this,this.showSkillDesc,null,600);else if("mouseup"==t.type){if(ya.serverTime-this.touchTime<2){if(1==this.skillGary.visible)return;this.toUseSkill()}0<this.timeOutKey&&_t.clearTimeout(this.timeOutKey),this.unShowSkillDesc()}else"mouseout"==t.type&&(0<this.timeOutKey&&_t.clearTimeout(this.timeOutKey),this.unShowSkillDesc())},i.showSkillDesc=function(){this.descBox.visible=!0},i.unShowSkillDesc=function(){this.descBox.visible=!1},i.toUseSkill=function(){_l.ins().useCrossServerSkill()},i.showSkillCoolDown=function(){this.skillGary.visible=!0,this.timeTxt.text="35秒"},i.updateBtnSkill=function(){this.skillGary.visible=!1,this.timeTxt.text="",this.timeCount=35},i.updateCD=function(){this.showSkillCoolDown(),_t.addToSecond(this,this.timeLoop)},i.timeLoop=function(){if(this.timeCount<=0)return _t.removeFromSceond(this,this.timeLoop),void this.updateBtnSkill();this.timeCount--,this.timeTxt.text=this.timeCount+"秒"},e.COOL_DOWN=35,e}(),vA=function(t){function e(){this.titleBg=null,this.txtTitle=null,this.upgradeBtn=null,this.redPoint=null,this.closeBtn=null,this.fullLvImg=null,e.__super.call(this)}return w(e,"ui.modules.Equip.SpequipPotentialTipUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Equip/SpequipPotentialTip")},e}(),IA=function(t){function e(){this.bossBtnArr=[],this.totalPage=0,this.curPageIndex=1,e.__super.call(this),this.initEvent(),this.bossInfoPanLis.hScrollBarSkin="",this.leftBtn.visible=!1}w(e,"modules.crossServer.tower.CrossTowerBossEnterPanel",sm);var i=e.prototype;return i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onClick=function(t){switch(t.target){case this.enterTowerBtn:this.onClickEnterTower();break;case this.leftBtn:this.cutPage();break;case this.rightBtn:this.nextPage()}},i.cutPage=function(){this.curPageIndex-1<=1?(this.curPageIndex=1,this.leftBtn.visible=!1,this.rightBtn.visible=!0):(this.rightBtn.visible=!0,this.leftBtn.visible=!0),this.bossInfoPanLis.scrollTo(this.curPageIndex)},i.nextPage=function(){this.curPageIndex+1>=this.totalPage?(this.curPageIndex=this.totalPage,this.rightBtn.visible=!1):this.rightBtn.visible=!0,this.leftBtn.visible=!0,this.bossInfoPanLis.scrollTo(this.bossInfoPanLis.width*this.curPageIndex)},i.onDisplay=function(){T.register("CROSS_SERVER_TOWER_UPDATE_BOSS_INFO",this,this.update),_l.ins().toRoleActivityBossInfo()},i.onUnDisplay=function(){T.remove("CROSS_SERVER_TOWER_UPDATE_BOSS_INFO",this,this.update)},i.update=function(){this.updateBossShow()},i.updateBossShow=function(){var t=tn.bossInfo,e=t.length;this.openLevelTxt.text="当前混沌之塔开放层数:"+t.length+"层";var i=0;e<=3?(0<(i=3-e)&&(e=3),this.rightBtn.visible=!1,this.leftBtn.visible=!1):0!=(i=Math.floor(e/3))&&(e=t.length+i),this.totalPage=e/3;for(var s=[],n=0;n<e;n++)n<t.length?s[n]=t[n]:s[n]=null;for(var o=Math.max(this.bossBtnArr.length,e),a=1,l=0;l<o;l++)l<e?(this.bossBtnArr[l]=this.bossBtnArr[l]||new pA,this.bossBtnArr[l].info=s[l],this.bossInfoPanLis.addChild(this.bossBtnArr[l]),this.bossBtnArr[l].update(),l==a?(a+=3,this.bossBtnArr[l].pos(40+170*l,195)):this.bossBtnArr[l].pos(40+170*l,44)):this.bossBtnArr[l]&&(this.bossBtnArr[l].removeSelf(),this.bossBtnArr[l]=null)},i.onClickEnterTower=function(){switch(tn.isCanEnterTower()){case 0:this.showUnSetRoleTips();break;case 1:this.showUnsetAssRoleTips();break;case 5:this.enterTowerMap()}},i.showUnSetRoleTips=function(){var t=new Ee;t.msg="当前未设置角色布阵无法进入,是否前往设置?",t.yesCaller=this,t.yesFun=this.gotoCrossTowerSetRolePanel,EF.showVO(t)},i.showUnsetAssRoleTips=function(){var t=new Ee;t.msg="当前还有角色未上阵，是否仍要进入混沌之塔？",t.yesCaller=this,t.yesFun=this.enterTowerMap,EF.showVO(t)},i.gotoCrossTowerSetRolePanel=function(){_l.ins().openTowerEnterView(1)},i.enterTowerMap=function(){Lr.ins().toMapChange(ua.CROSS_TOWERS[0],0,ca.curLine)},e}(),wA=function(t){function e(){this._data=null,this._voInfo=null,this._deathCd=NaN,this._bar=null,this._clip=null,e.__super.call(this),this.init(),this.initEvent()}w(e,"modules.crossServer.tower.CrossTowerBossInfoItem",t);var i=e.prototype;return i.init=function(){var t=new Wt;t.graphics.drawTexture(ut.getRes("modules/crossTower/bloodLeft.png"),-3.5,-10),t.graphics.drawTexture(ut.getRes("modules/crossTower/bloodRight.png"),120,-10),this._bar=new At,this._bar.bar.skin="modules/crossTower/bar1.png",this._bar.sizeGrid="5,5,5,5,0",this._bar.width=125,this._bar.pos(15,110),this._bar.bar.x=10,this._bar.addChild(t),this.addChild(this._bar),this.addChild(this.txtblood),this._clip=b.getOne(),this._clip.pos(407,69),this.addChild(this._clip)},i.initEvent=function(){this.goToFightWithBossBtn.on("click",this,this.onGoToFightWithBoss),T.dispatch("CROSS_SERVER_TOWER_BOSS_INFO_PANL_CLOSE",this,this.closeParPanel)},i.closeParPanel=function(){_t.removeFromSceond(this,this.timeLoop)},i.onGoToFightWithBoss=function(){if(this._data)if(1!=this.goToFightWithBossBtn.gray){var t=new Ee;pe.gold<10?(t.msg="元宝不足,是否前往充值?",t.yesCaller=this,t.yesFun=this.toShopByGold,EF.showVO(t)):(t.msg="是否消耗10元宝传送至"+this._voInfo.monsterName+"?",t.yesCaller=_l.ins(),t.yesFun=_l.ins().toRoleActivityBossTran,t.yesArgs=[this._data.key]),EF.showVO(t)}else Jt.addTip("当前boss未出生，无法进行传送")},i.toShopByGold=function(){me.linkTo(11454)},i.updateInfo=function(){if(_t.removeFromSceond(this,this.timeLoop),this._voInfo){if(this.nameTxt.text=this._voInfo.monsterName,this.posTxt.text="混沌之塔"+this._voInfo.towerLevel+"层",this.monsterIconImg.skin=this._voInfo.headUrl,this.bornTxt.visible=!0,0==this._data.state)this._deathCd=this._data.ts,this.goToFightWithBossBtn.gray=!0,this.bornTxt.color="#5A4A12",_t.addToSecond(this,this.timeLoop),this.txtblood.text="0%",this._bar.value=0;else{_t.removeFromSceond(this,this.timeLoop),this.goToFightWithBossBtn.gray=!1,this.bornTxt.color="#96f254",this.bornTxt.text="（已出生）";var t=this._data.hp_rate/1e4;this.txtblood.text=Math.round(100*t)+"%",this._bar.value=t}var e=this._voInfo.fightSoulType,i=tn.FIGHT_SOUL_TYPE_ARR[e];if(null!=i){var s=mn.getFightSoulVO(i.id);this.fightSoulText.text=i.name,this.fightSoulText.color=U.getColorLight(s.color),this._clip.loadAndPlay("moduleEffect/"+i.id,"default",0,!0)}}},i.timeLoop=function(){var t=this._deathCd-ya.serverTime;t<=0?(_t.removeFromSceond(this,this.timeLoop),this.bornTxt.color="#96f254",this.bornTxt.text="（已出生）",this.txtblood.text="100%",this._bar.value=1):(this.bornTxt.text=x.formatTotalHMS(t,":")+"后重生",this.bornTxt.color="#5A4A12")},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._data=t,this._voInfo=tn.getTowerBossInfoVoByMonsterID(this._data.monster_id),this.updateInfo())}),e}(nm),bA=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.initEvent(),this.infoList.vScrollBarSkin="",this.infoList.itemRender=wA}w(e,"modules.crossServer.tower.CrossTowerBossInfoPanel",om);var i=e.prototype;return i.initEvent=function(){this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onClick=function(t){switch(t.target){case this.backBtn:this.closeWindow()}},i.onDisplay=function(){T.register("CROSS_SERVER_TOWER_UPDATE_BOSS_INFO",this,this.updateBossInfo);var t=Ce.getCityName(ca.mapID);this.curLevelTxt.text="当前位置:"+t,_l.ins().toRoleActivityBossInfo()},i.onUnDisplay=function(){T.remove("CROSS_SERVER_TOWER_UPDATE_BOSS_INFO",this,this.updateBossInfo),T.dispatch("CROSS_SERVER_TOWER_BOSS_INFO_PANL_CLOSE")},i.updateBossInfo=function(){var t=tn.bossInfo;t.sort(this.sort),this.infoList.dataSource=t},i.sort=function(t,e){return t.key<e.key?-1:1},e}(),SA=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0",!0,"",!0),this.init(),this.initEvent()}w(e,"modules.crossServer.tower.CrossTowerCollectPanel",am);var i=e.prototype;return i.init=function(){this.collectList.itemRender=xA,this.collectList.vScrollBarSkin=""},i.initEvent=function(){this.getCollectBtn.on("click",this,this.onGetCollectBtn),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){WS&&WS.main&&13==WS.main.status||(tn.curWillCollectId=0)},i.onUnDisplay=function(){},i.onGetCollectBtn=function(){1!=mn.isPackageFull(xo.FIGHT_SOUL_ID)?WS&&WS.main&&13==WS.main.status?Jt.addTip("当前正在拾取战魂，无法进行该操作"):_l.ins().runToCollect():Jt.addTip("战魂背包已满，无法拾取战魂")},i.updateCollectInfoForList=function(){var t=tn.sceneCollectArr;t&&(0<t.length&&0==tn.curWillCollectId&&t[0]&&(tn.curWillCollectId=t[0].id),this.collectList.dataSource=t)},e}(),xA=function(t){function e(){this._data=null,this._clip=null,e.__super.call(this),this.on("click",this,this.onClick),this.selectImg.visible=!1}w(e,"modules.crossServer.tower.CrossTowerCollectPanelItem",t);var i=e.prototype;return i.onClick=function(){this._data&&this._data.id&&(this.selectImg.visible=!0,tn.curWillCollectId=this._data.id,_l.ins().updateCollectPanelShow())},i.removeClip=function(){this._clip&&(this._clip.stop(),this._clip.removeSelf(),this._clip=null)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t){this._data=t;var e=Ie.getCollectAnimPathByTypeId(this._data.type_id);e?(this._clip=this._clip||b.getOne(),this._clip.pos(68,86),this._clip.loadAndPlay(e,"default",0,!0),this.effSp.addChild(this._clip)):this.removeClip(),this.nameTxt.text=Ie.getCollectNameByTypeId(this._data.type_id);var i=Ie.getCollectNameColor(this._data.type_id);this.nameTxt.color=i<=0?"#96f254":U.getColorLight(i),this.selectImg.visible=tn.curWillCollectId==this._data.id;var s=this._data.drop_actor_id,n=this._data.drop_actor_type;if(2==n){var o=we.getMonsterVO(s);o&&3<=o.rarity?(this.dropTypeTxt.text="BOSS掉落",this.dropTypeTxt.color="#b60202"):(this.dropTypeTxt.text="怪物掉落",this.dropTypeTxt.color="#96f254")}else 1==n&&(100*Math.floor(s/100)==pe.roleID?this.dropTypeTxt.text="自身掉落":this.dropTypeTxt.text="他人掉落",this.dropTypeTxt.color="#96f254")}else this.removeClip()}),e}(lm),CA=function(t){function e(){this.towerBossPanel=null,this.setFightingRolePanel=null,this.towerRulePanel=null,e.__super.call(this),this.setWindowType(),this.initEvent()}w(e,"modules.crossServer.tower.CrossTowerEnterView",rm);var i=e.prototype;return i.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.btnTab.selectHandler=new Q(this,this.onBtnTabSelect)},i.onDisplay=function(){_l.ins().toLineTowerDeployInfo()},i.onUnDisplay=function(){},i.onClick=function(t){switch(t.target){case this.closeBtn:case this.backBtn:this.closeWindow()}},i.onBtnTabSelect=function(t){switch(t){case 0:this.towerBossPanel=this.towerBossPanel||new IA,this.showViewSp.addChild(this.towerBossPanel),this.towerBossPanel.visible=!0,this.setFightingRolePanel&&this.setFightingRolePanel.parent&&(this.setFightingRolePanel.visible=!1),this.towerRulePanel&&this.towerRulePanel.parent&&(this.towerRulePanel.visible=!1);break;case 1:this.setFightingRolePanel=this.setFightingRolePanel||new qC,this.showViewSp.addChild(this.setFightingRolePanel),this.setFightingRolePanel.x=20,this.setFightingRolePanel.updateHeadIconShow(),this.setFightingRolePanel.visible=!0,this.towerRulePanel&&this.towerRulePanel.parent&&(this.towerRulePanel.visible=!1),this.towerBossPanel&&this.towerBossPanel.parent&&(this.towerBossPanel.visible=!1);break;case 2:this.towerRulePanel=this.towerRulePanel||new AA,this.showViewSp.addChild(this.towerRulePanel),this.towerRulePanel.visible=!0,this.setFightingRolePanel&&this.setFightingRolePanel.parent&&(this.setFightingRolePanel.visible=!1),this.towerBossPanel&&this.towerBossPanel.parent&&(this.towerBossPanel.visible=!1)}},i.openViewByTabIndex=function(t){void 0===t&&(t=0),this.btnTab.selectedIndex=t},e}(),PA=function(t){function e(){this._rewardItemArr=null,this._missionId=NaN,this._monsterTag=NaN,this._isInitRewardDesc=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.initEvent(),this.missionList.vScrollBarSkin="",this.missionList.itemRender=_A}w(e,"modules.crossServer.tower.CrossTowerLevelMissionPanel",hm);var i=e.prototype;return i.initEvent=function(){this.btnTab.selectHandler=new Q(this,this.onSelectTab),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.missionDesc2.on("click",this,this.onClickMonsterName)},i.onClickMonsterName=function(){ua.isCrossTower()?_l.ins().doMission(this._monsterTag):ua.isCrossTowerBoss()&&_l.ins().checkThenAndDoMission(this._monsterTag)},i.onClick=function(t){switch(t.target){case this.getRewardBtn:this.getLevelMissionReward();break;case this.backBtn:this.closeWindow()}},i.onDisplay=function(){this.btnTab.selectedIndex=0,T.register("CROSS_SERVER_TOWER_MISSION_UPDATE",this,this.update),T.register("CROSS_SERVER_TOWER_GET_MISSION_REWARD",this,this.updateForMissionReward),_l.ins().toLineTowerMissionInfo(),this.showRedPoint(),this.showRewardDesc()},i.onUnDisplay=function(){T.remove("CROSS_SERVER_TOWER_MISSION_UPDATE",this,this.update),T.remove("CROSS_SERVER_TOWER_GET_MISSION_REWARD",this,this.updateForMissionReward)},i.onSelectTab=function(t){switch(t){case 1:this.allMissionSp.visible=!0,this.missionSp.visible=!1,this.titleTxt.text="混沌之塔任务",this.updateAllMissionInfo();break;case 0:this.allMissionSp.visible=!1,this.missionSp.visible=!0,this.titleTxt.text="本层任务",this.updateLevelMissionInfo()}},i.updateLevelMissionInfo=function(){var t,e=0;if(ca.mapID<72e3)t=tn.getMssionInfosByMapId(ca.mapID),e=ca.mapID;else{var i=ca.mapID%72e3;e=71e3+(100<i?Math.floor(i/100):Math.floor(i/10)),t=tn.getMssionInfosByMapId(e)}var s=t[0];if(this._missionId=-1,s){var n=Ce.getCityVO(e);this.levelTxt.text=n.name,this._missionId=s.mission_id;var o=tn.getMissionVoByMapIdAndMisId(s.map_id,s.mission_id);if(this._monsterTag=Number(o.monsterType),null!=o){this.levelTxt.text="",this.missionTxt.text="任务："+o.title,this.updateMissionDescShow(o.getMissionDescs(),s.process,o.countProce),this.updateRewardShow(o.getRewardInfos());for(var a="位置:",l=o.getMonsterPosMaps(),r=0;r<2&&l[r];r++){a+=Ce.getCityName(l[r]),r+1<2&&(a+="、")}this.posTxt.text=a}this.getRewardBtn.disabled=!(1==s.state),this.getRewardBtn.label=0==s.state||1==s.state?"领取奖励":"已领取",this.redPoint.visible=1==s.state}},i.updateRewardShow=function(t){if(t&&!(t.length<0)){this._rewardItemArr=this._rewardItemArr||[];for(var e=Math.max(this._rewardItemArr.length,t.length),i=0;i<e;i++)i<t.length?this._rewardItemArr[i]=this._rewardItemArr[i]||this.createGoodsItem(t[i],i):this._rewardItemArr[i]&&(this._rewardItemArr[i].removeSelf(),this._rewardItemArr[i]=null)}},i.createGoodsItem=function(t,e){var i=new Ah(95,95,!1,!0,!0,!1);return i.dataSource=[t.id,t.val],i.pos(40+120*e,280),this.missionSp.addChild(i),i},i.updateMissionDescShow=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=""),!t||t.length<=0||(this.missionDesc1.text=t[0]+e+"/"+i+"只",this.missionDesc2.text=t[1],this.missionDesc2.underline=!0,this.missionDesc2.x=this.missionDesc1.x+this.missionDesc1.textWidth+15)},i.updateAllMissionInfo=function(){var t,e=tn.missionInfos,i=[];for(var s in e)t=e[s],i.push(t[0]);this.missionList.dataSource=i},i.getLevelMissionReward=function(){_l.ins().toLineTowerMissionGet(this._missionId)},i.updateForMissionReward=function(){_l.ins().toLineTowerMissionInfo()},i.update=function(){this.updateLevelMissionInfo(),this.updateAllMissionInfo(),this.showRedPoint()},i.showRedPoint=function(){var t=tn.missionInfos;if(t){var e=!1;for(var i in t){if(1==t[i][0].state){e=!0;break}}this.allRedPoint.visible=e}else this.allMissionSp.visible=!1},i.showRewardDesc=function(){if(!this._isInitRewardDesc){var t=ur.getItem(10201531);t&&(this._isInitRewardDesc=!0,this.rewardDescTxt.style.valign="top",this.rewardDescTxt.style.leading=10,this.rewardDescTxt.innerHTML=Z.font(t.name,U.getColorLight(t.color),24)+Z.font("×1","#ffffff",24)+"<br/>"+Z.font("打开后随机获得以下其中一样物品","#ffffff",24))}},e.REWARD_ITEM_POS_Y=280,e}(),TA=function(t){function e(){this.showVisible=!0,this.isShowMorePart=!1,e.__super.call(this),this.initEvent()}w(e,"modules.crossServer.tower.CrossTowerNavBarPanel",um);var i=e.prototype;return i.initEvent=function(){Nt.register("RP_CROSS_SERVER_TOWER_MISSION_FINISH",this.missionBtn,new Tt(35,10)),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),Nt.register("EQUIP_MELTING",this.packBtn),Nt.register("WING_MELTING",this.packBtn),Nt.register("GOODS_CAN_USE",this.packBtn),Nt.register("GOODS_CAN_COMPOSE",this.packBtn),Nt.register("RP_CHAT_PRIVATE_NEWS",this.friendBtn),Nt.register("RP_CHAT_PRIVATE_NEWS_CROSS",this.friendBtn),Nt.register("RP_FRIEND_REQUEST",this.friendBtn),Nt.register("RP_FRIEND_REQUEST_CROSS",this.friendBtn),Nt.register("RP_FRIEND_GIFT_LETTER",this.friendBtn),Nt.register("RP_MARRY",this.friendBtn),Nt.register("RP_MARRY_ANNIVERSARY_REWARD",this.friendBtn),Nt.register("RP_FRIEND_FIRST_OPEN_ADD_PANEL",this.friendBtn),Nt.register("RP_FRIEND_ACHIEVEMENT",this.friendBtn),Nt.register("RP_FLOWER_FAERIE",this.friendBtn),Nt.register("RP_FIGHT_SOUL_TAB",this.fightSoulBtn),Nt.register("RP_FIGHT_SOUL_SPIRIT_TAB",this.fightSoulBtn),Nt.register("RP_CROSS_SERVER_SHOP_CAN_GAIN",this.mackBtn),Nt.register("RP_CROSS_SERVER_SHOP_CAN_REMOVE",this.mackBtn),Nt.register("EQUIP_MELTING",this.moreBtn,new Tt(33,4)),Nt.register("WING_MELTING",this.moreBtn,new Tt(33,4)),Nt.register("GOODS_CAN_USE",this.moreBtn,new Tt(33,4)),Nt.register("GOODS_CAN_COMPOSE",this.moreBtn,new Tt(33,4)),Nt.register("RP_FIGHT_SOUL_TAB",this.moreBtn,new Tt(33,4)),Nt.register("RP_FIGHT_SOUL_SPIRIT_TAB",this.moreBtn,new Tt(33,4)),Nt.register("RP_CROSS_SERVER_SHOP_CAN_GAIN",this.moreBtn,new Tt(33,4)),Nt.register("RP_CROSS_SERVER_SHOP_CAN_REMOVE",this.moreBtn,new Tt(33,4)),Nt.register("RP_CHAT_PRIVATE_NEWS",this.moreBtn,new Tt(33,4)),Nt.register("RP_CHAT_PRIVATE_NEWS_CROSS",this.moreBtn,new Tt(33,4)),Nt.register("RP_FRIEND_REQUEST",this.moreBtn,new Tt(33,4)),Nt.register("RP_FRIEND_REQUEST_CROSS",this.moreBtn,new Tt(33,4)),Nt.register("RP_FRIEND_GIFT_LETTER",this.moreBtn,new Tt(33,4)),Nt.register("RP_MARRY",this.moreBtn,new Tt(33,4)),Nt.register("RP_MARRY_ANNIVERSARY_REWARD",this.moreBtn,new Tt(33,4)),Nt.register("RP_FRIEND_FIRST_OPEN_ADD_PANEL",this.moreBtn,new Tt(33,4)),Nt.register("RP_FRIEND_ACHIEVEMENT",this.moreBtn,new Tt(33,4)),Nt.register("RP_FLOWER_FAERIE",this.moreBtn,new Tt(33,4))},i.onDisplay=function(){this.onScoreChange(),T.register("ROLE_SCORE_CHANGE",this,this.onScoreChange)},i.onUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.unShowMaroPart()},i.onClick=function(t){switch(t.target){case this.switchBtn:this.changeNavVisible();break;case this.pkModSettingBtn:_l.ins().openTowerPKModPanel();break;case this.missionBtn:_l.ins().openTowerMissionPanel();break;case this.fightSettingBtn:me.linkTo(13002);break;case this.bossInfoBtn:_l.ins().openTowerBossInfoPanel();break;case this.itemBtn:_l.ins().openTowerBossItemPanel();break;case this.moreBtn:this.showMoreBtn();break;case this.fightSoulBtn:me.linkTo(10809);break;case this.mackBtn:me.linkTo(13003);break;case this.packBtn:T.dispatch("OPEN_PACKVIEW",1);break;case this.redNameBtn:dl.ins().openRedNamePanel();break;case this.friendBtn:me.linkTo(11501);break;case this.mapBtn:me.linkTo(13008)}},i.changeNavVisible=function(){this.showVisible=!this.showVisible,this.changeNavShow(),this.unShowMaroPart()},i.changeNavShow=function(){this.switchBtn.skin=this.showVisible?"modules/crossTower/onImg.png":"modules/crossTower/openImg.png",this.moreBtn.visible=this.bossInfoBtn.visible=this.mapBtn.visible=this.missionBtn.visible=this.pkModSettingBtn.visible=this.itemBtn.visible=this.showVisible},i.showMoreBtn=function(){this.isShowMorePart=!this.isShowMorePart,this.moreBtnPart.visible=this.isShowMorePart,this.height=this.isShowMorePart?230:93,this.moreBtn.skin=this.isShowMorePart?"modules/crossTower/pikUpImg.png":"modules/crossTower/moreImg.png"},i.unShowMaroPart=function(){this.isShowMorePart=!1,this.moreBtnPart.visible=this.isShowMorePart,this.height=93,this.moreBtn.skin="modules/crossTower/moreImg.png"},i.onScoreChange=function(){this.txtRed.text=pe.getScore(27)+""},e}(),kA=function(t){function e(){this.panHight=946,this.modSpArr=[],this.curHight=0,this.startPos=75,this.selectImg=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.initEvent(),this.initModeShow()}w(e,"modules.crossServer.tower.CrossTowerPKModPanel",cm);var i=e.prototype;return i.initEvent=function(){this.btnBack.on("click",this,this.closeWindow),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){T.register("CROSS_SERVER_TOWER_PK_MOD_CHANGE",this,this.updateMod)},i.onUnDisplay=function(){T.remove("CROSS_SERVER_TOWER_PK_MOD_CHANGE",this,this.updateMod)},i.initModeShow=function(){for(var t=tn.getCrossTowerModDescs(),e=0,i=t.length;e<i;e++){var s=t[e];this.createModShow(s,e)}this.curHight+20>this.panHight&&(this.height=this.curHight);var n=tn.CROSS_SERVER_MODE_ARR.indexOf(tn.pkMod)<=0?0:tn.CROSS_SERVER_MODE_ARR.indexOf(tn.pkMod);this.selectImg=this.selectImg||new et,this.selectImg.skin="modules/crossTower/had.png",this.selectImg.right=50,this.selectImg.y=this.modSpArr[n].y+20,this.addChild(this.selectImg)},i.createModShow=function(t,e){if(t){var i=new y,s=new jt;s.fontSize=24,s.text=t.title,s.height=s.textHeight,s.color="#96f254",s.x=60,i.addChild(s);var n=t.getModDescStr(),o=new K;o.width=700,o.style.valign="top",o.style.leading=10,o.style.wordWrap=!0,o.innerHTML=n,o.height=o.contextHeight,o.pos(80,s.y+s.height+10),i.addChild(o);var a=new et;a.skin="com/ui/line4.png",a.y=o.y+o.height+10,i.addChild(a),i.width=this.width,i.height=s.height+o.height+a.height+20,i.mouseEnabled=!0,this.curHight+=i.height+10,i.x=5,0<e&&(this.startPos+=i.height+20),i.y=this.startPos,i.on("click",this,this.clickMod,[e]),this.addChild(i),this.modSpArr.push(i)}},i.clickMod=function(t){_l.ins().toRolePKMode(tn.CROSS_SERVER_MODE_ARR[t])},i.updateMod=function(){var t=tn.CROSS_SERVER_MODE_ARR.indexOf(tn.pkMod);-1!=t&&(this.selectImg.y=this.modSpArr[t].y)},e}(),AA=function(t){function e(){e.__super.call(this),this.initShow()}w(e,"modules.crossServer.tower.CrossTowerRulePanel",dm);var i=e.prototype;return i.initShow=function(){this.pan.vScrollBarSkin="";var t=this.createTitle("玩法介绍");t.x=274,this.pan.addChild(t);var e=Z.font("1.讨伐任务","#3e1e0c",26)+"<br/>"+k.getHtmlEmpty(8)+Z.font("混沌之塔每层都会有独立的讨伐任务，完成讨伐任务后可以获得丰富的奖励！","#5d3924",24)+"<br/>"+Z.font("2.战魂获得","#3e1e0c",26)+"<br/>"+k.getHtmlEmpty(8)+Z.font("（1）消灭战魂BOSS混沌之塔每层都存在着受限于混沌之塔的强大不死妖物，每层的BOSS被消灭后，隔段时间将会再次在本层的","#5d3924",24)+Z.font("炽焰洞、冰龙洞、青木洞、坤阳洞中任意一个洞窟重生。","#96f254",24)+Z.font("消灭战魂BOSS将必定掉落对应品质的战魂，每个玩家都将有机会可以拾取战魂哦。","#5d3924",24)+"<br/>"+k.getHtmlEmpty(8)+Z.font("（2）消灭普通妖物","#5d3924",24)+Z.font("除了必定掉落战魂的战魂BOSS之外，消灭混沌之塔及四个洞窟内的任意普通怪物，均有可能掉落战魂。","#5d3924",24)+"<br/>"+k.getHtmlEmpty(8)+Z.font("（3）将其他玩家击倒后,也会有概率从","#5d3924",24)+Z.font("玩家的战魂仓库中掉落战魂。","#96F254",24),i=this.createDesc(e);i.y=t.y+t.height+10,this.pan.addChild(i);var s=this.createTitle("地图说明");s.x=274,s.y=i.y+i.height+10,this.pan.addChild(s);var n=k.getHtmlEmpty(8)+Z.font("混沌之塔乃上古仙家给家族宗徒的历练之地，然而混沌之塔内的凶险并不完全来源于凶兽，还需提防来自于其他玩家的攻击，混沌之塔内可对其他玩家展开攻击争夺上古遗留下来的战魂。","#5d3924",24)+"<br/>"+k.getHtmlEmpty(8)+Z.font("塔内四个角落遗留着传送阵法，传送阵法将会被赋予随机传送效果，玩家踩踏传送阵将触发如","#5d3924",24)+Z.font("上升1层、下降1层","#96f254",24)+Z.font("的随机效果。牢记传送阵的效果将事半功倍，不过要记得，每日6点将对塔内的传送阵法的传送效果进行刷新。","#5d3924",24),o=this.createDesc(n);o.y=s.y+s.height+10,this.pan.addChild(o)},i.createTitle=function(t){void 0===t&&(t="");var e=new et;e.skin="modules/beachBoss/titleBg.png",e.sizeGrid="14,21,15,21",e.width=170,e.height=47;var i=Me.createText(t,0,0,e.width,e.height,e);return i.fontSize=24,i.color="#fef6d9",i.align="center",i.valign="middle",e.addChild(i),e},i.createDesc=function(t){var e=new K;return e.style.valign="top",e.style.leading=15,e.style.wordWrap=!0,e.width=624,e.x=50,e.innerHTML=t,e.height=e.contextHeight,e},e}(),EA=function(t){function e(){this._data=null,this._headIcon=null,this._nameTxt=null,this._monsterInfo=null,this._palInfo=null,this._attMeTip=null,this._score=.02,e.__super.call(this),this.initEvent()}w(e,"modules.crossServer.tower.RoleHeadListIcon",t);var i=e.prototype;return i.initEvent=function(){this.on("click",this,this.onClick)},i.onClick=function(t){if(WS&&WS.main&&WS.main.getIsDie())Jt.addTip("角色已倒地，请先复活再进行该操作");else if(t.target instanceof modules.role.view.HeadItem){if(!this._data)return;if(ua.isCross())if(this._data.isMonster){if(!this._monsterInfo)return;this._headIcon.select=!0,_l.ins().hittingMonster(this._monsterInfo)}else{if(!this._palInfo)return;var e,i=!1;if(2==tn.pkMod)for(var s in Se.roleDict)(e=Se.roleDict[s]).pvo.pal_id==this._palInfo.pal_id&&1e4<e.pvo.tag&&(i=!0);else i=!0;i?(this._headIcon.select=!0,_l.ins().hittingRole(this._palInfo)):Jt.addTip("当前PK模式无法攻击该目标")}}},i.initShow=function(){this._headIcon=this._headIcon||new dF,this._headIcon.open=!1,this._headIcon.mouseEnabled=!0,this.addChild(this._headIcon),this._nameTxt=this._nameTxt||Me.createText("这个是名字",-10,100,this._headIcon.width+20,20,this._headIcon,e.createTextFormat("#ffe0cf","center",24)),this._nameTxt.stroke=1,this._nameTxt.strokeColor="#000000",this._nameTxt.text="",this._nameTxt.wordWrap=!0,this.addChild(this._nameTxt),this._attMeTip=this._attMeTip||new et("modules/crossTower/attMe.png"),this.addChild(this._attMeTip),this.attMeTipVisible=!1},i.attTipLoop=function(){(this._attMeTip.alpha<=.1||1<=this._attMeTip.alpha)&&(this._score*=-1),this._attMeTip.alpha+=this._score},i.updateShowForInfo=function(){if(_t.removeFromFrame(this,this.attTipLoop),this._data&&this._data.info)if(this._data.isMonster){this._headIcon.monsterData=this._data.info,this._monsterInfo=this._data.info;var t=we.getMonsterColor(this._monsterInfo.type_id);this._nameTxt.text=this._monsterInfo.monster_name,this._nameTxt.color=t<=0?"#96f254":U.getColorLight(t),(ua.isCrossTower()||ua.isCrossTowerBoss())&&(this._headIcon.select=tn.hittingTag==this._data.info.monster_id)}else{if(this._nameTxt.x=0,!this._data.info.pal_id)return;this.attMeTipVisible=this._data.isAttMe;var e=new Object;e.className="p_pal_data",e.pal_id=this._data.info.pal_id,e.ext=new Object,e.ext.className="p_pal_ext",e.ext.sex=this._data.info.sex,e.ext.category=this._data.info.category,this._headIcon.data=e,this._palInfo=e,(ua.isCrossTower()||ua.isCrossTowerBoss())&&(this._headIcon.select=tn.hittingTag==e.pal_id,2==tn.pkMod&&1e4<this._data.info.tag?this._nameTxt.color="#b60202":this._nameTxt.color="#ffffff"),this._nameTxt.text=this._data.palName}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._data=t,this.initShow(),this.updateShowForInfo())}),I(0,i,"attMeTipVisible",null,function(t){0==t?(this._attMeTip.visible=!1,_t.removeFromFrame(this,this.attTipLoop)):(this._attMeTip.visible=!0,_t.addToFrame(this,this.attTipLoop))}),e.createTextFormat=function(t,e,i){var s=new Qt;return s.color=t,s.align=e,s.fontSize=i,s},e}(pm),RA=function(t){function e(){this._isMonsterList=!1,this._timeTotal=0,this._isOpen=!0,this.timeOutKey=0,e.__super.call(this),this.init(),this.initEvent()}w(e,"modules.crossServer.tower.RoleHeadListPanel",mm);var i=e.prototype;return i.init=function(){this.headList.vScrollBarSkin="",this.headList.itemRender=EA,this.headList.dataSource=[]},i.initEvent=function(){this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.listTitle.on("click",this,this.clickListTitle)},i.onDisplay=function(){this.timeLoop(),_l.ins().toCrossTowerBossInfo(),this.timeOutKey=_t.setTimeout(this,this.timeLoop,null,500)},i.onUnDisplay=function(){0<this.timeOutKey&&_t.clearTimeout(this.timeOutKey)},i.initInfo=function(t){t&&(t.headInfos=t.headInfos||[],this.updateListShow(t.headInfos),this._isMonsterList=t.isMonster,this.updateListTitle())},i.updateListShow=function(t){if(null==t)this.headList.dataSource=[];else{var e=[];if(tn.pkMod!=tn.CROSS_SERVER_MODE_ARR[2]||this._isMonsterList)if(tn.pkMod!=tn.CROSS_SERVER_MODE_ARR[4]||this._isMonsterList)this.headList.dataSource=t;else{for(var i=[],s=0;s<t.length;s++){var n=10*Math.floor(t[s].info.pal_id/10);null==qn.getFriendByRoleId(n)&&i.push(t[s])}this.headList.dataSource=i}else{for(var o=0;o<t.length;o++)1e4<t[o].info.tag&&e.push(t[o]);this.headList.dataSource=e}}},i.timeLoop=function(){this._isMonsterList?this.toSearchMonsterAndShow():this.toSearchRoleAndShow(),this._timeTotal=0,_t.setTimeout(this,this.timeLoop,null,500)},i.toSearchMonsterAndShow=function(){_l.ins().toCrossTowerBossInfo();var t=_l.ins().searchMonsterByCrossTower();this.updateListShow(t)},i.toSearchRoleAndShow=function(){if(ua.isCrossTowerBoss()||ua.isCrossTower()){var t=_l.ins().searchRoleByCrossTower();if(null==t)this.updateListShow(null);else{for(var e=[],i=!1,s=0,n=t.length;s<n;s++)i=tn.isAttMeRole(t[s].pal_id),e.push({info:t[s],isMonster:!1,palName:t[s].pal_name,isAttMe:i});this.updateListShow(e)}}},i.clickListTitle=function(){this._isOpen=!this._isOpen,this.updateListTitle()},i.updateListTitle=function(){this._isMonsterList?(this.listTitle.skin=this._isOpen?"modules/crossTower/monsterListTitle_0.png":"modules/crossTower/monsterListTitle_1.png",this.headList.x=34):(this.listTitle.skin=this._isOpen?"modules/crossTower/roleListTitle_0.png":"modules/crossTower/roleListTitle_1.png",this.headList.x=54),this._isOpen?(this.headList.visible=!0,this.headList.height=570):(this.headList.visible=!1,this.headList.height=0)},i.updateSerchRole=function(){this.toSearchRoleAndShow()},i.showCollectingTag=function(t){this.collectingTag.visible=t},e}(),OA=function(t){function e(){this.effShow=null,this.selectIndex=0,this.curVO=null,this.spClip=null,this.speed1=.5,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.txtdes.style.color="#ffffff",this.txtdes.style.fontSize=24,this.txtdes.style.lineHeight=30,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.effShow=this.effShow||b.getOne(),this.effShow.pos(127,908),this.effShow.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.addChild(this.effShow)}w(e,"modules.dailyProductNotice.DailyProductNoticePanel",fm);var i=e.prototype;return i.onDisplay=function(){this.selectIndex=0},i.onUnDisplay=function(){},i.update=function(t){this.curVO=t,gl.ins().toOpenFinish(t.actID),this.updateGoodsSprite(this.selectIndex)},i.onClick=function(t){switch(t.target){case this.btnleft:this.selectIndex-=1,this.selectIndex<0&&(this.selectIndex=0),this.updateGoodsSprite(this.selectIndex);break;case this.btnright:this.selectIndex+=1,this.selectIndex>this.curVO.goods.length-1&&(this.selectIndex=this.curVO.goods.length-1),this.updateGoodsSprite(this.selectIndex);break;case this.btngo:this.gotoLinkId();break;case this.btnback:this.closeWindow()}},i.updateGoodsSprite=function(t){if(_t.removeFromFrame(this,this.onTalismanFrame),this.spClip&&this.spClip.removeSelf(),this.curVO){Da.ins().toActDetail(this.curVO.linkid[this.selectIndex]);var e=new Object;e.className="p_tkv",e.type=5,this.curVO&&this.curVO.goods&&this.curVO.goods[t]&&(e.id=this.curVO.goods[t]),this.curVO&&this.curVO.goods&&this.curVO.flash[t]&&(this.effShow.visible=1==this.curVO.flash[t]);var i=ur.getRewardByTkv(e);this.imghead.skin=i.realMaxico;var s=i.desc.split("<br>");this.txtdes.innerHTML=s[0],this.txtname.text=i.name;var n=i?i.useType%1e3:-1,o="",a="default",l=0,r=1.5,h=1.5,u="0,0";switch(this.curVO&&this.curVO.scale&&this.curVO.scale[this.selectIndex]&&(r=h=Number(this.curVO.scale[this.selectIndex])/10),0<=s.length-1&&9!=n&&this.txtdes.appendHTML("<br>"+s[s.length-1]),0<=s.length-2&&31!=n&&this.txtdes.appendHTML("<br>"+s[s.length-2]),n){case 8:o="unit/title/"+i.img;break;case 32:o="unit/monster/"+i.img+"_3",a="stand",l=3;break;case 19:"2"==i.path[0]?(o=Pe.getRoleUnitSubFileStr(i.path)+i.path+"_sit_4",a="sit",l=4,u="0,4"):"1"==i.path[0]?(o=Pe.getWeaponUnitSubFileStr(i.path,"unit2")+i.path+"_4",a="stand",l=4,u="100,4"):"4"==i.path[0]&&(o="unit/wing/"+i.path+"2_4",a="stand",l=4,u="-9,57");break;case 9:o="unit/monster/"+i.img+"_attack_3",a="attack",l=3;break;case 37:var c=502e5;o="unit/effect/footEff_"+(c+=1e6*i.color+e.id%1e3),a="default",l=0;break;case 31:u="-215,-295",l=5,o="modules/act/baguaFurnace/talisman"+e.id+".png",_t.addToFrame(this,this.onTalismanFrame)}var d=u.split(","),p=parseInt(d[0]),m=parseInt(d[1]);5==l?(this.spClip=new et,this.spClip.skin=o):(this.spClip=new b,this.spClip.loadAndPlay(o,a,l,!0)),this.spClip.pos(p,m),this.spClip.scale(r,h),this.sp.addChild(this.spClip)}},i.gotoLinkId=function(){var t=We.getActIDInfoByActId(this.curVO.linkid[this.selectIndex]);if(t){var e=t[0],i=t[1];if(e)switch(i){case 1805:case 1806:T.dispatch("ON_ACT_HUXIANID1"),T.dispatch("ON_ACT_HUXIANID2"),T.dispatch("ON_ACT_HUXIANVO_UPDATE"),T.dispatch("ACT_HUXIAN",124);break;case 2502:T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR"),T.dispatch("ACT_BAGUAFURNACE");break;case 2503:T.dispatch("ACT_BAGUA_FURNACE_PROGRESSBAR"),T.dispatch("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE"),T.dispatch("ACT_BAGUAFURNACE");break;case 1807:T.dispatch("BEASTS_BUY",118),T.dispatch("ON_ACT_BEAST_BUY");break;case 1809:T.dispatch("OPEN_FREE_MALL_PANEL"),T.dispatch("ON_ACT_FREE_MALL");break;default:var s=this.curVO.linkid[this.selectIndex];T.dispatch("OPEN_ACT_SPC_PANEL_BY_ACTID",e,s)}else Jt.addTip("不存在该活动")}else Da.ins().toActDetail(this.curVO.linkid[this.selectIndex])},i.onTalismanFrame=function(){this.spClip.y+=this.speed1,(this.spClip.y<=-310||-280<=this.spClip.y)&&(this.speed1*=-1)},e}(),LA=function(t){function i(){this._datas=null,this.curConfigVO=null,this.itemArr=null,this.effs=null,this.startX=NaN,this.colum=NaN,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0);var t="";for(var e in this._datas=en.getConfigs(),this._datas)t+=this._datas[e].desc;this.tab.labels=t,this.tab.on("change",this,this.onChange),this.tab.setItemSize(194),this.on("click",this,this.onClick)}w(i,"modules.dailyRecharege.DailyRechargePanel",_m);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.imgGoods:var e=ur.getItem(10201334);e.tempNum=1,Ae.show(e,"BASE_GOODS_TIP");break;case this.btnGet:"充点小钱"==this.btnGet.label?me.linkTo(11454):"领取"==this.btnGet.label&&yl.ins().toGet(this.curConfigVO.id)}},e.onChange=function(t){var e=this._datas[this.tab.selectedIndex];pt.send(10012,2,"每日充值-"+e.desc),this.update()},e.update=function(){for(var t=en.getConfigs(),e=0;e<t.length;e++)this["imgTR"+(e+1)].visible=1==t[e].state;this.curConfigVO=this._datas[this.tab.selectedIndex],this.updateBtn(),this.imgCost.skin="modules/dailyRecharge/t"+this.curConfigVO.id+".png",1==this.curConfigVO.id?(this.imgCost.pos(48,591),this.startX=27,this.colum=5,this.imgGoods.visible=!1,this.imgTip.visible=!1,this.imgLine.x=38,this.imgLine.width=674):(this.imgCost.pos(45,596),this.startX=286,this.colum=3,this.imgGoods.visible=!0,this.imgTip.visible=!0,this.imgLine.x=312,this.imgLine.width=400),this.updateRewards()},e.updateRewards=function(){for(var t in this.effs=this.effs||[],this.effs)this.effs[t].removeSelf();var e=this.curConfigVO.rewards;this.itemArr=this.itemArr||[];for(var i,s,n,o=Math.max(e.length,this.itemArr.length),a=0;a<o;a++)if(a<e.length){null==(i=this.itemArr[a])&&(i=new Ah(91,100,!1,!0,!0,!1),this.itemArr[a]=i);var l=a%this.colum,r=Math.floor(a/this.colum);i.mouseEnabled=!0,s=e[a],i.dataSource=[s.typeId,s.num],i.x=129*l+this.startX,i.y=157*r+670,this.box.addChild(i),1==s.flash&&(null==(n=(n=this.effs[a])||b.getOne()).parent&&(this.box.addChild(n),this.effs.push(n)),n.pos(i.x+90,i.y+93),n.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0))}else this.itemArr[a]&&this.itemArr[a].removeSelf()},e.updateBtn=function(){switch(this.curConfigVO.state){case 0:this.btnGet.label="充点小钱",this.btnGet.gray=!1,this.btnGet.mouseEnabled=!0,this.imgR.visible=!1;break;case 1:this.btnGet.label="领取",this.btnGet.gray=!1,this.btnGet.mouseEnabled=!0,this.imgR.visible=!0;break;case 2:this.btnGet.label="已领取",this.btnGet.gray=!0,this.btnGet.mouseEnabled=!1,this.imgR.visible=!1}},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.tab.selectedIndex=1},e.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},i}(),DA=function(t){function e(){this.selView=null,this._addData=null,this._getData=0,e.__super.call(this),this.on("click",this,this.onDown),this.on("display",this,this.onDisplay)}w(e,"modules.equip.View.DominateEquipAdvanceView",gm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){T.register("DOMINA_SELECT",this,this.setDominaSel),T.register("DOMINA_ADV_GET",this,this.setDominaGet),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("DOMINA_SELECT",this,this.setDominaSel),T.remove("DOMINA_ADV_GET",this,this.setDominaGet),this.addData=null,this.getData=0,this.off("undisplay",this,this.onUNDisplay)},i.setDominaSel=function(t){this.addData=xo.getGoodsByTypeID(t),this.getData=0},i.setDominaGet=function(t){this.addData=null,this.getData=t},i.onDown=function(t){switch(t.target){case this.imgDownBg:null!=this._addData?this.addData=null:(this.selView||(this.selView=new FA),this.selView.openWindow());break;case this.btnUp:this._addData?Tr.ins().toRegrowEquipStep(this._addData.typeid,1):Jt.addTip("请放入要升阶的核心")}},i.update=function(){},I(0,i,"addData",null,function(t){if(this._addData=t,this._addData&&0<this._addData.current_num){var e=ur.getItem(t.typeid);e?(this.imgDownBg.skin="com/ui/goodsBgs"+e.color+".png",this.imgDown.skin=e.realMaxico):(this.imgDownBg.skin="com/ui/itemAddBg.png",this.imgDown.skin="")}else this.imgDownBg.skin="com/ui/itemAddBg.png",this.imgDown.skin=""}),I(0,i,"getData",null,function(t){if(0<(this._getData=t)){var e=ur.getItem(t);e?(this.imgUpBg.skin="com/ui/goodsBgs"+e.color+".png",this.imgUp.skin=e.realMaxico,this.imgName.text=e.name,this.imgName.color=U.getColorDark(e.color)):(this.imgUpBg.skin="com/ui/itemMarkBg.png",this.imgUp.skin="",this.imgName.text="")}else this.imgUpBg.skin="com/ui/itemMarkBg.png",this.imgUp.skin="",this.imgName.text=""}),e}(),NA=function(t){function e(){this.itemArr=null,this.itemGetArr=null,this._curArr=null,this.getArr=null,e.__super.call(this),this.on("click",this,this.onClick),this.panel.vScrollBarSkin="",this.panel1.hScrollBarSkin=""}w(e,"modules.equip.View.DominateEquipDeView",ym);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnDe:if(this._curArr&&0<this._curArr.length){var e,i=[];for(var s in this._curArr)e=this._curArr[s],i.push(e.id);cr.ins().toMeltingEquip(xo.PACKTYPE_EQUIP,i)}else Jt.addTip("背包中暂无多余主宰装备")}},i.update=function(){this.updateItem(),this.updateGet()},i.updateItem=function(){this._curArr=sn.getCanMeltRegrowEquip();var t=this._curArr?this._curArr.length:0;this.itemArr=this.itemArr||[];for(var e=Math.max(this.itemArr.length,t),i=0;i<e;i++)if(i<t){this.itemArr[i]=this.itemArr[i]||new Ah(91,131,!1,!0,!0,!0,137);var s=this.itemArr[i],n=i%5,o=Math.floor(i/5);s.x=n*s.width+20,s.y=o*s.height+5;var a=ur.getItem(this._curArr[i].typeid);s.dataSource=a,s.text.text=a.name,s.text.y=100,this.panel.addChild(s)}else this.itemArr[i]&&this.itemArr[i].parent&&this.itemArr[i].removeSelf()},i.addToGetArr=function(t,e){var i;for(var s in this.getArr)if((i=this.getArr[s]).id==t)return void(i.tempNum+=e);(i=ur.getItem(t)).tempNum=e,this.getArr.push(i)},i.updateGet=function(){this.getArr=[];var t,e=0,i=0;for(var s in this._curArr){t=this._curArr[s];var n=ur.getItem(t.typeid);n&&(i=n.color,e=0==(e=Math.floor(n.id%100/10))?10:e,this.addToGetArr(10201217,5*(i-1)),5<=e&&(i<6?this.addToGetArr(na.DOMIN_CHIP_ARR[i-2],1):this.addToGetArr(na.DOMIN_CHIP_ARR[3],5)),8<=e&&this.addToGetArr(na.DOMIN_CORE_ARR[i-2],1))}this.itemGetArr=this.itemGetArr||[];for(var o=Math.max(this.itemGetArr.length,this.getArr.length),a=0;a<o;a++)if(a<this.getArr.length){this.itemGetArr[a]=this.itemGetArr[a]||new Ah(91,100,!1,!0,!0,!0,91);var l=this.itemGetArr[a];l.x=a*(l.width+23)+20,l.y=0,l.dataSource=this.getArr[a],l.num=this.getArr[a].tempNum,this.panel1.addChild(l)}else this.itemGetArr[a]&&this.itemGetArr[a].parent&&this.itemGetArr[a].removeSelf()},e}(),VA=function(t){function e(){this.headPart=null,this.curView=null,this.upView=null,this.quenchView=null,this.deView=null,this.advView=null,e.__super.call(this),this.cacheAs="normal",this.setWindowType("OPEN_COMMON","MASK_FULL",!1),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.spHead.addChild(this.headPart),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.tab.on("change",this,this.onClick);for(var t=0;t<4;t++)Nt.register("RP_DOMINATE_CHANGE_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_DOMINATE_QU_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_DOMINATE_UP_"+t,this.headPart.getItem(t),new Tt(39,10));Nt.register("RP_DOMINATE_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_DOMINATE_CHANGE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_DOMINATE_CHANGE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_DOMINATE_QU",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_DOMINATE_DE",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_DOMINATE_AD",this.tab.items[3],new Tt(19,-10))}w(e,"modules.equip.View.DominateEquipPanel",vm);var i=e.prototype;return i.showBtnEff=function(){this.upView&&this.upView.checkShowBtn(),this.quenchView&&this.quenchView.checkShowBtn()},i.update=function(){this.curView&&this.curView.update()},i.ShowSucc=function(){this.upView&&this.upView.showSucc()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),sn.curActorIndex=oa.curActorIndex,sn.curPos=21,this.headPart.resetSelect(sn.curActorIndex)},i.showViewByIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t},i.onHeadItemClick=function(t){sn.curActorIndex=t,this.update()},i.onClick=function(t){Tr.ins().checkDominateChange(),Tr.ins().checkDominateUpAndQu(),this.spView.removeChildren();switch(this.tab.selectedIndex){case 0:this.upView=this.upView||new MA,this.curView=this.upView,this.spView.addChild(this.upView),this.headPart.visible=!0;break;case 1:this.quenchView=this.quenchView||new BA,this.curView=this.quenchView,this.spView.addChild(this.quenchView),this.headPart.visible=!0;break;case 2:this.deView=this.deView||new NA,this.curView=this.deView,this.spView.addChild(this.deView),this.headPart.visible=!1;break;case 3:this.advView=this.advView||new DA,this.curView=this.advView,this.spView.addChild(this.advView),this.headPart.visible=!1}this.update()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),BA=function(t){function i(){var t;this.starArr=null,this.strArr=["lv","lan","zi","cheng"],this.stoneArr=[10201218,10201219,10201220,10201221],this.bitmapClip=null,this.curP=null,this._curSelPosP=null,this._curSelXml=null,this._curPalId=NaN,i.__super.call(this),this.on("click",this,this.onClick),this.starArr=[];for(var e=0;e<10;e++)(t=new et).x=38*e+336,t.y=376,this.addChild(t),this.starArr.push(t);this.imgGoods1.skin="modules/goods/path/cloak1.png",this.imgGoods2.skin="modules/goods/path/belt1.png",this.imgGoods3.skin="modules/goods/path/shoulder1.png",this.imgGoods4.skin="modules/goods/path/amulet1.png",this.txtLink.underline=this.txtLink1.underline=this.txtLink2.underline=this.txtLink3.underline=this.txtLink4.underline=!0}w(i,"modules.equip.View.DominateEquipQuenchView",Im);var e=i.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.showPosTip=function(t){var e;for(var i in this.curP.pos_list)if((e=this.curP.pos_list[i]).pos==t)return void Ae.show(e,"DOMINATE_EUIQP_TIP")},e.onClick=function(t){var e=0;switch(t.target){case this.txtLink:e=this._curSelPosP?this._curSelPosP.quench:0;ba.show(this.stoneArr[Math.ceil(e/10)]);break;case this.txtLink1:this.showPosTip(21);break;case this.txtLink2:this.showPosTip(22);break;case this.txtLink3:this.showPosTip(23);break;case this.txtLink4:this.showPosTip(24);break;case this.img1:this.curSelPos=q.DOMINATE_EQUIP_TYPE[0];break;case this.img2:this.curSelPos=q.DOMINATE_EQUIP_TYPE[1];break;case this.img3:this.curSelPos=q.DOMINATE_EQUIP_TYPE[2];break;case this.img4:this.curSelPos=q.DOMINATE_EQUIP_TYPE[3];break;case this.btnQu:if("淬炼"==this.btnQu.label)if(this._curSelPosP.quench<this._curSelXml.quenchTotal){e=this._curSelPosP?this._curSelPosP.quench:0;var i=xo.getGoodsNumByType(xo.GOODS_ID,na.DOMIN_CHIP_ARR[Math.floor(e/10)]);this._curSelXml.getQuenchNeedByLevel(e)<=i?Tr.ins().toRegrowEquipQuench(this._curPalId,sn.curPos):Jt.addTip("主宰精石数量不足!")}else Jt.addTip("主宰装备淬炼已满级!");else ba.show(sn.REGROWEQUIPGET_ARR[sn.curPos-21]);break;case this.btnClo:var s=sn.getCanChangeRegrowEquip(this.curP);s&&0<s.length?Tr.ins().toRegrowEquipLoad(this._curPalId,s):Jt.addTip("没有可穿戴的主宰装备")}},e.checkShowBtn=function(){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(85,36)),Tr.ins().showEffPalID%Tr.ins().palArr[sn.curActorIndex]==0?(this.bitmapClip.loadAndPlay("moduleEffect/change","default",0,!0),this.btnClo.addChild(this.bitmapClip)):(this.bitmapClip.stop(),this.btnClo.removeChild(this.bitmapClip))},e.update=function(){this.imgSel.x=7,this.imgSel.y=16+151*(sn.curPos-21);var t=sn.getRegrowEquipInfo();if(t){var e;this._curSelPosP=null,this._curPalId=pe.getPalByIndex(sn.curActorIndex).pal_id;var i,s,n,o=q.DOMINATE_EQUIP_TYPE.length;for(var a in t)if((s=t[a]).pal_id==this._curPalId){this.curP=s;break}for(var l=1;l<o+1;l++){i=null;var r,h=q.DOMINATE_EQUIP_TYPE[l-1];if(this.curP)for(var u in this.curP.pos_list)if((r=this.curP.pos_list[u]).pos==h){i=r;break}n=sn.getXMLVObyPos(h);var c=0;if(e=i?ur.getItem(i.equip_type_id):null){var d=xo.getGoodsNumByType(xo.GOODS_ID,na.DOMIN_CHIP_ARR[Math.floor(i.quench/10)]),p=n.getQuenchNeedByLevel(i.quench);this["rp"+l].visible=p<=d,this["imgBg"+l].skin="com/ui/goodsBgs"+e.color+".png",this["imgBg"+l].gray=!1;var m=0==i.quench?2:Math.ceil(i.quench/10)+1;this["txtCol"+l].text=U.COLOR_STR[m]+"色",this["txtCol"+l].color=U.getColorLight(m),this["txtName"+l].text=e.name,this["txtName"+l].color=U.getColorLight(e.color),this["txtLink"+l].visible=this["txtStar"+l].visible=!0,c=i.quench<10?i.quench:i.quench%10==0?10:i.quench%10,this["txtStar"+l].text=c+"星"}else this["imgBg"+l].skin="com/ui/goodsBgs1.png",this["imgBg"+l].gray=!0,this["rp"+l].visible=this["txtLink"+l].visible=this["txtStar"+l].visible=!1,this["txtName"+l].color="#f4f1b2",this["txtName"+l].text=sn.REGROWEQUIPNAME_ARR[l],n.level<=pe.myEquipLevel?(this["txtCol"+l].text="可穿戴",this["txtCol"+l].color="#139604"):(this["txtCol"+l].color="#ffffff",n.level<=100?this["txtCol"+l].text=n.level+"级开放":this["txtCol"+l].text=(n.level-100)/10+"转开放")}if(this.curP)for(u in this.curP.pos_list)if((r=this.curP.pos_list[u]).pos==sn.curPos){this._curSelPosP=r;break}this._curSelXml=sn.getXMLVObyPos(sn.curPos);var f=this._curSelPosP?this._curSelPosP.quench:0;if(f<this._curSelXml.quenchTotal?this.txtSub.text=this._curSelXml.getQuenchAttrSubAttr(Math.floor(f/10)):this.txtSub.text="（ 已满级 ）",e=this._curSelPosP?ur.getItem(this._curSelPosP.equip_type_id):null){d=xo.getGoodsNumByType(xo.GOODS_ID,na.DOMIN_CHIP_ARR[Math.floor(f/10)]);var _=(p=this._curSelXml.getQuenchNeedByLevel(f))<=d?"#96f254":"#ff0000";this.txtHas.style.align="center",this.txtHas.innerHTML=Z.font(d+"",_)+Z.font("/"+p,"#ffe0cf"),this.txtPer.text=this._curSelXml.getQuenchPerByLevel(this._curSelPosP.quench)+"％",f<this._curSelXml.quenchTotal?(this.txtDe.visible=!1,this.imgStone.visible=this.txtPer.visible=this.imgPut2.visible=this.imgPut1.visible=this.txtDe1.visible=this.txtDe2.visible=this.txtHas.visible=this.txtLink.visible=!0,this.imgStone.skin="modules/goods/maxico/jingshi"+this.strArr[Math.floor(f/10)]+".png"):(this.txtDe.visible=!0,this.txtDe.text="主宰装备淬炼已满级",this.txtDe.color="#b60202",this.imgStone.visible=this.txtPer.visible=this.imgPut2.visible=this.imgPut1.visible=this.txtDe1.visible=this.txtDe2.visible=this.txtHas.visible=this.txtLink.visible=!1),this.btnQu.label="淬炼"}else this.imgStone.visible=this.txtPer.visible=this.imgPut2.visible=this.imgPut1.visible=this.txtDe1.visible=this.txtDe2.visible=this.txtHas.visible=this.txtLink.visible=!1,this.txtDe.text="请先穿戴"+sn.REGROWEQUIPNAME_ARR[sn.curPos%10],this.txtDe.color="#ecd4c3",this.txtDe.visible=!0,this.btnQu.label="获得途径";c=f<10?f:f%10==0?10:f%10;for(var g=0;g<10;g++)this.starArr[g].skin=g<c?"com/ui/"+U.STAR_ARR[Math.ceil(f/10)+1]+".png":"com/ui/star_2.png";this.txtNow.text=this._curSelXml.getQuenchAttrByLevel(f);var y,v=k.numToTexture(Math.floor(this._curSelXml.getPowQuench()*f),"com/ui/powerNum");for(this.spPow.graphics.clear(),l=0;l<v.length;l++)y=v[l],this.spPow.graphics.drawTexture(y,y.width*l);this.checkShowBtn()}else Tr.ins().toRegrowEquipInfo()},I(0,e,"curSelPos",null,function(t){sn.curPos=t,this.update()}),i}(),MA=function(t){function e(){this.bitmapClip=null,this.effSucc=null,this.curP=null,this._curSelPosP=null,this._curSelXml=null,this._curPalId=NaN,e.__super.call(this),this.on("click",this,this.onClick),this.imgGoods1.skin="modules/goods/path/cloak1.png",this.imgGoods2.skin="modules/goods/path/belt1.png",this.imgGoods3.skin="modules/goods/path/shoulder1.png",this.imgGoods4.skin="modules/goods/path/amulet1.png",this.txtLink.underline=this.txtLink1.underline=this.txtLink2.underline=this.txtLink3.underline=this.txtLink4.underline=!0}w(e,"modules.equip.View.DominateEquipUpView",wm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.showPosTip=function(t){var e;for(var i in this.curP.pos_list)if((e=this.curP.pos_list[i]).pos==t)return void Ae.show(e,"DOMINATE_EUIQP_TIP")},i.checkShowBtn=function(){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(85,36));Tr.ins().showEffPalID;Tr.ins().showEffPalID%Tr.ins().palArr[sn.curActorIndex]==0?(this.bitmapClip.loadAndPlay("moduleEffect/change","default",0,!0),this.btnClo.addChild(this.bitmapClip)):(this.bitmapClip.stop(),this.btnClo.removeChild(this.bitmapClip))},i.showSucc=function(){this.effSucc||(this.effSucc=this.effSucc||b.getOne(),this.effSucc.pos(370,330),this.addChild(this.effSucc)),this.effSucc.loadAndPlay("moduleEffect/shengji_succ")},i.onClick=function(t){switch(t.target){case this.txtLink:ba.show(10201217);break;case this.txtLink1:this.showPosTip(21);break;case this.txtLink2:this.showPosTip(22);break;case this.txtLink3:this.showPosTip(23);break;case this.txtLink4:this.showPosTip(24);break;case this.img1:this.curSelPos=q.DOMINATE_EQUIP_TYPE[0];break;case this.img2:this.curSelPos=q.DOMINATE_EQUIP_TYPE[1];break;case this.img3:this.curSelPos=q.DOMINATE_EQUIP_TYPE[2];break;case this.img4:this.curSelPos=q.DOMINATE_EQUIP_TYPE[3];break;case this.btnUp:if("升级"==this.btnUp.label)if(this._curSelPosP&&this._curSelPosP.level<this._curSelXml.upTotal){var e=this._curSelPosP?this._curSelPosP.level:0,i=xo.getGoodsNumByType(xo.GOODS_ID,10201217);this._curSelXml.getUpNeedByLevel(e)<=i?Tr.ins().toRegrowEquipUpgrade(this._curPalId,sn.curPos):Jt.addTip("主宰碎片数量不足!")}else Jt.addTip("主宰装备已满级!");else ba.show(sn.REGROWEQUIPGET_ARR[sn.curPos-21]);break;case this.btnClo:var s=sn.getCanChangeRegrowEquip(this.curP);s&&0<s.length?Tr.ins().toRegrowEquipLoad(this._curPalId,s):Jt.addTip("没有可穿戴的主宰装备")}},i.update=function(){this.imgSel.x=7,this.imgSel.y=16+151*(sn.curPos-21);var t=sn.getRegrowEquipInfo();if(t){var e;this._curSelPosP=null,this._curPalId=pe.getPalByIndex(sn.curActorIndex).pal_id;var i,s,n,o=q.DOMINATE_EQUIP_TYPE.length;for(var a in t)if((s=t[a]).pal_id==this._curPalId){this.curP=s;break}for(var l=1;l<o+1;l++){i=null;var r,h=q.DOMINATE_EQUIP_TYPE[l-1];if(this.curP)for(var u in this.curP.pos_list)if((r=this.curP.pos_list[u]).pos==h){i=r;break}n=sn.getXMLVObyPos(h),e=i?ur.getItem(i.equip_type_id):null;var c=xo.getGoodsNumByType(xo.GOODS_ID,10201217);if(this._curSelXml=sn.getXMLVObyPos(h),e){var d=this._curSelXml.getUpNeedByLevel(i.level);this["rp"+l].visible=d<=c,this["imgBg"+l].skin="com/ui/goodsBgs"+e.color+".png",this["imgBg"+l].gray=!1,this["txtName"+l].text=e.name,this["txtName"+l].color=U.getColorLight(e.color),this["txtLink"+l].visible=!0,this["txtLV"+l].text="等级："+i.level,this["txtLV"+l].color="#ffffff"}else this["imgBg"+l].skin="com/ui/goodsBgs1.png",this["imgBg"+l].gray=!0,this["rp"+l].visible=this["txtLink"+l].visible=!1,this["txtName"+l].color="#f4f1b2",this["txtName"+l].text=sn.REGROWEQUIPNAME_ARR[l],n.level<=pe.myEquipLevel?(this["txtLV"+l].text="可穿戴",this["txtLV"+l].color="#139604"):(this["txtLV"+l].color="#ffffff",n.level<=100?this["txtLV"+l].text=n.level+"级开放":this["txtLV"+l].text=(n.level-100)/10+"转开放")}if(this.curP)for(u in this.curP.pos_list)if((r=this.curP.pos_list[u]).pos==sn.curPos){this._curSelPosP=r;break}this._curSelXml=sn.getXMLVObyPos(sn.curPos);var p=this._curSelPosP?this._curSelPosP.level:0;if(p<this._curSelXml.upTotal?this.txtSub.text=this._curSelXml.getUpAttrSubAttr():this.txtSub.text="（ 已满级 ）",e=this._curSelPosP?ur.getItem(this._curSelPosP.equip_type_id):null){var m=(d=this._curSelXml.getUpNeedByLevel(p))<=c?"#96f254":"#ff0000";this.txtHas.style.align="center",this.txtHas.innerHTML=Z.font(c+"",m)+Z.font("/"+d,"#ffe0cf"),p<this._curSelXml.upTotal?(this.txtDe.visible=!1,this.imgPut.visible=this.txtD.visible=this.txtHas.visible=this.txtLink.visible=!0):(this.txtDe.text="主宰装备已满级",this.txtDe.color="#b60202",this.imgPut.visible=this.txtD.visible=this.txtHas.visible=this.txtLink.visible=!1),this.btnUp.label="升级"}else this.txtNow.text=this._curSelXml.getUpAttrByLevel(0),this.imgPut.visible=this.txtD.visible=this.txtHas.visible=this.txtLink.visible=!1,this.txtDe.text="请先穿戴"+sn.REGROWEQUIPNAME_ARR[sn.curPos%10],this.txtDe.color="#ecd4c3",this.txtDe.visible=!0,this.btnUp.label="获得途径";this.txtNow.text=this._curSelXml.getUpAttrByLevel(p);var f,_=k.numToTexture(Math.floor(this._curSelXml.getPowUp()*p),"com/ui/powerNum");for(this.spPow.graphics.clear(),l=0;l<_.length;l++)f=_[l],this.spPow.graphics.drawTexture(f,f.width*l);this.checkShowBtn()}else Tr.ins().toRegrowEquipInfo()},I(0,i,"curSelPos",null,function(t){sn.curPos=t,this.update()}),e}(),FA=function(t){function e(){this.selImg=null,this.selId=0,this.arr=[10201222,10201223,10201224,10201225],this.itemArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onDown),this.selImg=new et,this.selImg.skin="com/ui/selectedBig.png"}w(e,"modules.equip.View.DominateSelectView",bm);var i=e.prototype;return i.onDown=function(t){switch(t.target){case this.btnY:0<this.selId&&T.dispatch("DOMINA_SELECT",this.selId);case this.btnN:case this.btnClose:this.closeWindow();break;default:t.target instanceof modules.pack.packView.GoodsImage&&(this.selImg.x=t.target.x-10,this.selImg.y=t.target.y-11,this.addChild(this.selImg),this.selId=t.target.data.id)}},i.update=function(){var t=xo.getGoodsData();if(t&&t.goods){this.itemArr=this.itemArr||[];for(var e=0;e<this.arr.length;e++){var i=xo.getGoodsNumByType(xo.GOODS_ID,this.arr[e]);null==this.itemArr[e]&&(this.itemArr[e]=new fh(null,!0,!0,105,!0),this.itemArr[e].x=140*e+56,this.itemArr[e].y=190,this.itemArr[e].mouseEnabled=!0,this.addChild(this.itemArr[e]));var s=ur.getItem(this.arr[e]);this.itemArr[e].data=s,this.itemArr[e].num=i,this.itemArr[e].gray=0==i}}},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.update()},e}(),UA=function(t){function e(){e.__super.call(this)}return w(e,"modules.equip.View.GoodsUseItem",Sm),e}(),GA=function(t){function e(){e.__super.call(this)}return w(e,"modules.equip.View.OrangeEquipDropView",xm),e}(),HA=function(t){function e(){e.__super.call(this)}return w(e,"modules.equip.View.SubTipView",Cm),e}(),WA=function(t){function e(){e.__super.call(this)}return w(e,"modules.equip.View.SubTipView2",Pm),e}(),qA=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.beasts.view.ExerBeastsHeadItem",t);var i=e.prototype;return i.update=function(){this.imgMask.visible=!(this._data&&this._data.isLoaded),this._data&&(this.img.skin="unit/monster/"+this._data.animalID+".png",this.txtName.color=U.getColorLight(this._data.color),this.txtName.text=this._data.name),this.checkRP(this._data)},i.checkRP=function(t){},I(0,i,"select",null,function(t){this.imgSelect.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=nn.getAnimalVO(t),this.update()}),e}(Tm),YA=function(t){function e(){this.infoPart=null,this._curListIndex=0,this.curVO=null,this.tempQVO=null,this.list=null,this.bar=null,e.__super.call(this),this.list=new Eh(600,150,60,23,this,aU,4,1,15,new Q(this,this.onRenderHandler),"com/ui/arrowLeft3.png","com/ui/arrowRight3.png",55,84),this.list.on("select",this,this.onListSelect),this.infoPart=new KA,this.infoPart.y=233,this.addChild(this.infoPart),this.bar=new it(160,800,300,25,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,12,5,12],[1,0,1,0],"#ffffff",18),this.addChild(this.bar),this.html.innerHTML=Z.span("激活","#5d3924")+Z.span("任意","#fff959")+Z.span("一只独行异兽可增加进度","#5d3924"),this.htmlNeedNum.style.align="center",Nt.register("RP_BEASTS_ALONE_LV",this.btnLvUp,new Tt(19,-10)),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.exercise.beasts.view.ExerBeastsAloneView",km);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.txtNeed:if(this.curVO){var e=B.countCur(nn.stepMaterialFormula,this.curVO.step);this.tempQVO=nn.getQualityVO(this.curVO.quality),this.tempQVO&&ba.show(this.tempQVO.stepUpNeed)}break;case this.btnUpStep:if(this.curVO)if(e=B.countCur(nn.stepMaterialFormula,this.curVO.step),this.tempQVO=nn.getQualityVO(this.curVO.quality),this.tempQVO)xo.getGoodsNumByTypeID(this.tempQVO.stepUpNeed)<e?ba.show(this.tempQVO.stepUpNeed):vl.ins().toRaise(nn.curAnimalID,1);break;case this.btnLoad:if(this.curVO)if(0<xo.getGoodsNumByTypeID(this.curVO.openCard))return void vl.ins().toActive(nn.curAnimalID);Jt.addTip("请先获取对应异兽卡再激活异兽");break;case this.btnLvUp:on.checkAloneSkillCanUp()?vl.ins().toAloneSkillUp():Jt.addTip("还未满足升级条件")}},i.onRenderHandler=function(t,e){t.select=e==this._curListIndex},i.onListSelect=function(t){this._curListIndex=t,nn.curAnimalID=0<this.list.getItem(t)?this.list.getItem(t):0,this.list.reflash(),this.update()},i.update=function(){this.list.reflash(),this.txtAlready.text=""+nn.loadAloneAnimalNum,this.curVO=nn.getAnimalVO(nn.curAnimalID),this.curVO&&(this.infoPart.animalID=this.curVO.animalID,this.updateQuality(this.curVO.quality)),this.updateSkill(),this.updateMask(),this.updateBtn(),this.updateRP()},i.updateSkill=function(){var t=nn.loadAloneAnimalNum-3*nn.aloneSkillStep;this.bar.setValue(t,3),this.txtSkillMsg.text="徽章效果：\n"+nn.getGoalSkillMsg(nn.aloneSkillStep),this.txtSkillLv.text="Lv."+nn.aloneSkillStep},i.updateMask=function(){this.spMask.visible=!(this.curVO&&this.curVO.isLoaded),this.curVO&&(this.txtLoadTip.text="获得方式："+on.getBeastsWayTip(this.curVO))},i.updateBtn=function(){this.curVO&&(this.curVO.step>=nn.maxStep?(this.btnUpStep.label="已满阶",this.btnUpStep.disabled=!0,this.htmlNeedNum.visible=!1):(this.btnUpStep.label="进阶",this.btnUpStep.disabled=!1,this.htmlNeedNum.visible=!0))},i.updateQuality=function(t){if(this.tempQVO=nn.getQualityVO(t),this.curVO&&this.tempQVO){var e=ur.getItem(this.tempQVO.stepUpNeed);e&&(this.txtNeed.text=e.name,this.txtNeed.color=U.getColorLight(e.color),this.txtNeed.underlineColor=this.txtNeed.color);var i=B.countCur(nn.stepMaterialFormula,this.curVO.step),s=xo.getGoodsNumByTypeID(this.tempQVO.stepUpNeed),n=s<i?"#b60202":"#ffffff";this.htmlNeedNum.innerHTML=Z.span(s+"",n)+Z.span("/"+i,"#ffffff")}},i.updateRP=function(){this.imgRPActive.visible=on.checkOneActive(nn.curAnimalID),this.imgRPStep.visible=on.checkOneStep(nn.curAnimalID)},i.onDisplay=function(){this.list.data=nn.showAloneAnimalIDs,this.list.selectedIndex=this.listSelByShow,nn.curBeastsAnimalID=0},I(0,i,"listSelByShow",function(){var t=nn.showAloneAnimalIDs,e=!1,i=!1,s=0;if(t){for(var n=0;n<t.length;n++){if(t[n]==nn.curBeastsAnimalID)return n;e=on.checkOneActive(t[n]),i=on.checkOneStep(t[n]),(e||i)&&0==s&&(s=n)}return s}return 0}),e}(),XA=function(t){function e(){this.curVO=null,this.clipRound=null,this.clip=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8",!0,"",!0),this.clipRound=b.getOne(),this.clipRound.pos(377,517),this.container.addChildAt(this.clipRound,0),this.clip=new b,this.spEff.addChild(this.clip),this.on("display",this,this.onDisplay),"eyouios"!=G.pf&&"eyouweiduan"!=G.pf&&"xiaoqizf"!=G.pf||(this.btn.visible=!1)}w(e,"modules.exercise.beasts.view.ExerBeastsGetPanel",Am);var i=e.prototype;return i.onDisplay=function(){this.clipRound.loadAndPlay("moduleEffect/bottom","default",0,!0),this.off("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),this.on("click",this,this.onClick)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay),this.off("click",this,this.onClick),this.clip.stop(),this.clipRound.stop()},i.onClick=function(t){switch(t.target){case this.btn:if(yt.isWX&&ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));Bt.resetShareParm("我在游戏中获得了上古异兽，快来围观吧!","1",[0,0]),yt.isWX?Bt.shareAppMessage():Bt.shareMenu();break;default:this.closeWindow()}},i.updateEff=function(t){this.curVO&&(this.clip.scale(this.curVO.scale*_e.scale,this.curVO.scale*_e.scale),this.clip.pos(this.curVO.getPosArr[0],this.curVO.getPosArr[1])),this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0)},I(0,i,"animalID",null,function(t){if(this.curVO=nn.getAnimalVO(t),this.curVO){this.txtSkill.text=this.curVO.skillMsg;var e=nn.getQualityVO(this.curVO.quality);if(e){var i=W.getAttrStrAndPower(e.stepKeyArr,e.stepFormulaArr,Math.max(0,this.curVO.step-1));if(i){var s=i[0].split("\n");if(s)for(var n=0;n<s.length;n++)this["txtAttr"+n].text=s[n];k.setPowerImgInSprite(this.spPower,Math.floor(i?Math.floor(nn.getPowerByPalNum(i[1]+this.curVO.skillPower)):0))}}this.updateEff(this.curVO.animalID)}}),e}(),KA=function(t){function i(){var t;this.ATTR_ITEMS_POS=[132,169,205,242],this.clip=null,this.attrItems=null,this.curVO=null,this.tempQVO=null,i.__super.call(this),this.clip=b.getOne(),this.spEff.addChild(this.clip),this.attrItems=[];for(var e=0;e<4;e++)(t=new V).pos(71,this.ATTR_ITEMS_POS[e]),this.imgInfo.addChild(t),this.attrItems.push(t);this.on("undisplay",this,this.onRemove)}w(i,"modules.exercise.beasts.view.ExerBeastsInfoPart",Em);var e=i.prototype;return e.updateQuality=function(t){if(this.tempQVO=nn.getQualityVO(t),this.curVO&&this.tempQVO){var e,i=0,s=0,n=0,o=0,a=0;if(this.curVO.isLoaded){for(l=0;l<this.tempQVO.stepKeyArr.length;l++)s=this.tempQVO.stepKeyArr[l],n=this.tempQVO.stepCfgArr[l][0],o=Math.floor(this.tempQVO.stepCfgArr[l][0]*this.tempQVO.stepCfgArr[l][1]*Math.max(0,this.curVO.step-1)/100),i+=W.getAttrPower(s,n+o),(e=this.attrItems[l]).clear(),e.addLinkText(W.getName(s)+"："+n,"#ffe0cf",!1,24),1<this.curVO.step&&e.addLinkText(" +"+o,"#96f254",!1,24);a=this.curVO.skillPower}else{a=o=i=n=0;for(var l=0;l<this.tempQVO.stepKeyArr.length;l++)s=this.tempQVO.stepKeyArr[l],(e=this.attrItems[l]).clear(),e.addLinkText(W.getName(s)+"："+n,"#ffe0cf",!1,24)}k.setPowerImgInSprite(this.spPower,Math.floor(nn.getPowerByPalNum(i+a)))}},e.updateEff=function(t){this.curVO&&(this.clip.scale(this.curVO.scale*_e.scale,this.curVO.scale*_e.scale),this.clip.pos(this.curVO.mainPosArr[0],this.curVO.mainPosArr[1])),this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0)},e.onRemove=function(){this.clip&&this.clip.stop()},I(0,e,"animalID",null,function(t){this.curVO=nn.getAnimalVO(t),this.curVO&&(this.txtName.color=U.getColorDark(this.curVO.color),this.txtName.text=this.curVO.name+" "+(this.curVO.isLoaded?k.getTenChNum(this.curVO.step)+"阶":"未激活"),this.txtSkill.text=this.curVO.skillMsg,this.updateQuality(this.curVO.quality)),this.updateEff(t)}),i}(),jA=function(t){function i(){var t;this.items=null,this._curItem=null,this.bar=null,this.curVO=null,this.tempQVO=null,this.cardImg=null,this.flabel=null,this.infoPart=null,this.beastsTeam1=null,this.beastsTeam2=null,this.beastsTeam3=null,this.cardVO=null,this.iconVO=null,i.__super.call(this),this.items=[];for(var e=0;e<4;e++)(t=new lU).pos(70+150*e,24),this.addChild(t),this.items.push(t);for(this.tab.labels=nn.tabLabels,e=0;e<this.tab.items.length;e++)Nt.register("RP_BEASTS_TEAM_CAN_ACTION"+e,this.tab.items[e],new Tt(19,-10));this.tab.on("change",this,this.onTabChange),this.infoPart=new KA,this.infoPart.y=233,this.addChild(this.infoPart),this.bar=new it(98,55,140,20,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,12,5,12],[1,0,1,0],"#ffffff",18),this.imgTeam.addChild(this.bar),this.cardImg=new fh(null,!0,!0,105,!0),this.cardImg.pos(141,16),this.spMask.addChild(this.cardImg),this.flabel=new V(null,"center",625),this.flabel.on("link",this,this.onFLabelLink),this.flabel.pos(37,130),this.spMask.addChild(this.flabel),this.htmlNeedNum.style.align="center",this.beastsTeam1=nn.getTeamMembers(1),this.beastsTeam2=nn.getTeamMembers(2),this.beastsTeam3=nn.getTeamMembers(3),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(i,"modules.exercise.beasts.view.ExerBeastsSocialView",Rm);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.txtNeed:if(this.curVO){var e=B.countCur(nn.stepMaterialFormula,this.curVO.step);this.tempQVO=nn.getQualityVO(this.curVO.quality),this.tempQVO&&ba.show(this.tempQVO.stepUpNeed)}break;case this.btnUp:if(this.curVO)if(e=B.countCur(nn.stepMaterialFormula,this.curVO.step),this.tempQVO=nn.getQualityVO(this.curVO.quality),this.tempQVO)xo.getGoodsNumByTypeID(this.tempQVO.stepUpNeed)<e?ba.show(this.tempQVO.stepUpNeed):vl.ins().toRaise(nn.curAnimalID,1);break;case this.imgTeam:pt.send(45,3,"历练-异兽-共鸣"),vl.ins().openTeamPanel();break;case this.imgStar:pt.send(45,2,"历练-异兽-升星"),vl.ins().openStarPanel();break;case this.btnLoad:if(this.curVO)if(0<xo.getGoodsNumByTypeID(this.curVO.openCard))return void vl.ins().toActive(nn.curAnimalID);Jt.addTip("请先获取对应异兽卡再激活异兽");break;default:t.target instanceof modules.exercise.beasts.view.BeastsTeamHeadItem&&(this.curItem=t.target)}},e.onDisplay=function(){this.tab.selectedIndex=this.tabIndex,this.curItem=this.items[this.beastsIndex],nn.curBeastsAnimalID=0},e.onTabChange=function(t){this.updateHeadsByIndex(this.tab.selectedIndex)},e.update=function(){this.curVO=nn.getAnimalVO(nn.curAnimalID),this.infoPart.animalID=nn.curAnimalID,this.curVO&&(this.txtStar.text=this.curVO.star+"/"+10*this.curVO.step,this.bar.setValue(nn.getActiveMembers(nn.curTeamID),4),this.updateQuality(this.curVO.quality)),this.updateMask(),this.updateBtn(),this.updateHeads(),this.updateRP()},e.updateMask=function(){this.spMask.visible=!(this.curVO&&this.curVO.isLoaded),this.flabel.clear(),this.curVO&&(this.txtLoadTip.text="获得方式："+on.getBeastsWayTip(this.curVO),this.cardVO=ur.getItem(this.curVO.openCard),this.cardVO&&(this.txtCardName.text=this.cardVO.name,this.txtCardName.color=U.getColorDark(this.cardVO.color),this.cardImg.data=this.cardVO),this.flabel.addLinkText(this.curVO.cardWayArr[0],"#ffe0cf",!1,24),this.flabel.addLinkText(this.curVO.cardWayArr[1],"#96f254",!0,24),this.flabel.addLinkText(this.curVO.cardWayArr[2],"#ffe0cf",!1,24))},e.onFLabelLink=function(t){if(this.curVO)switch(this.curVO.cardLinkType){case 1:me.linkTo(this.curVO.cardLink);break;case 2:if(this.iconVO=ao.getIconVO(this.curVO.cardLink),this.iconVO)ao.getIconStateShow(this.curVO.cardLink)&&pe.myLevel>=this.iconVO.openLv?me.linkTo(this.iconVO.linkID):pe.myLevel<this.iconVO.openLv?Jt.addTip("活动将于"+this.iconVO.openLv+"级开启"):Jt.addTip("活动已结束")}},e.updateQuality=function(t){if(this.tempQVO=nn.getQualityVO(t),this.curVO&&this.tempQVO){var e=ur.getItem(this.tempQVO.stepUpNeed);e&&(this.txtNeed.text=e.name,this.txtNeed.color=U.getColorLight(e.color),this.txtNeed.underlineColor=this.txtNeed.color);var i=B.countCur(nn.stepMaterialFormula,this.curVO.step),s=xo.getGoodsNumByTypeID(this.tempQVO.stepUpNeed),n=s<i?"#b60202":"#ffffff";this.htmlNeedNum.innerHTML=Z.span(s+"",n)+Z.span("/"+i,"#ffffff")}},e.updateBtn=function(){this.curVO&&(this.curVO.step>=nn.maxStep?(this.btnUp.label="已满阶",this.btnUp.disabled=!0,this.htmlNeedNum.visible=!1):(this.btnUp.label="进阶",this.btnUp.disabled=!1,this.htmlNeedNum.visible=!0))},e.updateHeadsByIndex=function(t){nn.curTeamID=nn.getTeamIDByIndex(t),this.updateHeads(),this.curItem=this.items[0]},e.updateHeads=function(){for(var t=nn.getTeamMembers(nn.curTeamID),e=0;e<this.items.length;e++)this.items[e].dataSource=t?t[e]:0},e.updateRP=function(){this.imgRPActive.visible=on.checkOneActive(nn.curAnimalID),this.imgRPStep.visible=on.checkOneStep(nn.curAnimalID),this.imgRPStar.visible=on.checkOneStar(nn.curAnimalID),this.imgRPResonate.visible=on.checkOneResonate(nn.curTeamID)},I(0,e,"tabIndex",function(){if(0<nn.curBeastsAnimalID){if(-1<this.beastsTeam1.indexOf(nn.curBeastsAnimalID))return 0;if(-1<this.beastsTeam2.indexOf(nn.curBeastsAnimalID))return 1;if(-1<this.beastsTeam3.indexOf(nn.curBeastsAnimalID))return 2}return 0}),I(0,e,"beastsIndex",function(){if(0<nn.curBeastsAnimalID){var t=0;if(-1<(t=this.beastsTeam1.indexOf(nn.curBeastsAnimalID)))return t;if(-1<(t=this.beastsTeam2.indexOf(nn.curBeastsAnimalID)))return t;if(-1<(t=this.beastsTeam3.indexOf(nn.curBeastsAnimalID)))return t}return 0}),I(0,e,"curItem",null,function(t){this._curItem&&(this._curItem.select=!1),this._curItem=t,this._curItem&&(this._curItem.select=!0),nn.curAnimalID=this._curItem&&this._curItem.data?this._curItem.data.animalID:0,this.update()}),i}(),QA=function(t){function e(){this.curVO=null,this.clip=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.htmlNeed.style.align="center",this.clip=new b,this.spEff.addChild(this.clip),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.exercise.beasts.view.ExerBeastsStarPanel",Om);var i=e.prototype;return i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.updateEff(nn.curAnimalID)},i.onRemove=function(){this.clip&&this.clip.stop()},i.updateEff=function(t){this.curVO&&(this.clip.scale(this.curVO.scale*_e.scale,this.curVO.scale*_e.scale),this.clip.pos(this.curVO.starPosArr[0],this.curVO.starPosArr[1])),this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0)},i.onClick=function(t){switch(t.target){case this.txtGet:ba.show(10407050);break;case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnUp:if(this.curVO){if(this.curVO.star>=10*this.curVO.step)return void Jt.addTip("进阶后才可继续升星");var e=nn.getStarUpNeed(this.curVO.star);if(e){var i=e[1];xo.getGoodsNumByTypeID(e[0])<i?ba.show(10407050):vl.ins().toRaise(nn.curAnimalID,2)}}}},i.update=function(){if(this.curVO=nn.getAnimalVO(nn.curAnimalID),this.imgRP.visible=!1,this.curVO){this.imgName.skin="modules/exercise/beastsImg/name"+this.curVO.animalID+".png",this.txtStep.text=k.getTenChNum(this.curVO.step)+"阶";for(var t=on.getBeastsSmallStar(this.curVO.star),e=0<this.curVO.star&&0==t,i=0;i<nn.maxStep;i++)this["star"+i].skin=e?"com/ui/star_4.png":i<t?"com/ui/star_4.png":"com/ui/star_5.png";var s=10*this.curVO.step;this.txtStar.text=this.curVO.star+"/"+s;var n=nn.getQualityVO(this.curVO.quality);if(n){var o=W.getAttrStrAndPower(n.starKeyArr,n.starFormulaArr,this.curVO.star);this.txtAttrCur.text=o?o[0]:"",k.setPowerImgInSprite(this.spPower,Math.floor(o?Math.floor(nn.getPowerByPalNum(o[1])):0)),this.curVO.star>=10*nn.maxStep?(this.txtAttrNext.text="",this.btnUp.label="已满星",this.btnUp.disabled=!0,this.htmlNeed.visible=!1,this.imgFull.visible=!0):(o=W.getAttrStrAndPower(n.starKeyArr,n.starFormulaArr,this.curVO.star+1),this.txtAttrNext.text=o?o[0]:"",this.btnUp.label="升星",this.btnUp.disabled=!1,this.htmlNeed.visible=!0,this.imgFull.visible=!1)}var a=nn.getStarUpNeed(this.curVO.star);if(a){var l=a[1],r=xo.getGoodsNumByTypeID(a[0]),h=l<=r?"#fef6d9":"#b60202";this.htmlNeed.innerHTML=Z.span("消耗升星石：","#5d3924",26)+Z.span(r+"",h,26)+Z.span("/"+l,"#fef6d9",26)}this.imgRP.visible=on.checkOneStar(this.curVO.animalID)}},e}(),zA=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.beasts.view.ExerBeastsTeamItem",Lm);var i=e.prototype;return i.update=function(){this.imgAlready.skin=this._data&&this._data.isLoaded?"modules/exercise/alreadyAct.png":"modules/exercise/noAct.png",this._data&&(this.img.skin="unit/monster/"+this._data.animalID+".png")},I(0,i,"select",null,function(t){this.imgSelect.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"animalID",null,function(t){this._data=nn.getAnimalVO(t),this.update()}),e}(),$A=function(t){function i(){var t;this.itemPos=[[283,167],[475,347],[282,529],[91,347]],this.items=null,this.curvo=null,this.curTeamID=0,this.bar=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.items=[];for(var e=0;e<4;e++)(t=new zA).pos(this.itemPos[e][0],this.itemPos[e][1]),this.addChild(t),this.items.push(t);this.bar=new it(237,390,200,20,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,12,5,12],[1,0,1,0],"#ffffff",18),this.addChild(this.bar),this.on("click",this,this.onClick)}w(i,"modules.exercise.beasts.view.ExerBeastsTeamPanel",Dm);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnLoad:var e=nn.getTeamMembers(this.curTeamID),i=e?e.length:0;if(nn.getActiveMembers(this.curTeamID)<i)return void Jt.addTip("需要激活以上所有异兽之后才可激活共鸣效果");vl.ins().toResonance(this.curTeamID)}},e.updateBtn=function(){this.imgRP.visible=on.checkOneResonate(this.curTeamID),nn.hasResonance(this.curTeamID)?(this.btnLoad.label="已激活",this.btnLoad.disabled=!0):(this.btnLoad.label="激活共鸣效果",this.btnLoad.disabled=!1)},e.updateItems=function(){var t=nn.getTeamMembers(this.curTeamID);if(t){for(var e=0;e<this.items.length;e++)this.items[e].animalID=t[e]?t[e]:0;this.bar.setValue(nn.getActiveMembers(this.curTeamID),t.length)}},e.updateAttr=function(){var t=0,e=nn.hasResonance(this.curTeamID);if(this.curvo&&(this.txtSkill.text=this.curvo.skill,this.curvo.attrData))for(var i,s=0;s<this.curvo.attrData.length;s++)i=this.curvo.attrData[s],this["txtAttr"+s].text=W.getName(i[0])+" +"+i[1],t+=W.getAttrPower(i[0],i[1]);k.setPowerImgInSprite(this.spPower,e?Math.floor(nn.getPowerByPalNum(t+this.curvo.skillPower)):0)},e.update=function(){this.updateAttr(),this.updateBtn(),this.updateItems()},I(0,e,"teamID",null,function(t){this.curTeamID=t,this.curvo=nn.getTeamVO(t),this.update()}),i}(),ZA=function(t){function e(){this.socialView=null,this.aloneView=null,this.curView=null,e.__super.call(this),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=new Q(this,this.onItemClick),Nt.register("RP_BEASTS_TEAM_ACTIVE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BEASTS_TEAM_STEP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BEASTS_RESONANCE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BEASTS_STAR",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_ACTIVE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_STEP",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_LV",this.tab.items[1],new Tt(19,-10)),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.beasts.view.ExerBeastsView",Nm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onItemClick=function(t){switch(t){case 0:this.tab.selectedIndex=0;break;case 1:this.tab.selectedIndex=1}},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.socialView=this.socialView||new jA,this.curView=this.socialView;break;case 1:this.aloneView=this.aloneView||new YA,this.curView=this.aloneView}this.spView.addChild(this.curView),this.update()},i.onDisplay=function(){},i.update=function(){this.curView&&this.curView.update()},I(0,i,"selectTab",null,function(t){this.tab.selectedIndex=t}),e}(),JA=function(t){function e(){this.POSGOODS3=[0,195,380],this.POSGOODS2=[90,310],this.POSGOODSX=195,this.nowType=0,this.cardInfo=null,this.maxInfo=null,this.stepName=["残缺","普通","完美","史诗","神话",""],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.btnmax.on("click",this,this.onClickMax),this.on("display",this,this.onDisplay),this.txtneed.style.align="center",this.txtneed.style.fontSize=26}w(e,"modules.exercise.beastsBook.view.BeastsBookCardAttrView",Vm);var i=e.prototype;return i.onDisplay=function(){T.register("BEASTS_BOOK_CARD_UPDATE",this,this.update),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("BEASTS_BOOK_CARD_UPDATE",this,this.update)},i.onClick=function(t){switch(t.target){case this.btnback:this.closeWindow();break;case this.btnup:switch(this.nowType){case 0:Il.getInstance().toActicityCard(an.currCardId);break;case 1:Il.getInstance().toUpLevel(an.currCardId);break;case 2:Il.getInstance().toUpStar(an.currCardId);break;case 3:Il.getInstance().toUpStep(an.currCardId)}}},i.onClickMax=function(t){Il.getInstance().openTargetPanel()},i.setNowCardType=function(){this.cardInfo=an.getCardsInfoById(an.currCardId),this.maxInfo=an.getBookMaxInfo(),this.nowType=0,this.btnup.label="收录",this.btnup.disabled=!1,this.cardInfo&&(this.cardInfo.purify_lv==this.maxInfo.maxStep&&this.cardInfo.star_lv==this.maxInfo.maxStar&&this.cardInfo.refine_lv==this.maxInfo.maxReinf?(this.txtnowlv.text="进阶前："+this.stepName[this.cardInfo.purify_lv],this.txtnextlv.text="进阶后："+this.stepName[this.cardInfo.purify_lv],this.btnup.label="已满阶",this.btnup.disabled=!0,this.nowType=4):this.cardInfo.star_lv==this.maxInfo.maxStar&&this.cardInfo.refine_lv==this.maxInfo.maxReinf?(this.txtnowlv.text="进阶前："+this.stepName[this.cardInfo.purify_lv],this.txtnextlv.text="进阶后："+this.stepName[this.cardInfo.purify_lv+1],this.btnup.label="进阶",this.imgfont1.skin="modules/beastsBook/font"+(this.cardInfo.purify_lv+2)+".png",this.imgfont2.skin="modules/beastsBook/font"+(this.cardInfo.purify_lv+3)+".png",this.imgup.skin="modules/beastsBook/beastsupstep.png",this.updateStar(this.cardInfo.star_lv,0,this.cardInfo.purify_lv),this.nowType=3):this.cardInfo.refine_lv==this.maxInfo.maxReinf?(this.txtnowlv.text="升星前："+this.cardInfo.star_lv+"星",this.txtnextlv.text="升星后："+(this.cardInfo.star_lv+1)+"星",this.btnup.label="升星",this.updateStar(this.cardInfo.star_lv,this.cardInfo.star_lv+1,this.cardInfo.purify_lv),this.imgfont1.skin="modules/beastsBook/font"+(this.cardInfo.purify_lv+2)+".png",this.imgfont2.skin="modules/beastsBook/font"+(this.cardInfo.purify_lv+2)+".png",this.imgup.skin="modules/beastsBook/beastsupstar.png",this.nowType=2):(this.txtnowlv.text="升级前：Lv."+this.cardInfo.refine_lv,this.txtnextlv.text="升级后：Lv."+(this.cardInfo.refine_lv+1),this.btnup.label="强化",this.nowType=1))},i.update=function(){this.setNowCardType();var t=an.getCardsById(an.currCardId),e=0;this.updateViewByType();var i="";if(t){this.imghead.skin="modules/beastsBook/bigcard/"+t.id+".png",this.imgname.skin="modules/beastsBook/bigcard/t_"+t.id+".png",this.imgcard1.skin="modules/beastsBook/card/"+t.id+".png",this.imgcard2.skin="modules/beastsBook/card/"+t.id+".png",this.imgcardbg1.skin="modules/beastsBook/bg"+t.quality+".png",this.imgcardbg2.skin="modules/beastsBook/bg"+t.quality+".png",this.imgcardname1.skin="modules/beastsBook/card/t_"+t.id+".png",this.imgcardname2.skin="modules/beastsBook/card/t_"+t.id+".png",this.txtdes.text=t.desc;var s=W.parseAttr(t.originAttr);this.txtgetattr.text="",this.txtnowattr1.text="",this.txtnowattr2.text="",this.txtnowattr3.text="",this.txtnowattr4.text="",this.txtnextattr1.text="",this.txtnextattr2.text="",this.txtnextattr3.text="",this.txtnextattr4.text="";for(var n=0;n<s.keys.length;n++){var o=s.keys[n],a=Number(s.get(o)),l=Number(s.get(o));if(this.cardInfo){a+=an.getNowAttr(t.quality,this.cardInfo.purify_lv,this.cardInfo.star_lv,this.cardInfo.refine_lv,o);var r=this.cardInfo.refine_lv+1,h=this.cardInfo.star_lv,u=this.cardInfo.purify_lv;r>this.maxInfo.maxReinf&&(r=0,(h+=1)>this.maxInfo.maxStar&&(h=0,u+=1),u>this.maxInfo.maxStep&&(u=this.maxInfo.maxStep)),l+=an.getNowAttr(t.quality,u,h,r,o)}i+=W.getName(o)+"+"+a+"\n",i+="\n",this["txtnowattr"+(n+1)].text=W.getName(o)+"+"+a,W.getName(o)+"+"+l+"\n",this["txtnextattr"+(n+1)].text=W.getName(o)+"+"+l,e+=W.getAttrPower(Number(o),a)}if(this.nowType<1){this.txtgetattr.text=i;var c=t.item.split(","),d=xo.getGoodsNumByType(xo.GOODS_ID,c[0]),p=ur.getItem(Number(c[0])),m="";p&&(m=p.name),d>=Number(c[1])?this.txtneed.innerHTML=Z.span(m+":","#5d3924")+Z.span(d+"","#139604")+Z.span("/"+c[1],"#5d3924"):this.txtneed.innerHTML=Z.span(m+":","#5d3924")+Z.span(d+"","#b60202")+Z.span("/"+c[1],"#5d3924")}else this.cardInfo&&this.cardInfo.purify_lv==this.maxInfo.maxStep&&this.cardInfo.star_lv==this.maxInfo.maxStar&&this.cardInfo.refine_lv==this.maxInfo.maxReinf&&(this.txtnextattr1.text="",this.txtnextattr2.text="",this.txtnextattr3.text="",this.txtnextattr4.text="");if(this.updatePower(e),0<this.nowType&&4!=this.nowType){var f=an.getNowGoods(t.id,t.quality,this.cardInfo.purify_lv,this.nowType);this.updateGoods(f)}this.imgrp.visible=an.checkCardRedPoint(t.id)}},i.updatePower=function(t){t=Math.floor(t*pe.user.pals.length);var e,i=k.numToTexture(t,"com/ui/powerNum");this.sppower.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.sppower.graphics.drawTexture(e,e.width*s)},i.updateGoods=function(t){this.spGoods.removeChildren();var e=[this.POSGOODSX];if(2==t.length){e=this.POSGOODS2;var i=new et;i.skin="modules/beastsBook/plus.png",i.x=260,i.y=30,this.spGoods.addChild(i)}else if(3==t.length){e=this.POSGOODS3,(i=new et).skin="modules/beastsBook/plus.png",i.x=158,this.spGoods.addChild(i);var s=new et;s.skin="modules/beastsBook/plus.png",s.x=353,this.spGoods.addChild(s),i.y=s.y=30}for(var n=0;n<t.length;n++){var o=t[n].split(","),a=new Ah,l=new jt;a.dataSource=o[0],this.spGoods.addChild(a),a.x=e[n],l.width=120,l.align="center",l.fontSize=24;var r=0;10201113==Number(o[0])?l.text=k.getShortenSilverStr(pe.user.attr.silver)+"/"+k.getShortenSilverStr(Number(o[1])):(r=xo.getGoodsNumByType(xo.GOODS_ID,Number(o[0])),l.text=r+"/"+o[1]),this.spGoods.addChild(l),l.x=e[n]+30,l.y=140}},i.updateViewByType=function(){this.nowType<=1||4==this.nowType?(this.spinfo2.visible=!1,this.spinfo1.visible=this.txtgetattr.visible=!0):(this.spinfo2.visible=!0,this.spinfo1.visible=!1),0==this.nowType?(this.txtgetattr.visible=!0,this.txtneed.visible=!0,this.attrup1.visible=!1,this.attrup2.visible=!1,this.spGoods.visible=!1,this.imgmaxstep.visible=!1,this.imgArrowR.visible=!1,this.imgtitle.skin="modules/beastsBook/getattrimg.png",this.imgpower.y=840,this.sppower.y=849,this.btnup.y=900):(this.txtgetattr.visible=!1,this.txtneed.visible=!1,this.imgmaxstep.visible=!1,this.imgArrowR.visible=!0,this.attrup1.visible=!0,this.attrup2.visible=!0,this.spGoods.visible=!0,this.imgpower.y=980,this.sppower.y=989,this.btnup.y=1040,4==this.nowType&&(this.imgmaxstep.visible=!0,this.spGoods.visible=!1,this.imgpower.y=840,this.sppower.y=849,this.btnup.y=900),this.imgtitle.skin="modules/beastsBook/beastsattrimg.png")},i.updateStar=function(t,e,i){this.spstar1.removeChildren(),this.spstar2.removeChildren();for(var s=0;s<t;s++){(n=new et).skin="modules/beastsBook/star"+(i+2)+".png",this.spstar1.addChild(n),n.x=30*s}for(s=0;s<e;s++){var n;(n=new et).skin="modules/beastsBook/star"+(i+2)+".png",this.spstar2.addChild(n),n.x=30*s}},e}(),tE=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.exercise.beastsBook.view.BeastsBookCardItem",Bm);var i=e.prototype;return i.onClick=function(t){an.currCardId=this._data.id,Il.getInstance().openAttrPanel()},I(0,i,"dataSource",function(){return this._data},function(t){if(this._data=an.getCardsById(t),this._data){this.spstar.removeChildren(),this.imgbg.skin="modules/beastsBook/bg"+this._data.quality+".png",this.imgcard.skin="modules/beastsBook/card/"+this._data.id+".png",this.imgframe.skin="modules/beastsBook/font2.png",this.imgname.skin="modules/beastsBook/card/t_"+this._data.id+".png",this.filterbox.gray=!0;var e=an.getCardsInfoById(this._data.id);if(e){this.imgframe.skin="modules/beastsBook/font"+(e.purify_lv+2)+".png";for(var i=0;i<e.star_lv;i++){var s=new et;s.skin="modules/beastsBook/star"+(e.purify_lv+2)+".png",this.spstar.addChild(s),s.x=30*i}this.filterbox.gray=!1}this.imgrp.visible=an.checkCardRedPoint(this._data.id)}}),e}(),eE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5")}return w(e,"modules.exercise.beastsBook.view.BeastsBookCardTargetView",Mm),e.prototype.update=function(){var t=an.getCardsById(an.currCardId),e=an.getBookMaxInfo();if(t){this.imgbg.skin="modules/beastsBook/bg"+t.quality+".png",this.imgcard.skin="modules/beastsBook/card/"+t.id+".png",this.imgname.skin="modules/beastsBook/card/t_"+t.id+".png",this.txtname.text=t.name+"·神话5星";for(var i=W.parseAttr(t.originAttr),s=0;s<i.keys.length;s++){var n=i.keys[s],o=Number(i.get(n));o+=an.getNowAttr(t.quality,e.maxStep,e.maxStar,e.maxReinf,n),s<4&&(this["txtattr"+(s+1)].text=W.getName(n)+"+"+o)}}},e}(),iE=function(t){function e(){this.cardItems=null,e.__super.call(this),this.cardItems=[],this.list.vScrollBar.autoHide=!0,this.on("display",this,this.onDisplay),this.cmb.on("change",this,this.chooseType),this.linkattr.on("click",this,this.onLink)}w(e,"modules.exercise.beastsBook.view.BeastsBookCardView",Fm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.cmb.selectedIndex=0,this.chooseType(),T.register("BEASTS_BOOK_CARD_UPDATE",this,this.chooseType),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("BEASTS_BOOK_CARD_UPDATE",this,this.chooseType)},i.update=function(){},i.chooseType=function(){var t,e,i=an.getCardsByType(this.cmb.selectedIndex);0==i.length&&1==this.cmb.selectedIndex?(Jt.addTip("当前暂无已收录的卡牌"),this.txttip.visible=!0,this.txttip.text="当前暂无已收录的卡牌"):0==i.length&&2==this.cmb.selectedIndex?(Jt.addTip("当前暂无未收录的卡牌"),this.txttip.visible=!0,this.txttip.text="当前暂无未收录的卡牌"):this.txttip.visible=!1,i=i.sort(this.sortCard),this.cardItems.length>i.length&&12<i.length&&(this.cardItems.length=i.length),this.list.removeChildren();for(var s=0,n=0,o=0;o<i.length;o++)s=Math.floor(o/3),n=o%3,e=i[o],(t=(t=this.cardItems[o])||new tE).dataSource=e.id,t.pos(12+230*n,330*s),this.list.addChild(t)},i.onLink=function(t){Il.getInstance().openTotalAttrView(1)},i.sortCard=function(t,e){var i=an.getCardsInfoById(t.id),s=an.getCardsInfoById(e.id);return i?s?i.purify_lv>s.purify_lv?-1:i.purify_lv<s.purify_lv?1:i.star_lv>s.star_lv?-1:i.star_lv<s.star_lv?1:i.refine_lv>s.refine_lv?-1:i.refine_lv<s.refine_lv?1:t.quality>e.quality?-1:t.quality<e.quality?1:t.id<e.id?-1:t.id>e.id?1:0:1==an.checkCardRedPoint(e.id)?1:-1:s?1==an.checkCardRedPoint(t.id)?-1:1:1==an.checkCardRedPoint(t.id)&&0==an.checkCardRedPoint(e.id)?-1:0==an.checkCardRedPoint(t.id)&&1==an.checkCardRedPoint(e.id)?1:t.quality<e.quality?-1:t.quality>e.quality?1:t.id<e.id?-1:t.id>e.id?1:0},e}(),sE=function(t){function e(){this.rewardItems=null,this.effects=null,this.curStart=0,this.showGoodsLen=4,this.LOTTERY_COST_ONE=1,this.LOTTERY_COST_TEN=10,this.timeoutKey1=0,this.timeoutKey2=0,this.hideRewardLen=0,e.__super.call(this),this.txtnum.style.fontSize=24,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),Ja.ins().createCheckShowIcon(1,6,this,9,230),Ja.ins().createCheckShowIcon(2,6,this,624,230)}w(e,"modules.exercise.beastsBook.view.BeastsBookLotteryView",Um);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){this.onBagDataChange();var t=ur.getItem(an.lotteryVo.oneBox);t&&(this.imgbg1.skin="com/ui/goodsBg"+t.color+".png",this.imgicon1.skin=t.realMaxico,this.txtname1.color=U.getColorLight(t.color),this.txtname1.text=t.name,this.txtprice1.text=t.priceDic[2]);var e=ur.getItem(an.lotteryVo.tenBox);e&&(this.imgbg2.skin="com/ui/goodsBg"+e.color+".png",this.imgicon2.skin=e.realMaxico,this.txtname2.color=U.getColorLight(e.color),this.txtname2.text=e.name,this.txtprice2.text=e.priceDic[2])},i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.onBagDataChange),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("BAGDATA_CHANGE",this,this.onBagDataChange),_t.removeFromFrame(this,this.showReward),_t.removeFromFrame(this,this.hideReward),_t.clearTimeout(this.timeoutKey1),_t.clearTimeout(this.timeoutKey2)},i.onClick=function(t){switch(t.target){case this.btnone:if(xo.getGoodsNumByType(xo.GOODS_ID,an.lotteryVo.useItem)>=this.LOTTERY_COST_ONE){var e=ur.getItem(an.lotteryVo.useItem);e&&this.toBoxOpen(this.LOTTERY_COST_ONE,e.name)}else Jt.addTip("珍兽之魂不足，购买珍兽宝箱可获赠");break;case this.btnten:if(xo.getGoodsNumByType(xo.GOODS_ID,an.lotteryVo.useItem)>=this.LOTTERY_COST_TEN){var i=ur.getItem(an.lotteryVo.useItem);i&&this.toBoxOpen(this.LOTTERY_COST_TEN,i.name)}else Jt.addTip("珍兽之魂不足，购买珍兽宝箱可获赠");break;case this.btnbuy1:SF.ins.show(an.lotteryVo.oneBox,2,0,10001,null,null,1);break;case this.btnbuy2:SF.ins.show(an.lotteryVo.tenBox,2,0,10001,null,null,1);break;case this.imgicon1:var s="",n=ur.getItem(an.lotteryVo.oneBox);n&&(s=ur.isEquip(n.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",n.tempNum=1,Ae.show(n,s));break;case this.imgicon2:var o="",a=ur.getItem(an.lotteryVo.tenBox);a&&(o=ur.isEquip(a.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",a.tempNum=1,Ae.show(a,o))}},i.toBoxOpen=function(t,e){var i=Z.span("是否消耗","#5d3924")+Z.span(t+"张"+e,"#F7EF5F")+Z.span("召唤"+t+"次","#5d3924")+Z.span("？","#5d3924"),s=0;t==this.LOTTERY_COST_ONE?s=1:t==this.LOTTERY_COST_TEN&&(s=2),Lo.showSecAlert(i,Il.getInstance(),Il.getInstance().toLottery,[s],"ExerBeastsBookBoxOpen")},i.onBagDataChange=function(){var t=ur.getItem(an.lotteryVo.useItem);if(t){var e=xo.getGoodsNumByType(xo.GOODS_ID,t.id);this.txtnum.innerHTML=Z.span("拥有","#e1c6bc")+Z.span(t.name,U.getColorDark(t.color))+Z.span("："+e,"#e1c6bc")}},i.timeoutShow=function(){0<this.spreward.numChildren&&(this.hideRewardLen=this.showGoodsLen,_t.addToFrame(this,this.hideReward))},i.startLoop=function(){var t;this.spreward.removeChildren(),this.rewardItems=this.rewardItems||[],this.effects=this.effects||[],this.curStart=0;var e=an.getLottoViewShowGoods(this.curStart,this.showGoodsLen);this.spreward.removeChildren();for(var i,s,n=0,o=0;o<this.showGoodsLen;o++)null==(t=this.rewardItems[o])&&(t=new Ah(105,115,!1,!0,!0,!1),this.rewardItems.push(t)),t.x=150*o,t.dataSource=[e[o][0],e[o][1]],s=ur.getItem(e[o][0]),null==t.parent&&this.spreward.addChild(t),1==e[o][2]&&(this.effects[n]=this.effects[n]||b.getOne(),(i=this.effects[n]).loadAndPlay("moduleEffect/goodsItemEff105_"+s.color,"default",0,!0),i.pos(t.x+91,t.y+109),null==i.parent&&this.spreward.addChild(i),n++);this.timeoutKey1=_t.setTimeout(this,this.timeoutShow,null,3e3)},i.hideReward=function(){if(0<this.spreward.alpha)this.spreward.alpha-=.02;else{var t;this.curStart+=this.showGoodsLen,_t.removeFromFrame(this,this.hideReward),this.hideRewardLen=this.showGoodsLen;var e=an.lotteryVo.rewardDatas.length;this.curStart>=e&&(this.curStart=0);var i,s,n=an.getLottoViewShowGoods(this.curStart,this.showGoodsLen),o=0;this.spreward.removeChildren();for(var a=0;a<this.showGoodsLen;a++)null!=n[a]&&((t=this.rewardItems[a]).dataSource=[n[a][0],n[a][1]],s=ur.getItem(n[a][0]),t.x=150*a,null==t.parent&&this.spreward.addChild(t),1==n[a][2]&&(this.effects[o]=this.effects[o]||b.getOne(),(i=this.effects[o]).loadAndPlay("moduleEffect/goodsItemEff105_"+s.color,"default",0,!0),i.pos(t.x+91,t.y+109),null==i.parent&&this.spreward.addChild(i),o++));_t.addToFrame(this,this.showReward)}},i.showReward=function(){this.spreward.alpha<1?this.spreward.alpha+=.02:(_t.removeFromFrame(this,this.showReward),this.timeoutKey2=_t.setTimeout(this,this.timeoutShow,null,3e3))},e}(),nE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnclose.on("click",this,this.onClick)}w(e,"modules.exercise.beastsBook.view.BeastsBookSuitAttrView",Gm);var i=e.prototype;return i.onClick=function(t){this.closeWindow()},i.update=function(t){void 0===t&&(t=0);var e={};0==t?(this.txtdes.text="套装属性",this.txtTitle.text="套装战力：",e=an.getTotalSuitAttr(),this.sppower.x=235):1==t&&(this.txtdes.text="异兽谱属性",this.txtTitle.text="异兽谱战力：",e=an.getTotalCardAttr(),this.sppower.x=255);var i=1,s=0;for(var n in this.txtval1.text="0",this.txtval2.text="0",this.txtval3.text="0",this.txtval4.text="0",e)this["txtattr"+i].text=W.getName(Number(n)),this["txtval"+i].text=e[n]+"",s+=W.getAttrPower(Number(n),e[n]),i+=1;this.updatePower(s)},i.updatePower=function(t){t=Math.floor(t*pe.user.pals.length);var e,i=k.numToTexture(t,"com/ui/powerNum");this.sppower.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.sppower.graphics.drawTexture(e,e.width*s)},e}(),oE=function(t){function e(){this._data=null,this._suitId=NaN,this.selectId=0,e.__super.call(this),T.register("BEASTS_BOOK_SUIT_ITEM_CLICK",this,this.isShowClick),this.imgclick.visible=!1,this.imgred.visible=!1}w(e,"modules.exercise.beastsBook.view.BeastsBookSuitItem",t);var i=e.prototype;return i.isShowClick=function(t,e,i,s){void 0===s&&(s=!1),this._suitId<=-1||(this.imgclick.visible=!1,t==this._suitId&&s?(this.selectId=t,this.imgclick.visible=!0):t==this.selectId&&(this.imgclick.visible=!0))},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this._data=t,this._suitId=this._data.id,this.suitname.text=this._data.name+" ("+this._data.cardnum+"/"+this._data.cardlen+")",this._data.cardnum!=this._data.cardlen||this._data.isactive?this.imgred.visible=!1:this.imgred.visible=!0)}),e}(Hm),aE=function(t){function i(){this.cardItems=null,this.CARDPOS=[434,94,324,303,538,303],this.totalAttrView=null,this.nowSelectSuitId=0,i.__super.call(this),this.list.itemRender=oE,this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelect),this.linktotalattr.on("click",this,this.onLink),this.on("display",this,this.onDisplay),this.cardItems=[];for(var t=0;t<3;t++){var e=new tE;e.visible=!1,e.scaleX=e.scaleY=.6,this.addChild(e),this.cardItems.push(e)}this.btnactive.on("click",this,this.onActive)}w(i,"modules.exercise.beastsBook.view.BeastsBookSuitView",Wm);var e=i.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),T.register("BEASTS_BOOK_CARD_UPDATE",this,this.updateSuitShow),this.nowSelectSuitId=1,this.updateSuitShow(),this.list.selectedIndex=0},e.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("BEASTS_BOOK_CARD_UPDATE",this,this.updateSuitShow)},e.update=function(){},e.updateSuitShow=function(){for(var t=an.getAllSuit(),e=[],i=0;i<t.length;i++){var s=t[i],n=an.cardNumInSuit(s.cards),o=an.getSuitActive(s.id),a=n[1]==n[0];e.push({name:s.name,id:s.id,cardlen:n[1],cardnum:n[0],isactive:o}),this.nowSelectSuitId==s.id&&this.updateSuitInfoShow(s.id,o,a)}this.list.dataSource=e},e.onSelect=function(t){var e=this.list.getItem(t),i=!1,s=!1;this.nowSelectSuitId=e.id,e.cardlen==e.cardnum&&(i=!0),e.isactive&&(s=!0),this.updateSuitInfoShow(e.id,s,i),T.dispatch("BEASTS_BOOK_SUIT_ITEM_CLICK",e.id,s,i,!0)},e.updateSuitInfoShow=function(t,e,i){var s=an.getOneSuitById(t);if(s){for(var n=s.cards.split("|"),o=0;o<n.length;o++)this.cardItems[o].dataSource=Number(n[o]),this.cardItems[o].x=this.CARDPOS[2*o],this.cardItems[o].y=this.CARDPOS[2*o+1],this.cardItems[o].visible=!0;var a=W.parseAttr(s.attrs);for(o=0;o<a.keys.length;o++){var l=a.keys[o];this["txtattr"+(o+1)].innerHTML=Z.font(W.getName(l)+":"+a.get(l),"#fef6d9")}e?(this.imgrp.visible=!1,this.btnactive.disabled=!0,this.btnactive.label="已激活"):(this.imgrp.visible=i,this.btnactive.disabled=!1,this.btnactive.label="激活")}},e.onLink=function(t){Il.getInstance().openTotalAttrView(0)},e.onActive=function(t){var e=this.list.getItem(this.list.selectedIndex);e&&Il.getInstance().toActicitySuit(e.id)},i}(),lE=function(t){function e(){this.curView=null,this.cardView=null,this.suitView=null,this.lotteryView=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,Nt.register("RP_BEATSTBOOK_CARD",this.tab.items[0]),Nt.register("RP_BEATSTBOOK_SUIT",this.tab.items[1])}w(e,"modules.exercise.beastsBook.view.BeastsBookView",qm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onUnDisplay=function(){},i.onDisplay=function(){},i.onTabChange=function(t){switch(this.spview.removeChildren(),t){case 0:this.cardView=this.cardView||new iE,this.curView=this.cardView,Il.getInstance().toInfo(),this.spview.addChild(this.cardView);break;case 1:this.suitView=this.suitView||new aE,this.curView=this.suitView,this.spview.addChild(this.suitView);break;case 2:this.lotteryView=this.lotteryView||new sE,this.curView=this.lotteryView,this.lotteryView.startLoop(),this.spview.addChild(this.lotteryView)}this.update()},i.update=function(){this.curView&&this.curView.update()},i.selecteTab=function(t){this.tab.selectedIndex=t},e}(),rE=function(t){function s(){this.cacheItems=null,this.totalAttrView=null,s.__super.call(this),this.cacheItems=[];for(var t=hn.getCardTypes(),e="",i=0;i<t.length;i++)i<t.length-1?e+=t[i].typeName+",":e+=t[i].typeName;this.tab.labels=e,this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.list.vScrollBar.autoHide=!0,this.linkAttr.on("click",this,this.onClick),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE0",this.tab.items[0]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE1",this.tab.items[1]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE2",this.tab.items[2]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE3",this.tab.items[3]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE4",this.tab.items[4]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE5",this.tab.items[5]),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE6",this.tab.items[6])}w(s,"modules.exercise.biography.view.ExerBiographyCardView",Ym);var e=s.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onClick=function(t){this.showTotalAttrView()},e.showTotalAttrView=function(){null==this.totalAttrView&&(this.totalAttrView=new SE),this.totalAttrView.openWindow(),this.totalAttrView.update()},e.onTabChange=function(t){this.chooseType()},e.update=function(){if(hn.cardTocDatas){this.chooseType(),this.txtNum.text=hn.cardTocDatas.length+"/"+hn.getCards().length;var t,e=hn.getTotalPower(),i=k.numToTexture(e,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)t=i[s],this.spPower.graphics.drawTexture(t,t.width*s)}hn.checkCardTabBarRP()},e.sortCard=function(t,e){var i=hn.getCardTocDataById(t.id),s=hn.getCardTocDataById(e.id);if(i)return s?t.id>e.id?1:t.id<e.id?-1:0:-1;if(s)return 1;var n=hn.checkCardIsCanUpgrade(t),o=hn.checkCardIsCanUpgrade(e);return n&&0==o?-1:0==n&&o?1:t.id>e.id?1:t.id<e.id?-1:0},e.chooseType=function(){var t,e,i=hn.getCardTypeByIndex(this.tab.selectedIndex),s=hn.getCardsByType(i.type);s=s.sort(this.sortCard),this.cacheItems.length>s.length&&12<s.length&&(this.cacheItems.length=s.length),this.list.removeChildren();for(var n=0,o=0,a=0;a<s.length;a++)n=Math.floor(a/3),o=a%3,e=s[a],(t=(t=this.cacheItems[a])||new yE).dataSource=e,t.pos(12+210*o,325*n),this.list.addChild(t)},e.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),this.totalAttrView&&(this.totalAttrView.destroy(),this.totalAttrView=null)},s}(),hE=function(t){function e(){this.goodsImageBig=null,this.goodsImageSmall=null,this.barExp=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!1,"",!1),this.goodsImageBig=new fh(null,!0,!0,105,!1),this.goodsImageBig.pos(105,115),this.addChild(this.goodsImageBig),this.goodsImageSmall=new fh(null,!1,!0,90,!1),this.goodsImageSmall.pos(105,370),this.addChild(this.goodsImageSmall),this.barExp=new p(0,0,230,32,"com/ui/bar2.png","modules/exercise/barBg2.png",[5,5,5,5],[0,19,0,19],[6,6,6,6]),this.spBar.addChild(this.barExp),this.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographyComposePanel",Xm);var i=e.prototype;return i.onClick=function(t){var e;switch(t.target){case this.btnUp:(e=hn.getCardTocDataById(hn.curCardVO.id))&&5==e.val?Jt.addTip(hn.curCardVO.name+"已满级"):wl.getInstance().toUpgrade(hn.curCardVO.id);break;case this.btnCompound:(e=hn.getCardTocDataById(hn.curCardVO.id))&&5==e.val?Jt.addTip(hn.curCardVO.name+"已满级"):Tr.ins().toExchange(7,hn.curCardVO.compound,1);break;case this.btnBack:case this.btnClose:this.closeWindow()}},i.update=function(){if(hn.curCardVO){var t=ur.getItem(hn.curCardVO.materialsTypeId);this.txtName.text=t.name,this.txtName.color=U.getColorLight(t.color),this.goodsImageBig.data=t;var e=hn.getCardTocDataById(hn.curCardVO.id),i=0;this.barExp.txt.visible=!0,e?(this.btnUp.label="升级",5==e.val?(this.barExp.txt.visible=!1,this.txtInfo1.visible=!1,i=parseInt(hn.curCardVO.materialsNums[e.val-1])):(this.barExp.txt.visible=!0,i=parseInt(hn.curCardVO.materialsNums[e.val]),this.txtInfo1.visible=!0,this.txtInfo1.innerHTML=Z.span("消耗"+i+"个","#5d3924")+Z.span("【"+t.name+"】",U.getColorLight(t.color))+Z.span("可升级","#5d3924"))):(this.btnUp.label="激活",i=parseInt(hn.curCardVO.materialsNums[0]),this.txtInfo1.visible=!0,this.txtInfo1.innerHTML=Z.span("消耗"+i+"个","#5d3924")+Z.span("【"+t.name+"】",U.getColorLight(t.color))+Z.span("可升级","#5d3924"));var s=xo.getGoodsNumByTypeID(hn.curCardVO.materialsTypeId);this.barExp.setValue(s,i),this.btnUp.disabled=!(i<=s);var n=Ys.getSubVOById(hn.curCardVO.compound),o=n.materialList[0],a=ur.getItem(o.typeId);this.goodsImageSmall.data=a,this.txtNum.text="× "+o.num,this.txtCost.text=n.cost+"";var l=xo.getGoodsNumByTypeID(o.typeId);if(this.txtOwn.text="拥有量："+l,e&&5==e.val)this.imgRPCompose.visible=!1,this.imgRPUpgrade.visible=!1;else{var r=0;i<=s?(this.imgRPCompose.visible=!1,this.imgRPUpgrade.visible=!0):(this.imgRPUpgrade.visible=!1,r=(i-s)*o.num,this.imgRPCompose.visible=r<=l)}}},e}(),uE=function(t){function e(){this._data=null,this.stars=null,this.goodsItems=null,e.__super.call(this),this.btn.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.exercise.biography.view.ExerBiographyCopyEnterItem",t);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){hn.copyInfoTocVO&&0<hn.copyInfoTocVO.challenge_times?wl.getInstance().toCopyChallenge(this._data.id):Jt.addTip("当前挑战次数不足")},i.update=function(){var t=hn.getCopyEnterVOByTypeId(this._data.type_id);if(t){var e;this.imgBg.skin="modules/biographyCopy/img/enterType"+this._data.type_id+".png",this.stars=this.stars||[],this.spStar.removeChildren();for(var i=0;i<this._data.star;i++)(e=(e=this.stars[i])||new et).skin="modules/biographyCopy/starYellow.png",this.spStar.addChild(e),e.x=30*i;this.goodsItems=this.goodsItems||[];for(var s,n=t.rewardList[this._data.star-1],o=0;o<n.length;o++)s=(s=this.goodsItems[o])||new Ah(90,90,!1,!0,!0,!1),this.spReward.addChild(s),s.x=100*o-40,s.dataSource=[n[o].typeId,n[o].num];if(0<this._data.next_revive_ts){var a=this._data.next_revive_ts-ya.serverTime;0<a&&(this.btn.disabled=!0,this.btn.label=x.formatTime(a)),_t.addToSecond(this,this.loopTime)}else this.btn.label="挑战",this.btn.disabled=!1}},i.loopTime=function(){var t=this._data.next_revive_ts-ya.serverTime;0<t?(this.btn.label=x.formatTime(t),this.btn.state=0,this.btn.mouseEnabled=!1):(this.btn.label="挑战",this.btn.disabled=!1,this.btn.state=1,this.btn.mouseEnabled=!1,_t.removeFromSceond(this,this.loopTime),wl.getInstance().toCopyInfo())},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Km),cE=function(t){function e(){this.enterItems=null,e.__super.call(this),Nt.register("RP_BIOGRAPHY_CAN_BOUNTY",this.btnIssue),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_FINISH",this.btnIssue),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_GET",this.btnIssue),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.exercise.biography.view.ExerBiographyCopyView",jm);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onUndisplay=function(){_t.removeFromSceond(this,this.loopTimesUpdate)},i.onClick=function(t){switch(t.target){case this.btnRefresh:var e=0;if(e=hn.copyEnterBase.refreshCostDatas.length>hn.copyInfoTocVO.refresh_times?parseInt(hn.copyEnterBase.refreshCostDatas[hn.copyInfoTocVO.refresh_times]):parseInt(hn.copyEnterBase.refreshCostDatas[hn.copyEnterBase.refreshCostDatas.length-1]),pe.silver>=e){if(hn.copyInfoTocVO&&0<hn.copyInfoTocVO.copy_list.length)if(hn.checkNeedShowTip()){var i=hn.getNoticeTipStr(),s=new Ee;s.msg=Z.span("当前已经刷新到了","#5d3924")+Z.span(i,"#ffffff")+Z.span("试炼","#5d3924")+"<br/>",s.msg+=Z.span("是否还要继续刷新？","#5d3924")+"<br/>",s.msg+=Z.span("（关闭提醒设置，请在刷新提醒设置中取消勾选）","#5d3924"),s.align="center",s.yesCaller=wl.getInstance(),s.yesFun=wl.getInstance().toRefresh,EF.showVO(s)}else wl.getInstance().toRefresh()}else ba.show(10201113);break;case this.btnIssue:pt.send(32,5,"历练-六界试炼-六界悬赏入口"),hn.bountyClallengeRoles&&0<hn.bountyClallengeRoles.length?wl.getInstance().openIssuePanel():(wl.getInstance().openIssueTypePanel(),wl.getInstance().toBountyInfo());break;case this.btnSetting:wl.getInstance().openNoticePanel()}},i.update=function(){if(hn.copyInfoTocVO){this.updateItems();var t=0,e=hn.copyEnterBase.refreshCostDatas;e&&e.length>hn.copyInfoTocVO.refresh_times?t=parseInt(e[hn.copyInfoTocVO.refresh_times]):e&&0<e.length&&(t=parseInt(e[e.length-1])),this.txtCost.text=t+"",this.txtTimes.text=hn.copyInfoTocVO.challenge_times+"/"+hn.copyEnterBase.maxFightNum,hn.copyInfoTocVO.challenge_times<hn.copyEnterBase.maxFightNum?(this.txtTime.visible=!0,_t.addToSecond(this,this.loopTimesUpdate)):(this.txtTime.visible=!1,_t.removeFromSceond(this,this.loopTimesUpdate))}},i.loopTimesUpdate=function(){var t=hn.copyInfoTocVO.next_revive_ts-ya.serverTime;0<t?this.txtTime.text="恢复倒计时："+x.formatTime(t):(this.txtTime.text="恢复倒计时：00:00:00",_t.removeFromSceond(this,this.loopTimesUpdate),wl.getInstance().toCopyInfo())},i.updateItems=function(){var t;this.spItems.removeChildren(),this.enterItems=this.enterItems||[];var e=hn.copyInfoTocVO.copy_list;if(e){e=e.sort(this.sortCopyList);for(var i=0;i<3;i++)(t=(t=this.enterItems[i])||new uE).dataSource=e[i],t.x=250*i+8,this.spItems.addChild(t)}},i.sortCopyList=function(t,e){return t.id>e.id?1:t.id<e.id?-1:0},e}(),dE=function(t){function e(){this._data=null,this._txtNameOriginX=NaN,this._blueVipBox=null,e.__super.call(this),this._txtNameOriginX=this.txtName.x}w(e,"modules.exercise.biography.view.ExerBiographyIssueFriendItem",t);var i=e.prototype;return i.isSelected=function(t){this.imgSelected.visible=t},i.update=function(){this.imgHead.skin="com/head/small"+this._data.category+this._data.sex+".png",this.txtName.text=this._data.role_name,this.txtPower.text=this._data.power+"",0<this._data.online?(this.txtOnline.color="#ffe0cf",this.txtOnline.text=x.getOnlineTxt(this._data.online)):(this.txtOnline.color="#139604",this.txtOnline.text="在线"),this.updateBlueVip(this._data.blue_vip)},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this.txtName.x=this._txtNameOriginX,this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(122,this.txtName.y),this._blueVipBox.updateShowing(e),this.txtName.x=this._txtNameOriginX+this._blueVipBox.width}},I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Qm),pE=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographyIssueItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnFight:"挑战"==this.btnFight.label?hn.checkBountyIsOkByRoleId(pe.roleID)?Jt.addTip("恭喜你已经完成，请领取奖励！"):wl.getInstance().toBountyChallenge():"请出"==this.btnFight.label&&wl.getInstance().toBountyExist(this._data.role_id);break;case this.imgReward:if(this._data.role_id!=pe.roleID)return void Jt.addTip("请点击自己的宝箱领取奖励");wl.getInstance().openIssueRewardPanel(),wl.getInstance().updateIssueRewardPanel();break;case this.imgAdd:case this.btnRequest:wl.getInstance().openIssueRequestPanel()}},i.update=function(){if(this._data){switch(this.spFriend.visible=!0,this.spRequest.visible=!1,this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",1==this._data.sex?this.imgSex.skin="com/ui/man.png":this.imgSex.skin="com/ui/woman.png",this.txtName.text=this._data.role_name,this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",0<this._data.online_ts?(this.txtOnline.color="#ffe0cf",this.txtOnline.text=x.getOnlineTxt(this._data.online_ts)):(this.txtOnline.color="#139604",this.txtOnline.text="在线"),this._data.state){case 1:this.txtState.color="#5d3924",this.txtState.text="空闲";break;case 2:this.txtState.color="#5d3924",this.txtState.text="挑战中";break;case 3:this.txtState.color="#139604",this.txtState.text="挑战成功";break;case 4:this.txtState.color="#9a0c00",this.txtState.text="挑战失败"}1==hn.bountyState?this._data.role_id==pe.roleID&&1==this._data.leader?(this.btnFight.disabled=!1,this.btnFight.label="挑战"):(this.btnFight.disabled=!1,this.btnFight.label="请出"):2==hn.bountyState&&(this._data.role_id==pe.roleID&&0==this._data.leader?(this.btnFight.label="挑战",this.btnFight.disabled=!1):(this.btnFight.label="挑战",this.btnFight.disabled=!0)),1==this._data.leader?(this.imgCaptain.visible=!0,1==hn.bountyIsGetReward&&hn.checkRewardIsGetByRoleId(pe.roleID)?this.imgReward.skin="modules/biographyCopy/captainBXOpen.png":this.imgReward.skin="modules/biographyCopy/captainBXClose.png",this._data.role_id==pe.roleID&&hn.checkBountyIsOkByRoleId(pe.roleID)&&(0==hn.bountyIsGetReward&&hn.checkLeaderRewardCanGet()||0==hn.checkRewardIsGetByRoleId(pe.roleID))?this.imgRP.visible=!0:this.imgRP.visible=!1):(this.imgCaptain.visible=!1,1==this._data.is_get_reward?this.imgReward.skin="modules/biographyCopy/memberBXOpen.png":this.imgReward.skin="modules/biographyCopy/memberBXClose.png",this._data.role_id==pe.roleID&&hn.checkBountyIsOkByRoleId(pe.roleID)&&0==hn.checkRewardIsGetByRoleId(pe.roleID)?this.imgRP.visible=!0:this.imgRP.visible=!1)}else this.spFriend.visible=!1,this.spRequest.visible=!0,1==hn.bountyState?this.btnRequest.disabled=!1:2==hn.bountyState&&(this.btnRequest.disabled=!0)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(zm),mE=function(t){function e(){this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.exercise.biography.view.ExerBiographyIssuePanel",$m);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopUpdate)},i.onClick=function(t){var e;switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btn:"结束悬赏"==this.btn.label?((e=new Ee).msg="结束悬赏后队长和队员无法继续挑战本次悬赏，未领取奖励会通过信件发送，是否要结束悬赏？",e.yesCaller=wl.getInstance(),e.yesFun=wl.getInstance().toBountyEnd,EF.showVO(e)):"退出悬赏"==this.btn.label&&(hn.checkBountyIsOkByRoleId(pe.roleID)?wl.getInstance().toBountyExist(0):((e=new Ee).msg="退出悬赏后无法继续挑战本次悬赏，未领取奖励会通过信件发送，是否要退出悬赏？",e.yesCaller=wl.getInstance(),e.yesFun=wl.getInstance().toBountyExist,e.yesArgs=[0],EF.showVO(e)))}},i.update=function(){var t,e;1==hn.bountyState?this.btn.label="结束悬赏":2==hn.bountyState&&(this.btn.label="退出悬赏"),this.list.removeChildren(),this.items=this.items||[];for(var i=0;i<4;i++)e=hn.bountyClallengeRoles[i],this.items[i]=this.items[i]||new pE,(t=this.items[i]).pos(0,160*i),t.dataSource=e,this.list.addChild(t);0<hn.bountyOutTimes&&_t.addToSecond(this,this.loopUpdate)},i.loopUpdate=function(){var t=hn.bountyOutTimes-ya.serverTime;0<t?this.txtTime.text=x.formatTime(t):(this.txtTime.text="00:00:00",_t.removeFromSceond(this,this.loopUpdate))},e}(),fE=function(t){function e(){this.loopTimes=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.exercise.biography.view.ExerBiographyIssueRequestPanel",Zm);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopUpdateBtn)},i.onClick=function(t){switch(t.target){case this.btnFamily:if(0<pe.user.attr.family_id){var e=pe.roleName+"邀请你参加";switch(hn.bountyStar){case 10:e+="初级";break;case 11:e+="中级";break;case 12:e+="高级"}e+="悬赏。"+Z.linkcolor("【点击参与】","biographyCopyBountyEnter#10804#"+pe.roleID,!1),Za.ins().toSendMsg(2e4,e,9),Jt.addTip("已发送邀请"),this.loopTimes=ya.serverTime+90,this.btnFamily.disabled=!0,_t.addToSecond(this,this.loopUpdateBtn)}else Jt.addTip("目前没有仙盟，无法邀请盟友，请先加入仙盟");break;case this.btnFriend:wl.getInstance().openIssueFriendListPanel();break;case this.btnClose:case this.btnBack:this.closeWindow()}},i.loopUpdateBtn=function(){this.loopTimes>ya.serverTime?this.btnFamily.label="冷却中"+(this.loopTimes-ya.serverTime)+"秒":(this.loopTimes=0,this.btnFamily.disabled=!1,this.btnFamily.label="邀请盟友")},i.update=function(){this.loopTimes>ya.serverTime?(this.loopUpdateBtn(),_t.addToSecond(this,this.loopUpdateBtn)):(this.loopTimes=0,this.btnFamily.disabled=!1,this.btnFamily.label="邀请盟友")},e}(),_E=function(t){function s(){var t;s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!1,"",!1);for(var e=0;e<3;e++)(t=new Ah(90,90,!1,!0,!0,!0)).x=120*e,this.spReward1.addChild(t);for(var i=0;i<3;i++)(t=new Ah(90,90,!1,!0,!0,!0)).x=120*i,this.spReward2.addChild(t);this.on("click",this,this.onClick)}w(s,"modules.exercise.biography.view.ExerBiographyIssueRewardPanel",Jm);var e=s.prototype;return e.onClick=function(t){switch(t.target){case this.btnCaptain:if(1!=hn.bountyState)return void Jt.addTip("只有队长可领!");if(0==hn.checkBountyIsAllOk())return void Jt.addTip("还有未挑战成功的悬赏！");wl.getInstance().toBountyReward(2);break;case this.btnMember:if(!hn.checkBountyIsOkByRoleId(pe.roleID))return void Jt.addTip("您还未完成挑战！");wl.getInstance().toBountyReward(1);break;case this.btnBack:case this.btnClose:this.closeWindow()}},e.update=function(){var t=hn.getBountyFinishNum();this.txtCaptain.text="所有挑战成功后可以领取（"+t+"/4）",hn.checkIsLeader(pe.roleID)?(this.btnMember.disabled=!0,1==hn.bountyIsGetReward?(this.btnCaptain.label="已领取",this.btnCaptain.disabled=!0):(this.btnCaptain.label="领取",this.btnCaptain.disabled=!1)):this.btnCaptain.disabled=!0,hn.checkRewardIsGetByRoleId(pe.roleID)?(this.btnMember.label="已领取",this.btnMember.disabled=!0):(this.btnMember.label="领取",this.btnMember.disabled=!1);for(var e=Math.floor(hn.bountyStar%10),i=hn.copyEnterBase.captainRewardList[e],s=0;s<i.length;s++)this.spReward1.getChildAt(s).dataSource=[i[s].typeId,i[s].num];for(var n=hn.copyEnterBase.memberRewardList[e],o=0;o<n.length;o++)this.spReward2.getChildAt(o).dataSource=[n[o].typeId,n[o].num]},s}(),gE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographyIssueTypePanel",tf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn1:0<xo.getGoodsNumByTypeID(12210001)?wl.getInstance().toBounty(12210001):pe.gold>=hn.copyEnterBase.issueCosts[0]?this.toShopBuy(3,12210001,0):Lo.showAlert();break;case this.btn2:0<xo.getGoodsNumByTypeID(12210002)?wl.getInstance().toBounty(12210002):pe.gold>=hn.copyEnterBase.issueCosts[1]?this.toShopBuy(4,12210002,1):Lo.showAlert();break;case this.btn3:0<xo.getGoodsNumByTypeID(12210003)?wl.getInstance().toBounty(12210003):pe.gold>=hn.copyEnterBase.issueCosts[2]?this.toShopBuy(5,12210003,2):Lo.showAlert();break;case this.btnClose:this.closeWindow();break;case this.txtLink1:wl.getInstance().openBountyRewardTip(0);break;case this.txtLink2:wl.getInstance().openBountyRewardTip(1);break;case this.txtLink3:wl.getInstance().openBountyRewardTip(2)}},i.toShopBuy=function(t,e,i){var s=ur.getItem(e),n=Z.span("是否花费","#5d3924")+Z.span(hn.copyEnterBase.issueCosts[i]+"元宝","#F7EF5F")+Z.span("购买1个","#5d3924")+Z.span("【"+s.name+"】？",U.getColorLight(s.color));Lo.showSecAlert(n,Tr.ins(),Tr.ins().toExchange,[t,e,1],"ExerBiographyIssueTypePanelBuy")},i.update=function(){var t=xo.getGoodsNumByTypeID(12210001);this.txtNum1.text=t+"",t=xo.getGoodsNumByTypeID(12210002),this.txtNum2.text=t+"",t=xo.getGoodsNumByTypeID(12210003),this.txtNum3.text=t+"",this.txtCost1.text=hn.copyEnterBase.issueCosts[0]+"",this.txtCost2.text=hn.copyEnterBase.issueCosts[1]+"",this.txtCost3.text=hn.copyEnterBase.issueCosts[2]+""},e}(),yE=function(t){function e(){this._data=null,this.bar=null,e.__super.call(this),this.txtStar.stroke=this.txtPower.stroke=2,this.on("click",this,this.onClick),this.bar=new it(0,0,190,20,"modules/biographyCard/bloodBar.png","modules/biographyCard/bloodBarBg.png",[1,1,1,1],[0,15,0,15],[4,13,4,13],"#ffffff",18),this.spBar.addChild(this.bar)}w(e,"modules.exercise.biography.view.ExerBiographyItem",ef);var i=e.prototype;return i.onClick=function(t){hn.currCardId=this._data.id,wl.getInstance().openSkillPanel()},i.updateBar=function(){if(this._data){var t,e=0,i=0,s=hn.getCardTocDataById(this._data.id);t=xo.getGoodsNumByTypeID(this._data.materialsTypeId);var n=Ys.getSubVOById(this._data.compound).materialList[0];i=xo.getGoodsNumByTypeID(n.typeId),i+=t*n.num,e=s?5==s.val?parseInt(this._data.materialsNums[s.val-1]):parseInt(this._data.materialsNums[s.val]):parseInt(this._data.materialsNums[0]),(e*=n.num)<i&&(i=e),this.bar.setValue(i,e)}},I(0,i,"dataSource",function(){return this._data},function(t){if(this._data=t,this._data){this.txtStar.strokeColor=this.txtPower.strokeColor=cn.EXERCISE_BIOGRAPHY_CARD_STROKE_COLOR[this._data.type-1],yt.isWX&&-1!=ln.blockList.indexOf(this._data.id)?this.imgCard.skin="modules/biographyCard/img/"+this._data.id+"_re.png":this.imgCard.skin="modules/biographyCard/img/"+this._data.id+".png";xo.getGoodsNumByTypeID(this._data.materialsTypeId);var e=hn.getCardTocDataById(this._data.id);if(e&&0<e.val){for(var i,s=0,n=0;n<e.val;n++){var o=this._data.skillIdList[n];i=hn.getSkillVOById(o);var a,l,r=0;for(var h in i.attrDatas)a=i.attrDatas[h],r+=W.getAttrPower(parseInt(a.key),parseInt(a.val));for(var u in i.categoryList){for(var c in l=i.categoryList[u],pe.pals)pe.pals[c].ext.category==parseInt(l)&&(s+=r)}}this.txtPower.text="战斗力："+s,this.txtStar.text="LV."+e.val,this.imgFilter.visible=!1,this.imgCard.disabled=!1}else this.txtPower.text="战斗力：0",this.txtStar.text="LV.0",this.imgFilter.visible=!0,this.imgCard.disabled=!0;var d=0;d=e?parseInt(this._data.materialsNums[e.val]):parseInt(this._data.materialsNums[0]);var p=Ys.getSubVOById(this._data.compound).materialList[0],m=xo.getGoodsNumByTypeID(this._data.materialsTypeId),f=0;if(d<=m)this.imgRP.visible=!0;else{f=(d-m)*p.num;var _=xo.getGoodsNumByTypeID(p.typeId);this.imgRP.visible=f<=_}this.updateBar()}}),e}(),vE=function(t){function e(){this.rewardItems=null,this.effects=null,this.showGoodsLen=4,this.curStart=0,this.LOTTO_GOODS_ID=10201205,this.BUY_GIFT_GOODS_ID1=10201404,this.BUY_GIFT_GOODS_ID2=10201405,this.LOTTO_COST_ONE=1,this.LOTTO_COST_TEN=10,this.timeoutKey1=0,this.timeoutKey2=0,this.hideRewardLen=0,e.__super.call(this),this.txtNum.style.fontSize=24,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),Ja.ins().createCheckShowIcon(1,2,this,9,230),Ja.ins().createCheckShowIcon(2,2,this,624,230)}w(e,"modules.exercise.biography.view.ExerBiographyLottoView",sf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.onBagDataChange),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("BAGDATA_CHANGE",this,this.onBagDataChange),_t.removeFromFrame(this,this.showReward),_t.removeFromFrame(this,this.hideReward),_t.clearTimeout(this.timeoutKey1),_t.clearTimeout(this.timeoutKey2)},i.onClick=function(t){switch(t.target){case this.btnOne:if(pt.send(32,2,"历练-人物传记奇遇-奇遇一次"),xo.getGoodsNumByType(xo.GOODS_ID,this.LOTTO_GOODS_ID)>=this.LOTTO_COST_ONE){var e=ur.getItem(this.LOTTO_GOODS_ID);e&&this.toBoxOpen(this.LOTTO_COST_ONE,e.name)}else Jt.addTip("仙域名帖不足，购买奇遇宝箱可获赠");break;case this.btnTen:if(pt.send(32,3,"历练-人物传记奇遇-十连奇遇"),xo.getGoodsNumByType(xo.GOODS_ID,this.LOTTO_GOODS_ID)>=this.LOTTO_COST_TEN){var i=ur.getItem(this.LOTTO_GOODS_ID);i&&this.toBoxOpen(this.LOTTO_COST_TEN,i.name)}else Jt.addTip("仙域名帖不足，购买奇遇宝箱可获赠");break;case this.btnBuy1:SF.ins.show(this.BUY_GIFT_GOODS_ID1,2,0,10001,null,null,1);break;case this.btnBuy2:SF.ins.show(this.BUY_GIFT_GOODS_ID2,2,0,10001,null,null,1);break;case this.imgIcon1:var s="",n=ur.getItem(this.BUY_GIFT_GOODS_ID1);n&&(s=ur.isEquip(n.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",n.tempNum=1,Ae.show(n,s));break;case this.imgIcon2:var o="",a=ur.getItem(this.BUY_GIFT_GOODS_ID2);a&&(o=ur.isEquip(a.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",a.tempNum=1,Ae.show(a,o))}},i.toBoxOpen=function(t,e){var i=Z.span("是否消耗","#5d3924")+Z.span(t+"张"+e,"#F7EF5F")+Z.span("奇遇"+t+"次","#5d3924")+Z.span("？","#5d3924"),s=0;t==this.LOTTO_COST_ONE?s=1:t==this.LOTTO_COST_TEN&&(s=2),Lo.showSecAlert(i,wl.getInstance(),wl.getInstance().toBoxOpen,[s],"ExerBiographyLottoViewBoxOpen")},i.onBagDataChange=function(){var t=ur.getItem(this.LOTTO_GOODS_ID);if(t){var e=xo.getGoodsNumByType(xo.GOODS_ID,t.id);this.txtNum.innerHTML=Z.span("拥有","#e1c6bc")+Z.span(t.name,U.getColorDark(t.color))+Z.span("："+e,"#e1c6bc")}},i.update=function(){this.onBagDataChange();var t=ur.getItem(this.BUY_GIFT_GOODS_ID1);t&&(this.imgBg1.skin="com/ui/goodsBg"+t.color+".png",this.imgIcon1.skin=t.realMaxico,this.txtName1.color=U.getColorLight(t.color),this.txtName1.text=t.name,this.txtPrice1.text=t.priceDic[2]);var e=ur.getItem(this.BUY_GIFT_GOODS_ID2);e&&(this.imgBg2.skin="com/ui/goodsBg"+e.color+".png",this.imgIcon2.skin=e.realMaxico,this.txtName2.color=U.getColorLight(e.color),this.txtName2.text=e.name,this.txtPrice2.text=e.priceDic[2])},i.startLoop=function(){var t;this.spReward.removeChildren(),this.rewardItems=this.rewardItems||[],this.effects=this.effects||[],this.curStart=0;var e=hn.getLottoViewShowGoods(this.curStart,this.showGoodsLen);this.spReward.removeChildren();for(var i,s,n=0,o=0;o<this.showGoodsLen;o++)null==(t=this.rewardItems[o])&&(t=new Ah(105,115,!1,!0,!0,!1),this.rewardItems.push(t)),t.x=150*o,t.dataSource=[e[o][0],e[o][1]],s=ur.getItem(e[o][0]),null==t.parent&&this.spReward.addChild(t),1==e[o][2]&&(this.effects[n]=this.effects[n]||b.getOne(),(i=this.effects[n]).loadAndPlay("moduleEffect/goodsItemEff105_"+s.color,"default",0,!0),i.pos(t.x+91,t.y+109),null==i.parent&&this.spReward.addChild(i),n++);this.timeoutKey1=_t.setTimeout(this,this.timeoutShow,null,3e3)},i.timeoutShow=function(){0<this.spReward.numChildren&&(this.hideRewardLen=this.showGoodsLen,_t.addToFrame(this,this.hideReward))},i.hideReward=function(){if(0<this.spReward.alpha)this.spReward.alpha-=.02;else{var t;this.curStart+=this.showGoodsLen,_t.removeFromFrame(this,this.hideReward),this.hideRewardLen=this.showGoodsLen;var e=hn.lottoVo.rewardDatas.length;this.curStart>=e&&(this.curStart=0);var i,s,n=hn.getLottoViewShowGoods(this.curStart,this.showGoodsLen),o=0;this.spReward.removeChildren();for(var a=0;a<this.showGoodsLen;a++)(t=this.rewardItems[a]).dataSource=[n[a][0],n[a][1]],s=ur.getItem(n[a][0]),t.x=150*a,null==t.parent&&this.spReward.addChild(t),1==n[a][2]&&(this.effects[o]=this.effects[o]||b.getOne(),(i=this.effects[o]).loadAndPlay("moduleEffect/goodsItemEff105_"+s.color,"default",0,!0),i.pos(t.x+91,t.y+109),null==i.parent&&this.spReward.addChild(i),o++);_t.addToFrame(this,this.showReward)}},i.showReward=function(){this.spReward.alpha<1?this.spReward.alpha+=.02:(_t.removeFromFrame(this,this.showReward),this.timeoutKey2=_t.setTimeout(this,this.timeoutShow,null,3e3))},e}(),IE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("display",this,this.update),this.on("undisplay",this,this.onUndisplay),this.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographyRefreshNoticePanel",nf);var i=e.prototype;return i.onUndisplay=function(){var t=hn.getNeedNoticeSettings();wl.getInstance().toNoticeSetting(t)},i.onClick=function(t){switch(t.target){case this.chb1:hn.updateNoticeSetting(1,this.chb1.selected);break;case this.chb2:hn.updateNoticeSetting(2,this.chb2.selected);break;case this.chb3:hn.updateNoticeSetting(3,this.chb3.selected);break;case this.chb4:hn.updateNoticeSetting(4,this.chb4.selected);break;case this.chb5:hn.updateNoticeSetting(5,this.chb5.selected);break;case this.btnBack:case this.btnClose:this.closeWindow()}},i.update=function(){var t,e=hn.getNoticeSettings();for(var i in e)this["chb"+(t=e[i]).id].selected=t.isNotice},e}(),wE=function(t){function e(){this._data=null,this.txtDesc=null,e.__super.call(this),this.txtDesc=new K,this.txtDesc.x=5,this.txtDesc.width=100,this.panel.addChild(this.txtDesc),this.txtDesc.style.fontSize=20,this.txtDesc.style.color="#5d3924",this.panel.vScrollBarSkin=""}return w(e,"modules.exercise.biography.view.ExerBiographySkillItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=hn.getSkillVOById(t),this._data){var e=hn.getCardTocDataById(hn.currCardId),i=hn.getCardVOById(hn.currCardId);this.imgSkill.skin="modules/biographyCard/img/"+this._data.id+".png",this.txtName.text=this._data.name,this.txtName.color=cn.EXERCISE_BIOGRAPHY_CARD_STROKE_COLOR[i.type-1];var s=this._data.id%5;0==s&&(s=5),this.txtLevel.text="Lv."+s+"开启",this.txtDesc.innerHTML=this._data.desc,this.txtDesc.height=this.txtDesc.contextHeight,this.panel.refresh();var n=i.skillIdList.indexOf(this._data.id.toString());e&&0<e.val&&-1!=n&&e.val>=n+1?(this.imgFilter.visible=!1,this.txtLevel.visible=!1):(this.imgFilter.visible=!0,this.txtLevel.visible=!0)}}),e}(of),bE=function(t){function e(){this.glowFilter=null,this.itemSelecteStates=null,this._cardVO=null,this._skills=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.txtMaterialsInfo.style.align="center",this.itemSelecteStates=[],this.list.hScrollBarSkin="",this.list.itemRender=wE,this.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographySkillPanel",af);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnUpgrade:hn.curCardVO=this._cardVO,wl.getInstance().openCompoundPanel()}},i.update=function(){this._cardVO=hn.getCardVOById(hn.currCardId),this._skills=hn.getSkillItemsById(hn.currCardId),this.list.dataSource=this._skills,this.txtName.text=this._cardVO.name,this.txtDesc.text=this._cardVO.desc;var t=ur.getItem(this._cardVO.materialsTypeId),e=hn.getCardTocDataById(hn.currCardId),i=0;e?(this.btnUpgrade.label="升级",i=5==e.val?parseInt(this._cardVO.materialsNums[e.val-1]):parseInt(this._cardVO.materialsNums[e.val])):(this.btnUpgrade.label="激活",i=parseInt(this._cardVO.materialsNums[0])),this.txtMaterialsInfo.innerHTML=Z.span("消耗"+i+"个","#5d3924")+Z.span("【"+t.name+"】",U.getColorLight(t.color));var s=0;if(e)for(var n,o=0;o<e.val;o++){var a=this._cardVO.skillIdList[o];n=hn.getSkillVOById(a);var l,r,h=0;for(var u in n.attrDatas)l=n.attrDatas[u],h=W.getAttrPower(parseInt(l.key),parseInt(l.val));for(var c in n.categoryList){for(var d in r=n.categoryList[c],pe.pals)pe.pals[d].ext.category==parseInt(r)&&(s+=h)}}yt.isWX&&-1!=ln.blockList.indexOf(this._cardVO.id)?this.imgIcon.skin="modules/biographyCard/img/half"+this._cardVO.id+"_re.png":this.imgIcon.skin="modules/biographyCard/img/half"+this._cardVO.id+".png";var p,m,f=k.numToTexture(s,"com/ui/powerNum");this.spPower.graphics.clear();for(var _=0;_<f.length;_++)(p=f[_])&&this.spPower.graphics.drawTexture(p,p.width*_);for(var g=0;g<this.spStar.numChildren;g++)(m=this.spStar.getChildAt(g))&&(this._cardVO&&this._cardVO.character>g?m.skin="modules/biographyCopy/starYellow.png":m.skin="modules/biographyCopy/starNoraml.png");if(e&&5!=e.val){var y=Ys.getSubVOById(this._cardVO.compound).materialList[0],v=xo.getGoodsNumByTypeID(this._cardVO.materialsTypeId),I=0;if(i<=v)this.imgRP.visible=!0;else{I=(i-v)*y.num;var w=xo.getGoodsNumByTypeID(y.typeId);this.imgRP.visible=I<=w}}else this.imgRP.visible=!1},e}(),SE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnHide.on("click",this,this.onClick)}w(e,"modules.exercise.biography.view.ExerBiographyTotalAttrView",lf);var i=e.prototype;return i.onClick=function(t){this.closeWindow()},i.update=function(){for(var t=hn.getTotalAttrStr(),e=0,i=0,s=0;s<hn.TOTAL_ATTR_KEYS.length;s++)e=hn.TOTAL_ATTR_KEYS[s],i=t[s],this["txt"+e].text=W.getName(e),this["input"+e].text=i+""},e}(),xE=function(t){function e(){this.cardView=null,this.lottoView=null,this.curView=null,e.__super.call(this),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0}w(e,"modules.exercise.biography.view.ExerBiographyView",rf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onTabChange=function(t){switch(this.spView.removeChildren(),t){case 0:this.cardView=this.cardView||new rE,this.curView=this.cardView,wl.getInstance().toInfo();break;case 1:this.lottoView=this.lottoView||new vE,this.lottoView.startLoop(),this.curView=this.lottoView,pt.send(32,6,"历练-人物传记-奇遇")}this.curView&&(this.spView.addChild(this.curView),this.curView.update())},i.selecteTab=function(t){this.tab.selectedIndex=t},i.update=function(){this.curView&&this.curView.update()},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this),this.cardView&&(this.cardView.destroy(),this.cardView=null),this.lottoView&&(this.lottoView.destroy(),this.lottoView=null),this.curView=null},e}(),CE=function(t){function e(){this.pearlView=null,this.godEquipView=null,this.guideView=null,this.biographyView=null,this.runeView=null,this.fightSoulView=null,this.meridianView=null,this.strangeFireView=null,this.beastsView=null,this.talimanView=null,this.spiritreView=null,this.beastsBookView=null,this.curView=null,this.curIndex=0,this.meridianKey=NaN,this.runeKey=NaN,this.fightSoulKey=NaN,this.biograpKey=NaN,this.strangeFireKey=NaN,this.beastsKey=NaN,this.talimanKey=NaN,this.spiritreKey=NaN,this.beastsBookKey=NaN,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick)}w(e,"modules.exercise.ExercisePanel",hf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnBack:var e=ua.isCross()&&9==this.curIndex;0==this.curIndex||e?this.closeWindow():this.showViewByIndex(0)}},i.checkOpen=function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=0),t){case 0:break;case 1:pt.send(22,1,"历练-仙珠标签");break;case 2:pt.send(12,1,"历练-神器标签");break;case 3:hn.checkCardRP(),pt.send(32,1,"历练-人物传记");break;case 4:if(xn.baseVO&&!xn.baseVO.isOpen())return void Jt.addTip(xn.baseVO.openStr+"开启");break;case 9:pt.send(49,1,"历练-战魂");break;case 6:pt.send(44,1,"历练-经脉");break;case 8:pt.send(45,1,"历练-异兽");break;case 7:pt.send(46,1,"历练-异火");break;case 10:pt.send(54,1,"历练-法宝")}this.showViewByIndex(t,e)},i.showViewByIndex=function(t,e){switch(void 0===t&&(t=0),void 0===e&&(e=0),this.spView.removeChildren(),this.curIndex=t,this.btnBack.bottom=166,this.spView.height=901,t){case 0:null==this.guideView&&(this.guideView=new PE,this.guideView.on("EXERCISE_CHANGE_VIEW",this,this.checkOpen)),this.guideView.update(),this.curView=this.guideView,this.spView.addChild(this.guideView);break;case 1:this.pearlView=this.pearlView||new IR,this.curView=this.pearlView,this.spView.addChild(this.pearlView),Tl.getInstance().toInfo();break;case 2:this.godEquipView=this.godEquipView||new cR,this.curView=this.godEquipView,this.spView.addChild(this.godEquipView),xl.ins().toInfo();break;case 3:if(0==se.has("modules/biographyCard"))return void se.add("modules/biographyCard","加载人物传记资源",this,this.showViewByIndex,[t,e]);_t.clearTimeout(this.biograpKey),null==this.biographyView&&(this.biographyView=new xE,this.biographyView.on("undisplay",this,this.onBiograpgHide)),this.curView=this.biographyView,this.spView.addChild(this.biographyView),this.biographyView.selecteTab(e),hn.checkCardRP(),hn.checkCardTabBarRP();break;case 4:if(!se.has("modules/rune"))return void se.add("modules/rune","正在加载符文资源",this,this.showViewByIndex,[t]);_t.clearTimeout(this.runeKey),null==this.runeView&&(this.runeView=new DR,this.runeView.on("undisplay",this,this.onRuneHide)),this.curView=this.runeView,this.spView.addChild(this.runeView),kl.ins().toRuneInfo();break;case 9:if(!se.has("modules/fightSoul"))return void se.add("modules/fightSoul","正在加载战魂资源",this,this.showViewByIndex,[t]);_t.clearTimeout(this.fightSoulKey),this.fightSoulView||(this.fightSoulView=new qE,this.fightSoulView.on("undisplay",this,this.onFightSoulHide)),this.curView=this.fightSoulView,this.spView.addChild(this.fightSoulView);break;case 6:if(!se.has("modules/meridian"))return void se.add("modules/meridian","正在加载经脉资源",this,this.showViewByIndex,[t]);_t.clearTimeout(this.meridianKey),null==this.meridianView&&(this.meridianView=new mR,this.meridianView.on("undisplay",this,this.onMeridianHide)),this.curView=this.meridianView,this.spView.addChild(this.meridianView),Pl.ins().toInfo();break;case 7:if(!se.has("modules/strangeFire"))return void se.add("modules/strangeFire","正在加载异火资源",this,this.showViewByIndex,[t]);_t.clearTimeout(this.strangeFireKey),null==this.strangeFireView&&(this.strangeFireView=new nO,this.strangeFireView.on("undisplay",this,this.onStrangeFireHide)),this.curView=this.strangeFireView,this.spView.addChild(this.strangeFireView);break;case 8:_t.clearTimeout(this.beastsKey),null==this.beastsView&&(this.beastsView=new ZA,this.beastsView.on("undisplay",this,this.onBeastsHide)),this.curView=this.beastsView,this.spView.addChild(this.beastsView),this.beastsView.selectTab=e;break;case 10:_t.clearTimeout(this.talimanKey),null==this.talimanView&&(this.talimanView=Rl.ins().newMainPanel(),this.talimanView.on("undisplay",this,this.onTalimanHide)),this.talimanView.tabselect=e,this.talimanView.update(),this.spView.height=1109,this.curView=this.talimanView,this.spView.addChild(this.talimanView);break;case 11:if(0==se.has("modules/spiriTre"))return void se.add("modules/spiriTre","正在加载灵宝模块",this,this.showViewByIndex,[t]);_t.clearTimeout(this.spiritreKey),null==this.spiritreView&&(this.spiritreView=new jR,this.spiritreView.on("undisplay",this,this.onSpiriTreHide)),this.spiritreView.tabselect=e,this.spiritreView.update(),this.curView=this.spiritreView,this.spView.addChild(this.spiritreView);break;case 12:if(!se.has("modules/beastsBook"))return void se.add("modules/beastsBook","正在加载异兽谱资源",this,this.showViewByIndex,[t,e]);_t.clearTimeout(this.beastsBookKey),null==this.beastsBookView&&(this.beastsBookView=new lE,this.beastsBookView.on("undisplay",this,this.onBeastsBookHide)),this.beastsBookView.selecteTab(e),this.curView=this.beastsBookView,this.spView.addChild(this.beastsBookView)}this.updateCurView(),this.openWindow(null,!0)},i.onMeridianHide=function(){this.meridianKey=_t.setTimeout(this,this.clearMeridianSource,null,ya.coldTime)},i.clearMeridianSource=function(){null!=this.meridianView&&(this.meridianView.destroy(),this.meridianView=null),se.destroy("modules/meridian")},i.onRuneHide=function(){this.runeKey=_t.setTimeout(this,this.clearRuneSource,null,ya.coldTime)},i.clearRuneSource=function(){null!=this.runeView&&(this.runeView.destroy(),this.runeView=null),se.destroy("modules/rune")},i.onFightSoulHide=function(){this.fightSoulKey=_t.setTimeout(this,this.clearFightSoulSource,null,ya.coldTime)},i.clearFightSoulSource=function(){this.fightSoulView&&(this.fightSoulView.destroy(),this.fightSoulView=null),se.destroy("modules/fightSoul"),se.destroy("E:/Ming20/trunk/GameAsset/modules/fightSoul/img/collectBg.png"),se.destroy("E:/Ming20/trunk/GameAsset/modules/fightSoul/img/imgBg.png"),se.destroy("E:/Ming20/trunk/GameAsset/modules/fightSoul/img/imgBgexp.png"),se.destroy("E:/Ming20/trunk/GameAsset/modules/fightSoul/img/spiritBg.png"),Sl.ins.dispose()},i.onBiograpgHide=function(){this.biograpKey=_t.setTimeout(this,this.clearBiograpgSource,null,ya.coldTime)},i.clearBiograpgSource=function(){null!=this.biographyView&&(this.biographyView.destroy(),this.biographyView=null),se.destroy("modules/biographyCard"),wl.getInstance().destoryCardPanel()},i.onStrangeFireHide=function(){this.strangeFireKey=_t.setTimeout(this,this.clearStrangeFireSource,null,ya.coldTime)},i.clearStrangeFireSource=function(){null!=this.strangeFireView&&(this.strangeFireView.destroy(),this.strangeFireView=null),El.ins().destroyInlayPanel(),se.destroy("modules/strangeFire")},i.onBeastsHide=function(){this.beastsKey=_t.setTimeout(this,this.clearBeastsSource,null,ya.coldTime)},i.clearBeastsSource=function(){null!=this.beastsView&&(this.beastsView.destroy(),this.beastsView=null)},i.onTalimanHide=function(){this.talimanKey=_t.setTimeout(this,this.clearTalimanSource,null,ya.coldTime)},i.clearTalimanSource=function(){null!=this.talimanView&&(this.talimanView.destroy(),this.talimanView=null)},i.onSpiriTreHide=function(){this.spiritreKey=_t.setTimeout(this,this.clearSpiriTreSource,null,ya.coldTime)},i.clearSpiriTreSource=function(){null!=this.spiritreView&&(this.spiritreView.destroy(),this.spiritreView=null)},i.onBeastsBookHide=function(){this.beastsBookKey=_t.setTimeout(this,this.clearBeastsBookSource,null,ya.coldTime)},i.clearBeastsBookSource=function(){null!=this.beastsBookView&&(this.beastsBookView.destroy(),this.beastsBookView=null),Il.getInstance().destoryCardPanel(),se.destroy("modules/beastsBook")},i.updateCurView=function(){if(this.curView){if(this.curView instanceof modules.exercise.talisman.view.TalimanMainPanel)return;if(this.curView instanceof modules.exercise.spiriTreasure.view.SpiriTreView)return;this.curView.update()}},i.checkRP=function(){this.godEquipView&&this.godEquipView.visible&&this.godEquipView.checkRPInItem()},i.getTabSelectedIndex=function(){return this.guideView?this.guideView.getCurViewIndex():0},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),PE=function(t){function e(){this.curViewIndex=0,e.__super.call(this),this.on("click",this,this.onClick),Nt.register("RP_EXERCISE_PEARL",this.btn1,new Tt(19,-10)),Nt.register("RP_EXERCISE_GODEQUIP",this.btn2,new Tt(19,-10)),Nt.register("RP_EXERCISE_GODEQUIP_STONE",this.btn2,new Tt(19,-10)),Nt.register("RP_BEASTS_TEAM_ACTIVE",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_ACTIVE",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_LV",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_TEAM_STEP",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_ALONE_STEP",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_RESONANCE",this.btn8,new Tt(19,-10)),Nt.register("RP_BEASTS_STAR",this.btn8,new Tt(19,-10)),Nt.register("RP_FIGHT_SOUL_TAB",this.btn9,new Tt(19,-10)),Nt.register("RP_FIGHT_SOUL_SPIRIT_TAB",this.btn9,new Tt(19,-10)),Nt.register("PR_TALISMAN",this.btn10,new Tt(19,-10)),Nt.register("RP_RUNE_PACK",this.btn4,new Tt(19,-10)),Nt.register("RP_RUNE_FREE_GET_SCORE",this.btn4,new Tt(19,-10)),Nt.register("RP_RUNE_CAN_INLAY",this.btn4,new Tt(19,-10)),Nt.register("RP_RUNE_INLAY_STONE",this.btn4,new Tt(19,-10)),Nt.register("RP_RUNE_CAN_UP",this.btn4,new Tt(19,-10)),Nt.register("RP_RUNE_CORE_CAN_UP",this.btn4,new Tt(19,-10)),Nt.register("RP_MERIDIAN_UP",this.btn6,new Tt(19,-10)),Nt.register("RP_MERIDIAN_REWARD",this.btn6,new Tt(19,-10)),Nt.register("RP_BIOGRAPHY_CARD_CAN_UPGRADE",this.btn3,new Tt(19,-10)),Nt.register("RP_STRANGEFIRE_MAGATAMA",this.btn7,new Tt(19,-10)),Nt.register("RP_STRANGEFIRE_REFINE_UP",this.btn7,new Tt(19,-10)),Nt.register("RP_STRANGEFIRE_REFINE_AIM_UP",this.btn7,new Tt(19,-10)),Nt.register("RP_SPIRITRE",this.btn11,new Tt(19,-10)),Nt.register("RP_SPIRITRE_AUTO_SUIT_",this.btn11,new Tt(19,-10)),Nt.register("RP_BEATSTBOOK",this.btn12,new Tt(19,-10)),this.resetPos()}w(e,"modules.exercise.ExerGuideView",uf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){var e=t.target;if(e&&""!=e.name){var i=un.getGuideVoById(parseInt(e.name));i&&(9==i.id?mn.isOpenFightSoul()?(this.curViewIndex=i.id,this.event("EXERCISE_CHANGE_VIEW",i.id)):pe.myRegrow<mn.getFightSoulOpenRegrowLevel()?Jt.addTip("该功能"+mn.getFightSoulOpenRegrowLevel()+"转开启"):Zn.godHoodLv<Xs.minGodLvl&&Jt.addTip("该功能在仙阶等级"+Xs.minGodLvl+"后开启"):10==i.id?pe.checkLevel(i.regrow,i.level)&&(3<=Xs.curServerOpenDay||0<Xs.curCombineServerTimes)?(this.curViewIndex=i.id,this.event("EXERCISE_CHANGE_VIEW",i.id)):(0<i.regrow&&Jt.addTip("开服第3天，且等级达到"+i.regrow+"转开启"),0<i.level&&Jt.addTip("该功能"+i.level+"级开启")):pe.checkLevel(i.regrow,i.level)?(this.curViewIndex=i.id,this.event("EXERCISE_CHANGE_VIEW",i.id)):(0<i.regrow&&Jt.addTip("该功能"+i.regrow+"转开启"),0<i.level&&Jt.addTip("该功能"+i.level+"级开启")))}},i.resetPos=function(){for(var t=un.guides,e=0,i=0;i<t.length;i++){var s=t[i];if(s)if(9==s.id?Xs.isCrossOpen:s.isCanShow){var n=Math.floor(e/2),o=e%2;this["btn"+s.id].pos(350*o+22,120*n+60),this["btn"+s.id].name=s.id,this["btn"+s.id].visible=!0,e++}else this["btn"+s.id].visible=!1}},i.getCurViewIndex=function(){return this.curViewIndex},i.update=function(){this.resetPos()},e}(),TE=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.FightSoulAddSpiritPanel",cf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnAdd0:this.onAdd(0);break;case this.btnAdd1:this.onAdd(1);break;case this.btnAdd2:this.onAdd(2)}},i.onAdd=function(t){var e=mn.getSpiritAddExpVO(),i=e.getTimeList(),s=e.getCostList(),n=parseInt(i[t]),o=parseFloat(s[t]),a=n*e.expEach;if(pe.gold<o)Lo.showAlert();else{var l=Z.parseStringFont("{/s24{#5d3924是否花费{#f6d518{0}元宝}增加{#fdc06a{1}}精魄经验？}}",o,a);Lo.showSecAlert(l,Sl.ins,Sl.ins.toBuySpiritExp,[n],"spirit_buy_exp")}},i.updateView=function(){var t=mn.getSpiritAddExpVO();this.txtCurExp.text=pe.getScore(28)+"",this.txtDesc.innerHTML=Z.parseStringFont("{/s24{#5d3924每次增加获得{#fdc06a{0}}精魄经验}}",t.expEach);for(var e=t.getTimeList(),i=t.getCostList(),s=0;s<e.length;s++)this["btnAdd"+s].label="增加"+e[s]+"次",this["txtPrice"+s].text=i[s]},e}(),kE=function(t){function i(){var t;this._curSelectIndex=0,this.completeHandler=null,this._items=null,this._isEnough=!1,this._curCollectList=null,this._requestQuality=5,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.completeHandler=Q.create(this,this.checkBtnVisible),this.list.itemRender=YE,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onItemSelected),this._items=[];for(var e=0;e<8;e++)(t=new KE).setNameTxtWidth(150),this.addChild(t),t.pos(pn.COLLECT_SPIRIT_ITEM_POS_LIST[e].x,pn.COLLECT_SPIRIT_ITEM_POS_LIST[e].y),this._items.push(t);this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(i,"modules.exercise.fightSoul.view.FightSoulCollectSoulPanel",df);var e=i.prototype;return e.onRenderItem=function(t,e){},e.onItemSelected=function(t){this._curSelectIndex!=t&&(this._curSelectIndex=t,this.updateView())},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnRight:this.turnRight();break;case this.btnLeft:this.turnLeft();break;case this.btnCollect:this.onCollect()}},e.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate),this.list.dataSource=mn.getSuitInfoList(),this._curSelectIndex=0,this.updateView()},e.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},e.turnRight=function(){var t=this.list.startIndex+this.list.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHandler)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHandler)},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},e.onCollect=function(){if(this._isEnough){var t,e=mn.getSuitInfoList()[this._curSelectIndex],i=e.getNeedIdList();this._curCollectList=[];for(var s=0;s<i.length;s++)t=mn.getCollectSoulGoods(i[s],e.minQuality),this._curCollectList.push(t);Sl.ins.openFightSoulConfirmPanel(this._curCollectList,"collectTitle","是否消耗以下战魂，随机凝聚成一个精魄？",Q.create(this,this.onConfirm),Q.create(this,this.onCancel))}else Jt.addTip("+"+this._requestQuality+"以上的战魂数量不足")},e.onPackageUpdate=function(){this.updateView()},e.updateView=function(){var t=mn.getSuitInfoList()[this._curSelectIndex];this._requestQuality=t.minQuality;var e=t.getNeedIdList(),i=t.getNeedNumList(),s=0;this._isEnough=!0;for(var n=0;n<this._items.length;n++){s=mn.getCollectSoulNum(e[n],t.minQuality),this._items[n].setTypeId(e[n]),this._items[n].addDesc(Xt.format("({0}/{1})",s,i[n]));var o=0==s?t.suitId:-1;this._items[n].setMaskImg(o),0==s&&(this._isEnough=!1)}this.checkBtnVisible()},e.onConfirm=function(){var t,e=[];for(var i in this._curCollectList)t=this._curCollectList[i],e.push(t.id);Sl.ins.toCollectSpirit(e),this.closeWindow()},e.onCancel=function(){},I(0,e,"endFirstIndex",function(){return(Math.ceil(mn.getSuitInfoList().length/this.list.repeatX)-1)*this.list.repeatX}),i}(),AE=function(t){function e(){this._item=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._item=new hU,this.addChild(this._item),this._item.pos(198,129),this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.FightSoulCollectSucPanel",pf);var i=e.prototype;return i.setGoods=function(t){this._item.dataSource=t,this._item.isShowBg=!1,this._item.setName("");var e=mn.getPureSpiritVO(t.typeid);this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.txtDesc.text=fn.getSpiritAttrStr(t.typeid,1)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnSure:this.onSure()}},i.onSure=function(){this.closeWindow()},e}(),EE=function(t){function e(){this._onConfirm=null,this._onCancel=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=KE,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.scrollBar.hide=!0,this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.FightSoulConfirmPanel",mf);var i=e.prototype;return i.onRenderItem=function(t,e){t.isShowAddValue=!0},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.onClickCancel();break;case this.btnSure:this.onClickConfirm()}},i.onClickConfirm=function(){this._onConfirm&&this._onConfirm.run(),this.closeWindow()},i.onClickCancel=function(){this._onCancel&&this._onCancel.run(),this.closeWindow()},i.setTitleName=function(t){t&&""!=t&&(this.imgTitle.skin=Xt.format("modules/fightSoul/{0}.png",t))},i.setDesc=function(t){this.txtDesc.text=t},i.setData=function(t){this.list.dataSource=t},I(0,i,"onConfirm",null,function(t){this._onConfirm=t}),I(0,i,"onCancel",null,function(t){this._onCancel=t}),e}(),RE=function(t){function e(){this._curSelectIndex=0,this._curPos=-1,this._curEquipSoulInfo=null,this._curDataList=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=KE,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onItemSelected),this.list.scrollBar.hide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.fightSoul.view.FightSoulListPanel",ff);var i=e.prototype;return i.onRenderItem=function(t,e){var i=t;if(i.isSelected=e==this._curSelectIndex,i.isShowAddValue=!0,this._curEquipSoulInfo){var s=mn.sortSoulKv(i.curSoulInfo,this._curEquipSoulInfo);i.isUp=s<0}else i.isUp=!0},i.onItemSelected=function(t){if(this._curSelectIndex!=t){var e=this.list.getCell(this._curSelectIndex);e&&(e.isSelected=!1);var i=this.list.getCell(t);i&&(i.isSelected=!0),this._curSelectIndex=t}},i.onClick=function(t){switch(t.target){case this.btnEquip:this.onEquip();break;case this.btnClose:case this.btnBack:this.closeWindow();break;case this.txtLink:me.linkTo(13001),this.closeWindow()}},i.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onPackageUpdate=function(){this.updateView()},i.onEquip=function(){if(this._curDataList&&0!=this._curDataList.length){var t=this.list.getCell(this._curSelectIndex);if(t){var e=new Object;e.className="p_kv",e.id=this._curPos,e.val=t.curGoods.id,mn.addOperateTypeId(t.curGoods.typeid),Sl.ins.toOperate(1,[e]),this.closeWindow()}else Jt.addTip("你还没有选择战魂喔！")}else Jt.addTip("当前没有符合条件的战魂，可前往跨服地图获取。")},i.updateView=function(){this._curPos<=0||(this._curDataList=mn.getSoulGoodsByPos(this._curPos),this.list.dataSource=this._curDataList,this.spTips.visible=0==this._curDataList.length,this.txtLink.visible=0==this._curDataList.length)},I(0,i,"curPos",null,function(t){this._curPos=t,this._curEquipSoulInfo=mn.getEquipSoulKVByPos(t),this.updateView()}),e}(),OE=function(t){function s(){this.headPart=null,this._items=null,s.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.on("display",this,this.onDisplay),this.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_FIGHT_SOUL_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));this._items=[];var e,i=0;for(t=0;t<8;t++)i=t+1,(e=new YE).partPos=i,e.addHandler=Q.create(this,this.addSoul),this._items.push(e),this.addChild(e),e.pos(pn.MAIN_VIEW_ITEM_POS_LIST[t].x,pn.MAIN_VIEW_ITEM_POS_LIST[t].y),Nt.register("RP_FIGHT_SOUL_EQUIP_ITEM_"+i,e,new Tt(25,10));Nt.register("RP_FIGHT_SOUL_AUTO_EQUIP",this.btnEuip,new Tt(20,-10)),this.on("click",this,this.onClick)}w(s,"modules.exercise.fightSoul.view.FightSoulMainView",_f);var e=s.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onClick=function(t){switch(t.target){case this.btnEuip:this.autoEquip();break;case this.btnBag:Sl.ins.openSoulPackBagPanel();break;case this.txtGetSoul:ba.show(10411031)}},e.onDisplay=function(t){this.headPart.resetSelect(0),this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_SHOW_EQUIP_EFFECT",this,this.onShowEquipEffect)},e.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_SHOW_EQUIP_EFFECT",this,this.onShowEquipEffect)},e.onShowEquipEffect=function(){var t,e;for(var i in mn.operateTypeIdList)e=mn.operateTypeIdList[i],t=mn.getFightSoulVO(e),this._items[t.pos-1].showEquipEffect()},e.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(mn.curPalId=e.pal_id,Sl.ins.toGetSoulInfo())}},e.update=function(){var t,e,i=0;for(var s in this._items)i=(e=this._items[s]).partPos,(t=mn.getEquipSoulKVByPos(i))?(e.data=t,e.addAttrValue(t.val)):e.data=null;this.updatePower(fn.getSoulPower())},e.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPow.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPow.graphics.drawTexture(e,e.width*s)},e.autoEquip=function(){var t,e,i,s,n=[];for(var o in this._items)s=this._items[o],t=mn.getEquipSoulKVByPos(s.partPos),(e=mn.getSoulGoodsByPos(s.partPos))&&0!=e.length&&((i=new Object).className="p_kv",i.id=e[0].typeid,i.val=mn.getSoulAddValue(e[0]),(!t||mn.sortSoulKv(i,t)<0)&&(i.id=s.partPos,i.val=e[0].id,n.push(i),mn.addOperateTypeId(e[0].typeid)));0!=n.length?Sl.ins.toOperate(1,n):Jt.addTip("当前没有更好的战魂")},e.addSoul=function(t){var e=this._items[t-1];e&&(e.isEquip()?Sl.ins.openOperationPanel(t):Sl.ins.openSoulListPanel(t))},s}(),LE=function(t){function e(){this.endTime=0,this._bagId=0,this._price=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.init()}w(e,"modules.exercise.fightSoul.view.FightSoulOpenPackageCellPanel",gf);var i=e.prototype;return i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.txtInput.text="5",this.txtPrice.text=""+mn.getPackOpenVO(xo.getBagExtends(this._bagId)+1,this._bagId).need},i.init=function(){this.on("click",this,this.onMouseDown)},i.toUpEx=function(t,e){cr.ins().toUpExPack(t,e),this.closeWindow()},i.onMouseDown=function(t){var e=0,i=xo.getBagExtends(this._bagId);switch(t.target){case this.yBtn:this._price=parseInt(this.txtPrice.text),e=parseInt(this.txtInput.text),this._price<=pe.user.attr.gold?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(this._price+"元宝","#F7EF5F")+Z.span("开启额外"+e+"个背包格子？","#5d3924"),this,this.toUpEx,[this._bagId,e/5],"exPack"):(Lo.showAlert(),this.closeWindow());break;case this.cloBtn:case this.nBtn:this.closeWindow();break;case this.downBtn:this._price=0,e=parseInt(this.txtInput.text),(e-=5)<5&&(Jt.addTip("每次最少开启五个格子"),e=5),this.txtInput.text=""+e,this.endTime=i+e/5;for(var s=i+1;s<=this.endTime;s++)this._price+=mn.getPackOpenVO(s,this._bagId).need;this.txtPrice.text=""+this._price;break;case this.upBtn:for(this._price=0,e=parseInt(this.txtInput.text),e+=5,null==mn.getPackOpenVO(i+e/5,this._bagId)&&(Jt.addTip("已达到开启数量上限"),e-=5),this.endTime=i+e/5,this.txtInput.text=""+e,s=i+1;s<=this.endTime;s++)this._price+=mn.getPackOpenVO(s,this._bagId).need;this.txtPrice.text=""+this._price}},I(0,i,"bagId",null,function(t){this._bagId=t}),I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.exercise.fightSoul.FightSoulOpenPackageCellPanelUI._$SET_ins),e._ins=null,e}(),DE=function(t){function e(){this._curPos=0,this._curPkv=null,this._item=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._item=new YE,this.addChild(this._item),this._item.pos(110,148),this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.FightSoulOperatePanel",yf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnExchange:this.exchangeSoul();break;case this.btnDisassembly:this.disassemblySoul()}},i.updateView=function(){var t=mn.getEquipSoulKVByPos(this._curPos);if(t){this._curPkv=t,this._item.data=t,this._item.addAttrValue(t.val);var e=mn.getFightSoulVO(t.id),i=mn.getTotalAddValueStr(t);this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.txtDesc.innerHTML=Z.parseStringFont(e.desc,i)}},i.disassemblySoul=function(){if(this._curPkv)if(mn.isPackageFull(xo.FIGHT_SOUL_ID))Jt.addTip("战魂背包已满!");else{var t=new Object;t.className="p_kv",t.id=this._curPos,t.val=this._curPkv.id,mn.addOperateTypeId(this._curPkv.id),Sl.ins.toOperate(2,[t]),this.closeWindow()}},i.exchangeSoul=function(){Sl.ins.openSoulListPanel(this._curPos),this.closeWindow()},I(0,i,"curPos",null,function(t){this._curPos=t,this.updateView()}),e}(),NE=function(t){function i(){this._curDataList=null,this._repeatX=5,this._repeatY=5,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=KE,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectHandler=Q.create(this,this.onItemClick),this.list.selectEnable=!0,this.list.scrollBar.hide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(i,"modules.exercise.fightSoul.view.FightSoulPackagePanel",vf);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnAdd:this.onAddPackage();break;case this.btnCollect:Sl.ins.openCollectSoulPanel();break;case this.btnResolve:Sl.ins.openResolveSoulPanel()}},e.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate),T.register("PACK_UPDATE_EXTEND_SUCCESS",this,this.onPackUpdateExtend)},e.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate),T.remove("PACK_UPDATE_EXTEND_SUCCESS",this,this.onPackUpdateExtend)},e.onRenderItem=function(t,e){var i=t;i.isLock=e>=mn.getPackageCapacity(xo.FIGHT_SOUL_ID),i.isShowAddValue=!0},e.onItemClick=function(t){var e=this.list.getCell(t);e&&(e.isLock?this.onAddPackage():e.curSoulInfo&&Sl.ins.openFightSoulTipsPanel(e.curSoulInfo.id,e.curSoulInfo.val))},e.onAddPackage=function(){Sl.ins.openAddPackageCellPanel(xo.FIGHT_SOUL_ID)},e.onPackageUpdate=function(){this.updateView()},e.onPackUpdateExtend=function(t){t==xo.FIGHT_SOUL_ID&&this.updateView()},e.updateView=function(){var t=mn.getAllSoulGoods();this._curDataList=this._curDataList||[],this._curDataList.length=i.calMaxItemNum(xo.FIGHT_SOUL_ID,this._repeatX,this._repeatY);for(var e=0;e<this._curDataList.length;e++)e<t.length?this._curDataList[e]=t[e]:this._curDataList[e]=null;this.list.dataSource=this._curDataList,this.txtNum.text=t.length+"/"+mn.getPackageCapacity(xo.FIGHT_SOUL_ID)},i.calMaxItemNum=function(t,e,i){var s=mn.getPackageCapacity(t),n=mn.getMaxPackCellNum(t)-s,o=e*i,a=Math.ceil(s/o)*o-s;return s+Math.min(a+o,n)},i}(),VE=function(t){function i(){this._curDataList=null,this._repeatX=2,this._repeatY=6,this._chooseSoul=null,this._consumeGood=null,this.recastEffect=null,this._newIds=null,this._oldIds=null,this.initFlag=!1,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(i,"modules.exercise.fightSoul.view.FightSoulRecastSoulPanel",If);var e=i.prototype;return e.init=function(){this.list.itemRender=hU,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectHandler=Q.create(this,this.onItemClick),this.list.selectEnable=!0,this.attrTxt.leading=22,this._chooseSoul=new hU,this._chooseSoul.dataSource=null,this._chooseSoul.isLock=!1,this._chooseSoul.hideBtnAdd=!0,this.spGoods.addChild(this._chooseSoul),this._consumeGood=new Ah,this.spConsume.addChild(this._consumeGood)},e.onDisplay=function(){this.init(),this.updateView(),this.on("undisplay",this,this.onUnDisplay)},e.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay),this.spGoods.removeChildren(),this.spConsume.removeChildren(),this.attrTxt.text="",this.afterTxt.text="",this._newIds=[],this._oldIds=[],this.initFlag=!1},e.onRenderItem=function(t,e){var i=t;i.isLock=e>=mn.getPackageCapacity(xo.PURE_SPIRIT_ID),i.curGoods&&-1!=this._newIds.indexOf(i.curGoods.id)?i.isNew=!0:i.isNew=!1,i.isShowAddValue=!0},e.onItemClick=function(t){var e=this.list.getCell(t);if(e){if(e.isLock)return;if(e.curGoods){this.bgImg.skin="modules/fightSoul/dark.png",e.isNew=!1;var i=e.curGoods;this._newIds.length&&-1<this._newIds.indexOf(i.id)&&(this._newIds.splice(this._newIds.indexOf(i.id),1),this._oldIds.push(i.id)),this._chooseSoul.dataSource=i;var s=mn.getSoulRecastVo(i.typeid);this._consumeGood.dataSource=s.recast.split("|")[0],this._consumeGood.hideGoodsName(),this.attrTxt.text=this.getAttrTxt(i),this.afterTxt.text="随机";var n=this._consumeGood.getItemVO(),o=n.id,a=xo.getGoodsNumByType(xo.GOODS_ID,o);this._consumeGood.gray=a<=0,this._consumeGood.num=a,this._consumeGood.showNum=!0,this.noticeTxt.text="需要: "+n.name+"x"+s.recast.split("|")[1]}}},e.getAttrTxt=function(t){return fn.getSpiritAttrStr(t.typeid,mn.getSpiritLevel(t))},e.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.toRecast:this.soulToRecast();break;case this._chooseSoul:this._chooseSoul.dataSource=null,this.attrTxt.text="",this._consumeGood.dataSource=null,this.noticeTxt.text="请从左侧选择重铸精魄"}},e.soulToRecast=function(){null!=this._consumeGood.getItemVO()&&(this._consumeGood.num<=0?Jt.addTip("没有对应的重铸石，请前往深海秘藏获得"):(Jt.addTip("开始重铸"),Sl.ins.toRecast(this._chooseSoul.curGoods.id)))},e.updateView=function(){var s=this,t=mn.getAllSpiritGoods();this._curDataList=this._curDataList||[],this._oldIds=this._oldIds||[],this._newIds=this._newIds||[],this._curDataList.length=i.calMaxItemNum(xo.PURE_SPIRIT_ID,this._repeatX,this._repeatY),this.initFlag=Boolean(this._oldIds.length);for(var e=0;e<this._curDataList.length;e++)e<t.length&&(this._curDataList[e]=t[e],this.initFlag||-1!=this._oldIds.indexOf(t[e].id)?this.initFlag&&-1==this._oldIds.indexOf(t[e].id)&&(this._newIds.push(t[e].id),this.soulFly(t[e])):this._oldIds.push(t[e].id));this._curDataList.sort(function(t,e){var i=s.getOldIds;{if(!(-1==i.indexOf(t.id)&&-1==i.indexOf(e.id)||-1<i.indexOf(t.id)&&-1<i.indexOf(e.id)))return-1==i.indexOf(t.id)&&-1<i.indexOf(e.id)?-1:1;mn.sortSpiritGoods(t,e)}}),this.list.dataSource=this._curDataList,this._chooseSoul.dataSource=null,this._consumeGood.dataSource=null,this.noticeTxt.text="请从左侧选择重铸精魄"},e.soulFly=function(t){var e=new hU;e.dataSource=t,e.pos(448,199),this.addChild(e),ie.to(e,{x:this.list.width/2,y:this.list.height/2},1e3,A.quadOut,Q.create(this,function(t){t&&(t.removeSelf(),t.dataSource=null)},[e]))},e.recastSuc=function(){this.toRecast.disabled=!0,this.list.selectEnable=!1,this.recastEffect=this.recastEffect||b.getOne(),this.recastEffect.pos(this.bgImg.x,this.bgImg.y),this.bgImg.visible=!1,this.recastEffect.setEndHandler(Q.create(this,this.onComplete,[],!0)),this.recastEffect.loadAndPlay("moduleEffect/fightsoulrecast"),this.addChild(this.recastEffect)},e.onComplete=function(){this.bgImg.skin="modules/fightSoul/light.png",this.bgImg.visible=!0,this.toRecast.disabled=!1,this.list.selectEnable=!0,this.attrTxt.text="",this.updateView()},I(0,e,"getOldIds",function(){return this._oldIds}),i.calMaxItemNum=function(t,e,i){var s=mn.getPackageCapacity(t),n=mn.getMaxPackCellNum(t)-s,o=e*i,a=Math.ceil(s/o)*o-s;return s+Math.min(a+o,n)},i}(),BE=function(t){function s(){var t,e;this._items=null,this._curSelectSoul=null,this._rewardItem=null,s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._items=[];for(var i=0;i<8;i++)(t=new KE).addHandler=Q.create(this,this.onClickAdd),this.addChild(t),t.pos(pn.RESOLVE_PANEL_ITEM_POS_LIST[i].x,pn.RESOLVE_PANEL_ITEM_POS_LIST[i].y),this._items.push(t);for(this._rewardItem=[],i=0;i<4;i++)(e=new fh(null,!1,!0,105,!0)).isShowTips=!0,this.addChild(e),e.pos(pn.RESOLVE_GOODS_IMG_POS_LIST[i].x,pn.RESOLVE_GOODS_IMG_POS_LIST[i].y),this._rewardItem.push(e);this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(s,"modules.exercise.fightSoul.view.FightSoulResolveSoulPanel",wf);var e=s.prototype;return e.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_RESOLVE_LIST_CHANGE",this,this.onSelectListChange),this._curSelectSoul=[]},e.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_RESOLVE_LIST_CHANGE",this,this.onSelectListChange)},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnResolve:this.onResolve()}},e.onResolve=function(){0!=this._curSelectSoul.length?Sl.ins.openFightSoulConfirmPanel(this._curSelectSoul,"resolveTitle","是否分解下列战魂？",Q.create(this,this.onConfirmResolve),Q.create(this,this.onCancelResole)):Jt.addTip("请放入需分解的战魂")},e.onClickAdd=function(){Sl.ins.openSelectSoulPanel(this._curSelectSoul.concat())},e.onSelectListChange=function(t){this._curSelectSoul=t,this.updateView()},e.updateView=function(){for(var t=0;t<this._items.length;t++)t<this._curSelectSoul.length?(this._items[t].dataSource=this._curSelectSoul[t],this._items[t].isShowAddValue=!0):this._items[t].dataSource=null;var e,i,s,n=[],o=[],a=0,l=0,r=0;for(var h in this._curSelectSoul)for(i=this._curSelectSoul[h],e=mn.getSoulResolveVo(i.typeid),t=0;t<e.getRewardIdList().length;t++)a=e.getRewardIdList()[t],l=e.getRewardNumList()[t],(r=n.indexOf(a))<0?(n.push(a),o.push(l)):o[r]+=l;for(t=0;t<this._rewardItem.length;t++)s=this._rewardItem[t],t<n.length?(s.data=ur.getItem(n[t]),s.num=o[t]):s.data=null},e.onConfirmResolve=function(){var t,e,i,s=[];for(var n in this._curSelectSoul)i=this._curSelectSoul[n],e=mn.getFightSoulVO(i.typeid),(t=new Object).className="p_kv",t.id=e.pos,t.val=i.id,s.push(t),mn.addOperateTypeId(i.typeid);Sl.ins.toOperate(3,s),this._curSelectSoul.length=0,this.updateView()},e.onCancelResole=function(){Jt.addTip("取消分解")},s}(),ME=function(t){function e(){this._curSelectList=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=XE,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onItemSelected),this.list.scrollBar.hide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.fightSoul.view.FightSoulSelectSoulPanel",bf);var i=e.prototype;return i.onRenderItem=function(t,e){var i=t;i.isSelect=0<=this._curSelectList.indexOf(i.curGoods),i.addAttrValue(mn.getSoulAddValue(i.curGoods))},i.onItemSelected=function(t){var e=this.list.getCell(t);if(e){var i=!e.isSelected;if(i&&8<=this._curSelectList.length)return void Jt.addTip("分解列表已满");e.isSelect=i;var s=this._curSelectList.indexOf(e.curGoods);i&&s<0&&this._curSelectList.push(e.curGoods),!i&&0<=s&&this._curSelectList.splice(s,1),this.updateNum()}},i.onClick=function(t){switch(t.target){case this.btnSure:this.onSure();break;case this.btnClose:case this.btnBack:this.closeWindow()}},i.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onSure=function(){T.dispatch("FIGHT_SOUL_RESOLVE_LIST_CHANGE",this._curSelectList),this.closeWindow()},i.onPackageUpdate=function(){this.updateView()},i.setSelectList=function(t){this._curSelectList=t,this.updateView()},i.updateView=function(){var t=mn.getAllSoulGoods();t.reverse(),this.list.dataSource=t,this.updateNum()},i.updateNum=function(){this.txtNum.text=this._curSelectList.length+"/8"},e}(),FE=function(t){function e(){this._curSelectIndex=0,this._curPos=-1,this._curEquipSpiritInfo=null,this._curDataList=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=hU,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onItemSelected),this.list.scrollBar.hide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.fightSoul.view.FightSoulSpiritListPanel",Sf);var i=e.prototype;return i.onRenderItem=function(t,e){var i=t;i.isSelected=e==this._curSelectIndex,i.isShowAddValue=!0,i.curGoods&&(i.isUp=!0)},i.onItemSelected=function(t){if(this._curSelectIndex!=t){var e=this.list.getCell(this._curSelectIndex);e&&(e.isSelected=!1);var i=this.list.getCell(t);i&&(i.isSelected=!0),this._curSelectIndex=t}},i.onClick=function(t){switch(t.target){case this.btnEquip:this.onEquip();break;case this.btnClose:case this.btnBack:this.closeWindow();break;case this.txtLink:me.linkTo(10812),this.closeWindow()}},i.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate)},i.onPackageUpdate=function(){this.updateView()},i.onEquip=function(){if(this._curDataList&&0!=this._curDataList.length){var t=this.list.getCell(this._curSelectIndex);if(t){var e=new Object;e.className="p_kv",e.id=this._curPos,e.val=t.curGoods.id,mn.clearOperateTypeIdList(),mn.addOperateTypeId(t.curGoods.typeid),Sl.ins.toEquipSpirit([e]),this.closeWindow()}else Jt.addTip("你还没有选择精魄喔！")}else Jt.addTip("当前没有符合条件的精魄，可通过凝聚精魄获得。")},i.updateView=function(){this._curPos<=0||(this._curDataList=mn.getSpiritGoodsByPos(this._curPos),this.list.dataSource=this._curDataList,this.spTips.visible=0==this._curDataList.length,this.txtLink.visible=0==this._curDataList.length)},I(0,i,"curPos",null,function(t){this._curPos=t,this.updateView()}),e}(),UE=function(t){function s(){this.headPart=null,this._items=null,s.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.on("display",this,this.onDisplay),this.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_FIGHT_SOUL_SPIRIT_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));this._items=[];var e,i=0;for(t=0;t<8;t++)i=t+1,(e=new hU).partPos=i,e.addHandler=Q.create(this,this.operateSpirit),e.setNameTxtWidth(150),this._items.push(e),this.addChild(e),e.pos(pn.SPIRIT_MAIN_VIEW_ITEM_POS[t].x,pn.SPIRIT_MAIN_VIEW_ITEM_POS[t].y),Nt.register("RP_FIGHT_SOUL_SPIRIT_EQUIP_ITEM_"+i,e,new Tt(35,10));Nt.register("RP_FIGHT_SOUL_SPIRIT_AUTO_EQUIP",this.btnEuip,new Tt(20,-10)),this.on("click",this,this.onClick)}w(s,"modules.exercise.fightSoul.view.FightSoulSpiritMainView",xf);var e=s.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(mn.curPalId=e.pal_id,Sl.ins.toGetSpiritInfo())}},e.onDisplay=function(t){this.headPart.resetSelect(0),this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_SHOW_EQUIP_EFFECT",this,this.onShowEquipEffect)},e.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_SHOW_EQUIP_EFFECT",this,this.onShowEquipEffect)},e.onShowEquipEffect=function(){var t,e;for(var i in mn.operateTypeIdList)e=mn.operateTypeIdList[i],t=mn.getPureSpiritVO(e),this._items[t.pos-1].showEquipEffect()},e.operateSpirit=function(t){var e=this._items[t-1];e&&(e.isEquip()?Sl.ins.openSpiritOperatePanel(t):Sl.ins.openSpiritListPanel(t))},e.onClick=function(t){switch(t.target){case this.btnEuip:this.autoEquip();break;case this.btnBag:Sl.ins.openSpiritPackPanel();break;case this.txtGetSoul:ba.show(10421031)}},e.autoEquip=function(){var t,e,i,s,n=[];for(var o in mn.clearOperateTypeIdList(),this._items)s=this._items[o],t=mn.getEquipSpiritByPos(s.partPos),(e=mn.getSpiritGoodsByPos(s.partPos))&&0!=e.length&&((i=new Object).className="p_kv",i.id=e[0].typeid,(!t||mn.sortSpiritKv(i,t)<0)&&(i.id=s.partPos,i.val=e[0].id,n.push(i),mn.addOperateTypeId(e[0].typeid)));0!=n.length?Sl.ins.toEquipSpirit(n):Jt.addTip("当前没有更好的精魄")},e.update=function(){var t,e,i=0;for(var s in this._items)i=(e=this._items[s]).partPos,(t=mn.getEquipSpiritByPos(i))?(e.setTypeId(t.id),e.level=t.val):(e.dataSource=null,e.showPosName(mn.getSpiritPosName(i)));this.updatePower(fn.getSpiritPower())},e.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPow.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPow.graphics.drawTexture(e,e.width*s)},s}(),GE=function(t){function e(){this._item=null,this._curSpirit=null,this._isExpEnough=!1,this._isMaxLevel=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._item=new hU,this.addChild(this._item),this._item.pos(113,100),this.on("click",this,this.onClick),this.txtDesc.visible=!1}w(e,"modules.exercise.fightSoul.view.FightSoulSpiritOperatePanel",Cf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnAdd:this.onAddExp();break;case this.btnDisassemble:this.onDisassembly();break;case this.btnUpgrade:this.onUpgrade()}},i.onAddExp=function(){Sl.ins.openAddSpiritExpPanel()},i.onDisassembly=function(){if(this._curSpirit)if(mn.isPackageFull(xo.PURE_SPIRIT_ID))Jt.addTip("背包已满");else{var t=mn.getPureSpiritVO(this._curSpirit.id),e=new Ee;e.title="温馨提示",e.msg=Xt.format("卸下{0}（Lv.{1}）后，将返还升级该精魄消耗的所有经验。确定卸下吗？",t.name,this._curSpirit.val),e.yesCaller=this,e.yesFun=this.onConfirmDisassembly,EF.showVO(e)}},i.onConfirmDisassembly=function(){mn.clearOperateTypeIdList(),mn.addOperateTypeId(this._curSpirit.id),Sl.ins.toRemoveSpirit(this._curSpirit.id),this.closeWindow()},i.onUpgrade=function(){this._isMaxLevel?Jt.addTip("已满级"):this._isExpEnough?Sl.ins.toSpiritLevelUp(this._curSpirit.id):Jt.addTip("经验不足喔！")},i.setSpiritInfo=function(t){this._curSpirit=t,this.updateView()},i.updateView=function(){this._item.setTypeId(this._curSpirit.id);var t=mn.getPureSpiritVO(this._curSpirit.id),e=U.getColorDark(t.color);if(this.txtName.innerHTML=Z.font(t.name,e),this.txtLvl.innerHTML=Z.font("Lv."+this._curSpirit.val,"#5d3924"),this.txtAttrCur.text=fn.getSpiritAttrStr(this._curSpirit.id,this._curSpirit.val),this._isMaxLevel=t.isMaxLevel(this._curSpirit.val),this.btnUpgrade.label=this._isMaxLevel?"已满级":"升级",this.btnUpgrade.disabled=this._isMaxLevel,this.boxExp.visible=!this._isMaxLevel,this.imgMax.visible=this._isMaxLevel,this.txtAttrNext.visible=!this._isMaxLevel,!this._isMaxLevel){this.txtAttrNext.text=fn.getSpiritAttrStr(this._curSpirit.id,this._curSpirit.val+1);var i=mn.getSpiritLevelCostExpVO(this._curSpirit.id,this._curSpirit.val).costExp,s=pe.getScore(28);this._isExpEnough=i<=s;var n=this._isExpEnough?"#ffffff":"#b60202";this.txtMyExp.color=n,this.txtMyExp.text=s.toString(),this.txtCostExp.text="/"+i,this.txtExpNumDesc.x=0,this.txtMyExp.x=this.txtExpNumDesc.x+this.txtExpNumDesc.textWidth,this.txtCostExp.x=this.txtMyExp.x+this.txtMyExp.textWidth,this.btnAdd.x=this.txtCostExp.x+this.txtCostExp.textWidth+5,this.boxExp.width=this.txtExpNumDesc.textWidth+this.txtMyExp.textWidth+this.txtCostExp.textWidth+this.btnAdd.width+5,this.boxExp.x=(this.width-this.boxExp.width)/2}},i.getCurPos=function(){return this._curSpirit?mn.getPureSpiritVO(this._curSpirit.id).pos:0},e}(),HE=function(t){function e(){this._curDataList=null,this._repeatX=5,this._repeatY=5,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=hU,this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.selectHandler=Q.create(this,this.onItemClick),this.list.selectEnable=!0,this.list.scrollBar.hide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.fightSoul.view.FightSoulSpiritPackagePanel",Pf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnRecast:Sl.ins.openRecastSoulPanel();break;case this.btnAdd:this.onAddPackage()}},i.onDisplay=function(t){this.on("undisplay",this,this.onUnDisplay),T.register("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate),T.register("PACK_UPDATE_EXTEND_SUCCESS",this,this.onPackUpdateExtend)},i.onUnDisplay=function(t){this.off("undisplay",this,this.onUnDisplay),T.remove("FIGHT_SOUL_PACKAGE_DATA_UPDATE",this,this.onPackageUpdate),T.remove("PACK_UPDATE_EXTEND_SUCCESS",this,this.onPackUpdateExtend)},i.onRenderItem=function(t,e){var i=t;i.isLock=e>=mn.getPackageCapacity(xo.PURE_SPIRIT_ID),i.isShowAddValue=!0},i.onItemClick=function(t){var e=this.list.getCell(t);e&&e.isLock&&this.onAddPackage()},i.onAddPackage=function(){Sl.ins.openAddPackageCellPanel(xo.PURE_SPIRIT_ID)},i.onPackUpdateExtend=function(t){t==xo.PURE_SPIRIT_ID&&this.updateView()},i.onPackageUpdate=function(){this.updateView()},i.updateView=function(){var t=mn.getAllSpiritGoods();this._curDataList=this._curDataList||[],this._curDataList.length=NE.calMaxItemNum(xo.PURE_SPIRIT_ID,this._repeatX,this._repeatY);for(var e=0;e<this._curDataList.length;e++)e<t.length?this._curDataList[e]=t[e]:this._curDataList[e]=null;this.list.dataSource=this._curDataList,this.txtNum.text=t.length+"/"+mn.getPackageCapacity(xo.PURE_SPIRIT_ID)},e}(),WE=function(t){function e(){this._item=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._item=new YE,this.addChild(this._item),this._item.pos(110,124),this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.FightSoulUsePanel",Tf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnCheck:this.onCheck();break;case this.btnOpen:this.onOpen()}},i.onCheck=function(){me.linkTo(10809),this.closeWindow()},i.onOpen=function(){var t=xo.getGoodsByUseType(27);0==t.length?Jt.addTip("没有可使用的战魂"):Sl.ins.useFightSoulItem(t[0]),this.closeWindow()},I(0,i,"data",null,function(t){this._item.dataSource=t,this._item.isShowName=!1;var e=mn.getFightSoulVO(t.typeid),i=mn.getSoulAddValue(t);this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name+"+"+i;var s=new Object;s.className="p_kv",s.id=t.typeid,s.val=i,this.txtDesc.innerHTML=Z.parseStringFont(e.desc,mn.getTotalAddValueStr(s))}),e}(),qE=function(t){function e(){this._curView=null,this._soulMainView=null,this._spiritMainView=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.tab.on("change",this,this.onTabChange);for(var t=0;t<4;t++)Nt.register("RP_FIGHT_SOUL_HEAD_ITEM_"+t,this.tab.items[0],new Tt(19,-10)),Nt.register("RP_FIGHT_SOUL_SPIRIT_HEAD_ITEM_"+t,this.tab.items[1],new Tt(19,-10))}w(e,"modules.exercise.fightSoul.view.FightSoulView",kf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.tab.selectedIndex=0,Sl.ins.toGetPackageBagInfo()},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this._soulMainView=this._soulMainView||new OE,this.spView.addChild(this._soulMainView),this._curView=this._soulMainView;break;case 1:this._spiritMainView=this._spiritMainView||new UE,this.spView.addChild(this._spiritMainView),this._curView=this._spiritMainView}this.update()},i.update=function(){this._curView&&this._curView.update()},e}(),YE=function(t){function e(){this._itemEffect=null,this._partPos=0,this._addHandler=null,this._equipEffect=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.item.FightSoulEquipItem",t);var i=e.prototype;return i.onClick=function(t){this._addHandler&&this._addHandler.runWith(this._partPos)},i.setTypeId=function(t){if(0<t){var e=mn.getFightSoulVO(t);this._itemEffect||(this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.txtName)),this._itemEffect.mouseEnabled=!1),this.changeEff(e.eff),this.txtPart.text="",this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.btnAdd.visible=!1}else this.txtPart.text=pn.SOUL_PART_NAME_LIST[this.partPos],this.txtName.text="",this.btnAdd.visible=!0,this._itemEffect&&(this._itemEffect.visible=!1)},i.changeEff=function(t){this._itemEffect&&(this._itemEffect.loadAndPlay("moduleEffect/"+t,"default",0,!0),this._itemEffect.visible=!0,this._itemEffect.pos(53,50))},i.showEquipEffect=function(){this._equipEffect||(this._equipEffect=b.getOne(),this._equipEffect.mouseEnabled=!1,this.addChild(this._equipEffect),this._equipEffect.mouseEnabled=!1),this._equipEffect&&(this._equipEffect.loadAndPlay("moduleEffect/changeover","default",0),this._equipEffect.pos(56,70))},i.isEquip=function(){return this._itemEffect&&this._itemEffect.visible},i.addAttrValue=function(t){this.txtName.text+="+"+t},I(0,i,"data",null,function(t){var e=t?t.id:-1;this.setTypeId(e)}),I(0,i,"uiClass",function(){return"FightSoulEuipItem"}),I(0,i,"addHandler",null,function(t){this._addHandler=t}),I(0,i,"suitData",null,function(t){t?(this._itemEffect||(this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.txtName))),this.changeEff(t.eff),this.txtPart.text="",this.btnAdd.visible=!1,this.txtName.color=U.getColorDark(t.color),this.txtName.text=t.name):(this.txtPart.text="",this.txtName.text="",this.btnAdd.visible=!1,this._itemEffect&&(this._itemEffect.visible=!1))}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(!t)return this.suitData=null,void(this.data=null);"p_kv"==t.className?this.data=t:t instanceof xml.CollectSpiritVO?this.suitData=t:"p_goods"==t.className?this.goodsData=t:this.data=null}),I(0,i,"goodsData",null,function(t){this.setTypeId(t.typeid)}),I(0,i,"partPos",function(){return this._partPos},function(t){this._partPos=t}),I(0,i,"isShowName",null,function(t){this.txtName.visible=t}),e}(Af),XE=function(t){function e(){this._itemEffect=null,this._curGoods=null,e.__super.call(this),this.btnSelect.selected=!1,this.btnSelect.mouseEnabled=!1}w(e,"modules.exercise.fightSoul.view.item.FightSoulSelectItem",t);var i=e.prototype;return i.onClick=function(t){},i.changeEff=function(t){this._itemEffect&&(this._itemEffect.loadAndPlay("moduleEffect/"+t,"default",0,!0),this._itemEffect.visible=!0,this._itemEffect.pos(101,66))},i.addAttrValue=function(t){this.txtName.text+="+"+t},I(0,i,"isSelected",function(){return this.btnSelect.selected}),I(0,i,"data",null,function(t){if(t){var e=mn.getFightSoulVO(t.id);this._itemEffect||(this._itemEffect=b.getOne(),this.addChild(this._itemEffect),this._itemEffect.mouseEnabled=!1),this.changeEff(e.eff),this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name}}),I(0,i,"isSelect",null,function(t){this.btnSelect.selected=t}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(null==t)return this.goodsData=null,void(this.data=null);"p_goods"==t.className?this.goodsData=t:"p_kv"==t.className?this.data=t:this.data=null}),I(0,i,"curGoods",function(){return this._curGoods}),I(0,i,"goodsData",null,function(t){if(this._curGoods=t){var e=new Object;e.className="p_kv",e.id=t.typeid,e.val=mn.getSoulAddValue(t),this.data=e}else this.data=null}),e}(Ef),KE=function(t){function e(){this._itemEffect=null,this._addHandler=null,this._curGoods=null,this._curSoulInfo=null,this._imgMask=null,e.__super.call(this),this.imgLock.visible=!1,this.imgUp.visible=!1,this.imgSelect.mouseEnabled=!1,this.imgSelect.visible=!1,this.on("click",this,this.onClick)}w(e,"modules.exercise.fightSoul.view.item.FightSoulShowItem",t);var i=e.prototype;return i.onClick=function(t){this._addHandler&&this._addHandler.run()},i.setTypeId=function(t){if(0<t){var e=mn.getFightSoulVO(t);this._itemEffect||(this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.txtName)),this._itemEffect.mouseEnabled=!1),this.changeEff(e.eff),this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.btnAdd.visible=!1}else this.btnAdd.visible=null!=this._addHandler,this.txtName.text="",this._itemEffect&&(this._itemEffect.visible=!1)},i.changeEff=function(t){this._itemEffect&&(this._itemEffect.loadAndPlay("moduleEffect/"+t,"default",0,!0),this._itemEffect.visible=!0,this.setEffectItemPos())},i.setEffectItemPos=function(){this._itemEffect.pos(60,50)},i.setName=function(t,e){void 0===e&&(e=-1),0<=e&&(this.txtName.color=U.getColorDark(e)),this.txtName.text=t,this.txtName.visible=!0},i.addDesc=function(t){this.txtName.text+=t},i.setMaskImg=function(t){0<t?(this._imgMask=this._imgMask||new et,this.addChildAt(this._imgMask,this.getChildIndex(this.imgSelect)+1),this._imgMask.centerX=0,this._imgMask.centerY=0,this._imgMask.skin="modules/fightSoul/gray"+t+".png",this._itemEffect&&(this._itemEffect.visible=!1)):this._imgMask&&this._imgMask.removeSelf()},i.setNameTxtWidth=function(t){this.txtName.width=t,this.txtName.x=(this.width-t)/2},I(0,i,"data",null,function(t){var e=(this._curSoulInfo=t)?t.id:-1;this.setTypeId(e)}),I(0,i,"uiClass",function(){return"FightSoulShowItem"}),I(0,i,"addHandler",null,function(t){this._addHandler=t}),I(0,i,"isUp",null,function(t){this.imgUp.visible=t}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(null==t)return this.data=null,void(this.goodsData=null);"p_goods"==t.className?this.goodsData=t:"p_kv"==t.className?this.data=t:this.data=null}),I(0,i,"curGoods",function(){return this._curGoods}),I(0,i,"isNew",null,function(t){this.imgNew.visible=t}),I(0,i,"goodsData",null,function(t){this._curGoods=t,this._curSoulInfo=t?mn.getSoulKVByGoods(t):null;var e=t?t.typeid:-1;this.setTypeId(e)}),I(0,i,"hideBtnAdd",null,function(t){this.btnAdd.visible=!t}),I(0,i,"isLock",function(){return this.imgLock.visible},function(t){this.imgLock.visible=t}),I(0,i,"isSelected",function(){return this.imgSelect.visible},function(t){this.imgSelect.visible=t}),I(0,i,"isShowBg",null,function(t){this.imgBg.visible=t}),I(0,i,"isShowAddValue",null,function(t){if(this._curSoulInfo){var e=mn.getFightSoulVO(this._curSoulInfo.id);this.txtName.text=t?e.name+"+"+this._curSoulInfo.val:e.name}}),I(0,i,"curSoulInfo",function(){return this._curSoulInfo}),e}(Rf),jE=function(t){function e(){this.curVO=null,e.__super.call(this)}w(e,"modules.pack.RpMask.PackRpChb",au);var i=e.prototype;return i.update=function(){this.curVO&&(this.chb.label=this.curVO.name,this.chb.selected=ha.checkIsPing2(1,pe.roleID,this.curVO.index))},I(0,i,"chbID",null,function(t){this.curVO=ha.getBagChbVO(t),this.update()}),I(0,i,"nowBit",function(){return this.curVO&&this.chb.selected?Math.pow(2,this.curVO.index):0}),e}(),QE=function(t){function s(){s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.panel.vScrollBar.autoHide=!0;var t=ha.getPackChbIDs();if(t)for(var e,i=0;i<t.length;i++)(e=new jE).chbID=t[i],e.pos(i%2==0?60:350,20+60*Math.floor(i/2)),this.panel.addChild(e);this.on("click",this,this.onClick)}w(s,"modules.pack.RpMask.PackRPSetPanel",lu);var e=s.prototype;return e.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},e.update=function(){for(var t=0;t<this.panel.numChildren;t++)this.panel.getChildAt(t).update()},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.update()},e.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this);var t=this.countNowInfo();t!=ha.getMaskInfo(1,pe.roleID)&&Ar.ins().toRPSave(1,pe.roleID,[t])},e.countNowInfo=function(){for(var t=0,e=0;e<this.panel.numChildren;e++)t+=this.panel.getChildAt(e).nowBit;return t},s}(),zE=function(t){function e(){this.commonAttrKeys=[49,11,13,14,37,38,55,54],this.commonAttrKeyNames=["攻    击","生    命","物    防","法    防","暴    击","韧    性","伤害加成","伤害减免"],this.spcAttrKeys=[47,48,45,46,43,44,39,40],this.spcAttrKeyNames=["火    攻","火    抗","冰    攻","冰    抗","毒    攻","毒    抗","雷    攻","雷    抗"],this.curIndex=0,this.attrs=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnBack.on("click",this,this.closeWindow),this.tab.on("change",this,this.update),this.tab.selectedIndex=0,this.btnL.on("click",this,this.onChangeGodEquipL),this.btnR.on("click",this,this.onChangeGodEquipR),this.on("display",this,this.onAdd)}w(e,"modules.exercise.godEquip.view.ExerGodEquipAttrView",Of);var i=e.prototype;return i.onAdd=function(t){this.curIndex=_n.curEquipIndex,this.update(),this.on("undisplay",this,this.onRemove)},i.onRemove=function(t){this.off("undisplay",this,this.onRemove)},i.update=function(){var t=_n.getGodEquipVOByIndex(this.curIndex);t&&(this.txtName.text=t.name.split("·")[1]),this.attrs=_n.getGodEquipAttrByIndex(this.curIndex);var e=[],i=[];0==this.tab.selectedIndex?(this.txtTitle.text="常规属性",e=this.commonAttrKeys,i=this.commonAttrKeyNames):1==this.tab.selectedIndex&&(this.txtTitle.text="元素属性",e=this.spcAttrKeys,i=this.spcAttrKeyNames);for(var s=!1,n=0,o=0;o<e.length;o++){var a;for(var l in this["txt"+(n=o+1)].text=i[o],s=!1,this.attrs)if((a=this.attrs[l]).key==e[o]){this["input"+n].text=a.val,s=!0;break}0==s&&(this["input"+n].text="0")}},i.onChangeGodEquipL=function(){0==this.curIndex?this.curIndex=9:this.curIndex--,this.update()},i.onChangeGodEquipR=function(){9==this.curIndex?this.curIndex=0:this.curIndex++,this.update()},e}(),$E=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.godEquip.view.ExerGodEquipBagStoneItem",t);var i=e.prototype;return i.update=function(){if(this._data){var t=ur.getItem(this._data.typeid);t&&(this.imgIcon.skin=t.realMaxico,this.txtName.text=t.name,this.txtName.color=U.getColorDark(t.color),this.imgBg.skin="com/ui/goodsBg"+t.color+".png"),this.txtNum.text=this._data.current_num+""}else this.imgIcon.skin=null,this.txtName.text=""},i.showNum=function(t){this.txtNum.visible=t},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data}),e}(Lf),ZE=function(t){function e(){this._data=null,e.__super.call(this),this.txtNum.visible=!1}w(e,"modules.exercise.godEquip.view.ExerGodEquipExcStoneItem",t);var i=e.prototype;return i.update=function(){this._data?(this.imgBg.skin="com/ui/goodsBg"+this._data.color+".png",this.imgIcon.skin=this._data.realMaxico,this.txtName.text=this._data.name,this.txtName.color=U.getColorDark(this._data.color)):(this.imgBg.skin="com/ui/itemAddBg.png",this.imgIcon.skin=null,this.txtName.text="")},I(0,i,"data",function(){return this._data}),I(0,i,"uiClass",function(){return"ExerGodEquipBagStoneItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(Lf),JE=function(t){function e(){this.SOURCE_NEED_NUM=4,this.ROW_SHOW_NUM=5,this.itemPos=[{x:135,y:50},{x:480,y:50},{x:135,y:240},{x:480,y:240}],this.targetItem=null,this.sourceItems=null,this.bagItems=null,this.sourceDatas=null,this.targetStoneVO=null,this.sourceBagPGoods=null,this.bagStones=null,this.exchangeNum=0,this.exchangeScheme=0,this.exchangeIng=!1,this.effSucc=null,this.exchangeBack=!1,this.exchangeBatchBack=!1,this.buyBack=!1,this.targetBagItemTypeId=NaN,this.flyNum=0,this.flyGoodsItems=null,this.flyIngs=null,e.__super.call(this),this.bagItems=[],this.sourceDatas=[],this.initItems(),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}w(e,"modules.exercise.godEquip.view.ExerGodEquipExchangeView",Df);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){var e;switch(t.target){case this.btnOne:if(this.exchangeIng)return void Jt.addTip("正在一键合成，请稍候");this.sourceDatas&&0==this.sourceDatas.length?Jt.addTip("请先放入需合成的灵石"):this.sourceDatas&&this.sourceDatas.length<this.SOURCE_NEED_NUM?Jt.addTip("炉内灵石不足4颗，无法合成"):pe.silver<1e4?ba.show(10201113):this.sourceDatas&&this.targetStoneVO&&(e=_n.getGodEquipStoneVO(this.targetStoneVO.id))&&this.sourceDatas.length==this.SOURCE_NEED_NUM&&(Tr.ins().toExchange(14,e.scheme,1),pt.send(40,10,"灵石-合成按钮"));break;case this.btnOneKey:"一键合成"==this.btnOneKey.label?this.sourceDatas&&0==this.sourceDatas.length?Jt.addTip("请先放入需合成的灵石"):this.sourceDatas&&this.sourceDatas.length<this.SOURCE_NEED_NUM?Jt.addTip("炉内灵石不足4颗，无法合成"):pe.silver<1e4?ba.show(10201113):this.sourceDatas&&this.sourceBagPGoods&&this.targetStoneVO&&(this.exchangeNum=Math.floor(this.sourceBagPGoods.current_num/this.SOURCE_NEED_NUM),this.flyNum=this.exchangeNum,(e=_n.getGodEquipStoneVO(this.targetStoneVO.id))&&0<this.exchangeNum&&(this.exchangeScheme=e.scheme,this.doExchange(),this.exchangeIng=!0,this.btnOneKey.label="停止",pt.send(40,11,"灵石-一键合成按钮"))):"停止"==this.btnOneKey.label&&(this.exchangeIng=!1,this.btnOneKey.label="一键合成")}},i.doExchange=function(){0<this.exchangeNum?Tr.ins().toExchange(15,this.exchangeScheme,1):(this.exchangeIng=!1,this.btnOneKey.label="一键合成")},i.showSucc=function(t){this.effSucc||(this.effSucc=this.effSucc||b.getOne(),this.effSucc.pos(353,235),this.addChild(this.effSucc),2==t?this.effSucc.setEndHandler(Q.create(this,this.effEnd)):1==t&&this.effSucc.setEndHandler(Q.create(this,this.goodsFly))),this.effSucc.loadAndPlay("moduleEffect/lightSplit")},i.effEnd=function(){this.exchangeIng&&(this.doExchange(),this.goodsFly())},i.initItems=function(){var t;this.targetItem=new tR,this.targetItem.pos(300,135,!0),this.targetItem.on("click",this,this.onClickTargetItem),this.addChild(this.targetItem),this.sourceItems=[];for(var e=0;e<this.SOURCE_NEED_NUM;e++)t=new ZE,this.sourceItems.push(t),t.pos(this.itemPos[e].x,this.itemPos[e].y,!0),this.addChild(t),t.on("click",this,this.onClickSourceItem)},i.onClickTargetItem=function(t){if(this.targetItem.data){var e="";e=ur.isEquip(this.targetItem.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(this.targetItem.data,e)}else Jt.addTip("请点击背包中的灵石放入炉内")},i.onClickSourceItem=function(t){var e=t.target;if(e&&null==e.data)if(this.sourceDatas&&0<this.sourceDatas.length){var i=this.sourceDatas[0],s=_n.getGodEquipStoneVO(i.id);s&&s.level<=6?SF.ins.show(i.id,2,0,10001,null,null,4-this.sourceDatas.length):Jt.addTip("灵石不足，请先购买")}else Jt.addTip("请点击背包中的灵石放入炉内");else if(e&&e.data){var n="";n=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,n)}},i.resetItems=function(){for(var t=0;t<this.sourceItems.length;t++)this.sourceItems[t].dataSource=null;this.sourceDatas=[],this.txtCost1.text="0/次",this.txtCost2.text="0",this.txtSchedule.text="合成进度：0/4"},i.resetTargetStone=function(){this.targetItem&&(this.targetStoneVO=null,this.targetItem.dataSource=this.targetStoneVO)},i.onAdd=function(t){this.resetItems(),this.resetTargetStone(),T.register("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),T.register("ROLE_EXCHANGE_BACK_FAIL",this,this.onExchangeFail),T.register("BAGDATA_CHANGE",this,this.onBagdateChange)},i.onRemove=function(t){T.remove("ROLE_EXCHANGE_BACK_SUCC",this,this.onExchangeBack),T.remove("BAGDATA_CHANGE",this,this.onBagdateChange),this.removeFlyItems(),this.onExchangeFail(),this.resetBagSelected(),this.removeFlyItems(),this.targetBagItemTypeId=0},i.onExchangeFail=function(){this.exchangeIng=!1,this.exchangeNum=0,this.btnOneKey.label="一键合成"},i.onExchangeBack=function(t){switch(t.module_id){case 14:this.exchangeBack=!0,this.showSucc(1);break;case 15:this.exchangeBatchBack=!0,this.exchangeNum--,this.showSucc(2);break;case 1:this.buyBack=!0}},i.onBagdateChange=function(){var t;if(this.update(),(1==this.exchangeBack||1==this.exchangeBatchBack||1==this.buyBack)&&0<this.sourceDatas.length){this.updateBagInfo();var e=this.sourceDatas[0];if(e)if(t=this.getBagStoneData(e.id,this.bagStones)){this.sourceDatas.length=0,this.txtSchedule.text="合成进度："+t.current_num+"/4";for(var i,s=t.current_num>=this.SOURCE_NEED_NUM?this.SOURCE_NEED_NUM:t.current_num,n=0;n<s;n++)(i=ur.getItem(t.typeid)).tempNum=1,this.sourceDatas.push(i);t.id==this.sourceBagPGoods.id&&(this.sourceBagPGoods=t),this.updateSourceInfo()}else this.resetItems();this.exchangeBack=!1,this.exchangeBatchBack=!1,this.buyBack=!1}},i.getBagStoneData=function(t,e){var i;for(var s in e)if((i=e[s]).typeid==t)return i;return null},i.update=function(){this.updateSourceInfo(),this.updateBagInfo(),this.sourceDatas&&0==this.sourceDatas.length?(this.txtCost1.text="0/次",this.txtCost2.text="0"):(this.txtCost1.text=1e4+"/次",this.txtCost2.text=1e4+"",this.sourceBagPGoods&&(this.txtSchedule.text="合成进度："+this.sourceBagPGoods.current_num+"/4"))},i.updateSourceInfo=function(){for(var t,e,i=0;i<this.sourceItems.length;i++)t=this.sourceItems[i],e=this.sourceDatas[i],t.dataSource=e;if(e=this.sourceDatas[0]){var s=_n.getGodEquipStoneVO(e.id);if(s){var n=_n.getGodEquipStoneVOByIdAndLv(s.id,s.level+1);n&&(this.targetStoneVO=ur.getItem(n.id),this.targetItem.dataSource=this.targetStoneVO)}}},i.resetBagSelected=function(){for(var t in this.bagItems)this.bagItems[t].imgSelected.visible=!1},i.updateBagInfo=function(){var t;this.list.removeChildren(),this.bagStones=_n.getAllPackStones();for(var e=0,i=0,s=0;s<this.bagStones.length;s++)this.bagItems[s]=this.bagItems[s]||new $E,null==(t=this.bagItems[s]).parent&&this.list.addChild(t),t.dataSource=this.bagStones[s],e=Math.floor(s/this.ROW_SHOW_NUM),i=s%this.ROW_SHOW_NUM,t.pos(140*i+5,150*e+5,!0),t.on("click",this,this.onClickBagItem),ft.ins().register(t,this,500,this.onLongClickBagItem,[t],this.onClickBagItem,[t]),t.data.typeid==this.targetBagItemTypeId?t.imgSelected.visible=!0:t.imgSelected.visible=!1},i.onLongClickBagItem=function(t){if(t){var e="";e=ur.isEquip(t.data.typeid)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP";var i=ur.getItem(t.data.typeid);i&&(i.tempNum=t.data.current_num,Ae.show(i,e))}},i.onClickBagItem=function(t){if(this.exchangeIng)Jt.addTip("正在合成中，请先停止");else{var e,i=t.target,s=0;if(i)if(this.sourceBagPGoods=i.data,this.sourceBagPGoods){var n=_n.getGodEquipStoneVO(this.sourceBagPGoods.typeid);if(n)if(9==n.level)Jt.addTip("九级灵石已是最高级灵石，无法合成");else{this.resetBagSelected(),this.targetBagItemTypeId=i.data.typeid,i.imgSelected.visible=!0,this.sourceDatas.length=0,s=this.sourceBagPGoods.current_num>=this.SOURCE_NEED_NUM?this.SOURCE_NEED_NUM:this.sourceBagPGoods.current_num;for(var o=0;o<s;o++)(e=ur.getItem(this.sourceBagPGoods.typeid)).tempNum=1,this.sourceDatas.push(e);this.txtSchedule.text="合成进度："+this.sourceBagPGoods.current_num+"/4",this.txtCost1.text=1e4+"/次",this.txtCost2.text=1e4+""}}this.updateSourceInfo()}},i.goodsFly=function(){var t;this.flyGoodsItems=this.flyGoodsItems||[],this.flyIngs=this.flyIngs||[],this.targetStoneVO&&((t=0<this.flyGoodsItems.length?this.flyGoodsItems.pop():new Ah).pos(300,135),t.dataSource=this.targetStoneVO,this.addChild(t),this.flyIngs.push(t),ie.to(t,{x:305,y:685,scaleX:.5,scaleY:.5},1e3,A.quadOut,Q.create(this,this.onComplete,[t])))},i.onComplete=function(t){if(t){if(this.flyIngs)for(var e=0;e<this.flyIngs.length;e++)this.flyIngs[e]==t&&this.flyIngs.splice(e,1);t.removeSelf(),t.dataSource=null,this.flyGoodsItems.push(t)}this.sourceDatas[0];this.sourceDatas&&0==this.sourceDatas.length&&this.resetTargetStone()},i.removeFlyItems=function(){if(this.flyIngs)for(var t,e=0;e<this.flyIngs.length;e++)(t=this.flyIngs[e]).removeSelf(),ie.clearAll(t)},e}(),tR=function(t){function e(){this._data=null,e.__super.call(this),this.txtNum.visible=!1,this.imgBg.pos(0,0,!0),this.imgBg.size(105,105),this.imgIcon.pos(0,0,!0),this.imgIcon.size(105,105),this.txtName.pos(-25,110)}w(e,"modules.exercise.godEquip.view.ExerGodEquipExcTarStoneItem",t);var i=e.prototype;return i.update=function(){this._data?(this.imgIcon.skin=this._data.realMaxico,this.txtName.text=this._data.name):(this.imgIcon.skin=null,this.txtName.text="")},I(0,i,"data",function(){return this._data}),I(0,i,"uiClass",function(){return"ExerGodEquipBagStoneItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(Lf),eR=function(t){function e(){this._data=null,this.goods=null,e.__super.call(this),this.goods=new Ah(90,100,!1,!0,!0,!0,120),this.goods.pos(30,30),this.addChild(this.goods),this.btnInlay.on("click",this,this.onClick)}w(e,"modules.exercise.godEquip.view.ExerGodEquipInlayItem",t);var i=e.prototype;return i.onClick=function(){if("镶嵌"==this.btnInlay.label)xl.ins().toStone(1,_n.curGodEquipVO.id,this._data.id,_n.curStonePart),pt.send(40,5,"灵石-镶嵌");else if("购买并镶嵌"==this.btnInlay.label){var t=ur.getItem(this._data.id);if(t&&pe.gold>=parseInt(t.priceDic[2])){var e=Z.span("是否花费","#5d3924")+Z.span(t.priceDic[2]+"元宝","#F7EF5F")+Z.span("购买1个","#5d3924")+Z.span("【"+t.name+"】？",U.getColorLight(t.color));Lo.showSecAlert(e,this,this.toExchange,null,"ExerGodEquipStoneInlayBuy")}else Lo.showAlert()}},i.toExchange=function(){Tr.ins().toExchange(12,this._data.id,1),pt.send(40,6,"灵石-购买并镶嵌")},i.update=function(){var t=xo.getGoodsByTypeID(this._data.id);if(t)this.goods.goods=t,this.btnInlay.label="镶嵌",this.spCost.visible=!1;else{var e=ur.getItem(this._data.id);this.goods.dataSource=e,this.btnInlay.label="购买并镶嵌",this.spCost.visible=!0,this.txtCost.text=e.priceDic[2]+""}var i,s="";for(var n in this._data.attrList)60!=(i=this._data.attrList[n]).key&&(s+=W.getName(i.key)+k.getEmpty(1)+"+"+i.val+"\n");this.txtAttr.text=s},I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Nf),iR=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.godEquip.view.ExerGodEquipItem",t);var i=e.prototype;return I(0,i,"select",null,function(t){this.imgSelect.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"uiClass",function(){return"ExerGodequipItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this.data){var e=ur.getItem(this.data.id);e&&(this.bg.skin="modules/exercise/itemBg"+e.color+".png");var i=gn.checkOneNeedRP(this.data),s=_n.checkEquipStoneRP(this.data.id);0==_n.curViewTabIndex&&i||1==_n.curViewTabIndex&&s?this.imgRP.visible=!0:this.imgRP.visible=!1,this.img.skin=this.data.url;var n=_n.getStep(this.data.id);this.txt.text=0==n?"未激活":n+"阶",this.txt.color=0==n?"#5d3924":"#f9eda1"}}),e}(Vf),sR=function(t){function e(){this._data=null,e.__super.call(this),this.txtNum.visible=!1}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneUpBagItem",t);var i=e.prototype;return i.update=function(){this._data?(this.imgBg.skin="com/ui/goodsBg"+this._data.color+".png",this.imgIcon.skin=this._data.realMaxico,this.txtName.text=this._data.name,this.txtName.color=U.getColorDark(this._data.color)):(this.imgBg.skin="com/ui/itemAddBg.png",this.imgIcon.skin=null,this.txtName.text="")},I(0,i,"data",function(){return this._data}),I(0,i,"uiClass",function(){return"ExerGodEquipBagStoneItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(Lf),nR=function(t){function e(){this.repeatX=4,this.curIndex=0,this.curSelectItem=null,this.godEquips=null,this.completeHanlder=null,this.clip=null,this.attrs=null,this.handUp=null,this.handDown=null,this.curEvo=null,this.needMaterial=null,this.way=null,e.__super.call(this),this.completeHanlder=Q.create(this,this.updateBtnVisible),this.list.itemRender=iR,this.list.hScrollBarSkin="",this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelected),this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.repeatX=this.repeatX,this.list.on("change",this,this.updateBtnVisible),this.clip=b.getOne(),this.clip.pos(360,245),this.addChild(this.clip),this.addChild(this.txtSpc),this.txtLink.on("link",this,this.onLink),this.handUp=Q.create(this,this.moveDown),this.handDown=Q.create(this,this.moveUp),this.on("click",this,this.onClick),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}w(e,"modules.exercise.godEquip.view.ExerGodEquipMainView",Bf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.getStonePower=function(t){this.attrs=_n.getGodEquipAttrByIndex(t);for(var e=0,i=0;i<this.attrs.length;i++)e+=W.getAttrPower(parseInt(this.attrs[i].key),parseInt(this.attrs[i].val));return Math.floor(e)},i.onAdd=function(t){this.godEquips=_n.getAllGodEquip(),this.list.dataSource=this.godEquips,this.list.selectedIndex=0,this.list.scrollTo(0),this.checkRPInItem(),this.clip.pos(360,245),this.moveUp()},i.moveUp=function(){ie.to(this.clip,{y:this.clip.y+10,complete:this.handUp},700)},i.moveDown=function(){ie.to(this.clip,{y:this.clip.y-10,complete:this.handDown},700)},i.onRemove=function(t){ie.clearAll(this.clip)},i.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.btnUp:"激活"==this.btnUp.label?xl.ins().toLoad(this.curEvo.id):"进阶"==this.btnUp.label&&xl.ins().toUpgrade(this.curEvo.id)}},i.update=function(){this.list.refresh(),this.updateInfoPart(),this.checkRPInBtn()},i.checkRPInItem=function(){if(this.godEquips){var t;if(0<_n.curGodEquipID)for(var e=0;e<this.godEquips.length;e++)if((t=this.godEquips[e])&&t.id==_n.curGodEquipID)return this.list.selectedIndex=e,this.list.scrollTo(e),void(_n.curGodEquipID=0);if((t=this.godEquips[this.list.selectedIndex])&&gn.checkOneNeedRP(t))return;for(var i=0;i<this.godEquips.length;i++)if(t&&gn.checkActRP(t)&&this.list.selectedIndex!=e)return this.list.selectedIndex=i,void this.list.scrollTo(i)}},i.checkRPInBtn=function(){this.godEquips&&this.godEquips[this.curIndex]&&gn.checkOneNeedRP(this.godEquips[this.curIndex])?this.imgRP.visible=!0:this.imgRP.visible=!1},i.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPow.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPow.graphics.drawTexture(e,e.width*s)},i.updateInfoPart=function(){if(this.curEvo=_n.getGodEquipVOByIndex(this.curIndex),this.curEvo){this.txtName.text=this.curEvo.name,this.txtSpc.text=this.curEvo.spcEff,this.clip.loadAndPlay(this.curEvo.effUrl,"default",0,!0),this.way=W.parseAttrToArr(this.curEvo.way,",","|"),this.way&&(null!=this.way[0][1]?this.txtLink.innerHTML=Z.linkcolor(this.way[0][0],this.way[0][1]):this.txtLink.innerHTML=Z.span(this.way[0][0],"#ecd4c3",26));var t=_n.getStep(this.curEvo.id),e=_n.getMaxStep(this.curEvo.id);if(0<t){if(this.spWay.visible=!1,this.spNeed.y=774,this.btnUp.y=776,this.spAttr1.x=122,this.spAttr2.visible=!0,this.imgArrow.visible=!0,this.txtAttr1.text=gn.getAttrStr(this.curEvo.addAttr,t),this.updatePower((gn.getAttrPower(this.curEvo.addAttr,t,this.curEvo.spcPower)+this.getStonePower(this.curIndex))*pe.user.pals.length),this.needMaterial=W.parseAttrToArr(this.curEvo.need,",","|"),this.needMaterial){var i=ur.getItem(this.needMaterial[0][0]);i&&(this.txtNeed.text="消耗："+i.name);var s=xo.getGoodsNumByType(xo.GOODS_ID,this.needMaterial[0][0]);this.txtNum.text="/"+this.needMaterial[0][1],this.txtHas.text=s+"",this.txtHas.color=s>=this.needMaterial[0][1]?"#ffffff":"#b60202"}e<=t?(this.btnUp.label=this.txtAttr2.text="已满级",this.btnEnable=!1):(this.btnEnable=!0,this.btnUp.label="进阶",this.txtAttr2.text=gn.getAttrStr(this.curEvo.addAttr,t+1))}else this.updatePower(gn.getAttrPower(this.curEvo.addAttr,1,this.curEvo.spcPower)*pe.user.pals.length),this.btnEnable=!0,this.btnUp.label="激活",this.btnUp.y=745,this.spWay.visible=!0,this.spNeed.y=744,this.imgArrow.visible=!1,this.spAttr2.visible=!1,this.spAttr1.x=246,this.txtNeed.text="消耗："+this.curEvo.name,s=xo.getGoodsNumByType(xo.GOODS_ID,this.curEvo.id),this.txtHas.text=s+"",this.txtHas.color=1<=s?"#ffffff":"#b60202",this.txtNum.text="/1",this.txtAttr1.text=gn.getAttrStr(this.curEvo.addAttr,1);this.txtAttr1.x=(this.curTitle.width-this.txtAttr1.textWidth)/2,this.txtAttr2.x=(this.nextTitle.width-this.txtAttr2.textWidth)/2}},i.updateBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},i.turnLeft=function(){var t=this.list.startIndex-this.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},i.turnRight=function(){if(this.godEquips){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)}},i.onLink=function(t){var e=t.replace("event:","");me.linkTo(parseInt(e))},i.onSelected=function(t){this.curIndex=t,this.checkRPInBtn(),this.update()},i.onRenderItem=function(t,e){t&&(e==this.curIndex?t.select=!0:t.select=!1)},I(0,i,"btnEnable",null,function(t){this.btnUp.mouseEnabled=t,this.btnUp.gray=!t}),I(0,i,"endFirstIndex",function(){return this.godEquips?this.godEquips.length-this.repeatX:0}),e}(),oR=function(t){function e(){this._type=0,this._data=null,this._selected=!1,e.__super.call(this)}w(e,"modules.exercise.godEquip.view.ExerGodEquipPartItem",t);var i=e.prototype;return i.update=function(){var t=_n.getEquipData(_n.curGodEquipVO.id);if(t&&0<this.type){var e=_n.checkEquipStonePartRP(this.type,t);this.imgRP.visible=0!=e}else this.imgRP.visible=!1;if(this._data){var i=ur.getItem(this._data.val);i&&(this.imgIcon.skin=i.realMaxico);var s=_n.getGodEquipStoneVO(this._data.val);s&&(this.imgBg.skin=_n.getStoneBgUrl(s.level))}else{this.imgIcon.skin=null;var n=0;n=9999==this.type?Math.floor(_n.curGodEquipVO.conditionList[_n.curStonePart-1]):Math.floor(_n.curGodEquipVO.conditionList[this.type-1]),t&&t.level>=n?this.imgBg.skin="modules/exercise/stoneBgAdd.png":this.imgBg.skin="modules/exercise/stoneBgLock.png"}},I(0,i,"type",function(){return this._type},function(t){this._type=t}),I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"selected",function(){return this._selected},function(t){this._selected=t,this.imgSelected.visible=!!t}),e}(Mf),aR=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneDisassemblePanel",Ff);var i=e.prototype;return i.initMsg=function(){var t=_n.getEquipStoneDataByEquipIdAndPart(_n.curGodEquipVO.id,_n.curStonePart),e=_n.getGodEquipStoneVO(t.val),i=_n.curGodEquipVO.name,s=_n.getGodEquipStoneDisaPriceVO(e.level),n=s.prices.toString(),o=Z.span("是否将","#5d3924")+Z.span(e.name,"#F7EF5F")+Z.span("从","#5d3924")+Z.span(i,"#F7EF5F")+Z.span("上进行拆卸","#5d3924");this.txtMsg.innerHTML=o,1e4<s.prices&&(n=s.prices/1e4+"万");var a=Z.span("· 拆卸费用：","#5d3924")+Z.span(n,"#ffffff")+Z.span("铜钱","#5d3924");this.txtPrice.innerHTML=a},i.onClick=function(t){var e=_n.getEquipStoneDataByEquipIdAndPart(_n.curGodEquipVO.id,_n.curStonePart),i=_n.getGodEquipStoneVO(e.val),s=_n.getGodEquipStoneDisaPriceVO(i.level);switch(t.target){case this.btnClose:case this.btnNo:this.closeWindow();break;case this.btnYes:pe.checkMoney(0,s.prices)?(xl.ins().toStone(2,_n.curGodEquipVO.id,i.id,_n.curStonePart),Jt.addTip(i.name+"拆卸成功")):(ba.show(10201113),this.closeWindow())}},i.updata=function(){this.initMsg()},e}(),lR=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=eR,this.list.scrollBar.autoHide=!0,this.radioGroup.selectHandler=new Q(this,this.onSelectChange),this.on("click",this,this.onClick),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneInlayPanel",Uf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.txtLink:me.linkTo(11400)}},i.onAdd=function(t){this.radioGroup.selectedIndex=2},i.onRemove=function(t){},i.onSelectChange=function(t){this.update()},i.update=function(){var t=[];switch(this.radioGroup.selectedIndex){case 0:t=_n.getInlayStones(_n.curGodEquipVO.id,4);break;case 1:t=_n.getInlayStones(_n.curGodEquipVO.id,5);break;case 2:t=_n.getInlayStones(_n.curGodEquipVO.id,6)}this.list.dataSource=t},e}(),rR=function(t){function e(){this.items=null,this.rowNum=4,this.targetStoneVO=null,this.effSucc=null,e.__super.call(this),this.items=[],this.list.vScrollBar.autoHide=!0,this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneReplacePanel",Gf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnReplace:this.targetStoneVO?(xl.ins().toStone(1,_n.curGodEquipVO.id,this.targetStoneVO.id,_n.curStonePart,1),pt.send(40,8,"灵石-替换按钮")):Jt.addTip("请选择替换目标");break;case this.btnClose:case this.btnClose2:this.closeWindow()}},i.showSucc=function(){this.effSucc||(this.effSucc=this.effSucc||b.getOne(),this.effSucc.pos(375,795),this.addChild(this.effSucc)),this.effSucc.loadAndPlay("moduleEffect/god_equip_stone_replace_succ")},i.update=function(){if(this.list.removeChildren(),this.targetStoneVO=null,this.btnReplace.disabled=!1,this.btnReplace.label="替换",_n.curStoneData){var t=_n.getGodEquipStoneVO(_n.curStoneData.val);if(t){var e,i="";for(var s in t.attrList)60!=(e=t.attrList[s]).key&&(i+=W.getName(e.key)+k.getEmpty(1)+"+"+e.val+"\n");this.txtSourceAttr.text=i;var n=ur.getItem(t.id);if(n?(this.txtSourceName.color=U.getColorDark(n.color),this.txtSourceName.text=n.name,this.imgSource.skin=n.realMaxico):(this.txtSourceName.text="",this.imgSource.skin=null),9!=t.level){var o,a=_n.getReplaceStones(t.id,t.level);a=a.sort(_n.sortStones);for(var l,r,h,u=0,c=0,d=0;d<a.length;d++)this.items[d]=this.items[d]||new $E,null==(o=this.items[d]).parent&&this.list.addChild(o),o.imgSelected.visible=!1,o.on("click",this,this.onClickItem),r=a[d],o.dataSource=r,(l=_n.getGodEquipStoneVO(r.typeid))&&(null==this.targetStoneVO||this.targetStoneVO&&this.targetStoneVO.level<l.level)&&(this.targetStoneVO=l,h=o),u=Math.floor(d/this.rowNum),c=d%this.rowNum,o.pos(25+170*c,150*u+5,!0);this.updateTarget(),h&&(h.imgSelected.visible=!0)}else this.btnReplace.disabled=!0,this.btnReplace.label="已满级",this.targetStoneVO=null,this.txtTargetName.text="",this.imgTarget.skin=null}}},i.updateTarget=function(){if(this.targetStoneVO){var t,e="";for(var i in this.targetStoneVO.attrList)60!=(t=this.targetStoneVO.attrList[i]).key&&(e+=W.getName(t.key)+k.getEmpty(1)+"+"+t.val+"\n");this.txtTargetAttr.text=e;var s=ur.getItem(this.targetStoneVO.id);s?(this.txtTargetName.color=U.getColorDark(s.color),this.txtTargetName.text=s.name,this.imgTarget.skin=s.realMaxico):(this.txtTargetName.text="",this.imgTarget.skin=null)}},i.onClickItem=function(t){for(var e,i=0;i<this.list.numChildren;i++)(e=this.list.getChildAt(i))&&(e.imgSelected.visible=!1);var s=t.target;s&&s.data&&(this.targetStoneVO=_n.getGodEquipStoneVO(s.data.typeid),this.updateTarget(),s.imgSelected.visible=!0)},e}(),hR=function(t){function e(){this.items=null,this.targetStoneVO=null,this.effSucc=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.initItems(),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneUpPanel",Hf);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnUp:if(this.targetStoneVO&&_n.curStoneData){var e=xo.getGoodsNumByTypeID(_n.curStoneData.val);pe.silver<1e4?ba.show(10201113):3<=e?(_n.curUpTarStoneVO=this.targetStoneVO,xl.ins().toStone(2,_n.curGodEquipVO.id,0,_n.curStonePart),pt.send(40,7,"灵石-升级按钮")):Jt.addTip("灵石不足，请先购买或合成")}break;case this.txtLink:me.linkTo(11400)}},i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.onBagdateChange),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.onBagdateChange)},i.onBagdateChange=function(){this.update()},i.initItems=function(){var t;this.items=[];for(var e=0;e<4;e++)t=new sR,(this.items[e]=t).dataSource=null,t.pos(75+160*e,440),this.addChild(t),t.on("click",this,this.onClickItem)},i.onClickItem=function(t){var e=t.target;if(e&&null==e.data){var i=_n.getGodEquipStoneVO(_n.curStoneData.val);if(i&&9==i.level)Jt.addTip("灵石等级已满，无法升级");else if(i&&i.level<=6){var s=this.getNeedNum();SF.ins.show(_n.curStoneData.val,2,0,10001,null,null,s)}else Jt.addTip("灵石不足，请先合成")}},i.showSucc=function(){this.effSucc||(this.effSucc=this.effSucc||b.getOne(),this.effSucc.pos(380,615),this.addChild(this.effSucc)),this.effSucc.loadAndPlay("moduleEffect/shengji_succ")},i.getNeedNum=function(){var t=0;for(var e in this.items)this.items[e].data&&(t+=1);return 4-t},i.resetItems=function(){for(var t in this.items)this.items[t].dataSource=null},i.update=function(){if(this.btnUp.disabled=!1,this.btnUp.label="升级",this.resetItems(),this.txtCost.text=1e4+"",_n.curStoneData){var t=_n.getGodEquipStoneVO(_n.curStoneData.val);if(t){var e,i="";for(var s in t.attrList)60!=(e=t.attrList[s]).key&&(i+=W.getName(e.key)+k.getEmpty(1)+"+"+e.val+"\n");this.txtSourceAttr.text=i;var n,o,a=ur.getItem(t.id);if(a?(this.txtSourceName.text=a.name,this.txtSourceName.color=U.getColorDark(a.color),this.imgSource.skin=a.realMaxico):(this.txtSourceName.text="",this.imgSource.skin=null),9==t.level){this.targetStoneVO=null,this.txtTargetName.text="",this.imgTarget.skin=null,this.btnUp.disabled=!0,this.btnUp.label="已满级",this.txtTargetAttr.text="";var l=ur.getItem(_n.curStoneData.val);l&&(l.tempNum=1,(o=this.items[0])&&(o.dataSource=l))}else{if(i="",this.targetStoneVO=_n.getGodEquipStoneVOByIdAndLv(t.id,t.level+1),this.targetStoneVO){var r;for(var h in this.targetStoneVO.attrList)60!=(r=this.targetStoneVO.attrList[h]).key&&(i+=W.getName(r.key)+k.getEmpty(1)+"+"+r.val+"\n");this.txtTargetAttr.text=i;var u=ur.getItem(this.targetStoneVO.id);u?(this.txtTargetName.color=U.getColorDark(u.color),this.txtTargetName.text=u.name,this.imgTarget.skin=u.realMaxico):(this.txtTargetName.text="",this.imgTarget.skin=null)}for(var c=_n.getUpStones(_n.curStoneData.val),d=0;d<this.items.length;d++)o=this.items[d],n=c[d],o.dataSource=n}}}},e}(),uR=function(t){function e(){this.repeatX=4,this.completeHanlder=null,this.stoneItems=null,this.godEquips=null,this.targetStoneItem=null,e.__super.call(this),this.completeHanlder=Q.create(this,this.updateBtnVisible),this.list.itemRender=iR,this.list.hScrollBarSkin="",this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onGodEquipSelected),this.list.renderHandler=Q.create(this,this.onRenderItem),this.list.repeatX=this.repeatX,this.list.on("change",this,this.updateBtnVisible),this.initStoneItems(),this.on("click",this,this.onClick),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)}w(e,"modules.exercise.godEquip.view.ExerGodEquipStoneView",Wf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onAdd=function(t){_n.curEquipIndex=0,this.godEquips=_n.getAllGodEquip(),this.list.dataSource=this.godEquips,this.list.selectedIndex=0,this.list.scrollTo(0),this.checkRPInItem(),_n.curStonePart=1,this.selectedPartItem()},i.onRemove=function(t){},i.initStoneItems=function(){var t;this.stoneItems=[];for(var e=0;e<8;e++)(t=new oR).on("click",this,this.onClickStoneItem),t.type=e+1,this.addChild(t),this.stoneItems.push(t);this.targetStoneItem=new oR,this.targetStoneItem.pos(108,570,!0),this.addChild(this.targetStoneItem)},i.onClickStoneItem=function(t){var e=t.target;e&&(_n.curStonePart=e.type,this.selectedPartItem(),this.updateStoneInfo(),_n.curStoneData=e.data)},i.selectedPartItem=function(){for(var t,e=0;e<this.stoneItems.length;e++)t=this.stoneItems[e],_n.curStonePart==t.type?t.selected=!0:t.selected=!1},i.updateStoneInfo=function(){if(_n.curGodEquipVO){this.txtEquipName.text=_n.curGodEquipVO.name;var t=_n.getEquipStoneDataByEquipIdAndPart(_n.curGodEquipVO.id,_n.curStonePart);if(this.targetStoneItem.dataSource=t,this.targetStoneItem.type=9999,null==(_n.curStoneData=t)){this.btnOperation.disabled=!1,this.btnDisa.visible=!1;var e=Math.floor(_n.curGodEquipVO.conditionList[_n.curStonePart-1]),i=_n.getEquipData(_n.curGodEquipVO.id);i&&i.level>=e?(this.btnOperation.label="镶嵌",this.txtDesc.text="点击前往镶嵌灵石"):(this.btnOperation.label="进阶神器",this.txtDesc.text="神器到达"+e+"阶后开启"),this.txtAttrs.text="",this.txtName.text="未镶嵌"}else if(t&&0<t.val){var s=_n.getGodEquipStoneVO(t.val);if(this.btnDisa.visible=!0,s){this.txtName.text=s.name;var n,o="";for(var a in s.attrList)60!=(n=s.attrList[a]).key&&(o+=W.getName(n.key)+k.getEmpty(1)+"+"+n.val+"\n");this.txtAttrs.text=o,this.txtDesc.text="",9==s.level?(this.btnOperation.disabled=!0,this.btnOperation.label="已满级"):(this.btnOperation.disabled=!1,_n.checkStoneHightLevelIsExist(s.id)?this.btnOperation.label="替换":this.btnOperation.label="升级")}}else t&&0==t.val&&(this.btnOperation.disabled=!1,this.txtDesc.text="点击前往镶嵌灵石",this.txtAttrs.text="",this.btnOperation.label="镶嵌",this.txtName.text="未镶嵌")}},i.onGodEquipSelected=function(t){_n.curEquipIndex=t,this.update()},i.onRenderItem=function(t,e){t&&(e==_n.curEquipIndex?t.select=!0:t.select=!1)},i.updateBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},i.checkRPInItem=function(){if(this.godEquips){var t=this.godEquips[this.list.selectedIndex];if(t&&gn.checkOneNeedRP(t))return;for(var e=0;e<this.godEquips.length;e++)if((t=this.godEquips[e])&&gn.checkOneNeedRP(t)&&this.list.selectedIndex!=e){this.list.selectedIndex=e,this.list.scrollTo(e);break}}},i.update=function(){if(this.list.refresh(),_n.curGodEquipVO=_n.getGodEquipVOByIndex(_n.curEquipIndex),null!=_n.curGodEquipVO){var t,e;this.imgBg.skin="modules/exercise/godEquipImg/godEquip"+(_n.curEquipIndex+1)+".png";for(var i=0;i<this.stoneItems.length;i++)t=this.stoneItems[i],e=_n.getEquipStoneDataByEquipIdAndPart(_n.curGodEquipVO.id,i+1),t.pos(_n.curGodEquipVO.stonePosList[i].x,_n.curGodEquipVO.stonePosList[i].y,!0),t.dataSource=e;this.updateStoneInfo()}},i.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.btnOperation:"进阶神器"==this.btnOperation.label?T.dispatch("EXER_GODEQUIP_CHANGE_TAB",0):"镶嵌"==this.btnOperation.label?(xl.ins().openStoneInlayPanel(),pt.send(40,2,"灵石-镶嵌入口")):"升级"==this.btnOperation.label?(xl.ins().openStoneUpPanel(),pt.send(40,3,"灵石-升级入口")):"替换"==this.btnOperation.label&&(xl.ins().openStoneReplacePanel(),pt.send(40,4,"灵石-替换入口"));break;case this.btnDisa:xl.ins().openStoneDisaPanel();break;case this.txtAttrView:xl.ins().openGodEquipAttrView()}},i.turnLeft=function(){var t=this.list.startIndex-this.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},i.turnRight=function(){if(this.godEquips){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)}},I(0,i,"endFirstIndex",function(){return this.godEquips?this.godEquips.length-this.repeatX:0}),e}(),cR=function(t){function e(){this.curView=null,this.mainView=null,this.stoneView=null,this.exchageView=null,e.__super.call(this),this.tab.on("change",this,this.onChange),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove),T.register("EXER_GODEQUIP_CHANGE_TAB",this,this.changeTab),Nt.register("RP_EXERCISE_GODEQUIP",this.tab.getChildAt(0),new Tt(19,-10)),Nt.register("RP_EXERCISE_GODEQUIP_STONE",this.tab.getChildAt(1),new Tt(19,-10))}w(e,"modules.exercise.godEquip.view.ExerGodEquipView",qf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.changeTab=function(t){this.tab.selectedIndex=0,_n.curViewTabIndex=0},i.onAdd=function(t){this.tab.selectedIndex=0,_n.curViewTabIndex=0},i.onRemove=function(t){},i.onChange=function(){switch(this.spView.removeChildren(),_n.curViewTabIndex=this.tab.selectedIndex,this.tab.selectedIndex){case 0:this.mainView=this.mainView||new nR,this.curView=this.mainView,this.spView.addChild(this.mainView);break;case 1:this.stoneView=this.stoneView||new uR,this.curView=this.stoneView,this.spView.addChild(this.stoneView),pt.send(40,1,"灵石入口");break;case 2:this.exchageView=this.exchageView||new JE,this.curView=this.exchageView,this.spView.addChild(this.exchageView),pt.send(40,9,"灵石-合成入口")}this.curView&&this.curView.update()},i.update=function(){this.curView&&this.curView.update()},i.checkRPInItem=function(){this.curView&&this.curView==this.mainView&&this.mainView.checkRPInItem()},I(0,i,"uiClass",function(){return"ExerGodequipView"}),e}(),dR=function(t){function e(){this.curLv=0,this.curIndex=0,this.curStep=0,this.curViewTpye=0,this.curTypeVO=null,this.tip=null,this.lightPointEff=null,this.fullEff=null,e.__super.call(this),this.tip=new pR,this.addChild(this.tip)}w(e,"modules.exercise.meridian.view.MeridianItemView",Yf);var i=e.prototype;return i.showPointEff=function(t){void 0===t&&(t=-1);var e=this["imgPoint"+(0<=t?t:this.curIndex)];this.lightPointEff=this.lightPointEff||b.getOne(),this.lightPointEff.pos(e.x+20,e.y+20),this.addChild(this.lightPointEff),this.lightPointEff.loadAndPlay("moduleEffect/meridianLight","default",0,!1)},i.showNextPageEff=function(t){this.fullEff||(this.fullEff=this.fullEff||b.getOne(),this.fullEff.setEndHandler(t),this.addChild(this.fullEff)),this.curTypeVO&&this.fullEff.pos(this.curTypeVO.nextEffPosArr[0],this.curTypeVO.nextEffPosArr[1]),this.fullEff.loadAndPlay("moduleEffect/meridianFull_"+this.curViewTpye,"default",0,!1)},I(0,i,"lv",null,function(t){if(this.curLv=t,this.curIndex=In.getCurLightIndexByLv(t),this.curStep=In.getStepByLv(t),this.curViewTpye=In.getTypeByStep(this.curStep),this.curTypeVO=vn.getTypeVO(this.curViewTpye),this.curTypeVO){var e;this.bg.skin="modules/meridian/bg_"+this.curViewTpye+".png",this.bg.pos(this.curTypeVO.bgPosArr[0],this.curTypeVO.bgPosArr[1]),this.imgPath.skin="modules/meridian/path_"+this.curViewTpye+".png",this.imgPath.pos(this.curTypeVO.pathPosArr[0],this.curTypeVO.pathPosArr[1]);for(var i=0;i<vn.maxPoint-1;i++)(e=this["imgLine"+i])&&(e.pos(this.curTypeVO.linePosArr[i][0],this.curTypeVO.linePosArr[i][1]),e.skin="modules/meridian/line_"+this.curViewTpye+"_"+i+".png",i>this.curIndex-1?e.visible=!1:e.visible=!0);for(i=0;i<vn.maxPoint;i++)(e=this["imgPoint"+i])&&(e.pos(this.curTypeVO.pointPosArr[i][0],this.curTypeVO.pointPosArr[i][1]),i>this.curIndex?e.skin="modules/meridian/point_0.png":e.skin="modules/meridian/point_1.png");this.tip.data=this.curLv+1}}),e}(),pR=function(t){function e(){this.curLv=0,this.curIndex=0,this.curStep=0,this.curViewTpye=0,this.curTypeVO=null,this.curPointVO=null,this.nextEff=null,e.__super.call(this),this.html0.style.align="center",this.html1.style.align="center",this.nextEff=b.getOne(),this.nextEff.visible=!1,this.nextEff.pos(100,170),this.addChild(this.nextEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.exercise.meridian.view.MeridianPointTip",Xf);var i=e.prototype;return i.onUndisplay=function(){this.nextEff&&this.nextEff.stop()},I(0,i,"data",null,function(t){if(this.curLv=t,this.curIndex=In.getCurLightIndexByLv(this.curLv),this.curStep=In.getStepByLv(this.curLv),this.curViewTpye=In.getTypeByStep(this.curStep),this.curTypeVO=vn.getTypeVO(this.curViewTpye),this.curPointVO=vn.getPointVO(this.curIndex),this.nextEff.visible=!1,this.curTypeVO&&this.curPointVO){0==this.curIndex&&0!=this.curLv?(this.nextEff.loadAndPlay("moduleEffect/meridianNextArrow","default",0,!0),this.nextEff.visible=!0,this.txtNext.text="升级切换经脉图",this.pos(505,160)):(this.pos(this.curTypeVO.nextTipPosArr[this.curIndex][0],this.curTypeVO.nextTipPosArr[this.curIndex][1]),this.txtNext.text="下一等级LV."+this.curLv);var e=this.curPointVO.getStepAttrs(this.curStep);if(e)for(var i=0;i<e.length;i++)this["html"+i]&&(this["html"+i].innerHTML=Z.span(W.getName(e[i][0]),"#ffe0cf",24)+Z.span(" +"+e[i][1],"#96f254",24))}}),e}(),mR=function(t){function e(){this.list=null,this.itemL=null,this.itemR=null,this.bar=null,this.endHandler=null,this.isInEff=!1,this.getEff=null,e.__super.call(this),this.list=new ne(this.spItems.width,this.spItems.height,new Dt(0,0,this.spItems.width,this.spItems.height)),this.list.on("end",this,this.onListMoveEnd),this.spItems.addChild(this.list),this.itemL=new dR,this.list.addChild(this.itemL),this.itemR=new dR,this.itemR.pos(this.spItems.width,0),this.list.addChild(this.itemR),this.htmlNeed.style.align=this.htmlCur.style.align=this.html.style.align="center",this.html.innerHTML=Z.span("经脉副本后","#ffe0cf",20)+Z.span("每天可领","#fdc06a",20),this.bar=new it(538,613,140,20,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,12,5,12],[1,0,1,0],"#ffffff",16),this.addChild(this.bar),Nt.register("RP_MERIDIAN_REWARD",this.btnBox,new Tt(19,-10)),Nt.register("RP_MERIDIAN_UP",this.btn,new Tt(19,-10)),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.meridian.view.MeridianView",Kf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),T.register("MERIDIAN_UPGRADE",this,this.updateByUpgrade),T.register("MERIDIAN_GET",this,this.showGetEff)},i.onListMoveEnd=function(){this.isInEff=!1},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("MERIDIAN_UPGRADE",this,this.updateByUpgrade),T.remove("MERIDIAN_GET",this,this.showGetEff)},i.update=function(){this.updateAttr(),this.updateItems(),this.updateInfo(),this.updateBox()},i.updateBox=function(){vn.isGetReward?this.btnBox.skin="modules/meridian/box_open.png":this.btnBox.skin="modules/meridian/box_close.png",this.bar.setValue(Math.min(vn.curCopyTime,10),10)},i.updateAttr=function(){var t,e,i=vn.getAllAttrs(),s="",n=0;for(var o in vn.attrKeys)(t=i[e=vn.attrKeys[o]])?(n+=W.getAttrPower(t.id,t.val),s+=W.getName(t.id)+"："+t.val+"\n"):s+=W.getName(e)+"：0\n";pe.pals&&(n*=pe.pals.length),this.txtAttr.text=s,this.updatePower(n)},i.updateItems=function(){this.list.scrollToStart(),this.itemL.lv=Math.max(0,vn.curLv),this.itemR.lv=Math.max(0,vn.curLv+1)},i.updateByUpgrade=function(){var t=vn.curLv,e=In.getCurLightIndexByLv(t);1!=t&&0==e?(this.list.scrollToStart(),this.itemR.lv=vn.curLv,this.endHandler||(this.endHandler=Q.create(this,this.showNextComplete)),this.itemL.showNextPageEff(this.endHandler),this.isInEff=!0):(this.update(),this.itemL.showPointEff())},i.showNextComplete=function(){this.list.turnNext(),this.updateAttr(),this.updateInfo()},i.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPower.graphics.drawTexture(e,e.width*s)},i.updateInfo=function(){var t=pe.getScore(18),e=vn.getCostByLv(vn.curLv);this.htmlCur.innerHTML=Z.span("当前内力：","#5d3924",26)+Z.span(t+"",e<=t?"#e1c6bc":"#b60202",26),this.htmlNeed.innerHTML=Z.span("升级消耗：","#5d3924",26)+Z.span(e+"","#e1c6bc",26),this.txtLv.text="经脉等级Lv."+vn.curLv,vn.isMaxLv?(this.btn.label="已满级",this.btn.disabled=!0,this.htmlNeed.visible=!1):(this.btn.label="提升",this.btn.disabled=!1,this.htmlNeed.visible=!0)},i.onClick=function(t){switch(t.target){case this.btn:this.isInEff||Pl.ins().toUpgrade();break;case this.btnBox:Pl.ins().toReward();break;case this.txtLink:me.linkTo(16006,3)}},i.showGetEff=function(){this.getEff||(this.getEff=this.getEff||b.getOne(),this.getEff.pos(360,890),this.addChild(this.getEff)),this.getEff.loadAndPlay("moduleEffect/meridianGet","default",0,!1),Jt.addTip("领取3000内力")},e}(),fR=function(t){function e(){e.__super.call(this)}return w(e,"modules.exercise.pearl.view.ExerPearlIcon1",jf),e.prototype.update=function(t){this.txtLv.text="Lv."+t,bn.infoToc.level>=t?this.imgIcon.source=ut.getRes("modules/exercise/pearlIcon.png"):this.imgIcon.source=ut.getRes("modules/exercise/pearlIcon2.png")},e}(),_R=function(t){function e(){e.__super.call(this)}return w(e,"modules.exercise.pearl.view.ExerPearlIcon2",Qf),e.prototype.update=function(t){this.txtLv.text="Lv."+t,bn.infoToc.level>=t?this.imgIcon.source=ut.getRes("modules/exercise/pearlIcon.png"):this.imgIcon.source=ut.getRes("modules/exercise/pearlIcon2.png")},e}(),gR=function(t){function e(){e.__super.call(this)}w(e,"modules.exercise.pearl.view.ExerPearlMissionItem",zf);var i=e.prototype;return i.onClick=function(t){this.dataSource&&pt.send(22,3,"历练-仙珠-点击参与-"+this.dataSource.name),me.linkTo(this.dataSource.linkId)},i.update=function(){var t=this.dataSource,e=bn.getMissionById(t.id);this.txtName.text=t.name,this.txtNum.text=e?e.val+"/"+t.times:"0/"+t.times,this.txtReward.text=t.reward,e&&e.val==t.times?(this.txtLink.visible=!1,this.imgState.visible=!0):(this.txtLink.visible=!0,this.imgState.visible=!1,this.txtLink.on("click",this,this.onClick))},e}(),yR=function(t){function e(){e.__super.call(this)}return w(e,"modules.exercise.pearl.view.ExerPearlSkillItem",$f),e.prototype.update=function(){var t=bn.getPearlVO();this.imgSkill.source=ut.getRes(t.skillUrl);var e=bn.infoToc.pearl_skill_level;this.txtLv.text=e+"",this.redPoint.visible=Math.floor(bn.infoToc.level/10)>bn.infoToc.pearl_skill_level},e}(),vR=function(t){function e(){this.canUpgrade=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.btnBack.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow),this.upgradeBtn.on("click",this,this.onUpgradeSkill),this.txtInfo.style.lineHeight=40,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.exercise.pearl.view.ExerPearlSkillPanel",Zf);var i=e.prototype;return i.onDisplay=function(){T.register("EXERCISE_UPDATE_PANEL",this,this.update)},i.onUnDisplay=function(){T.remove("EXERCISE_UPDATE_PANEL",this,this.update)},i.update=function(){var t=bn.getPearlVO();this.imgSkill.source=ut.getRes(t.skillUrl);var e=bn.infoToc.pearl_skill_level;this.txtName.text=t.skillName+"Lv"+e;var i=bn.getPearlSkillVO(e);this.txtCurAttr.text=this.getAttrs(i.curHurts),i.nextHurts&&(i.nextHurts[0]&&i.nextHurts[1]?(this.txtNextAttr.visible=!0,this.txtNextAttr.text=this.getAttrs(i.nextHurts),this.fullLevelImg.visible=!1):(this.txtNextAttr.visible=!1,this.fullLevelImg.visible=!0));var s="";s+=k.getHtmlEmpty(4)+Z.span("攻击时有"+i.curExt+"%","#5d3924",26),0<i.nextExt&&(s+=Z.span("（下级"+i.nextExt+"%）","#96f254",26)),s+=Z.span("概率使该次伤害提高100%","#5d3924",26),this.txtInfo.innerHTML=s,Math.floor(bn.infoToc.level/10)>bn.infoToc.pearl_skill_level?(this.upgradeBtn.disabled=!1,this.canUpgrade=!0):(this.upgradeBtn.disabled=!0,this.canUpgrade=!1),this.txtInfo1.text=k.getEmpty(2)+"仙珠等级每达到10、20、30……级时，仙珠技能可提升1级。",this.txtInfo2.text=k.getEmpty(2)+"仙珠技能对4个角色均有效。"},i.getAttrs=function(t){for(var e,i="",s=0;s<t.length;s++)e=t[s],i+=W.getName(e.id)+k.getEmpty(1)+"+"+e.value+"\n";return i},i.onUpgradeSkill=function(){Tl.getInstance().toRolePearlSkillUpgrade()},e}(),IR=function(t){function e(){this.icons=null,this.skillItem=null,this.barExp=null,this.effectSuccess=null,e.__super.call(this),this.initIcons(),this.skillItem=new yR,this.spSkillItem.addChild(this.skillItem),this.skillItem.mouseEnabled=!0,this.skillItem.on("click",this,this.onClick),this.btnUp.on("click",this,this.onClick),this.barExp=new p(0,0,230,32,"com/ui/bar2.png","modules/exercise/barBg2.png",[5,5,5,5],[0,19,0,19],[6,6,6,6]),this.spBar.addChild(this.barExp),this.list.itemRender=gR,this.list.selectEnable=!1,this.list.scrollBar.autoHide=!0,this.list.renderHandler=Q.create(this,this.onListRender),this.effectSuccess=b.getOne(),this.addChild(this.effectSuccess)}w(e,"modules.exercise.pearl.view.ExerPearlView",Jf);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnUp:pt.send(22,2,"历练-仙珠-升级按钮");var e=bn.infoToc;if(e){var i=bn.getPearlLevelVO(e.level);if(i&&e.exp<i.exp)return void Jt.addTip("历练不足，无法升级")}Tl.getInstance().toUpgrade();break;case this.skillItem:Tl.getInstance().openExerPearlSkillPanel()}},i.onListRender=function(t,e){t.update()},i.initIcons=function(){var t,e;this.icons=[];for(var i=0;i<wn.PEARL_ICON_POSS.length;i++)t=0==wn.PEARL_ICON_TYPE_INFOS[i]?new fR:new _R,e=wn.PEARL_ICON_POSS[i],t.pos(e.x,e.y),this.spIcons.addChild(t),this.icons.push(t)},i.update=function(){bn.infoToc&&(this.updateInfo(),this.updateIcons(),this.updateLines())},i.updateInfo=function(){var t=bn.infoToc,e=bn.getPearlVO(),i=bn.getPearlLevelVO(t.level);this.txtCurAttr.text=dn.getAttrStr(e.attrKeys,e.attrVals,t.level),t.level<e.maxLevel?(this.btnUp.gray=!1,this.btnUp.mouseEnabled=!0,this.txtNextAttr.text=dn.getAttrStr(e.attrKeys,e.attrVals,t.level+1),this.barExp.setValue(t.exp,i.exp),this.skillItem.update()):(this.txtNextAttr.text="已经满级",this.skillItem.update(),this.btnUp.gray=!0,this.btnUp.mouseEnabled=!1),this.list.dataSource=bn.getListShowDatas()},i.updateIcons=function(){var t=Math.floor(bn.infoToc.level/10),e=bn.getPearlVO();bn.infoToc.level==e.maxLevel&&(t-=1);for(var i=0,s=0;s<this.icons.length;s++)i=10*t+s+1,this.icons[s].update(i),bn.isUpSuccess&&bn.infoToc.level==i&&(bn.isUpSuccess=!1,0==wn.PEARL_ICON_TYPE_INFOS[s]?this.effectSuccess.pos(wn.PEARL_ICON_POSS[s].x+43,wn.PEARL_ICON_POSS[s].y+95):this.effectSuccess.pos(wn.PEARL_ICON_POSS[s].x+43,wn.PEARL_ICON_POSS[s].y+69),this.effectSuccess.loadAndPlay("moduleEffect/exer_pearl_light"))},i.updateLines=function(){for(var t=bn.infoToc.level%10,e=0;e<this.imgLine.numChildren;e++)this["line"+e].visible=e+1<t},e}(),wR=function(t){function e(){this._eff=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.htmlTip.style.align="center",this.htmlTip.innerHTML=Z.span("每次增加获得","#5d3924")+Z.span("22500","#fdc06a")+Z.span("精华","#5d3924"),this._eff=new b,this._eff.pos(320,170),this.addChild(this._eff),this.on("click",this,this.onClick)}w(e,"modules.exercise.rune.view.RuneBuyElitePanel",t_);var i=e.prototype;return i.update=function(){this._eff.loadAndPlay("moduleEffect/fuwenjinghua","default",0,!0),0<xn.freeTime?(this.txt1.text="此次免费",this.spOne.x=67,this.imgRP.visible=!0):(this.txt1.text=""+xn.baseVO.buyOne,this.spOne.x=97,this.imgRP.visible=!1),this.txt10.text=""+xn.baseVO.buyTen,this.txt50.text=""+xn.baseVO.buyFifty,this.htmlCur.style.align="center",this.htmlCur.innerHTML=Z.span("当前精华：","#f4f1b2",26)+Z.span(pe.getScore(8)+"","#ffffff",26)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:return void this.closeWindow();case this.btnOne:if(0<xn.freeTime)return void kl.ins().toGetScore(0);this.checkMoney(xn.baseVO.buyOne);break;case this.btnTen:this.checkMoney(xn.baseVO.buyTen);break;case this.btnFifty:this.checkMoney(xn.baseVO.buyFifty);break;case this.spWay1:kl.ins().openResolvePanel();break;case this.spWay2:me.linkTo(11702)}},i.checkMoney=function(t){if(t>pe.gold)Lo.showAlert();else{var e=0,i="";switch(t){case xn.baseVO.buyOne:e=1,i="是否花费"+t+"元宝增加22500精华？";break;case xn.baseVO.buyTen:e=2,i="是否花费"+t+"元宝增加225000次精华？";break;case xn.baseVO.buyFifty:e=3,i="是否花费"+t+"元宝增加1125000次精华？"}""!=i&&Lo.showSecAlert(i,kl.ins(),kl.ins().toGetScore,[e],"rune_buy_elite")}},e}(),bR=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.txtCost.style.align="center",this.txtExtra.style.lineHeight=35,this.txtCondition.style.lineHeight=35}w(e,"modules.exercise.rune.view.RuneCoreUpgradeView",e_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnUpgrade:var e=xn.getPalInfoById(xn.curPalId),i=xn.getRuneCoreVO(e.core_level);if(kl.ins().toRuneCoreUpgrade(xn.curPalId),i&&e&&Ho.curCityLv>=Math.floor(i.conditions[0])&&e.core_level>=Math.floor(i.conditions[1])&&e.core_level<xn.baseVO.coreMaxLevel){var s=xn.getRuneCoreVO(e.core_level+1),n=pe.getScore(8);s&&n>=s.cost&&kl.ins().toRuneCoreUpgrade(xn.curPalId)}}},i.update=function(){var t=xn.getPalInfoById(xn.curPalId);if(t){var e,i,s;this.txtTitle.text="符文核心"+t.core_level+"阶";var n="";if(e=xn.getRuneCoreVO(t.core_level),this.btnUpgrade.disabled=!1,t.core_level<xn.baseVO.coreMaxLevel){var o;if(this.height=650,this.spScore.visible=!0,this.txtMaxLevelTip.visible=!1,i=xn.getRuneCoreVO(t.core_level+1)){for(var a=0;a<e.attrDatas.length;a++)s=e.attrDatas[a],o=i.attrDatas[a],n+=Z.span(W.getAttrStrByNum(s.key,s.val,""," +",""),"#e1c6bc"),n+=Z.span("（+"+(o.val-s.val)+"）","#96f254")+"<br/>";var l=pe.getScore(8);l>=i.cost?this.txtCost.innerHTML=Z.span(l+"","#96f254")+Z.span("/"+i.cost):this.txtCost.innerHTML=Z.span(l+"","#fd8e8e")+Z.span("/"+i.cost),n+=Z.span("符文属性增加"+e.spcAttr+"%","#e1c6bc")+Z.span("（"+i.spcAttr+"%）","#96f254")}}else{this.height=400,this.spScore.visible=!1,this.txtMaxLevelTip.visible=!0;for(var r=0;r<e.attrDatas.length;r++)s=e.attrDatas[r],n+=Z.span(W.getAttrStrByNum(s.key,s.val,""," +",""),"#e1c6bc")+"<br/>";n+=Z.span("符文属性增加"+e.spcAttr+"%","#e1c6bc")}this.txtExtra.innerHTML=n;var h=xn.getRuneCoreVO(t.core_level);if(h){var u="";u+=Z.span("符域玩法-符炉达到","#e1c6bc"),Ho.curCityLv>=Math.floor(h.conditions[0])?u+=Z.span(h.conditions[0]+"","#96f254"):u+=Z.span(h.conditions[0]+"","#fd8e8e"),u+=Z.span("级","#e1c6bc")+"<br/>",u+=Z.span("角色所有符文升级至","#e1c6bc"),xn.checkAllRuneLevelIsMatch(xn.curPalId,Math.floor(h.conditions[1]))?u+=Z.span(h.conditions[1]+"","#96f254"):u+=Z.span(h.conditions[1]+"","#fd8e8e"),u+=Z.span("级","#e1c6bc"),this.txtCondition.innerHTML=u}}},e}(),SR=function(t){function e(){this._data=null,e.__super.call(this),this.btn.on("click",this,this.onClick)}w(e,"modules.exercise.rune.view.RuneInlayItem",t);var i=e.prototype;return i.onClick=function(){if(xn.curPRune&&0<xn.curPRune.block){var t=ur.getItem(this._data.typeid),e=xn.getRuneStoneVO(this._data.typeid);if(t&&e){var i=Z.span("铭刻将获得符魂：","#5d3924")+Z.span(e.name,U.getColorLight(t.color))+"<br/>"+Z.span("旧符魂属性将被覆盖，是否继续铭刻","#5d3924"),s=new Ee;s.msg=i,s.yesLabel="铭刻",s.yesCaller=kl.ins(),s.yesFun=kl.ins().toLoadBlock,s.yesArgs=[xn.curPalId,xn.curPRune.pos,this._data.typeid],EF.showVO(s)}}else kl.ins().toLoadBlock(xn.curPalId,xn.curPRune.pos,this._data.typeid)},i.update=function(){if(this._data){var t=ur.getItem(this._data.typeid);if(t){this.imgIconBg.skin="com/ui/goodsBg"+t.color+".png",this.imgIcon.skin=t.realMaxico;var e=xn.getRuneStoneVO(this._data.typeid);e&&(this.txtName.text=e.name,this.txtName.color=U.getColorLight(t.color),this.txtDesc.text=e.desc),this.txtNum.text=this._data.current_num+""}}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(i_),xR=function(t){function e(){e.__super.call(this),this.list.itemRender=SR,this.list.scrollBar.autoHide=!0,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.exercise.rune.view.RuneInlayView",s_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){T.register("RUNE_INLAY_STONE_OVER",this,this.showEffect)},i.onUnDisplay=function(){T.remove("RUNE_INLAY_STONE_OVER",this,this.showEffect)},i.showEffect=function(){ih.show("moduleEffect/runeInalyStoneEffect",450,285,this)},i.update=function(){var t=xn.getRuneVOById(xn.curPRune.rune_id);if(t){var e=ur.getItem(t.id);e&&(this.txtName.text=e.name+"Lv."+xn.curPRune.level,this.imgIcon.skin=e.realMaxico);for(var i,s="",n=0;n<t.baseAttrList.length;n++)(i=t.baseAttrList[n])&&(s+=(n+1)%2==0?W.getAttrStrByNum(i.key,i.val,""," +","\n"):W.getAttrStrByNum(i.key,i.val,""," +",k.getEmpty(2)));this.txtAttr.text=s;var o=xn.getRuneStoneVO(xn.curPRune.block);if(o){this.txtBlock.align="left",this.txtBlock.text=o.name+"："+o.desc;var a=ur.getItem(o.typeId);a&&(this.imgGoods.visible=!0,this.imgGoods.skin=a.realMaxico)}else this.txtBlock.align="center",this.txtBlock.text="未铭刻",this.imgGoods.visible=!1}var l=xo.getGoodsByGoodsType(10402);l&&0<l.length?(l=l.sort(this.sortStones),this.spTip.visible=!1):this.spTip.visible=!0,this.list.dataSource=l},i.sortStones=function(t,e){var i=xn.getRuneStoneVO(t.typeid),s=xn.getRuneStoneVO(e.typeid);return i&&s?i.character>s.character?-1:i.character<s.character?1:i.typeId>s.typeId?1:i.typeId<s.typeId?-1:0:0},e}(),CR=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.rune.view.RuneItem",n_);var i=e.prototype;return i.update=function(){if(this._data){this.imgIcon.visible=this.txtName.visible=this.imgNameBg.visible=!0;var t=xn.getRuneVOById(this._data.rune_id);if(t){var e=ur.getItem(t.id);e&&(this.txtName.text=e.name+"Lv."+this._data.level,this.imgIcon.skin=e.realMaxico)}else this.imgIcon.visible=this.txtName.visible=!1,this.imgIcon.skin=null,this.txtName.text="";Cn.checkRuneIsCanUp(this._data.rune_id,this._data.level)&&!ha.checkIsPing2(4,xn.curPalId,0)||Cn.checkRuneStoneCanInlay(this._data.block)&&!ha.checkIsPing2(4,xn.curPalId,3)?this.imgRP.visible=!0:this.imgRP.visible=!1}else this.imgRP.visible=!1,this.imgIcon.visible=this.txtName.visible=this.imgNameBg.visible=!1,this.imgIcon.skin=null,this.txtName.text=""},I(0,i,"data",function(){return this._data},function(t){this._data=t,this.update()}),e}(),PR=function(t){function e(){this.headPart=null,this.items=null,this.bitmapClip=null,this.coreEff=null,e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));this.initItems(),this.coreEff=b.getOne(),this.coreEff.pos(94,98),this.spIcon.addChild(this.coreEff),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.spIcon.on("click",this,this.onShowCoreView),this.btn.on("click",this,this.onInlay),vF.getOne(4,50,780,this)}w(e,"modules.exercise.rune.view.RuneMainView",o_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onInlay=function(){var t=xn.getInlayRunesByPal(xn.curPalId);t&&0<t.length?kl.ins().toRuneActive(xn.curPalId,t):Jt.addTip("背包中没有可以镶嵌和更换的符文")},i.onShowCoreView=function(){kl.ins().openCoreUpgradeView()},i.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(xn.curPalId=e.pal_id,this.update())}},i.update=function(){this.updateItems(),this.updateCoreInfo(),this.checkBtnEffect()},i.checkBtnEffect=function(){var t=xn.getPalInfoById(xn.curPalId);if(t){for(var e=0,i=0;i<8;i++)if(e=i+1,Cn.checkRuneCanInlayByPal(t.runes,e))return void this.showBtnEffect(!0);this.showBtnEffect(!1)}},i.updateCoreInfo=function(){var t=xn.getPalInfoById(xn.curPalId);if(t){if(this.txtLevel.text="符文核心"+t.core_level+"阶",t.core_level<xn.baseVO.coreMaxLevel){var e=xn.getRuneCoreVO(t.core_level);if(e){var i="";i+=Z.span("符域玩法-主城达到","#5d3924"),Ho.curCityLv>=Math.floor(e.conditions[0])?i+=Z.span(e.conditions[0]+"","#139604"):i+=Z.span(e.conditions[0]+"","#b60202"),i+=Z.span("级","#5d3924")+"<br/>",i+=Z.span("角色所有符文升级至","#5d3924"),xn.checkAllRuneLevelIsMatch(xn.curPalId,Math.floor(e.conditions[1]))?i+=Z.span(e.conditions[1]+"","#139604"):i+=Z.span(e.conditions[1]+"","#b60202"),i+=Z.span("级","#5d3924"),this.txtCondition.innerHTML=i}}else this.txtCondition.innerHTML=Z.span("已满级");for(var s,n=xn.getRuneTotalAttr(xn.curPalId),o="",a=0;a<n.length;a++)(s=n[a])&&(o+=(a+1)%2==0?W.getAttrStrByNum(s.key,s.val,""," +","\n"):Kt.inputEmpty(W.getName(s.key)+" +"+Math.floor(s.val),15));this.txtAttr.text=o,Cn.checkPalRuneCoreCanUp(t)&&!ha.checkIsPing2(4,xn.curPalId,1)?this.imgRPCore.visible=!0:this.imgRPCore.visible=!1}},i.updateItems=function(){for(var t,e,i=0;i<this.items.length;i++)t=this.items[i],e=xn.getRuneByPalIdAndPos(xn.curPalId,i+1),t.data=e},i.initItems=function(){var t;this.items=[];for(var e=0;e<8;e++)(t=new CR).on("click",this,this.onClickItem),t.pos(Sn.MAIN_ICON_POS[e].x,Sn.MAIN_ICON_POS[e].y,!0),this.addChild(t),this.items.push(t)},i.onClickItem=function(t){t.target instanceof modules.exercise.rune.view.RuneItem&&t.target.data&&(xn.curPRune=t.target.data,kl.ins().openOperationPanel())},i.resetItems=function(){for(var t=0;t<this.items.length;t++)this.items[t].data=null},i.onDisplay=function(){this.headPart.resetSelect(0),this.txtCondition.style.lineHeight=35,this.txtCondition.style.align="center",this.coreEff.loadAndPlay("moduleEffect/runeCoreMain","default",0,!0),T.register("RP_RUNE_INLAY_OVER",this,this.inlayOverEff),T.register("RUNE_MAIN_VIEW_UPDATE",this,this.update)},i.inlayOverEff=function(t){var e,i;for(var s in t)i=t[s],(e=xn.getRuneVOById(i))&&ih.show("moduleEffect/changeover",Sn.MAIN_ICON_POS[e.part-1].x+52,Sn.MAIN_ICON_POS[e.part-1].y+52,this)},i.onUnDisplay=function(){T.remove("RP_RUNE_INLAY_OVER",this,this.inlayOverEff),T.remove("RUNE_MAIN_VIEW_UPDATE",this,this.update)},i.showBtnEffect=function(t){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(85,36)),t?(this.bitmapClip.loadAndPlay("moduleEffect/change","default",0,!0),this.btn.addChild(this.bitmapClip)):(this.bitmapClip.stop(),this.btn.removeChild(this.bitmapClip))},e}(),TR=function(t){function e(){this.curView=null,this.upView=null,this.inlayView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.rune.view.RuneOperationPanel",a_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onDisplay=function(){this.tab.selectedIndex=0},i.selectedView=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.upView=this.upView||new LR,this.curView=this.upView,this.spView.addChild(this.upView);break;case 1:this.inlayView=this.inlayView||new xR,this.curView=this.inlayView,this.spView.addChild(this.inlayView)}this.update()},i.update=function(){this.curView&&this.curView.update(),Cn.checkRuneIsCanUp(xn.curPRune.rune_id,xn.curPRune.level)&&!ha.checkIsPing2(4,xn.curPalId,0)?this.imgRP1.visible=!0:this.imgRP1.visible=!1,Cn.checkRuneStoneCanInlay(xn.curPRune.block)&&!ha.checkIsPing2(4,xn.curPalId,3)?this.imgRP2.visible=!0:this.imgRP2.visible=!1},e}(),kR=function(t){function e(){e.__super.call(this),this.list.itemRender=Lh,this.list.scrollBar.autoHide=!0,this.html.innerHTML=Z.linkcolor("获取精华"),this.html.on("link",this,this.onLink),this.btnDel.on("click",this,this.onClick),Nt.register("RP_RUNE_PACK",this.btnDel,new Tt(19,-10)),Nt.register("RP_RUNE_FREE_GET_SCORE",this.html,new Tt(19,-20))}w(e,"modules.exercise.rune.view.RunePackView",l_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){this.list.dataSource=xn.bagList,this.txtNum.text="符文精华："+pe.getScore(8)},i.onClick=function(t){kl.ins().openResolvePanel()},i.onLink=function(t){kl.ins().openBuyElitePanel()},e}(),AR=function(t){function e(){this._goods=null,e.__super.call(this)}w(e,"modules.exercise.rune.view.RuneResolveItem",r_);var i=e.prototype;return i.showEff=function(){this.goods=null},I(0,i,"goods",function(){return this._goods},function(t){if(this._goods=t,this._goods){var e=ur.getItem(t.typeid);this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.imgGoods.skin=e.realMaxico,this.txtName.text=e.title,this.txtNum.text=this._goods.current_num+""}else this.imgBg.skin="com/ui/itemAddBg.png",this.imgGoods.skin=null,this.txtName.text="",this.txtNum.text=""}),e}(),ER=function(t){function e(){this.itemArr=null,this.itemPos=[[103,129],[291,129],[478,129],[103,299],[291,299],[478,299],[103,469],[291,469],[478,469]],this.selView=null,this.showList=null,this.time=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.initItem(),this.txtStoneNum.style.fontSize=26,this.txtStoneNum.style.align="center",this.on("click",this,this.onClick)}w(e,"modules.exercise.rune.view.RuneResolvePanel",h_);var i=e.prototype;return i.initItem=function(){this.itemArr=this.itemArr||[];for(var t,e=this.itemPos.length,i=0;i<e;i++)(t=new AR).goods=null,t.x=this.itemPos[i][0],t.y=this.itemPos[i][1],t.mouseEnabled=!0,this.itemArr.push(t),this.addChild(t)},i.update=function(){this.resetItems(),this.showList=xn.getResolveShowInfos(),this.showList&&this.updateShow()},i.updateShow=function(){for(var t=0;t<this.itemArr.length;t++)this.itemArr[t].goods=this.showList[t];this.updateInfo()},i.updateInfo=function(){var t,e,i=0,s=0;for(var n in this.showList)e=this.showList[n],(t=xn.getRuneVOById(e.typeid))&&(s+=t.resolve*e.current_num,5==t.star&&(i+=e.current_num));this.txtNum.text="将获得符文精华："+s,this.txtStoneNum.innerHTML=Z.span("将获得")+Z.span("符魂石","#7223b5")+Z.span("："+i)},i.updateBySel=function(t){this.resetItems(),this.showList=this.showList.concat(t),this.showList&&this.updateShow()},i.resetItems=function(){for(var t=0;t<this.itemArr.length;t++)this.itemArr[t].goods=null},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:var e,i,s=[],n=!1;for(var o in this.showList){var a;for(var l in i=this.showList[o],n=!1,s)if((a=s[l]).id==i.typeid){n=!0,a.val+=i.current_num;break}0==n&&((e=new Object).className="p_kv",e.id=i.typeid,e.val=i.current_num,s.push(e))}kl.ins().toDecompose(s);break;default:var r;if(t.target instanceof modules.exercise.rune.view.RuneResolveItem)if((r=t.target).goods){for(var h=this.showList.length-1;0<=h;h--)if(this.showList[h].typeid==r.goods.typeid)return this.showList.splice(h,1),r.goods=null,void this.updateInfo()}else this.selView=this.selView||new OR,this.selView.setType(0,9),this.selView.setLeft(this.showList),this.selView.openWindow()}},i.showEff=function(){var t,e=!1;for(var i in 1e3<S.now()-this.time&&(this.time=S.now(),e=!0),this.itemArr)(t=this.itemArr[i]).goods&&(e&&ih.confineShow("moduleEffect/boxEffect",null,t.x+52,t.y+104,this),t.showEff());this.update()},e}(),RR=function(t){function e(){this._sel=!1,this._goods=null,this.baseItemVO=null,e.__super.call(this),this.mouseEnabled=!0}w(e,"modules.exercise.rune.view.RuneSelectResolveItem",u_);var i=e.prototype;return i.updateView=function(){this.baseItemVO?(this.imgBg.skin="com/ui/goodsBg"+this.baseItemVO.color+".png",this.imgGoods.skin=this.baseItemVO.realMaxico,this.txtName.text=this.baseItemVO.name):this.txtName.text=""},I(0,i,"sel",function(){return this._sel},function(t){this._sel=t,this._sel?this.chk.selected=!0:this.chk.selected=!1}),I(0,i,"goods",function(){return this._goods},function(t){this._goods=t,this.baseItemVO=t?ur.getItem(t.typeid):null,this.updateView()}),e}(),OR=function(t){function e(){this._type=0,this._num=0,this.curLeft=0,this.curLeftArr=null,this.nowSelNum=0,this._goodsArr=null,this.packItemArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.exercise.rune.view.RuneSelectResolvePanel",c_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.closeBtn:this.closeWindow();break;case this.btnY:this.addRune();break;default:if(t.target instanceof modules.exercise.rune.view.RuneSelectResolveItem){var e=t.target;1==e.sel?(--this.nowSelNum,e.sel=!1):(++this.nowSelNum,e.sel=!0),this.txtSelNum.text=this._num-this.curLeft+this.nowSelNum+" / "+this._num}this.nowSelNum==this.curLeft&&this.addRune()}},i.addRune=function(){var t,e,i=[];for(e in this.packItemArr)(t=this.packItemArr[e]).goods&&t.sel&&t.parent&&i.push(t.goods);T.dispatch("RUNE_RESOLVE_SELECT_GOODS",i),this.closeWindow()},i.setType=function(t,e){void 0===t&&(t=0),void 0===e&&(e=9),this._type=t,this._num=e},i.setLeft=function(t){this.curLeftArr=t||[],this.curLeft=this._num-this.curLeftArr.length,this.nowSelNum=0},i.updateGoods=function(){if(this.clearAllItem(),this.txtSelNum.text=this.curLeftArr.length+" / "+this._num,this._goodsArr=xn.getSelResolveShowInfo(this.curLeftArr),this._goodsArr.sort(this.sortGoods),this._goodsArr&&0<this._goodsArr.length){this.packItemArr=this.packItemArr||[];for(var t=this._goodsArr.length,e=0;e<t;e++){this.packItemArr[e]=this.packItemArr[e]||new RR;var i=this.packItemArr[e];i.goods=this._goodsArr[e],i.sel=!1;var s=e,n=s%3,o=Math.floor(s/3);this.packItemArr[e].x=n*(i.width+20),this.packItemArr[e].y=o*(i.height+20),this.panelSel.addChild(i)}}},i.sortGoods=function(t,e){var i=xn.getRuneVOById(t.typeid),s=xn.getRuneVOById(e.typeid);return i&&s?i.star>s.star?-1:i.star<s.star?1:0:0},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},i.openWindow=function(t,e){void 0===e&&(e=!1),this._goodsArr=xn.bagList,this._goodsArr&&0<this._goodsArr.length?(laya.ui.View.prototype.openWindow.call(this),this.parent&&this.updateGoods()):Jt.addTip("当前没有可分解的符文")},I(0,i,"uiClass",function(){return"SelectMeltingView"}),e}(),LR=function(t){function e(){e.__super.call(this),this.txtCost.style.align="center",this.txtCost.style.fontSize=24,this.on("click",this,this.onClick)}w(e,"modules.exercise.rune.view.RuneUpgradeView",d_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnUpgrade:var e=xn.getRuneVOById(xn.curPRune.rune_id);if(e){var i=xn.getRunePartVO(e.part);if(i)i.costBase+i.costDiffer*xn.curPRune.level<=pe.getScore(8)?kl.ins().toRuneUpgrade(xn.curPalId,xn.curPRune.pos):kl.ins().openBuyElitePanel()}break;case this.txtLink:kl.ins().openBuyElitePanel()}},i.update=function(){var t=xn.getRuneVOById(xn.curPRune.rune_id);if(t){var e=xn.getPalInfoById(xn.curPalId),i=1;if(e){var s=xn.getRuneCoreVO(e.core_level);s&&(i+=.01*s.spcAttr)}var n=ur.getItem(t.id);n&&(this.txtName.text=n.name+"Lv."+xn.curPRune.level,this.imgIcon.skin=n.realMaxico);for(var o,a="",l=0;l<t.baseAttrList.length;l++)(o=t.baseAttrList[l])&&(a+=(l+1)%2==0?W.getAttrStrByNum(o.key,Math.floor(i*o.val),""," +","\n"):Kt.inputEmpty(W.getAttrStrByNum(o.key,Math.floor(i*o.val),""," +",""),13)+k.getEmpty(2));this.txtAttr.text=a;var r=xn.getRuneStoneVO(xn.curPRune.block);if(r){this.txtBlock.align="left",this.txtBlock.text=r.name+"："+r.desc;var h=ur.getItem(r.typeId);h&&(this.imgGoods.visible=!0,this.imgGoods.skin=h.realMaxico)}else this.txtBlock.align="center",this.txtBlock.text="未铭刻";var u=xn.getRunePartVO(t.part);if(u){for(var c="",d=NaN,p=0;p<u.attrKeyList.length;p++)d=Math.floor(i*(Math.floor(u.attrBaseList[p])+Math.floor(u.attrDifferList[p])*xn.curPRune.level)),c+=W.getAttrStrByNum(u.attrKeyList[p],d,""," +","\n");var m=NaN;m=u.spcAttr*xn.curPRune.level,m*=10,m=Math.floor(m)/10,c+=u.spcAttrDesc+m+"%",this.txtCurAttr.text=c;var f="";if(xn.curPRune.level<xn.baseVO.runeMaxLevel){for(var _=0;_<u.attrKeyList.length;_++)d=Math.floor(i*(Math.floor(u.attrBaseList[_])+Math.floor(u.attrDifferList[_])*(xn.curPRune.level+1))),f+=W.getAttrStrByNum(u.attrKeyList[_],d,""," +","\n");m=u.spcAttr*(xn.curPRune.level+1),m*=10,m=Math.floor(m)/10,f+=u.spcAttrDesc+m+"%",this.txtNextAttr.text=f;var g=u.costBase+u.costDiffer*xn.curPRune.level,y=pe.getScore(8);this.txtCost.innerHTML=g<=y?Z.span(""+y,"#96f254")+Z.span("/"+g):Z.span(""+y,"#b60202")+Z.span("/"+g),this.txtMaxTip.visible=!1}else this.txtMaxTip.visible=!0,this.txtNextAttr.text="",this.txtCost.innerHTML=Z.span("已满级")}}Cn.checkRuneIsCanUp(xn.curPRune.rune_id,xn.curPRune.level)?this.imgRP.visible=!0:this.imgRP.visible=!1},e}(),DR=function(t){function e(){this.curView=null,this.mainView=null,this.packView=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.tab.on("change",this,this.onTabChange),Nt.register("RP_RUNE_CAN_INLAY",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_RUNE_INLAY_STONE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_RUNE_CAN_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_RUNE_CORE_CAN_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_RUNE_PACK",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_RUNE_FREE_GET_SCORE",this.tab.items[1],new Tt(19,-10)),T.register("CHANGE_RUNE_VIEW_TAB",this,this.changeTab)}w(e,"modules.exercise.rune.view.RuneView",p_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.changeTab=function(t){this.tab.selectedIndex=t},i.onUnDisplay=function(){},i.onDisplay=function(){this.tab.selectedIndex=0},i.onTabChange=function(t){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.mainView=this.mainView||new PR,this.curView=this.mainView,this.spView.addChild(this.mainView),Cn.checkAllPalHeadRP();break;case 1:this.packView=this.packView||new kR,this.curView=this.packView,this.spView.addChild(this.packView)}this.update()},i.update=function(){this.curView&&this.curView.update(),Cn.checkRPInlay(),Cn.checkRPRuneUp(),Cn.checkRPRuneCoreCanUp()},e}(),NR=function(t){function e(){this._data=null,this.index=0,e.__super.call(this)}w(e,"modules.exercise.rune.view.StrangeFireStoneItem",t);var i=e.prototype;return i.update=function(){if(this._data){var t=ur.getItem(this._data.val);this.imgBg.skin="modules/exercise/stoneBg1.png",t&&(this.imgIcon.visible=!0,this.imgIcon.skin=t.realMaxico)}else this.imgBg.skin="modules/exercise/stoneBgAdd.png",this.imgIcon.visible=!1},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data}),e}(m_),VR=function(t){function e(){this._isSelect=!1,this._data=null,this._p=null,this._vo=null,this._type=0,this.showTip=null,e.__super.call(this),ft.ins().register(this,this,500,this.longClick,null,this.onItemClick,null)}w(e,"modules.exercise.spiriTreasure.item.SpiriTreItem",t);var i=e.prototype;return i.longClick=function(){this.showTip=this.showTip||new YF,this.showTip.data=this._p,this.showTip.popup()},i.onItemClick=function(){if(0==this._type)this._isSelect?(this._isSelect=!1,Tn.deleteDecompArr(this._p)):(this._isSelect=!0,Tn.addToDecompArr(this._p)),this.imgSelect.visible=this._isSelect,Al.ins().onDecompRewardUpdateGet();else{if(4==Tn.selectArr.length&&!this._isSelect)return;this._isSelect?(this._isSelect=!1,Tn.deleteSelectArr(this._p)):(this._isSelect=!0,Tn.addToSelectArr(this._p)),Al.ins().onRecastViewUpdateGet(),this.imgSelect.visible=this._isSelect}},i.update=function(){if(this._data&&this._p){this._vo=Tn.getSpiritVoById(this._p.typeid);var t=kn.getPColor(this._p);this.imgBg.skin="com/ui/goodsBg"+(t+3)+".png";var e=ur.getItem(this._p.typeid-12e6);e&&(this.img.skin="modules/goods/maxico/"+e.path+".png"),this.imgSelect.visible=!!this._isSelect}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._isSelect=!1,this._data=t,this._data)if(this._p=this._data.p,this._type=this._data.type,0==this._type)for(var e=0;e<Tn.decompArr.length;e++)this._p.id==Tn.decompArr[e].id&&(this._isSelect=!0);else for(e=0;e<Tn.selectArr.length;e++)this._p.id==Tn.selectArr[e].id&&(this._isSelect=!0);this.update()}),e}(f_),BR=function(t){function e(){this._data=null,this._vo=null,e.__super.call(this),this.on("click",this,this.onClick,null)}w(e,"modules.exercise.spiriTreasure.item.SpiriTreReplaceItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnReplace:var e=[],i=new Object;i.className="p_kv",i.id=this._data.id,i.val=this._vo.pos,e[0]=i,Al.ins().toReplace(Tn.curPalId,e)}},i.update=function(){if(this._data){var t=kn.randLevel(this._data),e=ur.getItem(this._data.typeid-12e6);e&&(this.imgSpiriTre.skin="modules/goods/maxico/"+e.path+".png"),this._vo&&(this.txtLv.text=0<t?this._vo.level+"+"+t:this._vo.level+"",this.txtAtt.text=0==kn.hasAtt(this._data)?"无":"有",this.txtHas.text=0<kn.hasSlot(this._data)?"有":"无")}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&(this._vo=Tn.getSpiritVoById(this._data.typeid)),this.update()}),e}(__),MR=function(t){function e(){this.headPart=null,this.consume1Img=null,this.consume2Img=null,this.needCousumeNum1=0,this.needCousumeNum2=0,this.rpLen=0,this.lingbaoVosOn=[],this.lingbaoVos=null,this.curLingbaoVo=null,this.curSpiriTreVo=null,this.colorArr=["蓝色","紫色","橙色","红色"],this.qualityArr=["普通","良品","上品","极品"],this.addArr=["无加成","主属性的20%","主属性的50%","主属性的100%"],e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart),this.on("click",this,this.onClick,null),this.rpList.visible=!1,this.selEquip.list.vScrollBarSkin="com/ui/vscroll.png",this.selEquip.list.scrollBar.autoHide=!0,this.selEquip.on("change",this,this.onNameChange),this.selEquip.list.renderHandler=new Q(this,this.checkListRP),this.on("display",this,this.onDisplay),this.consume1Img=Me.createGoodsImage(0,0,null,null,!0,!1,105,!0),this.consume1Img.on("click",this,this.onTip),this.consume1Img.pos(0,0),this.spConsume1.addChild(this.consume1Img),this.consume2Img=Me.createGoodsImage(0,0,null,null,!0,!1,105,!0),this.consume2Img.on("click",this,this.onTip),this.consume2Img.pos(0,0),this.spConsume2.addChild(this.consume2Img),this.htmlDes.style.leading=10,this.htmlDes.innerHTML=Z.span("进阶根据颜色不同，分别获得主属性","#ffffcc")+Z.span("20%(紫色)","#800080")+Z.span("、","#ffffcc")+Z.span("50%(橙色)","#ffa500")+Z.span("、","#ffffcc")+Z.span("100%(红色)","#ff0000")+Z.span("的加成","#ffffcc");for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10))}w(e,"modules.exercise.spiriTreasure.view.SpiriTreAdvanceView",g_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("ROLE_EXCHANGE_BACK_SUCC",this,this.ConsumeUpdate),this.headPart.resetSelect(Tn.curPalIndex)},i.onUnDisplay=function(){T.remove("ROLE_EXCHANGE_BACK_SUCC",this,this.ConsumeUpdate)},i.onNameChange=function(t){this.curLingbaoVo=this.lingbaoVos[this.selEquip.selectedIndex],this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id),Tn.curPos=this.curSpiriTreVo.pos,Tn.curSuitId=this.curSpiriTreVo.suitId),this.setData()},i.update=function(){if(this.lingbaoVos=[],this.lingbaoVosOn=Tn.infoOnArr,this.lingbaoVosOn)for(var t=0;t<this.lingbaoVosOn.length;t++){var e=this.lingbaoVosOn[t];e.pal_id==Tn.curPalId&&this.lingbaoVos.push(e)}this.curLingbaoVo=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId),this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id)),Tn.checkAllPalHeadRP(),this.updateList()},i.updateList=function(){var t,e="",i=[],s=[];for(var n in this.rpLen=0,this.lingbaoVos){t=this.lingbaoVos[n];var o=Tn.getSpiritVoById(t.type_id);o&&(s.push(o.name+" "+this.qualityArr[t.purify_level]),i.push(o.name)),Tn.checkAdvanceRp(t)&&(this.rpLen+=1)}for(var a=0;a<s.length;a++)e+=s[a],a!=s.length-1&&(e+=",");""==e&&(e="其他部位无已装备灵宝"),this.selEquip.labels=e;for(a=0;a<i.length;a++)i[a]==this.curSpiriTreVo.name&&(this.selEquip.selectedIndex=a);0==this.rpLen?this.rpList.visible=!1:this.rpList.visible=!0},i.onClick=function(t){switch(t.target){case this.btnAdvance:if(1==this.btnAdvance.gray)break;var e=this.checkConsume();0==e?Al.ins().toAdvanch(Tn.curPalId,this.curLingbaoVo.type_id):ba.show(e)}},i.setData=function(){if(this.curLingbaoVo){var t=Tn.getSpiritVoById(this.curLingbaoVo.type_id),e=this.curLingbaoVo.purify_level,i=ur.getItem(this.curLingbaoVo.type_id-12e6),s=0;i&&(s=Number(i.path)+1e4*e),this.txtName.text=0<this.curLingbaoVo.rand_level?"[完美]"+t.name:t.name,this.btnAdvance.gray=3<=e,this.btnAdvance.label=3<=e?"已满阶":"进阶",this.imgEquip1.skin="modules/goods/maxico/"+s+".png",this.imgBg1.skin="com/ui/goodsBg"+(this.curLingbaoVo.purify_level+3)+".png",this.imgEquip2.skin=3==e?"modules/goods/maxico/"+s+".png":"modules/goods/maxico/"+(s+1e4)+".png",this.imgBg2.skin=3==e?"com/ui/goodsBg6.png":"com/ui/goodsBg"+(this.curLingbaoVo.purify_level+4)+".png";var n=3==e?e:e+1,o=Tn.getSpiritreAdConByLevel(n),a=ur.getItem(o.ids[0]),l=ur.getItem(o.ids[1]);this.imgBg3.skin="com/ui/goodsBg"+a.color+".png",this.imgBg4.skin="com/ui/goodsBg"+l.color+".png",this.consume1Img.data=a,this.consume1Img.num=xo.getGoodsNumByType(xo.GOODS_ID,a.id),this.consume1Img.imgContent.gray=0==this.consume1Img.num,this.txtQuality1.text="品质:"+this.qualityArr[e],this.txtAdd1.text="属性:"+this.addArr[e],this.consume2Img.data=l,this.consume2Img.num=xo.getGoodsNumByType(xo.GOODS_ID,l.id),this.consume2Img.imgContent.gray=0==this.consume2Img.num,this.txtQuality2.text="品质:"+this.qualityArr[n],this.txtAdd2.text="属性:"+this.addArr[n],o&&3!=e?(this.imgFull.visible=!1,this.txtConsume1.visible=this.txtConsume2.visible=!0,this.txtConsume1.text="×"+o.nums[0],this.txtConsume2.text="×"+o.nums[1],this.needCousumeNum1=o.nums[0],this.needCousumeNum2=o.nums[1]):(this.txtConsume1.visible=this.txtConsume2.visible=!1,this.imgFull.visible=!0)}this.rpAd.visible=Tn.checkAdvanceRp(this.curLingbaoVo)},i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.checkConsume=function(){if(this.consume1Img.data&&this.consume2Img.data){if(xo.getGoodsNumByType(xo.GOODS_ID,this.consume2Img.data.id)<this.needCousumeNum2)return this.consume2Img.data.id;if(xo.getGoodsNumByType(xo.GOODS_ID,this.consume1Img.data.id)<this.needCousumeNum1)return this.consume1Img.data.id}return 0},i.ConsumeUpdate=function(){this.consume1Img.data&&(this.consume1Img.num=xo.getGoodsNumByType(xo.GOODS_ID,this.consume1Img.data.id),0!=this.consume1Img.num&&(this.consume1Img.imgContent.gray=!1)),this.consume2Img.data&&(this.consume2Img.num=xo.getGoodsNumByType(xo.GOODS_ID,this.consume2Img.data.id),0!=this.consume2Img.num&&(this.consume2Img.imgContent.gray=!1))},i.checkListRP=function(t,e){var i=t.getChildByName("listRp");i||((i=Nt.createSprite("com/ui/redPoint.png",null,t.width-50,0)).name="listRp",t.addChild(i),i.visible=!1),i.visible=!1,Tn.checkAdvanceRp(this.lingbaoVos[e])&&(i.visible=!0)},i.onHeadItemClick=function(t){if(Tn.curPalIndex!=t){if(0<=t){var e=pe.getPalByIndex(t);if(e){for(var i=[],s=Tn.infoOnArr,n=0;n<s.length;n++){var o=new Object;o.className="p_ling_bao",o=s[n];var a=Tn.getSpiritVoById(o.type_id);if(o.pal_id==e.pal_id&&Tn.curSuitId==a.suitId){i.push(o);break}}if(0<i.length){Tn.curPalId=e.pal_id,Tn.curPalIndex=t;var l=i[0];l&&(Tn.curPos=l.pos,this.update())}else Jt.addTip("对应角色尚未装备灵宝，无法进阶"),this.headPart.resetSelect(Tn.curPalIndex)}}}else this.update()},e}(),FR=function(t){function e(){this.headPart=null,this._infoArr=[],e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart),this.on("click",this,this.onClick,null);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));this.list.itemRender=VR,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.repeatX=6,this.list.spaceY=0,this.list.spaceX=0,this.on("display",this,this.onDisplay),this.rpDe.visible=!1}w(e,"modules.exercise.spiriTreasure.view.SpiriTreDecompView",y_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){T.register("SPIRITRE_DECOMP_UPDATE",this,this.setData),T.register("SPIRITRE_DECOMP_UPDATEGET",this,this.updateRewardGet),Tn.resetDecompArr(),this.setData(),this.headPart.resetSelect(Tn.curPalIndex),this.btnAll.selected=!1},i.setData=function(){this._infoArr=Tn.infoArrOff,Tn.resetDecompArr(),this.decompDes.text="分解选中灵宝可获得",this.decompGet.text="【寒玉碎片】×"+Tn.decompArr.length,this.update()},i.updateRewardGet=function(){this.decompDes.text="分解选中灵宝可获得",this.decompGet.text="【寒玉碎片】×"+Tn.decompArr.length,Tn.decompArr.length!=this._infoArr.length&&(this.btnAll.selected=!1)},i.onClick=function(t){switch(t.target){case this.btnDecomp:var e,i=[];for(var s in Tn.decompArr){e=Tn.decompArr[s];var n=new Object;n.className="p_kv",n.id=e.id,n.val=1,i.push(n)}Al.ins().toDecomp(i),this.btnAll.selected=!1;break;case this.btnAll:this.selectAll()}},i.updateGet=function(){var t,e=[0,0,0,0];for(var i in Tn.decompArr){var s;for(var n in(t=Tn.decompArr[i]).data_list)if(9==(s=t.data_list[n]).id)switch(s.val){case 0:e[0]++;break;case 1:e[1]++;break;case 2:e[2]++;break;case 3:e[3]++}}var o=Tn.getSpiritreDecomp(1),a=1*e[0]+2*e[1]+3*e[2]+4*e[3],l=new Ah(91,100,!1,!0,!0);l.dataSource=[o[0],a],l.pos(-50,0),l.hideGoodsName(),this.spItem.addChild(l)},i.update=function(){var t,e=[];for(var i in this._infoArr){t=this._infoArr[i];var s=new Object;s.p=t,s.type=0,e.push(s)}this.list.dataSource=e,this.updateGet()},i.selectAll=function(){var t,e=[];for(var i in Tn.resetDecompArr(),this._infoArr){t=this._infoArr[i],Tn.addToDecompArr(t);var s=new Object;s.p=t,s.type=0,e.push(s)}0==this.btnAll.selected&&Tn.resetDecompArr(),this.list.dataSource=e,this.updateRewardGet()},i.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(Tn.curPalId=e.pal_id,Tn.curPalIndex=t)}},e}(),UR=function(t){function e(){this.headPart=null,this.rpLen=0,this.lingbaoVosOn=[],this.lingbaoVos=null,this.curLingbaoVo=null,this.curSpiriTreVo=null,this.stoneId=1,e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart),this.on("click",this,this.onClick,null),this.rpList.visible=!1,this.selEquip.list.vScrollBarSkin="com/ui/vscroll.png",this.selEquip.list.scrollBar.autoHide=!0,this.selEquip.on("change",this,this.onNameChange),this.selEquip.list.renderHandler=new Q(this,this.checkListRP),this.on("display",this,this.onDisplay);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10))}w(e,"modules.exercise.spiriTreasure.view.SpiriTreInlayView",v_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.headPart.resetSelect(Tn.curPalIndex)},i.onNameChange=function(t){this.curLingbaoVo=this.lingbaoVos[this.selEquip.selectedIndex],this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id),Tn.curPos=this.curSpiriTreVo.pos,Tn.curSuitId=this.curSpiriTreVo.suitId),this.setData()},i.update=function(){if(this.lingbaoVos=[],this.lingbaoVosOn=Tn.infoOnArr,this.lingbaoVosOn)for(var t=0;t<this.lingbaoVosOn.length;t++){var e=this.lingbaoVosOn[t];Tn.checkInlaySlot(e)&&e.pal_id==Tn.curPalId&&this.lingbaoVos.push(e)}this.curLingbaoVo=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId),this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id)),Tn.checkAllPalHeadRP(),this.updateList()},i.updateList=function(){var t,e="",i=0,s=[],n=[];for(var o in this.rpLen=0,this.lingbaoVos){t=this.lingbaoVos[o];var a=Tn.getSpiritVoById(t.type_id);a&&(n.push(a.name),s.push(a.name)),Tn.checkInlayRp(t)&&(this.rpLen+=1)}for(var l=0;l<n.length;l++)e+=n[l],l!=n.length-1&&(e+=",");for(var r in""==e&&(e="其他部位无已装备灵宝"),this.selEquip.labels=e,s)s[r]==this.curSpiriTreVo.name&&(this.selEquip.selectedIndex=i),i++;0==this.rpLen?this.rpList.visible=!1:this.rpList.visible=!0},i.onClick=function(t){switch(t.target){case this.btnInlay:var e=xo.getGoodsByTypeID(10700012+this.stoneId);e?Al.ins().toInlay(Tn.curPalId,this.curLingbaoVo.type_id,e.id):Jt.addTip("背包中没有该物品！");break;case this.btnOff:Al.ins().toUnload(Tn.curPalId,this.curLingbaoVo.type_id);break;default:if(t.target instanceof laya.ui.Image&&""!=t.target.name){var i=t.target.name,s=Number(i);this.imgSelect.x=t.target.x-7,this.imgSelect.y=t.target.y-9,this.stoneId=s}}},i.setData=function(){if(this.curLingbaoVo&&this.curSpiriTreVo){this.imgBg.skin="com/ui/goodsBg"+(this.curLingbaoVo.purify_level+3)+".png";var t=ur.getItem(this.curLingbaoVo.type_id-12e6),e=Number(t.path)+1e4*this.curLingbaoVo.purify_level;this.imgCur.skin="modules/goods/maxico/"+e+".png",this.txtName.text=0<this.curLingbaoVo.rand_level?"[完美]"+t.name:t.name;for(var i=1;i<=4;i++)this["txtNum"+i].text="拥有量："+xo.getGoodsNumByType(xo.GOODS_ID,10700012+i);if(0<this.curLingbaoVo.slot_prop.length&&1<this.curLingbaoVo.rand_slot){this.imgStone.visible=!0;var s=kn.getStoneName(this.curLingbaoVo.rand_slot);this.imgStone.skin="modules/spiriTre/gem/"+s+".png",this.btnInlay.label="替换"}else this.imgStone.visible=!1,this.btnInlay.label="镶嵌"}this.btnInlay.visible=Tn.checkInlaySlot(this.curLingbaoVo)},i.checkListRP=function(t,e){var i=t.getChildByName("listRp");i||((i=Nt.createSprite("com/ui/redPoint.png",null,t.width-50,0)).name="listRp",t.addChild(i),i.visible=!1),i.visible=!1,Tn.checkInlayRp(this.lingbaoVos[e])&&(i.visible=!0)},i.onHeadItemClick=function(t){if(Tn.curPalIndex!=t){if(0<=t){var e=pe.getPalByIndex(t);if(e){for(var i=[],s=Tn.infoOnArr,n=0;n<s.length;n++){var o=new Object;o.className="p_ling_bao",o=s[n];var a=Tn.getSpiritVoById(o.type_id);if(o.pal_id==e.pal_id&&a.suitId==Tn.curSuitId&&0!=o.rand_slot){i.push(o);break}}if(0<i.length){Tn.curPalId=e.pal_id,Tn.curPalIndex=t;var l=i[0];l&&(Tn.curPos=l.pos,this.update())}else Jt.addTip("该角色无可镶嵌符石的灵宝"),this.headPart.resetSelect(Tn.curPalIndex)}}}else this.update()},e}(),GR=function(t){function i(){this.headPart=null,this.secondView=null,this.replaceView=null,this.spiriTreTip=null,this.curSpiriTre=null,this.lingbaoVos=null,this.lingbaoVosOn=[],i.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_SPIRITRE"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_SPIRITRE_AUTO_SUIT_"+t,this.headPart.getItem(t),new Tt(39,10));this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.selSuit.list.vScrollBarSkin="com/ui/vscroll.png",this.selSuit.list.scrollBar.autoHide=!1,this.selSuit.visibleNum=10,this.selSuit.labels=Tn.getALLSuitNameByStr(),this.selSuit.on("change",this,this.onNameChange),this.selSuit.list.renderHandler=new Q(this,this.checkListRP);var e=pe.getPalByIndex(0);e&&(Tn.curPalId=e.pal_id,Tn.curPalIndex=0),this.checkBox.text.height=this.checkBox.height,this.checkBox.text.valign="middle",this.checkBox.on("change",this,this.onCheckBoxChange)}w(i,"modules.exercise.spiriTreasure.view.SpiriTreMainView",I_);var e=i.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onNameChange=function(){this.update()},e.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("SPIRITRE_MAINPAL_UPDATE",this,this.setPalIndex),T.register("SPIRITRE_MAIN_UPDATERP",this,this.updateRp),T.register("RP_SPIRITRE_AUTO_SUIT_",this,this.setData),T.register("SPIRITRE_CHANGE",this,this.onQuenchChange),this.headPart.resetSelect(Tn.curPalIndex),Tn.checkSuitListName(),this.selSuit.labels=Tn.getALLSuitNameByStr()},e.onUnDisplay=function(){this.saveCheckBox(),T.remove("SPIRITRE_MAINPAL_UPDATE",this,this.setPalIndex),T.remove("SPIRITRE_MAIN_UPDATERP",this,this.updateRp),T.remove("RP_SPIRITRE_AUTO_SUIT_",this,this.setData),T.remove("SPIRITRE_CHANGE",this,this.onQuenchChange)},e.onQuenchChange=function(t){this.selSuit.selectedIndex=t-1},e.setPalIndex=function(){this.headPart.resetSelect(Tn.curPalIndex);var t=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId);t&&(this.selSuit.selectedIndex=Tn.curSuitId-1,this.imgSelect.x=this["imgPos"+t.pos].x-8,this.imgSelect.y=this["imgPos"+t.pos].y-8)},e.onClick=function(t){var e=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,this.selSuit.selectedIndex+1);switch(t.target){case this.btnQuench:if(!e)return void Jt.addTip("该部位未装备灵宝！");this.secondView=this.secondView||new YR,this.secondView.openWindow(null,!1),this.secondView.tabselect=0;break;case this.btnAdvance:if(!e)return void Jt.addTip("该部位未装备灵宝！");this.secondView=this.secondView||new YR,this.secondView.openWindow(null,!1),this.secondView.tabselect=1;break;case this.btnInlay:if(1==this.btnInlay.gray)return;if(!e)return void Jt.addTip("该部位未装备灵宝！");this.secondView=this.secondView||new YR,this.secondView.openWindow(null,!1),this.secondView.tabselect=2;break;case this.btnChange:this.checkBox.selected?Tn.autoSuitKey?Al.ins().toAutoSuit(Tn.curSuitId,Tn.curPalId):Al.ins().openAutoSuitSortView():(this.replaceView=this.replaceView||new qR,this.replaceView.openWindow(null,!0));break;case this.imgSuit:Al.ins().toActive(0,3);break;case this.imgDes:Al.ins().toActive(0,2);break;default:if(t.target instanceof laya.ui.Image&&""!=t.target.name){var i=t.target.name,s=Number(i);this.imgSelect.x=t.target.x-8,this.imgSelect.y=t.target.y-8,Tn.curPos=s,this.update()}}},e.onCheckBoxChange=function(t){Tn.autoSuitCheck=this.checkBox.selected,Tn.checkAutoSuitRp()},e.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(Tn.curPalId=e.pal_id,Tn.curPalIndex=t,this.setData())}},e.setData=function(){this.lingbaoVos=Tn.getLingBaoByPal(),this.update()},e.updateList=function(){-1==this.selSuit.selectedIndex&&(this.selSuit.selectedIndex=0),Tn.curSuitId=this.selSuit.selectedIndex+1;for(var t=0;t<8;t++)this["imgPos"+(t+1)].skin="modules/goods/maxico/"+(10700101+100*(Tn.curSuitId-1)+t)+".png",this["imgBg"+(t+1)].skin="com/ui/goodsBg1.png",this["imgPos"+(t+1)].gray=!0;var e;if(this.lingbaoVos)for(var i in this.lingbaoVos){if(e=this.lingbaoVos[i],Tn.getSpiritVoById(e.type_id).suitId==Tn.curSuitId&&(this["imgPos"+e.pos].gray=!1,0<=e.purify_level)){var s=ur.getItem(e.type_id-12e6),n=1e4*e.purify_level+Number(s.path);s&&(this["imgPos"+e.pos].skin="modules/goods/maxico/"+n+".png"),this["imgBg"+e.pos].skin="com/ui/goodsBg"+(e.purify_level+3)+".png"}}},e.updateRp=function(){for(var t=Tn.infoArrOff,e=0;e<8;e++){var i,s=Tn.getOneSpiriTreInfo(Tn.curPalId,e+1,Tn.curSuitId),n=!1;for(var o in t){i=t[o];var a=Tn.getSpiritVoById(i.typeid);if(a.pos==e+1&&a.suitId==Tn.curSuitId){n=!0;break}}this["rp"+(e+1)].visible=!(!n||s),e+1==Tn.curPos&&(Tn.autoSuitCheck?this.rpCh.visible=0<Tn.getSingleCanEquipBySuitID(Tn.curSuitId,Tn.curPalId).length:this.rpCh.visible=!(!n||s)),1!=(n&&!s)&&(Tn.checkAdvanceRp(s)||Tn.checkInlayRp(s)||Tn.checkQuenchRp(s)?this["rp"+(e+1)].visible=!0:this["rp"+(e+1)].visible=!1)}Tn.checkBottomTabRP();var l=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId);l?(this.rpQu.visible=Tn.checkQuenchRp(l),this.rpAd.visible=Tn.checkAdvanceRp(l),this.rpIn.visible=Tn.checkInlayRp(l)):this.rpQu.visible=this.rpAd.visible=this.rpIn.visible=!1,this.rpSuit.visible=Tn.checkActivateRp(),this.rpLV.visible=Tn.checkAllSuitQuenchRp(),this.rpList.visible=Tn.checkAllSuitListRP()},e.checkListRP=function(t,e){var i=t.getChildByName("listRp");i||((i=Nt.createSprite("com/ui/redPoint.png",null,120,0)).name="listRp",t.addChild(i),i.visible=!1),i.visible=!1,Tn.autoSuitCheck?i.visible=0<Tn.getSingleCanEquipBySuitID(e+1,Tn.curPalId).length||Tn.checkSingleSuitListRP(e+1):i.visible=Tn.checkSingleSuitListRP(e+1)||Tn.checkSingleCanEquipBySuit(e+1)},e.update=function(){this.updateList(),this.checkBox.selected=Tn.autoSuitCheck;var t=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId);if(t)var e=Tn.getSpiritVoById(t.type_id);if(e&&e.suitId==Tn.curSuitId){this.btnChange.label="替换灵宝",this.imgBgCurs.skin="com/ui/goodsBg"+(t.purify_level+3)+".png";var i=ur.getItem(t.type_id-12e6),s=1e4*t.purify_level+Number(i.path);if(i&&(this.imgCurs.skin="modules/goods/maxico/"+s+".png"),this.imgCurs.gray=!1,e){this.txtName.text=0<t.rand_level?"[完美]"+e.name:e.name,this.txtLevel.text=""+e.level,0<t.rand_level?(this.txtRandLevel.visible=!0,this.txtRandLevel.text="+"+t.rand_level):this.txtRandLevel.visible=!1;var n=t.main_prop[0];this.txtAtt1.text=W.getName(n.prop_code)+"+"+n.prop_value,this.txtAtt2.text=kn.getPropStr(t,"rand_prop"),this.txtAtt2.color="#fff959"}var o=t.refine_prop.length;if(this.txtPower1.visible=this.txtLV.visible=this.txtAtt11.visible=this.txtAtt12.visible=this.txtAtt13.visible=this.txtAtt14.visible=!1,0<o){this.txtNo1.visible=!1,this.txtTitle1.text="淬炼";var a,l=0,r=0,h=kn.getPaddprop(t.refine_prop);for(var u in h)a=h[u],this["txtAtt1"+(l+1)].visible=!0,this["txtAtt1"+(l+1)].text=W.getName(a.prop_code)+"+"+a.prop_value,l++,r+=W.getAttrPower(a.prop_code,a.prop_value);this.txtAtt11.y=120,this.txtLV.text="Lv."+t.refine_star,this.txtLV.y=80,this.txtPower1.text="战斗力:"+Math.floor(r),this.txtPower1.visible=this.txtLV.visible=!0}else this.txtTitle1.text="淬炼",this.txtLV.text="Lv."+t.refine_star,this.txtLV.y=95,this.txtLV.visible=this.txtNo1.visible=!0;var c=t.purify_prop.length;if(this.txtAdd.visible=this.txtPower2.visible=this.txtQuality.visible=this.txtAtt21.visible=this.txtAtt22.visible=this.txtAtt23.visible=this.txtAtt24.visible=!1,0<c){this.txtNo2.visible=!1,this.txtQuality.y=80,this.txtAdd.visible=this.txtPower2.visible=this.txtQuality.visible=!0,this.txtTitle2.text="品质",this.txtQuality.text=Pn.SPIRITRE_ADVANCE[t.purify_level];var d,p=0,m=kn.getPaddprop(t.purify_prop),f=0;for(var _ in m)d=m[_],this["txtAtt2"+(p+1)].visible=!0,this["txtAtt2"+(p+1)].text=W.getName(d.prop_code)+"+"+d.prop_value,p++,f+=W.getAttrPower(d.prop_code,d.prop_value);this.txtAtt21.y=110,this.txtPower2.text="战斗力:"+Math.floor(f),this.txtAdd.text="(主属性"+(1==t.purify_level?20:2==t.purify_level?50:100)+"%)"}else this.txtTitle2.text="品质",this.txtQuality.text="普通",this.txtQuality.y=95,this.txtNo2.y=135,this.txtQuality.visible=this.txtNo2.visible=!0;var g=t.slot_prop.length;if(this.txtStone.visible=this.txtPower3.visible=this.txtAtt31.visible=this.txtAtt32.visible=!1,0<g&&1<t.rand_slot){var y,v=0,I=kn.getPaddprop(t.slot_prop),w=0;for(var b in I)y=I[b],this["txtAtt3"+(v+1)].visible=!0,this["txtAtt3"+(v+1)].text=W.getName(y.prop_code)+"+"+y.prop_value,v++,w+=W.getAttrPower(y.prop_code,y.prop_value);this.txtAtt31.y=120,this.txtNo3.visible=!1,this.btnInlay.gray=!1,this.txtPower3.text="战斗力:"+Math.floor(w),this.txtStone.visible=this.txtPower3.visible=this.imgSlot.visible=this.imgStone.visible=!0;var S=kn.getStoneName(t.rand_slot);this.imgStone.skin="modules/spiriTre/gem/"+S+".png",this.txtStone.text=kn.getSlotState(t.rand_slot)}else 1==t.rand_slot?(this.txtNo3.visible=!0,this.txtNo3.text="未镶嵌",this.btnInlay.gray=!1,this.imgSlot.visible=!0):(this.txtNo3.visible=!0,this.txtNo3.text="无插槽",this.btnInlay.gray=!0,this.imgSlot.visible=!1),this.imgStone.visible=!1}else{var x=22700101+100*(Tn.curSuitId-1)+(Tn.curPos-1),C=Tn.getSpiritVoById(x);this.imgBgCurs.skin="com/ui/goodsBg1.png",this.imgCurs.skin="modules/goods/maxico/"+(x-12e6)+".png",this.imgCurs.gray=!0,this.btnChange.label="装备灵宝",this.txtName.text=C.name,this.txtLevel.text="无",this.txtAtt1.text="无",this.txtAtt2.text="无",this.txtAtt2.color="#e1c6bc",this.txtTitle1.text="淬炼",this.txtNo1.visible=!0,this.txtLV.text="Lv.0",this.txtLV.y=95,this.txtPower3.visible=this.txtPower2.visible=this.txtPower1.visible=this.txtAtt12.visible=this.txtAtt11.visible=this.txtAtt13.visible=this.txtAtt14.visible=!1,this.txtStone.visible=this.txtAdd.visible=!1,this.txtTitle2.text="品质",this.txtQuality.text="普通",this.txtNo2.visible=!0,this.txtAtt21.visible=this.txtAtt22.visible=this.txtAtt23.visible=this.txtAtt24.visible=!1,this.txtAtt31.visible=this.txtAtt32.visible=!1,this.txtNo3.text="无插槽",this.txtNo3.visible=!0,this.btnInlay.gray=!0,this.imgSlot.visible=this.imgStone.visible=this.txtRandLevel.visible=!1}this.updateRp()},e.saveCheckBox=function(){for(var t=[].concat(Tn.sortArr),e=0;e<Tn.sortArr2.length;e++)t.push(Tn.sortArr2[e]);t.push(Tn.autoSuitCheck?1:0),Al.ins().toSetSort(t)},i}(),HR=function(t){function e(){this.headPart=null,this.conImg=null,this.rpLen=0,this.lingbaoVosOn=[],this.lingbaoVos=null,this.curLingbaoVo=null,this.curSpiriTreVo=null,e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.rpList.visible=!1,this.selEquip.list.vScrollBarSkin="com/ui/vscroll.png",this.selEquip.list.scrollBar.autoHide=!0,this.selEquip.on("change",this,this.onNameChange),this.selEquip.list.renderHandler=new Q(this,this.checkListRP),this.conImg=Me.createGoodsImage(0,0,null,null,!0,!1,105,!0),this.conImg.on("click",this,this.onTip),this.conImg.pos(0,0),this.spCon.addChild(this.conImg),this.addChild(this.headPart),this.on("click",this,this.onClick,null),this.on("display",this,this.onDisplay);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10))}w(e,"modules.exercise.spiriTreasure.view.SpiriTreQuenchView",w_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("ROLE_EXCHANGE_BACK_SUCC",this,this.ConsumeUpdate),T.register("SPIRITRE_ACTIVE",this,this.updateActivate),this.headPart.resetSelect(Tn.curPalIndex)},i.onUnDisplay=function(){T.remove("ROLE_EXCHANGE_BACK_SUCC",this,this.ConsumeUpdate),T.remove("SPIRITRE_ACTIVE",this,this.updateActivate)},i.onNameChange=function(){this.curLingbaoVo=this.lingbaoVos[this.selEquip.selectedIndex],this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id),Tn.curPos=this.curSpiriTreVo.pos,Tn.curSuitId=this.curSpiriTreVo.suitId,T.dispatch("SPIRITRE_CHANGE",Tn.curSuitId)),this.setData()},i.update=function(){if(this.lingbaoVos=[],this.lingbaoVosOn=Tn.infoOnArr,this.lingbaoVosOn)for(var t=0;t<this.lingbaoVosOn.length;t++){var e=this.lingbaoVosOn[t];e.pal_id==Tn.curPalId&&this.lingbaoVos.push(e)}this.curLingbaoVo=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId),this.curLingbaoVo&&(this.curSpiriTreVo=Tn.getSpiritVoById(this.curLingbaoVo.type_id)),Tn.checkAllPalHeadRP(),this.updateList()},i.updateList=function(){var t,e="",i=0,s=[],n=[];for(var o in this.rpLen=0,this.lingbaoVos){t=this.lingbaoVos[o];var a=Tn.getSpiritVoById(t.type_id);a&&(n.push(a.name+" Lv."+t.refine_star),s.push(a.name)),Tn.checkQuenchRp(t)&&(this.rpLen+=1)}for(var l=0;l<n.length;l++)e+=n[l],l!=n.length-1&&(e+=",");for(var r in""==e&&(e="其他部位无已装备灵宝"),this.selEquip.labels=e,s)s[r]==this.curSpiriTreVo.name&&(this.selEquip.selectedIndex=i),i++;0==this.rpLen?this.rpList.visible=!1:this.rpList.visible=!0},i.onClick=function(t){switch(t.target){case this.imgDes:Al.ins().toActive(0,2);break;case this.btnQuench:if(1==this.btnQuench.gray)break;this.checkConsume()?Al.ins().toQuench(Tn.curPalId,this.curLingbaoVo.type_id):ba.show(this.conImg.data.id)}},i.setData=function(){if(this.curSpiriTreVo&&this.curLingbaoVo){this.imgBgEquip.skin="com/ui/goodsBg"+(this.curLingbaoVo.purify_level+3)+".png";var t=ur.getItem(this.curLingbaoVo.type_id-12e6),e=Number(t.path)+1e4*this.curLingbaoVo.purify_level;this.imgEquip.skin="modules/goods/maxico/"+e+".png",this.txtName.text=0<this.curLingbaoVo.rand_level?"[完美]"+this.curSpiriTreVo.name:this.curSpiriTreVo.name;for(var i=this.curLingbaoVo.refine_star,s=0;s<10;s++)this["star"+(s+1)].skin=s<i?"modules/spiriTre/star_light.png":"modules/spiriTre/star_gray.png";var n=10==i?Tn.getSpiritreQuAtt(this.curLingbaoVo.pos,this.curLingbaoVo.refine_star-1):Tn.getSpiritreQuAtt(this.curLingbaoVo.pos,this.curLingbaoVo.refine_star);if(1<=i){var o=Tn.getSpiritreQuAtt(this.curLingbaoVo.pos,this.curLingbaoVo.refine_star-1),a=new Object;a.className="p_add_prop",a.prop_code=o[0],a.prop_value=o[1];var l=[];l[0]=a}var r=new Object;r.className="p_add_prop",r.prop_code=n[0],r.prop_value=n[1];var h=[];h[0]=r,this.txtCurAtt1.text=0==i?W.getName(n[0])+"0":W.getName(o[0])+"+"+o[1],this.txtCurAtt2.text=0==i?"战斗力+0":"战斗力+"+W.getAddExtraPower(l).toFixed(),this.txtNextAtt1.text=10==i?"  已满级":W.getName(n[0])+"+"+n[1],this.txtNextAtt2.text=10==i?"   已满级":"战斗力+"+W.getAddExtraPower(h).toFixed(),this.txtPro.text="成功率："+Tn.getSpiritreQuProByLevel(i)+"%",this.txtPro.visible=10!=i,this.btnQuench.gray=10==i,this.btnQuench.label=10==i?"已满级":"淬炼";var u=10==i?Tn.getSpiritreQuConByLevel(10):Tn.getSpiritreQuConByLevel(i+1);if(u&&0<u.length){var c=ur.getItem(u[0]);this.conImg.data=c,this.conImg.num=xo.getGoodsNumByType(xo.GOODS_ID,c.id),0==this.conImg.num?this.conImg.imgContent.gray=!0:this.conImg.imgContent.gray=!1,this.txtCon.text="消耗："+c.name+" x"+u[1],this.imgBgCon.skin="com/ui/goodsBg"+c.color+".png"}}this.rpQu.visible=Tn.checkQuenchRp(this.curLingbaoVo),this.rpTarget.visible=Tn.checkAllSuitQuenchRp()},i.onTip=function(t){var e=t.currentTarget;e.data&&(e.data.tempNum=xo.getGoodsNumByType(xo.GOODS_ID,e.data.id),Ae.show(e.data,"BASE_GOODS_TIP"))},i.checkConsume=function(){return!this.conImg.data||0!=xo.getGoodsNumByType(xo.GOODS_ID,this.conImg.data.id)},i.ConsumeUpdate=function(){this.conImg.data&&(this.conImg.num=xo.getGoodsNumByType(xo.GOODS_ID,this.conImg.data.id),this.conImg.imgContent.gray=!1)},i.checkListRP=function(t,e){var i=t.getChildByName("listRp");i||((i=Nt.createSprite("com/ui/redPoint.png",null,t.width-50,0)).name="listRp",t.addChild(i),i.visible=!1),i.visible=!1,Tn.checkQuenchRp(this.lingbaoVos[e])&&(i.visible=!0)},i.updateActivate=function(t){10==Tn.getAllLv()?this.rpTarget.visible=0==t.target_num:this.rpTarget.visible=!1},i.onHeadItemClick=function(t){if(Tn.curPalIndex!=t){if(0<=t){var e=pe.getPalByIndex(t);if(e){for(var i=[],s=Tn.infoOnArr,n=0;n<s.length;n++){var o=new Object;o.className="p_ling_bao",o=s[n];var a=Tn.getSpiritVoById(o.type_id);if(o.pal_id==e.pal_id&&Tn.curSuitId==a.suitId){i.push(o);break}}if(0<i.length){Tn.curPalId=e.pal_id,Tn.curPalIndex=t;var l=i[0];l&&(Tn.curPos=l.pos,this.update())}else Jt.addTip("对应角色尚未装备灵宝，无法淬炼"),this.headPart.resetSelect(Tn.curPalIndex)}}}else this.update()},e}(),WR=function(t){function e(){this.headPart=null,this.showArr=[!1,!1,!1,!1],this._infoArr=[],e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart),this.on("click",this,this.onClick,null);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));this.list.itemRender=VR,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.repeatX=6,this.list.spaceY=0,this.list.spaceX=0,this.on("display",this,this.onDisplay),this.selSuit.list.vScrollBarSkin="com/ui/vscroll.png",this.selSuit.list.scrollBar.autoHide=!0,this.selSuit.on("change",this,this.onNameChange),this.rpRe.visible=!1}w(e,"modules.exercise.spiriTreasure.view.SpiriTreRecastView",b_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onNameChange=function(){Tn.curSuitId=this.selSuit.selectedIndex+1,Tn.resetSelectArr(),this.update()},i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("SPIRITRE_RECAST_UPDATEGET",this,this.updateGet),T.register("SPIRITRE_RECAST_UPDATE",this,this.setData),Tn.resetSelectArr(),this.setData(),this.headPart.resetSelect(Tn.curPalIndex)},i.onUnDisplay=function(){T.remove("SPIRITRE_RECAST_UPDATEGET",this,this.updateGet),T.remove("SPIRITRE_RECAST_UPDATE",this,this.setData)},i.updateList=function(){var t,e="",i=0,s=[],n=[];for(var o in this._infoArr){t=this._infoArr[o];var a=Tn.getSpiritVoById(t.typeid);if(a&&-1==s.indexOf(a.suitId)){var l=Tn.getSuitNameById(a.suitId);null!=l&&(n.push(l),s[i]=a.suitId,i++)}}for(var r=0;r<n.length;r++)e+=n[r],r!=n.length-1&&(e+=",");""==e||null==e?(e="无",this.selSuit.labels=e,this.selSuit.selectedIndex=0):(this.selSuit.labels=e,this.selSuit.selectedIndex=Tn.curSuitId)},i.onClick=function(t){switch(t.target){case this.btnRecast:for(var e=0;e<this.showArr.length;e++)if(!this.showArr[e])return void Jt.addTip("请放入四件相同的套装！");var i,s=[];for(var n in Tn.selectArr){i=Tn.selectArr[n];var o=new Object;o.className="p_kv",o.id=i.id,o.val=1,s.push(o)}Al.ins().toRecast(s)}},i.updateGet=function(){for(var t=0;t<4;t++){var e=Tn.selectArr[t];this.showArr[t]=!!e}for(var i=0;i<this.showArr.length;i++)if(this.showArr[i]){var s=Tn.selectArr[i];if(s){var n=ur.getItem(s.typeid-12e6);this["img"+(i+1)].skin="modules/goods/maxico/"+n.path+".png"}}else this["img"+(i+1)].skin="com/ui/itemAddBg.png"},i.update=function(){this.updateGet();var t,e=[],i=0,s=this.selSuit.selectedLabel;for(var n in this._infoArr){t=this._infoArr[n];var o=Tn.getSpiritVoById(t.typeid);if(Tn.getSuitNameById(o.suitId)==s){var a=new Object;a.p=t,a.type=1,e[i]=a,i++}}this.list.dataSource=e},i.setData=function(){this._infoArr=Tn.infoArrOff,this.updateList()},i.onHeadItemClick=function(t){if(0<=t){var e=pe.getPalByIndex(t);e&&(Tn.curPalId=e.pal_id,Tn.curPalIndex=t)}},e}(),qR=function(t){function e(){this.sortView=null,this._infoArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=BR,this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.repeatX=1,this.list.repeatY=3,this.list.spaceY=0,this.txtLink.underline=!0,this.txtLink.underlineColor="#96f254",this.txtLink.mouseEnabled=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreReplacePanel",S_);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("SPIRITRE_REPLACE_UPDATE",this,this.setData),this.setData()},i.onUnDisplay=function(){T.register("SPIRITRE_REPLACE_UPDATE",this,this.setData),Al.ins().setMainViewPalIndex()},i.update=function(){var t=22700101+100*(Tn.curSuitId-1)+(Tn.curPos-1),e=Tn.getSpiritVoById(t);this.imgBg.skin="com/ui/goodsBg1.png";var i,s=ur.getItem(t-12e6),n=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId);if(this.imgCurs.skin="modules/goods/maxico/"+s.path+".png",n){this.imgBg.skin="com/ui/goodsBg"+(Number(n.purify_level)+3)+".png";var o=1e4*Number(n.purify_level)+Number(s.path);s&&(this.imgCurs.skin="modules/goods/maxico/"+o+".png")}if(n&&(i=Tn.getSpiritVoById(n.type_id)),this.titleBg.skin="modules/spiriTre/spiritreon.png",i){this.titleBg.skin="modules/spiriTre/spiritrereplace.png",this.imgCurs.gray=!1,this.txtName.text=i.name,this.txtLevel.text=0<n.rand_level?i.level+"+"+n.rand_level:""+i.level;var a=n.main_prop[0];this.txtAtt1.text=W.getName(a.prop_code)+"+"+a.prop_value,this.txtAtt2.text=kn.getPropStr(n,"rand_prop"),this.txtAtt2.color="#fff959",this.txtSlot.text=0<n.rand_slot?"有":"无"}else this.titleBg.skin="modules/spiriTre/spiritreon.png",this.imgCurs.gray=!0,this.txtName.text=e.name,this.txtLevel.text="无",this.txtAtt1.text="无",this.txtAtt2.text="无",this.txtAtt2.color="#5d3924",this.txtSlot.text="无"},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnclose2:this.closeWindow();break;case this.txtLink:this.sortView=this.sortView||new XR,this.sortView.openWindow(null,!0)}},i.setData=function(){this._infoArr=Tn.infoArrOff;var t,e=[],i=0;for(var s in this._infoArr){t=this._infoArr[s];var n=Tn.getSpiritVoById(t.typeid);n.pos==Tn.curPos&&n.suitId==Tn.curSuitId&&(e[i]=t,i++)}this.list.dataSource=Tn.getSortedArr(e),this.update()},e}(),YR=function(t){function e(){this.curView=null,this.quenchView=null,this.advanceView=null,this.inlayView=null,this.curLingbaoVo=null,this.nowTabIndex=0,e.__super.call(this),this.setWindowType(),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),Nt.register("RP_SPIRITRE_QUENCH",this.tab.items[0]),Nt.register("RP_SPIRITRE_ADVANCE",this.tab.items[1]),Nt.register("RP_SPIRITRE_INLAY",this.tab.items[2])}w(e,"modules.exercise.spiriTreasure.view.SpiriTreSecView",x_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose2:this.closeWindow()}},i.onTabChange=function(t){switch(this.spView.removeChild(this.curView),t){case 0:this.quenchView=this.quenchView||new HR,this.curView=this.quenchView,Tn.curSpiritViewTab=5,this.nowTabIndex=0;break;case 1:this.advanceView=this.advanceView||new MR,this.curView=this.advanceView,Tn.curSpiritViewTab=6,this.nowTabIndex=1;break;case 2:if(this.curLingbaoVo=Tn.getOneSpiriTreInfo(Tn.curPalId,Tn.curPos,Tn.curSuitId),0==Tn.checkInlaySlot(this.curLingbaoVo)){Jt.addTip("本灵宝无插槽，无法镶嵌"),this.tab.selectedIndex=this.nowTabIndex;break}this.inlayView=this.inlayView||new UR,this.curView=this.inlayView,Tn.curSpiritViewTab=7,this.nowTabIndex=2}this.spView.pos(12,80),this.spView.addChild(this.curView),this.curView.update()},i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),T.register("SPIRITRE_SEC_UPDATE",this,this.update),this.tab&&(this.tab.selectedIndex=0)},i.onUnDisplay=function(){Al.ins().setMainViewPalIndex()},i.update=function(){this.curView&&this.curView.update(),Tn.checkSpecBottomTabRp()},I(0,i,"tabselect",null,function(t){this.tab.selectedIndex=t}),e}(),XR=function(t){function e(){this._sortArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreSortPanel",C_);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),this._sortArr=Tn.sortArr,this.update()},i.onUnDisplay=function(){for(var t=[].concat(this._sortArr),e=0;e<Tn.sortArr2.length;e++)t.push(Tn.sortArr2[e]);t.push(Tn.autoSuitCheck?1:0),Al.ins().toSetSort(t)},i.update=function(){var t=[[1,2,3],[4,5,6],[7,8,9]];this["imgCir"+this._sortArr[0]].skin=this["imgCir"+(3+this._sortArr[1])].skin=this["imgCir"+(6+this._sortArr[2])].skin="modules/spiriTre/cir2.png";for(var e=0;e<3;e++)for(var i=0;i<3;i++)this._sortArr[e]==t[e][i]-3*e&&(t[e][i]=0);for(e=0;e<3;e++)for(i=0;i<3;i++)0<t[e][i]&&(this["imgCir"+t[e][i]].skin="modules/spiriTre/cir1.png")},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.imgCir1:var e=this._sortArr[0];1==this._sortArr[1]?this._sortArr[1]=e:1==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=1;break;case this.imgCir2:e=this._sortArr[0];2==this._sortArr[1]?this._sortArr[1]=e:2==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=2;break;case this.imgCir3:e=this._sortArr[0];3==this._sortArr[1]?this._sortArr[1]=e:3==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=3;break;case this.imgCir4:e=this._sortArr[1];1==this._sortArr[0]?this._sortArr[0]=e:1==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=1;break;case this.imgCir5:e=this._sortArr[1];2==this._sortArr[0]?this._sortArr[0]=e:2==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=2;break;case this.imgCir6:e=this._sortArr[1];3==this._sortArr[0]?this._sortArr[0]=e:3==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=3;break;case this.imgCir7:e=this._sortArr[2];1==this._sortArr[0]?this._sortArr[0]=e:1==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=1;break;case this.imgCir8:e=this._sortArr[2];2==this._sortArr[0]?this._sortArr[0]=e:2==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=2;break;case this.imgCir9:e=this._sortArr[2];3==this._sortArr[0]?this._sortArr[0]=e:3==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=3}this.update()},e}(),KR=function(t){function e(){this._sortArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.cb.text.height=this.cb.height,this.cb.text.valign="middle",this.cb.on("change",this,this.onChange)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreSuitSortView",P_);var i=e.prototype;return i.onDisplay=function(){this._sortArr=Tn.sortArr2,this.update()},i.onChange=function(t){Tn.autoSuitKey=this.cb.selected},i.onSure=function(){for(var t=[].concat(Tn.sortArr),e=0;e<this._sortArr.length;e++)t.push(this._sortArr[e]);t.push(Tn.autoSuitCheck?1:0),Al.ins().toSetSort(t),Al.ins().toAutoSuit(Tn.curSuitId,Tn.curPalId)},i.update=function(){var t=[[1,2,3],[4,5,6],[7,8,9]];this["imgCir"+this._sortArr[0]].skin=this["imgCir"+(3+this._sortArr[1])].skin=this["imgCir"+(6+this._sortArr[2])].skin="modules/spiriTre/cir2.png";for(var e=0;e<3;e++)for(var i=0;i<3;i++)this._sortArr[e]==t[e][i]-3*e&&(t[e][i]=0);for(e=0;e<3;e++)for(i=0;i<3;i++)0<t[e][i]&&(this["imgCir"+t[e][i]].skin="modules/spiriTre/cir1.png")},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnSure:this.onSure();break;case this.imgCir1:var e=this._sortArr[0];1==this._sortArr[1]?this._sortArr[1]=e:1==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=1;break;case this.imgCir2:e=this._sortArr[0];2==this._sortArr[1]?this._sortArr[1]=e:2==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=2;break;case this.imgCir3:e=this._sortArr[0];3==this._sortArr[1]?this._sortArr[1]=e:3==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[0]=3;break;case this.imgCir4:e=this._sortArr[1];1==this._sortArr[0]?this._sortArr[0]=e:1==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=1;break;case this.imgCir5:e=this._sortArr[1];2==this._sortArr[0]?this._sortArr[0]=e:2==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=2;break;case this.imgCir6:e=this._sortArr[1];3==this._sortArr[0]?this._sortArr[0]=e:3==this._sortArr[2]&&(this._sortArr[2]=e),this._sortArr[1]=3;break;case this.imgCir7:e=this._sortArr[2];1==this._sortArr[0]?this._sortArr[0]=e:1==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=1;break;case this.imgCir8:e=this._sortArr[2];2==this._sortArr[0]?this._sortArr[0]=e:2==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=2;break;case this.imgCir9:e=this._sortArr[2];3==this._sortArr[0]?this._sortArr[0]=e:3==this._sortArr[1]&&(this._sortArr[1]=e),this._sortArr[2]=3}this.update()},e}(),jR=(function(t){function e(){this.headPart=null,e.__super.call(this),this.headPart=new kh,this.headPart.pos(91,1),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_RUNE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10))}w(e,"modules.exercise.spiriTreasure.view.SpiriTreTransferView",T_);var i=e.prototype;h.imps(i,{"com.ui.IViewUpdate":!0}),i.onHeadItemClick=function(){},i.update=function(){}}(),function(t){function e(){this.curView=null,this.mainView=null,this.transferView=null,this.decompView=null,this.recastView=null,e.__super.call(this),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.on("display",this,this.onDisplay),Nt.register("RP_SPIRITRE_BUTTON",this.tab.items[0]),Nt.register("RP_SPIRITRE_DECOMP",this.tab.items[1]),Nt.register("RP_SPIRITRE_RECAST",this.tab.items[2])}w(e,"modules.exercise.spiriTreasure.view.SpiriTreView",k_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onTabChange=function(t){switch(this.spView.removeChild(this.curView),t){case 0:this.mainView=this.mainView||new GR,this.curView=this.mainView,Tn.curSpiritViewTab=1;break;case 1:this.decompView=this.decompView||new FR,this.curView=this.decompView,Tn.curSpiritViewTab=3;break;case 2:this.recastView=this.recastView||new WR,this.curView=this.recastView,Tn.curSpiritViewTab=4}this.spView.addChild(this.curView),this.curView.update()},i.onDisplay=function(t){this.tab&&(this.tab.selectedIndex=0)},i.update=function(){this.curView&&this.curView.update()},I(0,i,"tabselect",null,function(t){this.tab.selectedIndex=t}),e}()),QR=function(t){function e(){this.pfire=null,this.firevo=null,this.curIndex=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.exercise.strangeFire.view.StrangeFireAttrView",A_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnL:0<this.curIndex&&(this.curIndex--,this.update());break;case this.btnR:this.curIndex<3&&(this.curIndex++,this.update());break;case this.btnClose:this.closeWindow();break;case this.txtGet:El.ins().openTargetView(this.curIndex+1)}},i.onDisplay=function(){this.curIndex=An.getFireIndexByFireId(An.curFireId),this.update()},i.update=function(){this.pfire=An.getStrangeFirePByIndex(this.curIndex),this.firevo=An.getFireVOByIndex(this.curIndex),this.firevo&&(this.txtName.text=this.firevo.name),this.updateBase(),this.updateSpc(),this.updateQuality(),this.updateBtn()},i.updateBtn=function(){0==this.curIndex?(this.btnL.visible=!1,this.btnR.visible=!0):3==this.curIndex?(this.btnL.visible=!0,this.btnR.visible=!1):this.btnL.visible=this.btnR.visible=!0},i.updateBase=function(){var t,e=this.firevo?this.firevo.id:0,i=An.getBaseAttrs(e),s=this.pfire?this.pfire.quality:0,n=An.getQualityVO(e,s);if(null==i||0==i.length){i=i||[];for(var o=0;o<An.baseInfo.comAttrKeyList.length;o++)i.push({key:An.baseInfo.comAttrKeyList[o],val:0})}for(var a in i){var l="";if(l=(t=i[a]).val+"",n)l+="+"+Math.floor(t.val*n.baseAttrVal/100);else l+="+0";this["input"+t.key].text=l}},i.updateSpc=function(){var t=this.firevo?this.firevo.id:0,e=An.getTargetQuality(t),i=An.getTargetVO(e),s="";s+=i?i.spcAttr+"%":"0%";var n=this.pfire?this.pfire.quality:0,o=An.getQualityVO(An.curFireId,n);s+=o?"+"+o.spcAttr+"%":"+0%",this.inputSpc.text=s},i.updateQuality=function(){var t=this.pfire?this.pfire.quality:0,e=(this.firevo&&this.firevo.id,An.getQualityVO(An.curFireId,t));e?(this.txtQualityName.text=e.name,this.txtQualityDesc.text=e.baseDesc+" "+e.spcDesc):(this.txtQualityName.text="",this.txtQualityDesc.text="")},e}(),zR=function(t){function e(){this.items=null,this.curGoodsImage=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.exercise.strangeFire.view.StrangeFireBagPanel",E_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.btnInlay:this.curGoodsImage?El.ins().toMagatama(An.curOperateType,An.curFireId,An.curOperatePos,this.curGoodsImage.pData.typeid):Jt.addTip("请先选择要镶嵌的勾玉")}},i.update=function(t){t=t.sort(this.sortStones),this.items=this.items||[],this.list.removeChildren();for(var e=0;e<t.length;e++){var i=this.items[e];null==i&&(i=new fh(null,!1,!0,90,!0),this.list.addChild(i),i.on("click",this,this.onClickItem));var s=e%5*100,n=95*Math.floor(e/5);i.pos(s,n),i.pData=t[e],0==e&&(this.curGoodsImage=i,this.imgSelected.visible=!0,this.imgSelected.pos(this.list.x+this.list.content.x+this.curGoodsImage.x-10,this.list.y+this.list.content.y+this.curGoodsImage.y-10))}},i.sortStones=function(t,e){var i=An.getStoneById(t.typeid),s=An.getStoneById(e.typeid),n=0;return i&&s?i.quality>s.quality?n=-1:i.quality<s.quality?n=1:i.quality==s.quality&&(n=0):n=0,n},i.onClickItem=function(t){this.curGoodsImage=t.target,this.curGoodsImage&&(this.imgSelected.visible=!0,this.imgSelected.pos(this.list.x+this.list.content.x+this.curGoodsImage.x-10,this.list.y+this.list.content.y+this.curGoodsImage.y-10))},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.imgSelected.visible=!1,this.curGoodsImage=null},e}(),$R=function(t){function e(){this.itemPos=[[300,180],[460,260],[525,405],[465,550],[300,625],[135,550],[70,405],[130,260]],this.items=null,this.bar=null,this.eff=null,this.effChange=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.initItems(),this.bar=new it(0,0,150,25,"modules/biographyCard/bloodBar.png","modules/biographyCard/bloodBarBg.png",[1,1,1,1],[0,15,0,15],[4,13,4,13],"#ffffff",24),this.spBar.addChild(this.bar),this.on("click",this,this.onClick),this.eff=b.getOne(),this.eff.pos(350,430),this.addChild(this.eff)}w(e,"modules.exercise.strangeFire.view.StrangeFireInlayPanel",R_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow();break;case this.btnOneKey:var e=An.getOneKeyInlayStones1();e&&0<e.length&&El.ins().oneKeyToMagatama(e);break;case this.imgTarget:El.ins().openTargetView(An.curFireId)}},i.initItems=function(){this.items=[];for(var t=0;t<8;t++){var e=new NR;e.pos(this.itemPos[t][0],this.itemPos[t][1]),e.index=t+1,this.addChild(e),this.items.push(e),e.on("click",this,this.onClickItem)}},i.onClickItem=function(t){var e=t.target;if(e){var i=[];e.data?0<(i=An.getBetterBagStones(e.data.val)).length?(An.curOperatePos=e.index,An.curOperateType=2,El.ins().openBagPanel(i)):Jt.addTip("当前背包中无更高品质勾玉"):0<(i=An.getBagStones()).length?(An.curOperatePos=e.index,An.curOperateType=1,El.ins().openBagPanel(i)):ba.show(10309001)}},i.update=function(){this.updateInfo(),this.updateIconEff(),this.checkBtnRP()},i.updateInfo=function(){var t=An.getStrangeFireP(An.curFireId),e=[];t&&(e=t.magatama);var i=2;if(t&&t.magatama&&8==t.magatama.length?(i=dn.getLowestQuality(t.magatama),this.imgStone.skin="modules/strangeFire/smallStone"+i+".png"):this.imgStone.skin="modules/strangeFire/smallStone2.png",t&&t.magatama){var s=dn.getFireTarQualityNum(i,t.magatama);this.bar.setValue(s,8)}else this.bar.setValue(0,8);var n=An.getFireVoById(An.curFireId);n&&(this.txtName.text=n.name);for(var o=0;o<8;o++){var a,l=this.items[o],r=!1;for(var h in e)if((a=e[h]).id==o+1){l.dataSource=a,r=!0;break}0==r&&(l.dataSource=null)}},i.updateIconEff=function(){var t=An.getStrangeFireP(An.curFireId);if(t&&t.magatama&&8==t.magatama.length){var e=dn.getLowestQuality(t.magatama);e<5&&(e+=1),this.eff.y=430,this.eff.loadAndPlay("modules/strangeFire/effect/fireEffMiddle"+An.curFireId,"default",0,!0)}else this.eff.y=480,this.eff.loadAndPlay("modules/strangeFire/effect/crystalEffBig"+An.curFireId,"default",0,!0)},i.showChangeEffect=function(){this.effChange=this.effChange||b.getOne(),this.effChange.pos(350,455),null==this.effChange.parent&&(this.addChild(this.effChange),this.effChange.setEndHandler(Q.create(this,this.effectEnd))),this.effChange.loadAndPlay("modules/strangeFire/effect/fireEffChange","default",0,!0)},i.effectEnd=function(){this.updateIconEff()},i.checkBtnRP=function(){var t,e=An.magatamaRP;for(var i in e)(t=e[i]).id==An.curFireId&&(1==t.emptyMagatama||1==t.magatamaUp?this.imgRP.visible=!0:this.imgRP.visible=!1)},e}(),ZR=function(t){function e(){this._data=null,this.bar=null,this.glowFilter=null,this.eff=null,e.__super.call(this),this.bar=new it(0,0,100,20,"modules/biographyCard/bloodBar.png","modules/biographyCard/bloodBarBg.png",[1,1,1,1],[0,15,0,15],[4,13,4,13],"#ffffff",18),this.spBar.addChild(this.bar),this.eff=b.getOne(),this.eff.pos(50,90),this.addChild(this.eff)}w(e,"modules.exercise.strangeFire.view.StrangeFireItem",t);var i=e.prototype;return i.update=function(){var t=An.getStrangeFireP(this._data.id);this._data&&(this.txtName.color=cn.STRANGE_FIRE_COLORS[this._data.id-1]);var e=2;if(t&&t.magatama&&8==t.magatama.length?(e=dn.getLowestQuality(t.magatama),this.imgStone.skin="modules/strangeFire/smallStone"+e+".png",this.eff.loadAndPlay("modules/strangeFire/effect/fireEffSmall"+this._data.id,"default",0,!0),this.txtName.text=this._data.name1):(this.imgStone.skin="modules/strangeFire/smallStone2.png",this.eff.loadAndPlay("modules/strangeFire/effect/crystalEffSmall"+this._data.id,"default",0,!0),this.txtName.text=this._data.name),t&&t.magatama){var i=dn.getFireTarQualityNum(e,t.magatama);this.bar.setValue(i,8)}else this.bar.setValue(0,8)},i.isSelected=function(t){t?(this.glowFilter=this.glowFilter||new Y("#ffff00",5,0,0),this.imgBg.filters=[this.glowFilter]):this.imgBg.filters=[]},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data}),e}(O_),JR=function(t){function e(){this.fireListView=null,this.eff=null,this.firevo=null,this.bcIcon=null,e.__super.call(this),this.fireListView=new bh,this.fireListView.pos(75,635),this.fireListView.on("StrangeFireListView.CHOOSE",this,this.onFireItemClick),this.addChild(this.fireListView),this.txtDesc.style.lineHeight=35,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.eff=b.getOne(),this.eff.pos(360,390),this.addChild(this.eff)}w(e,"modules.exercise.strangeFire.view.StrangeFireMainView",L_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){0==An.curFireId&&An.fires[0]&&(An.curFireId=An.fires[0].id)},i.onClick=function(t){switch(t.target){case this.btnInaly:pt.send(46,2,"异火-镶嵌勾玉"),El.ins().openInlayPanel();break;case this.imgViewTarget:El.ins().openTargetView(An.curFireId)}},i.onFireItemClick=function(t){t&&(An.curFireId=t.id,this.update())},i.update=function(){this.fireListView.update();var t=An.getStrangeFireP(An.curFireId);t&&t.magatama&&8==t.magatama.length?(this.bcIcon=this.bcIcon||b.getOne(),this.bcIcon.visible=!0,this.bcIcon.pos(0,0),this.bcIcon.loadAndPlay("","default",0,!0),this.imgName.pos(304,440),this.imgName.skin="modules/strangeFire/fireName"+An.curFireId+".png",this.eff.pos(360,357),this.eff.loadAndPlay("modules/strangeFire/effect/fireEffBig"+An.curFireId,"default",0,!0)):(this.bcIcon&&(this.bcIcon.visible=!1),this.imgName.pos(304,424),this.imgName.skin="modules/strangeFire/baseName"+An.curFireId+".png",this.eff.pos(360,390),this.eff.loadAndPlay("modules/strangeFire/effect/crystalEffBig"+An.curFireId,"default",0,!0)),this.getAttrInfo(),this.updatePower(),this.checkBtnRP()},i.updatePower=function(){for(var t,e=this.getAttr(),i=0,s=1,n=An.getTargetQuality(An.curFireId),o=An.getTargetVOsByFireId(An.curFireId),a=0;a<e.length;a++)i+=Math.floor(W.getAttrPower(e[a].key,e[a].val));if(console.log("异火战力",i),pe.pals&&(s=pe.pals.length),i*=s,0<n)for(var l in o)(t=o[l]).fireId==An.curFireId&&t.quality==n&&(i+=t.spcPower*s);var r=k.numToTexture(i,"com/ui/powerNum");this.imgArrt.graphics.clear();for(var h=0;h<r.length;h++){var u=r[h];this.imgArrt.graphics.drawTexture(u,u.width*h)}},i.getAttr=function(){this.firevo=An.getFireVOByIndex(An.curFireId-1);var t=this.firevo?this.firevo.id:0,e=An.getBaseAttrs(t);if(null==e||0==e.length){e=e||[];for(var i=0;i<An.baseInfo.comAttrKeyList.length;i++)e.push({key:An.baseInfo.comAttrKeyList[i],val:0})}return e},i.getAttrInfo=function(){for(var t,e=An.getTargetQuality(An.curFireId),i=An.getTargetVOsByFireId(An.curFireId),s=this.getAttr(),n=0;n<s.length;n++)this["txtAttr"+(n+1)].innerHTML=Z.span(W.getName(s[n].key)+"+"+s[n].val,"#ffe0cf",24)+"<br/>";for(var o in i)(t=i[o]).fireId==An.curFireId&&t.quality==e?this.txtDesc.innerHTML=Z.span(this.firevo.skillDesc,"#ffe0cf",24)+Z.span(t.spcAttr+"%","#96f254",24):e<2&&(this.txtDesc.innerHTML="")},i.checkBtnRP=function(){var t,e=An.magatamaRP;for(var i in e)(t=e[i]).id==An.curFireId&&(1==t.emptyMagatama||1==t.magatamaUp?this.imgRP.visible=!0:this.imgRP.visible=!1)},e}(),tO=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.exercise.strangeFire.view.StrangeFireQualityEffItem",t);var i=e.prototype;return i.update=function(){this.txtName.text=this._data.name,this.txtDesc.text=this._data.baseDesc+this._data.spcDesc},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(D_),eO=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=tO,this.list.dataSource=An.getQualitys(An.curFireId)}return w(e,"modules.exercise.strangeFire.view.StrangeFireQualityEffPreviewPanel",N_),e}(),iO=(function(t){function e(){this.fireListView=null,this.bar=null,this.eff=null,this.bcIcon=null,e.__super.call(this),this.fireListView=new bh,this.fireListView.pos(75,695),this.fireListView.on("StrangeFireListView.CHOOSE",this,this.onFireItemClick),this.addChild(this.fireListView),this.bar=new it(10,5,200,25,"com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7],[1,1,1,1],"#ffffff",24),this.spBar.addChild(this.bar),this.on("click",this,this.onClick),this.eff=b.getOne(),this.eff.pos(360,430),this.addChild(this.eff),this.on("display",this,this.onDisplay)}w(e,"modules.exercise.strangeFire.view.StrangeFireQualityView",V_);var i=e.prototype;h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){},i.onClick=function(t){switch(t.target){case this.btnQualityUp:var e=An.getStrangeFireP(An.curFireId),i=0;e&&(i=e.quality);var s=An.getQualityVO(An.curFireId,i);if(s)xo.getGoodsNumByTypeID(parseInt(s.costInfos[0]))>=parseInt(s.costInfos[1])||Jt.addTip("道具不足");break;case this.imgViewEff:El.ins().openQualityEffPreviewPanel()}},i.onFireItemClick=function(t){t&&(An.curFireId=t.id,this.update())},i.update=function(){this.fireListView.update();var t=An.getStrangeFireP(An.curFireId),e=0,i=0;t&&(e=t.quality,i=t.bless),this.imgQuality.skin="modules/strangeFire/quality"+e+".png",t&&t.magatama&&8==t.magatama.length?(this.bcIcon=this.bcIcon||b.getOne(),this.bcIcon.visible=!0,this.bcIcon.pos(0,0),this.bcIcon.loadAndPlay("","default",0,!0),this.imgName.skin="modules/strangeFire/fireName"+An.curFireId+".png",this.eff.loadAndPlay("modules/strangeFire/effect/fireEffBig"+An.curFireId,"default",0,!0)):(this.bcIcon&&(this.bcIcon.visible=!1),this.imgName.skin="modules/strangeFire/baseName"+An.curFireId+".png",this.eff.loadAndPlay("modules/strangeFire/effect/crystalEffBig"+An.curFireId,"default",0,!0));var s=An.getQualityVO(An.curFireId,e);if(s){this.txtDesc.text=s.baseDesc,this.bar.setValue(i,s.exp);var n=ur.getItem(parseInt(s.costInfos[0]));n?(this.txtCost.text="【"+n.name+"】×"+s.costInfos[1],this.txtCost.color=U.getColorDark(n.color)):this.txtCost.text="",this.txtUpRate.text="提升成功率："+s.rate+"%"}else this.bar.setValue(0,0),this.txtUpRate.text="提升成功率：";e<An.baseInfo.qualityMaxLevel?(this.btnQualityUp.disabled=!1,this.spTip.visible=!0,this.txtCost.visible=!0,this.txtCostDesc.visible=!0,this.btnQualityUp.label="品质提升"):(this.btnQualityUp.disabled=!0,this.spTip.visible=!1,this.txtCost.visible=!1,this.txtCostDesc.visible=!1,this.btnQualityUp.label="已满级")}}(),function(t){function e(){this.fireListView=null,this.eff=null,this.refineLevel=0,this.nextLevel=1,this.refineTargetInfo=null,this.minRefineLv=0,this.bcIcon=null,e.__super.call(this),this.refinereAimLv,this.fireListView=new bh,this.fireListView.pos(75,635),this.fireListView.on("StrangeFireListView.CHOOSE",this,this.onFireItemClick),this.addChild(this.fireListView),this.refineTargetInfo=An.getRefineTargetInfo(),this.txtScore.style.align="center",this.txtDesc.style.lineHeight=35,this.on("click",this,this.onClick),this.eff=b.getOne(),this.eff.pos(360,390),this.addChild(this.eff),this.on("display",this,this.onDisplay),Nt.register("RP_STRANGEFIRE_REFINE_AIM_UP",this.imgTarget)}w(e,"modules.exercise.strangeFire.view.StrangeFireRefineView",B_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){},i.onClick=function(t){switch(t.target){case this.btnRefine:if(this.isHasEnoughScore()){var e=An.getStrangeFireP(An.curFireId);e&&e.refine_level<An.baseInfo.refineMaxLevel&&El.ins().toRefine(An.curFireId);break}this.onLink();break;case this.imgTarget:var i=new Yt;Ae.show(i,"STRANGEFIRE_REFINE_TIP")}},i.onFireItemClick=function(t){t&&(An.curFireId=t.id,this.update())},i.onLink=function(){ba.show(10309020)},i.update=function(){this.fireListView.update(),this.minRefineLv=An.getMinRefineLv();var t=An.getStrangeFireP(An.curFireId);t&&(this.refineLevel=t.refine_level),this.txtTitle.text="淬炼属性Lv."+this.refineLevel,t&&t.magatama&&8==t.magatama.length?(this.bcIcon=this.bcIcon||b.getOne(),this.bcIcon.visible=!0,this.bcIcon.pos(0,0),this.bcIcon.loadAndPlay("","default",0,!0),this.eff.pos(360,357),this.imgName.pos(304,440),this.imgName.skin="modules/strangeFire/fireName"+An.curFireId+".png",this.eff.loadAndPlay("modules/strangeFire/effect/fireEffBig"+An.curFireId,"default",0,!0)):(this.bcIcon&&(this.bcIcon.visible=!1),this.eff.pos(360,390),this.imgName.pos(304,424),this.imgName.skin="modules/strangeFire/baseName"+An.curFireId+".png",this.eff.loadAndPlay("modules/strangeFire/effect/crystalEffBig"+An.curFireId,"default",0,!0));var e=An.getRefineVOByLv(this.refineLevel);this.refineLevel<An.baseInfo.refineMaxLevel?(this.nextLevel=this.refineLevel+1,e&&this.getAttrInfo(this.refineLevel,e),this.btnRefine.disabled=!1,this.txtScore.visible=!0,this.btnRefine.label="淬炼异火"):(e&&this.getAttrInfo(this.refineLevel,e),this.btnRefine.disabled=!0,this.txtScore.visible=!1,this.btnRefine.label="已满级");var i,s=An.refineCosts,n=0,o=0;if(s&&(0==this.refineLevel?(n=pe.getScore(23),o=Math.floor(s.startCost),this.txtScore.innerHTML=n<o?Z.span("消耗源火：","#ffe0cf",24)+Z.span(""+n,"#ff4949",24)+Z.span("/"+o,"#ffe0cf",24):Z.span("消耗源火：","#ffe0cf",24)+Z.span(""+n,"#ffe0cf",24)+Z.span("/"+o,"#ffe0cf",24)):((n=pe.getScore(23))<(o=Math.floor(s.startCost+s.cost*this.refineLevel+(this.refineLevel-1)*this.refineLevel*s.costAdd/2))?(i=Z.span("消耗源火：","#ffe0cf",24),i+=Z.span(""+n,"#ff4949",24)):(i=Z.span("消耗源火：","#ffe0cf",24),i+=Z.span(""+n,"#ffe0cf",24)),i+=Z.span("/"+o,"#ffe0cf",24),this.txtScore.innerHTML=i)),e){for(var a,l=this.getAttr(this.refineLevel,e),r=0,h=1,u=An.curFireRefineAimLv,c=An.getRefineTargetInfo(),d=0;d<l.length;d++)r+=Math.floor(W.getAttrPower(l[d].key,l[d].val));if(pe.pals&&(h=pe.pals.length),0<u)for(var p in c)(a=c[p]).step==u&&(r+=a.spcPower*h);var m=k.numToTexture(r,"com/ui/powerNum");this.imgArrt.graphics.clear();for(var f=0;f<m.length;f++){var _=m[f];this.imgArrt.graphics.drawTexture(_,_.width*f)}}this.checkBtnRP()},i.getAttr=function(t,e){for(var i=[],s=e.attrInfos,n=An.baseInfo.comAttrKeyList,o=0;o<n.length;o++)i.push({key:n[o],val:Math.floor(e.attrStartValList[o]+s[o]*t+(t-1)*t*e.attrValsAddList[o]/2)});return i},i.getAttrInfo=function(t,e){var i=An.baseInfo.comAttrKeyList;this.refinereAimLv=An.curFireRefineAimLv;var s=this.getCurStep(this.refinereAimLv);if(0==t)for(var n=0;n<i.length;n++)this["txtAttr"+(n+1)].innerHTML=Z.span(W.getName(i[n])+"+0","#ffe0cf",24)+Z.span("(下级"+Math.floor(e.attrStartValList[n]+1*e.attrInfos[n]+0*e.attrValsAddList[n]/2)+")","#96f254",24)+"<br/>";else if(t==An.baseInfo.refineMaxLevel){for(var o=0;o<i.length;o++)this["txtAttr"+(o+1)].innerHTML=Z.span(W.getName(i[o]),"#ffe0cf",24)+Z.span("+"+Math.floor(e.attrStartValList[o]+t*e.attrInfos[o]+(t-1)*t*e.attrValsAddList[o]/2),"#ffe0cf",24)+"<br/>";this.txtDesc.innerHTML=Z.span(s.desc,"#ffe0cf",24)}else if(0==this.refinereAimLv)for(var a=0;a<i.length;a++)this["txtAttr"+(a+1)].innerHTML=Z.span(W.getName(i[a]),"#ffe0cf",24)+Z.span("+"+Math.floor(e.attrStartValList[a]+t*e.attrInfos[a]+(t-1)*t*e.attrValsAddList[a]/2),"#ffe0cf",24)+Z.span("(下级"+Math.floor(e.attrStartValList[a]+(t+1)*e.attrInfos[a]+(t+1)*t*e.attrValsAddList[a]/2)+")","#96f254",24)+"<br/>";else{for(var l=0;l<i.length;l++)this["txtAttr"+(l+1)].innerHTML=Z.span(W.getName(i[l]),"#ffe0cf",24)+Z.span("+"+Math.floor(e.attrStartValList[l]+t*e.attrInfos[l]+(t-1)*t*e.attrValsAddList[l]/2),"#ffe0cf",24)+Z.span("(下级"+Math.floor(e.attrStartValList[l]+(t+1)*e.attrInfos[l]+(t+1)*t*e.attrValsAddList[l]/2)+")","#96f254",24)+"<br/>";this.txtDesc.innerHTML=Z.span(s.desc,"#ffe0cf",24)}},i.getCurStep=function(t){var e;for(var i in this.refineTargetInfo)if((e=this.refineTargetInfo[i]).step==this.refinereAimLv)return e;return null},i.getAttrColor=function(t,e){for(var i="",s=e.attrInfos,n=An.baseInfo.comAttrKeyList,o=0;o<n.length;o++)i+=Z.span(W.getName(n[o]),"#ffe0cf",20)+k.getEmpty(2)+Z.span("+"+Math.floor(e.attrStartValList[o]+s[o]*t+(t-1)*t*e.attrValsAddList[o]/2),"#96f254",20)+"<br/>";return i},i.isHasEnoughScore=function(){return!!(An.refineCosts&&pe.getScore(23)>this.getLvUpCost(this.refineLevel))},i.getLvUpCost=function(t){var e=An.refineCosts;return e&&Math.floor(e.startCost+e.cost*t+(t-1)*t*e.costAdd/2),null},i.checkBtnRP=function(){var t,e=An.magatamaRP;for(var i in e)(t=e[i]).id==An.curFireId&&(1==t.refine?this.imgRP.visible=!0:this.imgRP.visible=!1)},e}()),sO=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtDesc.style.lineHeight=30,this.txtDesc.style.align="center"}w(e,"modules.exercise.strangeFire.view.StrangeFireTargetView",M_);var i=e.prototype;return i.update=function(t){var e,i=An.getTargetQuality(t),s=An.getTargetVOsByFireId(t),n=An.getFireVoById(t);for(var o in s)(e=s[o]).fireId==t&&e.quality==i?(this["txtTarget"+e.quality].color="#96f254",this["txtSkill"+e.quality].color="#96f254"):(this["txtTarget"+e.quality].color="#ffe0cf",this["txtSkill"+e.quality].color="#ffe0cf");this.txtDesc.innerHTML=Z.span(n.desc,"#ffe0cf")+Z.span(n.skillDesc,"#fcf476")+Z.span("，提高的数值取决镶嵌的勾玉","#ffe0cf")},i.showBg=function(t){this.imgBg.visible=t},e}(),nO=function(t){function e(){this.curView=null,this.mainView=null,this.refineView=null,this.qualityView=null,e.__super.call(this),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.on("display",this,this.onDisplay),Nt.register("RP_STRANGEFIRE_MAGATAMA",this.tab.items[0]),Nt.register("RP_STRANGEFIRE_REFINE_UP",this.tab.items[1]),Nt.register("RP_STRANGEFIRE_REFINE_AIM_UP",this.tab.items[1])}w(e,"modules.exercise.strangeFire.view.StrangeFireView",F_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(t){this.tab&&(this.tab.selectedIndex=0)},i.onTabChange=function(t){switch(this.spView.removeChild(this.curView),t){case 0:An.curFireId=1,this.mainView=this.mainView||new JR,this.curView=this.mainView,An.curFireViewTab=1,An.checkStrangeFireRP();break;case 1:pt.send(46,3,"异火-淬炼"),this.refineView=this.refineView||new iO,this.curView=this.refineView,An.curFireViewTab=2,An.checkStrangeFireRP()}this.spView.addChild(this.curView),this.curView.update()},i.update=function(){this.curView&&this.curView.update()},e}(),oO=function(t){function e(){this._canActive=!1,this._data=null,this.info=null,this.talimanStepView=0,this.talimanRefineView=1,this.talimanStoneView=2,this.curViewIndex=0,this.lv=0,this.step=0,e.__super.call(this)}w(e,"modules.exercise.talisman.item.TalimanCardItem",U_);var i=e.prototype;return i.updateStone=function(t){for(;0<this.spStone.numChildren;){this.spStone.removeChildAt(this.spStone.numChildren-1).destroy()}switch(this.curViewIndex){case this.talimanStepView:if(this._data){var e=Rn.getTalimanAttrVO(this._data.color);if(this.info)for(var i=0;i<e.maxStep;i++){var s=new et;i<this.info.grade?s.skin="modules/taliman/star3.png":s.skin="modules/taliman/star2.png",this.spStone.addChild(s)}else for(i=0;i<e.maxStep;i++){(s=new et).skin="modules/taliman/star2.png",this.spStone.addChild(s)}rt.layoutHorizontalInCenter(this.spStone,10,this.spStone.width,25,-3)}break;case this.talimanRefineView:var n=new at;this._data&&(this.info&&(n.text="lv."+this.info.lv),n.color="#FFFFFF",n.fontSize=28,this.spStone.addChild(n),n.width=108,n.align="center");break;case this.talimanStoneView:if(this._data){for(i=0;i<2;i++){var o=new ch;o.showStone=null,this.spStone.addChild(o)}rt.layoutHorizontalInCenter(this.spStone,15,this.spStone.width,35,3)}var a;if(null!=t)for(var l in t)a=t[l],(o=this.spStone.getChildAt(a.id-1)).showStone=a.val,console.log("TalimanStoneHole")}},I(0,i,"canActive",null,function(t){this._canActive=t}),I(0,i,"dataSource",function(){return this._data},function(t){if("number"==typeof t[0]&&Math.floor(t[0])==t[0]?(this.info=Rn.getTalimanInfo(t[0]),this._data=Rn.getTalimanVO(t[0])):"p_talisman"==t[0].className&&(this._data=Rn.getTalimanVO(t[0].type_id),this.info=t[0]),this.curViewIndex=t[1],this.updateStone(this.info?this.info.gems:null),this._data){var e=Rn.getTalimanAttrVO(this._data.color);this.imgTaliman.skin="modules/taliman/img/taliman"+this._data.id+".png",this.imgCard.skin="modules/taliman/img/card"+this._data.color+".png",this.info?(this.lv=this.info.lv,this.step=this.info.grade,Rn.curTalimanOpen[this._data.id]=!0,this.imgTaliman.gray=!1,this.imgCard.gray=!1,Rn.curTalimanAlreadyOpen[this._data.id]=!1):(this.lv=0,this.step=0,Rn.curTalimanOpen[this._data.id]=!1,this.imgTaliman.gray=!0,this.imgCard.gray=!0,Rn.curTalimanAlreadyOpen[this._data.id]=this._canActive&&0<xo.getGoodsNumByTypeID(this._data.id));for(var i,s,n=!1,o=0,a=0;a<e.refinePayFormulaArr.length;a++)if(this.lv+1==e.refinePayFormulaArr[a][0]){o=e.refinePayFormulaArr[a][1];break}i=o<=xo.getGoodsNumByTypeID(e.refinePayGoods)&&this.lv<e.maxRefine;for(var l=0,r=0;r<e.stepPayFormulaArr.length;r++)if(this.step+1==e.stepPayFormulaArr[r][0]){l=e.stepPayFormulaArr[r][1];break}if(s=l<=xo.getGoodsNumByTypeID(e.stepPayGoods)&&this.step<e.maxStep,this.info&&Rn.checkPackHasGem())if(2<=this.info.gems.length)n=!1;else if(this.info.gems.length<=0)n=!0;else{for(var h in this.info.gems)1==this.info.gems[h].id?3<=this.info.grade&&(n=!0):n=!0}this._data&&Rn.curTalimanOpen[this._data.id]&&(i||s||n)?this.PRimg.visible=!0:this.PRimg.visible=!1}}),I(0,i,"isChoice",null,function(t){this.lightImg.visible=t}),e}(),aO=function(t){function e(){this._data=null,this.goods=null,e.__super.call(this),this.goods=new Ah(90,100,!1,!0,!0,!0,120),this.goods.pos(30,30),this.addChild(this.goods),this.btnInlay.on("click",this,this.onClick)}w(e,"modules.exercise.talisman.item.TalimanStoneInlayItem",t);var i=e.prototype;return i.onClick=function(){if("镶嵌"==this.btnInlay.label){var t,e=[];if((e=e.concat(xo.getGoodsByGoodsType(10600)))&&0<e.length)for(var i in e){if(t=e[i],Rn.getTalimanGemVO(t.typeid).id==this._data.id){Rl.ins().toGems(Rn.curTalimanID,Rn.curChooseStonePos,t.id);break}}}else if("购买并镶嵌"==this.btnInlay.label){var s=ur.getItem(this._data.id),n=Object.keys(s.priceDic),o=2==n[0]?pe.gold:pe.silver,a=2==n[0]?"元宝":"铜钱";if(s&&o>=parseInt(s.priceDic[n[0]])){var l=Z.span("是否花费","#5d3924")+Z.span(s.priceDic[n[0]]+a,"#F7EF5F")+Z.span("购买1个","#5d3924")+Z.span("【"+s.name+"】？",U.getColorLight(s.color));Lo.showSecAlert(l,this,this.toExchange,null,"talimanStoneInlayBuy")}else Lo.showAlert()}},i.toExchange=function(){Rl.ins().curSelectGem=this._data,Tr.ins().toExchange(26,this._data.id,1)},i.update=function(){var t=xo.getGoodsByTypeID(this._data.id);if(t)this.goods.goods=t,this.btnInlay.label="镶嵌",this.spCost.visible=!1;else{var e=ur.getItem(this._data.id);this.goods.dataSource=e,this.btnInlay.label="购买并镶嵌",this.spCost.visible=!0;var i=Object.keys(e.priceDic);this.priceImg.skin=2==i[0]?"com/ui/gold.png":"com/ui/copper.png",this.txtCost.text=e.priceDic[i[0]]+""}for(var s="",n=0;n<this._data.gemFormulaArr.length;n++)s+=W.getName(this._data.gemAttrKeyArr[n])+": "+this._data.gemFormulaArr[n]+"\n";this.txtAttr.text=s},I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(G_),lO=function(t){function e(t){this.stonePos=0,this.upPercentObj={2:"0%",3:"25%",4:"50%",5:"75%",6:"100%"},this.curInfo=null,this._open=0,this.needActivate=0,this.canBeSet=1,this.threeStepActivate=2,this.hasBeenSet=3,e.__super.call(this),this.stonePos=t,this.on("click",this,this.offGems)}w(e,"modules.exercise.talisman.item.TalimanStoneItem",H_);var i=e.prototype;return i.offGems=function(t){t.target==this.offBtn&&this.open==this.hasBeenSet&&(Rn.curChooseStonePos=this.stonePos,Rl.ins().openStoneDisaPanel())},i.reset=function(){for(var t=0;t<4;t++)this["txtAttr"+t].text=""},I(0,i,"data",function(){return this.curInfo},function(t){if(this.curInfo=t,this.reset(),this.curInfo){var e=Rn.getTalimanGemVO(t.val);if(e)for(var i=0;i<e.gemAttrKeyArr.length;i++)this["txtAttr"+i].text=W.getName(e.gemAttrKeyArr[i])+"："+e.gemFormulaArr[i];this.txtNo.visible=!1;var s=Rn.getTalimanGemVO(this.curInfo.val);s&&(this.imgStone.skin="modules/goods/maxico/fabaos"+s.color+".png");var n=Rn.curChooseTalimanVO;2==n.color?(this.potentialActive.visible=!1,this.arrow.visible=!1):(this.potentialActive.visible=!0,this.arrow.visible=!0,this.potentialActive.color=U.COLORS_DARK[n.color],this.potentialActive.text="潜能激活："+this.upPercentObj[n.color]),this.open=this.hasBeenSet,this.offBtn.visible=!0}else this.potentialActive.visible=!1,this.arrow.visible=!1,this.open==this.hasBeenSet&&(this.open=this.canBeSet),this.txtNo.visible=!0,this.offBtn.visible=!1}),I(0,i,"open",function(){return this._open},function(t){this._open=t,this._open===this.canBeSet?(this.txtNo.text="可镶嵌",this.imgStone.skin="modules/taliman/img/add.png"):this._open===this.needActivate?(this.txtNo.text="法宝激活后解锁",this.imgStone.skin="modules/taliman/img/lock.png"):this._open===this.threeStepActivate&&(this.txtNo.text="进阶三星解锁",this.imgStone.skin="modules/taliman/img/lock.png")}),e}(),rO=function(t){function e(){this.attrTypes=[11,49,13,46,7],this.curIndex=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.btnClose.on("click",this,this.onClick),this.btnL.on("click",this,this.onChangeGodEquipL),this.btnR.on("click",this,this.onChangeGodEquipR),this.talimanCurIndex()}w(e,"modules.exercise.talisman.view.TalimanAttrPanel",W_);var i=e.prototype;return i.onClick=function(t){this.closeWindow()},i.talimanCurIndex=function(){for(var t=Rn.curChooseTalimanVO,e=0;e<Rn.talimanListAfterSort.length;e++)if(Rn.talimanListAfterSort[e].dataSource.id==t.id){this.curIndex=e;break}},i.update=function(t){this.txt4.visible=t,this.attrImg4.visible=t;var e=Rn.talimanListAfterSort[this.curIndex],i=Rn.getTalimanVO(e.dataSource.id);if(t){for(d=0;d<this.attrTypes.length;d++)this["txt"+d].text=d<4?W.getName(this.attrTypes[d])+"：":En.getSpcAttrNameStr(this.attrTypes[d]);for(d=0;d<5;d++)this["attr"+d].text=d<4?"0":"0%";var s=Rn.getAllTalimanAttr(),n=0;if(s)for(var o in s)0<=(n=this.attrTypes.indexOf(parseInt(o)))&&(this["attr"+n].text=s[o]);var a,l=Rn.getAllTalimanSpcAttr();for(var r in l)a=l[r],0<=(n=this.attrTypes.indexOf(a.id))&&(this["attr"+n].text=a.val+"%")}else if(i){this.txtName.text=i.name;var h=Rn.getTalimanAttr(i.id),u=Object.keys(h),c=Rn.getTalimanInfo(i.id);if(u)for(var d=0;d<4;d++)this["txt"+d].text=W.getName(parseInt(u[d]))+"：",u[d]&&c?this["attr"+d].text=h[u[d]]:this["attr"+d].text="0"}},i.onChangeGodEquipL=function(){0==this.curIndex?this.curIndex=Rn.talimanListAfterSort.length-1:this.curIndex--,this.update(!1)},i.onChangeGodEquipR=function(){this.curIndex==Rn.talimanListAfterSort.length-1?this.curIndex=0:this.curIndex++,this.update(!1)},e}(),hO=function(t){function e(){this.curView=null,this.stepView=null,this.refineView=null,this.stoneView=null,this.clip=null,this.isInit=!1,this._curSelectItem=null,this._searchList=null,this.curSelectIndex=0,this.vo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.panel.hScrollBarSkin="com/ui/hscroll.png",this.panel.hScrollBar.autoHide=!0,this.clip=b.getOne(),this.clip.pos(340,250),this.spDetail.addChild(this.clip),this.tab.on("change",this,this.onTabChange),this.txtLink.on("click",this,this.onLink),Nt.register("RP_TALISMAN_STEP_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_TALISMAN_REFINE_UP",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_TALISMAN_GEM_ADD",this.tab.items[2],new Tt(19,-10)),this.inputSearch.prompt="请输入法宝名称",this.btnSearch.on("click",this,this.onClickSearch),this.inputSearch.on("input",this,this.onSearchChange),this.on("undisplay",this,this.unDisplay)}w(e,"modules.exercise.talisman.view.TalimanDetailPanel",q_);var i=e.prototype;return i.onTabChange=function(t){switch(this.spView.removeChildren(),this.spDetail.visible=!0,this.inputSearch.text.length?this.searchItem(this.inputSearch.text):this.updateFbItems(),this.tab.selectedIndex){case 0:this.stepView=this.stepView||new dO,this.spView.addChild(this.stepView),this.curView=this.stepView;break;case 1:this.refineView=this.refineView||new cO,this.spView.addChild(this.refineView),this.curView=this.refineView;break;case 2:this.stoneView=Rl.ins().newTalimanStoneView(),this.spView.addChild(this.stoneView),this.curView=this.stoneView}this.curView&&this.curView.update(),this.checkShowClip()},i.tabSelect=function(t){this.tab.selectedIndex=t},i.onLink=function(t){Rl.ins().openAttrPanel(!1)},i.checkShowClip=function(){this.clip.scale(1,1),this.vo?this.vo&&(this.clip.visible=!0,this.clip.loadAndPlay("unit/effect/talisman_"+this.vo.color,"default",0,!0)):this.clip.visible=!1},i.onClickItem=function(t){this._curSelectItem&&(this._curSelectItem.isChoice=!1),this._curSelectItem=t.currentTarget,this._curSelectItem.isChoice=!0;var e=this.panel.getChildIndex(this._curSelectItem);this._curSelectItem&&this._curSelectItem.dataSource&&(this.curSelectIndex=e,Rn.curChooseTalimanVO=Rn.getTalimanVO(this._curSelectItem.dataSource.id),Rn.checkTalismanAllRP(),this.update())},i.updateView=function(){if((t=Rn.bookCards)&&(this.curView&&this.curView.update(),this.vo=Rn.curChooseTalimanVO,this.checkShowClip(),this.vo&&(this.txtName.skin="modules/taliman/img/name"+this.vo.id+".png",this.stone.skin="modules/taliman/img/taliman"+this.vo.id+"_1.png",this.stoneBg.skin="modules/taliman/img/card"+this.vo.color+"_1.png",k.setPowerImgInSprite(this.spPower,Rn.getOneTalimanPower(this.vo.id)*pe.user.pals.length)),this.vo)){var t,e=Rn.getTalimanBaseAttr(this.vo.id);if(t=Object.keys(e))for(var i=0;i<4;i++)t[i]?this["txtAttr"+(i+1)].text=W.getName(parseInt(t[i]))+"："+e[t[i]]:this["txtAttr"+(i+1)].text=""}},i.update=function(){this.updateFbItems(this._searchList),this.updateView()},i.resetItems=function(){for(var t;0<this.panel.numChildren;)(t=this.panel.removeChildAt(this.panel.numChildren-1)).offAll("click"),kt.recover("TalimanCardItem",t)},i.getOneItem=function(t){return this.panel.getChildAt(t)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.tab.selectedIndex=0},i.checkIsInit=function(t){this.isInit=t},i.onClickSearch=function(){var t=this.inputSearch.text;t.length?this.searchItem(t):Jt.addTip("请输入搜索内容")},i.onSearchChange=function(){this.inputSearch.text.length||this.updateFbItems()},i.searchItem=function(t){for(var e=[],i=Rn.bookCards,s=0;s<i.length;s++){-1!=Rn.getTalimanVO(i[s]).name.indexOf(t)&&e.push(i[s])}e.length?this.updateFbItems(e):Jt.addTip("搜索失败，没有该道具")},i.updateFbItems=function(t){var e;this.resetItems(),e=t||Rn.bookCards;for(var i,s=[],n=0;n<e.length;n++)(i=kt.getItemByClass("TalimanCardItem",oO)).canActive=!0,i.dataSource=[e[n],this.tab.selectedIndex],i.on("click",this,this.onClickItem),s.push(i);for(s=On.sortByQuality(s),Rn.talimanListAfterSort=[],this.isInit&&Rn.getTalimanInfo(s[0].dataSource.id)&&(this.curSelectIndex=0,Rn.curChooseTalimanVO=Rn.getTalimanVO(s[0].dataSource.id),Rn.checkTalismanAllRP(),this.isInit=!1),n=0;n<s.length;n++)Rn.curChooseTalimanVO.id==s[n].dataSource.id?(this.curSelectIndex=n,this._curSelectItem=s[n],s[n].isChoice=!0):s[n].isChoice=!1,Rn.talimanListAfterSort.push(s[n]),this.panel.addChild(s[n]);this._searchList=s,rt.layoutGrid(this.panel,this.panel.numChildren,22,0),this.panel.refresh()},i.unDisplay=function(){this.inputSearch.text="",this._searchList=null},e}(),uO=function(t){function e(){this.tabselect=0,this.detailPanel=null,e.__super.call(this),this.setWindowType(),this.viewPanel.vScrollBarSkin=""}w(e,"modules.exercise.talisman.view.TalimanMainPanel",Y_);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){var t=Rn.bookCards;this.viewPanel&&0<this.viewPanel.numChildren&&this.viewPanel.removeChildren(),this.detailPanel=this.detailPanel||Rl.ins().openDetailPanel(),this.viewPanel.addChild(this.detailPanel),Rn.curChooseTalimanVO||(Rn.curChooseTalimanVO=Rn.getTalimanVO(t[0])),this.detailPanel.checkIsInit(!0),this.detailPanel.update(),this.detailPanel.tabSelect(this.tabselect),this.viewPanel.refresh()},e}(),cO=function(t){function e(){this.vo=null,this.info=null,this.canUp=!1,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.exercise.talisman.view.TalimanRefineView",X_);var i=e.prototype;return i.onClick=function(t){if(this.vo){var e=Rn.getTalimanAttrVO(this.vo.color);switch(t.target){case this.btn:Rn.getTalimanInfo(this.vo.id)?this.canUp?Rl.ins().toUp(this.vo.id,1):ba.show(e.refinePayGoods):Rn.curTalimanAlreadyOpen[this.vo.id]?Jt.addTip("法宝尚未激活，前往背包激活法宝"):Rn.curTalimanAlreadyOpen[this.vo.id]||Jt.addTip(this.vo.refineGetWayTip);break;case this.txtLink:ba.show(e.refinePayGoods)}}},i.update=function(){this.vo=Rn.curChooseTalimanVO;var t=Rn.getTalimanAttrVO(this.vo.color);if(this.vo){this.info=Rn.getTalimanInfo(this.vo.id);var e=this.info?this.info.lv:0;this.txtLv.text="强化等级：LV."+e,this.payIconImg.skin="modules/goods/maxico/"+ur.getItem(t.refinePayGoods).path+".png";for(var i=[],s=[],n=0;n<t.refineFormulaArr.length;n++)0==e?i.push(0):e==t.refineFormulaArr[n][0]&&i.push(t.refineFormulaArr[n][1]),e+1==t.refineFormulaArr[n][0]&&s.push(t.refineFormulaArr[n][1]);for(n=0;n<t.refineAttrKeyArr.length;n++)s[n]?this["html"+n].innerHTML=Z.font2(W.getName(t.refineAttrKeyArr[n])+"："+i[n],16769231)+Z.font2("（下级"+s[n]+"）",9892436):this["html"+n].innerHTML=Z.font2(W.getName(t.refineAttrKeyArr[n])+"："+i[n],16769231);this.html0.contextWidth>=this.html1.contextWidth?this.html0.x=this.html1.x=255<this.html0.contextWidth?124-(this.html0.contextWidth-255):124:this.html0.x=this.html1.x=255<this.html1.contextWidth?124-(this.html1.contextWidth-255):124;var o=ur.getItem(t.refinePayGoods),a=o?o.name:"",l=0;for(n=0;n<t.refinePayFormulaArr.length;n++)e+1==t.refinePayFormulaArr[n][0]&&(l=t.refinePayFormulaArr[n][1]);var r=xo.getGoodsNumByTypeID(t.refinePayGoods),h=l;this.canUp=h<=r,this.txtLink.text="获取"+a,this.txtNum.text=r+"/"+h,e>=t.maxRefine?(this.imgMax.visible=!0,this.btn.visible=this.txtLink.visible=this.txtNum.visible=this.RPimg.visible=!1,Rn.checkTalismanAllRP()):(this.imgMax.visible=!1,this.btn.visible=this.txtLink.visible=this.txtNum.visible=!0),this.vo&&Rn.getTalimanInfo(this.vo.id)&&this.canUp?this.RPimg.visible=!0:this.RPimg.visible=!1}},e}(),dO=function(t){function e(){this.vo=null,this.info=null,this.canUp=!1,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.exercise.talisman.view.TalimanStepView",K_);var i=e.prototype;return i.onClick=function(t){if(this.vo){var e=Rn.getTalimanAttrVO(this.vo.color);switch(t.target){case this.btn:Rn.getTalimanInfo(this.vo.id)?this.canUp?Rl.ins().toUp(this.vo.id,2):ba.show(e.stepPayGoods):Rn.curTalimanAlreadyOpen[this.vo.id]?Jt.addTip("法宝尚未激活，前往背包激活法宝"):Rn.curTalimanAlreadyOpen[this.vo.id]||Jt.addTip(this.vo.stepGetWayTip);break;case this.txtLink:ba.show(e.stepPayGoods)}}},i.update=function(){this.vo=Rn.curChooseTalimanVO;var t=0;if(this.vo){var e=Rn.getTalimanAttrVO(this.vo.color);this.payIconImg.skin="modules/goods/maxico/"+ur.getItem(e.stepPayGoods).path+".png",this.info=Rn.getTalimanInfo(this.vo.id),t=this.info?this.info.grade:0;for(var i=[],s=[],n=0;n<e.stepFormulaArr.length;n++)t==e.stepFormulaArr[n][0]&&i.push(e.stepFormulaArr[n][1]),t+1==e.stepFormulaArr[n][0]&&s.push(e.stepFormulaArr[n][1]);for(n=0;n<e.stepAttrKeyArr.length;n++)s[n]?this["html"+n].innerHTML=Z.font2(W.getName(e.stepAttrKeyArr[n])+"："+i[n],16769231)+Z.font2("（下级"+s[n]+"）",9892436):this["html"+n].innerHTML=Z.font2(W.getName(e.stepAttrKeyArr[n])+"："+i[n],16769231);this.html0.contextWidth>=this.html1.contextWidth?this.html0.x=this.html1.x=250<this.html0.contextWidth?113-(this.html0.contextWidth-250):113:this.html0.x=this.html1.x=250<this.html1.contextWidth?113-(this.html1.contextWidth-250):113;var o=0;for(n=0;n<e.stepPayFormulaArr.length;n++)t+1==e.stepPayFormulaArr[n][0]&&(o=e.stepPayFormulaArr[n][1]);var a=ur.getItem(e.stepPayGoods),l=a?a.name:"",r=xo.getGoodsNumByTypeID(e.stepPayGoods),h=o;this.canUp=h<=r,this.txtNum.text=r+"/"+h,this.txtLink.text="获取"+l;for(n=0;n<e.maxStep;n++)this["imgStar"+n].skin=n<t?"modules/taliman/star1.png":"modules/taliman/star0.png";this.vo&&Rn.getTalimanInfo(this.vo.id)&&this.canUp?this.RPimg.visible=!0:this.RPimg.visible=!1,t>=e.maxStep?(this.imgMax.visible=!0,this.btn.visible=this.txtLink.visible=this.txtNum.visible=this.RPimg.visible=!1,Rn.checkTalismanAllRP()):(this.imgMax.visible=!1,this.btn.visible=this.txtLink.visible=this.txtNum.visible=!0)}},e}(),pO=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=aO,this.list.scrollBar.autoHide=!0,this.on("click",this,this.onClick),this.helpBtn.on("click",this,this.onHelpTip)}w(e,"modules.exercise.talisman.view.TalimanStoneInlayPanel",j_);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.onHelpTip=function(){(new zF).popup()},i.onSelectChange=function(t){this.update()},i.update=function(){var t;t=Rn.getInlayStones(Rn.curChooseTalimanVO.id),this.list.dataSource=t},e}(),mO=function(t){function e(){this.itemPos=[105,400,105,570],this.itemLeft=null,this.itemRight=null,this.vo=null,this.info=null,e.__super.call(this),this.itemLeft=new lO(1),this.vo=Rn.curChooseTalimanVO,this.vo&&Rn.getTalimanInfo(this.vo.id)?this.itemLeft.open=1:this.itemLeft.open=0,this.itemLeft.pos(this.itemPos[0],this.itemPos[1]),this.itemLeft.on("click",this,this.onClickItem),this.sp.addChild(this.itemLeft),this.itemRight=new lO(2),this.itemRight.pos(this.itemPos[2],this.itemPos[3]),this.itemRight.on("click",this,this.onClickItem),this.sp.addChild(this.itemRight)}w(e,"modules.exercise.talisman.view.TalimanStoneView",Q_);var i=e.prototype;return i.onClickItem=function(t){var e=t.target;e&&(Rn.curChooseStonePos=this.sp.getChildIndex(e)+1,1===e.open&&Rl.ins().openStoneInlayPanel())},i.update=function(){var t;if((this.itemLeft.data=this.itemRight.data=null,this.vo=Rn.curChooseTalimanVO,this.vo)&&(this.info=Rn.getTalimanInfo(this.vo.id),Rn.getTalimanInfo(this.vo.id)?(3!=this.itemLeft.open&&1!=this.itemLeft.open&&(this.itemLeft.open=1),this.info&&3<=this.info.grade?3!=this.itemRight.open&&(this.itemRight.open=1):this.itemRight.open=2):(this.itemLeft.open=0,this.itemRight.open=2),this.info))for(var e in this.info.gems)1==(t=this.info.gems[e]).id?this.itemLeft.data=t:this.itemRight.data=t},e}(),fO=function(t){function e(){this._data=null,this._resData=null,e.__super.call(this),this.inputNum.restrict="0-9",this.on("click",this,this.onClick),this.inputNum.on("input",this,this.onInputChange),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.family.familyPetEmbattle.view.FamilyMaterialAssItem",z_);var i=e.prototype;return i.onDisplay=function(){},i.onUnDisplay=function(){this.cleanData()},i.onInputChange=function(){var t=Ll.ins.getNowMaxNum(this._data.role_id),e=parseInt(this.inputNum.text);e=(e=0<e?e:0)<t?e:t,this.inputNum.text=""+e,Ll.ins.assNumChange()},i.onClick=function(t){var e=parseInt(this.inputNum.text)?parseInt(this.inputNum.text):0,i=Ll.ins.getNowMaxNum(this._data.role_id);switch(t.target){case this.btnRe:e=0<(e-=1)?e:0,this.inputNum.text=""+e;break;case this.btnAdd:i<(e+=1)&&(e=i,Jt.addTip("已达到最大数量")),this.inputNum.text=""+e}Ll.ins.assNumChange()},i.cleanData=function(){this.inputNum.text="0"},i.update=function(t,e,i){void 0===i&&(i=0),this._data=t,this._data&&(this._resData=Nn.getMaterialRequest(e,t.role_id),this.txtMy.text="["+Dn.getNameByTitle(this._data.family_title_id)+"]",this.txtName.x=this.txtMy.x+this.txtMy.textWidth+5,this.txtName.text=this._data.role_name,0<this._data.vip?(this.ImgVip.skin="modules/chat/VIP"+this._data.vip+".png",this.ImgVip.x=this.txtName.x+this.txtName.textWidth+2):this.ImgVip.skin=null,this.txtCon.text="贡献度："+W.getShortenPowerStr(this._data.total_contribution),this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this.imgHead.size(93,93),this._data.online?(this.txtTime.text="在线",this.txtTime.color="#139604"):(this.txtTime.text=x.getSpeedTime(this._data.last_offline_time,ya.serverTime),this.txtTime.color="#b60202"),this._resData?(this.imgBg.visible=!0,this.txtNeed.text="需要："+this._resData.item_num):(this.imgBg.visible=!1,this.txtNeed.text=""),this.inputNum.text="0",this.lastTimeRank.text="上次仙宠盟战排名:"+(0<i?i:"无"))},I(0,i,"resData",function(){return this._resData}),I(0,i,"data",function(){return this._data}),e}(),_O=function(t){function e(){this._justShowLastRole=!1,this._typeID=NaN,this.goodsImg=null,this.resItemArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay),this.on("undisplay",this,this.unDisplay)}w(e,"modules.family.familyPetEmbattle.view.FamilyMaterialAssView",$_);var i=e.prototype;return i.onDisplay=function(){T.register("FAMILY_PET_BATTLE_ROLE_RANK_UPDATE",this,this.handleRoleRankUpdate),Ll.ins.toFamilyPetBattleRoleRank(1),Ll.ins.toFamilyPetBattleRoleRank(2)},i.unDisplay=function(){T.remove("FAMILY_PET_BATTLE_ROLE_RANK_UPDATE",this,this.handleRoleRankUpdate)},i.handleRoleRankUpdate=function(){this.updateRolePanelShow()},i.getNowCanAssButOne=function(t){var e,i=Nn.getMaterialPKV(this._typeID),s=i?i.val:9999;for(var n in this.resItemArr)"0"!=(e=this.resItemArr[n]).inputNum.text&&t!=e.data.role_id&&(s-=parseInt(e.inputNum.text));return s},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnYes:var e,i=[];for(var s in this.resItemArr)if("0"!=(e=this.resItemArr[s]).inputNum.text){var n=new Object;n.className="p_family_material_assign",n.item_id=this._typeID,n.item_num=parseInt(e.inputNum.text),n.role_id=e.data.role_id,i.push(n)}0<i.length?T.dispatch("OPEN_FAMILYMATERIALSECVIEW",this._typeID,i):Jt.addTip("没有做任何分配哦");break;case this.lastFighterCheckBox:this.lastFighterCheckBox.selected=!this._justShowLastRole,this._justShowLastRole=this.lastFighterCheckBox.selected,this.updateRolePanelShow()}},i.updateRolePanelShow=function(){var t,e=0;this.resItemArr=this.resItemArr||[];var i=0,s=Nn.lastRoleRank;if(s&&s.length<=0&&(s=Nn.nowRoleRank),this._justShowLastRole){var n=[];for(var o in s){var a=s[o].role_id,l=Dn.getMembetInfoByRoleId(a);l&&n.push(l)}e=Math.max(n.length,this.resItemArr.length);for(var r=0;r<e;r++)r<n.length?(this.resItemArr[r]=this.resItemArr[r]||new fO,(t=this.resItemArr[r]).pos(0,155*r+19),i=this.getLastPetBattleRank(n[r].role_id),t.update(n[r],this._typeID,i),this.pan.addChild(t)):this.resItemArr[r]&&this.resItemArr[r].parent&&this.resItemArr[r].removeSelf()}else{var h=Dn.getFamilyDetail();if(!h)return;var u=h.members.concat();u.sort(this.memSortFun),e=Math.max(u.length,this.resItemArr.length);for(var c=0;c<e;c++)c<u.length?(this.resItemArr[c]=this.resItemArr[c]||new fO,(t=this.resItemArr[c]).pos(0,155*c+19),i=this.getLastPetBattleRank(u[c].role_id),t.update(u[c],this._typeID,i),this.pan.addChild(t)):this.resItemArr[c]&&this.resItemArr[c].parent&&this.resItemArr[c].removeSelf()}},i.getLastPetBattleRank=function(t){var e=Nn.lastRoleRank;if(!e)return 0;for(var i=0,s=0,n=e.length;s<n;s++){var o=e[s];if(t==o.role_id)if(Dn.getMembetInfoByRoleId(o.role_id)){i=s+1;break}}return i},i.updateByTypeID=function(t){this._typeID=t;var e=ur.getItem(t);if(e){this.goodsImg||(this.goodsImg=new fh(null,!0,!0,105),this.goodsImg.pos(28,12),this.imgBot.addChild(this.goodsImg)),this.goodsImg.data=e,this.txtName.text=e.name,this.txtName.color=U.getColorDark(e.color);var i=Nn.getMaterialPKV(t);this.txtNum.text="剩余数量："+i.val,this.updateRolePanelShow()}},i.memSortFun=function(t,e){return 0==t.family_title_id||0==e.family_title_id?0==t.family_title_id&&0==e.family_title_id?t.total_contribution>e.total_contribution?-1:t.total_contribution<e.total_contribution?1:0:0==t.family_title_id?1:-1:t.family_title_id<e.family_title_id?-1:t.family_title_id>e.family_title_id?1:t.total_contribution>e.total_contribution?-1:t.total_contribution<e.total_contribution?1:0},i.assNumChange=function(){var t,e=Nn.getMaterialPKV(this._typeID),i=e?e.val:9999;for(var s in this.resItemArr)"0"!=(t=this.resItemArr[s]).inputNum.text&&(i-=parseInt(t.inputNum.text));this.txtNum.text="剩余数量："+i},e}(),gO=function(t){function e(){this._data=null,e.__super.call(this)}return w(e,"modules.family.familyPetEmbattle.view.FamilyMaterialLogItem",Z_),I(0,e.prototype,"data",null,function(t){if(this._data=t,this._data){this.txt1.text=x.format(t.timestamp,!0,!0),this.txt2.text=t.role_name;var e=ur.getItem(t.item_id);e&&(this.txt4.text=e.name+"×"+t.item_num,this.txt4.color=U.getColorDark(e.color))}}),e}(),yO=function(t){function e(){this._kv=null,this.goodsImage=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.inputNum.restrict="0-9",this.on("click",this,this.onClick),this.inputNum.on("input",this,this.onInputChange)}w(e,"modules.family.familyPetEmbattle.view.FamilyMaterialResView",J_);var i=e.prototype;return i.onClick=function(t){var e=this._kv?this._kv.val:9999,i=parseInt(this.inputNum.text)?parseInt(this.inputNum.text):0;switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnBuy:if(this._kv)if(0<i)if(i<=this._kv.val){var s=new Object;s.className="p_family_material_request",s.item_id=this._kv.id,s.item_num=i,s.role_id=pe.roleID,Ll.ins.toFamiltMaterialRequest([s]),Jt.addTip("成功申请物资")}else Jt.addTip("物质数目改变，请修改申请数目");else Jt.addTip("申请物资数目不能为0哦");this.closeWindow();case this.btnClose:this.closeWindow();break;case this.btnRe1:i=1<(i-=10)?i:1,this.inputNum.text=""+i;break;case this.btnRe:i=1<(i-=1)?i:1,this.inputNum.text=""+i;break;case this.btnAdd:e<(i+=1)&&(i=e,Jt.addTip("已达到最大数量")),this.inputNum.text=""+i;break;case this.btnAdd1:e<(i+=10)&&(i=e,Jt.addTip("已达到最大数量")),this.inputNum.text=""+i}},i.onInputChange=function(){var t=this._kv?this._kv.val:9999,e=parseInt(this.inputNum.text);e=(e=1<e?e:1)<t?e:t,this.inputNum.text=""+e},i.update=function(t){if(this._kv=t,this._kv){this.txtLeft.text="剩余数量："+this._kv.val;var e=ur.getItem(this._kv.id);e&&(this.txtName.text=e.name,this.txtName.color=U.getColorDark(e.color),this.goodsImage=this.goodsImage||new fh(null,!0,!0,105),this.goodsImage.pos(131,75),this.goodsImage.data=e,this.addChild(this.goodsImage)),this.inputNum.text="1"}},e}(),vO=function(t){function e(){this._assArr=null,this.goodsItem=null,this.goodsNameTxt=null,this.roleAssTxt=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.family.familyPetEmbattle.view.FamilyMaterialSecView",tg);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnNo:this.closeWindow();break;case this.btnYes:Ll.ins.toFamiltMaterialAssign(this._assArr),this.closeWindow()}},i.openSecAlert=function(t,e){this._assArr=e;var i=ur.getItem(t);if(i){this.goodsItem||(this.goodsItem=new Ah(105,105,!0,!0,!1,!0,105),this.goodsItem.pos(287,88),this.addChild(this.goodsItem)),this.goodsItem.dataSource=i;var s=Nn.getMaterialPKV(t),n=s?s.val:0,o=n,a=e.length;this.pan.vScrollBarSkin=4<a?"com/ui/vscroll.png":"";var l,r="";for(var h in this.roleAssTxt=this.roleAssTxt||new K,this.roleAssTxt.width=500,this.roleAssTxt.style.valign="top",this.roleAssTxt.style.leading=10,this.pan.addChild(this.roleAssTxt),e){(l=e[h]).item_id==t&&(o-=l.item_num);var u=l.role_id,c=Dn.getMembetInfoByRoleId(u);if(c){var d=c.role_name,p=l.item_num;r+=Z.font("【"+d+"】:","#5D3924",24)+Z.font(p+"个","#F7EF5F",24)+"<br/>"}}this.roleAssTxt.innerHTML=r,this.roleAssTxt.width=this.roleAssTxt.contextWidth,this.roleAssTxt.height=this.roleAssTxt.contextHeight,this.roleAssTxt.x=this.pan.width/2-this.roleAssTxt.width/2,this.goodsItem.hideGoodsName(),this.goodsNameTxt=this.goodsNameTxt||new K,this.goodsNameTxt.width=500,this.goodsNameTxt.style.align="center",this.goodsNameTxt.innerHTML=Z.font("【"+i.name+"】",U.COLORS_LIGHT[i.color],24)+Z.font("数量变化:","#5D3924",24)+Z.font(n+"→"+o,"#F7EF5F",24),this.goodsNameTxt.pos(89,196),this.goodsNameTxt.height=this.goodsNameTxt.contextHeight,this.addChild(this.goodsNameTxt)}},e}(),IO=function(t){function n(){this._data=null,this._tweenEndTime=0,this.tweenX=NaN,this.tweenY=NaN,this.startX=NaN,this.startY=NaN,n.__super.call(this),this.btnWatch.on("click",this,this.onClick),this.on("undisplay",this,this.unDisplay)}w(n,"modules.family.familyPetEmbattle.view.PetBattleLogItem",eg);var e=n.prototype;return e.unDisplay=function(){_t.removeFromFrame(this,this.loop)},e.onClick=function(){pr.ins().toFightInfoREC(this.data.pet_fight_log_id)},e.tweenEndTime=function(t){this._tweenEndTime=t},e.tweenPos=function(t,e){var i=S.now();i<this._tweenEndTime&&Math.abs(e-this.y)<500?(this.tweenX=t,this.tweenY=e,this.startX=this.x,this.startY=this.y,_t.addToFrame(this,this.loop)):this.pos(t,e),i<(this._data&&n.logTimeDic.hasOwnProperty(this._data.pet_fight_log_id)?n.logTimeDic[this._data.pet_fight_log_id]:0)&&Math.abs(e-this.y)<500?(this.imgWin.visible=!1,this.imgWin.scale(2,2),this.imgWin.x=198,_t.addToFrame(this,this.loop)):(this.imgWin.visible=!0,this.imgWin.x=this._data.role_id_1==this._data.win_role_id?160:416,this.imgWin.scale(1,1))},e.loop=function(){var t=S.now(),e=this._tweenEndTime-t;if(0<e)e=(200-e)/200,this.x=e*(this.tweenX-this.startX)+this.startX,this.y=e*(this.tweenY-this.startY)+this.startY;else{this.x=this.tweenX,this.y=this.tweenY;var i=this._data&&n.logTimeDic.hasOwnProperty(this._data.pet_fight_log_id)?n.logTimeDic[this._data.pet_fight_log_id]:0;if(i<=t)_t.removeFromFrame(this,this.loop);else if(1<(e=(i-t)/200))this.imgWin.visible=!1;else{this.imgWin.visible=!0;var s=this._data.role_id_1==this._data.win_role_id?160:416;this.imgWin.scale(1+e,1+e),this.imgWin.x=e*(198-s)+s}}},I(0,e,"data",function(){return this._data},function(t){this._data=t,this._data&&(this.txtFamName1.text=t.family_name_1,this.txtFamName1.y=(140-this.txtFamName1.textHeight)/2+19,this.txtFamName2.text=t.family_name_2,this.txtFamName2.y=(140-this.txtFamName2.textHeight)/2+19,this.txtName1.text=t.role_id_1==pe.roleID?"你":t.role_name_1,this.txtName2.text=t.role_id_2==pe.roleID?"你":t.role_name_2,this.img1.skin="com/head/"+t.role_category_1+t.role_sex_1+".png",this.img2.skin="com/head/"+t.role_category_2+t.role_sex_2+".png")}),_(n,["logTimeDic",function(){return this.logTimeDic=new Object}]),n}(),wO=function(t){function e(){this._data=null,e.__super.call(this)}return w(e,"modules.family.familyPetEmbattle.view.PetBattleLogRankItem",ig),e.prototype.update=function(t,e){if(this._data=t,this._data){var i;switch(this.txt1.text=e+"",e){case 3:i="#7223b5";break;case 2:i="#fdc06a";break;case 1:i="#FFFF00";break;default:i="#5d3924"}"p_pet_battle_role_rank"==this._data.className?(this.txt2.text=this._data.role_name,this.txt3.text=this._data.win_times+"",this.txt4.text=this._data.score+""):"p_pet_battle_family_rank"==this._data.className&&(this.txt2.text=this._data.family_name,this.txt3.text=this._data.win_times+"",this.txt4.text=this._data.score+""),this.txt1.color=this.txt2.color=this.txt3.color=this.txt4.color=i}},e}(),bO=function(t){function e(){this.nowShowItems=null,this.scrollLine=NaN,this.oldLogArr=null,this.hasResArr=null,this.curTime=0,this.subTime=100,this.rankItems=null,this.logItems=null,this.battleEndItem=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.tab.on("change",this,this.onTabChange),this.on("display",this,this.onDisplay),this.pan.vScrollBarSkin="",this.rankPan.vScrollBarSkin="",this.pan.vScrollBar.on("change",this,this.updateLog)}w(e,"modules.family.familyPetEmbattle.view.PetBattleLogView",sg);var i=e.prototype;return i.onScrollChange=function(){if(Nn.logs){this.nowShowItems=this.nowShowItems||[];var t,e=this.pan.vScrollBar.value;this.scrollLine=Math.floor(e/181);for(var i=this.nowShowItems.length-1;0<=i;i--){t=this.nowShowItems[i];var s=parseInt(t.name.substr(4,t.name.length-1))-this.scrollLine;(s<0||5<s)&&(this.nowShowItems.splice(i,1),this.disposeLogItem(t))}for(i=this.scrollLine;i<=this.scrollLine+5;i++)this.hasItem(i)||((t=this.getLogItem()).name="item"+i,this.nowShowItems.push(t));this.callLater(this.renderLogItem)}},i.showItemsSort=function(t,e){return parseInt(t.name.substr(4,t.name.length-1))<parseInt(e.name.substr(4,e.name.length-1))?-1:1},i.filterArr=function(){var t,e=[];for(var i in Nn.logs)t=Nn.logs[i],this.tog1.selected?this.tog2.selected?this.checkIsMyFight(t)&&e.push(t):this.checkIsMyFamily(t)&&e.push(t):this.tog2.selected?this.checkIsMyFight(t)&&e.push(t):e.push(t);return e},i.checkIsMyFamily=function(t){return!!Dn.getFamilyDetail()&&(t.family_name_1==Dn.getFamilyDetail().family_name||t.family_name_2==Dn.getFamilyDetail().family_name)},i.checkIsMyFight=function(t){return t.role_id_1==pe.roleID||t.role_id_2==pe.roleID},i.renderLogItem=function(){if(this.nowShowItems&&Nn.logs){var t,e,i=this.filterArr(),s=NaN;this.nowShowItems.sort(this.showItemsSort);for(var n=this.nowShowItems.length-1;0<=n;n--){if(e=this.nowShowItems[n],t=i[s=parseInt(e.name.substr(4,e.name.length-1))]){var o,a=!0,l=!0;if(e.data=t,this.oldLogArr)for(var r in this.oldLogArr)if(o=this.oldLogArr[r],t.pet_fight_log_id==o.pet_fight_log_id){a=!1;break}if(this.hasResArr)for(r in this.hasResArr)if(o=this.hasResArr[r],t.pet_fight_log_id==o.pet_fight_log_id){l=!1;break}if(a){var h=this.getTweenTime();e.tweenEndTime(h),e.x=500,e.y=181*s,l&&(IO.logTimeDic[t.pet_fight_log_id]=h+5e3)}e.tweenPos(0,181*s),e.parent||this.pan.addChild(e)}else e.removeSelf();0}this.oldLogArr=i.concat(),this.hasResArr=Nn.logs.concat()}},i.hasItem=function(t){if(this.nowShowItems)for(var e in this.nowShowItems)if(this.nowShowItems[e].name=="item"+t)return!0;return!1},i.getTweenTime=function(){var t=S.now();return this.curTime<S.now()?this.curTime=t+this.subTime:this.curTime+=this.subTime,this.curTime},i.onUndisplay=function(){Ll.ins.checkPetPanelClose(),this.off("undisplay",this,this.onUndisplay),this.oldLogArr=null,this.curTime=0},i.onDisplay=function(){this.tab.selectedIndex=0,this.pan.vScrollBar.value=0,this.on("undisplay",this,this.onUndisplay)},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.tog1:case this.tog2:this.oldLogArr=null,this.updateLog()}},i.onTabChange=function(){switch(this.tab.selectedIndex){case 0:this.spLog.visible=!0,this.spRank.visible=!1,this.battleEndItem&&(this.battleEndItem.visible=!0);break;case 1:case 2:this.spLog.visible=!1,this.spRank.visible=!0,this.battleEndItem&&(this.battleEndItem.visible=!1)}this.update()},i.update=function(){this.spLog.visible&&this.updateLog(),this.spRank.visible&&this.updateRank()},i.updateRank=function(){var t=2==this.tab.selectedIndex?Nn.nowRoleRank:Nn.nowFamilyRank;if(t){this.txtNo.visible=t.length<=0,this.rankItems=this.rankItems||[];for(var e,i=Math.max(t.length,this.rankItems.length),s=0;s<i;s++)s<t.length?(this.rankItems[s]=this.rankItems[s]||new wO,(e=this.rankItems[s]).pos(0,62*s),e.update(t[s],s+1),this.rankPan.addChild(e)):this.rankItems[s]&&this.rankItems[s].parent&&this.rankItems[s].removeSelf();if(2==this.tab.selectedIndex){var n;for(this.txtTitle2.text="我的排名",s=0;s<t.length;s++)if((n=t[s]).role_id==pe.roleID)return this.txtRank.text=""+(s+1),this.txtScore.text=n.score+"",this.txtWin.text=n.win_times+"",void(this.txtName.text=n.role_name);this.txtRank.text="未参战",this.txtScore.text="0",this.txtWin.text="0",this.txtName.text=pe.roleName}else{var o;for(this.txtTitle2.text="我的仙盟",s=0;s<t.length;s++)if((o=t[s]).family_id==pe.user.attr.family_id)return this.txtRank.text=""+(s+1),this.txtScore.text=o.score+"",this.txtWin.text=o.win_times+"",void(this.txtName.text=o.family_name);this.txtRank.text="未参战",this.txtScore.text="0",this.txtWin.text="0",this.txtName.text=Dn.getFamilyDetail()?Dn.getFamilyDetail().family_name:""}}},i.disposeLogItem=function(t){this.logItems=this.logItems||[],t.removeSelf(),this.logItems.length<10&&this.logItems.push(t)},i.getLogItem=function(){return this.logItems&&0<this.logItems.length?this.logItems.pop():new IO},i.updateLog=function(){Nn.battleEnd?(this.battleEndItem=this.battleEndItem||new px,this.battleEndItem.pos(32,149),this.addChild(this.battleEndItem),""!=Nn.battleEnd.rank_first_role?this.battleEndItem.txtRole.text=Nn.battleEnd.rank_first_role+"\n【"+Nn.battleEnd.rank_first_role_family+"】":this.battleEndItem.txtRole.text="无",""!=Nn.battleEnd.rank_first_family?this.battleEndItem.txtFam.text=Nn.battleEnd.rank_first_family:this.battleEndItem.txtFam.text="无",this.pan.y=327,this.pan.height=554):(this.battleEndItem&&this.battleEndItem.parent&&this.battleEndItem.removeSelf(),this.pan.y=149,this.pan.height=732),this.onScrollChange()},i.sortFun=function(t,e){return t.score==e.score?t.win_times==e.win_times?"p_pet_battle_family_rank"==t.className?t.family_id<e.family_id?-1:1:t.role_id<e.role_id?-1:1:t.win_times<e.win_times?1:-1:t.score<e.score?1:-1},e}(),SO=function(t){function e(){this._data=null,e.__super.call(this)}return w(e,"modules.family.familyPetEmbattle.view.PetBattleMemberStateItem",ng),I(0,e.prototype,"data",null,function(t){this._data=t,this._data&&(this.txt1.text=t.role_name,this.txt2.text=W.getShortenPowerStr(t.pet_power),this.txt3.text=t.is_sign_up?"已报名":"未报名",this.txt3.color=t.is_sign_up?"#96f254":"#b60202")}),e}(),xO=function(t){function e(){this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.panel.vScrollBarSkin=""}w(e,"modules.family.familyPetEmbattle.view.PetBattleMemberStateView",og);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnCall:if(2==Nn.getNowBattleState()){var e="我正在参加仙宠盟战，一起来捍卫仙盟荣耀吧！参与可获得丰厚奖励";e+=Z.linkcolor("【我要参加】","petBattle#",!1),Za.ins().toSendMsg(2e4,e,9),Jt.addTip("召集盟友成功")}else Jt.addTip("报名时间内才可召集盟友报名哦")}},i.update=function(){var t=Nn.members?Nn.members.concat():null;if(t){var e;t.sort(this.memSort),this.items=this.items||[];for(var i=Math.max(this.items.length,t.length),s=0;s<i;s++)s<t.length?(this.items[s]=this.items[s]||new SO,(e=this.items[s]).pos(0,62*s),e.data=t[s],this.panel.addChild(e)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf()}else Ll.ins.toFamilyPetBattleMembers()},i.memSort=function(t,e){return t.is_sign_up==e.is_sign_up?t.pet_power==e.pet_power?t.role_id<e.role_id?-1:1:t.pet_power>e.pet_power?-1:1:t.is_sign_up?-1:1},e}(),CO=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.family.familyPetEmbattle.view.PetBattleRankItem",ag);var i=e.prototype;return i.update=function(t,e){if(this._data=t,this._data){var i;switch(this.txtRank.text=""+e,e){case 3:i="#7223b5";break;case 2:i="#fdc06a";break;case 1:i="#FFFF00";break;default:i="#5d3924"}"p_pet_battle_role_rank"==this._data.className?(this.txtName.text="【"+this._data.family_name+"】\n"+this._data.role_name,this.txtName.y=31,this.txtWin.text=this._data.win_times,this.txtScore.text=this._data.score):"p_pet_battle_family_rank"==this._data.className&&(this.txtName.text=this._data.family_name,this.txtName.y=43,this.txtWin.text=this._data.win_times,this.txtScore.text=this._data.score),this.txtRank.color=this.txtName.color=this.txtWin.color=this.txtScore.color=i}else this.txtRank.text=this.txtName.text=this.txtWin.text=this.txtScore.text=""},I(0,i,"uiClass",function(){return"PerBattlerRankItem"}),e}(),PO=function(t){function e(){this.items=null,this.updateArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.pan.vScrollBarSkin=""}w(e,"modules.family.familyPetEmbattle.view.PetBattleRankView",lg);var i=e.prototype;return i.onDisplay=function(){this.tab.selectedIndex=0},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.onTabChange=function(){switch(this.tab.selectedIndex){case 0:this.updateLastFamily();break;case 1:this.updateLastRole()}},i.updateLastRole=function(){this.updateArr=Nn.lastRoleRank,this.updateArr?(this.txtSub.text="我的个人排名："+Nn.getRoleRankIndex(),this.txt2.text="个人名称",this.txt4.text="个人总分",this.txtT.text="上次仙宠盟战个人排名",this.updateItem()):Ll.ins.toFamilyPetBattleRoleRank(1)},i.updateLastFamily=function(){this.updateArr=Nn.lastFamilyRank,this.updateArr&&(this.txtSub.text="所在仙盟排名："+Nn.getFamilyRankIndex(),this.txt2.text="仙盟名称",this.txt4.text="仙盟总分",this.txtT.text="上次仙宠盟战仙盟排名",this.updateItem())},i.updateItem=function(){if(this.updateArr&&0<this.updateArr.length){var t;this.txtNo.visible=!1,this.items=this.items||[];for(var e=Math.max(this.updateArr.length,this.items.length),i=0;i<e;i++)i<this.updateArr.length?(this.items[i]=this.items[i]||new CO,(t=this.items[i]).pos(0,113*i),t.update(this.updateArr[i],i+1),this.pan.addChild(t)):this.items[i]&&this.items[i].parent&&this.items[i].removeSelf()}else this.txtNo.visible=!0},i.update=function(){this.onTabChange()},e}(),TO=function(t){function e(){this.item=null,e.__super.call(this),this.item=new Ah(91,91,!0,!0,!0,!0,180),this.addChild(this.item),this.item.pos(319,13)}return w(e,"modules.family.familyPetEmbattle.view.PetBattleRewardItem",rg),e.prototype.update=function(t,e){var i=parseInt(e[1]),s=parseInt(e[2]);this.txt.text=e[0];var n,o=ur.getItem(i);switch(t){case 3:n="#7223b5";break;case 2:n="#fdc06a";break;case 1:n="#FFFF00";break;default:n="#5d3924"}this.txt.color=n,o&&(this.item.dataSource=o,this.item.num=s)},e}(),kO=function(t){function e(){this.downItem=null,this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),this.pan.vScrollBarSkin="",this.downItem=new TO,this.downItem.pos(30,707),this.addChild(this.downItem)}w(e,"modules.family.familyPetEmbattle.view.PetBattleRewardView",hg);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.onTabChange=function(){switch(this.tab.selectedIndex){case 0:this.updateFamilyReward();break;case 1:this.updateRoleReward()}},i.updateFamilyReward=function(){this.txtDown2.text="物资奖励",this.txt2.text="物资奖励",this.txtT.text="仙宠盟战仙盟排名奖励";var t=Nn.getBattleRewardVO().rwFamilyArr;this.items=this.items||[];Math.max(t.length-1,this.items.length);for(var e,i=0;i<t.length;i++)i<t.length-1?(this.items[i]=this.items[i]||new TO,(e=this.items[i]).pos(0,150*i),e.update(i+1,t[i+1]),this.pan.addChild(e)):this.items[i]&&this.items[i].parent&&this.items[i].removeSelf();this.downItem.update(4,t[0])},i.updateRoleReward=function(){this.txtDown2.text="参与奖励",this.txt2.text="排名奖励",this.txtT.text="仙宠盟战个人排名奖励";var t=Nn.getBattleRewardVO().rwRoleArr;this.items=this.items||[];Math.max(t.length-1,this.items.length);for(var e,i=0;i<t.length;i++)i<t.length-1?(this.items[i]=this.items[i]||new TO,(e=this.items[i]).pos(0,150*i),e.update(i+1,t[i+1]),this.pan.addChild(e)):this.items[i]&&this.items[i].parent&&this.items[i].removeSelf();this.downItem.update(4,t[0])},i.update=function(){this.onTabChange()},e}(),AO=function(t){function i(){this.posArr=[[27,85],[122,85],[217,85],[27,181],[122,181],[217,181]],this.items=null,this.myItems=null,this.completeHanlder=null,this.repeatX=5,this.timeOutKey=NaN,this.itemCopy=null,this.itemEmbattleCopy=null,this._selectPet=null,this.towerSkillArr=null,this.upRankItems=null,this.downRankItems=null,i.__super.call(this),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.tab.on("change",this,this.onTabChange),this.items=[];for(var t=0;t<this.posArr.length;t++){var e=new nU;e.mouseEnabled=!0,e.pos(this.posArr[t][0],this.posArr[t][1]),this.imgLeft.addChild(e),this.items.push(e)}for(this.myItems=[],t=0;t<this.posArr.length;t++)(e=new nU).mouseEnabled=!1,e.pos(this.posArr[t][0]-12,this.posArr[t][1]),this.imgLeftOne.addChild(e),this.myItems.push(e);this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("mousedown",this,this.onMouseDown),this.list.itemRender=XV,this.list.mouseHandler=new Q(this,this.onClickPet),this.list.repeatX=this.repeatX,this.list.renderHandler=new Q(this,this.onRenderHandler),this.pan1.vScrollBarSkin=this.pan2.vScrollBarSkin=""}w(i,"modules.family.familyPetEmbattle.view.PetBattleSign",ug);var e=i.prototype;return e.showFinger=function(){Eo.pets&&0<Eo.pets.length?(this.imgFinger.visible=!0,this.imgFinger.pos(75,43),ie.to(this.imgFinger,{x:59,y:236},1200,null,Q.create(this,this.timeOutToShow,null,!0),300,!0)):this.hideFinger()},e.timeOutToShow=function(){this.timeOutKey=_t.setTimeout(this,this.showFinger,null,300)},e.hideFinger=function(){this.imgFinger.visible=!1,ie.clearAll(this.imgFinger),_t.clearTimeout(this.timeOutKey)},e.onDisplay=function(){this.tab.selectedIndex=0,T.register("PET_INFO_INIT",this,this.updateList),T.register("SELECT_TOWERSKILL",this,this.selectTowerSkill),T.register("PET_TOWER_UPDATE",this,this.update),this.on("undisplay",this,this.onUndisplay)},e.onUndisplay=function(){T.remove("PET_INFO_INIT",this,this.updateList),T.remove("SELECT_TOWERSKILL",this,this.selectTowerSkill),T.remove("PET_TOWER_UPDATE",this,this.update),this.off("undisplay",this,this.onUndisplay)},e.selectTowerSkill=function(t){Nn.battleInfo.is_sign_up?Jt.addTip("你已报名仙宠盟战，不可改变仙宠盟战布阵"):pr.ins().toPetEmbattleChangeSkill(this.selectPet.pet_id,4,t.id)},e.onMouseDown=function(t){t.target instanceof modules.pet.embattle.PetEmbattleSubItem&&null!=t.target.data&&(null==this.itemEmbattleCopy&&(this.itemEmbattleCopy=new nU,this.itemEmbattleCopy.mouseEnabled=!1),this.itemEmbattleCopy.index=4,this.itemEmbattleCopy.dataSource=t.target.data,this.itemEmbattleCopy.pos(t.target.x,t.target.y),this.imgLeft.addChild(this.itemEmbattleCopy),this.itemEmbattleCopy.startDrag(null,!1,0),this.imgKuang.visible=!0,this.stage.on("mouseup",this,this.onItemEmbattleCopyUp))},e.onItemEmbattleCopyUp=function(t){if(this.itemEmbattleCopy.removeSelf(),this.imgKuang.visible=!1,this.stage.off("mouseup",this,this.onItemEmbattleCopyUp),Nn.battleInfo&&Nn.battleInfo.is_sign_up)Jt.addTip("你已报名仙宠盟战，不可改变仙宠盟战布阵");else{if(t.target instanceof modules.pet.embattle.PetEmbattleSubItem){if(t.target.data!=this.itemEmbattleCopy.data){var e,i,s=t.target;for(i in this.items)if((e=this.items[i]).data&&e.data.pet_id==this.itemEmbattleCopy.data.pet_id){e.index=4,e.dataSource=s.data;break}s.dataSource=this.itemEmbattleCopy.data;var n=this.items.indexOf(s);pr.ins().toPetEmbattleChangePos(this.itemEmbattleCopy.data.pet_id,4,n+1)}}else for(i in this.items)if((e=this.items[i]).data&&e.data.pet_id==this.itemEmbattleCopy.data.pet_id){e.index=4,e.dataSource=null,pr.ins().toPetEmbattleChangePos(this.itemEmbattleCopy.data.pet_id,4,0);break}this.selectPet=this.itemEmbattleCopy.data,this.updatePetDesc()}},e.onClickPet=function(t,e){if("mousedown"==t.type){var i=this.list.getCell(e);this.itemCopy=this.itemCopy||new XV,this.itemCopy.pivotX=this.itemCopy.pivotY=0,this.itemCopy.dataSource=i.data,this.itemCopy.pos(i.x+this.list.x,i.y+this.list.y),this.spEff.addChild(this.itemCopy),this.itemCopy.startDrag(null,!1,0),this.imgKuang.visible=!0,this.stage.on("mouseup",this,this.onItemCopyUp)}},e.onItemCopyUp=function(t){if(this.itemCopy.removeSelf(),this.imgKuang.visible=!1,this.stage.off("mouseup",this,this.onItemCopyUp),Nn.battleInfo&&Nn.battleInfo.is_sign_up)Jt.addTip("你已报名仙宠盟战，不可改变仙宠盟战布阵");else{var e,i=0;for(s in this.items)null!=(e=this.items[s]).data&&++i;if(i<5||t.target.data){if(t.target instanceof modules.pet.embattle.PetEmbattleSubItem&&t.target.data!=this.itemCopy.data){var s,n=t.target;for(s in this.items)if((e=this.items[s]).index=4,e.data&&e.data.pet_id==this.itemCopy.data.pet_id){e.dataSource=n.data;break}n.dataSource=this.itemCopy.data;var o=this.items.indexOf(n);pr.ins().toPetEmbattleChangePos(this.itemCopy.data.pet_id,4,o+1)}}else Jt.addTip("阵法中最多只能上阵5只仙宠哦！");this.selectPet=this.itemCopy.data,this.updatePetDesc()}},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},e.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.btn1:this.tab.selectedIndex=1;break;case this.btn2:T.dispatch("OPEN_MEMBERSTATE_VIEW");break;case this.btn3:T.dispatch("OPEN_PETBATTLE_REWARDVIEW");break;case this.btnYes:if("确定报名"==this.btnYes.label){var e,i=Eo.getFamilyPetEmbattle(),s=0;for(var n in i)(e=i[n])&&"p_pet"==e.className&&++s;if(0==s)this.nonePetAlert();else if(s<5&&Eo.pets.length>s){var o=Math.min(Eo.pets.length,5);this.not5PetAlert(o)}else this.checkSignUp()}else{var a=new Ee;a.msg="是否取消仙宠盟战报名？<br>（取消报名后可调整布阵重新报名）",a.yesCaller=Ll.ins,a.yesFun=Ll.ins.toFamilyPetBattleSignUp,a.yesArgs=[2],a.align="center",EF.showVO(a)}break;default:t.target instanceof modules.pet.embattle.PetTowerSkillItem&&Ae.show(t.target.data,"PET_TOWERSKILL_TIP")}},e.nonePetAlert=function(){var t=new Ee;t.msg="当前布阵为空，是否前往布置仙宠阵型？<br>（最多可上阵五只仙宠）",t.yesLabel="点击前往",t.yesCaller=this,t.yesFun=this.toPutFort,EF.showVO(t)},e.not5PetAlert=function(t){var e=new Ee;e.msg="上阵仙宠数可增加至"+t+"只，是否立即报名？",e.yesLabel="确定",e.yesCaller=this,e.yesFun=this.checkSignUp,e.yesArgs=[1],e.noLabel="取消",EF.showVO(e)},e.checkSignUp=function(){if(2==Nn.getNowBattleState())Ll.ins.toFamilyPetBattleSignUp(1);else if(1==Nn.getNowBattleState()){var t=new Ee;t.msg="仙宠盟战报名开启时间为每日"+Nn.getSignTime()+"<br>报名尚未开始<br>是否消耗2元宝进行提前报名？",t.yesCaller=this,t.yesFun=this.checkPreSign,t.align="center",EF.showVO(t)}else Jt.addTip("当前不是报名时间哦")},e.checkPreSign=function(){2<=pe.gold?Ll.ins.toFamilyPetBattleSignUp(1):Lo.showAlert()},e.toPutFort=function(){this.tab.selectedIndex=1},e.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},e.onTabChange=function(){switch(this.tab.selectedIndex){case 0:this.spTower.visible=!0,this.spEff.visible=!1,this.hideFinger();break;case 1:this.spEff.visible=!0,this.spTower.visible=!1}this.update()},e.onRenderHandler=function(t,e){var i=t;if(i.data&&this._selectPet){var s;for(var n in i.select=i.data&&i.data.pet_id==this._selectPet.pet_id,this.items)if((s=this.items[n]).data&&s.data.pet_id==i.data.pet_id)return void(i.isFight=!0);i.isFight=!1}},e.updateList=function(){Eo.pets?(this.list.dataSource=Eo.pets,this.checkBtnVisible()):mr.ins().toPetInfo();for(var t=0;t<this.list.content._childs.length;t++)this.list.content._childs[t].y=(this.list.height-this.list.content._childs[t].height)/2},e.updateLeftEmbattle=function(){for(var t=Eo.getFamilyPetEmbattle(),e=!1,i=1;i<7;i++){var s=this.items[i-1];t[i]?(s.index=4,s.dataSource=t[i],e=!0):s.dataSource=null}e?this.hideFinger():this.showFinger()},e.updatePetEmbattle=function(){var t,e,i;if(this.updateList(),this.updateLeftEmbattle(),null==this.selectPet){for(var s in this.items)if(null!=(t=this.items[s]).data){this.selectPet=t.data;break}}else for(i in this.items)(e=this.items[i]).select=this.selectPet==e.data;null==this.selectPet&&Eo.pets&&0<Eo.pets.length&&(this.selectPet=Eo.pets[0]);var n=To.getTowerSkills(),o=0,a=0;this.towerSkillArr=this.towerSkillArr||[];for(var l,r=Math.max(this.towerSkillArr.length,n.length),h=0;h<r;h++)h<n.length?(l=n[h],null==this.towerSkillArr[h]&&(this.towerSkillArr[h]=new $V,this.imgRight.addChild(this.towerSkillArr[h])),1<(this.towerSkillArr[h].data=l).getFightPos().length?(this.towerSkillArr[h].pos(a%3*102+22,60*Math.floor(a/3)+527),++a):(this.towerSkillArr[h].pos(o%3*102+22,60*Math.floor(o/3)+244),++o)):this.towerSkillArr[h]&&this.towerSkillArr[h].parent&&this.towerSkillArr[h].removeSelf();this.updatePetDesc()},e.updatePetDesc=function(){if(this._selectPet){var t,e,i,s=Math.floor(this._selectPet.type_id%1e5/1e4);if(this.selPetBg.skin="com/ui/goodsBg"+s+".png",this.selPetImg.skin="com/petHead/"+this._selectPet.skin_id+".png",this.txtLv.text="LV."+this._selectPet.level,this.txtName.text=this._selectPet.pet_name,this.txtName.color=U.getColorDark(s),this._selectPet.embattle_info&&this.selectPet.embattle_info.embattles&&0<this.selectPet.embattle_info.embattles.length)for(var n in this.selectPet.embattle_info.embattles)if(4==(e=this.selectPet.embattle_info.embattles[n]).index){t=To.getTowerSkill(e.embattle_skill);break}for(var o in this.txtSkill.text=t?"特技："+t.name:"",this.towerSkillArr)(i=this.towerSkillArr[o]).select=t&&i&&i.data&&i.data.id==t.id}},e.update=function(){this.spTower.visible&&this.updatePetTower(),this.spEff.visible&&this.updatePetEmbattle()},e.updatePetFightDesc=function(){for(var t=Eo.getFamilyPetEmbattle(),e=1;e<7;e++){var i=this.myItems[e-1];i.index=4,t[e]?i.dataSource=t[e]:i.dataSource=null}},e.updatePetTower=function(){this.updatePetFightDesc(),this.udpateRank()},e.familySort=function(t,e){return t.sign_up_num==e.sign_up_num?t.family_id<e.family_id?-1:1:t.sign_up_num>e.sign_up_num?-1:1},e.roleSort=function(t,e){var i=0==t.last_ranking?Number.MAX_VALUE:t.last_ranking,s=0==e.last_ranking?Number.MAX_VALUE:e.last_ranking;return i==s?t.role_id<e.role_id?-1:1:i<s?-1:1},e.udpateRank=function(){var t=Nn.battleInfo;if(t){var e,i;t.is_sign_up?this.btnYes.label="取消报名":this.btnYes.label="确定报名",this.upRankItems=this.upRankItems||[],this.downRankItems=this.downRankItems||[];var s,n=t.sign_up_families;if(n){n.sort(this.familySort);for(var o=Math.max(n.length,this.upRankItems.length),a=0;a<o;a++)a<n.length?(this.upRankItems[a]=this.upRankItems[a]||new RO,(e=this.upRankItems[a]).pos(0,62*a),i=n[a],e.update(i.family_name,""+i.sign_up_num),this.pan1.addChild(e)):this.upRankItems[a]&&this.upRankItems[a].parent&&this.upRankItems[a].removeSelf()}if(this.txtNo.visible=!(n&&0<n.length),n=t.sign_up_roles)for(n.sort(this.roleSort),o=Math.max(n.length,this.downRankItems.length),a=0;a<o;a++)a<n.length?(this.downRankItems[a]=this.downRankItems[a]||new RO,(e=this.downRankItems[a]).pos(0,62*a),0<(s=n[a]).last_ranking?e.update(s.role_name,""+s.last_ranking):e.update(s.role_name,"无"),this.pan2.addChild(e)):this.downRankItems[a]&&this.downRankItems[a].parent&&this.downRankItems[a].removeSelf();this.txtNo1.visible=!(n&&0<n.length)}},I(0,e,"endFirstIndex",function(){return Eo.pets?(Math.ceil(Eo.pets.length/this.list.repeatX)-1)*this.list.repeatX:0}),I(0,e,"selectPet",function(){return this._selectPet},function(t){var e,i,s,n;for(i in this._selectPet=t,this.items)(e=this.items[i]).select=t==e.data;for(n in this.list.cells)(s=this.list.cells[n]).select=s.data&&t&&s.data.pet_id==t.pet_id}),i}(),EO=function(t){function s(){this.signView=null,s.__super.call(this),this.setWindowType(),this.signView=new AO,this.on("click",this,this.onClick),this.txtLink1.underline=this.txtLink2.underline=!0,this.on("undisplay",this,this.onUndisplay),this.showRuleText(),this.pan.vScrollBarSkin=""}w(s,"modules.family.familyPetEmbattle.view.PetBattleSignView",cg);var e=s.prototype;return e.showRuleText=function(){var t="";t+=s.createSpanBr("#5d3924",24,"1、"),t+=s.createSpanBr("#fff000",24,"所有仙盟成员"),t+=s.createSpanBr("#5d3924",24,"均可报名参加，报名参加即可获得"),t+=s.createSpanBr("#fff000",24,"参与奖励"),t+=s.createSpanBr("#5d3924",24,"。")+"<br/>",t+=s.createSpanBr("#5d3924",24,"2、比赛开始后，将于参赛仙盟中各挑选1名参赛选手进行"),t+=s.createSpanBr("#fff000",24,"1v1仙宠战斗"),t+=s.createSpanBr("#5d3924",24,"胜方个人将进入下一轮，负方个人将淘汰，"),t+=s.createSpanBr("#fff000",24,"车轮战"),t+=s.createSpanBr("#5d3924",24,"直到决出最后存活的仙盟。")+"<br/>",t+=s.createSpanBr("#5d3924",24,"3、获胜选手胜场数+1，失败选手不增加胜场，每场对战获得积分将以"),t+=s.createSpanBr("#fff000",24,"[对手损失血量百分比×对手仙宠战力]"),t+=s.createSpanBr("#5d3924",24,"计算，仙盟总分等于"),t+=s.createSpanBr("#fff000",24,"仙盟个人得分相加"),t+=s.createSpanBr("#5d3924",24,"。")+"<br/>",t+=s.createSpanBr("#5d3924",24,"4、若最后存活仙盟剩下参赛选手大于1，则会进入"),t+=s.createSpanBr("#fff000",24,"仙盟内战"),t+=s.createSpanBr("#5d3924",24,"，仙盟内战仅影响个人得分，"),t+=s.createSpanBr("#fff000",24,"不会影响仙盟最后得分"),t+=s.createSpanBr("#5d3924",24,"。")+"<br/>",t+=s.createSpanBr("#5d3924",24,"5、比赛结束后，将照个人、仙盟排名给与丰富排名奖励，以"),t+=s.createSpanBr("#fff000",24,"以胜场数来进行个人排行，以仙盟得分总分来进行仙盟排行"),t+=s.createSpanBr("#5d3924",24,"，并从所有参赛选手中挑选1名幸运玩家发放幸运奖励。"),t+=s.createSpanBr("#fff000",24,"挑选1名幸运玩家发放幸运奖励"),t+=s.createSpanBr("#5d3924",24,"。");var e=new K;e.style.align="left",e.style.valign="top",e.style.color="#5d3924",e.style.leading=15,e.width=604,e.innerHTML=t,e.pos(17,64),this.pan.addChild(e),this.spAward.y=e.contextHeight+82;var i=new fh(ur.getItem(13000017),!0,!0,105);i.mouseEnabled=!0,i.pos(69,60),this.spAward.addChild(i),(i=new fh(ur.getItem(13000018),!0,!0,105)).mouseEnabled=!0,i.pos(199,60),this.spAward.addChild(i),(i=new fh(ur.getItem(13000007),!0,!0,105)).mouseEnabled=!0,i.pos(329,60),this.spAward.addChild(i),(i=new fh(ur.getItem(13000013),!0,!0,105)).mouseEnabled=!0,i.pos(459,60),this.spAward.addChild(i),this.txtTime.text="活动时间：每天"+Nn.getSignEndTime()+"-"+Nn.getFightEndTime()},e.onUndisplay=function(){Ll.ins.checkPetPanelClose(),_t.removeFromSceond(this,this.loopTime)},e.onClick=function(t){switch(t.target){case this.btnClose2:this.signView.parent?(this.spGuide.parent||this.spView.addChild(this.spGuide),this.signView.parent&&this.signView.removeSelf()):this.closeWindow();break;case this.btnClose:this.closeWindow();break;case this.btnYes:Nn.getNowBattleState()<=2?(this.signView.parent||this.spView.addChild(this.signView),this.spGuide.parent&&this.spGuide.removeSelf(),this.signView.update()):T.dispatch("OPEN_PETEMBATTLE_LOGVIEW");break;case this.txtLink1:T.dispatch("OPEN_PETBATTLE_RANKVIEW");break;case this.txtLink2:T.dispatch("OPEN_PETBATTLE_REWARDVIEW");break;default:if(t.target instanceof modules.pack.packView.GoodsImage){var e=t.target;Ae.show(e.data,"BASE_GOODS_TIP")}}},e.loopTime=function(){switch(Nn.getNowBattleState()){case 1:this.txtTime2.text=Nn.getSignTime()+"-"+Nn.getSignEndTime();break;case 2:this.txtTime2.text=Nn.getFightDeadLine();break;case 3:this.txtTime1.text="",this.txtTime2.text="",_t.removeFromSceond(this,this.loopTime),this.closeWindow(),T.dispatch("OPEN_PETEMBATTLE_LOGVIEW");break;case 4:var t=new Date;t.setTime(1e3*ya.serverTime);var e=60*t.getHours()*60+60*t.getMinutes()+t.getSeconds(),i=x.formatTime(86400-e);this.txtTime2.text=i}this.txtTime1.x=(750-this.txtTime2.textWidth-this.txtTime1.textWidth)/2,this.txtTime2.x=this.txtTime1.x+this.txtTime1.textWidth},e.update=function(){var t=Nn.battleInfo;if(t){switch(Nn.getNowBattleState()){case 1:this.txtTime1.text="正式报名时间：";break;case 2:this.txtTime1.text="报名剩余时间：";break;case 4:this.txtTime1.text="预报名开始倒计时：";break;case 3:this.txtTime1.text="",this.txtTime2.text=""}3==Nn.getNowBattleState()?_t.removeFromSceond(this,this.loopTime):(this.loopTime(),_t.addToSecond(this,this.loopTime)),Nn.getNowBattleState()<=2?(this.btnYes.label=t.is_sign_up?"已报名":"报名参加",this.signView.parent&&this.signView.update()):this.btnYes.label="本次盟战战报"}},s.createSpanBr=function(t,e,i){return"<span style='color:"+t+" ;font-size:"+e+"px;'>"+i+"</span>"},s}(),RO=function(t){function e(){e.__super.call(this)}return w(e,"modules.family.familyPetEmbattle.view.PetSignItem",dg),e.prototype.update=function(t,e){this.txtMain.text=t,this.txtSub.text=e},e}(),OO=function(t){function e(){this._nextTime=NaN,this.cd=30,e.__super.call(this)}w(e,"modules.family.view.FamiluFightMemberTimePanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_NO",!1,"",!1),this.on("click",this,this.onClose),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.setNextTime=function(t){void 0===t&&(t=0),this._nextTime=t},i.onClose=function(t){switch(t.target){case this.btnClose:this.closeWindow()}},i.onDisplay=function(){this.timeBar.width=436,_t.addToSecond(this,this.timeLoop)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){0<this.cd?(this.timeLab.text=this.cd+"s",this.timeBar.width=this.timeBar.width-436/30):(this.timeLab.text="",this.timeBar.width=0,_t.removeFromSceond(this,this.timeLoop)),this.cd--},I(0,i,"uiClass",function(){return"FamilyFightMemberTimePanel"}),e}(pg),LO=function(t){function e(){this._missionView=null,this._copyView=null,this._actView=null,this._curView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.tab.on("change",this,this.onTabChange),Nt.register("RP_FAMILY_BOSS",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_FAMILY_COPY",this.tab.items[1],new Tt(19,-10))}w(e,"modules.family.view.FamilyActPanel",mg);var i=e.prototype;return i.onTabChange=function(t){switch(this._curView&&this._curView.removeSelf(),this.tab.selectedIndex){case 0:pt.send(11,16,"仙盟-活动-仙盟任务"),this._missionView=this._missionView||new aL,this._curView=this._missionView;break;case 1:pt.send(11,17,"仙盟-活动-仙盟副本"),this._copyView=this._copyView||new GO,this._curView=this._copyView;break;case 2:pt.send(11,18,"仙盟-活动-仙盟秘境"),this._actView=this._actView||new DO,this._curView=this._actView}this._curView&&!this._curView.parent&&this.addChild(this._curView),this.updateView()},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.updateView=function(){this._curView&&this._curView.updateView()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.tab.selectedIndex=0},e}(),DO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyActView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.btnGo.on("click",this,this.onClick),Nt.register("RP_FAMILY_BOSS",this.btnGo,new Tt(19,-12))},i.onClick=function(){var t=new Date(ya.serverTimeMs);9==t.getHours()&&30<=t.getMinutes()||10<=t.getHours()&&t.getHours()<22?T.dispatch("FAMILY_OPEN_BOSS"):Jt.addTip("该活动 9:30 — 22:00 开启")},i.updateView=function(){var t=Dn.getFamilyBossInfo();if(t){var e=t.family_boss;if(e){var i=Dn.getFamilyVO().FamilyBossDic,s=0;for(var n in e)1==e[n].boss_state&&++s;this.txtLeft.text=s+"",this.txtLeft.color=0<s?"#139604":"#b60202",this.txtLeft.x=this.txtDesc.x+this.txtDesc.textWidth,this.txtLeft3.text="/"+i.values.length,this.txtLeft3.x=this.txtLeft.x+this.txtLeft.textWidth,this.txtLeft1.text=t.left_times+"",this.txtLeft1.color=0<t.left_times?"#139604":"#b60202",this.txtLeft2.text="/5",this.txtLeft2.x=this.txtLeft1.x+this.txtLeft1.textWidth}}else Ol.ins().toFamilyBossInfo()},e}(fg),NO=function(t){function e(){this._txtNameOriginX=NaN,this.buildName=["","管理大厅","洞天福地","仙盟商店"],this._blueVipBox=null,e.__super.call(this),this._txtNameOriginX=this.txtUserName.x}w(e,"modules.family.view.FamilyBaseView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.panel1.vScrollBar.autoHide=!0,this.panel.vScrollBar.autoHide=!0,Nt.register("RP_FAMILY_REQUEST",this.txtRequest,new Tt(29,-20)),this.txtChangeName.underline=!0,this.updateEditTxt()},i.onClick=function(t){var e=Dn.getMyMemberInfo();if(e)switch(t.target){case this.txtChangeName:e.family_title_id==Ln.OWNER?T.dispatch("FAMILY_OPEN_CHANGE_NAME"):Jt.addTip("只有盟主才可以更改仙盟名哦");break;case this.txtDelate:T.dispatch("FAMILY_OPEN_DELATE_VIEW");break;case this.txtChangeNotice:e.family_title_id==Ln.OWNER||e.family_title_id==Ln.VOWNER?T.dispatch("FAMILY_OPEN_CHANGE_NOTICE"):Jt.addTip("只有盟主或副盟主才可以更改仙盟公告哦");break;case this.txtRequest:e.family_title_id==Ln.OWNER||e.family_title_id==Ln.VOWNER?T.dispatch("FAMILY_OPEN_LOOK_REQUEST"):Jt.addTip("只有盟主或副盟主才可以查看申请哦")}},i.updateView=function(){var t=Dn.getFamilyDetail();if(t){this.txtNotice.text=t.notice,this.txtNotice.height=this.txtNotice.textHeight,this.panel1.refresh(),this.txtName.text="仙盟名称："+t.family_name,this.txtChangeName.x=this.txtName.textWidth+this.txtName.x+5,this.txtUser.text="盟    主：",this.txtUserName.text=t.owner_role_name,this.txtDelate.x=this.txtUserName.textWidth+this.txtUserName.x+5,this.txtLv.text="仙盟等级："+t.family_level,this.txtRoleNum.text="仙盟人数："+t.cur_member_num+"/"+Dn.getRoleNumByFamilyLV(t.family_level),this.txtRank.text="仙盟排名："+t.ranking;var e=Dn.getMembetInfoByRoleId(t.owner_role_id);null!=e&&this.updateBlueVip(e.blue_vip);var i=Dn.getEventList();if(i){var s,n="";for(var o in i)switch(s=i[o],n+=x.format(s.timestamp)+" ",s.event_id){case 1:n+=s.role_name+"升级了"+this.buildName[s.extra_param_1]+"至"+s.extra_param_2+"级！\n";break;case 2:n+="欢迎"+s.role_name+"加入仙盟，撒花！鼓掌！\n";break;case 3:n+="很遗憾"+s.role_name+"与仙盟志趣不投，已离开仙盟另谋发展。\n";break;case 4:n+="噼里啪啦！噼里啪啦！"+s.role_name+"在爆竹声中创建仙盟，广迎天下能人！\n"}this.txtEvent.text=n,this.txtEvent.height=this.txtEvent.textHeight,this.panel.refresh()}else Ol.ins().toFamilyEvents(t.family_id)}},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this.txtUserName.x=this._txtNameOriginX,this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(this._txtNameOriginX,this.txtUserName.y-5),this._blueVipBox.updateShowing(e),this.txtUserName.x=this._txtNameOriginX+this._blueVipBox.width,this.txtDelate.x=this.txtUserName.textWidth+this.txtUserName.x+5}},i.updateEditTxt=function(){37==G.agentId&&(this.txtChangeNotice.visible=!1)},e}(_g),VO=function(t){function e(){this.itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyBossPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)},i.updateView=function(){var t=Dn.getFamilyBossInfo();if(t){var e=t.family_boss;if(e){this.txtTime.text=t.left_times+"",this.txtTime.color=0<t.left_times?"#139604":"#b60202",this.txtTime1.text="/5",this.txtTime1.x=this.txtTime.x+this.txtTime.textWidth;var i=Dn.getFamilyVO().FamilyBossDic;this.itemArr=this.itemArr||[];for(var s=0;s<i.values.length;s++){this.itemArr[s]=this.itemArr[s]||new uL;var n,o=null;for(var a in e)if((n=e[a]).boss_id==i.values[s].id){o=n;break}i.values[s].state=o?o.boss_state:0,this.itemArr[s].data=i.values[s],this.itemArr[s].y=184*s,this.panel.addChild(this.itemArr[s])}}}},e}(gg),BO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyChangeNameView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.goloNum.text="2000"},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.parent&&Dn.getFamilyDetail()&&(this.input.focus=!0,this.input.text=Dn.getFamilyDetail().family_name)},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnSave:if(Dn.getFamilyDetail())if(""==this.input.text||this.input.text==Dn.getFamilyDetail().family_name)Jt.addTip("请先修改仙盟名称");else if(j.checkHtmlStrRule(this.input.text))if(2e3<=pe.user.attr.gold){var e=new Ee;e.msg="是否消耗2000元宝修改仙盟名称？",e.yesCaller=Ol.ins(),e.yesFun=Ol.ins().toFamilyInfoMod,e.yesArgs=[2,this.input.text],EF.showVO(e)}else Lo.showAlert();else Jt.addTip("含非法字符");else Jt.addTip("当前没有仙盟")}},e}(yg),MO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyChangeNoticeView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.input.on("input",this,this.onInputChange)},i.onInputChange=function(){this.updateLeft()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.parent&&Dn.getFamilyDetail()&&(this.input.text=Dn.getFamilyDetail().notice,this.input.focus=!0,this.updateLeft())},i.updateLeft=function(){var t=0;t=0<=(t=75-this.input.text.length)?t:0,this.txtLeft.text="（剩余输入："+t+"字）"},i.onClick=function(t){var e=this;switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnSave:if(37==G.agentId){var i=new Ee;i.msg="公告一经发布无法修改，是否确认发布？",i.yesCaller=this,i.yesFun=function(){Ol.ins().toFamilyInfoMod(1,e.input.text)},EF.showVO(i)}else Ol.ins().toFamilyInfoMod(1,this.input.text)}},e}(vg),FO=function(t){function e(){this.itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyCopyRankPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnClose.on("click",this,this.closeWindow),T.register("RANK_GOT_DATA_UPDATE",this,this.updateView)},i.updateView=function(){var t=jo.getRankVO(Dn.familyRankId);if(t){var e=t.rows;if(e){this.itemArr=this.itemArr||[];for(var i=Math.max(e.length,this.itemArr.length),s=0;s<i;s++)s<e.length?(this.itemArr[s]=this.itemArr[s]||new pL,this.itemArr[s].dataSource=e[s],this.itemArr[s].y=100*s,this.panel.addChild(this.itemArr[s])):this.itemArr[s]&&this.itemArr[s].removeSelf()}}},e}(Ig),UO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyCopyRewardTip",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.img1:var e=Z.span("可随机获得羽翼装备、金币","#ffffff",26)+"<br/>"+Z.span("\n仙盟有一人通关时，其他盟员可通过一键领取。","#ffffff",26);EF.show(e);break;case this.img5:e=Z.span("可随机获得羽翼装备、金币","#ffffff",26)+"<br/>"+Z.span("\n仙盟有五人通关时，其他盟员可通过一键领取。","#ffffff",26),EF.show(e)}},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.parent&&(this.txt1.text="暂无",this.txt2.text="暂无",this.txt3.text="暂无",this.txt4.text="暂无",this.txt5.text="暂无")},i.updateViewByToc=function(t){for(var e=t.passed_role_names.length,i=1;i<=e;i++)this["txt"+i].text=t.passed_role_names[i-1]},e}(wg),GO=function(t){function e(){this._good=null,this.curPage=0,this.curXMLVO=null,this._curToc=null,e.__super.call(this)}w(e,"modules.family.view.FamilyCopyView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.txtLink.underline=!0,this.on("click",this,this.onClick),this._good=new fh(null,!0,!0,105),this._good.pos(505,50),this.sp.addChild(this._good),this._good.on("click",this,this.onGoodClick)},i.onGoodClick=function(){this._good&&this._good.data&&(this._good.data.tempNum=1,Ae.show(this._good.data,"BASE_GOODS_TIP"))},i.onClick=function(t){switch(t.target){case this.txtLink:T.dispatch("FAMILY_OPEN_COPY_RANK");break;case this.btnClear:if(this._curToc&&!this._curToc.is_quick_finish&&0<this._curToc.role_top_barrier){var e=new Ee;e.msg=Z.font("是否进行扫荡？","#5d3924")+"<br/>"+Z.font("（每日可扫荡一次，建议在本日挑战最高关卡后进行）","#5d3924"),e.yesCaller=Ol.ins(),e.yesFun=Ol.ins().toFamilyCopyQuickFinish,EF.showVO(e)}else Jt.addTip("需历史关数大于1才可进行扫荡");break;case this.btnEn:this._curToc&&!this._curToc.is_encourage&&0<this._curToc.yesterday_top_category?Ol.ins().toFamilyCopyEncourage():Jt.addTip("当前无人可被助威");break;case this.btnFight:pt.send(11,19,"仙盟-副本-挑战按钮"),re.closeAllWindow(),Lr.ins().toMapChange(4e4);break;case this.btnGet:this._curToc&&1==this._curToc.can_recv_daily_rewards&&5<=this._curToc.today_top_barrier?Ol.ins().toFamilyCopyDailyReward():Jt.addTip("当前无可领取奖励");break;case this.imgward1:Ol.ins().openCopyRewardTip(20*this.curPage+5);break;case this.imgward2:Ol.ins().openCopyRewardTip(20*this.curPage+10);break;case this.imgward3:Ol.ins().openCopyRewardTip(20*this.curPage+15);break;case this.imgward4:Ol.ins().openCopyRewardTip(20*this.curPage+20);break;case this.btnRight:this.curXMLVO&&(++this.curPage,this.curPage=this.curPage<=Math.ceil(this.curXMLVO.max/4)-1?this.curPage:Math.ceil(this.curXMLVO.max/4)-1,this.updateReward());break;case this.btnLeft:--this.curPage,this.curPage=0<=this.curPage?this.curPage:0,this.updateReward()}},i.updateReward=function(){this.txtWard1.text=20*this.curPage+5+"关奖励",this.txtWard2.text=20*this.curPage+10+"关奖励",this.txtWard3.text=20*this.curPage+15+"关奖励",this.txtWard4.text=20*this.curPage+20+"关奖励",this.imgward1.gray=!this._curToc&&this._curToc.today_top_barrier<20*this.curPage+5,this.imgward2.gray=!this._curToc&&this._curToc.today_top_barrier<20*this.curPage+10,this.imgward3.gray=!this._curToc&&this._curToc.today_top_barrier<20*this.curPage+15,this.imgward4.gray=!this._curToc&&this._curToc.today_top_barrier<20*this.curPage+20,this.imgward1.mouseEnabled=!this._curToc&&this._curToc.today_top_barrier>=20*this.curPage+5,this.imgward2.mouseEnabled=!this._curToc&&this._curToc.today_top_barrier>=20*this.curPage+10,this.imgward3.mouseEnabled=!this._curToc&&this._curToc.today_top_barrier>=20*this.curPage+15,this.imgward4.mouseEnabled=!this._curToc&&this._curToc.today_top_barrier>=20*this.curPage+20},i.updateView=function(){if(Ol.ins().familyCopyFir)return Ol.ins().toFamilyCopyInfo(),void(Ol.ins().familyCopyFir=!1);if(this._curToc=Dn.getFamilyCopyInfo(),this._curToc){this.curXMLVO=Dn.getFamilyVO().familyCopyVO,300<=this._curToc.role_top_barrier+1?Dn.isWillOverForFamilyCopy=!0:Dn.isWillOverForFamilyCopy=!1,this._curToc.role_top_barrier==5*this.curXMLVO.max?(this.btnFight.label="已通关",this.btnFight.gray=!0,this.btnFight.mouseEnabled=!1,this.txtRound.text="第"+this._curToc.role_top_barrier+"关",this._good.data=ur.getItem(Dn.getFamilyVO().familyRewardVO.getReward(this._curToc.role_top_barrier))):(this.btnFight.label="挑战",this.btnFight.gray=!1,this.btnFight.mouseEnabled=!0,this.txtRound.text="第"+(this._curToc.role_top_barrier+1)+"关",this._good.data=ur.getItem(Dn.getFamilyVO().familyRewardVO.getReward(this._curToc.role_top_barrier+1))),this.txtRoleNum.text="本关通关人数："+this._curToc.cur_barrier_role_num;var t=Math.min(this.curXMLVO.sub,this._curToc.cur_barrier_role_num);this.txtRoleNum2.text="本关怪物属性：-"+t+"%",this.txtCurRound.text="历史最高：第"+this._curToc.role_top_barrier+"关",this.txtDayTime.text=this._curToc.is_quick_finish?"每日扫荡：1/1":"每日扫荡：0/1",this.txtRoleName.text=this._curToc.yesterday_top_name,this.txtCurRound1.text=""+this._curToc.yesterday_top_barrier,this.txtBuff.text="攻血+"+this._curToc.encourage_role_num+"%",this.btnClear.gray=this._curToc.is_quick_finish,this.btnClear.mouseEnabled=!this._curToc.is_quick_finish,this.btnClear.label=this._curToc.is_quick_finish?"已扫荡":"扫荡",this.btnEn.gray=this._curToc.is_encourage,this.btnEn.mouseEnabled=!this._curToc.is_encourage,this.imgRp.visible=Dn.btnGetShowRed,this.imgRp1.visible=Dn.btnClearShowRed,this.btnGet.disabled=3==this._curToc.can_recv_daily_rewards,0!=this._curToc.yesterday_top_category?this.imgHead.skin="com/head/big"+this._curToc.yesterday_top_category+this._curToc.yesterday_top_sex+".png":this.imgHead.skin="com/ui/itemMarkBg.png",this.updateReward()}else Ol.ins().toFamilyCopyInfo()},e}(bg),HO=function(t){function e(){this._curSel=1,this._alVO=null,e.__super.call(this)}w(e,"modules.family.view.FamilyCreateView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txtRoleNum1.text=""+Dn.getFamilyVO().FamilyBuildDic[1].FamilyBuildLvDic[1].roleNum,this.txtRoleNum2.text=""+Dn.getFamilyVO().FamilyBuildDic[1].FamilyBuildLvDic[2].roleNum,this.txtRoleNum1.x=this.txt1.x+this.txt1.textWidth+5,this.txtRoleNum2.x=this.txt3.x+this.txt3.textWidth+5,this.txt2.x=this.txtRoleNum1.x+this.txtRoleNum1.textWidth+5,this.txt4.x=this.txtRoleNum2.x+this.txtRoleNum2.textWidth+5,this.txt7.x=this.txt5.x+this.txt5.textWidth+5,this.txt6.x=this.txt7.x+this.txt7.textWidth+5,this.input.on("mousedown",this,this.onInputClick)},i.onInputClick=function(){this.input.focus=!0},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this)},i.linkToVip=function(){me.linkTo(10201)},i.initAl=function(){null==this._alVO&&(this._alVO=new Ee,this._alVO.yesLabel="查看VIP",(this._alVO.yesCaller=this)._alVO.yesFun=this.linkToVip)},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.img1:this.imgSel.x=59,this._curSel=1;break;case this.img2:this.imgSel.x=362,this._curSel=2;break;case this.btnCreate:if(""==this.input.text||"点击此处输入"==this.input.text)return void Jt.addTip("请为您的仙盟取个响亮的名字");if(!j.checkHtmlStrRule(this.input.text))return void Jt.addTip("含非法字符");this.input.text.replace("/[←-⇿]|[☀-⛿]|[✀-➿]|[　-〿]|[ἰ0-ὤF]|[Ὠ0-ὯF]/g","*"),console.log(this.input.text);var e=0,i=0;if(1==this._curSel){if(Ia.curLv<1)return this.initAl(),this._alVO.msg="VIP等级不足，成为VIP1即可创建一级仙盟，还有丰富的VIP特权和奖励！",void EF.showVO(this._alVO);if(pe.user.attr.gold<100)return void Lo.showAlert();e=100,i=1}if(2==this._curSel){if(Ia.curLv<4)return this.initAl(),this._alVO.msg="VIP等级不足，成为VIP4即可创建二级仙盟，还有丰富的VIP特权和奖励！",void EF.showVO(this._alVO);if(pe.user.attr.gold<500)return void Lo.showAlert();e=500,i=2}1==i?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(e+"元宝","#F7EF5F")+Z.span("创建"+i+"级仙盟【"+this.input.text+"】？","#5d3924"),Ol.ins(),Ol.ins().toFamilyCreate,[this._curSel,this.input.text],"familyCreate"):Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(e+"元宝","#F7EF5F")+Z.span("创建"+i+"级仙盟【"+this.input.text+"】？","#5d3924")+"<br>"+Z.span("（2级仙盟可容纳35名盟员，并返还仙盟创建者500仙盟贡献）","#5d3924"),Ol.ins(),Ol.ins().toFamilyCreate,[this._curSel,this.input.text],"familyCreate")}},e}(Sg),WO=function(t){function e(){this.selMen=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.family.view.FamilyDelateView",xg);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow();break;case this.btnYes:var e=Dn.getFamilyDetail();if(e)if(pe.roleID==e.owner_role_id)Jt.addTip("不能弹劾自身"),this.closeWindow();else{var i=Dn.getMembetInfoByRoleId(e.owner_role_id);if(432e3<=ya.serverTime-i.last_offline_time)if(this.selMen){var s=new Ee;s.msg="弹劾盟主成功后，"+Z.font("【"+this.selMen.role_name+"】",U.getColorLight(3),26)+"将获得盟主之位。<br>确定消耗【弹劾令】×1进行弹劾吗？",s.yesCaller=this,s.yesFun=this.checkDelate,EF.showVO(s)}else Jt.addTip("没有合适的候选盟主");else Jt.addTip("不符合弹劾条件，暂无法进行弹劾"),this.closeWindow()}else Jt.addTip("仙盟信息未初始化哦！")}},i.checkDelate=function(){0<xo.getGoodsNumByType(xo.GOODS_ID,12210022)?(Ol.ins().toFamilyImpeach(),this.closeWindow()):ba.show(12210022)},i.update=function(){var t=Dn.getFamilyDetail();if(this.selMen=null,t){var e=Dn.getMembetInfoByRoleId(t.owner_role_id);if(432e3<=ya.serverTime-e.last_offline_time){var i,s,n;if(t.vice_owners&&0<t.vice_owners.length)for(var o in t.vice_owners)s=t.vice_owners[o],i=Dn.getMembetInfoByRoleId(s.role_id),ya.serverTime-i.last_offline_time<432e3&&(this.selMen?i.total_contribution>this.selMen.total_contribution?this.selMen=i:i.total_contribution==this.selMen.total_contribution&&i.role_id<this.selMen.role_id&&(this.selMen=i):this.selMen=i);if(!this.selMen)for(n in t.members)i=t.members[n],ya.serverTime-i.last_offline_time<432e3&&(this.selMen?i.total_contribution>this.selMen.total_contribution?this.selMen=i:i.total_contribution==this.selMen.total_contribution&&i.role_id<this.selMen.role_id&&(this.selMen=i):this.selMen=i)}else this.selMen=e;this.selMen&&(this.txtNext.text=this.selMen.role_name)}else Jt.addTip("仙盟未初始化数据")},e}(),qO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyDonateView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)},i.onDisplay=function(){T.register("VIP_LEVEL_CHANGE",this,this.update),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("VIP_LEVEL_CHANGE",this,this.update),this.off("undisplay",this,this.onUNDisplay)},i.onClick=function(t){switch(t.target){case this.btn2:2e5<=pe.user.attr.silver?Ol.ins().toFamilyMissinDonate(1):ba.show(10201113);break;case this.btnClose:case this.btnClose1:this.closeWindow()}},i.update=function(){var t,e=Dn.getFamilyVO();for(var i in e.FamilyMissionArr)if(1==(t=e.FamilyMissionArr[i]).id){this.txtTime.text=t.nowTimes+"/"+t.times,this.btn2.gray=t.nowTimes>=t.times,this.btn2.mouseEnabled=t.nowTimes<t.times,this.btn2.label=t.nowTimes>=t.times?"已完成":"捐献";break}},e}(Cg),YO=function(t){function d(){this.familyIdArr=null,this.familyNameTxtArr=null,this.lineSp=null,this.LINE_MIDDLE_POS=[95,265,265],this.witnessSelectPanel=null,this.signFaimlyPanel=null,this.championTagImg=null,this.battleActions=null,this.roundOneFamilys=null,this.roundTwoFamilys=null,d.__super.call(this)}w(d,"modules.family.view.FamilyFightAgainsView",t);var e=d.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.createFightFamilyShow(),this.createLines(),this.initFamilyIdsArr(),this.familysTxt.underline=!0,Nt.register("PR_FAMILY_BATTLE_SET_FIGHT_ING",this.btnWitness,new Tt(10,-5))},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.btnWitness:this.openWitnessSelectPanel();break;case this.familysTxt:this.openSignUpFamily()}},e.onDisplay=function(){T.register("FAMILY_BATTLE_LIST_UPDATE",this,this.update),T.register("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update),Ol.ins().toFamilyBattleList()},e.onUnDisplay=function(){T.remove("FAMILY_BATTLE_LIST_UPDATE",this,this.update),T.remove("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update)},e.update=function(){var t=Dn.getBattleFamilyList();if(this.initFamilyIdsArr(),this.cleanFamilyNameTxt(),1==t.length){var e=t[0].name;return this.setFamilyNameTxt(0,e),this.showChampionTag(),this.btnWitness.disabled=!0,this.btnWitness.label="已结束",void Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING")}this.roundOneFamilys=[],this.roundTwoFamilys=[];var i=Dn.getBattleRoundInfo();d.lineColorTree=[["#5d3924","#5d3924","#5d3924"],["#5d3924","#5d3924","#5d3924"],["#5d3924","#5d3924","#5d3924"]];for(var s=i.length-1;0<=s;s--){var n=i[s];1==n.round?this.setRoundOneFamilyName(n):2==n.round&&this.setRoundTwoFamilyName(n)}for(var o=[],a=0,l=this.roundOneFamilys.length;a<l;a++)this.setFamilyNameTxt(a+3,this.roundOneFamilys[a].name),this.setFamilyId2Arr(a+3,this.roundOneFamilys[a].id),this.setFamilyNameColor(a+3,this.roundOneFamilys[a].color),o.push(this.roundOneFamilys[a].color);for(var r=[],h=0,u=this.roundTwoFamilys.length;h<u;h++)if(this.roundTwoFamilys[h]){var c=this.getIndexByRoundOneFamilyNames(this.roundTwoFamilys[h].id);c=c<=-1?h+1:c,this.setFamilyNameTxt(c,this.roundTwoFamilys[h].name),this.setFamilyId2Arr(c,this.roundTwoFamilys[h].id),this.setFamilyNameColor(c,this.roundTwoFamilys[h].color),r[c-1]=this.roundTwoFamilys[h].color}"#fef6d9"==o[0]&&"#5d3924"==o[1]?d.lineColorTree[1]=["#fef6d9","#fef6d9","#5d3924"]:"#5d3924"==o[0]&&"#fef6d9"==o[1]?d.lineColorTree[1]=["#fef6d9","#5d3924","#fef6d9"]:d.lineColorTree[1]=["#5d3924","#5d3924","#5d3924"],"#fef6d9"==o[2]&&"#5d3924"==o[3]?d.lineColorTree[2]=["#fef6d9","#fef6d9","#5d3924"]:"#5d3924"==o[2]&&"#fef6d9"==o[3]?d.lineColorTree[2]=["#fef6d9","#5d3924","#fef6d9"]:d.lineColorTree[2]=["#5d3924","#5d3924","#5d3924"],"#fef6d9"==r[0]&&"#5d3924"==r[1]?d.lineColorTree[0]=["#fef6d9","#fef6d9","#5d3924"]:"#5d3924"==r[0]&&"#fef6d9"==r[1]?d.lineColorTree[0]=["#fef6d9","#5d3924","#fef6d9"]:d.lineColorTree[0]=["#5d3924","#5d3924","#5d3924"],this.createLines()},e.getIndexByRoundOneFamilyNames=function(t){if(this.roundOneFamilys.length<=0)return-1;for(var e=0,i=this.roundOneFamilys.length;e<i;e++)if(this.roundOneFamilys[e].id==t)return e<=1?1:2;return-1},e.setRoundOneFamilyName=function(t){if(1==t.round){var e=Dn.getFamilyNameById(t.family_id_1),i=0!=t.winner_family_id?t.winner_family_id==t.family_id_1?"#fef6d9":"#5d3924":"#fef6d9";this.roundOneFamilys.push({name:e,id:t.family_id_1,color:i});var s=Dn.getFamilyNameById(t.family_id_2),n=0!=t.winner_family_id?t.winner_family_id==t.family_id_2?"#fef6d9":"#5d3924":"#fef6d9";if(this.roundOneFamilys.push({name:s,id:t.family_id_2,color:n}),0!=t.winner_family_id){var o=this.roundOneFamilys.length<=2?0:1;t.winner_family_id==t.family_id_1?this.roundTwoFamilys[o]={name:e,id:t.family_id_1}:t.winner_family_id==t.family_id_2&&(this.roundTwoFamilys[o]={name:s,id:t.family_id_2}),this.unShowBattleAct(this.roundOneFamilys.length<=2?3:6)}else this.showBattleAct(this.roundOneFamilys.length<=2?3:6)}},e.setRoundTwoFamilyName=function(t){if(2==t.round){var e=Dn.getFamilyNameById(t.family_id_1),i=0!=t.winner_family_id?t.winner_family_id==t.family_id_1?"#fef6d9":"#5d3924":"#fef6d9";this.roundTwoFamilys[0]={name:e,id:t.family_id_1,color:i};var s=Dn.getFamilyNameById(t.family_id_2),n=0!=t.winner_family_id?t.winner_family_id==t.family_id_2?"#fef6d9":"#5d3924":"#fef6d9";this.roundTwoFamilys[1]={name:s,id:t.family_id_2,color:n},0!=t.winner_family_id?(this.showChampionTag(),this.unShowBattleAct(1),this.btnWitness.disabled=!0,this.btnWitness.label="已结束",this.setFamilyNameTxt(0,t.winner_family_id==t.family_id_1?e:s),Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_ING")):this.showBattleAct(1)}},e.showChampionTag=function(){this.championTagImg=this.championTagImg||new et,this.championTagImg.skin="modules/family/Champion.png",this.championTagImg.pos(this.familyNameTxtArr[0].x+this.familyNameTxtArr[0].width-this.championTagImg.width/2,this.familyNameTxtArr[0].y-this.championTagImg.height/2),this.familysSp.addChild(this.championTagImg)},e.showBattleAct=function(t){this.battleActions=this.battleActions||[],this.battleActions[t]&&this.battleActions[t]instanceof com.scene.effect.BitmapClip||(this.battleActions[t]=new b),this.battleActions[t].visible=!0,this.battleActions[t].loadAndPlay("unit/effect/familyBattle","default",0,!0),3==t||4==t?this.battleActions[t].pos(161,263):5==t||6==t?this.battleActions[t].pos(479,263):this.battleActions[t].pos(316,94),this.battleActions[t].zOrder=9999,this.familysSp.addChild(this.battleActions[t])},e.unShowBattleAct=function(t){this.battleActions=this.battleActions||[],this.battleActions[t]&&this.battleActions[t]instanceof com.scene.effect.BitmapClip&&(this.battleActions[t].visible=!1,this.battleActions[t].zOrder=9999)},e.setFamilyNameTxt=function(t,e){if(void 0===t&&(t=-1),void 0===e&&(e=""),0<=t){var i=this.familyNameTxtArr[t];null!=i&&(i.getChildByName("nameTxt").text=e)}},e.cleanFamilyNameTxt=function(){for(var t=0,e=this.familyNameTxtArr.length;t<e;t++){var i=this.familyNameTxtArr[t];null!=i&&(i.getChildByName("nameTxt").text="")}},e.setFamilyNameColor=function(t,e){if(void 0===t&&(t=-1),void 0===e&&(e="#fef6d9"),0<=t){var i=this.familyNameTxtArr[t];null!=i&&(i.getChildByName("nameTxt").color=e)}},e.checkSelectIsOut=function(t){if(0<=t){var e=this.familyNameTxtArr[t];if(null!=e)return"#5d3924"==e.getChildByName("nameTxt").color}return!1},e.createFightFamilyShow=function(){this.familyNameTxtArr=[];for(var t=this.familysSp.width,e=0,i=d.SHOW_FAMILY_TOTAL.length;e<i;e++){var s=d.SHOW_FAMILY_TOTAL[e];if(1==s){var n=this.createFamilyNames();n.pos(t/2-n.width/2,10),this.familysSp.addChild(n),this.familyNameTxtArr.push(n)}else for(var o,a=0;a<s;a++)o=this.createFamilyNames(),s<4?o.pos(t/4*(a*a+1+a)-2*o.height,180):o.pos(t/4*a+5,350),this.familysSp.addChild(o),this.familyNameTxtArr.push(o)}},e.createFamilyNames=function(){var t=new et;t.skin="com/ui/txtBg7.png",t.sizeGrid="18,20,18,20",t.size(150,37);var e=new jt;return e.fontSize=24,e.color="#fef6d9",e.name="nameTxt",e.size(t.width,t.height),e.align="center",e.valign="middle",t.addChild(e),t.on("click",this,this.onClickNameImg),t},e.createLines=function(){this.lineSp=this.lineSp||new Wt,this.lineSp.graphics.clear();for(var t=0,e=d.LINE_POS_TREE.length;t<e;t++){var i=t,s=d.LINE_POS_TREE[t],n=d.lineColorTree[t],o=this.familyNameTxtArr[i],a=this.LINE_MIDDLE_POS[t];this.lineSp.graphics.drawLine(o.x+o.width/2,o.y+o.height,o.x+o.width/2,a,n[0],2);for(var l=0,r=s.length;l<r;l++){var h=s[l]-1,u=this.familyNameTxtArr[h];this.lineSp.graphics.drawLines(0,0,[o.x+o.width/2,a,u.x+u.width/2,a,u.x+u.width/2,u.y],n[l+1],2)}}this.familysSp.addChild(this.lineSp)},e.initFamilyIdsArr=function(){this.familyIdArr=[];for(var t=0;t<7;t++)this.familyIdArr[t]=0},e.setFamilyId2Arr=function(t,e){0==this.familyIdArr[t]&&(this.familyIdArr[t]=e)},e.onClickNameImg=function(t){if(this.btnWitness.disabled)Jt.addTip("巅峰对决已结束，无法观战");else{var e=this.familyNameTxtArr.indexOf(t.target);if(-1!=e&&""!=this.familyNameTxtArr[e].getChildByName("nameTxt").text){var i=this.familyIdArr[e];i<=0||(this.checkSelectIsOut(e)?Jt.addTip("无法观战已淘汰仙盟"):e<=0||(e<=2?T.dispatch("FAMILY_FIGHT_WITNESS_OPEN",i,2):T.dispatch("FAMILY_FIGHT_WITNESS_OPEN",i,1)))}}},e.openWitnessSelectPanel=function(t){void 0===t&&(t=0);var e=Dn.getBattleRoundInfo();e&&e.length<=0?Jt.addTip("巅峰对决已结束，无法观战"):(this.witnessSelectPanel=this.witnessSelectPanel||new JO,this.witnessSelectPanel.setWentWitnessFamilyId(t),this.witnessSelectPanel.openWindow())},e.openSignUpFamily=function(){this.signFaimlyPanel=this.signFaimlyPanel||new QO,this.signFaimlyPanel.openWindow()},d.ICON_NAME_TOTLE=7,d.SON_NUM=2,d.WIN_COLOR="#fef6d9",d.LOSE_COLOR="#5d3924",_(d,["SHOW_FAMILY_TOTAL",function(){return this.SHOW_FAMILY_TOTAL=[1,2,4]},"LINE_POS_TREE",function(){return this.LINE_POS_TREE=[[2,3],[4,5],[6,7]]},"lineColorTree",function(){return this.lineColorTree=[["#5d3924","#5d3924","#5d3924"],["#5d3924","#5d3924","#5d3924"],["#5d3924","#5d3924","#5d3924"]]}]),d}(Pg),XO=function(t){function r(){this.fightMemberShowPart=null,this.positionTabs=null,this.isShowPosTabs=!1,r.__super.call(this)}w(r,"modules.family.view.FamilyFightReadyView",t);var e=r.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.on("click",this,this.onClick),this.on("mousedown",this,this.onMouseDown),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.tab.on("change",this,this.onChangeTab),this.createFightRoleIcon(),this.signList.itemRender=mL,this.tab.selectedIndex=0},e.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.showCloseTip();break;case this.btnYes:r.confirmMembersToFight()}},e.onMouseDown=function(t){this.positionTabs&&this.positionTabs.contains(t.target)||this.positionTabs&&this.positionTabs.parent&&this.positionTabs.removeSelf()},e.onDisplay=function(){Ol.ins().toFamilyBattleInfo(),this.checkSelfFamilyTitle(),this.updateFightMemberPart(),T.register("FAMILY_FIGHT_CHANGE_MEMBER",this,this.updateFightMemberPart),T.register("FAMILY_BATTLE_MEMBER_ITEM_CLICK",this,this.cancelFightMemberFight),T.register("FAMILY_BATTLE_MEMBER_POSITION_TABS_SHOW",this,this.showMemberPositionTabs)},e.onUnDisplay=function(){T.remove("FAMILY_FIGHT_CHANGE_MEMBER",this,this.updateFightMemberPart),T.remove("FAMILY_BATTLE_MEMBER_ITEM_CLICK",this,this.cancelFightMemberFight),T.remove("FAMILY_BATTLE_MEMBER_POSITION_TABS_SHOW",this,this.showMemberPositionTabs),this.positionTabs&&this.positionTabs.parent&&this.positionTabs.removeSelf()},e.showCloseTip=function(){var t,e,i=Dn.getBattleMembers(),s=Dn.familyFightMembers,n=!1;for(var o in i){if((t=i[o]).id!=s[t.val]){n=!0;break}}n?((e=new Ee).msg="布阵发生变化，请问是否保存？",e.noLabel="不保存",e.yesLabel="保存",e.yesCaller=this,e.yesFun=r.confirmMembersToFight,e.noCaller=this,e.noFun=this.noCaller,e.closeCaller=this,e.closeFun=this.closeCaller,EF.showVO(e)):this.noCaller()},e.noCaller=function(){Dn.setBattleMembers(Dn.getBattleMembers()),this.closeWindow()},e.closeCaller=function(){this.closeWindow(),T.dispatch("FAMILY_BATTLE_MEMBER_POSITION_TABS_SHOW")},e.onChangeTab=function(){switch(this.updateSignAndUnSignList(),this.tab.selectedIndex){case 0:this.signList.visible=!0}},e.update=function(){this.onChangeTab(),this.updateFightMemberPart()},e.updateSignAndUnSignList=function(){var t=Dn.getFamilyDetail();if(t){var e=t.members;if(e){for(var i=Dn.getSignMembers(),s=[],n=0,o=e.length;n<o;n++){var a=e[n],l=a.role_id;-1!=i.indexOf(l)&&s.push({info:a,itemType:0})}s.sort(r.memSortFun),this.signList.dataSource=s}}else Ol.ins().toFamilyDetailTos(pe.user.attr.family_id)},e.createFightRoleIcon=function(){this.fightMemberShowPart?this.updateFightMemberPart():(this.fightMemberShowPart=new Sh,this.addChild(this.fightMemberShowPart))},e.checkSelfFamilyTitle=function(){var t=Dn.getMyMemberInfo(),e=t&&(1==t.family_title_id||2==t.family_title_id);return this.btnYes.disabled=!e,e},e.updateFightMemberPart=function(){if(this.fightMemberShowPart.parent){var t,e=Dn.familyFightMembers,i=[];for(var s in e)if((t=e[s])==Ln.FAMILY_FIGHT_POS_NOT_MEMBERS)i.push(null);else{var n=Dn.getMembetInfoByRoleId(t);null!=n&&i.push(n)}this.fightMemberShowPart.update(i,[])}this.updateFightMemberPowCount()},e.updateFightMemberPowCount=function(){var t,e,i=Dn.familyFightMembers,s=0;for(var n in i)e=i[n],t=Dn.getMembetInfoByRoleId(e),e!=Ln.FAMILY_FIGHT_POS_NOT_MEMBERS&&null!=t&&(s+=t.role_power);this.powTxt.text="当前布阵总战力:"+W.getShortenPowerStr(s)},e.cancelFightMemberFight=function(t){if(this.checkSelfFamilyTitle()){var e=t+1;Dn.setFamilyFightMemberPos(e,Ln.FAMILY_FIGHT_POS_NOT_MEMBERS)}},e.showMemberPositionTabs=function(t,e){this.positionTabs=this.positionTabs||new IL;var i=t.localToGlobal(new Tt(t.btnGoToFight.x,t.btnGoToFight.y)),s=this.globalToLocal(i);this.positionTabs.pos(s.x-this.positionTabs.width,s.y-20),this.positionTabs.setRoleId(e),this.addChild(this.positionTabs),this.isShowPosTabs=!0},r.memSortFun=function(t,e){var i=t.info,s=e.info;return i.role_power>s.role_power?-1:i.role_power<s.role_power?1:0},r.confirmMembersToFight=function(){Ol.ins().toFamilyBattlePosition()},r}(Tg),KO=function(t){function e(){this.selfIsInFighting=!1,this.diff=0,this.selfInfo=null,this.tagInfo=null,this.waitTime=0,e.__super.call(this)}w(e,"modules.family.view.FamilyFightRoleInfoPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.setSelfInfo=function(t){this.selfInfo=t},i.setTagInfo=function(t){this.tagInfo=t},i.update=function(){if(this.selfInfo||this.tagInfo){var t=this.selfInfo.familyId,e=this.selfInfo.roleId,i=Dn.getFamilyNameById(t),s=Dn.getMemberInfoByFamilyId(t,e);s?(this.txtMyName.text=s.role_name,this.txtMyPower.text="战力:"+s.role_power,this.imgMyHead.skin="com/head/"+s.category+s.sex+".png"):(this.txtMyName.text="",this.txtMyPower.text="",this.imgMyHead.skin=""),this.txtMyFamily.text=i;var n=this.tagInfo.familyId,o=this.tagInfo.roleId,a=Dn.getFamilyNameById(n),l=Dn.getMemberInfoByFamilyId(n,o);l?(this.txtTargetName.text=l.role_name,this.txtTargetPower.text="战力:"+l.role_power,this.imgTargetHead.skin="com/head/"+l.category+l.sex+".png"):(this.txtTargetName.text="",this.txtTargetPower.text="",this.imgTargetHead.skin=""),this.txtTargetFamily.text=a}},i.onDisplay=function(){Ol.ins().toFamilyBattleList(),T.register("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update),this.diff=15,_t.addToSecond(this,this.timeLoop)},i.onUnDisplay=function(){T.remove("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update),_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){1==this.selfIsInFighting?0<this.diff?(this.txtEndTime.text="距正式比赛开始还有"+this.diff+"秒",this.diff--):(_t.removeFromSceond(this,this.timeLoop),Ol.ins().removeFamilyFightRoleInfoShow()):ya.serverTime<this.waitTime?this.txtEndTime.text="距正式比赛开始还有"+(this.waitTime-ya.serverTime)+"秒":(_t.removeFromSceond(this,this.timeLoop),Ol.ins().removeFamilyFightRoleInfoShow())},i.setWiteTime=function(t){this.waitTime=t},e}(kg),jO=function(t){function r(){this._roleNameLabs=null,this._isOpenBattle=!1,this._showType=0,this._isCreateSignUpShow=!1,this.curY=5,r.__super.call(this)}w(r,"modules.family.view.FamilyFightSignSelfPanel",t);var e=r.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.changeText.color="#96f254",this.changeText.underline=!0,this.changeText.on("click",this,this.onChangeText),this._showType=1,Nt.register("PR_FAMILY_BATTLE_SIGN_UP",this.btnSignUp,new Tt(21,-3)),Nt.register("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER",this.btnReady,new Tt(21,-3)),this.ruleList.vScrollBarSkin="",this.showRuleText()},e.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow();break;case this.btnReady:this.openReadyPanel();break;case this.btnSignUp:this.signUpForFamilyFight()}},e.onChangeText=function(){this._showType=0==this._showType?1:0,1==this._showType?(this.changeText.text="规则",this.memberBox.visible=!0,this.ruleList.visible=!1,this.titleText.text="参赛布阵"):0==this._showType&&(this.changeText.text="布阵",this.memberBox.visible=!1,this.ruleList.visible=!0,this.titleText.text="规则")},e.openReadyPanel=function(){Nt.hide("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER"),r.isFamilyLeader()?T.dispatch("FAMILY_FIGHT_READY_OPEN"):Jt.addTip("只有盟主和副盟主才可以修改布阵")},e.onDisplay=function(){this.initDisplay(),this.createConstTextShow(),Ol.ins().toFamilyBattleInfo(),_t.addToSecond(this,this.canChangeView),T.register("CROSS_DAY",this,this.crossDay)},e.onUnDisplay=function(){_t.removeFromSceond(this,this.canChangeView),T.remove("CROSS_DAY",this,this.crossDay)},e.crossDay=function(){-1<Dn.getFamilyBattleIsStart()&&Dn.getFamilyBattleIsStart()<20&&(this.isOpenBattle=!0,this.initDisplay(),Dn.cleanFamilyFightMemberPos(),Ol.ins().toFamilyBattleInfo(),0==this._isCreateSignUpShow&&this.createConstTextShow())},e.initDisplay=function(){this._isOpenBattle?(this.openTimeTxt.text="巅峰对决20:30正式开始",this.changeText.visible=!0,this.memberBox.visible=!0,this.btnReady.disabled=!1,this.titleText.text="参赛布阵",this._showType=0):(this.openTimeTxt.text="巅峰对决每周二、周五开启",this.changeText.visible=!1,this.memberBox.visible=!1,this.btnReady.disabled=!0,this.titleText.text="规则",this._showType=1),this.onChangeText()},e.canChangeView=function(){var t=Dn.getFamilyBattleIsStart();t<=-1?_t.removeFromSceond(this,this.canChangeView):50<=t&&Ol.ins().changeViewToWitness()},e.createConstTextShow=function(){if(0!=this._isOpenBattle){for(var t=["出战职位","角色名","职位分数"],e=0,i=t.length;e<i;e++)Me.createText(t[e],this.memberBox.width/3*e,5,this.memberBox.width/3,30,this.memberBox,r.createTextFormart());var s,n=4;for(var o in Ln.FAMILY_FIGHT_POS_SCORE){var a=(s=Ln.FAMILY_FIGHT_POS_SCORE[o]).name;Me.createText(a,0,210-40*(4-n),this.memberBox.width/3,30,this.memberBox,r.createTextFormart("center",24,r.COLOR_ARR[n]));var l=s.score;Me.createText(l+"",this.memberBox.width/3*2,210-40*(4-n),this.memberBox.width/3,30,this.memberBox,r.createTextFormart("center",24,r.COLOR_ARR[n])),n--}this._isOpenBattle=!0}},e.signUpForFamilyFight=function(){Ol.ins().toFamilyBattleSignUp()},e.update=function(){this.updateFamilyTotalSignTxt(),this.updateMemberShow()},e.updateFamilyTotalSignTxt=function(){var t=Dn.getSignMembers(),e=t.length;this.signUpNumTxt.style.align="center";var i=this._isOpenBattle?Z.span("报名人数:","#5d3924",24,!1)+Z.span(e+"","#e1c6bc",24,!1):Z.span("报名人数:0","#5d3924",24,!1);this.signUpNumTxt.innerHTML=i,-1!=t.indexOf(pe.roleID)?(this.btnSignUp.label="已报名",this.btnSignUp.disabled=!0):(this.btnSignUp.label="我要参加",this.btnSignUp.disabled=!this._isOpenBattle)},e.updateMemberShow=function(){if(0!=this._isOpenBattle){this._roleNameLabs=this._roleNameLabs||[];var t,e=Dn.familyFightMembers,i=0;for(var s in e){if((t=e[s])==Ln.FAMILY_FIGHT_POS_NOT_MEMBERS)this._roleNameLabs[i]&&this._roleNameLabs[i]instanceof laya.display.Text?this._roleNameLabs[i].text="":this._roleNameLabs[i]=Me.createText("",this.memberBox.width/3,210-40*i,this.memberBox.width/3,30,this.memberBox,r.createTextFormart("center",24,r.COLOR_ARR[4-i]));else{var n=Dn.getMembetInfoByRoleId(t);if(null!=n){var o=n.role_name;this._roleNameLabs[i]&&this._roleNameLabs[i]instanceof laya.display.Text?this._roleNameLabs[i].text=o:this._roleNameLabs[i]=Me.createText(o,this.memberBox.width/3,210-40*i,this.memberBox.width/3,30,this.memberBox,r.createTextFormart("center",24,r.COLOR_ARR[4-i]))}}i++}}},e.showRuleText=function(){var t="";t+=r.createSpanBr("#5d3924",24,"1、巅峰对决每周二、五开启，"),t+=r.createSpanBr("#fff000",24,"0:00-20:29"),t+=r.createSpanBr("#5d3924",24,"为报名时间，"),t+=r.createSpanBr("#fff000",24,"20:30"),t+=r.createSpanBr("#5d3924",24,"正式开始。")+"<br/>",t+=r.createSpanBr("#5d3924",24,"2、仙盟成员先进行报名，盟主/副盟主从报名的仙盟成员中"),t+=r.createSpanBr("#fff000",24,"选取5名布阵出战"),t+=r.createSpanBr("#5d3924",24,"，根据仙盟出战的总战力选取"),t+=r.createSpanBr("#fff000",24,"前4名"),t+=r.createSpanBr("#5d3924",24,"的仙盟随机分配，进行淘汰赛。")+"<br/>",t+=r.createSpanBr("#5d3924",24,"3、布阵共有5个出战职位，每个职位都有对应的分数，比赛开始后两个仙盟相同职位的玩家进行一场"),t+=r.createSpanBr("#fff000",24,"1V1对决"),t+=r.createSpanBr("#5d3924",24,"，"),t+=r.createSpanBr("#fff000",24,"胜方玩家仙盟获得该场对决对应的分数"),t+=r.createSpanBr("#5d3924",24,"，5场比赛结束总分高的仙盟晋级，另一方淘汰。")+"<br/>",t+=r.createSpanBr("#5d3924",24,"4、比赛开始后，若参赛选手在线，则会"),t+=r.createSpanBr("#fff000",24,"强制进入战斗"),t+=r.createSpanBr("#5d3924",24,"，若选手不在线，则系统代为参战。")+"<br/>",t+=r.createSpanBr("#5d3924",24,"5、同仙盟的成员可以通过"),t+=r.createSpanBr("#fff000",24,"观战支持己方仙盟参赛选手"),t+=r.createSpanBr("#5d3924",24,"（可以使用技能对敌方选手"),t+=r.createSpanBr("#fff000",24,"造成伤害"),t+=r.createSpanBr("#5d3924",24,"或为己方选手"),t+=r.createSpanBr("#fff000",24,"回血"),t+=r.createSpanBr("#5d3924",24,"），非参赛仙盟成员也可以进行观战（但不能使用技能）。")+"<br/>",t+=r.createSpanBr("#5d3924",24,"6、根据战斗结果，巅峰对决结束后会统一用信件发送奖励（只有报名成员获得），排名不同奖励不同：")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=r.createSpanBr("#5d3924",24,"①第一名的仙盟：仙盟所有报名成员获得巅峰对决"),t+=r.createSpanBr("#fff000",24,"专属的聊天泡泡和冠军称号"),t+=r.createSpanBr("#5d3924",24,"（有效期70小时，退出仙盟后无效）、800点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=r.createSpanBr("#5d3924",24,"②第二名的仙盟：仙盟所有报名成员获得巅峰对决"),t+=r.createSpanBr("#fff000",24,"专属的亚军称号"),t+=r.createSpanBr("#5d3924",24,"（有效期70小时，退出仙盟后无效）、500点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=r.createSpanBr("#5d3924",24,"③并列第三名的仙盟：300点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=r.createSpanBr("#5d3924",24,"④报名但未参赛仙盟：100点仙盟贡献");var e=new K;e.style.align="left",e.style.valign="top",e.style.color="#5d3924",e.style.leading=15,e.width=604,e.innerHTML=t,e.height=e.contextHeight,e.y=this.curY,this.curY+=e.height,this.ruleList.addChild(e)},I(0,e,"isOpenBattle",null,function(t){this._isOpenBattle=t}),r.createTextFormart=function(t,e,i){void 0===t&&(t="center"),void 0===e&&(e=24),void 0===i&&(i="#5d3924");var s=new Qt;return s.align=t,s.fontSize=e,s.color=i,s},r.isFamilyLeader=function(){if(pe.user.attr.family_id){var t=Dn.getMemberInfoByFamilyId(pe.user.attr.family_id,pe.roleID);return t&&(1==t.family_title_id||2==t.family_title_id)}return!1},r.createSpanBr=function(t,e,i){return"<span style='color:"+t+" ;font-size:"+e+"px;'>"+i+"</span>"},r.SHOW_TYPE_RULE=0,r.SHOW_TYPE_MEMBER=1,_(r,["COLOR_ARR",function(){return this.COLOR_ARR=["#fff21a","#f5aa3f","#fd70ff","#fd70ff","#4cf0ff"]}]),r}(Ag),QO=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.vScrollBarSkin="",this.list.itemRender=fL,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.topText.innerHTML=Z.font("报名仙盟中布阵总战力","#3e1e0c",24)+Z.font("排名前4","#ffff00",24)+Z.font("的仙盟可参与巅峰对决","#3e1e0c",24)}w(e,"modules.family.view.FamilyFightSignUpFamilyPanel",Eg);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.onDisplay=function(){this.list.dataSource=Dn.getBattleFamilyList()},i.onUnDisplay=function(){},e}(),zO=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.FamilyFightWitnessInfoPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){},i.onUnDisplay=function(){},i.initShow=function(){this.witnessNumTxt.text="",this.inspireNumTxt.text="",this.throwNumTxt.text="",this.familyNameTxt.text=""},i.updateByBattleWatch=function(t,e){this.witnessNumTxt.text=(t.watching_num<=-1?1:t.watching_num)+"",this.familyNameTxt.text=t.family_name;var i,s=t.skill_vals,n=0,o=0;for(var a in s)99999002==(i=s[a]).id?o+=i.val:99999001==i.id&&(n+=i.val);this.inspireNumTxt.text=W.getShortenPowerStr(o),this.throwNumTxt.text=W.getShortenPowerStr(n)},e}(Rg),$O=function(t){function e(){this.inspireCD=0,this.throwCD=0,this.originInspireDiff=0,this.originThrowDiff=0,e.__super.call(this)}w(e,"modules.family.view.FamilyFightWitnessOptionPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.inspireImg.on("mousedown",this,this.onMouseDown,[this.inspireImg]),this.inspireImg.on("mouseup",this,this.onMouseUp,[this.inspireImg]),this.inspireImg.on("mouseout",this,this._$7_onMouseOut,[this.inspireImg]),this.inspireImg.on("mouseover",this,this._$7_onMouseOver,[this.inspireImg]),this.throwImg.on("mousedown",this,this.onMouseDown,[this.throwImg]),this.throwImg.on("mouseup",this,this.onMouseUp,[this.throwImg]),this.throwImg.on("mouseout",this,this._$7_onMouseOut,[this.throwImg]),this.throwImg.on("mouseover",this,this._$7_onMouseOver,[this.throwImg])},i.onDisplay=function(){this.update(),0==Dn.battleOptionTipShow&&this.showTips()},i.onUnDisplay=function(){_t.removeFromSceond(this,this.cdTimeLoop)},i._$7_onMouseOver=function(t){t.scale(1,1)},i.onMouseUp=function(t){t.scale(1,1)},i._$7_onMouseOut=function(t){t.scale(1,1)},i.onMouseDown=function(t){switch(t){case this.inspireImg:t.scale(.9,.9),Ol.ins().toFamilyBattleWatchSkill(99999002);break;case this.throwImg:t.scale(.9,.9),Ol.ins().toFamilyBattleWatchSkill(99999001)}Dn.battleOptionTipShow=!0,this.unShowTips()},i.showTips=function(){this.tipsImg.visible=!0},i.unShowTips=function(){this.tipsImg.visible=!1},i.update=function(){},i.cdTimeLoop=function(){var t=ya.serverTime;this.inspireCD>t?(this.inspireGray.height=(this.inspireCD-t)/this.originInspireDiff*68,this.inspireImg.mouseEnabled=!1):(this.inspireImg.mouseEnabled=!0,this.inspireGray.height=0,this.originInspireDiff=0),this.throwCD>t?(this.thorwGray.height=(this.throwCD-t)/this.originThrowDiff*68,this.throwImg.mouseEnabled=!1):(this.throwImg.mouseEnabled=!0,this.thorwGray.height=0,this.originThrowDiff=0),this.inspireCD<t&&this.throwCD<t&&_t.removeFromSceond(this,this.cdTimeLoop)},e}(Og),ZO=function(t){function m(){this.chatPanel=null,this.chatWorldPanel=null,this.selfFamilyMemberPart=null,this.otherFamilyMemberPart=null,this.fightMemberHeadIcons=[],this.isWitnessSelfFamily=!0,this.witnessFamilyId=NaN,this.witnessBattleRound=0,this.familyFightDetails=null,this.msgItems=null,this.curItemY=2,this.nextBattleStartTime=NaN,this.detailId=0,this.isRunningTimeToEnter=!1,this.isCoolDownLooping=!1,this.ls=0,this.rs=0,this.curY=5,m.__super.call(this)}w(m,"modules.family.view.FamilyFightWitnessPanel",t);var e=m.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.tab.on("change",this,this.onChangeTab),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.tabPanels.selectedIndex=0,this.tabPanels.selectHandler=new Q(this,this.selectTabOfPanel),this.tab.selectedIndex=0,this.createWitnessFightMemberShow(),this.createFightDetailMemberShow(),this.fightDetailList.vScrollBarSkin="",this.ruleList.vScrollBarSkin="",this.showRuleText()},e.onClick=function(t){switch(t.target){case this.btnWitness:this.isCoolDownLooping?this.nextBattleStartTime-ya.serverTime<=0?Jt.addTip("比赛已结束"):Jt.addTip("比赛将在"+(this.nextBattleStartTime-ya.serverTime)+"秒后开始"):this.checkIsAllFinish()?Jt.addTip("比赛已结束"):this.enterMapCountDown();break;case this.btnClose1:case this.btnClose:this.closeWindow()}},e.checkIsAllFinish=function(){var t=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId);if(t){var e,i=t.details;for(var s in i)if(2!=(e=i[s]).progress&&0!=e.role_id_1&&0!=e.role_id_2&&0==e.winner_role_id)return!1}return!0},e.onChangeTab=function(){switch(this.tab.selectedIndex){case 0:this.worldChatSp.visible=!0,this.chatSp.visible=!1,this.fightDetailList.visible=!1,this.ruleList.visible=!1,this.infoShowImg.height=184,this.chatWorldPanel=this.chatWorldPanel||new uP,this.chatWorldPanel.hideEmoji(),this.worldChatSp.addChild(this.chatWorldPanel),ws.curChannel=1e4,this.chatWorldPanel.update();break;case 1:this.worldChatSp.visible=!1,this.chatSp.visible=!0,this.fightDetailList.visible=!1,this.ruleList.visible=!1,this.infoShowImg.height=184,this.chatPanel=this.chatPanel||new lP,this.chatPanel.hideEmoji(),this.chatSp.addChild(this.chatPanel),ws.curChannel=2e4,this.chatPanel.update();break;case 2:this.worldChatSp.visible=!1,this.chatSp.visible=!1,this.fightDetailList.visible=!0,this.ruleList.visible=!1,this.infoShowImg.height=246;break;case 3:this.worldChatSp.visible=!1,this.chatSp.visible=!1,this.fightDetailList.visible=!1,this.ruleList.visible=!0,this.infoShowImg.height=246}},e.onDisplay=function(){T.register("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.register("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.register("FAMILY_BATTLE_DETAIL_UPDATE",this,this.update),T.register("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update),this.witnessFamilyId==pe.user.attr.family_id?(Ol.ins().toFamilyBattleInfo(),this.tabPanels.items[0].visible=!0,this.tabPanels.x=40,this.changeChatChannel(),Nt.register("PR_FAMILY_BATTLE_SET_FIGHT_ING",this.btnWitness,new Tt(10,-5))):(Ol.ins().toFamilyBattleDetail(this.witnessFamilyId,this.witnessBattleRound),this.tabPanels.selectedIndex=1,this.tabPanels.items[0].visible=!1,this.tabPanels.x=-98,ws.curChannel=1e4,Nt.unRegister(this.btnWitness))},e.onUnDisplay=function(){ws.curChannel=1e4,T.remove("CHAT_UPDATE_TO_FAMILY_FIGHT",this,this.updateChatPanelMsg),T.remove("CHAT_UPDATE_TO_FAMILY_WORLD_FIGHT",this,this.updateWorldChatPanelMsg),T.remove("FAMILY_BATTLE_DETAIL_UPDATE",this,this.update),T.remove("FAMILY_BATTLE_GET_OTHER_FAMILY_DETAIL",this,this.update),_t.removeFromSceond(this,this.onTimeLoop),0==Dn.getIsAutoEnterFight()&&Dn.setIsAutoEnterFight(),this.isRunningTimeToEnter=!1},e.updateProgress=function(){0==this.checkIsAllFinish()?(this.nextBattleStartTime=this.getNextBattleStartTime(),_t.addToSecond(this,this.onTimeLoop)):this.nextBattleTime.text="比赛结束"},e.getNextBattleStartTime=function(){if(this.isWitnessSelfFamily)return Dn.getNextBattleStartTime();var t,e=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId);if(e&&e.details)for(var i in e.details)if(0!=(t=e.details[i]).role_id_1&&0!=t.role_id_2&&0==t.winner_role_id&&0!=t.progress)return t.timestamp;return 0},e.onTimeLoop=function(){if(ya.serverTime<this.nextBattleStartTime)this.isCoolDownLooping=!0,this.nextBattleStartTime-ya.serverTime<=0?this.nextBattleTime.text="比赛将在0秒后开始":this.nextBattleTime.text="比赛将在"+(this.nextBattleStartTime-ya.serverTime)+"秒后开始",this.nextBattleStartTime-ya.serverTime<=3&&(this.isRunningTimeToEnter=!0,Jt.addTip("巅峰对决正在进行中，"+(this.nextBattleStartTime-ya.serverTime)+"秒后自动进入观战"));else{this.isCoolDownLooping=!1,this.nextBattleTime.text="比赛将在0秒后开始",_t.removeFromSceond(this,this.onTimeLoop),this.detailId=0;var t=this.getNextBattleDetail();t&&0!=t.role_id_1&&0!=t.role_id_2&&0==t.winner_role_id&&t.role_id_1!=pe.roleID&&t.role_id_2!=pe.roleID&&0<this.getNextBattleStartTime()&&(this.detailId=t.detail_id,Dn.getIsAutoEnterFight()&&1==this.isRunningTimeToEnter&&(this.isRunningTimeToEnter=!1,Ol.ins().enterFamilyFightMap(this.detailId,this.witnessFamilyId,this.nextBattleStartTime+15)))}},e.getNextBattleDetail=function(){if(this.isWitnessSelfFamily)return Dn.getNextBattleDetail();var t,e=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId);if(e&&e.details)for(var i in e.details)if(0!=(t=e.details[i]).role_id_1&&0!=t.role_id_2&&0==t.winner_role_id&&1==t.progress&&0<t.timestamp)return t;return null},e.enterMapCountDown=function(){Dn.getIsAutoEnterFight()&&Ol.ins().enterFamilyFightMap(this.detailId,this.witnessFamilyId,this.nextBattleStartTime+15)},e.selectTabOfPanel=function(t){switch(t){case 1:this.witnessSp.visible=!1,this.fightDetailsSp.visible=!0,ws.curChannel=1e4;break;case 0:this.witnessSp.visible=!0,this.fightDetailsSp.visible=!1,this.changeChatChannel()}},e.changeChatChannel=function(){0==this.tab.selectedIndex?ws.curChannel=1e4:1==this.tab.selectedIndex?ws.curChannel=2e4:ws.curChannel=1e4},e.setWitnessFamilyID=function(t,e){this.witnessFamilyId=t,this.witnessBattleRound=e,Dn.witnessBattleRoundNum=e,Dn.witnessFamilyId=t;var i=Dn.getFamilyDetail()&&Dn.getFamilyDetail().family_id?Dn.getFamilyDetail().family_id:0;this.isWitnessSelfFamily=0!=i&&this.witnessFamilyId==i},e.createWitnessFightMemberShow=function(){for(var t=0;t<2;t++){var e=new dF;e.open=!0,e.pos(m.FIGHT_MEMBER_POS_X[t],5),this.witnessSp.addChild(e);var i=Me.createText("",e.x,e.y+e.height+5,NaN,24,this.witnessSp,m.createTextFormat("center",24,"#ffe0cf")),s=Me.createText("",e.x,i.y+i.height+5,NaN,24,this.witnessSp,m.createTextFormat("center",24,"#5d3924")),n=Me.createText("",e.x,s.y+s.height+5,e.width,24,this.witnessSp,m.createTextFormat("center",24,"#fdc06a"));this.fightMemberHeadIcons.push({icon:e,name:i,familyName:s,posName:n})}},e.createFightDetailMemberShow=function(){null==this.selfFamilyMemberPart&&(this.selfFamilyMemberPart=new Sh,this.selfFamilyMemberPart.panelIsWitness=!0,this.selfFamilyMemberPart.pos(-8,-81),this.fightDetailsSp.addChild(this.selfFamilyMemberPart)),null==this.otherFamilyMemberPart&&(this.otherFamilyMemberPart=new Sh,this.otherFamilyMemberPart.panelIsWitness=!0,this.otherFamilyMemberPart.pos(-8,233),this.fightDetailsSp.addChild(this.otherFamilyMemberPart))},e.updateChatPanelMsg=function(t){null!=this.chatPanel&&this.chatPanel.parent&&this.chatPanel.onMessage(t)},e.updateWorldChatPanelMsg=function(t){null!=this.chatWorldPanel&&this.chatWorldPanel.parent&&this.chatWorldPanel.onMessage(t)},e.update=function(){this.setNextBattleInfo(),this.updateWitnessPanelShow(),_t.removeFromSceond(this,this.onTimeLoop),this.updateProgress(),this.updateOutcomeDetailShow(),this.updateScoreShow(),this.updateFightMsgShow()},e.setNextBattleInfo=function(){if(this.isWitnessSelfFamily&&null==Dn.getNextBattleDetail()&&Dn.getNextBattleStartTime()<=0){var t=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId);if(!t)return;for(var e=t.details,i=e.length-1;0<=i;i--){var s=e[i];if(0!=s.role_id_1&&0!=s.role_id_2&&0==s.winner_role_id&&1==s.progress){Dn.setNextBattleStartTime(s.timestamp),Dn.setNextBattleDetail(s),Ol.ins()._witnessID=s.detail_id;break}}}},e.updateWitnessPanelShow=function(){var t=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId),e=Dn.getNextBattleDetail();if(null==e&&t){var i=t.details,s=Dn.getBattleFightingId();0<s?0!=i[s-1].role_id_1&&0!=i[s-1].role_id_2&&(e=i[s-1]):e=i[0]}if(e){var n=Ln.FAMILY_FIGHT_POS_SCORE[Ln.FAMILY_FIGHT_POS_NANMES[e.position]].name;this.setHeadIconInfoShow(e.family_id_1,e.role_id_1,n),this.setHeadIconInfoShow(e.family_id_2,e.role_id_2,n)}},e.setHeadIconInfoShow=function(t,e,i){var s=Dn.getFamilyNameById(t),n=Dn.getMemberInfoByFamilyId(t,e),o=m.createPalData(n);if(n){var a=t==this.witnessFamilyId?0:1;this.updateFightMemberHeadIconShow(a,o,s,n.role_name,i)}},e.updateFightMemberHeadIconShow=function(t,e,i,s,n){if(null!=this.fightMemberHeadIcons[t]){var o=this.fightMemberHeadIcons[t],a=0,l=0,r=o.icon;r&&r instanceof modules.role.view.HeadItem&&(r.data=e,a=r.width,l=r.x);var h=o.familyName;h&&h instanceof laya.display.Text&&(h.text=i,h.width>a?h.x=l-(h.width-a)/2:h.width=a);var u=o.name;u&&u instanceof laya.display.Text&&(u.text=s,u.width>a?u.x=l-(u.width-a)/2:u.width=a),o.posName.text=n}},e.updateOutcomeDetailShow=function(){if(this.familyFightDetails=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId),null!=this.familyFightDetails){var t=0;if(this.selfFamilyMemberPart.clearWinnerAndLoseTagImgShow(),this.otherFamilyMemberPart.clearWinnerAndLoseTagImgShow(),this.familyFightDetails.details){for(var e=this.familyFightDetails.details,i=0,s=e.length;i<s;i++){var n=e[i];this.updateMemberShowPart(n.family_id_1,n.position-1,Dn.getMemberInfoByFamilyId(n.family_id_1,n.role_id_1),n.role_id_1==n.winner_role_id,0!=n.winner_role_id),this.updateMemberShowPart(n.family_id_2,n.position-1,Dn.getMemberInfoByFamilyId(n.family_id_2,n.role_id_2),n.role_id_2==n.winner_role_id,0!=n.winner_role_id),2!=n.progress&&0!=n.role_id_1&&0!=n.role_id_2&&0==n.winner_role_id&&(t=n.position-1)}e&&e[0]&&(e[0].family_id_1==this.witnessFamilyId?(this.selfFamilyNameTxt.text=Dn.getFamilyNameById(e[0].family_id_1),this.otherFamilyNameTxt.text=Dn.getFamilyNameById(e[0].family_id_2)):(this.selfFamilyNameTxt.text=Dn.getFamilyNameById(e[0].family_id_2),this.otherFamilyNameTxt.text=Dn.getFamilyNameById(e[0].family_id_1)))}1==this.checkIsAllFinish()?this.imgVSDetails.visible=!1:(this.imgVSDetails.visible=!0,this.updateImgVSDetailsPos(t))}},e.updateMemberShowPart=function(t,e,i,s,n){void 0===n&&(n=!1),t==this.witnessFamilyId?this.selfFamilyMemberPart&&this.selfFamilyMemberPart.updateByPosIndex(e,i,s,n):this.otherFamilyMemberPart&&this.otherFamilyMemberPart.updateByPosIndex(e,i,s,n)},e.updateImgVSDetailsPos=function(t){void 0===t&&(t=0),this.imgVSDetails.x=m.VS_IMG_POSX[t]},e.updateScoreShow=function(){if(this.ls=0,this.rs=0,this.familyFightDetails&&this.familyFightDetails.details)for(var t=this.familyFightDetails.details,e=0,i=t.length;e<i;e++)this.setScoreAndShow(t[e])},e.setScoreAndShow=function(t){var e=Ln.FAMILY_FIGHT_POS_SCORE[Ln.FAMILY_FIGHT_POS_NANMES[t.position]].score;t.family_id_1==this.witnessFamilyId?(t.winner_role_id==t.role_id_1&&0!=t.winner_role_id&&0!=t.role_id_1&&(this.ls+=e),t.winner_role_id==t.role_id_2&&0!=t.winner_role_id&&0!=t.role_id_2&&(this.rs+=e)):(t.winner_role_id==t.role_id_1&&0!=t.winner_role_id&&0!=t.role_id_1&&(this.rs+=e),t.winner_role_id==t.role_id_2&&0!=t.winner_role_id&&0!=t.role_id_2&&(this.ls+=e)),this.fightPointTxt.text=this.ls+" : "+this.rs},e.updateFightMsgShow=function(){this.cleanMsgItem();var t=Dn.getBattleDetailsByFamilyId(this.witnessFamilyId);if(t)for(var e=0,i=t.details,s=0,n=0,o=i.length-1;0<=o;o--){var a=i[o];if(0!=a.winner_role_id&&(0!=a.role_id_1||0!=a.role_id_2)){var l=this.getBdRoleName(a,"winner"),r=this.getShowFamilyNameInMsg(a.family_id_1,a.family_id_2),h=this.getBdRoleName(a,"enemy"),u=this.getBdRoleName(a,"role"),c=Ln.FAMILY_FIGHT_POS_SCORE[Ln.FAMILY_FIGHT_POS_NANMES[a.position]].score,d=Ln.FAMILY_FIGHT_POS_SCORE[Ln.FAMILY_FIGHT_POS_NANMES[a.position]].name;a.family_id_1==this.witnessFamilyId?a.role_id_1==a.winner_role_id?s+=c:n+=c:a.family_id_2==this.witnessFamilyId&&(a.role_id_2==a.winner_role_id?s+=c:n+=c);var p=new K;p.width=617,p.style.align="center",p.style.valign="top",p.style.color="#5d3924",p.style.leading=15,p.innerHTML=m.createSpanBr("#ffff00",24,"对战【"+r+"】仙盟")+m.createSpanBr("#f4f1b2",24,d+"对决:")+m.createSpanBr("#5d3924",24,"【"+h+"】")+m.createSpanBr("#5d3924",24,"VS")+m.createSpanBr("#5d3924",24,"【"+u+"】")+m.createSpanBr("#5d3924",24,"【"+l+"】胜利！夺得"+c+"分！")+m.createSpanBr("#f4f1b2",24,"目前总比分"+s+":"+n),p.height=p.contextHeight,p.y+=e*p.height+45*e,this.msgItems.push(p),this.fightDetailList.addChild(p),e++}}},e.cleanMsgItem=function(){for(this.msgItems=this.msgItems||[];0<this.msgItems.length;){var t=this.msgItems.shift();t.visible=!0,t.removeSelf(),this.curItemY-=t.contextHeight+2}},e.getBdRoleName=function(t,e){var i="",s=Dn.getMemberInfoByFamilyId(t.family_id_1,t.role_id_1),n=Dn.getMemberInfoByFamilyId(t.family_id_2,t.role_id_2);switch(e){case"winner":t.role_id_1==t.winner_role_id?i=s?s.role_name:"??????":t.role_id_2==t.winner_role_id&&(i=n?n.role_name:"??????");break;case"enemy":t.family_id_1==this.witnessFamilyId?i=n?n.role_name:"??????":t.family_id_2==this.witnessFamilyId&&(i=s?s.role_name:"??????");break;case"role":t.family_id_1==this.witnessFamilyId?i=s?s.role_name:"??????":t.family_id_2==this.witnessFamilyId&&(i=n?n.role_name:"??????")}return i},e.getShowFamilyNameInMsg=function(t,e){var i="";return t==this.witnessFamilyId?i=Dn.getFamilyNameById(e):e==this.witnessFamilyId&&(i=Dn.getFamilyNameById(t)),i},e.showRuleText=function(){var t="";t+=m.createSpanBrs("#5d3924",22,"1、巅峰对决每周二、五开启，"),t+=m.createSpanBrs("#fff000",22,"0:00-20:29"),t+=m.createSpanBrs("#5d3924",22,"为报名时间，"),t+=m.createSpanBrs("#fff000",22,"20:30"),t+=m.createSpanBrs("#5d3924",22,"正式开始。")+"<br/>",t+=m.createSpanBrs("#5d3924",22,"2、仙盟成员先进行报名，盟主/副盟主从报名的仙盟成员中"),t+=m.createSpanBrs("#fff000",22,"选取5名布阵出战"),t+=m.createSpanBrs("#5d3924",22,"，根据仙盟出战的总战力选取"),t+=m.createSpanBrs("#fff000",22,"前4名"),t+=m.createSpanBrs("#5d3924",22,"的仙盟随机分配，进行淘汰赛。")+"<br/>",t+=m.createSpanBrs("#5d3924",22,"3、布阵共有5个出战职位，每个职位都有对应的分数，比赛开始后两个仙盟相同职位的玩家进行一场"),t+=m.createSpanBrs("#fff000",22,"1V1对决"),t+=m.createSpanBrs("#5d3924",22,"，"),t+=m.createSpanBrs("#fff000",22,"胜方玩家仙盟获得该场对决对应的分数"),t+=m.createSpanBrs("#5d3924",22,"，5场比赛结束总分高的仙盟晋级，另一方淘汰。")+"<br/>",t+=m.createSpanBrs("#5d3924",22,"4、比赛开始后，若参赛选手在线，则会"),t+=m.createSpanBrs("#fff000",22,"强制进入战斗"),t+=m.createSpanBrs("#5d3924",22,"，若选手不在线，则系统代为参战。")+"<br/>",t+=m.createSpanBrs("#5d3924",22,"5、同仙盟的成员可以通过"),t+=m.createSpanBrs("#fff000",22,"观战支持己方仙盟参赛选手"),t+=m.createSpanBrs("#5d3924",22,"（可以使用技能对敌方选手"),t+=m.createSpanBrs("#fff000",22,"造成伤害"),t+=m.createSpanBrs("#5d3924",22,"或为己方选手"),t+=m.createSpanBrs("#fff000",22,"回血"),t+=m.createSpanBrs("#5d3924",22,"），非参赛仙盟成员也可以进行观战（但不能使用技能）。")+"<br/>",t+=m.createSpanBrs("#5d3924",22,"6、根据战斗结果，巅峰对决结束后会统一用信件发送奖励（只有报名成员获得），排名不同奖励不同：")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=m.createSpanBrs("#5d3924",22,"①第一名的仙盟：仙盟所有报名成员获得巅峰对决"),t+=m.createSpanBrs("#fff000",22,"专属的聊天泡泡和冠军称号"),t+=m.createSpanBrs("#5d3924",22,"（有效期70小时，退出仙盟后无效）、800点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=m.createSpanBrs("#5d3924",22,"②第二名的仙盟：仙盟所有报名成员获得巅峰对决"),t+=m.createSpanBrs("#fff000",22,"专属的亚军称号"),t+=m.createSpanBrs("#5d3924",22,"（有效期70小时，退出仙盟后无效）、500点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=m.createSpanBrs("#5d3924",22,"③并列第三名的仙盟：300点仙盟贡献")+"<br/>&nbsp;&nbsp;&nbsp;&nbsp;",t+=m.createSpanBrs("#5d3924",22,"④报名但未参赛仙盟：100点仙盟贡献");var e=new K;e.style.align="left",e.style.valign="top",e.style.color="#5d3924",e.style.leading=15,e.width=604,e.innerHTML=t,e.x=3,e.height=e.contextHeight,e.y=this.curY,this.curY+=e.height,this.ruleList.addChild(e)},I(0,e,"uiClass",function(){return"FamilyFightWitness"}),m.createTextFormat=function(t,e,i){void 0===t&&(t="center"),void 0===e&&(e=24),void 0===i&&(i="#000000");var s=new Qt;return s.fontSize=e,s.align=t,s.color=i,s},m.createPalData=function(t){if(!t)return null;var e=new Object;e.className="p_pal_ext",e.category=t.category,e.sex=t.sex;var i=new Object;return i.className="p_pal_data",i.ext=e,i},m.createSpanBr=function(t,e,i){return"<span style='color:"+t+" ;font-size:"+e+"px;'>"+i+"</span><br/>"},m.createSpanBrs=function(t,e,i){return"<span style='color:"+t+" ;font-size:"+e+"px;'>"+i+"</span>"},m.TAB_TYPE_WORLD_CHAT=0,m.TAB_TYPE_FAMILY_CHAT=1,m.TAB_TYPE_FIGHT_MSG=2,m.TAB_TYPE_FIGHT_RULE=3,m.TAB_PANEL_TYPE_WITNESS=0,m.TAB_PANEL_TYPE_DETAIL=1,_(m,["FIGHT_MEMBER_POS_X",function(){return this.FIGHT_MEMBER_POS_X=[94,464]},"VS_IMG_POSX",function(){return this.VS_IMG_POSX=[90,218,338,462,582]}]),m}(Lg),JO=function(t){function e(){this.selectItemShow=[{selectImg:null,nameText:null,nameString:"",isOut:!1,isShow:!1,familyId:0,familyIndex:0},{selectImg:null,nameText:null,nameString:"",isOut:!1,isShow:!1,familyId:0,familyIndex:0},{selectImg:null,nameText:null,nameString:"",isOut:!1,isShow:!1,familyId:0,familyIndex:0},{selectImg:null,nameText:null,nameString:"",isOut:!1,isShow:!1,familyId:0,familyIndex:0}],this.selectFamilyId=NaN,this.wentWitnessFamilyId=NaN,e.__super.call(this)}w(e,"modules.family.view.FamilyFightWitnessSelectPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.txt1.style.fontSize=this.txt2.style.fontSize=this.txt3.style.fontSize=this.txt4.style.fontSize=24,this.txt1.style.color=this.txt2.style.color=this.txt3.style.color=this.txt4.style.color="#5d3924",this.initSelectItem()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.btnEnter:this.witnessFamilyBattle();break;case this.txt1:case this.selectImg1:0==this.selectImg1.disabled&&this.clickIndex(1);break;case this.txt2:case this.selectImg2:0==this.selectImg2.disabled&&this.clickIndex(2),this.clickIndex(2);break;case this.txt3:case this.selectImg3:0==this.selectImg3.disabled&&this.clickIndex(3);break;case this.txt4:case this.selectImg4:0==this.selectImg4.disabled&&this.clickIndex(4)}},i.clickIndex=function(t){for(var e=1;e<=4;e++)this["selectImg"+e].skin=t==e?"modules/pet/do2.png":"modules/pet/do1.png";this.selectItemShow[t-1]&&(this.selectFamilyId=this.selectItemShow[t-1].familyId)},i.witnessFamilyBattle=function(){var t=0;for(var e in this.selectItemShow)0==this.selectItemShow[e].isOut&&t++;2<t?T.dispatch("FAMILY_FIGHT_WITNESS_OPEN",this.selectFamilyId,1):T.dispatch("FAMILY_FIGHT_WITNESS_OPEN",this.selectFamilyId,2),this.closeWindow()},i.onDisplay=function(){Ol.ins().toFamilyBattleList(),T.register("FAMILY_BATTLE_LIST_UPDATE",this,this.update)},i.onUnDisplay=function(){T.remove("FAMILY_BATTLE_LIST_UPDATE",this,this.update)},i.update=function(){this.updateSelectShowInfo(),this.updateShow()},i.initSelectItem=function(){for(var t=0,e=this.selectItemShow.length;t<e;t++){var i=this.selectItemShow[t];i.selectImg=this["selectImg"+(t+1)],i.nameText=this["txt"+(t+1)],i.nameString="",i.nameText.visible=i.selectImg.visible=i.isShow}},i.updateSelectShowInfo=function(){var t,e=Dn.getBattleFamilyList();for(var i in e)if((t=e[i]).index<=4){var s=this.selectItemShow[t.index-1],n=t.name+(t.family_id==pe.user.attr.family_id?"(我方仙盟)":"");s.nameString=n,s.isShow=!0,s.familyId=t.family_id,s.familyIndex=t.index}var o,a=Dn.getBattleRoundInfo();for(var l in a)o=a[l],this.getSelectItemInfoByFamilyId(o.family_id_1)&&(this.getSelectItemInfoByFamilyId(o.family_id_1).isOut=!(0==o.winner_family_id||o.family_id_1==o.winner_family_id)),this.getSelectItemInfoByFamilyId(o.family_id_2)&&(this.getSelectItemInfoByFamilyId(o.family_id_2).isOut=!(0==o.winner_family_id||o.family_id_2==o.winner_family_id))},i.getSelectItemInfoByFamilyId=function(t){var e;for(var i in this.selectItemShow)if((e=this.selectItemShow[i]).familyId==t)return e;return null},i.updateShow=function(){var t;for(var e in this.selectItemShow)(t=this.selectItemShow[e]).selectImg.visible=t.nameText.visible=t.isShow,t.selectImg.disabled=t.isOut,t.isOut?t.nameText.innerHTML=Z.font(t.nameString,"#565656",24):t.nameText.innerHTML=Z.font(t.nameString,"#fef6d9",24);var i=this.getSelectItemInfoByFamilyId(pe.user.attr.family_id);if(i&&0==i.isOut)this.clickIndex(i.familyIndex);else{var s;for(var n in this.selectItemShow)if(0==(s=this.selectItemShow[n]).isOut){this.clickIndex(s.familyIndex);break}this.showAutoSelect()}},i.setWentWitnessFamilyId=function(t){this.wentWitnessFamilyId=t},i.showAutoSelect=function(){var t=0;0<(t=this.wentWitnessFamilyId<=0?0<(t=this.getSelfFamilyIndex())?t:this.getAutoSelectIndex():0<(t=this.getSelectFamilyIndex())?t:this.getAutoSelectIndex())&&this.clickIndex(t)},i.getSelfFamilyIndex=function(){for(var t=0,e=this.selectItemShow.length;t<e;t++)if(this.selectItemShow[t].familyId==pe.user.attr.family_id&&0==this.selectItemShow[t].isOut)return this.selectItemShow[t].index;return 0},i.getAutoSelectIndex=function(){for(var t=0,e=this.selectItemShow.length;t<e;t++)if(0==this.selectItemShow[t].isOut)return this.selectItemShow[t].index;return 0},i.getSelectFamilyIndex=function(){for(var t=0,e=this.selectItemShow.length;t<e;t++)if(this.selectItemShow[t].familyId==this.wentWitnessFamilyId&&0==this.selectItemShow[t].isOut)return this.selectItemShow[t].index;return 0},e}(Dg),tL=function(t){function e(){this.nowStarIndex=0,this._itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyListPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},i.onDisplay=function(){Ol.ins().toFamilyListTos(),this.nowStarIndex=0,this.panel.scrollTo(0,0)},i.onUnDisplay=function(){},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnCreate:T.dispatch("FAMILY_CREATE_VIEW_OPEN");break;case this.preBtn:this.nowStarIndex-=10,this.updateView(),this.panel.scrollTo(0,0);break;case this.nextBtn:this.nowStarIndex+=10,this.updateView(),this.panel.scrollTo(0,0)}},i.updateView=function(){var t=Dn.getFamilyData();if(t){this.checkBtnState(t.family_infos.length);var e=this.getListLimit(t.family_infos,this.nowStarIndex);this._itemArr=this._itemArr||[];for(var i=Math.max(e.length,this._itemArr.length),s=0;s<i;s++)s<e.length?(this._itemArr[s]=this._itemArr[s]||new _L,this._itemArr[s].data=e[s],this._itemArr[s].y=128*s,this.panel.addChild(this._itemArr[s])):this._itemArr[s]&&this._itemArr[s].removeSelf()}},i.getListLimit=function(t,e){var i=[];return t&&0!=t.length&&(i=t.length>=e+10?t.slice(e,e+10):t.slice(e,t.length)),i},i.checkBtnState=function(t){this.preBtn.disabled=!(0<this.nowStarIndex),this.nextBtn.disabled=this.nowStarIndex+10>t,this.nowStarIndex>t&&(this.nowStarIndex-=10,this.nextBtn.disabled=!0),this.nowStarIndex<0&&(this.nowStarIndex=0)},e}(Ng),eL=function(t){function e(){this.nowStarIndex=0,this._itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyListView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.preBtn.on("click",this,this.onClick),this.nextBtn.on("click",this,this.onClick),this.on("display",this,this.onDisplay)},i.onDisplay=function(){this.nowStarIndex=0,this.panel.scrollTo(0,0)},i.updateView=function(){var t=Dn.getFamilyData();if(t){this.checkBtnState(t.family_infos.length);var e=this.getListLimit(t.family_infos,this.nowStarIndex);this._itemArr=this._itemArr||[];for(var i=Math.max(e.length,this._itemArr.length),s=0;s<i;s++)s<e.length?(this._itemArr[s]=this._itemArr[s]||new gL,this._itemArr[s].data=e[s],this._itemArr[s].y=106*s,this.panel.addChild(this._itemArr[s])):this._itemArr[s]&&this._itemArr[s].removeSelf()}},i.getListLimit=function(t,e){var i=[];return t&&0!=t.length&&(i=t.length>=e+10?t.slice(e,e+10):t.slice(e,t.length)),i},i.onClick=function(t){switch(t.target){case this.preBtn:this.nowStarIndex-=10,this.updateView();break;case this.nextBtn:this.nowStarIndex+=10,this.updateView()}this.panel.scrollTo(0,0)},i.checkBtnState=function(t){this.preBtn.disabled=!(0<this.nowStarIndex),this.nextBtn.disabled=this.nowStarIndex+10>t,this.nowStarIndex>t&&(this.nowStarIndex-=10,this.nextBtn.disabled=!0),this.nowStarIndex<0&&(this.nowStarIndex=0)},e}(Vg),iL=function(t){function e(){this.fightAct=null,e.__super.call(this)}w(e,"modules.family.view.FamilyMainPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.resetAlpha(),this.on("mousedown",this,this.onDown),this.on("mouseup",this,this.onUp),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),Nt.register("RP_FAMILY_BOSS",this.btnAct,new Tt(18,0)),Nt.register("RP_FAMILY_COPY",this.btnAct,new Tt(18,0)),Nt.register("RP_FAMILY_REQUEST",this.btnMgr,new Tt(18,0)),Nt.register("PR_FAMILY_BATTLE_SIGN_UP",this.btnFight,new Tt(18,0)),Nt.register("PR_FAMILY_BATTLE_SET_FIGHT_MEMBER",this.btnFight,new Tt(18,0)),Nt.register("PR_FAMILY_BATTLE_SET_FIGHT_ING",this.btnFight,new Tt(18,0)),Nt.register("PR_FAMILY_MATERIAL",this.btnShop,new Tt(18,0)),Nt.register("PR_FAMILY_BATTLE_SIGN",this.btnPetBat,new Tt(18,0)),Nt.register("PR_FAMILY_BATTLE_FIGHT",this.btnPetBat,new Tt(18,0))},i.onDisplay=function(){Ol.ins().toFamilyPanelOpen(1),this.on("undisplay",this,this.onUNDisplay),this.setFamilyFightShow()},i.onUNDisplay=function(){Ol.ins().toFamilyPanelOpen(2),this.off("undisplay",this,this.onUNDisplay)},i.onClick=function(t){switch(t.target){case this.btnAct:case this.imgAct:pt.send(11,2,"仙盟-活动入口"),T.dispatch("FAMILY_ACT_OPEN");break;case this.btnMgr:case this.imgMgr:pt.send(11,3,"仙盟-管理入口"),T.dispatch("FAMILY_MGR_OPEN");break;case this.btnShop:case this.imgShop:pt.send(11,4,"仙盟-商店入口"),T.dispatch("FAMILY_SHOP_OPEN",0);break;case this.btnSkill:case this.imgSkill:pt.send(11,5,"仙盟-技能入口"),T.dispatch("FAMILY_SKILL_OPEN");break;case this.btnFight:case this.imgFight:pt.send(11,6,"仙盟-巅峰对决入口"),T.dispatch("FAMILY_FIGHT_OPEN");break;case this.btnPetBat:case this.imgPetBat:me.linkTo(11308),Nt.hide("PR_FAMILY_BATTLE_SIGN"),Nt.hide("PR_FAMILY_BATTLE_FIGHT");break;case this.btnClose:case this.btnClose1:this.closeWindow()}},i.onUp=function(){this.resetAlpha()},i.resetAlpha=function(){this.imgAct.alpha=this.imgMgr.alpha=this.imgShop.alpha=this.imgSkill.alpha=this.imgPetBat.alpha=this.imgFight.alpha=0},i.onDown=function(t){switch(t.target){case this.btnAct:case this.imgAct:this.imgAct.alpha=1,this.imgMgr.alpha=this.imgShop.alpha=this.imgSkill.alpha=this.imgPetBat.alpha=this.imgFight.alpha=0;break;case this.btnMgr:case this.imgMgr:this.imgMgr.alpha=1,this.imgAct.alpha=this.imgShop.alpha=this.imgSkill.alpha=this.imgPetBat.alpha=this.imgFight.alpha=0;break;case this.btnShop:case this.imgShop:this.imgShop.alpha=1,this.imgAct.alpha=this.imgMgr.alpha=this.imgSkill.alpha=this.imgPetBat.alpha=this.imgFight.alpha=0;break;case this.btnSkill:case this.imgSkill:this.imgSkill.alpha=1,this.imgAct.alpha=this.imgMgr.alpha=this.imgShop.alpha=this.imgPetBat.alpha=this.imgFight.alpha=0;break;case this.btnFight:case this.imgFight:this.imgFight.alpha=1,this.imgAct.alpha=this.imgMgr.alpha=this.imgShop.alpha=this.imgPetBat.alpha=this.imgSkill.alpha=0;break;case this.imgPetBat:case this.btnPetBat:this.imgPetBat.alpha=1,this.imgAct.alpha=this.imgMgr.alpha=this.imgShop.alpha=this.imgSkill.alpha=this.imgFight.alpha=0}},i.updateView=function(){},i.setFamilyFightShow=function(){this.btnFight.visible=this.imgFight.visible=this.battleSp.visible=!0,this.fightAct=this.fightAct||new b,this.fightAct.loadAndPlay("unit/effect/chuansongmen","default",0,!0),this.fightAct.pos(20,85),this.fightAct.visible=!0,this.battleSp.addChild(this.fightAct)},e}(Bg),sL=function(s){function t(){this.bar1=null,this.bar2=null,this.bar3=null,t.__super.call(this)}w(t,"modules.family.view.FamilyManagerView",s);var e=t.prototype;return e.createChildren=function(){s.prototype.createChildren.call(this);var t=new et("com/ui/barBg2.png"),e=new et("com/ui/barBg2.png"),i=new et("com/ui/barBg2.png");t.x=e.x=i.x=0,t.y=0,e.y=318,i.y=598,t.sizeGrid=e.sizeGrid=i.sizeGrid="5,5,5,5,0",t.width=e.width=i.width=300,this.spBar.addChild(t),this.spBar.addChild(e),this.spBar.addChild(i),this.bar1=new At,this.bar1.bar.skin="com/ui/bar2.png",this.bar1.sizeGrid="5,5,5,5,0",this.bar2=new At,this.bar2.bar.skin="com/ui/bar2.png",this.bar2.sizeGrid="5,5,5,5,0",this.bar3=new At,this.bar3.bar.skin="com/ui/bar2.png",this.bar3.sizeGrid="5,5,5,5,0",this.bar1.width=this.bar2.width=this.bar3.width=298,this.bar1.x=this.bar2.x=this.bar3.x=1,this.bar1.y=1,this.bar2.y=319,this.bar3.y=599,this.spBar.addChild(this.bar1),this.spBar.addChild(this.bar2),this.spBar.addChild(this.bar3),this.on("click",this,this.onClick)},e.onClick=function(t){var e=Dn.getMyMemberInfo();if(e){var i=Dn.getFamilyDetail();if(i){var s,n=Dn.getFamilyVO(),o=0;switch(t.target){case this.btn1:o=1;break;case this.btn2:o=2;break;case this.btn3:o=3}if(0<o&&e.family_title_id!=Ln.OWNER&&e.family_title_id!=Ln.VOWNER)return void Jt.addTip("只有盟主和副盟可以对建筑进行操作哦");var a,l,r=0;for(l in i.buildings)r=r>=(s=i.buildings[l]).lv?r:s.lv,s.id==o&&(a=s);if(a){if(1!=o&&a.lv>=r)return void Jt.addTip("升级要求：管理大厅等级达到"+(a.lv+1)+"级");i.property>=n.FamilyBuildDic[o].FamilyBuildLvDic[a.lv].need?Ol.ins().toFamilyBuildUpgrade(o):Jt.addTip("仙盟资金不足")}}}},e.updateView=function(){var t=Dn.getFamilyDetail();if(t){var e,i,s,n=Dn.getFamilyVO();for(var o in t.buildings)switch(s=t.buildings[o],i=(e=n.FamilyBuildDic[s.id]).FamilyBuildLvDic[s.lv],s.id){case 1:e.levelMax==s.lv?(this.btn1.gray=!0,this.btn1.mouseEnabled=!1,this.btn1.label="已满级"):(this.btn1.gray=!1,this.btn1.mouseEnabled=!0,this.btn1.label="升级"),this.txtLv1.text="当前等级："+s.lv,this.bar1.value=t.property/i.need,this.txtBar1.text=t.property+"/"+i.need;break;case 2:e.levelMax==s.lv?(this.btn2.gray=!0,this.btn2.mouseEnabled=!1,this.btn2.label="已满级",this.txtNeed2.text="升级要求："):(this.btn2.gray=!1,this.btn2.mouseEnabled=!0,this.btn2.label="升级",this.txtNeed2.text="升级要求：管理大厅等级达到"+(s.lv+1)+"级"),this.txtLv2.text="当前等级："+s.lv,this.bar2.value=t.property/i.need,this.txtBar2.text=t.property+"/"+i.need;break;case 3:e.levelMax==s.lv?(this.btn3.gray=!0,this.btn3.mouseEnabled=!1,this.btn3.label="已满级",this.txtNeed3.text="升级要求："):(this.btn3.gray=!1,this.btn3.mouseEnabled=!0,this.btn3.label="升级",this.txtNeed3.text="升级要求：管理大厅等级达到"+(s.lv+1)+"级"),this.txtLv3.text="当前等级："+s.lv,this.bar3.value=t.property/i.need,this.txtBar3.text=t.property+"/"+i.need}}},t}(Mg),nL=function(t){function e(){this.itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyMemberView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.btnExit.on("click",this,this.onClick)},i.onClick=function(){var t=Dn.getMyMemberInfo(),e=new Ee;e.yesCaller=Ol.ins(),e.yesFun=Ol.ins().toFamilyLeave,t&&t.family_title_id==Ln.OWNER?e.msg="盟主退出仙盟后，将盟主之位自动卸任给其他成员。\n退出后仙盟贡献不清零，仙盟技能继续生效。\n是否确定退出仙盟？":e.msg="退出后仙盟贡献不清零，仙盟技能继续生效。\n是否确定退出仙盟？",EF.showVO(e)},i.updateView=function(){var t=Dn.getFamilyDetail();if(t){var e=Dn.getMyMemberInfo();if(e){var i=Dn.getNameByTitle(e.family_title_id);this.txtCon.text="历史贡献:"+W.getShortenPowerStr(e.total_contribution)}this.txtMy.text="我的职位："+i;var s=t.members;if(s){s.sort(this.memSortFun),this.itemArr=this.itemArr||[];for(var n=Math.max(s.length,this.itemArr.length),o=0;o<n;o++)o<s.length?(this.itemArr[o]=this.itemArr[o]||new vL,this.itemArr[o].data=s[o],this.itemArr[o].y=150*o,this.panel.addChild(this.itemArr[o])):this.itemArr[o]&&this.itemArr[o].removeSelf()}}},i.memSortFun=function(t,e){return t.online&&!e.online?-1:!t.online&&e.online?1:t.total_contribution>e.total_contribution?-1:t.total_contribution<e.total_contribution?1:0},e}(Fg),oL=function(t){function e(){this.baseView=null,this.managerView=null,this.memberView=null,this.listView=null,this._curView=null,e.__super.call(this)}w(e,"modules.family.view.FamilyMgrPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),Nt.register("RP_FAMILY_REQUEST",this.tab.items[0],new Tt(25,-12))},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.onTabChange=function(t){switch(this._curView&&this._curView.removeSelf(),this.tab.selectedIndex){case 0:pt.send(11,6,"仙盟-管理-基础标签"),this.baseView=this.baseView||new NO,this._curView=this.baseView;break;case 1:pt.send(11,7,"仙盟-管理-管理标签"),this.managerView=this.managerView||new sL,this._curView=this.managerView;break;case 2:pt.send(11,8,"仙盟-管理-成员标签"),this.memberView=this.memberView||new nL,this._curView=this.memberView;break;case 3:pt.send(11,9,"仙盟-管理-列表标签"),this.listView=this.listView||new eL,this._curView=this.listView,Ol.ins().toFamilyListTos()}this._curView&&!this._curView.parent&&this.addChild(this._curView),this.updateView()},i.updateView=function(){this._curView&&this._curView.updateView()},i.setIndex=function(t){this.tab.selectedIndex=t},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},e}(Ug),aL=function(t){function e(){this._itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyMissionView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},i.updateView=function(){if(Dn.initMission){var t=Dn.getFamilyMissions();t.sort(this.missionSortFun),this._itemArr=this._itemArr||[];for(var e=Math.max(t.length,this._itemArr.length),i=0,s=0;s<e;s++)s<t.length&&12!=t[s].id?(this._itemArr[i]=this._itemArr[i]||new wL,this._itemArr[i].data=t[s],this._itemArr[i].y=148*i,this.panel.addChild(this._itemArr[i]),i++):this._itemArr[s]&&this._itemArr[s].removeSelf()}else Ol.ins().toFamilyMissionInfo()},i.missionSortFun=function(t,e){var i=t.times,s=e.times,n=t.nowTimes,o=e.nowTimes;if(1==t.id){var a,l=Dn.getFamilyVO();Ia.curLv;for(var r in l.FamilyMissionArr)if(12==(a=l.FamilyMissionArr[r]).id){n+=a.nowTimes;break}}if(1==e.id)for(r in l=Dn.getFamilyVO(),Ia.curLv,l.FamilyMissionArr)if(12==(a=l.FamilyMissionArr[r]).id){o+=a.nowTimes;break}var h=n<i;return h==o<s?t.id>e.id?1:t.id<e.id?-1:0:h?-1:1},e}(Gg),lL=function(t){function e(){this.curSel=!1,this.curPow=-1,this._itemArr=null,e.__super.call(this)}w(e,"modules.family.view.FamilyRequestView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.input.restrict="0-9",this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){var t=parseInt(this.input.text);this.curPow==t&&this.curSel==this.chBox.selected||(this.curPow=t,this.curSel=this.chBox.selected,Ol.ins().toFamilyCondition(this.chBox.selected,t))},i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow()}},i.updateView=function(){var t=Dn.getFamilyRequestListToc();if(t){this._itemArr=this._itemArr||[];for(var e=Math.max(t.length,this._itemArr.length),i=0;i<e;i++)i<t.length?(this._itemArr[i]=this._itemArr[i]||new bL,this._itemArr[i].data=t[i],this._itemArr[i].y=145*i,this.panel.addChild(this._itemArr[i])):this._itemArr[i]&&this._itemArr[i].removeSelf()}var s=Dn.getFamilyDetail();s?(this.chBox.selected=s.auto_agree_join,this.input.text=""+s.require_power):this.input.text="0"},e}(Hg),rL=function(t){function e(){this._$7_pos=[[287,180],[105,256],[470,256],[50,408],[525,408],[182,550],[393,550]],this.imgGoodsItem=null,this.key=0,this.bitmapClip=null,this._selMaterialID=NaN,this.goodsItems=null,this.logItems=null,this.imgPool=null,e.__super.call(this)}w(e,"modules.family.view.FamilyShopPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.on("click",this,this.onClick),this.txtAdd.underline=!0,this.initReward(),this.tab.on("change",this,this.onChange),this.pan1.vScrollBarSkin="",this.pan2.vScrollBarSkin="",this.on("display",this,this.onDisplay),Nt.register("PR_FAMILY_MATERIAL",this.tab.items[1],new Tt(18,0))},i.onDisplay=function(){this.tab.selectedIndex=0,Ll.ins.toFamilyMaterialInfo()},i.onChange=function(){switch(this.tab.selectedIndex){case 0:this.spMaterial.visible=!1,this.spShop.visible=!0;break;case 1:Nt.hide("PR_FAMILY_MATERIAL"),this.spMaterial.visible=!0,this.spShop.visible=!1}this.update()},i.initReward=function(){var t,e,i=Dn.getFamilyVO().familyShopVO;this.imgGoodsItem=[];for(var s=0;s<i.goodsArr.length;s++){var n=ur.getItem(parseInt(i.goodsArr[s]));n&&(t=new fh,e=new jt,t.pos(this._$7_pos[s][0],this._$7_pos[s][1]),e.pos(this._$7_pos[s][0]-13,this._$7_pos[s][1]+100),e.text=n.name,e.color="#5d3924",e.align="center",e.width=120,e.fontSize=24,t.data=n,t.mouseEnabled=!0,this.spShop.addChild(t),this.spShop.addChild(e),this.imgGoodsItem.push(t))}},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnMaterial:"申请物资"==this.btnMaterial.label?Nn.canRequset(this._selMaterialID)?0<this._selMaterialID?T.dispatch("OPEN_FAMILYMATERIALRESVIEW",Nn.getMaterialPKV(this._selMaterialID)):Jt.addTip("请先选择物资"):Jt.addTip("每人只能申请一份物资哦"):0<this._selMaterialID?T.dispatch("OPEN_FAMILYMATERIALASSVIEW",this._selMaterialID):Jt.addTip("请先选择物资");break;case this.btnBuy:pt.send(11,10,"仙盟-商店-购买");var e=Dn.getShopInfoToc();if(e){var i=Dn.getFamilyVO().familyShopVO,s=Dn.getFamilyVO().FamilyBuildDic[3].FamilyBuildLvDic[Dn.getBuildLvByID(3)].roleNum-e.today_buy_times,n=0;n=0<(s=0<=s?s:0)?i.price-i.reduce:i.price,pe.getScore(5)>=n?(null==this.bitmapClip&&(this.bitmapClip=b.getOne(),this.spEff.addChild(this.bitmapClip)),this.bitmapClip.loadAndPlay("moduleEffect/familyBuy","default",0,!1),this.img.visible=!1,0<this.key&&_t.clearTimeout(this.key),this.key=_t.setTimeout(this,this.showImg,null,2500),this.buy()):Jt.addTip("仙盟贡献不足")}break;case this.txtAdd:me.linkTo(11302);break;default:if(t.target instanceof modules.pack.packView.GoodsImage){var o=t.target;o.data.tempNum=1,Ae.show(o.data,"BASE_GOODS_TIP")}else t.target instanceof modules.family.view.item.FamilyMaterialItem&&(this.selMaterialID=t.target.data.id)}},i.showImg=function(){this.img.visible=!0},i.buy=function(){Ol.ins().toFamilyShopBuy()},i.update=function(){this.spShop.visible&&this.updateView(),this.spMaterial.visible&&this.updateMaterial()},i.goodsSort=function(t,e){return t.id<e.id?-1:1},i.updateMaterial=function(){var t=Nn.getMaterialInfo();if(t){var e;t.items.sort(this.goodsSort),this.goodsItems=this.goodsItems||[];for(var i,s=Math.max(this.goodsItems.length,t.items.length),n=0;n<s;n++)n<t.items.length?(this.goodsItems[n]=this.goodsItems[n]||new yL,(e=this.goodsItems[n]).mouseEnabled=!0,e.pos(n%5*125+5,125*Math.floor(n/5)+10),e.data=t.items[n],this.pan1.addChild(e)):this.goodsItems[n]&&this.goodsItems[n].parent&&this.goodsItems[n].removeSelf();for(this.logItems=this.logItems||[],s=Math.max(this.logItems.length,t.gain_logs.length),n=0;n<s;n++)n<t.gain_logs.length?(this.logItems[n]=this.logItems[n]||new gO,(i=this.logItems[n]).pos(0,62*n),i.data=t.gain_logs[n],this.pan2.addChild(i)):this.logItems[n]&&this.logItems[n].parent&&this.logItems[n].removeSelf();if(Dn.getFamilyDetail()&&Dn.getFamilyDetail().owner_role_id==pe.roleID?this.btnMaterial.label="分配物资":this.btnMaterial.label="申请物资",0<this._selMaterialID){var o,a=!1;for(var l in this.goodsItems)if((o=this.goodsItems[l])&&o.parent&&o.data&&o.data.id==this._selMaterialID){a=!0;break}a?this.selMaterialID=this._selMaterialID:0<this.goodsItems.length&&this.goodsItems[0].parent?this.selMaterialID=this.goodsItems[0].data.id:this.selMaterialID=0}else 0<this.goodsItems.length&&this.goodsItems[0].parent?this.selMaterialID=this.goodsItems[0].data.id:this.selMaterialID=0}else Ll.ins.toFamilyMaterialInfo()},i.updateView=function(){var t=Dn.getShopInfoToc();if(t){var e=Dn.getFamilyVO().familyShopVO,i=Dn.getFamilyVO().FamilyBuildDic[3].FamilyBuildLvDic[Dn.getBuildLvByID(3)],s=i.roleNum-t.today_buy_times;s=0<=s?s:0,this.txtTime.text="优惠次数："+s+"/"+i.roleNum;var n=0;n=0<s?e.price-e.reduce:e.price,this.txtNeed.text="/"+n,this.txtHas.text=W.getShortenPowerStr(pe.getScore(5)),pe.getScore(5)>=n?this.txtHas.color="#e7ff99":this.txtHas.color="#b60202",this.txtHas.x=(250-this.txtHas.textWidth-this.txtNeed.textWidth)/2+281,this.txtNeed.x=this.txtHas.x+this.txtHas.textWidth;var o=Dn.getBuyLogs();if(o&&0<o.length){var a=o[0];this.txtMsgName.text=a.role_name,this.txtGet.x=this.txtMsgName.x+this.txtMsgName.textWidth+20,this.txtGoodsName.x=this.txtGet.x+this.txtGet.textWidth+20,this.txtGoodsName.text=ur.getItem(a.item_id).name,this.txtMsgName.visible=this.txtGoodsName.visible=this.txtGet.visible=!0}else this.txtMsgName.visible=this.txtGoodsName.visible=this.txtGet.visible=!1}else Ol.ins().toFamilyShopInfo()},i.showGoods=function(t){if(0<t.length){this.imgPool=this.imgPool||[];var e=ur.getItem(t[0].id);if(e){var i=0<this.imgPool.length?this.imgPool.pop():new et,s=0<this.imgPool.length?this.imgPool.pop():new et;i.x=287,i.y=383,s.x=287,s.y=383,this.spShop.addChild(s),this.spShop.addChild(i),i.skin=e.realMaxico,s.skin="com/ui/goodsBg"+e.color+".png",_t.setTimeout(this,this.hideGoods,[i,s],800)}}},i.hideGoods=function(t,e){t.removeSelf(),e.removeSelf(),t.skin=null,e.skin=null,this.imgPool.push(t),this.imgPool.push(e)},I(0,i,"selMaterialID",null,function(t){var e;for(var i in this._selMaterialID=t,this.goodsItems)(e=this.goodsItems[i]).select=e.data&&e.data.id==t}),e}(Wg),hL=function(t){function e(){this.bar=null,this.curSel=0,this.headPart=null,this.curSkill=null,this.curSkillLv=null,e.__super.call(this)}w(e,"modules.family.view.FamilySkillPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.headPart=new kh,this.headPart.pos(71,80),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.addChild(this.headPart),this.bar=new p(198,481,250,0,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",20),this.addChild(this.bar),this.imgNow.skin=this.icon0.skin,this.headPart.resetSelect(0),this.on("display",this,this.onDisplay)},i.onDisplay=function(){T.register("MONEY_CHANGE",this,this.onMoneyChange),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("MONEY_CHANGE",this,this.onMoneyChange),this.off("undisplay",this,this.onUNDisplay)},i.onMoneyChange=function(){this.curSkillLv&&(this.txtCopper.text=W.getShortenPowerStr(pe.user.attr.silver),this.txtCopper.color=pe.user.attr.silver>=this.curSkillLv.needCopper?"#139604":"#b60202",this.txtCopperNeed.text="/"+this.curSkillLv.needCopper,this.txtCopperNeed.x=this.txtCopper.x+this.txtCopper.textWidth)},i.onClick=function(t){var e;switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnLearn:if(this.curSkillLv){var i=Dn.getBuildLvByID(2);if(Math.floor(Dn.getFamilyVO().FamilyBuildDic[2].FamilyBuildLvDic[i].roleNum/100*this.curSkill.skillNum)<=this.curSkillLv.lv)return void Jt.addTip("请先前往管理大厅提升仙盟技能建筑等级!");if(pe.getScore(5)<this.curSkillLv.needCon)return void Jt.addTip("当前贡献不足！");if(pe.user.attr.silver<this.curSkillLv.needCopper)return void ba.show(10201113);Ol.ins().toFamilySkillUpgrade(pe.getPalByIndex(this.headPart.index).pal_id,this.curSkill.id)}break;case this.icon0:this.curSel=0,e=Dn.getSkillXMLVO(this.curSel+1),pt.send(11,11,"仙盟-技能-"+e.name),this.imgNow.skin=this.icon0.skin,this.selectedImg.x=this.icon0.x-9,this.selectedImg.y=this.icon0.y-11,this.updateView();break;case this.icon1:this.curSel=1,e=Dn.getSkillXMLVO(this.curSel+1),pt.send(11,12,"仙盟-技能-"+e.name),this.imgNow.skin=this.icon1.skin,this.selectedImg.x=this.icon1.x-9,this.selectedImg.y=this.icon1.y-11,this.updateView();break;case this.icon2:this.curSel=2,e=Dn.getSkillXMLVO(this.curSel+1),pt.send(11,13,"仙盟-技能-"+e.name),this.imgNow.skin=this.icon2.skin,this.selectedImg.x=this.icon2.x-9,this.selectedImg.y=this.icon2.y-11,this.updateView();break;case this.icon3:this.curSel=3,e=Dn.getSkillXMLVO(this.curSel+1),pt.send(11,14,"仙盟-技能-"+e.name),this.imgNow.skin=this.icon3.skin,this.selectedImg.x=this.icon3.x-9,this.selectedImg.y=this.icon3.y-11,this.updateView();break;case this.icon4:this.curSel=4,e=Dn.getSkillXMLVO(this.curSel+1),pt.send(11,15,"仙盟-技能-"+e.name),this.imgNow.skin=this.icon4.skin,this.selectedImg.x=this.icon4.x-9,this.selectedImg.y=this.icon4.y-11,this.updateView()}},i.updateView=function(){if(Dn.getFamilyDetail()){var t=pe.getPalByIndex(this.headPart.index).pal_id,e=Dn.getFamilySkillInfo(t);if(e){var i,s;for(var n in this.curSkill=Dn.getSkillXMLVO(this.curSel+1),e)if(s=e[n],this.curSel+1==s.id){i=s;break}this.setSkill(i)}else Ol.ins().toFamilySkillInfo()}else Ol.ins().toFamilyDetailTos(pe.user.attr.family_id)},i.setSkill=function(t){var e=0,i=0;if(t&&(e=t.lv,i=t.exp),this.curSkillLv=this.curSkill.FamilySkillLvDic[e],this.curSkill&&this.curSkillLv){this.txtCon.text=W.getShortenPowerStr(pe.getScore(5)),this.txtCopper.text=W.getShortenPowerStr(pe.user.attr.silver),this.txtCon.color=pe.getScore(5)>=this.curSkillLv.needCon?"#139604":"#b60202",this.txtCopper.color=pe.user.attr.silver>=this.curSkillLv.needCopper?"#139604":"#b60202",this.txtConNeed.text="/"+this.curSkillLv.needCon,this.txtConNeed.x=this.txtCon.x+this.txtCon.textWidth,this.txtCopperNeed.text="/"+this.curSkillLv.needCopper,this.txtCopperNeed.x=this.txtCopper.x+this.txtCopper.textWidth,this.txtName.text=this.curSkill.name,this.txtDesc.text=this.curSkill.desc,this.txtLv.text="Lv."+e,this.curSkill.isSp?(this.txtDesc.y=509,this.bar.setValue(i,this.curSkillLv.exp),this.bar.visible=!0):(this.txtDesc.y=489,this.bar.visible=!1);for(var s,n=W.parseAttrToArr(this.curSkillLv.attr),o=n.length,a="",l=0;l<o;l++)a+=W.getAttrStrByArr(n[l],""," + ","\n");if(this.txtNow.text=a,this.curSkill.FamilySkillLvDic.hasOwnProperty(e+1)){for(s=this.curSkill.FamilySkillLvDic[e+1],o=(n=W.parseAttrToArr(s.attr)).length,a="",l=0;l<o;l++)a+=W.getAttrStrByArr(n[l],""," + ","\n");this.txtNow1.x=108,this.txtNow.x=83,this.txtNext.text=a,this.txtNext.visible=this.imgArrow.visible=this.txtNext1.visible=!0,this.btnLearn.gray=!1,this.btnLearn.label="学习",this.btnLearn.mouseEnabled=!0,this.bar.setTextvisible(!0)}else this.txtNow1.x=281,this.txtNow.x=236,this.txtNext.visible=this.imgArrow.visible=this.txtNext1.visible=!1,this.btnLearn.gray=!0,this.btnLearn.label="已满级",this.bar.setTextvisible(!1),this.btnLearn.mouseEnabled=!1}},i.onHeadItemClick=function(){this.updateView()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},e}(qg),uL=function(t){function e(){this._data=null,e.__super.call(this),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.family.view.item.FamilyBossItem",t);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.onCount)},i.createChildren=function(){t.prototype.createChildren.call(this),this.btnFight.on("click",this,this.onClick)},i.onClick=function(t){if(this._data){pt.send(11,20,"仙盟-活动-Boss:"+this._data.id);var e=new Date(ya.serverTimeMs);9==e.getHours()&&30<=e.getMinutes()||10<=e.getHours()&&e.getHours()<22?Lr.ins().toMapChange(this._data.id):Jt.addTip("该活动 9:30 — 22:00 开启")}},i.onCount=function(){var t=Dn.getNextFreshTime();this.txtTime.text=x.formatTime(t)+"后重生"},I(0,i,"data",null,function(t){if(this._data=t)switch(this.imgBg.skin="modules/family/image/boss"+t.id+".jpg",this.txtCon.text=t.con,t.state){case 0:this.btnFight.mouseEnabled=!1,this.btnFight.gray=!0,this.btnFight.label="未开启";break;case 1:this.btnFight.mouseEnabled=!0,this.btnFight.gray=!1,this.btnFight.label="可挑战";break;case 2:this.btnFight.mouseEnabled=!1,this.btnFight.gray=!0,this.btnFight.label="战斗中";break;case 3:this.btnFight.mouseEnabled=!1,this.btnFight.gray=!0,this.btnFight.label="挑战";break;case 4:this.btnFight.mouseEnabled=!1,this.btnFight.gray=!0,this.btnFight.label="已击败"}t&&4==t.state?_t.addToSecond(this,this.onCount):(_t.removeFromSceond(this,this.onCount),this.txtTime.text="")}),e}(Yg),cL=function(t){function e(){this._mon=null,this.bar=null,this.total=1e4,e.__super.call(this)}w(e,"modules.family.view.item.FamilyCopyBlood",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.on("display",this,this.onDisplay),this.top=180,this.centerX=0},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),_t.addToSecond(this,this.bloodUpdate)},i.setValue=function(t,e){this.txtPro.text=t+"/"+e,this.bar.value=t/e},i.bloodUpdate=function(){if(this._mon)this.alpha=1,this.setValue(this._mon.reallyHP,this.total);else for(var t in this.alpha=0,Se.monsterDict)if(Se.monsterDict[t]){this.mon=Se.monsterDict[t];break}},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay),_t.removeFromSceond(this,this.bloodUpdate)},i.reset=function(){this._mon=null,this.bmpHead.skin="",this.txtName.text="",this.txtLv.text="",this.imgBlood.skin=""},i.show=function(){for(var t in this.imgBlood.skin="modules/family/bossBlood.png",this.bar||(this.bar=new At,this.bar.bar.skin="com/ui/bar3.png",this.bar.sizeGrid="0,15,0,15,0",this.bar.width=597,this.bar.height=14,this.bar.x=119,this.bar.y=45,this.spBar.addChild(this.bar)),Se.monsterDict)if(Se.monsterDict[t]){this.mon=Se.monsterDict[t];break}this._mon?(this.setValue(this._mon.reallyHP,this.total),this.alpha=1):this.alpha=0,this.parent||lt.uiLayer.addChild(this)},i.hide=function(){this.removeSelf()},I(0,i,"mon",null,function(t){if((this._mon=t).pvo){this.total=this._mon.pvo.max_hp,this.setValue(this._mon.reallyHP,this.total),this.alpha=1;var e=we.getMonsterVO(t.pvo.type_id);this.bmpHead.skin="unit/monster/"+e.skin+".png",this.txtName.text=e.name,this.txtLv.text=e.lv+""}}),e.getIns=function(){return e._ins=e._ins||new e},e._ins=null,e}(Xg),dL=function(t){function e(){this._curTime=0,this._complete=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyCopyCountDown",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay),this.centerX=0,this.bottom=325},i.onDisplay=function(){_t.addToSecond(this,this.timeUpdate)},i.timeUpdate=function(){if(0<this._curTime){var t="",e=Math.floor(this._curTime/3600);t+=e<10?"0"+e.toString():""+e;var i=Math.floor(this._curTime%3600/60);t+=i<10?":0"+i.toString():":"+i;var s=this._curTime%60;t+=s<10?":0"+s.toString():":"+s,this.txtTime.text=t,this._curTime--}else this._complete&&(this._complete.run(),this._complete=null),this._curTime=0,this.removeSelf()},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay),_t.removeFromSceond(this,this.timeUpdate)},i.show=function(t,e){0<(this._curTime=t)&&(this.parent||lt.uiLayer.addChild(this),_t.addToSecond(this,this.timeUpdate)),this.timeUpdate()},i.hide=function(){this.removeSelf()},e.getIns=function(){return e._ins=e._ins||new e},e._ins=null,e}(Kg),pL=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyCopyRankItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},i.update=function(){this.txtName.text=this._data.elements[0],this.txtRound.text=this._data.elements[1]+"关",this._data.row_id<=3?(this.txtRank.visible=!1,this.imgRank.visible=!0,this.imgRank.skin="modules/rank/rank"+this._data.row_id+".png"):(this.imgRank.visible=!1,this.txtRank.visible=!0,this.txtRank.text=""+this._data.row_id)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(jg),mL=function(t){function n(){this._data=null,this.itemType=0,n.__super.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(n,"modules.family.view.item.FamilyFightMemberItem",t);var e=n.prototype;return e.onClick=function(t){switch(t.target){case this.btnGoToFight:this.clickGotoFightBtn()}},e.onDisplay=function(){T.register("FAMILY_FIGHT_CHANGE_MEMBER",this,this.onChangeMember)},e.onUnDisplay=function(){T.remove("FAMILY_FIGHT_CHANGE_MEMBER",this,this.onChangeMember)},e.onChangeMember=function(){this.setFightBtnStateOnSign()},e.clickGotoFightBtn=function(){T.dispatch("FAMILY_BATTLE_MEMBER_POSITION_TABS_SHOW",this,this._data.role_id)},e.setFightBtnStateOnSign=function(){if(this._data){var t,e=!1,i=Dn.familyFightMembers;for(var s in i)if((t=i[s])!=Ln.FAMILY_FIGHT_POS_NOT_MEMBERS&&t==this._data.role_id){e=!0;break}this.btnGoToFight.label=e?"修改":"参战",this.btnGoToFight.disabled=!n.isFamilyLeader()}},I(0,e,"dataSource",t.prototype._$get_dataSource,function(t){if(null!=t&&(this._data=t.info,this.itemType=t.itemType,this._data)){this.txtMy.text="["+Dn.getNameByTitle(this._data.family_title_id)+"]",this.txtName.x=this.txtMy.x+this.txtMy.textWidth+5,this.txtName.text=this._data.role_name,this.txtCon.text="贡献度："+W.getShortenPowerStr(this._data.total_contribution);var e,i=this._data.role_power;1e4<=i?(i=Math.floor(i/1e3),e=(i/=10).toString()+"万"):e=i.toString(),this.txtPow.text="战斗力："+e,this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this.setFightBtnStateOnSign()}}),n.isFamilyLeader=function(){var t=Dn.getMyMemberInfo();return t&&(1==t.family_title_id||2==t.family_title_id)},n}(Qg),fL=function(t){function e(){this._data=null,e.__super.call(this)}return w(e,"modules.family.view.item.FamilyFightSignUpFamilyItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){if(null!=t){this._data=t;var e=Dn.getBattleFamilyList().indexOf(this._data)+1;this.rankText.text=e+"",this.familyNameText.text=this._data.name,this.numText.text=this._data.total_power+"",e<=4?(this.rankText.color="#fff000",this.familyNameText.color="#fff000",this.numText.color="#fff000"):(this.rankText.color="#3e1e0c",this.familyNameText.color="#3e1e0c",this.numText.color="#3e1e0c")}}),e}(zg),_L=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyListItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.btnAdd.on("click",this,this.onAddClick)},i.onAddClick=function(){this._data?this._data.cur_member_num<Dn.getRoleNumByFamilyLV(this._data.family_level)?Ol.ins().toRequsetJoinTos(this._data.family_id):Jt.addTip("当前仙盟人数已满"):Jt.addTip("不存在仙盟")},I(0,i,"data",null,function(t){if(this._data=t){var e;this.txtRank.text=""+t.ranking,this.txtName.text=t.family_name,this.txtUser.text="盟主："+t.owner_role_name,this.txtLv.text="Lv."+t.family_level,this.txtRoleNum.color=t.cur_member_num==Dn.getRoleNumByFamilyLV(t.family_level)?U.getColorDark(6):U.getColorDark(2),this.txtRoleNum.text="（"+t.cur_member_num+"/"+Dn.getRoleNumByFamilyLV(t.family_level)+"）",this.txtRoleNum.x=this.txtName.x+this.txtName.textWidth;var i=t.require_power;1e4<=i?(i=Math.floor(i/1e3),e=(i/=10).toString()+"万"):e=i.toString(),this.txtPower.text=e,Dn.getFamilyData()&&0<=Dn.getFamilyData().request_family_ids.indexOf(t.family_id)?(this.btnAdd.label="已申请",this.btnAdd.gray=!0,this.btnAdd.mouseEnabled=!1):(this.btnAdd.label="申请",this.btnAdd.gray=!1,this.btnAdd.mouseEnabled=!0)}}),e}($g),gL=function(t){function e(){e.__super.call(this)}w(e,"modules.family.view.item.FamilyListItem2",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"data",null,function(t){this.txtRank.text=""+t.ranking,this.txtName.text=t.family_name,this.txtUser.text="盟主："+t.owner_role_name,this.txtLv.text="LV."+t.family_level,this.txtRoleNum.text="（"+t.cur_member_num+"/"+Dn.getRoleNumByFamilyLV(t.family_level)+")",this.txtRoleNum.x=this.txtName.x+this.txtName.textWidth,this.txtUser.width=this.txtUser.textWidth,this.txtUser.height=this.txtUser.textHeight}),e}(Zg),yL=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyMaterialItem",Jg);var i=e.prototype;return I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t,this._data){var e=ur.getItem(this._data.id);if(e){this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.imgGoods.skin=e.realMaxico,this.txtNum.text=""+this._data.val,this.txtName.text=e.name,this.txtName.color=U.getColorDark(e.color);var i=Nn.getMaterialRequest(this._data.id,pe.roleID);this.res=i&&this._data.id==i.item_id}}}),I(0,i,"res",null,function(t){this.imgRes.visible=t}),e}(),vL=function(t){function e(){this._data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyMemberItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onRemove)},i.onClick=function(t){var e=new Ee;switch(t.target){case this.btnUp:if(Dn.getFamilyDetail()&&this._data){var i=Dn.getFamilyDetail().vice_owners;if(this._data.family_title_id==Ln.VOWNER)e.msg="是否将盟主之位转让给"+this._data.role_name+"？",e.yesArgs=[1,this._data.role_id];else{if(i&&2==i.length)return void Jt.addTip("副盟主数目已达上限!");e.msg="是否将"+this._data.role_name+"提升为副盟主？",e.yesArgs=[3,this._data.role_id]}e.yesCaller=Ol.ins(),e.yesFun=Ol.ins().toFamilyAdmin,EF.showVO(e)}break;case this.btnOut:this._data&&(this._data.family_title_id==Ln.VOWNER?(e.msg="是否要将"+this._data.role_name+"降职为普通盟员？",e.yesArgs=[2,this._data.role_id]):(e.msg="是否要将"+this._data.role_name+"踢出仙盟？",e.yesArgs=[4,this._data.role_id]),e.yesCaller=Ol.ins(),e.yesFun=Ol.ins().toFamilyAdmin,EF.showVO(e));break;case this.imgHead:this.showBtn=!this.showBtn;break;case this.btnFriend:this._data&&(this.showBtn=!1,Ul.getInstance().toRequest(this._data.role_id,""));break;case this.btnLook:this._data&&(this.showBtn=!1,T.dispatch("OPEN_OTHER_ROLE_PANLE",this._data.role_id))}},i.onRemove=function(){this.showBtn=!1},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.pos=new Tt(this.txtName.x,this.txtName.y),e.blueInfo=t,this._blueVipBox.updateShowing(e),0<this._blueVipBox.width&&(this.txtName.x+=60,this.ImgVip.x+=60)}},I(0,i,"showBtn",function(){return this.spAction.visible},function(t){this.spAction.visible=t}),I(0,i,"data",null,function(t){if(this._data=t,this._data){var e;if(e=Dn.getMyMemberInfo())switch(e.family_title_id){case 1:t.family_title_id==Ln.OWNER?this.btnUp.visible=this.btnOut.visible=!1:t.family_title_id==Ln.VOWNER?(this.btnUp.visible=this.btnOut.visible=!0,this.btnUp.label="提升",this.btnOut.label="降职"):(this.btnUp.visible=this.btnOut.visible=!0,this.btnUp.label="提升",this.btnOut.label="踢出");break;case 2:t.family_title_id==Ln.OWNER||t.family_title_id==Ln.VOWNER?this.btnUp.visible=this.btnOut.visible=!1:(this.btnOut.visible=!0,this.btnUp.visible=!1,this.btnOut.label="踢出");break;default:this.btnOut.visible=!1,this.btnUp.visible=!1}this.btnUp.visible?(this.btnUp.x=523,this.btnOut.x=418):this.btnOut.x=523,this.txtMy.text="["+Dn.getNameByTitle(this._data.family_title_id)+"]",this.txtName.x=this.txtMy.x+this.txtMy.textWidth+5,this.txtName.text=this._data.role_name,0<this._data.vip?(this.ImgVip.skin="modules/chat/VIP"+this._data.vip+".png",this.ImgVip.x=this.txtName.x+this.txtName.textWidth+2):this.ImgVip.skin=null,this.txtCon.text="贡献度："+W.getShortenPowerStr(this._data.total_contribution);var i,s=this._data.role_power;1e4<=s?(s=Math.floor(s/1e3),i=(s/=10).toString()+"万"):i=s.toString(),this.txtPow.text="战斗力："+i,this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this._data.online?(this.txtTime.text="在线",this.txtTime.color="#139604"):(this.txtTime.text=x.getSpeedTime(this._data.last_offline_time,ya.serverTime),this.txtTime.color="#b60202"),this.updateBlueVip(this._data.blue_vip)}}),e}(ty),IL=function(i){function t(){this.roleId=NaN,this.btnArr=[],this.btnPosArr=[],t.__super.call(this)}w(t,"modules.family.view.item.FamilyMemberPositionTabs",i);var e=t.prototype;return e.createChildren=function(){i.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.btnArr=[this.btnCaptain,this.btnSubCaptain,this.btnEliteOne,this.btnEliteTwo,this.btnVanguard,this.btnRemove];for(var t=0,e=this.btnArr.length;t<e;t++)this.btnPosArr.push({x:this.btnArr[t].x,y:this.btnArr[t].y})},e.setRoleId=function(t){this.roleId=t},e.onClick=function(t){switch(t.target){case this.btnCaptain:Dn.setFamilyFightMemberPos(5,this.roleId);break;case this.btnSubCaptain:Dn.setFamilyFightMemberPos(4,this.roleId);break;case this.btnEliteOne:Dn.setFamilyFightMemberPos(3,this.roleId);break;case this.btnEliteTwo:Dn.setFamilyFightMemberPos(2,this.roleId);break;case this.btnVanguard:Dn.setFamilyFightMemberPos(1,this.roleId);break;case this.btnRemove:0<this.roleIsFightMemberIndex()&&Dn.setFamilyFightMemberPos(this.roleIsFightMemberIndex(),Ln.FAMILY_FIGHT_POS_NOT_MEMBERS)}},e.onDisplay=function(){T.register("FAMILY_FIGHT_CHANGE_MEMBER",this,this.onChangeMember);var t,e=0;for(var i in this.btnArr)(t=this.btnArr[i]).visible=!(5<=e),t.pos(this.btnPosArr[e].x,this.btnPosArr[e].y),e++;if(0<this.roleIsFightMemberIndex()){this.btnRemove.visible=!0;var s=6-this.roleIsFightMemberIndex()-1;this.btnArr[s].visible=!1;for(var n=NaN,o=s+1,a=this.btnArr.length;o<a;o++)n=this.btnArr[s].y,this.btnArr[s].y=this.btnArr[o].y,this.btnArr[o].y=n}else this.btnRemove.visible=!1},e.onUnDisplay=function(){T.remove("FAMILY_FIGHT_CHANGE_MEMBER",this,this.onChangeMember)},e.onChangeMember=function(){this.removeSelf()},e.roleIsFightMemberIndex=function(){var t=Dn.familyFightMembers,e=1;for(var i in t){if(t[i]==this.roleId)return e;e++}return-1},t}(ey),wL=function(t){function e(){this._curXML=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyMissionItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)},i.onDisplay=function(){T.register("VIP_LEVEL_CHANGE",this,this.update),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("ROLE_LEVEL_UP",this,this.update),this.off("undisplay",this,this.onUNDisplay)},i.onClick=function(t){t.target==this.btnDo&&this._curXML&&(pt.send(11,19,"仙盟-活动-"+this._curXML.id+this._curXML.desc),me.linkTo(this._curXML.linkID))},i.update=function(){if(this._curXML){this.txtDesc.text=this._curXML.desc,this.txtReward.text=this._curXML.reward;var t=this._curXML.times,e=this._curXML.nowTimes;if(1==this._curXML.id){var i,s=Dn.getFamilyVO();Ia.curLv;for(var n in s.FamilyMissionArr)if(12==(i=s.FamilyMissionArr[n]).id){e+=i.nowTimes;break}}this.txtTime.text=e+"/"+t,this.txtTime.color=e==t?U.getColorDark(6):U.getColorDark(2),this.btnDo.gray=t<=e,this.btnDo.mouseEnabled=e<t,this.btnDo.label=t<=e?"完成":"前往",this.imgIcon.skin="modules/family/"+this._curXML.img+".png"}},I(0,i,"data",null,function(t){this._curXML=t,this.update()}),e}(iy),bL=function(t){function e(){this._data=null,this._blueVipBox=null,e.__super.call(this)}w(e,"modules.family.view.item.FamilyRequestItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onClick)},i.onClick=function(t){switch(t.target){case this.btnY:Ol.ins().toFamilyRequestProcess(this._data.role_id,1);break;case this.btnN:Ol.ins().toFamilyRequestProcess(this._data.role_id,2)}},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueVipBox=this._blueVipBox||new Rh,this.addChild(this._blueVipBox);var e=new ms;e.pos=new Tt(164,this.txtName.y-5),e.blueInfo=t,this._blueVipBox.updateShowing(e),0<this._blueVipBox.width&&(this.txtName.x=194,this.ImgVip.x=this.txtName.x+this.txtName.textWidth+2)}},I(0,i,"data",null,function(t){if(this._data=t){this.txtName.text=t.role_name;var e,i=t.power;1e4<=i?(i=Math.floor(i/1e3),e=(i/=10).toString()+"万"):e=i.toString(),this.txtPower.text="战斗力："+e,0<this._data.vip?(this.ImgVip.skin="modules/chat/VIP"+this._data.vip+".png",this.ImgVip.x=this.txtName.x+this.txtName.textWidth+2):this.ImgVip.skin=null,this.imgHead.skin="com/head/big"+t.category+t.sex+".png",this.updateBlueVip(t.blue_vip)}}),e}(sy),SL=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick)}w(e,"modules.fcm.FcmIdentifyRewardView",ny);var i=e.prototype;return i.update=function(){for(var t=Vn.baseCfg.getRewards(),e=0;e<t.length;e++){var i=new Ah(91,100,!1,!0,!0);i.dataSource=t[e],i.pos(140+100*e,144),this.addChild(i)}},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnYes:this.closeWindow()}},i.closeWindow=function(){Dl.ins().toFcmIdentify(),laya.ui.View.prototype.closeWindow.call(this)},e}(),xL=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick)}w(e,"modules.fcm.FcmInfoView",oy);var i=e.prototype;return i.update=function(){this.inputName.text=G.fcm_info.real_name,this.inputNumber.text=G.fcm_info.id_card},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow()}},e}(),CL=function(t){function e(){this.bar=null,this.curView=null,this.godCoinView=null,this.goldView=null,this.questionPanel=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.on("display",this,this.onDisplay),this.bar=new p(0,0,568,32,"modules/vip/bar.png","modules/vip/barBg.png",[5,5,5,5],[0,7,0,12],[5,0,10,0],"#ffffff",16),this.bar.setTextvisible(!1),this.spBar.addChild(this.bar),this.on("click",this,this.onClick),this.tab.setItemSize(156,68.5,"10,10,10,10"),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,this.on("display",this,this.onDisplay)}w(e,"modules.firstCharge.ChargeBackFanTiView",t);var i=e.prototype;return i.onTabChange=function(t){switch(this.spView.removeChild(this.curView),t){case 0:this.godCoinView=this.godCoinView||new RL,this.curView=this.godCoinView;break;case 1:this.goldView=this.goldView||new LL,this.curView=this.goldView}this.spView.addChild(this.curView),this.curView.update()},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnHelp:me.linkTo(10201)}},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),this.tab&&(this.tab.selectedIndex=0)},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay)},i.updateView=function(){this.curView.update(),this.updateVIP()},i.updateVIP=function(){var t;this.imgLeft.skin="modules/vip/VIP_"+Ia.curLv+".png",Ia.curLv>=Ia.maxLv?(t=Ia.getVipVO(Ia.curLv),this.imgRight.skin="modules/vip/max.png",this.txtH.innerHTML="",this.bar.setValue(k.changeGodCoinPrice(Ia.curMoney),k.changeGodCoinPrice(t.needMoney))):(t=Ia.getVipVO(Ia.curLv+1),this.imgRight.skin="modules/vip/VIP_"+(Ia.curLv+1)+".png",this.txtH.innerHTML=Z.span("再充值","#ffffff",30)+Z.span(k.changeGodCoinPrice(t.needMoney-Ia.curMoney)+"仙尊幣","#fcf476",30)+Z.span("即可成为VIP"+t.lv,"#ffffff",30),this.bar.setValue(k.changeGodCoinPrice(Ia.curMoney),k.changeGodCoinPrice(t.needMoney)),this.btnHelp.x=this.txtH.contextWidth+this.txtH.x+10),this.txtBar.text=k.changeGodCoinPrice(Ia.curMoney)+"/"+k.changeGodCoinPrice(t.needMoney)},i.callBackUpdate=function(){this.updateView()},i.createChildren=function(){t.prototype.createChildren.call(this)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},i.openQuestionPanel=function(){this.questionPanel=this.questionPanel||new DL,this.questionPanel.openWindow()},e}(ay),PL=function(t){function e(){this.bar=null,this.itemArr=null,this.questionPanel=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay),this.bar=new p(0,0,568,32,"modules/vip/bar.png","modules/vip/barBg.png",[5,5,5,5],[0,7,0,12],[5,0,10,0],"#ffffff",16),this.bar.setTextvisible(!1),this.spBar.addChild(this.bar),this.on("click",this,this.onClick),Bt.sdk instanceof com.sdk.QQTxSDK?(this.queBtn.visible=!0,this.queBtn.on("click",this,this.openQuestionPanel)):this.queBtn.visible=!1,Bt.isZKPf9991Server()&&(this.title.skin="modules/charge/title2.png"),Bt.isQQyxdt()?(this.imgBottom.skin="modules/charge/qqyxdtTip.png",this.blueVipBtn.visible=!0,this.blueVipBtn.x=this.btnHelp.x+this.btnHelp.width+5,this.blueVipBtn.y=this.btnHelp.y+this.btnHelp.height-38,this.blueVipTipTxt.visible=!0):(this.imgBottom.skin="modules/charge/tip1.png",this.blueVipBtn.visible=!1,this.blueVipTipTxt.visible=!1),this.imgStarIcon.visible=yt.isQQ}w(e,"modules.firstCharge.ChargeBackView",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnHelp:me.linkTo(10201),pt.send(10013,2,"充值返利-特权");break;case this.blueVipBtn:Bt.sdk.openSpcVip()}},i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),T.register("PF_XIANLAI_DIAMOND_CHANGE",this,this.updateDiamond),yt.isQQ&&Nl.ins().toStarIconInfo()},i.onUNDisplay=function(){this.off("undisplay",this,this.onUNDisplay)},i.updateDiamond=function(){console.log("返利充值钻石：",yt.diamond),this.txtDiamond.text=yt.diamond?this.getShortenPowerStr(yt.diamond):"0"},i.updateView=function(){var t=Bn.getPayInfoList();if(t){this.itemArr=this.itemArr||[];for(var e=t.length,i=0;i<e;i++)this.itemArr[i]=this.itemArr[i]||new OL,this.itemArr[i].x=0,this.itemArr[i].y=165*i,this.itemArr[i].date=t[i],this.pan.addChild(this.itemArr[i])}else Nl.ins().toPayInfo();this.updateVIP(),"xianlai"==G.pf?(this.imgDiamondBg.visible=!0,this.txtDiamond.visible=!0,console.log("钻石更新：",yt.diamond),this.txtDiamond.text=yt.diamond?this.getShortenPowerStr(yt.diamond):"0"):(this.txtDiamond.visible=!1,this.imgDiamondBg.visible=!1),this.updateStarIcon()},i.updateStarIcon=function(){yt.isQQ&&(this.txtStarIcon.text=Bn.starCoin+"")},i.getShortenPowerStr=function(t,e){var i;return void 0===e&&(e=!0),1e8<=t?(t=Math.floor(t/1e6),i=(t/=100).toString()+"亿"):1e4<=t?(t=Math.floor(t/100),i=(t/=100).toString()+"万"):i=1<t?t.toString():e?""+t:"",i},i.updateVIP=function(){var t;this.imgLeft.skin="modules/vip/VIP_"+Ia.curLv+".png",Ia.curLv>=Ia.maxLv?(t=Ia.getVipVO(Ia.curLv),this.imgRight.skin="modules/vip/max.png",this.txtH.innerHTML="",this.bar.setValue(Ia.curMoney,t.needMoney)):(t=Ia.getVipVO(Ia.curLv+1),this.imgRight.skin="modules/vip/VIP_"+(Ia.curLv+1)+".png",this.txtH.innerHTML=Z.span("再充值","#ffffff",30)+Z.span(t.needMoney-Ia.curMoney+"元宝","#fcf476",30)+Z.span("即可成为VIP"+t.lv,"#ffffff",30),this.bar.setValue(Ia.curMoney,t.needMoney),this.btnHelp.x=this.txtH.contextWidth+this.txtH.x+10,this.blueVipBtn.x=this.btnHelp.x+this.btnHelp.width+5),this.txtBar.text=Ia.curMoney+"/"+t.needMoney},i.callBackUpdate=function(){this.updateView()},i.createChildren=function(){t.prototype.createChildren.call(this)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},i.openQuestionPanel=function(){this.questionPanel=this.questionPanel||new DL,this.questionPanel.openWindow()},e}(ly),TL=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick)}return w(e,"modules.firstCharge.newFirstCharge.NewFirstChargeADView",ry),e.prototype.onClick=function(){me.linkTo(11448)},e}(),kL=function(t){function e(){this.items=null,this.clip=null,this.clipArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUnDisplay),this.on("display",this,this.onDisplay),this.init()}w(e,"modules.firstCharge.newFirstCharge.NewFirstChargePanel",hy);var i=e.prototype;return i.onDisplay=function(){for(var t=0;t<6;t++)this.clipArr[t].loadAndPlay("moduleEffect/goodsItemEff","default",0,!0)},i.onUnDisplay=function(){Vl.ins().onNewChargePanelHide();for(var t=0;t<6;t++)this.clipArr[t].stop()},i.init=function(){this.items=[],this.clipArr=[];for(var t=0;t<6;t++){this.items[t]=this.items[t]||new fh(null,!0,!0,90,!0);var e=this.items[t];e.mouseEnabled=!0,e.isShowTips=!0,e.pos(0,0),this["imgGoods"+(t+1)].addChild(e),this.clipArr[t]=this.clipArr[t]||b.getOne(),this.clipArr[t].mouseEnabled=!1,this.clipArr[t].pos(46,94),this["imgGoods"+(t+1)].addChild(this.clipArr[t])}if(this.clip=b.getOne(),this.petSp.addChild(this.clip),Bt.isXianLai)this.btn1.label="充值60钻石",this.btn2.label="充值300钻石",this.btn3.label="充值1000钻石",this.btn4.label="充值2000钻石";else if(Bt.isFanTi)this.btn1.label="花费6仙尊幣",this.btn2.label="花费30仙尊幣",this.btn3.label="花费100仙尊幣",this.btn4.label="花费200仙尊幣";else{var i;for(t=0;t<Mn.payIDArr.length;t++)(i=Bn.getChargeBackVO(Mn.payIDArr[t]))&&this["btn"+(t+1)]&&(this["btn"+(t+1)].label="充值"+i.money+"元")}},i.closeWindow=function(){Vl.ins().toFirChargeIcon(),laya.ui.View.prototype.closeWindow.call(this)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.imgHelp:var e=Z.span("1、宠物的战力加成在拥有四个角色，且宠物技能满级的情况才能达到最大。","#5d3924",24)+"<br/>"+Z.span(" 2、仅可以选择一个档位获得五倍元宝，建议选择最高档位。","#5d3924",24);EF.show(e,"首充大礼");break;case this.btn1:Bt.isFanTi?Nl.ins().toExchange(Mn.payIDArr[0]):Nl.ins().toPay(Mn.payIDArr[0]);break;case this.btn2:Bt.isFanTi?Nl.ins().toExchange(Mn.payIDArr[1]):Nl.ins().toPay(Mn.payIDArr[1]);break;case this.btn3:Bt.isFanTi?Nl.ins().toExchange(Mn.payIDArr[2]):Nl.ins().toPay(Mn.payIDArr[2]);break;case this.btn4:Bt.isFanTi?Nl.ins().toExchange(Mn.payIDArr[3]):Nl.ins().toPay(Mn.payIDArr[3])}},i.update=function(){for(var t=0;t<6;t++){var e=ur.getItem(Mn.goodsArr[t][0]);this.items[t].data=e,this.items[t].num=Mn.goodsArr[t][1]}this.clip.loadAndPlay("moduleEffect/40050047","default",0,!0)},e}(),AL=function(t){function e(){this._date=null,this.imgArr=null,this.clipArr=null,e.__super.call(this),this.on("click",this,this.onClick),this.txtLink.underline=!0,this.txtNum.style.wordWrap=!1,this.btnCharge.label="充值"}w(e,"modules.firstCharge.view.ChargeBackGodCoinItem",uy);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnCharge:Nl.ins().toPay(this._date.pay_id);break;case this.txtLink:var e=Bn.getChargeBackVO(this._date.pay_id);"titleKing"==e.titleImage?me.linkTo(11404):"titleCard"==e.titleImage&&me.linkTo(11431)}},I(0,i,"uiClass",function(){return"ChargeBackItem"}),I(0,i,"date",null,function(t){if(this._date=t,this._date){var e=Bn.getChargeBackVO(this._date.pay_id);if(e){var i="";i=Bt.isTw()?"TWD":"USD",0<e.showMoney?this.txtNum.innerHTML=Z.font(e.showMoney+i,"#f4f1b2",30):this.txtNum.innerHTML=Z.font(e.money+i,"#f4f1b2",30),this.imgTitle.skin="modules/charge/"+e.titleImage+".png",this.imgItem.skin=e.img,""!=e.tipImage?this.imgTip.skin=e.tipImage:0<this._date.extra_reward?this.imgTip.skin="modules/charge/double.png":this.imgTip.skin="modules/charge/hot.png","titleCard"==e.titleImage||"titleKing"==e.titleImage?this.txtLink.visible=!0:this.txtLink.visible=!1}}}),e}(),EL=function(t){function e(){this._date=null,e.__super.call(this),this.on("click",this,this.onClick),this.txtLink.underline=!0,this.txtNum.style.wordWrap=!1,this.btnCharge.label="購買"}w(e,"modules.firstCharge.view.ChargeBackGoldFanTiItem",uy);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnCharge:Nl.ins().toExchange(this._date.pay_id);break;case this.txtLink:var e=Bn.getChargeBackVO(this._date.pay_id);"titleKing"==e.titleImage?me.linkTo(11404):"titleCard"==e.titleImage&&me.linkTo(11431)}},I(0,i,"uiClass",function(){return"ChargeBackItem"}),I(0,i,"date",null,function(t){if(this._date=t,this._date){var e=Bn.getChargeBackVO(this._date.pay_id);e&&(0<e.showMoney?this.txtNum.innerHTML=Z.font(e.showMoney+"USD","#f4f1b2",30):this.txtNum.innerHTML=Z.font(e.money+"仙尊幣","#f4f1b2",30),this.imgTitle.skin="modules/charge/"+e.titleImage+".png",this.imgItem.skin=e.img,0<this._date.extra_reward?this.imgBack.skin="modules/charge/back"+this._date.extra_reward+".png":0<e.extraReward?this.imgBack.skin="modules/charge/back"+e.extraReward+".png":this.imgBack.visible=!1,""!=e.tipImage?this.imgTip.skin=e.tipImage:0<this._date.extra_reward?this.imgTip.skin="modules/charge/double.png":this.imgTip.skin="modules/charge/hot.png","titleCard"==e.titleImage||"titleKing"==e.titleImage?this.txtLink.visible=!0:this.txtLink.visible=!1)}}),e}(),RL=function(t){function e(){this.itemArr=null,e.__super.call(this),this.pan.vScrollBarSkin="",T.register("MONEY_CHANGE",this,this.updateMoney)}w(e,"modules.firstCharge.view.ChargeBackGodCoinView",cy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){var t=Bn.getFanTiChargeBackVOInfoArray();if(t){this.itemArr=this.itemArr||[];for(var e=t.length,i=0;i<e;i++)this.itemArr[i]=this.itemArr[i]||new AL,this.itemArr[i].x=0,this.itemArr[i].y=165*i,this.itemArr[i].date=t[i],this.pan.addChild(this.itemArr[i])}else Nl.ins().toPayInfo();this.updateMoney()},i.updateMoney=function(){this.txtCoin.text=""+pe.getScore(30)},e}(),OL=function(t){function e(){this._date=null,this.imgArr=null,this.clipArr=null,this.xmlVO=null,e.__super.call(this),this.on("click",this,this.onClick),this.txtLink.underline=!0}w(e,"modules.firstCharge.view.ChargeBackItem",uy);var i=e.prototype;return i.onClick=function(t){var e=Bn.getChargeBackVO(this._date.pay_id);switch(t.target){case this.btnCharge:Nl.ins().toPay(this._date.pay_id),pt.send(10013,3,"充值返利-"+e.name);break;case this.txtLink:"titleKing"==e.titleImage||"titleForeverKing1"==e.titleImage||"titleForeverKing2"==e.titleImage?(me.linkTo(11404),Nl.ins().closeChargeView()):"titleCard"==e.titleImage||"titleForeverMonthCard1"==e.titleImage||"titleForeverMonthCard2"==e.titleImage?(me.linkTo(11431),Nl.ins().closeChargeView()):"titleWeekCard"==e.titleImage&&(me.linkTo(114026),Nl.ins().closeChargeView())}},I(0,i,"displayLink",function(){return!!this.xmlVO&&("titleCard"==this.xmlVO.titleImage||("titleKing"==this.xmlVO.titleImage||("titleWeekCard"==this.xmlVO.titleImage||("titleForeverMonthCard1"==this.xmlVO.titleImage||("titleForeverMonthCard2"==this.xmlVO.titleImage||("titleForeverKing1"==this.xmlVO.titleImage||"titleForeverKing2"==this.xmlVO.titleImage))))))}),I(0,i,"date",null,function(t){this._date=t,this._date&&(this.xmlVO=Bn.getChargeBackVO(this._date.pay_id),this.xmlVO&&(0<this.xmlVO.showMoney?this.txtNum.innerHTML=Z.font(this.xmlVO.showMoney+"USD","#f4f1b2",30):this.txtNum.innerHTML=Bt.isXianLai?Z.font(10*this.xmlVO.money+"钻石","#f4f1b2",30):Z.font(this.xmlVO.money+"元","#f4f1b2",30),this.imgTitle.skin="modules/charge/"+this.xmlVO.titleImage+".png",this.imgItem.skin=this.xmlVO.img,0<this._date.extra_reward?this.imgBack.skin="modules/charge/back"+this._date.extra_reward+".png":0<this.xmlVO.extraReward?this.imgBack.skin="modules/charge/back"+this.xmlVO.extraReward+".png":this.imgBack.visible=!1,""!=this.xmlVO.tipImage?this.imgTip.skin=this.xmlVO.tipImage:0<this._date.extra_reward?this.imgTip.skin="modules/charge/double.png":this.imgTip.skin="modules/charge/hot.png",this.displayLink?this.txtLink.visible=!0:this.txtLink.visible=!1))}),e}(),LL=function(t){function e(){this.itemArr=null,e.__super.call(this),this.pan.vScrollBarSkin=""}w(e,"modules.firstCharge.view.ChargeBackGoldFanTiView",dy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){var t=Bn.getPayInfoListFanTi();if(t){this.itemArr=this.itemArr||[];for(var e=t.length,i=0;i<e;i++)this.itemArr[i]=this.itemArr[i]||new EL,this.itemArr[i].x=0,this.itemArr[i].y=165*i,this.itemArr[i].date=t[i],this.pan.addChild(this.itemArr[i])}else Nl.ins().toPayInfo();this.txtCoin.text=""+pe.getScore(30)},e}(),DL=function(t){function e(){e.__super.call(this)}w(e,"modules.firstCharge.view.ChargeBackQuestionPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.on("click",this,this.onClick),this.txt.style.lineHeight=30,this.txt.style.color="#5d3924",this.txt.innerHTML='<span style="color: rgb(51,51,51); font-size: 24px;">充值为什么没到账？</span><br/><span style="color: rgb(51,51,51); font-size: 24px;">（1）首先请检查您的网络状况是否充值成功。</span><br/><span style="color: rgb(51,51,51); font-size: 24px;">（2）请前往"好友动态-小游戏-我的-查看星/秀币"，可能是充值到了这里。可以在游戏内直接进行元宝购买哦。</span><br/>'},i.onClick=function(t){switch(t.target){case this.btnYes:case this.btnClose1:this.closeWindow()}},e}(py),NL=function(s){function t(){this.chargArr=null,this.handUp=null,this.handDown=null,this.nowXMLVO=null,this.itemArr=null,this.eff=null,this.clipArr=null,t.__super.call(this)}w(t,"modules.firstCharge.view.FirstChargePanel",s);var e=t.prototype;return e.createChildren=function(){s.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.chargArr=Bn.getChargeArr();var t,e="";for(var i in this.chargArr)2==(t=this.chargArr[i]).id&&Bt.isFanTi?e+="累充10仙尊幣":e+=t.title;this.tab.labels=e,this.tab.selectedIndex=0,this.tab.on("change",this,this.onClick),this.eff=b.getOne(),this.handUp=Q.create(this,this.moveDown),this.handDown=Q.create(this,this.moveUp),this.on("click",this,this.onClick1),this.on("display",this,this.onAdd),this.on("undisplay",this,this.onRemove)},e.onAdd=function(t){0==this.tab.selectedIndex?(this.eff.pos(383,459),this.onRemove()):(this.eff.pos(360,488),this.moveUp())},e.moveUp=function(){ie.to(this.eff,{y:this.eff.y+10,complete:this.handUp},700)},e.moveDown=function(){ie.to(this.eff,{y:this.eff.y-10,complete:this.handDown},700)},e.onRemove=function(t){ie.clearAll(this.eff)},e.onClick1=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnGet:0==this.nowXMLVO.state?me.linkTo(11454):Nl.ins().toFetchGift(this.nowXMLVO.id);break;default:if(t.target instanceof modules.athletics.encounter.view.DropItem){var e=t.target;e.data.tempNum=e.num,Ae.show(t.target.data,"BASE_GOODS_TIP")}}},e.onClick=function(t){this.updateView()},e.updateView=function(){this.nowXMLVO=this.chargArr[this.tab.selectedIndex],this.imgBg.skin=this.nowXMLVO.imgBg;for(var t=0;t<this.chargArr.length;t++)this["imgTR"+(t+1)].visible=1==this.chargArr[t].state;switch(this.nowXMLVO.state){case 0:this.btnGet.label="充点小钱",this.btnGet.gray=!1,this.btnGet.mouseEnabled=!0,this.imgR.visible=!1;break;case 1:this.btnGet.label="领取",this.btnGet.gray=!1,this.btnGet.mouseEnabled=!0,this.imgR.visible=!0;break;case 2:this.btnGet.label="已领取",this.btnGet.gray=!0,this.btnGet.mouseEnabled=!1,this.imgR.visible=!1}this.clipArr=this.clipArr||[];var e,i=0;for(var s in this.clipArr)(e=this.clipArr[s]).removeSelf();var n=[],o=pe.getPalByIndex(0);o&&(n=this.nowXMLVO["awardArr"+o.ext.category]),this.itemArr=this.itemArr||[];for(var a,l,r,h=Math.max(n.length,this.itemArr.length),u=0,c=0,d=0;d<h;d++)d<n.length?(a=n[d],(r=new Object).className="p_tkv",r.type=5,r.id=a.type_id,r.val=a.num,this.itemArr[d]=this.itemArr[d]||new Dh(""),l=this.itemArr[d],u=d%5,c=Math.floor(d/5),l.setDrop(r),l.mouseEnabled=!0,l.pos(129*u+72,157*c+810),l.num=n[d].num,this.box.addChild(this.itemArr[d]),1==n[d].reserve&&(this.clipArr[i]=this.clipArr[i]||b.getOne(),(e=this.clipArr[i]).mouseEnabled=!1,e.loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),e.pos(l.x+47,l.y+93),this.box.addChild(e),i++)):this.itemArr[d]&&this.itemArr[d].removeSelf();this.imgCost.skin="modules/act/firCharge/firChargeTitle"+this.nowXMLVO.id+".png",this.imgBg.skin="modules/act/firCharge/firChargeBg"+this.nowXMLVO.id+".png",this.imgPow.skin="modules/act/firCharge/firChargePow"+this.nowXMLVO.id+".png",this.box.addChild(this.eff),2==this.nowXMLVO.id?(this.eff.pos(360,488),this.eff.loadAndPlay(this.nowXMLVO.imgBg,"default",0,!0),this.eff.scale(1,1),this.moveUp()):(this.eff.pos(383,459),this.eff.loadAndPlay(this.nowXMLVO.imgBg,"sit",4,!0),this.eff.scale(_e.scale,_e.scale),this.onRemove())},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this)},e.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},t}(my),VL=function(t){function e(){this.requestView=null,this.targetView=null,this.currView=null,e.__super.call(this),this.setWindowType(),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0,Nt.register("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_1",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_FRIEND_ACHIEVEMENT_GET_REWARD_TYPE_2",this.tab.items[1],new Tt(19,-10)),this.on("click",this,this.onClick)}w(e,"modules.friend.achievement.view.FriendAchPanel",fy);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onTabChange=function(t){switch(this.spView.removeChildren(),t){case 0:pt.send(38,2,"好友礼包-邀请好友"),this.requestView=this.requestView||new ML,this.currView=this.requestView;break;case 1:pt.send(38,3,"好友礼包-好友目标"),this.targetView=this.targetView||new UL,this.currView=this.targetView}this.spView.addChild(this.currView),this.currView.update()},i.update=function(){this.currView&&this.currView.update()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"uiClass",function(){return"FriendAchievementPanel"}),e}(),BL=function(t){function e(){this._data=null,this.goodsItem=null,e.__super.call(this),this.goodsItem=new Ah(90,90,!1,!0,!0),this.goodsItem.pos(10,35),this.addChild(this.goodsItem),this.btnGet.on("click",this,this.onClick)}w(e,"modules.friend.achievement.view.FriendAchRequestItem",t);var i=e.prototype;return i.onClick=function(t){this._data&&(pt.send(38,5,"好友礼包-领取奖励-"+this._data.desc),Oa.ins().toGet(this._data.id))},i.update=function(){switch(this.goodsItem.dataSource=[this._data.rewardObj.key,this._data.rewardObj.val],this.txtDesc.text=this._data.desc,Gn.getAchState(this._data.id)){case 2:this.btnGet.label="已领取",this.btnGet.disabled=!0;break;case 1:this.btnGet.label="领取",this.btnGet.disabled=!1;break;case 0:this.btnGet.label="未完成",this.btnGet.disabled=!0}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(_y),ML=function(t){function e(){this.items=null,e.__super.call(this),this.imgRequest.on("click",this,this.onClick)}w(e,"modules.friend.achievement.view.FriendAchRequestView",gy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){if(yt.isWX||yt.isQQ){if(ao.getIconStateShow(4022))return S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"}),0==Do.getRewardTimes(1,2)&&_r.ins().toPfRewardGet([1,2])),void(S.window.qq&&(S.window.qq.navigateToMiniProgram({appId:"1106331565"}),0==Do.getRewardTimes(1,2)&&_r.ins().toPfRewardGet([1,2])));pt.send(38,4,"好友礼包-邀请好友-发送邀请按钮"),Bt.toGetShareInfo("7",[1,2]),Bt.sdk.setQuery("shareRoleId",pe.roleID),0==Do.getRewardTimes(1,2)&&_r.ins().toPfRewardGet([1,2])}else pt.send(38,4,"好友礼包-邀请好友-发送邀请按钮"),Bt.resetShareParm("我刚打倒了世界BOSS，却发现有个小姐姐躺在旁边……","7",[1,2]),Bt.sdk.shareMessage()},i.update=function(){var t,e,i=jn.getAchievementGroupVOsByType(1),s=0;this.spList.removeChildren(),this.items=this.items||[];for(var n=0;n<i.length;n++)t=jn.getAchievementGroupVOByGroupId(i[n]),this.items[n]=this.items[n]||new FL,(e=this.items[n]).dataSource=t,e.y=s,s+=e.height+5,this.spList.addChild(e)},e}(),FL=function(t){function e(){this.groupVOs=null,this.completeHanlder=null,this.achIds=[],e.__super.call(this),this.listRequest.hScrollBarSkin="",this.listRequest.scrollBar.autoHide=!0,this.listRequest.itemRender=BL,this.on("click",this,this.onClick),this.completeHanlder=Q.create(this,this.checkBtnVisible)}w(e,"modules.friend.achievement.view.FriendAchTargetListView",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight()}},i.turnLeft=function(){var t=this.listRequest.startIndex-this.listRequest.repeatX;t=t<0?0:t,this.listRequest.tweenTo(t,200,this.completeHanlder)},i.turnRight=function(){var t=this.listRequest.startIndex+this.listRequest.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.listRequest.tweenTo(t,200,this.completeHanlder)},i.checkBtnVisible=function(){this.btnLeft.visible=0<this.listRequest.startIndex,this.btnRight.visible=this.listRequest.startIndex<this.endFirstIndex},i.update=function(){var t=this.groupVOs[0];t&&(this.txtDesc.text=t.desc,""==t.desc?(this.spInfos.y=0,this.height=235):(this.spInfos.y=30,this.height=265)),this.achIds=[];for(var e=0;e<this.groupVOs.length;e++)this.achIds=this.achIds.concat(this.groupVOs[e].achIds);var i=jn.getAchievementVOsByTypeIds(this.achIds);i=i.sort(this.sortDatas),this.listRequest.dataSource=i,this.checkBtnVisible()},i.sortDatas=function(t,e){var i=Gn.getAchState(t.id),s=Gn.getAchState(e.id),n=Fe.ACHIEVEMENT_STATE_INDEXS.indexOf(i),o=Fe.ACHIEVEMENT_STATE_INDEXS.indexOf(s);return n<o?-1:o<n?1:0},I(0,i,"endFirstIndex",function(){return this.achIds?this.achIds.length-this.listRequest.repeatX:0}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this.groupVOs=t)&&this.update()}),e}(yy),UL=function(t){function e(){e.__super.call(this),this.list.vScrollBarSkin="",this.list.vScrollBar.autoHide=!0}w(e,"modules.friend.achievement.view.FriendAchTargetView",vy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){for(var t,e,i=jn.getAchievementGroupVOsByType(2),s=0,n=0;n<i.length;n++)t=jn.getAchievementGroupVOByGroupId(i[n]),(e=new FL).dataSource=t,e.y=s,s+=e.height+20,this.list.addChild(e)},e}(),GL=function(t){function e(){this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24,this.txtMsg.on("link",this,this.onLink)}w(e,"modules.friend.base.view.ChatPrivateLeftItem",t);var i=e.prototype;return i.update=function(){var t=this.dataSource,e=jn.getFriendByRoleId(ws.curPrivateChatRoleId);if(e||(e=qn.getFriendByRoleId(ws.curPrivateChatRoleId)),e){if(0<e.avatar_frame){var i=la.getSelfFrameVOById(e.avatar_frame);i&&1==i.urlType?(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(81,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+e.avatar_frame+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();this.imgHead.skin="com/head/big"+e.category+e.sex+".png"}this.textBg.skin="modules/bubble/bubbleL"+t.bgColor+".png";var s="#815841";if(0<t.bgColor){this.textBg.sizeGrid="21,46,18,22";var n=la.getSelfBubbleVOById(t.bgColor);s=n?n.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";this.txtMsg.innerHTML=bs.getChatContextHtml(t.msg,!1,s),this.textBg.width=20+this.txtMsg.contextWidth+20,this.textBg.height=10+this.txtMsg.contextHeight+10},i.onLink=function(t){if("string"==typeof t){var e=String(t).split("#");if(e&&2<=e.length){var i=0,s=NaN,n=NaN;switch(e[0]){case"event:biographyCopyBountyEnter":i=parseInt(e[1]),s=parseInt(e[2]),me.linkTo(i,s);break;case"event:teamCopy":me.linkTo(10604,parseInt(e[1]));break;case"event:loveCopy":me.linkTo(10608,parseInt(e[1]));break;case"event:BargainFriendCut":i=parseInt(e[1]),n=parseInt(e[2]),me.linkTo(i,n)}}}},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(Iy),HL=function(t){function e(){this.isInitFaceList=!1,this.isMouseDown=!1,this.currClickX=0,this.currTimes=0,this.timesLen=100,this.moveDistance=150,this._currIndex=0,this.pageTotal=21,this.maxPage=2,this.allItem=null,this.leftPool=null,this.rightPool=null,this.curTipsTextNum=0,this.warningItemPool=null,this.isCd=!1,this.syncCount=0,this.curItemY=0,this.sendHdl=new Q(this,function(){this.isCd=!1}),e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.txtName.style.align="center",this.txtName.style.fontSize=24,this.allItem=[],this.leftPool=[],this.rightPool=[],this.warningItemPool=[],this.inputMsg.on("focus",this,this.onFocus),this.inputMsg.on("blur",this,this.onBlur),this.inputMsg.on("enter",this,this.sendInput),this.inputMsg.maxChars=40,this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay),this.list.vScrollBar.autoHide=!0,this.listFace.hScrollBarSkin="",this.listFace.hScrollBar.rollRatio=0,this.listFace.on("mousedown",this,this.thisMouseDown),this.tab.itemClickFun=new Q(this,this.onItemClick)}w(e,"modules.friend.base.view.ChatPrivatePanel",wy);var i=e.prototype;return i.onUndisplay=function(){ws.curPrivateChatRoleId=0},i.sendInput=function(){if(this.hideEmoji(),ws.checkSendWordLimit(this.inputMsg.text,-1))if(40<this.inputMsg.text.length)Jt.addTip("超过字数上限");else if(""!=this.inputMsg.text&&"请输入聊天内容..."!=this.inputMsg.text)if(j.checkHtmlStrRule(this.inputMsg.text)){if(!this.isCd){this.isCd=!0,bs.sendCd(this.btnSend,this.sendHdl),pt.send(17,9,"好友-私聊-发送");var t=this.inputMsg.text;t=bs.replaceSpcInputChar(t),Za.ins().toInPairs(ws.curPrivateChatRoleId,t)}}else Jt.addTip("含非法字符");else Jt.addTip("不能发送空白信息")},i.onBlur=function(){_t.removeFromTimer(this,this.syncPosition)},i.syncPosition=function(){this.inputMsg.resetTransform(),this.syncCount++,10<this.syncCount&&_t.removeFromTimer(this,this.syncPosition)},i.onItemClick=function(t){ws.curPrivateChatRoleId=ws.privateChats[t],this.update()},i.thisMouseDown=function(t){switch(this.isMouseDown=!0,this.listFace.on("mouseup",this,this.thisMouseUp),this.listFace.on("mouseout",this,this.thisMouseOut),t.type){case"mousedown":this.currClickX=t.stageX,this.currTimes=S.now()}},i.thisMouseOut=function(t){switch(t.type){case"mouseout":this.listFace.off("mouseup",this,this.thisMouseUp),this.listFace.off("mouseout",this,this.thisMouseOut),Math.abs(t.stageX-this.currClickX)>this.moveDistance&&(0<t.stageX-this.currClickX?0<this.currIndex&&this.currIndex--:this.maxPage>this.currIndex&&this.currIndex++),S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1),this.listFace.scrollTo(710*this.currIndex,0)}this.updateSpPage()},i.thisMouseUp=function(t){this.isMouseDown=!1,this.listFace.off("mouseup",this,this.thisMouseUp),Math.abs(t.stageX-this.currClickX)>this.moveDistance&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1),S.now()-this.currTimes<this.timesLen&&20<Math.abs(t.stageX-this.currClickX)&&(0<t.stageX-this.currClickX?this.currIndex-=1:this.currIndex+=1),this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.updateSpPage=function(){for(var t,e=0;e<this.spPage.numChildren;e++)t=this.spPage.getChildAt(e),e==this.currIndex?t.source=ut.getRes("com/ui/imgPage1.png"):t.source=ut.getRes("com/ui/imgPage2.png")},i.showEmoji=function(){0==this.imgFace.visible&&(this.imgFace.visible=!0,or.ins().navbarVisible=!1,this.list.bottom=474,this.light.bottom=474,this.inputMsg.bottom=412,this.imgFaceEnter.bottom=417,this.btnSend.bottom=415,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom))},i.hideEmoji=function(){1==this.imgFace.visible&&(this.imgFace.visible=!1,or.ins().navbarVisible=!0,this.list.bottom=334,this.light.bottom=334,this.inputMsg.bottom=272,this.imgFaceEnter.bottom=277,this.btnSend.bottom=275,this.list.refresh(),this.list.visible=!1,this.callLater(this.scrollToBottom))},i.onShowFaceView=function(){if(0==this.imgFace.visible?this.showEmoji():this.hideEmoji(),0==this.isInitFaceList){this.isInitFaceList=!0;this.maxPage=Math.floor(63/this.pageTotal),0<63%this.pageTotal&&(this.maxPage+=1),this.initSpPage(this.maxPage);for(var t,e,i,s=0,n=0,o=0,a=0;a<this.maxPage;a++){(t=new Wt).mouseThrough=!0,t.name="spPage"+a,t.size(710,160),t.pos(710*a,0),this.listFace.addChild(t);for(var l=0;l<this.pageTotal;l++){if(63<(o=a*this.pageTotal+l+1))return;e=new et,t.addChild(e),s=l%7,n=Math.floor(l/7),e.pos(36+95*s,30+90*n),i="modules/chat/face"+o+"_1.png",e.size(64,64),e.skin=i,e.name="##"+(9<o?""+o:"0"+o),e.mouseEnabled=!0,e.on("click",this,this.onSelect)}}}},i.initSpPage=function(t){for(var e,i=0;i<t;i++)(e=new et).dataSource=i,e.name="imgPage",e.on("click",this,this.onPageChange,[i]),e.mouseEnabled=!0,e.source=0==i?ut.getRes("com/ui/imgPage1.png"):ut.getRes("com/ui/imgPage2.png"),e.x=50*i,this.spPage.addChild(e)},i.onPageChange=function(t){this.currIndex=t,this.listFace.scrollTo(710*this.currIndex,0),this.updateSpPage()},i.onFocus=function(t){"请输入聊天内容..."==this.inputMsg.text&&(this.inputMsg.text=""),this.syncCount=0,_t.addToTimer(this,this.syncPosition)},i.onSelect=function(t){"请输入聊天内容..."==this.inputMsg.text&&(this.inputMsg.text="");var e=t.target.name;3<=40-this.inputMsg.text.length&&(this.inputMsg.text=this.inputMsg.text+e),this.inputMsg.focus=!0},i.onClick=function(t){switch(t.target){case this.btnSend:this.sendInput();break;case this.imgFaceEnter:this.onShowFaceView();break;case this.btnBack:case this.btnClose:this.closeWindow();break;default:this.imgFace.contains(t.target)||this.hideEmoji()}},i.update=function(){if(this.updateMsg(),this.updatePrivateNameTab(),0<ws.curPrivateChatRoleId){var t=jn.getFriendByRoleId(ws.curPrivateChatRoleId);t||(t=qn.getFriendByRoleId(ws.curPrivateChatRoleId)),t&&(this.txtName.innerHTML=Z.span("与","#FDEAB9")+Z.span("["+t.role_name+"]","#3399FF")+Z.span("的聊天","#FDEAB9"))}},i.getItem=function(t){return 1==t.type?0<this.rightPool.length?this.rightPool.pop():new WL:0<this.leftPool.length?this.leftPool.pop():new GL},i.getWarningTipsItem=function(t){return t.systemTips?0<this.warningItemPool.length?this.warningItemPool.shift():new qL:null},i.updateMsg=function(){for(;0<this.allItem.length;){var t=this.allItem.pop();t.y=0,t.removeSelf(),i instanceof modules.friend.base.view.ChatPrivateLeftItem?this.leftPool.push(i):i instanceof modules.friend.base.view.ChatPrivateRightItem?this.rightPool.push(i):i instanceof modules.friend.base.view.ChatWarningTipsItem&&this.warningItemPool.push(i)}var e=ws.getPrivateChatMsgsByRoleId(ws.curPrivateChatRoleId);if(e){var i,s,n,o=[];for(var a in o=40<e.msgs.length?o.slice(e.msgs.length-40):e.msgs,e.msgs)n=e.msgs[a],(i=this.getItem(n)).dataSource=n,i.update(),this.list.addChild(i),this.allItem.push(i),(s=this.getWarningTipsItem(n))&&(this.list.addChild(s),this.allItem.push(s),s.dataSource=n.systemTips)}this.updatePos(),this.list.refresh(),this.callLater(this.scrollToBottom),this.updateTxtTime()},i.updatePos=function(){var t;this.curItemY=15;for(var e=0;e<this.allItem.length;e++)(t=this.allItem[e]).y=this.curItemY,this.curItemY+=t.height+15},i.updateTxtTime=function(){var t=ws.getPrivateChatMsgsByRoleId(ws.curPrivateChatRoleId);if(t){var e=t.msgs[0];this.txtTime.text=x.format(e.ts)}else this.txtTime.text=""},i.updatePrivateNameTab=function(){for(var t=ws.getPrivateChatNames(),e="",i="",s=0;s<t.length;s++)i=t[s],s<t.length-1?e+=i+",":e+=i;this.tab.labels=e;var n=ws.getPrivateNameIndex();this.tab.selectedIndex=n},i.updateByPairs=function(t,e){if(1==t&&(this.inputMsg.text=""),1==t&&0==e||0<ws.curPrivateChatRoleId&&0<e&&ws.curPrivateChatRoleId==e){var i=ws.getPrivateChatMsgsByRoleId(ws.curPrivateChatRoleId);if(i){if(40<=this.allItem.length){var s=this.allItem.shift();s.y=0,s.removeSelf(),s instanceof modules.friend.base.view.ChatPrivateLeftItem?this.leftPool.push(s):s instanceof modules.friend.base.view.ChatPrivateRightItem&&this.rightPool.push(s)}var n=i.msgs[i.msgs.length-1],o=this.getItem(n);o.dataSource=n,o.update(),this.list.addChild(o),this.allItem.push(o);var a=this.getWarningTipsItem(n);a&&(this.list.addChild(a),this.allItem.push(a),a.dataSource=n.systemTips),this.updatePos(),this.list.refresh(),this.scrollToBottom(),this.hideEmoji()}this.updateTxtTime()}},i.scrollToBottom=function(){this.list.vScrollBar.value=this.list.vScrollBar.max,this.list.visible=!0},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"currIndex",function(){return this._currIndex},function(t){0<=t&&t<=this.maxPage-1&&(this._currIndex=t)}),e}(),WL=function(t){function e(){this.txtSpace=560,this.bcFrame=null,e.__super.call(this),this.txtMsg.style.lineHeight=35,this.txtMsg.style.fontSize=24}w(e,"modules.friend.base.view.ChatPrivateRightItem",t);var i=e.prototype;return i.update=function(){var t=this.dataSource,e=pe.getPalByIndex(0);this.imgHead.skin="com/head/big"+e.ext.category+e.ext.sex+".png",this.textBg.skin="modules/bubble/bubbleR"+t.bgColor+".png";var i="#815841";if(0<t.bgColor){this.textBg.sizeGrid="21,22,18,46";var s=la.getSelfBubbleVOById(t.bgColor);i=s?s.txtColor:"#f5c2a5"}else this.textBg.sizeGrid="30,20,15,27";this.txtMsg.innerHTML=bs.getChatContextHtml(t.msg,!1,i),this.txtMsg.x=this.txtSpace-this.txtMsg.contextWidth,this.textBg.width=20+this.txtMsg.contextWidth+20,this.textBg.x=this.txtMsg.x-20,this.textBg.height=10+this.txtMsg.contextHeight+10;var n=la.getCurAvatarFrameId();if(0<n){var o=la.getSelfFrameVOById(n);o&&1==o.urlType?(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(651,51),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+n+".png",this.bcFrame&&this.bcFrame.removeSelf())}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf()},I(0,i,"height",function(){return Math.max(this.textBg.y+this.textBg.height,this.imgHead.y+this.imgHead.height,115)},t.prototype._$set_height),e}(by),qL=function(t){function e(){e.__super.call(this)}return w(e,"modules.friend.base.view.ChatWarningTipsItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){"string"==typeof t&&(this.txt.innerHTML=Z.parseStringFont(t),this.txt.x=(this.width-this.txt.contextWidth)/2,this.bg.width=this.txt.contextWidth+40,this.bg.x=(this.width-this.bg.width)/2),h.superSet(Sy,this,"dataSource",t)}),e}(Sy),YL=function(t){function e(){e.__super.call(this)}return w(e,"modules.friend.base.view.FriendAddItem",t),I(0,e.prototype,"dataSource",t.prototype._$get_dataSource,function(t){var e=t;e&&(this.imgHead.skin="com/head/big"+e.category+e.sex+".png",this.txtName.text=e.role_name)}),e}(xy),XL=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.inputServer.on("focus",this,this.onFocus),this.inputName.on("focus",this,this.onFocus),this.inputName.maxChars=40,this.on("click",this,this.onClick),this.list.itemRender=YL}w(e,"modules.friend.base.view.FriendAddPanel",Cy);var i=e.prototype;return i.onFocus=function(t){switch(t){case this.inputServer:"输入区服"==this.inputServer.text&&(this.inputServer.text="");break;case this.inputName:"输入角色名"==this.inputName.text&&(this.inputName.text="")}},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnAdd:if(""==this.inputServer.text)return void Jt.addTip("请输入区服");if(""==this.inputName.text)return void Jt.addTip("请输入角色名");Ul.getInstance().toRequest(0,this.inputServer.text+"区-"+this.inputName.text);break;case this.btnChange:Ul.getInstance().toRecommend();break;case this.btnAddAll:var e;for(var i in Hn.recommendFriends)e=Hn.recommendFriends[i],Ul.getInstance().toRequest(e.role_id,e.role_name)}},i.updateList=function(){this.list.dataSource=Hn.recommendFriends,this.list.visible=!0,""==this.inputName.text&&(this.inputName.text="输入角色名"),""==this.inputServer.text&&(this.inputServer.text="输入区服")},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.list.visible=!1},e}(),KL=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.friend.base.view.FriendBatchDeleteItem",t);var i=e.prototype;return i.update=function(){this.txtName.text=this._data.role_name,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"com/ui/woman.png",0<this._data.vip_lv?this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png":this.imgVIP.skin=null;var t=162;this.txtName.text=this._data.role_name,this.txtName.x=t,t+=this.txtName.textWidth+2,0<this._data.vip_lv?(this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png",this.imgVIP.x=t,t+=65):this.imgVIP.skin=null,1==this._data.has_month_card?(this.imgMonth.skin="com/ui/month.png",this.imgMonth.x=t,t+=30):this.imgMonth.skin=null,1==this._data.has_noble?(this.imgNoble.skin="com/ui/noble.png",this.imgNoble.x=t):this.imgNoble.skin=null,this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",qn.isCrossFriend(this._data.role_id)?this.imgFavorBg.visible=this.imgFavor.visible=this.txtFavor.visible=!1:(this.imgFavorBg.visible=this.imgFavor.visible=this.txtFavor.visible=!0,this.txtFavor.text=this._data.favor+"",this.imgFavor.skin="modules/friend/favor"+jn.getFavorStep(this._data.favor)+".png"),0<this._data.avatar_frame?(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+this._data.avatar_frame+".png"):this.imgFrame.visible=!1,this.isSelected(!1)},i.isSelected=function(t){this.cbSelected.selected=t},I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Py),jL=function(t){function e(){this.items=null,e.__super.call(this),this.items=[],this.list.vScrollBar.autoHide=!0,this.cbTypes.on("change",this,this.onChange),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendBatchDeletePanel",Ty);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnSelecteAll:for(var e=0;e<this.list.numChildren;e++)this.list.getChildAt(e).isSelected(!0);break;case this.btnDelete:if(0<this.getDeleteFriends().length){var i=new Ee;i.msg="确认删除所选好友？",i.yesFun=this.sureDelete,i.yesCaller=this,EF.showVO(i)}else Jt.addTip("尚未选择好友")}},i.sureDelete=function(){var t,e=this.getDeleteFriends(),i=NaN;for(t in e)i=e[t],Ul.getInstance().toDelete(i)},i.getDeleteFriends=function(){for(var t,e=[],i=0;i<this.list.numChildren;i++)(t=this.list.getChildAt(i)).data&&t.cbSelected.selected&&e.push(t.data.role_id);return e},i.onChange=function(t){this.update()},i.update=function(){this.list.removeChildren();var t,e=[];0==jn.friendPanelTabCurIndex?e=jn.getBatchDeletesByType(this.cbTypes.selectedIndex):3==jn.friendPanelTabCurIndex&&(e=qn.getBatchDeletesByType(this.cbTypes.selectedIndex));for(var i=0;i<e.length;i++)this.items[i]=this.items[i]||new KL,(t=this.items[i]).pos(5,145*i),t.dataSource=e[i],null==t.parent&&this.list.addChild(t)},e}(),QL=function(t){function e(){this._data=null,e.__super.call(this),this.btnRemove.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendBlackListItem",t);var i=e.prototype;return i.onClick=function(t){Ul.getInstance().toDeleteBlack(this._data.role_id)},i.update=function(){this.txtName.innerHTML=this.getNameHtml(),this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png"},i.getNameHtml=function(){var t="";return t+=1==this._data.sex?Z.image("com/ui/man.png",20,27):Z.image("com/ui/woman.png",20,27),t+=Z.span(this._data.role_name+"（"+this._data.regrow+"转"+this._data.level+"级）","#5d3924"),t+="",0<this._data.vip_lv&&(t+=Z.image("modules/chat/VIP"+this._data.vip_lv+".png",63,23)),t},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(ky),zL=function(t){function e(){e.__super.call(this),this.setWindowType(),this.list.scrollBar.autoHide=!0,this.list.itemRender=QL,this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendBlackPanel",Ay);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},i.update=function(){3==jn.friendPanelTabCurIndex?this.list.dataSource=qn.blacks:0==jn.friendPanelTabCurIndex&&(this.list.dataSource=jn.blacks);var t=jn.blacks.length+qn.blacks.length;this.txtNum.text=t+"/100",0<jn.blacks.length?this.txtTip.visible=!1:this.txtTip.visible=!0},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),$L=function(t){function e(){this._data=null,this.bcFrame=null,this.blueVip=null,this.blueYear=null,e.__super.call(this),this.blueVip=this.blueVip||new et,this.blueYear=this.blueYear||new et,this.blueVip.visible=this.blueYear.visible=!1,this.addChild(this.blueVip),this.addChild(this.blueYear),this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendListItem",t);var i=e.prototype;return i.onClick=function(t){var e;switch(t.target){case this.btnBlack:(e=new Ee).msg="确认拉黑好友？",e.yesFun=Ul.getInstance().toBlack,e.yesCaller=Ul.getInstance(),e.yesArgs=[this._data.role_id],EF.showVO(e);break;case this.btnDelete:(e=new Ee).msg="确认删除好友？",e.yesFun=Ul.getInstance().toDelete,e.yesCaller=Ul.getInstance(),e.yesArgs=[this._data.role_id],EF.showVO(e);break;case this.btnBatchDelete:Ul.getInstance().openBatchDeletePanel();break;case this.spBlack:fo.coupleInfoP&&this._data.role_id==fo.coupleInfoP.role_id?sr.ins().openDivorceRequestView():(this.event("FriendListItem.spBlack.click"),this.spAction.visible=!this.spAction.visible);break;case this.spGrant:0==this.imgGrant.gray&&ql.getInstance().toGive(this._data.role_id);break;case this.imgHead:T.dispatch("OPEN_OTHER_ROLE_PANLE",this._data.role_id);break;case this.spFlower:Hl.ins().openSendPanel(this._data);break;default:Za.ins().toChatPairsUpdate(this._data.role_id),ws.curPrivateChatRoleId=this._data.role_id,ws.updatePrivateChats(this._data.role_id),T.dispatch("FRIEND_OPEN_PRIVATE_PANEL",this._data.role_id),this.imgRedPoint.visible=!1}},i.update=function(){this.txtName.text=this._data.role_name,0<this._data.vip_lv?this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png":this.imgVIP.skin=null;var t=162;this.txtName.text=this._data.role_name,this.txtName.x=t,t+=this.txtName.textWidth+2,0<this._data.vip_lv?(this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png",this.imgVIP.x=t,Ia.isSVIP(this._data.vip_lv)?t+=74:t+=65):this.imgVIP.skin=null,1==this._data.has_month_card?(this.imgMonth.skin="com/ui/month.png",this.imgMonth.x=t,t+=30):this.imgMonth.skin=null,1==this._data.has_noble?(this.imgNoble.skin="com/ui/noble.png",this.imgNoble.x=t,t+=30):this.imgNoble.skin=null,fo.coupleInfoP&&this._data.role_id==fo.coupleInfoP.role_id?(this.imgMate.skin="modules/friend/mate.png",this.imgMate.x=t,this.spBg.skin="modules/friend/mateBg.png",this.imgFlowerBg.visible=!0,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"modules/friend/image/women.png"):(this.imgMate.skin=null,this.spBg.skin="com/ui/innerBg2.png",this.imgFlowerBg.visible=!1,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"com/ui/woman.png"),this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",0<this._data.online?(this.txtOnline.color="#ffe0cf",this.txtOnline.text=x.getOnlineTxt(this._data.online)):(this.txtOnline.color="#139604",this.txtOnline.text="在线"),this.txtTalk.text=ws.getLastMsgSimpleInfo(this._data.role_id);var e=ws.checkPrivateChatRedPointByRoleId(this._data.role_id);if(this.imgRedPoint.visible=!!e,qn.isCrossFriend(this._data.role_id)?this.imgFavorBg.visible=this.imgFavor.visible=this.txtFavor.visible=!1:(this.imgFavorBg.visible=this.imgFavor.visible=this.txtFavor.visible=!0,this.txtFavor.text=this._data.favor+"",this.imgFavor.skin="modules/friend/favor"+jn.getFavorStep(this._data.favor)+".png"),0<this._data.avatar_frame){var i=la.getSelfFrameVOById(this._data.avatar_frame);i&&1==i.urlType?(this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(68,67),null==this.bcFrame.parent&&this.spFrameEff.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0),this.imgFrame.visible=!1):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+this._data.avatar_frame+".png")}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();Qn.checkCanGrant(this._data.role_id)?this.imgGrant.gray=!1:this.imgGrant.gray=!0,fo.coupleInfoP&&this._data.role_id==fo.coupleInfoP.role_id?this.imgBlack.skin="modules/friend/imgDivorced.png":this.imgBlack.skin="modules/friend/imgBlack.png",this.updateBlueVip(this._data.blue_vip)},i.showOrHideActionBtn=function(t){this.spAction.visible=t},i.updateBlueVip=function(t){0!=Qa.ins().showVipByString(t,this.blueVip,this.blueYear,this.txtName.x+30,this.txtName.y)&&(this.txtName.x+=60,this.imgVIP.x+=60,this.imgMonth.x+=60,this.imgMate.x+=60,this.imgNoble.x+=60)},i.remove=function(){this.removeSelf(),e.pool.push(this)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.spFlower.visible=this.spGrant.visible=!0,this._data&&(this.spFlower.visible=this.spGrant.visible=null==qn.getFriendByRoleId(this._data.role_id),this.update())}),e.getOne=function(){return 0<e.pool.length?e.pool.pop():new e},e.pool=[],e}(Ey),ZL=function(t){function e(){this.curItemY=0,e.__super.call(this),this.list.vScrollBar.autoHide=!0,Nt.register("RP_FRIEND_REQUEST",this.btnRequest,new Tt(22,-10)),Nt.register("RP_FRIEND_FIRST_OPEN_ADD_PANEL",this.btnAdd,new Tt(22,-10)),Nt.register("RP_FRIEND_ACHIEVEMENT",this.btnGift,new Tt(22,-10)),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.friend.base.view.FriendListView",Ry);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){ya.isOpenShare(0,2)?this.btnGift.visible=!0:this.btnGift.visible=!1},i.onClick=function(t){switch(t.target){case this.btnAdd:pt.send(17,5,"好友-好友标签-添加好友按钮"),me.linkTo(11502),Hn.checkAddBtnRedPoint();break;case this.btnRequest:pt.send(17,6,"好友-好友标签-申请列表按钮"),Ul.getInstance().openRequestPanel();break;case this.btnBlack:pt.send(17,7,"好友-好友标签-黑名单按钮"),Ul.getInstance().openBlackPanel(),Wl.ins().toInfo(2,1),Wl.ins().toInfo(2,2);break;case this.btnGift:pt.send(38,1,"好友礼包入口"),me.linkTo(11504);break;default:"spBlack"!=t.target.name&&this.hideActionBtn()}},i.hideActionBtn=function(){for(var t=0;t<this.list.numChildren;t++)this.list.getChildAt(t).showOrHideActionBtn(!1)},i.update=function(){this.clearListInfo();var t=jn.friends;0<t.length?(this.list.visible=!0,this.txtTip1.visible=!0,this.txtTip2.visible=!1,this.updateList(t)):(this.list.visible=!1,this.txtTip1.visible=!1,this.txtTip2.visible=!0);var e=qn.friends?qn.friends.length:0;this.txtNum.text=t.length+e+"/100"},i.clearListInfo=function(){for(;0<this.list.numChildren;){var t=this.list.getChildAt(0);null!=t&&t instanceof modules.friend.base.view.FriendListItem&&t.remove()}this.curItemY=10,this.list.visible=!1},i.updateList=function(t){for(var e=0;e<t.length;e++){var i=$L.getOne();i.y=this.curItemY,i.dataSource=t[e],i.update(),this.curItemY+=i.height+10,this.list.addChild(i),i.on("FriendListItem.spBlack.click",this,this.itemBlackImgClick)}this.list.refresh()},i.itemBlackImgClick=function(t){this.hideActionBtn()},e}(),JL=function(t){function e(){this._data=null,this._originX=NaN,this._blueBox=null,e.__super.call(this),this._originX=this.txtName.x,this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendRequestListItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnAgree:Ul.getInstance().toReply(1,this._data.role_id);break;case this.btnReject:Ul.getInstance().toReply(2,this._data.role_id);break;case this.imgHead:T.dispatch("OPEN_OTHER_ROLE_PANLE",this._data.role_id)}},i.update=function(){this.txtName.innerHTML=this.getNameHtml(),this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this.updateBlueVip(this._data.blue_vip)},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueBox=this._blueBox||new Rh,this.addChild(this._blueBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(this.txtName.x,this.txtName.y),this._blueBox.updateShowing(e),this.txtName.x=this._blueBox.width+this._originX}},i.getNameHtml=function(){var t="";return t+=1==this._data.sex?Z.image("com/ui/man.png",20,27):Z.image("com/ui/woman.png",20,27),t+=Z.span(this._data.role_name+"（"+this._data.regrow+"转"+this._data.level+"级）","#5d3924"),t+="",0<this._data.vip_lv&&(t+=Z.image("modules/chat/VIP"+this._data.vip_lv+".png",63,23)),this._data.has_month_card&&(t+=Z.image("com/ui/month.png",28,29)),this._data.has_noble&&(t+=Z.image("com/ui/noble.png",28,29)),t},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Oy),tD=function(t){function e(){e.__super.call(this),this.setWindowType(),this.list.scrollBar.autoHide=!0,this.list.itemRender=JL,this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendRequestListPanel",Ly);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnArgee:this.batchOperate(1);break;case this.btnReject:this.batchOperate(2);break;case this.btnClose:case this.btnBack:this.closeWindow();break;case this.imgSetting:Ul.getInstance().openSettingPanel()}},i.batchOperate=function(t){var e,i;for(var s in 3==jn.friendPanelTabCurIndex?e=qn.requests:0==jn.friendPanelTabCurIndex&&(e=jn.requests),e)i=e[s],Ul.getInstance().toReply(t,i.role_id)},i.update=function(){0<jn.requests.length?this.txtTip.visible=!1:this.txtTip.visible=!0,3==jn.friendPanelTabCurIndex?this.list.dataSource=qn.requests:0==jn.friendPanelTabCurIndex&&(this.list.dataSource=jn.requests)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),eD=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.on("click",this,this.onClick)}w(e,"modules.friend.base.view.FriendSettingPanel",Dy);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btn:var e=this.cbNotice.selected?1:0,i=this.cbReject.selected?1:0;Ul.getInstance().toSet(e,i),this.closeWindow()}},i.update=function(){this.cbNotice.selected=0<Hn.isNotice,this.cbReject.selected=0<Hn.isReject},e}(),iD=function(t){function e(){this._data=null,e.__super.call(this),this.btn.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.friend.box.view.FriendBoxHelpItem",t);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){if("解锁"==this.btn.label)this.btn.skin="com/ui/btn_small.png",Gl.getInstance().toHelp(1,this._data.role_id,this._data.id);else if("加速"==this.btn.label){this.btn.skin="com/ui/btn_small1.png";var e=Wn.getSeekCost();pe.gold>=e?Gl.getInstance().toHelp(2,this._data.role_id,this._data.id):Lo.showAlert()}else"开启"==this.btn.label&&(this.btn.skin="com/ui/btn_small1.png",Gl.getInstance().toReward(2,this._data.id))},i.update=function(){this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",0<this._data.avatar_frame?(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+this._data.avatar_frame+".png"):this.imgFrame.visible=!1,this.txtName.text=this._data.role_name.split("区-")[1];var t=Wn.getBoxVOById(this._data.type_id),e=ur.getItem(t.typeId);if(this.txtReward.color=U.getColorLight(e.color),this.txtReward.text=e.name,this.txtDesc.text=e.desc,0==this._data.state)this.btn.skin="com/ui/btn_small.png",this.btn.label="解锁",this.txtTime.text=x.formatTime(t.time),_t.removeFromSceond(this,this.loopTime),this.imgTime.skin="modules/friend/imgLock.png";else if(this.btn.skin="com/ui/btn_small1.png",0<this._data.finish_ts&&this._data.finish_ts<=ya.serverTime||2==this._data.state)this.txtTime.text="00:00:00",this.btn.label="开启",_t.removeFromSceond(this,this.loopTime),this.imgTime.skin="modules/friend/imgTime.png";else{var i=this._data.finish_ts-ya.serverTime;this.txtTime.text=x.formatTime(i),this.btn.label="加速",this.imgTime.skin="modules/friend/imgTime.png",_t.addToSecond(this,this.loopTime)}},i.loopTime=function(){var t=this._data.finish_ts-ya.serverTime;0<=t?this.txtTime.text=x.formatTime(t):_t.removeFromSceond(this,this.loopTime)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(Ny),sD=function(t){function e(){this._data=null,this.bcFrame=null,e.__super.call(this),this.on("display",this,this.onDisplay)}w(e,"modules.friend.cross.view.CrossFriendListItem",t);var i=e.prototype;return i.onDisplay=function(){this.imgFavorBg.visible=this.imgFavor.visible=this.txtFavor.visible=!1,this.spFlower.visible=this.spGrant.visible=!1,this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.off("click",this,this.onClick)},i.onClick=function(t){var e;switch(t.target){case this.btnBlack:(e=new Ee).msg="确认拉黑好友？",e.yesFun=Ul.getInstance().toBlack,e.yesCaller=Ul.getInstance(),e.yesArgs=[this._data.role_id],EF.showVO(e);break;case this.btnDelete:(e=new Ee).msg="确认删除好友？",e.yesFun=Ul.getInstance().toDelete,e.yesCaller=Ul.getInstance(),e.yesArgs=[this._data.role_id],EF.showVO(e);break;case this.btnBatchDelete:Ul.getInstance().openBatchDeletePanel();break;case this.spBlack:this.event("FriendListItem.spBlack.click"),this.spAction.visible=!this.spAction.visible;break;default:Za.ins().toChatPairsUpdate(this._data.role_id),ws.curPrivateChatRoleId=this._data.role_id,ws.updatePrivateChats(this._data.role_id),T.dispatch("FRIEND_OPEN_PRIVATE_PANEL",this._data.role_id),this.imgRedPoint.visible=!1}},i.showOrHideActionBtn=function(t){this.spAction.visible=t},i.remove=function(){this.removeSelf(),e.pool.push(this)},i.update=function(){this.txtName.text=this._data.role_name,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"com/ui/woman.png",0<this._data.vip_lv?this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png":this.imgVIP.skin=null;var t=162;this.txtName.text=this._data.role_name,this.txtName.x=t,t+=this.txtName.textWidth+2,0<this._data.vip_lv?(this.imgVIP.skin="modules/chat/VIP"+this._data.vip_lv+".png",this.imgVIP.x=t,Ia.isSVIP(this._data.vip_lv)?t+=74:t+=65):this.imgVIP.skin=null,1==this._data.has_month_card?(this.imgMonth.skin="com/ui/month.png",this.imgMonth.x=t,t+=30):this.imgMonth.skin=null,1==this._data.has_noble?(this.imgNoble.skin="com/ui/noble.png",this.imgNoble.x=t):this.imgNoble.skin=null,fo.coupleInfoP&&this._data.role_id==fo.coupleInfoP.role_id?(this.imgMate.skin="modules/friend/mate.png",this.imgMate.x=t,this.spBg.skin="modules/friend/mateBg.png",this.imgFlowerBg.visible=!0,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"modules/friend/image/women.png"):(this.imgMate.skin=null,this.spBg.skin="com/ui/innerBg2.png",this.imgFlowerBg.visible=!1,this.imgSex.skin=1==this._data.sex?"com/ui/man.png":"com/ui/woman.png"),this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",0<this._data.online?(this.txtOnline.color="#ffe0cf",this.txtOnline.text=x.getOnlineTxt(this._data.online)):(this.txtOnline.color="#139604",this.txtOnline.text="在线"),this.txtTalk.text=ws.getLastMsgSimpleInfo(this._data.role_id);var e=ws.checkPrivateChatRedPointByRoleId(this._data.role_id);if(this.imgRedPoint.visible=!!e,0<this._data.avatar_frame){var i=la.getSelfFrameVOById(this._data.avatar_frame);i&&1==i.urlType?(this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(68,67),null==this.bcFrame.parent&&this.spFrameEff.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0),this.imgFrame.visible=!1):(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+this._data.avatar_frame+".png")}else this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf();fo.coupleInfoP&&this._data.role_id==fo.coupleInfoP.role_id?this.imgBlack.skin="modules/friend/imgDivorced.png":this.imgBlack.skin="modules/friend/imgBlack.png"},I(0,i,"uiClass",function(){return"FriendListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e.getOne=function(){return 0<e.pool.length?e.pool.pop():new e},e.pool=[],e}(Ey),nD=function(t){function e(){this.curItemY=0,e.__super.call(this),this.on("display",this,this.onDisplay),Nt.register("RP_FRIEND_REQUEST_CROSS",this.btnRequest,new Tt(22,-10)),Nt.register("RP_FRIEND_ACHIEVEMENT",this.btnGift,new Tt(22,-10))}w(e,"modules.friend.cross.view.CrossFriendListView",Ry);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){ya.isOpenShare(0,2)?this.btnGift.visible=!0:this.btnGift.visible=!1,this.btnAdd.visible=!1,this.txtTip1.text="跨服好友需要在混沌虚天或聊天频道添加",this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.off("click",this,this.onClick)},i.onClick=function(t){switch(t.target){case this.btnRequest:Ul.getInstance().openRequestPanel();break;case this.btnBlack:Ul.getInstance().openBlackPanel(),Wl.ins().toInfo(2,2),Wl.ins().toInfo(2,1);break;case this.btnGift:pt.send(38,1,"好友礼包入口"),me.linkTo(11504);break;default:"spBlack"!=t.target.name&&this.hideActionBtn()}},i.hideActionBtn=function(){for(var t=0;t<this.list.numChildren;t++)this.list.getChildAt(t).showOrHideActionBtn(!1)},i.update=function(){this.clearListInfo();var t=qn.friends;0<t.length?(this.list.visible=!0,this.txtTip1.visible=!0,this.txtTip2.visible=!1,this.updateList(t)):(this.list.visible=!1,this.txtTip1.visible=!1,this.txtTip2.visible=!0);var e=jn.friends?jn.friends.length:0;this.txtNum.text=e+t.length+"/100"},i.clearListInfo=function(){for(;0<this.list.numChildren;){var t=this.list.getChildAt(0);null!=t&&t instanceof modules.friend.cross.view.CrossFriendListItem&&t.remove()}this.curItemY=10,this.list.visible=!1},i.updateList=function(t){for(var e,i=0;i<t.length;i++)(e=sD.getOne()).y=this.curItemY,e.dataSource=t[i],e.update(),this.curItemY+=e.height+10,this.list.addChild(e),e.on("FriendListItem.spBlack.click",this,this.itemBlackImgClick);this.list.refresh()},i.itemBlackImgClick=function(t){this.hideActionBtn()},I(0,i,"uiClass",function(){return"FriendListView"}),e}(),oD=function(t){function e(){e.__super.call(this),this.list.itemRender=iD,this.list.scrollBar.autoHide=!0}w(e,"modules.friend.box.view.FriendBoxHelpView",Vy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.update=function(){this.list.dataSource=Wn.getHelpListDatas()},e}(),aD=function(t){function e(){this._data=null,this.goodsImage=null,e.__super.call(this),this.btn.on("click",this,this.onClick),this.goodsImage=Me.createGoodsImage(0,0,null,this),this.goodsImage.pos(10,15)}w(e,"modules.friend.box.view.FriendBoxRefreshItem",t);var i=e.prototype;return i.update=function(){var t=this._data,e=Wn.getBoxVOById(t.val),i=ur.getItem(e.typeId);i.tempNum=1,this.goodsImage.data=i,this.txtName.text=i.name,this.txtName.color=U.getColorLight(i.color),this.txtDesc.text=i.desc,this.txtTime.text=x.formatTime(e.time);var s=Wn.getSeekCost();0<s?(this.txtCost.text=s.toString(),this.txtCost.visible=!0,this.imgGold.visible=!0,this.btn.label="探寻"):(this.txtCost.visible=!1,this.imgGold.visible=!1,this.btn.label="免费探寻")},i.onClick=function(t){var e=Wn.getSeekCost();pe.gold>=e?Gl.getInstance().toBuy(this._data.id):Lo.showAlert()},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(By),lD=function(t){function e(){this._data=null,this.goodsItem=null,e.__super.call(this),this.goodsItem=new Ah(91,91,!1,!0,!0,!1),this.goodsItem.pos(10,10),this.addChild(this.goodsItem),this.btn.on("click",this,this.onClick)}w(e,"modules.friend.box.view.FriendBoxSeekItem",t);var i=e.prototype;return i.onClick=function(t){if("寻求帮助"==this.btn.label){var e=Wn.getBoxVOById(this._data.type_id),i=ur.getItem(e.typeId),s="";s+=pe.roleName+"在仙缘宝盒探寻到"+Z.span(i.name,U.getColorLight(i.color)),s+="，协助他解锁一起获得奖励吧！"+Z.linkcolor("【添加好友】","friendRequest#11503#"+pe.roleID+"#"+pe.roleName,!0,"27b306"),Za.ins().toSendMsg(1e4,s,8)}else"开启"==this.btn.label&&Gl.getInstance().toReward(1,this._data.id)},i.update=function(){var t=this._data,e=Wn.getBoxVOById(t.type_id);this.goodsItem.dataSource=[e.typeId,1];var i="";if(i=""==t.help_role_name?"#b60202":"#5d3924",this.txtHelper.color=i,""==t.help_role_name)this.txtHelper.text="帮助者：暂缺";else{var s=t.help_role_name.split("区-");this.txtHelper.text=s[1]}if(0==t.state)this.btn.skin="com/ui/btn_small1.png",this.btn.label="寻求帮助",this.btn.disabled=!1,this.txtTime.text=x.formatTime(e.time),this.imgTime.skin="modules/friend/imgLock.png",this.imgTime.y=166;else if(this.btn.skin="com/ui/btn_small.png",0<t.finish_ts&&t.finish_ts<=ya.serverTime||2==t.state)this.txtTime.text="00:00:00",this.btn.disabled=!1,this.btn.label="开启",this.imgTime.skin="modules/friend/imgTime.png",this.imgTime.y=170;else{var n=t.finish_ts-ya.serverTime;this.txtTime.text=x.formatTime(n),this.btn.label="解锁中",this.btn.disabled=!0,this.imgTime.skin="modules/friend/imgTime.png",this.imgTime.y=170}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(My),rD=function(t){function e(){this.completeHanlder=null,e.__super.call(this),this.list1.itemRender=aD,this.list2.itemRender=lD,this.on("click",this,this.onClick),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.txtTip.style.align="center",this.on("undisplay",this,this.onUndisplay)}w(e,"modules.friend.box.view.FriendBoxSeekView",Fy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onUndisplay=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.btnRefresh:var e=Wn.getRefreshTimes(),i=Wn.getRefreshCost(e);pe.gold>=i?Gl.getInstance().toRefresh():Lo.showAlert()}},i.turnLeft=function(){var t=this.list2.startIndex-this.list2.repeatX;t=t<0?0:t,this.list2.tweenTo(t,200,this.completeHanlder)},i.turnRight=function(){var t=this.list2.startIndex+this.list2.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list2.tweenTo(t,200,this.completeHanlder)},i.checkBtnVisible=function(){this.btnLeft.visible=0<this.list2.startIndex,this.btnRight.visible=this.list2.startIndex<this.endFirstIndex},i.update=function(){var t=Wn.getRefreshDatas();this.list1.dataSource=t;var e=Wn.getSearchDatas();this.list2.dataSource=e,0<t.length?this.txtTip1.visible=!1:this.txtTip1.visible=!0,0<e.length?this.txtTip2.visible=!1:this.txtTip2.visible=!0;var i=Wn.getRefreshTimes();this.txtRefreshCost.text=Wn.getRefreshCost(i).toString();var s=jn.friendBaseVO.seekBoxMax-Wn.getCurrSeekNum(),n=0<s?"#96f254":"#b60202";this.txtTip.innerHTML=Z.span("探寻宝盒后，需要好友的帮助才能解锁（剩余次数","#f4f1b2")+Z.span(s+"",n)+Z.span("）","#f4f1b2");var o=Wn.getRefreshTime()-ya.serverTime;0<o?(_t.addToSecond(this,this.loopTime),this.txtTime.text=x.formatHMS(o)):(this.txtTime.text="",_t.removeFromSceond(this,this.loopTime))},i.loopTime=function(){var t=Wn.getRefreshTime()-ya.serverTime;0<t?this.txtTime.text=x.formatTime(t):(this.txtTime.text="",_t.removeFromSceond(this,this.loopTime))},I(0,i,"endFirstIndex",function(){var t=Wn.getSearchDatas();return t?t.length-this.list2.repeatX:0}),e}(),hD=function(t){function e(){this.seekView=null,this.helpView=null,this.currView=null,e.__super.call(this),this.tab.selectHandler=new Q(this,this.onTabChange),this.tab.selectedIndex=0}w(e,"modules.friend.box.view.FriendBoxView",Uy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onTabChange=function(t){switch(this.spView.removeChildren(),t){case 0:this.seekView=this.seekView||new rD,this.currView=this.seekView;break;case 1:this.helpView=this.helpView||new oD,this.currView=this.helpView,Gl.getInstance().toInfo(2)}this.spView.addChild(this.currView),this.currView.update()},i.update=function(){this.currView&&this.currView.update()},i.setTabIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t},e}(),uD=function(t){function e(){this._type=0,this._num=0,this.curLeft=0,this.curLeftArr=null,this.nowSelNum=0,this._goodsArr=null,this.packItemArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onMouseDown)}w(e,"modules.pack.meltView.SelectMeltingView",c_);var i=e.prototype;return i.setType=function(t,e){void 0===t&&(t=0),void 0===e&&(e=9),this._type=t,this._num=e},i.setLeft=function(t){this.curLeftArr=t||[],this.curLeft=this._num-this.curLeftArr.length,this.nowSelNum=0},i.onMouseDown=function(t){switch(t.target){case this.btnClose:case this.closeBtn:this.closeWindow();break;case this.btnY:this.addEquip();break;default:if(t.target instanceof modules.pack.meltView.SelectMeltItem){var e=t.target;1==e.sel?(--this.nowSelNum,e.sel=!1):(++this.nowSelNum,e.sel=!0),this.txtSelNum.text=this._num-this.curLeft+this.nowSelNum+" / "+this._num}this.nowSelNum==this.curLeft&&this.addEquip()}},i.addEquip=function(){var t,e,i=[];for(e in this.packItemArr)(t=this.packItemArr[e]).goods&&t.sel&&t.parent&&i.push(t.goods.id);T.dispatch("ADD_MELTEQUIP",i),this.closeWindow()},i.updateGoods=function(){if(this.clearAllItem(),this.txtSelNum.text=this.curLeftArr.length+" / "+this._num,this._goodsArr=xo.getSelEquip(this.curLeftArr,this._type),this._goodsArr.sort(this.equipSortFun),this._goodsArr&&0<this._goodsArr.length){this.packItemArr=this.packItemArr||[];for(var t=this._goodsArr.length,e=0;e<t;e++){this.packItemArr[e]=this.packItemArr[e]||new LV;var i=this.packItemArr[e];i.goods=this._goodsArr[e],i.sel=!1;var s=e,n=s%3,o=Math.floor(s/3);this.packItemArr[e].x=n*(i.width+20),this.packItemArr[e].y=o*(i.height+20),this.panelSel.addChild(i)}}},i.equipSortFun=function(t,e){var i=ur.getItem(t.typeid).basePow,s=ur.getItem(e.typeid).basePow;if(t.equip_info.extra_attrs&&0<t.equip_info.extra_attrs.length){var n=t.equip_info.extra_attrs;i+=W.getAddExtraPower(n)}return e.equip_info.extra_attrs&&0<e.equip_info.extra_attrs.length&&(n=e.equip_info.extra_attrs,s+=W.getAddExtraPower(n)),i<s?-1:s<i?1:0},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},i.openWindow=function(t,e){void 0===e&&(e=!1),this._goodsArr=xo.getSelEquip(this.curLeftArr,this._type),this._goodsArr&&0<this._goodsArr.length?(laya.ui.View.prototype.openWindow.call(this),this.parent&&this.updateGoods()):Jt.addTip("当前没有可熔炼的装备")},e}(),cD=function(t){function e(){this.curData=null,e.__super.call(this),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.friend.flower.view.FlowerReceiveIcon",Gy);var i=e.prototype;return i.onRemove=function(){Hl.ins().checkClean()},i.show=function(){this.parent||(lt.uiLayer.addChild(this),this.update())},i.checkHide=function(t){this.curData&&this.curData.id==t&&(this.curData=null,this.update())},i.update=function(){if(this.curData=Xn.getOneReceiveFlower(),this.curData){var t=this.curData.item_id;-1!=Xn.zongziIDs.indexOf(t)?this.icomImg.skin="modules/sendFlower/getZongziIcon.png":-1!=Xn.flowerIDs.indexOf(t)?this.icomImg.skin="modules/sendFlower/getFlowerIcon.png":-1!=Xn.lightIDs.indexOf(t)?this.icomImg.skin="modules/sendFlower/getWishIcon.png":-1!=Xn.magpieIDs.indexOf(t)&&(this.icomImg.skin="modules/sendFlower/getConfessionIcon.png")}else this.removeSelf()},i.onClick=function(t){this.curData&&Hl.ins().openReceivePanel(this.curData)},e.ins=function(){return e._ins=e._ins||new e},e._ins=null,e}(),dD=function(t){function e(){this.curData=null,this.isZongzi=!1,this.isLight=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8",!1,"",!1),this.html.style.valign="top",this.html.style.letterSpacing=2,this.html.style.leading=20,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.friend.flower.view.FlowerReceivePanel",Hy);var i=e.prototype;return i.onDisplay=function(){this.once("undisplay",this,this.onRemove),this.update()},i.onRemove=function(){this.curData&&Hl.ins().toReceive(this.curData.id),Hl.ins().checkClean()},i.update=function(){if(this.curData){var t=ur.getItem(this.curData.item_id);t&&(this.html.innerHTML=Z.span(""==this.curData.send_role_name?"神秘人":this.curData.send_role_name,"#037ae0")+Z.span("被你的魅力所倾倒，送上了","#a22004")+Z.span(t.name+"×"+this.curData.num,U.getColorLight(t.color))+Z.span("，无比幸福的你要怎么感谢ta呢？","#a22004")),-1!=Xn.flowerIDs.indexOf(this.curData.item_id)?(this.isZongzi=!1,this.isLight=!1,this.html.pos(111,83),this.btnClose.pos(630,80),this.btnClose.skin="modules/sendFlower/btnClose.png",this.btnClose.stateNum=2,this.bg.skin="modules/sendFlower/bg.png",this.btnTalk.visible=this.btnReceive.visible=this.btnKiss.visible=this.curData.send_role_id!=pe.roleID,this.btnTalk.y=this.btnReceive.y=253,this.btnTalk.x=149,this.btnKiss.pos(278,336)):-1!=Xn.zongziIDs.indexOf(this.curData.item_id)?(this.isZongzi=!0,this.isLight=!1,this.html.pos(91,303),this.btnClose.pos(534,37),this.btnClose.skin="modules/sendFlower/btnClose.png",this.btnClose.stateNum=2,this.bg.skin="modules/sendFlower/bg_zongzi.png",this.btnTalk.visible=this.btnKiss.visible=this.curData.send_role_id!=pe.roleID,this.btnTalk.y=this.btnReceive.y=423,this.btnKiss.pos(368,423),this.btnTalk.x=149,this.btnReceive.visible=!1):-1!=Xn.lightIDs.indexOf(this.curData.item_id)?(this.isZongzi=!1,this.isLight=!0,this.html.pos(111,223),this.btnClose.pos(539,79),this.btnClose.skin="modules/sendFlower/btnClose_qixi.png",this.btnClose.stateNum=1,this.bg.skin="modules/sendFlower/bg_qixi.png",this.btnTalk.visible=this.btnKiss.visible=this.curData.send_role_id!=pe.roleID,this.btnTalk.y=this.btnReceive.y=423,this.btnKiss.pos(398,423),this.btnTalk.x=179,this.btnReceive.visible=!1):-1!=Xn.magpieIDs.indexOf(this.curData.item_id)&&(this.isZongzi=!1,this.isLight=!0,this.html.pos(91,203),this.btnClose.pos(520,90),this.btnClose.skin="modules/sendFlower/btnClose_qixi.png",this.btnClose.stateNum=1,this.bg.skin="modules/sendFlower/bg_xique.png",this.btnTalk.visible=this.btnKiss.visible=this.curData.send_role_id!=pe.roleID,this.btnTalk.y=this.btnReceive.y=423,this.btnKiss.pos(350,423),this.btnTalk.x=179,this.btnReceive.visible=!1)}},i.onClick=function(t){switch(t.target){case this.btnTalk:this.curData&&(ws.curPrivateChatRoleId=this.curData.send_role_id,ws.updatePrivateChats(this.curData.send_role_id),T.dispatch("FRIEND_OPEN_PRIVATE_PANEL",this.curData.send_role_id),this.closeWindow());break;case this.btnReceive:if(this.curData){var e=jn.getFriendByRoleId(this.curData.send_role_id);e?(-1!=Xn.flowerIDs.indexOf(this.curData.item_id)?Hl.ins().openSendPanel(e):Xn.zongziIDs.indexOf(this.curData.item_id),this.closeWindow()):Jt.addTip("没有该好友")}break;case this.btnKiss:this.curData&&(this.isZongzi?Za.ins().toInPairs(this.curData.send_role_id,"谢谢你的礼物哟##13",2):this.isLight?Za.ins().toInPairs(this.curData.send_role_id,"谢谢你的华灯哦##13",2):Za.ins().toInPairs(this.curData.send_role_id,"谢谢你的鲜花哦##13",2),Jt.addTip("回吻成功，对方已经收到你的心意了哦！"),this.closeWindow());break;case this.btnClose:this.closeWindow()}},I(0,i,"data",null,function(t){this.curData=t,this.update()}),e}(),pD=function(t){function e(){this.flowerNums=[1,9,99,999,1314],this.curP=null,this._sendType=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8",!1,"",!1),this.numInput.restrict="0-9",this.numInput.on("change",this,this.onNumChange),this.numInput.on("input",this,this.onNumChange),this.cbName.list.vScrollBarSkin="com/ui/vscroll.png",this.cbName.list.scrollBar.autoHide=!0,this.cbName.on("change",this,this.onNameChange),this.cbFlower.on("change",this,this.onFlowerChange),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove),this.on("display",this,this.onAdd)}w(e,"modules.friend.flower.view.FlowerSendPanel",Wy);var i=e.prototype;return i.onAdd=function(){this.wordInput.text="",this.numInput.text="1",this.cbName.labels=Xn.getFriendNames(),this.update()},i.onNumChange=function(t){1!=this._sendType&&2!=this._sendType&&3!=this._sendType?this.txtAddInfo.text="增加"+this.flowerNums[this.cbFlower.selectedIndex]*parseInt(this.numInput.text)+"点好感度":this.txtAddInfo.text=""},i.onNameChange=function(t){this.pFriend=Xn.getPFriendByIndex(this.cbName.selectedIndex),this.cbName.selectedLabel==pe.roleName?(this.imgTip.visible=!0,this.txtAddInfo.visible=!1):(this.imgTip.visible=!1,this.txtAddInfo.visible=0==this._sendType)},i.onFlowerChange=function(t){1!=this._sendType&&2!=this._sendType&&3!=this._sendType&&this.updateInputWord()},i.updateInputWord=function(){this.wordInput.text="",0==this._sendType?(this.cbFlower.selectedIndex==Xn.flowerIDs.length-1?(this.wordInput.prompt="赠言最多可输入20个字喔！",this.wordInput.mouseEnabled=this.wordInput.editable=!0):(this.wordInput.prompt="1314朵蓝玫瑰才可编辑赠言",this.wordInput.mouseEnabled=this.wordInput.editable=!1),this.txtAddInfo.visible=!0,this.txtAddInfo.text="增加"+this.flowerNums[this.cbFlower.selectedIndex]*parseInt(this.numInput.text)+"点好感度"):(this.wordInput.prompt="无法进行赠言操作",this.wordInput.mouseEnabled=this.wordInput.editable=!1,this.txtAddInfo.visible=!1)},i.onRemove=function(){Hl.ins().checkClean()},i.onClick=function(t){var e=this;""==this.numInput.text&&(this.numInput.text="1");var i=parseInt(this.numInput.text);switch(t.target){case this.btnAdd:this.numInput.text=i+1+"";break;case this.btnSub:this.numInput.text=Math.max(i-1,1)+"";break;case this.btnSend:if(!j.checkHtmlStrRule(this.wordInput.text))return void Jt.addTip("编辑内容含非法字符");if(0==this._sendType){var s=Xn.flowerIDs[this.cbFlower.selectedIndex],n=xo.getGoodsNumByType(xo.GOODS_ID,s),o=this.pFriend?this.pFriend.role_id:pe.roleID;i<=n?Hl.ins().toSend(o,s,i,this.wordInput.text,0==this.radio.selectedIndex):SF.ins.show(s,2,0,10001,null,null,i-n,function(){Hl.ins().toSend(o,s,i,e.wordInput.text,0==e.radio.selectedIndex),e.closeWindow()},this)}else if(1==this._sendType){var a=Xn.zongziIDs[this.cbFlower.selectedIndex],l=xo.getGoodsNumByType(xo.GOODS_ID,a),r=this.pFriend?this.pFriend.role_id:pe.roleID;i<=l?Hl.ins().toSend(r,a,i,this.wordInput.text,0==this.radio.selectedIndex):SF.ins.show(a,2,0,10,null,null,i-l,function(){Hl.ins().toSend(r,a,i,e.wordInput.text,0==e.radio.selectedIndex),e.closeWindow()},this)}else if(2==this._sendType){var h=Xn.lightIDs[this.cbFlower.selectedIndex],u=xo.getGoodsNumByType(xo.GOODS_ID,h),c=this.pFriend?this.pFriend.role_id:pe.roleID;i<=u?Hl.ins().toSend(c,h,i,this.wordInput.text,0==this.radio.selectedIndex):SF.ins.show(h,2,0,10,null,null,i-u,function(){Hl.ins().toSend(c,h,i,e.wordInput.text,0==e.radio.selectedIndex),e.closeWindow()},this)}else if(3==this._sendType){var d=Xn.magpieIDs[this.cbFlower.selectedIndex],p=xo.getGoodsNumByType(xo.GOODS_ID,d),m=this.pFriend?this.pFriend.role_id:pe.roleID;i<=p?Hl.ins().toSend(m,d,i,this.wordInput.text,0==this.radio.selectedIndex):SF.ins.show(d,2,0,10,null,null,i-p,function(){Hl.ins().toSend(m,d,i,e.wordInput.text,0==e.radio.selectedIndex),e.closeWindow()},this)}break;case this.btnClose:this.closeWindow()}},i.setCbFlowerLables=function(t){var e,i,s,n=[];switch(t){case 1:n=Xn.zongziIDs;break;case 0:n=Xn.flowerIDs;break;case 2:n=Xn.lightIDs;break;case 3:n=Xn.magpieIDs}for(var o in n)s=n[o],(i=ur.getItem(s))&&(e=e||[]).push(i.name);e&&(this.cbFlower.labels=e.join(","))},i.update=function(){switch(this._sendType){case 0:this.bg.skin="modules/sendFlower/bg.png",this.bg.y=0,this.btnClose.skin="modules/sendFlower/btnClose.png",this.btnClose.pos(630,124),this.btnClose.stateNum=2,this.contxtBox.pos(106,33),this.sendWhoTxt.text="收花人:",this.radio.labels="匿名送花,签名送花",this.imgTip.visible=!0,this.imgTip.width=262,this.btnSend.label="送花",this.tipTxt.text="给自己送花不增加好感度哦";break;case 1:this.bg.skin="modules/sendFlower/bg_zongzi.png",this.bg.y=0,this.btnClose.skin="modules/sendFlower/btnClose.png",this.btnClose.pos(530,78),this.btnClose.stateNum=2,this.contxtBox.pos(96,198),this.sendWhoTxt.text="收粽人:",this.radio.labels="匿名送粽,签名送粽",this.imgTip.visible=!0,this.imgTip.width=275,this.btnSend.label="送粽",this.tipTxt.text="给自己送粽子不增加好感度哦";break;case 2:this.contxtBox.pos(106,33),this.bg.skin="modules/sendFlower/bg_qixi.png",this.bg.y=-120,this.btnClose.skin="modules/sendFlower/btnClose_qixi.png",this.btnClose.stateNum=1,this.btnClose.pos(550,54),this.sendWhoTxt.text="爱慕人:",this.radio.labels="匿名送华灯,签名送华灯",this.imgTip.visible=!0,this.imgTip.width=275,this.btnSend.label="送华灯",this.tipTxt.text="给自己送华灯不增加好感度哦";break;case 3:this.bg.skin="modules/sendFlower/bg_xique.png",this.bg.y=0,this.btnClose.skin="modules/sendFlower/btnClose_qixi.png",this.btnClose.stateNum=1,this.btnClose.pos(520,90),this.btnClose.stateNum=2,this.contxtBox.pos(78,119),this.sendWhoTxt.text="爱慕人:",this.radio.labels="匿名送礼盒,签名送礼盒",this.imgTip.visible=!0,this.imgTip.width=262,this.btnSend.label="送礼盒",this.tipTxt.text="给自己送花不增加好感度哦"}if(this.updateInputWord(),this.pFriend)var t=Xn.getFriendIndex(this.pFriend.role_id);else t=jn.friends.length;this.cbName.selectedIndex=-1==t?0:t},I(0,i,"flowerID",null,function(t){var e=0;switch(this._sendType){case 1:this.cbFlower.mouseEnabled=!1,e=Xn.zongziIDs.indexOf(t);break;case 0:this.cbFlower.mouseEnabled=!0,e=Xn.flowerIDs.indexOf(t);break;case 2:this.cbFlower.mouseEnabled=!1,e=Xn.lightIDs.indexOf(t);break;case 3:this.cbFlower.mouseEnabled=!1,e=Xn.magpieIDs.indexOf(t)}this.cbFlower.selectedIndex=-1!=e?e:0}),I(0,i,"pFriend",function(){return this.curP},function(t){this.curP=t}),I(0,i,"sendType",null,function(t){this._sendType=t,this.setCbFlowerLables(t)}),e}(),mD=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnBack.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow),this.btnGet.on("click",this,this.onGet),this.txtContent.style.lineHeight=35,this.txtContent.style.fontSize=24,this.txtContent.style.color="#5d3924",this.txtContent.on("link",this,this.onLink)}w(e,"modules.friend.gift.view.FriendLetterDetailPanel",qy);var i=e.prototype;return i.onGet=function(t){Qn.currFriendGive&&(Qn.canGetLetters=[Qn.currFriendGive],Qn.canGetLetterLen=1,ql.getInstance().toGiveGet(Qn.currFriendGive.id),ql.getInstance().toGive(Qn.currFriendGive.role_id),this.closeWindow())},i.onLink=function(t){if("string"==typeof t){var e=String(t).split("#");if(e&&2<=e.length){var i=parseInt(e[1]);0<i&&me.linkTo(i)}}},i.update=function(){if(Qn.currFriendGive){this.updateInfo();var t=jn.getGiftTypeVOByType(Qn.currFriendGive.type);this.updateRewards(t.rewardGoods)}},i.updateInfo=function(){this.txtContent.innerHTML=Z.font(Qn.getLetterDetailByType(Qn.currFriendGive.type),"#5d3924"),this.txtTitle.text=Qn.getLetterTitleByRoleId(Qn.currFriendGive.role_name,Qn.currFriendGive.type)},i.updateRewards=function(t){for(;0<this.spAttachment.numChildren;)this.spAttachment.removeChildAt(0);for(var e,i,s=0;s<t.length;s++)i=t[s],(e=new Ah(91,100,!1,!0,!0)).x=106*s-30,this.spAttachment.addChild(e),e.dataSource=[i.typeid,i.num]},e}(),fD=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.friend.gift.view.FriendLetterItem",t);var i=e.prototype;return i.onClick=function(t){this._data&&(Qn.currFriendGive=this._data,ql.getInstance().openDetailPanel())},i.update=function(){this._data&&(this.txtTitle.text=Qn.getLetterTitleByRoleId(this._data.role_name,this._data.type),this.txtTime.text=x.format(this._data.give_ts))},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(Yy),_D=function(t){function e(){e.__super.call(this),this.list.itemRender=fD,this.list.scrollBar.autoHide=!0,this.btnGetAll.on("click",this,this.onClick)}w(e,"modules.friend.gift.view.FriendLetterView",Xy);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){if(0<Qn.getList.length){var e,i=Qn.getCanGetLetters();if(Qn.canGetLetters=i,Qn.canGetLetterLen=i.length,0<i.length)for(var s in i)e=i[s],ql.getInstance().toGiveGet(e.id),ql.getInstance().toGive(e.role_id);else Jt.addTip("每日最多领取5次每日赠礼，请明天再来")}else Jt.addTip("当前没有可领取的赠礼")},i.update=function(){Qn.getList&&0<Qn.getList.length?(this.list.dataSource=Qn.getList,this.list.visible=!0):this.list.visible=!1},e}(),gD=function(t){function e(){this.friendView=null,this.letterView=null,this.boxView=null,this.marryView=null,this.curView=null,this.crossFriendView=null,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick),this.tab.selectHandler=new Q(this,this.onTabChange),this.on("display",this,this.onDisplay),Bt.isZKPf9991Server()&&(this.title.skin="modules/friend/title2.png")}w(e,"modules.friend.view.FriendPanel",Ky);var i=e.prototype;return i.onDisplay=function(){var t=[];t=Xs.isCrossOpen?Kn.FRIEND_TAB_ITEM_CROSS_LABELS:Kn.FRIEND_TAB_ITEM_LOCAL_LABELS;var e="";for(var i in t)e+=t[i]+",";e=e.substring(0,e.length-1),this.tab.labels=e,this.tab.selectedIndex=0,Nt.register("RP_CHAT_PRIVATE_NEWS",this.tab.items[0]),Nt.register("RP_FRIEND_REQUEST",this.tab.items[0]),Nt.register("RP_FRIEND_GIFT_LETTER",this.tab.items[1]),Nt.register("RP_MARRY",this.tab.items[2]),Nt.register("RP_MARRY_ANNIVERSARY_REWARD",this.tab.items[2]),Nt.register("RP_FLOWER_FAERIE",this.tab.items[2]),Xs.isCrossOpen&&(Nt.register("RP_CHAT_PRIVATE_NEWS_CROSS",this.tab.items[3]),Nt.register("RP_FRIEND_REQUEST_CROSS",this.tab.items[3])),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.tab.selectedIndex=-1,jn.friendPanelTabCurIndex=-1},i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;default:this.friendView&&this.curView==this.friendView&&!this.friendView.contains(t.target)&&this.friendView.hideActionBtn(),this.crossFriendView&&this.curView==this.crossFriendView&&!this.crossFriendView.contains(t.target)&&this.crossFriendView.hideActionBtn()}},i.onTabChange=function(t){if(!Bt.isKeYi_9991()||2!=t){switch(jn.friendPanelTabCurIndex=t,this.spView.removeChild(this.curView),t){case 0:this.friendView=this.friendView||new ZL,this.curView=this.friendView,Wl.ins().toInfo(1,1),Wl.ins().toInfo(3,1);break;case 1:this.letterView=this.letterView||new _D,this.curView=this.letterView,ql.getInstance().toGiveInfo(2);break;case 2:if(0==se.has("modules/marry"))return void se.add("modules/marry","正在加载结缘资源",this,this.onTabChange,[t]);this.marryView=this.marryView||new $N,this.curView=this.marryView,sr.ins().toInfo(),Nt.hide("RP_MARRY"),fo.checkAnniversaryRewardRP();break;case 3:this.crossFriendView=this.crossFriendView||new nD,this.curView=this.crossFriendView,Wl.ins().toInfo(1,2),Wl.ins().toInfo(3,2);break;case 4:this.boxView=this.boxView||new hD,this.curView=this.boxView,this.boxView.setTabIndex(),Gl.getInstance().toInfo(1)}this.spView.addChild(this.curView),this.curView.update()}},i.update=function(){this.curView&&this.curView.update()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.tab.selectedIndex=0,jn.friendPanelTabCurIndex=0},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),yD=function(t){function e(){this.startX=10,this.startY=10,this.hGap=240,this.vGap=46,this.col=6,this.allKind=null,this.tip=null,this.paramGmCodeRowList=[],this.paramPostionList=[],e.__super.call(this),this.initView(),this.tip=new dh,this.panel.vScrollBarSkin="",this.cacheAsBitmap=!0}w(e,"modules.gm.view.GMCommandView",jy);var i=e.prototype;return i.initView=function(){this.allKind=Ra.startEncode("gmHelper.xml");for(var t=0;t<this.allKind.length;t++){var e=Me.createText(this.allKind[t].name,this.startX,this.startY,this.hGap,20,this.panel);2<t&&(e.x-=720,e.y+=460),e.fontSize=26,e.color="#333333",e.align="center";var i=this.allKind[t];if(i.KindItemArr)for(var s=0;s<i.KindItemArr.length;s++){var n,o=i.KindItemArr[s];"1"==String(o.id).slice(0,1)?(n=this.newNoParamButton(o.label,o.code,o.tooltip)).x=this.startX+104:(n=this.newOneParamGmCodeRow(o.label,o.code,o.parm,o.tooltip)).x=this.startX,n.y=this.startY+(s+1)*this.vGap,2<t&&(n.x-=720,n.y+=460);var a={x:n.x,y:n.y};this.paramPostionList.push(a)}this.startX+=this.hGap}},i.newNoParamButton=function(t,e,i){var s=Me.createButton(t,0,0,132,42,this.panel);return s.labelSize=22,s.labelColors="#333333",s.data=e,s.on("click",this,this.onClickBtn),s.on("mouseover",this,this._$7_onMouseOver,[s,i]),s.on("mouseout",this,this._$7_onMouseOut),this.paramGmCodeRowList.push(s),s},i._$7_onMouseOver=function(t,e){var i=t.localToGlobal(new Tt(0,0)).y;this.tip.show(e,this,t.x+t.width,i)},i._$7_onMouseOut=function(){this.tip.removeSelf()},i.onClickBtn=function(t){var e=t.target.data,i=new Object;i.className="m_chat_in_channel_tos",i.channel=1e4,i.msg=e,i.msg_type=1,v.send(i)},i.newOneParamGmCodeRow=function(t,e,i,s){var n=new xD;return n.init(t,e,i,s),n.btn.on("mouseover",this,this._$7_onMouseOver,[n,s]),n.btn.on("mouseout",this,this._$7_onMouseOut),this.paramGmCodeRowList.push(n),this.panel.addChild(n),n},i.updateParamGMCodeRow=function(t){var e=[];if(""!=t){for(var i=0;i<this.paramGmCodeRowList.length;i++){this.paramGmCodeRowList[i].visible=!1;-1!=(this.paramGmCodeRowList[i]instanceof modules.gm.view.item.GMCodeOneRow?this.paramGmCodeRowList[i].btn.label:this.paramGmCodeRowList[i].label).indexOf(t)&&e.push(this.paramGmCodeRowList[i])}for(i=0;i<e.length;i++)e[i].x=0,e[i].y=this.startY+(i+1)*this.vGap,e[i].visible=!0}else this.initParamPosition()},i.initParamPosition=function(){console.log("测试位置方向",this.paramPostionList);for(var t=0;t<this.paramGmCodeRowList.length;t++){this.paramGmCodeRowList[t].visible=!0;var e=this.paramPostionList[t];this.paramGmCodeRowList[t].x=e.x,this.paramGmCodeRowList[t].y=e.y}},I(0,i,"uiClass",function(){return"GMCommand"}),e}(),vD=(function(t){function n(){n.__super.call(this),n.index=["ALL","RES","OTHER"],this.radio.on("change",this,this.onChange),this.btnClear.on("click",this,this.onClick),this.btnUpdate.on("click",this,this.onChange),this.btnLast.on("click",this,this.onClickLastVO),this.on("display",this,this.onDisplay)}w(n,"modules.gm.view.GMDebugInfo",Qy);var e=n.prototype;e.onClickLastVO=function(){null!=v.lastVO&&v.send(v.lastVO)},e.onDisplay=function(){this.onChange()},e.onClick=function(){this.txt.text="",zn.clearDebugInfo()},e.onChange=function(){var t=n.index[this.radio.selectedIndex],e=zn.getDebugInfo(t),i="";if(null!=e)for(var s=0;s<e.length;s++)i+=e[s]+"\n";this.txt.text=i,this.txt.height=this.txt.textHeight,this.panel.refresh()},I(0,e,"uiClass",function(){return"GmDebugInfo"}),n.index=null}(),function(t){function n(){n.__super.call(this),n.index=["ALL","RES","OTHER"],this.radio.on("change",this,this.onChange),this.btnClear.on("click",this,this.onClick),this.btnUpdate.on("click",this,this.onChange),this.btnLast.on("click",this,this.onClickLastVO),this.on("display",this,this.onDisplay)}w(n,"modules.gm.view.GMDebugInfoView",Qy);var e=n.prototype;return e.onClickLastVO=function(){null!=v.lastVO&&v.send(v.lastVO)},e.onDisplay=function(){this.onChange()},e.onClick=function(){this.txt.text="",zn.clearDebugInfo()},e.onChange=function(){var t=n.index[this.radio.selectedIndex],e=zn.getDebugInfo(t),i="";if(null!=e)for(var s=0;s<e.length;s++)i+=e[s]+"\n";this.txt.text=i,this.txt.height=this.txt.textHeight,this.panel.refresh()},I(0,e,"uiClass",function(){return"GmDebugInfo"}),n.index=null,n}()),ID=function(t){function e(){this.initHie=!1,e.__super.call(this),this.initView()}w(e,"modules.gm.view.GMGameDataView",zy);var i=e.prototype;return i.initView=function(){this.txtParameters.text="登录参数\ngamevars.account="+G.openId+"\ngamevars.asset="+G.asset+"\ngamevars.server="+G.server+"\ngamevars.v="+G.clientVersion+"\ngamevars.agent="+G.agent+"\ngamevars.agentId="+G.agentId+"\ngamevars.pf="+G.pf+"\ngamevars.serverID="+G.serverId+"\ngamevars.isDiv="+G.isDev+"\ngamevars.ex_shareRoleId="+G.getExtParm("shareRoleId")+"\ngamevars.gift="+G.gift+"\ngamevars.createRoleVersion="+G.createRoleVersion+"\nhref="+S.window.location.href+"\n\n"+pe.fullVersion,this.txtUser.text=S.userAgent,this.btnFPS.on("click",this,this.onFPS),this.btnShowUI.on("click",this,this.onHierarchy2D),this.btnShowTile.on("click",this,this.onShowTile),this.btnSend.on("click",this,this.onSend),this.btnSound.on("click",this,this.onSound),this.btnFrame.on("click",this,this.onFrame),this.btnScreen.on("click",this,this.onScreen),this.btnDebug.on("click",this,this.onDebug),this.btnRole.on("click",this,this.onOpenRole),this.on("display",this,this.onDisplay),this.stage.on("undisplay",this,this.onUnDisplay)},i.onDebug=function(){var t=new Object;t.className="m_client_dev_tos",t.command=1,v.send(t)},i.onDisplay=function(){_t.addToSecond(this,this.onSecond)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.onSecond)},i.onSecond=function(){this.txtTime.text=x.format(ya.serverTime),this.updateNum()},i.onScreen=function(){Bt.sdk.setScreen()},i.onFrame=function(){"slow"==h.stage.frameRate?(h.stage.frameRate="fast",this.btnFrame.label="帧频30"):(h.stage.frameRate="slow",this.btnFrame.label="帧频60")},i.onSound=function(){Ht.muted=!Ht.muted},i.onFPS=function(){qt.show()},i.onSend=function(){Yl.ins().toSendChat(this.txtInputSend.text)},i.onShowTile=function(){_e.drawTile()},i.onOpenRole=function(){me.linkTo(11205),T.dispatch("DEBUG_INFO",S.clientWidth+","+S.clientHeight+","+S.pixelRatio,"OTHER")},i.onHierarchy2D=function(){0==this.initHie&&(z.getInstance().registerStage(h.stage),this.initHie=!0),z.getInstance().parent?z.getInstance().parent.removeChild(z.getInstance()):h.stage.addChild(z.getInstance())},i.updateNum=function(){WS.main&&WS.main.curAct&&(this.txtScene.text="场景数据\n地图ID："+ca.mapID+"\n人物："+Se.roleNUM+"   池："+xe.RolePoolNum+"\n怪物："+Se.monsterNUM+"   池："+xe.MonsterPoolNum,0==ua.isFamilyFightMap()&&(this.txtMyRoleInfo.text="主角数据\n角色id："+pe.roleID+"\n动作："+WS.main.curAct+"\n方向："+WS.main.curDir+"\n战斗返回："+WS.main.isAttackBack+"\n战斗目标："+WS.main.lockedTarget))},I(0,i,"uiClass",function(){return"GMGameData"}),e}(),wD=function(t){function e(){this.curView=null,this.cammandView=null,this.dataView=null,this.debugView=null,this.virtualView=null,this.resView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!1),this.cacheAs="normal",this.tabBar.selectHandler=Q.create(this,this.onTabChange),this.btnClose.on("click",this,this.onCloseWin),this.gmTitle.on("mousedown",this,this.onTitleMouseDown),this.gmTitle.on("mouseup",this,this.onTitleMouseUp),this.inputSearch.on("focus",this,this.onFocus),this.inputSearch.on("enter",this,this.updateParamGMList),this.btnSearch.on("click",this,this.onClick),this.onTabChange(0)}w(e,"modules.gm.view.GMPanel",$y);var i=e.prototype;return i.onTitleMouseDown=function(){this.startDrag()},i.onTitleMouseUp=function(){this.stopDrag()},i.onTabChange=function(t){switch(this.curView&&this.contains(this.curView)&&this.spView.removeChild(this.curView),this.btnSearch.visible=this.inputSearch.visible=0==t,t){case 0:this.cammandView=this.cammandView||new yD,this.cammandView.x=10,this.cammandView.y=-10,this.curView=this.cammandView;break;case 1:this.dataView=this.dataView||new ID,this.dataView.x=10,this.dataView.y=-50,this.curView=this.dataView;break;case 2:this.debugView=this.debugView||new vD,this.debugView.x=10,this.debugView.y=-50,this.curView=this.debugView;break;case 3:this.virtualView=this.virtualView||new SD,this.virtualView.x=10,this.virtualView.y=-50,this.curView=this.virtualView;break;case 4:this.resView=this.resView||new bD,this.resView.y=-50,this.curView=this.resView}this.curView&&null==this.curView.parent&&(this.curView.y=30,this.spView.addChild(this.curView))},i.onDebugInfo=function(){this.displayedInStage&&this.curView==this.debugView&&this.debugView.onChange()},i.onCloseWin=function(){this.closeWindow()},i.onFocus=function(t){"指令名称"==this.inputSearch.text&&(this.inputSearch.text="")},i.onClick=function(t){switch(t.target){case this.btnSearch:this.cammandView&&this.cammandView.updateParamGMCodeRow(this.inputSearch.text)}},i.updateParamGMList=function(){this.cammandView&&this.cammandView.updateParamGMCodeRow(this.inputSearch.text)},e}(),bD=function(t){function e(){this.count=0,e.__super.call(this),this.on("display",this,this.onDisplay),this.stage.on("undisplay",this,this.onUnDisplay)}w(e,"modules.gm.view.GMResView",Zy);var i=e.prototype;return i.onDisplay=function(){_t.addToSecond(this,this.onSecond),this.count=4,this.onSecond()},i.onUnDisplay=function(){_t.removeFromSceond(this,this.onSecond)},i.onSecond=function(){if(this.count++,this.count%5==0){var t=0,e=0,i=0,s=0,n=0,o=0,a=0,l=Mt.getCache(),r=Mt.getUseRecord(),h=S.now(),u="",c=0;for(var d in l){-1!=d.indexOf("role")?t++:-1!=d.indexOf("weapon")?e++:-1!=d.indexOf("wing")?i++:-1!=d.indexOf("monster")?s++:-1!=d.indexOf("effect")?n++:-1!=d.indexOf("title")?o++:-1!=d.indexOf("drop")&&a++;var p=l[d];if(null!=p&&p instanceof com.scene.data.ClipVO){u+=d;var m=r[d];if(null!=m){var f=m.useNum,_=m.lastTime;0<f?u+="  u："+f+"\n":(u+="  u："+f+"  t："+Math.round((h-_)/1e3)+"\n",18e4<h-_&&c++)}else u+="========\n"}}var g=t+e+i+s+n+o+a;this.totalTxt.text="身体："+t+"   武器："+e+"   翅膀："+i+"   怪物："+s+"   特效："+n+"\n称号："+o+"   掉落物："+a+"   总数："+g+"   可清除："+c,this.txt.text=u,this.txt.height=this.txt.textHeight,this.panel.refresh()}},I(0,i,"uiClass",function(){return"GMRes"}),e}(),SD=function(t){var l,g;function e(){this.voPart=new l("","","",null),e.__super.call(this),this.input.on("enter",this,this.onInput),this.btnClient.on("click",this,this.onClickClient),this.btnServer.on("click",this,this.onClickServer)}w(e,"modules.gm.view.GMVirtualVOView",Jy);var i=e.prototype;return i.onClickClient=function(){var t=this.getVO();null!=t&&v.dispatchMessage(t.className,t)},i.getVO=function(){var t=""+this.input.text,e=new Object;e.className=t;var i=Et.getAttrByVO(e);if(null==i||i.length<=0)return Jt.addTip("不存在的协议"),null;var s=e;return this.voPart.fillVO(s),s},i.onClickServer=function(){var t=this.getVO();null!=t&&v.send(t)},i.onInput=function(){this.createVoField()},i.createVoField=function(){for(;0<this.container.numChildren;)this.container.removeChildAt(0);var t=this.input.text+"",e=new Object;e.className=t;var i=Et.getAttrByVO(e);if(null!=i){var s=zn.getProtoVo(this.input.text);this.txtTip.text="协议作用："+(s?s.note:""),this.voPart=new l("","","",null),this.container.addChild(this.voPart);for(var n=0;n<i.length;n++){var o=i[n],a=new l(o[0],o[o.length-1],null,this.voPart,s&&s.memberObj[o[0]]?s.memberObj[o[0]].note:"");this.voPart.sons.push(a)}rt.layoutVectical2(this.voPart,12,0)}else Jt.addTip("你输入了一个不存在的协议"+t)},I(0,i,"uiClass",function(){return"GMVirtualVO"}),e.__init$=function(){l=function(t){function _(t,e,i,s,n){if(this.nameTxt=null,this.ip=null,this.father=null,this.sons=[],this.row=null,this.type=null,this.struct=0,this.depth=0,this.label=null,this.sonNum=0,_.__super.call(this),void 0===n&&(n=""),null!=s){var o,a;this.label=t,this.type=e,this.father=s,"normal"==this.type?this.depth=s.depth-1:this.depth=s.depth+1,this.x=20*this.depth,this.father.addChild(this),this.struct=this.checkStruct(this.type);var l,r,h=new Object;switch(this.struct){case 0:this.row=new g(this.label,this.type,this,n),this.sons.push(this.row);break;case 1:o=new _(this.label+":"+this.type,"normal","",this),this.sons.push(o),a=""+this.type,h.className=a,l=Et.getAttrByVO(h);for(var u=zn.getProtoVo(this.type),c=0;c<l.length;c++){var d=new _((r=l[c])[0],r[r.length-1],null,o,u&&u.memberObj[r[0]]?u.memberObj[r[0]].note:"");o.sons.push(d)}break;case 2:switch(o=new _(this.label+":"+this.type,"normal","",this),this.sons.push(o),this.checkStruct(i)){case 0:var p=new _("",i,"",o),m=new _("",i,"",o);o.sons.push(p),o.sons.push(m);break;case 1:var f=new _("",i,"",o);o.sons.push(f)}}}}w(_,"",t);var e=_.prototype;return e.checkStruct=function(t){return"array"==t?2:"p_"==t.substr(0,2)?1:0},e.getSons=function(t){for(var e=0;e<t.numChildren;e++){var i=t.getChildAt(e);h.__typeof(i,_)?this.getSons(i):this.sonNum++}},e.fillVO=function(t){for(var e,i,s=0;s<this.sons.length;s++){var n=this.sons[s];if(n.row)1==n.row.isNormal&&(e=n.row.label,i=n.row.value,"number"==typeof t[e]&&Math.floor(t[e])==t[e]||"number"==typeof t[e]?t[e]=Number(i):"boolean"==typeof t[e]?t[e]="true"==i:t[e]=i);else if(e=n.label,1==n.struct){var o=new Object;o.className=n.type,t[e]=o;var a=n.sons[0];a.sons.shift(),a.fillVO(t[e])}else if(2==n.struct){t[e]=new Array;var l=n.sons[0];l.sons.shift();for(var r=0;r<l.sons.length;r++){var h=l.sons[r];if("int"==h.type)t[e].push(int(h.row.value));else if("Number"==h.type)t[e].push(Number(h.row.value));else if("Boolean"==h.type)t[e].push(Boolean(h.row.value));else{var u=new Object;u.className=h.type;var c=u;h.sons[0].sons.shift(),h.sons[0].fillVO(c),t[e].push(c)}}}}},I(0,e,"height",function(){if(0==this.sons.length)return 20;return this.sonNum=0,this.getSons(this),1==this.struct||2==this.struct?20*this.sonNum+20:20*this.sonNum},t.prototype._$set_height),_.VD=22,_}(Wt),g=function(t){function o(t,e,i,s){if(this.nameTxt=null,this.ip=null,this.noteTxt=null,this.pureLabel=null,this.isNormal=!1,o.__super.call(this),i.addChild(this),this.pureLabel=t,this.nameTxt="normal"==e?Me.createText(t,0,0,200,30,this):""==t?Me.createText(e,0,0,200,30,this):Me.createText(t+":"+e,0,0,200,30,this),this.nameTxt.fontSize=18,this.nameTxt.color="#ffffff",this.nameTxt.valign="middle",this.noteTxt=Me.createText(s,310,0,300,30,this),this.noteTxt.fontSize=18,this.noteTxt.color="#ffffff",this.noteTxt.valign="middle",0==this.checkStruct(e)&&"normal"!=e){var n;switch(this.isNormal=!0,this.ip=Me.createTextInput(200,0,100,30,this),this.ip.align="center",this.ip.sizeGrid="5,5,5,5",this.ip.skin="com/ui/textinput2.png",this.ip.fontSize=18,this.ip.color="#ffffff",this.ip.on("mousedown",this,this.onInputMouseDown),e){case"int":case"Number":n="0";break;case"String":n="";break;case"Boolean":n="false";break;default:n=""}this.ip.text=n}}w(o,"",t);var e=o.prototype;return e.onInputMouseDown=function(){this.ip.select()},e.checkStruct=function(t){return"array"==t?2:"p_"==t.substr(0,2)?1:0},I(0,e,"value",function(){return this.ip.text}),I(0,e,"height",function(){return 20},t.prototype._$set_height),I(0,e,"label",function(){return this.pureLabel}),o}(Wt)},e}(),xD=function(t){function e(){this.code=null,e.__super.call(this)}w(e,"modules.gm.view.item.GMCodeOneRow",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},i.init=function(t,e,i,s){this.code=e,this.btn.label=t,this.input.text=i,this.btn.on("click",this,this.onClick),this.input.on("enter",this,this.onClick)},i.onKey=function(t){13==t.keyCode&&this.onClick()},i.onClick=function(){if(null!=this.input.text&&""!=this.input.text){console.log(this.input.text);var t=this.input.text.split("=");switch(this.code){case"m10_temp_fb":this.toChangeMap(t);break;case"m10_trans":this.toTransferMap(t);break;case"fuck_mission":case"fuck_item":break;case"fuck_link":me.linkTo(int(t[0]));break;default:var e=new Object;e.className="m_chat_in_channel_tos",e.channel=1e4,e.msg=this.code+this.input.text,e.msg_type=1,v.send(e)}}else Jt.addTip("请输入参数")},i.toChangeMap=function(t){},i.toTransferMap=function(t){},e}(tv),CD=function(t){function e(){this.isDack=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.btnUserInfo.label="客服调试"}w(e,"modules.gm.view.WeixinInterfaceView",ev);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnUserInfo:S.window.wx&&S.window.wx.openCustomerServiceConversation&&S.window.wx.openCustomerServiceConversation();break;case this.btnHideShareMenu:Bt.sdk.hideShareMenu();break;case this.btnShowShareMenu:Bt.sdk.showShareMenu();break;case this.btnShareAppMessage:Bt.sdk.onShareAppMessage();break;case this.btnOffShareAppMessage:Bt.sdk.offShareAppMessage();break;case this.btnShare:if(ao.getIconStateShow(4022))return void(S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"})));Bt.shareAppMessage();break;case this.btnNetwork:Bt.sdk.onNetworkStatusChange();break;case this.btnLocation:Bt.sdk.getLocation();break;case this.btnSetMenuStyle:this.showInfo("wx发过来的："+Bt.sdk.sysInfo.system+"，发给web："+Bt.os)}},i.onDisplay=function(){T.register("WXSDK_INFO_SHOW_ON_VIEW",this,this.showInfo)},i.onUnDisplay=function(){T.remove("WXSDK_INFO_SHOW_ON_VIEW",this,this.showInfo)},i.showInfo=function(t){var e="";if("object"==typeof t)for(var i in t)e+=i+":"+t[i]+"\n";else"string"==typeof t&&(e=t);this.txtArea.text=e},e}(),PD=function(t){function e(){this.attrDic=null,this.curVO=null,this.attrTxts=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnBack.on("click",this,this.closeWindow),this.tab.selectedIndex=0,this.tab.on("change",this,this.update),this.tab.itemClickFun=Q.create(this,this.checkOpen),this.tab.setItemSize(95,40),this.btnL.on("click",this,this.onChangeRoleL),this.btnR.on("click",this,this.onChangeRoleR),this.txtDesc.style.valign="top",this.txtDesc.style.leading=12,this.attrTxts=[this.txt1,this.txt2,this.txt3,this.txt4],this.pan.vScrollBar.autoHide=!0}w(e,"modules.godHood.GodHoodAttrView",iv);var i=e.prototype;return i.checkOpen=function(t){2<t?Jt.addTip("暂未开放，敬请期待"):this.tab.selectedIndex=t},i.onChangeRoleL=function(){if(this.curVO){var t=pe.pals.indexOf(this.curVO);for(--t<0&&(t=pe.pals.length-1);null==pe.pals[t];)--t;this.update(pe.pals[t])}},i.onChangeRoleR=function(){if(this.curVO){var t=pe.pals.indexOf(this.curVO);for(++t>=pe.pals.length&&(t=0);null==pe.pals[t];)++t;this.update(pe.pals[t])}},i.update=function(t){this.txtTitle.text=$n.godHoodEquipArr[this.tab.selectedIndex],t&&(this.curVO=t),this.txtVoca.text=sn.VOCA[this.curVO.ext.category];var e=Zn.getGodEquipInfoByPal(this.curVO.pal_id);if(e){for(var i in this.attrDic=this.attrDic||new Object,this.attrDic)this.attrDic[i]=0;var s,n,o,a="",l=Zn.getGodHoodEquipByID(this.tab.selectedIndex+1);for(var r in e.artifacts)if((n=e.artifacts[r]).id==this.tab.selectedIndex+1){s=n;break}for(var h in l.GodHoodEquipPtArr){var u,c;if(o=l.GodHoodEquipPtArr[h],s)for(var d in s.traits)if((c=s.traits[d]).id==o.id){u=c;break}var p=null!=u?u.lv:0;if("1"==o.desc[0])for(var m=1;m<o.descArr.length;m++){var f=o.descArr[m].split(",");this.attrDic[f[0]]=this.attrDic[f[0]]||0,this.attrDic[f[0]]+=parseInt(f[1])*p}else{if(a+=Z.font(o.name,"#e1c6bc",26),f=o.descArr[this.curVO.ext.category].split(","),1<o.num){var _=0<p?p:1;a+=Z.font(" Lv"+_+"：","#e1c6bc",26)}else a+=Z.font("：","#e1c6bc",26);0==p&&(a+=Z.font("未激活","#e1c6bc",26));var g=f[0];if(1<f.length){var y=0<p?parseInt(f[1])*u.lv:parseInt(f[1]);g=g.replace("~",y+"")}var v=0<p?"#e1c6bc":"#999999";a+="<br/>&nbsp;&nbsp;&nbsp;&nbsp;"+(g=Z.font(g,v,22))+"<br/>"}u=null}this.txtDesc.innerHTML=a,this.pan.refresh();var I=1;for(var w in this.attrDic)I<5&&(this["txt"+I].text=W.getAttrStrByNum(parseInt(w),this.attrDic[w],"","：",""),++I)}},e}(),TD=function(t){function e(){this.palID=NaN,this._id=NaN,this.xmlVO=null,this._data=null,this._select=!1,e.__super.call(this)}w(e,"modules.godHood.GodHoodEquipPtItem",sv);var i=e.prototype;return i.showRP=function(t){this.imgRp.visible=t},I(0,i,"select",function(){return this._select},function(t){this._select=t,this.imgSel.visible=t}),I(0,i,"data",function(){return this._data},function(t){this._data=t;var e=this._data?this._data.lv:0;this.txtPer.text=e+"/"+this.xmlVO.num,this.imgSkill.gray=0==e;var i=!!Zn.palGodEquipInfos&&Zn.getUpNeed(this.palID)<=pe.getScore(14);if(""==this.xmlVO.pre)this.showRP(e<this.xmlVO.num&&i),e<this.xmlVO.num?this.txtPer.color="#41e21b":this.txtPer.color="#fff959";else{var s=parseInt(this.xmlVO.pre),n=Math.floor(s/100),o=s%100;Zn.getGodHoodEquipPoint(n,o).num>Zn.getPosLv(this.palID,s)?(this.showRP(!1),this.txtPer.color="#b1b0b0"):(this.showRP(this.xmlVO.num>e&&i),e<this.xmlVO.num?this.txtPer.color="#41e21b":this.txtPer.color="#fff959")}}),I(0,i,"uiClass",function(){return"GodHoodSkillItem"}),I(0,i,"id",function(){return this._id},function(t){this._id=t;var e=Math.floor(this._id/100),i=this._id%100;this.xmlVO=Zn.getGodHoodEquipPoint(e,i),1==this.xmlVO.sp?(this.imgKuang.skin="modules/godhood/skillBg1.png",this.imgKuang.pos(7,7),this.imgKuang.size(97,96),this.imgRp.pos(64,15)):(this.imgKuang.skin="modules/godhood/skillBg.png",this.imgKuang.pos(21,21),this.imgKuang.size(69,69),this.imgRp.pos(61,18)),this.pos(parseInt(this.xmlVO.pos.split(",")[0]),parseInt(this.xmlVO.pos.split(",")[1])),this.imgSkill.skin="modules/godhood/img/skill"+this._id+".png"}),e}(),kD=function(t){function e(){this.headPart=null,this._equipP=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("undisplay",this,this.onUnDisplay),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.on("click",this,this.onClick),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.headPart.pos(58,65),this.addChild(this.headPart)}w(e,"modules.godHood.GodHoodEquipRPSetView",nv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.img1:this.box1.selected=!this.box1.selected;break;case this.img2:this.box2.selected=!this.box2.selected;break;case this.img3:this.box3.selected=!this.box3.selected;break;case this.img4:this.box4.selected=!this.box4.selected;break;case this.img5:this.box5.selected=!this.box5.selected}},i.openIndex=function(t){null==this.parent&&(this.openWindow(),this.headPart.resetSelect(t),this.update())},i.update=function(){var t=pe.pals[this.headPart.index];if(this._equipP=Zn.getGodEquipInfoByPal(t.pal_id),this._equipP)for(var e=0;e<5;e++)this["box"+(e+1)].selected=this._equipP.red_point&Math.pow(2,e)},i.onHeadItemClick=function(){this._equipP&&this.toChange(),this.update()},i.onUnDisplay=function(){this.toChange()},i.toChange=function(){for(var t=0,e=1;e<6;e++)this["box"+e].selected&&(t+=Math.pow(2,e-1));t!=this._equipP.red_point&&Xl.ins().toEquipSetRP(this._equipP.pal_id,t)},e}(),AD=function(t){function e(){this.headPart=null,this._curSel=0,this.attrView=null,this.alertView=null,this.pal=null,this._pal_id=0,this.needLv=NaN,this.allGodHood=NaN,this.cate=null,this.rpSetView=null,this._selItem=null,this.items=null,this.NoGodHoodSkill=[],e.__super.call(this),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.headPart.pos(106,7),this.addChild(this.headPart),this.on("click",this,this.onEquipClick),this.on("display",this,this.onDisplay),this.spHandler.on("display",this,this.onHandlerDisplay),this.txtNeed1.style.align=this.txtNeed2.style.align=this.txtNeed3.style.align=this.txtNeed4.style.align=this.txtNeed5.style.align="center",this.txtDesc.style.leading=12,this.txtDesc.style.fontSize=24;for(var t=0;t<4;t++)Nt.register("RP_GODHOOD_EQUIP_"+t,this.headPart.getItem(t),new Tt(39,10))}w(e,"modules.godHood.GodHoodEquipView",ov);var i=e.prototype;return i.onHandlerDisplay=function(){T.register("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.updateScore(),this.spHandler.on("undisplay",this,this.onHandlerUnDisplay)},i.onScoreChange=function(t){14==t.id&&this.updateScore()},i.onHandlerUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.spHandler.off("undisplay",this,this.onHandlerUnDisplay)},i.onDisplay=function(){null==this.spEquip.parent&&this.addChild(this.spEquip),this.spHandler.parent&&this.spHandler.removeSelf(),this.headPart.resetSelect(0)},i.initSet=function(){if(0!=this._curSel){this.imgNane.skin="modules/godhood/equipTxt"+this._curSel+".png",this.items=this.items||[];for(var t=Zn.getGodHoodEquipByID(this.curSel),e=t.GodHoodEquipPtArr.length,i=this.items.length,s=Math.max(e,i),n=pe.getPalByIndex(this.headPart.index),o=0;o<s;o++)o<e?(this.items[o]=this.items[o]||new TD,this.items[o].id=t.GodHoodEquipPtArr[o].id,this.items[o].palID=n.pal_id,this.spHandler.addChild(this.items[o])):this.items[o]&&this.items[o].parent&&this.items[o].removeSelf();this.selItem=this.items[0]}},i.setHandlerView=function(t){this.imgBg.skin="modules/godhood/img/godHoodHandlerBg"+t+".png",null==this.spHandler.parent&&this.addChild(this.spHandler),this.spEquip.parent&&this.spEquip.removeSelf(),this.curSel=t,this.needLv=Zn.getGodHoodEquipByID(this.curSel+1).needStage,1==this.curSel?this.changeL.visible=!1:this.changeL.visible=!0,this.needLv>Zn.godHoodLv||3==this.curSel?this.changeR.visible=!1:this.changeR.visible=!0,this.updateHandlerView()},i.setEquipView=function(){null==this.spEquip.parent&&this.addChild(this.spEquip),this.spHandler.parent&&this.spHandler.removeSelf(),this.updateEquipView()},i.onEquipClick=function(t){var e=this;switch(t.target){case this.imgEquip1:a(1);break;case this.imgEquip2:a(2);break;case this.imgEquip3:a(3);break;case this.imgEquip4:return void Jt.addTip("该仙器即将破炉而出，敬请期待");case this.btnEx:me.linkTo(11803);break;case this.imgEquip5:return void Jt.addTip("该仙器即将破炉而出，敬请期待");case this.imgLink:this.pal=pe.getPalByIndex(this.headPart.index),this.attrView=this.attrView||new PD,this.attrView.update(this.pal),this.attrView.openWindow();break;case this.resetGodHoodSkill:this.pal=pe.getPalByIndex(this.headPart.index),this._pal_id=this.pal.pal_id;var i=Zn.getGodEquipInfoByPal(this.pal.pal_id);if(this.cate=pe.getCate(this.pal.ext.category),this.allGodHood=Zn.getAllGodHood(this._pal_id),i&&i.artifacts)for(var s in i.artifacts){if(0!=i.artifacts[s].total_trait_lv){this.NoGodHoodSkill[this.headPart.index]=1;break}this.NoGodHoodSkill[this.headPart.index]=0}0==this.NoGodHoodSkill[this.headPart.index]?Jt.addTip("当前未激活仙器潜能，无法重置！"):(this.alertView=new lV,this.alertView.txtMsg.style.fontSize=26,this.alertView.txtMsg.style.valign="top",this.alertView.txtMsg.style.leading=18,this.alertView.txtMsg.style.color="#5D3924",this.alertView.txtMsg.innerHTML="&nbsp;&nbsp;花费"+Z.font("280元宝","#FFFF00",26)+"重置"+Z.font(this.cate+"所有仙器","#FFFFCC",26)+"，可回收所有"+this.cate+"在仙器上投入的仙力，重置之后：<br>&nbsp;&nbsp;1、"+this.cate+"所有仙器潜能变为未激活（可重新激活）<br>&nbsp;&nbsp;2、获得"+Z.font(this.allGodHood+"仙力","#FFFF00",26),this.alertView.on("click",this,this.onAlertClick),this.alertView.popup());break;case this.imgRPSet:this.rpSetView=this.rpSetView||new kD,this.rpSetView.openIndex(this.headPart.index);break;case this.imgEquipLink:this.setEquipView();break;case this.changeL:this.setHandlerView(this.curSel-1);break;case this.changeR:this.setHandlerView(this.curSel+1);break;case this.btnAct:if(this._selItem){var n=this._selItem.data?this._selItem.data.lv:0;if(Zn.getGodHoodEquipPoint(Math.floor(this._selItem.id/100),this._selItem.id).num>n){this.pal=pe.getPalByIndex(this.headPart.index);var o=pe.getScore(14);Zn.getUpNeed(this.pal.pal_id)<=o?Xl.ins().toGodArtifactUpgrade(this.pal.pal_id,this._selItem.id):Jt.addTip("仙力不足，挑战八荒禁地可获得仙力")}else Jt.addTip("潜能点已满！")}break;default:t.target instanceof modules.godHood.GodHoodEquipPtItem&&(this.selItem=t.target)}function a(t){e.needLv=Zn.getGodHoodEquipByID(t).needStage,e.needLv>Zn.godHoodLv?Jt.addTip("达到"+e.needLv+"阶-"+Zn.getGodHoodStageNameByLv(e.needLv)+"开启"+$n.godHoodEquipArr[t]):e.setHandlerView(t)}},i.onAlertClick=function(t){switch(t.target){case this.alertView.btnYes:280<=pe.gold&&1==this.NoGodHoodSkill[this.headPart.index]?(Xl.ins().toGodArtifactClear(this._pal_id),Jt.addTip(pe.getCate(this.pal.ext.category)+"所有仙器已重置，获得"+this.allGodHood+"仙力")):Lo.showAlert();case this.alertView.btnClose:case this.alertView.btnNo:this.alertView.close()}},i.noMoney=function(){var t=new Ee;t.msg="元宝不足，请充值",EF.showVO(t)},i.updateBottom=function(){if(this._selItem){this.imgEquip.skin="modules/godhood/img/skill"+this._selItem.id+".png",1==this._selItem.xmlVO.sp?this.imgEquipBg.skin="modules/godhood/skillBg1.png":this.imgEquipBg.skin="modules/godhood/skillBg.png",this.txtName.text=this._selItem.xmlVO.name;var t=!1;if(""==this._selItem.xmlVO.pre)t=!0;else{var e=parseInt(this._selItem.xmlVO.pre),i=Math.floor(e/100),s=e%100,n=Zn.getGodHoodEquipPoint(i,s),o=pe.getPalByIndex(this.headPart.index);t=n.num<=Zn.getPosLv(o.pal_id,e)}var a=this._selItem.data,l=null==a?0:a.lv;this.txtDesc.innerHTML=this._selItem.xmlVO.getDesc(pe.getPalByIndex(this.headPart.index).ext.category,l),t?(this.txtD.x=141,this.txtD.text="激活进度：",this.txt.visible=this.txtNeed.visible=this.btnAct.visible=this.txtPer.visible=this.imgBar.visible=this.imgBarBg.visible=!0,0<l?(this.imgEquip.gray=!1,this.imgBar.width=197*a.lv/this._selItem.xmlVO.num,this.imgBar.visible=!0,this.txtPer.text=a.lv+"/"+this._selItem.xmlVO.num,l>=this._selItem.xmlVO.num?(this.txtNeed.visible=this.txt.visible=!1,this.btnAct.label="已激活",this.btnAct.disabled=!0):(this.txtNeed.visible=this.txt.visible=!0,this.btnAct.label="激 活",this.btnAct.disabled=!1)):0==l&&(this.imgEquip.gray=!0,this.imgBar.visible=!1,this.txtPer.text="0/"+this._selItem.xmlVO.num,this.txtNeed.visible=this.txt.visible=!0,this.btnAct.label="激 活",this.btnAct.disabled=!1)):(this.txtD.text="激活条件：需优先激活"+n.name,this.txtD.x=375-this.txtD.textWidth/2,this.txt.visible=this.txtNeed.visible=this.btnAct.visible=this.txtPer.visible=this.imgBar.visible=this.imgBarBg.visible=!1)}this.updateScore()},i.updateHandlerView=function(){var t,e=pe.getPalByIndex(this.headPart.index),i=Zn.getGodEquipInfoByPal(e.pal_id);if(i&&i.artifacts){var s;for(var n in i.artifacts)if((s=i.artifacts[n]).id==this.curSel){t=s;break}if(t){for(var o=0;o<this.items.length;o++){var a,l=this.items[o],r=!1;for(var h in t.traits)if((a=t.traits[h]).id%100==o){l.data=a,r=!0;break}0==r&&(l.data=null)}this.updateBottom()}}},i.updateScore=function(){var t=pe.getPalByIndex(this.headPart.index),e=pe.getScore(14);this.txtPow.text="仙力："+k.getShortenSilverStr(e);var i=Zn.getUpNeed(t.pal_id);this.txtNeed.text=k.getShortenSilverStr(i)+"仙力",this.txtNeed.color=i<=e?"#ffe0cf":"#b60202"},i.updateEquipView=function(){for(var t=pe.getPalByIndex(this.headPart.index),e=Zn.getGodEquipInfoByPal(t.pal_id),i=!!Zn.palGodEquipInfos&&Zn.getUpNeed(t.pal_id)<=pe.getScore(14),s=1;s<6;s++){var n=Zn.getGodHoodEquipByID(s),o=this["txtNeed"+s];if(Zn.godHoodLv>=n.needStage){var a,l=0;if(e)for(var r in e.artifacts)if((a=e.artifacts[r]).id==n.id){l=a.total_trait_lv;break}o.innerHTML=Z.font("已激活潜能（"+l+"/"+n.totalLV+"）","#f4f1b2"),l<n.totalLV&&i&&s<=3&&Zn.getNeedCheckGodHoodEquip(t.pal_id,s)?this["imgRp"+s].visible=!0:this["imgRp"+s].visible=!1}else o.innerHTML=Z.font("（达到","#f4f1b2")+Z.font(n.needStage+"阶-"+Zn.getGodHoodStageNameByLv(n.needStage),Zn.getGodHoodStageColorByLv(n.needStage))+Z.font("可激活）","#f4f1b2"),this["imgRp"+s].visible=!1}},i.update=function(){this.spEquip.parent&&this.updateEquipView(),this.spHandler.parent&&this.updateHandlerView()},i.onHeadItemClick=function(){this.initSet(),this.update()},I(0,i,"curSel",function(){return this._curSel},function(t){this._curSel!=t&&(this._curSel=t,this.initSet())}),I(0,i,"selItem",null,function(t){var e;for(var i in this._selItem=t,this.items)(e=this.items[i]).select=e==t;this.updateBottom()}),e}(),ED=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.btnClose.on("click",this,this.closeWindow),this.btnNo.on("click",this,this.closeWindow),this.btnYes.on("click",this,this.gotoGoodHood),this.zOrder=9999}w(e,"modules.godHood.GodHoodOpenTip",av);var i=e.prototype;return i.update=function(t){var e=!1,i=Zn.getGodHoodS()[Zn.godHoodLv];i&&(2==t&&0==Zn.godHoodLv?e=Vs.passedMaxChapter==i.need:0<Zn.godHoodLv&&1==t&&(e=Ds.curBarrier==i.need+1)),e&&(null==this.parent&&this.openWindow(),Zn.godHoodLv<=0?(this.imgGod1.skin="modules/godhood/img/hood1.png",this.imgGod1.x=258,this.spGet.visible=!0,this.spUp.visible=!1,this.txtTop.text="强大的仙阶等你开启！"):(this.imgGod1.x=128,this.imgGod1.skin="modules/godhood/img/hood"+Zn.godHoodLv+".png",this.imgGod2.skin="modules/godhood/img/hood"+(Zn.godHoodLv+1)+".png",this.spGet.visible=!1,this.spUp.visible=!0,this.txtNow1.text=Zn.getGodHoodStageNameByLv(Zn.godHoodLv),this.txtNow1.color=Zn.getGodHoodStageColorByLv(Zn.godHoodLv,!1),this.txtNext1.text=Zn.getGodHoodStageNameByLv(Zn.godHoodLv+1),this.txtNext1.color=Zn.getGodHoodStageColorByLv(Zn.godHoodLv+1,!1),this.txtTop.text="你的仙阶可以提升啦！"))},i.gotoGoodHood=function(){ia.closePanel(),this.closeWindow(),me.linkTo(11802)},e}(),RD=function(t){function e(){this.godHoodView=null,this.storyView=null,this.forbiddenView=null,this.godHoodEquipView=null,this.curView=null,e.__super.call(this),this.setWindowType(),this.btnClose.on("click",this,this.closeWindow),this.btnBack.on("click",this,this.closeWindow),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=new Q(this,this.onItemClick),Nt.register("RP_GODHOOD_STORY",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_GODHOOD_CAN_FIGHT",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_GODHOOD_FORBIDDEN",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_GODHOOD_EQUIP",this.tab.items[3],new Tt(19,-10))}w(e,"modules.godHood.GodHoodPanel",lv);var i=e.prototype;return i.onItemClick=function(t){switch(t){case 0:case 1:this.tab.selectedIndex=t;break;case 2:case 3:0<Zn.godHoodLv?this.tab.selectedIndex=t:Jt.addTip("请先开启仙阶")}},i.onTabChange=function(){this.changeTab()},i.setIndex=function(t){this.tab.selectedIndex=t,this.changeTab()},i.changeTab=function(){switch(this.spView.removeChildren(),this.tab.selectedIndex){case 0:this.storyView=this.storyView||new NT,this.curView=this.storyView,ol.ins().toInfo();break;case 1:if(!se.has("modules/godhood"))return void se.add("modules/godhood","正在加载仙阶资源",this,this.setIndex,[this.tab.selectedIndex]);pt.send(33,1,"仙阶-仙阶标签"),this.godHoodView=this.godHoodView||new OD,this.curView=this.godHoodView;break;case 2:0<Zn.godHoodLv?(pt.send(114,1,"仙阶-八荒禁地"),this.forbiddenView=this.forbiddenView||new RT,this.curView=this.forbiddenView,ol.ins().toCopyInfo()):Jt.addTip("请先开启仙阶");break;case 3:if(!se.has("modules/godhood"))return void se.add("modules/godhood","正在加载仙器资源",this,this.setIndex,[this.tab.selectedIndex]);pt.send(34,1,"仙阶-仙器标签"),this.godHoodEquipView=this.godHoodEquipView||new AD,this.curView=this.godHoodEquipView}this.spView.addChild(this.curView),this.update()},i.update=function(){this.curView&&this.curView.update()},i.updateByIndex=function(t){var e;switch(t){case 1:e=OD;break;case 3:e=AD}this.curView&&h.__typeof(this.curView,e)&&this.curView.update()},e}(),OD=function(t){function e(){this._nowState=-1,e.__super.call(this),this.spHood.visible=!0,this.spHoodFight.visible=!1,this._nowState=0,this.on("click",this,this.onClick),this.txtGet.style.valign="top",this.txtGet.style.fontSize=26,this.txtGet.style.letterSpacing=2,this.txtGet.style.leading=12,this.txtLvNow.style.align="center",this.txtLvNext.style.align="center",Nt.register("RP_GODHOOD_CAN_FIGHT",this.imgFight,new Tt(30,10)),this.on("display",this,this.onDisplay)}w(e,"modules.godHood.GodHoodView",rv);var i=e.prototype;return i.onDisplay=function(){if(0==Zn.godHoodLv)this.nowState=1;else if(Zn.godHoodLv<Zn.getHoodGetMaxLV()){var t=Zn.getGodHoodByLv(Zn.godHoodLv);Ds.curBarrier>t.need?this.nowState=1:this.nowState=0}else this.nowState=0},i.onClick=function(t){switch(t.target){case this.btnFight:pt.send(33,2,"仙阶-开始渡劫按钮");var e=Zn.getGodHoodByLv(Zn.godHoodLv);e&&0<e.fightMap&&"#96f254"==this.txtNeed2.color?(ga.storyHook=e.hook,Lr.ins().toMapChange(e.fightMap)):0==e.lv?Jt.addTip("请先通关剧情副本第"+e.need+"章"):Jt.addTip("请先通关修仙之路第"+e.need+"关");break;case this.imgHood:case this.imgFight:this.nowState=1-this.nowState,this.update()}},i.update=function(){0==Zn.godHoodLv?(this.nowState=1,this.txtNextAttr.visible=!0,this.imgHood.visible=!1,this.imgFight.visible=!1):Zn.godHoodLv<Zn.getHoodGetMaxLV()?(this.imgHood.visible=!0,this.txtNextAttr.visible=!0,this.imgHood.visible=1==this._nowState,this.imgFight.visible=0==this._nowState):(this.nowState=0,this.txtNextAttr.visible=!1,this.imgHood.visible=!1,this.imgFight.visible=!1);var t=Zn.getGodHoodByLv(Zn.godHoodLv),e=Zn.getGodHoodByLv(Zn.godHoodLv+1);0==this.nowState?(this.txtNowLv.text="当前仙阶："+t.lv+"阶-"+t.name,this.txtNowAttr.text=t.getAttr(),this.imgHoodBg.skin="modules/godhood/img/hood"+Zn.godHoodLv+".png",this.txtGet.innerHTML=t.getGets(),Zn.godHoodLv<Zn.getHoodGetMaxLV()?(this.txtNextAttr.text=e.getAttr(),this.txtNeed.color=Ds.curBarrier>t.need?"#96f254":"#fd3939",this.txtNeed.text="（通关修仙之路第"+t.need+"关可渡劫）",this.imgMax.visible=!1):(this.txtNeed.text="",this.imgMax.visible=!0)):0==Zn.godHoodLv?(this.imgNow.skin="modules/godhood/img/hood1.png",this.imgNext.skin="modules/godhood/img/hood1.png",this.imgNow.gray=!0,this.txtLvNow.innerHTML=Z.font2("当前仙阶：",16577654,26)+Z.font2("未开启",9892436,26),this.txtLvNext.innerHTML=Z.font2("下一仙阶：",16577654,26)+Z.font(e.lv+"阶-"+e.name,Zn.getGodHoodStageColorByLv(e.lv),26),this.txtNeed2.color=Vs.passedMaxChapter>=t.need?"#96f254":"#fd3939",this.txtNeed2.text="（通关剧情副本第"+t.need+"章可渡劫）"):(this.imgNow.skin="modules/godhood/img/hood"+Zn.godHoodLv+".png",this.imgNext.skin="modules/godhood/img/hood"+(Zn.godHoodLv+1)+".png",this.imgNow.gray=!1,this.txtLvNow.innerHTML=Z.font2("当前仙阶：",16577654,26)+Z.font(t.lv+"阶-"+t.name,Zn.getGodHoodStageColorByLv(t.lv),26),this.txtLvNext.innerHTML=Z.font2("下一仙阶：",16577654,26)+Z.font(e.lv+"阶-"+e.name,Zn.getGodHoodStageColorByLv(e.lv),26),this.txtNeed2.color=Ds.curBarrier>t.need?"#96f254":"#fd3939",this.txtNeed2.text="（通关修仙之路第"+t.need+"关可渡劫）")},I(0,i,"nowState",function(){return this._nowState},function(t){this._nowState!=t&&(this._nowState=t,this.spHood.visible=0==this._nowState,this.spHoodFight.visible=1==this._nowState)}),e}(),LD=function(t){function o(){o.__super.call(this)}w(o,"modules.guide.GuideTip",t);var e=o.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this),this.txt.style.align="center",this.txt.style.valign="middle",this.txt.style.lineHeight=28,this.txt.style.fontSize=24,this.txt.style.color="#ffffff",this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)},e.onDisplay=function(){_t.addToFrame(this,this.onFrame)},e.onUnDisplay=function(){_t.removeFromFrame(this,this.onFrame)},e.onFrame=function(){o._ins.quan.scaleX+=o.quanSpeed,o._ins.quan.scaleY+=o.quanSpeed,(1.1<=o._ins.quan.scaleX||o._ins.quan.scaleX<=.9)&&(o.quanSpeed*=-1)},e.changeText=function(t){this.txt.innerHTML=t},I(1,o,"ins",function(){return o.init(),o._ins},ui.modules.guide.GuideTipUI._$SET_ins),o.init=function(){null==o._ins&&(o.allDone=o.allDone||[],(o.allDesc=new Object)[o.OPEN_ROLE_PANEL]="点击此处<br>查看<span style='color:#fbcf01'>角色</span>",o.allDesc[o.OPEN_ZHUANBEI]="点击一键装备按钮<br>自动穿上最好装备",o.allDesc[o.CLOSE_ROLE_PANEL]="点击关闭角色界面",o.allDesc[o.MISSION_WEAR_AWARD]="点击完成任务<br>领取奖励",o.allDesc[o.MISSION_INTENSIFY]="点击继续任务<br>强化装备",o.allDesc[o.CLICK_INTENSIFY_BTN1]="强化装备<br>提升武器属性",o.allDesc[o.CLICK_INTENSIFY_BTN2]="强化装备<br>提升武器属性",o.allDesc[o.CLICK_INTENSIFY_BTN3]="强化装备<br>提升武器属性",o.allDesc[o.CLICK_INTENSIFY_BTN4]="强化装备<br>提升武器属性",o.allDesc[o.CLICK_INTENSIFY_BTN5]="强化装备<br>提升武器属性",o.allDesc[o.CLOSE_REFINE]="点击关闭<br>轩辕鼎界面",o.allDesc[o.MISSION_INTENSIFY_AWARD]="点击完成任务<br>领取奖励",o.allDesc[o.MISSION_SKILL]="点击继续任务<br>升级技能",o.allDesc[o.CLICK_SKILL_UP]="升级技能<br>提升技能属性",o.allDesc[o.CLOSE_SKILL_PANEL]="点击关闭技能界面",o.allDesc[o.MISSION_SKILL_AWARD]="点击完成任务<br>领取奖励",o.allDesc[o.MISSION_CUSTOM]="点击挑战<br>修仙之路",o.allDesc[o.CLICK_CUSTOM_BTN]="点击挑战<br>修仙之路",o.allDesc[o.CLICK_FASHION]="点击领取<br>时装套装",o.allDesc[o.CONTINUE_MISSION]="点击继续任务",o.allDesc[o.OPEN_ROLE_SOUL]="点击此处<br>查看<span style='color:#fbcf02'>角色</span>",o.allDesc[o.OPEN_SOUL_BTN]="装备铸魂<br>大幅提升属性战力",o.allDesc[o.ZHU_HUI_BTN]="铸入圣魂<br>提升武器属性",o.allDesc[o.PET_FIGHT_BTN]="点击出战仙宠",o.allDesc[o.BAI_LING_YUAN]="点击此处<br>进入百灵园",(o._ins=new o).mouseEnabled=!0,o._ins.mouseThrough=!0,this.top=new Wt,this.top.alpha=.5,this.top.mouseEnabled=!0,this.bottom=new Wt,this.bottom.alpha=.5,this.bottom.mouseEnabled=!0,this.left=new Wt,this.left.alpha=.5,this.left.mouseEnabled=!0,this.right=new Wt,this.right.alpha=.5,this.right.mouseEnabled=!0)},o.hadShow=function(t){return o.init(),-1!=o.allDone.indexOf(t)},o.showStep=function(t,e){0!=o.needGuide&&(o.init(),t!=o.CONTINUE_MISSION&&-1!=o.allDone.indexOf(t)||h.timer.callLater(o,o.delayShow,[t,e]))},o.delayShow=function(t,e){var i=o.checkNeedBg(t);-1==o.allDone.indexOf(t)&&o.allDone.push(t);var s=o.allDesc[t];(o._target=e).on("click",o,o.onClickTarget,[t]),e.on("undisplay",o,o.hide),o.nextStep++,o._ins.changeText(s);var n=new Tt;(n=e.localToGlobal(n)).x+o._ins.frame.width/2>lt.stageWidth?o._ins.frame.x=-190:n.x+e.width<o._ins.frame.width&&(o._ins.frame.x=-56),o._ins.pos(n.x+e.width/2,n.y+e.height/2),1==i?(this.top.pos(-o._ins.x,-o._ins.y),this.bottom.pos(-o._ins.x,n.y+e.height-o._ins.y),this.left.pos(-o._ins.x,n.y-o._ins.y),this.right.pos(n.x+e.width-o._ins.x,n.y-o._ins.y),this.top.graphics.clear(),this.bottom.graphics.clear(),this.left.graphics.clear(),this.right.graphics.clear(),this.top.graphics.drawRect(0,0,lt.stageWidth,n.y,"#000000"),this.bottom.graphics.drawRect(0,0,lt.stageWidth,lt.stageHeight-n.y-e.height,"#000000"),this.left.graphics.drawRect(0,0,n.x,e.height,"#000000"),this.right.graphics.drawRect(0,0,lt.stageWidth-n.x-e.width,e.height,"#000000"),this.top.width=lt.stageWidth,this.top.height=n.y,this.bottom.width=lt.stageWidth,this.bottom.height=lt.stageHeight-n.y-e.height,this.left.width=n.x,this.left.height=e.height,this.right.width=lt.stageWidth-n.x-e.width,this.right.height=e.height,o._ins.addChildAt(this.top,0),o._ins.addChildAt(this.bottom,0),o._ins.addChildAt(this.left,0),o._ins.addChildAt(this.right,0),o._ins.width=lt.stageWidth,o._ins.height=lt.stageHeight,h.stage.addChild(o._ins),o.second=8,_t.addToSecond(o,o.onSceond)):(this.left.removeSelf(),this.right.removeSelf(),this.top.removeSelf(),this.bottom.removeSelf(),o._ins.pos(e.x+e.width/2,e.y+e.height/2),e.parent.addChild(o._ins)),_t.clearTimeout(o.timeoutKey),o.timeoutKey=_t.setTimeout(o,o.removeBg,null,8e3),jl.ins().toGuide(t)},o.checkNeedBg=function(t){return t!=o.PET_FIGHT_BTN&&t<o.CONTINUE_MISSION},o.removeBg=function(){this.left.removeSelf(),this.right.removeSelf(),this.top.removeSelf(),this.bottom.removeSelf()},o.onSceond=function(){--o.second<=0&&(this.left.removeSelf(),this.right.removeSelf(),this.top.removeSelf(),this.bottom.removeSelf(),_t.removeFromSceond(o,o.onSceond))},o.hide=function(){o._ins.removeSelf()},o.onClickTarget=function(t){switch(_t.removeFromSceond(o,o.onSceond),o._target.off("click",o,o.onClickTarget),(t<o.CLICK_INTENSIFY_BTN1||o.CLICK_INTENSIFY_BTN5<t)&&o.hide(),o.nextStep){case o.MISSION_WEAR_AWARD:T.dispatch("GUIDE_STEP",o.MISSION_WEAR_AWARD);break;case o.MISSION_INTENSIFY:T.dispatch("GUIDE_STEP",o.MISSION_INTENSIFY);break;case o.MISSION_INTENSIFY_AWARD:T.dispatch("GUIDE_STEP",o.MISSION_INTENSIFY_AWARD);break;case o.MISSION_SKILL:T.dispatch("GUIDE_STEP",o.MISSION_SKILL);break;case o.MISSION_SKILL_AWARD:T.dispatch("GUIDE_STEP",o.MISSION_SKILL_AWARD);break;case o.MISSION_CUSTOM:T.dispatch("GUIDE_STEP",o.MISSION_CUSTOM)}},o.hasParent=function(){return null!=o._ins&&null!=o._ins.parent},o.OPEN_ROLE_PANEL=1,o.OPEN_ZHUANBEI=2,o.CLOSE_ROLE_PANEL=3,o.MISSION_WEAR_AWARD=4,o.MISSION_INTENSIFY=5,o.CLICK_INTENSIFY_BTN1=6,o.CLICK_INTENSIFY_BTN2=7,o.CLICK_INTENSIFY_BTN3=8,o.CLICK_INTENSIFY_BTN4=9,o.CLICK_INTENSIFY_BTN5=10,o.CLOSE_REFINE=11,o.MISSION_INTENSIFY_AWARD=12,o.MISSION_SKILL=13,o.CLICK_SKILL_UP=14,o.CLOSE_SKILL_PANEL=15,o.MISSION_SKILL_AWARD=16,o.MISSION_CUSTOM=17,o.CLICK_CUSTOM_BTN=18,o.CLICK_FASHION=100,o.OPEN_ROLE_SOUL=101,o.OPEN_SOUL_BTN=102,o.ZHU_HUI_BTN=103,o.PET_FIGHT_BTN=104,o.BAI_LING_YUAN=105,o.CONTINUE_MISSION=1e3,o._ins=null,o.needGuide=!1,o.allDone=null,o.allDesc=null,o.top=null,o.bottom=null,o.left=null,o.right=null,o._target=null,o.nextStep=1,o.quanSpeed=.01,o.second=0,o.timeoutKey=0,o}(hv),DD=function(t){function e(){this.packItemArr=null,this._useIndex=0,this._column=5,e.__super.call(this),this.setWindowType(),this.imgTitle.skin="modules/huntTreasure/titleDeepSea.png",this.on("click",this,this.onClick)}w(e,"modules.huntTreasure.deepSea.DeepSeaDepotPanel",uv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnGet:Ql.ins().toGoodsGet()}if(t.target instanceof modules.pack.packView.PackItem){var e=t.target;if(e){Math.floor(e.goods.bagposition/1e4);ur.isEquip(e.goods.typeid)?$l.getInstance().toGoodsSwap(e.goods.id,0,xo.EQUIP_ID):$l.getInstance().toGoodsSwap(e.goods.id,0,xo.GOODS_ID)}}},i.update=function(){var t=xo.getDeepSeaDepotData();t&&t.goods&&(this.txtNum.text=t.goods.length+"/"+t.columns*t.rows,this.updateGoods(t.goods))},i.updateGoods=function(t){this.clearAllItem(),t&&0<t.length&&(this.packItemArr=this.packItemArr||[]);for(var e=0;e<t.length;e++)this.createItem(t[e],e)},i.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e];i.goods=t;var s=e%this._column,n=Math.floor(e/this._column);this.packItemArr[e].x=s*(i.width+23)+20,this.packItemArr[e].y=n*(i.height+30)+15,this.list.addChild(i)},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},I(0,i,"uiClass",function(){return"MysteryDepotPanel"}),e}(),ND=function(t){function e(){this.DEEPSEA_GOODS_ID=10201731,this.packItemArr=null,this._useIndex=0,this._column=5,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.noticeTxt.text="（每次探险消耗深海秘钥×1）",this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.huntTreasure.deepSea.HuntTreasureDeepSeaRewardsPanel",cv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnOne:this.btnOpenBox(1),this.closeWindow();break;case this.btnTen:this.btnOpenBox(2),this.closeWindow();break;case this.btnFifty:this.btnOpenBox(3),this.closeWindow();break;case this.btnClose:case this.btnClose2:this.closeWindow()}if(t.target instanceof modules.pack.packView.PackItem){var e=t.target;if(e){var i=ur.getItem(e.goods.typeid);if(i){i.tempNum=e.goods.current_num;var s="";s=ur.isEquip(e.goods.typeid)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(i,s)}}}},i.btnOpenBox=function(t){var e=0;(1==t?e=1:2==t?e=10:3==t&&(e=50),xo.checkBagIsFull(xo.DEEPSEA_DEPOT_ID))?this.toOpenDepotPanel():e<=xo.getGoodsNumByType(xo.GOODS_ID,this.DEEPSEA_GOODS_ID)?Lo.showSecAlert(Z.span("是否消耗","#5d3924")+Z.span(e+"个深海密钥","#F7EF5F")+Z.span("进行"+e+"次探险","#5d3924")+Z.span("？","#5d3924"),this,this.toHunt,[t],"hunt"+e):Jt.addTip("深海密钥不足，购买深海宝箱可获赠")},i.toHunt=function(t){Ql.ins().toBoxOpen(t),io.clickType=t},i.toOpenDepotPanel=function(){var t=new Ee;t.msg="秘藏仓库空间不足，请先取出里面的道具。",t.noLabel="前往取出",t.yesCaller=Ql.ins(),t.yesFun=Ql.ins().openDepotPanel,t.showRight=!1,EF.showVO(t)},i.update=function(t){this.txtInfo.text="探险"+io.clickTimes[io.clickType-1]+"次，获得以下珍稀道具：",this.updateGoods(t)},i.updateGoods=function(t){this.clearAllItem(),t&&0<t.length&&(this.packItemArr=this.packItemArr||[]);for(var e=0;e<t.length;e++)this.createItem(t[e],e)},i.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e],s=new Object;s.className="p_goods",s.typeid=t.id,s.current_num=t.val,i.goods=s;var n=e%this._column,o=Math.floor(e/this._column);this.packItemArr[e].x=n*(i.width+15)+10,this.packItemArr[e].y=o*(i.height+30),this.list.addChild(i)},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},I(0,i,"uiClass",function(){return"HuntTreasureMysteryRewardsPanel"}),e}(),VD=function(t){function e(){this.rewards1Pos=[{x:70,y:73},{x:205,y:73},{x:347,y:73},{x:490,y:73},{x:70,y:372},{x:205,y:372},{x:347,y:372},{x:490,y:372}],this.rewards2Pos=[{x:0,y:150},{x:570,y:150},{x:0,y:285},{x:570,y:285}],this.rewards3Pos=[{x:118,y:215},{x:523,y:215}],this.rewardsItems1=[],this.rewardsItems2=[],this.rewardsItems3=[],this.effect1=null,this.effect2=null,this.DEEPSEA_GOODS_ID=10201731,this.BUY_GIFT_GOODS_ID1=10201732,this.BUY_GIFT_GOODS_ID2=10201733,this.BUY_GIFT_GOODS_ID3=10201734,this.openEffect=null,this.flyGoods=null,this.goodsIndex=0,this.goodsItems=null,this.frameNum=0,this.completeNum=0,e.__super.call(this),this.initItems(),this.on("click",this,this.onClick),Nt.register("RP_DEEPSEA_DEPOT",this.btnDepot),this.effect1=b.getOne(),this.effect1.pos(170,316),this.addChild(this.effect1),this.effect1.loadAndPlay("moduleEffect/hunttreasure_mystery_waifaguang","default",0,!0),this.effect2=b.getOne(),this.effect2.pos(575,316),this.addChild(this.effect2),this.effect2.loadAndPlay("moduleEffect/hunttreasure_mystery_waifaguang","default",0,!0),this.on("display",this,this.onDisplay),Ja.ins().createCheckShowIcon(1,5,this,285,20),Ja.ins().createCheckShowIcon(2,5,this,395,20)}w(e,"modules.huntTreasure.deepSea.HuntTreasureDeepSeaView",dv);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.initItems=function(){var t=io.deepSeaBoxVo();if(t){for(var e,i,s,n,o,a=t.getRewardsTypeIds1(),l=0;l<this.rewards1Pos.length;l++)i=this.rewards1Pos[l],s=a[l],(e=new Ah(91,91,!1,!0,!1,!1)).pos(i.x,i.y),e.dataSource=parseInt(s),this.addChild(e);a=t.getRewardsTypeIds3(),i=this.rewards3Pos[0],s=a[0],n=new fh(null,!0,!0,105),o=ur.getItem(parseInt(s)),n.pos(i.x,i.y),n.data=o,this.addChild(n),this.txtName1.text=o.title,this.txtName1.pos(95,339),this.txtName1.color=U.getColorDark(o.color),this.addChild(this.txtName1),n.on("click",this,this.onGImageClick,[o]),i=this.rewards3Pos[1],s=a[1],n=new fh(null,!0,!0,105),o=ur.getItem(parseInt(s)),n.pos(i.x,i.y),n.data=o,this.addChild(n),this.txtName2.text=o.title,this.txtName2.pos(520,339),this.txtName2.color=U.getColorDark(o.color),this.addChild(this.txtName2),n.on("click",this,this.onGImageClick,[o])}},i.onGImageClick=function(t){if(t){t.tempNum=1;var e="";e=ur.isEquip(t.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(t,e)}},i.onClick=function(t){var e,i="";switch(t.target){case this.btnOne:this.btnOpenBox(1);break;case this.btnTen:this.btnOpenBox(2);break;case this.btnFifty:this.btnOpenBox(3);break;case this.btnAddGold:me.linkTo(11454);break;case this.btnDepot:Ql.ins().openDepotPanel();break;case this.btnBuy1:SF.ins.show(this.BUY_GIFT_GOODS_ID1,2,0,10001,null,null,1);break;case this.btnBuy2:SF.ins.show(this.BUY_GIFT_GOODS_ID2,2,0,10001,null,null,1);break;case this.btnBuy3:SF.ins.show(this.BUY_GIFT_GOODS_ID3,2,0,10001,null,null,1);break;case this.imgIcon1:(e=ur.getItem(this.BUY_GIFT_GOODS_ID1))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i));break;case this.imgIcon2:(e=ur.getItem(this.BUY_GIFT_GOODS_ID2))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i));break;case this.imgIcon3:(e=ur.getItem(this.BUY_GIFT_GOODS_ID3))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i))}},i.btnOpenBox=function(t){var e=0;(1==t?e=1:2==t?e=10:3==t&&(e=50),xo.checkBagIsFull(xo.DEEPSEA_DEPOT_ID))?this.toOpenDepotPanel():e<=xo.getGoodsNumByType(xo.GOODS_ID,this.DEEPSEA_GOODS_ID)?Lo.showSecAlert(Z.span("是否消耗","#5d3924")+Z.span(e+"个深海密钥","#F7EF5F")+Z.span("进行"+e+"次探险","#5d3924")+Z.span("？","#5d3924"),this,this.toHunt,[t],"hunt"+e):Jt.addTip("深海密钥不足，购买深海礼袋可获赠")},i.toHunt=function(t){Ql.ins().toBoxOpen(t),io.clickType=t},i.toOpenDepotPanel=function(){var t=new Ee;t.msg="秘藏仓库空间不足，请先取出里面的道具。",t.noLabel="前往取出",t.yesCaller=Ql.ins(),t.yesFun=Ql.ins().openDepotPanel,t.showRight=!1,EF.showVO(t)},i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.onBagDataChange),T.register("MONEY_CHANGE",this,this.updateMoney),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay),T.remove("BAGDATA_CHANGE",this,this.onBagDataChange),T.remove("MONEY_CHANGE",this,this.updateMoney)},i.update=function(){this.updateMoney();var t=ur.getItem(this.BUY_GIFT_GOODS_ID1);t&&(this.imgBg1.skin="com/ui/goodsBg"+t.color+".png",this.imgIcon1.skin=t.realMaxico);var e=ur.getItem(this.BUY_GIFT_GOODS_ID2);e&&(this.imgBg2.skin="com/ui/goodsBg"+e.color+".png",this.imgIcon2.skin=e.realMaxico);var i=ur.getItem(this.BUY_GIFT_GOODS_ID3);i&&(this.imgBg3.skin="com/ui/goodsBg"+i.color+".png",this.imgIcon3.skin=i.realMaxico);var s=ur.getItem(this.DEEPSEA_GOODS_ID);if(s){var n=xo.getGoodsNumByType(xo.GOODS_ID,s.id);this.txtNum.innerHTML=Z.span("拥有","#E1C6BC")+Z.span(s.name,U.getColorDark(s.color))+Z.span("："+n,"#E1C6BC")}},i.onBagDataChange=function(){var t=ur.getItem(this.DEEPSEA_GOODS_ID);if(t){var e=xo.getGoodsNumByType(xo.GOODS_ID,t.id);this.txtNum.innerHTML=Z.span("拥有","#E1C6BC")+Z.span(t.name,U.getColorDark(t.color))+Z.span("："+e,"#E1C6BC")}},i.updateMoney=function(){this.txtGold.text=pe.user.attr.gold+""},i.successEffect=function(t){this.btnOne.disabled=this.btnTen.disabled=this.btnFifty.disabled=!0,this.flyGoods=t,this.openEffect=this.openEffect||b.getOne(),this.openEffect.pos(377,300),this.openEffect.visible=!0,this.openEffect.setEndHandler(Q.create(this,this.goodsFly,null,!0)),this.openEffect.loadAndPlay("moduleEffect/hunttreasure_deepsea_kaimen"),this.addChild(this.openEffect)},i.timeOutResetBtn=function(){this.btnOne.disabled=this.btnTen.disabled=this.btnFifty.disabled=!1},i.goodsFly=function(){this.goodsIndex=this.flyGoods.length-1,this.completeNum=this.flyGoods.length,_t.addToFrame(this,this.loopFly)},i.loopFly=function(){var t,e;this.frameNum++,this.goodsItems=this.goodsItems||[],0<=this.goodsIndex&&2==this.frameNum&&(this.frameNum=0,t=(t=this.goodsItems[this.goodsIndex])||new Ah,(e=this.flyGoods[this.goodsIndex])&&(t.pos(290,260),t.dataSource=e.id,this.addChild(t),this.goodsIndex--,ie.to(t,{x:this.btnDepot.x,y:this.btnDepot.y,scaleX:.5,scaleY:.5},1e3,A.quadOut,Q.create(this,this.onComplete,[t])))),this.goodsIndex<0&&(_t.removeFromFrame(this,this.loopFly),this.frameNum=0)},i.onComplete=function(t){this.completeNum--,t&&(t.removeSelf(),t.dataSource=null,this.completeNum<=0&&(Ql.ins().openRewardPanel(this.flyGoods),this.timeOutResetBtn()))},e}(),BD=function(t){function e(){this.currView=null,this.mysteryView=null,this.deepSeaView=null,this.legendEquipView=null,this.headPart=null,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick),this.tab.itemClickFun=Q.create(this,this.onClickTab),this.tab.on("change",this,this.onTabChange),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.spHead.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_LEGEND_UP_"+t,this.headPart.getItem(t),new Tt(39,10));Nt.register("RP_MYSTERY_DEPOT",this.tab.items[0],new Tt(25,-10)),Nt.register("RP_DEEPSEA_DEPOT",this.tab.items[1],new Tt(25,-10)),Nt.register("RP_LEGEND_DE",this.tab.items[2],new Tt(25,-10)),Nt.register("RP_LEGEND_UP",this.tab.items[2],new Tt(25,-10)),this.headPart.resetSelect(0)}w(e,"modules.huntTreasure.HuntTreasurePanel",pv);var i=e.prototype;return i.onHeadItemClick=function(t){zl.ins().curActorIndex=t,this.update()},i.onTabChange=function(){this.spView.removeChildren();for(var t=0;t<4;t++)Nt.hide("RP_LEGEND_UP_"+t);switch(this.tab.selectedIndex){case 0:pt.send(24,1,"秘境-玄天秘境标签"),this.mysteryView=new XD,this.currView=this.mysteryView,this.spView.addChild(this.mysteryView),$l.getInstance().toInfo(),null==xo.getMysteryDepotData()&&cr.ins().toInitMyPackAndDepot([3]),this.headPart.visible=!1;break;case 1:var e=io.deepSeaBoxVo();parseInt(e.openT)<=pe.user.attr.regrow&&parseInt(e.openLv)<=pe.user.attr.level?(this.deepSeaView=new VD,this.currView=this.deepSeaView,this.spView.addChild(this.deepSeaView),Ql.ins().toInfo(),null==xo.getDeepSeaDepotData()&&cr.ins().toInitMyPackAndDepot([7]),this.headPart.visible=!1):(Jt.addTip("该功能"+e.openT+"转以上开放"),this.tab.selectedIndex=0);break;case 2:this.legendEquipView=new WD,this.currView=this.legendEquipView,this.spView.addChild(this.legendEquipView),this.headPart.visible=!0}this.currView&&this.currView.update()},i.onClickTab=function(t){this.tab.selectedIndex=t},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.showViewByIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t},i.update=function(){this.currView&&this.currView.update()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.headPart.resetSelect(0)},i.mysteryGoodsFly=function(t){this.currView instanceof modules.huntTreasure.mystery.HuntTreasureMysteryView?this.mysteryView.successEffect(t):this.currView instanceof modules.huntTreasure.deepSea.HuntTreasureDeepSeaView&&this.deepSeaView.successEffect(t)},e}(),MD=function(t){function e(){this.itemArr=[],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnCloseWin.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.on("click",this,this.onClick)}w(e,"modules.huntTreasure.legend.RoleLegendEquipDecompose",mv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgLink1:me.linkTo(10103);break;case this.imgLink2:me.linkTo(10104);break;case this.imgLink3:1==zl.ins().curLinkType&&(this.closeWindow(),me.linkTo(11400));break;case this.imgLink4:Jt.addTip("暂未开放，敬请期待")}},i.updateView=function(){this.clearAllItem();for(var t=sn.getAllLegend(),e=t.length,i=0;i<e;i++)this.itemArr[i]=this.itemArr[i]||new FD,this.itemArr[i].data=t[i],this.itemArr[i].y=145*i,this.panList.addChild(this.itemArr[i])},i.clearAllItem=function(){if(this.itemArr&&0<this.itemArr.length)for(var t in this.itemArr)this.itemArr[t].removeSelf()},I(0,i,"type",null,function(t){switch(t){case 0:this.imgLink1.visible=this.imgLink2.visible=!0,this.imgLink4.visible=this.imgLink3.visible=!1;break;case 1:this.imgLink1.visible=this.imgLink2.visible=this.imgLink4.visible=!1,this.imgLink3.visible=!0;break;case 2:case 3:this.imgLink1.visible=this.imgLink2.visible=this.imgLink3.visible=!1,this.imgLink4.visible=!0}}),e}(),FD=function(t){function e(){this._typeID=0,this._data=null,e.__super.call(this),this.on("click",this,this.onDown)}w(e,"modules.huntTreasure.legend.RoleLegendEquipDecomposeItem",fv);var i=e.prototype;return i.onDown=function(t){pt.send(8,4,"洪荒-分解按钮"),t.target==this.btnRecom&&this._data&&cr.ins().toMeltingEquip(xo.PACKTYPE_EQUIP,[this._data.id])},i.showDecompose=function(t){this.txtB.visible=t,this.txtB.visible&&(this.txtB.x=this.txtName.x+this.txtName.textWidth)},I(0,i,"data",null,function(t){this._data=t,this._typeID=t.typeid;var e=ur.getItem(this._typeID),i=oa.getRedEquipVO(e.type,1);if(i&&(this.txtGet.text=ur.getItem(na.LEGEND_CHIP_ARR[(e.type-1)%10]).name+"×"+i.needNum),e&&(this.txtName.text=e.name,100<e.level?this.txtLv.text=(e.level-100)/10+"转":this.txtLv.text=e.level+"级",this.imgGoods.skin=e.realMaxico),i){var s,n=!1;pe.pals;for(var o in pe.pals){s=pe.pals[o];var a=oa.getChaoTicInfo(s.pal_id);if(a&&a.equips)for(var l in a.equips)if(a.equips[l].id==e.type){n=!0;break}if(0==n)return void this.showDecompose(!1)}1==n&&this.showDecompose(!0)}else this.showDecompose(!1)}),e}(),UD=function(t){function e(){this.packItemArr=null,this._useIndex=0,this._column=5,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick),this.list.vScrollBar.autoHide=!0}w(e,"modules.huntTreasure.mystery.MysteryDepotPanel",uv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnGet:$l.getInstance().toGoodsGet()}if(t.target instanceof modules.pack.packView.PackItem){var e=t.target;if(e){Math.floor(e.goods.bagposition/1e4);ur.isEquip(e.goods.typeid)?$l.getInstance().toGoodsSwap(e.goods.id,0,xo.EQUIP_ID):$l.getInstance().toGoodsSwap(e.goods.id,0,xo.GOODS_ID)}}},i.update=function(){var t=xo.getMysteryDepotData();t&&t.goods&&(this.txtNum.text=t.goods.length+"/"+t.columns*t.rows,this.updateGoods(t.goods))},i.updateGoods=function(t){this.clearAllItem(),t&&0<t.length&&(this.packItemArr=this.packItemArr||[]);for(var e=0;e<t.length;e++)this.createItem(t[e],e)},i.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e];i.goods=t;var s=e%this._column,n=Math.floor(e/this._column);this.packItemArr[e].x=s*(i.width+23)+20,this.packItemArr[e].y=n*(i.height+30)+15,this.list.addChild(i)},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},e}(),GD=function(t){function e(){this.MYSTERY_GOODS_ID=10201204,this.packItemArr=null,this._useIndex=0,this._column=5,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.huntTreasure.mystery.HuntTreasureMysteryRewardsPanel",cv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnOne:pt.send(24,2,"秘境-玄天秘境-探险1次"),this.btnOpenBox(1),this.closeWindow();break;case this.btnTen:pt.send(24,3,"秘境-玄天秘境-探险10次"),this.btnOpenBox(2),this.closeWindow();break;case this.btnFifty:pt.send(24,4,"秘境-玄天秘境-探险50次"),this.btnOpenBox(3),this.closeWindow();break;case this.btnClose:case this.btnClose2:this.closeWindow()}if(t.target instanceof modules.pack.packView.PackItem){var e=t.target;if(e){var i=ur.getItem(e.goods.typeid);if(i){i.tempNum=e.goods.current_num;var s="";s=ur.isEquip(e.goods.typeid)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(i,s)}}}},i.btnOpenBox=function(t){var e=0;(1==t?e=1:2==t?e=10:3==t&&(e=50),xo.checkBagIsFull(xo.MYSTERY_DEPOT_ID))?this.toOpenDepotPanel():e<=xo.getGoodsNumByType(xo.GOODS_ID,this.MYSTERY_GOODS_ID)?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(e+"个玄天密钥","#F7EF5F")+Z.span("进行"+e+"次探险？","#5d3924"),this,this.toHunt,[t],"hunt"+e):(Jt.addTip("玄天密钥不足，购买玄天礼包可获赠"),this.closeWindow())},i.toHunt=function(t){$l.getInstance().toBoxOpen(t),so.clickType=t},i.toOpenChargePanel=function(){Lo.showAlert()},i.toOpenDepotPanel=function(){var t;(t=new Ee).msg="秘境仓库空间不足，请先取出里面的道具。",t.noLabel="前往取出",t.yesCaller=$l.getInstance(),t.yesFun=$l.getInstance().openDepotPanel,t.showRight=!1,EF.showVO(t)},i.update=function(t){this.txtInfo.text="探险"+so.clickTimes[so.clickType-1]+"次，获得以下珍稀道具：",this.updateGoods(t)},i.updateGoods=function(t){this.clearAllItem(),t&&0<t.length&&(this.packItemArr=this.packItemArr||[]);for(var e=0;e<t.length;e++)this.createItem(t[e],e)},i.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e],s=new Object;s.className="p_goods",s.typeid=t.id,s.current_num=t.val,i.goods=s;var n=e%this._column,o=Math.floor(e/this._column);this.packItemArr[e].x=n*(i.width+15)+10,this.packItemArr[e].y=o*(i.height+30),this.list.addChild(i)},i.clearAllItem=function(){if(this.packItemArr)for(var t=0;t<this.packItemArr.length;t++)this.packItemArr[t].removeSelf()},e}(),HD=function(t){function e(){this._putWhere=0,this.goodsImg=null,this._data=null,e.__super.call(this),this.goodsImg=new et,this.goodsImg.centerX=this.goodsImg.centerY=0,this.imgBg.skin="com/ui/goodsBg6.png",this.txtName.color="#b60202",this.addChild(this.goodsImg)}w(e,"modules.huntTreasure.legend.RoleLegendEquipItem",t);var i=e.prototype;return I(0,i,"data",function(){return this._data},function(t){this._data=t;var e=NaN,i=NaN,s=pe.getPalByIndex(zl.ins().curActorIndex).ext.category;if(null!=this._data){this.gray=!1,e=t.id,i=t.val;var n=oa.getRedEquipVO(t.id,t.val);this.txtLv.text=0<this._putWhere?"":"战斗力："+n.power,this.txtName.text=11==t.id?"洪荒神"+ur.cateArr[s]+"（"+i+"阶）":"洪荒神"+ur.legendPosArr[e%10]+"（"+i+"阶）"}else this.gray=!0,e=this._putWhere,i=1,this.txtName.text="未激活",this.txtLv.text="";this.goodsImg.skin=11==e?"modules/goods/maxico/"+ur.pathArr[s]+"50.png":"modules/goods/maxico/"+ur.pathArr2[e%10]+"50.png"}),I(0,i,"putWhere",null,function(t){this._putWhere=t}),I(0,i,"gray",t.prototype._$get_gray,function(t){this.goodsImg.gray=t}),e}(_v),WD=function(i){function t(){this.secKey=0,this.imgPool=[],this.selEff=null,this.itemArr=null,this.nowSelIndex=0,this.putWhere=[11,12,13,14],this._p_pal=null,this._actor=NaN,this._item1=null,this._item2=null,this.curP=null,this._curSelNum=0,this.selTypeVO=null,this.strArr=["武","盔","甲","链"],this.bitmapClip=null,t.__super.call(this),T.register("BAGDATA_CHANGE",this,this.updateLegendChip),Nt.register("RP_LEGEND_DE",this.txtLink,new Tt(29,-14)),this.on("display",this,this.onDisplay),this.htmlDesc.style.align="center",this.htmlDesc.style.fontSize=22,this.htmlDesc.style.color="#FFFFCC"}w(t,"modules.huntTreasure.legend.RoleLegendEquipView",i);var e=t.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){T.register("UPDATE_PAL_DATA",this,this.checkRP),T.register("LEGEND_EQUIP_INFO",this,this.update),T.register("LEGEND_EQUIP_UPGRADE",this,this.showUpgrade),T.register("LEGEND_EQUIP_COMPOSE",this,this.showCompose),this.on("undisplay",this,this.unDisplay)},e.showUpgrade=function(t){this.updateSub(),0<this.secKey&&_t.clearTimeout(this.secKey),this._item2&&this._item2.parent?(ih.show("moduleEffect/hong2",502,210,this),this.secKey=_t.setTimeout(this,this.showSec,[446,160,t%10],500)):(ih.show("moduleEffect/hong2",377,210,this),this.secKey=_t.setTimeout(this,this.showSec,[322,160,t%10],500))},e.showCompose=function(t){this.updateSub(),ih.show("moduleEffect/hong2",377,210,this),0<this.secKey&&_t.clearTimeout(this.secKey),this.secKey=_t.setTimeout(this,this.showSec,[322,160,t%10],500)},e.updateSub=function(){var t;this.curP=oa.getNowRedEquip(this._p_pal.pal_id,q.LEGEND_EQUIP_TYPE[this.nowSelIndex]);var e=0;if(this.curP?(e=oa.getRedEquipVO(q.LEGEND_EQUIP_TYPE[this.nowSelIndex],this.curP.val).needNum,t=oa.getRedEquipVO(q.LEGEND_EQUIP_TYPE[this.nowSelIndex],this.curP.val+1)):t=oa.getRedEquipVO(q.LEGEND_EQUIP_TYPE[this.nowSelIndex],1),t){var i=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[this.nowSelIndex]),s=t?t.needNum-e:999999-e;this.txtHas.text=i+"",this.txtNeed1.text="/"+s,this.txtHas.color=s<=i?"#ffe0cf":"#b60202"}else this.spMax.visible=!0,this.spNotMax.visible=!1,this.txtLink.y=588,this.btnUp.visible=!1},e.showSec=function(t,e,i){var s=this._p_pal?this._p_pal.ext.category:1,n=0<this.imgPool.length?this.imgPool.pop():new fh(null,!0,!0,105);n.imgContent.skin=1==i?"modules/goods/maxico/"+ur.pathArr[s]+"50.png":"modules/goods/maxico/"+ur.pathArr2[i]+"50.png",n.imgBG.skin="com/ui/goodsBg6.png",n.imgCa.visible=!1,n.pos(t,e),this.addChild(n),ih.show("moduleEffect/hongcheng1",53,50,n);var o=176*i-118;ie.to(n,{x:o,y:694},400,A.quintOut,Q.create(this,this.showEnd,[o,694,n],!0))},e.showEnd=function(t,e,i){Tr.ins().ignorePowUp=!1,ih.show("moduleEffect/hong2",t+55,e+52,this),i.removeSelf(),this.imgPool.push(i),this.update()},e.unDisplay=function(){T.remove("UPDATE_PAL_DATA",this,this.checkRP),T.remove("EQUIP_UPDATE",this,this.update),T.remove("EQUIP_UPGRADE",this,this.showUpgrade),T.remove("EQUIP_COMPOSE",this,this.showCompose),this.on("undisplay",this,this.unDisplay)},e.updateLegendChip=function(){var t=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[this.nowSelIndex]);this.txtHas.text=t+"",this.txtHas.color=t>=this._curSelNum?"#ffe0cf":"#b60202",this.checkRP()},e.createChildren=function(){var t;i.prototype.createChildren.call(this),this.itemArr=[],this.selEff=new et,this.selEff.skin="modules/role/selectedEffect.png",this.selEff.x=-9,this.selEff.y=-10;for(var e=0;e<4;e++)(t=new HD).y=694,t.x=176*e+58,t.putWhere=this.putWhere[e],t.addChild(this.selEff),t.mouseEnabled=!0,this.itemArr.push(t),this.addChild(t);this.itemArr[0].imgSel.addChild(this.selEff),this.nowSelIndex=0,this.on("click",this,this.onMouseDown),this.txtLink.underline=!0,this.txtLink.mouseEnabled=!0,this.txtLink.on("click",this,this.onLinkDown)},e.onMouseDown=function(t){switch(t.target){case this.btnUp:if("升级"==this.btnUp.label?pt.send(8,1,"洪荒-升级按钮"):"激活"==this.btnUp.label?pt.send(8,2,"洪荒-激活按钮"):"获得"==this.btnUp.label&&pt.send(8,3,"洪荒-获得按钮"),this.spMax.visible)Jt.addTip("洪荒装备已满级!");else{if("获得"==this.btnUp.label)return;if("激活"==this.btnUp.label)if(0<xo.getGoodsNumByType(xo.EQUIP_ID,na.LEGEND_ACT_ARR[this.nowSelIndex]))return Tr.ins().ignorePowUp=!0,void Tr.ins().toChaoTicEquipLoad(this._p_pal.base.role_id,q.LEGEND_EQUIP_TYPE[this.nowSelIndex]);"#ffe0cf"==this.txtHas.color?(Tr.ins().ignorePowUp=!0,"激活"==this.btnUp.label?Tr.ins().toChaoTicEquipLoad(this._p_pal.base.role_id,q.LEGEND_EQUIP_TYPE[this.nowSelIndex]):Tr.ins().toChaoTicEquipUpdate(this._p_pal.base.role_id,q.LEGEND_EQUIP_TYPE[this.nowSelIndex])):Jt.addTip("激活所需碎片不足!")}break;default:var e=this.itemArr.indexOf(t.target);0<=e&&(t.target.imgSel.addChild(this.selEff),this.nowSelIndex=e,this.update())}},e.updateNowHas=function(){this._p_pal=pe.getPalByIndex(zl.ins().curActorIndex);var t=oa.getChaoTicInfo(this._p_pal.pal_id);if(t&&t.equips)for(var e=this.itemArr.length,i=!1,s=0;s<e;s++){var n;for(var o in i=!1,t.equips)(n=t.equips[o]).id==q.LEGEND_EQUIP_TYPE[s]&&(this.itemArr[s].data=n,i=!0);i||(this.itemArr[s].data=null)}else for(s=0;s<4;s++)this.itemArr[s].data=null},e.update=function(){this.updateView(),this.checkRP(),this.showBtnEffect(this.itemArr[this.nowSelIndex].imgRP.visible)},e.updateView=function(){this.updateNowHas(),this.curP=oa.getNowRedEquip(this._p_pal.pal_id,q.LEGEND_EQUIP_TYPE[this.nowSelIndex]);var t,e=0,i=0;if(this.curP){var s=oa.getRedEquipVO(this.curP.id,this.curP.val);i=s.needNum;for(var n,o="",a=W.parseAttrToArr(s.attr),l=a.length,r=0;r<l;r++)if(r<a.length){var h;for(var u in t=a[r],n="",s.subAttrs)if(h=s.subAttrs[u],49==t[0]||15==t[0]||16==t[0]){if(49==h.id||15==h.id||16==h.id){n=" +"+h.val;break}}else if(t[0]==h.id){n=" +"+h.val;break}o+=W.getAttrStrByArr(t,"","：",n+"\n")}this.selTypeVO=oa.getRedEquipVO(this.curP.id,this.curP.val+1),e=null==this.selTypeVO?1:2,this.htmlNeed.visible=!1,this.htmlDesc.innerHTML=s.desc}else this.selTypeVO=oa.getRedEquipVO(q.LEGEND_EQUIP_TYPE[this.nowSelIndex],1),e=1,this.htmlNeed.visible=!0,this.htmlNeed.innerHTML=Z.font("拥有","#ffffff")+Z.font("洪荒神"+this.strArr[this.nowSelIndex],"#b60202")+Z.font("可直接激活","#ffffff"),this.htmlDesc.innerHTML=this.selTypeVO.desc;var c=ur.getItem(na.LEGEND_CHIP_ARR[this.nowSelIndex]).name;if(this.txtNeed.text="消耗"+c+"：",this.txtLink.text="获得"+c,0==this.nowSelIndex?this.imgArrow.y=158:this.imgArrow.y=196,this.selTypeVO){var d,p="",m="";for(l=(a=W.parseAttrToArr(this.selTypeVO.attr)).length,r=0;r<l;r++)if(r<a.length){for(u in t=a[r],n="",this.selTypeVO.subAttrs)if(h=this.selTypeVO.subAttrs[u],t[0]==h.id){n=" +"+h.val;break}p+=W.getAttrStrByArr(t,"","：",n+"\n"),m+=t[1]+n+"\n"}2==e?(this.spTwo.visible=!0,this.spOne.visible=!1,this.spNotMax.visible=!0,this.txtNextAttr.text=m,this.txtCurAttr.text=o,this._item1=this._item1||new HD,this._item1.data=this.curP,this._item1.x=201,this._item1.y=160,this._item2=this._item2||new HD,(d=new Object).className="p_kv",d.id=q.LEGEND_EQUIP_TYPE[this.nowSelIndex],d.val=this.selTypeVO.val,this._item2.data=d,this._item2.x=446,this._item2.y=160,this.btnUp.label="升级",this.addChild(this._item1),this.addChild(this._item2)):(this.btnUp.label="激活",this.spNotMax.visible=!0,this.spTwo.visible=!1,this.spOne.visible=!0,this.txtAttr.text=p,this._item1=this._item1||new HD,(d=new Object).className="p_kv",d.id=q.LEGEND_EQUIP_TYPE[this.nowSelIndex],d.val=this.selTypeVO.val,this._item1.data=d,this.addChild(this._item1),this._item1.x=322,this._item1.y=160,this._item2&&this._item2.removeSelf()),this.spMax.visible=!1,this.txtLink.y=549,this._curSelNum=this.selTypeVO.needNum,this.btnUp.visible=!0}else this.spMax.visible=!0,this.txtLink.y=588,this.btnUp.visible=this.spNotMax.visible=!1,this.spOne.visible=!0,this.spTwo.visible=!1,this._item2&&this._item2.removeSelf(),this.curP?(this._item1=this._item1||new HD,this._item1.data=this.curP,this.addChild(this._item1),this._item1.x=322,this._item1.y=160,this.txtAttr.text=o):(this._item1&&this._item1.removeSelf(),this.txtAttr.text="属性：暂无"),this._curSelNum=9999;this._curSelNum=0<this._curSelNum-i?this._curSelNum-i:0;var f=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[this.nowSelIndex]);this.txtHas.text=f+"",this.txtNeed1.text="/"+this._curSelNum,this.txtHas.color=f>=this._curSelNum?"#ffe0cf":"#b60202"},e.checkRP=function(){for(var t in this._p_pal=this._p_pal||pe.getPalByIndex(zl.ins().curActorIndex),this.itemArr)this.itemArr[t].imgRP.visible=!1;for(var e=!1,i=!1,s=0,n=[xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[0]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[1]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[2]),xo.getGoodsNumByType(xo.PACKTYPE_GOODS,na.LEGEND_CHIP_ARR[3])],o=0;o<pe.pals.length;o++){e=!1;var a,l=pe.pals[o],r=oa.getChaoTicInfo(l.pal_id);for(a in this.putWhere){s=this.putWhere[a];var h,u=null;if(r&&r.equips)for(var c in r.equips)if((h=r.equips[c]).id==s){u=h;break}var d=n[s%10-1];if(null==u)(0<xo.getGoodsNumByType(xo.EQUIP_ID,na.LEGEND_ACT_ARR[s%10-1])||200<=d)&&(this._p_pal==l&&(this.itemArr[s%10-1].imgRP.visible=!0),e=e||!0);else{var p=oa.getRedEquipVO(u.id,u.val),m=oa.getRedEquipVO(u.id,u.val+1);m&&m.needNum-p.needNum<=d&&(this._p_pal==l&&(this.itemArr[s%10-1].imgRP.visible=!0),e=e||!0)}}e?Nt.show("RP_LEGEND_UP_"+o):Nt.hide("RP_LEGEND_UP_"+o),i=i||e}i?(Nt.show("RP_LEGEND_UP"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_UP",!0])):(Nt.hide("RP_LEGEND_UP"),T.dispatch("ICON_REDPOINT_CHANGE",[100,"RP_LEGEND_UP",!1]))},e.onLinkDown=function(){3==this.nowSelIndex?zl.ins().curLinkType=3:2==this.nowSelIndex?zl.ins().curLinkType=2:zl.ins().curLinkType=1,pt.send(8,3,"洪荒-分解洪荒功能入口"),T.dispatch("OPEN_LEGEND_DECOMP_VIEW",this.nowSelIndex)},e.showBtnEffect=function(t){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.scale(75/86,.8),this.bitmapClip.pos(75,28)),t?(this.bitmapClip.loadAndPlay("moduleEffect/change","default",0,!0),this.btnUp.addChild(this.bitmapClip)):(this.bitmapClip.stop(),this.btnUp.removeChild(this.bitmapClip))},t}(gv),qD=function(t){function e(){this.currView=null,this.orangeEquipView=null,this.orangeEquipPurifyView=null,this.headPart=null,e.__super.call(this),this.setWindowType(),this.initView(),this.on("click",this,this.onClick),this.tab.itemClickFun=Q.create(this,this.onClickTab),this.tab.on("change",this,this.onTabChange),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.spHead.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_ORANGE_UP_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_ORANGE_PU_"+t,this.headPart.getItem(t),new Tt(39,10));Nt.register("RP_ORANGE_DE_1",this.tab.items[0],new Tt(25,-10)),Nt.register("RP_ORANGE_UP",this.tab.items[0],new Tt(25,-10)),Nt.register("RP_ORANGE_DE_2",this.tab.items[1],new Tt(25,-10)),Nt.register("RP_ORANGE_PU",this.tab.items[1],new Tt(25,-10)),this.headPart.resetSelect(0)}w(e,"modules.huntTreasure.OrangeAndWashingPanel",pv);var i=e.prototype;return i.initView=function(){this.tab.labels="橙装,洗炼",this.titleImg.skin="modules/huntTreasure/title2.png"},i.onHeadItemClick=function(t){zl.ins().curActorIndex=t,this.update()},i.update=function(){this.currView&&this.currView.update()},i.onClickTab=function(t){1==t&&pe.user.attr.regrow<oo.ins().limitLv?Jt.addTip("该功能"+oo.ins().limitLv+"转开启"):this.tab.selectedIndex=t},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.showViewByIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t-3},i.onTabChange=function(){this.spView.removeChildren();for(var t=0;t<4;t++)Nt.hide("RP_ORANGE_UP_"+t),Nt.hide("RP_ORANGE_PU_"+t);switch(this.tab.selectedIndex){case 0:this.orangeEquipView=new zD,this.currView=this.orangeEquipView,this.spView.addChild(this.orangeEquipView),this.headPart.visible=!0;break;case 1:this.orangeEquipPurifyView=this.orangeEquipPurifyView||new tN,this.currView=this.orangeEquipPurifyView,this.spView.addChild(this.orangeEquipPurifyView),this.headPart.visible=!0}this.currView&&this.currView.update()},I(0,i,"uiClass",function(){return"HuntTreasurePanel"}),e}(),YD=function(t){function i(){var t;this.nowSelIndex=NaN,this.itemArr=null,this.selEff=null,this.putWhere=[11,12,13,14],this._item=null,this.headPart=null,this.legendArr=null,i.__super.call(this),this.setWindowType(),this.headPart=new xh,this.headPart.on("RoleHeadsOtherPart.CHOOSE",this,this.update),this.headPart.pos(106,82),this.box.addChild(this.headPart),this.itemArr=[],this.selEff=new et,this.selEff.skin="modules/role/selectedEffect.png",this.selEff.x=-9,this.selEff.y=-10;for(var e=0;e<4;e++)(t=new bU).y=774,t.x=176*e+58,t.putWhere=this.putWhere[e],t.addChild(this.selEff),t.mouseEnabled=!0,this.itemArr.push(t),this.box.addChild(t);this.itemArr[0].imgSel.addChild(this.selEff),this.nowSelIndex=0,this.tab.selectedIndex=0,this.on("click",this,this.onClick),this.htmlDesc.style.align="center",this.htmlDesc.style.fontSize=22,this.htmlDesc.style.color="#FFFFCC"}w(i,"modules.huntTreasure.legend.RoleOtherLegendEquipView",yv);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnUp:me.linkTo(11402);break;default:var e=this.itemArr.indexOf(t.target);0<=e&&(t.target.imgSel.addChild(this.selEff),this.nowSelIndex=e,this.update())}},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.headPart.resetHead(),this.headPart.resetSelect(bo.curActorIndex)},e.selestItem=function(t){this.itemArr[t].imgSel.addChild(this.selEff),this.nowSelIndex=t,this.update()},e.update=function(){var t=bo.getRankRoleLegendData(bo.curRoleID,this.headPart.index);if(t){var e;for(var i in q.LEGEND_EQUIP_TYPE){e=q.LEGEND_EQUIP_TYPE[i];var s,n=!1;for(var o in t)if(e==(s=t[o]).id){n=!0,this.itemArr[e-11].data=s;break}0==n&&(this.itemArr[e-11].data=null)}var a=new Object;for(o in a.className="p_kv",a.id=this.nowSelIndex+11,a.val=0,t)if(s=t[o],a.id==s.id){a.val=s.val;break}a.val=0==a.val?1:a.val,this._item=this._item||new bU,this._item.data=a,this._item.x=322,this._item.y=240,this.box.addChild(this._item);for(var l,r,h=oa.getRedEquipVO(a.id,a.val),u="",c=W.parseAttrToArr(h.attr),d=c.length,p=0;p<d;p++)if(p<c.length){var m;for(var f in r=c[p],l="",h.subAttrs)if(m=h.subAttrs[f],49==r[0]||15==r[0]||16==r[0]){if(49==m.id||15==m.id||16==m.id){l=" +"+m.val;break}}else if(r[0]==m.id){l=" +"+m.val;break}u+=W.getAttrStrByArr(r,"","：",l+"\n")}this.txtCurAttr.text=u,this.txtCurAttr.x=(750-this.txtCurAttr.textWidth)/2,this.htmlDesc.innerHTML=h.desc}},i}(),XD=function(t){function e(){this.rewards1Pos=[{x:105,y:73},{x:225,y:73},{x:345,y:73},{x:465,y:73},{x:105,y:372},{x:225,y:372},{x:345,y:372},{x:465,y:372}],this.rewards2Pos=[{x:0,y:150},{x:570,y:150},{x:0,y:285},{x:570,y:285}],this.rewards3Pos=[{x:150,y:215},{x:495,y:215}],this.rewardsItems1=[],this.rewardsItems2=[],this.rewardsItems3=[],this.effect1=null,this.effect2=null,this.MYSTERY_GOODS_ID=10201204,this.BUY_GIFT_GOODS_ID1=10201401,this.BUY_GIFT_GOODS_ID2=10201402,this.BUY_GIFT_GOODS_ID3=10201403,this.openEffect=null,this.fireEffect=null,this.flyGoods=null,this.goodsIndex=0,this.goodsItems=null,this.frameNum=0,this.completeNum=0,e.__super.call(this),this.initItems(),this.on("click",this,this.onClick),Nt.register("RP_MYSTERY_DEPOT",this.btnDepot),this.effect1=b.getOne(),this.effect1.pos(203,316),this.addChild(this.effect1),this.effect1.loadAndPlay("moduleEffect/hunttreasure_mystery_waifaguang","default",0,!0),this.effect2=b.getOne(),this.effect2.pos(548,316),this.addChild(this.effect2),this.effect2.loadAndPlay("moduleEffect/hunttreasure_mystery_waifaguang","default",0,!0),this.on("display",this,this.onDisplay),Ja.ins().createCheckShowIcon(1,1,this,285,20),Ja.ins().createCheckShowIcon(2,1,this,395,20)}w(e,"modules.huntTreasure.mystery.HuntTreasureMysteryView",vv);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.onBagDataChange),T.register("MONEY_CHANGE",this,this.updateMoney),this.on("undisplay",this,this.onUndisplay)},i.updateMoney=function(){this.txtGold.text=pe.user.attr.gold+""},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),T.remove("BAGDATA_CHANGE",this,this.onBagDataChange),T.remove("MONEY_CHANGE",this,this.updateMoney)},i.onBagDataChange=function(){var t=ur.getItem(this.MYSTERY_GOODS_ID);if(t){var e=xo.getGoodsNumByType(xo.GOODS_ID,t.id);this.txtNum.innerHTML=Z.span("拥有","#E1C6BC")+Z.span(t.name,U.getColorDark(t.color))+Z.span("："+e,"#E1C6BC")}},i.initItems=function(){var t=so.mysteryBoxVO;if(t){for(var e,i,s,n,o,a=t.getRewardsTypeIds1(),l=0;l<this.rewards1Pos.length;l++)i=this.rewards1Pos[l],s=a[l],(e=new Ah(91,91,!1,!0,!1,!1)).pos(i.x,i.y),e.dataSource=parseInt(s),this.addChild(e);a=t.getRewardsTypeIds2();for(var r=0;r<this.rewards2Pos.length;r++)i=this.rewards2Pos[r],s=a[r],(e=new Ah(91,91)).pos(i.x,i.y),e.dataSource=parseInt(s),this.addChild(e);a=t.getRewardsTypeIds3(),i=this.rewards3Pos[0],s=a[0],n=new fh(null,!0,!0,105),o=ur.getItem(parseInt(s)),n.pos(i.x,i.y),n.data=o,this.addChild(n),this.txtName1.text=o.title,this.txtName1.color=U.getColorDark(o.color),this.addChild(this.txtName1),n.on("click",this,this.onGImageClick,[o]),i=this.rewards3Pos[1],s=a[1],n=new fh(null,!0,!0,105),o=ur.getItem(parseInt(s)),n.pos(i.x,i.y),n.data=o,this.addChild(n),this.txtName2.text=o.title,this.txtName2.color=U.getColorDark(o.color),this.addChild(this.txtName2),n.on("click",this,this.onGImageClick,[o])}},i.onGImageClick=function(t){if(t){t.tempNum=1;var e="";e=ur.isEquip(t.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(t,e)}},i.onClick=function(t){var e,i="";switch(t.target){case this.btnOne:pt.send(24,2,"秘境-玄天秘境-探险1次"),this.btnOpenBox(1);break;case this.btnTen:pt.send(24,3,"秘境-玄天秘境-探险10次"),this.btnOpenBox(2);break;case this.btnFifty:pt.send(24,4,"秘境-玄天秘境-探险50次"),this.btnOpenBox(3);break;case this.btnAddGold:pt.send(24,5,"秘境-玄天秘境-充值"),me.linkTo(11454);break;case this.btnDepot:pt.send(24,6,"秘境-玄天秘境-仓库入口"),$l.getInstance().openDepotPanel();break;case this.btnBuy1:SF.ins.show(this.BUY_GIFT_GOODS_ID1,2,0,10001,null,null,1);break;case this.btnBuy2:SF.ins.show(this.BUY_GIFT_GOODS_ID2,2,0,10001,null,null,1);break;case this.btnBuy3:SF.ins.show(this.BUY_GIFT_GOODS_ID3,2,0,10001,null,null,1);break;case this.imgIcon1:(e=ur.getItem(this.BUY_GIFT_GOODS_ID1))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i));break;case this.imgIcon2:(e=ur.getItem(this.BUY_GIFT_GOODS_ID2))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i));break;case this.imgIcon3:(e=ur.getItem(this.BUY_GIFT_GOODS_ID3))&&(i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",e.tempNum=1,Ae.show(e,i))}},i.btnOpenBox=function(t){var e=0;(1==t?e=1:2==t?e=10:3==t&&(e=50),xo.checkBagIsFull(xo.MYSTERY_DEPOT_ID))?this.toOpenDepotPanel():e<=xo.getGoodsNumByType(xo.GOODS_ID,this.MYSTERY_GOODS_ID)?Lo.showSecAlert(Z.span("是否消耗","#5d3924")+Z.span(e+"个玄天密钥","#F7EF5F")+Z.span("进行"+e+"次探险","#5d3924")+Z.span("？","#5d3924"),this,this.toHunt,[t],"hunt"+e):Jt.addTip("玄天密钥不足，购买玄天宝箱可获赠")},i.toHunt=function(t){$l.getInstance().toBoxOpen(t),so.clickType=t},i.toOpenChargePanel=function(){Lo.showAlert()},i.toOpenDepotPanel=function(){var t;(t=new Ee).msg="秘境仓库空间不足，请先取出里面的道具。",t.noLabel="前往取出",t.yesCaller=$l.getInstance(),t.yesFun=$l.getInstance().openDepotPanel,t.showRight=!1,EF.showVO(t)},i.update=function(){this.updateMoney();var t=ur.getItem(this.BUY_GIFT_GOODS_ID1);t&&(this.imgBg1.skin="com/ui/goodsBg"+t.color+".png",this.imgIcon1.skin=t.realMaxico);var e=ur.getItem(this.BUY_GIFT_GOODS_ID2);e&&(this.imgBg2.skin="com/ui/goodsBg"+e.color+".png",this.imgIcon2.skin=e.realMaxico);var i=ur.getItem(this.BUY_GIFT_GOODS_ID3);i&&(this.imgBg3.skin="com/ui/goodsBg"+i.color+".png",this.imgIcon3.skin=i.realMaxico);var s=ur.getItem(this.MYSTERY_GOODS_ID);if(s){var n=xo.getGoodsNumByType(xo.GOODS_ID,s.id);this.txtNum.innerHTML=Z.span("拥有","#E1C6BC")+Z.span(s.name,U.getColorDark(s.color))+Z.span("："+n,"#E1C6BC")}},i.successEffect=function(t){this.btnOne.disabled=this.btnTen.disabled=this.btnFifty.disabled=!0,this.flyGoods=t,this.fireEffect=this.fireEffect||b.getOne(),this.fireEffect.pos(372,339),this.fireEffect.visible=!0,this.fireEffect.setEndHandler(Q.create(this,this.fireEffectEnd,null,!0)),this.fireEffect.loadAndPlay("moduleEffect/hunttreasure_mystery_huo","default",0,!1,4,2),this.addChild(this.fireEffect),this.openEffect=this.openEffect||b.getOne(),this.openEffect.pos(370,339),this.openEffect.visible=!0,this.openEffect.setEndHandler(Q.create(this,this.goodsFly,null,!0)),this.openEffect.loadAndPlay("moduleEffect/hunttreasure_mystery_kaimen"),this.addChild(this.openEffect)},i.timeOutResetBtn=function(){this.btnOne.disabled=this.btnTen.disabled=this.btnFifty.disabled=!1},i.fireEffectEnd=function(){this.fireEffect.stop(),this.openEffect.stop(),this.openEffect.visible=this.fireEffect.visible=!1},i.goodsFly=function(){this.goodsIndex=this.flyGoods.length-1,this.completeNum=this.flyGoods.length,_t.addToFrame(this,this.loopFly)},i.loopFly=function(){var t,e;this.frameNum++,this.goodsItems=this.goodsItems||[],0<=this.goodsIndex&&2==this.frameNum&&(this.frameNum=0,t=(t=this.goodsItems[this.goodsIndex])||new Ah,(e=this.flyGoods[this.goodsIndex])&&(t.pos(290,260),t.dataSource=e.id,this.addChild(t),this.goodsIndex--,ie.to(t,{x:this.btnDepot.x,y:this.btnDepot.y,scaleX:.5,scaleY:.5},1e3,A.quadOut,Q.create(this,this.onComplete,[t])))),this.goodsIndex<0&&(_t.removeFromFrame(this,this.loopFly),this.frameNum=0)},i.onComplete=function(t){this.completeNum--,t&&(t.removeSelf(),t.dataSource=null,this.completeNum<=0&&($l.getInstance().openRewardPanel(this.flyGoods),this.timeOutResetBtn()))},e}(),KD=function(t){function e(){this.itemArr=[],e.__super.call(this)}w(e,"modules.huntTreasure.orangeEquip.RoleOrangeEquipDecompose",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnCloseWin.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.on("click",this,this.onClick)},i.onClick=function(t){switch(t.target){case this.imgLink1:this.closeWindow(),me.linkTo(11400);break;case this.imgLink2:me.linkTo(10302);break;case this.imgLink3:me.linkTo(10602)}},i.updateView=function(){this.clearAllItem();for(var t=sn.getAllOrange(),e=t.length,i=0;i<e;i++)this.itemArr[i]=this.itemArr[i]||new jD,this.itemArr[i].data=t[i],this.itemArr[i].y=145*i,this.panList.addChild(this.itemArr[i])},i.clearAllItem=function(){if(this.itemArr&&0<this.itemArr.length)for(var t in this.itemArr)this.itemArr[t].removeSelf()},e}(Iv),jD=function(t){function e(){this._typeID=0,this._data=null,e.__super.call(this)}w(e,"modules.huntTreasure.orangeEquip.RoleOrangeEquipDecomposeItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onDown)},i.onDown=function(t){t.target==this.btnRecom&&this._data&&cr.ins().toMeltingEquip(xo.PACKTYPE_EQUIP,[this._data.id])},I(0,i,"data",null,function(t){this._data=t,this._typeID=t.typeid;var e=ur.getItem(this._typeID);if(e){this.txtName.text=e.name,100<e.level?this.txtLv.text=(e.level-100)/10+"转":this.txtLv.text="LV."+e.level,this.imgGoods.skin=e.realMaxico;var i=oa.getOraLVvoByTypeID(e.category,e.type,this._typeID);if(i&&(this.txtGet.text="橙装碎片×"+i.needNum),0<e.category){if(this.imgVoca.skin="com/ui/voca"+e.category+".png",null==pe.getPalByCate(e.category))return this.txtB.visible=!0,void(this.txtB.x=this.txtName.x+this.txtName.textWidth)}else this.imgVoca.skin=null;var s=sn.getEquipByPutWhere(e.category,e.type),n=s?sn.getEquipTotalPow(s):0;i?(this.txtB.visible=n>=sn.getOranTotalPow(i),this.txtB.x=this.txtName.x+this.txtName.textWidth):this.txtB.visible=!1}}),e}(wv),QD=function(t){function e(){this._putWhere=0,this._typeID=0,e.__super.call(this)}w(e,"modules.huntTreasure.orangeEquip.RoleOrangeEquipItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"data",null,function(t){if(this._typeID=t,0<this._typeID){var e=ur.getItem(this._typeID);100<e.level?this.txtLv.text=(e.level-100)/10+"转":this.txtLv.text="LV."+e.level,this.goodsImg.skin=e.realMaxico,this.txtName.text=e.name,this.txtName.color=U.getColorDark(e.color),this.imgBg.skin="com/ui/goodsBg"+e.color+".png"}else this.goodsImg.skin="modules/role/"+(20+this._putWhere)+".png",this.txtName.text="",this.txtLv.text="",this.imgBg.skin="com/ui/goodsBg1.png"}),I(0,i,"putWhere",null,function(t){this._putWhere=t}),I(0,i,"nameVisible",null,function(t){this.txtName.visible=t}),e}(bv),zD=function(i){function t(){this.secKey=0,this.imgPool=[],this.selEff=null,this.itemArr=null,this.nowSelIndex=0,this._p_pal=null,this._actor=NaN,this._item1=null,this._item2=null,this.curP=null,this._curSelNum=0,this.waitCom=!1,this.checkLv=!1,this.recComposeItem=0,t.__super.call(this),T.register("BAGDATA_CHANGE",this,this.updateOrangeChip),Nt.register("RP_ORANGE_DE_1",this.txtLink,new Tt(29,-14)),Nt.register("RP_ORANGE_DE_2",this.txtLink,new Tt(29,-14)),this.on("display",this,this.onDisplay)}w(t,"modules.huntTreasure.orangeEquip.RoleOrangeEquipView",i);var e=t.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){T.register("UPDATE_PAL_DATA",this,this.checkRP),T.register("EQUIP_UPDATE",this,this.update),T.register("EQUIP_UPGRADE",this,this.showUpgrade),T.register("EQUIP_COMPOSE",this,this.showCompose),this.on("undisplay",this,this.unDisplay)},e.showUpgrade=function(t){this.updateSub(t.type_id),0<this.secKey&&_t.clearTimeout(this.secKey),this._item2&&this._item2.parent?(ih.show("moduleEffect/cheng2",502,250,this),this.secKey=_t.setTimeout(this,this.showSec,[446,200,t.pos,t.type_id],500)):(ih.show("moduleEffect/cheng2",377,250,this),this.secKey=_t.setTimeout(this,this.showSec,[322,200,t.pos,t.type_id],500))},e.updateSub=function(t){var e,i,s=ur.getItem(t),n=oa.getOraLVvoByTypeID(this._p_pal.ext.category,s.type,t),o=7*s.basePow/6,a=n?n.needNum:0,l=NaN,r=oa.getOraVO(this._p_pal.ext.category,q.PUT2TYPEMAP[this.nowSelIndex+1]);if(r){var h;for(var u in r.OrasTypeLvArr){var c;if(h=r.OrasTypeLvArr[u],l=ur.getItem(parseInt(h.equipID)).basePow,e=W.parseAttrToArr(h.subAttr),""!=h.subAttr)for(var d in e)c=e[d],l+=W.getAttrPowerS(c[0],c[1]);if(Math.floor(l)>Math.floor(o)){i=h;break}}this.btnUp.label="升级"}var p=i?i.needNum-a:999999-a,m=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106);this.txtHas.text=m+"",this.txtNeed1.text="/"+p,this.txtHas.color=p<=m?"#ffe0cf":"#b60202"},e.showCompose=function(t){this.updateSub(t[1]),this.waitCom=!0,ih.show("moduleEffect/cheng2",377,250,this),0<this.secKey&&_t.clearTimeout(this.secKey),this.secKey=_t.setTimeout(this,this.showSec,[322,200,t[0],t[1]],500)},e.showSec=function(t,e,i,s){var n=ur.getItem(s),o=0<this.imgPool.length?this.imgPool.pop():new fh(null,!0,!0,105);o.data=n,o.imgCa.visible=!1,o.pos(t,e),this.addChild(o),ih.show("moduleEffect/hongcheng1",53,50,o);var a=133*Math.floor((i-1)/2)+150,l=(i-1)%2*598+24;ie.to(o,{x:l,y:a},400,A.quintOut,Q.create(this,this.showEnd,[l,a,o],!0))},e.showEnd=function(t,e,i){ih.show("moduleEffect/cheng2",t+55,e+52,this),i.removeSelf(),this.imgPool.push(i),Tr.ins().ignorePowUp=!1,this.update()},e.unDisplay=function(){T.remove("UPDATE_PAL_DATA",this,this.checkRP),T.remove("EQUIP_UPDATE",this,this.update),T.remove("EQUIP_UPGRADE",this,this.showUpgrade),T.remove("EQUIP_COMPOSE",this,this.showCompose),this.off("undisplay",this,this.unDisplay)},e.updateOrangeChip=function(){var t=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106);this.txtHas.text=t+"",this.txtHas.color=t>=this._curSelNum?"#ffe0cf":"#b60202",this.checkRP()},e.createChildren=function(){var t;i.prototype.createChildren.call(this),this.itemArr=[],this.selEff=new et,this.selEff.skin="modules/role/selectedEffect.png",this.selEff.x=-9,this.selEff.y=-10;for(var e=0;e<8;e++)(t=new QD).y=133*Math.floor(e/2)+150,t.x=e%2*598+24,t.putWhere=e+1,t.addChild(this.selEff),t.mouseEnabled=!0,t.nameVisible=!1,this.itemArr.push(t),this.addChild(t);this.itemArr[0].imgSel.addChild(this.selEff),this.nowSelIndex=0,this.on("click",this,this.onMouseDown),this.txtLink.underline=!0,this.txtLink.mouseEnabled=!0,this.txtLink.on("click",this,this.onLinkDown)},e.onMouseDown=function(t){switch(t.target){case this.btnUp:if("升级"==this.btnUp.label||"合成"==this.btnUp.label&&pt.send(5,2,"橙装-合成按钮"),this.spMax.visible)Jt.addTip("橙装已满级!");else if(this.checkLv){if(this.curP){var e=ur.getItem(this.curP.type_id),i=xo.getEquipData();if(5!=e.color&&i.goods.length==i.columns*i.rows)return void Jt.addTip("背包已满，请清理背包!")}"#ffe0cf"==this.txtHas.color?(Tr.ins().ignorePowUp=!0,"合成"==this.btnUp.label?Tr.ins().toEquipCompose(this.recComposeItem,1,this.nowSelIndex+1,this._p_pal.pal_id):Tr.ins().toEquipUp(this._p_pal.base.role_id,this.nowSelIndex+1)):Jt.addTip("合成所需碎片不足!")}else Jt.addTip("合成所需等级不足!");break;default:var s=this.itemArr.indexOf(t.target);0<=s&&(t.target.imgSel.addChild(this.selEff),this.nowSelIndex=s,this.update())}},e.updateNowHas=function(){this._p_pal=pe.getPalByIndex(zl.ins().curActorIndex);for(var t=this._p_pal.equip,e=this.itemArr.length,i=!1,s=0;s<e;s++){var n;for(var o in i=!1,t)(n=t[o]).pos==s+1&&5<=ur.getItem(n.type_id).color&&(this.itemArr[s].data=n.type_id,i=!0);i||(this.itemArr[s].data=0)}},e.update=function(){0==this.waitCom?(this.updateView(),this.checkRP()):this.waitCom=!1},e.updateView=function(){this.recComposeItem=0,this.updateNowHas(),this.curP=oa.getNowEquip(this._p_pal.pal_id,this.nowSelIndex+1);var t,e=0,i=0,s=oa.getOraVO(this._p_pal.ext.category,q.PUT2TYPEMAP[this.nowSelIndex+1]);if(this.curP){var n,o="",a=ur.getItem(this.curP.type_id),l=a.basePow;l+=W.getAddExtraPower(this.curP.extra_attr);for(var r=W.parseAttrToArr(a.attr),h=r.length,u=0;u<h;u++)if(u<r.length){var c;for(var d in t=r[u],n="",this.curP.extra_attr)if(c=this.curP.extra_attr[d],49==t[0]||15==t[0]||16==t[0]){if(49==c.prop_code||15==c.prop_code||16==c.prop_code){n=" +"+c.prop_value;break}}else if(t[0]==c.prop_code){n=" +"+c.prop_value;break}o+=W.getAttrStrByArr(t,"","：",n+"\n")}var p,m,f=NaN;if(s){var _;for(var g in s.OrasTypeLvArr){if(_=s.OrasTypeLvArr[g],f=ur.getItem(parseInt(_.equipID)).basePow,p=W.parseAttrToArr(_.subAttr),""!=_.subAttr)for(y in p)t=p[y],f+=W.getAttrPowerS(t[0],t[1]);if(Math.floor(f)>Math.floor(l)){m=_;break}}if(5==a.color){for(g in this.btnUp.label="升级",e=2,s.OrasTypeLvArr)if(_=s.OrasTypeLvArr[g],parseInt(_.equipID)==this.curP.type_id){i=_.needNum;break}}else this.btnUp.label="合成",e=1}}else if(s){for(g in s.OrasTypeLvArr){var y;if(m=_=s.OrasTypeLvArr[g],f=ur.getItem(parseInt(_.equipID)).basePow,p=W.parseAttrToArr(_.subAttr),""!=_.subAttr)for(y in p)t=p[y],f+=W.getAttrPowerS(t[0],t[1]);break}this.btnUp.label="合成",e=1}if(m){var v="",I="",w=ur.getItem(parseInt(m.equipID));h=(r=W.parseAttrToArr(w.attr)).length;var b=W.parseAttrToArr(m.subAttr);for(u=0;u<h;u++)if(u<r.length){var S;for(var x in t=r[u],n="",b)if(S=b[x],t[0]==S[0]){n=" +"+S[1];break}v+=W.getAttrStrByArr(t,"","：",n+"\n"),I+=t[1]+n+"\n"}2==e?(2==r.length?this.imgArrow.y=258:3==r.length?this.imgArrow.y=277:this.imgArrow.y=296,this.spTwo.visible=!0,this.spOne.visible=!1,this.txtNextPower.text="评分："+Math.floor(f),this.txtNextAttr.text=I,this.txtCurPower.text="评分："+Math.floor(l),this.txtCurAttr.text=o,this._item1=this._item1||new QD,this._item1.data=this.curP.type_id,this._item1.x=201,this._item1.y=200,this._item1.nameVisible=!0,this._item2=this._item2||new QD,this._item2.data=parseInt(m.equipID),this._item2.x=446,this._item2.y=200,this._item2.nameVisible=!0,this.addChild(this._item1),this.addChild(this._item2)):(this.spTwo.visible=!1,this.spOne.visible=!0,this.txtOne.text="属性预览",this.txtPower.text="评分："+Math.floor(f),this.txtAttr.text=v,this._item1=this._item1||new QD,this._item1.data=parseInt(m.equipID),this.addChild(this._item1),this._item1.x=322,this._item1.y=200,this._item1.nameVisible=!0,this._item2&&this._item2.removeSelf()),this._curSelNum=m.needNum,this.recComposeItem=parseInt(m.equipID),this.spMax.visible=!1,this.txtLink.y=709,this.btnUp.visible=this.spNotMax.visible=!0}else this.spMax.visible=!0,this.txtLink.y=768,this.btnUp.visible=this.spNotMax.visible=!1,this.txtOne.text="当前属性",this.spOne.visible=!0,this.spTwo.visible=!1,this._item2&&this._item2.removeSelf(),this.curP?(this._item1=this._item1||new QD,this._item1.data=this.curP.type_id,this.addChild(this._item1),this._item1.x=322,this._item1.y=200,this._item1.nameVisible=!0,this.txtPower.text="评分："+Math.floor(l),this.txtAttr.text=o):(this._item1&&this._item1.removeSelf(),this.txtPower.text="评分：暂无",this.txtAttr.text="属性：暂无"),this._curSelNum=999999;this._curSelNum=0<this._curSelNum-i?this._curSelNum-i:0;var C=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106);this.txtHas.text=C+"",this.txtNeed1.text="/"+this._curSelNum,this.txtHas.color=C>=this._curSelNum?"#ffe0cf":"#b60202",this.checkLv=!!m&&m.lv<=pe.myEquipLevel},e.checkRP=function(){for(var t in this._p_pal=this._p_pal||pe.getPalByIndex(zl.ins().curActorIndex),this.itemArr)this.itemArr[t].imgRP.visible=!1;for(var e,i,s,n=!1,o=xo.getGoodsNumByType(xo.PACKTYPE_GOODS,10201106),a=!1,l=NaN,r=0,h=NaN,u=0,c=0;c<pe.pals.length;c++){a=!1;var d,p=pe.pals[c];for(d in q.ALLPUTSINBODY){u=q.ALLPUTSINBODY[d];var m,f=null,_=null;for(var g in r=h=0,p.equip)if((m=p.equip[g]).pos==u){f=m;break}f&&(h=(_=ur.getItem(f.type_id)).basePow,h+=W.getAddExtraPower(f.extra_attr));var y,v=oa.getOraVO(p.ext.category,q.PUT2TYPEMAP[u]);if(v)for(var I in v.OrasTypeLvArr)if((y=v.OrasTypeLvArr[I]).lv<=pe.myEquipLevel){var w;if(l=ur.getItem(parseInt(y.equipID)).basePow,e=W.parseAttrToArr(y.subAttr),""!=y.subAttr)for(w in e)s=e[w],l+=W.getAttrPowerS(s[0],s[1]);if(Math.floor(l)>Math.floor(h)){i=y;break}}if(i){if(_&&5==_.color)for(I in v.OrasTypeLvArr)if(y=v.OrasTypeLvArr[I],parseInt(y.equipID)==_.id){r=y.needNum;break}i.needNum-r<=o&&(a=a||!0,p==this._p_pal&&(this.itemArr[u-1].imgRP.visible=!0))}i=null}a?Nt.show("RP_ORANGE_UP_"+c):Nt.hide("RP_ORANGE_UP_"+c),n=n||a}n?Nt.show("RP_ORANGE_UP"):Nt.hide("RP_ORANGE_UP")},e.onLinkDown=function(){pt.send(5,3,"橙装-分解橙装功能入口"),T.dispatch("OPEN_ORAN_DECOMP_VIEW")},t}(Sv),$D=function(t){function s(){var t;s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5");var e=oo.ins().ForgeHelpStrs;if(e)for(var i=0;i<4;i++)(t=this["html"+i]).style.valign="top",t.style.leading=17,t.innerHTML=Z.parseStringFont(e[i]);this.on("click",this,this.onClick)}return w(s,"modules.huntTreasure.orangeEquipPurify.RoleEquipPurifyHelpPanel",xv),s.prototype.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow()}},s}(),ZD=function(t){function e(){this._type=0,this._actID=NaN,this._pos=0,this._id=NaN,this._lockState=NaN,this._purifyState=NaN,this._bestArr=null,this.posArray=["攻击加成","物防加成","生命加成","法防加成","暴击加成","韧性加成"],this.state=0,this._p=null,e.__super.call(this)}w(e,"modules.huntTreasure.orangeEquipPurify.RoleOrangeEquipPurifyItem",Cv);var i=e.prototype;return i.onChangeState=function(t){switch(t.target){case this.imgGoldLock1:case this.imgGoldLock2:this._lockState=1==this._lockState?0:1,Tr.ins().toEquipPurifyLock(this._actID,this._pos,this._id,this._lockState);break;case this.imgSilverLock1:case this.imgSilverLock2:this._lockState=2==this._lockState?0:2,Tr.ins().toEquipPurifyLock(this._actID,this._pos,this._id,this._lockState)}},i.setPurifyState=function(t){var e;e=this["txtAttribute"+this.state].text.split("+"),2==t?(e[0]!=this.posArray[this._pos-1]&&"攻击"!=e[0]||1==this._lockState||2==this._lockState?this._purifyState=0:this._purifyState=1,this._bestArr=1==this._purifyState?e[0]:""):3==t&&(e[0]!=this.posArray[this._pos-1]&&"攻击"!=e[0]&&1!=this._lockState||2==this._lockState?this._purifyState=0:this._purifyState=this._p.prop_star>oo.ins().Maxlv-3?2:0,this._bestArr=2==this._purifyState?this["txtAttribute"+this.state].text+"|"+this._p.prop_star:"")},I(0,i,"data",null,function(t){this._p=t,this.state=2<this._type?2:this._type,this["txtAttribute"+this.state].text=oo.ins().getTransName(t.prop_code,t.prop_value),this["txtSLv"+this.state].text="("+t.prop_star+"星)",this["txtAttribute"+this.state].color=this["txtSLv"+this.state].color=oo.ins().setColor(t.prop_star),this._id=t.prop_id,this._lockState=t.prop_lock,3==this._type?1==t.prop_lock?this.imgGoldLock2.skin="modules/huntTreasure/img/goldLock.png":2==t.prop_lock?this.imgGoldLock2.skin="modules/huntTreasure/img/silverLock.png":this.imgGoldLock2.skin=null:(this["imgGoldLock"+this.state].skin=1==this._lockState?"modules/huntTreasure/img/goldLock.png":"modules/huntTreasure/img/goldLockGray.png",this["imgSilverLock"+this.state].skin=2==this._lockState?"modules/huntTreasure/img/silverLock.png":"modules/huntTreasure/img/silverLockGray.png"),this.setPurifyState(this._type)}),I(0,i,"type",null,function(t){1==(this._type=t)?(this.spBig.visible=!0,this.spSmall.visible=!1,this.imgGoldLock1.visible=this.imgSilverLock1.visible=!1,this.spBig.on("click",this,this.onChangeState)):2==t?(this.spBig.visible=!1,this.spSmall.visible=!0,this.spSmall.on("click",this,this.onChangeState)):3==t&&(this.spBig.visible=!1,this.spSmall.visible=!0,this.imgSilverLock2.visible=!1)}),I(0,i,"bestArr",function(){return this._bestArr}),I(0,i,"actID",null,function(t){this._actID=t}),I(0,i,"position",null,function(t){this._pos=t}),I(0,i,"lockState",function(){return this._lockState}),I(0,i,"purifyState",function(){return this._purifyState}),e}(),JD=function(t){function e(){this.actId=NaN,this.position=0,this.pe=null,this.curP=null,this.curEquipVO=null,this.hasReplace=!1,this.isPurify=!1,this.curPurifyItem=null,this.curItemArr=[],this.maxLv=null,this.maxAttrNum=null,this.nextItemArr=[],this.attArr2=[],this.isPurifying=!1,this.curPower=0,this.nextPower=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),T.register("BAGDATA_CHANGE",this,this.updateOrangeChip),T.register("LOAD_ORAN_EQUIP_PURIFY_ATTR",this,this.updateMain),T.register("UPDATE_ORAN_EQUIP_PURIFY_LOCK_STATE",this,this.updateLock),Nt.register("RP_ORANGE_DE_1",this.txtLink,new Tt(29,-14)),Nt.register("RP_ORANGE_DE_2",this.txtLink,new Tt(29,-14)),this.on("undisplay",this,this.unDisplay)}w(e,"modules.huntTreasure.orangeEquipPurify.RoleOrangeEquipPurifyPanel",t);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.unDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.updateOrangeChip),T.remove("LOAD_ORAN_EQUIP_PURIFY_ATTR",this,this.updateMain)},i.createChildren=function(){t.prototype.createChildren.call(this),this.txtLink.underline=!0,this.txtLink.on("click",this,this.onOpenLink),this.on("click",this,this.onClick),T.register("UPDATE_ORAN_EQUIP_PURIFY_REPLACE",this,this.updateReplace)},i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:T.dispatch("CLOSE_ORAN_EQUIP_PURIFY_PANEL"),this.closeWindow();break;case this.btnPurify:var e=oo.ins().nowOrangeChips,i=parseInt(oo.ins().getNeedChip(this.curEquipVO.level)),s=0;if(pe.gold<oo.ins().lockCost)Jt.addTip("您的元宝不足!");else if(e<i)Jt.addTip("洗炼所需碎片不足！");else{var n="锁定消耗："+oo.ins().lockCost;if(this.isPurifying){this.purifyAlert(2,this.attArr2,n);break}for(var o=[],a=0,l=0;l<this.curItemArr.length;l++){if(1==this.curItemArr[l].purifyState){var r=this.curItemArr[l].bestArr;""!=r&&-1==o.indexOf(r)&&0==this.curItemArr[l].lockState&&(o[a]=r,a++)}2==this.curItemArr[l].lockState&&s++}if(0<o.length){this.purifyAlert(1,o,n);break}if(s>=parseInt(this.maxAttrNum))Jt.addTip("所有属性均被锁住，可改用金锁或进行解锁");else if(0<oo.ins().lockCost){var h=Z.span("本次洗炼需花费","#5d3924",26)+Z.span(oo.ins().lockCost+"元宝","#fff959")+Z.span("洗炼属性，是否进行？","#5d3924",26);Lo.showSecAlert(h,this,this.toPurify,null,"equipForgePanel")}else this.toPurify()}break;case this.btnReplace:if(this.hasReplace)Jt.addTip("当前无可替换的洗炼属性");else{if(this.nextPower<this.curPower){this.purifyAlert(3,[]);break}this.toReplace()}}},i.toPurify=function(){Tr.ins().toEquipPurify(this.actId,this.position)},i.toReplace=function(){this.hasReplace=!0,this.isPurifying=!1,this.attArr2=[],Tr.ins().toEquipPurifyReplace(this.actId,this.position)},i.purifyAlert=function(t,e,i){void 0===i&&(i="");var s=new Ee,n="";if(1==t)n=1==e.length?Z.font(e[0],"#b60202",24):"攻击"==e[0]?Z.font(e[0]+"、"+e[1],"#b60202",24):Z.font(e[1]+"、"+e[0],"#b60202",24),s.msg=Z.font("当前洗练效果已有极品属性：","#5d3924",24)+n+Z.font("，推荐进行上锁！您可以","#5d3924",24)+"<br>"+Z.font("使用银锁：锁住","#5d3924",24)+Z.font("属性类型和星级","#bd5713",24)+"<br>"+Z.font("使用金锁：锁住","#5d3924",24)+Z.font("属性类型","#bd5713",24),s.yesFun=this.toPurify,s.yesLabel="继续洗练",s.key="OrangeEquipPurify1";else if(2==t){for(var o=0;o<e.length;o++){var a=e[o].split("|"),l=oo.ins().setColor(a[1]),r=oo.ins().Maxlv;n+="<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"+Z.font(a[0],l,24)+"&nbsp;&nbsp;&nbsp;"+Z.font(a[1]+"星",l,24)+"&nbsp;"+Z.font("(当前最高星级","#5d3924",24)+Z.font(r+"","#5d3924",24)+Z.font("星)","#5d3924",24)}s.msg=Z.font("预览属性已洗练获得当前高星级属性，是否继续洗练？","#5d3924",24)+n,s.yesFun=this.toPurify,s.yesLabel="继续洗练",s.height=210+60*(e.length-1),s.key="OrangeEquipPurify2"}else s.msg=Z.font("预览洗炼效果战斗力","#5d3924",24)+Z.font("低于","#bd5713",24)+Z.font("当前洗炼效果战斗力，是否继续替换？","#5d3924",24),s.yesFun=this.toReplace,s.yesLabel="继续替换",s.key="OrangeEquipPurify3";s.yesCaller=this,s.yesArgs=[],s.yesConsume=i,EF.showVO(s)},i.data=function(t){this.hasReplace=!1,this.isPurify=!0,this.isPurifying=!1,this.attArr2=[],this.pe=t,this.pe.purify_list&&this.updateCurAttr(this.pe.purify_list),this.pe.tmp_purify_list&&this.updateNextAttr(this.pe.tmp_purify_list),this.update()},i.update=function(){this.updateView()},i.updateView=function(){var t=oo.ins().nowOrangeChips;this.txtHas.text=t+""},i.updateReplace=function(t){ih.show("moduleEffect/purify2",382,326,this),this.updateCurAttr(t.tmp_purify_list),this.updateNextAttr(null)},i.updateCurAttr=function(t){this.txtNon1.visible=null==t||t.length<=0;var e=0;if(null!=this.curItemArr){var i;for(var s in this.curItemArr)i=this.curItemArr[s],this.removeChild(i);this.curItemArr=[]}if(this.updateCurPower(t),(oo.ins().lock=t).sort(oo.ins().equipPurifyAttrSort),t&&0<t.length){e=t.length;for(var n=0;n<e;n++)this.curPurifyItem=new ZD,this.curPurifyItem.type=2,this.curPurifyItem.actID=this.actId,this.curPurifyItem.position=this.position,this.curPurifyItem.data=t[n],this.curPurifyItem.pos(29,220+42*n),this.addChild(this.curPurifyItem),this.curItemArr.push(this.curPurifyItem)}this.curEquipVO&&(this.maxLv=oo.ins().getMaxLv(this.curEquipVO.level),oo.ins().Maxlv=parseInt(this.maxLv),this.txtMaxLv.text=this.maxLv+"星",this.txtMaxLv.color=oo.ins().setColor(parseInt(this.maxLv)),this.maxAttrNum=oo.ins().getMaxAttr(this.curEquipVO.level),this.txtMaxNum.text=e+"/"+this.maxAttrNum),this.updateGoldsCost()},i.updateNextAttr=function(t){this.txtNon2.visible=null==t||t.length<=0;var e,i=0;if(null!=this.nextItemArr)for(var s in this.nextItemArr)e=this.nextItemArr[s],this.removeChild(e);this.updateNextPower(t),t&&0<t.length&&t.sort(oo.ins().equipPurifyAttrSort);var n=0;if(t&&0<t.length){i=t.length;for(var o=0;o<i;o++){this.curPurifyItem=new ZD,this.curPurifyItem.type=3,this.curPurifyItem.position=this.position,this.curPurifyItem.data=t[o],this.isPurify&&ih.confineShow("moduleEffect/purify1",null,567,240+42*o,this),this.curPurifyItem.pos(420,220+42*o),this.addChild(this.curPurifyItem),this.nextItemArr.push(this.curPurifyItem);var a=this.curPurifyItem.bestArr;""!=a&&(this.attArr2[n]=a,n++)}0<this.attArr2.length&&(this.isPurifying=!0)}},i.updateCurPower=function(t){var e,i;this.curPower=oo.ins().getPower(t),this.spCurPower.graphics.clear(),i=k.numToTexture(Math.floor(this.curPower),"com/ui/powerNum");for(var s=0;s<i.length;s++)e=i[s],this.spCurPower.graphics.drawTexture(e,e.width*s)},i.updateNextPower=function(t){var e,i;this.nextPower=oo.ins().getPower(t),this.spNextPower.graphics.clear(),i=k.numToTexture(Math.floor(this.nextPower),"com/ui/powerNum");for(var s=0;s<i.length;s++)e=i[s],this.spNextPower.graphics.drawTexture(e,e.width*s)},i.updateOrangeChip=function(){var t=oo.ins().nowOrangeChips,e=parseInt(oo.ins().getNeedChip(this.curEquipVO.level));this.txtHas.text=t+"",this.txtHas.color=e<t?"#e1c6bc":"#b60202",this.txtNeed.text="/"+e},i.updateMain=function(t){T.remove("LOAD_ORAN_EQUIP_PURIFY_ATTR",this,this.updateMain),this.isPurify=!1,this.updateCurAttr(t.purify_list),oo.ins().checkIsSame(t.purify_list,t.tmp_purify_list)?(this.hasReplace=!0,this.updateNextAttr(null)):(this.hasReplace=!1,this.updateNextAttr(t.tmp_purify_list)),this.updateOrangeChip()},i.updateLock=function(t){this.updateCurAttr(t.purify_list)},i.updateGoldsCost=function(){var t=oo.ins().lockCost;this.txtUseNum.text=t+""},i.onOpenLink=function(){T.dispatch("OPEN_ORAN_DECOMP_VIEW")},I(0,i,"actID",null,function(t){this.actId=t}),I(0,i,"curEquip",null,function(t){this.curP=t,this.curEquipVO=ur.getItem(this.curP.type_id)}),I(0,i,"equipPos",null,function(t){this.position=t}),e}(Pv),tN=function(i){function t(){this.selEff=null,this.itemArr=null,this.nowSelIndex=0,this.curEquip=null,this.attrArr=null,this.curP=null,this.curEquipVO=null,this._p_pal=null,this.pEquip=null,this.forgeHelpPanel=null,this.attrItemArr=[],this.rolePurifyItem=null,this.maxLv=null,this.maxAttrNum=null,t.__super.call(this),this.on("display",this,this.onDisplay),vF.getOne(6,190,130,this)}w(t,"modules.huntTreasure.orangeEquipPurify.RoleOrangeEquipPurifyView",i);var e=t.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){Nt.register("RP_ORANGE_DE_1",this.txtLink,new Tt(29,-14)),Nt.register("RP_ORANGE_DE_2",this.txtLink,new Tt(29,-14)),T.register("UPDATE_PAL_DATA",this,this.checkRP),T.register("BAGDATA_CHANGE",this,this.updateOrangeChip),T.register("LOAD_ORAN_EQUIP_PURIFY_ATTR",this,this.updateMainSp),T.register("CLOSE_ORAN_EQUIP_PURIFY_PANEL",this,this.update),T.register("RPMASK_INFO_UPDATE",this,this.checkRP),this.on("undisplay",this,this.unDisplay)},e.unDisplay=function(){T.remove("UPDATE_PAL_DATA",this,this.checkRP),T.remove("BAGDATA_CHANGE",this,this.updateOrangeChip),T.remove("LOAD_ORAN_EQUIP_PURIFY_ATTR",this,this.updateMainSp),T.remove("CLOSE_ORAN_EQUIP_PURIFY_PANEL",this,this.update),T.remove("RPMASK_INFO_UPDATE",this,this.checkRP),this.off("undisplay",this,this.unDisplay)},e.createChildren=function(){var t;i.prototype.createChildren.call(this),this.itemArr=[],this.selEff=new et,this.selEff.skin="modules/role/selectedEffect.png",this.selEff.x=-9,this.selEff.y=-10;for(var e=0;e<8;e++)(t=new QD).y=133*Math.floor(e/2)+128,t.x=e%2*598+24,t.putWhere=e+1,t.addChild(this.selEff),t.mouseEnabled=!0,t.nameVisible=!1,this.itemArr.push(t),this.addChild(t);this.itemArr[0].imgSel.addChild(this.selEff),this.attrArr=[],this.nowSelIndex=0,this.curEquip=new QD,this.addChild(this.curEquip),this.curEquip.x=322,this.curEquip.y=163,this.on("click",this,this.onMouseDown),this.txtLink.underline=!0,this.txtLink.mouseEnabled=!0,this.txtLink.on("click",this,this.onOpenLink)},e.onMouseDown=function(t){switch(t.target){case this.btnUp:this.curEquipVO&&5==this.curEquipVO.color?this.openPurifyPanel():Jt.addTip("当前部位未装备橙装，无法进行洗炼");break;case this.imgHelp:this.onShowTip();break;default:var e=this.itemArr.indexOf(t.target);0<=e&&(t.target.imgSel.addChild(this.selEff),this.nowSelIndex=e,this.update())}},e.openPurifyPanel=function(){Tr.ins().openEquipPurifyPanel(this.curP,this._p_pal.pal_id,this.curP.pos)},e.update=function(){this.updateView()},e.updateView=function(){this.updateNowHas(),this.updateMidEquip(),this.curP=oa.getNowEquip(this._p_pal.pal_id,this.nowSelIndex+1),this.curP?(this.curEquipVO=ur.getItem(this.curP.type_id),Tr.ins().toEquipPurifyLoad(this._p_pal.pal_id,this.curP.pos)):(this.curEquipVO=null,this.updateMainSp()),this.checkRP();var t=oo.ins().nowOrangeChips;this.txtHas.text=t+""},e.updateNowHas=function(){this._p_pal=pe.getPalByIndex(zl.ins().curActorIndex),this.pEquip=this._p_pal.equip;for(var t=!1,e=0;e<this.itemArr.length;e++){var i;for(var s in t=!1,this.pEquip)(i=this.pEquip[s]).pos==e+1&&5<=ur.getItem(i.type_id).color&&(this.itemArr[e].data=i.type_id,t=!0);t||(this.itemArr[e].data=0)}},e.updateMidEquip=function(){var t;for(var e in this.curEquip.putWhere=this.nowSelIndex+1,this.pEquip)if((t=this.pEquip[e]).pos==this.nowSelIndex+1)return void(5<=ur.getItem(t.type_id).color?this.curEquip.data=t.type_id:this.curEquip.data=0);this.curEquip.data=0},e.updateOrangeChip=function(){var t=oo.ins().nowOrangeChips,e=0;this.curEquipVO&&5==this.curEquipVO.color&&(e=parseInt(oo.ins().getNeedChip(this.curEquipVO.level))),this.txtHas.text=t+"",this.txtHas.color=e<t?"#e1c6bc":"#b60202",this.txtNeed.text="/"+e,this.checkRP()},e.updatePower=function(t){void 0===t&&(t=[]);var e,i=oo.ins().getPower(t),s=k.numToTexture(Math.floor(i),"com/ui/powerNum");this.spPower.graphics.clear();for(var n=0;n<s.length;n++)e=s[n],this.spPower.graphics.drawTexture(e,e.width*n)},e.onShowTip=function(){this.forgeHelpPanel=this.forgeHelpPanel||new $D,this.forgeHelpPanel.openWindow()},e.onOpenLink=function(){T.dispatch("OPEN_ORAN_DECOMP_VIEW")},e.updateMainSp=function(t){void 0===t&&(t=[]);var e=0,i=t;if(null!=this.attrItemArr){var s;for(var n in this.attrItemArr)s=this.attrItemArr[n],this.removeChild(s);this.attrItemArr=[]}if(i&&i.pos==this.nowSelIndex+1)if(oo.ins().lock=i.purify_list,this.updatePower(i.purify_list),0<i.purify_list.length){e=i.purify_list.length,i.purify_list.sort(oo.ins().equipPurifyAttrSort);for(var o=0;o<e;o++)this.rolePurifyItem=new ZD,this.rolePurifyItem.type=1,this.rolePurifyItem.actID=this._p_pal.pal_id,this.rolePurifyItem.position=this.curP.pos,this.rolePurifyItem.data=i.purify_list[o],this.attrItemArr.push(this.rolePurifyItem),this.rolePurifyItem.pos(193,413+37*o),this.addChild(this.rolePurifyItem);this.sp.visible=!0,this.txtNon.visible=!1}else this.sp.visible=!1,this.txtNon.visible=!0;else this.updatePower(),this.sp.visible=!1,this.txtNon.visible=!0;this.curEquipVO?(this.txtAttr.visible=this.txtSLv.visible=!0,this.maxLv=oo.ins().getMaxLv(this.curEquipVO.level),this.txtMaxLv.text=this.maxLv+"星",this.txtMaxLv.color=oo.ins().setColor(parseInt(this.maxLv)),this.maxAttrNum=oo.ins().getMaxAttr(this.curEquipVO.level),this.txtMaxNum.text=e+"/"+this.maxAttrNum):this.txtAttr.visible=this.txtSLv.visible=!1,this.updateOrangeChip()},e.checkRP=function(){for(var t in this.itemArr)this.itemArr[t].imgRP.visible=!1;for(var e=!1,i=!1,s=0,n=0,o=0,a=0;a<pe.pals.length;a++){i=!1;var l,r=pe.pals[a];for(l in q.ALLPUTSINBODY){s=q.ALLPUTSINBODY[l];for(var h=null,u=null,c=0;c<r.equip.length;c++)if(r.equip[c].pos==s){h=r.equip[c];break}if(h&&(u=ur.getItem(h.type_id),n=oo.ins().nowOrangeChips,u&&5==u.color&&(o=parseInt(oo.ins().getNeedChip(u.level))),5==u.color&&o<=n)){i=i||!0;var d=ha.checkIsPing(6,a,h.pos-1);if(r==this._p_pal&&!d){var p=oo.ins().getCurEquipPurifyAttr(r.pal_id,s);if(p&&6<=p.length){for(var m=parseInt(oo.ins().getMaxLv(u.level)),f=!0,_=0;_<p.length;_++){var g=p[_];if(m>g.prop_star||2!=g.prop_lock){f=!1;break}}this.itemArr[s-1].imgRP.visible=!f}else this.itemArr[s-1].imgRP.visible=!0}}}i&&!d?Nt.show("RP_ORANGE_PU_"+a):Nt.hide("RP_ORANGE_PU_"+a),e=e||i}e&&pe.user.attr.regrow>=oo.ins().limitLv&&!d?Nt.show("RP_ORANGE_PU"):Nt.hide("RP_ORANGE_PU")},t}(Tv),eN=function(t){function e(){this.glowFilter=null,this._data=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.glowFilter=this.glowFilter||new Y("#ffff00",3,0,0)}w(e,"modules.icon.actPrew.ActPreItem",t);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),_t.addToSecond(this,this.onSecond)},i.onSecond=function(){if(this._data){var t=this._data.checkCanJoin();if(""==t){var e=new Date(ya.serverTimeMs).getDay();if(0<=this._data.pday.indexOf(e)){var i=new Date;i.setTime(1e3*ya.serverTime);for(var s,n=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds(),o=-1,a=0;a<this._data.ptimeArr.length;a++)if(n>=(s=this._data.ptimeArr[a])[0]&&n<s[1]){o=a;break}if(o<0)(s=this._data.ptimeArr[this._data.ptimeArr.length-1])[0]>n&&s[0]-n<=1800?(this.txtDesc.color="#fd8e8e",this.txtDesc.text=x.formatTime(s[0]-n)):(this.txtDesc.color="#e1c6bc",this.txtDesc.text=this._data.openDesc);else{var l=!0;1==this._data.id?l=!ao.getActEnd(1):4==this._data.id&&(l=ao.getActEnd(2)),l?(this.txtDesc.color="#fd8e8e",this.txtDesc.text=this._data.piconDesc[o]):(this.txtDesc.color="#fd8e8e",this.txtDesc.text=this._data.openDesc)}}else this.txtDesc.color="#e1c6bc",this.txtDesc.text=this._data.openDesc,_t.removeFromSceond(this,this.onSecond)}else this.txtDesc.text=t}else _t.removeFromSceond(this,this.onSecond)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),_t.removeFromSceond(this,this.onSecond)},I(0,i,"select",null,function(t){}),I(0,i,"data",function(){return this._data}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&(this.imgIcon.skin="modules/actPre/icon"+this._data.id+".png",this.onSecond(),_t.addToSecond(this,this.onSecond))}),e}(kv),iN=function(t){function e(){this._selID=0,this.items=null,this.dataVO=null,e.__super.call(this),this.setWindowType(),this.list.itemRender=eN,this.list.renderHandler=Q.create(this,this.renderHan),this.list.repeatX=4,this.list.spaceX=0,this.list.pos(109,757),this.list.height=120,this.html1.style.valign="top",this.html1.style.leading=12,this.html2.style.valign="top",this.html2.style.leading=12,this.html3.style.valign="top",this.html3.style.leading=12,this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.icon.actPrew.ActPreView",Av);var i=e.prototype;return i.renderHan=function(t,e){var i=t;i.select=i.data.id==this.selID},i.onClick=function(t){switch(t.target){case this.btnCLose2:case this.btnClose:this.closeWindow();break;case this.btnLeft:var e=this.list.page;0<e&&(this.list.page=e-1);break;case this.btnRight:e=this.list.page,this.list.page<Math.ceil(ao.actPrewArr.length/4)-1&&(this.list.page=this.list.page+1);break;case this.btnEnter:if(this.dataVO){var i=parseInt(this.btnEnter.name.substr(4,this.btnEnter.name.length-4));me.linkTo(i),this.closeWindow()}break;default:t.target instanceof modules.icon.actPrew.ActPreItem&&t.target.data&&(this.selID=t.target.data.id)}},i.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),_t.addToSecond(this,this.onSecond),ao.sortActPrew(),this._selID=-1},i.onSecond=function(){if(this.dataVO){var t=new Date(ya.serverTimeMs).getDay(),e=this.dataVO.checkCanJoin();if(""==e)if(0<=this.dataVO.pday.indexOf(t)){var i=new Date;i.setTime(1e3*ya.serverTime);for(var s,n=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds(),o=-1,a=0;a<this.dataVO.ptimeArr;a++)if(n>=(s=this.dataVO.ptimeArr[a])[0]&&n<s[1]){o=a;break}if(o<0)(s=this.dataVO.ptimeArr[this.dataVO.ptimeArr.length-1])[0]>n&&s[0]-n<=10800?(this.txtState.color="#fd8e8e",this.txtState.text=x.formatTime(s[0]-n),this.btnEnter.label="即将开启"):(this.txtState.text="",this.btnEnter.label="前往"),this.btnEnter.name="btn#"+this.dataVO.plinkArr[0];else{var l=!0;1==this.dataVO.id?l=!ao.getActEnd(1):4==this.dataVO.id&&(l=ao.getActEnd(2)),l?(this.txtState.color="#fd8e8e",this.txtState.text=this.dataVO.pstateArr[o],this.btnEnter.label="进入",this.btnEnter.name="btn#"+this.dataVO.plinkArr[o]):(this.txtState.text="",this.btnEnter.label="前往",this.btnEnter.name="btn#"+this.dataVO.plinkArr[0])}}else this.txtState.text="",this.btnEnter.label="前往",this.btnEnter.name="btn#"+this.dataVO.plinkArr[0];else this.txtState.color="#e1c6bc",this.btnEnter.label="前往",this.txtState.text=e,this.btnEnter.name="btn#"+this.dataVO.plinkArr[0]}},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),_t.removeFromSceond(this,this.onSecond)},i.updateTop=function(){if(this.dataVO){var t;3==this.dataVO.id?this.imgBg.skin="modules/actPre/img/bg2.png":this.imgBg.skin="modules/actPre/img/bg"+this.dataVO.id+".png",this.items=this.items||[];for(var e=Math.max(this.dataVO.pRw.length,this.items.length),i=(760-135*(this.dataVO.pRw.length-1)-105)/2,s=0;s<e;s++)s<this.dataVO.pRw.length?(this.items[s]=this.items[s]||new Ah(91,91,!0,!0,!0,!1,91),(t=this.items[s]).dataSource=this.dataVO.pRw[s],t.pos(i+135*s,557),this.box.addChild(t)):this.items[s]&&this.items[s].parent&&this.items[s].removeSelf();this.html1.innerHTML=Z.font("简介：","#fdc06a")+Z.font(this.dataVO.pTxt[0],"#e1c6bc"),this.html2.y=this.html1.y+this.html1.contextHeight+20,this.html2.innerHTML=Z.font("时间：","#fdc06a")+Z.font(this.dataVO.pTxt[1],"#e1c6bc"),this.html3.y=this.html2.y+this.html2.contextHeight+20,this.html3.innerHTML=Z.font("规则：","#fdc06a")+Z.font(this.dataVO.pTxt[2],"#e1c6bc"),this.txtTitle.text=this.dataVO.title}},i.update=function(){var t,e=ao.actPrewArr,i=[],s=new Date(ya.serverTimeMs).getDay();for(var n in e)(t=e[n]).checkServerOpenedOpen()&&Dn.isFirstServerOpenDay()&&0<=t.pday.indexOf(s)||i.push(t);this.list.dataSource=i,this._selID<=0&&(this.selID=i[0].id)},I(0,i,"selID",function(){return this._selID},function(t){var e;for(var i in this._selID=t,ao.actPrewArr)if((e=ao.actPrewArr[i]).id==this._selID){this.dataVO=e;break}this.list.refresh(),this.updateTop(),this.onSecond()}),e}(),sN=function(t){function l(){this._data=null,this.flashEff=null,this.iconID=0,this.posX=NaN,this.posY=NaN,this.showTipSp=null,this.isFrameing=!1,this.floatTipDir=0,this.floatSpeed=.8,this.cdEndTime=0,this.showType="",this.limitTime=new jt,l.__super.call(this),this.on("mousedown",this,this.onMouseDown),this.on("mouseup",this,this.onMouseUp),this.on("mouseout",this,this.onMouseOut),this.on("mouseover",this,this.onMouseOver),this.on("undisplay",this,this.onUnDisplay),this.flashEff=b.getOne(),this.addChild(this.flashEff)}w(l,"modules.icon.view.IconItem",t);var e=l.prototype;return e.onMouseOver=function(t){h.superSet(Ev,this,"y",this.posY-3),this.showBlueVipTip()},e.onMouseOut=function(t){this.img.scale(1,1),h.superSet(Ev,this,"y",this.posY),this.unShowBlueVipTip()},e.onMouseUp=function(t){this.img.scale(1,1),h.superSet(Ev,this,"y",this.posY),this.unShowBlueVipTip()},e.onUnDisplay=function(){this.cleanFloatTip()},e.onMouseDown=function(t){this.unShowBlueVipTip(),this._data&&(this.img.scale(.9,.9),ao.getIconFlashState(this.iconID)&&(ao.updateIconFlash(this.iconID,!1),this.updateFlashEff(),this.hiedFloatTip()),0<this._data.logType&&pt.send(this._data.logType,1,this._data.name+"入口"))},e.showBlueVipTip=function(){ao.isBlueDiamonIcons(this.iconID)&&T.dispatch("SHOW_BULE_DIAMON_TIP",this.iconID)},e.unShowBlueVipTip=function(){ao.isBlueDiamonIcons(this.iconID)&&T.dispatch("UN_SHOW_BULE_DIAMON_TIP")},e.updateRP=function(){this.redPoint=ao.checkIconRedPoint(this._data.id)},e.updateData=function(t){this.iconID=t,this._data=ao.getIconVO(this.iconID)},e.updateImgSkin=function(){var t=ao.getIconSpcState(this._data.id);t?114==this._data.id?(this.img.skin="modules/icon/"+this._data.realImgUrl+"_"+ao.getIconTimeVO(t).id+".png",ao.getIconTimeVO(t)?(this.onSec(),this.txtDesc.visible=!0,this.txtDesc.color="#E1C6BC",_t.addToSecond(this,this.onSec)):(this.txtDesc.visible=!1,this.removeSpcSceond())):(this.removeSpcSceond(),this.txtDesc.visible=!1,this.img.skin="modules/icon/"+this._data.realImgUrl+"_"+t+".png"):(this.removeSpcSceond(),this.txtDesc.visible=!1,Bt.isFanTi&&5002==this._data.id?this.img.skin="modules/icon/"+this._data.realImgUrl+"_ft.png":this.img.skin="modules/icon/"+this._data.realImgUrl+".png");Bt.isZKPf9991Server()&&(this.img.skin="modules/icon/105_zk.png")},e.removeSpcSceond=function(){_t.removeFromSceond(this,this.onSec)},e.updateActPrewState=function(){this.updateImgSkin()},e.onSec=function(){if(114==this._data.id){var t=ao.getIconSpcState(this._data.id);if(0<t){var e=ao.getIconTimeVO(t),i=new Date;i.setTime(1e3*ya.serverTime);var s=60*i.getHours()*60+60*i.getMinutes()+i.getSeconds();this.txtDesc.pos(this.x-(this.txtDesc.width-this.width)/2,this.y+80),e.end>s?(1==e.type?this.txtDesc.text=x.formatTime(e.end-s):(6==e.id?Nt.show("RP_BATTEL_FIELD"):Nt.hide("RP_BATTEL_FIELD"),this.txtDesc.text="进行中"),_t.addToSecond(this,this.onSec)):(6==e.id?Nt.show("RP_BATTEL_FIELD"):Nt.hide("RP_BATTEL_FIELD"),this.txtDesc.text="进行中")}}},e.updateSize=function(){var t=ut.getRes(this.img.skin),e=t?t.width:106,i=t?t.height:93,s=(this.width-e)/2;this.img.pivotX=e/2,this.img.x=s+e/2,this.img.pivotY=i/2,this.img.y=0+i/2,this.flashEff.pos(s+this.img.pivotX,0+i/2)},e.updateFlashEff=function(){if(1==this._data.flash&&(0==this._data.openLv||0<this._data.openLv&&pe.myLevel>=this._data.openLv))if(0==ao.isExistIconFlash(this.iconID)){if(5004==this.iconID){if(S.window.isFbEffectShow)return;if(S.window.Eyouios&&1==S.window.Eyouios.isShowFb)return}ao.addIconFlash(this.iconID),this.setFlashVisAndPlayActByIconId(this.iconID)}else ao.getIconFlashState(this.iconID)?this.setFlashVisAndPlayActByIconId(this.iconID):0==ao.getIconFlashState(this.iconID)&&this.stopFlashEffPlayAndUnVis();else this.stopFlashEffPlayAndUnVis()},e.setFlashVisAndPlayActByIconId=function(t){void 0===t&&(t=0),this.flashEff.visible=!0,4012==t||1009==t?this.flashEff.loadAndPlay("unit/effect/tubiao","default",0,!0):this.flashEff.loadAndPlay("ICON_FLASH_EFF_URL","default",0,!0)},e.stopFlashEffPlayAndUnVis=function(){this.flashEff.visible=!1,this.flashEff.stop()},e.showFloatTip=function(t,e){if(void 0===t&&(t=0),void 0===e&&(e=2),!(null!=this.showTipSp&&this.showTipSp.parent||0==t)){switch(this.showTipSp=this.showTipSp||new Wt,t){case 999901:var i=new et;i.pos(50,0),i.skin="modules/icon/upArrow.png";var s=new et;s.pos(0,21),s.skin="modules/icon/txtLuckyDay.png",this.showTipSp.addChild(i),this.showTipSp.addChild(s);break;case 999902:var n=new et;n.skin="modules/icon/txtTen.png",this.showTipSp.addChild(n);break;case 999903:var o=new et;o.pos(50,0),o.skin="modules/icon/upArrow.png";var a=new et;a.pos(20,20),a.skin="modules/icon/txtRoleLevelLimitGift.png",this.showTipSp.addChild(o),this.showTipSp.addChild(a)}this.addChild(this.showTipSp),0!=e&&(this.floatTipDir=e,this.showTipSp.pos(l.FLOAT_POS[e-1].x,l.FLOAT_POS[e-1].y)),this.showTipSp.visible=!0,0==this.isFrameing&&(this.isFrameing=!0,_t.addToFrame(this,this.showFloatTipFrame))}},e.hiedFloatTip=function(){this.showTipSp&&this.showTipSp.parent&&(this.showTipSp.visible=!1,1==this.isFrameing&&(_t.removeFromFrame(this,this.showFloatTipFrame),this.isFrameing=!1))},e.cleanFloatTip=function(){1==this.isFrameing&&_t.removeFromFrame(this,this.showFloatTipFrame),this.showTipSp&&this.showTipSp.parent&&(this.showTipSp.removeSelf(),this.showTipSp=null),this.isFrameing=!1},e.showFloatTipFrame=function(){if(0!=this.floatTipDir)switch(this.floatTipDir){case 2:this.showTipSp.y<80?this.showTipSp.y=80:100<this.showTipSp.y&&(this.showTipSp.y=90),this.showTipSp.y+=this.floatSpeed,(this.showTipSp.y<=80||100<=this.showTipSp.y)&&(this.floatSpeed*=-1);break;case 3:this.showTipSp.x<-60?this.showTipSp.x=-60:-40<this.showTipSp.x&&(this.showTipSp.x=-45),this.showTipSp.x+=this.floatSpeed,(this.showTipSp.x<=-60||-40<=this.showTipSp.x)&&(this.floatSpeed*=-1);break;case 1:this.showTipSp.y<-80?this.showTipSp.y=-80:-60<this.showTipSp.y&&(this.showTipSp.y=-65),this.showTipSp.y+=this.floatSpeed,(this.showTipSp.y<=-80||-60<=this.showTipSp.y)&&(this.floatSpeed*=-1);break;case 4:this.showTipSp.x<90?this.showTipSp.x=90:110<this.showTipSp.x&&(this.showTipSp.x=100),this.showTipSp.x+=this.floatSpeed,(this.showTipSp.x<=90||110<=this.showTipSp.x)&&(this.floatSpeed*=-1)}},e.updateJuBaoTime=function(){_t.addToSecond(this,this.updateJuBaoTime);var t=86400-(ya.serverTime%86400+28800);this.limitTime.fontSize=24,this.limitTime.color="#00ff00",this.limitTime.pos(0,80),this.addChild(this.limitTime),this.limitTime.text=0<=t?3600<=t?x.formatDHMS(t,!1,!1):x.formatDHMS(t,!1,!0,!1):3600<=86400+t?x.formatDHMS(86400+t,!1,!1):x.formatDHMS(86400+t,!1,!0,!1)},e.clearJuBaoTime=function(){_t.removeFromSceond(this,this.updateJuBaoTime),this.removeChild(this.limitTime)},e.showCoolDown=function(t,e){this.unShowCoolDown(),this.txtDesc.visible=!0,this.cdEndTime=t,this.showType=e,_t.addToSecond(this,this.cdTimeLoop)},e.unShowCoolDown=function(){this.txtDesc.text="",this.showType="",this.txtDesc.visible=!1,this.cdEndTime=0,_t.removeFromSceond(this,this.cdTimeLoop)},e.cdTimeLoop=function(){var t=x.formatDHMSArrStr(this.cdEndTime-ya.serverTime),e=parseInt(t[0]),i=parseInt(t[1]),s=parseInt(t[2]),n=parseInt(t[3]);124==this.iconID&&console.log("狐仙时间：",this.cdEndTime,ya.serverTime,t,e,i,s,n,"this.showType",this.showType),0!=(e||i||s||n)?("dh"==this.showType&&(this.txtDesc.text=e?e+"天"+i+"小时":i?i+"小时"+s+"分":s+"分"+n+"秒"),this.txtDesc.pos(this.x-(this.txtDesc.width-this.width)/2,this.y+80)):this.unShowCoolDown()},e.setIconTexture=function(t){this.img.source=t},e.openLink=function(){this.data&&(0<this.data.openLv&&this.data.openLv>pe.myLevel?Jt.addTip(this.data.openLv+"级开放"):me.linkTo(this.data.linkID))},I(0,e,"x",t.prototype._$get_x,function(t){this.posX=t,h.superSet(Ev,this,"x",t)}),I(0,e,"y",t.prototype._$get_y,function(t){this.posY=t,h.superSet(Ev,this,"y",t)}),I(0,e,"dataSource",t.prototype._$get_dataSource,function(t){t&&(this.updateData(t),this._data&&(this.updateImgSkin(),this.updateFlashEff(),this.updateSize(),this.updateRP()))}),I(0,e,"data",function(){return this._data}),I(0,e,"redPoint",null,function(t){this.imgRp.visible=t,Bt.isQQyxdt()&&5007==this.iconID&&(this.img.skin=this.imgRp.visible?"modules/icon/5007.png":"modules/icon/5007_1.png")}),l.ICON_FLASH_EFF_URL="ICON_FLASH_EFF_URL",l.IMG_SCALE=.9,_(l,["FLOAT_POS",function(){return this.FLOAT_POS=[{x:-20,y:-80},{x:-20,y:80},{x:-60,y:-20},{x:90,y:20}]}]),l}(Ev),nN=function(t){function e(){this.moreItem=null,this.speed=.8,this.itemArr=null,this._dataArr=null,this.tempArr=null,this.deleteIconId=0,this.isClickLevelLimit=!1,this.luckySpeed=.8,e.__super.call(this),this.panel.refresh(),this.on("click",this,this.onSelect),Bt.isZKPf9991Server()||Bt.isQiYuIos()||G.isReviewVersion?this.hideTip():this.showTip(),this.hideLuckyDayTip()}w(e,"modules.icon.view.IconList",Rv);var i=e.prototype;return i.update=function(){this.updateItem()},i.deleteIconInData=function(){if(0!=this.deleteIconId)for(var t=0;t<this._dataArr.length;t++)this._dataArr[t]==this.deleteIconId&&this._dataArr.splice(t,1)},i.showMoveIcon=function(t){t&&-1==this._dataArr.indexOf(5016)&&this.addIcon(5016)},i.hideMoveIcon=function(){},i.updateItem=function(){if(this.deleteIconInData(),yt.isWX||yt.isQQ)if(ya.getChargeOpen())this.dataArr=ao.topIconListData;else{for(var t=[],e=0,i=ao.topIconListData.length;e<i;e++)ao.getIsCanShowByChargeIcon(ao.topIconListData[e])||t.push(ao.topIconListData[e]);this.dataArr=t,this.hideTip()}else this.dataArr=ao.topIconListData;this.itemArr=this.itemArr||[];var s,n,o=Math.max(this._dataArr.length,this.itemArr.length),a=0,l=92,r=0,h=102;this.panel.removeChildren(),ao.refreshMoreData();for(var u=0;u<o;u++)if(u<this._dataArr.length){if(this.itemArr[u]=this.itemArr[u]||new sN,s=this.itemArr[u],n=ao.getIconVO(this._dataArr[u]),s.dataSource=this._dataArr[u],n){switch(Bt.isEyouH5()&&5002==n.id&&(n.iconTier=2),n.iconTier){case 1:s.x=a,s.y=7,a+=s.width;break;case 2:if(5016==n.id)continue;if(6<=++r&&5016!=n.id){ao.addMoreIcon(n,s);continue}s.x=l,s.y=110,l+=s.width+12;break;case 3:s.x=h,s.y=200,h+=s.width+12}this.checkIconCD(s,n),125==n.id||124==n.id?s.updateJuBaoTime():s.clearJuBaoTime()}105==s.data.id&&(this.spTip.x=s.x-29),this.panel.addChild(s),this.spIconTxt.addChild(s.txtDesc),this.updateItemShowFloatTip(s),Bt.isZKPf9991Server()&&(105==s.data.id?s.x=0:this.panel.removeChild(s)),Bt.isQiYuIos()&&this.panel.removeChild(s)}else if(this.itemArr[u]){var c=this.itemArr[u];this.itemArr[u]&&this.itemArr[u].data&&2==this.itemArr[u].data.iconTier&&ao.delMoreIconVoById(this.itemArr[u].id),c.parent&&c.unShowCoolDown(),c.parent&&c.removeSelf()}if(6<r)n=ao.getIconVO(5016),this.moreItem=this.moreItem||new sN,this.moreItem.dataSource=n.id,this.moreItem.x=l,this.moreItem.y=110,this.panel.addChild(this.moreItem);else if(6==r){var d=new sN;d.dataSource=ao.getMoreIconsVO()[0].id,d.x=l,d.y=110,this.panel.addChild(d)}ao.toUpdateMorePanel()},i.checkIconCD=function(t,e){if(t.unShowCoolDown(),114!=e.id){t.removeSpcSceond();var i,s=ao.getIconStateDicValus(e.id);if(s&&0<s.end_time)for(var n in ao.ICON_SHOW_COOL_DOWN)if((i=ao.ICON_SHOW_COOL_DOWN[n]).id==s.id){i.color&&(t.txtDesc.color=i.color),t.showCoolDown(s.end_time,i.showType);break}}else t.updateActPrewState()},i.updateItemShowFloatTip=function(t){t.cleanFloatTip(),113==t.data.id&&0==this.isClickLevelLimit&&t.showFloatTip(999903)},i.showTip=function(){this.spTip.visible=!0,_t.addToFrame(this,this.onEnterFrame)},i.onEnterFrame=function(){this.spTip.y+=this.speed,(this.spTip.y<=80||100<=this.spTip.y)&&(this.speed*=-1)},i.hideTip=function(){this.spTip.visible=!1,_t.removeFromFrame(this,this.onEnterFrame)},i.refresh=function(){this.panel.refresh()},i.getIcon=function(t){return this._dataArr&&-1!=this._dataArr.indexOf(t)?this.itemArr[this._dataArr.indexOf(t)]:null},i.addIcon=function(t){if(this.checkStateShow(t)&&this._dataArr){if(-1!=this._dataArr.indexOf(t))return;this.tempArr=this._dataArr.concat(),this.tempArr.push(t),this.dataArr=this.tempArr.sort(ao.sort)}this.updateItem()},i.deleteIcon=function(t){if(this.checkStateShow(t)&&this._dataArr){if(-1==this._dataArr.indexOf(t))return;for(var e=0;e<this._dataArr.length;e++)this._dataArr[e]==t&&(this.deleteIconId=t)}this.updateItem()},i.checkStateShow=function(t){var e=ao.getIconVO(t);return!Bt.isJiqiuAndH5yy()&&(!(Bt.ish5yy_llz()&&Bt.isKeYi_9991()&&e&&105==e.id)&&(Bt.isKeYi_9991()&&e&&(5005==e.id||4014==e.id||124==e.id||1002==e.id||118==e.id||120==e.id||115==e.id||310==e.id||311<=e.id&&e.id<=370)?(this.hideLuckyDayTip(),!1):!!(G.isReviewVersion&&e&&4024==e.id&&Bt.isXYX9992())||!(G.isReviewVersion&&tt.REVIEW_SHOW_ICON.indexOf(t)<0)&&(!(!e||127!=e.id||"h5yympios"!=G.pf&&"h5yympand"!=G.pf)||(e&&5002==e.id?!ka.checkRemoveAppLoadIcon(e.id):e&&109==e.id?this.sdkChangeIconState(t,e):e&&107==e.id?!yt.isWX&&!yt.isQQ&&this.collectGameIconState(t,e):(e&&e.id,e&&125==e.id?We.hasJubaoIcon:e&&4026==e.id?We.hasFdChargeIcon:e&&5005==e.id?We.hasFortuneDayIcon():e&&5003==e.id?this.checkShowTecentVideoIcon(t):(!e||121!=e.id)&&(e&&122==e.id?e&&("qqdjand"==G.pf||"qqdjios"==G.pf||"limixiuand"==G.pf||"limixiuios"==G.pf):!e||5012!=e.id&&5007!=e.id?!(!e||5016!=e.id)||(e&&5015==e.id?We.hasLuckyDayIcon():e&&4029==e.id?(!G.isReviewVersion||!Bt.isXYX9992())&&Ta.show:e&&(1==e.alwayShow||ao.getIconStateShow(t))):"qqyxdt"==G.pf))))))},i.checkShowTecentVideoIcon=function(t){return!yt.isWX&&!yt.isQQ&&(ao.getIconStateShow(t)&&(Bt.isTxShiPinWx()||Bt.isTxShiPinQQ()||Bt.isTXSPQQIOS()||Bt.isTXSPWXIOS()))},i.onSelect=function(t){if(t.target instanceof modules.icon.view.IconItem){var e=t.target;if(e&&e.data){if(yt.isWX&&5004==e.data.id)return void this.crossMarketing();e.openLink(),113==e.data.id&&(e.cleanFloatTip(),this.isClickLevelLimit=!0)}}},i.initRecommender=function(){var i=this;if(S.window.Recommender&&!S.window.recommenderIns){var t={appid:"wx23652363c578bd37"};t.openid=G.openId,t.forceOpen=!1,t.debug=!0,t.env="prod";var e=new S.window.Recommender(t);S.window.recommenderIns=e;var s=this;e.onReady=function(t,e){t&&i.changeCrossMarketingIcon(s,e.icon)},e.onChange=function(t){i.changeCrossMarketingIcon(s,t.icon)}}},i.changeCrossMarketingIcon=function(t,i){var s=this,n=t.getIcon(5004),e=ut.getRes(i);if(e)n.setIconTexture(e);else{var o=new S.window.wx.createImage;o.onload=function(t){var e=new ae(o,null);n.setIconTexture(s.onLoadedImage(e,i))},o.onerror=function(t){console.log(t)},o.onabort=function(t){console.log(t)},o.src=i}},i.onLoadedImage=function(t,e){var i=$t.create(t,0,0,t.width,t.height);return ut.cacheRes(e,i),i},i.crossMarketing=function(){this.initRecommender(),S.window.recommenderIns?S.window.recommenderIns.jumpToCurrentGame():console.log("Recommender实例化失败 ")},i.onShowLuckyDayFrame=function(){this.luckydaySpTip.y+=this.luckySpeed,(this.luckydaySpTip.y<=80||100<=this.luckydaySpTip.y)&&(this.luckySpeed*=-1)},i.sdkChangeIconState=function(t,e){return!yt.isWX&&(Bt.isYLC_SDK()?!(0<Do.getRewardTimes(Bt.QRCodeRewardParam[0],Bt.QRCodeRewardParam[1]))&&(1==G.focus&&T.dispatch("PF_REWARD_GET_TOS",Bt.QRCodeRewardParam),0==G.focus):!(Bt.sdk instanceof com.sdk.AiWeiYouSDK)||S.onPC&&Bt.sdk instanceof com.sdk.AiWeiYouSDK?e&&(1==e.alwayShow||ao.getIconStateShow(t)):1==S.window.gamevars.userType)},i.collectGameIconState=function(t,e){return yt.isWX?e&&(1==e.alwayShow||ao.getIconStateShow(t)):Bt.is4177()?Do.getRewardTimes(Bt.collectRewardParam[0],Bt.collectRewardParam[1])<=0:Bt.isTxShiPinQQ()||Bt.isTxShiPinWx()?e&&1==e.alwayShow:e&&ao.getIconStateShow(t)},i.showLuckyDayTip=function(t){for(var e=0,i=this.itemArr.length;e<i;e++)if(this.itemArr[e].data.id==t){this.luckydaySpTip.x=this.itemArr[e].x-29,this.luckydaySpTip.visible=!0,_t.addToFrame(this,this.onShowLuckyDayFrame);break}},i.hideLuckyDayTip=function(){this.luckydaySpTip.visible=!1,_t.removeFromFrame(this,this.onShowLuckyDayFrame)},i.moreItemRedPoint=function(t){this.moreItem&&(this.moreItem.redPoint=t)},I(0,i,"dataArr",null,function(t){var e;for(var i in this._dataArr=[],t)e=t[i],this.checkStateShow(e)&&this._dataArr.push(e)}),e.moreFlag=6,e}(),oN=function(t){function e(){this.items=null,this.itemH=100,this.curShowItems=null,e.__super.call(this),this.items=this.items||[],this.curShowItems=this.curShowItems||[]}w(e,"modules.icon.view.IconListV",t);var i=e.prototype;return i.onItemClick=function(t){var e=t.currentTarget;e&&e.data&&(e.openLink(),4012==e.data.id&&(La.ins.toRoleInvestClickToday(1),e.hiedFloatTip()))},i.getOneItem=function(){return 0<this.items.length?this.items.shift():new sN},i.removeAllItem=function(){for(;0<this.curShowItems.length;)this.items.push(this.curShowItems[0].removeSelf());this.curShowItems.length=0},i.removeItem=function(t){for(var e,i=0;i<this.curShowItems.length;i++)if((e=this.curShowItems[i]).data&&e.data.id==t){this.items.push(e.removeSelf()),this.curShowItems.splice(i,1);break}this.updatePos()},i.getItemY=function(t){for(var e,i=0;i<this.curShowItems.length;i++)if((e=this.curShowItems[i]).data&&e.data.id==t)return e.y;return 0},i.addItem=function(t){if(!Bt.isJiqiuAndH5yy()&&!this.isHasIcon(t)){var e=this.getOneItem();e.dataSource=t,e.on("click",this,this.onItemClick),this.addChild(e),this.curShowItems.push(e),this.updatePos()}},i.isHasIcon=function(t){for(var e,i=0;i<this.curShowItems.length;i++)if((e=this.curShowItems[i])&&e.data&&e.data.id==t)return!0;return!1},i.getIcon=function(t){for(var e,i=0;i<this.curShowItems.length;i++)if((e=this.curShowItems[i])&&e.data&&e.data.id==t)return e;return null},i.updatePos=function(){var t=this.height-this.itemH;this.curShowItems=this.curShowItems.sort(this.sortItems);for(var e=0;e<this.curShowItems.length;e++)this.curShowItems[e].y=t,t-=this.itemH;T.dispatch("CHECK_NEW_FIR_AD_VIEW")},i.sortItems=function(t,e){return t.data.sortID>e.data.sortID?1:-1},I(0,i,"visible",t.prototype._$get_visible,function(t){!ya.getChargeOpen()||G.isReviewVersion?h.superSet(Ov,this,"visible",!1):h.superSet(Ov,this,"visible",t)}),I(0,i,"listData",null,function(t){this.removeAllItem();for(var e,i=0,s=0;s<t.length;s++)i=t[s],(e=this.getOneItem()).dataSource=i,e.on("click",this,this.onItemClick),this.addChild(e),this.curShowItems[s]=e;this.updatePos()}),e}(Ov),aN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("display",this,this.onDisplay),this.on("click",this,this.onSelect)}w(e,"modules.icon.view.MoreIconPanel",Lv);var i=e.prototype;return i.onDisplay=function(){this.updatePanel(),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){this.panel.removeChildren(),this.off("undisplay",this,this.onUnDisplay)},i.onSelect=function(t){if(t.target instanceof modules.icon.view.IconItem){var e=t.target;e&&e.data&&e.openLink()}},i.refresh=function(){this.panel.refresh()},i.updatePanel=function(){var t=ao.getMoreIconsVO();if(t){var e=ao.getMoreIcons(),i=0,s=5,n=5,o=t.length;this.panel.removeChildren();for(var a=0;a<o;a++)null==e[i=t[a].id]||e[i].parent?ao.delMoreIconVoById(i):(console.log(e[i]),a%4==0&&0<a?(n+=e[i].height+15,s=5):s=0<a?s+e[i].width+18:5,e[i].x=s,e[i].y=n,this.panel.addChild(e[i]))}},I(0,i,"uiClass",function(){return"CommonPanel"}),e}(),lN=function(t){function e(){this.isDowning=!1,this._nowAngle=NaN,this.originX=0,this.originY=0,e.__super.call(this),this.originX=this.width/2,this.originY=this.height/2,this.initState(),this.on("display",this,this.onDisplay)}w(e,"modules.Joystick.Joystick",Dv);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUnDisplay),this.addStageEvent()},i.addStageEvent=function(){this.stage.on("mousedown",this,this.onMouseEvent),this.stage.on("mouseup",this,this.onMouseEvent),this.stage.on("mousemove",this,this.onMouseEvent),this.stage.on("mouseover",this,this.onMouseEvent)},i.removeStageEvent=function(){this.stage.off("mousedown",this,this.onMouseEvent),this.stage.off("mouseup",this,this.onMouseEvent),this.stage.off("mousemove",this,this.onMouseEvent),this.stage.off("mouseover",this,this.onMouseEvent)},i.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay),this.removeStageEvent()},i.initState=function(){this.isDowning=!1,this.joystickBtn.pos(this.originX,this.originY),this._nowAngle=e.INVALID_ANGLE,(Jl.ins().isJoyStickModTwo()||Jl.ins().isJoyStickModThree()||Jl.ins().isCrossServerFreeMod())&&Jl.ins().updateJoyStickMod()},i.onMouseEvent=function(t){switch(t.type){case"mousedown":"GameScene"==t.target.name&&(this.isDowning=!0,T.dispatch("CAN_NOT_AUTO_HIT"),T.dispatch("TOUCHINT_JOYSTICK"),(Jl.ins().isJoyStickModTwo()||Jl.ins().isJoyStickModThree()||Jl.ins().isCrossServerFreeMod())&&(this.pos(t.stageX-180,t.stageY-180),this.alpha=1));break;case"mousemove":if(!this.isDowning)return;_e.canClickMap=!1;var e=this.globalToLocal(new Tt(t.stageX,t.stageY),!0);this.checkRadiusAndSetBtnPos(e.x,e.y);break;case"mouseup":("GameScene"==t.target.name||this.isDowning)&&(this.initState(),WS&&WS.main&&WS.main.stopTouchMove())}},i.checkRadiusAndSetBtnPos=function(t,e){var i=t-this.originX,s=e-this.originY,n=Math.abs(Math.sqrt(i*i+s*s)),o=Math.atan2(s,i);WS&&WS.main&&WS.main.touchMove(180*o/Math.PI),n<=85&&this.joystickBtn?this.joystickBtn.pos(t,e):this.joystickBtn.pos(85*Math.cos(o)+160,85*Math.sin(o)+160)},e.RADIUS=85,e.INVALID_ANGLE=-999,e}(),rN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.contentPanel.vScrollBarSkin="",this.contentPanel.vScrollBar.autoHide=!0,this.btnBack.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow),this.btnGet.on("click",this,this.onGet),this.txtContent.style.lineHeight=35,this.txtContent.style.fontSize=24,this.txtContent.style.color="#5d3924",this.txtContent.on("link",this,this.onLink)}w(e,"modules.mail.view.MailDetailPanel",Nv);var i=e.prototype;return i.onLink=function(t){if("string"==typeof t){var e=String(t).split("#");if(e)if(2<=e.length){var i=parseInt(e[1]);0<i&&me.linkTo(i)}else e.length<=1&&S.window.open(t)}},i.update=function(){var t=ho.getMailById(this.dataSource);null!=t&&(this.updateInfo(t),this.contentPanel.refresh(),this.contentPanel.scrollTo(0,0),this.updateAttachment(t.goods_list))},i.updateInfo=function(t){this.txtTitle.text=lo.getTitle(t.letter_code,t.title,t.title_num);var e=lo.getContent(t.letter_code,t.text,t.text_num);this.txtContent.innerHTML=e,0==t.goods_list.length?(this.txtTip.visible=!0,this.spAttachment.visible=!1,this.btnGet.visible=!1,this.txtDesc.text="该信件为普通信件，信件将于收到14日后自动删除"):(this.txtTip.visible=!1,this.txtDesc.text="该信件为附件信件，信件将于收到30日后自动删除",this.spAttachment.visible=!0,this.btnGet.visible=!0,3==t.state?(this.btnGet.gray=!0,this.btnGet.mouseEnabled=!1,this.btnGet.label="已领取"):(this.btnGet.gray=!1,this.btnGet.mouseEnabled=!0,this.btnGet.label="领取"))},i.updateAttachment=function(t){for(;0<this.spAttachment.numChildren;)this.spAttachment.removeChildAt(0);for(var e,i=0;i<t.length;i++)(e=new Ah(91,100,!1,!0,!0)).x=106*i-30,this.spAttachment.addChild(e),e.goods=t[i]},i.onGet=function(t){tr.ins().toAcceptGoods([this.dataSource])},I(0,i,"uiClass",function(){return"MailDetail"}),e}(),hN=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.mail.view.MailListItem",t);var i=e.prototype;return i.update=function(){this._data&&(1==this._data.state&&0<this._data.goods_list.length?(this.imgIcon.skin="modules/mail/unread1.png",this.txtTitle.color=this.txtTime.color="#f4f1b2"):1==this._data.state&&0==this._data.goods_list.length?(this.imgIcon.skin="modules/mail/unread2.png",this.txtTitle.color=this.txtTime.color="#f4f1b2"):2==this._data.state&&0<this._data.goods_list.length?(this.imgIcon.skin="modules/mail/read1.png",this.txtTitle.color=this.txtTime.color="#5d3924"):2==this._data.state&&0==this._data.goods_list.length?(this.imgIcon.skin="modules/mail/read2.png",this.txtTitle.color=this.txtTime.color="#5d3924"):3==this._data.state&&(this.imgIcon.skin="modules/mail/read2.png",this.txtTitle.color=this.txtTime.color="#5d3924"),this.txtTitle.text=lo.getTitle(this._data.letter_code,this._data.title,this._data.title_num),this.txtTime.text=x.format(this._data.send_time))},i.onClick=function(t){this._data&&(T.dispatch("MAIL_OPEN_DETAIL_PANEL",this._data.id),1==this._data.state&&tr.ins().toReadMail(this._data.id))},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),e}(Vv),uN=function(t){function e(){e.__super.call(this),this.setWindowType(),this.list.itemRender=hN,this.list.selectEnable=!0,this.list.scrollBar.autoHide=!0,this.on("click",this,this.onClick),Bt.isZKPf9991Server()&&(this.title.skin="modules/mail/title3.png")}w(e,"modules.mail.view.MailPanel",Bv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnGetAll:var e=ho.getAllAttachmentMailIDs();tr.ins().toAcceptGoods(e,!0);break;case this.btnReadAll:var i=new Ee,s="";s+=Z.span("使用“一键已读”后将清除以下信件的未读状态：","#5d3924")+"<br/>",s+=k.getHtmlEmpty(4)+Z.span("①好友改名信件","#5d3924")+"<br/>",s+=k.getHtmlEmpty(4)+Z.span("②仙宠盟战仙盟排名奖励与参与奖励信件","#5d3924")+"<br/>",s+=Z.span("确定使用“一键已读”功能吗？","#5d3924"),i.msg=s,i.yesCaller=tr.ins(),i.yesFun=tr.ins().toReadAll,EF.showVO(i);break;case this.btnDelete:var n=new Ee,o="";o+=Z.span("是否对信箱内超过3天的已读信件进行删除操作？","#5d3924"),n.msg=o,n.yesCaller=tr.ins(),n.yesFun=tr.ins().toOneKeyDelete,EF.showVO(n);break;case this.btnBack:case this.btnClose:this.closeWindow()}},i.update=function(){var t=ho.mailArray;(this.list.dataSource=t)&&0==t.length?(this.txtNothing.visible=!0,this.btnGetAll.visible=!1,this.btnReadAll.visible=!1,this.btnDelete.visible=!1):(this.txtNothing.visible=!1,ho.checkIsexistAttachmentMail()?(this.btnGetAll.visible=!0,this.btnDelete.visible=!1,ho.checkIsExistCanReadMail()?(this.btnReadAll.visible=!0,this.btnReadAll.x=132,this.btnGetAll.x=392):(this.btnGetAll.x=272,this.btnReadAll.visible=!1)):(this.btnGetAll.visible=!1,ho.checkIsExistCanReadMail()?(this.btnReadAll.visible=!0,this.btnDelete.visible=!1,this.btnReadAll.x=272):(this.btnReadAll.visible=!1,ho.checkIsDeleteMail()?this.btnDelete.visible=!0:this.btnDelete.visible=!1)))},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),cN=function(t){function e(){this.eff=null,this._count=0,this._timer=0,this._now=NaN,e.__super.call(this),this.cacheAs="normal",this.mouseThrough=!0,this.on("click",this,this.onClick),this.eff=b.getOne(),this.eff.pos(0,0),this.spEff.addChild(this.eff),this.eff.loadAndPlay("unit/effect/zhandouli","default",0,!0),this.btnSound.on("click",this,this.onClickSound),S.onPC&&_t.addToFrame(this,this.onFrame),Nt.register("RP_VIP_CAN_GET",this.btnVip,new Tt(20,-12)),T.register("ON_SYS_CONFIG",this,this.onSysChange),T.register("ON_SYS_UPDATE",this,this.onSysChange),T.register("ROLE_CHANGE_NAME",this,this.onNameChange),T.register("ROLE_CHANGE_SEX",this,this.update),T.register("ROLE_REORDER",this,this.update),Nt.register("RP_ROLE_SET_SELF_FRAME",this.imgHead,new Tt(19,-10)),Nt.register("RP_ROLE_SET_SELF_BUBBLE",this.imgHead,new Tt(19,-10))}w(e,"modules.mainInfo.view.MainInfoFanTiView",Mv);var i=e.prototype;return i.onNameChange=function(){this.txtRoleName.text=pe.roleName,this.txtLevel.x=this.txtRoleName.x+this.txtRoleName.textField.textWidth+20},i.onSysChange=function(){ya.getFunOpen(0)||ya.getFunOpen(1)?this.btnSound.skin="com/ui/soundOpen.png":this.btnSound.skin="com/ui/soundShut.png"},i.onClickSound=function(){if("com/ui/soundOpen.png"==this.btnSound.skin)this.btnSound.skin="com/ui/soundShut.png",Ht.soundMuted=Ht.musicMuted=!0;else{this.btnSound.skin="com/ui/soundOpen.png",Ht.soundMuted=Ht.musicMuted=!1;var t=ca.city.music;null!=t&&""!=t&&Ht.playMusic(t)}var e=new Object;e.className="m_role_sys_conf_update_tos";var i=new Object;i.className="p_kv";var s=new Object;s.className="p_kv",i.id=0,s.id=1,s.val=i.val=Ht.musicMuted?0:1,e.opt=[i,s],v.send(e)},i.onFrame=function(){this._count++,this._now=S.now(),this._now-this._timer<1e3||(this.txtFPS.text="FPS:"+Math.round(1e3*this._count/(this._now-this._timer)),this._count=0,this._timer=this._now)},i.onClick=function(t){switch(t.target){case this.btnCopper:me.linkTo(11430);break;case this.btnGold:me.linkTo(11454,1);break;case this.btnGodCoin:me.linkTo(11454);break;case this.btnRank:me.linkTo(10701),pt.send(9,0,"排行榜入口按钮");break;case this.btnVip:pt.send(19,1,"VIP入口"),me.linkTo(10201);break;case this.imgHead:T.dispatch("OPEN_ROLESET_VIEW")}},i.update=function(){this.txtRoleName.text=pe.roleName,this.txtLevel.x=this.txtRoleName.x+this.txtRoleName.textField.textWidth+20,this.imgHead.skin="com/head/main"+pe.getPalByIndex(0).ext.category+pe.getPalByIndex(0).ext.sex+".png",this.updatePower(),pe.user&&pe.user.attr&&(this.txtLevel.text=0<pe.user.attr.regrow?pe.user.attr.regrow+"转"+pe.user.attr.level+"级":pe.user.attr.level+"级",this.txtMyGold.text=pe.user.attr.gold+"",this.txtMyCopper.text=k.getShortenSilverStr(pe.user.attr.silver),this.txtMyGodCoin.text=pe.getScore(30)+""),Bt.ish5yy_llz()&&(this.btnVip.visible=!1)},i.updateByVip=function(){var t=0;Ia.isSVIP()?(t=Ia.getSVIPLv(),this.imgVipTxt.x=16,this.imgVipTxt.skin="com/ui/SVIP.png",this.imgVip.x=102):(t=Ia.curLv,this.imgVipTxt.skin="com/ui/vip.png",this.imgVipTxt.x=32,this.imgVip.x=98);var e,i=k.numToTexture(t,"com/ui/vipNum");this.imgVip.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.imgVip.graphics.drawTexture(e,e.width*s)},i.updatePower=function(){this.spPower.graphics.clear();for(var t,e=k.numToTexture(pe.totalPower,"com/ui/powerNum"),i=0;i<e.length;i++)t=e[i],this.spPower.graphics.drawTexture(t,t.width*i)},i.updateLVChange=function(){this.txtLevel.text=0<pe.user.attr.regrow?pe.user.attr.regrow+"转"+pe.user.attr.level+"级":pe.user.attr.level+"级"},i.updateGoldChange=function(){this.txtMyGold.text=pe.user.attr.gold+"",this.txtMyCopper.text=k.getShortenSilverStr(pe.user.attr.silver),this.txtMyGodCoin.text=pe.getScore(30)+""},i.updateRoundTxt=function(){var t=Ds.getCustomVO(Ds.curBarrier);if(t){this.txtRound.text="第"+Ds.curBarrier+"关  "+t.getName();var e,i=t.getOutput();for(var s in i)switch((e=i[s])[0]){case 2:this.txtCopper.text=e[2]+"/小时";break;case 3:this.txtExp.text=e[2]+"/小时"}}},i.showInfo=function(t){switch(this.txtCopper.visible=this.txtExp.visible=this.txtRound.visible=this.txtCopyMsg.visible=this.txtCopyName.visible=this.spRound1.visible=this.spRound2.visible=this.spRound3.visible=this.spRound4.visible=this.spOtherInfo1.visible=!1,t){case 1:this.txtCopper.visible=this.txtExp.visible=this.txtRound.visible=this.spRound1.visible=this.spRound2.visible=this.spRound3.visible=this.spRound4.visible=!0;break;case 2:this.txtCopyMsg.visible=this.txtCopyName.visible=this.spOtherInfo1.visible=!0,this.updateCopyInfo()}},i.updateCopyInfo=function(){this.txtCopyName.text=uo.getName(),this.txtCopyMsg.text=uo.getMsg()},e}(),dN=function(t){function e(){this.blueVip=null,this.blueYear=null,this.eff=null,this._count=0,this._timer=0,this._now=NaN,this._blueVipOutShow=null,e.__super.call(this),this.cacheAs="normal",this.mouseThrough=!0,this.on("click",this,this.onClick),this.eff=b.getOne(),this.eff.pos(0,0),this.spEff.addChild(this.eff),this.eff.loadAndPlay("unit/effect/zhandouli","default",0,!0),this.btnSound.on("click",this,this.onClickSound),S.onPC&&_t.addToFrame(this,this.onFrame),G.isReviewVersion?this.btnVip.visible=!1:Nt.register("RP_VIP_CAN_GET",this.btnVip,new Tt(20,-12)),this.blueVip=this.blueVip||new et,this.blueYear=this.blueYear||new et,this.blueVip.visible=this.blueYear.visible=!1,this.addChild(this.blueVip),this.addChild(this.blueYear),T.register("ON_SYS_CONFIG",this,this.onSysChange),T.register("ON_SYS_UPDATE",this,this.onSysChange),T.register("ROLE_CHANGE_NAME",this,this.onNameChange),T.register("ROLE_CHANGE_SEX",this,this.update),T.register("ROLE_REORDER",this,this.update),T.register("ROLE_BLUE_VIP_INFO_UPDATE",this,this.updateBlueVip),T.register("FCM_COUNT_DOWN",this,this.updateFcmInfo),Nt.register("RP_ROLE_SET_SELF_FRAME",this.imgHead,new Tt(19,-10)),Nt.register("RP_ROLE_SET_SELF_BUBBLE",this.imgHead,new Tt(19,-10)),G.isReviewVersion&&(this.btnCopper.visible=this.btnGold.visible=!1),(Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian())&&(this.btnVip.visible=!1,this.btnRank.pos(this.btnVip.x,this.btnVip.y),this.btnGold.visible=this.btnCopper.visible=this.btnRank.visible=!1),Bt.isJiqiuAnd9992()&&(this.btnRank.visible=!1),this.updateFcmInfo(),this.updateBlueVip()}w(e,"modules.mainInfo.view.MainInfoView",Fv);var i=e.prototype;return i.onNameChange=function(){this.txtRoleName.text=pe.roleName,this.txtLevel.x=this.txtRoleName.x+this.txtRoleName.textField.textWidth+20},i.onSysChange=function(){ya.getFunOpen(0)||ya.getFunOpen(1)?this.btnSound.skin="com/ui/soundOpen.png":this.btnSound.skin="com/ui/soundShut.png"},i.onClickSound=function(){if("com/ui/soundOpen.png"==this.btnSound.skin)this.btnSound.skin="com/ui/soundShut.png",Ht.soundMuted=Ht.musicMuted=!0;else{this.btnSound.skin="com/ui/soundOpen.png",Ht.soundMuted=Ht.musicMuted=!1;var t=ca.city.music;null!=t&&""!=t&&Ht.playMusic(t)}var e=new Object;e.className="m_role_sys_conf_update_tos";var i=new Object;i.className="p_kv";var s=new Object;s.className="p_kv",i.id=0,s.id=1,s.val=i.val=Ht.musicMuted?0:1,e.opt=[i,s],v.send(e)},i.onFrame=function(){this._count++,this._now=S.now(),this._now-this._timer<1e3||(this.txtFPS.text="FPS:"+Math.round(1e3*this._count/(this._now-this._timer)),this._count=0,this._timer=this._now)},i.onClick=function(t){var e=t.target==this.btnCopper||t.target==this.btnGold;if(!((t.target==this.btnCopper||t.target==this.btnVip)&&Bt.isKeYi_9991()||e&&Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian()))switch(t.target){case this.btnCopper:me.linkTo(11430);break;case this.btnGold:Bt.isXYX9992()||me.linkTo(11454);break;case this.btnRank:me.linkTo(10701),pt.send(9,0,"排行榜入口按钮");break;case this.btnVip:pt.send(19,1,"VIP入口"),me.linkTo(10201);break;case this.imgHead:T.dispatch("OPEN_ROLESET_VIEW");break;case this.fcmBtn:T.dispatch("OPEN_FCM_IDENTIFYVIEW")}},i.update=function(){this.txtRoleName.text=pe.roleName,this.txtLevel.x=this.txtRoleName.x+this.txtRoleName.textField.textWidth+20,this.imgHead.skin="com/head/main"+pe.getPalByIndex(0).ext.category+pe.getPalByIndex(0).ext.sex+".png",this.updatePower(),pe.user&&pe.user.attr&&(this.txtLevel.text=0<pe.user.attr.regrow?pe.user.attr.regrow+"转"+pe.user.attr.level+"级":pe.user.attr.level+"级",this.txtMyGold.text=pe.user.attr.gold+"",this.txtMyCopper.text=k.getShortenSilverStr(pe.user.attr.silver)),Bt.ish5yy_llz()&&(this.btnVip.visible=!1)},i.updateByVip=function(){var t=0;Ia.isSVIP()?(t=Ia.getSVIPLv(),this.imgVipTxt.x=16,this.imgVipTxt.skin="com/ui/SVIP.png",this.imgVip.x=102):(t=Ia.curLv,this.imgVipTxt.skin="com/ui/vip.png",this.imgVipTxt.x=32,this.imgVip.x=98);var e,i=k.numToTexture(t,"com/ui/vipNum");this.imgVip.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.imgVip.graphics.drawTexture(e,e.width*s)},i.updatePower=function(){this.spPower.graphics.clear();for(var t,e=k.numToTexture(pe.totalPower,"com/ui/powerNum"),i=0;i<e.length;i++)t=e[i],this.spPower.graphics.drawTexture(t,t.width*i)},i.updateLVChange=function(){this.txtLevel.text=0<pe.user.attr.regrow?pe.user.attr.regrow+"转"+pe.user.attr.level+"级":pe.user.attr.level+"级"},i.updateGoldChange=function(){this.txtMyGold.text=pe.user.attr.gold+"",this.txtMyCopper.text=k.getShortenSilverStr(pe.user.attr.silver)},i.updateRoundTxt=function(){var t=Ds.getCustomVO(Ds.curBarrier);if(t){this.txtRound.text="第"+Ds.curBarrier+"关  "+t.getName();var e,i=t.getOutput();for(var s in i){e=i[s];var n=Z.span(k.getShortenExpStr(e[2]),"#cfc792",24);switch(n+=Ca.isHasCard()||Ta.isHasCard()?Z.span("+"+k.getShortenExpStr(.25*e[2])+"/小时","#139604",22):Z.span("/小时","#cfc792",24),e[0]){case 2:this.txtCopper.innerHTML=n;break;case 3:this.txtExp.innerHTML=n}}}Ca.isHasCard()||Ta.isHasCard()?_t.addToSecond(this,this.updateRoundTxt):_t.removeFromSceond(this,this.updateRoundTxt)},i.showInfo=function(t){switch(this.txtCopper.visible=this.txtExp.visible=this.txtRound.visible=this.txtCopyMsg.visible=this.txtCopyName.visible=this.spRound1.visible=this.spRound2.visible=this.spRound3.visible=this.spRound4.visible=this.spOtherInfo1.visible=!1,t){case 1:this.txtCopper.visible=this.txtExp.visible=this.txtRound.visible=this.spRound1.visible=this.spRound2.visible=this.spRound3.visible=this.spRound4.visible=!0;break;case 2:this.txtCopyMsg.visible=this.txtCopyName.visible=this.spOtherInfo1.visible=!0,this.updateCopyInfo()}},i.updateCopyInfo=function(){this.txtCopyName.text=uo.getName(),this.txtCopyMsg.text=uo.getMsg()},i.updateBlueVip=function(){if(Bt.isQQyxdt()){this._blueVipOutShow=this._blueVipOutShow||new Rh,this.addChild(this._blueVipOutShow);var t=new ms;t.blueInfo=pe.getRoleBlueVipInfo(),t.nameText=this.txtRoleName,this._blueVipOutShow.updateShowing(t),this._blueVipOutShow.left=0,this.txtRoleName.left=0<this._blueVipOutShow.width?this._blueVipOutShow.width:18}},i.updateFcmInfo=function(){this.fcmBtn.visible=0<G.isRealName,this.fcmDown.visible=N.isFcmLimit(),Bt.isHuaWei()&&(this.fcmBtn.visible=!1),_t.addToSecond(this,this.updateFcmCountDown)},i.updateFcmCountDown=function(){if(this.fcmDown.visible){var t=Vn.leftOnlieTime;t?this.fcmDown.text=x.formatTime(t):(this.fcmDown.text="",_t.removeFromSceond(this,this.updateFcmCountDown))}else _t.removeFromSceond(this,this.updateFcmCountDown)},e}(),pN=function(t){function e(){this._data=null,this.timeInfo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.html.style.align="center",this.txtHad.visible=!1,this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.mainInfo.view.RoleChangeNameView",Uv);var i=e.prototype;return i.onRemove=function(t){_t.removeFromSceond(this,this.onLoop)},i.onAdd=function(){_t.addToSecond(this,this.onLoop)},i.onLoop=function(){if(this.timeInfo)if(this.timeInfo.val>ya.serverTime)this.html.innerHTML=Z.span("改名卡剩余有效期：","#ffffff")+Z.span(x.formatDHMS(this.timeInfo.val-ya.serverTime),"#b60202");else{this.html.innerHTML=Z.span("改名卡剩余有效期：","#ffffff")+Z.span("已过期","#b60202");var t=ur.getItem(this._data.typeid);t&&Jt.addTip(t.name+"已过期，请重新购买"),this.closeWindow()}else this.html.innerHTML=""},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,null,!1),this.parent&&(this.input.focus=!0,this.input.text=pe.lastName)},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnSave:if(""==this.input.text||this.input.text==pe.roleName)Jt.addTip("请先修改角色名称");else if(j.checkHtmlStrRule(this.input.text)){var e=new Ee;e.msg=Z.span("是否将角色名称更改为","#5d3924")+Z.span(this.input.text,"#ffffff"),e.yesCaller=this,e.yesFun=this.toChangeName,EF.showVO(e)}else Jt.addTip("含有非法字符")}},i.toChangeName=function(){this.closeWindow(),Tr.ins().toChangeRoleName(this.input.text,this._data.id)},I(0,i,"data",null,function(t){if(this._data=t,this.timeInfo=null,this._data){var e;for(var i in this._data.data_list)if(3==(e=this._data.data_list[i]).id){this.timeInfo=e;break}this.timeInfo?(this.onAdd(),this.onLoop()):this.html.innerHTML=""}else this.html.innerHTML=""}),e}(),mN=function(t){function e(){this.flowerFaerieView=null,this.languageView=null,this.languageCoupleView=null,this.languageShopView=null,this.curView=null,this.roleId=0,this.coupleRoleId=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay),ir.ins().toCoupleRoleId(),this.getRoleId()}w(e,"modules.marry.flowerFaerie.views.FlowerFaeriePanel",Gv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onTabChange=function(){switch(this.spView.removeChild(this.curView),this.tab.selectedIndex){case 0:this.flowerFaerieView=this.flowerFaerieView||new fN,this.curView=this.flowerFaerieView;break;case 1:this.isMarry()?(this.languageView=this.languageView||new SN,this.languageView.type=1,this.curView=this.languageView,ir.ins().toLanguageInfo(this.roleId)):(Jt.addTip("结缘后开启花语"),this.tab.selectedIndex=0);break;case 2:this.isMarry()?(this.languageShopView=this.languageShopView||new wN,this.curView=this.languageShopView):(Jt.addTip("结缘后开启花语"),this.tab.selectedIndex=0);break;case 3:this.isMarry()?(this.languageCoupleView=this.languageCoupleView||new SN,this.languageCoupleView.type=2,this.curView=this.languageCoupleView,fo.coupleInfoP&&ir.ins().toLanguageInfo(this.coupleRoleId)):(Jt.addTip("结缘后开启花语"),this.tab.selectedIndex=0)}this.spView.addChild(this.curView),this.curView.update()},i.update=function(){this.curView&&this.curView.update()},i.getRoleId=function(){this.roleId=pe.roleID,fo.coupleInfoP&&(this.coupleRoleId=fo.coupleInfoP.role_id)},i.isMarry=function(){return 3==fo.marryState},i.onUndisplay=function(){T.remove("MARRY_CHANGE_TO_FLOWER_FAERIE_TAB",this,this.showShopTab)},i.onDisplay=function(){T.register("MARRY_CHANGE_TO_FLOWER_FAERIE_TAB",this,this.showShopTab)},i.showShopTab=function(){this.tab.selectedIndex=1},e}(),fN=function(t){function e(){this.equipArr=null,this.ftxtMaterials=null,this.clip=null,this.isFaerieActing=!1,this.faerieActHanlder=null,this.LvUpEffectHanlder=null,this.LvUpEffect=null,this.effectItems=[],this.hasNum=0,this.needNum=0,this.effectItems=[],e.__super.call(this),this.setWindowType(),this.ftxtMaterials=new V(null,"left"),this.ftxtMaterials.pos(330,703),this.addChild(this.ftxtMaterials),this.clip=b.getOne(),this.spPet.addChild(this.clip),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),T.register("GUIDE_STEP",this,this.onGuideStep),Nt.register("RP_FLOWER_FAERIE",this.btnUp)}w(e,"modules.marry.flowerFaerie.views.FlowerFaerieView",Hv);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnUp:if(po.isCurPetalMaxLv())return;if(0==this.isHasEnoughMaterials())return void this.onLink();ir.ins().toPetalUp(),this.setFaerieUpLvAct(),this.setLvUpEffect();break;case this.imgStep:var e=new o;Ae.show(e,"FLOWER_FAERIE_TIP")}},i.onGuideStep=function(t){t!=LD.CLICK_INTENSIFY_BTN1&&t!=LD.CLICK_INTENSIFY_BTN2&&t!=LD.CLICK_INTENSIFY_BTN3&&t!=LD.CLICK_INTENSIFY_BTN4&&t!=LD.CLICK_INTENSIFY_BTN5||LD.showStep(t,this.btnUp)},i.onDisplay=function(){LD.nextStep==LD.CLICK_INTENSIFY_BTN1&&LD.showStep(LD.CLICK_INTENSIFY_BTN1,this.btnUp),this.setFaerie()},i.onLink=function(){ba.show(10408101)},i.update=function(){this.txtLv.text="花仙子 Lv."+po.curPetalLv,this.updateBtn(),this.updateMaterial(),this.updateAttr(),this.updatePetal(),this.setPetalEffect()},i.updateBtn=function(){po.isCurPetalMaxLv()&&(this.btnUp.label="已满级",this.btnUp.disabled=!0)},i.updatePetal=function(){var t=po.getCurPetalStep(),e=Math.floor((po.getCurPetalStep()+1)/2),i=po.getCurPetalIndex();po.curPetalLv&&(0==po.curPetalLv?this.imgPetal.skin="modules/marry/img/petal1.png":100<=po.curPetalLv?this.imgPetal.skin="modules/marry/img/petal5.png":0==i&&t%2==0?(this.removeEffect(),this.imgPetal.skin="modules/marry/img/petal"+(e+1)+".png"):this.imgPetal.skin="modules/marry/img/petal"+e+".png")},i.updateMaterial=function(){po.isCurPetalMaxLv()?this.ftxtMaterials.setLinkText("已满级","#ffffff",!1):(this.hasNum=po.curFaeriePoint,this.needNum=po.getCurPetalUpConst(),this.ftxtMaterials.clear(),this.ftxtMaterials.addLinkText(this.hasNum+"",this.hasNum<this.needNum?U.COLORS_DARK[6]:"#ffffff",!1),this.ftxtMaterials.addLinkText(" / "+this.needNum,"#ffffff",!1))},i.updateAttr=function(){this.spAttr.visible=!0;var t=po.getPetalTotalAttrs(),e="";if(0==po.curPetalLv)e+="生命: +0"+k.getEmpty(4),e+="攻击: +0\n",e+="物防: +0"+k.getEmpty(4),e+="法防: +0\n";else for(var i=0;i<t.length;i++)e+=(i+1)%2==0?t[i][0]+": +"+t[i][1]+"\n":t[i][0]+": +"+t[i][1]+k.getEmpty(4);this.txtAttr.text=e},i.setPetalEffect=function(){if(po.curPetalLv){var t=po.getCurPetalStep(),e=(co.petalEffectPos,po.getCurPetalIndex()),i=po.getCurPetalStep();if(0==po.curPetalLv)return;if(100<=po.curPetalLv)for(var s=0;s<10;s++)this.stageEffect(s,10);else{if(i%2==0&&0!=e)for(var n=0;n<10;n++)this.stageEffect(n,t-1);if(0==e){if(i%2==0)return;for(var o=0;o<10;o++)this.stageEffect(o,t)}else for(var a=0;a<e;a++)this.stageEffect(a,t)}}},i.stageEffect=function(t,e){var i,s=co.petalEffectPos;this.effectItems[t]=this.effectItems[t]||b.getOne(),(i=this.effectItems[t]).pos(s[t].x,s[t].y),i.rotation=s[t].angle,null==i.parent||i.removeSelf(),this.addChild(i),i.loadAndPlay("moduleEffect/flowerFaeriePetal"+e,"default",0,!0)},i.setLvUpEffect=function(){this.LvUpEffect=this.LvUpEffect||b.getOne();var t=co.petalEffectPos,e=po.getCurPetalIndex();this.LvUpEffect.pos(330,330),this.LvUpEffect.zOrder=100,this.LvUpEffectHanlder=Q.create(this,this.removeEffectSelf),this.LvUpEffect.removeSelf(),this.addChild(this.LvUpEffect),this.LvUpEffect.loadAndPlay("moduleEffect/flowerFearieUp","default",0,!0),ie.to(this.LvUpEffect,{x:t[e].x,y:t[e].y},500,null,this.LvUpEffectHanlder)},i.removeEffectSelf=function(){this.LvUpEffect.removeSelf()},i.removeEffect=function(){for(var t in this.effectItems)this.effectItems[t].removeSelf()},i.isHasEnoughMaterials=function(){return this.hasNum=po.curFaeriePoint,this.needNum=po.getCurPetalUpConst(),!(this.hasNum<this.needNum)},i.setFaerie=function(){this.clip.loadAndPlay("unit/monster/20000010_4","stand",4,!0),this.clip.scale(_e.scale,_e.scale),this.isFaerieActing=!1},i.setFaerieUpLvAct=function(){1!=this.isFaerieActing&&(this.faerieActHanlder=Q.create(this,this.setFaerie),this.clip.loadAndPlay("unit/monster/20000010_attack_4","attack",4,!1),this.isFaerieActing=!0,this.clip.setEndHandler(this.faerieActHanlder))},e}(),_N=function(t){function e(){this.txtCoupon=null,this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtCoupon=new jt,this.txtCoupon.fontSize=24,this.txtCoupon.color="#a23d43",this.txtCoupon.pos(350,350),this.addChild(this.txtCoupon),this.on("click",this,this.onClick),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageBuyConfirmView",Wv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:ir.ins().toLanguageBuy(1,this._data.payId),this.closeWindow();break;case this.btnCancel:Tr.ins().toExchange(25,this._data.id,1),this.closeWindow();break;case this.imgClose:this.closeWindow()}},i.update=function(t){this._data=t,this.txtInfo.innerHTML=Bt.isFanTi?Z.span("确定花费"+t.gold+"仙尊幣或"+t.coupon+"花券购买","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("吗？","#a23d43"):Z.span("确定花费"+t.gold+"元或"+t.coupon+"花券购买","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("吗？","#a23d43"),this.btnSure.label=Bt.isFanTi?t.gold+"仙尊幣购买":t.gold+"元购买",this.btnCancel.label=t.coupon+"花券购买",this.txtCoupon.text="拥有花券："+pe.getScore(25)},I(0,i,"uiClass",function(){return"MarryRequestConfirmView"}),e}(),gN=function(t){function e(){this.posIndex=0,this.id=0,e.__super.call(this)}return w(e,"modules.marry.flowerFaerie.views.FlowerLanguageItem",qv),e.prototype.updata=function(){},e}(),yN=function(t){function e(){this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageSendConfirmView",Wv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:ir.ins().toLanguageBuy(2,this._data.payId),this.closeWindow();break;case this.btnCancel:case this.imgClose:this.closeWindow()}},i.update=function(t){this._data=t;var e=Z.span("确定花费"+t.gold+"元赠送","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("给【"+fo.coupleInfoP.role_name+"】吗？","#a23d43");e+=Z.span("（信物不可使用花券赠送）","#a23d43"),this.txtInfo.innerHTML=e},I(0,i,"uiClass",function(){return"MarryRequestConfirmView"}),e}(),vN=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageLogItem",t);var i=e.prototype;return i.update=function(){this.txtTime.text=x.setToDatenoTime(this._data.give_ts),this.txtMsg.text="【"+this._data.role_name+"】赠送了";var t=po.getLanguagesVOById(this._data.item_id);t&&(this.txtGoodsName.text=t.name,this.txtGoodsName.x=this.txtMsg.x+this.txtMsg.textWidth+2)},I(0,i,"uiClass",function(){return"MarryTokenLogItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Yv),IN=function(t){function e(){this._data=null,this.img=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageShopItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:po.checkIsHasLanguage(this._data.id,po.myFlowerLanguages)?Jt.addTip("你已拥有这件花语，不可重复购买~"):ir.ins().openBuyLanguageConfirmView(this._data);break;case this.btnSend:ir.ins().openSendLanguageConfirmView(this._data);break;case this.btnAdd:po.checkIsHasLanguage(this._data.id,po.myFlowerLanguages)?Jt.addTip("你已拥有这件花语，无法加入心愿单~"):ir.ins().toLanguageWish(1,this._data.id)}},i.update=function(){Bt.isFanTi?(this.txtGold.text=this._data.gold+"",this.txtGold.x=443,this.img=this.img||new et,this.img.skin="com/ui/godcoin.png",this.img.scaleX=.6,this.img.scaleY=.7,this.img.x=60,this.txtGold.addChild(this.img)):(this.txtGold.x=453,this.txtGold.text=Bt.isXianLai?10*parseInt(this._data.gold)+"钻石":this._data.gold+"元"),this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=po.getLanguageSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,this.txtName.align="center",this.txtDesc.text=this._data.desc,n&&(this.txtName.color=U.getColorLight(n.color),this.imgToken.skin=n.realMaxico),this.imgMy.visible=po.checkIsHasLanguage(this._data.id,po.myFlowerLanguages),this.imgCouple.visible=po.checkIsHasLanguage(this._data.id,po.taFlowerLanguages)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),I(0,i,"data",function(){return this._data}),e}(Xv),wN=function(t){function e(){e.__super.call(this),this.list.itemRender=IN,this.list.scrollBar.autoHide=!0,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.tab.labels=mo.TOKEN_SHOP_TAB_LABELS,this.tab.setItemSize(100,42,"10, 10, 10, 10")}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageShopView",Kv);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.tab.selectedIndex=0,this.cb.selected=!1,this.cb.on("change",this,this.onChange),this.tab.on("change",this,this.onChange),T.register("ROLE_SCORE_CHANGE",this,this.updateTxtNum)},i.onUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.updateTxtNum)},i.onChange=function(){this.updateList()},i.onClick=function(t){switch(t.target){case this.btnMy:ir.ins().toLanguageWishInfo(1),ir.ins().openWishListPanel(1);break;case this.btnTa:ir.ins().toLanguageWishInfo(2),ir.ins().openWishListPanel(2)}},i.update=function(){this.txtNum.text="当前拥有花券： "+pe.getScore(25),this.updateList()},i.updateTxtNum=function(t){t&&25==t.id&&(this.txtNum.text="当前拥有花券："+pe.getScore(25))},i.updateList=function(){var t=0;t=0==this.tab.selectedIndex?0:this.tab.selectedIndex+1;var e=po.getFlowerLanguages(t,this.cb.selected);e=e.sort(this.sortData),this.list.dataSource=e},i.sortData=function(t,e){var i=po.checkIsHasLanguage(t.id,po.myFlowerLanguages),s=po.checkIsHasLanguage(e.id,po.myFlowerLanguages);return i&&0==s?1:0==i&&s?-1:t.color>e.color?1:t.color<e.color?-1:0},e}(),bN=function(t){function e(){this._data=null,e.__super.call(this),this.btnSend.visible=this.btnAdd.visible=!1,this.btnBuy.visible=this.btnRemove.visible=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageWishMyItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:ir.ins().openBuyLanguageConfirmView(this._data);break;case this.btnRemove:ir.ins().toLanguageWish(2,this._data.id)}},i.update=function(){this.txtGold.text=this._data.gold+"元",this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=po.getLanguageSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,this.txtDesc.text=this._data.desc,n&&(this.txtName.color=U.getColorLight(n.color),this.imgToken.skin=n.realMaxico),this.imgMy.visible=po.checkIsHasLanguage(this._data.id,po.myFlowerLanguages),this.imgCouple.visible=po.checkIsHasLanguage(this._data.id,po.taFlowerLanguages)},I(0,i,"uiClass",function(){return"FlowerLanguageShopItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Xv),SN=function(t){function n(){this.type=0,this.isShowLog=!1,this.items=null,this.curChoose=0,this.isMoving=!1,this.rotateIndex=0,this.colorMatrix=[.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0],this.flowerLanguageList=po.getFlowerLanguageInfo(),this.flowerLanguageIndex=po.getFlowerLanguageId(),this.GrayFilter=new i(this.colorMatrix),n.__super.call(this),this.list.itemRender=vN,this.on("click",this,this.onClick),this.initItems(),this.update()}w(n,"modules.marry.flowerFaerie.views.FlowerLanguageView",jv);var e=n.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onClick=function(t){switch(t.target){case this.txtOperate:this.isShowLog=!this.isShowLog,this.isShowLog?(this.updateLogs(),this.txtOperate.text="花语属性",this.txtTitle.text="赠送记录"):(this.updateAttr(),this.txtOperate.text="赠送记录",this.txtTitle.text="花语属性");break;case this.btnLeft:var e;if(0==this.isMoving)this.updateNextItem(1),(e=this.getItemByIndex(3)).pos(630,70),e.zOrder=0,this.updateLanguageState(),this.rotateFrame(1),this.isMoving=!0;break;case this.btnRight:0==this.isMoving&&(this.updateNextItem(2),this.updateLanguageState(),this.rotateFrame(2),this.isMoving=!0)}},e.update=function(){1==this.type?n.flowerLanguageDatas=po.myFlowerLanguages:2==this.type&&(n.flowerLanguageDatas=po.taFlowerLanguages),n.flowerLanguageDatas&&(this.isShowLog?this.updateLogs():this.updateAttr()),this.sortItemList(),this.updateItem(),this.updateLanguageState()},e.updateLogs=function(){this.spAttr.visible=!1,this.list.visible=!0,1==this.type?this.list.dataSource=po.myFlowerLanguageLogs:2==this.type&&(this.list.dataSource=po.taFlowerLanguageLogs)},e.updateLanguageState=function(){for(var t=0;t<co.flowerLanguageItemPos.length;t++)n.flowerLanguageDatas&&(0==n.isInHasList(this.items[t].id)?this.items[t].filters=[this.GrayFilter]:this.items[t].filters=[])},e.initItems=function(){var t,e;this.items=[],this.spItems.pos(104,0),this.spItems.scrollRect=new Dt(104,0,512,514),this.spItems.optimizeScrollRect=!0;for(var i=0;i<co.flowerLanguageItemPos.length;i++){e=po.getLanguagesVOById(this.flowerLanguageIndex[i]),t=new gN;var s=co.flowerLanguageItemPos[i];t.pos(s.x,s.y),t.posIndex=i,t.zOrder=s.zor,this.updateItemShow(t,e),this.spItems.addChild(t),this.items.push(t)}this.updateLanguageState()},e.updateItem=function(){for(var t,e=0;e<co.flowerLanguageItemPos.length;e++){var i=co.flowerLanguageItemPos[e];this.items[e].pos(i.x,i.y),this.items[e].posIndex=e,this.items[e].zOrder=i.zor,t=e<3?po.getLanguagesVOById(this.flowerLanguageIndex[e]):po.getLanguagesVOById(this.flowerLanguageIndex[this.flowerLanguageIndex.length-(6-e)]),this.updateItemShow(this.items[e],t)}},e.updateNextItem=function(t){var e,i,s,n=0;i=this.getItemByIndex(3),1==t?(s=this.getItemByIndex(2),e=(n=this.getArrIndexInList(s.id))==this.flowerLanguageIndex.length-1?po.getLanguagesVOById(this.flowerLanguageIndex[0]):po.getLanguagesVOById(this.flowerLanguageIndex[n+1]),this.updateItemShow(i,e)):2==t&&(s=this.getItemByIndex(4),e=0==(n=this.getArrIndexInList(s.id))?po.getLanguagesVOById(this.flowerLanguageIndex[this.flowerLanguageIndex.length-1]):po.getLanguagesVOById(this.flowerLanguageIndex[n-1]),this.updateItemShow(i,e))},e.updateItemShow=function(t,e){t.id=e.id,t.txtName.text=e.name,t.txtDesc.text=e.desc;var i=ur.getItem(e.id);i&&(t.txtName.color=U.getColorLight(i.color),t.txtDesc.color=U.getColorLight(i.color),t.imgFlower.skin=i.realMaxico),t.imgLanguage.skin="modules/marry/img/language"+e.color+".png"},e.getArrIndexInList=function(t){for(var e=0;e<this.flowerLanguageIndex.length;e++)if(this.flowerLanguageIndex[e]==t)return e;return null},e.updateAttr=function(){this.spAttr.visible=!0,this.list.visible=!1;for(var t,e=po.getComTotalAttrs(this.type),i="",s=0;s<e.length;s++)(t=e[s])&&(i+=(s+1)%2==0?W.getAttrStrByNum(t.key,t.val,""," +","\n"):Kt.inputEmpty(W.getAttrStrByNum(t.key,Math.floor(t.val),""," +",""),15)+k.getEmpty(4));this.txtAttr1.text=i;var n,o=po.getSpcTotalAttr(this.type),a="";for(var l in o)1==(n=o[l]).type?a+="双方同时拥有花语后，全角色伤害增加"+n.val+"点\n":2==n.type&&(a+="双方同时拥有花语后，全角色伤害增加"+n.val+"%\n");this.txtAttr2.text=a},e.rotateFrame=function(t){switch(t){case 1:_t.addToFrame(this,this.rotateLeft);break;case 2:_t.addToFrame(this,this.rotateRight)}},e.rotateRight=function(){var t;if(this.isMovingOver(2)){var e;for(var i in this.rotateIndex=0,this.items)(e=this.items[i]).posIndex=(e.posIndex+1)%6;return(t=this.getItemByIndex(3)).pos(-120,70),t.zOrder=0,_t.removeFromFrame(this,this.rotateRight),void(this.isMoving=!1)}if(this.rotateIndex%2==0)for(var s=0;s<6;s++){switch(this.items[s].posIndex){case 0:case 1:case 4:case 5:this.items[s].x+=5;break;case 2:case 3:this.items[s].x+=15}switch(this.items[s].posIndex){case 0:case 1:case 2:this.items[s].y-=1,this.items[s].zOrder-=1;break;case 3:case 4:case 5:this.items[s].y+=1,this.items[s].zOrder+=1}}this.rotateIndex++},e.rotateLeft=function(){if(this.isMovingOver(1)){var t;for(var e in this.rotateIndex=0,this.items)(t=this.items[e]).posIndex-=1,t.posIndex=0<=t.posIndex?t.posIndex:t.posIndex+6;return _t.removeFromFrame(this,this.rotateLeft),void(this.isMoving=!1)}if(this.rotateIndex%2==0)for(var i=0;i<6;i++){switch(this.items[i].posIndex){case 0:case 1:case 2:case 5:this.items[i].x-=5;break;case 3:case 4:this.items[i].x-=15}switch(this.items[i].posIndex){case 0:case 4:case 5:this.items[i].y-=1,this.items[i].zOrder-=1;break;case 1:case 2:case 3:this.items[i].y+=1,this.items[i].zOrder+=1}}this.rotateIndex++},e.isMovingOver=function(t){var e=co.flowerLanguageItemPos;switch(t){case 1:var i;for(var s in this.items)if(1==(i=this.items[s]).posIndex&&i.x==e[0].x)return!0;break;case 2:var n;for(var o in this.items)if(0==(n=this.items[o]).posIndex&&n.x==e[1].x)return!0}return!1},e.sortItem=function(t,e){po.myFlowerLanguages;var i=po.getLanguagesVOById(t),s=po.getLanguagesVOById(e);return n.isInHasList(t)&&0==n.isInHasList(e)?-1:0==n.isInHasList(t)&&n.isInHasList(e)?1:i.color>s.color?-1:i.color<s.color?1:i.id>s.id?1:-1},e.getItemByIndex=function(t){var e;for(var i in this.items)if((e=this.items[i]).posIndex==t)return e;return null},e.sortItemList=function(){this.flowerLanguageIndex.sort(this.sortItem)},n.isInHasList=function(t){for(var e in n.flowerLanguageDatas)if(t==n.flowerLanguageDatas[e])return!0;return!1},n.flowerLanguageDatas=null,n}(),xN=function(t){function e(){this._data=null,e.__super.call(this),this.btnBuy.visible=this.btnAdd.visible=this.btnRemove.visible=!1,this.btnSend.visible=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageWishTaItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSend:ir.ins().toLanguageBuy(2,this._data.payId)}},i.update=function(){this.txtGold.text=this._data.gold+"元",this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=po.getLanguageSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,this.txtDesc.text=this._data.desc,n&&(this.txtName.color=U.getColorLight(n.color),this.imgToken.skin=n.realMaxico),this.imgMy.visible=po.checkIsHasLanguage(this._data.id,po.myFlowerLanguages),this.imgCouple.visible=po.checkIsHasLanguage(this._data.id,po.taFlowerLanguages)},I(0,i,"uiClass",function(){return"FlowerLanguageShopItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Xv),CN=function(t){function e(){this.txtCoupon=null,this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtCoupon=new jt,this.txtCoupon.fontSize=24,this.txtCoupon.color="#a23d43",this.txtCoupon.pos(350,350),this.addChild(this.txtCoupon),this.on("click",this,this.onClick),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24}w(e,"modules.marry.views.MarryBuyTokenConfirmView",Wv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:sr.ins().toTokenBuy(1,this._data.payId),this.closeWindow();break;case this.btnCancel:Tr.ins().toExchange(17,this._data.id,1),this.closeWindow();break;case this.imgClose:this.closeWindow()}},i.update=function(t){this._data=t,this.txtInfo.innerHTML=Bt.isFanTi?Z.span("确定花费"+t.gold+"仙尊幣或"+t.coupon+"礼券购买","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("吗？","#a23d43"):Z.span("确定花费"+t.gold+"元或"+t.coupon+"礼券购买","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("吗？","#a23d43"),this.btnSure.label=Bt.isFanTi?t.gold+"仙尊幣购买":t.gold+"元购买",this.btnCancel.label=t.coupon+"礼券购买",this.txtCoupon.text="拥有礼券："+pe.getScore(17)},I(0,i,"uiClass",function(){return"MarryRequestConfirmView"}),e}(),PN=function(t){function e(){this._type=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.scrollBar.autoHide=!0,this.tab.setItemSize(100,42,"10, 10, 10, 10"),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.marry.flowerFaerie.views.FlowerLanguageWishListPanel",Qv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onDisplay=function(){this.tab.selectedIndex=0,this.tab.on("change",this,this.onChange),T.register("ROLE_SCORE_CHANGE",this,this.updateTxtNum),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.updateTxtNum)},i.onChange=function(){this.updateList()},i.update=function(){this.txtNum.text="当前拥有花券："+pe.getScore(25),this.updateList()},i.updateTxtNum=function(t){t&&25==t.id&&(this.txtNum.text="当前拥有花券："+pe.getScore(25))},i.updateList=function(){var t=0;t=0==this.tab.selectedIndex?0:this.tab.selectedIndex+1;var e=po.getLanguagesByColor(t,this._type);this.list.dataSource=e},I(0,i,"type",null,function(t){this._type=t,1==this._type?this.list.itemRender=bN:2==this._type&&(this.list.itemRender=xN)}),e}(),TN=function(t){function e(){this.monthToken=null,this.yearsToken=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.monthToken=new Ah(105,130,!0,!0,!0,!0,105),this.monthToken.pos(128,147),this.addChild(this.monthToken),this.yearsToken=new Ah(105,130,!0,!0,!0,!0,105),this.yearsToken.pos(415,147),this.addChild(this.yearsToken),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryAnniversaryRewardView",zv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnMonth:"领取"==this.btnMonth.label&&sr.ins().toReward(1);break;case this.btnAnniversary:"领取"==this.btnAnniversary.label&&sr.ins().toReward(2);break;case this.imgClose:this.closeWindow()}},i.update=function(){this.txtDate.text="结缘吉日："+x.setToDatenoTime(fo.marryTs),this.monthToken.dataSource=[fo.baseVO.monthRewardObj.typeId,fo.baseVO.monthRewardObj.num],this.yearsToken.dataSource=[fo.baseVO.yearsRewardObj.typeId,fo.baseVO.yearsRewardObj.num];var t=fo.checkIsMonthAnniversary(),e=fo.getRewards.indexOf(1);t?-1==e?(this.btnMonth.label="领取",this.btnMonth.disabled=!1):(this.btnMonth.label="已领取",this.btnMonth.disabled=!0):(this.btnMonth.label="未满足",this.btnMonth.disabled=!0);var i=fo.checkIsYearsAnniversary(),s=fo.getRewards.indexOf(2);i?-1==s?(this.btnAnniversary.label="领取",this.btnAnniversary.disabled=!1):(this.btnAnniversary.label="已领取",this.btnAnniversary.disabled=!0):(this.btnAnniversary.label="未满足",this.btnAnniversary.disabled=!0)},e}(),kN=function(t){function e(){this.txtGold=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.txtGold=new jt,this.txtGold.fontSize=24,this.txtGold.color="#a23d43",this.txtGold.pos(102,350,!0),this.addChild(this.txtGold),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24,this.txtInfo.style.lineHeight=40,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryRequestConfirmView",Wv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:sr.ins().toRequest(fo.requestFriendP.role_id,fo.requestUseItem.typeId,fo.requestWorld),this.closeWindow();break;case this.btnCancel:case this.imgClose:this.closeWindow()}},i.update=function(){var t=Z.span("确定向【"+fo.requestFriendP.role_name+"】发送结缘请求吗？","#a23d43")+"<br/>";t+=Z.span("结缘成功后，情缘信钗所增加的好感度将","#a23d43")+Z.span("翻倍","#b60202")+Z.span("！","#a23d43")+"<br/>",t+=Z.span("（结缘请求超时或被拒绝均会","#a23d43")+Z.span("全额返还","#b60202")+Z.span("信钗元宝）","#a23d43"),this.txtInfo.innerHTML=t,this.txtGold.text="（消耗："+fo.requestUseItem.price+"元宝）"},e}(),AN=function(t){function e(){this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24}w(e,"modules.marry.views.MarrySendConfirmView",Wv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:sr.ins().toTokenBuy(2,this._data.payId),this.closeWindow();break;case this.btnCancel:case this.imgClose:this.closeWindow()}},i.update=function(t){this._data=t;var e=Z.span("确定花费"+t.gold+"元赠送","#a23d43")+Z.span(t.name,U.getColorLight(t.color))+Z.span("给【"+fo.coupleInfoP.role_name+"】吗？","#a23d43");e+=Z.span("（信物不可使用礼券赠送）","#a23d43"),this.txtInfo.innerHTML=e},I(0,i,"uiClass",function(){return"MarryRequestConfirmView"}),e}(),EN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryDivorceCoerceView",$v);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:if(this.checkCanBuy()){var e=Z.span("是否花费","#5d3924")+Z.span("200元宝","#F7EF5F")+Z.span("强制离异？","#5d3924");Lo.showSecAlert(e,this,this.doDivcorce,null)}break;case this.btnCancel:case this.imgClose:this.closeWindow()}},i.checkCanBuy=function(){var t;return 0==(t=88<=pe.user.attr.gold)&&Lo.showAlert(),t},i.doDivcorce=function(){sr.ins().toDivorceRequest(1),this.closeWindow(),sr.ins().hideReplyIcon()},e}(),RN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryDivorceReplyView",Zv);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSure:sr.ins().toDivorceReply(1),this.closeWindow();break;case this.btnCancel:sr.ins().toDivorceReply(2),this.closeWindow();break;case this.imgClose:this.closeWindow()}},i.update=function(){fo.coupleInfoP&&(this.txtInfo.text="【"+fo.coupleInfoP.role_name+"】申请与你解除结缘关系，是否同意？")},e}(),ON=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.marry.views.MarryTokenLogItem",t);var i=e.prototype;return i.update=function(){this.txtTime.text=x.setToDatenoTime(this._data.give_ts),this.txtMsg.text="【"+this._data.role_name+"】赠送了";var t=fo.getTokenVOById(this._data.item_id);t&&(this.txtGoodsName.text=t.name,this.txtGoodsName.x=this.txtMsg.x+this.txtMsg.textWidth+2)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(Yv),LN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0),this.on("click",this,this.onClick)}return w(e,"modules.marry.views.MarryDivorceRequestView",Jv),e.prototype.onClick=function(t){switch(t.target){case this.btnSure:sr.ins().toDivorceRequest(2),this.closeWindow();break;case this.btnCancel:case this.imgClose:this.closeWindow()}},e}(),DN=function(t){function e(){this.divorceRequestView=null,this.divorceCcoerceViewView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0),this.on("click",this,this.onClick)}return w(e,"modules.marry.views.MarryDivorceTypeView",tI),e.prototype.onClick=function(t){switch(t.target){case this.btnPeace:this.closeWindow(),this.divorceRequestView=this.divorceRequestView||new LN,this.divorceRequestView.openWindow();break;case this.btnCoerce:this.closeWindow(),this.divorceCcoerceViewView=this.divorceCcoerceViewView||new EN,this.divorceCcoerceViewView.openWindow();break;case this.imgClose:this.closeWindow()}},e}(),NN=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.marry.views.MarryExtraDescItem",t);var i=e.prototype;return i.update=function(){this.imgFavor.skin="modules/friend/"+this._data.url+".png",this.txtFavor.text=this._data.favor+"",this.txtDesc.text=this._data.desc},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),I(0,i,"select",null,function(t){this.imgSelect.visible=t,this.txtFavor.color=this.txtDesc.color=t?"#FFCC33":"#5d3924"}),e}(eI),VN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=NN,this.list.scrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryExtraDescView",iI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.update=function(t){for(var e=fo.extraDescs?fo.extraDescs.length:0,i=0;i<e&&!(t<fo.extraDescs[i].favor);i++);this.list.dataSource=fo.extraDescs,this.txtFavor.text=t+"";var s=i-1;for(i=0;i<e;i++){this.list.cells[i].select=i==s}},e}(),BN=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.on("display",this,this.onDisplay),this.list.itemRender=MN,this.list.scrollBar.autoHide=!0,this.tab.on("change",this,this.onChange),this.imgClose.on("click",this,this.closeWindow)}w(e,"modules.marry.views.MarryFriendListView",sI);var i=e.prototype;return i.onDisplay=function(){this.tab.selectedIndex=0},i.update=function(){var t=fo.getFriendsByFavor(this.tab.selectedIndex);this.list.dataSource=t},i.onChange=function(){0==this.tab.selectedIndex?this.list.itemRender=MN:this.list.itemRender=FN,this.update()},e}(),MN=function(t){function e(){this._data=null,this._originX=NaN,this._blueBox=null,e.__super.call(this),this._originX=this.txtName.x,this.btnMarry.visible=!0,this.imgGift.visible=this.imgGold.visible=!1,this.btnMarry.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryFriendMeetItem",t);var i=e.prototype;return i.onClick=function(t){fo.requestFriendP=this._data,sr.ins().openRequestPanel()},i.update=function(){this.txtName.text=this._data.role_name,this.txtName.text=this._data.role_name,this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this.txtFavor.text=this._data.favor+"",this.updateBlueVip(this._data.blue_vip)},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueBox=this._blueBox||new Rh,this.addChild(this._blueBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(this.txtName.x,this.txtName.y),this._blueBox.updateShowing(e),this.txtName.x=this._blueBox.width+this._originX}},I(0,i,"uiClass",function(){return"MarryFriendListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(nI),FN=function(t){function e(){this._data=null,this._originX=NaN,this._blueBox=null,e.__super.call(this),this._originX=this.txtName.x,this.btnMarry.visible=!1,this.imgGift.visible=this.imgGold.visible=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryFriendNotMeetItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgGift:me.linkTo(11505,[this._data,0]);break;case this.imgGold:ql.getInstance().toGive(this._data.role_id)}},i.update=function(){this.txtName.text=this._data.role_name,this.txtName.text=this._data.role_name,this.txtLevel.text=this._data.regrow+"转"+this._data.level+"级",this.txtPower.text=this._data.power+"",this.imgHead.skin="com/head/big"+this._data.category+this._data.sex+".png",this.txtFavor.text=this._data.favor+"",this.imgGold.gray=!Qn.checkCanGrant(this._data.role_id),this.updateBlueVip(this._data.blue_vip)},i.updateBlueVip=function(t){if(Bt.isQQyxdt()){this._blueBox=this._blueBox||new Rh,this.addChild(this._blueBox);var e=new ms;e.blueInfo=t,e.pos=new Tt(this.txtName.x,this.txtName.y),this._blueBox.updateShowing(e),this.txtName.x=this._blueBox.width+this._originX}},I(0,i,"uiClass",function(){return"MarryFriendListItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){(this._data=t)&&this.update()}),e}(nI),UN=(function(t){function e(){this.txtID=null,this.txtDes=null,this.txtName=null,this.btn=null,e.__super.call(this)}w(e,"ui.modules.activity.freeMall.BuyBackDialogUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/freeMall/BuyBackDialog")}}(),function(t){function e(){e.__super.call(this),this.setWindowType(),this.txtInfo.style.align="center",this.txtInfo.style.fontSize=24,this.txtInfo.style.lineHeight=30,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryReplyAgreeView",oI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnGo:me.linkTo(11901),this.closeWindow();break;case this.btnCancel:case this.imgClose:this.closeWindow()}},i.update=function(t){var e=Z.span("恭喜你与【"+t+"】有情人终成眷属！","#a23d43")+"<br/>";e+=Z.span("可以前往仙侣界面查看属于你们的仙侣墙哦~","#a23d43"),this.txtInfo.innerHTML=e},e}()),GN=function(t){function e(){this.tokenGoodsItem=null,this.replyvo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.tokenGoodsItem=new Ah(105,110,!0,!0,!1,!0,105),this.tokenGoodsItem.pos(268,145),this.addChild(this.tokenGoodsItem),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryReplyPanel",aI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgClose:this.closeWindow();break;case this.btnSure:sr.ins().toReply(this.replyvo.roleId,1),this.closeWindow();break;case this.btnCancel:sr.ins().toReply(this.replyvo.roleId,2),this.closeWindow()}},i.update=function(){if(this.replyvo=fo.getReplyVO(),this.replyvo){this.txtTitle.text=this.replyvo.roleName+"请求与你结缘",this.txtMsg.text=this.replyvo.msg,this.txtMsg.height=this.txtMsg.textHeight;var t=fo.getBaseTokenInfo(this.replyvo.useItem);t&&(this.txtFavor.text=t.favor+""),this.tokenGoodsItem.dataSource=ur.getItem(this.replyvo.useItem)}this.list.refresh(),this.txtInfo.innerHTML=Z.span("结缘成功后，情缘信钗所增加的好感度将","#a23d43")+Z.span("翻倍","#b60202")+Z.span("！","#a23d43")},e}(),HN=function(t){function e(){this.TOKEN_ITEM_POS=[[45,131],[195,131],[346,131],[493,131]],this.SELECTE_IMG_POS=[[35,121],[185,121],[336,121],[483,121]],this.tokenItems=null,this.selectedToken=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.initTokenItems(),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryRequestPanel",lI);var i=e.prototype;return i.onDisplay=function(){this.txtInput.on("focus",this,this.inputFocus),this.imgSelected.visible=!1},i.inputFocus=function(){this.txtTip.visible=!1},i.onUnDisplay=function(){this.txtInput.off("focus",this,this.inputFocus)},i.initTokenItems=function(){this.tokenItems=[];for(var t=0;t<4;t++){var e=fo.baseVO.chooseTokenList[t],i=ur.getItem(e.typeId),s=new fh(i,!0,!0,105);this["txtFavor"+t].text=e.favor,this["txtTokenName"+t].text=i.name,this["txtTokenName"+t].color=U.getColorLight(i.color),s.pos(this.TOKEN_ITEM_POS[t][0],this.TOKEN_ITEM_POS[t][1],!0),s.on("click",this,this.onClickToken),ft.ins().register(s,this,500,this.onLongClickItem,[s],this.onClickToken,[s]),this.addChild(s),this.tokenItems.push(s)}},i.onClick=function(t){switch(t.target){case this.imgClose:this.closeWindow();break;case this.btnRequest:if(0==this.imgSelected.visible)return void Jt.addTip("请从上方选择情缘信钗");if(0==this.txtInput.text.length)return void Jt.addTip("请填写爱的宣言");if(pe.gold<this.selectedToken.price)return void Lo.showAlert();fo.requestWorld=this.txtInput.text,fo.requestUseItem=this.selectedToken,sr.ins().openRequestConfirmView()}},i.onClickToken=function(t){for(var e=t.target,i=0,s=0;s<this.tokenItems.length;s++){this.tokenItems[s]==e&&(this.imgSelected.visible=!0,this.imgSelected.pos(this.SELECTE_IMG_POS[s][0],this.SELECTE_IMG_POS[s][1],!0),i=s)}this.selectedToken=fo.baseVO.chooseTokenList[i],this.txtCost.text="消耗："+this.selectedToken.price+"元宝"},i.onLongClickItem=function(t){var e="";t.data.tempNum=1,e=ur.isEquip(t.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(t.data,e)},i.update=function(){this.txtCost.text="消耗：0",fo.requestFriendP?this.txtName.text="结婚对象："+fo.requestFriendP.role_name:this.txtName.text="结婚对象：",this.txtInput.text="",this.txtTip.visible=!0,this.txtInfo.innerHTML=Z.span("结缘成功后，情缘信钗所增加的好感度将","#a23d43")+Z.span("翻倍","#b60202")+Z.span("！","#a23d43")},e}(),WN=function(t){function e(){this._typeId=0,this.index=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenItem",t);var i=e.prototype;return i.onClick=function(){null==fo.getTokenVOById(this._typeId)&&T.dispatch("MARRY_CHANGE_TO_SHOP_TAB")},i.update=function(){var t=fo.getTokenVOById(this._typeId),e=this.index%3;if(t){this.txtName.text=t.name,this.txtName.color=U.getColorDark(t.color);var i=ur.getItem(t.id);i&&(this.imgIcon.skin=i.realMaxico),this.imgBg.skin="modules/marry/"+t.color+"_"+e+".png",this.imgAdd.visible=!1}else this.txtName.text="",this.imgIcon.skin=null,this.imgBg.skin="modules/marry/0_"+e+".png",fo.isShowMyMarry?this.imgAdd.visible=!0:this.imgAdd.visible=!1},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._typeId=t,this.update()}),e}(rI),qN=function(t){function e(){this.curView=null,this.myShowView=null,this.shopView=null,this.taShowView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay)}w(e,"modules.marry.views.MarryTokenPanel",hI);var i=e.prototype;return i.onDisplay=function(){T.register("MARRY_CHANGE_TO_SHOP_TAB",this,this.showShopTab)},i.onUndisplay=function(){T.remove("MARRY_CHANGE_TO_SHOP_TAB",this,this.showShopTab)},i.showShopTab=function(){this.tab.selectedIndex=1},i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onTabChange=function(){switch(this.spView.removeChild(this.curView),this.tab.selectedIndex){case 0:this.myShowView=this.myShowView||new jN,this.myShowView.type=1,this.curView=this.myShowView,fo.isShowMyMarry?sr.ins().toToken(pe.roleID):jo.curClickRankData&&sr.ins().toToken(jo.curClickRankData.role_id);break;case 1:fo.isShowMyMarry?(this.shopView=this.shopView||new XN,this.curView=this.shopView,this.toCoupleTokens()):(this.taShowView=this.taShowView||new jN,this.taShowView.type=2,this.curView=this.taShowView,jo.curClickRankData&&sr.ins().toToken(jo.curClickRankData.ext_role_id));break;case 2:this.taShowView=this.taShowView||new jN,this.taShowView.type=2,this.curView=this.taShowView,this.toCoupleTokens()}this.spView.addChild(this.curView),this.curView.update()},i.toCoupleTokens=function(){fo.coupleInfoP&&sr.ins().toToken(fo.coupleInfoP.role_id)},i.update=function(){this.curView&&this.curView.update()},i.setTabLabels=function(){fo.isShowMyMarry?this.tab.labels="信物展示,信物商店,TA的信物":this.tab.labels="信物展示,TA的信物"},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.setTabLabels()},e}(),YN=(function(t){function e(){this.titleImg=null,this.btnClose=null,this.btnJinli=null,this.btnGold=null,this.imgInfo=null,this.txtMsg=null,this.titleTxt=null,e.__super.call(this)}w(e,"ui.modules.activity.yunyou.YunyouAlertUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/activity/yunyou/YunyouAlert")}}(),function(t){function e(){this._data=null,this.img=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenShopItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:fo.checkIsHasToken(this._data.id,fo.myTokens)?Jt.addTip("你已拥有这件信物，不可重复购买~"):sr.ins().openBuyTokenConfirmView(this._data);break;case this.btnSend:sr.ins().openSendTokenConfirmView(this._data);break;case this.btnAdd:fo.checkIsHasToken(this._data.id,fo.myTokens)?Jt.addTip("你已拥有这件信物，无法加入心愿单~"):sr.ins().toTokenWish(1,this._data.id)}},i.update=function(){this.txtGold.text=Bt.isFanTi?this._data.gold+"":this._data.gold+"元",Bt.isFanTi?(this.txtGold.x=443,this.img=this.img||new et,this.img.skin="com/ui/godcoin.png",this.img.scaleX=.6,this.img.scaleY=.7,this.img.x=60,this.txtGold.addChild(this.img)):this.txtGold.x=453,this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=fo.getTokenSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,n&&(this.txtName.color=U.getColorLight(n.color),this.imgToken.skin=n.realMaxico),this.imgMy.visible=fo.checkIsHasToken(this._data.id,fo.myTokens),this.imgCouple.visible=fo.checkIsHasToken(this._data.id,fo.taTokens)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),I(0,i,"data",function(){return this._data}),e}(uI)),XN=function(t){function e(){e.__super.call(this),this.list.itemRender=YN,this.list.scrollBar.autoHide=!0,this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick),this.tab.labels=mo.TOKEN_SHOP_TAB_LABELS,this.tab.setItemSize(100,42,"10,10,10,10")}w(e,"modules.marry.views.MarryTokenShopView",cI);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.tab.selectedIndex=0,this.cb.selected=!1,this.cb.on("change",this,this.onChange),this.tab.on("change",this,this.onChange),T.register("ROLE_SCORE_CHANGE",this,this.updateTxtNum)},i.onUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.updateTxtNum)},i.onChange=function(){this.updateList()},i.onClick=function(t){switch(t.target){case this.btnMy:sr.ins().toTokenWishInfo(1),sr.ins().openWishListPanel(1);break;case this.btnTa:sr.ins().toTokenWishInfo(2),sr.ins().openWishListPanel(2)}},i.update=function(){this.txtNum.text="当前拥有礼券："+pe.getScore(17),this.updateList()},i.updateTxtNum=function(t){t&&17==t.id&&(this.txtNum.text="当前拥有礼券："+pe.getScore(17))},i.updateList=function(){var t=0;t=0==this.tab.selectedIndex?0:this.tab.selectedIndex+1;var e=fo.getTokens(t,this.cb.selected);e=e.sort(this.sortData),this.list.dataSource=e},i.sortData=function(t,e){var i=fo.checkIsHasToken(t.id,fo.myTokens),s=fo.checkIsHasToken(e.id,fo.myTokens);return i&&0==s?1:0==i&&s?-1:t.color>e.color?1:t.color<e.color?-1:0},e}(),KN=function(t){function e(){this._data=null,e.__super.call(this),this.btnSend.visible=this.btnAdd.visible=!1,this.btnBuy.visible=this.btnRemove.visible=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenWishMyItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBuy:sr.ins().openBuyTokenConfirmView(this._data);break;case this.btnRemove:sr.ins().toTokenWish(2,this._data.id)}},i.update=function(){this.txtGold.text=this._data.gold+"元",this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=fo.getTokenSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,n&&(this.imgToken.skin=n.realMaxico)},I(0,i,"uiClass",function(){return"MarryTokenShopItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(uI),jN=function(t){function e(){this.itemPos=[[95,130],[265,130],[435,130],[95,425],[265,425],[435,425]],this.type=0,this.curPage=0,this.maxPage=0,this.tokenItems=null,this.tokenDatas=null,this.isShowLog=!1,e.__super.call(this),this.initItems(),this.list.itemRender=ON,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenShowView",dI);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onClick=function(t){switch(t.target){case this.btnBefor:0==this.curPage?Jt.addTip("已经是第一页"):this.curPage--,this.updateBtn(),this.updateItems();break;case this.btnNext:this.curPage==this.maxPage?Jt.addTip("已经是最后一页"):this.curPage++,this.updateBtn(),this.updateItems();break;case this.txtOperate:this.isShowLog=!this.isShowLog,this.isShowLog?(this.updateLogs(),this.txtOperate.text="信物属性",this.txtTitle.text="赠送记录"):(this.updateAttr(),this.txtOperate.text="赠送记录",this.txtTitle.text="信物总属性")}},i.initItems=function(){this.tokenItems=[];for(var t=0;t<6;t++){var e=new WN;e.pos(this.itemPos[t][0],this.itemPos[t][1],!0),this.addChild(e),this.tokenItems.push(e)}},i.update=function(){if(1==this.type?this.tokenDatas=fo.myTokens:2==this.type&&(this.tokenDatas=fo.taTokens),this.tokenDatas){var t=this.tokenDatas.length;this.maxPage=Math.floor(t/6),0<t%6&&(this.maxPage+=1),this.updateItems(),this.isShowLog?this.updateLogs():this.updateAttr()}this.updateBtn()},i.updateBtn=function(){0==this.maxPage||1==this.maxPage?(this.btnBefor.visible=!1,this.btnNext.visible=!1):0==this.curPage?(this.btnBefor.visible=!1,this.btnNext.visible=!0):this.curPage==this.maxPage-1?(this.btnBefor.visible=!0,this.btnNext.visible=!1):(this.btnBefor.visible=!0,this.btnNext.visible=!0)},i.updateItems=function(){for(var t=this.getCurShowTokens(),e=0;e<this.tokenItems.length;e++){var i=this.tokenItems[e];i.index=e+1;var s=t[e];i.dataSource=s}},i.getCurShowTokens=function(){var t=[];if(this.tokenDatas){var e=this.tokenDatas.length,i=6*this.curPage,s=i+6;s=e<s?e:s;for(var n=i;n<s;n++)t.push(this.tokenDatas[n])}return t},i.updateAttr=function(){this.spAttr.visible=!0,this.list.visible=!1;for(var t,e=fo.getComTotalAttrs(this.type),i="",s=0;s<e.length;s++)(t=e[s])&&(i+=(s+1)%2==0?W.getAttrStrByNum(t.key,t.val,""," +","\n"):Kt.inputEmpty(W.getAttrStrByNum(t.key,Math.floor(t.val),""," +",""),15)+k.getEmpty(4));this.txtAttr1.text=i;var n,o=fo.getSpcTotalAttr(this.type),a="";for(var l in o)1==(n=o[l]).type?a+="仙侣同时在线时，全角色伤害增加"+n.val+"点\n":2==n.type&&(a+="仙侣同时在线时，全角色伤害增加"+n.val+"%\n");this.txtAttr2.text=a},i.updateLogs=function(){this.spAttr.visible=!1,this.list.visible=!0,1==this.type?this.list.dataSource=fo.myTokenLogs:2==this.type&&(this.list.dataSource=fo.taTokenLogs)},e}(),QN=function(t){function e(){this._data=null,e.__super.call(this),this.btnBuy.visible=this.btnAdd.visible=this.btnRemove.visible=!1,this.btnSend.visible=!0,this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenWishTaItem",t);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSend:sr.ins().toTokenBuy(2,this._data.payId)}},i.update=function(){this.txtGold.text=this._data.gold+"元",this.txtNum.text=this._data.coupon+"",this.txtEffDesc.text=fo.getTokenSpcAttrStr(this._data.spcAttrObj.type,this._data.spcAttrObj.val);for(var t,e="",i=this._data.comAttrList.length,s=0;s<i;s++)t=this._data.comAttrList[s],e+=W.getName(t.key)+"："+t.val,s!=i-1&&(e+="\n");this.txtAttr.text=e;var n=ur.getItem(this._data.id);this.txtName.text=this._data.name,n&&(this.imgToken.skin=n.realMaxico)},I(0,i,"uiClass",function(){return"MarryTokenShopItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&this.update()}),e}(uI),zN=function(t){function e(){this._type=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.scrollBar.autoHide=!0,this.tab.setItemSize(100,42,"10,10,10,10"),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)}w(e,"modules.marry.views.MarryTokenWishListPanel",pI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow()}},i.onDisplay=function(){this.tab.selectedIndex=0,this.tab.on("change",this,this.onChange)},i.onChange=function(){this.updateList()},i.update=function(){this.txtNum.text="当前拥有礼券："+pe.getScore(17),this.updateList()},i.updateList=function(){var t=0;t=0==this.tab.selectedIndex?0:this.tab.selectedIndex+1;var e=fo.getTokensByColor(t,this._type);this.list.dataSource=e},I(0,i,"type",null,function(t){this._type=t,1==this._type?this.list.itemRender=KN:2==this._type&&(this.list.itemRender=QN)}),e}(),$N=function(t){function e(){this.LEFT_ROLE_POS=[200,430],this.RIGHT_ROLE_POS=[510,430],this.myRole=null,this.myTitle=null,this.dearRole=null,this.dearTitle=null,this.loadMyCompleteHandler=null,this.loadDearCompleteHandler=null,this._selfBlueVipBox=null,this._dearBlueVipBox=null,e.__super.call(this),Nt.register("RP_MARRY_ANNIVERSARY_REWARD",this.txtViewReward,new Tt(10,-20)),Nt.register("RP_FLOWER_FAERIE",this.imgFaerie),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.marry.views.MarryView",mI);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){this.imgFaerie.visible=pe.checkLevel(5,0)},i.onClick=function(t){switch(t.target){case this.btnFind:1==fo.marryState?(sr.ins().openFriendListView(),sr.ins().toFriendList()):2==fo.marryState&&Jt.addTip("请耐心等候对方答复");break;case this.txtViewReward:sr.ins().openAnniversaryRewardView();break;case this.imgWall:Jt.addTip("爱墙展示敬请期待");break;case this.imgToken:sr.ins().openTokenPanel();break;case this.imgDesc:var e=0;fo.coupleInfoP&&(e=jn.getFriendFavorByRoleId(fo.coupleInfoP.role_id)),sr.ins().openExtraDescView(e);break;case this.imgFaerie:sr.ins().openFlowerFaeriePanel(),ir.ins().toPetalInfo()}},i.update=function(){var t,e,i,s,n=0,o=0,a=0,l=0,r=0;if(fo.isShowMyMarry){var h=pe.getPalByIndex(0);h&&(t=h.ext.skin,n=h.ext.sex,o=h.ext.title),e=pe.roleName,fo.coupleInfoP&&(i=fo.coupleInfoP.skin,a=fo.coupleInfoP.sex,l=fo.coupleInfoP.title,r=jn.getFriendFavorByRoleId(fo.coupleInfoP.role_id),s=fo.coupleInfoP.role_name)}else if(jo.curClickRankData){r=jo.curClickRankData.elements[1];var u=jo.curClickRankData.elements[0].split("&");e=u[0],s=u[1];var c=jo.getExtraInfoToc(jo.curClickRankData.role_id);c&&(t=c.skin,n=c.sex);var d=jo.getExtraInfoToc(jo.curClickRankData.ext_role_id);d&&(i=d.skin,a=d.sex)}this.myRole=this.myRole||new _h,this.myRole.resetSkin(t,n,!0),this.myRole.resetState(0),this.myRole.play("sit",4,4,!0),this.loadMyCompleteHandler=this.loadMyCompleteHandler||Q.create(this,this.onLoadMyComplete,null),this.myRole.heightChangeHandler=this.loadMyCompleteHandler,this.txtMyName.x=this.myRole.x-100,null==this.myRole.parent&&this.spEff.addChild(this.myRole),1==n?(this.myRole.pos(this.LEFT_ROLE_POS[0],this.LEFT_ROLE_POS[1]),this.imgEgg.pos(390,216),this.btnFind.pos(418,302),this.txtRequestName.pos(419,370),this.spTip.pos(388,153)):(this.myRole.pos(this.RIGHT_ROLE_POS[0],this.RIGHT_ROLE_POS[1]),this.imgEgg.pos(108,216),this.btnFind.pos(136,302),this.txtRequestName.pos(88,350),this.spTip.pos(95,153)),this.txtMyName.text=e,null==this.myTitle&&(this.myTitle=b.getOne(),this.myTitle.x=this.myRole.x,this.spEff.addChild(this.myTitle)),this.myTitle.y=this.myRole.y-195;var p=va.getTitleSceneUrl(o);if(this.myTitle.loadAndPlay(p,"default",0,!0),this.updateBlueVipShow(!0,pe.getRoleBlueVipInfo()),3==fo.marryState){if(fo.coupleInfoP){this.dearRole=this.dearRole||new _h,this.dearRole.resetSkin(i,a,!0),this.dearRole.resetState(0),this.dearRole.play("sit",4,4,!0),this.loadDearCompleteHandler=this.loadDearCompleteHandler||Q.create(this,this.onLoadDearComplete,null),this.dearRole.heightChangeHandler=this.loadDearCompleteHandler,1==a?this.dearRole.pos(this.LEFT_ROLE_POS[0],this.LEFT_ROLE_POS[1]):this.dearRole.pos(this.RIGHT_ROLE_POS[0],this.RIGHT_ROLE_POS[1]),this.txtDearName.x=this.dearRole.x-100,this.txtDearName.text=s,null==this.dearRole.parent&&this.spEff.addChild(this.dearRole),this.txtFavor.text=r+"",null==this.dearTitle&&(this.dearTitle=b.getOne(),this.dearTitle.x=this.dearRole.x,this.spEff.addChild(this.dearTitle)),this.dearTitle.y=this.dearRole.y-170;var m=va.getTitleSceneUrl(l);this.dearTitle.loadAndPlay(m,"default",0,!0),this.updateBlueVipShow(!1,fo.coupleInfoP.blue_vip)}this.updateAnniversaryDate(),this.txtRequestName.text="",this.imgEgg.visible=this.btnFind.visible=this.spTip.visible=this.spDesc.visible=!1,this.imgToken.visible=this.imgWall.visible=this.txtViewReward.visible=this.spDay.visible=!0}else this.txtDearName.text="",this.txtFavor.text="0",this.imgEgg.visible=this.btnFind.visible=this.spTip.visible=this.visible=!0,this.imgToken.visible=this.imgWall.visible=this.txtViewReward.visible=this.spDay.visible=!1,2==fo.marryState?(this.txtRequestName.text=fo.requestName,this.btnFind.label="请求中..."):(this.txtRequestName.text="",this.btnFind.label="去寻觅")},i.updateAnniversaryDate=function(){if(fo.isShowMyMarry){this.spDay.visible=!0,this.txtViewReward.visible=!0;var t=fo.getMarryDayNum(fo.marryTs);this.txtDay.text=t+"";var e=fo.getMonthAnniversaryDayNum(fo.marryTs);this.txtAnniversary.innerHTML=0==e?Z.span("今天是结缘月纪念日","#e1c6bc"):Z.span("距离结缘月纪念日还有","#e1c6bc")+Z.span(""+e,"#fdc06a")+Z.span("天","#e1c6bc")}else this.spDay.visible=!1,this.txtViewReward.visible=!1},i.updateBlueVipShow=function(t,e){var i=new ms;i.blueInfo=e,t?(i.nameText=this.txtMyName,this._selfBlueVipBox=this._selfBlueVipBox||new Rh,this.addChild(this._selfBlueVipBox),this._selfBlueVipBox.updateShowing(i)):(i.nameText=this.txtDearName,this._dearBlueVipBox=new Rh,this.addChild(this._dearBlueVipBox),this._dearBlueVipBox.updateShowing(i))},i.onLoadMyComplete=function(){var t=pe.getPalByIndex(0);if(t){var e=Mt.getResource(Pe.getRoleUnitSubFile(t.ext.skin.body)+t.ext.skin.body+"_sit_4");if(e){e.getActHeight("sit",4);this.txtMyName.x=this.myRole.x-100}}},i.onLoadDearComplete=function(){var t=Mt.getResource(Pe.getRoleUnitSubFile(fo.coupleInfoP.skin.body)+fo.coupleInfoP.skin.body+"_sit_4");if(t){t.getActHeight("sit",4);this.txtDearName.x=this.dearRole.x-100}},e}(),ZN=function(t){function e(){this._data=null,this.can=!1,this.items=null,e.__super.call(this),this.on("click",this,this.onClick),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5")}w(e,"modules.mission.FuncPreview",fI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btnYes:this.can?(Tr.ins().toRoleAdvanceOpen(this._data.functionID),0<this._data.linkid&&me.linkTo(this._data.linkid)):Jt.addTip(this._data.desc1),this.closeWindow()}},I(0,i,"data",null,function(t){var e="modules/funcPreview/"+(this._data=t).ord+"/";this.imgCon.skin=e+"panelCon.png",this.imgTitle.skin=e+"panelTitle.png",this.txtDesc1.text=t.desc1,this.txtDesc2.text=t.desc2;var i=t.awards;this.items=this.items||[];for(var s,n=Math.max(this.items.length,i.length),o=(757-(i.length-1)*t.sub-180)/2,a=0;a<n;a++)a<i.length?(null==this.items[a]&&(this.items[a]=new Ah(91,91,!1,!0,!0,!0),this.items[a].y=358),this.items[a].parent||this.addChild(this.items[a]),(s=this.items[a]).x=o+a*t.sub,s.dataSource=i[a]):this.items[a]&&this.items[a].parent&&this.items[a].removeSelf();var l,r=this._data.cons;for(var h in r){var u;for(var c in l=r[h],this.can=!0,l){switch((u=l[c]).id){case 1:this.can=this.can&&pe.myEquipLevel>=u.val;break;case 2:this.can=this.can&&Ds.curBarrier>=u.val;break;case 3:this.can=this.can&&Ia.curLv>=u.val}if(!this.can)break}if(this.can)break}this.can?0<this._data.awards.length?this.btnYes.label="领取":(this.height=630,this.imgLine.visible=!1,0<this._data.linkid?this.btnYes.label="前往":this.btnYes.label="确认"):this.btnYes.label="确认",0<this._data.awards.length?(this.height=630,this.imgLine.visible=!0):(this.height=510,this.imgLine.visible=!1)}),e}(),JN=(function(t){function e(){this.bcTitle=null,this.imgDivision=null,this.imgStage=null,this.spStar=null,this.list=null,this.btnGet=null,this.btnSend=null,e.__super.call(this)}w(e,"ui.modules.athletics.soloRanking.SoloRankingResultPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/athletics/soloRanking/SoloRankingResultPanel")}}(),function(t){function e(){this.goodsItem=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7"),this.goodsItem=new Ah(90,100,!1,!0,!0,!0,100,!0),this.goodsItem.pos(290,75),this.addChild(this.goodsItem),this.on("click",this,this.onClick)}w(e,"modules.mission.MissionLevelTipView",_I);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.spWay1:me.linkTo(10600),this.closeWindow();break;case this.spWay2:50<=pe.myLevel?(me.linkTo(10602),this.closeWindow()):Jt.addTip("回魂仙梦50级开启");break;case this.btnClose:case this.btnClose2:this.closeWindow()}},i.update=function(){var t=ur.getItem(10201116);t&&(this.goodsItem.dataSource=t),50<=pe.myLevel?this.txtDesc3.visible=!1:this.txtDesc3.visible=!0},e}()),tV=function(t){function e(){this.bcEffect1=null,this.bcEffect2=null,e.__super.call(this),this.on("click",this,this.onClick),this.bcEffect1=b.getOne(),this.addChild(this.bcEffect1),this.bcEffect2=b.getOne(),this.bcEffect2.pos(39,42),this.addChild(this.bcEffect2)}w(e,"modules.mission.MissionMainView",gI);var i=e.prototype;return i.onClick=function(){if(pt.send(10,1,"主线任务"),go.curMission)if(this.checkPoint(go.curMission),1==go.curMission.state){if(1==yt.isQQ&&10081==go.curMission.mission_id){var t=new Ee;return t.msg="观看广告，立即领取专属称号",t.yesCaller=this,t.yesLabel="前往",t.noLabel="取消",t.yesFun=this.goToBanner,void EF.showVO(t)}var e=go.getMissionVOById(go.curMission.mission_id);e&&(pe.myLevel>=e.lv?me.linkTo(e.linkId):nr.ins().openLevelTipPanel())}else 2==go.curMission.state&&nr.ins().toGetReward()},i.checkPoint=function(t){if(1==go.curMission.state)switch(t.mission_id){case 10001:c.send(29013);break;case 10002:c.send(29019)}else if(2==go.curMission.state)switch(t.mission_id){case 1e4:c.send(29007);break;case 10001:c.send(29018);break;case 10002:c.send(29024);break;case 10003:c.send(29025)}},i.update=function(){go.curMission&&this.updateInfo()},i.updateInfo=function(){var t=go.getMissionVOById(go.curMission.mission_id);t&&(this.txtDesc.text=t.desc,2==go.curMission.state?(this.bcEffect1.pos(105,45),this.bcEffect2.visible=!0,this.bcEffect1.loadAndPlay("unit/effect/mission_main_finsh1","default",0,!0),this.bcEffect2.loadAndPlay("unit/effect/mission_main_finsh2","default",0,!0),this.txtNum.color="#b0eb5b",this.txtNum.text="（"+t.num+"/"+t.num+"）"):(this.bcEffect2.visible=!1,this.bcEffect1.pos(152,49),this.bcEffect1.loadAndPlay("unit/effect/mission_main_normal","default",0,!0),this.txtNum.color="#b60202",this.txtNum.text="（"+go.curMission.process+"/"+t.num+"）"),this.txtNum.x=this.txtDesc.x+this.txtDesc.textWidth,this.txtReward.text=t.rewards,(10070==t.id||10003<=t.id&&t.id<=10016||10079==t.id||10080==t.id)&&0==LD.hasParent()&&1==this.visible&&LD.showStep(LD.CONTINUE_MISSION,this),10017==t.id&&1==go.curMission.state&&T.dispatch("GUIDE_STEP_FASHION"))},i.updateByEffect=function(){go.curMission&&_t.setTimeout(this,this.timeoutTween,null,100)},i.timeoutTween=function(){go.curMission&&(this.tweenEffectOut(),_t.setTimeout(this,this.tweenEffectOutComplete,null,500))},i.tweenEffectOut=function(){ie.to(this.spInfo,{x:300,alpha:0},500,A.quadOut,Q.create(this,this.tweenEffectOutComplete))},i.tweenEffectOutComplete=function(){this.spInfo.x=-100,this.updateInfo(),ie.to(this.spInfo,{x:0,alpha:1},200,A.quadOut,Q.create(this,this.tweenEffectInComplete)),_t.setTimeout(this,this.tweenEffectInComplete,null,200)},i.tweenEffectInComplete=function(){this.spInfo.x=0,this.spInfo.alpha=1},i.removeSelf=function(){return T.dispatch("MISSION_FINISHED"),laya.display.Node.prototype.removeSelf.call(this)},i.goToBanner=function(){Bt.sdk.showBannerVideo(8)},i.openBannerFinish=function(){var t=go.getMissionVOById(10081);t&&(pe.myLevel>=t.lv?me.linkTo(t.linkId):nr.ins().openLevelTipPanel())},e}(),eV=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.mission.PreIcon",yI);var i=e.prototype;return i.onClick=function(){T.dispatch("OPEN_FUNCTION_PREVIEW",this._data)},I(0,i,"data",function(){return this._data},function(t){if(this._data!=t){if(this._data=t){var e="modules/funcPreview/"+t.ord+"/";this.imgTitle.skin=e+"iconTitle.png",this.imgCon.skin=e+"iconCon.png",this.txt.text=t.desc1}ih.show("unit/effect/func3",82,50,this)}}),e}(),iV=function(t){function e(){this.pool=null,this._panelKey=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.panel.hScrollBarSkin="",this.on("click",this,this.onClick),this.on("undisplay",this,this.onPanelUndisplay)}w(e,"modules.moneyLess.MoneyLessPanel",vI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:T.dispatch("OPEN_CHARGE");break;case this.imgClose:this.closeWindow();break;case this.txtLink:0<Ia.curLv?me.linkTo(10201,Ia.curLv+1):me.linkTo(11448)}},i.update=function(){var t;if(this.rePool(),0<Ia.curLv){if(t=Ia.getRewards(Math.min(Ia.maxLv,Ia.curLv+1)))for(var e=0;e<t.length;e++)this.setOneGood(parseInt(t[e][0]),parseInt(t[e][1]),parseInt(t[e][2])).pos(130*e,5)}else if(t=[{type_id:13000146,num:1,reserve:1},{type_id:13000008,num:1,reserve:1},{type_id:10201112,num:1,reserve:1},{type_id:10201147,num:1,reserve:1}]){var i;for(e=0;e<t.length;e++)i=t[e],this.setOneGood(i.type_id,i.num,i.reserve).pos(130*e,5)}this.panel.hScrollBar.value=0},i.setOneGood=function(t,e,i){var s=this.getOneItem();return s.dataSource=t,s.num=e,s.effVisible=1==i,s.showEff(),this.panel.addChild(s),s},i.getOneItem=function(){return this.pool&&0<this.pool.length?this.pool.pop():new im(91,95,!1,!0,!0,!0)},i.rePool=function(){var t;for(this.pool=this.pool||[];0<this.panel.numChildren;)(t=this.panel.removeChildAt(0)).effVisible=!1,this.pool.push(t)},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),_t.clearTimeout(this._panelKey)},i.onPanelUndisplay=function(){this._panelKey=_t.setTimeout(this,this.clear,null,ya.coldTime)},i.clear=function(){this&&(this.destroy(),e._ins=null),se.destroy("modules/moneyLess")},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.moneyLess.MoneyLessPanelUI._$SET_ins),e.show=function(){e.ins.openWindow(),e.ins.update()},e._ins=null,e}(),sV=function(t){function e(){this.lastSub=0,this.lastTotal=100,this.txt=null,e.__super.call(this),Nt.register("RP_MAIL",this.imgMail),this.mouseThrough=!0,this.on("click",this,this.onClick),this.imgFashion.on("mousedown",this,this.onMouseDown),this.imgFashion.on("mouseup",this,this.onMouseUp),this.imgFashion.on("mouseout",this,this._$7_onMouseOut),this.imgFashion.on("mouseover",this,this._$7_onMouseOver),this.imgMail.on("mousedown",this,this.onMouseDown),this.imgMail.on("mouseup",this,this.onMouseUp),this.imgMail.on("mouseout",this,this._$7_onMouseOut),this.imgMail.on("mouseover",this,this._$7_onMouseOver),this.txt=new jt,this.txt.color="#ffffff",this.txt.fontSize=14,this.txt.pos(8,195),this.txt.width=89,this.txt.height=14,this.txt.align="center",this.addChild(this.txt),or.ins().toFashionGoalInfo(),Bt.isZKPf9991Server()?this.changeImage():Bt.isHuoWu()?this.imgMail.skin="com/ui3/mail.png":Bt.isQiYuxtzzios()?this.imgMail.skin="com/ui4/mail.png":Bt.isQiYuiosssgl()&&(this.imgMail.skin="com/ui7/mail.png"),Bt.isQiYuxfcyios()&&(this.imgMail.visible=!1)}w(e,"modules.navigation.view.LeftNavBar",II);var i=e.prototype;return i.changeImage=function(){this.imgMail.skin="com/ui2/mail.png"},i.updateFashionView=function(){Nt.unRegister(this.imgFashion);for(var t=0;t<4;t++)Nt.unRegister(this.imgFashion);if(T.remove("GUIDE_STEP_FASHION",this,this.onMission10017),vo.isFashionOpen){Nt.register("RP_FASHION_TAR",this.imgFashion);for(var e=0;e<4;e++)Nt.register("RP_FASHION_TAR_"+e,this.imgFashion);T.register("GUIDE_STEP_FASHION",this,this.onMission10017)}this.imgFashion.visible=vo.isFashionOpen,vo.isFashionOpen?this.setFashionTarVisible(this.lastTotal<100):this.setFashionTarVisible(!1)},i.onMission10017=function(){null!=this.stage&&0==re.hasView()&&LD.showStep(LD.CLICK_FASHION,this.imgFashion)},i.setFashionTarVisible=function(t){this.imgBtm.visible=this.imgBar.visible=this.txt.visible=t&&vo.isFashionOpen},i.setFashionTarPro=function(t,e){this.setFashionTarVisible(e<100),100!=e?(t/e!=this.lastSub/this.lastTotal&&(this.imgBar.width=83*t/e,this.lastSub=t,this.lastTotal=e),this.txt.text=t+"/"+e):Tr.ins().removeFashiontarListener()},i._$7_onMouseOver=function(t){switch(t.target){case this.imgFashion:this.imgFashion.y=95;break;case this.imgMail:this.imgMail.y=-3}},i._$7_onMouseOut=function(t){switch(t.target){case this.imgFashion:this.imgFashion.y=98,this.imgFashion.scale(1,1);break;case this.imgMail:this.imgMail.y=0,this.imgMail.scale(1,1)}},i.onMouseUp=function(t){switch(t.target){case this.imgFashion:this.imgFashion.y=98,this.imgFashion.scale(1,1);break;case this.imgMail:this.imgMail.y=0,this.imgMail.scale(1,1)}},i.onMouseDown=function(t){t.target.scale(.9,.9)},i.onClick=function(t){switch(t.target){case this.imgMail:pt.send(14,1,"信件入口"),me.linkTo(10401);break;case this.imgFashion:T.dispatch("OPEN_FASHION_TAR")}},e.IMG_SCALE=.9,e}(),nV=function(t){function e(){this.bar=null,this.txt=null,this.uiIndex=0,e.__super.call(this),this.initView()}w(e,"modules.navigation.view.NavBar",wI);var i=e.prototype;return i.initView=function(){this.cacheAs="normal",this.mouseThrough=!0,this.imgRole.on("click",this,this.onClickRole),this.imgSkill.on("click",this,this.onClickSkill),this.imgRefine.on("click",this,this.onClickRefine),this.imgBag.on("click",this,this.onClickBag),this.imgShop.on("click",this,this.onClickShop),this.imgFriend.on("click",this,this.onClickFriend),this.imgPet.on("click",this,this.onClickPet),this.imgRole.on("mouseover",this,this._$7_onMouseOver),this.imgSkill.on("mouseover",this,this._$7_onMouseOver),this.imgRefine.on("mouseover",this,this._$7_onMouseOver),this.imgBag.on("mouseover",this,this._$7_onMouseOver),this.imgRole.on("mouseout",this,this._$7_onMouseOut),this.imgSkill.on("mouseout",this,this._$7_onMouseOut),this.imgRefine.on("mouseout",this,this._$7_onMouseOut),this.imgBag.on("mouseout",this,this._$7_onMouseOut),this.imgPet.on("mouseover",this,this._$7_onMouseOver),this.imgPet.on("mouseout",this,this._$7_onMouseOut),this.bar=new p(-1,134,750,17,"com/ui/expBar.png","com/ui/expBarBg.png",[1,1,1,1],[1,1,1,1],[3,2,3,2],"#ffffff",16),this.bar.setValue(0,10),this.bar.setTextvisible(!1),this.addChild(this.bar);var t=new et;t.skin="com/ui/expBarBg.png",t.x=-1,t.bottom=2,this.addChild(t),this.txt=Me.createText("",0,132,750,16,this),this.txt.fontSize=16,this.txt.stroke=1,this.txt.strokeColor="#000000",this.txt.color="#ffffff",this.txt.align="center";for(var e=0;e<4;e++)Nt.register("RP_FASHION_NEW1_"+e,this.imgRole),Nt.register("RP_FASHION_NEW2_"+e,this.imgRole),Nt.register("RP_FASHION_NEW3_"+e,this.imgRole);Nt.register("RP_FOOT_PRINT_PURIFY",this.imgRole),Nt.register("RP_FOOT_PRINT_CHANGE",this.imgRole),Nt.register("RP_FASHION1",this.imgRole),Nt.register("RP_FASHION2",this.imgRole),Nt.register("RP_FASHION3",this.imgRole),Nt.register("RP_BUILDSOUL",this.imgRole),Nt.register("RP_ORANGE_UP",this.imgRole),Nt.register("RP_ORANGE_DE_1",this.imgRole),Nt.register("RP_ORANGE_DE_2",this.imgRole),Nt.register("RP_SPEQUIP",this.imgRole),Nt.register("RP_EQUIP_CHANGE",this.imgRole),Nt.register("RP_OPEN_PAL",this.imgRole),Nt.register("RP_REGROW",this.imgRole),Nt.register("RP_REGROW_SCORE",this.imgRole),Nt.register("RP_WING_EQUIP_OPEN",this.imgRole),Nt.register("RP_SPLIT",this.imgRole),Nt.register("RP_WING_EQUIP",this.imgRole),Nt.register("RP_TITLE",this.imgRole),Nt.register("EQUIP_MELTING",this.imgBag),Nt.register("WING_MELTING",this.imgBag),Nt.register("GOODS_CAN_USE",this.imgBag),Nt.register("GOODS_CAN_COMPOSE",this.imgBag),Nt.register("RP_CHAT_PRIVATE_NEWS",this.imgFriend),Nt.register("RP_CHAT_PRIVATE_NEWS_CROSS",this.imgFriend),Nt.register("RP_FRIEND_REQUEST",this.imgFriend),Nt.register("RP_FRIEND_REQUEST_CROSS",this.imgFriend),Nt.register("RP_FRIEND_GIFT_LETTER",this.imgFriend),Nt.register("RP_MARRY",this.imgFriend),Nt.register("RP_MARRY_ANNIVERSARY_REWARD",this.imgFriend),Nt.register("RP_FRIEND_FIRST_OPEN_ADD_PANEL",this.imgFriend),Nt.register("RP_FRIEND_ACHIEVEMENT",this.imgFriend),Nt.register("RP_FLOWER_FAERIE",this.imgFriend),Nt.register("RP_SKILL_LEVEL",this.imgSkill),Nt.register("RP_SKILL_BOOK",this.imgSkill),Nt.register("RP_SKILL_STEP",this.imgSkill),Nt.register("RP_REFINE_REINF",this.imgRefine),Nt.register("RP_REFINE_ENGRAVE",this.imgRefine),Nt.register("RP_REFINE_QUALITY",this.imgRefine),Nt.register("RP_REFINE_SOUL",this.imgRefine),Nt.register("WING_LEVEL_UP",this.imgRole),Nt.register("RP_DOMINATE_CHANGE",this.imgRole),Nt.register("RP_DOMINATE_DE",this.imgRole),Nt.register("RP_DOMINATE_QU",this.imgRole),Nt.register("RP_DOMINATE_UP",this.imgRole),Nt.register("RP_PET_SOUL_CHANGE",this.imgPet),Nt.register("RP_PET_LEVEL_UP",this.imgPet),Nt.register("RP_PET_LEVEL_UP",this.imgPet),Nt.register("RP_PET_SKILL_LEVEL_UP",this.imgPet),Nt.register("RP_PET_SOUL_EQUIP",this.imgPet),Nt.register("RP_PET_SOUL_LEVEL_UP",this.imgPet),Nt.register("RP_PET_DEVOTE",this.imgPet),Nt.register("RP_PET_EXP_BOX_IS_FULL",this.imgPet),Nt.register("RP_PET_EXP_BOX_CAN_UP",this.imgPet),Nt.register("RP_SPRITE_BUY_FREE",this.imgPet),Nt.register("RP_PET_SPSOUL_STEP",this.imgPet),Nt.register("RP_PET_SPSOUL_POLY",this.imgPet),T.register("MYSTERY_SHOP_TIP",this,this.showImgShopTip),T.register("MYSTERY_UN_SHOP_TIP",this,this.unShowShopTip),this.imgShop.visible=!G.isReviewVersion,this.uiIndex=Bt.getUiIndex(),this.changeImage(this.uiIndex)},i.changeImage=function(t){this.imgFriend.skin=1<t?"com/ui"+t+"/social.png":"com/ui/social.png",this.imgRole.skin=1<t?"com/ui"+t+"/role.png":"com/ui/role.png",this.imgSkill.skin=1<t?"com/ui"+t+"/skill.png":"com/ui/skill.png",this.imgRefine.skin=1<t?"com/ui"+t+"/refine.png":"com/ui/refine.png",this.imgPet.skin=1<t?"com/ui"+t+"/pet.png":"com/ui/pet.png",this.imgBag.skin=1<t?"com/ui"+t+"/pack.png":"com/ui/pack.png",this.imgShop.skin=1<t?"com/ui"+t+"/shop.png":"com/ui/shop.png"},i.showGuide=function(){LD.showStep(LD.OPEN_ROLE_PANEL,this.imgRole)},i.guideSoul=function(){LD.showStep(LD.OPEN_ROLE_SOUL,this.imgRole)},i._$7_onMouseOut=function(t){switch(t.target){case this.imgRole:this.imgRole.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/role.png":"com/ui/role1.png";break;case this.imgSkill:this.imgSkill.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/skill.png":"com/ui/skill1.png";break;case this.imgRefine:this.imgRefine.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/refine.png":"com/ui/refine1.png";break;case this.imgPet:this.imgPet.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pet.png":"com/ui/pet1.png";break;case this.imgBag:this.imgBag.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pack.png":"com/ui/pack1.png"}},i._$7_onMouseOver=function(t){switch(t.target){case this.imgRole:this.imgRole.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/role1.png":"com/ui/role1.png";break;case this.imgSkill:this.imgSkill.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/skill1.png":"com/ui/skill1.png";break;case this.imgRefine:this.imgRefine.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/refine1.png":"com/ui/refine1.png";break;case this.imgPet:this.imgPet.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pet1.png":"com/ui/pet1.png";break;case this.imgBag:this.imgBag.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pack1.png":"com/ui/pack1.png"}},i.update=function(){this.bar.setValue(pe.user.attr.exp,pe.user.attr.next_level_exp),this.txt.text=pe.user.attr.exp+"/"+pe.user.attr.next_level_exp},i.resetIconSelected=function(){this.imgRole.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/role.png":"com/ui/role.png",this.imgSkill.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/skill.png":"com/ui/skill.png",this.imgRefine.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/refine.png":"com/ui/refine.png",this.imgPet.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pet.png":"com/ui/pet.png",this.imgBag.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pack.png":"com/ui/pack.png"},i.onClickRole=function(){c.send(29002),this.imgRole.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/role1.png":"com/ui/role1.png",me.linkTo(11205),pt.send(4,1,"角色面板入口按钮"),Ut.getScreen(123456)},i.onClickSkill=function(){this.imgSkill.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/skill1.png":"com/ui/skill1.png",me.linkTo(11e3)},i.onClickRefine=function(){this.imgRefine.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/refine1.png":"com/ui/refine1.png",T.dispatch("OPEN_REFINE_PANEL"),pt.send(2,1,"轩辕鼎入口按钮")},i.onClickBag=function(){this.imgBag.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pack1.png":"com/ui/pack1.png",T.dispatch("OPEN_PACKVIEW"),pt.send(1,1,"背包入口按钮")},i.onClickPet=function(){this.imgPet.skin=1<this.uiIndex?"com/ui"+this.uiIndex+"/pet1.png":"com/ui/pet1.png",Eo.initPetGuide?Ne.isOpenPet()?Eo.hasPetGuide?mr.ins().openPetGuideGetView():me.linkTo(11601):Jt.addTip("仙宠功能5级开启"):Jt.addTip("正在初始化仙宠数据")},i.onClickFriend=function(){console.log("----------------------------nav click friend"),fo.isShowMyMarry=!0,me.linkTo(11501)},i.onClickShop=function(){pt.send(7,1,"商城入口"),me.linkTo(10102),this.unShowShopTip()},i.getBagPos=function(){return this.localToGlobal(new Tt(this.imgBag.x+this.imgBag.width/2,this.imgBag.y+this.imgBag.height))},i.showImgShopTip=function(){this.shopTip.visible=!0},i.unShowShopTip=function(){this.shopTip.visible=!1},e}(),oV=function(t){function n(){var t,e,i;this.effSuss=null,this.clip=null,this.itemEffs=null,this.speed=.5,this.hasGodCoin=pe.getScore(30),n.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.effSuss=b.getOne(),this.effSuss.mouseEnabled=!1,this.effSuss.pos(345,453),this.container.addChild(this.effSuss),this.clip=b.getOne(),this.clip.pos(204,510),this.container.addChild(this.clip),this.itemEffs=[];for(var s=0;s<Io.gifts.length;s++)t=new Ah(91,95,!1,!0,!0,!1),e=ur.getItem(Io.gifts[s][0]),t.dataSource=e,t.num=Io.gifts[s][1],t.pos(10+(t.width-40)*s,865),this.container.addChild(t),s<2&&((i=b.getOne()).mouseEnabled=!1,i.pos(t.x+90,t.y+93),this.container.addChild(i),this.itemEffs.push(i));this.htmlTime.style.lineHeight=30,this.htmlTime.style.align="center",this.htmlTime2.style.align="center",this.htmlDes.style.align="center",Nt.register("RP_ICON_NOBLE",this.btn),this.btn.on("click",this,this.onClick),this.btn2.on("click",this,this.onClick2),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.on("display",this,this.onDisplay)}w(n,"modules.noble.NoblePanel",bI);var e=n.prototype;return e.onDisplay=function(){for(var t in this.clip.loadAndPlay(Io.nobleVO.effurl,"default",0,!0),this.itemEffs)this.itemEffs[t].loadAndPlay("moduleEffect/goodsItemEff","default",0,!0);_t.addToFrame(this,this.tipFrame),this.on("undisplay",this,this.onUnDisplay)},e.onUnDisplay=function(){_t.removeFromFrame(this,this.tipFrame)},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.update()},e.onClick=function(t){switch(this.btn.label){case"领取":pt.send(25,3,"贵族-领取按钮"),ar.ins().toFetchToday();break;case"1680钻石抢购":case"168元抢购":Nl.ins().toPay(1002),pt.send(25,2,"贵族-抢购按钮");break;case"168仙尊幣搶購":Nl.ins().toExchange(1002)}},e.onClick2=function(t){0<ka.getForeverCondition(1201)?(Nl.ins().toPay(1201),pt.send(25,3,"贵族-永久贵族-优惠-抢购按钮")):(Nl.ins().toPay(1202),pt.send(25,4,"贵族-永久贵族-原价-抢购按钮"))},e.update=function(){9999999999==Io.endTime?(Io.canGift?(this.btn.label="领取",this.btnEnable=!0):(this.btn.label="已领取",this.btnEnable=!1),this.btn.pos(240,1066),this.btn2.visible=!1,this.btn2.mouseEnabled=!1,this.htmlTime.innerHTML=Z.span("永久贵族生效中","#ffffff"),this.htmlTime.pos(215,1029),this.htmlDes.visible=this.htmlTime2.visible=!1,this.tip.visible=!1):Io.endTime>ya.serverTime?(Io.canGift?(this.btn.label="领取",this.btnEnable=!0):(this.btn.label="已领取",this.btnEnable=!1),this.btn.pos(33,1066),this.htmlTime.pos(5,1029),this.htmlTime.innerHTML=Z.span("贵族剩余天数：","#ffffff")+Z.span(Math.floor((Io.endTime-ya.serverTime)/86400)+"","#96f254")+Z.span("天","#ffffff"),this.htmlTime2.visible=!1,this.updateForeverBuy()):(Bt.isFanTi?(this.btnEnable=!0,this.btn.label="168仙尊幣搶購"):(this.btnEnable=!0,this.btn.label=Bt.isXianLai?"1680钻石抢购":"168元抢购"),this.htmlTime.innerHTML=Z.span("每次购买有效期30天","#ffffff"),this.btn.pos(240,1066),this.htmlTime.pos(215,1029),this.btn2.visible=this.htmlTime2.visible=this.htmlDes.visible=this.tip.visible=!1)},e.updateForeverBuy=function(){this.btn2.visible=this.btn2.mouseEnabled=this.tip.visible=this.htmlTime2.visible=!0,0<ka.getForeverCondition(1201)?(Bt.isFanTi?(this.btn2.label="388仙尊幣搶購",this.htmlDes.innerHTML=Z.span("永久权益原价：888仙尊幣","#f4f1b2")):yt.isWX?(this.btn2.label="328元抢购",this.htmlDes.innerHTML=Z.span("永久权益原价：648元","#f4f1b2")):(this.btn2.label="388元抢购",Bt.isKeYi()?this.htmlDes.innerHTML=Z.span("永久权益原价：898元","#f4f1b2"):this.htmlDes.innerHTML=Z.span("永久权益原价：888元","#f4f1b2")),this.htmlDes.visible=!0,this.tip.skin="modules/welfare/img/newTip2.png",_t.addToSecond(this,this.loop)):(Bt.isFanTi?this.btn2.label="888仙尊幣搶購":yt.isWX?this.btn2.label="648元抢购":Bt.isKeYi()?this.btn2.label="898元抢购":this.btn2.label="888元抢购",this.htmlTime2.innerHTML=Z.span("永久贵族","#f4f1b2"),this.htmlDes.visible=!1,this.tip.visible=!1,_t.removeFromSceond(this,this.loop))},e.loop=function(){var t=ka.getForeverCondition(1201);if(9999999999<=Io.endTime||Io.endTime<9999999999&&t<=0)this.update();else{var e=x.formatDHMSArrStr(ka.getForeverCondition(1201));this.htmlTime2.innerHTML=Z.span("限时特惠：","#f4f1b2")+(null!=e[0]?Z.span(e[0],"#96f254"):"")+Z.span("天","#f4f1b2")+(null!=e[1]?Z.span(e[1],"#96f254"):"")+Z.span("小时","#f4f1b2")+(null!=e[2]?Z.span(e[2],"#96f254"):"")+Z.span("分","#f4f1b2")}},e.showSuss=function(){this.effSuss.loadAndPlay("moduleEffect/beNoble","default",0,!1)},e.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e.tipFrame=function(){this.tip.y+=this.speed,(this.tip.y<965||980<this.tip.y)&&(this.speed*=-1)},I(0,e,"btnEnable",null,function(t){this.btn.mouseEnabled=t,this.btn.gray=!t}),n}(),aV=(function(t){function e(){this.btnClose=null,this.imgInfo=null,this.txtMsg=null,e.__super.call(this)}w(e,"ui.modules.fcm.FcmAlertUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/fcm/FcmAlert")}}(),function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.offLineReward.OffLineRewardPanel",SI);var i=e.prototype;return i.onDisplay=function(){T.register("UPDATE_OFF_LINE_BUTTON",this,this.updateBtn),_r.ins().toRolePfRewardInfo()},i.onUnDisplay=function(){T.remove("UPDATE_OFF_LINE_BUTTON",this,this.updateBtn)},i.update=function(t,e,i,s,n,o){var a;for(var l in this.updateBtn(),e)2==(a=e[l]).type?this.txtSilver.text=a.val+"":3==a.type&&(this.txtExp.text=a.val+"");for(l in i)2==(a=i[l]).type?this.txtSilverExt1.text=a.val+"":3==a.type&&(this.txtExpExt1.text=a.val+"");for(l in s)2==(a=s[l]).type?this.txtSilverExt2.text=a.val+"":3==a.type&&(this.txtExpExt2.text=a.val+"");this.txtTime.text=x.formatDHMS(t),this.txtEquip.text=n+"",0<o?(this.txtSell.visible=!0,this.txtSell.innerHTML=Z.span("背包已满，自动出售","#5d3924",26)+Z.span(k.getHtmlEmpty(1)+o+k.getHtmlEmpty(1),"#96f254",26)+Z.span("件装备","#5d3924",26)):this.txtSell.visible=!1},i.initBtn=function(){this.goldImg.visible=!1,this.btnSure.label="确定",this.btnSure.labelAlign="center",this.btnSure.labelSize=32},i.changeBtnByShare=function(){this.goldImg.visible=!0,this.btnSure.label="    分享立即获得10",this.btnSure.labelAlign="left",this.btnSure.labelSize=22},i.updateBtn=function(){var t=Do.getLastGetTimes(1,2),e=x.getTotalTime(t),i=x.getTotalTime(ya.serverTime),s=e[0]==i[0]&&e[1]==i[1]&&e[2]==i[2];!yt.isWX&&!yt.isQQ||0!=t&&s?this.initBtn():this.changeBtnByShare()},i.share=function(){pt.send(38,4,"好友礼包-邀请好友-发送邀请按钮"),Bt.toGetShareInfo("7",[1,2]),Bt.sdk.setQuery("shareRoleId",pe.roleID),0==Do.getRewardTimes(1,2)&&_r.ins().toPfRewardGet([1,2])},i.onClick=function(t){switch(t.target){case this.btnSure:(yt.isWX||yt.isQQ)&&this.goldImg.visible?(this.share(),this.initBtn()):this.closeWindow();break;case this.btnClose:case this.btnBack:this.closeWindow()}},e}()),lV=function(t){function e(){this.btnClose=null,this.btnYes=null,this.btnNo=null,this.imgInfo=null,this.txtMsg=null,this.gold=null,this.goldNum=null,this.title=null,e.__super.call(this)}return w(e,"ui.modules.godHood.GodHoodSkillResetAlertUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/godHood/GodHoodSkillResetAlert")},e}(),rV=function(t){function e(){this.pData=null,e.__super.call(this)}return w(e,"modules.otherPet.view.OtherPetAttrPart",xI),e.prototype.update=function(){this.pData=wo.getPetDataByIndex(wo.curChooseIndex),this.pData&&(this.txtHp.text="生命："+this.pData.max_hp,this.txtAttack.text="攻击："+(1==this.pData.attack_type?this.pData.phy_attack:this.pData.magic_attack),this.txtPhyDefence.text="物防："+this.pData.phy_defence,this.txtMagicDefence.text="法防："+this.pData.magic_defence,this.txtDoubleAttack.text="暴击："+this.pData.double_attack,this.txtDoubleAttackAnti.text="韧性："+this.pData.double_attack_anti)},e}(),hV=(function(t){function e(){this.tipImg=null,this.btn=null,this.txtInfo=null,this.offLineTxt=null,e.__super.call(this)}w(e,"ui.modules.MainInfo.TendingViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/MainInfo/TendingView")}}(),function(t){function e(){this.pData=null,this.bookVO=null,this.clip=null,e.__super.call(this),this.clip=b.getOne(),this.clip.pos(200,170),this.addChildAt(this.clip,0),this.on("display",this,this.onAdd)}w(e,"modules.otherPet.view.OtherPetInfoPart",CI);var i=e.prototype;return i.onRemove=function(){this.off("undisplay",this,this.onRemove),this.on("display",this,this.onAdd),this.clip.stop()},i.onAdd=function(){this.on("undisplay",this,this.onRemove),this.off("display",this,this.onAdd),this.pData=wo.getPetDataByIndex(wo.curChooseIndex),this.pData&&this.updatePet(this.pData.skin_id)},i.updatePet=function(t){this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0),this.clip.scale(_e.scale,_e.scale)},i.update=function(){if(this.pData=wo.getPetDataByIndex(wo.curChooseIndex),this.pData){this.imgType.skin="modules/pet/icon"+this.pData.attack_type+".png",this.txtOwnName.text=wo.curPData.role_name,this.bookVO=Po.getBookVO(this.pData.skin_id),this.bookVO&&(this.txtType.text=this.bookVO.name);var t=this.pData.aptitude%1e5;this.txtTalent.text=t+"",this.txtTalent.color=Eo.getPetZZCol(t);for(var e=Math.floor(this.pData.type_id%1e5/1e4),i=0;i<this.spStar.numChildren;i++)this.spStar.getChildAt(i).visible=i<e-1;this.updatePet(this.pData.skin_id),this.txtLv.text=this.pData.level+"",this.txtName.text=this.pData.pet_name;var s,n=k.numToTexture(this.pData.power,"com/ui/powerNum");for(this.spPower.graphics.clear(),i=0;i<n.length;i++)s=n[i],this.spPower.graphics.drawTexture(s,s.width*i)}},e}()),uV=function(t){function e(){this._data=null,e.__super.call(this),this.on("mousedown",this,this.onMouseDown),this.on("mouseup",this,this.onMouseUp),this.on("mouseout",this,this._$7_onMouseOut)}w(e,"modules.pet.view.PetListItem",t);var i=e.prototype;return i._$7_onMouseOut=function(t){this.scale(1,1)},i.onMouseUp=function(t){this.scale(1,1)},i.onMouseDown=function(t){this.scale(.9,.9)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this._data){this.select=!1,this.imgPet.skin="com/petHead/"+this._data.skin_id+".png";var e=Math.floor(this._data.type_id%1e5/1e4);switch(this.imgBg.skin="com/ui/goodsBg"+e+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this._data.state){case 1:this.txtState.text="战",this.imgState.skin="modules/pet/bot_1.png";break;case 2:this.txtState.text="附",this.imgState.skin="modules/pet/bot_3.png";break;case 3:this.txtState.text="休",this.imgState.skin="modules/pet/bot_2.png";break;case 0:this.txtState.text="异",this.imgState.skin="modules/pet/bot_2.png"}this.txtLv.text=this._data.level+""}}),I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"redPoint",function(){return this.imgRp.visible},function(t){this.imgRp.visible=t}),e.IMG_SCALE=.9,e}(PI),cV=function(t){function e(){this.petList=null,this.infoPart=null,this.attrPart=null,this.skillPart=null,this.soulPart=null,this.selectItem=null,e.__super.call(this),this.setWindowType(),this.panel.vScrollBar.autoHide=!0,this.petList=new Eh(600,130,70,75,this.container,uV,5,1,-4,new Q(this,this.onRenderHandler),"com/ui/arrowLeft3.png","com/ui/arrowRight3.png",55,84),this.petList.on("select",this,this.onListSelect),this.infoPart=new dV("仙宠信息",hV,this.panel,this.updatePanelPos,this),this.attrPart=new dV("仙宠属性",rV,this.panel,this.updatePanelPos,this),this.skillPart=new dV("仙宠技能",pV,this.panel,this.updatePanelPos,this),this.soulPart=new dV("仙宠兽魂",mV,this.panel,this.updatePanelPos,this),this.updatePanelPos(),this.on("click",this,this.onClick)}w(e,"modules.otherPet.view.OtherPetPanel",TI);var i=e.prototype;return i.onRenderHandler=function(t,e){t.select=e==wo.curChooseIndex},i.onListSelect=function(t){wo.curChooseIndex=t,this.selectItem&&(this.selectItem.select=!1),this.selectItem=this.petList.getListCell(t),this.selectItem&&(this.selectItem.select=!0),this.updateParts()},i.update=function(){this.petList.data=wo.otherPets},i.updateParts=function(){this.infoPart&&this.infoPart.updateContain(),this.attrPart&&this.attrPart.updateContain(),this.skillPart&&this.skillPart.updateContain(),this.soulPart&&this.soulPart.updateContain(),this.updatePanelPos()},i.updatePanelPos=function(){rt.layoutVectical(this.panel,0,10),this.panel.refresh()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.openWindow=function(t,e){if(void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),wo.otherPets){for(var i,s=0,n=0;n<wo.otherPets.length;n++)if((i=wo.otherPets[n]).pet_name==wo.curInrankPetName&&i.pet_id==wo.curInrankPetID){s=n;break}this.petList.selectedIndex=s}},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),dV=function(t){function a(t,e,i,s,n,o){this._isShow=!1,this.contain=null,this._funChange=null,this._funCaller=null,void 0===t&&(t=""),void 0===o&&(o=!0),a.__super.call(this),this._funCaller=n,this.txt.text=t,e&&(this.contain=new e,this.sp.addChild(this.contain)),this._funChange=s,this.btn.on("click",this,this.onClick),i&&i.addChild(this),this.isShow=o}w(a,"modules.otherPet.view.OtherPetShowItem",t);var e=a.prototype;return e.updateContain=function(){this.contain&&this.contain.update()},e.onClick=function(t){this.isShow=!this.isShow,this._funChange&&this._funChange.call(this._funCaller)},I(0,e,"isShow",function(){return this._isShow},function(t){this._isShow=t,this.btn.label=this._isShow?"收起":"展开",this.sp.visible=this._isShow}),I(0,e,"height",function(){var t=this.contain?this.contain.height:0;return this._isShow?h.superGet(kI,this,"height")+this.sp.y+t:h.superGet(kI,this,"height")},t.prototype._$set_height),a}(kI),pV=function(t){function e(){this.vnum=5,this.pData=null,this.pSkill=null,this.uiSp=null,this.skillSp=null,this.petSp=null,this.txtSp=null,this.itemController=null,this.items=null,this.itemPool=null,this.itemKey=1,e.__super.call(this),this.uiSp=new Wt,this.sp.addChild(this.uiSp),this.skillSp=new Wt,this.sp.addChild(this.skillSp),this.petSp=new Wt,this.sp.addChild(this.petSp),this.txtSp=new Wt,this.sp.addChild(this.txtSp),this.itemController=Oe.getOne(),this.itemController.parents=[this.uiSp,this.skillSp,this.petSp,this.txtSp]}w(e,"modules.otherPet.view.OtherPetSkillPart",AI);var i=e.prototype;return i.update=function(){if(this.repool(),this.items=this.items||[],this.pData=wo.getPetDataByIndex(wo.curChooseIndex),this.pSkill=this.pData?this.pData.skill_info:null,this.pSkill){var t=this.pSkill.pet_skills?this.pSkill.pet_skills.length:0;this.txt.text="技能数量："+t;for(var e,i=0,s=0,n=0;n<t;n++)(e=this.getOneItem()).controller=this.itemController,e.resetLayerController([this.onClick,this,[e]]),e.sel=!1,e.data=this.pSkill.pet_skills[n],i=Math.floor(n/this.vnum),s=n%this.vnum,e.pos(s*e.width+20*s,i*e.height+20*i),this.items.push(e)}this.updateSize()},i.updateSize=function(){if(this.items&&0!=this.items.length)if(this.items.length<this.vnum){var t=this.items[this.items.length-1];this.sp.size(t.x+t.width,t.height)}else{var e=(t=this.items[this.vnum-1]).x+t.width,i=(t=this.items[this.items.length-1]).y+t.height;this.sp.size(e,i)}else this.sp.size(0,0);this.height=this.sp.y+this.sp.height},i.onClick=function(t){t&&t.data&&Ae.show(t.data,"PETFUSESKILL_TIP")},i.repool=function(){for(;this.items&&0<this.items.length;){var t=this.items.pop();t&&(t.removeSelf(),t.offAll(),this.itemPool=this.itemPool||[],this.itemPool.push(t))}},i.getOneItem=function(){if(this.itemPool&&0<this.itemPool.length)return this.itemPool.pop();var t=new TU;return t.onlyKey="OtherPetSkillItem_onlyKey"+this.itemKey,this.itemKey+=1,t},e}(),mV=function(t){function i(){var t;this.soulNum=8,this.effYs=[143,273,403,533,663,793,923,1053],this.pData=null,this.pSoul=null,i.__super.call(this);for(var e=0;e<this.soulNum;e++)(t=b.getOne()).pos(122,this.effYs[e]),this.addChild(t),this["eff"+e]=t;this.on("undisplay",this,this.onRemove)}w(i,"modules.otherPet.view.OtherPetSoulPart",EI);var e=i.prototype;return e.onRemove=function(){this.reset()},e.update=function(){if(this.reset(),this.pData=wo.getPetDataByIndex(wo.curChooseIndex),this.pSoul=this.pData?this.pData.soul_info:null,this.pSoul&&this.pSoul.pet_souls)for(var t,e=0,i=0;i<this.pSoul.pet_souls.length;i++)if(t=this.pSoul.pet_souls[i]){var s=Eo.getPetSoulVO(t.type_id);if(s){e+=s.getPowerByLv(t.soul_level);var n=s.pos-1;this["txtType"+n].visible=!1,this["txtName"+n].color=U.getColorDark(s.color),this["txtLv"+n].text="Lv."+t.soul_level,this["txtAttr"+n].text=s.getAttrByLv(t.soul_level,!1),0<t.soul_level&&(this["eff"+n].visible=!0,this["eff"+n].loadAndPlay("moduleEffect/"+s.eff,"default",0,!0))}}this.txtTitle.text="兽魂战力："+e},e.reset=function(){for(var t=0;t<this.soulNum;t++)this["txtType"+t].visible=!0,this["txtName"+t].color="#ffe8b8",this["txtLv"+t].text="Lv.0",this["txtAttr"+t].text="（尚未装备）",this["eff"+t].visible=!1,this["eff"+t].stop()},i}(),fV=function(t){function e(){this.curView=null,this.totalView=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!1,"TYPE_MAIN"),this.tab.itemClickFun=Q.create(this,this.onItemClick),this.onItemClick(0),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)}w(e,"modules.otherRole.view.ComparePanel",RI);var i=e.prototype;return i.onItemClick=function(t){switch(t){case 0:this.totalView=this.totalView||new yV,this.container.addChildAt(this.totalView,0),this.curView=this.totalView}},i.update=function(t){this.curView instanceof modules.otherRole.view.CompareTotalView&&this.curView.update(t)},e}(),_V=function(t){function e(){this.sub=[],this.isOpen=!1,this._id=0,this._op=0,e.__super.call(this),this.btnAdd.on("click",this,this.onClick),this.btn.on("click",this,this.onClickOpen)}w(e,"modules.otherRole.view.CompareTotalItem1",OI);var i=e.prototype;return i.onClickOpen=function(){me.linkTo(this._op)},i.onClick=function(){this.isOpen=!this.isOpen,0==this.isOpen?(this.btnAdd.skin="com/ui/btn_add.png",this.height=50):(this.btnAdd.skin="com/ui/btn_reduce.png",this.height=50*this.sub.length+50);for(var t=0;t<this.sub.length;t++){var e=this.sub[t];1==this.isOpen?(null==e.parent&&this.addChild(e),e.y=50*t+50):e.removeSelf()}this.event("change")},i.addItem=function(t){this.sub.push(t)},i.reset=function(t,e,i){this.txt.text=t,this._id=e,this._op=i},i.update=function(){var t=0,e=0;if(0<this.sub.length)for(var i=0;i<this.sub.length;i++){var s=this.sub[i];s.update(),t+=s.v1,e+=s.v2}else yV.powerData1[this._id]&&(t=yV.powerData1[this._id]),yV.powerData2[this._id]&&(e=yV.powerData2[this._id]);var n=Math.max(t,e);0==n?(this.bar1.width=174,this.bar2.width=174):(this.bar1.width=t/n*174,this.bar2.width=e/n*174),this.bar1.visible=0<t,this.bar2.visible=0<e,this.score1.text=t.toString(),this.score2.text=e.toString(),this.btnAdd.visible=0<this.sub.length},e}(),gV=function(t){function e(){this._id=0,this._op=0,this.v1=NaN,this.v2=NaN,this.show=!1,e.__super.call(this),this.btn.on("click",this,this.onClickOpen)}w(e,"modules.otherRole.view.CompareTotalItem2",LI);var i=e.prototype;return i.onClickOpen=function(){mn.isOpenFightSoul()||"战魂"!=this.txt.text?me.linkTo(this._op):pe.myRegrow<mn.getFightSoulOpenRegrowLevel()?Jt.addTip("该功能"+mn.getFightSoulOpenRegrowLevel()+"转开启"):Zn.godHoodLv<Xs.minGodLvl&&Jt.addTip("该功能在仙阶等级"+Xs.minGodLvl+"后开启")},i.reset=function(t,e,i){this.txt.text=t,this._id=e,this._op=i,"战魂"!=this.txt.text||Xs.isCrossOpen?this.show=!0:this.show=!1},i.update=function(){this.v1=0,this.v2=0,"战魂"==this.txt.text?((yV.powerData1[this._id]||yV.powerData1[this._id+1])&&(this.v1=yV.powerData1[this._id]+yV.powerData1[this._id+1]),(yV.powerData2[this._id]||yV.powerData2[this._id+1])&&(this.v2=yV.powerData2[this._id]+yV.powerData2[this._id+1])):(yV.powerData1[this._id]&&(this.v1=yV.powerData1[this._id]),yV.powerData2[this._id]&&(this.v2=yV.powerData2[this._id]));var t=Math.max(this.v1,this.v2);0==t?(this.bar1.width=142,this.bar2.width=142):(this.bar1.width=this.v1/t*142,this.bar2.width=this.v2/t*142),this.bar1.visible=0<this.v1,this.bar2.visible=0<this.v2,this.score1.text=this.v1.toString(),this.score2.text=this.v2.toString()},e}(),yV=function(t){function m(){this.palData1=null,this.palData2=null,this.allItem=null,this._roleID=NaN,this.palIndex=0,m.__super.call(this),this.panel.vScrollBarSkin="";this.allItem=[{title:"装备",id:0,op:11205,sub:[{title:"基础",id:1101,op:11205},{title:"铸魂",id:2801,op:11209},{title:"强化",id:1102,op:10901},{title:"铭刻",id:1103,op:10902},{title:"注灵",id:1104,op:10903},{title:"附魂",id:3301,op:10904},{title:"橙装洗练",id:4402,op:1142010}]},{title:"主宰装备",id:1,op:11211,sub:[{title:"基础",id:1201,op:11211},{title:"升级",id:1202,op:11211},{title:"淬炼",id:1203,op:11212}]},{title:"洪荒装备",id:3801,op:11402},{title:"其他装备",id:1,op:11205,sub:[{title:"天雷护符",id:1301,op:11201},{title:"八卦护符",id:1304,op:11204},{title:"龙魂",id:1302,op:11202},{title:"凤魂",id:1303,op:11203}]},{title:"称号",id:1401,op:11214},{title:"时装",id:1,op:11415,sub:[{title:"时装",id:1502,op:11415},{title:"武饰",id:1501,op:11416},{title:"羽翼",id:1503,op:11417}]},{title:"转生",id:1601,op:11206},{title:"羽翼",id:1,op:11207,sub:[{title:"基础",id:1701,op:11207},{title:"装备",id:1702,op:11418}]},{title:"元神",id:1801,op:11208},{title:"仙阶",id:1,op:11802,sub:[{title:"仙阶",id:2501,op:11802},{title:"仙器",id:2601,op:11804}]},{title:"技能",id:1,op:11e3,sub:[{title:"技能",id:1901,op:11e3},{title:"秘籍",id:2001,op:11001},{title:"突破",id:1902,op:11002}]},{title:"历练",id:1,op:10800,sub:[{title:"仙珠",id:2101,op:10801},{title:"神器",id:2201,op:10808},{title:"人物传记",id:2301,op:10806},{title:"符文",id:2401,op:10802},{title:"战魂",id:4301,op:10809},{title:"异兽",id:4201,op:10815},{title:"经脉",id:3903,op:10817},{title:"法宝",id:4401,op:10813},{title:"异火",id:4001,op:1080},{title:"灵宝",id:4403,op:10816},{title:"异兽谱",id:4406,op:10818}]},{title:"仙盟技能",id:3201,op:11304},{title:"仙宠",id:1,op:11601,sub:[{title:"附身",id:3401,op:11612},{title:"技能",id:3501,op:11607}]},{title:"古龙洞窟",id:4404,op:11708}],this.initItems(),this.resetPosition(),this.cateCom.on("change",this,this.onCateChange),this.btnLeft.on("click",this,this.onClickLeft),this.btnRight.on("click",this,this.onClickRight),this.on("display",this,this.onDisplay)}w(m,"modules.otherRole.view.CompareTotalView",DI);var e=m.prototype;return e.onDisplay=function(){this.palIndex=0,this.cateCom.selectedIndex=0,this.initItems(),this.resetPosition()},e.onClickLeft=function(){this.palIndex--,this.palIndex<0&&(this.palIndex=3),this.update(this._roleID)},e.onClickRight=function(){this.palIndex++,3<this.palIndex&&(this.palIndex=0),this.update(this._roleID)},e.onCateChange=function(){this.update(this._roleID)},e.initItems=function(){this.panel.destroyChildren();for(var t=0;t<this.allItem.length;t++){var e=this.allItem[t],i=e.sub,s=new _V;if(s.reset(e.title,e.id,e.op),s.on("change",this,this.resetPosition),null!=i)for(var n=0;n<i.length;n++){var o=i[n].title,a=new gV;a.reset(o,i[n].id,i[n].op),a.show&&s.addItem(a)}this.panel.addChild(s)}},e.resetPosition=function(){for(var t=0,e=0;e<this.panel.numChildren;e++){var i=this.panel.getChildAt(e);i.y=t,t+=i.height+2}},e.createOtherPalData=function(t){for(var e=[null,null,null,null],i=[1,2,3,4],s=0;s<4;s++){var n=t.pals[s];if(null!=n){e[s]=n.pal;var o=i.indexOf(n.pal.ext.category);i.splice(o,1)}else{var a=new Object;a.className="p_pal_data",a.ext=new Object,a.ext.className="p_pal_ext",a.ext.power=0,a.ext.power_infos=null,a.ext.skin=null,a.ext.show_cloth=!0,a.ext.category=0,a.ext.status=0,a.ext.title=0,a.ext.category=i.shift(),a.ext.sex=1,e[s]=a}}return e},e.createMyPalData=function(){for(var t=pe.pals,e=[null,null,null,null],i=[1,2,3,4],s=0;s<4;s++){var n=t[s];if(null!=n){e[s]=n;var o=i.indexOf(n.ext.category);i.splice(o,1)}else{var a=new Object;a.className="p_pal_data",a.ext=new Object,a.ext.className="p_pal_ext",a.ext.power=0,a.ext.power_infos=null,a.ext.skin=null,a.ext.show_cloth=!0,a.ext.category=0,a.ext.status=0,a.ext.title=0,a.ext.category=i.shift(),a.ext.sex=pe.getPalByIndex(0).ext.sex,e[s]=a}}return e},e.update=function(t){this._roleID=t;var e=bo.getRankRoleData(this._roleID);if(null!=e){this.palData1=this.createOtherPalData(e),this.palData2=this.createMyPalData(),0==this.cateCom.selectedIndex?(this.palData1.sort(m.sortOnPower),this.palData2.sort(m.sortOnPower)):(this.palData1.sort(m.sortOnCate),this.palData2.sort(m.sortOnCate));var i=0,s=this.palData1[this.palIndex];if(m.powerData1={},null!=s&&null!=s.ext&&null!=s.ext.power_infos)for(i=0;i<s.ext.power_infos.length;i++){var n=s.ext.power_infos[i];m.powerData1[n.id]=n.val}var o=this.palData2[this.palIndex];if(m.powerData2={},null!=o&&null!=o.ext&&null!=o.ext.power_infos)for(var a=0;a<o.ext.power_infos.length;a++){var l=o.ext.power_infos[a];m.powerData2[l.id]=l.val}null!=s&&null!=s.ext?(this.role1.text=e.role_name,this.imgHead1.skin="com/head/big"+s.ext.category+s.ext.sex+".png"):(this.role1.text="",this.imgHead1.skin=null),null!=o&&null!=o.ext?(this.role2.text=pe.roleName,this.imgHead2.skin="com/head/big"+o.ext.category+o.ext.sex+".png"):(this.role2.text="",this.imgHead2.skin=null);var r,h=null!=s&&null!=s.ext?s.ext.power:0,u=k.numToTexture(h,"com/ui/powerNum");for(this.spPower1.graphics.clear(),i=0;i<u.length;i++)r=u[i],this.spPower1.graphics.drawTexture(r,r.width*i);var c=null!=o&&null!=o.ext?o.ext.power:0,d=k.numToTexture(c,"com/ui/powerNum");for(this.spPower2.graphics.clear(),i=0;i<d.length;i++)r=d[i],this.spPower2.graphics.drawTexture(r,r.width*i);for(var p=0;p<this.panel.numChildren;p++){this.panel.getChildAt(p).update()}}else Jt.addTip("无法获取该玩家数据")},I(0,e,"uiClass",function(){return"CompareTotal"}),m.sortOnPower=function(t,e){return t.ext.power<e.ext.power?1:t.ext.power>e.ext.power?-1:t.ext.category<e.ext.category?-1:t.ext.category>e.ext.category?1:0},m.sortOnCate=function(t,e){return t.ext.category<e.ext.category?-1:t.ext.category>e.ext.category?1:0},m.powerData1=null,m.powerData2=null,m}(),vV=function(t){function e(){this._equipPos=0,this._data=null,this._equipVO=null,this._refineSoulEff=null,this._soulEffect=null,this._showRp=!1,e.__super.call(this)}w(e,"modules.otherRole.view.OtherRoleEquipItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.mouseEnabled=!0,this._refineSoulEff=b.getOne(),this._refineSoulEff.visible=!1,this._refineSoulEff.pos(52,100),this.addChild(this._refineSoulEff),this.addChild(this.imgRp),this.addChild(this.boxSoul)},i.checkRefineSoulShow=function(t){if(0<t){var e=$o.getSoulStepSource(t);this._refineSoulEff.loadAndPlay("moduleEffect/refineSoulEquipItem"+e,"default",0,!0),this._refineSoulEff.visible=!0}else this._refineSoulEff.visible=!1},i.updateSoulInfo=function(t){var e,i=null,s=null,n=bo.getCurFightSoulData();if(n&&0<n.length)for(var o in n)if(e=n[o],(s=mn.getFightSoulVO(e.id))&&s.pos==this.equipPos){i=e;break}if(i&&t){this._soulEffect||(this._soulEffect=b.getOne(),this.boxSoul.addChild(this._soulEffect),this._soulEffect.pos(22,21)),this._soulEffect.loadAndPlay("moduleEffect/smallSoulEffect/"+s.eff,"default",0,!0);var a=mn.getSoulQualityIndex(i.val);this.imgSoulBg.skin="modules/role/quality"+a+".png",this.boxSoul.visible=!0}else this.boxSoul.visible=!1},I(0,i,"data",function(){return this._data},function(t){if(this._data=t){if("p_actor_equip"==t.className){var e=t,i=bo.getCurRefineData(),s=Jo.getEquipInfo(e.pos,1,-1,i);0<s.curLv?this.txtRight.text="+"+s.curLv:this.txtRight.text="",0<(s=Jo.getEquipInfo(e.pos,3,-1,i)).curLv?this.txtLeft.text=""+s.curLv:this.txtLeft.text="";var n=Jo.getRefineSoulStep(-1,this.equipPos,i);this.checkRefineSoulShow(n),this._equipVO=ur.getItem(e.type_id),this.imgGoodsBg.skin="com/ui/goodsBg"+this._equipVO.color+".png",100<this._equipVO.level?this.txtInfo.text=(this._equipVO.level-100)/10+"转":this.txtInfo.text="LV."+this._equipVO.level,this.imgGoods.skin=this._equipVO.realMaxico,this.updateSoulInfo(!0)}else if(t instanceof xml.SpEquipVO){this.checkRefineSoulShow(-1);var o=t,a=bo.getSpEquipNowLv(o.id);this.txtInfo.text=0<a?o.name:"未激活",this.txtRight.text=0<a?"+"+a:"",this.imgGoodsBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin=0<a?"modules/role/sp"+o.id+".png":"modules/role/sp"+o.id+"grey.png",this.txtLeft.text="",this.updateSoulInfo(!1)}}else this.txtInfo.text=this.txtRight.text=this.txtLeft.text="",this.imgGoodsBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin="modules/role/"+(20+this._equipPos)+".png",this.soul=!1,this.updateSoulInfo(!1)}),I(0,i,"uiClass",function(){return"EquipItem"}),I(0,i,"equipPos",function(){return this._equipPos},function(t){this._equipPos=t}),I(0,i,"showRp",function(){return this._showRp}),I(0,i,"soul",null,function(t){this.imgSoul.visible=t}),e}(NI),IV=function(t){function e(){this.equipItems=null,this.legendItems=null,this.roleAttrView=null,this.myRole=null,this.clips=null,e.__super.call(this),this.initItems(),this.txtAttr.underline=!0,this.on("click",this,this.onDown)}w(e,"modules.otherRole.view.OtherRoleEquipView",VI);var i=e.prototype;return i.initItems=function(){var t,e;this.equipItems=this.equipItems||[];for(var i=0;i<na.equipPos.length;i++)(t=new vV).pos(na.equipPos[i].x+37,na.equipPos[i].y+218),t.equipPos=na.equipPos[i].pos,this.addChild(t),this.equipItems.push(t);this.legendItems=this.legendItems||[];for(var s=0;s<4;s++)(e=new wV).pos(195+96*s,274),this.addChild(e),this.legendItems.push(e);this.btnCompare.on("click",this,this.onClickCompare)},i.onClickCompare=function(){T.dispatch("OPEN_COMPARE_PANLE",bo.curRoleID)},i.onDown=function(t){var e=bo.getCurPalRoleData();if(t.target instanceof modules.otherRole.view.OtherRoleEquipItem){var i=t.target;11<=i.equipPos&&i.equipPos<=14||(i.data?Ae.show(i.data,"OTHER_EQUIP_TIP"):Jt.addTip("当前未穿上该位置装备"))}else if(t.target instanceof modules.otherRole.view.OtherRoleLegendItem){var s=t.target,n=this.legendItems.indexOf(s);e&&pe.isMyPal(e.pal_id)?me.linkTo(11402):me.linkTo(11412,n)}else t.target==this.txtAttr&&e&&(this.roleAttrView=this.roleAttrView||Aa.getIns(47e3,"RoleAttrView"),this.roleAttrView.other=!0,this.roleAttrView.update(e),this.roleAttrView.openWindow())},i.update=function(){var t=bo.getCurPalRoleData();if(t){this.myRole=this.myRole||new Vh;var e=t.ext.skin;this.myRole.resetSkin(e,t.ext.sex,!0),this.myRole.resetState(0),this.myRole.play("stand",4),this.spRole.addChild(this.myRole);var i=bo.getCurLegendData(),s=new Object;s.className="p_kv";var n,o=0;for(var a in this.clips=this.clips||[],q.LEGEND_EQUIP_TYPE){var l;for(var r in n=q.LEGEND_EQUIP_TYPE[a],s.id=n,s.val=0,i)if(n==(l=i[r]).id){s.val=l.val;break}this.legendItems[n-11].setData(s,t.ext.category),0<s.val&&(this.clips[o]=this.clips[o]||b.getOne(),this.clips[o].loadAndPlay("moduleEffect/redShow","default",0,!0),this.clips[o].pos(230+96*(n-11),313),this.addChild(this.clips[o]),++o)}for(;o<this.clips.length;)this.clips[o].stop(),this.removeChild(this.clips[o]),++o;var h,u,c=!1;for(var d in this.equipItems){var p,m;for(var f in u=this.equipItems[d],c=!1,t.equip)if(p=t.equip[f],u.equipPos==p.pos){u.data=p,u.soul=0<bo.getSpEquipNowLv(20+p.pos),c=!0;break}for(var _ in q.SPECIAL_EQUIP)if(m=q.SPECIAL_EQUIP[_],h=sn.getSpEquipVO(m),u.equipPos==m){u.data=h,c=!0;break}c||(u.data=null)}var g,y=bo.getCurPalRoleData().ext.power,v=k.numToTexture(y,"com/ui/powerNum");this.spPower.graphics.clear();for(var I=0;I<v.length;I++)g=v[I],this.spPower.graphics.drawTexture(g,g.width*I)}},I(0,i,"uiClass",function(){return"RankRoleEquipView"}),e}(),wV=function(t){function e(){e.__super.call(this)}return w(e,"modules.otherRole.view.OtherRoleLegendItem",BI),e.prototype.setData=function(t,e){11==t.id?this.img.skin="modules/role/image/"+t.id+e+".png":this.img.skin="modules/role/image/"+t.id+".png",this.img.gray=0==t.val,this.txtLv.text="Lv."+t.val},e}(),bV=(function(t){function e(){this.spWard=null,this.stronger=null,this.btnRet=null,this.imageLink1=null,this.imageLink2=null,this.imageLink3=null,this.imageLink4=null,this.newRoleBg=null,this.specialBox=null,this.difficulty=null,this.stageNum=null,e.__super.call(this)}w(e,"ui.modules.result.ResultFailPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/result/ResultFailPanel")}}(),function(t){function e(){this.btnLeft=null,this.btnRight=null,this.spWard=null,this.txtTitle=null,this.txtDesc=null,this._rankUpImg=null,this.txtBottom=null,this.goodsDesc=null,e.__super.call(this)}w(e,"ui.modules.result.ResultWinPanelUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/result/ResultWinPanel")}}(),function(t){function e(){this.headPart=null,this.curView=null,this.equipView=null,this.skillView=null,this.wingView=null,this.splitView=null,e.__super.call(this),this.setWindowType(),this.headPart=new xh,this.headPart.on("RoleHeadsOtherPart.CHOOSE",this,this.onHeadItemClick),this.headPart.pos(106,82),this.container.addChild(this.headPart),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.tab.on("change",this,this.onClick)}w(e,"modules.otherRole.view.OtherRolePanel",MI);var i=e.prototype;return i.onHeadItemClick=function(t){0<=t&&this.choosePartner(t)},i.choosePartner=function(t){bo.curActorIndex=t,this.update()},i.update=function(){this.txtName.text=bo.getCurRankRoleName(),this.curView&&this.curView.update()},i.updateHeadPart=function(){this.headPart.resetHead()},i.showViewByIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t},i.onClick=function(t){switch(this.tab.selectedIndex){case 0:this.chooseView(0);break;case 1:this.chooseView(1);break;case 2:this.chooseView(2);break;case 3:this.chooseView(3)}},i.chooseView=function(t){switch(this.spView.removeChildren(),t){case 0:this.equipView=this.equipView||new IV,this.curView=this.equipView,this.spView.addChild(this.equipView);break;case 1:this.skillView=this.skillView||new SV,this.curView=this.skillView,this.spView.addChild(this.skillView);break;case 2:this.wingView=this.wingView||new CV,this.curView=this.wingView,this.spView.addChild(this.wingView);break;case 3:this.splitView=this.splitView||new xV,this.curView=this.splitView,this.spView.addChild(this.splitView)}this.update()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.headPart.resetSelect(0)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"uiClass",function(){return"RankRolePanel"}),e}()),SV=function(t){function i(){this.palSkill=null,this.selectIndex=0,i.__super.call(this);for(var t=0;t<5;t++){var e=this["icon"+t];e.mouseEnabled=!0,e.on("click",this,this.onClickItem)}this.on("display",this,this.onAdd)}w(i,"modules.otherRole.view.OtherRoleSkillView",FI);var e=i.prototype;return e.update=function(){var t=bo.getCurPalRoleData();if(null!=t){var e=t.skills;if(null!=e){this.palSkill=this.filterSkill(e),this.palSkill.sort(this.sortSkillByID);for(var i=0;i<5;i++){var s=this.palSkill[i];if(this["icon"+i].skin="modules/skill/10"+t.ext.category+"0000"+(i+1)+".png",i<this.palSkill.length){this["icon"+i].gray=!1;var n=fa.getSkill(s.skill_id);this["skill"+i].text=n.name,this["lv"+i].text=s.skill_lv}else this["icon"+i].gray=!0,this["skill"+i].text=5*i+"级解锁",this["lv"+i].text=""}this.onSelectSkill(this.selectIndex)}}},e.filterSkill=function(t){for(var e=[],i=0;i<t.length;i++){var s=t[i];null!=fa.getSkill(s.skill_id)&&e.push(s)}return e},e.onClickItem=function(t){var e=t.target.name,i=Number(e.substr(4,1));i<this.palSkill.length&&this.onSelectSkill(i)},e.onSelectSkill=function(t){this.selectIndex=t;var e=this.palSkill[t];if(null!=e){this.selectedImg.x=this["icon"+t].x-10;var i=fa.getSkill(e.skill_id),s=Math.min(e.skill_lv+1,999);this.desc.text=i.desc.replace("{n}",i.change+(i.attr+i.attrStep*e.skill_lv)),this.curTxt.text="Lv."+e.skill_lv+"\n"+i.change+(i.attr+i.attrStep*e.skill_lv),this.nextTxt.text="Lv."+s+"\n"+i.change+(i.attr+i.attrStep*s)}},e.onAdd=function(t){this.selectIndex=0},e.sortSkillByID=function(t,e){return t.skill_id<e.skill_id?-1:t.skill_id>e.skill_id?1:0},I(0,e,"uiClass",function(){return"RankRoleSkillView"}),i}(),xV=function(t){function e(){this.splitEff=null,this._curVO=null,this.curXMLVO=null,this.curRoleIndex=-1,this.curTotalLevel=0,this.curShow=0,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(375,417),this.addChild(this.splitEff)}w(e,"modules.otherRole.view.OtherRoleSplitView",UI);var i=e.prototype;return i.update=function(){if(this._curVO=bo.getCurSData(),this._curVO){var t=6*(this._curVO.step-1)+this._curVO.level;if(bo.curActorIndex==this.curRoleIndex&&t!=this.curTotalLevel){for(var e=this.curTotalLevel+1;e<=t;)e%6<this.curXMLVO.stepNum&&ih.show("moduleEffect/lightSplit",47,95,this["img"+e%6]),++e;this.curTotalLevel=t}else this.curRoleIndex=bo.curActorIndex,this.curTotalLevel=t;this.curXMLVO=oa.getSplitXMLVO(),t=0<t?t:0;for(var i,s=W.parseAttrToArr(this.curXMLVO.attr),n=s.length,o="",a=0,l=0;l<n;l++)i=s[l],o+=W.getName(i[0])+" +"+t*parseInt(i[1])+"\n",a+=W.getAttrPowerS(i[0],i[1]);this.txtNow.text=o,this.txtLv.text=this._curVO.step+"阶",this.changeEffect(this._curVO.step);var r,h=k.numToTexture(Math.floor(a*t),"com/ui/powerNum");this.spPower.graphics.clear();for(var u=0;u<h.length;u++)r=h[u],this.spPower.graphics.drawTexture(r,r.width*u);for(var c=1;c<this.curXMLVO.levelNum+1;c++){var d="modules/role/split"+c+"_";d=this._curVO.level<c?d+"dark.png":d+"light.png",this["img"+c].skin=d}this.curXMLVO.stepNum,this._curVO.step;if(this.imgArrow.visible=!0,this.txtNext.visible=!0,this.txtNow.x=176,this.curXMLVO.stepNum>this._curVO.step){var p=this.curXMLVO.levelNum==this._curVO.level;for(t+=p?2:1,o="",n=s.length,l=0;l<n;l++)i=s[l],o+=W.getName(i[0])+" +"+t*parseInt(i[1])+"\n";this.txtNext.text=o}else if(this.curXMLVO.stepNum==this._curVO.step)if(p=this.curXMLVO.levelNum==this._curVO.level)t+=2,this.imgArrow.visible=!1,this.txtNext.visible=!1,this.txtNow.x=294;else{for(t+=1,o="",n=s.length,l=0;l<n;l++)i=s[l],o+=W.getName(i[0])+" +"+t*parseInt(i[1])+"\n";this.txtNext.text=o}else this.txtNext.text="已经满阶",this.imgMax.visible=!0}},i.changeEffect=function(t){var e=t%4+1;this.curShow!=e&&(this.curShow=e,this.splitEff.loadAndPlay("moduleEffect/split"+this.curShow,"default",0,!0))},I(0,i,"uiClass",function(){return"RankRoleSplitView"}),e}(),CV=function(t){function i(){var t;this.bar=null,this.starArr=null,this.toc=null,this.wData=null,this.curXMLVO=null,this.curStarXMLVO=null,i.__super.call(this),this.bar=new it(0,0,568,32,"modules/role/image/bar.png","modules/role/bg3.png",[5,5,5,5],[0,7,0,12],[5,0,10,0],"#ffffff",16),this.bar.setTextvisible(!1),this.spPro.addChild(this.bar),this.starArr=[];for(var e=0;e<10;e++)(t=new et).x=54*e,this.spStar.addChild(t),this.starArr.push(t)}w(i,"modules.otherRole.view.OtherRoleWingView",GI);var e=i.prototype;return e.onPowerUpdate=function(){var t,e=this.getTypePowerByIndex(),i=k.numToTexture(e,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)t=i[s],this.spPower.graphics.drawTexture(t,t.width*s)},e.getTypePowerByIndex=function(){var t=bo.getCurPalRoleData();if(null!=t)for(var e=0;e<t.ext.power_infos.length;e++){var i=t.ext.power_infos[e];if(1701==i.id)return i.val}return 0},e.update=function(){if(this.toc=bo.getRankRoleData(bo.curRoleID),this.wData=bo.getCurWData(),!(this.toc&&16<=this.toc.level&&this.wData&&0<this.wData.level))return this.spActive.visible=!1,this.txtWing.text="1阶羽翼",this.imgWing.skin=oa.getWingXMLVO(1).path,this.imgWing.x=oa.getWingXMLVO(1).x+8,void(this.imgWing.y=oa.getWingXMLVO(1).y);if(this.spActive.visible=!0,this.wData){this.curXMLVO=oa.getWingXMLVO(this.wData.level),this.curStarXMLVO=this.curXMLVO.WingStarDic[this.wData.star],this.txtWing.text=this.curXMLVO.name,this.imgWing.skin=this.curXMLVO.path,this.imgWing.x=oa.getWingXMLVO(this.wData.level).x+8,this.imgWing.y=oa.getWingXMLVO(this.wData.level).y;for(var t,e,i=W.parseAttrToArr(this.curStarXMLVO.attr),s=i.length,n="",o=0;o<s;o++)t=i[o],n+=W.getName(t[0])+"："+t[1]+"\n";if(this.txtNowLev.text=n,this.onPowerUpdate(),this.curXMLVO.WingStarDic.hasOwnProperty(this.wData.star+1))e=this.curXMLVO.WingStarDic[this.wData.star+1];else{var a=oa.getWingXMLVO(this.wData.level+1);a&&(e=a.WingStarDic[0])}s=this.starArr.length;for(var l=0;l<s;l++)l<this.curXMLVO.starNum?this.starArr[l].skin=l<this.wData.star?"com/ui/star_4.png":"com/ui/star_5.png":this.starArr[l].removeSelf();if(e){for(this.imgMax.visible=!1,n="",s=(i=W.parseAttrToArr(e.attr)).length,o=0;o<s;o++)t=i[o],n+=W.getName(t[0])+"："+t[1]+"\n";this.txtNextLev.text=n,this.wData.star==this.curXMLVO.starNum?(this.bar.setValue(1,1),this.txtBar.text=""):(this.bar.setValue(this.wData.exp,this.curStarXMLVO.exp),this.txtBar.text=this.wData.exp+"/"+this.curStarXMLVO.exp)}else this.bar.setValue(1,1),this.txtBar.text="",this.txtNextLev.text="",this.imgMax.visible=!0}},I(0,e,"uiClass",function(){return"RankRoleWingView"}),i}(),PV=function(t){function s(){this._selItem=null,this._selSubItem=null,this.leftItems=null,this.leftSubItems=null,this.rightItems=null,this.rightItem=null,s.__super.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.pan.vScrollBarSkin="",this.panDes.vScrollBarSkin="",this.panDes.vScrollBar.autoHide=!0,this.leftItems=[];for(var t,e=xo.getCompKinds(),i=0;i<e.length;i++)(t=new TV).x=0,t.y=92*i,t.data=e[i],this.pan.addChild(t),this.leftItems.push(t);this.rightItem=new fh,this.rightItem.mouseEnabled=!0,this.rightItem.pos(174,147),this.imgRight.addChild(this.rightItem),this.txtDesc.style.color="#5d3924",this.txtDesc.style.fontSize=24,this.txtDesc.style.lineHeight=30}w(s,"modules.pack.composeView.ComposeView",HI);var e=s.prototype;return e.onClick=function(t){switch(t.target){case this.btnComp:if(this.selSubItem){if(this.selSubItem.data.checkCan()){var e=ur.getItem(this.selSubItem.data.typeID);Lo.showSecAlert("是否确认单个炼制"+Z.font("【"+e.name+"】",U.getColorDark(e.color),26),this,this.toCompose,null,"compose")}}else Jt.addTip("没有选中的炼制品");break;case this.btnAll:if(this.selSubItem){if(0<this.selSubItem.data.getCanTimes()){e=ur.getItem(this.selSubItem.data.typeID);Lo.showSecAlert("是否确认全部炼制"+Z.font("【"+e.name+"】",U.getColorDark(e.color),26),this,this.toComposeAll,[this.selSubItem.data.getCanTimes()],"packComposeAll")}}else Jt.addTip("没有选中的炼制品");break;case this.rightItem:if(this.rightItem.data){var i="";i=ur.isEquip(this.rightItem.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(this.rightItem.data,i)}break;default:if(t.target instanceof modules.pack.composeView.CompTreeItem){var s=t.target;s.open?this.selItem=null:this.selItem=s,this.pan.refresh();var n=s.y;if((this.pan.numChildren-this.pan.getChildIndex(s))*s.height<=this.pan.height){n=this.pan.numChildren*s.height+105*s.numChildren-this.pan.height}ie.to(this.pan.vScrollBar,{value:n},500)}else t.target instanceof modules.pack.composeView.CompTreeSubItem&&(this.selSubItem=t.target)}},e.toCompose=function(){if(this.selSubItem){var t=this.selSubItem.data;Tr.ins().toEquipCompose(t.exchangeID)}},e.toComposeAll=function(t){if(this.selSubItem){var e=this.selSubItem.data;Tr.ins().toEquipCompose(e.exchangeID,t)}},e.update=function(){},e.updateItem=function(){if(this.selItem){for(var t,e=this.leftItems.indexOf(this.selItem),i=this.selItem.data.CompKindCompSubArr.length,s=0;s<this.leftItems.length;s++)this.leftItems[s].y=s<=e?92*s:92*(s-e)+this.selItem.y+115*i;this.leftSubItems=this.leftSubItems||[];for(var n=Math.max(this.selItem.data.CompKindCompSubArr.length,this.leftSubItems.length),o=0;o<n;o++)o<i?(null==this.leftSubItems[o]&&(this.leftSubItems[o]=new kV),this.leftSubItems[o].pos(5,this.selItem.y+115*o+95),(t=this.leftSubItems[o]).data=this.selItem.data.CompKindCompSubArr[o],this.pan.addChild(t)):this.leftSubItems[o]&&this.leftSubItems[o].parent&&this.leftSubItems[o].removeSelf();this.updateTreeSubRP()}else{for(s=0;s<this.leftItems.length;s++)this.leftItems[s].y=92*s;var a;if(this.leftSubItems)for(var l in this.leftSubItems)(a=this.leftSubItems[l])&&a.parent&&a.removeSelf()}},e.onDisplay=function(){this.pan.scrollTo(0,0),this.selItem=null,T.register("BAGDATA_CHANGE",this,this.onBagChange),this.onBagChange(),this.pan.refresh(),this.on("undisplay",this,this.onUNDisplay)},e.onBagChange=function(){this.updateRedPoint(),this.updateNumAndState()},e.updateRedPoint=function(){this.updateTreeRP(),this.updateTreeSubRP()},e.updateTreeRP=function(){var t;for(var e in this.leftItems){for(var i in(t=this.leftItems[e]).showRP(!1),t.data.CompKindCompSubArr)if(t.data.CompKindCompSubArr[i].checkRP()){t.showRP(!0);break}}},e.updateTreeSubRP=function(){var t;for(var e in this.leftSubItems)(t=this.leftSubItems[e]).showRP(t.data.checkRP())},e.onUNDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.onBagChange),this.off("undisplay",this,this.onUNDisplay)},e.updateNumAndState=function(){if(this.selSubItem){var t=this.selSubItem.data,e=xo.getGoodsNumByTypeID(t.typeID);this.txtHas.text=e+"",this.imgRp.visible=this.selSubItem.data.checkRP()}if(this.rightItems&&0<this.rightItems.length)for(var i in this.rightItems)this.rightItems[i].updateNum()},I(0,e,"selItem",function(){return this._selItem},function(t){if(this.imgRp.visible=!1,this._selItem!=t){var e;for(var i in this._selItem=t,this.leftItems)(e=this.leftItems[i]).open=this._selItem==e;this.updateItem(),this._selItem&&(this.selSubItem=this.leftSubItems[0])}}),I(0,e,"selSubItem",function(){return this._selSubItem},function(t){this._selSubItem=t;var e=this._selSubItem.data,i=ur.getItem(e.typeID);this.rightItem.data=i,this.txtName.color=U.getColorDark(i.color),this.txtName.text=i.name,i instanceof xml.GoodsVO?this.txtDesc.innerHTML=i.desc:i instanceof xml.EquipVO&&(this.txtDesc.innerHTML=i.name),this.txtDesc.height=this.txtDesc.contextHeight,this.panDes.refresh();var s,n=e.getNeedArr();this.rightItems=this.rightItems||[];for(var o,a=Math.max(n.length,this.rightItems.length),l=n.length,r=227-60*l,h=0;h<a;h++)h<l?(null==this.rightItems[h]&&(this.rightItems[h]=new Ch),(s=this.rightItems[h]).pos(r+120*h,480),s.setData(n[h].id,n[h].val),this.imgRight.addChild(s)):this.rightItems[h]&&this.rightItems[h].parent&&this.rightItems[h].removeSelf();if(this.txtCop.text=W.getShortenPowerStr(e.cop),this.leftSubItems)for(var u in this.leftSubItems)(o=this.leftSubItems[u]).sel=this._selSubItem==o;this.updateNumAndState()}),s}(),TV=function(t){function e(){this._data=null,this._open=!1,e.__super.call(this)}w(e,"modules.pack.composeView.CompTreeItem",WI);var i=e.prototype;return i.showRP=function(t){this.imgRp.visible=t},I(0,i,"data",function(){return this._data},function(t){this._data!=t&&(this._data=t,this.txt.text=t.name)}),I(0,i,"open",function(){return this._open},function(t){this._open!=t&&(this._open=t,this.btn.selected=this._open)}),e}(),kV=function(t){function e(){this.goods=null,this._data=null,this._sel=!1,e.__super.call(this),this.goods=new fh(null),this.goods.pos(13,7),this.addChild(this.goods),this.addChild(this.imgRp)}w(e,"modules.pack.composeView.CompTreeSubItem",qI);var i=e.prototype;return i.showRP=function(t){this.imgRp.visible=t},I(0,i,"data",function(){return this._data},function(t){if(this._data!=t){this._data=t;var e=ur.getItem(this._data.typeID);this.goods.data=e,this.txt.text=e.name}}),I(0,i,"sel",null,function(t){this._sel!=t&&(this._sel=t,this.imgSel.visible=this._sel,this.txt.color=this._sel?"#fcf476":"#5d3924")}),e}(),AV=function(t){function e(){this.arr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.pack.meltView.BathMeltView",YI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnRe:case this.btnClose:this.closeWindow();break;case this.btnMelt:0<this.arr.length?cr.ins().toMeltingEquip(xo.PACKTYPE_EQUIP,this.arr):Jt.addTip("找不到可以分解的装备")}},i.update=function(){this.arr=this.arr||[];var t=xo.getbathMeltEquip(this.arr);this.txtGet1.text="白色装备×"+t[0],this.txtGet2.text="绿色装备×"+t[1],this.txtGet3.text="蓝色装备×"+t[2],this.txtGet4.text="紫色装备×"+t[3],this.txtGet.text="获得：强化石×"+t[4]+"，铜钱×"+t[5]},e}(),EV=function(t){function e(){this._goods=null,e.__super.call(this)}w(e,"modules.pack.meltView.MeltingItem",XI);var i=e.prototype;return i.showEff=function(){this.goods=null},I(0,i,"goods",function(){return this._goods},function(t){if(this._goods=t,this._goods){var e=ur.getItem(t.typeid);this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.imgGoods.skin=e.realMaxico,this.txtName.text=e.title,3==ur.getItemType(t.typeid)&&(0<e.category?this.imgCa.skin="com/ui/voca"+e.category+".png":this.imgCa.skin=null)}else this.imgBg.skin="com/ui/itemAddBg.png",this.imgGoods.skin=null,this.txtName.text="",this.imgCa.skin=null}),e}(),RV=(function(t){function e(){this.title=null,this.btnClose=null,this.btnYes=null,this.imgInfo=null,this.txtMsg=null,e.__super.call(this)}w(e,"ui.modules.system.OfflinePanelUI",C),e.prototype.createChildren=function(){oe.regComponent("HTMLDivElement",K),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/system/OfflinePanel")}}(),function(t){function e(){this.roleMelt=null,this.wingMelt=null,e.__super.call(this),this.init()}w(e,"modules.pack.meltView.MeltingView",KI);var i=e.prototype;return i.init=function(){this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.roleMelt=new OV,this.wingMelt=new DV,this.on("click",this,this.onMouseDown),this.tab.on("change",this,this.onClick),this.wingMelt.removeSelf(),this.roleMelt.y=this.wingMelt.y=59,this.addChild(this.roleMelt),Nt.register("EQUIP_MELTING",this.tab.items[0],new Tt(19,-10)),Nt.register("WING_MELTING",this.tab.items[1],new Tt(19,-10))},i.onClick=function(t){switch(this.tab.selectedIndex){case 0:this.wingMelt.removeSelf(),this.addChild(this.roleMelt);break;case 1:this.roleMelt.removeSelf(),this.addChild(this.wingMelt)}this.update()},i.update=function(){this.roleMelt.parent&&this.roleMelt.updateItem(),this.wingMelt.parent&&this.wingMelt.update()},i.addMeltEquip=function(t){this.wingMelt.parent&&this.wingMelt.addMeltEquip(t),this.roleMelt.parent&&this.roleMelt.addMeltEquip(t)},i.onMouseDown=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),this.wingMelt.parent&&this.wingMelt.clearItem(),this.roleMelt.parent&&this.roleMelt.clearItem()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.tab.selectedIndex=0},i.showEff=function(){this.wingMelt.parent&&(this.wingMelt.showEff(),this.wingMelt.update()),this.roleMelt.parent&&this.roleMelt.showEff()},e}()),OV=function(t){function e(){this.spEff=null,this.selView=null,this.itemArr=null,this.itemPos=[[103,99],[291,99],[478,99],[103,269],[291,269],[478,269],[103,439],[291,439],[478,439]],this.time=0,e.__super.call(this),this.curFArr}w(e,"modules.pack.meltView.RoleEquipMeltView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.initItem(),this.on("click",this,this.onMouseDown),this.spEff=new Wt,this.addChild(this.spEff),this.on("display",this,this.onDisplay)},i.onDisplay=function(){this.onLevelUp(),T.register("ROLE_LEVEL_UP",this,this.onLevelUp),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("ROLE_LEVEL_UP",this,this.onLevelUp),this.off("undisplay",this,this.onUNDisplay)},i.onLevelUp=function(){this.txtTip.visible=pe.myLevel<100},i.onMouseDown=function(t){var e;switch(t.target){case this.btnMelt:var i,s=[];for(var n in this.curFArr)(i=this.curFArr[n])&&s.push(i.id);0<s.length?cr.ins().toMeltingEquip(xo.PACKTYPE_EQUIP,s):Jt.addTip("请先添加熔炼装备"),pt.send(3,3,"熔炉-普通装备-熔炼按钮");break;case this.btnOne:pe.myLevel<100?Jt.addTip("批量熔炼功能100级开启"):T.dispatch("OPEN_BATHMELTVIEW");break;default:if(t.target instanceof modules.pack.meltView.MeltingItem)if(pt.send(3,2,"熔炉-普通装备-添加按钮"),(e=t.target).goods){for(var o=this.curFArr.length-1;0<=o;o--)if(this.curFArr[o].id==e.goods.id)return this.curFArr.splice(o,1),void(e.goods=null)}else this.selView=this.selView||new uD,this.selView.setType(0,9),this.selView.setLeft(this.curFArr),this.selView.openWindow()}},i.initItem=function(){this.itemArr=this.itemArr||[];for(var t,e=this.itemPos.length,i=0;i<e;i++)(t=new EV).goods=null,t.x=this.itemPos[i][0],t.y=this.itemPos[i][1],t.mouseEnabled=!0,this.itemArr.push(t),this.addChild(t)},i.showEff=function(){var t,e=!1;for(var i in 1e3<S.now()-this.time&&(this.time=S.now(),e=!0),this.itemArr)(t=this.itemArr[i]).goods&&(e&&ih.confineShow("moduleEffect/boxEffect",null,t.x+52,t.y+104,this),t.showEff());this.updateItem()},i.updateItem=function(){var t=0;if(this.curFArr=xo.getFilterEquip(),this.curFArr&&0<this.curFArr.length){9<this.curFArr.length&&(this.curFArr=this.curFArr.slice(0,9)),t=this.curFArr.length;for(var e=0;e<t;e++)this.itemArr[e].goods=this.curFArr[e]}},i.clearItem=function(){var t;for(var e in this.itemArr)(t=this.itemArr[e]).goods&&(t.goods=null);this.curFArr=null},i.addMeltEquip=function(t){var e;for(var i in t){e=t[i];for(var s,n=xo.getGoodsFromBag(xo.EQUIP_ID,e),o=0;o<this.itemArr.length;o++)if(!(s=this.itemArr[o]).goods){s.goods=n;break}this.curFArr=this.curFArr||[],this.curFArr.push(n)}},e}(jI),LV=(function(t){function e(){this.spBox=null,this.btnLeft=null,this.btnRight=null,this.txtName=null,this.txtBase=null,this.txtBase1=null,this.spPow=null,e.__super.call(this)}w(e,"ui.modules.Title.TitleGetViewUI",C),e.prototype.createChildren=function(){oe.regComponent("Text",jt),laya.ui.Component.prototype.createChildren.call(this),this.loadUI("modules/Title/TitleGetView")}}(),function(t){function e(){this._sel=!1,this._goods=null,this._equipVO=null,e.__super.call(this),this.mouseEnabled=!0}w(e,"modules.pack.meltView.SelectMeltItem",QI);var i=e.prototype;return i.updateView=function(){this._equipVO?(this.imgBg.skin="com/ui/goodsBg"+this._equipVO.color+".png",this.imgGoods.skin=this._equipVO.realMaxico,this.txtName.text=this._equipVO.title,3==ur.getItemType(this._equipVO.id)&&(this.imgCa.skin="com/ui/voca"+this._equipVO.category+".png"),this.txtPow.text="评分"+Math.floor(this.getPower())):(this.imgCa.skin=null,this.txtName.text="",this.txtPow.text="")},i.getPower=function(){var t=this._equipVO.basePow,e=this._goods.equip_info.extra_attrs;return e&&(t+=W.getAddExtraPower(e)),t},I(0,i,"uiClass",function(){return"SelectMeltingItem"}),I(0,i,"sel",function(){return this._sel},function(t){this._sel=t,this._sel?this.chk.selected=!0:this.chk.selected=!1}),I(0,i,"goods",function(){return this._goods},function(t){this._goods=t,this._equipVO=t?ur.getItem(t.typeid):null,this.updateView()}),e}()),DV=function(t){function e(){this.bar=null,this.selView=null,this.curFArr=null,this.initToc=!1,this.itemArr=null,this.time=0,e.__super.call(this)}w(e,"modules.pack.meltView.WingEquipMeltView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.bar=new p(158,311,380,0,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1],"#ffffff",16),this.addChild(this.bar),this.initItem(),this.on("click",this,this.onMouseDown),Nt.register("WING_MELTING",this.btnAdd,new Tt(19,-10))},i.update=function(){if(xo.smeltToc){var t=xo.getMeltVO(),e=xo.smeltToc.level,i=t.baseNum1+t.baseNum2*e;this.txtLv.text="（Lv."+e+"）",this.bar.setValue(xo.smeltToc.exp,i);for(var s="",n="",o=W.parseAttrToArr(t.attr),a=o.length,l=0,r=0;r<a;r++){var h=o[r];s+=W.getAttrStrByNum(parseInt(h[0]),parseInt(h[1])*e,"","+","\n"),n+=W.getAttrStrByNum(parseInt(h[0]),parseInt(h[1])*(e+1),"","+","\n"),l+=W.getAttrPowerS(h[0],h[1])}this.txtNow.text=s,this.txtNext.text=n;var u,c=k.numToTexture(Math.floor(l*e),"com/ui/powerNum");this.spPower.graphics.clear();for(var d=0;d<c.length;d++)u=c[d],this.spPower.graphics.drawTexture(u,u.width*d)}else cr.ins().toSmeltInfo()},i.onMouseDown=function(t){var e;switch(t.target){case this.btnMelt:var i,s=[];for(var n in this.curFArr)(i=this.curFArr[n])&&s.push(i.id);0<s.length?cr.ins().toSmelt(s):Jt.addTip("请先添加熔炼装备");break;case this.btnAdd:this.clearItem(),this.updateItem(!0);break;default:if(t.target instanceof modules.pack.meltView.MeltingItem){if((e=t.target).goods){for(var o=this.curFArr.length-1;0<=o;o--)if(this.curFArr[o].id==e.goods.id)return this.curFArr.splice(o,1),void(e.goods=null)}else this.selView=this.selView||new uD,this.selView.setType(1,10),this.selView.setLeft(this.curFArr),this.selView.openWindow();pt.send(3,4,"熔炉-特殊装备-添加按钮")}}},i.updateItem=function(t){if(void 0===t&&(t=!1),oa.getWingTOCVO(0)){var e=0;if(this.curFArr=xo.getWingMeltEquip(),this.curFArr&&0<this.curFArr.length){10<this.curFArr.length&&(this.curFArr=this.curFArr.slice(0,10)),e=this.curFArr.length;for(var i=0;i<e;i++)this.itemArr[i].goods=this.curFArr[i]}else t&&Jt.addTip("暂无可熔炼的羽翼装备")}else Jt.addTip("激活羽翼后才可使用一键添加")},i.initItem=function(){this.itemArr=this.itemArr||[];for(var t,e=0;e<10;e++){(t=new EV).goods=null;var i=e%5,s=Math.floor(e/5);t.x=48+120*i,t.y=400+145*s,t.mouseEnabled=!0,this.itemArr.push(t),this.addChild(t)}},i.showEff=function(){var t,e=!1;for(var i in 1e3<S.now()-this.time&&(this.time=S.now(),e=!0),this.itemArr)(t=this.itemArr[i]).goods&&(e&&ih.confineShow("moduleEffect/boxEffect",null,t.x+52,t.y+104,this),t.showEff());this.updateItem()},i.clearItem=function(){var t;for(var e in this.itemArr)(t=this.itemArr[e]).goods&&(t.goods=null);this.curFArr=null},i.addMeltEquip=function(t){var e;for(var i in t){e=t[i];for(var s,n=xo.getGoodsFromBag(xo.EQUIP_ID,e),o=0;o<this.itemArr.length;o++)if(!(s=this.itemArr[o]).goods){s.goods=n;break}this.curFArr=this.curFArr||[],this.curFArr.push(n)}},e}(zI),NV=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=Ah,this.list.vScrollBarSkin="",this.list.renderHandler=Q.create(this,this.onItemRender),this.hadList.vScrollBarSkin="",this.hadList.vScrollBar.autoHide=!0,this.list.selectEnable=!0,this.on("click",this,this.onClick),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.pack.packView.BatchResultView",$I);var i=e.prototype;return i.onUnDisplay=function(){this.destroy(!0)},i.onItemRender=function(t,e){t.showNum=!0},i.updateView=function(t){for(var e=0,i=0,s=0,n=[],o=[],a=0;a<t.length;a++){var l=new Object;if(l.className="p_tkv",!((l=t[a]).val<=0))switch(l.type){case 1:e+=l.val;break;case 2:i+=l.val;break;case 3:s+=l.val;break;case 4:var r=u(o,l.id);if(-1==r){var h={id:l.id,val:l.val,type:l.type,name:Ft.getScoreName(l.id)};o.push(h)}else o[r].val+=l.val;break;case 5:n.push(l)}}function u(t,e){for(var i=0;i<t.length;i++)if(t[i].id==e)return i;return-1}var c=!1,d=75,p=0;0<i&&(d=c?330:105,p=c?p:p+35,this.addLabel({name:"铜钱",val:i},d,p),c=!c),0<e&&(d=c?330:105,p=c?p:p+35,this.addLabel({name:"元宝",val:e},d,p),c=!c),0<s&&(d=c?330:105,p=c?p:p+35,this.addLabel({name:"经验",val:s},d,p),c=!c);for(var m=0;m<o.length;m++)d=c?330:105,p=c?p:p+35,this.addLabel(o[m],d,p),c=!c;0!=i||0!=e||0!=s||o.length||(this.listBg.pos(this.hadList.x,this.hadList.y+10),this.listBg.height=this.listBg.height+this.hadList.height-20,this.list.pos(this.hadList.x+10,this.hadList.y+30),this.list.repeatY=4,this.list.height=this.listBg.height-40,this.removeChild(this.hadList)),n.length?this.list.array=n:this.noneLabel.visible=!0},i.addLabel=function(t,e,i){var s=new at;s.pos(e,i),s.fontSize=24,s.color="#fcf476",s.text=t.name+"："+t.val,this.hadList.addChild(s)},i.onClick=function(t){switch(t.target){case this.btnClose1:case this.toClose:this.closeWindow()}},e}(),VV=function(t){function e(){this.goodsTile=null,this._goodsList=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.goodsTile=new ox(5,650),this.goodsTile.pos(15,95),this.addChild(this.goodsTile),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.pack.packView.BatchUseView",ZI);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.toUse:if(this._goodsList.length<=0)return void Jt.addTip("没有可批量使用的道具");this.toUseGoods();break;case this.btnClose2:case this.btnClose1:this.closeWindow()}},i.onDisplay=function(){this.updateGoods(),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay)},i.toUseGoods=function(){for(var t=[],e=0;e<this._goodsList.length;e++){var i=new Object;i.className="p_kv",i.id=this._goodsList[e].id,i.val=this._goodsList[e].current_num,t.push(i)}cr.ins().toBatchUse(t)},i.updateGoods=function(){var t;if((t=xo.getGoodsData())&&t.goods){var e=t.goods.filter(this.canUsedGoods);e.length?this.noLabel.visible=!1:this.noLabel.visible=!0,this.goodsTile.updateGoods(e),this._goodsList=e}},i.canUsedGoods=function(t){var e=ur.getItem(t.typeid);return e&&1==Math.floor(e.useType/1e3)&&xo.showRPByItemID(t.typeid)},e}(),BV=function(t){function e(){this.goodsTile=null,this._goodsList=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.goodsTile=new xM(5,650),this.goodsTile.pos(15,95),this.addChild(this.goodsTile),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.pack.packView.LingBaoBatchUseView",JI);var i=e.prototype;return i.updateGoods=function(){var t,e=xo.getBagEmpty(xo.SPIRITRE_ID);if((t=xo.getGoodsData())&&t.goods){var i=t.goods.filter(this.filterLBs),s=this.filterByLen(i,e);s.length?this.noLabel.visible=!1:this.noLabel.visible=!0,this.goodsTile.updateGoods(s),this._goodsList=s}},i.onClick=function(t){switch(t.target){case this.btnCheck:me.linkTo(10816);break;case this.btnUse:case this.btnClose:this.closeWindow()}},i.toUseGoods=function(){if(this._goodsList.length){for(var t=[],e=0;e<this._goodsList.length;e++){var i=new Object;i.className="p_kv",i.id=this._goodsList[e].id,i.val=this._goodsList[e].current_num,t.push(i)}cr.ins().toBatchUse(t)}},i.onDisplay=function(){this.updateGoods(),this.toUseGoods(),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay)},i.filterLBs=function(t){var e=ur.getItem(t.typeid);return e&&e.useType%1e3==34},i.filterByLen=function(t,e){for(var i=[],s=0;s<t.length;s++){if(e<1)return i;i[s]=new Object,i[s].id=t[s].id,i[s].typeid=t[s].typeid,t[s].current_num<e?(i[s].current_num=t[s].current_num,e-=t[s].current_num):(i[s].current_num=e,e=0)}return i},e}(),MV=function(t){function e(){this.endTime=0,this._bagID=0,this._price=0,this.alert=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.init()}w(e,"modules.pack.packView.OpenPackTileView",tw);var i=e.prototype;return i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.txtInput.text="5",this.txtPrice.text=""+xo.getPackOpenVO(xo.getBagExtends(this._bagID)+1).need},i.changeConfig=function(t){this._bagID=t},i.init=function(){this.on("click",this,this.onMouseDown)},i.toUpEx=function(t,e){cr.ins().toUpExPack(t,e),this.closeWindow()},i.onMouseDown=function(t){var e=0,i=xo.getBagExtends(this._bagID);switch(t.target){case this.yBtn:this._price=parseInt(this.txtPrice.text),e=parseInt(this.txtInput.text),this._price<=pe.user.attr.gold?Lo.showSecAlert(Z.span("是否花费","#5d3924")+Z.span(this._price+"元宝","#F7EF5F")+Z.span("开启额外"+e+"个背包格子？","#5d3924"),this,this.toUpEx,[this._bagID,e/5],"exPack"):(Lo.showAlert(),this.closeWindow()),pt.send(1,6,"格子开启-确定按钮");break;case this.cloBtn:case this.nBtn:this.closeWindow();break;case this.downBtn:this._price=0,e=parseInt(this.txtInput.text),(e-=5)<5&&(Jt.addTip("每次最少开启五个格子"),e=5),this.txtInput.text=""+e,this.endTime=i+e/5;for(var s=i+1;s<=this.endTime;s++)this._price+=xo.getPackOpenVO(s).need;this.txtPrice.text=""+this._price;break;case this.upBtn:for(this._price=0,e=parseInt(this.txtInput.text),e+=5,null==xo.getPackOpenVO(i+e/5)&&(Jt.addTip("已达到开启数量上限"),e-=5),this.endTime=i+e/5,this.txtInput.text=""+e,s=i+1;s<=this.endTime;s++)this._price+=xo.getPackOpenVO(s).need;this.txtPrice.text=""+this._price,pt.send(1,5,"格子开启-增加按钮")}},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.pack.OpenPackTileViewUI._$SET_ins),e._ins=null,e}(),FV=function(t){function e(){this.equipTile=null,this.goodsTile=null,this.composeView=null,e.__super.call(this),this.init()}w(e,"modules.pack.packView.PackView",ew);var i=e.prototype;return i.init=function(){this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.composeView=new PV,this.composeView.pos(0,80),this.equipTile=new ox(5,650),this.equipTile.pos(45,167),this.box.addChild(this.equipTile),this.goodsTile=new ox(5,750),this.goodsTile.pos(45,167),this.tab.labels=G.isReviewVersion?"装备,道具":"装备,道具,炼制",this.tab.on("change",this,this.onClick),this.tab.selectedIndex=0,this.on("click",this,this.onMouseDown),Nt.register("EQUIP_MELTING",this.tab.items[0],new Tt(19,-10)),Nt.register("WING_MELTING",this.tab.items[0],new Tt(19,-10)),Nt.register("EQUIP_MELTING",this.btnMel,new Tt(19,-10)),Nt.register("WING_MELTING",this.btnMel,new Tt(19,-10)),Nt.register("GOODS_CAN_USE",this.tab.items[1],new Tt(19,-10)),Nt.register("GOODS_CAN_COMPOSE",this.tab.items[2],new Tt(19,-10)),this.on("display",this,this.onDisplay),Bt.isZKPf9991Server()&&(this.title.skin="modules/bag/bag2.png")},i.onDisplay=function(){T.register("UPDATE_BAGRP",this,this.updateGoodsRP),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("UPDATE_BAGRP",this,this.updateGoodsRP),this.off("undisplay",this,this.onUNDisplay)},i.updateGoodsRP=function(){this.goodsTile.parent&&this.updateGoods()},i.onClick=function(){switch(this.spSet.visible=!0,this.tab.selectedIndex){case 0:this.goodsTile.parent&&this.goodsTile.removeSelf(),this.composeView.parent&&this.composeView.removeSelf(),this.box.addChild(this.equipTile),this.subSp.visible=!0,this.batchBtn.visible=!1,this.updateGoods(),pt.send(1,2,"背包-装备页签按钮");break;case 1:this.equipTile.parent&&this.equipTile.removeSelf(),this.composeView.parent&&this.composeView.removeSelf(),this.box.addChild(this.goodsTile),this.subSp.visible=!1,this.batchBtn.visible=!0,this.updateGoods();break;case 2:this.spSet.visible=!1,this.equipTile.parent&&this.equipTile.removeSelf(),this.goodsTile.parent&&this.goodsTile.removeSelf(),this.box.addChild(this.composeView),this.subSp.visible=!1,this.batchBtn.visible=!1,pt.send(1,7,"背包-炼制页签按钮")}},i.onMouseDown=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnMel:T.dispatch("OPEN_MELTVIEW");break;case this.btnEx:xo.getPackOpenVO(xo.getBagExtends(11)+1)?(MV.ins.changeConfig(11),MV.ins.openWindow()):Jt.addTip("已达到开启数量上限"),pt.send(1,4,"背包-装备格子增加按钮（入口）");break;case this.spSet:cr.ins().openRPSetPanel();break;case this.batchBtn:cr.ins().openBatchUseView()}},i.updateGoods=function(){var t;0==this.tab.selectedIndex?(t=xo.getEquipData())&&t.goods&&(this.equipTile.updateGoods(t.goods),this.txtZone.text=t.goods.length+"/"+t.rows*t.columns):1==this.tab.selectedIndex&&(t=xo.getGoodsData())&&t.goods&&(t.goods.sort(this.goodsSort),this.goodsTile.updateGoods(t.goods),null==po.myFlowerLanguages&&ir.ins().toLanguageInfo(pe.roleID))},i.goodsSort=function(t,e){var i=xo.showRPByItemID(t.typeid);return i==xo.showRPByItemID(e.typeid)?t.typeid==e.typeid?t.id<e.id?-1:1:t.typeid<e.typeid?-1:1:i?-1:1},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.updateGoods()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},e}(),UV=function(t){function e(){this._data=null,this.itemVO=null,e.__super.call(this)}w(e,"modules.pack.packView.WishSelectBoxItem",t);var i=e.prototype;return i.update=function(){this._data&&(this.itemVO=ur.getItem(this._data.goodId),this.itemVO&&(this.imgBg.skin="com/ui/goodsBg"+this.itemVO.color+".png",this.imgIcon.skin=this.itemVO.realMaxico,0<this._data.num?this.txtNum.text=W.getShortenPowerStr(this._data.num,!1):this.txtNum.text="",this.txtName.color=U.getColorLight(this._data.color),this.txtName.text=this.itemVO.name))},i.onClick=function(t){switch(t.currentTarget){case this.imgIcon:if(this.itemVO){var e="";e=ur.isEquip(this.itemVO.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(this.itemVO,e)}}},i.onAct=function(t){var e;this.itemVO&&((e=new Ee).msg=Z.span("您是否确认激活"+this.itemVO.name+"？","#621e09"),e.yesCaller=this,e.yesLabel="确认",e.noLabel="取消",e.yesFun=this.toAct,e.key=null,EF.showVO(e))},i.toAct=function(){this._data&&cr.ins().toActivateWishBox(this._data.boxId,this._data.goodId)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update(),this.imgIcon.on("click",this,this.onClick),this.btnAct.on("click",this,this.onAct)}),e}(iw),GV=function(t){function e(){this.selectIndex=0,this.rewardArr=null,this.boxOid=0,this.list=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list=new Eh(515,200,85,110,this,UV,3,1,55,new Q(this,this.onRenderHandler),"com/ui/arrowLeft3.png","com/ui/arrowRight3.png",55,84),this.btnClose.on("click",this,this.onClick)}w(e,"modules.pack.packView.WishSelectBoxTip",sw);var i=e.prototype;return i.updateView=function(t,e){this.boxOid=e,this.selectIndex=0,this.rewardArr=[];for(var i=0;i<t.length;i++){var s=t[i],n=new Object;n.goodId=s.id,n.num=s.val,n.boxId=e,this.rewardArr.push(n)}this.updateReward()},i.updateReward=function(){this.rewardArr&&(this.list.data=this.rewardArr,this.list.selectedIndex=0,this.list.reflash()),this.list.showButton()},i.onRenderHandler=function(t,e){},i.onClick=function(t){this.closeWindow()},e}(),HV=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.pet.book.PetBookItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&(this.select=!1,this.imgPet.skin="com/petHead/"+this._data.skinID+".png",this.imgBg.skin="com/ui/goodsBgs"+(this._data.color+1)+".png",this.imgMask.visible=!Po.checkHadPet(this._data.skinID))}),I(0,i,"select",function(){return this.imgSel.visible},function(t){this.imgSel.visible=t}),I(0,i,"data",function(){return this._data}),e}(nw),WV=function(t){function i(){var t;this.starArr=null,this.timeOutKey=NaN,this.curIndex=-1,this._selPet=null,this.txtLinkArr=null,this.dotArr=null,this.clip=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.clip=b.getOne(),this.clip.pos(341,311),this.addChild(this.clip),this.tab.labels=Po.getLables(),this.tab.setItemSize(100,42,"10,10,10,10"),this.tab.on("change",this,this.onTabChange),this.tab.selectedIndex=0,this.list.itemRender=HV,this.list.mouseHandler=new Q(this,this.onClickPet),this.list.renderHandler=new Q(this,this.onRenderHandler),this.on("click",this,this.onClick),this.starArr=[];for(var e=0;e<5;e++)(t=new et).pos(38*e,0),this.spStar.addChild(t),this.starArr.push(t);this.panel.vScrollBarSkin="",this.txtDesc.style.fontSize=24,this.txtDesc.style.color="#5d3924",this.txtDesc.style.valign="top",this.txtDesc.style.leading=8,this.txtGet.style.fontSize=24,this.txtGet.style.color="#5d3924",this.on("display",this,this.onDisplay)}w(i,"modules.pet.book.PetBookView",ow);var e=i.prototype;return e.onDisplay=function(){this.on("undisplay",this,this.onUndisplay);var t=Po.getNextTimeOut();t<99999999&&(this.timeOutKey=_t.setTimeout(this,this.update,null,1e3*(t-ya.serverTime)))},e.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),_t.clearTimeout(this.timeOutKey)},e.onRenderHandler=function(t,e){var i=t;i.select=!!this.selPet&&this.selPet==i.data},e.onClickPet=function(t,e){"mousedown"==t.type&&(this.selPet=this.list.getCell(e).data,this.list.refresh())},e.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnLeft:0==this.list.page?Jt.addTip("已经到顶啦。"):this.setPage(this.list.page-1);break;case this.btnRight:Po.getDataArrByColor(this.tab.selectedIndex).length>10*(this.list.page+1)?this.setPage(this.list.page+1):Jt.addTip("已经到底啦。");break;default:if(t.target&&t.target.parent instanceof laya.html.dom.HTMLElement){var e=t.target.parent;if(e&&e.href&&0<e.href.split(":").length)return void me.linkTo(parseInt(e.href.split(":")[1]))}}},e.setPage=function(t){this.list.page=t;var e=Po.getDataArrByColor(this.tab.selectedIndex);this.txtPage.text=this.list.page+1+"/"+Math.ceil(e.length/10)},e.onTabChange=function(){if(this.curIndex!=this.tab.selectedIndex){this.curIndex=this.tab.selectedIndex;var t=Po.getDataArrByColor(this.tab.selectedIndex);this.list.dataSource=t,this.setPage(0)}this.updateTxtHas()},e.update=function(){this.selPet?this.updatePet():this.selPet=Po.getDataArrByColor(this.tab.selectedIndex)[10*this.list.page],this.list.refresh(),this.updateTxtHas()},e.updateTxtHas=function(){this.txtHas.text=Po.getColorNameByIndex(this.tab.selectedIndex)+"已收集："+Po.getNumTipByIndex(this.tab.selectedIndex),this.txtHas.color=U.getColorDark(this.tab.selectedIndex+2)},e.onTxtLink=function(t){var e=parseInt(t.target.name);me.linkTo(e)},e.updatePet=function(){this.selPet&&(this.clip.loadAndPlay("unit/monster/"+this.selPet.skinID+"_3","stand",3,!0),this.clip.scale(_e.scale,_e.scale))},I(0,e,"selPet",function(){return this._selPet},function(t){if(this._selPet=t){this.imgType.skin="modules/pet/icon"+this._selPet.attackType+".png",this.txtName.text=t.name,this.txtName.color=U.getColorDark(t.color+1);for(var e=0;e<5;e++)this.starArr[e].skin=e<t.color?"modules/pet/starYellow.png":"";this.spStar.x=(680-(38*t.color-7))/2;var i=Eo.getPetSkillVO(t.skillID);this.txtDesc.innerHTML=Z.font(i.name+"（拥有数量："+Eo.getHasGetSkillNum(t.skillID)+"）",U.getColorLight(i.color),24)+"<br/>（"+i.getDescByLv(i.maxlv,"#5d3924","#ffffff")+"）",this.txtDesc.height=this.txtDesc.contextHeight,this.panel.refresh(),this.imgSkillBg.skin="com/ui/goodsBg"+i.color+".png",this.imgSkill.skin="modules/pet/skill/"+t.skillID+".png",this.txtLinkArr=this.txtLinkArr||[],this.dotArr=this.dotArr||[];for(var s=t.getLinkHtml(),n=207,o=Math.max(this.txtLinkArr.length,s.length),a=0;a<o;a++)a<s.length?(this.txtLinkArr[a]=this.txtLinkArr[a]||new jt,this.txtLinkArr[a].fontSize=24,this.txtLinkArr[a].text=s[a][0],1<s[a].length?(this.txtLinkArr[a].name=s[a][1],this.txtLinkArr[a].color="#139604",this.txtLinkArr[a].underline=!0,this.txtLinkArr[a].on("click",this,this.onTxtLink)):(this.txtLinkArr[a].color="#5d3924",this.txtLinkArr[a].underline=!1,this.txtLinkArr[a].off("click",this,this.onTxtLink)),this.addChild(this.txtLinkArr[a]),this.txtLinkArr[a].pos(n,428),n=this.txtLinkArr[a].x+this.txtLinkArr[a].textWidth,a!=s.length-1&&(this.dotArr[a]=this.dotArr[a]||new jt,this.dotArr[a].fontSize=24,this.dotArr[a].text="，",this.dotArr[a].color="#5d3924",this.addChild(this.dotArr[a]),this.dotArr[a].pos(n,428),n+=this.dotArr[a].textWidth)):(this.txtLinkArr[a]&&this.txtLinkArr[a].parent&&this.txtLinkArr[a].removeSelf(),this.dotArr[a-1]&&this.dotArr[a-1].parent&&this.dotArr[a-1].removeSelf());this.updatePet()}}),i}(),qV=function(t){function e(){this._rewards=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.list.itemRender=hx,this.list.repeatY=1,this.list.hScrollBarSkin=""}w(e,"modules.pet.embattle.PetClearRewardView",aw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnYes:case this.btnClose:this.closeWindow()}},i.update=function(t,e){this._rewards=e,this.txtT.text="恭喜你完成了1~"+t%1e4+"关的扫荡，获得以下奖励\t",this.list.dataSource=e,this.list.startIndex=0,4<e.length?(this.list.x=70,this.comp1()):this.list.x=(680-135*e.length)/2},i.comp2=function(){this.list.tweenTo(0,1200*(this._rewards.length-4),Q.create(this,this.comp1,null,!0))},i.comp1=function(){this.list.tweenTo(this._rewards.length-4,1200*(this._rewards.length-4),Q.create(this,this.comp2,null,!0))},e}(),YV=function(t){function e(){this._data=NaN,this._skill=NaN,e.__super.call(this)}w(e,"modules.pet.embattle.PetEmbattleItem2",t);var i=e.prototype;return i.update=function(){var t=To.getTowerRound(To.getRound(1)+1);if(t){var e=t.getDetailByPos(this._data);if(e){var i=To.getTowerMonster(e.id);this.imgPet.skin="com/petHead/"+i.skin_id+".png",this.imgBg.skin="com/ui/goodsBg"+i.color+".png",this.imgType.skin="modules/pet/txt"+Math.floor(e.val%10)+".png";var s=To.getTowerSkill(Math.floor(e.val/10));s&&(this.imgFront.visible=!0,this.txtFront.text=s.name)}else this.reset()}else this.reset()},i.reset=function(){this.imgBg.skin="modules/petEmbattle/eff.png",this.imgType.skin=null,this.imgPet.skin=null,this.txtLv.text="",this.txtFront.text="",this.imgFront.visible=!1},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t}),I(0,i,"skill",null,function(t){this._skill=t}),e}(lw),XV=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.pet.embattle.PetFightItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this._data){this.select=!1,this.imgPet.skin="com/petHead/"+this._data.skin_id+".png";var e=Math.floor(this._data.type_id%1e5/1e4);this.imgBg.skin="com/ui/goodsBg"+e+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this.txtLv.text="Lv"+this._data.level}}),I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"isFight",null,function(t){this.imgFight.visible=t}),e}(rw),KV=function(t){function s(){this.glowFilter=null,this.maskSpeed=80,this.masker=null,this.maskerStep=0,this.fightType=0,this.stopState=!1,this._towerID=NaN,this._roundID=NaN,this._fightLog=null,this._award=null,this._barr=NaN,this.goodsImage=null,this._subRound=0,this._vo=null,this.playing=!1,this.curRound=0,this.myPetItems=null,this.othPetItems=null,this.playSpeed=NaN,this.sortArr=[],s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!0),this.glowFilter=new Y("#ffff00",10,0,0),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.spSkillMask.graphics.drawRect(0,0,750,lt.stageHeight,"#000000"),this.spSkillMask.alpha=.5,this.spSkillMask.visible=!1,this.onResize()}w(s,"modules.pet.embattle.PetFightView",hw);var e=s.prototype;return e.onResize=function(){this.spCloseMask.graphics.clear(),this.spCloseMask.graphics.drawRect(0,0,this.width,lt.stageHeight,"#000000")},e.onDisplay=function(){this.spCloseMask.alpha=0,this.on("undisplay",this,this.onUndisplay)},e.showMask=function(){if(null==this.masker){this.masker=this.masker||new xt;var t=this.width,e=lt.stageHeight,i=[];i.push(0,0,0,0,0,0),i.push(t,0,0,0,0,0),i.push(t,e,0,0,0,1),i.push(0,e,0,0,0,1),i.push(0,2*e,0,0,0,1),i.push(t,2*e,0,0,0,1),i.push(t,3*e,0,0,0,0),i.push(0,3*e,0,0,0,0);var s=[];s.push(0,1,2,0,2,3),s.push(3,2,5,3,5,4),s.push(4,5,6,4,6,7),this.masker.drawPloy(i,s)}this.maskerStep=0,this.addChild(this.masker),this.masker.pos(0,lt.stageHeight),_t.addToFrame(this,this.moveMasker)},e.moveMasker=function(){this.masker.y+=-this.maskSpeed,0==this.maskerStep&&this.masker.y<=-lt.stageHeight&&this.masker.y<-2*lt.stageHeight&&(this.maskerStep=1,this.onAllBlack()),this.masker.y<-3*lt.stageHeight&&(this.masker.removeSelf(),_t.removeFromFrame(this,this.moveMasker),this.onMaskFinish())},e.onAllBlack=function(){switch(this.fightType){case 1:var t=Math.ceil(((this._roundID-1)%50+1)/10);this.bg.skin="modules/petFight/img/bg"+t+".jpg";break;case 2:this.bg.skin="modules/petFight/img/bg2.jpg"}this.initPet()},e.onMaskFinish=function(){this.playRound()},e.onUndisplay=function(){_t.removeFromFrame(this,this.resetDepth),_t.removeFromFrame(this,this.moveMasker),this.off("undisplay",this,this.onUndisplay),this._fightLog&&this.showResult(),this._roundID=0,this._towerID=0,this._subRound=0,this.stopState=!1,To.playRate=1,this.imgSpeed.filters=[]},e.onClick=function(t){switch(t.target){case this.imgSpeed:To.playRate=2/To.playRate,this.imgSpeed.filters=1==To.playRate?[]:[this.glowFilter];break;case this.imgRe:switch(this.fightType){case 1:this.closeWindow();break;case 2:this.showResult()}}},e.setPetTowerFight=function(t,e){this.fightType=1,this._towerID=t,this._roundID=e;var i=To.getPetTowerPlayToc(t,e);i&&(this._fightLog=i.fight_info,this._barr=i.barrier,this._award=i.rewards),To.resetData(),this._fightLog?(this.updateReward(),this.clearPet(),this.showMask(),this.stopFight()):console.log("没有仙宠战斗的数据")},e.setRecFight=function(t){this.fightType=2,this._fightLog=t,To.resetData(),this._fightLog?(this.updateReward(),this.clearPet(),this.showMask(),this.stopFight()):console.log("没有仙宠战斗的数据")},e.stopFight=function(){var t;if(this.myPetItems)for(var e in this.myPetItems)(t=this.myPetItems[e])&&t.parent&&t.reset();if(this.othPetItems)for(e in this.othPetItems)(t=this.othPetItems[e])&&t.parent&&t.reset()},e.clearPet=function(){var t;if(this.myPetItems)for(var e in this.myPetItems)(t=this.myPetItems[e])&&t.parent&&t.removeSelf();if(this.othPetItems)for(e in this.othPetItems)(t=this.othPetItems[e])&&t.parent&&t.removeSelf()},e.roundCheck=function(){var t;if(this.myPetItems)for(var e in this.myPetItems)(t=this.myPetItems[e])&&t.parent&&t.checkRoundStart(this.curRound);if(this.othPetItems)for(e in this.othPetItems)(t=this.othPetItems[e])&&t.parent&&t.checkRoundStart(this.curRound)},e.updateReward=function(){for(var t=To.getRound(this._towerID),e=10*Math.floor(t/10)+1,i=0;i<10;i++)this["txt"+(i+1)].text=(e+i)%1e4+"";var s=To.getTowerRound(e+9);s&&(this.goodsImage=this.goodsImage||new Ah(91,91,!1,!0,!0,!0,140),this.goodsImage.pos(-7,13),this.goodsImage.dataSource=s.getTowerAward()[0],this.imgWard.addChild(this.goodsImage)),t=t%10==0?10:t%10,this.imgBar.visible=10!=t,this.imgBar.width=t/9*670,t=10==t?0:t;for(var n=1;n<=10;n++)this["img"+n].skin=n<=t?"modules/petFight/cir2.png":"modules/petFight/cir1.png"},e.playRound=function(){if(this._fightLog)if(this._fightLog.fight_logs.length>this._subRound){var t=this._fightLog.fight_logs[this._subRound];if(t.round!=this.curRound&&(1==this.fightType&&(this.txtSubRound.text="第"+t.round+"回合"),this.curRound=t.round),0==this.stopState){++this._subRound,this.playing=!0;var e=To.getPetUnitByPos(t.active_pos);e&&e.startFight(t)}else this.playing=!1}else this.playing=!1,this.showResult()},e.showResult=function(){switch(this.fightType){case 1:this._vo=this._vo||new sa,this._vo.result=3-Math.floor(this._fightLog.result/10),this._vo.ignoreMap=!0,2==(((this._vo.leftFunCaller=this)._vo.timeOutCaller=this)._vo.rightFunCaller=this)._vo.result?(this._vo.goods=this._award,this._vo.leftBtnLabel="下一关",this._vo.rightBtnLabel="返回布阵",this._vo.leftBtnFun=this._vo.timeOutFun=this.goNext,this._vo.rightFunParm=this._vo.leftFunParm=this._vo.timeOutParm=[this._towerID],this._vo.rightBtnFun=this.returnToPanel,this._vo.showRight=!0):(this._vo.goods=null,this._vo.leftBtnFun=this._vo.timeOutFun=this.returnToPanel,this._vo.failTxtArr=["仙宠训练","仙宠技能","仙宠兽魂","六界寻宝"],this._vo.failLinkArr=[11606,11607,11608,11613]),ia.show(this._vo);break;case 2:if(this._fightLog)var t=os.getPetArenaChangeRes(this._fightLog.fight_id);if(t){if(this._vo=this._vo||new sa,this._vo.result=3-Math.floor(this._fightLog.result/10),this._vo.ignoreMap=!0,(this._vo.closeCaller=this)._vo.goods=t.rewards,this._vo.showRight=!1,this._vo.closeFun=this.closeWindow,2!=this._vo.result)t.rewards&&0==t.rewards.length&&(this._vo.goods=null),this._vo.leftBtnLabel="离开副本",this._vo.leftBtnFun=this.closeWindow,this._vo.failTxtArr=["仙宠训练","仙宠技能","仙宠兽魂","升级历练"],this._vo.failLinkArr=[11606,11607,11608,10800];else{var e=os.getNewestChallengeLog();e&&(this._vo.msgTitle="当前排名："+e.my_new_ranking,this._vo.rankChangeType=e.ranking_type,this._vo.leftFunParm=[e]),this._vo.leftBtnLabel="发送战报",this._vo.leftBtnFun=this.sendFightReport,this._vo.rightBtnLabel="离开副本",this._vo.rightBtnFun=this.closeWindow,this._vo.showRight=!0,this._vo.countDownPosType=2}ia.show(this._vo)}else ie.to(this.spCloseMask,{alpha:.8},1e3,null,Q.create(this,this.closeAndTip,null,!0))}this._fightLog=null},e.sendFightReport=function(t){if(t){qa.ins.toSaveGlobalFightReport(t);var e="<br/>仙宠竞技战报<br/>";e+="【"+pe.roleName+"】战胜了【"+t.opponent.role_name+"】",1==t.ranking_type&&(e+="，名次提升到"+t.my_new_ranking),Za.ins().toSendMsg(1e4,e,6),Jt.addTip("发送成功")}this.closeWindow()},e.closeAndTip=function(){this.closeWindow(),Jt.addTip("观战结束")},e.returnToPanel=function(t){this.closeWindow(),T.dispatch("PET_TOWER_UPDATE",t)},e.goNext=function(t){pr.ins().toPetTowerPlay(t)},e.upPet=function(t){this.spPet.addChild(t),To.setPetUnitByPos(t,t.data.pos)},e.downPet=function(t){this.disposePet(t)},e.initPet=function(){var t,e,i;if(To.resetData(),this._subRound=0,this.myPetItems=this.myPetItems||[],this.othPetItems=this.othPetItems||[],this._fightLog){var s=this._fightLog.left_side.pets.length,n=this.myPetItems.length,o=Math.max(s,n);this._fightLog.left_side.pets.sort(this.petSort);for(var a=0;a<o;a++)a<s?(this.myPetItems[a]=this.myPetItems[a]||new Ph,e=this.myPetItems[a],t=this._fightLog.left_side.pets[a],e.data=t,i=To.getPetXYByPos(t.pos),e.pos(i.x,i.y),this.upPet(e)):this.myPetItems[a]&&this.myPetItems[a].parent&&this.myPetItems[a].removeSelf();for(this._fightLog.right_side.pets.sort(this.petSort),s=this._fightLog.right_side.pets.length,n=this.othPetItems.length,o=Math.max(s,n),a=0;a<o;a++)a<s?(this.othPetItems[a]=this.othPetItems[a]||new Ph,e=this.othPetItems[a],t=this._fightLog.right_side.pets[a],e.data=t,i=To.getPetXYByPos(t.pos),e.pos(i.x,i.y),this.upPet(e)):this.othPetItems[a]&&this.othPetItems[a].parent&&this.othPetItems[a].removeSelf();if(1==this.fightType)this.txtRound.text="第"+this._barr%1e4+"关",this.spBot.visible=!0,this.txtDown1.visible=this.txtDown.visible=this.imgRec.visible=!1;else{var l=Nn.getLogVOByPetLogID(this._fightLog.fight_id);if(l)this.txtRound.text=l.role_name_2,this.txtDown.text=l.role_name_1,this.txtDown1.text=l.win_role_id==l.role_id_1?"胜方":"负方",this.txtDown1.color=l.win_role_id==l.role_id_1?"#96f254":"#b60202",this.txtSubRound.text=l.win_role_id==l.role_id_2?"胜方":"负方",this.txtSubRound.color=l.win_role_id==l.role_id_2?"#96f254":"#b60202";else{this.txtRound.text=this._fightLog.right_side.role_name,this.txtDown.text=this._fightLog.left_side.role_name;Math.floor(this._fightLog.result/10);this.txtSubRound.text="防守方",this.txtSubRound.color="#b60202",this.txtDown1.text="挑战方",this.txtDown1.color="#96f254"}this.spBot.visible=!1,this.txtDown1.visible=this.txtDown.visible=this.imgRec.visible=!0}}},e.petSort=function(t,e){return t.pos>e.pos?-1:1},e.resetDepth=function(){this.sortArr.length=this.spPet._childs.length;for(var t=0;t<this.spPet._childs.length;t++)this.sortArr[t]=this.spPet._childs[t];this.sortArr.sort(s.sort);for(var e=0;e<this.sortArr.length;e++){var i=this.sortArr[e];this.spPet.getChildIndex(i)!=e&&this.spPet.setChildIndex(i,e)}},e.disposePet=function(t){t.removeSelf(),t.scale(1,1)},s.sort=function(t,e){return t.y<e.y?-1:t.y>e.y?1:0},s}(),jV=function(t){function e(){this.itemsArr=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.pet.embattle.PetTenRoundAwardItem",t);var i=e.prototype;return i.onClick=function(t){if(t.target){var e=t.target;e.data&&Ae.show(e.data,"BASE_GOODS_TIP")}},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(t){var e=t;this.txtRound.text="第"+e.id%1e4+"关";var i=e.getTowerAward(),s=(430-(105*i.length+20*(i.length-1)))/2+200;this.itemsArr=this.itemsArr||[];for(var n,o=Math.max(i.length,this.itemsArr.length),a=0;a<o;a++)a<i.length?(this.itemsArr[a]=this.itemsArr[a]||new fh(null,!0,!0,105),(n=this.itemsArr[a]).pos(s+135*a,17),n.data=ur.getItem(i[a].id),n.mouseEnabled=!0,this.addChild(n)):this.itemsArr[a]&&this.itemsArr[a].parent&&this.itemsArr[a].removeSelf()}}),e}(uw),QV=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.list.itemRender=jV,this.list.vScrollBarSkin="",this.list.repeatX=1;var t=To.getTenRound();this.list.dataSource=t}return w(e,"modules.pet.embattle.PetTenRoundAwardView",cw),e.prototype.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow()}},e}(),zV=function(t){function e(){this._data=0,e.__super.call(this),this.on("click",this,this.onClickRe),this.hitArea=this.hitArea||new Dt(224,-99,91,91)}w(e,"modules.pet.embattle.PetTowerItem",t);var i=e.prototype;return i.onClickRe=function(){if(this._data&&this._data%2==1){var t=To.getTowerRound(1e4+5*this._data+5);if(t){var e=ur.getItem(t.getTowerAward()[0].id);e&&Ae.show(e,"BASE_GOODS_TIP")}}},i.update=function(){},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,0<=this._data){this.txt1.text=5*t+1+"",this.txt2.text=5*t+2+"",this.txt3.text=5*t+3+"",this.txt4.text=5*t+4+"",this.txt5.text=5*t+5+"",this.imgSuo1.visible=!1,this.imgSuo2.visible=!1,this.imgSuo3.visible=!1,this.imgSuo4.visible=!1,this.imgSuo5.visible=!1,this.imgDoor.visible=0==this._data;var e=To.getRound(1)%1e4,i=e+1,s=e>=To.maxTowerRound?To.maxTowerRound:i;if(s<=5*this._data+5&&s>=5*this._data+1){this.imgNow.visible=!0;var n=s%5==0?this.imgRound5:this["imgRound"+s%5];this.imgNow.pos(n.x-3,n.y-3)}else this.imgNow.visible=!1;for(var o=0,a=1;a<6;a++)(o=5*this._data+a)>To.maxTowerRound?(this["imgSuo"+a].visible=!0,this["txt"+a].text=""):(this["imgSuo"+a].visible=i<o,this["txt"+a].text=o<=i?o+"":"",i>5*this._data+a?this["txt"+a].color="#96f254":this["txt"+a].color="#c29d88");if(t%2==1){this.imgBg.visible=!0;var l=To.getTowerRound(1e4+5*t+5);l&&(this.imgGoods.skin=ur.getItem(l.getTowerAward()[0].id).realMaxico)}else this.imgBg.visible=!1}else this.txt1.text=this.txt2.text=this.txt3.text=this.txt4.text=this.txt5.text="",this.imgSuo1.visible=this.imgSuo2.visible=this.imgSuo3.visible=this.imgSuo4.visible=this.imgSuo5.visible=!0,this.imgBg.visible=!1}),e}(dw),$V=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.pet.embattle.PetTowerSkillItem",pw);var i=e.prototype;return I(0,i,"select",null,function(t){var e=(this.imgSel.visible=t)?2:1;2==this._data.type?this.imgSkill.skin="modules/petEmbattle/btnRed"+e+".png":this.imgSkill.skin="modules/petEmbattle/btnBlue"+e+".png"}),I(0,i,"data",function(){return this._data},function(t){this._data=t,this._data&&(2==this._data.type?this.imgSkill.skin="modules/petEmbattle/btnRed1.png":this.imgSkill.skin="modules/petEmbattle/btnBlue1.png",this.txtSkill.text=this._data.name)}),e}(),ZV=function(t){function n(){this.tower=null,this.repeatX=5,this.posArr=[[27,60],[122,60],[217,60],[27,156],[122,156],[217,156]],this.items=null,this.myItems=null,this.othItems=null,this.timeOutKey=NaN,this.itemCopy=null,this.itemEmbattleCopy=null,this._selectPet=null,this.bitmapClip=null,this.completeHanlder=null,this.towerSkillArr=null,this.init=!1,this.awards=null,n.__super.call(this),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.fTab.selectedIndex=0,this.fTab.setItemSize(90,50),this.tower=new te(320,710,4,zV,0),this.tower.on("end",this,this.update),this.tower.y=-51,this.tower.on("end",this,this.onTowerEnd),this.list.itemRender=XV,this.list.mouseHandler=new Q(this,this.onClickPet),this.list.repeatX=this.repeatX,this.boxTower.addChild(this.tower),this.fTab1.selectedIndex=0,this.fTab1.setItemSize(90,50),this.txtLink.underline=!0,this.items=[];for(var t=0;t<this.posArr.length;t++){var e=new bC;e.pos(this.posArr[t][0],this.posArr[t][1]),this.imgLeft.addChild(e),this.items.push(e)}for(this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("mousedown",this,this.onMouseDown),this.list.renderHandler=new Q(this,this.onRenderHandler),this.myItems=[],t=0;t<6;t++)(e=new bC).mouseEnabled=!1,e.pos(this.posArr[t][0]+364,this.posArr[t][1]+320),this.spTower.addChild(e),this.myItems.push(e);for(this.othItems=[],t=0;t<6;t++){var i=new YV,s=t<3?t+3:t-3;i.pos(this.posArr[s][0]+364,this.posArr[s][1]+11),i.dataSource=t+1,this.spTower.addChild(i),this.othItems.push(i)}this.fTab.on("change",this,this.updatePetFightDesc),this.fTab1.on("change",this,this.updatePetEmbattle),this.tab.on("change",this,this.checkOpen),this.tab.selectedIndex=0,Nt.register("RP_PET_TOWER_BARRIER",this.btnClear)}w(n,"modules.pet.embattle.PetTowerView",mw);var e=n.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.showFinger=function(){Eo.pets&&0<Eo.pets.length?(this.imgFinger.visible=!0,this.imgFinger.pos(75,45),ie.to(this.imgFinger,{x:59,y:210},1200,null,Q.create(this,this.timeOutToShow,null,!0),300,!0)):this.hideFinger()},e.timeOutToShow=function(){this.timeOutKey=_t.setTimeout(this,this.showFinger,null,300)},e.hideFinger=function(){this.imgFinger.visible=!1,ie.clearAll(this.imgFinger),_t.clearTimeout(this.timeOutKey)},e.onTowerEnd=function(){this.showClearEff(!1);var t=Math.floor(To.getRound(1)%1e4/15);this.resetTowerData(t)},e.resetTowerData=function(t){for(var e=[],i=0;i<7;i++)e[i]=3*t+i;this.tower.dataSource=e},e.onRenderHandler=function(t,e){var i=t;if(i.data){var s;for(var n in i.select=this._selectPet&&i.data&&i.data.pet_id==this._selectPet.pet_id,this.items)if((s=this.items[n]).index=this.fTab1.selectedIndex+1,s.data&&s.data.pet_id==i.data.pet_id)return void(i.isFight=!0);i.isFight=!1}},e.onMouseDown=function(t){t.target instanceof modules.pet.embattle.PetEmbattleItem&&null!=t.target.data&&(null==this.itemEmbattleCopy&&(this.itemEmbattleCopy=new bC,this.itemEmbattleCopy.mouseEnabled=!1),this.itemEmbattleCopy.index=this.fTab1.selectedIndex+1,this.itemEmbattleCopy.dataSource=t.target.data,this.itemEmbattleCopy.pos(t.target.x,t.target.y),this.imgLeft.addChild(this.itemEmbattleCopy),this.itemEmbattleCopy.startDrag(null,!1,0),this.imgKuang.visible=!0,this.stage.on("mouseup",this,this.onItemEmbattleCopyUp))},e.onItemEmbattleCopyUp=function(t){if(this.itemEmbattleCopy.removeSelf(),this.imgKuang.visible=!1,this.stage.off("mouseup",this,this.onItemEmbattleCopyUp),t.target instanceof modules.pet.embattle.PetEmbattleItem){if(t.target.data!=this.itemEmbattleCopy.data){var e,i,s=t.target;for(i in this.items)if((e=this.items[i]).index=this.fTab1.selectedIndex+1,e.data&&e.data.pet_id==this.itemEmbattleCopy.data.pet_id){e.dataSource=s.data;break}s.dataSource=this.itemEmbattleCopy.data;var n=this.items.indexOf(s);pr.ins().toPetEmbattleChangePos(this.itemEmbattleCopy.data.pet_id,this.fTab1.selectedIndex+1,n+1)}}else for(i in this.items)if((e=this.items[i]).index=this.fTab1.selectedIndex+1,e.data&&e.data.pet_id==this.itemEmbattleCopy.data.pet_id){e.dataSource=null,pr.ins().toPetEmbattleChangePos(this.itemEmbattleCopy.data.pet_id,this.fTab1.selectedIndex+1,0);break}this.selectPet=this.itemEmbattleCopy.data,this.updatePetDesc()},e.onClickPet=function(t,e){if("mousedown"==t.type){var i=this.list.getCell(e);this.itemCopy=this.itemCopy||new XV,this.itemCopy.pivotX=this.itemCopy.pivotY=0,this.itemCopy.dataSource=i.data,this.itemCopy.pos(i.x+this.list.x,i.y+this.list.y),this.spEff.addChild(this.itemCopy),this.itemCopy.startDrag(null,!1,0),this.imgKuang.visible=!0,this.stage.on("mouseup",this,this.onItemCopyUp)}},e.updatePetDesc=function(){if(this._selectPet){var t,e,i,s=Math.floor(this._selectPet.type_id%1e5/1e4);if(this.selPetBg.skin="com/ui/goodsBg"+s+".png",this.selPetImg.skin="com/petHead/"+this._selectPet.skin_id+".png",this.txtLv.text="LV."+this._selectPet.level,this.txtName.text=this._selectPet.pet_name,this.txtName.color=U.getColorDark(s),this._selectPet.embattle_info&&this.selectPet.embattle_info.embattles&&0<this.selectPet.embattle_info.embattles.length)for(var n in this.selectPet.embattle_info.embattles)if((e=this.selectPet.embattle_info.embattles[n]).index==this.fTab1.selectedIndex+1){t=To.getTowerSkill(e.embattle_skill);break}for(var o in this.txtSkill.text=t?"特技："+t.name:"",this.towerSkillArr)(i=this.towerSkillArr[o]).select=t&&i&&i.data&&i.data.id==t.id}},e.onItemCopyUp=function(t){var e;this.itemCopy.removeSelf(),this.imgKuang.visible=!1,this.stage.off("mouseup",this,this.onItemCopyUp);var i=0;for(s in this.items)null!=(e=this.items[s]).data&&++i;if(i<5||t.target.data){if(t.target instanceof modules.pet.embattle.PetEmbattleItem&&t.target.data!=this.itemCopy.data){var s,n=t.target;for(s in this.items)if((e=this.items[s]).index=this.fTab1.selectedIndex+1,e.data&&e.data.pet_id==this.itemCopy.data.pet_id){e.dataSource=n.data;break}n.dataSource=this.itemCopy.data;var o=this.items.indexOf(n);pr.ins().toPetEmbattleChangePos(this.itemCopy.data.pet_id,this.fTab1.selectedIndex+1,o+1)}}else Jt.addTip("阵法中最多只能上阵5只仙宠哦！");this.selectPet=this.itemCopy.data,this.updatePetDesc()},e.checkOpen=function(){switch(this.tab.selectedIndex){case 0:this.spEff.visible=!1,this.spTower.visible=!0,this.hideFinger();break;case 1:this.spEff.visible=!0,this.spTower.visible=!1}this.update()},e.onDisplay=function(){T.register("PET_INFO_INIT",this,this.updateList),T.register("SELECT_TOWERSKILL",this,this.selectTowerSkill),T.register("RANK_GOT_DATA_UPDATE",this,this.updateRank),this.on("undisplay",this,this.onUndisplay),this.spTower.on("undisplay",this,this.onTowerUndisplay)},e.onTowerUndisplay=function(){this.spTower.off("undisplay",this,this.onTowerUndisplay),this.showClearEff(!1)},e.onUndisplay=function(){T.remove("PET_INFO_INIT",this,this.updateList),T.remove("SELECT_TOWERSKILL",this,this.selectTowerSkill),T.remove("RANK_GOT_DATA_UPDATE",this,this.updateRank),this.off("undisplay",this,this.onUndisplay)},e.selectTowerSkill=function(t){this.selectPet&&pr.ins().toPetEmbattleChangeSkill(this.selectPet.pet_id,this.fTab1.selectedIndex+1,t.id)},e.toPutFort=function(){this.tab.selectedIndex=1},e.showClearEff=function(t){t?(null==this.bitmapClip&&(this.bitmapClip=b.getOne(),this.bitmapClip.pos(186,643)),this.bitmapClip.parent||this.spTower.addChild(this.bitmapClip),this.bitmapClip.loadAndPlay("moduleEffect/saoguan","default",0,!0)):this.bitmapClip&&this.bitmapClip.parent&&this.bitmapClip.removeSelf()},e.onClick=function(t){switch(t.target){case this.btnClear:var e=To.getInfoByTowerID(1);if(e)if(To.getRound(1)>=e.passed_max_barrier){var i,s=Eo.getEmbattleByIndex(this.fTab.selectedIndex+1);for(var n in s)if((i=s[n])&&"p_pet"==i.className)return void pr.ins().toPetTowerPlay(1,this.fTab.selectedIndex+1);var o=new Ee;o.msg="当前布阵为空，是否前往布置仙宠阵型？<br>（最多可上阵五只仙宠）",o.yesLabel="点击前往",o.yesCaller=this,o.yesFun=this.toPutFort,EF.showVO(o)}else this.showClearEff(!0),pr.ins().toPetQuickFinsh(1),Nt.hide("RP_PET_TOWER_BARRIER");else Jt.addTip("幻兽天境数据未初始化");break;case this.txtLink:T.dispatch("OPEN_TENROUND_REWARD");break;case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;default:t.target instanceof modules.pet.embattle.PetTowerSkillItem&&Ae.show(t.target.data,"PET_TOWERSKILL_TIP")}},e.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},e.update=function(){this.spTower.visible&&this.updatePetTower(),this.spEff.visible&&this.updatePetEmbattle()},e.updatePetEmbattle=function(){var t,e,i;if(this.updateList(),this.updateLeftEmbattle(),null==this.selectPet){for(var s in this.items)if(null!=(t=this.items[s]).data){this.selectPet=t.data;break}}else for(i in this.items)(e=this.items[i]).select=this.selectPet==e.data;null==this.selectPet&&Eo.pets&&0<Eo.pets.length&&(this.selectPet=Eo.pets[0]);var n=To.getTowerSkills(),o=0,a=0;this.towerSkillArr=this.towerSkillArr||[];for(var l,r=Math.max(this.towerSkillArr.length,n.length),h=0;h<r;h++)h<n.length?(l=n[h],null==this.towerSkillArr[h]&&(this.towerSkillArr[h]=new $V,this.imgRight.addChild(this.towerSkillArr[h])),1<(this.towerSkillArr[h].data=l).getFightPos().length?(this.towerSkillArr[h].pos(a%3*102+22,60*Math.floor(a/3)+527),++a):(this.towerSkillArr[h].pos(o%3*102+22,60*Math.floor(o/3)+244),++o)):this.towerSkillArr[h]&&this.towerSkillArr[h].parent&&this.towerSkillArr[h].removeSelf();this.updatePetDesc()},e.updatePetFightDesc=function(){for(var t=Eo.getEmbattleByIndex(this.fTab.selectedIndex+1),e=1;e<7;e++){var i=this.myItems[e-1];i.index=this.fTab.selectedIndex+1,t[e]?i.dataSource=t[e]:i.dataSource=null}},e.updateLeftEmbattle=function(){for(var t=Eo.getEmbattleByIndex(this.fTab1.selectedIndex+1),e=!1,i=1;i<7;i++){var s=this.items[i-1];s.index=this.fTab1.selectedIndex+1,t[i]?(s.dataSource=t[i],e=!0):s.dataSource=null}e?this.hideFinger():this.showFinger()},e.updatePetTower=function(){var t=To.getInfoByTowerID(1);if(null!=t){var e=To.getRound(1)%1e4,i=Math.floor(e/15);e==To.maxTowerRound&&(i-=1),this.btnClear.disabled=!1,t&&To.getRound(1)>=t.passed_max_barrier?e==To.maxTowerRound?(this.btnClear.label="已通关",this.btnClear.disabled=!0):this.btnClear.label="挑战":this.btnClear.label="扫荡",0==this.init||null==this.tower.dataSource||this.tower.dataSource[6]==3*i?(this.resetTowerData(i),0==this.init&&_t.setTimeout(this,this.showClearEff,[!1],1e3),this.init=!0):this.tower.scrollToNext(),this.updatePetFightDesc(),this.updateRound()}},e.updateRank=function(t){if(4001==t){var e=jo.getRankVO(4001);if(null==e)xr.ins().toGetRank(4001);else for(var i=0;i<3;i++)if(e&&e.rows&&e.rows.length>i){var s=e.rows[i];this["txtRound"+(i+1)].text=parseInt(s.elements[1])%1e4+"",this["txtRole"+(i+1)].text=s.elements[0]}else this["txtRound"+(i+1)].text="暂无",this["txtRole"+(i+1)].text="虚位以待"}},e.updateRound=function(){this.updatePetFightAno(),this.updateRoundAward()},e.updateRoundAward=function(){if(To.getRound(1)%1e4==To.maxTowerRound){for(var t in this.txtRound.text="已通关",this.awards)this.awards[t].removeSelf()}else{this.txtRound.text="关卡奖励：第"+(To.getRound(1)%1e4+1)+"关";var e=To.getTowerRound(To.getRound(1)+1);if(null!=e){this.awards=this.awards||[];for(var i=Math.max(this.awards.length,e.getTowerAward().length),s=0;s<i;s++)s<e.getTowerAward().length?(this.awards[s]=this.awards[s]||new Ah(91,91,!1,!0,!0,!1,140),this.awards[s].pos(140*s+10,700),this.awards[s].dataSource=e.getTowerAward()[s],this.spTower.addChild(this.awards[s])):this.awards[s]&&this.awards[s].parent&&this.awards[s].removeSelf()}}},e.updatePetFightAno=function(){for(var t in this.othItems)this.othItems[t].update()},e.updateList=function(){Eo.pets?(this.list.dataSource=Eo.pets,this.checkBtnVisible()):mr.ins().toPetInfo();for(var t=0;t<this.list.content._childs.length;t++)this.list.content._childs[t].y=(this.list.height-this.list.content._childs[t].height)/2},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},I(0,e,"selectPet",function(){return this._selectPet},function(t){var e,i,s,n;for(i in this._selectPet=t,this.items)(e=this.items[i]).select=t==e.data;for(n in this.list.cells)(s=this.list.cells[n]).select=s.data&&t&&s.data.pet_id==t.pet_id}),I(0,e,"endFirstIndex",function(){return Eo.pets?(Math.ceil(Eo.pets.length/this.list.repeatX)-1)*this.list.repeatX:0}),n}(),JV=function(t){function e(){this._curSelectIndex=0,this._beadDataList=null,this._topGoodsImg=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this._curSelectIndex=0,this._beadList.itemRender=tB,this._beadList.renderHandler=Q.create(this,this.onRenderItem),this._beadList.selectEnable=!0,this._beadList.selectHandler=Q.create(this,this.onItemSelected),this._beadDataList=Ro.getAllBeadVoList().concat(),this._beadDataList.sort(this.sortBeadList),this._beadList.dataSource=this._beadDataList,this._topGoodsImg=new fh,this._topGoodsImg.x=70,this._topGoodsImg.y=75,this.addChild(this._topGoodsImg),this._closeBtn.on("click",this,this.onCloseWindow),this._backBtn.on("click",this,this.onCloseWindow),this._getBeadBtn.on("click",this,this.onGetBead)}w(e,"modules.pet.spsoul.beadArchive.SPSoulBeadArchivePanel",fw);var i=e.prototype;return i.sortBeadList=function(t,e){if(!t||!e)return 0;var i=t.type.toString(),s=e.type.toString(),n=parseInt(i.substr(i.length-2)),o=parseInt(s.substr(s.length-2)),a=parseInt(i.substr(0,4)),l=parseInt(s.substr(0,4));return n==o?a-l:n-o},i.onCloseWindow=function(t){this.closeWindow()},i.onRenderItem=function(t,e){var i=t;i.isSelected=e==this._curSelectIndex,i.isSelected&&this.selectItemChanged(i.data)},i.onItemSelected=function(t){if(this._curSelectIndex!=t){var e=this._beadList.getCell(this._curSelectIndex);e&&(e.isSelected=!1);var i=this._beadList.getCell(t);i&&(i.isSelected=!0,this.selectItemChanged(i.data)),this._curSelectIndex=t}},i.selectItemChanged=function(t){var e=ur.getItem(t.type);this._beadNameTxt.color=U.getColorLight(e.color),this._beadNameTxt.text=t.name,this._beadDescTxt.text=t.msg,this._topGoodsImg.data=e},i.onGetBead=function(t){ba.show(13000043)},i.update=function(){this._beadList.scrollTo(0),this._beadList.selectedIndex=0},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.update()},e}(),tB=function(t){function e(){this._data=null,this._goodsImg=null,e.__super.call(this),this._goodsImg=new fh}w(e,"modules.pet.spsoul.beadArchive.SPSoulBeadItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this._data){var e=ur.getItem(this._data.type);this._nameTxt.color=U.getColorLight(e.color),this._nameTxt.text=this._data.name.substr(2),this._goodsImg.data=e,!this._goodsImg.parent&&this.addChildAt(this._goodsImg,this.getChildIndex(this._selectImg))}}),I(0,i,"isSelected",function(){return this._selectImg.visible},function(t){this._selectImg.visible=t}),I(0,i,"data",function(){return this._data}),e}(_w),eB=function(t){function i(t){this.goods=null,this._big=!1,void 0===t&&(t=!1),i.__super.call(this);var e=(this._big=t)?105:91;this.size(e,e),this.goods=new fh(null,!0,!0,e,!1),this.addChild(this.goods),this.goods.visible=!1}w(i,"modules.pet.spsoul.view.SPSoulComposeItem",gw);var e=i.prototype;return e.updateBg=function(){this.bg.visible=!this.goods.data,this.goods.visible=!this.bg.visible,this._big?this.bg.skin="com/ui/itemMarkBg.png":this.bg.skin="com/ui/itemAddBg.png"},I(0,e,"pData",function(){return this.goods.pData},function(t){this.goods.pData=t,this.updateBg()}),I(0,e,"data",function(){return this.goods.data},function(t){this.goods.data=t,this.updateBg()}),i}(),iB=function(t){function i(){var t;this.ITEM_POS=[[123,270],[295,270],[460,270]],this.items=null,this.resultItem=null,this.goods=null,this.chooseGoods=null,this.putInNum=0,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.resultItem=new eB(!0),this.resultItem.pos(283,95),ft.ins().register(this.resultItem,this,500,this.onLongClick,[this.resultItem]),this.addChild(this.resultItem),this.chooseGoods=[],this.items=[];for(var e=0;e<this.ITEM_POS.length;e++)(t=new eB(!1)).x=this.ITEM_POS[e][0],t.y=this.ITEM_POS[e][1],ft.ins().register(t,this,500,this.onLongClick,[t],this.onItemClick,[t]),this.addChild(t),this.items.push(t);this.list.vScrollBarSkin="com/ui/vscroll.png",this.list.scrollBar.autoHide=!0,this.list.itemRender=nB,this.list.selectEnable=!0,this.list.selectHandler=Q.create(this,this.onSelected),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(i,"modules.pet.spsoul.view.SPSoulComposePanel",yw);var e=i.prototype;return e.onLongClick=function(t){if(t&&t.data){var e=new Object;e.className="p_goods",e.typeid=t.data.id,e.current_num=1,Ae.show(e,xo.getItemToolTipType(e.typeid))}},e.onSelected=function(t){this.resultItem.pData=null;var e=this.goods[t];if(e){for(var i=0;i<this.items.length;i++)if(null==this.items[i].pData)return void this.putInItem(i,e);Jt.addTip("合成区已满")}},e.putInItem=function(t,e){if(this.chooseGoods[t]=e){var i;this.putInNum+=1;for(var s=0;s<this.goods.length;s++)if((i=this.goods[s]).typeid==e.typeid){1<i.current_num?i.current_num-=1:this.goods.splice(s,1);break}}this.updateInside()},e.putOutItem=function(t){var e=this.chooseGoods[t];if(e){var i;this.putInNum-=1;for(var s=0;s<this.goods.length;s++)if((i=this.goods[s]).typeid==e.typeid)return i.current_num+=1,this.chooseGoods[t]=null,void this.updateInside();e.current_num=1,this.goods.push(e),this.chooseGoods[t]=null,this.callLater(this.updateInside)}},e.updateInside=function(){for(var t=0;t<this.items.length;t++)this.items[t].pData=this.chooseGoods[t];this.list.dataSource=this.goods?this.goods.sort(Oo.sortSmallFirst):null},e.update=function(){this.reset(),this.updateInside()},e.updateByCompose=function(){Ro.composeRewards&&0<Ro.composeRewards.length&&(this.update(),Ro.composeRewards&&(this.resultItem.data=ur.getRewardByTkv(Ro.composeRewards[0])))},e.reset=function(){for(var t in this.items)this.items[t].pData=null;this.resultItem.data=null,this.putInNum=0,this.chooseGoods=[],this.goods=xo.getGoodsByIDFun(st.isPetSPSoulID)},e.onClick=function(t){switch(t.target){case this.btnBack:case this.btnClose:this.closeWindow();break;case this.btnCompose:if(3==this.putInNum){var e,i=[];for(var s in this.chooseGoods)e=this.chooseGoods[s],i.push(e.typeid);fr.ins().toCompose(i)}else Jt.addTip("需选择3个灵珠后方可进行合成")}},e.onItemClick=function(t){t&&t.data&&this.putOutItem(this.items.indexOf(t))},e.onRemove=function(){for(var t=0;t<this.items.length;t++)this.putOutItem(t)},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this),this.update()},i}(),sB=function(t){function e(){this.pPet=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8")}w(e,"modules.pet.spsoul.view.SPSoulGoalPanel",vw);var i=e.prototype;return i.update=function(){this.pPet=Eo.getPetByPetID(Eo.curSelPetID);var t,e,i,s=0;this.pPet&&(s=this.pPet.level),this.txtCur.text="（当前仙宠等级："+s+"级）";for(var n=0;n<5;n++)(t=Ro.goalData[n])?(e=t.needPetLv>s?"#cccccc":"#00ff00",this["img"+n].visible=t.needPetLv<=s,this["txt"+n].color=e,i=t.msg):i="",this["txt"+n].text=i,this["img"+n].x=this["txt"+n].x+this["txt"+n].textWidth+10},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.update()},e}(),nB=function(t){function e(){this.imgSel=null,this.goods=null,e.__super.call(this),this.goods=new fh(null,!1,!0,91,!0),this.goods.y=5,this.goods.centerX=0,this.addChild(this.goods),this.imgSel=new et,this.imgSel.skin="com/ui/selectedBig.png",this.imgSel.pos(0,-2),this.imgSel.size(105,105),this.imgSel.visible=!1}w(e,"modules.pet.spsoul.view.SPSoulGoodsItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this.goods.pData=t,this.goods.data?(this.txtName.color=U.COLORS_LIGHT[this.goods.data.color],this.txtName.text=this.goods.data.title):this.txtName.text=""}),I(0,i,"select",null,function(t){(this.imgSel.visible=t)&&this.addChild(this.imgSel)}),e}(Iw),oB=function(t){function n(){this.head=null,this.bodyList=null,this._curListIndex=0,this.bag=null,this._curType=0,this.emptyTip=null,this.curChooseGood=null,this._curBeadVOInBag=null,this.curBeadState=0,this.curBeadItem=null,this.bagArr=null,this.pPet=null,this._hasNewTypePoly=!1,this._curPBead=null,n.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.head=new NB,this.head.pos(70,70),this.addChild(this.head),this.bodyList=new Eh(541,150,70,180,this,PU,4,1,28,new Q(this,this.onRenderHandler),"com/ui/arrowLeft3.png","com/ui/arrowRight3.png",55,84),this.bodyList.on("select",this,this.onBodyListSelect),this.bag=new mh,this.bag.size(585,305),this.bag.pos(65,535),this.bag.repeat(4,4),this.addChild(this.bag),this.bag.on("select",this,this.onBagSelected),this.emptyTip=new V,this.emptyTip.pos(185,675),this.emptyTip.addLinkText("背包中暂无灵珠，","#5d3924",!1),this.emptyTip.addLinkText("前往获得","#96f254",!0),this.emptyTip.on("link",this,this.onLink),this.emptyTip.visible=!1,this.addChild(this.emptyTip),this.on("click",this,this.onClick)}w(n,"modules.pet.spsoul.view.SPSoulPolyChangePanel",ww);var e=n.prototype;return e.onLink=function(t){me.linkTo(10504)},e.onClick=function(t){var e=this;switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btn:if(3!=this.curBeadState)if(2==this.curType){if(this.curChooseGood&&this.curPBead){var i=ur.getItem(this.curPBead.type_id),s=ur.getItem(this.curChooseGood.typeid);if(i&&s){var n=new Ee;n.msg="【"+Z.span(s.name,U.getColorLight(s.color))+"】将替换已装备的【"+Z.span(i.name,U.getColorLight(i.color))+"】，确认进行替换？",n.yesFun=function(){fr.ins().toLoad(Eo.curSelPetID,e._curListIndex+1,e.curChooseGood.typeid)},n.yesCaller=this,EF.showVO(n)}}}else this.curChooseGood&&fr.ins().toLoad(Eo.curSelPetID,this._curListIndex+1,this.curChooseGood.typeid);else Jt.addTip("当前槽位未开启")}},e.onBagSelected=function(t){this.curChooseGood=t,this.curBeadVOInBag=this.curChooseGood?Ro.getBeadVOByType(this.curChooseGood.typeid):null},e.onRenderHandler=function(t,e){var i=t;i.cfgData=Ro.polyItemData[e],i.hasNewTypePoly=this._hasNewTypePoly,i.select=e==this._curListIndex},e.onBodyListSelect=function(t){var e=this;this._curListIndex=t,this.callLater(function(){e.curPBead=e.bodyList.getItem(e._curListIndex),e.curBeadItem=e.bodyList.getListCell(e._curListIndex),e.curBeadState=e.curBeadItem?e.curBeadItem.state:3,e.curType=e.curPBead?2:1,e.bag.curWearingID=e.curPBead?e.curPBead.type_id:0,e.bodyList.reflash(),e.updateBag()})},e.update=function(){this.updatePet(),this.updateBodyList(),this.updateBag()},e.updatePet=function(){this.pPet=Eo.getPetByPetID(Eo.curSelPetID),this.head.dataSource=this.pPet;var t=0;this.pPet&&(this.txtName.text="Lv."+this.pPet.level+" "+this.pPet.pet_name,k.setPowerImgInSprite(this.spPower,this.pPet.power),t=this.pPet.bead_info?this.pPet.bead_info.step:0),this.txtSoul.text="灵魄："+t+"阶"},e.updateTxt=function(){switch(this.sp.visible=2==this.curType,this.txtCenter.visible=2!=this.curType,this.txtCenter.align="left",this.curBeadState){case 2:var t=this.curPBead?Ro.getBeadVOByType(this.curPBead.type_id):null;t&&(this.txtNow.text=t.msg,this.txtCenter.text=t.msg),this._curBeadVOInBag?this.txtNext.text=this._curBeadVOInBag.msg:(this.txtCenter.visible=!0,this.sp.visible=!1);break;case 1:this._curBeadVOInBag?this.txtCenter.text=this._curBeadVOInBag.msg:(this.txtCenter.text="尚未选择灵珠",this.txtCenter.align="center");break;case 3:this.txtCenter.text="当前槽位尚未开启，请先提升灵魄",this.txtCenter.align="center"}},e.updateBag=function(){Ro.updateCurBeadTypeInBody(),this.bagArr=xo.getGoodsByIDFun(st.isPetSPSoulID),this.emptyTip.visible=!this.bagArr||0==this.bagArr.length,this.bag.dataSource=this.bagArr?this.bagArr.sort(2==this.curType?this.sortReplace:Oo.sortLoad):null,this.bag.selectOne(),this.bagArr&&0!=this.bagArr.length||this.onBagSelected(null),this.callLater(this.updateTxt)},e.updateBodyList=function(){if(this.pPet&&this.pPet.bead_info&&this.pPet.bead_info.pet_beads)var t=this.pPet.bead_info.pet_beads;else t=[];t=this.fullArr(t),this._hasNewTypePoly=Oo.checkHasNewTypePoly(t),this.bodyList.data=t,this.bodyList.selectedIndex=this._curListIndex},e.sortReplace=function(t,e){if(t&&e){var i=Oo.checkMaskReplace(t.typeid,n.curBeadIDInBodyForSort),s=Oo.checkMaskReplace(e.typeid,n.curBeadIDInBodyForSort);return i&&!s?1:!i&&s?-1:t.typeid<e.typeid?1:t.typeid>e.typeid?-1:0}return 0},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.update()},e.fullArr=function(t){var e,i=[null,null,null,null,null,null,null,null];for(var s in t)i[(e=t[s]).pos-1]=e;return i},I(0,e,"curBeadVOInBag",null,function(t){this._curBeadVOInBag=t,this.updateTxt()}),I(0,e,"curPBead",function(){return this._curPBead},function(t){this._curPBead=t,n.curBeadIDInBodyForSort=t?t.type_id:0}),I(0,e,"beadIndex",null,function(t){this.bodyList.selectedIndex=t}),I(0,e,"curType",function(){return this._curType},function(t){this._curType=t,this.bag.type=this._curType,this.btn.label=2==this._curType?"替换":"装备",this.sp.visible=2==this._curType,this.txtCenter.visible=2!=this._curType}),n.curBeadIDInBodyForSort=0,n}(),aB=function(t){function e(){this._state=0,this._vo=null,this._pData=null,this.curBeadVO=null,this._hasNewTypePoly=!1,e.__super.call(this),ft.ins().register(this,this,500,this.onLongClick)}w(e,"modules.pet.spsoul.view.SPSoulPolyItem",t);var i=e.prototype;return i.onLongClick=function(){if(this._pData){var t=new Object;t.className="p_goods",t.typeid=this._pData.type_id,t.current_num=1,Ae.show(t,xo.getItemToolTipType(t.typeid))}},i.updateState=function(){var t=Eo.getPetByPetID(Eo.curSelPetID),e=t&&t.bead_info?t.bead_info.step:0;this._pData?(this.state=2,this.curBeadVO=Ro.getBeadVOByType(this._pData.type_id),this.curBeadVO&&(this.imgStone.skin=this.curBeadVO.url)):this._vo&&this._vo.openStep<=e?this.state=1:this.state=3},i.updateRP=function(){this.imgRP.visible=1==this.state&&this._hasNewTypePoly},I(0,i,"hasNewTypePoly",null,function(t){this._hasNewTypePoly=t,this.updateRP()}),I(0,i,"cfgData",function(){return this._vo},function(t){this._vo=t,this._vo&&(this.txtTip.text=this._vo.openStep+"阶开启",this.txtTip.color="#e1c6bc"),this.updateState()}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){h.superSet(bw,this,"dataSource",t),this._pData=t,this.updateState()}),I(0,i,"rp",function(){return this.imgRP.visible}),I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"state",function(){return this._state},function(t){switch(this._state=t,this._state){case 2:this.txtTip.visible=!1,this.imgBg.visible=!1,this.imgStone.visible=!0;break;case 1:this.txtTip.visible=!1,this.imgBg.skin="modules/pet/stoneBgAdd.png",this.imgBg.visible=!0,this.imgStone.visible=!1;break;case 3:this.txtTip.visible=!0,this.imgBg.skin="modules/pet/stoneBgLock.png",this.imgBg.visible=!0,this.imgStone.visible=!1}this.updateRP()}),e}(bw),lB=function(t){function s(){var t;this.items=null,this.pPet=null,this._hasNewTypePoly=!1,this._curItem=null,s.__super.call(this),this.items=[];for(var e=Ro.polyItemData,i=0;i<s.ITEMPOS.length;i++)(t=new aB).cfgData=e[i],t.pos(s.ITEMPOS[i][0],s.ITEMPOS[i][1]),t.on("click",this,this.onItemClick),this.addChild(t),this.items.push(t);this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(s,"modules.pet.spsoul.view.SPSoulPolyView",Sw);var e=s.prototype;return e.onClick=function(t){switch(t.target){case this.btn:if(this._curItem&&this._curItem.cfgData){var e=this._curItem.cfgData.pos-1;fr.ins().openPolyChangePanel(e)}break;case this.btnCompose:fr.ins().openComposePanel();break;case this._archiveBtn:fr.ins().onOpenArchivePanel();break;case this._getBeadTxt:this.onGetBead()}},e.onItemClick=function(t){var e=t.currentTarget;e&&(this.curItem=e)},e.onDisplay=function(){this.items&&(this.curItem=this.items[0])},e.update=function(){if(this.pPet=Eo.getPetByPetID(Eo.curSelPetID),this.pPet&&this.pPet.bead_info&&this.pPet.bead_info.pet_beads)var t=this.pPet.bead_info.pet_beads;else t=[];var e,i;this._hasNewTypePoly=Oo.checkHasNewTypePoly(t),this.resetItems();var s,n=0;for(var o in t)s=t[o],(e=this.items[s.pos-1])&&(e.dataSource=s,e.hasNewTypePoly=this._hasNewTypePoly),(i=Ro.getBeadVOByType(s.type_id))&&(n+=i.power);this.updatePower(n),this.updateChoose()},e.updateChoose=function(){this.curItem=this.items[Ro.curChoosePolyPos-1]},e.resetItems=function(){var t;for(var e in this.items)(t=this.items[e]).dataSource=null,t.hasNewTypePoly=this._hasNewTypePoly},e.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPower.graphics.drawTexture(e,e.width*s)},e.onGetBead=function(){ba.show(13000043)},I(0,e,"curItem",null,function(t){if(this.imgRP.visible=!1,this._curItem&&(this._curItem.select=!1),this._curItem=t,this._curItem)switch(this.imgRP.visible=this._curItem.rp,this._curItem.cfgData&&(Ro.curChoosePolyPos=this._curItem.cfgData.pos),this._curItem.select=!0,this._curItem.state){case 2:this.btn.label="替换",this.btn.state=0,this.btn.disabled=!1;break;case 1:this.btn.label="装备",this.btn.state=0,this.btn.disabled=!1;break;case 3:this.btn.label="装备",this.btn.state=1,this.btn.disabled=!0}}),_(s,["ITEMPOS",function(){return this.ITEMPOS=[[227,287],[410,287],[95,404],[257,444],[391,444],[553,404],[183,578],[454,578]]}]),s}(),rB=function(t){function e(){this.pPet=null,this.bInfo=null,this.curNeed=0,this.curOwn=0,this.curStep=0,e.__super.call(this),this.htmlScore.style.align="center",this.on("click",this,this.onClick)}w(e,"modules.pet.spsoul.view.SPSoulStepView",xw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnUp:this.curNeed>this.curOwn?ba.show(13000034):fr.ins().toStep(Eo.curSelPetID);break;case this.btnAdd:ba.show(13000034);break;case this.btnGoal:fr.ins().openGoalPanel()}},i.update=function(){if(this.pPet=Eo.getPetByPetID(Eo.curSelPetID),this.imgRP.visible=Oo.checkOneStepRP(this.pPet),this.pPet){this.bInfo=this.pPet.bead_info,this.curStep=this.bInfo?this.bInfo.step:0,this.txtStep.text=this.curStep+"阶",this.imgLogo.skin=Ro.getLogoImg(this.curStep),this.txtTip.text=Ro.getPetLvTip(this.pPet.level),this.curNeed=Ro.getNeedPay(this.curStep),this.curOwn=pe.getScore(22);var t=this.curNeed>this.curOwn?"#fd8e8e":"#ffffff";this.htmlScore.innerHTML=Z.span("灵力:","#ffffff")+Z.span(this.curOwn+"",t)+Z.span("/"+this.curNeed,"#ffffff"),this.btnAdd.x=this.htmlScore.x+(this.htmlScore.contextWidth+this.htmlScore.width)/2+10;var e,i=0,s="",n=Ro.getAttrsByStep(this.curStep);if(this.curStep<=Ro.maxStep)for(var o in n)e=n[o],i+=W.getAttrPower(e[0],e[1]),s+=W.getName(e[0])+"："+e[1]+"\n";if(this.txtAttrCur.text=s,i*=Ro.getPowerExtraCoefficient(this.pPet.level),this.updatePower(Math.floor(i)),s="",n=Ro.getAttrsByStep(this.curStep+1),this.curStep>=Ro.maxStep)this.imgFull.visible=!0,this.btnUp.state=1,this.btnUp.disabled=!0,this.btnUp.label="已满级",this.htmlScore.visible=this.btnAdd.visible=!1;else for(o in this.btnUp.state=0,this.btnUp.disabled=!1,this.btnUp.label="进阶",this.htmlScore.visible=this.btnAdd.visible=!0,this.imgFull.visible=!1,n)e=n[o],s+=W.getName(e[0])+"："+e[1]+"\n";this.txtAttrNext.text=s}},i.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPower.graphics.drawTexture(e,e.width*s)},e}(),hB=function(t){function e(){this.curView=null,this.polyView=null,this.stepView=null,this.curPet=null,e.__super.call(this),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.pet.spsoul.view.SPSoulView",Cw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnPoly:this.chooseView(0);break;case this.btnStep:this.chooseView(1)}},i.chooseView=function(t){switch(this.spView.removeChildren(),t){case 0:this.polyView=this.polyView||new lB,this.curView=this.polyView,this.btnStep.skin="modules/pet/btnUpN.png",this.btnPoly.skin="modules/pet/btnPolyS.png";break;case 1:this.stepView=this.stepView||new rB,this.curView=this.stepView,this.btnStep.skin="modules/pet/btnUpS.png",this.btnPoly.skin="modules/pet/btnPolyN.png"}this.update(),this.spView.addChild(this.curView)},i.update=function(){this.curView&&this.curView.update(),this.updateRP()},i.updateRP=function(){this.curPet=Eo.getPetByPetID(Eo.curSelPetID),this.rpStep.visible=Oo.checkOneStepRP(this.curPet),this.rpPoly.visible=Oo.checkOnePolyRP(this.curPet)},i.onDisplay=function(){this.curView||this.chooseView(1)},e}(),uB=function(t){function e(){this._data=null,this.index=0,e.__super.call(this),this.btn.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.expBox.PetExpBoxInjectItem",t);var i=e.prototype;return i.onUndisplay=function(){Eo.curInjectPetId=0,_t.removeFromTimer(this,this.toAutoInject),this.btn.label="一键注入",this.index=0},i.onClick=function(){"一键注入"==this.btn.label?(Eo.curInjectPetId=this._data.pet_id,mr.ins().toPetBoxFillExp(this._data.pet_id),_t.addToTimer(this,this.toAutoInject),this.btn.label="停止"):"停止"==this.btn.label&&(this.btn.label="一键注入",this.onUndisplay(),_t.removeFromTimer(this,this.toAutoInject))},i.toAutoInject=function(){this.index++,0<Eo.curInjectPetId?Eo.curInjectPetId==this._data.pet_id&&this.index%2==0&&mr.ins().toPetBoxFillExp(this._data.pet_id):this.onUndisplay()},i.update=function(){if(Eo.checkExpBoxIsFull()?this.imgRP.visible=!0:this.imgRP.visible=!1,this._data){this.txtName.text=this._data.pet_name,this.txtLv.text="LV."+this._data.level,this.imgIcon.skin="com/petHead/"+this._data.skin_id+".png";var t=Math.floor(this._data.type_id%1e5/1e4);switch(this.txtName.color=U.getColorDark(t),this.imgBg.skin="com/ui/goodsBg"+t+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this._data.state){case 1:this.txtState.text="战",this.imgState.skin="modules/pet/bot_1.png";break;case 2:this.txtState.text="附",this.imgState.skin="modules/pet/bot_3.png";break;case 3:this.txtState.text="休",this.imgState.skin="modules/pet/bot_2.png";break;case 0:this.txtState.text="异",this.imgState.skin="modules/pet/bot_2.png"}100==this._data.level?(this.btn.disabled=!0,this.btn.label="已满级",this.txtBar.text=this._data.next_level_exp+"/"+this._data.next_level_exp,this.imgBar.width=300,this.imgRP.visible=!1):(this.btn.disabled=!1,0<Eo.curInjectPetId&&Eo.curInjectPetId==this._data.pet_id?this.btn.label="停止":this.btn.label="一键注入",this.txtBar.text=this._data.exp+"/"+this._data.next_level_exp,this.imgBar.width=this._data.exp/this._data.next_level_exp*300)}else this.txtName.text="",this.txtLv.text="",this.imgState.skin=null,this.txtState.text=""},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data},function(t){this._data=t}),e}(Pw),cB=function(t){function e(){this.items=null,this.curY=0,this.effSucc=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick),this.imgGoodsIcon.on("click",this,this.onClickGoods),this.on("display",this,this.onDisplay),Nt.register("RP_PET_EXP_BOX_CAN_UP",this.btnUp)}w(e,"modules.pet.view.expBox.PetExpBoxPanel",Tw);var i=e.prototype;return i.onDisplay=function(){T.register("ROLE_SCORE_CHANGE",this,this.onRoleScoreChange),T.register("BAGDATA_CHANGE",this,this.bagDataChange),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onRoleScoreChange),T.remove("BAGDATA_CHANGE",this,this.bagDataChange)},i.bagDataChange=function(){var t=Eo.getExpBoxStepVO(Eo.petExpBoxLv);t&&this.updateCostGoodsInfo(t)},i.onRoleScoreChange=function(){var t=Eo.petExpBoxLv,e=Eo.getExpBoxStepVO(t);if(e){var i=pe.getScore(16);this.txtExp.text=i+"/"+e.maxExp}},i.onClickGoods=function(t){var e=Eo.petExpBoxLv,i=Eo.getExpBoxStepVO(e);if(i){var s=ur.getItem(i.costGoodsId);if(s){var n="";n=ur.isEquip(s.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",s&&(s.tempNum=i.costGoodsNum,Ae.show(s,n))}}},i.onClick=function(t){switch(t.target){case this.txtLink:mr.ins().openExpBoxUpDescView();break;case this.btnUp:pt.send(37,2,"仙宠经验瓶-提升");var e=Eo.getExpBoxStepVO(Eo.petExpBoxLv);if(e)xo.getGoodsNumByType(xo.GOODS_ID,e.costGoodsId)>=e.costGoodsNum?mr.ins().toPetBoxLevelUp():ba.show(e.costGoodsId);break;case this.btnClose:case this.btnClose2:this.closeWindow()}},i.updateItems=function(){var t;this.curY=0,this.items=this.items||[];for(var e=Eo.pets.length,i=Math.max(this.items.length,e),s=0;s<i;s++)this.items[s]=this.items[s]||new uB,(t=this.items[s]).dataSource=Eo.pets[s],e<=s?t.removeSelf():null==t.parent&&this.list.addChild(t),t.y=this.curY,this.curY+=t.height+5;this.list.refresh()},i.updateCostGoodsInfo=function(t){xo.getGoodsNumByType(xo.GOODS_ID,t.costGoodsId)<t.costGoodsNum?this.imgGoodsBg.gray=this.imgGoodsIcon.gray=!0:this.imgGoodsBg.gray=this.imgGoodsIcon.gray=!1},i.update=function(){this.updateItems();var t=Eo.petExpBoxLv,e=Eo.getExpBoxStepVO(t);if(e){this.txtStep.text="仙宠经验瓶"+t+"阶";var i=pe.getScore(16);if(this.txtExp.text=i+"/"+e.maxExp,25==t)this.imgGoodsBg.visible=this.imgGoodsIcon.visible=this.txtGoodsNum.visible=!1,this.txtCostDesc.visible=!1,this.btnUp.disabled=!0,this.btnUp.label="已满级";else{this.txtCostDesc.visible=!0,this.imgGoodsBg.visible=this.imgGoodsIcon.visible=this.txtGoodsNum.visible=!0,this.btnUp.disabled=!1,this.btnUp.label="提升",this.txtGoodsNum.text=e.costGoodsNum+"";var s=ur.getItem(e.costGoodsId);s&&(this.imgGoodsBg.skin="com/ui/goodsBg"+s.color+".png",this.imgGoodsIcon.skin=s.realMaxico,this.updateCostGoodsInfo(e))}}},i.showSucc=function(){this.effSucc||(this.effSucc=this.effSucc||b.getOne(),this.effSucc.pos(542,210),this.addChild(this.effSucc)),this.effSucc.loadAndPlay("moduleEffect/refineQualitySuss")},e}(),dB=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5")}return w(e,"modules.pet.view.expBox.PetExpBoxUpDescView",kw),e.prototype.update=function(){var t=Eo.petExpBoxLv,e=Eo.getExpBoxStepVO(t);if(e)if(this.txtCurStep.text=t+"阶",this.txtCurMax.text=e.maxExp+"",25==t)this.spNext.visible=!1,this.txtFull.visible=!0;else{this.spNext.visible=!0,this.txtFull.visible=!1;var i=t+1,s=Eo.getExpBoxStepVO(i);s&&(this.txtNextStep.text=i+"阶",this.txtNextMax.text=s.maxExp+"")}},e}(),pB=function(t){function i(){var t;this.HEART_VAL=[1,15,32,65,130,255,502],this.NEED_VAL=[0,20,40,80,160,320,640],this.itemsArr=null,this.posArr=[0,549,0,412,0,275,0,137,0,0,157,0,315,0,472,0,472,137,472,275,472,412,472,549],this._LastData=null,this.goodImages=null,this.index=NaN,this.arr=[17,-25,12,-13,8,-9,5,-6,0],this.flyGoods=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnClose.on("click",this,this.closeWindow),this.on("click",this,this.onClick),this.itemsArr=[];for(var e=0;e<12;e++)(t=new Ah(91,91,!1,!0,!0)).pos(this.posArr[2*e],this.posArr[2*e+1]),this.spGoods.addChild(t),this.itemsArr.push(t);this.on("undisplay",this,this.clearTween),this.checkBox.toggle=!0,this.pan.hScrollBarSkin="",this.goodImages=[],this.txtSell.underline=!0}w(i,"modules.pet.view.GodPetView",Aw);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose1:this.closeWindow();break;case this.btnGet:if(this._LastData)if(0<this.NEED_VAL[this._LastData.open_times])if(pe.gold>=this.NEED_VAL[this._LastData.open_times]){var e="是否花费"+Z.span(this.NEED_VAL[this._LastData.open_times]+"元宝","#fbd815")+"领取一个神宠宝盒随机奖励？";Lo.showSecAlert(e,this,this.toGet,[this._LastData],"godPet")}else Jt.addTip("元宝不足");else this.toGet(this._LastData);else Jt.addTip("无效的道具");break;case this.checkBox:Eo.godPetAlert=!this.checkBox.selected,T.dispatch("UPDATE_BAGRP");break;case this.spCenter:var i=ur.getItem(13000018);Ae.show(i,"BASE_GOODS_TIP");break;case this.txtSell:if(this._LastData){var s=new Ee;s.msg="是否丢弃该宝盒？",s.yesCaller=this,s.yesLabel="确定",s.yesArgs=[this._LastData],s.yesFun=this.selGodPet,s.key="sellGodPet",EF.showVO(s)}else Jt.addTip("无效的道具")}},e.selGodPet=function(t){mr.ins().toRoleRandomGift(t.good_id,2)},e.toGet=function(t){this.updateGoods(t),mr.ins().toRoleRandomGift(t.good_id,1)},e.updateGoods=function(t){for(var e,i,s=1;s<13;s++){e=this.itemsArr[s-1];var n,o=!1;for(var a in t.show_list)if((n=t.show_list[a]).id==s){(i=new Object).className="p_kv",i.id=n.type,i.val=n.val,e.dataSource=i,o=!0,e.parent||this.spGoods.addChild(e);break}!o&&e.parent&&e.removeSelf()}var l,r=[];for(var h in t.show_list)12<(l=t.show_list[h]).id&&r.push(l);if(0<r.length){var u,c;for(r.sort(this.sortFun),this.txtSub1.visible=this.txtSub2.visible=this.txtSub3.visible=!1,this.pan.visible=this.txtSub4.visible=!0;this.goodImages.length<r.length;)u=new fh(null,!1,!0,91,!0),this.pan.addChild(u),this.goodImages.push(u);for(;this.goodImages.length>r.length;)this.goodImages[this.goodImages.length-1].removeSelf(),this.goodImages.pop();for(var d=0;d<r.length;d++)c=r[d],(u=this.goodImages[d]).pos(100*(r.length-d)-90,10),u.data=ur.getItem(c.type),u.num=c.val}else for(this.txtSub1.visible=this.txtSub2.visible=this.txtSub3.visible=this.txtSub4.visible=!0,this.pan.visible=this.txtSub4.visible=!1;this.goodImages&&0<this.goodImages.length;)this.goodImages[this.goodImages.length-1].removeSelf(),this.goodImages.pop()},e.update=function(t){t&&this.updateGoods(t)},e.sortFun=function(t,e){return t.id<e.id?-1:1},e.shark=function(){if(this.index<this.arr.length){var t=19+this.arr[this.index++];ie.to(this.spGoods,{x:t},80,null,Q.create(this,this.shark,null,!0))}else this.getGoods()},e.getGoods=function(){var t=this._LastData.this_get[0].id-1,e=this.itemsArr[t],i=e.getItemVO(),s=e.num;e.removeSelf(),this.flyGoods?this.flyGoods.data=i:this.flyGoods=new fh(i,!1,!0,91,!0),this.flyGoods.num=s,this.flyGoods.pos(e.x+19,e.y+104),this.addChild(this.flyGoods),ie.to(this.flyGoods,{x:104,y:918},1e3,A.elasticOut,Q.create(this,this.completeUpdate,[this._LastData],!0),0,!0),this.pan.scrollTo(0),this.txtSub1.visible=this.txtSub2.visible=this.txtSub3.visible=this.txtSub4.visible=!1,this.pan.visible=this.txtSub4.visible=!0;var n,o=[];for(var a in this._LastData.show_list)12<(n=this._LastData.show_list[a]).id&&o.push(n);if(1<o.length)for(var l=this.goodImages.length,r=0;r<l;r++)this.goodImages[r]&&this.goodImages[r].parent&&ie.to(this.goodImages[r],{x:100*(l-r)+10},800,A.elasticOut,null,0,!0)},e.updateText=function(t){0==t.open_times?this.btnGet.label="免费领取":this.btnGet.label="领取",this.btnGet.disabled=7==t.open_times,7==t.open_times?this.txtNeed.visible=this.txtNow.visible=this.txt1.visible=this.txt2.visible=!1:(this.txtNeed.visible=this.txtNow.visible=this.txt1.visible=this.txt2.visible=!0,this.txtNow.text=""+this.HEART_VAL[t.open_times],this.txtNeed.text=this.NEED_VAL[t.open_times]+"元宝"),this.txtNum.text=t.wish_val+"/1000",this.txtTime.text="领取次数："+t.open_times+"/7",this.txtNow.text=""+this.HEART_VAL[t.open_times],this.txtNeed.text=this.NEED_VAL[t.open_times]+"元宝",this.txtTime.x=(691-this.txtTime.textWidth)/2},e.completeUpdate=function(t){this.flyGoods&&this.flyGoods.parent&&this.flyGoods.removeSelf(),this.update(t)},e.clearTween=function(){ie.clearAll(this.spGoods),this.spGoods.x=19},I(0,e,"data",null,function(t){this._LastData=t,this.updateText(t),t&&(0==t.op_type?this.update(t):(this.index=0,this.shark()))}),i}(),mB=function(t){function e(){this._notOpen=!1,this._itemGray=!1,this._data,e.__super.call(this)}w(e,"modules.pet.view.PetSkillItem",Ew);var i=e.prototype;return I(0,i,"itemGray",function(){return this._itemGray},function(t){this._itemGray=t,this.imgGray.visible=t}),I(0,i,"data",function(){return this._data},function(t){this._data=t,this.notOpen=!1,this.itemGray=!1,this.txtSub.text="",this._data?(this.imgBg.skin="com/ui/goodsBgs1.png",this.imgSkill.skin="modules/pet/skill/"+t.type_id+".png",this.txtLv.text=t.skill_level+"",this.imgSuo.visible=2==this._data.skill_state):(this.sel=!1,this.imgBg.skin="com/ui/goodsBgs1.png",this.imgSkill.skin=null,this.txtLv.text="",this.imgSuo.visible=!1)}),I(0,i,"redPoint",function(){return this.imgRp.visible},function(t){this.imgRp.visible=t}),I(0,i,"notOpen",function(){return this._notOpen},function(t){this._notOpen=t,this.imgNotOpen.visible=t}),I(0,i,"sel",function(){return e._sel},function(t){e._sel=t,this.imgSel.visible=t}),e._sel=!1,e}(),fB=function(t){function s(){var t;this.state=0,this.titleArr=["常规属性","特殊属性"],this.starArr=null,this.bar1=null,this.infoNameArr=null,this.infoAttrArr=null,this.curVO=null,s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnBack.on("click",this,this.closeWindow),this.btnChange.on("click",this,this.onChangeState),this.btnL.on("click",this,this.onChangeRoleL),this.btnR.on("click",this,this.onChangeRoleR),this.starArr=[];for(var e=0;e<5;e++)(t=new et).x=38*e+301,t.y=89,this.addChild(t),this.starArr.push(t);var i=new et("com/ui/barBg2.png");i.pos(0,0),i.sizeGrid="5,5,5,5,0",i.width=200,this.bar1=new At,this.bar1.bar.skin="com/ui/bar2.png",this.bar1.sizeGrid="5,5,5,5,0",this.bar1.width=198,this.bar1.pos(1,1),this.spBar.addChild(i),this.spBar.addChild(this.bar1)}w(s,"modules.pet.view.PetAttrView",Rw);var e=s.prototype;return e.onChangeRoleL=function(){if(this.curVO){var t=Eo.pets.indexOf(this.curVO);for(--t<0&&(t=Eo.pets.length-1);null==Eo.pets[t];)--t;this.update(Eo.pets[t])}},e.onChangeRoleR=function(){if(this.curVO){var t=Eo.pets.indexOf(this.curVO);for(++t>=Eo.pets.length&&(t=0);null==Eo.pets[t];)++t;this.update(Eo.pets[t])}},e.onChangeState=function(){this.state=1-this.state,this.update()},e.update=function(t){t&&(this.curVO=t),this.infoNameArr=this.infoNameArr||[],this.infoAttrArr=this.infoAttrArr||[],this.txtTitle.text=this.titleArr[this.state],this.btnChange.label=this.titleArr[1-this.state],this.imgPet.skin="com/petHead/"+this.curVO.skin_id+".png";var e=Math.floor(this.curVO.type_id%1e5/1e4);this.imgBg.skin="com/ui/goodsBg"+e+".png",this.txtLv.text="Lv."+this.curVO.level;var i=this.curVO.aptitude%1e5;this.txtZZ.text=i+"（"+Eo.getPetZZ(i)+"）",this.txtZZ.color=Eo.getPetZZCol(i),this.txtBase.text=this.curVO.property+"（满"+Ao.proArrs[e-1]+"）",this.txtInit.text=this.curVO.init_property+"",this.txtName.text=this.curVO.pet_name,this.txtInit.color=this.txtBase.color=this.txtName.color=U.getColorDark(e),this.txtPro.x=this.spBar.x=this.txtLv.x+this.txtLv.textWidth+10,this.bar1.value=this.curVO.exp/this.curVO.next_level_exp,this.txtPro.text=this.curVO.exp+"/"+this.curVO.next_level_exp;for(var s=0;s<5;s++)this.starArr[s].skin=s<e-1?"com/ui/star_3.png":"";0==this.state?(this.infoNameArr[1]="攻    击：",this.infoAttrArr[1]=1==this.curVO.attack_type?""+this.curVO.phy_attack:""+this.curVO.magic_attack,this.infoNameArr[2]="生    命：",this.infoAttrArr[2]=""+this.curVO.max_hp,this.infoNameArr[3]="物    防：",this.infoAttrArr[3]=""+this.curVO.phy_defence,this.infoNameArr[4]="法    防：",this.infoAttrArr[4]=""+this.curVO.magic_defence,this.infoNameArr[5]="暴    击：",this.infoAttrArr[5]=this.curVO.double_attack/100+"％",this.infoNameArr[6]="韧    性：",this.infoAttrArr[6]=this.curVO.double_attack_anti/100+"％",this.infoNameArr[7]="伤害加成：",1==this.curVO.attack_type?this.infoAttrArr[7]=this.curVO.phy_hurt_rate/100+"％":this.infoAttrArr[7]=this.curVO.magic_hurt_rate/100+"％",this.infoNameArr[8]="伤害减免：",this.infoAttrArr[8]=this.curVO.phy_hurt_anti/100+"％"):(this.infoNameArr[1]="火    攻：",this.infoAttrArr[1]=""+this.curVO.burning,this.infoNameArr[2]="火    抗：",this.infoAttrArr[2]=""+this.curVO.burning_anti,this.infoNameArr[3]="冰    攻：",this.infoAttrArr[3]=""+this.curVO.freeze,this.infoNameArr[4]="冰    抗：",this.infoAttrArr[4]=""+this.curVO.freeze_anti,this.infoNameArr[5]="毒    攻：",this.infoAttrArr[5]=""+this.curVO.poison,this.infoNameArr[6]="毒    抗：",this.infoAttrArr[6]=""+this.curVO.poison_anti,this.infoNameArr[7]="雷    攻：",this.infoAttrArr[7]=""+this.curVO.dizzy,this.infoNameArr[8]="雷    抗：",this.infoAttrArr[8]=""+this.curVO.dizzy_anti);for(var n=1;n<9;n++)this["txt"+n].text=this.infoNameArr[n],this["input"+n].text=this.infoAttrArr[n]},s.ins=function(){return s.instance=s.instance||new s},s.instance=null,s}(),_B=function(t){function e(){this._data=null,this.needGold=5,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.pet.view.PetChangeNameView",Ow);var i=e.prototype;return i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,null,!1),this.parent&&(this.input.focus=!0,null!=this._data&&(this.input.text=this._data.pet_name))},i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btnSave:if(pe.gold>=this.needGold)if(""==this.input.text||this.input.text==this._data.pet_name)Jt.addTip("请先修改仙宠名称");else if(j.checkHtmlStrRule(this.input.text)){var e=new Ee;e.msg="是否花费"+Z.span("5元宝","#F7EF5F")+"修改仙宠名称为"+Z.span(this.input.text,"#ffffff"),e.yesCaller=this,e.yesFun=this.toChangeName,EF.showVO(e)}else Jt.addTip("含非法字符");else Jt.addTip("元宝不足")}},i.toChangeName=function(){mr.ins().toChangePetName(this._data.pet_id,this.input.text)},I(0,i,"data",null,function(t){this._data=t}),e}(),gB=function(t){function i(){var t;this.skillItems=null,this._skillIndex=0,this.clip=null,this.selPPet=null,i.__super.call(this),this.on("click",this,this.onClick),this.txtRelease.underline=this.txtAttr.underline=!0,this.clip=b.getOne(),this.spRole.addChild(this.clip),Nt.register("RP_PET_LEVEL_UP",this.imgTrain),Nt.register("RP_PET_EXP_BOX_IS_FULL",this.imgTrain),Nt.register("RP_PET_EXP_BOX_CAN_UP",this.imgTrain),Nt.register("RP_PET_DEVOTE",this.imgDevote),this.on("display",this,this.onDisplay),this.skillItems=this.skillItems||[];for(var e=0;e<18;e++)(t=new mB).scale(.7,.7),t.pos(64+e%9*70,70*Math.floor(e/9)+715),this.addChild(t),this.skillItems.push(t);this.html.style.valign="top",this.html.style.align="center"}w(i,"modules.pet.view.PetDescView",Lw);var e=i.prototype;return e.checkBtnVisible=function(){this.selPPet?(this.btnRight.visible=this.selPPet.skill_info&&this.selPPet.skill_info.pet_skills&&this.selPPet.skill_info.pet_skills.length>18*(this._skillIndex+1),this.btnLeft.visible=0<this._skillIndex):this.btnLeft.visible=this.btnRight.visible=!1},e.skillSort=function(t,e){return t.index<e.index?-1:1},e.updatePetSkill=function(){if(this.selPPet){var t=this.selPPet.skill_info;if(t&&t.pet_skills){t.pet_skills.sort(this.skillSort);for(var e=18*this.skillIndex;e<18*(this.skillIndex+1);e++)e<t.pet_skills.length?this.skillItems[e%18].data=t.pet_skills[e]:this.skillItems[e%18].data=null}}else for(e=0;e<18;e++)this.skillItems[e].data=null},e.onDisplay=function(){this.selPPet&&this.updatePet(this.selPPet.skin_id),go.checkMission(10080,1)&&1==Eo.isHasFreePet()&&LD.showStep(LD.PET_FIGHT_BTN,this.btnFight)},e.onClick=function(t){switch(t.target){case this.imgFuse:T.dispatch("PET_OPEN_FUSE_PANEL");break;case this.imgTrain:T.dispatch("PET_OPEN_TRAIN_PANEL");break;case this.imgDevote:T.dispatch("PET_OPEN_DEVOTE_PANEL");break;case this.imgRPSet:T.dispatch("PET_OPEN_RPSET_VIEW",this.selPPet);break;case this.imgBook:T.dispatch("PET_OPEN_BOOKVIEW");break;case this.btnFight:if(!this.selPPet)return;2==this.selPPet.state?Jt.addTip("请先取消仙宠附身"):1==this.selPPet.state?mr.ins().toPetFigth(this.selPPet.pet_id,2):mr.ins().toPetFigth(this.selPPet.pet_id,1);break;case this.txtRelease:mr.ins().disCardPet(this.selPPet);break;case this.txtAttr:fB.ins().update(this.selPPet),fB.ins().btnL.visible=fB.ins().btnR.visible=!0,null==fB.ins().parent&&fB.ins().openWindow();break;case this.imgChangeName:T.dispatch("PET_OPEN_CHANGENAME_VIEW",this.selPPet);break;case this.btnLeft:this.skillIndex=this.skillIndex-1;break;case this.btnRight:this.skillIndex=this.skillIndex+1;break;default:t.target instanceof modules.pet.view.PetSkillItem&&null!=t.target.data&&Ae.show(t.target.data,"PETFUSESKILL_TIP")}},e.updatePet=function(t){this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0),this.clip.scale(_e.scale,_e.scale)},e.update=function(){if(Eo.pets){if(0<Eo.pets.length&&(this.selPPet=Eo.getPetByPetID(Eo.curSelPetID),this.selPPet)){var t=this.selPPet.aptitude%1e5;this.html.innerHTML=Z.span("资质：","#ffffff")+Z.span(t+"（"+Eo.getPetZZ(t)+"）",Eo.getPetZZCol(t)),this.txtName.text="Lv."+this.selPPet.level+"  "+this.selPPet.pet_name,this.imgType.skin="modules/pet/icon"+this.selPPet.attack_type+".png";var e,i=this.selPPet.power,s=k.numToTexture(i,"com/ui/powerNum");this.spPower.graphics.clear();for(var n=0;n<s.length;n++)e=s[n],this.spPower.graphics.drawTexture(e,e.width*n);this.updatePet(this.selPPet.skin_id),this.btnFight.label=1==this.selPPet.state?"休息":"出战",this.imgChangeName.x=this.txtName.x+this.txtName.textWidth+15,this.selPPet.skill_info&&this.selPPet.skill_info.pet_skills.length>18*this.skillIndex?this.skillIndex=this.skillIndex:this.skillIndex=0}}else mr.ins().toPetInfo()},I(0,e,"skillIndex",function(){return this._skillIndex},function(t){t<0?Jt.addTip("已经是第一页了"):0==t?(this._skillIndex=0,this.updatePetSkill(),this.checkBtnVisible()):this.selPPet&&this.selPPet.skill_info&&this.selPPet.skill_info.pet_skills&&this.selPPet.skill_info.pet_skills.length>18*t?(this._skillIndex=t,this.updatePetSkill(),this.checkBtnVisible()):Jt.addTip("没有更多技能了哦")}),i}(),yB=function(t){function e(){this._data=null,this.putWhere=NaN,this.hasOpen=!1,this._select=!1,e.__super.call(this),this.txtNotOpen.align="center"}w(e,"modules.pet.view.PetDevoteItem",Dw);var i=e.prototype;return I(0,i,"select",null,function(t){this._select!=t&&(this._select=t,this.imgBg.skin=t?"modules/pet/hasDe.png":"modules/pet/notDe.png")}),I(0,i,"data",function(){return this._data},function(t){this._data=t,pe.myEquipLevel>=Ao.lvArrs[this.putWhere]?(this.txtNotOpen.text="",this.txtNotOpen.visible=!1,this.hasOpen=!0):(100<Ao.lvArrs[this.putWhere]?this.txtNotOpen.text=(Ao.lvArrs[this.putWhere]-100)/10+"转\n开启":this.txtNotOpen.text=Ao.lvArrs[this.putWhere]+"级\n开启",this.txtNotOpen.visible=!0,this.hasOpen=!1),this._data?(this.imgPet.skin="com/petHead/"+this._data.skin_id+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this.txtLv.text=this._data.level+""):(this.imgPet.skin="",this.imgType.skin="",this.txtLv.text="",this._select=!1),this._select?this.imgBg.skin="modules/pet/hasDe.png":this.imgBg.skin="modules/pet/notDe.png"}),e}(),vB=function(t){function i(){var t;this.completeHanlder=null,this.repeatX=4,this.posArr=[84,389,282,213,490,389,282,564],this.itemArr=null,this._selPetID=NaN,this.selPetItem=null,this.alert=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.list.itemRender=uV,this.list.selectHandler=new Q(this,this.onSelectPet),this.list.renderHandler=new Q(this,this.onRenderPet),this.list.repeatX=this.repeatX,this.list.selectEnable=!0,this.itemArr=[];for(var e=0;e<4;e++)(t=new yB).pos(this.posArr[2*e],this.posArr[2*e+1]),t.putWhere=e,t.on("click",this,this.onItemClick),this.addChild(t),this.itemArr.push(t);this.selPetItem=new NB,this.selPetItem.pos(56,761),this.addChild(this.selPetItem)}w(i,"modules.pet.view.PetDevoteView",Nw);var e=i.prototype;return e.onDisplay=function(){T.register("REGROWLV_UP",this,this.onRegrowUp),this.on("undisplay",this,this.unDisplay)},e.unDisplay=function(){T.remove("REGROWLV_UP",this,this.onRegrowUp)},e.onRegrowUp=function(){this.imgRp.visible=Nt.checkModulesShowing("RP_PET_DEVOTE")&&this.selPet&&3==this.selPet.state},e.onRenderPet=function(t,e){var i=t;i.data.pet_id==this.selPet.pet_id&&(i.select=!0),1!=i.data.state&&2!=i.data.state&&Nt.checkModulesShowing("RP_PET_DEVOTE")?i.redPoint=!0:i.redPoint=!1},e.onItemClick=function(t){var e=t.currentTarget;e.hasOpen?null==e.data?Jt.addTip("请添加附身仙宠"):this.selPet=e.data:Jt.addTip("附身格子未开启")},e.onSelectPet=function(t){var e=this.list.getCell(t);this.selPet=e.data},e.update=function(){this.updateList(),this.updatePet(),this.updateTotalAttr()},e.updateDownAttr=function(){if(Eo.devoteInfo){var t,e,i=Eo.devoteInfo.devote_props,s=0,n=0,o=0,a=0;for(e in i)switch((t=i[e]).prop_code){case 13:o+=t.prop_value;break;case 14:a+=t.prop_value;break;case 15:case 16:n=t.prop_value;break;case 11:s+=t.prop_value}var l=W.getAttrStrByNum(11,s,"","  +","\n")+W.getAttrStrByNum(49,n,"","  +","\n")+W.getAttrStrByNum(13,o,"","  +","\n")+W.getAttrStrByNum(14,a,"","  +");this.txtAttrTotal.text=l}else mr.ins().toPetDevoteInfo()},e.updateTotalAttr=function(){var t,e,i=0;for(var s in Eo.pets)2==(e=Eo.pets[s]).state&&((t=this.itemArr[i++]).data=e).pet_id==this.selPet.pet_id&&(t.select=!0);for(var n=i;n<4;n++)(t=this.itemArr[n]).data=null;this.updateDownAttr()},e.updateList=function(){this.list.dataSource=Eo.pets,this.checkBtnVisible();for(var t=0;t<this.list.content._childs.length;t++)this.list.content._childs[t].y=this.list.height-this.list.content._childs[t].height},e.updatePet=function(){if(this.selPet){this.btn.label=2==this.selPet.state?"取消附身":"附身",this.selPetItem.visible=this.txtAttr.visible=this.txtZZZ.visible=this.txtChangee.visible=this.txtZZ.visible=this.txtChange.visible=!0,this.selPetItem.dataSource=this.selPet;var t="生命  +"+this.selPet.max_hp+"\n";t+="攻击  +"+(1==this.selPet.attack_type?this.selPet.phy_attack:this.selPet.magic_attack)+"\n",t+="物防  +"+this.selPet.phy_defence+"\n",t+="法防  +"+this.selPet.magic_defence+"\n",this.txtAttr.text=t;var e=this.selPet.aptitude%1e5;this.txtZZ.text=e+"",this.txtChange.text=e/100+"%"}else this.selPetItem.visible=this.txtAttr.visible=this.txtZZZ.visible=this.txtChangee.visible=this.txtZZ.visible=this.txtChange.visible=!1;this.onRegrowUp()},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},e.onClick=function(t){switch(t.target){case this.btn:if(!this.selPet)return;if(2==this.selPet.state)mr.ins().toPetDevote(this.selPet.pet_id,2);else{for(var e=pe.myEquipLevel,i=0;i<4&&!(Ao.lvArrs[i]>e);i++);if(Eo.devoteInfo&&Eo.devoteInfo.devote_num>=i)return void Jt.addTip("仙宠附身已达到最大数量");1==this.selPet.state?(this.alert=this.alert||new Ee,this.alert.msg="该仙宠正在出战中，附身后会取消出战，是否进行附身？",this.alert.yesCaller=mr.ins(),this.alert.yesFun=mr.ins().toPetDevote,this.alert.yesArgs=[this.selPet.pet_id,1],EF.showVO(this.alert)):mr.ins().toPetDevote(this.selPet.pet_id,1)}break;case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight()}},e.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},e.devoteBack=function(t){if(1==t&&Eo.devoteInfo){for(var e=0;this.itemArr[e].data;)++e;if(e<4){var i=this.itemArr[Eo.devoteInfo.devote_num].x+50,s=this.itemArr[Eo.devoteInfo.devote_num].y+50,n=ih.show("unit/effect/func2",106,811,this);n.rotation=90+180*Math.atan2(811-s,106-i)/Math.PI;var o=1.2*Math.sqrt((811-s)*(811-s)+(106-i)*(106-i));ie.to(n,{x:i,y:s},o,null,Q.create(this,this.update,null,!0))}else this.update()}else this.update()},I(0,e,"selPet",function(){var t=Eo.getPetByPetID(this._selPetID);return t||(Eo.pets&&0<Eo.pets.length?(this.selPet=Eo.pets[0],Eo.pets[0]):null)},function(t){var e,i,s,n;for(i in this.itemArr)(e=this.itemArr[i]).select=t==e.data;for(n in this._selPetID=t.pet_id,this.list.cells)(s=this.list.cells[n]).select=s.data==t;this.updatePet()}),I(0,e,"endFirstIndex",function(){return Eo.pets?(Math.ceil(Eo.pets.length/this.list.repeatX)-1)*this.list.repeatX:0}),i}(),IB=function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.pet.view.PetExploreSelItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this._data){this.select=!1,this.imgPet.skin="com/petHead/"+this._data.skin_id+".png";var e=Math.floor(this._data.type_id%1e5/1e4);this.imgBg.skin="com/ui/goodsBg"+e+".png",this.txtLv.text="Lv."+this._data.level,this.txtName.text=this._data.pet_name,this.txtName.color=U.getColorDark(e)}}),I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"data",function(){return this._data}),I(0,i,"maxPower",null,function(t){this.imgMax.visible=t}),e}(Vw),wB=function(t){function s(){this.selectXs=[39,259,479],this.repeatX=4,this.curPet=null,this._selPetID=NaN,this.completeHanlder=null,this._arr=null,this.maxPowerPet=0,this._selOutHours,s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.pan.itemRender=IB,this.pan.selectEnable=!0,this.pan.selectHandler=new Q(this,this.selectPet),this.pan.renderHandler=new Q(this,this.onRenderPet),this.pan.repeatX=this.repeatX,this.on("click",this,this.onClick);for(var t,e=qo.getOutTypeVOS(),i=0;i<e.length;i++)t=e[i],this["txtName"+i].text=t.name,this["txtHours"+i].text=t.hours+"小时"}w(s,"modules.pet.view.PetExploreSelView",Bw);var e=s.prototype;return e.selectPet=function(t){this.curPet=null,(this.selPetID=0)<this.pan.length&&(this.curPet=this.pan.getItem(t),this.curPet&&(this.selPetID=this.curPet.pet_id)),this.pan.refresh()},e.onRenderPet=function(t,e){var i=t;i.select=i&&i.data&&i.data.pet_id==this._selPetID,i.maxPower=i&&i.data&&i.data.pet_id==this.maxPowerPet},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.pan.startIndex,this.btnRight.visible=this.pan.startIndex<this.endFirstIndex},e.onClick=function(t){switch(t.target){case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.btn:0<this._selPetID&&0<this._selOutHours?(T.dispatch("SEL_EXPLORE_PET",this._selOutHours,this._selPetID),this.closeWindow()):0<this._selPetID?Jt.addTip("请选择探险模式"):0<this._selOutHours?Jt.addTip("请选择出行仙宠"):Jt.addTip("请选择探险模式和出行仙宠");break;case this.img0:this.chooseMode(0);break;case this.img1:this.chooseMode(1);break;case this.img2:this.chooseMode(2)}},e.chooseMode=function(t){this.imgSel.x=this.selectXs[t],this.imgSel.visible=!0,this.selOutHours=qo.getOutTypeVOS()[t].hours},e.turnRight=function(){if(0<this.pan.length){var t=this.pan.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.pan.tweenTo(t,200,this.completeHanlder)}},e.turnLeft=function(){if(0<this.pan.length){var t=this.pan.startIndex-this.pan.repeatX;t=t<0?0:t,this.pan.tweenTo(t,200,this.completeHanlder)}},e.update=function(t){if(this._arr=this._arr||[],this._arr.length=0,Eo.pets){var e,i=0;for(var s in Eo.pets)e=Eo.pets[s],qo.isPetFree(e.pet_id)&&this._arr.push(e),e.power>=i&&(i=e.power,this.maxPowerPet=e.pet_id)}0<this._arr.length?(this.pan.dataSource=this._arr.sort(this.sortPet),this.checkBtnVisible()):(this.pan.dataSource=null,Jt.addTip("当前没有可派遣的仙宠"),this.closeWindow()),this.imgSel.visible=!1,this._selPetID=0,this._selOutHours=0;var n,o,a=qo.getOutTypeVOS(),l=qo.getExploreVO(t.task_id).getMustGet()[0];n=ur.getItem(l.id);for(var r=0;r<3;r++)o=a[r],this["txtGet"+r].text=n.name+"×"+l.val*o.hours,this["txtGet"+r].color=U.getColorDark(n.color)},e.sortPet=function(t,e){return t&&e&&t.power!=e.power?t.power>e.power?-1:1:0},e.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.pan.selectedIndex=0,this.chooseMode(0)},I(0,e,"selPetID",null,function(t){this._selPetID=t}),I(0,e,"endFirstIndex",function(){return this._arr?(Math.ceil(this._arr.length/this.pan.repeatX)-1)*this.pan.repeatX:0}),I(0,e,"selOutHours",null,function(t){this._selOutHours=t}),s}(),bB=function(t){function e(){e.__super.call(this)}return w(e,"modules.pet.view.PetFightUnitName",Mw),e}(),SB=function(t){function e(){this._petID=NaN,this._arr=null,this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.items=[],this.panSkill.vScrollBarSkin="",this.on("click",this,this.onClick),this.txtDesc.style.valign="top",this.txtDesc.style.letterSpacing=2,this.txtDesc.style.leading=20}w(e,"modules.pet.view.PetForgerAlertView",Fw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnNo:case this.btnClose:this.closeWindow();break;case this.btnYes:var e,i=[];for(var s in this._arr)e=this._arr[s],i.push(e.index);mr.ins().toPetSkillFoget(this._petID,i),this.closeWindow()}},i.setData=function(t,e){if(this._petID=t,this._arr=e,this._arr&&0<this._arr.length){for(var i,s=0,n=Math.max(this._arr.length,this.items.length),o=0;o<n;o++)o<this._arr.length?(null==this.items[o]&&(this.items[o]=new FB,this.panSkill.addChild(this.items[o])),(i=this.items[o]).pos(0,150*o),i.data=this._arr[o],s+=this._arr[o].skill_exp):this.items[o]&&this.items[o].parent&&this.items[o].removeSelf();this.txtDesc.innerHTML=Z.font("是否批量遗忘"+this._arr.length+"个仙宠技能，获得仙宠技能经验"+s+"?","#5d3924")}},I(0,i,"uiClass",function(){return"PetForgetAlertView"}),e}(),xB=function(t){function e(){this.items=null,this._petID1=NaN,this._petID2=NaN,this._skinID=NaN,this._attType=NaN,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.items=[],this.panSkill.vScrollBarSkin="",this.on("click",this,this.onClick),this.txtLink.underline=!0}w(e,"modules.pet.view.PetFuseAlertView",Uw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnNo:case this.btnClose:this.closeWindow();break;case this.btnYes:mr.ins().toPetFuse(this._petID1,this._petID2,this._skinID,this._attType),this.closeWindow();break;case this.txtLink:T.dispatch("PET_OPEN_DEPOTE_VIEW"),this.closeWindow()}},i.setData=function(t,e,i,s,n){if(this._petID1=t.pet_id,this._petID2=e.pet_id,this._skinID=i,this._attType=s,n&&0<n.length)for(var o,a=Math.max(n.length,this.items.length),l=0;l<a;l++)l<n.length?(null==this.items[l]&&(this.items[l]=new AB,this.panSkill.addChild(this.items[l])),(o=this.items[l]).pos(l%4*110+20,115*Math.floor(l/4)+10),o.data=n[l],o.skillRe=l%2==0):this.items[l]&&this.items[l].parent&&this.items[l].removeSelf();if(t.state==e.state)2==t.state?this.txtPs.text="注意：当前融合的主副宠均为附身状态":this.txtPs.text="";else{var r="";1==t.state?r="主宠为出战状态":2==t.state?r="主宠为附身状态":!1,1==e.state?""!=r?r+="，副宠为出战状态":r="副宠为出战状态":2==e.state&&(""!=r?r+="，副宠为附身状态":r="副宠为附身状态"),""!=r&&(this.txtPs.text="注意：当前融合的"+r)}},e}(),CB=function(t){function i(){var t;this.starArr=null,this.clip=null,i.__super.call(this),this.clip=b.getOne(),this.spRole.addChild(this.clip),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btn.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow),this.starArr=[];for(var e=0;e<5;e++)(t=new et).x=38*e+171,t.y=629,this.addChild(t),this.starArr.push(t)}return w(i,"modules.pet.view.PetFuseResultView",Gw),i.prototype.update=function(t,e){this.clip.loadAndPlay("unit/monster/"+t.skin_id+"_3","stand",3,!0),this.clip.scale(_e.scale,_e.scale),this.imgType.skin="modules/pet/icon"+t.attack_type+".png",this.txtFuseName.text=t.pet_name,this.txtFuseLv.text="LV."+t.level,this.txtFuseLv.x=340-this.txtFuseName.textWidth/2-this.txtFuseLv.textWidth/2,this.txtFuseName.x=this.txtFuseLv.x+this.txtFuseLv.textWidth+20;var i=Math.floor(t.type_id%1e5/1e4);this.txtFuseName.color=U.getColorLight(i);var s=t.aptitude%1e5;this.txtZZ.text=s+"",this.txtZZ.color=Eo.getPetZZCol(s),this.txtBase.text=t.property+"",this.txtInit.text=t.init_property+"";for(var n=0;n<5;n++)this.starArr[n].skin=n<i-1?"com/ui/star_3.png":"";var o=Eo.getPetByPetID(e);if(o){var a=Math.floor(o.type_id%1e5/1e4);this.gre1.visible=a<i,this.gre1.x=75+38*i;var l=o.aptitude%1e5;this.gre2.visible=l<s,this.gre2.x=this.txtZZ.x+this.txtZZ.textWidth+5,this.gre3.visible=t.init_property>o.init_property,this.gre3.x=this.txtInit.x+this.txtInit.textWidth+5,this.gre4.visible=t.property>o.property,this.gre4.x=this.txtBase.x+this.txtBase.textWidth+5}else this.gre1.visible=this.gre2.visible=this.gre3.visible=this.gre4.visible=!1;var r,h=t.power,u=k.numToTexture(h,"com/ui/powerNum");this.spPower.graphics.clear();for(var c=0;c<u.length;c++)r=u[c],this.spPower.graphics.drawTexture(r,r.width*c)},i}(),PB=function(t){function e(){this.callBackHandler=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtTip.style.align="left",this.txtTip.style.fontSize=26,this.txtTip.style.color="#5d3924",this.txtTip.style.valign="top",this.txtTip.style.leading=12,this.txtTip.innerHTML="你要融合的两只仙宠均为五星仙宠，为了防止误操作，请输入“"+Z.font("YES","#b60202",26)+"”进行确认",this.on("click",this,this.onClick),this.txtInput.on("focus",this,this.onFocus),this.txtInput.maxChars=10,this.on("display",this,this.onDisplay)}w(e,"modules.pet.view.PetFuseSecAlertView",Hw);var i=e.prototype;return i.onDisplay=function(){this.txtInput.text="点击此处输入文字"},i.onFocus=function(t){"点击此处输入文字"==this.txtInput.text&&(this.txtInput.text="")},i.update=function(t){this.callBackHandler=t},i.onClick=function(t){switch(t.target){case this.btnYes:"YES"==this.txtInput.text||"YES"==this.txtInput.text.toUpperCase()?(this.callBackHandler&&this.callBackHandler.run(),this.closeWindow()):Jt.addTip("错误的验证码，融合失败");break;case this.btnClose:case this.btnNo:this.closeWindow()}},e}(),TB=function(t){function i(){var t;this.item=null,this._data=null,this.starArr=null,i.__super.call(this),this.starArr=[];for(var e=0;e<5;e++)(t=new et).x=38*e,this.spStar.addChild(t),this.starArr.push(t);this.item=new NB,this.item.showState=!0,this.item.pos(38,16),this.spCon.addChild(this.item),this.spMask.graphics.drawRect(0,0,640,166,"#000000"),this.spMask.alpha=.5}w(i,"modules.pet.view.PetFuseSelItem",Ww);var e=i.prototype;return e.updateCom=function(t,e,i,s){if(this._data=t,this.item.dataSource=t){this.txtName.text=t.pet_name;var n=Math.floor(t.type_id%1e5/1e4);this.txtName.color=U.getColorLight(n),this.txtName.x=90-this.txtName.textWidth/2;var o=t.aptitude%1e5;this.txtZZ.text=o+"",this.txtZZ.color=Eo.getPetZZCol(o);var a=t.skill_info.pet_skills.length+"";if(this.gre5.visible=!1,s){if(t&&e&&0<e.skill_info.pet_skills.length)for(h in r=!1,e.skill_info.pet_skills){for(u in l=e.skill_info.pet_skills[h],t.skill_info.pet_skills)if(t.skill_info.pet_skills[u].type_id==l.type_id){r=!0;break}if(!r){a+="（新）",this.gre5.visible=!0;break}}}else if(e&&0<t.skill_info.pet_skills.length){var l,r=!1;for(var h in t.skill_info.pet_skills){for(var u in l=t.skill_info.pet_skills[h],e.skill_info.pet_skills)if(e.skill_info.pet_skills[u].type_id==l.type_id){r=!0;break}if(!r){a+="（新）",this.gre5.visible=!0;break}}}this.txtSkill.text=a,this.gre5.visible&&(this.gre5.x=this.txtSkill.x+this.txtSkill.textWidth+5),this.txtBase.text=t.property+"",this.txtInit.text=t.init_property+"",this.txtInit.color=this.txtBase.color=this.txtSkill.color=U.getColorDark(n);for(var c=0;c<5;c++)this.starArr[c].skin=c<n-1?"com/ui/star_3.png":"";if(this.canNotSelect=!1,i&&i.pet_id==t.pet_id?this.select=!0:this.select=!1,e){var d=Math.floor(e.type_id%1e5/1e4);this.gre1.visible=s?n<d:d<n,this.gre1.x=185+38*n;var p=e.aptitude%1e5;this.gre2.visible=s?o<p:p<o,this.gre2.x=this.txtZZ.x+this.txtZZ.textWidth+5,this.gre3.visible=s?t.init_property<e.init_property:t.init_property>e.init_property,this.gre3.x=this.txtInit.x+this.txtInit.textWidth+5,this.gre4.visible=s?t.property<e.property:t.property>e.property,this.gre4.x=this.txtBase.x+this.txtBase.textWidth+5}else this.gre1.visible=this.gre2.visible=this.gre3.visible=this.gre4.visible=!1}else this.txtName.text="",this.txtZZ.text="",this.txtBase.text="",this.txtInit.text="",this.canNotSelect=!1,this.select=!1},I(0,e,"select",function(){return this.imgSel.visible},function(t){this.imgSel.visible=t}),I(0,e,"data",function(){return this._data}),I(0,e,"canNotSelect",null,function(t){this.spMask.visible=t,this.imgExploring.visible=t}),i}(),kB=function(t){function e(){this._opType=NaN,this._compPet=null,this._selPet=null,this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.btnSel.toggle=!0,this.pan.vScrollBarSkin=""}w(e,"modules.pet.view.PetFuseSelView",qw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.btn:for(i in this.items)if((e=this.items[i]).select)return T.dispatch("PET_FUSE_SELECT",this._opType,e.data),void this.closeWindow();Jt.addTip("没有选中仙宠哦");break;case this.btnSel:this.updateList();break;default:var e;if(t.target instanceof modules.pet.view.PetFuseSelItem)for(var i in this.items)(e=this.items[i]).select=e==t.target}},i.updateByDate=function(t,e,i){this._opType=t,this._compPet=e,this._selPet=i,this.updateList()},i.updateList=function(){this.items=this.items||[];var t,e=[];if(Eo.pets)for(var i in Eo.pets)t=Eo.pets[i],(!this.btnSel.selected||1!=t.state&&2!=t.state)&&e.push(t);0==this._opType||e.sort(this.sortSubFun);for(var s=Math.max(e.length,this.items.length),n=0;n<s;n++)n<e.length?(this.items[n]=this.items[n]||new TB,this.items[n].pos(15,15+172*n),this.pan.addChild(this.items[n]),this.items[n].updateCom(e[n],this._compPet,this._selPet,0==this._opType)):this.items[n]&&this.items[n].parent&&this.items[n].removeSelf()},i.sortMainFun=function(t,e){return qo.isPetFree(t.pet_id)==qo.isPetFree(e.pet_id)?t.state==e.state?t.power>e.power?-1:1:t.state<e.state?-1:1:qo.isPetFree(t.pet_id)?-1:1},i.sortSubFun=function(t,e){return qo.isPetFree(t.pet_id)==qo.isPetFree(e.pet_id)?t.state==e.state?t.power>e.power?-1:1:t.state>e.state?-1:1:qo.isPetFree(t.pet_id)?-1:1},e}(),AB=function(t){function e(){this._data=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.pet.view.PetFuseSkillItem",Yw);var i=e.prototype;return i.onClick=function(){this._data&&Ae.show(this._data,"PETFUSESKILL_TIP")},I(0,i,"data",null,function(t){this._data=t,this._data?(this.imgBg.skin="com/ui/goodsBgs1.png",this.imgSkill.skin="modules/pet/skill/"+this._data.type_id+".png",this.txtLv.text=this._data.skill_level+""):(this.imgBg.skin="com/ui/goodsBgs1.png",this.imgSkill.skin=null,this.txtLv.text="",this.skillNew=this.skillRe=!1)}),I(0,i,"skillNew",null,function(t){this.imgNew.visible=t,this.imgNew.skin="modules/pet/bot_1.png",this.txt.text="新"}),I(0,i,"skillRe",null,function(t){this.imgNew.visible=t,this.imgNew.skin="modules/pet/bot_3.png",this.txt.text="重"}),e}(),EB=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5")}return w(e,"modules.pet.view.PetFuseTipsPanel",Xw),e}(),RB=function(t){function s(){var t,e;this.mainItem=null,this.subItem=null,this.fuseItem=null,this.nowHandlerItem=null,this._mainP=null,this._subP=null,this._fuseP=null,this.skillItems=null,this.starArr=null,this.fuseAlertView=null,this.fuseAlertSecView=null,this.nowSkillIndex=NaN,this.newArr=null,this.hadArr=null,this.normalArr=null,this.totalArr=null,this.subTypeIDArr=null,this.indexArr=null,s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.mainItem=new NB,this.mainItem.showState=!0,this.subItem=new NB,this.subItem.showState=!0,this.fuseItem=new NB,this.mainItem.pos(83,16),this.subItem.pos(83,16),this.fuseItem.pos(28,39),this.imgMain.addChild(this.mainItem),this.imgSub.addChild(this.subItem),this.spHas.addChild(this.fuseItem),this.mainItem.mouseEnabled=this.subItem.mouseEnabled=this.fuseItem.mouseEnabled=!0,this.skillItems=[],this.starArr=[];for(var i=0;i<5;i++)(t=new et).x=38*i+224,t.y=80,this.spHas.addChild(t),this.starArr.push(t);for(i=0;i<12;i++)(e=new AB).scale(.9,.9),e.pos(82+i%6*91,100*Math.floor(i/6)+592),this.addChild(e),e.data=null,this.skillItems.push(e);this.on("display",this,this.onDisplay)}w(s,"modules.pet.view.PetFuseView",Kw);var e=s.prototype;return e.onDisplay=function(){T.register("PET_FUSE_SELECT",this,this.onPetFuseSelect),this.on("undisplay",this,this.onUnDisplay)},e.onUnDisplay=function(){T.remove("PET_FUSE_SELECT",this,this.onPetFuseSelect),this.off("undisplay",this,this.onUnDisplay)},e.onPetFuseSelect=function(t,e){0==t?(this.subP&&this.subP==e&&(this.mainP?this.subP=this.mainP:this.subP=null,Jt.addTip("主副宠交换位置")),this.mainP=e):(this.mainP&&this.mainP==e&&(this.subP?this.mainP=this.subP:this.mainP=null,Jt.addTip("主副宠交换位置")),this.subP=e),this.setFuse()},e.updateFusePetAttType=function(){this.fuseP?this.fuseItem.imgType.skin="modules/pet/do2.png"==this.boxL.skin?"modules/pet/txt1.png":"modules/pet/txt2.png":this.fuseItem.imgType.skin=""},e.toNextFuse=function(){if(0<this.hadArr.length){var t="modules/pet/do2.png"==this.boxL.skin?1:2;this.fuseAlertView=this.fuseAlertView||new xB,this.fuseAlertView.openWindow(),this.fuseAlertView.parent&&this.fuseAlertView.setData(this.mainP,this.subP,this.fuseP.skin_id,t,this.hadArr)}else this.showFuseAlert()},e.onClick=function(t){switch(t.target){case this.btn:if(this.mainP&&this.subP){var e=Math.floor(this.mainP.type_id%1e5/1e4),i=Math.floor(this.subP.type_id%1e5/1e4);5<e&&5<i?(this.fuseAlertSecView=this.fuseAlertSecView||new PB,this.fuseAlertSecView.parent||this.fuseAlertSecView.openWindow(),this.fuseAlertSecView.update(Q.create(this,this.toNextFuse,null,!0))):this.toNextFuse()}else Jt.addTip("当前没有可融合的仙宠");break;case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.txtL:case this.boxL:this.boxL.skin="modules/pet/do2.png",this.boxR.skin="modules/pet/do1.png",this.updateFusePetAttType();break;case this.txtR:case this.boxR:this.boxL.skin="modules/pet/do1.png",this.boxR.skin="modules/pet/do2.png",this.updateFusePetAttType();break;case this.btnLeft:this.setSkillIndex(this.nowSkillIndex-1);break;case this.btnRight:this.setSkillIndex(this.nowSkillIndex+1);break;case this.btnChange:var s;if(this.fuseP&&this.indexArr&&2==this.indexArr.length)for(var n in this.indexArr)if((s=this.indexArr[n]).skin_id!=this.fuseP.skin_id)return this.fuseP=s,void Jt.addTip("切换形象成功");Jt.addTip("只有一种形象哦");break;case this.btnMain:this.subP?mr.ins().openPetFuseSelView(0,this.subP,this.mainP):Jt.addTip("请先选择副宠");break;case this.btnSub:this.mainP?mr.ins().openPetFuseSelView(1,this.mainP,this.subP):Jt.addTip("请先选择主宠");break;case this.btnHelp:mr.ins().openPetFuseTipsPanel();break;default:if(t.target instanceof modules.pet.view.PetItem){var o=t.target;o.data&&(fB.ins().btnL.visible=fB.ins().btnR.visible=!1,fB.ins().update(o.data),null==fB.ins().parent&&fB.ins().openWindow())}}},e.showFuseAlert=function(){var t,e="modules/pet/do2.png"==this.boxL.skin?1:2,i=new Ee;if(this.mainP.state==this.subP.state)t=2==this.mainP.state?"当前融合的主副宠均为附身状态":"";else{t="",1==this.mainP.state?t="主宠为出战状态":2==this.mainP.state?t="主宠为附身状态":!1,1==this.subP.state?""!=t?t+="，副宠为出战状态":t="副宠为出战状态":2==this.subP.state&&(""!=t?t+="，副宠为附身状态":t="副宠为附身状态"),""!=t&&(t="当前融合的"+t)}i.msg=Z.font(t,"#5d3924"),t&&""!=t&&(i.msg+="，"),i.msg+="确定要进行融合吗？",i.yesArgs=[this.mainP.pet_id,this.subP.pet_id,this.fuseP.skin_id,e],i.yesCaller=mr.ins(),i.yesFun=mr.ins().toPetFuse,EF.showVO(i)},e.setFuse=function(){this.mainP&&this.subP?(this.indexArr=Eo.toGetFusePet(this.mainP,this.subP),this.fuseP=this.indexArr[0]):this.mainP?this.fuseP=this.mainP:this.fuseP=null,this.updateDownSkill()},e.updateDownSkill=function(){var t;if(this.newArr=[],this.hadArr=[],this.normalArr=[],this.totalArr=[],this.subTypeIDArr=[],this.mainP&&this.subP){t=this.mainP.skill_info.pet_skills;var e,i=this.subP.skill_info.pet_skills;for(var s in i){e=i[s],this.subTypeIDArr.push(e.type_id);var n,o=!1;for(var a in t)if((n=t[a]).type_id==e.type_id){o=!0,this.hadArr.push(e),this.hadArr.push(n);break}o||this.newArr.push(e)}}else t=this.mainP?this.mainP.skill_info.pet_skills:[];for(a in t)n=t[a],this.subTypeIDArr.indexOf(n.type_id)<0&&this.normalArr.push(n);this.setSkillIndex(this.nowSkillIndex)},e.setSkillIndex=function(t){if(t<0)Jt.addTip("已经是第一页了");else{this.totalArr.length>12*t?this.nowSkillIndex=t:this.nowSkillIndex=0;var e=this.newArr.length,i=this.hadArr.length;this.normalArr.length;this.totalArr=this.newArr.concat(this.hadArr).concat(this.normalArr),this.totalArr.length>12*this.nowSkillIndex||(this.nowSkillIndex=0);for(var s,n=12*this.nowSkillIndex,o=n+12,a=n;a<o;a++)s=this.skillItems[a%12],a<this.totalArr.length?(s.data=this.totalArr[a],a<e?s.skillNew=!0:a<i+e?s.skillRe=!((a-e)%2):s.skillNew=!1):s.data=null;this.updateBtnVisible()}},e.updateBtnVisible=function(){this.btnRight.visible=this.totalArr.length>12*(this.nowSkillIndex+1),this.btnLeft.visible=0<this.nowSkillIndex},e.skillSort=function(t,e){var i=Math.floor(t.type_id%1e5/1e4),s=Math.floor(e.type_id%1e5/1e4);return i==s?t.skill_level==e.skill_level?t.skill_exp==e.skill_exp?t.type_id==e.type_id?0:t.type_id<e.type_id?-1:1:t.skill_exp<e.skill_exp?-1:1:t.skill_level<t.skill_level?-1:1:s<i?-1:1},e.updateState=function(){this.mainP=this.mainP?Eo.getPetByPetID(this.mainP.pet_id):null,this.subP=this.subP?Eo.getPetByPetID(this.subP.pet_id):null,this.setFuse()},e.update=function(t){var e=Eo.pets;if(e){if(this.mainP=null,t&&qo.isPetFree(t.pet_id))this.mainP=t;else for(var i=0;i<e.length;i++)if(t=e[i],qo.isPetFree(t.pet_id)){this.mainP=t;break}if(this.mainP){var s,n=e.concat();for(n.sort(this.sortSubFun),i=0;i<n.length;i++)if((t=n[i]).pet_id!=this.mainP.pet_id&&qo.isPetFree(t.pet_id)){s=t;break}}this.subP=s,this.setFuse()}},e.sortSubFun=function(t,e){return qo.isPetFree(t.pet_id)==qo.isPetFree(e.pet_id)?t.state==e.state?t.power>e.power?-1:1:t.state>e.state?-1:1:qo.isPetFree(t.pet_id)?-1:1},I(0,e,"fuseP",function(){return this._fuseP},function(t){if(this._fuseP=t,this.fuseItem.dataSource=t){this.txtFuseName.text=t.pet_name,this.txtFuseLv.text="LV."+t.level,this.txtFuseLv.x=this.txtFuseName.x+this.txtFuseName.textWidth+20;var e=Math.floor(t.type_id%1e5/1e4);this.txtFuseName.color=U.getColorLight(e);var i=t.aptitude%1e5;this.txtZZ.text=i+"",this.txtZZ.color=Eo.getPetZZCol(i),this.txtBase.text=t.property+"",this.txtInit.text=t.init_property+"";for(var s=0;s<5;s++)this.starArr[s].skin=s<e-1?"com/ui/star_3.png":"";if(this.updateFusePetAttType(),this.mainP){var n=Math.floor(this.mainP.type_id%1e5/1e4);this.gre1.visible=n<e,this.gre1.x=185+38*e;var o=this.mainP.aptitude%1e5;this.gre2.visible=o<i,this.gre2.x=this.txtZZ.x+this.txtZZ.textWidth+5,this.gre3.visible=t.init_property>this.mainP.init_property,this.gre3.x=this.txtInit.x+this.txtInit.textWidth+5,this.gre4.visible=t.property>this.mainP.property,this.gre4.x=this.txtBase.x+this.txtBase.textWidth+5}else this.gre1.visible=this.gre2.visible=this.gre3.visible=this.gre4.visible=!1}else for(this.txtFuseName.text="",this.txtFuseLv.text="",this.txtZZ.text="",this.txtBase.text="",this.txtInit.text="",s=0;s<5;s++)this.starArr[s].skin=s<4?"com/ui/star_3.png":""}),I(0,e,"mainP",function(){return this._mainP},function(t){if(this._mainP=t,this.mainItem.dataSource=t){this.txtMainName.text=t.pet_name,this.txtMainLv.text="LV."+t.level;var e=136-(this.txtMainName.textWidth+this.txtMainLv.textWidth+15)/2;this.txtMainLv.x=e,this.txtMainName.x=e+this.txtMainLv.textWidth+10;var i=Math.floor(t.type_id%1e5/1e4);this.txtMainName.color=U.getColorLight(i),this.spHas.visible=!0,this.txtNo.visible=!1,1==t.attack_type?(this.boxL.skin="modules/pet/do2.png",this.boxR.skin="modules/pet/do1.png"):(this.boxL.skin="modules/pet/do1.png",this.boxR.skin="modules/pet/do2.png"),this.updateFusePetAttType()}else this.txtMainName.text="",this.txtMainLv.text="",this.spHas.visible=!1,this.txtNo.visible=!0}),I(0,e,"subP",function(){return this._subP},function(t){if(this._subP=t,this.subItem.dataSource=t){this.txtSubName.text=t.pet_name,this.txtSubLv.text="LV."+t.level;var e=136-(this.txtSubName.textWidth+this.txtSubLv.textWidth+10)/2;this.txtSubLv.x=e,this.txtSubName.x=e+this.txtSubLv.textWidth+10;var i=Math.floor(t.type_id%1e5/1e4);this.txtSubName.color=U.getColorLight(i)}else this.txtSubName.text="",this.txtSubLv.text=""}),s}(),OB=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.pet.view.PetGetGuide",jw);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnYes:mr.ins().toPetGuideGet();break;case this.btnClose:this.closeWindow()}},i.update=function(){},e}(),LB=function(t){function e(){this.count=0,this.sArray=[".","..","..."],e.__super.call(this),this.on("display",this,this.onDisplay)}w(e,"modules.pet.view.PetHuntSoulUseItem",Qw);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUNDisplay),_t.addToSecond(this,this.secLoop)},i.secLoop=function(){this.count=this.count%3,this.doTxt.text=this.sArray[this.count],++this.count},i.onUNDisplay=function(){_t.removeFromSceond(this,this.secLoop),this.off("undisplay",this,this.onUNDisplay)},e}(),DB=function(t){function s(){var t;this.items=null,this.strArr=["低级","初级","中级","高级","顶级"],this.filArr=null,this.batching=!1,this.selItem=null,this.colStr=["白","绿","蓝","紫","橙","红"],this.startIndex=0,this.inLoop=!0,this.lastTime=0,this.updateArr=null,this.useTypeArr=null,this.curGetSoulExp=NaN,this.curGetSprite=NaN,s.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.items=[];for(var e=0;e<4;e++)for(var i=0;i<5;i++)(t=new qB).pos(163+100*i,111+114*e),t.data=null,this.addChild(t),this.items.push(t);this.on("click",this,this.onClick),this.txtLink.underline=!0,this.on("display",this,this.onDisplay),Nt.register("RP_PET_SOUL_CHANGE",this.btnChange,new Tt(15,-12)),ft.ins().register(this.imgGirl1,this,500,this.longClick,[1],this.clickFun,[1]),ft.ins().register(this.imgGirl2,this,500,this.longClick,[2],this.clickFun,[2]),ft.ins().register(this.imgGirl3,this,500,this.longClick,[3],this.clickFun,[3]),ft.ins().register(this.imgGirl4,this,500,this.longClick,[4],this.clickFun,[4]),ft.ins().register(this.imgGirl5,this,500,this.longClick,[5],this.clickFun,[5]),this.spMask1.graphics.drawRect(2,0,87,26,"#000000"),this.spMask2.graphics.drawRect(2,0,87,26,"#000000"),this.spMask3.graphics.drawRect(2,0,87,26,"#000000"),this.spMask4.graphics.drawRect(2,0,87,26,"#000000"),this.spMask5.graphics.drawRect(2,0,87,26,"#000000"),this.spMask1.alpha=this.spMask2.alpha=this.spMask3.alpha=this.spMask4.alpha=this.spMask5.alpha=.6,this.txtSet.style.align="center",this.txtSet.style.fontSize=24,this.txtSet.style.color="#5d3924",Nt.register("RP_SPRITE_BUY_FREE",this.txtLink,new Tt(9,-16)),Nt.register("RP_PET_SOUL_HUNT",this.btnHunt1,new Tt(20,-12))}w(s,"modules.pet.view.PetHuntSoulView",zw);var e=s.prototype;return e.longClick=function(t){Ae.show(Eo.getHuntGirlByID(t),"PETHUNTGIRL_TIP")},e.clickFun=function(t){var e=Eo.petSoulInfo;if(e){var i,s=0;for(var n in e.available_hunt_types)s<(i=e.available_hunt_types[n])&&(s=i);if(s==t||6==s&&5==t)if(e.hunt_souls.length<20){var o=Eo.getHuntGirlByID(t).need;pe.getScore(11)>=o?mr.ins().toPetSoulHurt(s):Jt.addTip("当前灵气不足")}else Jt.addTip("请先拾取当前猎取的兽魂");else s=s<6?s:5,Jt.addTip("当前可猎魂的类型为："+this.strArr[s-1]+"猎魂")}},e.onDisplay=function(){T.register("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.on("undisplay",this,this.onUNDisplay)},e.onScoreChange=function(t,e){if(void 0===e&&(e=!1),t&&(12==t.id||11==t.id)||e){this.txtSoulExp.text=k.getShortenSilverStr(pe.getScore(12)),this.txtLingQi.text=k.getShortenSilverStr(pe.getScore(11));var i=Eo.petSoulInfo;if(i){var s,n=0;for(var o in i.available_hunt_types)n<(s=i.available_hunt_types[o])&&(n=s);var a=Eo.getHuntGirlByID(n).need;this.txtLingQi.color=a>pe.getScore(11)?"#b60202":"#ffe0cf"}}},e.onUNDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onScoreChange),_t.removeFromFrame(this,this.loop),this.inLoop=!1,this.batching=!1,this.off("undisplay",this,this.onUNDisplay)},e.pickBack=function(){var t;for(var e in this.items){var i=(t=this.items[e]).data;if(t.data=null,i)if(1<Eo.getPetSoulVO(i.type_id).color){var s=t.x+45,n=t.y+45;ih.show("unit/effect/func3",s,n,this);var o=ih.show("unit/effect/func2",s,n,this);o.rotation=90+180*Math.atan2(n-644,s-575)/Math.PI,ie.to(o,{x:575,y:644},1200,A.backIn)}}this.imgPickRP.visible=Eo.petSoulInfo&&20==Eo.petSoulInfo.hunt_souls.length},e.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.imgBag:T.dispatch("PET_OPEN_SOUL_PACK_PANEL");break;case this.btnChange:T.dispatch("PET_OPEN_SOUL_CHANGE_PANEL");break;case this.btnPick:if(this.batching)Jt.addTip("猎魂正在进行中，请稍后再试");else{var e=Eo.petSoulInfo;e.hunt_souls.length<=0?Jt.addTip("没有可拾取的兽魂"):e.bag_souls.length>=e.bag_capacity?Jt.addTip("兽魂背包空格不足"):mr.ins().toPetSoulPick()}break;case this.btnHunt1:if(this.batching)Jt.addTip("猎魂正在进行中，请稍后再试");else if((e=Eo.petSoulInfo).hunt_souls.length<20){var i,s=0;for(var n in e.available_hunt_types)s<(i=e.available_hunt_types[n])&&(s=i);var o=Eo.getHuntGirlByID(s).need;if(pe.getScore(11)>=o)mr.ins().toPetSoulHurt(s,!0);else{var a=new Ee;a.msg="当前灵气不足，是否快速增加灵气继续猎魂？",a.yesCaller=T,a.yesFun=T.dispatch,a.yesArgs=["PET_OPEN_SPIRIT_BUY_PANEL"],a.key="huntSoulView",EF.showVO(a)}}else Jt.addTip("请先拾取当前猎取的兽魂");break;case this.btnHunt2:if(this.batching)Jt.addTip("猎魂正在进行中，请稍后再试");else if((e=Eo.petSoulInfo).hunt_souls.length<20){var l="高级猎魂有机会获得兽魂碎片，可在兽魂兑换界面中兑换"+Z.span("红色兽魂","#b60202")+",且有一定机会开启顶级猎魂。<br>是否消耗"+Z.span("160元宝","#fbd815")+"进行一次"+Z.span("高级猎魂？","#fbd815");Lo.showSecAlert(l,this,this.checkToHuntSoul,null,"SpecialHunt")}else Jt.addTip("请先拾取当前猎取的兽魂");break;case this.btnSet:T.dispatch("PET_OPEN_HUNT_SET");break;case this.txtLink:T.dispatch("PET_OPEN_SPIRIT_BUY_PANEL");break;default:if(t.target instanceof modules.pet.view.PetSoulHuntItem){var r=t.target;r.data&&Ae.show(r.data,"PETSOUL_TIP")}}},e.checkToHuntSoul=function(){pe.gold<160?Lo.showAlert():mr.ins().toPetSoulSpecialHunt()},e.update=function(t){var e=Eo.petSoulInfo;if(this.imgPickRP.visible=e&&20==e.hunt_souls.length,e){var i;if(this.onScoreChange(null,!0),e.hunt_souls.sort(this.sortFun),t){for(this.startIndex=0;this.items[this.startIndex]&&this.items[this.startIndex].data;)this.startIndex++;this.inLoop=!0,this.updateArr=t.update_souls,"m_pet_soul_hunt_toc"==t.className?this.useTypeArr=t.used_hunt_types:this.setSel(e.available_hunt_types),_t.addToFrame(this,this.loop)}else{this.setSel(e.available_hunt_types);for(var s=0;s<20;s++)i=this.items[s],s<e.hunt_souls.length?i.data=e.hunt_souls[s]:i.data=null}if(0<e.save_soul_color.length)if(e.save_soul_color.length<5){for(var n="保留",o=0;o<e.save_soul_color.length;o++){var a=e.save_soul_color[o];n+=Z.font(this.colStr[a-1],U.getColorLight(a),24),o!=e.save_soul_color.length-1&&(n+="、")}this.txtSet.innerHTML=n+"色兽魂"}else this.txtSet.innerHTML="";else this.txtSet.innerHTML="不保留兽魂"}else mr.ins().toPetSoulInfo()},e.setSel=function(t){var e,i=0;for(var s in t)i<(e=t[s])&&(i=e);i=5<i?5:i,null==this.selItem&&(this.selItem=new LB,this.addChild(this.selItem)),this.selItem.pos(39,130*i-40)},e.loop=function(){var t=S.now();if(100<t-this.lastTime){if(this.updateArr&&0<this.updateArr.length&&(this.items[this.startIndex].data=this.updateArr.shift()),this.useTypeArr&&0<this.useTypeArr.length&&this.selItem.pos(39,130*this.useTypeArr.shift()-40),++this.startIndex,this.updateArr.length<=0){this.inLoop=!1,_t.removeFromFrame(this,this.loop);var e=Eo.petSoulInfo;if(this.setSel(e.available_hunt_types),this.batching){for(var i=0;this.items[i]&&this.items[i].data;)i++;var s,n=new Ee,o=pe.getScore(12);this.curGetSoulExp=this.curGetSoulExp<o?o-this.curGetSoulExp:0,o=pe.getScore(11),this.curGetSprite=this.curGetSprite>o?this.curGetSprite-o:0,20==i?Eo.petSoulInfo&&Eo.petSoulInfo.save_soul_color&&0<=Eo.petSoulInfo.save_soul_color.indexOf(2)||(s="兽魂格子不足，一键猎魂停止！",n.yesLabel="知道了",n.showRight=!1):(s="灵气不足，一键猎魂停止！",n.yesLabel="增加灵气",n.yesCaller=T,n.yesFun=T.dispatch,n.yesArgs=["PET_OPEN_SPIRIT_BUY_PANEL"],n.noLabel="知道了",n.showRight=!0),s&&(n.msg=s+"<br>本次猎魂消耗灵气："+Z.font(""+this.curGetSprite,"#ffffff")+"<br>本次凝聚兽魂经验："+Z.font(""+this.curGetSoulExp,"#ffffff")+"（可用于兽魂升级）",EF.showVO(n))}this.batching=!1}this.lastTime=t}},e.sortFun=function(t,e){return t.index<e.index?-1:1},s}(),NB=function(t){function e(){this.showState=!1,this._data=null,e.__super.call(this)}w(e,"modules.pet.view.PetItem",t);var i=e.prototype;return I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this._data=t,this._data){this.imgPet.skin="com/petHead/"+this._data.skin_id+".png";var e=Math.floor(this._data.type_id%1e5/1e4);if(this.imgBg.skin="com/ui/goodsBg"+e+".png",this.imgType.skin="modules/pet/txt"+this._data.attack_type+".png",this.txtLv.text=this._data.level+"",this.showState)switch(this._data.state){case 1:this.txtState.text="战",this.imgState.skin="modules/pet/bot_1.png";break;case 2:this.txtState.text="附",this.imgState.skin="modules/pet/bot_3.png";break;case 3:this.txtState.text="休",this.imgState.skin="modules/pet/bot_2.png";break;case 0:this.txtState.text="异",this.imgState.skin="modules/pet/bot_2.png"}}else this.imgBg.skin="com/ui/goodsBg1.png",this.imgPet.skin="modules/pet/fuseNo.png",this.imgType.skin=null,this.txtLv.text="",this.imgState.skin=null,this.txtState.text=""}),I(0,i,"data",function(){return this._data}),e}($w),VB=function(t){function i(){var t;this.starArr=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.starArr=[];for(var e=0;e<5;e++)(t=new et).pos(38*e,0),this.spStar.addChild(t),this.starArr.push(t)}w(i,"modules.pet.view.PetLvUpView",Zw);var e=i.prototype;return e.setData=function(t,e,i){this.imgPet.skin="com/petHead/"+t.skin_id+".png";var s=Math.floor(t.type_id%1e5/1e4);this.imgBg.skin="com/ui/goodsBg"+s+".png",this.imgType.skin="modules/pet/txt"+t.attack_type+".png";for(var n=0;n<5;n++)this.starArr[n].skin=n<s-1?"com/ui/star_3.png":"";this.spStar.x=(572-38*(s-1)+3)/2,this.txtLv1.text="Lv."+e,this.txtLv2.text="Lv."+i,this.txtAttr1.text=this.getS(t.property*e),this.txtAttr2.text=this.getS(t.property*i)},e.getS=function(t){var e="生命 +"+8*t+"\n";return e+="攻击 +"+t+"\n",e+="物防 +"+Math.round(2*t/3)+"\n",e+="法防 +"+Math.round(2*t/3)+"\n"},i}(),BB=function(t){function e(){this.completeHanlder=null,this.curView=null,this.repeatX=5,this.descView=null,this.skillView=null,this.soulView=null,this.spsoulView=null,this.outKey=0,e.__super.call(this),this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.completeHanlder=Q.create(this,this.checkBtnVisible),this.on("click",this,this.onClick),this.list.itemRender=uV,this.list.mouseHandler=new Q(this,this.onClickPet),this.list.repeatX=this.repeatX,S.window.l=this.list,this.tab.on("change",this,this.onClickTab),this.tab.itemClickFun=new Q(this,this.onItemClick),this.tab.labels="信息,技能,兽魂,灵魄",Nt.register("RP_PET_SOUL_CHANGE",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_PET_LEVEL_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_PET_DEVOTE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_PET_SKILL_LEVEL_UP",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PET_SOUL_EQUIP",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_PET_SOUL_LEVEL_UP",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_SPRITE_BUY_FREE",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_PET_SPSOUL_STEP",this.tab.items[3],new Tt(19,-10)),Nt.register("RP_PET_SPSOUL_POLY",this.tab.items[3],new Tt(19,-10)),this.list.renderHandler=new Q(this,this.onRenderHandler),Bt.isZKPf9991Server()&&(this.title.skin="modules/pet/petTitle2.png")}w(e,"modules.pet.view.PetPanel",Jw);var i=e.prototype;return i.onItemClick=function(t){switch(t){case 0:case 1:case 2:this.tab.selectedIndex=t;break;case 3:pe.checkLevel(2,0)?this.tab.selectedIndex=t:Jt.addTip("灵魄功能2转开放")}},i.onRenderHandler=function(t,e){var i=t;if(i.data){i.select=i.data.pet_id==Eo.curSelPetID,i.redPoint=!1;var s=~i.data.red_point;if(!(0<(1&s)&&0==this.tab.selectedIndex&&(i.redPoint=i.data.level<100&&i.data.next_level_exp-i.data.exp<=mr.ins().sumExp,i.redPoint))){if(0<(2&s)&&1==this.tab.selectedIndex){var n=pe.getScore(9);if(i.data.skill_info)for(var o,a=i.data.skill_info.pet_skills.length,l=0;l<a;l++){o=i.data.skill_info.pet_skills[l];var r=Eo.getPetSkillVO(o.type_id),h=r.getNeedByLv(o.skill_level),u=o.skill_exp;if(o.skill_level<r.maxlv&&h-u<=n)return void(i.redPoint=!0)}i.redPoint=!1}if(0<(4&s)&&2==this.tab.selectedIndex){for(var c=Eo.getBagSoulPosArr(),d=pe.getScore(12),p=1;p<9;p++)if(null!=c[p]){var m,f=!1;for(var _ in i.data.soul_info.pet_souls){var g=(m=i.data.soul_info.pet_souls[_]).type_id%10;if(g==p){f=!0;var y=c[g],v=Math.floor(y.type_id/1e4)%10,I=Math.floor(m.type_id/1e4)%10;if(I<v||v==I&&y.soul_level>m.soul_level)return void(i.redPoint=!0)}}if(0==f)return void(i.redPoint=!0)}for(_ in i.data.soul_info.pet_souls)if(m=i.data.soul_info.pet_souls[_],v=Math.floor(m.type_id/1e4)%10,(h=Eo.getSoulExpByColorAndLv(v,m.soul_level)-m.soul_exp)<=d)return void(i.redPoint=!0)}0<(8&s)&&3==this.tab.selectedIndex&&Oo.checkOneSPSoulRP(i.data)&&(i.redPoint=!0)}}},i.onClickTab=function(t){this.chooseView(this.tab.selectedIndex)},i.chooseView=function(t){switch(this.spView.removeChildren(),t){case 0:this.descView=this.descView||new gB,this.curView=this.descView,this.spView.addChild(this.descView);break;case 1:this.skillView=this.skillView||new UB,this.curView=this.skillView,this.spView.addChild(this.skillView);break;case 2:this.soulView=this.soulView||new zB,this.curView=this.soulView,this.spView.addChild(this.soulView);break;case 3:this.spsoulView=this.spsoulView||new hB,this.curView=this.spsoulView,this.spView.addChild(this.spsoulView)}this.update()},i.updatePetSkillLevelUpRP=function(){this.skillView&&this.skillView.parent&&this.skillView.updatePetSkillLevelUpRP()},i.update=function(){0<this.outKey&&_t.clearTimeout(this.outKey),this.outKey=_t.setTimeout(this,this.realUpdate,null,40)},i.realUpdate=function(){this.updateList(),null==Eo.getPetByPetID(Eo.curSelPetID)&&Eo.pets[0]&&(Eo.curSelPetID=Eo.pets[0].pet_id),this.curView&&this.curView.update(),this.outKey=0},i.updateList=function(){this.list.dataSource=Eo.pets;for(var t=0;t<this.list.content._childs.length;t++)this.list.content._childs[t].y=(this.list.height-this.list.content._childs[t].height)/2;this.checkBtnVisible()},i.onClickPet=function(t,e){"click"==t.type&&this.list.selectedIndex!=e&&Eo.pets[e]&&(Eo.curSelPetID=Eo.pets[e].pet_id,this.choosePet())},i.choosePet=function(){Eo.pets&&(this.list.refresh(),0<Eo.curSelPetID&&this.update())},i.memSortFun=function(t,e){return t.order<e.order?-1:t.order>e.order?1:0},i.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight()}},i.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},i.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},i.selectDepotView=function(){this.curView instanceof modules.pet.view.PetSkillView&&(this.curView.curSel=2)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.upgradeSkill=function(){this.curView==this.skillView&&this.skillView.upgradeSkill()},i.upgradeSoul=function(){this.curView==this.soulView&&this.soulView.upgradeSoul()},i.closeWindow=function(){if(laya.ui.View.prototype.closeWindow.call(this),T.dispatch("CLOSE_PET_BOOK_VIEW"),go.curMission){var t=go.getMissionVOById(go.curMission.mission_id);t&&10080==t.id&&go.checkMission(10080,2)&&T.dispatch("GUIDE_STEP",LD.CONTINUE_MISSION)}},i.removeSelf=function(){return T.dispatch("CLOSE_PET_BOOK_VIEW"),laya.display.Node.prototype.removeSelf.call(this)},I(0,i,"endFirstIndex",function(){return Eo.pets?(Math.ceil(Eo.pets.length/this.list.repeatX)-1)*this.list.repeatX:0}),e}(),MB=function(t){function e(){this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("undisplay",this,this.onUnDisplay),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)}w(e,"modules.pet.view.PetRpSetView",tb);var i=e.prototype;return i.onUnDisplay=function(){if(this._data){var t=0;this.box1.selected&&(t+=1),this.box2.selected&&(t+=2),this.box3.selected&&(t+=4),this.box4.selected&&(t+=8),t!=~this._data.red_point&&mr.ins().toPetSetRedPoint(this._data.pet_id,t)}},I(0,i,"data",null,function(t){if(this._data=t,this._data){var e=Math.floor(this._data.type_id%1e5/1e4);this.selPetBg.skin="com/ui/goodsBg"+e+".png",this.selPetImg.skin="com/petHead/"+this._data.skin_id+".png",this.txtLv.text="LV."+this._data.level,this.txtName.text=this._data.pet_name,this.txtName.color=U.getColorDark(e);var i,s=this._data.power,n=k.numToTexture(s,"com/ui/powerNum");this.spPower.graphics.clear();for(var o=0;o<n.length;o++)i=n[o],this.spPower.graphics.drawTexture(i,i.width*o);var a=~t.red_point;this.box1.selected=1&a,this.box2.selected=2&a,this.box3.selected=4&a,this.box4.selected=8&a}}),e}(),FB=function(t){function e(){this._data=null,e.__super.call(this),this.txtDesc.style.valign="top",this.txtDesc.style.letterSpacing=2,this.txtDesc.style.leading=8,this.panel.vScrollBarSkin=""}return w(e,"modules.pet.view.PetSkillDescItem",eb),I(0,e.prototype,"data",null,function(t){if(this._data=t,this._data){this.imgSkill.skin="modules/pet/skill/"+this._data.type_id+".png";var e=Eo.getPetSkillVO(this._data.type_id);this.imgSkillBg.skin="com/ui/goodsBgs"+e.color+".png",this.txtDesc.innerHTML=Z.font(e.name+"  Lv."+this._data.skill_level+"<br/>","#5d3924")+e.getDescByLv(this._data.skill_level),this.txtDesc.height=this.txtDesc.contextHeight,this.panel.refresh()}else this.imgSkillBg.skin="com/ui/goodsBgs1.png",this.imgSkill.skin=null,this.txtDesc.text=""}),e}(),UB=function(t){function i(){var t;this.skillItems=null,this.skillDepotItems=null,this.skillThrowItems=null,this._curSel=1,this.indexArr=null,this.petForgetAlertView=null,this._selectSkillItem=null,this._selectSkillItems=[],this.openTxtArr=["点","击","开","启","格","子"],this._selPet=null,i.__super.call(this),this.on("click",this,this.onClick),this.btnBg1.skin="modules/pet/bot1.png",this.btnImg1.skin="modules/pet/img1_n.png",this.btnTxt1.skin="modules/pet/txt1_n.png",this.imgTitle.skin="modules/pet/title1.png",this.skillItems=[],this.skillDepotItems=[],this.skillThrowItems=[],this.panLeft.vScrollBarSkin="",this.panDepot.vScrollBarSkin="";for(var e=0;e<210;e++)(t=new mB).x=e%3*115+5,t.y=113*Math.floor(e/3)+12,this.panLeft.addChild(t),this.skillItems.push(t),ft.ins().register(t,this,500,this.longClick,[t],this.onItemClick,[t]);for(e=0;e<60;e++)(t=new mB).x=e%3*115+5,t.y=113*Math.floor(e/3)+5,this.panDepot.addChild(t),this.skillDepotItems.push(t),ft.ins().register(t,this,500,this.longClick,[t],this.onItemClick,[t]);for(this.panDepot.content.mouseEnabled=!0,e=0;e<12;e++)(t=new mB).x=e%3*115+5,t.y=113*Math.floor(e/3)+5,this.panThrow.addChild(t),this.skillThrowItems.push(t),ft.ins().register(t,this,500,this.longClick,[t],this.onItemClick,[t]);this.panThrow.content.mouseEnabled=!0,this.spUpLv.visible=!0,this.spDepote.visible=this.spThrow.visible=!1,this.panel.vScrollBarSkin="",this.txtUp.style.valign="top",this.txtUp.style.letterSpacing=2,this.txtUp.style.leading=10,this.txtLink3.underline=this.txtLink.underline=!0,this.txtHas1.style.align="center"}w(i,"modules.pet.view.PetSkillView",ib);var e=i.prototype;return e.onItemClick=function(t){0<=this.skillItems.indexOf(t)?null!=t.data?this.clickLeftSkill(t):1==t.notOpen&&this.clickNotOpen():0<=this.skillDepotItems.indexOf(t)?this.putSkillToPet(t):0<=this.skillThrowItems.indexOf(t)&&(this.skillRethrow(t),this.updateSkillThrow())},e.longClick=function(t){null!=t.data&&Ae.show(t.data,"PETFUSESKILL_TIP")},e.resetRight=function(){switch(this._curSel){case 1:this.spUpLv.visible=!0,this.spDepote.visible=this.spThrow.visible=!1;break;case 2:this.spDepote.visible=!0,this.spNotHas.visible=!1,this.spUpLv.visible=this.spThrow.visible=!1;break;case 3:this.spThrow.visible=!0,this.spNotHas.visible=!1,this.spUpLv.visible=this.spDepote.visible=!1}},e.clickNotOpen=function(){if(0<xo.getGoodsNumByType(xo.GOODS_ID,13000009)){var t=ur.getItem(13000009),e=new Ee;e.msg=Z.font("确定消耗","#5d3924")+Z.font(t.name,U.getColorDark(t.color))+Z.font("×1，开启一个仙宠技能格子？","#5d3924"),e.yesCaller=mr.ins(),e.yesFun=mr.ins().toPetSkillExtend,e.yesArgs=[this._selPet.pet_id],EF.showVO(e)}else ba.show(13000009)},e.putSkillToPet=function(t){if(null!=t.data&&this._selPet.skill_info){var e,i=new Object;i.className="p_pet_skill_action",i.from_index=t.data.index,i.action=1,this.indexArr=this.indexArr||[],this.indexArr.length=0;this._selPet.pet_id,pe.roleID;for(var s=0;s<this.skillItems.length;s++)null!=(e=this.skillItems[s]).data&&this.indexArr.push(e.data.index);if(this.indexArr.length==this._selPet.skill_info.max_num)return void Jt.addTip("没有多余的技能格子");if(0<this.indexArr.length){this.indexArr.sort();for(var n=0;n<this.indexArr.length&&this.indexArr[n]%1e3==n+1;n++);i.to_index=n+1+1e3*(this._selPet.pet_id-pe.roleID)}else i.to_index=1+1e3*(this._selPet.pet_id-pe.roleID);mr.ins().toPetSkillMove(this._selPet.pet_id,[i])}},e.putSkillToDepot=function(t){if(null!=t.data)if(2==t.data.skill_state){if(Eo.bagSkill&&Eo.bagSkill.all_skills&&Eo.bagSkill.all_skills.length<60){this.indexArr=this.indexArr||[];for(var e=this.indexArr.length=0;e<Eo.bagSkill.all_skills.length;e++){var i=Eo.bagSkill.all_skills[e];this.indexArr.push(i.index)}this.indexArr.sort();for(var s=0;s<this.indexArr.length&&this.indexArr[s]%1e3==s+1;s++);var n=new Object;return n.className="p_pet_skill_action",n.from_index=t.data.index,n.to_index=s+1+1e5,n.action=1,void mr.ins().toPetSkillMove(this._selPet.pet_id,[n])}Jt.addTip("没有多余的仓库格子")}else if(0<xo.getGoodsNumByType(xo.GOODS_ID,13000010)){var o=ur.getItem(13000010),a=Eo.getPetSkillVO(t.data.type_id),l=new Ee;l.msg=Z.font("确定消耗","#5d3924")+Z.font(o.name,U.getColorDark(o.color))+Z.font("封印","#5d3924")+Z.font("【"+a.name+"】",U.getColorDark(a.color))+Z.font("?","#5d3924")+"<br>"+Z.font("只有封印技能才能放入技能仓库，已封印的技能可随时存入技能仓库或取出至仙宠。","#5d3924"),l.yesCaller=mr.ins(),l.yesFun=mr.ins().toPetSkillSeal,l.yesArgs=[t.data.index],EF.showVO(l)}else ba.show(13000010)},e.throwSkill=function(t){var e=this._selectSkillItems.indexOf(t.data);if(0<=e){this._selectSkillItems.splice(e,1),t.sel=t.itemGray=!1;for(var i=0;i<this.skillThrowItems.length;i++)if(this.skillThrowItems[i].data==t.data)return void(this.skillThrowItems[i].data=null)}else for(this._selectSkillItems.push(t.data),t.sel=t.itemGray=!0,i=0;i<this.skillThrowItems.length;i++)if(null==this.skillThrowItems[i].data)return void(this.skillThrowItems[i].data=t.data)},e.onClick=function(t){var e=1;switch(t.target){case this.txtLink:ba.show(13000008);break;case this.txtLink3:T.dispatch("PET_OPEN_FUSE_PANEL");break;case this.box:this.updateSkillDepot();break;case this.btnThrow:this._selectSkillItems&&0<this._selectSkillItems.length?(this.petForgetAlertView=this.petForgetAlertView||new SB,this.petForgetAlertView.openWindow(),this.petForgetAlertView.parent&&this.petForgetAlertView.setData(this._selPet.pet_id,this._selectSkillItems)):Jt.addTip("请选择要遗忘的仙宠技能");break;case this.btnUp:this._selectSkillItem&&Eo.getPetSkillVO(this._selectSkillItem.data.type_id).getNeedByLv(this._selectSkillItem.data.skill_level)-this._selectSkillItem.data.skill_exp?mr.ins().toPetSkillUpgrade(this._selectSkillItem.data.index):Jt.addTip("技能经验不足，无法升级");break;case this.btnBg3:e++;case this.btnBg2:e++;case this.btnBg1:this._curSel!=e&&(this.curSel=e)}},e.skillRethrow=function(t){if(t.data){var e,i=this._selectSkillItems.indexOf(t.data);if(0<=i)for(var s in this._selectSkillItems.splice(i,1),this.skillItems)if(e=this.skillItems[s],t.data==e.data)return e.itemGray=!1,e.sel=!1,void(t.data=null)}},e.clickLeftSkill=function(t){switch(this._curSel){case 1:this.selectSkillItem=t,this.updateRight();break;case 2:this.putSkillToDepot(t);break;case 3:this.throwSkill(t),this.updateSkillThrow()}},e.update=function(){this.selPet=Eo.getPetByPetID(Eo.curSelPetID),this.updateLeft(),this.updateRight()},e.updateSkillDesc=function(){if(this._selectSkillItem&&this._selectSkillItem.data){this.spUpLv.visible=!0,this.spNotHas.visible=!1;var t=this._selectSkillItem.data,e=Eo.getPetSkillVO(t.type_id);if(this.skillUpBg.skin="com/ui/goodsBgs"+e.color+".png",this.skillUpImg.skin="modules/pet/skill/"+this._selectSkillItem.data.type_id+".png",this.txtUpName.text=e.name,this.txtUpLv.text="LV."+t.skill_level,this.txtUp.innerHTML=e.getDescByLv(t.skill_level),this.txtUp.height=this.txtUp.contextHeight,this.panel.refresh(),t.skill_level<e.maxlv){var i=pe.getScore(9)>=Eo.getPetSkillVO(t.type_id).getNeedByLv(t.skill_level)-t.skill_exp?"#139604":"#b60202";this.txtHas1.innerHTML=Z.font(pe.getScore(9)+"",i,22)+Z.font("/"+(e.getNeedByLv(t.skill_level)-t.skill_exp),"#ffffff",22),this.txtUp1.visible=this.txtLink.visible=this.txtHas1.visible=this.txtHas1.visible=!0,this.btnUp.label="升级",this.btnUp.gray=!1,this.imgLine.y=418}else this.txtUp1.visible=this.txtLink.visible=this.txtHas1.visible=this.txtHas1.visible=!1,this.imgLine.y=483,this.btnUp.label="已满级",this.btnUp.gray=!0}else this.spUpLv.visible=!1,this.spNotHas.visible=!0},e.updateSkillDepot=function(){if(Eo.bagSkill){var t,e;Eo.bagSkill.all_skills.sort(this.skillSort);for(var i=Eo.bagSkill.all_skills.length,s=0,n=0;n<60;n++)if(t=this.skillDepotItems[n],n<i)if((e=Eo.bagSkill.all_skills[s++])&&this.box.selected){var o=!1;if(this._selPet.skill_info&&this._selPet.skill_info.pet_skills)for(var a in this._selPet.skill_info.pet_skills)if(this._selPet.skill_info.pet_skills[a].type_id==e.type_id){o=!0;break}o?n--:t.data=e}else t.data=e;else t.data=null}else mr.ins().toPetSkillBag()},e.updateSkillThrow=function(){var t,e=0;for(var i in this.skillThrowItems)(t=this.skillThrowItems[i]).data&&(e+=t.data.skill_exp);this.txtForgetExp.innerHTML=Z.font("技能经验：","#ffffff")+Z.font(W.getShortenPowerStr(e),"#139604")},e.skillSort=function(t,e){return t.index<e.index?-1:1},e.updateLeft=function(){var t,e=this._selPet.skill_info?this._selPet.skill_info.pet_skills:[],i=e?e.length:0;e.sort(this.skillSort);for(var s=pe.getScore(9),n=0;n<210;n++)if(t=this.skillItems[n],this._selPet&&this._selPet.skill_info)if(t.sel=t==this._selectSkillItem,t.data=n<i?e[n]:null,t.notOpen=n>=this._selPet.skill_info.max_num,t.data){var o=Eo.getPetSkillVO(t.data.type_id),a=o.getNeedByLv(t.data.skill_level),l=t.data.skill_exp,r=~this._selPet.red_point;t.redPoint=0<(2&r)&&t.data.skill_level<o.maxlv&&a-l<=s}else t.redPoint=!1;else t.data=null,t.notOpen=!0,t.redPoint=!1;if(this._selPet.skill_info&&6<=210-this._selPet.skill_info.max_num)for(var h=3*Math.ceil(this._selPet.skill_info.max_num/3),u=0;u<6;u++)this.skillItems[h+u].txtSub.text=this.openTxtArr[u]},e.updateRight=function(){switch(this._curSel){case 1:this.updateSkillDesc();break;case 2:this.updateSkillDepot();break;case 3:this.updateSkillThrow()}},e.upgradeSkill=function(){ih.show("moduleEffect/upSucc",556,708,this),this.update()},e.updatePetSkillLevelUpRP=function(){var t,e,i=this._selPet&&0<(2&~this._selPet.red_point),s=pe.getScore(9);for(var n in this.skillItems)if((e=this.skillItems[n]).data){t=e.data;var o=Eo.getPetSkillVO(t.type_id),a=o.getNeedByLv(t.skill_level),l=t.skill_exp;t.skill_level<o.maxlv&&a-l<=s?e.redPoint=i:e.redPoint=!1}else e.redPoint=!1},I(0,e,"curSel",null,function(t){this["btnBg"+this._curSel].skin="modules/pet/bot2.png",this["btnImg"+this._curSel].skin="modules/pet/img"+this._curSel+"_n.png",this["btnTxt"+this._curSel].skin="modules/pet/txt"+this._curSel+"_n.png",this._curSel=t,this["btnBg"+this._curSel].skin="modules/pet/bot1.png",this["btnImg"+this._curSel].skin="modules/pet/img"+this._curSel+"_y.png",this["btnTxt"+this._curSel].skin="modules/pet/txt"+this._curSel+"_y.png",this.imgTitle.skin="modules/pet/title"+this._curSel+".png",this.selectSkillItem=null,this._selectSkillItems.length=0,this.resetRight(),this.update()}),I(0,e,"selectSkillItem",null,function(t){var e;for(var i in this._selectSkillItem=t,this.skillItems)(e=this.skillItems[i]).sel=e==t}),I(0,e,"selPet",null,function(t){if(this._selPet=t){this.selPetSp.visible=!0;var e=Math.floor(t.type_id%1e5/1e4);switch(this.selPetBg.skin="com/ui/goodsBg"+e+".png",this.selPetImg.skin="com/petHead/"+t.skin_id+".png",this.txtLv.text="LV."+t.level,this.txtName.text=t.pet_name,this.txtName.color=U.getColorDark(e),this._curSel){case 1:this._selPet.skill_info&&this._selPet.skill_info.pet_skills&&(this._selectSkillItem&&this.skillItems.indexOf(this._selectSkillItem)<this._selPet.skill_info.pet_skills.length?this.clickLeftSkill(this._selectSkillItem):null!=this._selPet.skill_info.pet_skills[0]&&this.clickLeftSkill(this.skillItems[0]));break;case 3:for(var i in this._selectSkillItems.length=0,this.skillThrowItems)this.skillThrowItems[i].data=null}}else this.selPetSp.visible=!1}),i}(),GB=function(t){function e(){this.splitEff=null,this._data=null,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(80,109),this.addChild(this.splitEff),this.btnChange.on("click",this,this.onClick),this.on("display",this,this.onDisPlay),this.txtNeed.style.fontSize=24,this.txtNeed.style.color="#5d3924",this.txtNeed.style.align="center"}w(e,"modules.pet.view.PetSoulChangeItem",sb);var i=e.prototype;return i.onDisPlay=function(){if(this._data){var t=Eo.getPetSoulVO(this._data.typeID);this.splitEff.loadAndPlay("moduleEffect/"+t.eff,"default",0,!0)}},i.onClick=function(){pe.getScore(13)>=this._data.needNum?Eo.petSoulInfo.bag_capacity>Eo.petSoulInfo.bag_souls.length?mr.ins().toSoulExchange(this._data.typeID,1):Jt.addTip("请先清理兽魂背包"):Jt.addTip("兽魂碎片不足")},i.updateNum=function(){var t=0;if(this._data){var e=(t=pe.getScore(13))>=this._data.needNum?"#96f254":"#b60202";this.txtNeed.innerHTML="兽魂碎片："+Z.font(""+t,e)+"/"+this._data.needNum,this.imgRp.visible=Eo.changeShowRP&&t>=this._data.needNum,t=0,t+=Eo.getInbodyPetSoulNumByType(this._data.typeID),t+=Eo.getSoulNumByType(this._data.typeID)}this.txtHas.text="（已有："+t+"）"},I(0,i,"data",null,function(t){this._data=t;var e=Eo.getPetSoulVO(this._data.typeID);this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.txtName.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1],this.txtName.color=U.getColorDark(e.color),this.txtAttr.text=e.getAttrByLv(1),this.updateNum()}),e}(),HB=function(t){function n(){this.items=null,n.__super.call(this),this.box.selected=!0,this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.pan.vScrollBarSkin="";var t,e=Eo.petSoulChangeArr;this.items=[];for(var i=0;i<e.length;i++){var s=e[i];(t=new GB).pos(1,145*i+3),t.data=s,this.pan.addChild(t),this.items.push(t)}this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(n,"modules.pet.view.PetSoulChangeView",nb);var e=n.prototype;return e.onDisplay=function(){T.register("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.on("undisplay",this,this.onUNDisplay)},e.onScoreChange=function(t){13==t.id&&this.update()},e.onUNDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onScoreChange),this.off("undisplay",this,this.onUNDisplay)},e.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.box:Eo.changeShowRP=this.box.selected,this.update()}},e.update=function(){for(var t in this.txtHas.text="兽魂碎片："+k.getShortenSilverStr(pe.getScore(13)),this.items)this.items[t].updateNum()},n}(),WB=function(t){function i(){var t;this.effs=null,this.alertVO=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.txtLink2.underline=this.txtLink3.underline=this.txtLink4.underline=this.txtLink5.underline=this.txtLink6.underline=!0,this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.effs=[];for(var e=1;e<6;e++)(t=b.getOne()).pos(80,149*e-30),t.loadAndPlay("moduleEffect/401"+(e+1)+"0001","default",0,!0),this.pan.addChild(t),this.effs.push(t)}w(i,"modules.pet.view.PetSoulDecomposeView",ob);var e=i.prototype;return e.changeExpTxt=function(){this.txtGet.text="可获得兽魂经验："+Eo.getSelSoulExp(),this.txtGet.x=(691-this.txtGet.textWidth)/2},e.onUnDisplay=function(){T.dispatch("PET_CLOSE_SELSOUL_PANEL"),T.remove("PETSOUL_GET_UPDATE",this,this.changeExpTxt)},e.onDisplay=function(){Eo.deComposeArr.length=0,this.box2.selected=this.box3.selected=this.box4.selected=this.box5.selected=this.box6.selected=!1;for(var t=1;t<6;t++)this.effs[t-1].loadAndPlay("moduleEffect/401"+(t+1)+"0001","default",0,!0);T.register("PETSOUL_GET_UPDATE",this,this.changeExpTxt),this.changeExpTxt()},e.clickLinkFun=function(t){var e=Eo.getSoulArrByColor(t);e&&0<e.length?(0==this["box"+t].selected&&this.addSoul(t),T.dispatch("PET_OPEN_SELSOUL_PANEL",[t]),this["box"+t].selected=!0,this["txtNum"+t].text="数量：选中"+e.length+"个",this["txtLink"+t].x=this["txtNum"+t].x+this["txtNum"+t].textWidth):Jt.addTip("当前没有可分解的兽魂")},e.clickBoxFun=function(t){this["box"+t].selected?(this.addSoul(t),this["txtNum"+t].text="数量：选中"+Eo.getSoulNumByColor(t)+"个"):(this.delSoul(t),this["txtNum"+t].text="数量：共有"+Eo.getSoulNumByColor(t)+"个"),this["txtLink"+t].x=this["txtNum"+t].x+this["txtNum"+t].textWidth},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.txtLink2:this.clickLinkFun(2);break;case this.txtLink3:this.clickLinkFun(3);break;case this.txtLink4:this.clickLinkFun(4);break;case this.txtLink5:this.clickLinkFun(5);break;case this.txtLink6:this.clickLinkFun(6);break;case this.box2:this.clickBoxFun(2);break;case this.box3:this.clickBoxFun(3);break;case this.box4:this.clickBoxFun(4);break;case this.box5:this.clickBoxFun(5);break;case this.box6:this.clickBoxFun(6);break;case this.btnDe:if(Eo.deComposeArr.length){this.alertVO=this.alertVO||new Ee;var e="分解",i=Eo.getSelSoulExp(),s=Eo.getSelSoulNumByColor(2);this.box2.selected&&0<s&&(e+=Z.font("绿色兽魂",U.getColorDark(2))+"×"+s+"，"),s=Eo.getSelSoulNumByColor(3),this.box3.selected&&0<s&&(e+=Z.font("蓝色兽魂",U.getColorDark(3))+"×"+s+"，"),s=Eo.getSelSoulNumByColor(4),this.box4.selected&&0<s&&(e+=Z.font("紫色兽魂",U.getColorDark(4))+"×"+s+"，"),s=Eo.getSelSoulNumByColor(5),this.box5.selected&&0<s&&(e+=Z.font("橙色兽魂",U.getColorDark(5))+"×"+s+"，"),s=Eo.getSelSoulNumByColor(6),this.box6.selected&&0<s&&(e+=Z.font("红色兽魂",U.getColorDark(6))+"×"+s+"，"),this.alertVO.msg=e+"可获得兽魂经验×"+Z.font(i+"","#ffffff")+"。<br>确定进行分解吗？",this.alertVO.yesCaller=mr.ins(),this.alertVO.yesFun=mr.ins().toPetSoulDecompose,EF.showVO(this.alertVO)}else Jt.addTip("当前没有选中的兽魂")}},e.addSoul=function(t){var e,i=Eo.getSoulArrByColor(t);for(var s in i)e=i[s],Eo.deComposeArr.indexOf(e.index)<0&&Eo.deComposeArr.push(e.index);this.changeExpTxt()},e.delSoul=function(t){var e,i=Eo.getSoulArrByColor(t),s=0;for(var n in i)e=i[n],0<=(s=Eo.deComposeArr.indexOf(e.index))&&Eo.deComposeArr.splice(s,1);this.changeExpTxt()},e.reset=function(){for(var t=2;t<7;t++)this["box"+t].selected=!1,this.delSoul(t),this["txtNum"+t].text="数量：共有"+Eo.getSoulNumByColor(t)+"个",this["txtLink"+t].x=this["txtNum"+t].x+this["txtNum"+t].textWidth;Eo.deComposeArr.length=0,this.changeExpTxt()},e.update=function(){for(var t=2;t<7;t++)this["txtNum"+t].text=this["box"+t].selected?"数量：选中"+Eo.getSelSoulNumByColor(t)+"个":"数量：共有"+Eo.getSoulNumByColor(t)+"个",this["txtLink"+t].x=this["txtNum"+t].x+this["txtNum"+t].textWidth},i}(),qB=function(t){function e(){this.splitEff=null,this._data=null,this._curUrl=null,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(46,85),this.spEff.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.PetSoulHuntItem",ab);var i=e.prototype;return i.onUndisplay=function(){this._curUrl=""},i.changeEff=function(t){this._curUrl!=t&&(this._curUrl=t,this.splitEff.loadAndPlay("moduleEffect/"+t,"default",0,!0),this.splitEff.visible=!0)},I(0,i,"data",function(){return this._data},function(t){if(this._data=t,this._data){var e=Eo.getPetSoulVO(this._data.type_id);0<e.pos?this.txtDesc.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1]:this.txtDesc.text="兽魂碎片",this.txtDesc.color=U.getColorDark(e.color),this.imgBg.skin="modules/pet/soulHuntBg"+e.color+".png",this.changeEff(e.eff)}else this._curUrl="",this.txtDesc.text="",this.splitEff.stop(),this.splitEff.visible=!1,this.imgBg.skin="modules/pet/soulHuntBg0.png"}),e}(),YB=function(t){function e(){this._put=0,this.splitEff=null,this._data=null,this._curUrl=null,this._select=!1,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(47,79),this.spEff.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.PetSoulItem",lb);var i=e.prototype;return i.onUndisplay=function(){this._curUrl=""},i.changeEff=function(t){this._curUrl!=t&&(this._curUrl=t,this.splitEff.loadAndPlay("moduleEffect/"+t,"default",0,!0),this.splitEff.visible=!0)},I(0,i,"showRp",null,function(t){this.imgRp.visible=t}),I(0,i,"put",null,function(t){this._put=t,this.txtType.text=Ao.PETSOUL_NAME[t-1]}),I(0,i,"select",null,function(t){this._select=t}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t,this._data){var e=Eo.getPetSoulVO(this._data.type_id);this.txtDesc.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1]+"\nLV."+this._data.soul_level,e.color<6?this.txtDesc.color=U.getColorDark(e.color):this.txtDesc.color="#f54b44",this.txtType.text="",this.changeEff(e.eff)}else this.txtDesc.text="",this.txtType.text=Ao.PETSOUL_NAME[this._put-1],this.splitEff.stop(),this.splitEff.visible=!1,this._curUrl="",this.showRp=!1}),e}(),XB=function(t){function e(){this.items=null,this._column=0,e.__super.call(this),this.setWindowType(),this.txtLink.underline=!0,this.pan.vScrollBarSkin="",this.pan.content.mouseEnabled=!0,this.on("click",this,this.onClick)}w(e,"modules.pet.view.PetSoulPack",rb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose:this.closeWindow();break;case this.txtLink:T.dispatch("PET_OPEN_SOUL_HUNT_PANEL");break;case this.btnDe:T.dispatch("PET_OPEN_SOUL_DECOMPOSE_PAENL");break;default:if(t.target instanceof modules.pet.view.PetSoulPackItem){var e=t.target;Ae.show(e.data,"PETSOUL_TIP")}}},i.update=function(){var t=Eo.petSoulInfo;if(t){this.clearAllItem();var e=t.bag_souls;e.sort(this.sortFun),e&&0<e.length&&(this.items=this.items||[]);for(var i=0;i<e.length;i++)this.createItem(e[i],i);this.txtZone.text=e.length+"/"+t.bag_capacity}else mr.ins().toPetSoulInfo()},i.createItem=function(t,e){this.items[e]=this.items[e]||new KB;var i=this.items[e];i.data=t,i.pos(e%5*131+20,168*Math.floor(e/5)+15),this.pan.addChild(i)},i.clearAllItem=function(){if(this.items)for(var t=0;t<this.items.length;t++)this.items[t].removeSelf()},i.sortFun=function(t,e){return t.type_id==e.type_id?t.soul_level==e.soul_level?t.soul_exp==e.soul_exp?0:t.soul_exp<e.soul_exp?1:-1:t.soul_level<e.soul_level?1:-1:t.type_id<e.type_id?1:-1},e}(),KB=function(t){function e(){this.splitEff=null,this._data=null,this._curUrl=null,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(54,94),this.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.PetSoulPackItem",hb);var i=e.prototype;return i.onUndisplay=function(){this._curUrl=""},i.changeEff=function(t){this._curUrl!=t&&(this._curUrl=t,this.splitEff.loadAndPlay("moduleEffect/"+t,"default",0,!0),this.splitEff.visible=!0)},I(0,i,"data",function(){return this._data},function(t){if(this._data=t,this._data){var e=Eo.getPetSoulVO(this._data.type_id);this.txtName.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1],this.txtName.color=U.getColorDark(e.color),this.txtNum.text="Lv."+this._data.soul_level,this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.changeEff(e.eff)}else this.txtName.text="",this.txtNum.text="",this._curUrl="",this.splitEff.stop(),this.splitEff.visible=!1}),e}(),jB=function(t){function e(){this.filArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txt2.style.fontSize=this.txt3.style.fontSize=this.txt4.style.fontSize=this.txt5.style.fontSize=24,this.txt2.style.color=this.txt3.style.color=this.txt4.style.color=this.txt5.style.color="#5d3924",this.txt2.innerHTML="保留"+Z.font("绿色",U.getColorLight(2),24)+"、"+Z.font("蓝色",U.getColorLight(3),24)+"、"+Z.font("紫色",U.getColorLight(4),24)+"、"+Z.font("橙色",U.getColorLight(5),24)+"兽魂",this.txt3.innerHTML="保留"+Z.font("蓝色",U.getColorLight(3),24)+"、"+Z.font("紫色",U.getColorLight(4),24)+"、"+Z.font("橙色",U.getColorLight(5),24)+"兽魂",this.txt4.innerHTML="保留"+Z.font("紫色",U.getColorLight(4),24)+"、"+Z.font("橙色",U.getColorLight(5),24)+"兽魂",this.txt5.innerHTML="保留"+Z.font("橙色",U.getColorLight(5),24)+"兽魂",this.img1.skin="modules/pet/do2.png",this.img2.skin=this.img3.skin=this.img4.skin=this.img5.skin=this.img6.skin="modules/pet/do1.png",this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.PetSoulSetView",ub);var i=e.prototype;return i.onDisplay=function(){this.on("undisplay",this,this.onUndisplay),Eo.petSoulInfo&&this.clickIndex(6-Eo.petSoulInfo.save_soul_color.length)},i.onUndisplay=function(){this.off("undisplay",this,this.onUndisplay),this.filArr&&Eo.petSoulInfo&&this.filArr.length!=Eo.petSoulInfo.save_soul_color.length&&mr.ins().toPetSoulHuntSetting(this.filArr)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.txt:case this.img1:this.clickIndex(1);break;case this.txt2:case this.img2:this.clickIndex(2);break;case this.txt3:case this.img3:this.clickIndex(3);break;case this.txt4:case this.img4:this.clickIndex(4);break;case this.txt5:case this.img5:this.clickIndex(5);break;case this.txt6:case this.img6:this.clickIndex(6)}},i.clickIndex=function(t){this.filArr=[];for(var e=1;e<7;e++)this["img"+e].skin=e==t?"modules/pet/do2.png":"modules/pet/do1.png",t<=e&&6!=e&&this.filArr.push(e)},e}(),QB=function(t){function e(){this._equipPos=0,this._data=null,this._equipVO=null,this.refineSoulEff=null,this._soulEffect=null,this._showRp=!1,e.__super.call(this)}w(e,"modules.role.view.EquipItem",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.mouseEnabled=!0,this.refineSoulEff=b.getOne(),this.refineSoulEff.visible=!1,this.refineSoulEff.pos(52,100),this.addChild(this.imgRp)},i.checkRefineSoulShow=function(t){var e=Jo.getRefineSoulStep(t,this.equipPos);if(0<e){var i=$o.getSoulStepSource(e);this.refineSoulEff.loadAndPlay("moduleEffect/refineSoulEquipItem"+i,"default",0,!0),this.refineSoulEff.visible=!0}else this.refineSoulEff.visible=!1},i.updateSoulInfo=function(t,e){void 0===e&&(e=-1);var i=mn.getEquipSoulKVByPos(this.equipPos,e);if(i&&t){this._soulEffect||(this._soulEffect=b.getOne(),this.boxSoul.addChild(this._soulEffect),this._soulEffect.pos(22,21));var s=mn.getFightSoulVO(i.id);this._soulEffect.loadAndPlay("moduleEffect/smallSoulEffect/"+s.eff,"default",0,!0);var n=mn.getSoulQualityIndex(i.val);this.imgSoulBg.skin="modules/role/quality"+n+".png",this.boxSoul.visible=!0}else this.boxSoul.visible=!1},I(0,i,"equipPos",function(){return this._equipPos},function(t){this._equipPos=t}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t){if("p_actor_equip"==t.className){var e=t,i=pe.getPalByIndex(oa.curActorIndex);this.updateSoulInfo(!0,i.pal_id),this.checkRefineSoulShow(i.pal_id);var s=Jo.getEquipInfo(e.pos,1,i.pal_id);s&&0<s.curLv?this.txtRight.text="+"+s.curLv:this.txtRight.text="",(s=Jo.getEquipInfo(e.pos,3,i.pal_id))&&0<s.curLv?this.txtLeft.text=""+s.curLv:this.txtLeft.text="",this._equipVO=ur.getItem(e.type_id),this.imgGoodsBg.skin="com/ui/goodsBg"+this._equipVO.color+".png",100<this._equipVO.level?this.txtInfo.text=(this._equipVO.level-100)/10+"转":this.txtInfo.text="LV."+this._equipVO.level,this.imgGoods.skin=this._equipVO.realMaxico;var n,o,a=this._equipVO.basePow+W.getAddExtraPower(e.extra_attr),l=xo.getEquipData()?xo.getEquipData().goods:[];for(var r in l)if(o=l[r],(n=ur.getItem(o.typeid)).type==this._equipVO.type&&n.level<=pe.myEquipLevel&&(0==n.category||n.category==i.ext.category)&&ur.isNormalEquip(n.type)&&n.basePow+W.getAddExtraPower(o.equip_info.extra_attrs)>a)return void(this.showRp=!0);this.showRp=!1}else if(t instanceof xml.SpEquipVO){var h=t,u=pe.getPalByIndex(oa.curActorIndex);this.updateSoulInfo(!1),this.checkRefineSoulShow(u.pal_id);var c=oa.getSpEquipNowLv(u.pal_id,h.id);this.txtInfo.text=0<c?h.name:"未激活",this.txtRight.text=0<c?"+"+c:"",this.imgGoodsBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin=0<c?"modules/role/sp"+h.id+".png":"modules/role/sp"+h.id+"grey.png",this.txtLeft.text="";var d=sn.getPotentialVOByPos(h.id);if(d){for(var p,m=d.PotentialLvArr.length,f=0;f<m;f++)if(d.PotentialLvArr[f].lv>c){0<f&&(p=d.PotentialLvArr[f-1]);break}0<f?(this.imgSp.visible=!0,p=p||d.PotentialLvArr[m-1],this.imgSp.skin="modules/role/sp"+p.color+".png"):this.imgSp.visible=!1}else this.imgSp.visible=!1;var _=xo.getGoodsNumByType(xo.GOODS_ID,h.goodsID);this.showRp=c<h.level&&_>=h.getNeedByLv(c)}}else{for(r in this.txtInfo.text=this.txtRight.text=this.txtLeft.text="",this.imgGoodsBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin="modules/role/"+(20+this._equipPos)+".png",this.soul=!1,this.refineSoulEff.visible=!1,this.updateSoulInfo(!1),l=xo.getEquipData()?xo.getEquipData().goods:[])if(o=l[r],n=ur.getItem(o.typeid),i=pe.getPalByIndex(oa.curActorIndex),n.type==q.PUT2TYPEMAP[this._equipPos]&&n.level<=pe.myEquipLevel&&(0==n.category||n.category==i.ext.category)&&ur.isNormalEquip(n.type))return void(this.showRp=!0);this.showRp=!1}}),I(0,i,"showRp",function(){return this._showRp},function(t){var e=!1;this._data&&this._data instanceof xml.SpEquipVO&&na.isSpeEquip(this._data.id)&&(e=ha.checkIsPing(ra.getSpeEquipModID(this._data.id),oa.curActorIndex,0)),this._showRp=this.imgRp.visible=t&&!e}),I(0,i,"soul",null,function(t){this.imgSoul.visible=t}),e}(NI),zB=function(t){function i(){var t;this.posArr=[194,287,104,374,44,496,165,599,297,572,375,479,292,414,177,468],this.items=null,this.rightItem=null,this._selPet=null,this._selIndex=1,i.__super.call(this),this.items=[];for(var e=0;e<8;e++)(t=new YB).put=e+1,t.pos(this.posArr[2*e],this.posArr[2*e+1]),this.addChild(t),this.items.push(t);this.txtLink3.x=this.txt1.x+this.txt1.textWidth,this.rightItem=new YB,this.rightItem.pos(509,190),this.addChild(this.rightItem),this.rightItem.txtDesc.visible=!1,this.txtLink3.underline=this.txtLink.underline=this.txtLink2.underline=!0,Nt.register("RP_PET_SOUL_CHANGE",this.txtLink,new Tt(9,-16)),Nt.register("RP_SPRITE_BUY_FREE",this.txtLink,new Tt(9,-16)),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.txtHas.style.align="center"}w(i,"modules.pet.view.PetSoulView",cb);var e=i.prototype;return e.onDisplay=function(){T.register("ROLE_SCORE_CHANGE",this,this.onScoreChange),T.register("PET_SOUL_CHANGE",this,this.equipEff),this.updateRight(),this.on("undisplay",this,this.onUNDisplay)},e.onScoreChange=function(t){if(12==t.id){var e=this.rightItem.data;if(e){var i=Eo.getPetSoulVO(e.type_id),s=pe.getScore(12)>=Eo.getSoulExpByColorAndLv(i.color,e.soul_level)-e.soul_exp,n=s?"#139604":"#b60202";this.txtHas.innerHTML=Z.font(""+pe.getScore(12),n)+Z.font("/"+(Eo.getSoulExpByColorAndLv(i.color,e.soul_level)-e.soul_exp),"#ffffff"),this.imgUpRP.visible=s&&e.soul_level<Eo.getSoulMaxLvByColor(i.color)}else this.imgUpRP.visible=!1;this.updateItemRP()}},e.equipEff=function(t){var e;for(var i in t){if((e=t[i]).index<1e5)var s=this.posArr[2*(e.index%1e3-1)],n=this.posArr[2*(e.index%1e3-1)+1];ih.show("moduleEffect/changeover",s+45,n+45,this)}},e.updateItemRP=function(){var t,e=!this.isMaskRP();for(var i in this.items)if((t=this.items[i]).data){var s=Eo.getPetSoulVO(t.data.type_id);t.showRp=e&&pe.getScore(12)>=Eo.getSoulExpByColorAndLv(s.color,t.data.soul_level)-t.data.soul_exp}},e.onUNDisplay=function(){T.remove("ROLE_SCORE_CHANGE",this,this.onScoreChange),T.remove("PET_SOUL_CHANGE",this,this.equipEff),this.off("undisplay",this,this.onUNDisplay)},e.onClick=function(t){switch(t.target){case this.btnChange:Eo.petSoulInfo;for(var e,i,s,n,o=[],a=0;a<this.items.length;a++)(i=this.items[a]).data?(e=Eo.getPetSoulVO(i.data.type_id),null!=(s=Eo.getBestSoulByPosInBag(e.color,a+1))&&((n=new Object).className="p_pet_soul_action",n.action=2,n.from_index=s.index,n.to_index=this._selPet.pet_id%100*1e3+a+1,o.push(n))):null!=(s=Eo.getBestSoulByPosInBag(0,a+1))&&((n=new Object).className="p_pet_soul_action",n.action=1,n.from_index=s.index,n.to_index=this._selPet.pet_id%100*1e3+a+1,o.push(n));0<o.length?mr.ins().toPetSoulMove(this._selPet.pet_id,o):Jt.addTip("当前没有更好的兽魂可以替换");break;case this.btnUp:var l=this.rightItem.data;l?(e=Eo.getPetSoulVO(l.type_id),pe.getScore(12)>=Eo.getSoulExpByColorAndLv(e.color,l.soul_level)-l.soul_exp?mr.ins().toPetSoulAddExp(this._selPet.pet_id%100*1e3+this._selIndex,Eo.getSoulExpByColorAndLv(e.color,l.soul_level)-l.soul_exp):Jt.addTip("兽魂经验不足！")):Jt.addTip("请选中要升级的仙宠！");break;case this.txtLink3:case this.txtLink:T.dispatch("PET_OPEN_SOUL_HUNT_PANEL");break;case this.txtLink2:ba.show(13000016);break;default:if(t.target instanceof modules.pet.view.PetSoulItem){i=t.target;var r=this.items.indexOf(i);0<=r&&(this.selIndex=r+1)}}},e.update=function(){Eo.pets&&Eo.petSoulInfo?0<Eo.pets.length&&(this.selPet=Eo.getPetByPetID(Eo.curSelPetID),this.updateLeft()):Eo.pets?mr.ins().toPetSoulInfo():mr.ins().toPetInfo()},e.updateRight=function(){if(this.rightItem.data){this.spHas.visible=!0,this.spNotHas.visible=!1;var t=this.rightItem.data,e=Eo.getPetSoulVO(t.type_id);if(this.txtName.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1],this.txtLv.text="Lv."+t.soul_level,this.txtName.color=U.getColorDark(e.color),this.txtAttrNow.text=e.getAttrByLv(t.soul_level),t.soul_level<Eo.getSoulMaxLvByColor(e.color)){pe.getScore(12);var i=pe.getScore(12)>=Eo.getSoulExpByColorAndLv(e.color,t.soul_level)-t.soul_exp?"#139604":"#b60202";this.txtHas.innerHTML=Z.font(""+pe.getScore(12),i)+Z.font("/"+(Eo.getSoulExpByColorAndLv(e.color,t.soul_level)-t.soul_exp),"#ffffff"),this.txtAttrNext.visible=this.txtLink2.visible=this.txtHas.visible=this.txtNeed.visible=!0,this.txtAttrNext.text=e.getAttrByLv(t.soul_level+1),this.btnUp.label="升级",this.imgMax.visible=this.btnUp.gray=!1;var s=pe.getScore(12),n=Math.floor(t.type_id/1e4)%10,o=Eo.getSoulExpByColorAndLv(n,t.soul_level)-t.soul_exp;this.imgUpRP.visible=!this.isMaskRP()&&o<=s}else this.txtAttrNext.visible=this.txtLink2.visible=this.txtHas.visible=this.txtNeed.visible=!1,this.btnUp.label="已满级",this.imgMax.visible=this.btnUp.gray=!0,this.imgUpRP.visible=!1}else this.spHas.visible=!1,this.spNotHas.visible=!0,this.txtName.text="",this.txtLv.text="",this.imgUpRP.visible=!1},e.updateLeft=function(){if(this.imgChangeRP.visible=!1,this._selPet&&this._selPet.soul_info){for(var t,e,i=!1,s=0,n=0;n<8;n++){e=this.items[n],i=!1;for(var o=0;o<this._selPet.soul_info.pet_souls.length;o++)if((t=this._selPet.soul_info.pet_souls[o]).index%1e3==n+1){e.data=t,s+=Eo.getPetSoulVO(t.type_id).getPowerByLv(t.soul_level),i=!0;break}0==i&&(e.data=null)}var a,l=k.numToTexture(Math.floor(s));for(this.spPower.graphics.clear(),o=0;o<l.length;o++)a=l[o],this.spPower.graphics.drawTexture(a,a.width*o);Eo.petSoulInfo&&Eo.petSoulInfo.bag_souls;var r=Eo.getBagSoulPosArr();if(!this.isMaskRP())for(var h=1;h<9;h++)if(null!=r[h]&&0==this.imgChangeRP.visible){var u;for(var c in i=!1,this._selPet.soul_info.pet_souls){var d=(u=this._selPet.soul_info.pet_souls[c]).type_id%10;if(d==h){i=!0;var p=r[d],m=Math.floor(p.type_id/1e4)%10,f=Math.floor(u.type_id/1e4)%10;if(f<m||m==f&&p.soul_level>u.soul_level){this.imgChangeRP.visible=!0;break}}}if(0==i){this.imgChangeRP.visible=!0;break}}}else this.selIndex=1;this.updateItemRP()},e.isMaskRP=function(){var t=~this._selPet.red_point;return!(this._selPet&&0<(4&t))},e.upgradeSoul=function(){ih.show("moduleEffect/upSucc",604,655,this),this.update()},I(0,e,"selIndex",null,function(t){var e,i;this._selIndex=t;for(var s=0;s<this.items.length;s++)this.items[s].select=s+1==t;if(this._selPet)for(var n in this._selPet.soul_info.pet_souls)if((i=this._selPet.soul_info.pet_souls[n]).index%1e3==t){e=i;break}this.rightItem.put=t,this.rightItem.data=e,this.imgSel.pos(this.posArr[2*(t-1)]-19,this.posArr[2*(t-1)+1]-24),this.updateRight()}),I(0,e,"selPet",null,function(t){(this._selPet=t)&&t.soul_info?null!=this.items[this._selIndex-1].data?this.selIndex=this._selIndex:0<t.soul_info.pet_souls.length?this.selIndex=t.soul_info.pet_souls[0].index%1e3:this.selIndex=1:this.selIndex=1}),i}(),$B=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.htmlTip.style.align="center",this.htmlTip.innerHTML=Z.span("每次增加获得","#5d3924")+Z.span("300000","#fdc06a")+Z.span("灵气","#5d3924"),Nt.register("RP_SPRITE_BUY_FREE",this.btnOne,new Tt(19,-10)),this.on("click",this,this.onClick)}w(e,"modules.pet.view.PetSpiritBuyPanel",db);var i=e.prototype;return i.update=function(){0<Eo.petSoulInfo.spirit_free_times?(this.txt1.text="本次免费",this.spOne.x=67):(this.txt1.text="30",this.spOne.x=97),this.txt10.text="270",this.txt50.text="1200",this.htmlCur.style.align="center",this.htmlCur.innerHTML=Z.span("当前灵气：","#f4f1b2",26)+Z.span(pe.getScore(11)+"","#ffffff",26)},i.onClick=function(t){var e=0,i="";switch(t.target){case this.btnClose:return void this.closeWindow();case this.btnOne:if(0<Eo.petSoulInfo.spirit_free_times)return void mr.ins().toPetSoulBuySpirit(1);30<=pe.gold?(e=1,i="是否花费"+Z.font2("30元宝",16504853,26)+"增加300000点灵气？"):Lo.showAlert();break;case this.btnTen:270<=pe.gold?(e=10,i="是否花费"+Z.font2("270元宝",16504853,26)+"增加3000000点灵气？"):Lo.showAlert();break;case this.btnFifty:270<=pe.gold?(e=50,i="是否花费"+Z.font2("1200元宝",16504853,26)+"增加15000000点灵气？"):Lo.showAlert()}""!=i&&Lo.showSecAlert(i,mr.ins(),mr.ins().toPetSoulBuySpirit,[e],"petBuySpirit")},e}(),ZB=function(t){function o(){this.goodsBase=13000001,this.countOffset=4,this.bar1=null,this.clip=null,this.goods=null,this.repeatX=4,this.completeHanlder=null,this._curPetID=0,this.curIndex=-1,this.INIT_LV_NUM=99999,this.endLV=0,this.count=0,this._startLV=this.INIT_LV_NUM,o.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.completeHanlder=Q.create(this,this.checkBtnVisible);var t,e,i=new et("com/ui/barBg2.png");i.pos(0,0),i.sizeGrid="5,5,5,5,0",i.width=280,this.bar1=new At,this.bar1.bar.skin="com/ui/bar2.png",this.bar1.sizeGrid="5,5,5,5,0",this.bar1.width=278,this.bar1.pos(1,1),this.spBar.addChild(i),this.spBar.addChild(this.bar1),this.clip=b.getOne(),this.clip.pos(349,540),this.addChild(this.clip),this.on("click",this,this.onClick),this.goods=[];for(var s=NaN,n=0;n<4;n++)s=this.goodsBase+n,e=ur.getItem(s),(t=new fh(e,!1,!0,91,!0)).pos(68+155*n,58),t.on("mousedown",this,this.onMouseDown),t.on("mouseup",this,this.onMouseUp),t.on("mouseout",this,this.onMouseUp),this.spGoods.addChild(t),this.goods.push(t);this.list.itemRender=uV,this.list.selectHandler=new Q(this,this.onSelectPet),this.list.renderHandler=new Q(this,this.onRenderPet),this.list.repeatX=this.repeatX,this.list.selectEnable=!0,this.on("display",this,this.onDisplay),this.txtLink.underline=!0,Nt.register("RP_PET_EXP_BOX_CAN_UP",this.imgExp),Nt.register("RP_PET_EXP_BOX_IS_FULL",this.imgExp)}w(o,"modules.pet.view.PetTrainView",pb);var e=o.prototype;return e.onRenderPet=function(t,e){var i=t;i.select=i.data.pet_id==this.selPet.pet_id;var s=~i.data.red_point;i.redPoint=0<(1&s)&&i.data.level<100&&i.data.next_level_exp-i.data.exp<=mr.ins().sumExp},e.updateListRp=function(){this.list.refresh(),this.updateGoodsNum()},e.onSelectPet=function(t){var e=this.list.getCell(t)?this.list.getCell(t).data:null;e&&(this._curPetID=e.pet_id),this.selPet=e},e.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.updateGoodsNum),T.register("PET_TRAIN_BACK",this,this.onPetTrainBack),this.on("undisplay",this,this.onUNDisplay)},e.onPetTrainBack=function(){this.updateGoodsNum(),this.updatePet()},e.onUNDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.updateGoodsNum),T.remove("PET_TRAIN_BACK",this,this.onPetTrainBack),_t.removeFromTimer(this,this.useGoods),this.inOneKeyUp=!1,this.off("undisplay",this,this.onUNDisplay)},e.onMouseDown=function(t){var e=this.selPet;if(e){this.startLV=e.level;var i=t.target;i.gray?Jt.addTip("经验道具数目不足"):(this.curIndex=this.goods.indexOf(i),i.data&&mr.ins().toPetTrain(e.pet_id,i.data.id),_t.addToTimer(this,this.useGoods))}},e.onMouseUp=function(t){_t.removeFromTimer(this,this.useGoods),this.count=0,this.curIndex=-1,this.inOneKeyUp||this.showLvUp()},e.showLvUp=function(){var t=this.selPet;t&&(this.endLV=t.level,this.endLV>this.startLV&&mr.ins().showLvUp(t,this.startLV,this.endLV),this.startLV=this.INIT_LV_NUM)},e.useGoods=function(){this.count++;var t=this.selPet,e=this.goods[this.curIndex];this.count>=this.countOffset&&t&&0<=this.curIndex&&0==e.gray?mr.ins().toPetTrain(t.pet_id,e.data.id):1==e.gray&&this.onMouseUp()},e.oneKeyUseGoods=function(){var t=this.selPet;if(t){for(var e=0,i=0;i<this.goods.length&&!(0<(e=xo.getGoodsNumByType(xo.GOODS_ID,this.goodsBase+i)));i++);0<e?mr.ins().toPetTrain(t.pet_id,this.goodsBase+i):(Jt.addTip("经验道具数量不足"),this.inOneKeyUp=!1)}else this.inOneKeyUp=!1},e.updateGoodsNum=function(){for(var t,e=0<(1&~this.selPet.red_point)&&this.selPet.level<100&&this.selPet.next_level_exp-this.selPet.exp<=mr.ins().sumExp,i=NaN,s=0;s<this.goods.length;s++)t=this.goods[s],i=xo.getGoodsNumByType(xo.GOODS_ID,t.data.id),t.num=i,t.gray=i<=0,this["imgRp"+s].visible=e&&0<i},e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnLeft:this.turnLeft();break;case this.btnRight:this.turnRight();break;case this.txtLink:ba.show(13000004);break;case this.imgExp:pt.send(37,1,"仙宠经验瓶入口"),mr.ins().openExpBoxPanel();break;case this.btnOneKey:"一键升级"==this.btnOneKey.label?this.inOneKeyUp=!0:"停止"==this.btnOneKey.label&&(this.inOneKeyUp=!1)}},e.update=function(){Eo.pets?(this.updateList(),this.updatePet()):mr.ins().toPetInfo()},e.updateList=function(){this.list.dataSource=Eo.pets,this.checkBtnVisible();for(var t=0;t<this.list.content._childs.length;t++)this.list.content._childs[t].y=this.list.height-this.list.content._childs[t].height},e.updatePet=function(){var t=this.selPet;if(t){this.txtName.text=t.pet_name,this.txtLV.text="LV."+t.level,this.btnOneKey.visible=30<=t.level;var e=t.level<100;this.bar1.value=e?t.exp/t.next_level_exp:1;var i,s=t.power,n=k.numToTexture(s,"com/ui/powerNum");this.spPower.graphics.clear();for(var o=0;o<n.length;o++)i=n[o],this.spPower.graphics.drawTexture(i,i.width*o);if(this.updatePetSkin(t.skin_id),e)this.txtPro.text=t.exp+"/"+t.next_level_exp,this.spMax.visible=!1,this.spNotmax.visible=!0;else{this.txtPro.text="已满级",this.spMax.visible=!0,this.spNotmax.visible=!1;var a="攻击："+(1==t.attack_type?t.phy_attack:t.magic_attack)+"\n生命："+t.max_hp;this.txtAttr1.text=a,a="物防："+t.phy_defence+"\n法防："+t.magic_defence,this.txtAtr2.text=a}}this.updateGoodsNum()},e.updatePetSkin=function(t){this.clip.loadAndPlay("unit/monster/"+t+"_3","stand",3,!0),this.clip.scale(1.5,1.5)},e.turnRight=function(){var t=this.list.startIndex+this.repeatX;t=t>this.endFirstIndex?this.endFirstIndex:t,this.list.tweenTo(t,200,this.completeHanlder)},e.turnLeft=function(){var t=this.list.startIndex-this.list.repeatX;t=t<0?0:t,this.list.tweenTo(t,200,this.completeHanlder)},e.checkBtnVisible=function(){this.btnLeft.visible=0<this.list.startIndex,this.btnRight.visible=this.list.startIndex<this.endFirstIndex},I(0,e,"inOneKeyUp",function(){return"停止"==this.btnOneKey.label},function(t){t?(this.btnOneKey.label="停止",_t.addToTimer(this,this.oneKeyUseGoods),this.selPet&&(this.startLV=this.selPet.level)):(this.btnOneKey.label="一键升级",_t.removeFromTimer(this,this.oneKeyUseGoods),this.showLvUp())}),I(0,e,"selPet",function(){var t=Eo.getPetByPetID(this._curPetID);return null==t?Eo.pets[0]:t},function(t){var e,i;for(i in this.list.cells)(e=this.list.cells[i]).select=e.data==t;this.updatePet()}),I(0,e,"startLV",function(){return this._startLV},function(t){this._startLV!=this.INIT_LV_NUM&&t!=this.INIT_LV_NUM||(this._startLV=t)}),I(0,e,"endFirstIndex",function(){return Eo.pets?(Math.ceil(Eo.pets.length/this.list.repeatX)-1)*this.list.repeatX:0}),o}(),JB=function(t){function e(){this.splitEff=null,this._sel=!1,this._data=null,this._curUrl=null,e.__super.call(this),this.mouseEnabled=!0,this.splitEff=b.getOne(),this.splitEff.pos(91,128),this.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.SelectSoulItem",mb);var i=e.prototype;return i.onUndisplay=function(){this._curUrl=""},i.changeEff=function(t){this._curUrl!=t&&(this._curUrl=t,this.splitEff.loadAndPlay("moduleEffect/"+t,"default",0,!0),this.splitEff.visible=!0)},I(0,i,"sel",function(){return this._sel},function(t){this._sel=t,this._sel?this.chk.selected=!0:this.chk.selected=!1}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t,this._data){var e=Eo.getPetSoulVO(this._data.type_id);this.txtName.text="兽魂·"+Ao.PETSOUL_NAME[e.pos-1],this.txtName.color=U.getColorDark(e.color),this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.changeEff(e.eff)}else this._curUrl="",this.txtName.text="",this.splitEff.stop(),this.splitEff.visible=!1}),e}(),tM=function(t){function e(){this._color=NaN,this._soulsArr=null,this.soulItemArr=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.pet.view.SelectSoulView",fb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.closeBtn:this.closeWindow();break;case this.btnY:this.addSoul();break;default:if(t.target instanceof modules.pet.view.SelectSoulItem){var e=t.target;1==e.sel?e.sel=!1:e.sel=!0}}},i.addSoul=function(){var t,e,i=0;for(e in this.soulItemArr)(t=this.soulItemArr[e]).data&&t.parent&&(i=Eo.deComposeArr.indexOf(t.data.index),t.sel?i<0&&Eo.deComposeArr.push(t.data.index):0<=i&&Eo.deComposeArr.splice(i,1));this.closeWindow(),T.dispatch("PET_UPDATA_DE_PANEL"),T.dispatch("PETSOUL_GET_UPDATE")},i.updateGoods=function(){if(this.clearAllItem(),this._soulsArr=Eo.getSoulArrByColor(this._color),this._soulsArr&&0<this._soulsArr.length){this.soulItemArr=this.soulItemArr||[];for(var t=this._soulsArr.length,e=0;e<t;e++){this.soulItemArr[e]=this.soulItemArr[e]||new JB;var i=this.soulItemArr[e];i.data=this._soulsArr[e],i.sel=0<=Eo.deComposeArr.indexOf(this._soulsArr[e].index);var s=e,n=s%3,o=Math.floor(s/3);this.soulItemArr[e].x=n*(i.width+20),this.soulItemArr[e].y=o*(i.height+20),this.panelSel.addChild(i)}}},i.clearAllItem=function(){if(this.soulItemArr)for(var t=0;t<this.soulItemArr.length;t++)this.soulItemArr[t].removeSelf()},i.openWindow=function(t,e){void 0===e&&(e=!1),this._soulsArr=Eo.getSoulArrByColor(this._color),laya.ui.View.prototype.openWindow.call(this),this.parent&&this.updateGoods()},I(0,i,"color",null,function(t){this._color=t}),e}(),eM=function(t){function e(t){void 0===t&&(t=0),e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btn.on("click",this,this.onClickCollect),this.btn2.on("click",this,this.onClickCollect),this.closeBtn.on("click",this,this.onClickClose),this.chooseView(t)}w(e,"modules.pfSdk.view.CollectGameView",_b);var i=e.prototype;return i.chooseView=function(t){switch(t){case 0:this.box1.visible=!0,this.box2.visible=!1;break;case 1:this.box1.visible=!1,this.box2.visible=!0}},i.onClickCollect=function(){T.dispatch("PF_REWARD_GET_TOS",[2,0]),Bt.collect(),pt.send(30,2,"收藏游戏-我要收藏")},i.onClickClose=function(){this.closeWindow()},e}(),iM=function(t){function e(){this.spFace,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.creatSp(),this.btnNo.gray=!0}w(e,"modules.pfSdk.view.EvaluateView",gb);var i=e.prototype;return i.creatSp=function(){this.spFace=this.spFace||b.getOne(),this.spFace.loadAndPlay("unit/effect/evaluate","default",0,!0),this.spFace.pos(0,0),this.spFace.scaleX=this.spFace.scaleY=1,this.sp.addChild(this.spFace)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnNo:this.closeWindow();break;case this.btnYes:var e;"eyouweiduan"==G.pf?e="https://play.google.com/store/apps/details?id=com.eyougame.ljsl":"eyouios"==G.pf&&(e="https://itunes.apple.com/app/id1414146301"),S.window.location.href=e}},e}(),sM=function(t){function e(){this.items=null,this.rewardIds=[{typeId:10201111,num:5},{typeId:10201419,num:2},{typeId:10201101,num:50}],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.items=[]}w(e,"modules.pfSdk.view.QQDJRewardView",yb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow();break;case this.btnGet:yt.isWX||_r.ins().toPfRewardGet([12,999]);break;case this.btnLook:if(yt.isWX)var e="http://m.egame.qq.com/download/app?channel=h5ldy2&type=act&url=qgameapi%3A%2F%2Fbrowser%3Furl%3Dhttp%253A%252F%252Fcdn.egame.qq.com%252Fgame-weex%252Fpage%252FdetailV2.html%253Fappid%253D1106331565%2526_pggwv%253D8%2526_wv%253D1%2526v%253D20180730%2526ADTAG%253Dkjldy%26weex%3Dhttp%253A%252F%252Fcdn.egame.qq.com%252Fgame-weex%252Fweex%252FdetailV2%252Fapp.js%253Fappid%253D1106331565%2526_pggwv%253D8%2526_wv%253D1%2526v%253D20180730%2526ADTAG%253Dkjldy";else e="http://m.egame.qq.com/download/app?channel=h5ldy&type=act&url=qgameapi%3A%2F%2Fbrowser%3Furl%3Dhttp%253A%252F%252Fcdn.egame.qq.com%252Fgame-weex%252Fpage%252FdetailV2.html%253Fappid%253D1106331565%2526_pggwv%253D8%2526_wv%253D1%2526v%253D20180730%2526ADTAG%253Dlmxldy%26weex%3Dhttp%253A%252F%252Fcdn.egame.qq.com%252Fgame-weex%252Fweex%252FdetailV2%252Fapp.js%253Fappid%253D1106331565%2526_pggwv%253D8%2526_wv%253D1%2526v%253D20180730%2526ADTAG%253Dlmxldy";S.window.location.href=e}},i.onDisplay=function(t){for(var e=0;e<this.rewardIds.length;e++){this.items[e]=this.items[e]||new fh(null,!0,!0,105,!0);var i=this.items[e];if(this.rewardIds[e]){var s=ur.getItem(this.rewardIds[e].typeId);i.data=s,i.num=this.rewardIds[e].num}i&&null==i.parent&&this.spReward.addChild(i),i.x=120*e}this.update()},i.update=function(){yt.isWX||(0==Do.getRewardTimes(12,999)?this.btnGet.disabled=!1:this.btnGet.disabled=!0)},e}(),nM=function(t){function e(){this.goodsItems=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),Bt.sdk instanceof com.sdk.AiWeiYouSDK&&(this.imgBtn.skin="modules/share/invate.png")}w(e,"modules.pfSdk.view.ShareGamePanel",vb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow();break;case this.btn:if(yt.isWX||yt.isQQ){if(ao.getIconStateShow(4022))return S.window.wx&&(console.log("Browser.window.wx.navigateToMiniProgram({appId: wx05c25393267d6d28})"),S.window.wx.navigateToMiniProgram({appId:"wx05c25393267d6d28"}),0==Do.getRewardTimes(1,0)&&_r.ins().toPfRewardGet([1,0])),void(S.window.qq&&(S.window.qq.navigateToMiniProgram({appId:"1106331565"}),0==Do.getRewardTimes(1,0)&&_r.ins().toPfRewardGet([1,0])));Bt.resetShareParm("这才叫仙侠，sss级特效，美轮美奂，不玩才怪！","0",[1,0]),Bt.shareAppMessage(),0==Do.getRewardTimes(1,0)&&_r.ins().toPfRewardGet([1,0]),pt.send(29,2,"分享游戏-一键分享")}else Bt.resetShareParm("我刚打倒了世界BOSS，却发现有个小姐姐躺在旁边……","0",[1,0]),Bt.shareMenu()}},i.update=function(){var t,e,i=No.shareGameVO.rewardDatas;this.goodsItems=this.goodsItems||[];for(var s=0;s<i.length;s++)e=i[s],(t=(t=this.goodsItems[s])||new Ah(91,91,!1,!0,!0,!1)).pos(110*s,0),this.spGoods.addChild(t),t.dataSource=[e.typeId,e.num];var n=Do.getRewardTimes(1,0);this.txtTip.visible=0<n},e}(),oM=function(t){function e(){this.itemArr=[10201106,10201111,10201161,10201162],e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.creatSp()}w(e,"modules.pfSdk.view.WeixinFocusView",Ib);var i=e.prototype;return i.creatSp=function(){for(var t=0;t<this.itemArr.length;t++){var e;(e=new Ah(91,100,!1,!0,!0)).scale(.9,.9,!0),e.pos(0+100*t,0),e.dataSource=[this.itemArr[t],10],this.sp.addChild(e)}},i.onClick=function(t){switch(t.target){case this.btnClose:this.closeWindow()}},e}(),aM=function(t){function e(){this.bar=null,e.__super.call(this),this.bar=new Gt("com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7]),this.bar.x=295,this.bar.y=775,this.bar.width=136,this.bar.posGrid=[1,0,1,0],this.bar.on("complete",this,this.onBarComplete),this.resetBar(),this.addChild(this.bar);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.bar.addChild(t),this.on("click",this,this.onClick),this.initRw()}w(e,"modules.plays.BailingyuanQuickView",wb);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.initRw=function(){var t=Yo.getPlaysItemMapId(4);if(t)for(var e,i=Yo.getCopyRw(t).getReward(),s=0;s<i.length;s++)(e=new fh(ur.getItem(i[s].id),!0,!0,105)).pos(96+s%4*135,310+135*Math.floor(s/4)),e.mouseEnabled=!0,this.imgBg.addChild(e)},i.onClick=function(t){switch(t.target){case this.btnClear:if("挑战"==this.btnClear.label){var e=Yo.getPlaysItemMapId(4);e&&Lr.ins().toMapChange(e)}else this.yes();break;default:if(t.target instanceof modules.pack.packView.GoodsImage){var i=t.target;i.data&&(i.data.tempNum=1,Ae.show(i.data,"BASE_GOODS_TIP"))}}},i.yes=function(){this.btnClear.mouseEnabled=!1,this.btnClear.gray=!0,this.bar.visible=!0,this.bar.value=1},i.resetBar=function(){this.bar.value=0,this.bar.visible=!1,this.bar.updateNow()},i.onBarComplete=function(){if(1==this.bar.value){var t=Yo.getPlaysItemMapId(4),e=As.getCopyTime(t);e&&el.ins().toQuickFinish(t,e.finished_times>=e.max_free_times),this.resetBar()}},i.update=function(){var t=Yo.getPlaysItemMapId(4),e=As.getCopyTime(t);e?(this.txtTimes.text="本日可挑战："+(e.max_free_times-e.finished_times)+"次",5<=pe.myRegrow&&0<e.quick_finish_times?this.btnClear.label="快速挑战":this.btnClear.label="挑战",e.can_buy_times<=0&&e.max_free_times-e.finished_times<=0?(this.btnClear.mouseEnabled=!1,this.btnClear.gray=!0):(this.btnClear.mouseEnabled=!0,this.btnClear.gray=!1)):(this.txtTimes.text="本日可挑战：0次",this.btnClear.label="挑战",this.btnClear.mouseEnabled=!1,this.btnClear.gray=!0)},e}(),lM=function(t){function e(){this.imgSelected=null,this.curPal=null,this.mouseImg=null,e.__super.call(this),this.imgShield.on("click",this,this.onClick),this.imgInspire.on("click",this,this.onClick),this.imgInspire2.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay),this.on("mousedown",this,this.onMouseDown)}w(e,"modules.plays.beach.view.BeachControlView",bb);var i=e.prototype;return i.update=function(){this.txtDizzy.text=Vo.getActionTimes(3)+"/"+Vo.SKILL_DIZZY_MAX_TIMES,this.txtKiss.text=Vo.getActionTimes(4)+"/"+Vo.SKILL_KISS_MAX_TIMES},i.onMouseDown=function(t){var e="";switch(t.target){case this.imgDizzy:Vo.curType=3,_t.addToTimer(this,this.searchTarget),e="modules/beach/imgDizzy1.png",this.stage.on("mouseup",this,this.onMouseUp);break;case this.imgKiss:Vo.curType=4,_t.addToTimer(this,this.searchTarget),e="modules/beach/imgKiss1.png",this.stage.on("mouseup",this,this.onMouseUp);break;case this.imgDoubleSit:Vo.curType=2,_t.addToTimer(this,this.searchTarget),e="modules/beach/imgDoubleSit1.png",this.stage.on("mouseup",this,this.onMouseUp)}""!=e&&(this.mouseImg=this.mouseImg||new et,this.mouseImg.removeSelf(),this.mouseImg.skin=e,this.mouseImg.pos(lt.uiLayer.mouseX,lt.uiLayer.mouseY,!0),null==this.mouseImg.parent&&lt.uiLayer.addChild(this.mouseImg),_t.addToTimer(this,this.mouseMove))},i.mouseMove=function(){this.mouseImg&&this.mouseImg.pos(lt.uiLayer.mouseX,lt.uiLayer.mouseY,!0)},i.onMouseUp=function(t){if(this.curPal=_e.getMouseUnit(),this.stage.off("mouseup",this,this.onMouseUp),this.curPal&&this.curPal.pvo){var e=pe.getRoleIdByPalId(this.curPal.pvo.pal_id);if(e!=pe.roleID)if(_t.removeFromTimer(this,this.searchTarget),_t.removeFromFrame(this,this.mouseMove),this.mouseImg&&this.mouseImg.removeSelf(),this.spInspire.contains(t.target)?this.spInspire.visible=!0:this.spInspire.visible=!1,this.curPal){switch(Vo.curType){case 4:this.doKiss(e);break;case 3:this.doDizzy(e);break;case 2:this.doDoubleSit(e)}this.curPal=null,this.imgSelected&&this.imgSelected.removeSelf()}else this.imgSelected&&this.imgSelected.removeSelf()}else this.mouseImg&&this.mouseImg.removeSelf(),this.spInspire&&(this.spInspire.visible=!1),_t.removeFromTimer(this,this.searchTarget),_t.removeFromFrame(this,this.mouseMove)},i.doSit=function(){WS.main&&(1101==WS.main.status?Jt.addTip("当前已处于打坐状态"):1103==WS.main.status?Jt.addTip("晕眩状态下不可操作"):1102==WS.main.status?Jt.addTip("双修状态下不可转化为打坐状态"):(Vo.curType=1,gr.ins().toAction(pe.roleID,Vo.curType)))},i.doDoubleSit=function(t){if(WS.main)if(1103==WS.main.status)Jt.addTip("晕眩状态下不可操作");else if(1102==WS.main.status)Jt.addTip("当前已处于双修状态");else if(1101==WS.main.status)gr.ins().sitToOtherAction(pe.roleID,t);else if(Vo.curType=2,this.curPal){var e=Mo.getTargetPt(WS.main.pt,this.curPal.pt);e?e.x==WS.main.pt.x&&e.z==WS.main.pt.z?gr.ins().toAction(t,Vo.curType):WS.main.runToPoint(e,0,Q.create(this,this.runToPointComplete,[t],!0)):WS.main.runToPoint(this.curPal.pt,1,Q.create(this,this.runToPointComplete,[t],!0))}},i.doDizzy=function(t){0==Vo.checkActionTimes(3)?Jt.addTip("当前击晕次数不足"):1103==WS.main.status?Jt.addTip("晕眩状态下不可操作"):1102==WS.main.status?Jt.addTip("双修状态下不可使用技能"):1101==WS.main.status?Rt.distance(WS.main.pt,this.curPal.pt)<=4?(Vo.curType=3,gr.ins().toAction(t,Vo.curType)):4<Rt.distance(WS.main.pt,this.curPal.pt)&&(Vo.curType=3,gr.ins().sitToOtherAction(pe.roleID,t)):4<Rt.distance(WS.main.pt,this.curPal.pt)?(Vo.curType=3,WS.main.runToPoint(this.curPal.pt,4,Q.create(this,this.runToPointComplete,[t],!0))):(Vo.curType=3,gr.ins().toAction(t,Vo.curType))},i.runToPointComplete=function(t){gr.ins().toAction(t,Vo.curType)},i.doKiss=function(t){0==Vo.checkActionTimes(4)?Jt.addTip("当前飞吻次数不足"):1103==WS.main.status?Jt.addTip("晕眩状态下不可操作"):1102==WS.main.status?Jt.addTip("双修状态下不可使用技能"):1101==WS.main.status?Rt.distance(WS.main.pt,this.curPal.pt)<=4?(Vo.curType=4,gr.ins().toAction(t,Vo.curType)):4<Rt.distance(WS.main.pt,this.curPal.pt)&&(Vo.curType=4,gr.ins().sitToOtherAction(pe.roleID,t)):4<Rt.distance(WS.main.pt,this.curPal.pt)?(Vo.curType=4,WS.main.runToPoint(this.curPal.pt,4,Q.create(this,this.runToPointComplete,[t],!0))):(Vo.curType=4,gr.ins().toAction(t,Vo.curType))},i.runToPointCompleteToKiss=function(t){gr.ins().toAction(t,Vo.curType)},i.searchTarget=function(){(this.curPal=_e.getMouseUnit(),this.curPal&&this.curPal.pvo)?pe.getRoleIdByPalId(this.curPal.pvo.pal_id)!=pe.roleID&&(null==this.imgSelected&&(this.imgSelected=new et,this.imgSelected.pos(0,-64,!0),this.imgSelected.removeSelf(),this.imgSelected.pivot(65,65),this.imgSelected.rotation=45,this.imgSelected.scale(.6,.6,!0)),this.imgSelected.skin="modules/beach/imgSelected.png",this.curPal.addChild(this.imgSelected)):(this.curPal=null,this.imgSelected&&this.imgSelected.removeSelf())},i.onUndisplay=function(){_t.removeFromTimer(this,this.searchTarget),_t.removeFromFrame(this,this.mouseMove),this.mouseImg&&this.mouseImg.removeSelf()},i.onClick=function(t){switch(t.target){case this.imgShield:this.doSit();break;case this.imgInspire:this.spInspire.visible=!0;break;case this.imgInspire2:this.spInspire.visible=!1}},e.SKILL_USE_DISTANCE=4,e}(),rM=function(t){function s(){this.openTime=0,this.endTime=0,s.__super.call(this),this.setWindowType(),this.resetAlpha(),this.on("mousedown",this,this.onDown),this.on("mouseup",this,this.onUp),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay),this.on("display",this,this.onDisplay)}w(s,"modules.plays.beach.view.BeachEnterPanel",Sb);var e=s.prototype;return e.onDisplay=function(){this.updateSpEnterInfo(),_t.addToSecond(this,this.updateSpEnterInfo)},e.onUndisplay=function(){_t.removeFromSceond(this,this.loopTime),_t.removeFromSceond(this,this.updateSpEnterInfo)},e.resetAlpha=function(){this.imgEnter1.alpha=this.imgEnter2.alpha=this.imgEnter3.alpha=this.imgEnter4.alpha=.01},e.onClick=function(t){switch(t.target){case this.imgEnter1:case this.imgInfoBg1:1==Vo.myBeach?Lr.ins().toMapChange(26100):Jt.addTip("当前可进入沙滩："+Vo.getBeachNameByType(Vo.myBeach));break;case this.imgEnter2:case this.imgInfoBg2:2==Vo.myBeach?Lr.ins().toMapChange(26100):Jt.addTip("当前可进入沙滩："+Vo.getBeachNameByType(Vo.myBeach));break;case this.imgEnter3:case this.imgInfoBg3:3==Vo.myBeach?Lr.ins().toMapChange(26100):Jt.addTip("当前可进入沙滩："+Vo.getBeachNameByType(Vo.myBeach));break;case this.imgEnter4:case this.imgInfoBg4:4==Vo.myBeach||0==Vo.myBeach?Lr.ins().toMapChange(26100):Jt.addTip("当前可进入沙滩："+Vo.getBeachNameByType(Vo.myBeach));break;case this.btnClose:case this.btnClose2:this.closeWindow()}},e.onDown=function(t){switch(t.target){case this.imgEnter1:this.imgEnter1.alpha=1,this.imgEnter2.alpha=this.imgEnter3.alpha=this.imgEnter4.alpha=.01;break;case this.imgEnter2:this.imgEnter2.alpha=1,this.imgEnter1.alpha=this.imgEnter3.alpha=this.imgEnter4.alpha=.01;break;case this.imgEnter3:this.imgEnter3.alpha=1,this.imgEnter1.alpha=this.imgEnter2.alpha=this.imgEnter4.alpha=.01;break;case this.imgEnter4:this.imgEnter4.alpha=1,this.imgEnter1.alpha=this.imgEnter2.alpha=this.imgEnter3.alpha=.01;break;case this.imgInfoBg1:this.imgEnter1.alpha=1,this.imgEnter2.alpha=this.imgEnter3.alpha=this.imgEnter4.alpha=.01;break;case this.imgInfoBg2:this.imgEnter2.alpha=1,this.imgEnter1.alpha=this.imgEnter3.alpha=this.imgEnter4.alpha=.01;break;case this.imgInfoBg3:this.imgEnter3.alpha=1,this.imgEnter1.alpha=this.imgEnter2.alpha=this.imgEnter4.alpha=.01;break;case this.imgInfoBg4:this.imgEnter4.alpha=1,this.imgEnter1.alpha=this.imgEnter2.alpha=this.imgEnter3.alpha=.01}},e.onUp=function(){this.resetAlpha()},e.update=function(){Mo.isBeachTime()?(this.updateSpInfo(),this.spInfo.visible=!0,this.spEnterInfo.visible=!1):(this.spInfo.visible=!1,this.spEnterInfo.visible=!0)},e.updateSpEnterInfo=function(){if(Mo.isBeachTime())this.spInfo.visible=!0,this.spEnterInfo.visible=!1,this.updateSpInfo(),this.openTime=0;else{0==this.openTime&&(this.openTime=Mo.getBeachOpenTime());var t=this.openTime-ya.serverTime;0<t?(this.spInfo.visible=!1,this.spEnterInfo.visible=!0,this.txtEndTime.text=x.formatTime(t)):(this.spInfo.visible=!0,this.spEnterInfo.visible=!1,this.updateSpEnterInfo())}},e.updateSpInfo=function(){switch(this.endTime=Mo.getBeachEndTime(),0<this.endTime-ya.serverTime&&_t.addToSecond(this,this.loopTime),Vo.myBeach){case 1:this.txtMyName.text="顶级沙滩",this.txtMyName.color="#fdc06a",this.imgRp.pos(s.rpPos[0].x,s.rpPos[0].y);break;case 2:this.txtMyName.text="高级沙滩",this.txtMyName.color="#f299ff",this.imgRp.pos(s.rpPos[1].x,s.rpPos[1].y);break;case 3:this.txtMyName.text="中级沙滩",this.txtMyName.color="#7fd6fe",this.imgRp.pos(s.rpPos[2].x,s.rpPos[2].y);break;case 4:default:this.txtMyName.text="初级沙滩",this.txtMyName.color="#96f254",this.imgRp.pos(s.rpPos[3].x,s.rpPos[3].y)}for(var t,e=Vo.beachFamilies,i=0;i<4;i++)e&&i<e.length?(t=e[i],this["imgHead"+(i+1)].visible=!0,this["txtFamilyName"+(i+1)].text=t.str):(this["imgHead"+(i+1)].visible=!1,this["txtFamilyName"+(i+1)].text="")},e.loopTime=function(){var t=this.endTime-ya.serverTime;0<t?this.txtTime.text=x.formatTime(t):_t.removeFromSceond(this,this.loopTime)},e.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},_(s,["rpPos",function(){return this.rpPos=[{x:360,y:580},{x:675,y:415},{x:670,y:125},{x:345,y:290}]}]),s}(),hM=function(t){function e(){this.coldTime=0,e.__super.call(this),this.imgHelp.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.plays.beach.view.BeachHelpBtnView",xb);var i=e.prototype;return i.onDisplay=function(){this.coldTime=Mo.getBeachEndTime()-ya.serverTime,0<this.coldTime&&_t.addToSecond(this,this.loopBeachHelpTime)},i.onUndisplay=function(){_t.removeFromSceond(this,this.loopBeachHelpTime),this.coldTime=0},i.onClick=function(){var t=Z.span(" 1、在黄金沙滩中，可点击地面进行移动。","#5d3924")+"<br/>";t+=Z.span("  2、玩家在沙滩中，每隔一段时间可获得一次灵气奖励。","#5d3924")+"<br/>",t+=Z.span(" 3、在黄金沙滩中，进行打坐、双修、击晕及飞吻操作，可获得大量灵气奖励。","#5d3924")+"<br/>",t+=Z.span(" 4、点击互动按钮，拖拉图标到相应的玩家身上，可与其进行互动。","#5d3924"),EF.show(t)},i.update=function(){this.txtScore.text=Vo.accumulatedSpirit+""},i.loopBeachHelpTime=function(){0<=this.coldTime?(this.txtTime.text=x.formatTime(this.coldTime),this.coldTime--):(_t.addToSecond(this,this.loopBeachHelpTime),_t.setTimeout(el.ins(),el.ins().toExit,null,5e3))},e}(),uM=function(t){function e(){this.endTime=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.update),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.plays.beach.view.BeachResultPanel",Cb);var i=e.prototype;return i.onUndisplay=function(){_t.removeFromSceond(this,this.loopEndTime)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btn:this.closeWindow(),el.ins().toExit(),_t.removeFromSceond(this,this.loopEndTime)}},i.update=function(){switch(Vo.myBeach){case 1:this.txtName.text="顶级沙滩",this.txtName.color="#fdc06a";break;case 2:this.txtName.text="高级沙滩",this.txtName.color="#f299ff";break;case 3:this.txtName.text="中级沙滩",this.txtName.color="#7fd6fe";break;case 4:default:this.txtName.text="初级沙滩",this.txtName.color="#96f254"}this.txtScore.text=Vo.accumulatedSpirit+"",this.endTime=ya.serverTime+5,this.loopEndTime(),_t.addToSecond(this,this.loopEndTime)},i.loopEndTime=function(){this.endTime>=ya.serverTime?this.btn.label="确认（"+(this.endTime-ya.serverTime)+"）":(_t.removeFromSceond(this,this.loopEndTime),el.ins().toExit(),this.closeWindow())},e}(),cM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.plays.beachBoss.view.BeachBossBlockPanel",Pb);var i=e.prototype;return i.update=function(){this.cb1.selected=Se.hideAll,this.cb2.selected=Bo.hideFightEffect,this.copyHideTosHandler()},i.copyHideTosHandler=function(){el.ins().toRoleCopyHide(1==this.cb1.selected&&1==this.cb2.selected)},i.onClick=function(t){switch(t.target){case this.cb1:this.cb1.selected?(Se.hideAll=!0,Se.hideOtherRole(),Se.hideOtherPet()):(Se.hideAll=!1,Se.showRole(),Se.showPet()),this.copyHideTosHandler();break;case this.cb2:Bo.hideFightEffect=this.cb2.selected,this.copyHideTosHandler();break;case this.btnBack:case this.btnClose:this.closeWindow()}},e}(),dM=function(t){var e;function i(){this._vo=null,this.note=null,this.goalBar=null,this.bloodTxt=null,this._monsterID=NaN,i.__super.call(this),this.initGoalPart(),this.escapeTxt.style.fontSize=20,this.escapeTxt.style.align="right",this.escapeTxt.style.color="#ffff00",this.note=new e(this.txtBest.width),this.note.x=this.txtBest.x,this.note.y=this.txtBest.y+this.txtBest.height+1,this.addChild(this.note),this.txtBest.on("click",this,this.onClick),this.btn.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(i,"modules.plays.beachBoss.view.BeachBossBlood",Tb);var s=i.prototype;return s.onUndisplay=function(){_t.removeFromSceond(this,this.onSecond)},s.onDisplay=function(){this.checkShow(),_t.addToSecond(this,this.onSecond)},s.onSecond=function(){var t=Mo.getBeachBossEndTime();this.escapeTxt.innerHTML="沙滩BOSS在"+x.formatMS2(t,ya.serverTime)+"后逃跑"},s.initGoalPart=function(){this.goalBar=new At,this.goalBar.bar.skin="modules/beachBoss/bar2.png",this.goalBar.sizeGrid="0,5,0,5,0",this.goalBar.width=240,this.goalBar.height=10,this.goalBar.x=73,this.goalBar.y=17,this.goalPart.addChild(this.goalBar),this.bloodTxt=new jt,this.bloodTxt.width=240,this.bloodTxt.fontSize=16,this.bloodTxt.align="center",this.bloodTxt.color="#ffffff",this.bloodTxt.pos(73,15),this.goalPart.addChild(this.bloodTxt)},s.reset=function(){this.bmpHead.skin="",this.txtName.text="",this.txtLv.text="",this.txtMy.text="",this.txtBest.text="",this.goalPart.visible=this.note.visible=!1,this.imgArrow.skin="modules/beachBoss/arrowDown.png"},s.checkShow=function(t){ua.isRegrowBossMap()?this.goalPart.visible=!0:this.goalPart.visible=!1},s.onClick=function(t){this.imgArrow.skin="modules/beachBoss/arrowDown.png"==this.imgArrow.skin?"modules/beachBoss/arrowUp.png":"modules/beachBoss/arrowDown.png",this.note.visible="modules/beachBoss/arrowUp.png"==this.imgArrow.skin,this.goalPart.alpha=this.note.visible?0:1},s.updateBlood=function(t){if(this.vo){var e=Math.floor(1e9*(this.vo.maxBlood-t)/this.vo.maxBlood)/10,i=this.binGetIndex(0,1e4,e)+1,s=(i*i-1e8*(this.vo.maxBlood-t)/this.vo.maxBlood)/(2*i-1);this.numTxt.text="×"+(1e4-i),0<s?(this.bossBar1.visible=!0,this.bossBar1.width=596*s):this.bossBar1.visible=!1,this.bossBar1.skin="modules/beachBoss/bar"+(1e4==i?6:i%5+1)+".png",i++,this.bossBar0.skin=1e4<i?null:"modules/beachBoss/bar"+(1e4==i?6:i%5+1)+".png"}},s.checkInFun=function(t,e){return e<t*t?-1:(t+1)*(t+1)<=e?1:0},s.binGetIndex=function(t,e,i){var s=Math.floor((t+e)/2);return 1<e-t?this.checkInFun(s,i)<0?this.binGetIndex(t,s,i):0<this.checkInFun(s,i)?this.binGetIndex(s,e,i):s:s},s.getSubNum=function(t,e){var i=(e-t-1e-4*e)/(2e-4*e);return Math.floor(i)},s.updateGoal=function(t,e){this.vo&&this.vo.id==t&&e&&(this.imgHead.skin="com/head/tiny"+e.category+e.sex+".png",this.txtGoalInfo.text=e.pal_name,this.goalBar.value=e.hp/e.max_hp,this.bloodTxt.text=e.hp+"/"+e.max_hp)},s.updatePeopleFight=function(){var t=Bo.getBossHurtArr();if(0<pe.user.attr.family_id){this.txtMy.visible=!0;var e=Bo.getMyHurt();this.txtMy.text=e?"我的仙盟："+W.getShortenPowerStr(e.damage):"我的仙盟：0"}else this.txtMy.visible=!1;t&&t[0]&&(this.txtBest.text=t[0].family_name+"："+W.getShortenPowerStr(t[0].damage),this.txtBest.color=pe.user.attr.family_id==t[0].family_id?"#f4f1b2":"#c29d88"),this.note.update(t)},I(0,s,"bossID",null,function(t){this._vo=Ts.getBossVO(t),this.vo&&(this.txtName.text=this.vo.bossName,this.txtLv.text=this.vo.showBossLvStr2,this.bmpHead.skin=this.vo.headUrl)}),I(0,s,"vo",function(){return this._vo}),I(0,s,"monsterID",function(){return this._monsterID},function(t){this._monsterID=t}),i.__init$=function(){e=function(t){function e(t){this.w=0,this.startY=3,this.itemH=25,this.items=null,this._data=null,this.bg=null,this.spItem=null,e.__super.call(this),this.items=this.items||[],this.w=t,this.bg=new Wt,this.addChild(this.bg),this.bg.alpha=.8,this.spItem=new Wt,this.addChild(this.spItem)}w(e,"",Wt);var i=e.prototype;return i.update=function(t){if(this.putInPool(),this._data=t,this._data&&1<this._data.length){for(var e,i,s=1;s<this._data.length;s++)e=this._data[s],i=this.getItem(),e&&(i.text=e.family_name+"："+W.getShortenPowerStr(e.damage),i.color=pe.user.attr.family_id==e.family_id?"#f4f1b2":"#c29d88"),i.y=(s-1)*this.itemH+this.startY,this.spItem.addChild(i);this.drawBg()}else this.bg.graphics.clear()},i.drawBg=function(){this._data&&(this.bg.graphics.clear(),this.bg.graphics.drawRect(0,0,this.w,(this._data.length-1)*this.itemH+this.startY,"#110b0d"))},i.getItem=function(){this.items=this.items||[];var t=this.items.shift();return null==t&&((t=Me.createText("",0,0,this.w,this.itemH,this.spItem,H.defaultTextFormat)).align="right",t.color="#c29d88",t.fontSize=22),t},i.putInPool=function(){for(var t;0<this.spItem.numChildren;)t=this.spItem.getChildAt(0),this.items.push(t.removeSelf())},e}()},i}(),pM=function(t){function e(){this.sbar=null,e.__super.call(this),this.sbar=new p(0,7,445,27,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5],[5,5,5,5],[1,1,1,1]),this.spBar.addChild(this.sbar),this.imgSkill.on("click",this,this.onClick)}w(e,"modules.plays.beachBoss.view.BeachBossCollectScoreView",kb);var i=e.prototype;return i.onClick=function(t){yr.ins().showSkillTipView()},i.update=function(){var t=0;switch(Bo.curBeachStep){case 2:this.spDetail.visible=!0,this.spEnd.visible=!1,(t=Mo.getFirstNoticeEndTime()-ya.serverTime)<0&&(t=0),this.updateSpDetail(t,"炎之力出现倒计时：");break;case 3:this.spDetail.visible=!0,this.spEnd.visible=!1,(t=Mo.getFirstCollectEndTime()-ya.serverTime)<0&&(t=0),this.updateSpDetail(t,"第一阶段结算倒计时：");break;case 4:case 5:this.spDetail.visible=!0,this.spEnd.visible=!1,this.updateSpDetail(0,"");break;case 6:this.spDetail.visible=!0,this.spEnd.visible=!1,(t=Mo.getSecondNoticeEndTime()-ya.serverTime)<0&&(t=0),this.updateSpDetail(t,"炎之力出现倒计时：");break;case 7:this.spDetail.visible=!0,this.spEnd.visible=!1,(t=Mo.getSecondCollectEndTime()-ya.serverTime)<0&&(t=0),this.updateSpDetail(t,"第二阶段结算倒计时：");break;case 8:case 9:this.spDetail.visible=!0,this.spEnd.visible=!1,this.updateSpDetail(0,"");break;case 10:this.updateSpEnd()}},i.updateSpDetail=function(t,e){var i=Bo.remainingTime-ya.serverTime;if(Bo.baseVO&&Bo.familyProgress>=Bo.baseVO.targetCollectNum)this.sp100.visible=!0,this.spDetail.visible=!1,this.updateSp100(i);else switch(this.sp100.visible=!1,this.spDetail.visible=!0,this.imgBg.skin="modules/beachBoss/collectBg.png",Bo.curBeachStep){case 2:case 3:0<i?this.updateSpDetailPart1(i):this.spPart1.visible=!1,this.updateSpDetailPart2(t,e);break;case 4:case 5:0<i&&(this.updateSpDetailPart1(i),this.spPart2.visible=!1,this.imgBg.visible=!1);break;case 7:0<i?this.updateSpDetailPart1(i):this.spPart1.visible=!1,this.updateSpDetailPart2(t,e);break;case 8:case 9:0<i&&(this.updateSpDetailPart1(i),this.spPart2.visible=!1,this.imgBg.visible=!1);break;default:this.updateSpDetailPart2(t,e)}},i.updateSpDetailPart1=function(t){this.spPart1.visible=!0,this.txtTime1.text=t+"秒";var e=Bo.getStepByProgress(Bo.familyProgress);e&&(this.txtActiveInfo.text=e.desc1)},i.updateSpDetailPart2=function(t,e){var i,s;this.spPart2.visible=!0,this.imgBg.visible=!0,this.txtInfo1.text=e,this.txtTime2.text=t+"秒",0==Bo.familyProgress?(i=null,s=Bo.getStepById(1)):Bo.baseVO&&Bo.familyProgress==Bo.baseVO.targetCollectNum?(i=Bo.getStepByProgress(Bo.familyProgress),s=null):0<Bo.familyProgress&&Bo.baseVO&&Bo.familyProgress<Bo.baseVO.targetCollectNum&&(s=(i=Bo.getStepByProgress(Bo.familyProgress))?Bo.getStepById(i.id+1):Bo.getStepById(1)),i?(this.txtCur.visible=!0,this.txtCur.text=i.desc):this.txtCur.visible=!1,s?(this.txtNext.visible=!0,this.txtNext.text=s.desc):this.txtNext.visible=!1,Bo.baseVO&&this.sbar.setValue(Bo.familyProgress,Bo.baseVO.targetCollectNum)},i.updateSp100=function(t){this.spDetail.visible=this.spEnd.visible=!1,this.sp100.visible=!0,this.imgBg.skin="modules/beachBoss/collect100Bg.png";var e=Bo.getStepByProgress(Bo.familyProgress);e&&(this.txtInfo2.text=e.desc1),0<=t?this.txtTime3.text=t+"秒":(this.txtTime3.text="0秒",this.removeSelf())},i.updateSpEnd=function(){this.spDetail.visible=this.sp100.visible=!1,this.spEnd.visible=!0,this.imgBg.skin="modules/beachBoss/collectBg.png";var t=Mo.getBeachBossEndTime()-ya.serverTime;this.txtEndTime.text=t+"秒"},e}(),mM=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick)}return w(e,"modules.plays.beachBoss.view.BeachBossControlView",Ab),e.prototype.onClick=function(t){yr.ins().openBlockPanel()},e}(),fM=function(t){function e(){this.openTime=0,e.__super.call(this),this.setWindowType(),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.on("click",this,this.onClick)}w(e,"modules.plays.beachBoss.view.BeachBossEnterPanel",Eb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnEnter:0<pe.user.attr.family_id?Mo.isBossTime()?Lr.ins().toMapChange(26e3):Jt.addTip("沙滩BOSS功能开放时间为21:30—21:35"):Jt.addTip("需加入仙盟后才可挑战沙滩BOSS")}},i.onUnDisplay=function(){_t.removeFromSceond(this,this.loopTimeUpdate)},i.onDisplay=function(){this.loopTimeUpdate(),_t.addToSecond(this,this.loopTimeUpdate)},i.loopTimeUpdate=function(){if(Mo.isBossTime())this.txtTime.visible=!1,this.txtTimeDesc.visible=!1;else{0==this.openTime&&(this.openTime=Mo.getBeachBossOpenTime());var t=this.openTime-ya.serverTime;0<t?(this.txtTime.visible=!0,this.txtTimeDesc.visible=!0,this.txtTime.text=x.formatTime(t)):(this.txtTime.visible=!1,this.txtTimeDesc.visible=!0,_t.removeFromSceond(this,this.loopTimeUpdate))}},e}(),_M=function(t){function e(){e.__super.call(this);var t=new Wt;t.graphics.drawRect(0,0,this.width,this.height,"#000000"),t.alpha=.6,this.addChildAt(t,0)}return w(e,"modules.plays.beachBoss.view.BeachBossWinView",Rb),I(0,e.prototype,"uiClass",function(){return"BeachWinTip"}),e.show=function(t){(e._ins=e._ins||new e).txt.text=t,e._ins.pos((lt.stageWidth-e._ins.width)/2,lt.stageHeight/2-100),lt.uiLayer.addChild(e._ins),_t.setTimeout(e,e.onTimeout,null,4e3)},e.onTimeout=function(){null!=e._ins&&e._ins.removeSelf()},e._ins=null,e}(),gM=function(t){function e(){this.curIndex=0,this.curCrystalVO=null,this.mainVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.mainVO=Ho.mainVO,this.html.innerHTML=Z.span("每次建造任意水晶都可获得","#5d3924")+Z.span("【符文礼包】","#7223b5")+Z.span("×1","#5d3924"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(e,"modules.plays.city.view.CrystalBuildPanel",Ob);var i=e.prototype;return i.onDisplay=function(){T.register("PLAYS_UPDATE_PANEL",this,this.onPowerUnpdate),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){T.remove("PLAYS_UPDATE_PANEL",this,this.onPowerUnpdate),this.off("undisplay",this,this.onUnDisplay)},i.onPowerUnpdate=function(){if(this.curCrystalVO){var t=Ho.curVigor>=this.curCrystalVO.buildNeedPower?"#e1c6bc":"#b60202";this.txtNeedPower.innerHTML=Z.font(Ho.curVigor+"",t,24)+Z.font("/"+this.curCrystalVO.buildNeedPower,"#e1c6bc",24)}},i.update=function(){this.curCrystalVO=Ho.getCrystalVO(Ho.curReflashType),this.curCrystalVO&&this.mainVO&&(this.txtLv.text=this.curCrystalVO.name+"Lv."+this.curCrystalVO.lv,this.txtTime.text=this.curCrystalVO.buildNeedTime+"小时",this.txtExp.text=this.curCrystalVO.unitOutput+"/"+this.curCrystalVO.unitTime+"分钟",this.txtNeedScore.text=""+this.mainVO.reflashCrystalNeed,this.txtOutputName.text=this.curCrystalVO.scoreName+"：",this.imgScore.skin=this.curCrystalVO.scoreUrl,this.imgCrystal.skin=this.curCrystalVO.url,this.imgScore.x=this.txtOutputName.textWidth+this.txtOutputName.x,this.txtExp.x=this.imgScore.x+this.imgScore.width+5,this.onPowerUnpdate())},i.conFresh=function(){pe.getScore(15)>=Ho.searchMoney?vr.ins().toReflashCrystal(1):Jt.addTip("紫晶币不足")},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btnFlash:if(this.curCrystalVO&&3<=this.curCrystalVO.lv){var e=new Ee;e.msg="当前已经刷新到"+this.curCrystalVO.lv+"级"+this.curCrystalVO.name+"，是否还要继续刷新？",e.yesCaller=this,e.yesFun=this.conFresh,e.key="crystalRefresh",EF.showVO(e)}else this.conFresh();break;case this.btnBuild:vr.ins().toBuild(this.curIndex),this.closeWindow();break;case this.txtLink:vr.ins().openCrystalIntroPanel()}},I(0,i,"index",null,function(t){this.curIndex=t}),e}(),yM=function(t){function e(){this.curVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.CrystalFamilyHelpPanel",Lb);var i=e.prototype;return i.update=function(t){(this.curVO=t)&&(this.txtName.text=t.own_name,this.txtPower.text=""+t.own_power,this.imgHead1.skin="com/head/main"+t.own_head+".png",this.txtNameOther.text=t.occupy_name,this.txtPowerOther.text=""+t.occupy_power,this.txtFamily.text=t.occupy_family,this.imgHead2.skin="com/head/main"+t.occupy_head+".png")},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.curVO&&vr.ins().toFight(this.curVO.own_id,2,this.curVO.mine_id),this.closeWindow()}},e}(),vM=function(t){function e(){this.pData=null,this.pHis=null,this.curVO=null,e.__super.call(this),this.html.style.valign="top",this.html.style.leading=10}return w(e,"modules.plays.city.view.CrystalHoldInfoItem",Db),e.prototype.setData=function(t,e){if(this.pData=t,this.pData&&(this.curVO=Ho.getCrystalVO(this.pData.type_id),this.pData.history&&(this.pHis=this.pData.history[e]),this.curVO&&this.pHis)){var i,s=Wo.getCrystalScoreOutput(this.pData.type_id,this.pHis.start_ts,this.pHis.end_ts);this.pHis.id!=this.pData.own_id?(s=Math.floor(7*s/10),i="掠夺"):i="获得",this.html.innerHTML=Z.span(this.pHis.name+"，占领时间"+x.formatTotalHMS((0==this.pHis.end_ts?ya.serverTime:this.pHis.end_ts)-this.pHis.start_ts)+"，"+i+"资源","#5d3924",26)+Z.span(this.curVO.scoreName+"×"+s,"#ffe0cf",26)}},e}(),IM=function(t){function e(){this.POOL_SIGN="CrystalHoldInfoPanel_CrystalHoldInfoItem",this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.panel.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.CrystalHoldInfoPanel",Nb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:case this.btn:this.closeWindow()}},i.rePool=function(){for(var t;0<this.panel.numChildren;)(t=this.panel.removeChildAt(this.panel.numChildren-1))&&kt.recover(this.POOL_SIGN,t)},I(0,i,"data",null,function(t){if(this.rePool(),this._data=t,this._data&&this._data.history)for(var e,i=0;i<this._data.history.length;i++)(e=kt.getItemByClass(this.POOL_SIGN,vM))&&(e.setData(this._data,i),e.pos(0,90*i),this.panel.addChild(e))}),e}(),wM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}return w(e,"modules.plays.city.view.CrystalIntroPanel",Vb),e.prototype.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e}(),bM=function(t){function e(){this._data=null,this.curVO=null,this.avo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.CrystalMyHarryInfoPanel",Bb);var i=e.prototype;return i.update=function(){this.data?(this.curVO=Ho.getCrystalVO(this.data.type_id),this.curVO&&(this.txtLv.text=this.curVO.name+"Lv."+this.curVO.lv,this.txtExp.text=this.curVO.unitOutput+"/"+this.curVO.unitTime+"分钟",this.txtScoreName.text=this.curVO.scoreName+"：",this.txtGet.text=this.curVO.scoreName+"×"+Wo.getMyHarryGetScore(this.data),this.txtOtherName.text=this.data.own_name,this.txtOtherFamily.text=this.data.own_family,this.imgCrystal.skin=this.curVO.url,this.data.end_ts<=ya.serverTime||_t.addToSecond(this,this.loopTime))):this.onRemove()},i.loopTime=function(){this.data&&ya.serverTime<this.data.end_ts?this.txtTime.text=x.formatTime(this.data.end_ts-ya.serverTime):(this.txtTime.visible=!1,this.onRemove())},i.onRemove=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.data&&(this.avo=this.avo||new Ee,this.avo.msg="是否放弃占领水晶",this.avo.yesCaller=vr.ins(),this.avo.yesFun=vr.ins().toGiveUp,this.avo.yesArgs=[this.data.own_id],EF.showVO(this.avo))}},I(0,i,"data",function(){return this._data},function(t){this._data=t,this.update()}),e}(),SM=function(t){function e(){this._data=null,this.curVO=null,this.beHarry=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.CrystalMyInfoPanel",Mb);var i=e.prototype;return i.update=function(){this.data?(this.beHarry=this.data.own_id!=this.data.occupy_id,this.txtLink.visible=this.spHarry.visible=this.beHarry,this.data.end_ts<=ya.serverTime||_t.addToSecond(this,this.loopTime),this.curVO=Ho.getCrystalVO(this.data.type_id),this.curVO&&(this.txtLv.text=this.curVO.name+"Lv."+this.curVO.lv,this.txtExp.text=this.curVO.unitOutput+"/"+this.curVO.unitTime+"分钟",this.txtScoreName.text=this.curVO.scoreName+"：",this.txtGet.text=this.curVO.scoreName+"×"+Wo.getAlreadyGetScore(this.data),this.imgCrystal.skin=this.curVO.url,this.beHarry?(this.height=660,this.txtOtherName.text=this.data.occupy_name,this.txtLost.text=this.curVO.scoreName+"×"+Wo.getMyCrystalLost(this.data),this.txtPower.text=""+this.data.occupy_power,this.txtOtherFamily.text=this.data.occupy_family,this.btn.label="驱逐"):(this.height=420,this.btn.label="确定"))):this.onRemove()},i.loopTime=function(){this.data&&ya.serverTime<this.data.end_ts?this.txtTime.text=x.formatTime(this.data.end_ts-ya.serverTime):this.closeWindow()},i.onRemove=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.txtLink:if(0<pe.user.attr.family_id&&this.data)if(0<this.data.help_id)Jt.addTip("每次建造只可请求协助一次");else{var e=pe.roleName+"请求你协助驱逐掠夺者";e+=Z.linkcolor("【点击参与】","playsCityCrystalFamilyHelp#"+pe.roleID+"#"+this.data.id,!1),Za.ins().toSendMsg(2e4,e,9),Jt.addTip("已发送邀请")}else Jt.addTip("目前没有仙盟，无法邀请盟友，请先加入仙盟");break;case this.btn:this.beHarry&&this.data?vr.ins().toFight(pe.roleID,1,this.data.id):this.closeWindow()}},I(0,i,"data",function(){return this._data},function(t){this._data=t,this.update()}),e}(),xM=function(t){function e(){e.__super.call(this)}w(e,"modules.pack.packView.LingBaoPackTile",ox);var i=e.prototype;return i.init=function(){this.vScrollBarSkin="com/ui/vscroll.png"},i.createItem=function(t,e){this.packItemArr[e]=this.packItemArr[e]||new ph;var i=this.packItemArr[e];i.goods=t,i.pos(e%this._column*(i.width+23)+20,168*Math.floor(e/this._column)+15),i.goodsImage.imgBG.pos(i.x,i.y),i.goodsImage.imgCa.pos(i.x+68,i.y),i.imgRp.pos(i.x+83,i.y-7),i.goodsImage.txtNum.pos(i.x,i.y+77),i.txtDesc.pos(i.x-10,i.y+109),this.txtSP.addChild(i.goodsImage.txtNum),this.txtSP.addChild(i.txtDesc),this.caSP.addChild(i.goodsImage.imgCa),this.bgSp.addChild(i.goodsImage.imgBG),this.comtentSp.addChild(i)},e}(),CM=function(t){function e(){this._data=null,this.curVO=null,this.mainVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.mainVO=Ho.mainVO,this.html.innerHTML=Z.span("发起掠夺即可获得","#5d3924")+Z.span("【符文礼包】","#7223b5")+Z.span("×1","#5d3924"),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.CrystalOtherInfoPanel",Fb);var i=e.prototype;return i.update=function(){this.data&&(this.data.end_ts<=ya.serverTime||_t.addToSecond(this,this.loopTime),this.curVO=Ho.getCrystalVO(this.data.type_id),this.curVO&&(this.txtScoreName.text=this.curVO.scoreName+"：",this.txtLv.text=this.curVO.name+"Lv."+this.curVO.lv,this.txtExp.text=this.curVO.unitOutput+"/"+this.curVO.unitTime+"分钟",this.imgCrystal.skin=this.curVO.url,this.txtOtherName.text=this.data.occupy_name,this.txtPower.text=""+this.data.occupy_power,this.txtFamily.text=this.data.occupy_family))},i.loopTime=function(){this.data&&ya.serverTime<this.data.end_ts?this.txtTime.text=x.formatTime(this.data.end_ts-ya.serverTime):(this.txtTime.visible=!1,this.onRemove())},i.onRemove=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.data&&vr.ins().toFight(this.data.own_id,1,this.data.id),this.closeWindow();break;case this.txtLink:vr.ins().openHoldInfoPanel(this.data)}},I(0,i,"data",function(){return this._data},function(t){this._data=t,this.update()}),e}(),PM=function(t){function e(){this.pData=null,this.pHis=null,this.curVO=null,e.__super.call(this)}return w(e,"modules.plays.city.view.CrystalResultItem",Ub),e.prototype.setData=function(t,e){if(this.pData=t,this.pData&&(this.curVO=Ho.getCrystalVO(this.pData.type_id),this.pData.history&&(this.pHis=this.pData.history[e]),this.curVO&&this.pHis)){var i=Wo.getCrystalScoreOutput(this.pData.type_id,this.pHis.start_ts,this.pHis.end_ts);this.pHis.id!=this.pData.own_id&&(i=Math.floor(7*i/10)),this.txtName.text=this.pHis.name,this.txtExp.text=this.curVO.scoreName+"×"+i}},e}(),TM=function(t){function e(){this.POOL_SIGN="CrystalResultpanel_CrystalResultItem",this._data=null,this.curCrystalID=0,this.curVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.panel.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.CrystalResultPanel",Gb);var i=e.prototype;return i.update=function(){if(this.rePool(),this.data){this.data.end_ts,ya.serverTime;var t=this.data.history&&1<this.data.history.length;if(this.spHarry.visible=t,this.curVO=Ho.getCrystalVO(this.data.type_id),this.curVO)if(this.txtLv.text=this.curVO.name+"Lv."+this.curVO.lv,this.txtGet.text=this.curVO.scoreName+"×"+Wo.getAlreadyGetScore(this.data),this.imgCrystal.skin=this.curVO.url,t){var e;this.height=580;for(var i,s=0,n=0;n<this.data.history.length;n++)(i=this.data.history[n])&&i.id==pe.roleID||((e=kt.getItemByClass(this.POOL_SIGN,PM))&&(e.setData(this.data,n),e.pos(0,40*s),this.panel.addChild(e)),s++)}else this.height=380}},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.data&&vr.ins().toCrystalGetReward(this.data.id)}},i.rePool=function(){for(var t;0<this.panel.numChildren;)(t=this.panel.removeChildAt(this.panel.numChildren-1))&&kt.recover(this.POOL_SIGN,t)},I(0,i,"data",function(){return this._data},function(t){this._data=t,this.update()}),e}(),kM=function(t){function e(){this.bar=null,this.expeditionKey=0,this.curAmethystVO=null,this.expeditionTs=0,this.monsterTs=0,this.moraleTs=0,e.__super.call(this),this.initSmoothBar(),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),Nt.register("RP_CITY_AMETHYST_EXPLORE",this.btnExplore,new Tt(19,-10)),Nt.register("RP_CITY_AMETHYST_FIGHT",this.btnFight,new Tt(19,-10)),this.on("click",this,this.onClick),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.plays.city.view.PlaysCityAmethystPanel",Hb);var i=e.prototype;return i.initSmoothBar=function(){this.bar=new Gt("com/ui/commonBar$bar.png","com/ui/commonBar.png",[2,7,2,7],[2,7,2,7]),this.bar.x=500,this.bar.y=657,this.bar.width=136,this.bar.posGrid=[1,0,1,0],this.bar.on("complete",this,this.onBarComplete),this.resetBar(),this.addChild(this.bar);var t=new at;t.text="进行中",t.align="center",t.stroke=1,t.strokeColor="#000000",t.fontSize=15,t.color="#ffffff",t.width=136,t.height=10,this.bar.addChild(t)},i.resetBar=function(){this.bar.value=0,this.bar.visible=!1,this.bar.updateNow()},i.yes=function(){this.bar.visible=!0,this.bar.value=1},i.onBarComplete=function(){1==this.bar.value&&(Ho.expeditioning=!1,Ho.expeditionRewards&&0<Ho.expeditionRewards.length&&vr.ins().openExploreRewardPanel(),this.resetBar())},i.onUndisplay=function(){_t.removeFromSceond(this,this.loopMoraleTs),_t.removeFromSceond(this,this.loopMonsterTs),_t.removeFromSceond(this,this.loopExpeditionTs),_t.clearTimeout(this.expeditionKey)},i.onClick=function(t){switch(t.target){case this.btnUp:this.curAmethystVO&&(Ho.curCityLv<Math.floor(this.curAmethystVO.conditions[0])?Jt.addTip("符炉等级不满足升级条件"):pe.getScore(15)<Math.floor(this.curAmethystVO.conditions[1])?Jt.addTip("紫晶币不足，无法升级"):vr.ins().toPurpleMineUpgrade());break;case this.btnExplore:Ho.expeditioning=!0,this.expeditionKey=_t.setTimeout(this,this.resetExpeditioning,null,2e3),Ho.expeditionRewards=[],this.yes(),vr.ins().toPurpleMineExpedition();break;case this.btnFight:Lr.ins().toMapChange(24005);break;case this.btnClose:case this.btnClose2:this.closeWindow()}},i.resetExpeditioning=function(){Ho.expeditioning=!1},i.update=function(){this.txtLevel.text="Lv."+Ho.purpleMineLevel;var t=pe.getScore(15);if(this.txtAmethyst.text=t+"",this.curAmethystVO=Ho.getAmethystVO(Ho.purpleMineLevel),this.imgRPUp.visible=!1,this.curAmethystVO){if(this.imgIcon.skin="modules/playsCity/"+this.curAmethystVO.url+".png",this.txtCurEffect.text=this.curAmethystVO.monsterNum+"矿工妖兽",this.curAmethystVO.level<Ho.mainVO.amethystMaxLevel){var e=Ho.getAmethystVO(this.curAmethystVO.level+1);e&&(this.txtNextEffect.text=e.monsterNum+"矿工妖兽")}else this.txtNextEffect.text="已满级";Ho.purpleMineLevel<Ho.mainVO.amethystMaxLevel?(this.txtCondition.visible=!0,this.btnUp.disabled=!1,this.btnUp.label="升级",this.txtCondition.innerHTML=Z.span("符炉等级LV."+this.curAmethystVO.conditions[0]+"、","#ffe0cf")+Z.span("紫晶币","#f299ff")+Z.span("×"+this.curAmethystVO.conditions[1],"#ffe0cf")):(this.btnUp.disabled=!0,this.btnUp.label="已满级",this.txtCondition.visible=!1),this.curAmethystVO&&this.curAmethystVO.conditions[0]<=Ho.curCityLv&&pe.getScore(15)>=this.curAmethystVO.conditions[1]?this.imgRPUp.visible=!0:this.imgRPUp.visible=!1,this.txtNum.text=this.curAmethystVO.monsterNum+"",this.txtProduct.text=this.curAmethystVO.product+"",this.moraleTs=Ho.purpleMineMoraleTs-ya.serverTime,0<this.moraleTs?(this.loopMoraleTs(),_t.addToSecond(this,this.loopMoraleTs)):(this.txtUp.text="无",_t.removeFromSceond(this,this.loopMoraleTs));var i=Ho.purpleMineMapList[0];i?(this.monsterTs=i.val-ya.serverTime,0<this.monsterTs?(this.loopMonsterTs(),this.btnFight.disabled=!0,_t.addToSecond(this,this.loopMonsterTs)):(this.btnFight.disabled=!1,this.txtColdTime.visible=!1,_t.removeFromSceond(this,this.loopMonsterTs))):(this.btnFight.disabled=!1,this.txtColdTime.visible=!1,_t.removeFromSceond(this,this.loopMonsterTs)),this.expeditionTs=Ho.purpleMineExpeditionTs-ya.serverTime,0<this.expeditionTs?(this.btnExplore.disabled=!0,this.loopExpeditionTs(),_t.addToSecond(this,this.loopExpeditionTs)):(this.btnExplore.disabled=!1,this.txtColdTime1.visible=!1,_t.removeFromSceond(this,this.loopExpeditionTs))}Wo.checkRPAmethystExpedition(),Wo.checkRPAmethystFight()},i.loopExpeditionTs=function(){0==Ho.expeditioning&&(0<=this.expeditionTs?(this.txtColdTime1.visible=!0,this.txtColdTime1.text=x.formatTotalHMS(this.expeditionTs),this.expeditionTs--):(this.txtColdTime1.visible=!1,this.btnExplore.disabled=!1,Wo.checkRPAmethystExpedition(),_t.removeFromSceond(this,this.loopExpeditionTs)))},i.loopMonsterTs=function(){0<=this.monsterTs?this.curAmethystVO&&(this.txtColdTime.visible=!0,this.txtColdTime.text=x.formatTotalHMS(this.monsterTs),this.monsterTs--):(this.txtColdTime.visible=!1,this.btnFight.disabled=!1,_t.removeFromSceond(this,this.loopMonsterTs),Wo.checkRPAmethystFight())},i.loopMoraleTs=function(){0<=this.moraleTs?(this.curAmethystVO&&(this.txtUp.text=this.curAmethystVO.upDesc),this.moraleTs--):(this.txtUp.text="无",_t.removeFromSceond(this,this.loopMoraleTs))},e}(),AM=function(t){function e(){this._type=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityBuilderItem",Wb);var i=e.prototype;return i.onClick=function(){switch(this.type){case 1:pt.send(36,3,"玩法-符域-紫晶矿洞升级面板"),vr.ins().openAmethystPanel();break;case 2:pt.send(36,4,"玩法-符域-水晶面板"),vr.ins().openMyCrystalPanel();break;case 3:vr.ins().toOpenCave()}},i.update=function(){switch(this.imgTitle.skin="modules/playsCity/builderTitle"+this.type+".png",this.imgRP.visible=!1,this.type){case 1:this.imgIcon.skin="modules/playsCity/builder1_0.png",this.txtLevel.visible=!0,this.txtLevel.y=198,this.txtLevel.text="Lv."+Ho.purpleMineLevel;var t=Wo.checkRPAmethystExpedition(),e=Wo.checkRPAmethystFight(),i=Wo.checkRPAmethystUp();this.imgRP.visible=!!(t||e||i);break;case 2:this.imgIcon.skin="modules/playsCity/builder2_0.png",this.txtLevel.visible=!1;break;case 3:this.imgIcon.skin="modules/playsCity/builder3_1.png",this.txtLevel.visible=!0,this.txtLevel.text="Lv."+Ho._dragonCaveLevel,this.txtLevel.y=280}},I(0,i,"type",function(){return this._type},function(t){switch(this._type=t,this._type){case 1:break;case 2:Nt.register("RP_CITY_CRYSTAL_CAN_REWARD",this,new Tt(70,0)),Nt.register("RP_CITY_CRYSTAL_CAN_BUILD",this,new Tt(70,0)),Nt.register("RP_CITY_CRYSTAL_BE_HARRY",this,new Tt(70,0));break;case 3:Nt.register("RP_CITY_DRAGON_CAVE",this,new Tt(70,0)),Nt.register("RP_CITY_DRAGON_CAVE_LV_UP",this,new Tt(70,0)),Nt.register("RP_CITY_DRAGON_CAVE_CAN_GET_REWARD",this,new Tt(70,0)),Nt.register("RP_CITY_DRAGON_CAVE_CAN_BLESS_UP",this,new Tt(70,0))}}),e}(),EM=function(t){function e(){this._data=null,this.curPData=null,this.curVO=null,this._type=0,e.__super.call(this),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.PlaysCityCrystalItem",qb);var i=e.prototype;return i.onClick=function(t){this.data?vr.ins().openMyHarryInfoPanel(this.curPData):1==this.type&&this.checkToHarry()},i.updateCurCrystal=function(){var t;if(this.data)for(var e in this.data.releate_mine)if((t=this.data.releate_mine[e]).occupy_id==pe.roleID)return this.curPData=t,void(this.curVO=Ho.getCrystalVO(t.type_id));this.curVO=null,this.curPData=null},i.checkToHarry=function(){if(pe.getScore(15)>=Ho.searchMoney){var t=new Ee,e=35<=Ho.curVigor?"#5d3924":"#b60202",i="是否消耗"+Ho.searchMoney+"紫晶币寻找符域？\n所寻找的符域需在5分钟内进行相关操作，否则将需重新寻找符域。<br>掠夺体力消耗："+Z.font(""+Ho.curVigor,e,26)+"/35";t.msg=i,t.key="PlaysCityTowerCrystalView_searchCity",t.yesCaller=this,t.yesFun=this.alertCallBack,EF.showVO(t)}else Jt.addTip("紫晶币不足")},i.alertCallBack=function(){vr.ins().closeMyCrystalPanel(),vr.ins().toSearch()},i.loopTime=function(){this.curPData&&ya.serverTime<this.curPData.end_ts?this.txtTime.text=x.formatTime(this.curPData.end_ts-ya.serverTime):(this.txtTime.visible=!1,this.onRemove())},i.onRemove=function(){_t.removeFromSceond(this,this.loopTime)},I(0,i,"type",function(){return this._type},function(t){this._type=t}),I(0,i,"data",function(){return this._data},function(t){(this._data=t,this.updateCurCrystal(),this.curPData&&this.curVO)?(this.txtTime.visible=this.txtLv.visible=this.bmpCrystal.visible=!0,this.bmpCrystal.skin=this.curVO.url,this.txtLv.text="Lv."+this.curVO.lv,this.curPData.end_ts<=ya.serverTime||_t.addToSecond(this,this.loopTime),this.bmpDefault.visible=!1):(this.bmpCrystal.visible=this.txtLv.visible=this.txtTime.visible=!1,this.bmpDefault.visible=1==this.type,this.onRemove())}),e}(),RM=function(t){function e(){this.itemPool=null,this.items=null,this.curVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.itemPool=[],this.items=[],this.btn.on("click",this,this.onClick),this.btnClose.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityEventPanel",Yb);var i=e.prototype;return i.onClick=function(t){switch(this.closeWindow(),t.currentTarget){case this.btn:this.curVO&&this.curVO.needVigor<=Ho.curVigor?Lr.ins().toMapChange(this.curVO.mapID):Jt.addTip("体力不足，无法进行讨伐");break;case this.btnClose:}},i.onLink=function(t){vr.ins().toDoEvent(parseInt(t))},i.getOneItem=function(){return 0<this.itemPool.length?this.itemPool.shift():new V},i.rePool=function(){for(var t;0<this.items.length;)(t=this.items.pop())&&(t.offAll(),this.itemPool.push(t.removeSelf()))},I(0,i,"eventID",null,function(t){this.rePool(),this.curVO=Ho.getEventVO(t),this.curVO&&(this.txtName.text=this.curVO.name,this.txtTitle.text=this.curVO.title,this.type=this.curVO.eventType,this.img.skin=this.curVO.url,this.txtResult.text=this.curVO.result)}),I(0,i,"result",null,function(t){this.rePool(),this.curVO&&(0==t?(this.txtTitle.text=this.curVO.falseWord,this.spResult.visible=!1):1==t&&(this.txtTitle.text=this.curVO.trueWord,this.spResult.visible=!0))}),I(0,i,"type",null,function(t){switch(this.spResult.visible=!1,t){case 1:var e,i;this.txtNeed.visible=this.btn.visible=!1;for(var s=this.curVO.options,n=0;n<s.length;n++)e=s[n],(i=this.getOneItem()).pos(265,this.txtTitle.textHeight+65+55*n),i.setLinkText(n+1+"."+e[0],"#96f254",!0,24,e[1]),i.on("link",this,this.onLink),this.addChild(i),this.items.push(i);break;case 2:this.txtNeed.visible=this.btn.visible=!0,this.txtNeed.text="消耗体力："+this.curVO.needVigor}}),e}(),OM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityExploreRewardPanel",Xb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:case this.btnClose:this.closeWindow()}},i.update=function(){if(Ho.expeditionRewards&&0<Ho.expeditionRewards.length){var t=Ho.expeditionRewards[0];if(t){var e=ur.getRewardByTkv(t);e&&(this.imgIconBg.skin="com/ui/goodsBg"+e.color+".png",this.imgIcon.skin=e.realMaxico,this.txtNum.text=t.val+"",this.txtName.color=U.getColorLight(e.color),this.txtName.text=t.val+e.name)}}},e}(),LM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btn.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityLevelIncomeView",Kb);var i=e.prototype;return i.onClick=function(){this.closeWindow()},i.update=function(){var t,e=Ho.getCityLvVO(Ho.curCityLv);e&&(this.txtLevel.text="Lv."+Ho.curCityLv,this.txtCurWelfare.text="紫晶币×"+e.welfare,this.txtCurFind.text=e.findDesc,this.txtCurSmelt.text="熔炼"+e.smelt+"次"),Ho.curCityLv<Ho.mainVO.maxCityLv?((t=Ho.getCityLvVO(Ho.curCityLv+1))&&(this.txtNextWelfare.text="紫晶币×"+t.welfare,this.txtNextFind.text=t.findDesc,this.txtNextSmelt.text="熔炼"+t.smelt+"次"),this.spNext.visible=!0,this.txtFull.visible=!1):(this.spNext.visible=!1,this.txtFull.visible=!0)},e}(),DM=function(t){function e(){this._type=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityOtherBuilderItem",Wb);var i=e.prototype;return i.onClick=function(){switch(this.type){case 1:break;case 2:Ho.isOtherCityShow()?Ho.otherCityInfo&&(vr.ins().toRoleMineInfo(Ho.otherCityInfo.role_id),vr.ins().openOtherCrystalPanel()):(Jt.addTip("超过10分钟未进行攻城，请重新寻找符域"),T.dispatch("PLAYS_UPDATE_PANEL"));break;case 3:Jt.addTip("即将开放，敬请期待")}},i.update=function(){switch(this.imgTitle.skin="modules/playsCity/builderTitle"+this.type+".png",this.imgRP.visible=!1,this.imgTip.visible=!0,this.type){case 1:break;case 2:this.imgIcon.skin="modules/playsCity/builder2_0.png",this.txtLevel.visible=!1;break;case 3:this.imgIcon.skin="modules/playsCity/builder3_0.png",this.txtLevel.visible=!1}},I(0,i,"type",function(){return this._type},function(t){this._type=t}),I(0,i,"uiClass",function(){return"PlaysCityBuilderItem"}),e}(),NM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityMissionPanel",jb);var i=e.prototype;return i.update=function(){var t,e,i,s=Ho.mainVO.getMissionIDs();if(s)for(var n,o=0;o<s.length;o++)if(n=[],t=Ho.getMissionInfoByID(s[o]),e=Ho.getMissionVO(s[o]),t&&e){var a;for(var l in e.rewardArr)a=e.rewardArr[l],(i=ur.getItem(a[0]))&&n.push(i.name+"×"+a[1]);this["txtName"+(o+1)].text=e.name,this["htmlNeed"+(o+1)].innerHTML=e.getTipStr(t.type),this["txtRewards"+(o+1)].text=n.join(),this.setBtnState(this["btn"+(o+1)],t.val)}},i.setBtnState=function(t,e){switch(e){case 0:case 1:t.label="领取",t.disabled=!1;break;case 2:t.label="已领取",t.disabled=!0}},i.onClick=function(t){var e,i=Ho.mainVO.getMissionIDs();switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn1:i&&((e=Ho.getMissionInfoByID(i[0]))&&1<=e.val?vr.ins().toGetReward(i[0]):Jt.addTip("未完成任务，无法领取奖励"));break;case this.btn2:i&&((e=Ho.getMissionInfoByID(i[1]))&&1<=e.val?vr.ins().toGetReward(i[1]):Jt.addTip("未完成任务，无法领取奖励"))}},e}(),VM=function(t){function e(){this.pool=null,this.curVO=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityMonsterPanel",Qb);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.curVO&&(this.curVO.needVigor>Ho.curVigor?Jt.addTip("体力不足，无法进行挑战"):Lr.ins().toMapChange(this.curVO.mapID))}},i.getOne=function(){return this.pool=this.pool||[],0<this.pool.length?this.pool.shift():new Ah(91,95,!1,!0,!0)},i.rePool=function(){var t;for(this.pool=this.pool||[];0<this.spRewards.numChildren;)(t=this.spRewards.getChildAt(0))&&this.pool.push(t.removeSelf())},I(0,i,"monsterID",null,function(t){if(this.rePool(),this.curVO=Ho.getMonsterVO(t),this.curVO){if(this.txtName.text=this.curVO.name,this.txtPower.text=""+W.getShortenPowerStr(this.curVO.needPower),this.img.skin="modules/playsCity/panel"+this.curVO.monsterID+".png",this.txtNeed.text=""+this.curVO.needVigor,this.curVO.getRewards())for(var e,i=0;i<this.curVO.getRewards().length;i++)(e=this.getOne()).dataSource=this.curVO.getRewards()[i],this.spRewards.addChild(e);rt.layoutHorizontalInCenter(this.spRewards,30,this.spRewards.width,105,-35)}}),e}(),BM=function(t){function e(){this.view=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.view=new YM,this.view.type=1,this.addChild(this.view),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityMyCrystalPanel",zb);var i=e.prototype;return i.update=function(){this.view.update()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),vr.ins().delayCheckCrystalReward()},e}(),MM=function(t){function e(){this.pData=null,e.__super.call(this)}w(e,"modules.plays.city.view.PlaysCityNoteItem",t);var i=e.prototype;return i.reset=function(){this.txtTime.text="",this.txtMsg.text=""},i.getMsg=function(){var t="";if(this.pData)switch(this.pData.type){case 1:this.pData.src_id==pe.roleID?this.pData.dst_id==pe.roleID&&1==this.pData.win&&(t="你成功地驱逐了掠夺者"+this.pData.occupy_name+"（已被掠夺"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score+"）"):this.pData.dst_id==pe.roleID&&this.pData.src_id!=pe.roleID?t=this.pData.src_name+"占领了你的水晶":this.pData.dst_id!=pe.roleID&&this.pData.occupy_id==pe.roleID&&this.pData.src_id==this.pData.dst_id&&1==this.pData.win?t="你占领的"+this.pData.dst_name+"的水晶，已被"+this.pData.src_name+"驱逐，仅获得"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score:this.pData.dst_id!=pe.roleID&&this.pData.occupy_id==pe.roleID&&this.pData.src_id!=this.pData.dst_id&&1==this.pData.win&&(t="你占领的"+this.pData.dst_name+"的水晶，已被"+this.pData.src_name+"抢走，仅获得"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score);break;case 2:this.pData.src_id!=pe.roleID&&this.pData.dst_id==pe.roleID?t=this.pData.src_name+"协助你，成功将"+this.pData.occupy_name+"驱逐出你的符域。（已被掠夺"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score+"）":this.pData.src_id!=pe.roleID&&this.pData.dst_id!=pe.roleID&&(t="你占领的"+this.pData.dst_name+"的水晶，已被"+this.pData.src_name+"驱逐，仅获得"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score);break;case 3:this.pData.occupy_id==pe.roleID&&this.pData.dst_id!=pe.roleID?t="你占领的"+this.pData.dst_name+"的水晶，已进行结算。你共获得了"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score:this.pData.occupy_id!=pe.roleID&&this.pData.dst_id==pe.roleID&&(t=this.pData.occupy_name+"抢夺了你，你损失了"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score);break;case 4:t=this.pData.src_id==pe.roleID?"你放弃占领"+this.pData.dst_name+"的水晶，获得"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score:this.pData.src_name+"抢夺了你，你损失了"+this.getScoreNameByType(this.pData.score_type)+"×"+this.pData.score}return t},i.getScoreNameByType=function(t){switch(t){case 2:return"符炉经验";case 3:return"紫水晶";case 4:return"符文精华"}return""},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this.reset(),this.pData=t,this.pData&&(this.txtTime.text=x.format(this.pData.log_ts),this.txtMsg.text=this.getMsg())}),e}($b),FM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.itemRender=MM,this.list.scrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityNotePanel",Zb);var i=e.prototype;return i.update=function(){this.list.dataSource=Ho.logs},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e}(),UM=function(t){function e(){this.view=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.view=new YM,this.view.type=2,this.addChild(this.view),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityOtherCrystalPanel",Jb);var i=e.prototype;return i.update=function(){this.view.update()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e}(),GM=function(t){function e(){this.pCity=null,this.pRole=null,this.good=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.good=new Ah(91,95,!1,!0,!0),this.good.pos(245,280),this.addChild(this.good),this.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCityRevengePanel",tS);var i=e.prototype;return i.update=function(){if(this.pCity){this.txtName.text="掠夺者：",this.txtTime.text=x.format(this.pCity.log_ts);var t=ur.getItem(Ho.mainVO.revengeRewards);this.good.dataSource=t,this.good.num=this.pCity.score}this.pRole&&(this.txtPower.text="战斗力："+W.getShortenPowerStr(this.pRole.power),this.imgHead.skin="com/head/big"+this.pRole.category+this.pRole.sex+".png")},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow();break;case this.btn:this.pCity}},I(0,i,"roleInfo",null,function(t){this.pRole=t,this.update()}),I(0,i,"log",null,function(t){this.pCity=t,this.update()}),e}(),HM=function(t){function e(){this.pData=null,this._index=0,this._type=0,this.isBuild=!1,this.getEndTime=0,e.__super.call(this),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.PlaysCitySceneCrystalItem",eS);var i=e.prototype;return i.update=function(){if(this.txtLv.visible=this.txtTime.visible=this.bmpNameBg.visible=this.bmpCrystal.visible=this.bmpTip.visible=this.bmpDefault.visible=!1,this.pData){var t=this.pData.end_ts<=ya.serverTime,e=this.pData.own_id!=this.pData.occupy_id;switch(this.txtTime.visible=!t,this.bmpNameBg.visible=e,this.txtName.text=this.pData.occupy_name,t?this.onRemove():_t.addToSecond(this,this.loopTime),this.type){case 1:this.bmpTip.visible=e||t,t?this.bmpTip.skin="modules/playsCity/tipGet.png":e&&(this.bmpTip.skin="modules/playsCity/tipBe.png");break;case 2:this.bmpDefault.visible=!1,this.bmpTip.visible=!t,this.bmpTip.skin="modules/playsCity/tipCan.png"}var i=Ho.getCrystalVO(this.pData.type_id);i&&(this.txtLv.visible=!0,this.txtLv.text=i.name+"Lv."+i.lv,this.bmpCrystal.skin=i.url,this.bmpCrystal.visible=!0)}else 1==this.type&&(this.bmpDefault.visible=!0),this.onRemove();this.checkRP()},i.checkRP=function(){this.imgRP.visible=1==this.type&&(!this.pData&&35<=Ho.curVigor||Wo.checkRP_isOneBeHarry(this.pData)||this.pData&&this.pData.end_ts<=ya.serverTime)},i.loopTime=function(){this.pData&&ya.serverTime<this.pData.end_ts?this.txtTime.text=x.formatTime(this.pData.end_ts-ya.serverTime)+"可收成":this.update()},i.onRemove=function(){_t.removeFromSceond(this,this.loopTime)},i.onClick=function(t){switch(this.type){case 1:this.pData?this.pData.end_ts>=ya.serverTime?vr.ins().openMyInfoPanel(this.pData):vr.ins().openResultPanel(this.pData):vr.ins().openBuildPanel(this.index),Ho.noteRPClick(this.pData),this.checkRP();break;case 2:this.pData&&(this.pData.end_ts>=ya.serverTime?vr.ins().openOtherInfoPanel(this.pData):Jt.addTip("已经结算，不能掠夺"))}},I(0,i,"type",function(){return this._type},function(t){this._type=t}),I(0,i,"data",null,function(t){this.pData=t,this.update()}),I(0,i,"index",function(){return this._index},function(t){this._index=t}),e}(),WM=function(t){function e(){this.viewType=0,this.tower=null,this.towerBar=null,this.curLvvo=null,this.items=null,e.__super.call(this),this.tower=new KM,this.tower.pos(87,128),this.addChild(this.tower),this.tower.on("click",this,this.onClick)}w(e,"modules.plays.city.view.PlaysCitySceneView",iS);var i=e.prototype;return i.update=function(t){t=null==t?Ho.otherCityInfo:t;var e=pe.getScore(15);this.txtAmethyst.text=e+"",this.txtGold.text=pe.user.attr.gold+"";var i=pe.getScore(8);this.txtCrystal.text=i+"",1==this.viewType?(this.imgShield.visible=Ho.isProtected(),this.txtLv.text="LV."+Ho.curCityLv,this.txtName.text=pe.roleName+"的符域",this.imgExp.visible=this.towerBar.visible=!0,this.curLvvo=Ho.getCityLvVO(),this.curLvvo&&(this.curLvvo.lv>=Ho.mainVO.maxCityLv?this.towerBar.setValue(this.curLvvo.needExp,this.curLvvo.needExp):this.towerBar.setValue(Ho.curCityExp,this.curLvvo.needExp)),this.tower.level=Ho.curCityLv):(this.imgShield.visible=!1,this.imgExp.visible=this.towerBar.visible=!1,t&&(this.txtName.text=t.name+"的符域",this.tower.level=t.city_level));for(var s=0;s<this.items.length;s++)this.items[s].update()},i.onClick=function(t){switch(this.viewType){case 1:vr.ins().openMyTowerPanel()}},I(0,i,"type",null,function(t){if(this.viewType=t,this.items=[],1==this.viewType){var e;Nt.register("RP_CITY_TOWER_CAN_DO",this.tower,new Tt(91,82));for(var i=0;i<3;i++)(e=new AM).type=i+1,e.pos(Go.CITY_BUILD_POS[i][0],Go.CITY_BUILD_POS[i][1],!0),this.addChild(e),this.items.push(e)}else if(2==this.viewType){var s=new DM;s.type=2,s.pos(Go.CITY_BUILD_POS[1][0],Go.CITY_BUILD_POS[1][1],!0),this.addChild(s),this.items.push(s)}this.towerBar=new p(140,120,180,20,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5,0],[5,5,5,5,0],[1,1,1,1]),this.towerBar.text.fontSize=21,this.addChild(this.towerBar)}),e}(),qM=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.btnClose.on("click",this,this.closeWindow),this.btn.on("click",this,this.closeWindow),this.makeHtml()}w(e,"modules.plays.city.view.PlaysCityTipPanel",sS);var i=e.prototype;return i.makeHtml=function(){this.txtHtml.style.valign="top",this.txtHtml.style.leading=10;var t=Z.span("1、寻找符域可搜寻到其他玩家的符域，可对他人的符域水晶进行掠夺","#5d3924")+"<br/><br/>";t+=Z.span("2、占领不同的符域水晶可获得不同的符域资源，诸如","#5d3924"),t+=Z.span("紫晶币、符炉经验","#FFE8B8"),t+=Z.span("等","#5d3924")+"<br/><br/>",t+=Z.span("3、符域中获得的资源除了可用于提升自身建筑等级，便于更快更便捷的获取资源之外，也可用于强化符文，提升角色属性与战力","#5d3924")+"<br/><br/>",t+=Z.span("4、每座建筑内都有不同的每日任务和奖励可以领取哦，不要忘记","#5d3924"),t+=Z.span("按时上线","#FFE8B8"),t+=Z.span("领取哟","#5d3924"),this.txtHtml.innerHTML=t},I(0,i,"uiClass",function(){return"PlaysCitysTipPanel"}),e}(),YM=function(t){function s(){var t,e;this.SCENE_POS=[[78,183],[457,150],[78,382],[462,353]],this.ITEM_POS=[[57,670],[207,670],[357,670],[507,670]],this._type=0,this.sceneItems=null,this.myItems=null,s.__super.call(this),this.sceneItems=[];for(var i=0;i<this.SCENE_POS.length;i++)(t=new HM).index=i+1,t.pos(this.SCENE_POS[i][0],this.SCENE_POS[i][1]),this.addChild(t),this.sceneItems.push(t);for(this.myItems=[],i=0;i<this.ITEM_POS.length;i++)(e=new EM).pos(this.ITEM_POS[i][0],this.ITEM_POS[i][1]),this.addChild(e),this.myItems.push(e);this.txtLink.on("click",this,this.onLink)}w(s,"modules.plays.city.view.PlaysCityTowerCrystalView",nS);var e=s.prototype;return e.update=function(){this.updateScore(),this.updateScene(),this.updateMyItems()},e.updateMyItems=function(){this.txtLink.visible=1==this.type;for(var t=Ho.myHarryInfo,e=0;e<this.myItems.length;e++)this.myItems[e].data=t?t[e]:null},e.updateScene=function(){var t,e=0;switch(this.type){case 1:t=Ho.getMyCrystalInfoByIndex,e=Ho.curCityLv;break;case 2:t=Ho.getOtherCrystalInfoByIndex,Ho.otherCityInfo?(this.txtName.text=Ho.otherCityInfo.name+"的符域",e=Ho.otherCityInfo.city_level):e=0}this.txtLv.text="Lv."+e,this.imgTower.skin="modules/playsCity/panelBuild"+Math.ceil(Math.min(e,10)/2)+".png";for(var i=0;i<this.sceneItems.length;i++)this.sceneItems[i].data=t.call(this,i+1)},e.updateScore=function(){this.txtScore1.text=k.getShortenSilverStr(Ho.curCityExp),this.txtScore2.text=k.getShortenSilverStr(pe.getScore(8)),this.txtScore3.text=k.getShortenSilverStr(pe.getScore(15))},e.onLink=function(t){if(pe.getScore(15)>=Ho.searchMoney){var e=new Ee,i=35<=Ho.curVigor?"#5d3924":"#b60202",s="是否消耗"+Ho.searchMoney+"紫晶币寻找符域？\n所寻找的符域需在5分钟内进行相关操作，否则将需重新寻找符域。<br>掠夺体力消耗："+Z.font(""+Ho.curVigor,i,26)+"/35";e.msg=s,e.key="PlaysCityTowerCrystalView_searchCity",e.yesCaller=this,e.yesFun=this.alertCallBack,EF.showVO(e)}else Jt.addTip("紫晶币不足")},e.alertCallBack=function(){vr.ins().closeMyCrystalPanel(),vr.ins().toSearch()},I(0,e,"type",function(){return this._type},function(t){for(var e in this._type=t,this.spScore.visible=1==t,this.imgNameBg.visible=this.txtName.visible=2==t,this.sceneItems)this.sceneItems[e].type=t;for(var i in this.myItems)this.myItems[i].type=t}),s}(),XM=function(t){function e(){this.barExp=null,this.curLvvo=null,e.__super.call(this),this.barExp=new p(250,205,370,20,"com/ui/bar2.png","com/ui/barBg2.png",[5,5,5,5,0],[5,5,5,5,0],[1,1,1,1]),this.barExp.text.fontSize=21,this.addChild(this.barExp),this.on("click",this,this.onClick),Nt.register("RP_CITY_UP_LEVEL",this.btnUp,new Tt(19,-10)),Nt.register("RP_CITY_BENIFIT",this.btnElite,new Tt(19,-10)),Nt.register("RP_CITY_FINE",this.btnFind,new Tt(19,-10)),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.city.view.PlaysCityTowerInfoView",oS);var i=e.prototype;return i.onAdd=function(){_t.addToSecond(this,this.loopTime)},i.onRemove=function(){this.txtFindColdTime.visible=!1,_t.removeFromSceond(this,this.loopTime)},i.update=function(){if(this.txtLv.text="LV."+Ho.curCityLv,this.curLvvo=Ho.getCityLvVO(),Ho.curCityLv<=10?this.imgTower.skin="modules/playsCity/panelBuild"+Math.ceil(Ho.curCityLv/2)+".png":this.imgTower.skin="modules/playsCity/panelBuild5.png",this.curLvvo){this.txtUpNeed.text="消耗紫晶币："+this.curLvvo.needMoney;var t=pe.getScore(15);this.txtAmethyst.text=t+"",this.txtCurAmethyst.text="拥有紫晶币："+t,this.txtGold.text=pe.user.attr.gold+"";var e=pe.getScore(8);this.txtCrystal.text=e+"",this.curLvvo.lv>=Ho.mainVO.maxCityLv?this.barExp.setValue(this.curLvvo.needExp,this.curLvvo.needExp):this.barExp.setValue(Ho.curCityExp,this.curLvvo.needExp),this.txtElite.innerHTML=Z.span("紫晶币","#f299ff")+Z.span("×"+this.curLvvo.welfare,"#ffe0cf"),Ho.smeltTimes<this.curLvvo.smelt?this.btnAmethyst.disabled=!1:this.btnAmethyst.disabled=!0}this.txtSmeltProduct.text="×"+Ho.mainVO.smeltProduct,Ho.curCityLv>=Ho.mainVO.maxCityLv?(this.btnUp.label="已满级",this.btnUp.disabled=!0):(this.btnUp.label="升级",this.btnUp.disabled=!1),0==Ho.getBenifitTime?this.btnElite.disabled=!1:this.btnElite.disabled=!0,0<Ho.lastEventTime?(this.onAdd(),this.btnFind.disabled=!0):(this.onRemove(),this.btnFind.disabled=!1),Wo.checkRP_benifit(),Wo.checkRPFind(),Wo.checkRP_cityCanUp()},i.loopTime=function(){var t=Ho.lastEventTime;0<=t?(this.txtFindColdTime.visible=!0,this.txtFindColdTime.innerHTML=Z.span(x.formatTotalHMS(t),"#b60202")+Z.span("后才可寻访","#5d3924")):this.txtFindColdTime.visible=!1},i.onClick=function(t){switch(t.target){case this.btnUp:this.checkUpExp();break;case this.btnElite:vr.ins().toGetBenifit();break;case this.btnFind:vr.ins().openEventPanel();break;case this.btnAmethyst:if(pt.send(36,2,"玩法-符域-熔炼"),Ho.mainVO.smeltCost<=pe.user.attr.gold){var e=Z.span("是否花费","#5d3924")+Z.span(Ho.mainVO.smeltCost+"元宝","#F7EF5F");e+=Z.span("熔炼"+Ho.mainVO.smeltProduct+"紫晶币？","#5d3924"),Lo.showSecAlert(e,vr.ins(),vr.ins().toSmelt,null,"amethystSmeltCost")}else Lo.showAlert();break;case this.txtLinkGet:case this.txtLinkGet:vr.ins().openLevelIncomeView()}},i.checkUpExp=function(){this.curLvvo&&Ho.curCityExp>=this.curLvvo.needExp?this.checkUpMoney():Jt.addTip("符炉经验不满足升级条件")},i.checkUpMoney=function(){pe.getScore(15);if(this.curLvvo&&pe.silver>=this.curLvvo.needMoney){var t=new Ee;t.msg="是否消耗"+this.curLvvo.needExp+"符炉经验和"+this.curLvvo.needMoney+"紫晶币将符炉等级提升至"+(Ho.curCityLv+1)+"级？",t.yesCaller=vr.ins(),t.yesFun=vr.ins().toLvUp,EF.showVO(t)}else Jt.addTip("紫晶币不足")},e}(),KM=function(t){function e(){e.__super.call(this)}return w(e,"modules.plays.city.view.PlaysCityTowerItem",aS),I(0,e.prototype,"level",null,function(t){this.img.skin=t<=10?"modules/playsCity/sceneBuild"+Math.ceil(t/2)+".png":"modules/playsCity/sceneBuild5.png"}),e}(),jM=function(t){function e(){this.infoView=null,this.curView=null,this.curIndex=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.tab.on("change",this,this.onTabChange),this.on("click",this,this.onClick),Nt.register("RP_CITY_TOWER_CAN_DO",this.tab.items[0],new Tt(19,-10))}w(e,"modules.plays.city.view.PlaysCityTowerPanel",lS);var i=e.prototype;return i.update=function(){if(null!=this.curView&&this.curIndex==this.tab.selectedIndex)var t=!1;else t=!0;switch(this.tab.selectedIndex){case 0:this.infoView=this.infoView||new XM,this.curView=this.infoView,this.txtTitle.text="符域信息"}this.curIndex=this.tab.selectedIndex,t&&(this.spView.removeChildren(),this.spView.addChild(this.curView)),this.curView&&this.curView.update(),Wo.checkTowerAllRP()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},i.onTabChange=function(t){this.update()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.tab.selectedIndex=0},e}(),QM=function(t){var e;function i(){this.list=null,this.myView=null,this.otherList=null,i.__super.call(this),this.list=new ne(this.spScene.width,this.spScene.height,new Dt(0,0,this.spScene.width,this.spScene.height)),this.list.on("end",this,this.updateBtnVisible),this.spScene.addChild(this.list),this.myView=new WM,this.myView.type=1,this.myView.pos(0,0),this.list.addChild(this.myView),this.otherList=new e(this.spScene.width,this.spScene.height,new Dt(0,0,this.spScene.width,this.spScene.height)),this.otherList.pos(this.spScene.width,0),this.list.addChild(this.otherList),Nt.register("RP_CITY_BE_FIGHT",this.imgMsg,new Tt(19,-10)),this.on("display",this,this.onAdd),this.on("click",this,this.onClick)}w(i,"modules.plays.city.view.PlaysCityView",rS);var s=i.prototype;return h.imps(s,{"com.ui.IViewUpdate":!0}),s.update=function(){for(var t=0;t<this.list.numChildren;t++){this.list.getChildAt(t).update()}this.txtVigor.text="体力："+Ho.curVigor+"/"+Ho.mainVO.maxVigor;var e=Ho.getCityLvVO();this.txtTip.text=e?"（每12分钟恢复"+e.addVigor+"点体力）":"",Ho.isOtherCityShow()?this.updateBtnVisible():this.list.scrollToStart(),Wo.checkTowerAllRP()},s.onClick=function(t){switch(t.target){case this.btnL:this.moveLeft();break;case this.btnR:this.list.turnNext();break;case this.imgMsg:Nt.hide("RP_CITY_BE_FIGHT"),vr.ins().openCityNotePanel();break;case this.btnSearch:if(!this.otherList.moving){var e=new Ee,i=35<=Ho.curVigor?"#5d3924":"#b60202",s="是否消耗"+Ho.searchMoney+"紫晶币寻找符域？\n所寻找的符域需在5分钟内进行相关操作，否则将需重新寻找符域。<br>掠夺体力消耗："+Z.font(""+Ho.curVigor,i,26)+"/35";e.msg=s,e.key="playsCityView_searchCity",e.yesCaller=vr.ins(),e.yesFun=vr.ins().toSearch,EF.showVO(e)}break;case this.imgHome:this.moveLeft();break;case this.txtLinkBuy:Ho.mainVO.buyVigorArr[0]>pe.gold?Lo.showAlert():((e=new Ee).msg="是否消耗"+Ho.mainVO.buyVigorArr[0]+"元宝购买"+Ho.mainVO.buyVigorArr[1]+"体力",e.yesCaller=this,e.yesFun=this.checkBuy,e.key="city_buy_vigor",EF.showVO(e));break;case this.btnTip:vr.ins().openTipPanel()}},s.checkBuy=function(t){void 0===t&&(t=1);var e=Ho.mainVO.maxBuyVigorTime-Ho.curBuyVigorTime;pe.gold<Ho.mainVO.buyVigorArr[0]*t?Jt.addTip("元宝不足"):e<t?Jt.addTip("每日体力仅可购买"+Ho.mainVO.maxBuyVigorTime+"次，当前剩余购买次数"+e+"次"):vr.ins().toBuyAp(t)},s.updateBtnVisible=function(){this.imgHome.visible=this.btnL.visible=0<this.list.curIndex,this.btnR.visible=this.list.curIndex<=0&&Ho.isOtherCityShow()},s.onAdd=function(){this.list.scrollToStart()},s.moveLeft=function(){0<this.list.curIndex&&this.list.turnPast()},s.moveRight=function(){this.list.curIndex<=0?(this.list.turnNext(),this.otherList.addData(Ho.otherCityInfo,!1)):this.otherList.addData(Ho.otherCityInfo,!0)},s.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),this.myView&&(this.myView.destroy(),this.myView=null)},i.__init$=function(){e=function(t){function o(t,e,i,s){this._dataPast=null,this._dataNow=null,this.item1=null,this.item2=null,void 0===s&&(s=""),o.__super.call(this,t,e,i,s);for(var n=0;n<2;n++)this["item"+(n+1)]=new WM,this["item"+(n+1)].type=2,this["item"+(n+1)].pos(n*t,0),this.addChild(this["item"+(n+1)])}w(o,"",ne);var e=o.prototype;return e.update=function(){this.item1.update(this._dataPast),this.item2.update(this._dataNow)},e.addData=function(t,e){t&&(this.scrollToStart(),this.dataPast=this.dataNow,this.dataNow=t,e?this.turnNext():this.scrollTo(1))},I(0,e,"dataPast",null,function(t){this._dataPast=t,this.item1.update(this._dataPast)}),I(0,e,"dataNow",function(){return this._dataNow},function(t){this._dataNow=t,this.item2.update(this._dataNow)}),o}()},i}(),zM=function(t){function e(){this.limitTime=5,this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay)}w(e,"modules.plays.CopyRewardGet",hS);var i=e.prototype;return i.onDisplay=function(){this.limitTime=5,_t.addToSecond(this,this.secLoop),this.on("undisplay",this,this.unDisplay)},i.secLoop=function(){0<this.limitTime?(this.btnYes.label="确定（"+this.limitTime+"S）",this.limitTime--):this.closeWindow()},i.unDisplay=function(){_t.removeFromSceond(this,this.secLoop),this.off("undisplay",this,this.unDisplay)},i.onClick=function(t){switch(t.target){case this.btnYes:case this.btnClose:this.closeWindow();break;default:if(t.target instanceof modules.pack.packView.GoodsImage){var e=t.target;e.data&&(e.data.tempNum=1,Ae.show(e.data,"BASE_GOODS_TIP"))}}},i.udpate=function(t){if(t&&0<t.length){var e;this.items=this.items||[];for(var i,s=Math.max(this.items.length,t.length),n=NaN,o=NaN,a=0;a<s;a++)a<t.length?(i=t[a],this.items[a]=this.items[a]||new fh(null,!1,!0,91,!0),(e=this.items[a]).pos(13+a%4*120,10+120*Math.floor(a/4)),e.mouseEnabled=!0,n="p_goods"==i.className?i.typeid:i.id,o="p_goods"==i.className?i.current_num-xo.getGoodsNumByTypeID(n):i.val,e.data=ur.getItem(n),e.num=o,this.pan.addChild(e)):this.items[a]&&this.items[a].parent&&this.items[a].removeSelf()}},e}(),$M=function(t){function e(){this._tempSelPetID=NaN,this.timeARR=[0,2,0,0,4,0,0,0,6],this._tempSelHours=NaN,this.speed=.005,this.up=.6,this.down=.3,this._data=null,this.upGoodsItems=null,this.goodsItems=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),this.sp.alpha=.4,this.htmlGet.style.color="#e1c6bc",this.htmlGet.style.fontSize=26}w(e,"modules.plays.petExplore.view.PetExploreHandlerView",uS);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose1:case this.btnClose:this.closeWindow();break;case this.imgHelp:OF.ins.showMessage(Z.font("1、每个任务仅能刷新一次，任务完成后将立即刷新出新的任务。任务品质越高，奖励越丰厚。","#5d3924",26)+"<br>"+Z.font("2、同一时间，每个仙宠仅能参与一个任务。","#5d3924",26)+"<br>"+Z.font("3、探险时间决定基础奖励的多少，时间越久加成越高。","#5d3924",26)+"<br>"+Z.font("4、当前战力最高的仙宠能获得两倍基础奖励。","#5d3924",26));break;case this.btn:this._data?0<this._data.pet_id?(this._data.time_complete<ya.serverTime?wr.ins().toPetAdventureReward(this._data.index):wr.ins().toPetCancel(this._data.index),this.closeWindow()):0<this.tempSelPetID?wr.ins().toPetAdventureSend(this._data.index,this.tempSelPetID,this.tempSelHours):this.closeWindow():this.closeWindow();break;case this.imgPetBg:this._data&&(0==this._data.pet_id?T.dispatch("PET_EXPLORE_SEL",this._data):Jt.addTip("请先完成进行中的派遣哦"))}},i.onDisplay=function(){this.tempSelPetID=0,this.tempSelHours=0,_t.addToSecond(this,this.secLoop),T.register("SEL_EXPLORE_PET",this,this.selPetAndHours),this.on("undisplay",this,this.unDisplay)},i.selPetAndHours=function(t,e){this._data&&0==this._data.pet_id&&(this.tempSelHours=t,this.tempSelPetID=e)},i.unDisplay=function(){T.remove("SEL_EXPLORE_PET",this,this.selPetAndHours),_t.removeFromSceond(this,this.secLoop),_t.removeFromFrame(this,this.showEff),this.off("undisplay",this,this.unDisplay)},i.showEff=function(){this.sp.alpha-=this.speed,this.sp.alpha<=this.down&&(this.sp.alpha=this.down,this.speed=-.005),this.sp.alpha>=this.up&&(this.sp.alpha=this.up,this.speed=.005)},i.secLoop=function(){this.updateTime()},i.updateTime=function(){if(this._data){var t,e=qo.getOutTypeVOS();if(0<this._data.pet_id){var i;for(var s in e)(i=e[s]).hours==this._data.task_time&&(t=i);this.btn.disabled=!1,this.txtTime.color="#fcf476",this._data.time_complete<ya.serverTime?(this.txtTime.text=t.name+"（00:00:00）",this.btn.label="领取"):(this.txtTime.text=t.name+"（"+x.formatTime(this._data.time_complete-ya.serverTime)+"）",this.btn.label="终止探险")}else{for(s in e)(i=e[s]).hours==this._tempSelHours&&(t=i);this.txtTime.text=t?t.name+"（0"+t.hours+":00:00）":"",this.txtTime.color="#e1c6bc",this.btn.label="确定",this.btn.disabled=!1}}},i.update=function(){},I(0,i,"tempSelHours",function(){return this._tempSelHours},function(t){this._tempSelHours=t}),I(0,i,"tempSelPetID",function(){return this._tempSelPetID},function(t){if(this._tempSelPetID=t,null!=this._data){this.upGoodsItems=this.upGoodsItems||[];var e,i=qo.getExploreVO(this._data.task_id),s=i.getMustGet(),n=327-60*s.length,o=Math.max(s.length,this.upGoodsItems.length);0<t&&(e=Eo.getPetByPetID(t));var a=!1;if(e){this.txt2.text="探险时间：",this.txt3.text="宠物经验：",this.txt4.text="基础奖励：";var l=0<this._data.pet_id?this._data.task_time:this._tempSelHours;this.txtExp.text=i.exp*e.level*l+"";var r=Math.floor(e.type_id%1e5/1e4);if(this.imgPetBg.skin="com/ui/goodsBg"+r+".png",this.imgPet.skin="com/petHead/"+e.skin_id+".png",this.txtName.text=e.pet_name,this.txtName.color=U.getColorDark(r),this.txtLine.text="Lv."+e.level,this.txtState.text="",this.imgBar.visible=!0,this.imgBarBg.visible=!0,e.level<100)var h=Math.floor(e.exp/e.next_level_exp*1e3)/10;else h=100,this.txtExp.text="已满级";this.txtPre.text=h+"%",this.imgBar.visible=0!=h,this.imgBar.width=3.5*h,this.sp.graphics.clear(),h=100<(h=Math.floor((e.exp+i.exp*e.level*this._tempSelHours)/e.next_level_exp*1e3)/10)?100:h,this.sp.graphics.drawRect(0,0,3.5*h,17,"#56AF6E"),_t.addToFrame(this,this.showEff),h=Math.floor(i.exp*e.level*this._tempSelHours/e.next_level_exp*1e3)/10;for(var u,c="",d=0;d<s.length;d++){var p=s[d],m=ur.getItem(p.id);m.tempNum=e?p.val*l:p.val,c+=Z.font(m.name,U.getColorDark(m.color),24)+Z.font("×"+m.tempNum,"#e1c6bc",24),d<s.length-1&&(c+="、")}for(var f in this.upGoodsItems)(u=this.upGoodsItems[f])&&u.parent&&u.removeSelf();this.htmlGet.innerHTML=Eo.isHeightestPowerPet(t)?c+"（战力最高×2）":c,this.txtDown.text=this.timeARR[l]*(r-1)+"%概率获得以下一种奖励"}else{for(this.txt2.text="基础奖励：",this.txt3.text="",this.txt4.text="",this.txtExp.text="",this.htmlGet.innerHTML="",this.imgPetBg.skin="com/ui/itemAddBg.png",this.imgPet.skin=null,this.txtName.text="",this.txtLine.text="队列状态：",this.txtState.text="空闲",this.imgBar.visible=!1,this.imgBarBg.visible=!1,this.txtPre.text="",_t.removeFromFrame(this,this.showEff),this.sp.graphics.clear(),this.txtDown.text="有机会获得以下一种奖励",d=0;d<o;d++)d<s.length?(this.upGoodsItems[d]=this.upGoodsItems[d]||new Ah(91,91,!1,!0,!0,!1),this.upGoodsItems[d].pos(n+120*d,380),this.upGoodsItems[d].dataSource=s[d],this.upGoodsItems[d].parent||this.addChild(this.upGoodsItems[d])):this.upGoodsItems[d]&&this.upGoodsItems[d].parent&&this.upGoodsItems[d].removeSelf();var _;if(Eo.pets)for(var g in Eo.pets)_=Eo.pets[g],qo.isPetFree(_.pet_id)&&(a=!0)}this.updateTime(),this.imgRp.visible=a}}),I(0,i,"data",null,function(t){if(this._data=t,this._data){var e=qo.getExploreVO(this._data.task_id);this.tempSelPetID=this._data.pet_id,this.imgBg.skin="modules/petExplore/img/"+e.bg+".png",this.htmlDesc.innerHTML=k.getHtmlEmpty(4)+Z.font(e.getDesc()[0],"#fdc06a",26)+Z.font(e.getDesc()[1],"#e1c6bc",24),this.secLoop(),this.goodsItems=this.goodsItems||[];for(var i=e.getMaybeGet(),s=Math.max(i.length,this.goodsItems.length),n=327-60*i.length,o=0;o<s;o++)o<i.length?(this.goodsItems[o]=this.goodsItems[o]||new Ah(91,91,!1,!0,!0,!1),this.goodsItems[o].pos(n+120*o,620),this.goodsItems[o].dataSource=i[o],this.goodsItems[o].parent||this.addChild(this.goodsItems[o])):this.goodsItems[o]&&this.goodsItems[o].parent&&this.goodsItems[o].removeSelf()}}),e}(),ZM=function(t){function e(){this.goodsItems=null,this._data=null,e.__super.call(this),this.goodsItems=[],this.on("click",this,this.onClick)}w(e,"modules.plays.petExplore.view.PetExploreItem",cS);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:if(this._data)if("刷新"==this.btn.label)if(this._data.is_refreshed)Jt.addTip("只能刷新一次哦");else{var e=new Ee;e.msg="每个任务仅有一次刷新机会，是否确认刷新？",e.yesFun=wr.ins().toPetAdventureRefresh,e.yesCaller=wr.ins(),e.yesArgs=[this._data.index],e.key="ExploreItem",EF.showVO(e)}else 0<this._data.pet_id&&(this._data.time_complete<ya.serverTime?wr.ins().toPetAdventureReward(this._data.index):wr.ins().toPetCancel(this._data.index));break;default:if(t.target instanceof modules.pack.packView.GoodsImage);else if(this._data){var i=qo.PET_NEED_VIP[this._data.index-1];i>Ia.curLv?Jt.addTip("VIP"+i+"以上开启哦"):0<this._data.pet_id&&this._data.time_complete<ya.serverTime?wr.ins().toPetAdventureReward(this._data.index):T.dispatch("PET_EXPLORE_HANDLER",this._data)}}},i.updateTime=function(){this._data&&(0<this._data.pet_id?(this.txtTime.visible=this.imgClock.visible=!0,"modules/petExplore/clock2.png"!=this.imgClock.skin&&(this.imgClock.skin="modules/petExplore/clock2.png"),this.txtTime.color="#fcf476",this.btn.disabled=!1,this._data.time_complete<ya.serverTime?(this.txtTime.text="00:00",this.btn.label="已完成",this.imgRp.visible=!0):(this.btn.label="终止",this.txtTime.text=x.formatTime(this._data.time_complete-ya.serverTime),this.imgRp.visible=!1)):this.txtTime.visible=this.imgClock.visible=!1)},I(0,i,"data",null,function(t){if(this._data=t,this._data){var e=qo.getExploreVO(t.task_id);if(this.txtTitle.text=e.name,this.txtTitle.color=U.getColorDark(e.color),0<this._data.pet_id){this.btn.disabled=!1,this._data.time_complete<ya.serverTime?(this.btn.label="已完成",this.imgRp.visible=!0):(this.btn.label="终止",this.imgRp.visible=!1);var i=Eo.getPetByPetID(this._data.pet_id);if(i){var s=Math.floor(i.type_id%1e5/1e4);this.imgPetBg.skin="com/ui/goodsBg"+s+".png",this.imgPet.skin="com/petHead/"+i.skin_id+".png"}this.txtOpen.text=""}else{this.btn.label="刷新";var n=qo.PET_NEED_VIP[this._data.index-1];this.btn.disabled=n>Ia.curLv||this._data.is_refreshed,n<=Ia.curLv?(this.imgPetBg.skin="com/ui/itemAddBg.png",this.imgPet.skin=null,this.txtOpen.text="",this.imgRp.visible=qo.isCanSentPet()):(this.imgPetBg.skin=null,this.imgPet.skin=null,this.txtOpen.text="VIP"+n+"以上解锁",this.imgRp.visible=!1)}this.updateTime(),this.imgBg.skin="modules/petExplore/img/"+e.bg+".png";for(var o=e.allCanGet,a=Math.max(o.length,this.goodsItems.length),l=0;l<a;l++)l<o.length?(this.goodsItems[l]=this.goodsItems[l]||new Ah(91,91,!1,!0,!0,!1),this.goodsItems[l].pos(120*l,106),this.goodsItems[l].dataSource=o[l],0<this._data.pet_id&&0==l&&(this.goodsItems[l].num=o[l].val*this._data.task_time),this.goodsItems[l].parent||this.addChild(this.goodsItems[l])):this.goodsItems[l]&&this.goodsItems[l].parent&&this.goodsItems[l].removeSelf()}}),e}(),JM=function(t){function e(){this._data=null,this.goodsItems=null,this.clip=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.clip=b.getOne(),this.clip.pos(110,260),this.addChild(this.clip),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove)}w(e,"modules.plays.petExplore.view.PetExploreRewardView",dS);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:this.closeWindow()}},i.updatePet=function(t,e){if(e){var i="unit/monster/"+t+"_attack_3";this.clip.loadAndPlay(i,"attack",3,!0)}else i="unit/monster/"+t+"_3",this.clip.loadAndPlay(i,"stand",3,!0);this.clip.scale(_e.scale,_e.scale)},i.onRemove=function(){this.clip&&this.clip.stop()},I(0,i,"data",null,function(t){if(this._data=t,this._data){var e,i=qo.getTaskByIndex(t.new_task.index),s=qo.getOutTypeVOS();for(var n in s)(e=s[n]).hours==this._data.task_time&&e;this.goodsItems=this.goodsItems||[],s=this._data.rewards;for(var o=Math.max(s.length,this.goodsItems.length),a=0;a<o;a++)a<s.length?(this.goodsItems[a]=this.goodsItems[a]||new Ah(91,91,!1,!0,!0),this.goodsItems[a].pos(120*a-45,0),this.goodsItems[a].dataSource=s[a],this.goodsItems[a].parent||this.spGoods.addChild(this.goodsItems[a])):this.goodsItems[a]&&this.goodsItems[a].parent&&this.goodsItems[a].removeSelf();this.spGoods.width=120*s.length-45;var l=1<s.length;this.imgSucc.skin=l?"modules/petExplore/bigSucc.png":"modules/petExplore/succ.png";var r=Eo.getPetByPetID(i.pet_id);r&&this.updatePet(r.skin_id,l)}}),I(0,i,"uiClass",function(){return"PetExploreSuccView"}),e}(),tF=function(t){function e(){this.items=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.pan.vScrollBarSkin=""}w(e,"modules.plays.petExplore.view.PetExploreView",pS);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onHelpClick=function(){OF.ins.showMessage(Z.font("1、每个任务仅能刷新一次，任务完成后将立即刷新出新的任务。任务品质越高，奖励越丰厚。","#5d3924",26)+"<br>"+Z.font("2、同一时间，每个仙宠仅能参与一个任务。","#5d3924",26)+"<br>"+Z.font("3、仙宠品质决定基础奖励的多少，品质越高加成越高。","#5d3924",26)+"<br>"+Z.font("4、当前战力最高的仙宠能获得两倍基础奖励。","#5d3924",26))},i.onDisplay=function(){_t.addToSecond(this,this.secLoop),this.on("undisplay",this,this.onUndisplay)},i.secLoop=function(){if(this.items)for(var t in this.items)this.items[t].updateTime()},i.onUndisplay=function(){_t.removeFromSceond(this,this.secLoop),this.off("undisplay",this,this.onUndisplay)},i.update=function(){if(qo.tasks){qo.tasks.sort(this.exploreSort),this.items=this.items||[];for(var t=Math.max(qo.tasks.length,this.items.length),e=0;e<t;e++)e<qo.tasks.length?(this.items[e]=this.items[e]||new ZM,this.items[e].pos(0,276*e+5),this.items[e].data=qo.tasks[e],this.items[e].parent||this.pan.addChild(this.items[e])):this.items[e]&&this.items[e].parent&&this.items[e].removeSelf()}else wr.ins().toPetAdventureInfo()},i.exploreSort=function(t,e){return t.index<e.index?-1:1},e}(),eF=function(t){function e(){this.curVO=null,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.plays.PlaysGuideItem",t);var i=e.prototype;return i.onClick=function(t){this.curVO&&T.dispatch("OPEN_PLAYS_PANEL",this.curVO.viewType)},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(this.curVO=t,this.curVO)if(this.bg.skin="modules/plays/"+this.curVO.name+".png",this.txtLv.text=this.curVO.openStr,this.txtRewards.text=this.curVO.rewards,0<this.curVO.times){this.txtTimes.visible=!0;var e=As.getCopyTime(this.curVO.mapId);this.txtTimes.text=e?"（可挑战次数："+(this.curVO.times-e.finished_times)+"次）":""}else this.txtTimes.visible=!1}),e}(mS),iF=function(t){function e(){this.items=null,e.__super.call(this),this.list.vScrollBar.autoHide=!0,this.update(),Nt.register("RP_PLAYS_BEACH_BOSS",this.list.getChildAt(4)),Nt.register("RP_PLAYS_BEACH",this.list.getChildAt(5)),Nt.register("RP_PET_EXPLORE_GET",this.list.getChildAt(2)),Nt.register("RP_PLAYS_BAILINGYUAN",this.list.getChildAt(1)),Nt.register("RP_PET_TOWER_BARRIER",this.list.getChildAt(3)),Nt.register("RP_TREASURE_FREE",this.list.getChildAt(0)),Nt.register("RP_TREASURE_USE",this.list.getChildAt(0)),this.on("display",this,this.onAdd),this.on("display",this,this.onDisplay)}w(e,"modules.plays.PlaysGuidePetView",fS);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDisplay=function(){go.checkMission(10078,1)&&LD.showStep(LD.BAI_LING_YUAN,this.items[1])},i.onAdd=function(){this.list.scrollTo(0),this.list.refresh()},i.update=function(){var t,e;this.items=this.items||[];for(var i=Yo.getPlaysItemVOsByType(2),s=0;s<i.length;s++)e=i[s],this.items[s]=this.items[s]||new eF,(t=this.items[s]).dataSource=e,t.y=5+175*s,this.list.addChild(t)},e}(),sF=function(t){function e(){this.items=null,e.__super.call(this),this.list.vScrollBar.autoHide=!0,this.update(),Nt.register("RP_CITY_BE_FIGHT",this.list.getChildAt(1)),Nt.register("RP_CITY_FUN_CAN_DO",this.list.getChildAt(1)),Nt.register("RP_BIOGRAPHY_COPY_CAN_FIGHT",this.list.getChildAt(2)),Nt.register("RP_BIOGRAPHY_CAN_BOUNTY",this.list.getChildAt(2)),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_FINISH",this.list.getChildAt(2)),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_GET",this.list.getChildAt(2)),Nt.register("RP_BATTEL_FIELD",this.list.getChildAt(0)),Nt.register("PR_REFINE_SOUL_PALACE_SUPPLY",this.list.getChildAt(3)),Nt.register("PR_REFINE_SOUL_PALACE_MISSION",this.list.getChildAt(3)),Nt.register("PR_REFINE_SOUL_PALACE_BAG",this.list.getChildAt(3)),Nt.register("PR_REFINE_SOUL_PALACE_INJECT",this.list.getChildAt(3)),Nt.register("PR_REFINE_SOUL_PALACE_INLAY",this.list.getChildAt(3)),Nt.register("PR_REFINE_SOUL_PALACE_REFINE",this.list.getChildAt(3)),this.on("display",this,this.onAdd)}w(e,"modules.plays.PlaysGuideRoleView",_S);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onAdd=function(){this.list.scrollTo(0),this.list.refresh()},i.update=function(){var t,e;this.items=this.items||[];for(var i=Yo.getPlaysItemVOsByType(1),s=0;s<i.length;s++)e=i[s],this.items[s]=this.items[s]||new eF,(t=this.items[s]).dataSource=e,t.y=5+175*s,this.list.addChild(t)},e}(),nF=function(t){function e(){this.curView=null,this.roleView=null,this.petView=null,e.__super.call(this);var t=Yo.getGuideTypeLabels();this.tab.labels=Yo.getGuideTypeLabels(),this.tab.labels=t,this.tab.on("change",this,this.onChange),this.tab.selectedIndex=0,Bt.isFanTi?(Nt.register("RP_PLAYS_BEACH_BOSS",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PLAYS_BEACH",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PLAYS_BAILINGYUAN",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PET_EXPLORE_GET",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PET_TOWER_BARRIER",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_TREASURE_FREE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_TREASURE_USE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_CITY_BE_FIGHT",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_CITY_FUN_CAN_DO",this.tab.items[0],new Tt(19,-10))):(Nt.register("RP_BIOGRAPHY_COPY_CAN_FIGHT",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BIOGRAPHY_CAN_BOUNTY",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_FINISH",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BIOGRAPHY_BOUNTY_NOT_GET",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BATTEL_FIELD",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_CITY_FUN_CAN_DO",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_PLAYS_BEACH_BOSS",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PLAYS_BEACH",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PLAYS_BAILINGYUAN",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PET_EXPLORE_GET",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_PET_TOWER_BARRIER",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_TREASURE_FREE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_TREASURE_USE",this.tab.items[1],new Tt(19,-10)))}w(e,"modules.plays.PlaysGuideView",gS);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.selectIndex=function(t){this.tab.selectedIndex=t},i.onChange=function(){switch(this.spSubView.removeChildren(),this.tab.selectedIndex){case 0:this.roleView=this.roleView||new sF,this.curView=this.roleView,this.spSubView.addChild(this.roleView);break;case 1:this.petView=this.petView||new iF,this.curView=this.petView,this.spSubView.addChild(this.petView)}this.update()},i.update=function(){this.curView&&this.curView.update()},e}(),oF=function(t){function e(){this.guideView=null,this.biographyView=null,this.cityView=null,this.petTowerView=null,this.petExploreView=null,this.treasureView=null,this.bailingyuanView=null,this.curItemVO=null,this.curView=null,this.curViewType=0,this.petExploreKey=-1,this.treasureKey=-1,this.bioGraKey=NaN,this.cityKey=NaN,e.__super.call(this),this.setWindowType(),this.on("click",this,this.onClick)}w(e,"modules.plays.PlaysPanel",yS);var i=e.prototype;return i.checkOpen=function(t,e){switch(void 0===e&&(e=-1),this.curItemVO=Yo.getPlaysItemVO(t),t){case 0:return void this.chooseView(t,e);case 1:if(Ho.isCityOpen())return void this.chooseView(t,e);break;case 2:if(Ne.isOpenBiography())return void this.chooseView(t,e);break;case 6:return Ne.isOpenBeachBoss()?void yr.ins().openBossEnterPanel():void Jt.addTip("黄金沙滩BOSS功能70级开放");case 7:return Ne.isOpenBeachBoss()?(gr.ins().openEnterPanel(),void gr.ins().toFamilyInfo()):void Jt.addTip("黄金沙滩功能70级开放");case 5:return Ne.isOpenPetEmbattle()?void this.chooseView(t,e):void Jt.addTip("幻兽天境功能1转开放");case 3:return Ne.isOpenPetExplore()?void this.chooseView(t,e):void Jt.addTip("仙宠探险功能55级开放");case 8:return Ne.isOpenTreasure()?void this.chooseView(t,e):void Jt.addTip("寻宝功能55级开放");case 4:return void(Yo.checkPlaysItemIsOpen(4)?this.chooseView(t,e):Jt.addTip("百灵园功能55级开放"));case 9:return Yo.checkPlaysItemIsOpen(9)?void this.chooseView(t,e):void Jt.addTip("修罗战场100级开放");case 10:return Yo.checkPlaysItemIsOpen(10)?void this.chooseView(t,e):void Jt.addTip("炼魂殿8转开放")}this.curItemVO&&Jt.addTip(this.curItemVO.openStr+"开启")},i.chooseView=function(t,e){if(void 0===e&&(e=-1),this.btnClose2.bottom=166,9!=t)if(10!=t){switch(this.spView.removeChildren(),this.curViewType=t){case 0:this.guideView=this.guideView||new nF,this.curView=this.guideView,0<=e&&this.guideView.selectIndex(e),this.spView.addChild(this.guideView),Wo.checkAllRP();break;case 1:if(!se.has("modules/playsCity"))return void se.add("modules/playsCity","正在加载符域资源",this,this.chooseView,[t,e]);_t.clearTimeout(this.cityKey),null==this.cityView&&(this.cityView=new QM,this.cityView.on("undisplay",this,this.clearCitySource)),this.curView=this.cityView,this.spView.addChild(this.cityView),vr.ins().toWorldRoleInfo(),vr.ins().toPurpleMine();break;case 2:if(0==se.has("modules/biographyCopy"))return void se.add("modules/biographyCopy","加载人物传记资源",this,this.chooseView,[t,e]);_t.clearTimeout(this.bioGraKey),null==this.biographyView&&(this.biographyView=new cE,this.biographyView.on("undisplay",this,this.clearBiographySource)),this.curView=this.biographyView,this.spView.addChild(this.biographyView),wl.getInstance().toCopyInfo(),wl.getInstance().toBountyInfo(),hn.checkBountyRP();break;case 5:if(0==se.has("modules/petEmbattle"))return void se.add("modules/petEmbattle","加载幻兽天境资源",this,this.chooseView,[t,e]);this.petTowerView||(this.petTowerView=new ZV),this.curView=this.petTowerView,this.spView.addChild(this.petTowerView);break;case 3:if(0==se.has("modules/petExplore"))return void se.add("modules/petExplore","加载仙宠探险资源",this,this.chooseView,[t,e]);_t.clearTimeout(this.petExploreKey),this.petExploreView||(this.petExploreView=new tF,this.petExploreView.on("undisplay",this,this.onPetExploreUndisplay)),this.curView=this.petExploreView,this.spView.addChild(this.petExploreView);break;case 8:if(0==se.has("modules/treasure"))return void se.add("modules/treasure","加载六界寻宝资源",this,this.chooseView,[t,e]);_t.clearTimeout(this.treasureKey),pt.send(43,1,"玩法-六界寻宝"),this.treasureView||(this.treasureView=new uF,this.treasureView.on("undisplay",this,this.onTreasureUndisplay)),this.btnClose2.bottom=26,this.curView=this.treasureView,this.spView.addChild(this.treasureView);break;case 4:null==this.bailingyuanView&&(this.bailingyuanView=new aM),this.curView=this.bailingyuanView,this.spView.addChild(this.bailingyuanView)}this.update(),this.openWindow(null,!0)}else me.linkTo(14001);else me.linkTo(12001)},i.onPetExploreUndisplay=function(){this.petExploreKey=_t.setTimeout(this,this.toCleanPetExploreRes,null,ya.coldTime)},i.toCleanPetExploreRes=function(){this.petExploreView&&(this.petExploreView.destroy(),this.petExploreView=null),wr.ins().destoryView(),se.destroy("modules/petExplore")},i.onTreasureUndisplay=function(){this.treasureKey=_t.setTimeout(this,this.toCleanTreasureRes,null,ya.coldTime)},i.toCleanTreasureRes=function(){this.treasureView&&(this.treasureView.destroy(),this.treasureView=null),se.destroy("modules/treasure")},i.updateViewByIndex=function(t){var e;switch(t){case 0:e=nF;break;case 1:e=QM;break;case 2:e=cE;break;case 6:case 7:e=null;break;case 5:e=ZV;break;case 3:e=tF;break;case 8:e=uF;break;case 4:e=aM}e&&this.curView&&h.__typeof(this.curView,e)&&this.curView.update()},i.clearBiographySource=function(){this.bioGraKey=_t.setTimeout(this,this.clearBiography,null,ya.coldTime)},i.clearBiography=function(){null!=this.biographyView&&(this.biographyView.destroy(),this.biographyView=null),se.destroy("modules/biographyCopy"),wl.getInstance().destoryCopyPanel()},i.clearCitySource=function(){this.cityKey=_t.setTimeout(this,this.clearCity,null,ya.coldTime)},i.clearCity=function(){null!=this.cityView&&(this.cityView.destroy(),this.cityView=null),se.destroy("modules/playsCity"),vr.ins().destoryPanel()},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:switch(this.curViewType){case 0:this.closeWindow();break;default:this.checkOpen(0)}}},i.update=function(){this.curView&&this.curView.update()},i.cityViewMoveSide=function(t){this.cityView&&(t?this.cityView.moveLeft():this.cityView.moveRight())},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this),this.guideView&&(this.guideView.destroy(),this.guideView=null)},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(0,i,"isHideNav",function(){return this.curView instanceof modules.plays.treasure.TreasureView}),e}(),aF=function(t){function e(){this.goodsImage=null,e.__super.call(this),this.txtDesc.style.align="center",this.txtDesc.style.color="#5d3924",this.txtDesc.style.fontSize=24,this.goodsImage=new fh(null,!1,!0,60),this.goodsImage.pos(570,7),this.addChild(this.goodsImage),this.goodsImage.on("click",this,this.onClicK)}return w(e,"modules.plays.treasure.TreasureGoodItem",vS),e.prototype.onClicK=function(){this.goodsImage.data&&(this.goodsImage.data.tempNum=1,Ae.show(this.goodsImage.data,"BASE_GOODS_TIP"))},e}(),lF=function(t){function e(){this._data=null,this._select=!1,this.num=10,this.add=.3,this.glowFilter=null,e.__super.call(this),this.on("mouseover",this,this.onOver),this.on("mouseout",this,this.onOut),this.on("mousedown",this,this.onDown),this.on("mouseup",this,this.onOver),this.on("display",this,this.onDisplay)}w(e,"modules.plays.treasure.TreasureItem",IS);var i=e.prototype;return i.onDisplay=function(){this._select&&_t.addToFrame(this,this.loop),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){_t.removeFromFrame(this,this.loop),this.filters=[],this.off("undisplay",this,this.onUnDisplay)},i.onDown=function(){this.imgDown.visible=!0,this.imgOver.visible=!1},i.onOut=function(){this.imgDown.visible=!1,this.imgOver.visible=!1},i.onOver=function(){this.imgDown.visible=!1,this.imgOver.visible=!0},i.loop=function(){this.glowFilter=this.glowFilter||new Y("#ffff00",this.num,0,0),this.num-=this.add,(this.num<=0||10<=this.num)&&(this.add=-this.add),this.glowFilter.blur=this.num,this.filters=[this.glowFilter]},I(0,i,"select",function(){return this._select},function(t){(this._select=t)?_t.addToFrame(this,this.loop):(_t.removeFromFrame(this,this.loop),this.filters=[])}),I(0,i,"data",function(){return this._data},function(t){if(this._data=t){this.imgMap.skin="modules/treasure/map/map"+t.id+".png";var e=Xo.getEventVOByID(Xo.info.event_id);this.select=e&&this.data.id==e.mapsArr[Xo.info.hunt_index]}}),e}(),rF=function(t){function e(){this.items=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.pan.vScrollBarSkin="",this.pan.content.mouseThrough=!0,this.on("click",this,this.onClick)}w(e,"modules.plays.treasure.TreasureResView",wS);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose2:case this.btnClose1:this.closeWindow();break;default:if(t.target instanceof modules.pack.packView.GoodsImage){var e=t.target;e.data.tempNum=e.num;var i="";i=ur.isEquip(e.data.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e.data,i)}}},i.setreward=function(t){this.items=this.items||[];for(var e=Math.max(t.length,this.items.length),i=0;i<e;i++)if(i<t.length){var s=i%5,n=Math.floor(i/5);this.items[i]=this.items[i]||new fh(null,!1,!0,105,!0),this.items[i].mouseEnable=!0,this.items[i].pos(120*s+10,135*n),this.items[i].data=ur.getItem(t[i].id),this.items[i].num=t[i].val,this.items[i].parent||this.pan.addChild(this.items[i])}else this.items[i]&&this.items[i].parent&&this.items[i].removeSelf()},e}(),hF=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("display",this,this.onDisplay),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)}w(e,"modules.plays.treasure.TreasureRpView",bS);var i=e.prototype;return i.onDisplay=function(){Xo.info&&(this.box1.selected=1&Xo.info.red_point,this.box2.selected=2&Xo.info.red_point),this.on("undisplay",this,this.onUnDisplay)},i.onUnDisplay=function(){this.off("undisplay",this,this.onUnDisplay);var t=0;this.box1.selected&&(t+=1),this.box2.selected&&(t+=2),Xo.info&&t==Xo.info.red_point||Sr.ins.toTreasureSetRedPoint(t)},e}(),uF=function(t){function i(){var t;this.goodImg=null,this.mapItems=null,this.canClick=!1,this.items=null,this.chArr=["一","二","三","四","五","六","七","八","九","十"],i.__super.call(this),this.on("click",this,this.onClick),this.txtLink1.underline=this.txtLink2.underline=this.txtLink3.underline=this.txtLink4.underline=!0,this.pan.vScrollBarSkin="",this.on("display",this,this.onDisplay),this.mapItems=[];for(var e=0;e<3;e++)(t=new lF).alpha=0,this.imgBg.addChild(t),this.mapItems.push(t);this.goodImg=new fh(null,!1,!0,91),this.goodImg.mouseEnabled=!0,this.goodImg.pos(552,12),this.imgSp.addChild(this.goodImg)}w(i,"modules.plays.treasure.TreasureView",SS);var e=i.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.onDisplay=function(){if(T.register("PLAY_TREASURE_EFF",this,this.playEff),_t.removeFromFrame(this,this.loopAlphaToZero),_t.removeFromFrame(this,this.loopAlphaToOne),Xo.info)for(var t,e=0;e<this.mapItems.length;e++)(t=this.mapItems[e]).data=Xo.getMapVOByID(Xo.info.map_ids[e]),t.pos(Xo.curPos[2*e],Xo.curPos[2*e+1]),t.alpha=1,this.canClick=!0;this.on("undisplay",this,this.onUndisplay)},e.onUndisplay=function(){T.remove("PLAY_TREASURE_EFF",this,this.playEff),_t.clearTimeOutByObj(this),_t.removeFromFrame(this,this.loopAlphaToZero),_t.removeFromFrame(this,this.loopAlphaToOne),this.off("undisplay",this,this.onUndisplay)},e.playEff=function(t){this.showEff1(t[0],t[1],145*t[2]+50,535)},e.checkSecFresh=function(){var t,e=Xo.getEventVOByID(Xo.info.event_id);if(e)for(var i in this.mapItems)if((t=this.mapItems[i]).data&&t.data.id==e.mapsArr[Xo.info.hunt_index]){var s="当前地图中拥有当前特殊事件的下一张地图，是否确定花费"+Z.span("5元宝","#fbd815")+"刷新？";return void Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureRefresh,null)}5<=pe.gold?(s="是否花费"+Z.span("5元宝","#fbd815")+"刷新地图？",Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureRefresh,null,"treasureFresh")):Jt.addTip("元宝不足")},e.onClick=function(t){switch(t.target){case this.btnRefresh:if(Xo.info){var e=xo.getGoodsNumByType(xo.GOODS_ID,13000024),i=Xo.info?Xo.info.free_times+e:e;0<i?this.checkSecFresh():Lo.showSecAlert("当前已无寻宝次数，是否继续刷新？",this,this.checkSecFresh,null)}else Jt.addTip("数据未初始化");break;case this.imgRpSet:T.dispatch("OPEN_TREASURE_RP_VIEW");break;case this.txtLink1:T.dispatch("OPEN_TREASURE_LIST_VIEW");break;case this.txtLink2:if(e=xo.getGoodsNumByType(xo.GOODS_ID,13000024),0<(i=Xo.info?Xo.info.free_times+e:e)){var s="确定消耗"+Z.font(i+"张","#F7EF5F",26)+"藏宝图（含免费次数）随机快速寻宝吗？";Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureAutoHunt,null,"treasureHunt")}else Jt.addTip("没有寻宝次数哦");break;case this.txtLink3:T.dispatch("OPEN_TREASURE_LOG_VIEW");break;case this.txtLink4:ba.show(13000024);break;case this.goodImg:this.goodImg.data&&(this.goodImg.data.tempNum=1,Ae.show(this.goodImg.data,"BASE_GOODS_TIP"));break;default:if(t.target instanceof modules.plays.treasure.TreasureItem||t.target.parent instanceof modules.plays.treasure.TreasureItem)if(Xo.info){var n=t.target instanceof modules.plays.treasure.TreasureItem?t.target:t.target.parent;e=xo.getGoodsNumByType(xo.GOODS_ID,13000024),i=Xo.info.free_times;var o,a=Xo.getEventVOByID(Xo.info.event_id),l=!1;if(a)for(var r in this.mapItems)if((o=this.mapItems[r]).data&&o.data.id==a.mapsArr[Xo.info.hunt_index]){l=!0;break}l?0<e+i?n.data.id==a.mapsArr[Xo.info.hunt_index]?0==i?(s="确定消耗"+Z.font("1张","#F7EF5F",26)+"藏宝图寻宝此地图吗？",Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureHunt,[n.data.id,n.x,n.y],"treasureHunt")):Sr.ins.toTreasureHunt(n.data.id,n.x,n.y):(s=0<i?"当前地图不是特殊事件的下一张地图，确定寻宝此地图吗？":"当前地图不是特殊事件的下一张地图，确定消耗"+Z.font("1张","#F7EF5F",26)+"藏宝图寻宝此地图吗？",Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureHunt,[n.data.id])):Jt.addTip("没有寻宝次数哦"):0<e+i?0==i?(s="确定消耗"+Z.font("1张","#F7EF5F",26)+"藏宝图寻宝此地图吗？",Lo.showSecAlert(s,Sr.ins,Sr.ins.toTreasureHunt,[n.data.id],"treasureHunt")):Sr.ins.toTreasureHunt(n.data.id,n.x,n.y):Jt.addTip("没有寻宝次数哦")}else Jt.addTip("数据未初始化")}},e.update=function(){if(Xo.info){this.txtFree.text=Xo.info.free_times+"";var t=xo.getGoodsNumByType(xo.GOODS_ID,13000024);this.txtMap.text=t+"",this.txtLink4.x=this.txtMap.x+this.txtMap.textWidth+10,this.updateMaps(),this.updateDownList()}else Ne.isOpenTreasure()&&Sr.ins.toTreasureInfo()},e.updateMaps=function(){Xo.needChangePos(Xo.info.map_ids)&&(_t.removeFromFrame(this,this.loopAlphaToOne),_t.addToFrame(this,this.loopAlphaToZero),this.canClick=!1)},e.loopAlphaToZero=function(){for(var t,e=0;e<this.mapItems.length;e++)0<(t=this.mapItems[e]).alpha?t.alpha-=.05:(0==e&&(_t.removeFromFrame(this,this.loopAlphaToZero),_t.addToFrame(this,this.loopAlphaToOne)),t.data=Xo.getMapVOByID(Xo.info.map_ids[e]),t.pos(Xo.curPos[2*e],Xo.curPos[2*e+1]),this.canClick=!0)},e.loopAlphaToOne=function(){for(var t,e=0;e<this.mapItems.length;e++)(t=this.mapItems[e]).alpha<1?t.alpha+=.05:(t.alpha=1,0==e&&_t.removeFromFrame(this,this.loopAlphaToOne))},e.updateDownList=function(){var t=Xo.eventsArr;this.items=this.items||[];for(var e=0;e<t.length;e++)this.items[e]||(this.items[e]=new aF,this.items[e].pos(2,80*e),this.pan.addChild(this.items[e]));var i=this.items[0],s=Xo.getEventVOByID(Xo.info.event_id);if(s&&Xo.info.hunt_index<3){for(var n=0;n<3;n++)this["imgMap"+(n+1)].skin="modules/treasure/map/map"+s.mapsArr[n]+".png",this["imgMap"+(n+1)].gray=n>=Xo.info.hunt_index;this.goodImg.data=ur.getItem(s.reward),this.imgMap1.visible=this.imgMap2.visible=this.imgMap3.visible=this.goodImg.visible=!0,this.imgWen1.visible=this.imgWen2.visible=this.imgWen3.visible=this.imgGet.visible=!1}else this.imgMap1.visible=this.imgMap2.visible=this.imgMap3.visible=this.goodImg.visible=!1,this.imgWen1.visible=this.imgWen2.visible=this.imgWen3.visible=this.imgGet.visible=!0;for(var o=0;o<t.length;o++)i=this.items[o],s=t[o],i.txtDesc.innerHTML="事件"+this.chArr[s.id-1]+":"+s.mapsNameArr[0]+"→"+s.mapsNameArr[1]+"→"+s.mapsNameArr[2],i.goodsImage.data=ur.getItem(s.reward)},e.showEff1=function(t,e,i,s){var n,o=this;function a(){n.unload(),ih.show("moduleEffect/treasure3",i,s,o.imgBg),_t.setTimeout(o,l,[i,s],900)}function l(){ih.show("moduleEffect/treasure4",i,s,o.imgBg)}ih.show("moduleEffect/treasure1",t,e,this.imgBg),_t.setTimeout(this,function(t,e,i,s){(n=n||b.getOne()).loadAndPlay("moduleEffect/treasure2","default",0,!0),n.pos(t,e),n.rotation=90+180*Math.atan2(e-s,t-i)/Math.PI,o.imgBg.addChild(n),ie.to(n,{x:i,y:s},300,A.cubicOut,Q.create(o,a,[i,s],!0))},[t,e,i,s],600)},i}(),cF=(function(t){function e(){this._curState=null,this._effect=null,this._index=-1,this.numW=34,e.__super.call(this),this.boxDetail.visible=!1,this.imgDetail.on("click",this,this.onDetailClick)}w(e,"modules.rank.view.RankAwardDisplayItem",xS);var i=e.prototype;i.onDetailClick=function(t){var e="detail"==this._curState?"common":"detail";this.setState(e)},i.updatePower=function(t){var e,i=k.numToTexture(t,"com/ui/powerNum");this.spPow.graphics.clear();for(var s=0;s<i.length;s++)e=i[s],this.spPow.graphics.drawTexture(e,e.width*s);this.box.x=580-this.numW*i.length},i.setState=function(t){if(this._curState!=t){this._curState=t,this.height="detail"==this._curState?350:150,this.boxDetail.visible="detail"==this._curState;var e="detail"==this._curState?"common":"detail";this.imgDetail.skin="modules/rank/"+e+".png",this.event("RANK_CHANGE_TITLE_DISPLAY",[this._curState,this._index])}},I(0,i,"rankName",null,function(t){this.txtName.text=t+"榜单榜首奖励"}),I(0,i,"titleVo",null,function(t){if(t){this.setState("common"),this._effect||(this._effect=b.getOne(),this.addChild(this._effect)),this._effect.pos(120,120),this._effect.loadAndPlay(t._sceneUrl,"default",0,!0);for(var e,i=va.getAttrs(t.id),s="",n=0,o=0;o<i.length;o++)(e=i[o])&&(41==e.id||42==e.id||52==e.id||54==e.id?s+=Kt.inputEmpty(W.getAttrStrByPKV(e,"","：","%"),30)+(o%2==0?"":"\n"):s+=Kt.inputEmpty(W.getAttrStrByPKV(e,"","：",""),30)+(o%2==0?"":"\n"),n+=W.getAttrPower(e.id,e.val));n+=va.getSpcPower(t.id),this.txtAttr.text=s,this.updatePower(Math.floor(n))}}),I(0,i,"index",function(){return this._index},function(t){this._index=t})}(),function(t){function e(){this.reinfView=null,this.engraveView=null,this.qualityView=null,this.soulView=null,this.curView=null,this._eff=null,this.headPart=null,this.endHandler=null,e.__super.call(this),this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.reinfView=Aa.getIns(44e3,"RefineReinfView"),this.engraveView=Aa.getIns(44e3,"RefineEngraveView"),this.qualityView=Aa.getIns(44e3,"RefineQualityView"),this.soulView=Aa.getIns(44e3,"RefineSoulView"),this.headPart=new kh,this.headPart.pos(106,82),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.container.addChild(this.headPart);for(var t=0;t<4;t++)Nt.register("RP_REFINE_HEAD_ITEM_"+t,this.headPart.getItem(t),new Tt(39,10));Nt.register("RP_REFINE_REINF",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_REFINE_ENGRAVE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_REFINE_QUALITY",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_REFINE_SOUL",this.tab.items[3],new Tt(19,-10)),this.endHandler=Q.create(this,this.effComplete),this._eff=b.getOne(),this._eff.pos(377,624),this._eff.setEndHandler(this.endHandler),this.container.addChild(this._eff),this.tab.on("change",this,this.onTabChange),this.tab.itemClickFun=Q.create(this,this.onClickTab),this.btnClose1.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),Bt.isZKPf9991Server()&&(this.title.skin="modules/refine/xuanyuan2.png")}w(e,"modules.refine.view.RefinePanel",CS);var i=e.prototype;return i.onTabChange=function(t){this.chooseView(this.tab.selectedIndex+1)},i.onClickTab=function(t){3!=t||Ne.isRefineSoulOpen()?this.tab.selectedIndex=t:Jt.addTip("6转开放装备附魂功能")},i.checkOpen=function(t,e){3!=t||Ne.isRefineSoulOpen()?(this.tab.selectedIndex=t,this.openWindow(null,e)):Jt.addTip("6转开放装备附魂功能")},i.openWindow=function(t,e){void 0===e&&(e=!1),this.parent||this.headPart.resetSelect(0),laya.ui.View.prototype.openWindow.call(this,t,e)},i.onHeadItemClick=function(t){0<=t&&this.choosePartner(t)},i.chooseView=function(t){switch(Jo.curViewType=t,Jo.curViewType){case 1:this.curView=this.reinfView;break;case 2:this.curView=this.engraveView,pt.send(2,3,"轩辕鼎-铭刻页签按钮");break;case 3:this.curView=this.qualityView;break;case 4:this.curView=this.soulView,pt.send(2,10,"轩辕鼎-附魂页签按钮")}this.spEquip.removeChildren(),this.spEquip.addChild(this.curView),this.update(),ta.checkHeadRp()},i.choosePartner=function(t){Jo.curActorIndex=t;var e=pe.getPalByIndex(t);if(!e)return Jt.addTip("还没开启该角色"),void me.linkTo(10002);Jo.curChooseActor=e.pal_id,this.update()},i.update=function(){this.curView.update()},i.updateByRefineUp=function(t){void 0===t&&(t=!0),this.curView.updateByRefineUp(),t&&this.showUpSuss(),this.curView==this.reinfView&&this.checkGuideTip()},i.showUpSuss=function(){this._eff.visible=!0;var t=ta.getEffUrl();this._eff.loadAndPlay(t,"default",0,!1)},i.effComplete=function(){this._eff.visible=!1},i.checkGuideTip=function(){switch(LD.nextStep){case LD.CLICK_INTENSIFY_BTN2:T.dispatch("GUIDE_STEP",LD.CLICK_INTENSIFY_BTN2);break;case LD.CLICK_INTENSIFY_BTN3:T.dispatch("GUIDE_STEP",LD.CLICK_INTENSIFY_BTN3);break;case LD.CLICK_INTENSIFY_BTN4:T.dispatch("GUIDE_STEP",LD.CLICK_INTENSIFY_BTN4);break;case LD.CLICK_INTENSIFY_BTN5:T.dispatch("GUIDE_STEP",LD.CLICK_INTENSIFY_BTN5);break;case LD.CLOSE_REFINE:LD.showStep(LD.CLOSE_REFINE,this.btnClose2)}},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},e}()),dF=(function(t){function e(){this._data=null,e.__super.call(this),ft.ins().register(this,this,500,this.longClick,[this])}w(e,"modules.role.view.fashion.FashionTarItem",PS);var i=e.prototype;i.longClick=function(){if(this._data){var t=ur.getItem(this._data.val);t&&(t.tempNum=1,Ae.show(t,"BASE_GOODS_TIP"))}},i.checkHas=function(t){if(this._data){var e=oa.getFashionInfoByActID(t);if(e&&e.fashion_list)for(var i in e.fashion_list)if(e.fashion_list[i].fashion_id==this._data.id)return void(this.imgHas.visible=!0)}this.imgHas.visible=!1},i.updateImage=function(){if(this._data){for(var t,e=null,i=1;i<4;i++)if((t=oa.getFashionDic(i)).hasOwnProperty(this._data.id)){e=t[this._data.id];break}e&&(this.imgBg.skin="com/ui/goodsBgs"+e.color+".png",this.txtName.text=e.name,this.txtName.color=U.getColorDark(e.color),1==e.type?this.imgGoods.skin="modules/goods/maxico/"+e.id+oa.fashionTarSex+".png":2==e.type?this.imgGoods.skin="modules/goods/maxico/"+e.id+"1"+oa.fashionTarCoa+".png":this.imgGoods.skin="modules/goods/maxico/"+e.id+".png")}},i.update=function(t){this._data=t,this.updateImage()},I(0,i,"data",function(){return this._data}),I(0,i,"select",function(){return this.imgSel.visible},function(t){this.imgSel.visible=t})}(),function(t){function e(){this._xmlVO=null,this._p=null,e.__super.call(this)}w(e,"modules.role.view.fashion.RoleFashionItem",t);var i=e.prototype;i.createChildren=function(){t.prototype.createChildren.call(this),this.on("display",this,this.onDisplay)},i.onDisplay=function(){_t.addToSecond(this,this.timeLoop),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){_t.removeFromSceond(this,this.timeLoop)},i.timeLoop=function(){this._p&&this._p.expires>ya.serverTime?this.txtTime.text=x.getSpeedTime2(ya.serverTime,this._p.expires):_t.removeFromSceond(this,this.timeLoop)},i.setData=function(t,e,i){void 0===i&&(i=!0),this._xmlVO=t,this._p=e,t&&(this.imgBg.skin="com/ui/goodsBg"+t.color+".png",this.txtName.text=t.name,1==t.type?this.imgGoods.skin="modules/goods/maxico/"+t.id+oa.fashionSex+".png":2==t.type?this.imgGoods.skin="modules/goods/maxico/"+t.id+"1"+oa.fashionCoa+".png":this.imgGoods.skin="modules/goods/maxico/"+t.id+".png",e?(0==e.expires?(this.txtTime.text="永久",this.imgRP.visible=!1,this.imgBg.gray=this.imgGoods.gray=!1):e.expires<ya.serverTime?(this.txtTime.text="已过期",this.imgBg.gray=this.imgGoods.gray=!0,this.check()):(this.txtTime.text=x.getSpeedTime2(ya.serverTime,this._p.expires),_t.addToSecond(this,this.timeLoop),this.imgRP.visible=!1,this.imgBg.gray=this.imgGoods.gray=!1),this.txtStar.text=e.reinf_level+"星"):i?(this.txtTime.text="未拥有",this.txtStar.text="0星",this.check(),this.imgBg.gray=this.imgGoods.gray=!0):(this.spHas.visible=!1,this.imgBg.gray=this.imgGoods.gray=!1,this.select=!1,t.isNew=!1),this.imgNew.visible=t.isNew)},i.check=function(){if(xo.getGoodsData()){var t,e=!1,i=xo.getGoodsData().goods;for(var s in this.xmlVO.needsArr){for(var n in t=this.xmlVO.needsArr[s],i)if(i[n].typeid==parseInt(t)){e=!0;break}}this.imgRP.visible=e}},i.setHasTxt=function(t){t?(this.spHas.visible=!0,this.hasText.text="未激活",this.grayImg.visible=!0):(this.spHas.visible=!1,this.grayImg.visible=!1,this.hasText.text="已穿戴")},I(0,i,"select",null,function(t){this.imgSel.visible=t}),I(0,i,"xmlVO",function(){return this._xmlVO}),I(0,i,"p",function(){return this._p})}(TS),function(t){function e(){this._data=0,this._time=null,e.__super.call(this)}w(e,"modules.role.view.fashion.RoleFashionNeedItem",t);var i=e.prototype;i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"data",function(){return this._data},function(t){this._data=t;var e=ur.getItem(t);this.imgGoods.skin=e.realMaxico,this.txtName.text=e.title,this.imgBg.skin="com/ui/goodsBg"+e.color+".png";var i=xo.getGoodsNumByType(xo.GOODS_ID,t);this.gray=0==i}),I(0,i,"time",function(){return this._time},function(t){this._time=t,this.txtDesc.text="-1"!=t?"有效期"+t+"天":"永久"})}(kS),function(t){function e(){this._date=null,this._isMonsterNotData=!1,this._monsterDate=null,e.__super.call(this)}w(e,"modules.role.view.HeadItem",AS);var i=e.prototype;return I(0,i,"monsterPath",null,function(t){t?(this.imgHead.skin=t,this.imgHead.pos(5,0),this._isMonsterNotData=!0):(this.imgHead.skin="",this._isMonsterNotData=!1)}),I(0,i,"date",function(){return this._date}),I(0,i,"open",null,function(t){this.imgHeadBg.source=t?ut.getRes("com/ui/roleHeadAdd.png"):ut.getRes("com/ui/roleHead.png")}),I(0,i,"monsterData",function(){return this._monsterDate},function(t){this._monsterDate=t,null!=this._monsterDate?(this.monsterPath="unit/monster/"+t.skin_id+".png",we.getMonsterIsBossByType(t.type_id)?this.imgHead.pos(10,5):this.imgHead.pos(18,18)):this.monsterPath=""}),I(0,i,"select",null,function(t){(this._date||this._isMonsterNotData)&&(this.imgHeadBg.source=t?ut.getRes("com/ui/roleHeadSel.png"):ut.getRes("com/ui/roleHead.png"))}),I(0,i,"data",null,function(t){this._date=t,null!=this._date?this.imgHead.skin="com/head/"+this._date.ext.category+this._date.ext.sex+".png":this.imgHead.skin=""}),I(0,i,"loack",null,function(t){this.imgHeadBg.source=t?ut.getRes("com/ui/roleHeadLock.png"):ut.getRes("com/ui/roleHead.png")}),e}()),pF=(function(t){function e(t){this._cate=0,this._sex=0,this.isHas=!1,this.posIndex=0,this.myRole=null,this.curP=null,this.p=null,e.__super.call(this),this._cate=t,this.imgVoca.skin="modules/role/voca"+this._cate+".png",this.myRole=new Vh,this.spRole.addChild(this.myRole)}w(e,"modules.role.view.RoleCategoryItem",ES);var i=e.prototype;i.update=function(){this.isHas=pe.checkHasOpenCa(this._cate),this.imgHas.visible=this.isHas,this.p=pe.getPalByCate(this._cate),this.p?(this._sex=this.p.ext.sex,this.curP=this.p.ext.skin):(this.curP=new Object,this.curP.className="p_skin",this.curP.weapon=112e7+100*this._cate+10*this._sex+this._cate,this.curP.body=212e6+10*this._cate+this._sex),this.myRole.resetSkin(this.curP,this._sex,!0),this.myRole.resetState(0),this.myRole.play("stand",4)},I(0,i,"cate",function(){return this._cate},function(t){this.p||(this._cate=t,this.curP=new Object,this.curP.className="p_skin",this.curP.weapon=112e7+100*this._cate+10*this._sex+this._cate,this.curP.body=212e6+10*this._cate+this._sex),this.myRole.resetSkin(this.curP,this._sex)}),I(0,i,"sex",function(){return this._sex},function(t){this.p||(this._sex=t,this.curP=new Object,this.curP.className="p_skin",this.curP.weapon=112e7+100*this._cate+10*this._sex+this._cate,this.curP.body=212e6+10*this._cate+this._sex),this.myRole.resetSkin(this.curP,this._sex)})}(),function(t){function e(){this.equipItems=null,this.bgSp=null,this.comSp=null,this.roleSp=null,this.txtSp=null,this.rpSp=null,this.effSp=null,this.fightSoulSp=null,this.myRole=null,this.showAttrDialog=null,this.bitmapClip=null,e.__super.call(this),this.bgSp=new m,this.comSp=new m,this.comSp.mouseEnabled=!0,this.comSp.mouseThrough=!0,this.effSp=new m,this.roleSp=new m,this.txtSp=new m,this.rpSp=new m,this.fightSoulSp=new m,this.addChild(this.bgSp),this.addChild(this.comSp),this.addChild(this.effSp),this.addChild(this.roleSp),this.addChild(this.txtSp),this.addChild(this.rpSp),this.addChild(this.fightSoulSp),this.initItems(),this.txtViewAttr.underline=!0,this.imgTitle.on("click",this,this.onTitle),this.imgFashion.on("click",this,this.onFashion),this.imgDom.on("click",this,this.onDom),this.imgLegend.on("click",this,this.onLegend),this.btnChange.on("click",this,this.onChange),this.on("click",this,this.onDown),this.on("display",this,this.onDisplay);for(var t=0;t<4;t++)Nt.register("RP_FASHION_NEW1_"+t,this.imgFashion),Nt.register("RP_FASHION_NEW2_"+t,this.imgFashion),Nt.register("RP_FASHION_NEW3_"+t,this.imgFashion);Nt.register("RP_FOOT_PRINT_PURIFY",this.imgFashion),Nt.register("RP_FOOT_PRINT_CHANGE",this.imgFashion),G.isReviewVersion&&yt.isQQ&&9991==G.serverId&&(this.imgFashion.visible=!1),Nt.register("RP_FASHION1",this.imgFashion),Nt.register("RP_FASHION2",this.imgFashion),Nt.register("RP_FASHION3",this.imgFashion),Nt.register("RP_FASHION4",this.imgFashion),Nt.register("RP_ORANGE_UP",this.imgOran),Nt.register("RP_ORANGE_DE_1",this.imgOran),Nt.register("RP_ORANGE_DE_2",this.imgOran),Nt.register("RP_ORANGE_PU",this.imgOran),Nt.register("RP_TITLE",this.imgTitle)}w(e,"modules.role.view.RoleEquipView",RS);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.onDom=function(){pt.send(4,11,"主宰装备功能入口按钮"),T.dispatch("OPEN_DOMINAPANEL")},i.onLegend=function(){pt.send(4,12,"洪荒装备功能入口按钮"),me.linkTo(11402)},i.onTitle=function(t){pt.send(4,11,"称号功能入口按钮"),T.dispatch("OPEN_TITLE_PANEL"),Nt.hide("RP_TITLE")},i.onFashion=function(t){T.dispatch("OPEN_SUIT_PANEL")},i.onDisplay=function(){(T.register("ROLE_POWER_CHANGE",this,this.onRolePowerChange),T.register("EQUIP_UPDATE",this,this.update),T.register("FASHION_UPDATE",this,this.updateRole),T.register("EQUIP_UPDATE_POS",this,this.equipEff),this.on("undisplay",this,this.onUNDisplay),LD.nextStep==LD.OPEN_ZHUANBEI)?LD.showStep(LD.OPEN_ZHUANBEI,this.btnChange):0==LD.hadShow(LD.OPEN_SOUL_BTN)&&0<xo.getGoodsNumByTypeID(10201105)&&LD.showStep(LD.OPEN_SOUL_BTN,this.imgBuildSoul);oa.initRoleSuitInfo(),Tr.ins().toSuitInfo()},i.onUNDisplay=function(){T.remove("ROLE_POWER_CHANGE",this,this.onRolePowerChange),T.remove("EQUIP_UPDATE",this,this.update),T.remove("FASHION_UPDATE",this,this.updateRole),T.remove("EQUIP_UPDATE_POS",this,this.equipEff),this.off("undisplay",this,this.onUNDisplay)},i.equipEff=function(t){var e;for(var i in t){e=t[i];var s=ur.getItem(e.type_id);5==s.color?ih.show("moduleEffect/zbcheng",na.equipPos[e.pos-1].x+57,na.equipPos[e.pos-1].y+57,this):6==s.color?ih.show("moduleEffect/zbhong",na.equipPos[e.pos-1].x+57,na.equipPos[e.pos-1].y+57,this):ih.show("moduleEffect/changeover",na.equipPos[e.pos-1].x+52,na.equipPos[e.pos-1].y+52,this)}},i.onRolePowerChange=function(){var t,e=pe.getPalByIndex(oa.curActorIndex).ext.power,i=k.numToTexture(e,"com/ui/powerNum");this.spPower.graphics.clear();for(var s=0;s<i.length;s++)t=i[s],this.spPower.graphics.drawTexture(t,t.width*s)},i.onChange=function(t){c.send(29005);var e=oa.getCanChangeEquips();if(e&&0<e.length){var i=pe.getPalByIndex(oa.curActorIndex).base.role_id;Tr.ins().isOneKey=!0,Tr.ins().toEquipLoad(i,e)}else Jt.addTip("当前没有更好的装备")},i.onDown=function(t){var e=pe.getPalByIndex(oa.curActorIndex);if(t.target instanceof modules.role.view.EquipItem){var i=t.target;switch(i.equipPos){case 11:pt.send(4,7,"天雷护符入口");break;case 12:case 13:break;case 14:pt.send(4,10,"八卦护符入口")}11<=i.equipPos&&i.equipPos<=14?e&&T.dispatch("OPEN_SPECIAL_EQUIP",e.pal_id,i.equipPos):i.data?Ae.show(i.data,"EQUIP_TIP"):Jt.addTip("当前未穿上该位置装备")}else t.target==this.imgBuildSoul?(pt.send(4,5,"铸魂功能入口按钮"),e&&T.dispatch("OPEN_BUILDSOUL_VIEW",e.pal_id)):t.target==this.imgOran?e&&(10<=pe.myLevel?T.dispatch("OPEN_ORANGE_VIEW",e.pal_id):Jt.addTip("10级开放橙装入口")):t.target==this.txtViewAttr&&(pt.send(4,3,"查看人物属性连接"),e&&(this.showAttrDialog=this.showAttrDialog||Aa.getIns(47e3,"RoleAttrView"),this.showAttrDialog.update(e),this.showAttrDialog.openWindow()))},i.initItems=function(){var t;this.equipItems=this.equipItems||[];for(var e=NaN,i=NaN,s=0;s<na.equipPos.length;s++)t=new QB,e=na.equipPos[s].x,i=na.equipPos[s].y,t.pos(e,i),t.equipPos=na.equipPos[s].pos,this.bgSp.addChild(t.imgGoodsBg),this.roleSp.addChild(t.imgSoul),this.roleSp.addChild(t.imgSp),this.txtSp.addChild(t.txtInfo),this.txtSp.addChild(t.txtLeft),this.txtSp.addChild(t.txtRight),this.rpSp.addChild(t.imgRp),this.fightSoulSp.addChild(t.boxSoul),this.effSp.addChild(t.refineSoulEff),this.comSp.addChild(t),t.imgGoodsBg.pos(e,i),t.imgSoul.pos(e-14,i-15),t.imgSp.pos(e-4,i-5),t.txtInfo.pos(e,i+110),t.txtLeft.pos(e+7,i+74),t.txtRight.pos(e+45,i+74),t.imgRp.pos(e+87,i-13),t.refineSoulEff.pos(e+52,i+100),t.boxSoul.pos(e-18,i-9),this.equipItems.push(t)},i.updateRole=function(){var t=pe.getPalByIndex(oa.curActorIndex);if(t){this.myRole=this.myRole||new Vh;var e=t.ext.skin;this.myRole.resetSkin(e,t.ext.sex,!0),this.myRole.resetState(0),this.myRole.play("stand",4),this.spRole.addChild(this.myRole)}},i.update=function(){this.updateRole();var t=pe.getPalByIndex(oa.curActorIndex);if(t){var e,i,s=!1;for(var n in this.equipItems){var o,a;for(var l in i=this.equipItems[n],s=!1,t.equip)if(o=t.equip[l],i.equipPos==o.pos){i.data=o,i.soul=0<oa.getSpEquipNowLv(t.pal_id,20+o.pos),s=!0;break}for(var r in q.SPECIAL_EQUIP)if(a=q.SPECIAL_EQUIP[r],e=sn.getSpEquipVO(a),i.equipPos==a){i.data=e,s=!0;break}s||(i.data=null)}var h,u=pe.getPalByIndex(oa.curActorIndex).ext.power,c=k.numToTexture(u,"com/ui/powerNum");this.spPower.graphics.clear();for(var d=0;d<c.length;d++)h=c[d],this.spPower.graphics.drawTexture(h,h.width*d);this.imgBuildRp.visible=Nt.checkModulesShowing("RP_BUILDSOUL_"+oa.curActorIndex);var p=Nt.checkModulesShowing("RP_DOMINATE_CHANGE_"+oa.curActorIndex);p=(p=(p=(p=p||Nt.checkModulesShowing("RP_DOMINATE_QU_"+oa.curActorIndex))||Nt.checkModulesShowing("RP_DOMINATE_UP_"+oa.curActorIndex))||Nt.checkModulesShowing("RP_DOMINATE_DE"))||Nt.checkModulesShowing("RP_DOMINATE_AD"),this.imgDomRp.visible=p,this.imgDom.visible=110<=pe.myEquipLevel;var m=Nt.checkModulesShowing("RP_LEGEND_DE");m=m||Nt.checkModulesShowing("RP_LEGEND_UP"),this.imgLegendRp.visible=m,this.imgLegend.visible=10<=pe.myEquipLevel}},i.showBtnEffect=function(t){this.bitmapClip||(this.bitmapClip=b.getOne(),this.bitmapClip.pos(85,36)),t?(this.bitmapClip.loadAndPlay("moduleEffect/change","default",0,!0),this.btnChange.addChild(this.bitmapClip)):(this.bitmapClip.stop(),this.btnChange.removeChild(this.bitmapClip))},e}()),mF=function(t){function e(){this.headPart=null,this.curView=null,this.equipView=null,this.wingView=null,this.regrowView=null,this.splitView=null,this.outKey=0,e.__super.call(this),this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.spHead.addChild(this.headPart),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.tab.on("change",this,this.onClick),this.tab.itemClickFun=Q.create(this,this.checkOpen);for(var t=0;t<4;t++)Nt.register("RP_EQUIP_CHANGE_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_SPLIT_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_WING_EQUIP_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("WING_LEVEL_UP_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_BUILDSOUL_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_SPEQUIP_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_DOMINATE_CHANGE_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_DOMINATE_QU_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_DOMINATE_UP_"+t,this.headPart.getItem(t),new Tt(39,10));Nt.register("RP_FASHION1",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_FASHION2",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_FASHION3",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_BUILDSOUL",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_ORANGE_UP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_ORANGE_DE_1",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_ORANGE_DE_2",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_SPEQUIP",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_EQUIP_CHANGE",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_OPEN_PAL",this.tab.items[0],new Tt(19,-10)),Nt.register("RP_REGROW_SCORE",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_REGROW",this.tab.items[1],new Tt(19,-10)),Nt.register("RP_SPLIT",this.tab.items[3],new Tt(19,-10)),Nt.register("RP_WING_EQUIP",this.tab.items[2],new Tt(19,-10)),Nt.register("RP_WING_EQUIP_OPEN",this.tab.items[2],new Tt(19,-10)),Nt.register("WING_LEVEL_UP",this.tab.items[2],new Tt(19,-10)),this.on("display",this,this.onDisplay),Bt.isZKPf9991Server()&&(this.title.skin="modules/role/title2.png")}w(e,"modules.role.view.RolePanel",OS);var i=e.prototype;return i.onDisplay=function(){T.register("BAGDATA_CHANGE",this,this.checkWingCanUp),T.register("MONEY_CHANGE",this,this.checkWingCanUp),Xr.ins().toInfo(),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("BAGDATA_CHANGE",this,this.checkWingCanUp),T.remove("MONEY_CHANGE",this,this.checkWingCanUp),this.off("undisplay",this,this.onUNDisplay)},i.showGuide=function(){LD.nextStep==LD.CLOSE_ROLE_PANEL&&LD.showStep(LD.CLOSE_ROLE_PANEL,this.btnClose2)},i.checkOpen=function(t){1==t&&pe.myLevel<100?Jt.addTip("100级开启转生"):this.tab.selectedIndex=t},i.update=function(){0<this.outKey&&_t.clearTimeout(this.outKey),this.outKey=_t.setTimeout(this,this.realUpdate,null,50)},i.realUpdate=function(){this.checkRoleHead(),this.curView&&this.curView.update(),this.outKey=0},i.checkRoleHead=function(){for(var t=0;t<4;t++)Nt.hide("RP_EQUIP_CHANGE_"+t),Nt.hide("RP_SPLIT_"+t),Nt.hide("RP_WING_EQUIP_"+t),Nt.hide("WING_LEVEL_UP_"+t),Nt.hide("RP_BUILDSOUL_"+t),Nt.hide("RP_SPEQUIP_"+t),Nt.hide("RP_DOMINATE_CHANGE_"+t),Nt.hide("RP_DOMINATE_QU_"+t),Nt.hide("RP_DOMINATE_UP_"+t);this.curView instanceof modules.role.view.split.SplitView?this.checkSplitRedHead():this.curView instanceof modules.role.view.RoleEquipView?(this.checkRoleRedHead(),this.checkRoleBuildSoul(),this.checkRoleSpEquip(),this.checkRoleDomin()):this.curView instanceof modules.role.view.wings.RoleWingView&&(this.checkWingRedHead(),this.checkWingCanUp())},i.checkRoleDomin=function(){var t,e=sn.getRegrowEquipInfo();if(e)for(var i in e){t=e[i];var s,n=pe.getPalIndexByID(t.pal_id),o=!1,a=!1;for(var l in t.pos_list){s=t.pos_list[l];var r=sn.getXMLVObyPos(s.pos);o=o||0<s.equip_type_id&&s.level<r.upTotal&&xo.getGoodsNumByType(xo.GOODS_ID,10201217)>=r.getUpNeedByLevel(s.level),a=a||0<s.equip_type_id&&s.quench<r.quenchTotal&&xo.getGoodsNumByType(xo.GOODS_ID,na.DOMIN_CHIP_ARR[Math.floor(s.quench/10)])>=r.getQuenchNeedByLevel(s.quench)}o?Nt.show("RP_DOMINATE_UP_"+n):Nt.hide("RP_DOMINATE_UP_"+n),a?Nt.show("RP_DOMINATE_QU_"+n):Nt.hide("RP_DOMINATE_QU_"+n);var h=sn.getCanChangeRegrowEquip(t);h&&0<h.length?Nt.show("RP_DOMINATE_CHANGE_"+n):Nt.hide("RP_DOMINATE_CHANGE_"+n)}},i.checkRoleSpEquip=function(){for(var t=!1,e=0;e<pe.pals.length;e++){t=!1;var i,s=pe.pals[e];for(var n in s.spec_equips)if((i=s.spec_equips[n]).id<20){var o=sn.getSpEquipVO(i.id);if(i.lv<o.level){var a=o.goodsID;if(xo.getGoodsNumByType(xo.GOODS_ID,a)>=o.getNeedByLv(i.lv)&&(t=!ha.checkIsPing2(ra.getSpeEquipModID(i.id),s.pal_id,0)))break}}t?Nt.show("RP_SPEQUIP_"+e):Nt.hide("RP_SPEQUIP_"+e)}},i.checkRoleBuildSoul=function(){for(var t=!1,e=0;e<pe.pals.length;e++){t=!1;var i,s=pe.pals[e];for(var n in s.spec_equips)if(20<(i=s.spec_equips[n]).id&&i.lv<1){var o=sn.getSpEquipVO(i.id).goodsID;if(0<xo.getGoodsNumByType(xo.GOODS_ID,o)){t=!0;break}}t?Nt.show("RP_BUILDSOUL_"+e):Nt.hide("RP_BUILDSOUL_"+e)}},i.checkWingRedHead=function(){for(var t=0;t<4;t++)oa.getWingTOCVO(t)&&xo.checkHasBetterWingEquipCanEquip(oa.getWingTOCVO(t))?Nt.show("RP_WING_EQUIP_"+t):Nt.hide("RP_WING_EQUIP_"+t)},i.checkWingCanUp=function(){if(this.curView instanceof modules.role.view.wings.RoleWingView)for(var n=0;n<4;n++){var t=oa.getWingTOCVO(n);if(t){var e=oa.getWingXMLVO(t.level);if(oa.getWingXMLVO(t.level+1))if(t.star==e.starNum){if(o(!0,n,1))continue}else if(0<xo.getGoodsNumByType(xo.GOODS_ID,10201112)){if(o(!0,n,0))continue}else{var i=e.WingStarDic[t.star],s=i.exp-t.exp;if(pe.user.attr.silver>=Math.ceil(s/i.copperUp)*i.oneTimeUse){if(o(!0,n,1))continue}else if(xo.getGoodsNumByType(xo.GOODS_ID,10201111)>=Math.ceil(s/i.wingUp)&&o(!0,n,1))continue}}Nt.hide("WING_LEVEL_UP_"+n)}function o(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);var s=t&&!ha.checkIsPing(2,e,i);return s&&Nt.show("WING_LEVEL_UP_"+n),s}},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.headPart.resetSelect(0)},i.showViewByIndex=function(t){void 0===t&&(t=0),this.tab.selectedIndex=t,this.chooseView(t)},i.choosePartner=function(t){oa.curActorIndex=t,this.update()},i.onHeadItemClick=function(t){0<=t&&this.choosePartner(t)},i.onClick=function(t){switch(this.tab.selectedIndex){case 0:this.chooseView(0);break;case 1:this.chooseView(1);break;case 2:this.chooseView(2);break;case 3:this.chooseView(3)}},i.chooseView=function(t){switch(this.spView.removeChildren(),t){case 0:this.equipView=this.equipView||new pF,this.curView=this.equipView,this.spView.addChild(this.equipView),this.spHead.visible=!0;break;case 1:pt.send(20,1,"转生入口"),this.regrowView=this.regrowView||Aa.getIns(47e3,"regrow.RegrowView"),this.curView=this.regrowView,this.spView.addChild(this.regrowView),this.spHead.visible=!1;break;case 2:this.wingView=this.wingView||new gF,this.curView=this.wingView,this.spView.addChild(this.wingView),this.spHead.visible=!0;break;case 3:this.splitView=this.splitView||new fF,this.curView=this.splitView,this.spView.addChild(this.splitView),this.spHead.visible=!0}this.update()},i.checkSplitRedHead=function(){for(var t=0;t<pe.pals.length;t++){var e=oa.getSplitTOCVO(t);if(null!=e){var i=oa.getSplitXMLVO();i.stepNum,e.step;if(i.stepNum>e.step)if(i.levelNum==e.level)Nt.show("RP_SPLIT_"+t);else{var s=xo.getGoodsNumByType(xo.GOODS_ID,10201122),n=xo.getGoodsNumByType(xo.GOODS_ID,10201160);0<s&&!ha.checkIsPing(3,t,0)||10<=n&&!ha.checkIsPing(3,t,1)?Nt.show("RP_SPLIT_"+t):Nt.hide("RP_SPLIT_"+t)}else Nt.hide("RP_SPLIT_"+t)}}},i.checkRoleRedHead=function(){for(var t,e,i,s=xo.getEquipData()?xo.getEquipData().goods:[],n=0,o=0,a=0;a<pe.pals.length;a++){var l=pe.pals[a];t=l.equip;var r,h=!1;for(var u in q.ALLPUTSINBODY){var c,d;for(var p in r=q.ALLPUTSINBODY[u],i=null,n=0,o=q.PUT2TYPEMAP[r],t)if((c=t[p]).pos==r){i=c,n=ur.getItem(i.type_id).basePow+W.getAddExtraPower(i.extra_attr);break}for(var m in s)if(d=s[m],(e=ur.getItem(d.typeid)).type==o&&e.level<=pe.myEquipLevel&&(0==e.category||e.category==l.ext.category)&&ur.isNormalEquip(e.type)&&e.basePow+W.getAddExtraPower(d.equip_info.extra_attrs)>n){h=!0;break}if(h)break}h?Nt.show("RP_EQUIP_CHANGE_"+a):Nt.hide("RP_EQUIP_CHANGE_"+a),a==oa.curActorIndex&&this.equipView.showBtnEffect(h)}},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.closeWindow=function(){c.send(29006),laya.ui.View.prototype.closeWindow.call(this)},e}(),fF=function(t){function e(){this.splitEff=null,this.alertVO=null,this._curVO=null,this.curXMLVO=null,this.curRoleIndex=-1,this.curTotalLevel=0,this.curShow=0,e.__super.call(this)}w(e,"modules.role.view.split.SplitView",t);var i=e.prototype;return h.imps(i,{"com.ui.IViewUpdate":!0}),i.createChildren=function(){t.prototype.createChildren.call(this),this.on("click",this,this.onDown),this.splitEff=b.getOne(),this.splitEff.pos(339,199),vF.getOne(3,597,130,this),this.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)},i.onUndisplay=function(){this.curShow=0},i.onDown=function(t){switch(t.target){case this.btn2:pt.send(21,2,"元神-直升一阶"),null==this.alertVO&&(this.alertVO=new Ee,this.alertVO.title="温馨提示",this.alertVO.yesFun=this.checkHas,this.alertVO.yesCaller=this);var e=xo.getGoodsNumByType(xo.GOODS_ID,10201122);this.alertVO.msg=Z.span("确定消耗","#5d3924",26)+Z.span("元神直升丹×1","#bd5713",26)+Z.span("将元神直升一阶吗？","#5d3924",26)+"<br/>"+Z.span("当前拥有元神直升丹：","#5d3924",26)+Z.span(e+"","#139604",26)+Z.span("个","#5d3924",26),EF.showVO(this.alertVO);break;case this.btn1:if(this.curXMLVO&&this.curXMLVO.stepNum>=this._curVO.step)this.curXMLVO.levelNum==this._curVO.level?this.toUpgrade(2):(e=xo.getGoodsNumByType(xo.GOODS_ID,10201160))>=this.curXMLVO.oneLvNeed?this.toUpgrade(1):ba.show(10201160)}},i.checkHas=function(){0<xo.getGoodsNumByType(xo.GOODS_ID,10201122)?this.toUpgrade(3):Jt.addTip("元神直升丹不足，请留意运营活动")},i.toUpgrade=function(t){Tr.ins().toRoleSplitUpgrade(oa.curActorIndex+1,t)},i.update=function(){if(this._curVO=oa.getSplitTOCVO(oa.curActorIndex),this._curVO){var t=6*(this._curVO.step-1)+this._curVO.level;if(oa.curActorIndex==this.curRoleIndex&&t!=this.curTotalLevel){for(var e=this.curTotalLevel+1;e<=t;)e%6<this.curXMLVO.stepNum&&ih.show("moduleEffect/lightSplit",47,95,this["img"+e%6]),++e;this.curTotalLevel=t}else this.curRoleIndex=oa.curActorIndex,this.curTotalLevel=t;this.curXMLVO=oa.getSplitXMLVO(),t=0<t?t:0;for(var i,s=W.parseAttrToArr(this.curXMLVO.attr),n=s.length,o="",a=0,l=0;l<n;l++)i=s[l],o+=W.getAttrStrByNum(parseInt(i[0]),t*parseInt(i[1]),""," +","\n"),a+=W.getAttrPowerS(i[0],i[1]);this.txtNow.text=o,this.txtLv.text=this._curVO.step+"阶",this.changeEffect(this._curVO.step);var r,h=k.numToTexture(Math.floor(a*t),"com/ui/powerNum");this.spPower.graphics.clear();for(var u=0;u<h.length;u++)r=h[u],this.spPower.graphics.drawTexture(r,r.width*u);for(var c=1;c<this.curXMLVO.levelNum+1;c++){var d="modules/role/split"+c+"_";d=this._curVO.level<c?d+"dark.png":d+"light.png",this["img"+c].skin=d}this.curXMLVO.stepNum,this._curVO.step;if(this.imgArrow.visible=!0,this.txtNext.visible=!0,this.txtNow.x=134,this.curXMLVO.stepNum>this._curVO.step){var p=this.curXMLVO.levelNum==this._curVO.level;if(p)t+=2,this.btn1.label="升阶",this.txtHas.text="",this.txtNeed1.text="",this.imgInput.visible=!1,this.txtDesc.text=this._curVO.step+"阶元神已满级，可进阶";else{t+=1,this.btn1.label="提升";var m=xo.getGoodsNumByType(xo.GOODS_ID,10201160);this.imgInput.visible=!0,this.txtHas.text=m+"",this.txtNeed1.text="/"+this.curXMLVO.oneLvNeed,this.txtHas.color=m>=this.curXMLVO.oneLvNeed?"#96f254":"#b60202",this.txtDesc.text="消耗元神珠"}for(o="",n=s.length,l=0;l<n;l++)i=s[l],o+=W.getAttrStrByNum(parseInt(i[0]),t*parseInt(i[1]),""," +","\n");this.txtNext.text=o,this.btn1.gray=this.btn2.gray=!1,this.btn1.mouseEnabled=this.btn2.mouseEnabled=!0,m=xo.getGoodsNumByType(xo.GOODS_ID,10201122),this.imgRp.visible=0<m}else if(this.curXMLVO.stepNum==this._curVO.step){if(p=this.curXMLVO.levelNum==this._curVO.level)t+=2,this.imgInput.visible=!1,this.txtDesc.text=this._curVO.step+"阶元神已满级",this.btn1.gray=this.btn2.gray=!0,this.btn1.mouseEnabled=this.btn2.mouseEnabled=!1,this.imgArrow.visible=!1,this.txtNext.visible=!1,this.txtNow.x=265;else{for(t+=1,this.btn1.label="提升",this.imgInput.visible=!0,m=xo.getGoodsNumByType(xo.GOODS_ID,10201160),this.txtHas.text=m+"",this.txtNeed1.text="/"+this.curXMLVO.oneLvNeed,this.txtHas.color=m>=this.curXMLVO.oneLvNeed?"#96f254":"#b60202",this.txtDesc.text="消耗元神珠",this.btn1.gray=this.btn2.gray=!1,this.btn1.mouseEnabled=this.btn2.mouseEnabled=!0,o="",n=s.length,l=0;l<n;l++)i=s[l],o+=W.getAttrStrByNum(parseInt(i[0]),t*parseInt(i[1]),""," +","\n");this.txtNext.text=o}m=xo.getGoodsNumByType(xo.GOODS_ID,10201122),this.imgRp.visible=0<m}else this.txtNext.text="已经满阶",this.imgMax.visible=!0,this.btn1.gray=this.btn2.gray=!0,this.btn1.mouseEnabled=this.btn2.mouseEnabled=!1,this.imgInput.visible=!1,this.imgRp.visible=!1}else Tr.ins().toRoleSplitInfo(oa.curActorIndex+1)},i.changeEffect=function(t){var e=t%4+1;this.curShow!=e&&(this.curShow=e,this.splitEff.loadAndPlay("moduleEffect/split"+this.curShow,"default",0,!0))},e}(LS),_F=function(t){function i(){this.type=0,this.putWhere=0,this._data=null,i.__super.call(this)}w(i,"modules.role.view.wings.RoleWingEquipItem",t);var e=i.prototype;return e.createChildren=function(){t.prototype.createChildren.call(this)},I(0,e,"date",function(){return this._data},function(t){if(this._data=t){var e=ur.getItem(t.type_id);this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.imgEquip.skin=e.realMaxico,this.imgBg.skin="com/ui/goodsBg"+e.color+".png"}else this.imgEquip.skin="",this.imgBg.skin="com/ui/itemAddBg.png",this.txtName.text=i.NAMEARR[this.putWhere],this.txtName.color=""}),_(i,["NAMEARR",function(){return this.NAMEARR=["","翠羽","翼珠","翼石","尾翼"]}]),i}(DS),gF=function(i){function t(){this.avatarPart=null,this._autoState=!1,this.index=0,this._lastStar=0,this.starArr=null,this.curStarXMLVO=null,this.curXMLVO=null,this._curVO=null,this._curLv=0,t.__super.call(this)}w(t,"modules.role.view.wings.RoleWingView",i);var e=t.prototype;return h.imps(e,{"com.ui.IViewUpdate":!0}),e.createChildren=function(){var t;i.prototype.createChildren.call(this),this.starArr=[];for(var e=0;e<10;e++)(t=new et).x=54*e,this.spStar.addChild(t),this.starArr.push(t);for(this.imgFashion.on("click",this,this.onFashion),this.btnCopper.on("click",this,this.onClick),this.btnWIngs.on("click",this,this.onClick),this.btnAuto.on("click",this,this.onAutoClick),this.btnUp.on("click",this,this.onClickUp),this.btnActive.on("click",this,this.onClickActive),this.imgUp.on("click",this,this.onImgClick),this.imgEquip.on("click",this,this.onImgClick),Nt.register("RP_WING_EQUIP",this.imgEquip),Nt.register("RP_WING_EQUIP_OPEN",this.btnActive),this.on("display",this,this.onDisplay),e=0;e<4;e++)Nt.register("RP_FASHION_NEW1_"+e,this.imgFashion),Nt.register("RP_FASHION_NEW2_"+e,this.imgFashion),Nt.register("RP_FASHION_NEW3_"+e,this.imgFashion);Nt.register("RP_FASHION1",this.imgFashion),Nt.register("RP_FASHION2",this.imgFashion),Nt.register("RP_FASHION3",this.imgFashion),vF.getOne(2,570,170,this.spActive)},e.onFashion=function(t){pt.send(4,11,"称号功能入口按钮"),T.dispatch("FASHION_OPEN",2)},e.onDisplay=function(){T.register("MONEY_CHANGE",this,this.onMoneyChange),T.register("BAGDATA_CHANGE",this,this.onBagdateChange),T.register("ROLE_FUNCTION_OPEN",this,this.onFunctionOpen),T.register("ROLE_POWER_INFO_CHANGE",this,this.onPowerUpdate),this.on("undisplay",this,this.onUNDisplay)},e.onPowerUpdate=function(){var t,e=pe.getTypePowerByIndex(oa.curActorIndex,1701),i=pe.getTypePowerByIndex(oa.curActorIndex,1702),s=k.numToTexture(e+i,"com/ui/powerNum");this.spPower.graphics.clear();for(var n=0;n<s.length;n++)t=s[n],this.spPower.graphics.drawTexture(t,t.width*n)},e.onFunctionOpen=function(t){1==t&&this.update()},e.onUNDisplay=function(){T.remove("MONEY_CHANGE",this,this.onMoneyChange),T.remove("BAGDATA_CHANGE",this,this.onBagdateChange),T.remove("ROLE_FUNCTION_OPEN",this,this.onFunctionOpen),T.remove("ROLE_POWER_INFO_CHANGE",this,this.onPowerUpdate),this.off("undisplay",this,this.onUNDisplay),this.autoState=!1,this._curLv=0},e.onMoneyChange=function(){this.curStarXMLVO&&(pe.user.attr.silver>=this.curStarXMLVO.oneTimeUse?this.txtCopper.color="#ffffff":this.txtCopper.color="#ff0000",this.txtCopper.text=""+this.curStarXMLVO.oneTimeUse)},e.onBagdateChange=function(){var t=xo.getGoodsNumByType(xo.GOODS_ID,10201111);this.txtWings.color=0<t?"#ffffff":"#ff0000",this.txtWings.text=t+"/1"},e.onAutoClick=function(){this.autoState=!this.autoState},e.toAutoUp=function(){if(this.index++,this.index%2==0&&1==this.autoState)if(this._curVO&&this.curStarXMLVO&&this._curVO.exp<this.curStarXMLVO.exp){if(0<xo.getGoodsNumByType(xo.GOODS_ID,10201111))return void Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,3);pe.user.attr.silver>=this.curStarXMLVO.oneTimeUse?Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,2):(Jt.addTip("铜钱不足，自动升星停止"),ba.show(10201113),this.autoState=!1,this.btnAuto.label="自动升星")}else this.autoState=!1,this.btnAuto.label="自动升星"},e.onClickActive=function(){16<=pe.myLevel?Tr.ins().toRoleFunctionOpen(1):Jt.addTip("16级激活羽翼哦！")},e.onClickUp=function(){Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,4)},e.onImgClick=function(t){if(t.target==this.imgUp)if(pt.send(13,2,"角色-羽翼-直升一阶按钮"),this._curVO.star==this.curXMLVO.starNum)Jt.addTip("请先升级当前羽翼再使用该功能");else{var e=new Ee;e.title="温馨提示",e.msg=Z.span("确认要使用羽翼直升丹×1提升羽翼吗？","#5d3924",26)+"<br/>"+Z.span("\n说明：5阶及以下羽翼使用可使羽翼直升一阶，其他等阶羽翼使用则增加3000点羽翼经验。","#5d3924",26),e.yesFun=this.btnYHandler,e.yesCaller=this,EF.showVO(e),this.autoState=!1,this.btnAuto.label="自动升星"}else pt.send(13,1,"角色-羽翼-装备按钮"),Tr.ins().openRoleWingEquip(),this.autoState=!1,this.btnAuto.label="自动升星"},e.btnYHandler=function(){0<xo.getGoodsNumByType(xo.GOODS_ID,10201112)?Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,1):Jt.addTip("物品数量不足!")},e.onClick=function(t){var e=!1;this.curXMLVO&&this.curXMLVO.WingStarDic&&this.curXMLVO.WingStarDic[this._curVO.star+1]?e=!0:e=!!oa.getWingXMLVO((this._curVO?this._curVO.level:0)+1);if(e)switch(t.target){case this.btnCopper:pe.user.attr.silver>=this.curStarXMLVO.oneTimeUse?Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,2):ba.show(10201113);break;case this.btnWIngs:0<xo.getGoodsNumByType(xo.GOODS_ID,10201111)?Tr.ins().toRoleWingUpgrade(oa.curActorIndex+1,3):Jt.addTip("羽毛不足，可从礼券商店获得羽毛")}else Jt.addTip("当前已经是最高级了！")},e.updateWingEff=function(t){this._curLv!=t&&(this.imgWing.skin=oa.getWingXMLVO(t).path,this.imgWing.x=oa.getWingXMLVO(t).x-37,this.imgWing.y=oa.getWingXMLVO(t).y-218,this._curLv=t)},e.update=function(){if(!(16<=pe.myLevel&&oa.checkFunctionIsOpen(1)))return this.spUnActive.visible=!0,this.spActive.visible=!1,this.txtWing.text="1阶羽翼",void this.updateWingEff(1);if(this.spUnActive.visible=!1,this.spActive.visible=!0,this._curVO=oa.getWingTOCVO(oa.curActorIndex),this._curVO){this._lastStar!=this._curVO.star&&(this._lastStar=this._curVO.star,this.autoState=!1,this.btnAuto.label="自动升星"),this.curXMLVO=oa.getWingXMLVO(this._curVO.level),this.curStarXMLVO=this.curXMLVO.WingStarDic[this._curVO.star],this.txtWing.text=this.curXMLVO.name,this.updateWingEff(this._curVO.level);for(var t,e=W.parseAttrToArr(this.curStarXMLVO.attr),i=e.length,s="",n=0;n<i;n++)t=e[n],s+=W.getAttrStrByArr(t,""," +","\n");this.txtNowLev.text=s,this.onPowerUpdate();var o,a=xo.getGoodsNumByType(xo.GOODS_ID,10201111);if(this.txtWings.color=0<a?"#ffffff":"#ff0000",this.txtWings.text=a+"/1",pe.user.attr.silver>=this.curStarXMLVO.oneTimeUse?this.txtCopper.color="#ffffff":this.txtCopper.color="#ff0000",this.txtCopper.text=""+this.curStarXMLVO.oneTimeUse,this.curXMLVO.WingStarDic[this._curVO.star+1])o=this.curXMLVO.WingStarDic[this._curVO.star+1];else{var l=oa.getWingXMLVO(this._curVO.level+1);l&&(o=l.WingStarDic[0])}i=this.starArr.length;for(var r=0;r<i;r++)r<this.curXMLVO.starNum?this.starArr[r].skin=r<this._curVO.star?"com/ui/star_4.png":"com/ui/star_5.png":this.starArr[r].removeSelf();if(o){for(this.imgUp.visible=!0,this.imgMax.visible=!1,s="",i=(e=W.parseAttrToArr(o.attr)).length,n=0;n<i;n++)t=e[n],s+=W.getAttrStrByArr(t,""," +","\n");if(this.txtNextLev.text=s,this._curVO.star==this.curXMLVO.starNum)this.imgBar.width=567,this.txtBar.text="",this.sp1.visible=!1,this.btnUp.visible=!0,this.imgUp.gray=!0,this.btnCopper.visible=this.btnWIngs.visible=this.btnAuto.visible=!1,this.autoState=!1,this.btnAuto.label="自动升星",this.imgCopper.x=274,this.txtCopper.x=326,this.imgRp.visible=!1;else{this.imgUp.gray=!1,this.imgBar.width=this._curVO.exp/this.curStarXMLVO.exp*567,this.txtBar.text=this._curVO.exp+"/"+this.curStarXMLVO.exp,this.sp1.visible=!0,this.btnUp.visible=!1,60<=pe.myLevel?this.txtLvLim.visible=this.btnAuto.disabled=!1:this.txtLvLim.visible=this.btnAuto.disabled=!0,this.btnCopper.visible=this.btnWIngs.visible=this.btnAuto.visible=!0;var h=xo.getGoodsNumByType(xo.GOODS_ID,10201112);this.imgRp.visible=0<h&&!ha.checkIsPing(2,oa.curActorIndex,0)}}else this.imgBar.width=567,this.txtBar.text="",this.txtNextLev.text="",this.imgMax.visible=!0,this.btnAuto.label="自动升星",this.imgRp.visible=this.imgUp.visible=this.sp1.visible=this.btnUp.visible=this.autoState=this.btnCopper.visible=this.btnWIngs.visible=this.btnAuto.visible=!1}else Tr.ins().toRoleWingInfo(oa.curActorIndex+1)},e.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),this.autoState=!1,this.btnAuto.label="自动升星"},I(0,e,"autoState",function(){return this._autoState},function(t){this._autoState!=t&&(this._autoState=t,this.btnAuto.label=this._autoState?"停止":"自动升星",this._autoState?_t.addToTimer(this,this.toAutoUp):(this.index=0,_t.removeFromTimer(this,this.toAutoUp)))}),t}(NS),yF=(function(t){function e(){this._data=null,this._btnItems=null,e.__super.call(this)}w(e,"modules.roleSet.RoleSetCityItem",VS),I(0,e.prototype,"data",function(){return this._data},function(t){if(this._data=t,this._data){this.txttag.text=t.tag;var e=t.allCitys;this._btnItems=[];for(var i,s=Math.max(this._btnItems.length,e.length),n=0;n<s;n++)n<e.length?(this._btnItems[n]=this._btnItems[n]||new f,(i=this._btnItems[n]).pos(n%4*144,72*Math.floor(n/4)+48),i.label=e[n][0],i.skin="com/ui/btn_small.png",i.width=110,i.labelSize=24,this.addChild(i)):this._btnItems[n]&&this._btnItems[n].parent&&this._btnItems[n].removeSelf();this.height=72*Math.ceil(e.length/4)+28+15}})}(),function(t){function e(){this._palOrder=-1,this._select=!1,this._isMain=!1,e.__super.call(this),this.on("display",this,this.onDisplay)}w(e,"modules.roleSet.RoleSetHeadItem",BS);var i=e.prototype;i.onDisplay=function(){T.register("ROLE_CHANGE_SEX",this,this.update),T.register("ROLE_REORDER",this,this.update),this.on("undisplay",this,this.onUNDisplay)},i.onUNDisplay=function(){T.remove("ROLE_CHANGE_SEX",this,this.update),T.remove("ROLE_REORDER",this,this.update),this.off("undisplay",this,this.onUNDisplay)},i.update=function(){null==pe.getPalByIndex(this._palOrder)?(oa.getItemOpen(this._palOrder)?this.imgOpen.visible=!1:(this.imgOpen.visible=!0,this.imgOpen.skin="modules/role/pal"+this._palOrder+".png"),this.imgHead.skin=null):(this.imgOpen.visible=!1,this.imgHead.skin="com/head/big"+pe.getPalByIndex(this._palOrder).ext.category+pe.getPalByIndex(this._palOrder).ext.sex+".png");this.spMain.visible=0==this._palOrder},I(0,i,"palOrder",function(){return this._palOrder},function(t){this._palOrder=t}),I(0,i,"select",function(){return this._select},function(t){this._select=t,this.imgSel.visible=t}),I(0,i,"isMain",function(){return this._isMain},function(t){this._isMain=t,this.spMain.visible=t})}(),function(t){function e(){this._data=null,e.__super.call(this)}w(e,"modules.roleSet.RoleSetSelfBubbleItem",t);var i=e.prototype;i.update=function(){this.imgBubble.skin="modules/bubble/bubbleR"+this._data.id+".png";var t=la.getBubbleState(this._data);1==t?(this.imgState.visible=!0,this.imgState.skin="modules/bubble/inUse.png"):2==t?(this.imgState.visible=!0,this.imgState.skin="modules/bubble/inactive.png"):3==t&&(this.imgState.visible=!1),this.updateRP()},i.updateRP=function(){la.checkIsNewBubble(this._data.id)?this.imgRP.visible=!0:this.imgRP.visible=!1},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data})}(MS),function(t){function e(){this._data=null,this.bcFrame=null,e.__super.call(this)}w(e,"modules.roleSet.RoleSetSelfFrameItem",t);var i=e.prototype;i.update=function(){0<this._data.id?0==this._data.urlType?(this.imgFrame.visible=!0,this.imgFrame.skin="modules/frame/"+this._data.id+".png"):1==this._data.urlType&&(this.imgFrame.visible=!1,this.bcFrame=this.bcFrame||b.getOne(),this.bcFrame.pos(72,67),null==this.bcFrame.parent&&this.addChild(this.bcFrame),this.bcFrame.loadAndPlay("moduleEffect/frameEff","default",0,!0)):(this.imgFrame.visible=!1,this.bcFrame&&this.bcFrame.removeSelf());var t=la.getFrameState(this._data);1==t?this.imgLock.visible=!1:2==t?this.imgLock.visible=!0:3==t&&(this.imgLock.visible=!1),this.updateRP()},i.updateRP=function(){la.checkIsNewFrame(this._data.id)?this.imgRP.visible=!0:this.imgRP.visible=!1},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this.update()}),I(0,i,"data",function(){return this._data})}(FS),function(t){function e(){this._curIndex=0,e.__super.call(this)}w(e,"modules.rpMask.RpMaskChb",US);var i=e.prototype;return i.setData=function(t,e){this.chb.label=t,this._curIndex=e},i.update=function(){this.chb.selected=!ha.checkIsPing2(IF.curModID,IF.curActorID,this._curIndex)},i.setState=function(t){this.chb.selected=t},I(0,i,"nowBit",function(){return this.chb.selected?0:Math.pow(2,this._curIndex)}),e}()),vF=function(t){function o(){this._modID=0,o.__super.call(this),this.btn.on("click",this,this.onClick)}w(o,"modules.rpMask.RpMaskSetBtn",GS);var e=o.prototype;return e.onClick=function(t){IF.show(this._modID)},I(0,e,"modID",null,function(t){this._modID=t}),o.getOne=function(t,e,i,s){var n=new o;return n.pos(e,i),n.modID=t,s.addChild(n),n},o}(),IF=function(t){function i(){this.headPart=null,this._curVO=null,i.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_8"),this.headPart=new kh,this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.headPart.pos(75,80),this.addChild(this.headPart),this.panel.vScrollBar.autoHide=!0,this.on("click",this,this.onClick),this.on("display",this,this.onDisplay)}w(i,"modules.rpMask.RpMaskSetPanel",HS);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.closeWindow();break;case this.btnCancel:for(var e=0;e<this.panel.numChildren;e++)this.panel.getChildAt(e).setState(!1);break;case this.btnSelect:for(e=0;e<this.panel.numChildren;e++)this.panel.getChildAt(e).setState(!0)}},e.onDisplay=function(){this.off("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),this.headPart.resetSelect(zl.ins().curActorIndex),this.changeType()},e.changeType=function(){6==i.curModID?(this.btnCancel.visible=this.btnSelect.visible=this.img.visible=!0,this.height=810,this.txtTip.y=637,this.btnBack.y=699):(this.btnCancel.visible=this.btnSelect.visible=this.img.visible=!1,this.height=750,this.txtTip.y=577,this.btnBack.y=639)},e.onUndisplay=function(){this.on("display",this,this.onDisplay),this.off("undisplay",this,this.onUndisplay),this.checkSave(),i.curActorID=0},e.checkSave=function(){var s=this,t=ha.getMaskInfo(i._curModID,i.curActorID),e=function(){for(var t,e=0,i=0;i<s.panel.numChildren;i++)t=s.panel.getChildAt(i),e+=t.nowBit;return e}();e!=t&&Ar.ins().toRPSave(i._curModID,i.curActorID,[e])},e.onHeadItemClick=function(t){if(0!=i.curActorID&&this.checkSave(),0<=t){var e=pe.getPalByIndex(t);i.curActorID=e?e.pal_id:0,this.update()}},e.update=function(){if(this._curVO)for(var t,e=0;e<this.panel.numChildren;e++)(t=this.panel.getChildAt(e))&&t.update()},e.resetOptions=function(){if(this.rePool(),this._curVO)for(var t,e=0;e<this._curVO.optionArr.length;e++)(t=kt.getItemByClass("RpMaskChb",yF))&&(t.setData(this._curVO.optionArr[e],e),t.pos(e%2==0?60:350,20+60*Math.floor(e/2)),this.panel.addChild(t))},e.rePool=function(){for(var t;0<this.panel.numChildren;)(t=this.panel.removeChildAt(this.panel.numChildren-1))&&kt.recover("RpMaskChb",t)},I(0,e,"curVO",function(){return this._curVO},function(t){this._curVO=t,this.resetOptions()}),I(1,i,"ins",function(){return i._ins=i._ins||new i},ui.modules.rpMask.RpMaskSetPanelUI._$SET_ins),I(1,i,"curModID",function(){return i._curModID},function(t){i._curModID=t,i.ins.curVO=ha.getModVO(i._curModID)}),i.show=function(t){i.curModID=t,i.ins.openWindow()},i._curModID=0,i.curActorID=0,i._ins=null,i}(),wF=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_FULL",!1),this.listResult.itemRender=bF,this.listResult.vScrollBarSkin="",this.listResult.selectEnable=!0,this.listResult.selectHandler=Q.create(this,this.onSelect),this.listResult.renderHandler=Q.create(this,this.updateItem),this.btnBack.on("click",this,this.closeWindow),this.btnClose.on("click",this,this.closeWindow),this.btnSearch.on("click",this,this.onClick),this.inputSearch.on("focus",this,this.onFocus),this.inputSearch.on("enter",this,this.updateList)}w(e,"modules.shop.debugShop.DebugShopPanel",qS);var i=e.prototype;return i.updateItem=function(t,e){t.update()},i.onSelect=function(t){},i.onFocus=function(t){"请输入搜索的道具名称"==this.inputSearch.text&&(this.inputSearch.text="")},i.onClick=function(t){switch(t.target){case this.btnSearch:this.updateList()}},i.updateList=function(){var t=this.inputSearch.text,e=[];0<t.length&&(e=ur.searchItemsByName(t)),this.listResult.dataSource=e},I(0,i,"uiClass",function(){return"DebugShop"}),e}(),bF=function(t){function e(){this.goodsImage=null,e.__super.call(this),this.goodsImage=Me.createGoodsImage(20,10,null,this,!1,!0,90),this.inputNum.restrict="0-9",this.inputNum.maxChars=5,this.inputNum.text="1",this.btnDown.on("click",this,this.onClick),this.btnUp.on("click",this,this.onClick),this.btnBuy.on("click",this,this.onClick),this.inputNum.on("change",this,this.onInputChange),this.inputNum.on("input",this,this.onInputChange)}w(e,"modules.shop.debugShop.DebugShopResultItem",XS);var i=e.prototype;return i.update=function(){var t=this.dataSource;this.goodsImage.data=t,this.txtName.color=U.getColorDark(t.color),this.txtName.text=t.name},i.onClick=function(t){var e=0;switch(t.currentTarget){case this.btnDown:1<(e=parseInt(this.inputNum.text))&&(e-=1,this.inputNum.text=e+"");break;case this.btnUp:e=parseInt(this.inputNum.text),this.inputNum.text=e+1+"";break;case this.btnBuy:e=parseInt(this.inputNum.text),Gr.ins().toShopBuy(99999,this.dataSource.id,e)}},i.onInputChange=function(t){""==this.inputNum.text&&(this.inputNum.text="1")},e}(),SF=function(t){function e(){this.item=null,this._price=0,this._type=0,this._shopID=0,this._buyCheckFun=null,this._checkFunCaller=null,this.buyCallBack=null,this.buyCaller=null,e.__super.call(this)}w(e,"modules.shop.view.BuyGoodsView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!0),this.inputNum.restrict="0-9",this.on("click",this,this.onClick),this.inputNum.on("focuschange",this,this.onFocusChange),this.inputNum.on("input",this,this.onInputChange)},i.onFocusChange=function(){0==this.inputNum.focus&&this.inputNum.text},i.onInputChange=function(){var t=0;switch(this._type){case 2:t=9999}t=0<t?t:1;var e=parseInt(this.inputNum.text);e=(e=1<e?e:1)<t?e:t,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e},i.buyConfirm=function(t,e,i,s){Tr.ins().toExchange(t,e,i,s,this.buyCallBack,this.buyCaller),this.closeWindow()},i.onClick=function(t){var e=0,i=0;switch(this._type){case 2:i=Math.floor(pe.user.attr.gold/this._price)}switch(i=0<i?i:1,e=parseInt(this.inputNum.text)?parseInt(this.inputNum.text):1,t.target){case this.btnBuy:if(!this._buyCheckFun||this._buyCheckFun.call(this._checkFunCaller,parseInt(this.inputNum.text))){var s="";2==this._type?this._price*e<=pe.user.attr.gold?(s=Z.span("是否花费","#5d3924")+Z.span(this._price*e+"元宝","#F7EF5F")+Z.span("购买"+e+"个","#5d3924")+Z.span("【"+this.item.name+"】",U.getColorLight(this.item.color))+Z.span("？","#5d3924"),Lo.showSecAlert(s,this,this.buyConfirm,[1,this.item.id,e],"BuyGoodsView"+this.item.id)):Lo.showAlert():3==this._type?this._price*e<=pe.user.attr.gold?(s=Z.span("是否花费","#5d3924")+Z.span(this._price*e+"战场积分","#F7EF5F")+Z.span("兑换"+e+"个","#5d3924")+Z.span("【"+this.item.name+"】",U.getColorLight(this.item.color))+Z.span("？","#5d3924"),Lo.showSecAlert(s,this,this.buyConfirm,[1,this.item.id,e],"BuyGoodsView"+this.item.id)):ba.show(10201479):this.buyConfirm(1,this.item.id,e);break}return;case this.btnClose:this.closeWindow();break;case this.btnRe1:e=1<(e-=10)?e:1,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e;break;case this.btnRe:e=1<(e-=1)?e:1,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e;break;case this.btnAdd:e=(e+=1)<i?e:i,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e;break;case this.btnAdd1:e=(e+=10)<i?e:i,this.inputNum.text=""+e,this.txtTotal.text=""+this._price*e}},i.show=function(t,e,i,s,n,o,a,l,r){switch(void 0===e&&(e=2),void 0===i&&(i=0),void 0===s&&(s=10001),void 0===a&&(a=1),this.buyCallBack=l,this.buyCaller=r,this.item=ur.getItem(t),this._price=i<0?0:0<i?i:this.item.priceDic[e],this._type=e,this._shopID=s,this.inputNum.text=a+"",this.txtTotal.text=""+this._price*a,this.imgBg.skin="com/ui/goodsBg"+this.item.color+".png",this.imgGoods.skin=this.item.realMaxico,this.txtName.color=U.COLORS_LIGHT[this.item.color],this.txtName.text=this.item.title,this.txtPrice.text=""+this._price,this._buyCheckFun=n,this._checkFunCaller=o,e){case 2:this.imgGold1.skin=this.imgGold2.skin="com/ui/gold.png",this.exchangeTitle.visible=!1,this.title.visible=!0;break;case 3:this.imgGold1.skin=this.imgGold2.skin="modules/shop/battlePoint.png",this.exchangeTitle.visible=!0,this.title.visible=!1}this.parent||this.openWindow()},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this)},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.shop.BuyGoodsViewUI._$SET_ins),e._ins=null,e}(KS),xF=(function(t){function e(){this._openType=0,this._itemPos=0,this._data=null,e.__super.call(this)}w(e,"modules.skill.book.view.SkillBookItem",jS);var i=e.prototype;I(0,i,"state",function(){return this._$7__openType},function(t){switch(this._$7__openType=t){case 1:this.bg.skin="com/ui/itemAddBg.png";break;case 2:this.bg.skin="com/ui/itemLockBg.png";break;case 3:this.bg.skin="modules/skill/itemBgNo.png";break;case 4:this.bg.skin="modules/skill/itemBgSpace.png";break;case 5:this.bg.skin="modules/skill/itemBgQueation.png"}}),I(0,i,"itemPos",function(){return this._itemPos},function(t){this._itemPos=t}),I(0,i,"select",null,function(t){this.imgSelect.visible=t}),I(0,i,"data",function(){return this._data},function(t){this._data=t,this._data?this.img.skin=this._data.url:this.img.skin=null})}(),function(t){function e(){this.headPart=null,this.skillView=null,this.skillBookView=null,this.skillStepView=null,this.curView=null,e.__super.call(this),this.setWindowType("OPEN_CLOSE_OTHERS","MASK_FULL",!1,"TYPE_MAIN"),this.headPart=new kh,this.headPart.pos(106,82),this.headPart.on("RoleHeadsPart.CHOOSE",this,this.onHeadItemClick),this.container.addChild(this.headPart),this.onResize(),this.tab.on("change",this,this.onTabChange),Nt.register("RP_SKILL_LEVEL",this.tab.items[0]),Nt.register("RP_SKILL_BOOK",this.tab.items[1]),Nt.register("RP_SKILL_STEP",this.tab.items[2]);for(var t=0;t<4;t++)Nt.register("RP_SKILL_LEVEL_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_SKILL_BOOK_"+t,this.headPart.getItem(t),new Tt(39,10)),Nt.register("RP_SKILL_STEP_"+t,this.headPart.getItem(t),new Tt(39,10));this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.tab.itemClickFun=Q.create(this,this.onItemClick),Bt.isZKPf9991Server()&&(this.title.skin="modules/skill/skill2.png")}w(e,"modules.skill.view.SkillPanel",QS);var i=e.prototype;return i.onItemClick=function(t){this.checkOpen(t,!1)},i.checkOpen=function(t,e){switch(void 0===e&&(e=!0),t){case 0:break;case 1:if(0==Ne.isOpenSkillBook())return void Jt.addTip("80级开启秘籍功能");break;case 2:if(0==Ne.isOpenSkillStep())return void Jt.addTip("60级开启技能突破")}this.tab.selectedIndex=t,1==e&&this.openWindow()},i.getViewByIndex=function(t){switch(t){case 0:return pt.send(26,2,"技能-技能标签"),null==this.skillView&&(this.skillView=Aa.getIns(52e3,"SkillView")),this.skillView;case 1:return pt.send(6,1,"技能-秘籍标签"),null==this.skillBookView&&(this.skillBookView=Aa.getIns(52e3,"book.SkillBookView")),this.skillBookView;case 2:return pt.send(27,1,"技能-突破标签"),null==this.skillStepView&&(this.skillStepView=Aa.getIns(52e3,"SkillStepView")),this.skillStepView}return null},i.openWindow=function(t,e){void 0===e&&(e=!1),laya.ui.View.prototype.openWindow.call(this,t,e),this.headPart.resetSelect(0)},i.showViewByIndex=function(t){void 0===t&&(t=0),this.checkOpen(t)},i.onHeadItemClick=function(t){if(void 0===t&&(t=0),0<=t)switch(fa.curHeadIndex=this.headPart.index,this.tab.selectedIndex){case 0:case 2:this.update();break;case 1:Hr.ins().toInfo()}},i.update=function(){null!=this.curView&&(this.curView.update(),this.curView==this.skillView&&this.checkGuideTip())},i.checkGuideTip=function(){LD.nextStep==LD.CLOSE_SKILL_PANEL&&LD.showStep(LD.CLOSE_SKILL_PANEL,this.btnClose2)},i.onTabChange=function(t){for(var e=0;e<4;e++)Nt.hide("RP_SKILL_LEVEL_"+e),Nt.hide("RP_SKILL_BOOK_"+e),Nt.hide("RP_SKILL_STEP_"+e);this.spView.removeChildren(),this.curView=this.getViewByIndex(this.tab.selectedIndex),this.spView.addChild(this.curView),this.update()},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},i.closeWindow=function(){laya.ui.View.prototype.closeWindow.call(this),c.send(29023)},e}()),CF=(function(t){function e(){this._data=null,this.title=null,this.lastTime=0,e.__super.call(this),this.on("click",this,this.onClick),this.on("undisplay",this,this.onRemove),this.on("display",this,this.onDisplay)}w(e,"modules.title.view.TitleItem",zS);var i=e.prototype;i.onDisplay=function(){null!=this.title&&null!=this.title.url&&this.title.loadAndPlay(this.title.url,"default",0,!0)},i.loop=function(){this._data&&(this.lastTime=va.getTitleLimit(this._data.id)-ya.serverTime,0<=this.lastTime?this.txtLimit.text="期限："+x.formatDHMS(this.lastTime):(this.onRemove(),Xr.ins().updateTitlePanel()))},i.onAdd=function(t){_t.addToSecond(this,this.loop)},i.onRemove=function(t){_t.removeFromSceond(this,this.loop)},i.onClick=function(t){switch(t.target){case this.imgInfo:var e="modules/role/detail.png"==this.imgInfo.skin;this.event("TitleItem.EVENT",e),this.imgInfo.skin=e?"modules/role/common.png":"modules/role/detail.png";break;case this.btnWear:this._data&&("获得途径"==this.btnWear.label?Jt.addTip(this._data.way):(Xr.ins().toChange(this._data.id),va.deleteNewTitle(this._data.id),Nt.hide("RP_TITLE")))}},i.resetBtn=function(){this.imgInfo.skin="modules/role/detail.png"},I(0,i,"data",null,function(t){this._data=t,this._data&&(va.curPartner==pe.curTitleParnerID&&pe.curTitleID==this._data.id?this.btnWear.label="脱下":this.btnWear.label="穿戴",""!=this._data._sceneUrl?(null==this.title&&(this.title=new b,this.title.pos(110,105)),this._data._sceneUrl!=this.title.url&&(this.title.loadAndPlay(this._data._sceneUrl,"default",0,!0),this.addChild(this.title))):null!=this.title&&this.title.unload(),va.isHas(this._data.id)?(this.txtLimit.visible=!0,this.txtNo.visible=!1,this.onAdd(),jo.isRankTitle(this._data.id)?(this.txtLimit.text="期限：直至榜首更替",this.onRemove()):0==va.getTitleLimit(this._data.id)&&(this.txtLimit.text="期限：永久",this.onRemove())):(this.txtLimit.visible=!1,this.txtNo.visible=!0,this.onRemove(),this.btnWear.label="获得途径"))})}(),function(t){function e(){this.item=null,this._data=null,this.hasMoney=0,this.needMoney=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.item=new Ah,this.item.pos(100,185),this.addChild(this.item),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow),this.txtInput.on("change",this,this.onInputChange),this.btnD.on("click",this,this.onSub),this.btnU.on("click",this,this.onAdd),this.btnBuy.on("click",this,this.onBuy),this.btnCharge.on("click",this,this.onCharge),(Bt.isJiqiuAndH5yy()||Bt.isHuoWu()||Bt.isShouMeng()||Bt.isShengTian())&&(this.btnCharge.visible=!1)}w(e,"modules.warn.getWay.GoodsGetWayBuyPanel",$S);var i=e.prototype;return i.reset=function(){this.hasMoney=0,this.needMoney=0,this.txtInput.text="1",this.txtMoney.text="",this.txtMoney.color="#fbdb07"},i.onBuy=function(t){if(0<parseInt(this.txtInput.text)&&this._data){if(this.hasMoney>=this.needMoney){var e=ur.getItem(this._data.id),i=Z.span("是否花费","#5d3924")+Z.span(this.needMoney+"元宝","#F7EF5F")+Z.span("购买"+this.txtInput.text+"个","#5d3924")+Z.span("【"+e.name+"】？",U.getColorLight(e.color));Lo.showSecAlert(i,Tr.ins(),Tr.ins().toExchange,[1,this._data.id,parseInt(this.txtInput.text)],"goodsBuy")}else Lo.showAlert();pt.send(7,2,"获得途径面板-购买道具"+this._data.name+"数量为"+this.txtInput.text)}},i.onCharge=function(t){me.linkTo(11454),pt.send(7,3,"获得途径面板-充值")},i.onInputChange=function(t){this.updateMoney()},i.onAdd=function(t){this.txtInput.text=parseInt(this.txtInput.text)+1+""},i.onSub=function(t){this.txtInput.text=Math.max(parseInt(this.txtInput.text)-1,1)+""},i.onItemClick=function(t){var e=t.currentTarget;e&&e.data&&0<e.data.linkId&&me.linkTo(e.data.linkId),this.closeWindow()},i.updateWays=function(){var t;this.spWay.removeChildren();for(var e=0,i=0;i<this._data.waysArr.length;i++)e=parseInt(this._data.waysArr[i]),(t=PF.getOne()).dataSource=wa.getWayTypeById(e),t.pos(0,100*i),t.on("click",this,this.onItemClick),this.spWay.addChild(t);this.height=this.spWay.y+100*i+130},i.updateScoreType=function(){if(this._data)switch(parseInt(this._data.payArr[0])){case 999:this.imgGold.skin="com/ui/gold.png",this.hasMoney=pe.gold;break;case 998:this.imgGold.skin="com/ui/copper.png",this.hasMoney=pe.silver}},i.updateMoney=function(){this._data&&(this.needMoney=parseInt(this._data.payArr[1])*parseInt(this.txtInput.text),this.txtMoney.text=this.needMoney+"",this.txtMoney.color=this.hasMoney>=this.needMoney?"#fbdb07":U.getColorDark(6))},I(0,i,"data",null,function(t){this.reset(),this._data=t,this._data&&(this.item.dataSource=this._data.id,this.updateScoreType(),this.updateWays(),this.updateMoney())}),e.show=function(t){(e.panel=e.panel||new e).data=t,e.panel.openWindow()},e.panel=null,e}()),PF=function(t){function e(){this._data=null,e.__super.call(this),this.on("undisplay",this,this.onRemove)}w(e,"modules.warn.getWay.GoodsGetWayItem",t);var i=e.prototype;return i.inPool=function(){e.itemPool.push(this)},i.onRemove=function(t){this.parent||this.inPool()},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){this._data=t,this._data&&(this.txtDesc.text=this._data.name)}),I(0,i,"data",function(){return this._data}),e.getOne=function(){var t;return(t=(e.itemPool=e.itemPool||[]).shift())||(t=new e),t},e.itemPool=null,e}(ZS),TF=function(t){function e(){this.typeID=0,this._data=null,this.good=null,e.__super.call(this),this.good=new Ah(91,95),this.good.pos(0,25),this.addChild(this.good),this.html.on("link",this,this.onLink)}w(e,"modules.warn.getWay.GoodsGetWayListItem",t);var i=e.prototype;return i.onLink=function(t){var e=t.replace("event:","");me.linkTo(parseInt(e)),ba.hide2()},I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){var e;this.typeID=t,this.good.dataSource=this.typeID,this._data=wa.getGoodsGetWaysById(this.typeID);var i="";if(this._data&&this._data.waysArr){for(var s=0;s<this._data.waysArr.length;s++)e=wa.getWayTypeById(parseInt(this._data.waysArr[s])),i+=Z.linkcolor(e.name,e.linkId+"",!0,"00ff00",26),s==this._data.waysArr.length-1&&0!=s||(i+=Z.span("、","#5d3924",26));this.html.innerHTML=i}}),e}(JS),kF=function(t){function e(){this.item=null,this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.item=new Ah,this.item.y=70,this.item.centerX=0,this.addChild(this.item),this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)}w(e,"modules.warn.getWay.GoodsGetWayPanel",tx);var i=e.prototype;return i.updateWays=function(){var t;this.spWay.removeChildren();var e=0;if(Bt.isShengTian()||Bt.isJiqiuAndH5yy()||Bt.isShouMeng())for(var i=0;i<this._data.waysArr.length;i++)15==(e=parseInt(this._data.waysArr[i]))&&this._data.waysArr.splice(i,1);for(var s=0;s<this._data.waysArr.length;s++)e=parseInt(this._data.waysArr[s]),(t=PF.getOne()).dataSource=wa.getWayTypeById(e),t.pos(0,100*s),t.on("click",this,this.onItemClick),this.spWay.addChild(t);this.height=this.spWay.y+100*s+130},i.onItemClick=function(t){var e=t.currentTarget;e&&e.data&&0<e.data.linkId&&me.linkTo(e.data.linkId),this.closeWindow()},I(0,i,"data",null,function(t){this._data=t,this._data&&(this.item.dataSource=this._data.id,""!=this._data.msg&&(this.txtTip.text=this._data.msg),this.imgTitle.skin="modules/warn/title"+this._data.title+".png",this.updateWays())}),e.show=function(t){(e.panel=e.panel||new e).data=t,e.panel.openWindow()},e.panel=null,e}(),AF=function(t){function e(){this._data=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.list.scrollBar.autoHide=!0,this.list.itemRender=TF,this.btnClose.on("click",this,this.closeWindow),this.btnClose2.on("click",this,this.closeWindow)}return w(e,"modules.warn.getWay.GoodsGetWayPanel2",ex),I(0,e.prototype,"data",null,function(t){this._data=t,this._data&&(this.list.dataSource=this._data)}),e.show=function(t){(e.panel=e.panel||new e).data=t,e.panel.openWindow()},e.hide=function(){e.panel&&e.panel.closeWindow()},e.panel=null,e}(),EF=(function(t){function r(){r.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay)}w(r,"modules.welfare.honorVIP.WelfareHonorVIPFanTiView",ix);var e=r.prototype;e.onDisplay=function(){null==r.button1&&(this._createInputElement(1),S.container.appendChild(r.button1),this.resetPos()),null==r.button2&&(this._createInputElement(2),S.container.appendChild(r.button2),this.resetPos())},e.onUndisplay=function(){r.button1&&r.button1.parentElement&&S.container.removeChild(r.button1),r.button2&&r.button2.parentElement&&S.container.removeChild(r.button2)},e.mouseOver1=function(){r._ins.btnCopy1.state=1},e.mouseDown1=function(){r._ins.btnCopy1.state=2},e.mouseUp1=function(){k.copyToClipboard("eyougamevip")},e.mouseOut1=function(){r._ins.btnCopy1.state=0},e.mouseOver2=function(){r._ins.btnCopy2.state=1},e.mouseDown2=function(){r._ins.btnCopy2.state=2},e.mouseUp2=function(){k.copyToClipboard("eyougamevip1")},e.mouseOut2=function(){r._ins.btnCopy2.state=0},e.updata=function(){},e._createInputElement=function(t){if(1==t){r.button1=S.document.createElement("button");var e={position:"absolute"};for(var i in e)r.button1.style[i]=e[i];r.button1.style.opacity=0,r.button1.onmouseover=this.mouseOver1,r.button1.onmouseout=this.mouseOut1,r.button1.onmousedown=this.mouseDown1,r.button1.onmouseup=this.mouseUp1,h.stage.on("resize",null,this.resetPos)}else if(2==t){r.button2=S.document.createElement("button");e={position:"absolute"};for(var s in e)r.button2.style[s]=e[s];r.button2.style.opacity=0,r.button2.onmouseover=this.mouseOver2,r.button2.onmouseout=this.mouseOut2,r.button2.onmousedown=this.mouseDown2,r.button2.onmouseup=this.mouseUp2,h.stage.on("resize",null,this.resetPos)}},e.resetPos=function(){if(r.button1&&r.button1.parentElement){var t=r._ins.btnCopy1.width*lt.uiScale/S.pixelRatio,e=r._ins.btnCopy1.height*lt.uiScale/S.pixelRatio,i=((lt.stageWidth-this.width)/2+r._ins.btnCopy1.right)*lt.uiScale/S.pixelRatio,s=((lt.stageHeight-this.height)/2+r._ins.btnCopy1.y)*lt.uiScale/S.pixelRatio;r.button1.style.top=s+"px",r.button1.style.right=i+"px",r.button1.style.width=t+"px",r.button1.style.height=e+"px"}if(r.button2&&r.button2.parentElement){var n=r._ins.btnCopy2.width*lt.uiScale/S.pixelRatio,o=r._ins.btnCopy2.height*lt.uiScale/S.pixelRatio,a=((lt.stageWidth-this.width)/2+r._ins.btnCopy2.right)*lt.uiScale/S.pixelRatio,l=((lt.stageHeight-this.height)/2+r._ins.btnCopy2.y)*lt.uiScale/S.pixelRatio;r.button2.style.top=l+"px",r.button2.style.right=a+"px",r.button2.style.width=n+"px",r.button2.style.height=o+"px"}},I(1,r,"Ins",function(){return r._ins=r._ins||new r},ui.modules.welfare.honorVIP.WelfareHonorVIPFanTiViewUI._$SET_Ins),r._ins=null,r.button1=null,r.button2=null}(),function(t){function n(){n.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUndisplay),this.btnRecharege.on("click",this,this.onClick),(yt.isWX||yt.isQQ)&&this.btnCopy.on("click",this,this.onCopyInfo)}w(n,"modules.welfare.honorVIP.WelfareHonorVIPView",sx);var e=n.prototype;e.onClick=function(){me.linkTo(11454)},e.onCopyInfo=function(){k.copyToClipboard(ka.honorVIPToc.qq_num+""),Bt.sdk.openUrl("https://wpa1.qq.com/fFOUgSYH?_type=wpa&qidian=true")},e.onUndisplay=function(){!yt.isWX&&!yt.isQQ&&n.button&&n.button.parentElement&&S.container.removeChild(n.button)},e.onDisplay=function(){yt.isWX||yt.isQQ?this._createInputElement():null==n.button&&(this._createInputElement(),S.container.appendChild(n.button),this.resetPos())},e.update=function(){var t=ka.honorVIPToc;if(t){var e,i;if(1==t.is_honor_vip){this.btnCopy.visible=!0,this.imgTxt2.visible=!1,this.spQQNum.visible=!0,e=k.numToTexture(Math.floor(t.qq_num),"modules/welfare/honorNum"),this.spQQNum.graphics.clear();for(var s=0;s<e.length;s++)(i=e[s])&&this.spQQNum.graphics.drawTexture(i,i.width*s);this.imgTxt3.visible=!1,this.imgTxt4.visible=!0,this.spNum.visible=!1}else for(this.imgTxt2.visible=!0,this.imgTxt3.visible=!0,this.imgTxt4.visible=!1,this.btnCopy.visible=!1,this.spQQNum.visible=!1,e=k.numToTexture(Math.floor(t.need_gold),"modules/welfare/honorNum"),this.spNum.visible=!0,this.spNum.graphics.clear(),s=0;s<e.length;s++)(i=e[s])&&this.spNum.graphics.drawTexture(i,i.width*s);this.imgGirl.skin="modules/welfare/img/honorVIP/imgGirl"+t.pic_id+".jpg"}else this.imgTxt2.visible=!0,this.spQQNum.visible=!1,this.btnCopy.visible=!1,this.spNum.visible=!1},e._createInputElement=function(){n.button=S.document.createElement("button");var t={position:"absolute"};for(var e in t)n.button.style[e]=t[e];n.button.style.opacity=0,n.button.onmouseover=this.mouseOver,n.button.onmouseout=this.mouseOut,n.button.onmousedown=this.mouseDown,n.button.onmouseup=this.mouseUp,h.stage.on("resize",null,this.resetPos)},e.mouseOver=function(){n._ins.btnCopy.state=1},e.mouseDown=function(){n._ins.btnCopy.state=2},e.mouseUp=function(){ka.honorVIPToc&&(k.copyToClipboard(ka.honorVIPToc.qq_num+""),Bt.sdk.openUrl("https://url.cn/DiKRlFOi?_type=wpa&qidian=true"))},e.mouseOut=function(){n._ins.btnCopy.state=0},e.resetPos=function(){if(n.button&&n.button.parentElement){var t=n._ins.btnCopy.width*lt.uiScale/S.pixelRatio,e=n._ins.btnCopy.height*lt.uiScale/S.pixelRatio,i=((lt.stageWidth-this.width)/2+n._ins.btnCopy.right)*lt.uiScale/S.pixelRatio,s=((lt.stageHeight-this.height)/2+n._ins.btnCopy.y)*lt.uiScale/S.pixelRatio;n.button.style.top=s+"px",n.button.style.right=i+"px",n.button.style.width=t+"px",n.button.style.height=e+"px"}},I(1,n,"Ins",function(){return n._ins=n._ins||new n},ui.modules.welfare.honorVIP.WelfareHonorVIPViewUI._$SET_Ins),n._ins=null,n.button=null}(),function(t){function e(){e.__super.call(this),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.btn.on("click",this,this.onClick)}w(e,"modules.welfare.wanBa.WelfareWanbaTopicView",nx);var i=e.prototype;i.onUnDisplay=function(){},i.onDisplay=function(){},i.update=function(){},i.onClick=function(t){Lt.openTopicCircle()},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.welfare.wanbaTopic.WelfareWanbaTopicViewUI._$SET_ins),e._ins=null,e.button=null}(),function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.welfare.wanbaVipGift.WanbaVipHelpPanel",ax),e.prototype.onClick=function(t){switch(t.target){case this.btnClose:case this.btnClose2:this.closeWindow()}},e.openPanel=function(){(e._ins=e._ins||new e).openWindow()},e._ins=null}(),function(t){function e(){e.__super.call(this),this.btn.on("click",this,this.onClick)}w(e,"modules.welfare.weChat.WelfareBuluoGuideView",lx);var i=e.prototype;i.onClick=function(t){Bt.sdk.openUrl("https://buluo.qq.com/p/barindex.html?bid=398117")},i.update=function(){},I(0,i,"uiClass",function(){return"WelfareWeChatGiftView1"}),I(1,e,"Ins",function(){return e._ins=e._ins||new e},ui.modules.welfare.weChat.WelfareWeChatGiftView1UI._$SET_Ins),e._ins=null,e.button=null}(),function(t){function s(){var t,e;this.rewardDatas=[[10201106,10],[10201111,10],[10201161,10],[10201162,10],[10201248,1]],s.__super.call(this);for(var i=0;i<this.rewardDatas.length;i++)(t=new Ah(91,100,!1,!0,!0,!1)).x=100*i,this.spGoods.addChild(t),e=this.rewardDatas[i],t.dataSource=e}w(s,"modules.welfare.weChat.WelfareWeChatGiftView",rx),s.prototype.update=function(){}}(),function(t){function n(){n.__super.call(this),this.btnYes.bottom=this.btnNo.bottom=NaN,this.txtMsg.style.valign="top",this.txtMsg.style.color="#5d3924",this.txtMsg.style.fontSize=26,this.txtMsg.style.letterSpacing=2,this.txtMsg.style.leading=20,this.btnYes.on("click",this,this.onClickYes),this.btnNo.on("click",this,this.onClickNo),this.btnClose.on("click",this,this.onClickClose)}w(n,"com.ui.Alert",fx);var e=n.prototype;return e.reset=function(t){if(n._vo=t,n.alert.txtMsg.style.align=t.align,n.alert.txtMsg.innerHTML=t.msg,this.btnNo.visible=t.showRight,this.btnYes.visible=t.showClose,0!=t.height&&(this.txtMsg.height=t.height,this.height=t.height-210+490),n.alert.txtMsg.contextHeight<=170){if("center"!=t.align)var e=(n.alert.imgInfo.width-n.alert.txtMsg.contextWidth)/2;else e=20;var i=(n.alert.imgInfo.height-n.alert.txtMsg.contextHeight)/2;n.alert.txtMsg.pos(e,i,!0)}else n.alert.txtMsg.pos(20,20,!0),n.alert.imgInfo.height=n.alert.txtMsg.contextHeight+20+20;var s=n.alert.imgInfo.y+n.alert.imgInfo.height;this.btnNo.y=this.btnYes.y=s+30,t.key?(this.height=s+190,n.alert.spCheck.visible=!0,this.box.selected=!1):(this.height=s+125,n.alert.spCheck.visible=!1),this.btnYes.label=t.yesLabel,this.btnNo.label=t.noLabel,1==t.showRight?(this.btnYes.centerX=NaN,this.btnYes.right=110):(this.btnYes.right=NaN,this.btnYes.centerX=0),t.isShowTitle?(this.titleTxt.visible=!0,this.titleTxt.text=t.title,this.titleImg.visible=!1):(this.titleTxt.visible=!1,this.titleTxt.text="",this.titleImg.visible=!0),""!=t.yesConsume?(this.spConsume.visible=!0,this.yesConsume.text=t.yesConsume):this.spConsume.visible=!1},e.close=function(t){laya.ui.Dialog.prototype.close.call(this)},e.onClickClose=function(){null!=n._vo.closeCaller&&null!=n._vo.closeFun&&n._vo.closeFun.apply(n._vo.yesCaller,n._vo.closeArgs),this.close()},e.onClickYes=function(){this.close(),null!=n._vo.yesCaller&&null!=n._vo.yesFun&&n._vo.yesFun.apply(n._vo.yesCaller,n._vo.yesArgs),this.box.selected&&this.addDisabled(n._vo.key)},e.onClickNo=function(){this.close(),null!=n._vo.noCaller&&null!=n._vo.noFun&&n._vo.noFun.apply(n._vo.noCaller,n._vo.noArgs)},e.addDisabled=function(t){null!=t&&-1==n.disableds.indexOf(t)&&n.disableds.push(t)},I(1,n,"alert",function(){return null==n._alert&&(n._alert=new n),n._alert},ui.com.AlertUI._$SET_alert),n.showVO=function(t){if(null!=t.key&&0<=n.disableds.indexOf(t.key))return void(null!=t.yesCaller&&null!=t.yesFun&&t.yesFun.apply(t.yesCaller,t.yesArgs));n.alert.reset(t),n.alert.popup(t.closeOther)},n.show=function(t,e){void 0===e&&(e="提示");var i=new Ee;i.msg=t,i.title=e,i.showRight=!1,n.showVO(i)},n.closeAlert=function(){n.alert&&n.alert.parent&&n.alert.close()},n._alert=null,n._vo=null,_(n,["disableds",function(){return this.disableds=new Array}]),n}()),RF=function(t){function e(){this._limitArr=null,this._buyIdArr=null,this._itemIdArr=null,this.viewType=NaN,this.clipArr=[new b,new b,new b],this.vo=null,this.avo=null,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),this.on("display",this,this.onDisplay),Nt.register("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_SUB",this.purchaseBtn1,new Tt(19,-10))}w(e,"modules.activity.baguaFurnace.BaguaFurnaceTreasureDialog",_x);var i=e.prototype;return i.setViewType=function(t){this.viewType=t,this.init(),this.checkForBtn()},i.onDisplay=function(){T.register("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_NUM_UPDATE",this,this.updateDialog),T.register("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE",this,this.toUpdate),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){T.remove("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_NUM_UPDATE",this,this.updateDialog),T.remove("ACT_BAGUA_FURNACE_XIANTONG_LIMIT_TYPE_UPDATE",this,this.toUpdate)},i.init=function(){this.vo=We.getActDetailByActID(He.getInstance().baguaFurnaceXiantongAId)},i.checkForBtn=function(){3==this.viewType&&this.hasTimes&&Gr.ins().toShopDiscountInfo(10201749)},i.update=function(t,e,i){void 0===i&&(i=[]),this.init(),this._buyIdArr=t,this._itemIdArr=e,this._limitArr=i,this.title.skin="modules/act/baguaFurnace/title"+this.viewType/3+".png";for(var s=0;s<t.length;s++){this.clipArr[s].loadAndPlay("moduleEffect/goodsItemEff","default",0,!0),this.clipArr[s].scale(1.1,1.1),this.clipArr[s].pos(54,106);var n=Bn.getChargeBackVO(t[s]);0==s?(this.talisman1.skin=n.img,this.name1.text=n.name,this.bg1.scale(.8,.8),this.bg1.addChild(this.clipArr[s]),1==this.viewType?(Bt.isFanTi?this.money1.text=n.money+"仙尊幣":this.money1.text=n.money+"元",this.times1.text="赠送"+n.money+"个神火",this.imgNum1.visible=!1):2==this.viewType?(Bt.isFanTi?this.money1.text=n.money+"仙尊幣":this.money1.text=n.money+"元",this.times1.text="购买次数"+i[s][0]+"/"+i[s][1],this.imgNum1.visible=!1):(this.money1.text=n.money+"元宝",this.times1.text="赠送"+n.money/100+"个丹料",this.hasTimes?(this.txtNum.visible=!0,this.imgNum1.visible=!0,this.purchaseBtn1.label="购买",this._limitArr&&this._limitArr[0]?(this.txtNum.text=this._limitArr[0][1]-this._limitArr[0][0]+"",this._limitArr[0][0]>=this._limitArr[0][1]?this.purchaseBtn1.gray=!0:this.purchaseBtn1.gray=!1):this.txtNum.text="0"):(this.txtNum.visible=!1,this.imgNum1.visible=!1,this.purchaseBtn1.label="获取次数",this.purchaseBtn1.gray=!1))):1==s?(this.talisman2.skin=n.img,this.name2.text=n.name,Bt.isFanTi?this.money2.text=n.money+"仙尊幣":this.money2.text=n.money+"元",this.bg2.scale(.8,.8),this.bg2.addChild(this.clipArr[s]),1==this.viewType?this.times2.text="赠送"+n.money+"个神火":2==this.viewType?this.times2.text="购买次数"+i[s][0]+"/"+i[s][1]:this.times2.text="赠送"+n.money+"个丹料"):2==s&&(this.talisman3.skin=n.img,this.name3.text=n.name,Bt.isFanTi?this.money3.text=n.money+"仙尊幣":this.money3.text=n.money+"元",this.bg3.scale(.8,.8),this.bg3.addChild(this.clipArr[s]),1==this.viewType?this.times3.text="赠送"+n.money+"个神火":2==this.viewType?this.times3.text="购买次数"+i[s][0]+"/"+i[s][1]:this.times3.text="赠送"+n.money+"个丹料")}this.updateRedPoint()},i.toUpdate=function(){this.update(this._buyIdArr,this._itemIdArr,this._limitArr)},i.updateDialog=function(){this._limitArr=[He.getInstance().baguaFurnaceLimitArr],Da.ins().toActDetail(He.getInstance().baguaFurnaceXiantongAId),"获取次数"==this.purchaseBtn1.label&&(this.avo=new Ee,this.avo.msg=Z.span("恭喜您，获得"+this._limitArr[0][1]+"次购买次数","#621e09")+"<br/>"+Z.span("注：活动期间每日重置元宝购买次数。","#621e09")+"<br/>"+Z.span(" 记得每天进入游戏获取幸运次数哦。","#621e09"),(this.avo.yesCaller=this).avo.showRight=!1,EF.showVO(this.avo))},i.onClick=function(t){switch(t.target){case this.closeBtn:this.closeWindow();break;case this.purchaseBtn1:"获取次数"==this.purchaseBtn1.label?Gr.ins().toShopDiscountInfo(this._itemIdArr[0]):this.pay(0);break;case this.purchaseBtn2:this.pay(1);break;case this.purchaseBtn3:this.pay(2);break;case this.bg1:this.onItemShow(0);break;case this.bg2:this.onItemShow(1);break;case this.bg3:this.onItemShow(2)}},i.onItemShow=function(t){var e=ur.getItem(this._itemIdArr[t]);if(e){e.tempNum=1;var i="";i=ur.isEquip(e.id)?"BASE_EQUIP_TIP":"BASE_GOODS_TIP",Ae.show(e,i)}},i.pay=function(t){if(this._limitArr.length&&this._limitArr[t]&&this._limitArr[t][0]>=this._limitArr[t][1])return 3==this.viewType&&0==t?void Jt.addTip("元宝购买已达上限，请使用其他方式或明天再来"):void Jt.addTip("已经达到购买次数上限");if(this._buyIdArr&&this._buyIdArr[t]&&(3==this.viewType&&0==t?Tr.ins().toExchange(27,this._itemIdArr[0],1):Bt.isFanTi?Nl.ins().toExchange(this._buyIdArr[t]):Nl.ins().toPay(this._buyIdArr[t]),yt.isWX||yt.isQQ)){var e=Bn.getChargeBackVO(this._buyIdArr[t]);pt.send(10035,3,"直购-"+e.name)}},i.updateRedPoint=function(){3==this.viewType?this.hasTimes?Nt.hide("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_SUB"):Nt.show("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_SUB"):Nt.hide("RP_BAGUA_FURNACE_XIANTONG_LIMIT_BUY_SUB")},I(0,i,"hasTimes",function(){if(this.vo)for(var t=0;t<this.vo.conditions.length;t++)if(0<=this.vo.conditions[t].canBuyNum)return!0;return!1}),e}(),OF=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick),this.txt.style.wordWrap=!0,this.txt.style.align="left",this.txt.style.valign="top",this.txt.style.leading=20,this.txt.style.color="#5d3924",this.txt.style.fontSize=26,this.txt.style.letterSpacing=2}w(e,"modules.activity.views.GeneralRuleView",gx);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnYes:case this.btnClose1:this.close()}},i.showMessage=function(t){this.txt.innerHTML=t,this.txt.x=20,this.txt.y=20,this.imgInfo.height=this.txt.contextHeight+20+20;var e=this.imgInfo.y+this.imgInfo.height;this.btnYes.y=e+30,this.height=e+125,this.parent||this.popup()},I(1,e,"ins",function(){return e._ins=e._ins||new e},ui.modules.activity.GeneralRuleViewUI._$SET_ins),e._ins=null,e}(),LF=function(t){function e(){this._barrier=0,this._data=null,e.__super.call(this),this.initGoods(),this.on("click",this,this.onClick)}w(e,"modules.commonCopy.copy.view.CopyDreamBox",vx);var i=e.prototype;return i.initGoods=function(){for(var t=0;t<2;t++){var e=new Ah(91,95,!1,!0,!0);e.pos(40+t*(e.width-45),10),this.spGoods.addChild(e)}},i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnBack:this.close();break;case this.btnGet:var e=Os.getDreamCopyVO(this._barrier+1);e&&il.ins().toStartChapter(e.getMapID()),this.close()}},I(0,i,"btnEnable",null,function(t){this.btnGet.mouseEnabled=t,this.btnGet.gray=!t}),I(0,i,"barrier",null,function(t){this._barrier=t,this.btnEnable=Os.isNeedOpenNextDream();var e=Os.getDreamCopyVO(this._barrier);if(e)for(var i=0;i<this.spGoods.numChildren;i++){var s=this.spGoods.getChildAt(i);s.dataSource=parseInt(e.getSpcAwardArr()[i]),s.num=e.getSpcAwardNumArr()[i]}}),e}(),DF=function(t){function e(){this._data=null,this.curTime=120,e.__super.call(this),cl.ins().toSet([])}w(e,"modules.commonCopy.zhuXianRoadCopy.ZhuXianResultView",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_0"),this.rewardList.hScrollBarSkin="",this.rewardList.itemRender=Ah,this.rewardList.selectEnable=!0,this.rewardList.repeatX=5,this.rewardList.spaceX=-65,this.rewardList.spaceY=20,this.on("display",this,this.onDisplay),this.on("click",this,this.onClick)},i.onClick=function(t){switch(t.target){case this.btnLeft:this.gotoNextStage();break;case this.setting:this.openSettingView();break;case this.btnRight:(ca.mapID==this._data.mapID||this._data.ignoreMap)&&this._data.rightBtnFun&&this._data.rightBtnFun.apply(this._data.rightFunCaller?this._data.rightFunCaller:this,this._data.rightFunParm),this.close()}},i.gotoNextStage=function(){if(cl.ins().isSelectBox1||cl.ins().isSelectBox2){var t=qs.getStageInfo(),e=cl.ins().curChallengeStage,i=cl.ins().curChallengeChapter;e%5==0&&i++;var s,n,o=e+1,a=0,l=[];for(var r in t)for(var h=0,u=(n=t[r]).length;h<u;h++){var c=n[h];1==c.is_reward&&1==c.difficulty&&l.push(c.stage)}for(var d=e+1;d<=qs.maxStage+1;d++)if(-1==l.indexOf(d)){o=d;break}s=Math.floor((o-1)/5)+1;var p=0;if(t&&t[s]){var m=t[s];for(d=0;d<m.length;d++)m[d].stage==o&&m[d].difficulty>a&&(3==m[d].star&&(a=m[d].difficulty),p=m[d].star)}var f=0;a<6&&a++,cl.ins().isSelectBox1?f=a:(6!=a&&3==p||(a+=1),f=1==a?1:a-1);var _=Os.getBarrierVOById(o);if(null==_)Jt.addTip("暂无可继续挑战的关卡");else{var g=_.getMapIdArr();for(d=0;d<g.length;d++)if(g[d][1]==f)return cl.ins().curChallengeChapter=i,cl.ins().curChallengeStage=o,cl.ins().curChallengeDifindex=f-1,cl.ins().removeRoadColorInfoView(),Lr.ins().toMapChange(g[d][0]),void this.close()}}else(ca.mapID==this._data.mapID||this._data.ignoreMap)&&this._data.leftBtnFun&&this._data.leftBtnFun.apply(this._data.leftFunCaller?this._data.leftFunCaller:this,[this.curTime]),this.close()},i.openSettingView=function(){(ca.mapID==this._data.mapID||this._data.ignoreMap)&&this._data.leftBtnFun&&this._data.leftBtnFun.apply(this._data.leftFunCaller?this._data.leftFunCaller:this,[this.curTime]),this.close()},i.close=function(t){laya.ui.Dialog.prototype.close.call(this,t),this._data&&(ca.mapID==this._data.mapID||this._data.ignoreMap)&&this._data.closeFun&&this._data.closeFun.apply(this._data.closeCaller?this._data.closeCaller:this,this._data.closeParm);var e=new Object;e.className="p_kv",e.id=1,e.val=cl.ins().isSelectBox1?1:0;var i=new Object;i.className="p_kv",i.id=2,i.val=cl.ins().isSelectBox2?1:0;var s=[];s.push(e,i),cl.ins().toSet(s)},i.onDisplay=function(){this.updateTime(),_t.addToSecond(this,this.updateTime),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){_t.removeFromSceond(this,this.updateTime),this.off("undisplay",this,this.unDisplay)},i.updateBtn=function(){this._data&&(this.btnLeft.label=""!=this._data.leftBtnLabel?this._data.leftBtnLabel:"进入下关",this.btnRight.visible=this._data.showRight,this.btnRight.label=""!=this._data.rightBtnLabel?this._data.rightBtnLabel:"离开副本",this.btnLeft.x=this._data.showRight?23:229,ua.isCopyZhuXianRoadLastMap()?this.btnLeft.disabled=!0:this.btnLeft.disabled=!1)},i.updateGoods=function(){if(this._data&&this._data.goods){var t=this._data.goods;t.sort(this.sortFun);for(var e=[],i=0;i<t.length;i++)e.push([t[i],!0]);this.rewardList.dataSource=e,this.rewardList.selectedIndex=0,this.rewardList.scrollTo(0);for(var s=0;s<this.rewardList.content._childs.length;s++)this.rewardList.content._childs[s].width=100,this.rewardList.content._childs[s].scale(.9,.9),this.rewardList.content._childs[s].mouseEnabled=!1,this.rewardList.content._childs[s].y=3,this.rewardList.content._childs[s].showNum&&(this.rewardList.content._childs[s].showNum=!0),e.length<6?this.rewardList.x=(this.rewardList.width-121*e.length)/2-36:this.rewardList.x=-36}},i.sortFun=function(t,e){return t.type>e.type?1:t.type==e.type?0:-1},i.updateTime=function(){--this.curTime,0<this.curTime?this.btnRight.label=this._data.rightBtnLabel+"（"+this.curTime+"S）":this._data&&(this._data.mapID==ca.mapID||this._data.ignoreMap)&&this._data.timeOutFun?(this._data.timeOutFun.apply(this._data.timeOutCaller?this._data.timeOutCaller:this,this._data.timeOutParm),this.close()):(this.close(),this._data&&(this._data.mapID==ca.mapID||this._data.ignoreMap)&&el.ins().toExit())},I(0,i,"data",null,function(t){if(this._data=t,this._data){var e=cl.ins().curChallengeStage,i=cl.ins().curChallengeDifindex,s=cl.ins().curChallengeChapter;this.curTime=this._data.countDown?this._data.countDown:this.curTime,this.stageNum.text=e+"",this.difficulty.skin="modules/zhuXianRole/resultlv"+(i+1)+".png";var n=(t=qs.getStageInfo())[s];if(n)for(var o=0;o<n.length;o++)n[o].stage==e&&n[o].difficulty==i+1&&(this.star1.skin=1<=n[o].star?"modules/zhuXianRole/star5.png":"modules/zhuXianRole/star6.png",this.star2.skin=2<=n[o].star?"modules/zhuXianRole/star5.png":"modules/zhuXianRole/star6.png",this.star3.skin=3<=n[o].star?"modules/zhuXianRole/star5.png":"modules/zhuXianRole/star6.png",this.time.text=x.formatTime(n[o].least_ts));this.updateBtn(),this.updateGoods()}}),e}(Ix),NF=function(t){function e(){this.equipVO=null,e.__super.call(this),this.txtDesc.style.color="#ffffff",this.txtDesc.style.fontSize=26,this.txtDesc.style.lineHeight=30}w(e,"modules.equip.View.BaseEquipTip",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this)},I(0,i,"data",null,function(t){this.equipVO=t,this.height=276;var e=0;if(this.height=340,this.panel.height=1,this.equipVO){this.imgGoods.skin=this.equipVO.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.equipVO.color+".png",this.txtName.color=U.COLORS_DARK[this.equipVO.color],this.txtName.text=this.equipVO.name,this.txtPos.text=ur.getEquipClassName(this.equipVO.type),this.txtPos1.text=ur.getEquipTypeName(this.equipVO.type);var i=this.equipVO.level;100<i?(this.txtLevel.text="转 生：",this.txtLevel1.text=(i-100)/10+"转"):(this.txtLevel.text="等 级：",this.txtLevel1.text=i+"级"),this.txtVoca1.text=sn.getVOCAName(t.category);for(var s,n=W.parseAttrToArr(t.attr),o="",a=0;a<n.length;a++)s=n[a],o+=W.getAttrStrByArr(s,"","：","+"+Math.ceil(s[1]/7)+"\n"),this.height+=36,this.panel.height+=36;this.attrTxt.text=o,this.height+=56,this.panel.height+=56,e=this.equipVO.basePow+Math.ceil(this.equipVO.basePow/7)}this.txtDesc.y=this.height-30;var l=0;if(this.equipVO.desc){if(this.txtDesc.innerHTML=this.equipVO.desc,l=this.txtDesc.contextHeight,6==this.equipVO.color){var r=oa.getRedEquipVO(this.equipVO.type,this.equipVO.id%10);e=r?r.power:e}}else this.txtDesc.innerHTML="";this.height+=l,this.panel.height+=l,this.txtScore.text="评 分  "+Math.floor(e);var h,u=k.numToTexture(Math.floor(e));this.spPow.graphics.clear();for(var c=0;c<u.length;c++)h=u[c],this.spPow.graphics.drawTexture(h,h.width*c);this.panel.refresh()}),I(0,i,"uiClass",function(){return"EquipTip"}),e}(Sx),VF=function(t){function e(){this.infoVO=null,this.bitClip=null,this.avatar=null,this._defCate=1,this._defSex=1,this._defState=1,this.skin=null,e.__super.call(this)}w(e,"modules.equip.View.BaseGoodsTip",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.txtDesc.style.color="#ffffff",this.txtDesc.style.fontSize=26,this.txtDesc.style.lineHeight=30,this.cate1.on("click",this,this.onClickCate),this.cate2.on("click",this,this.onClickCate),this.cate3.on("click",this,this.onClickCate),this.cate4.on("click",this,this.onClickCate),this.male.on("click",this,this.onClickCate),this.female.on("click",this,this.onClickCate),this.switchState.on("click",this,this.onClickCate)},i.onClickCate=function(t){switch(t.target){case this.cate1:this._defCate=1;break;case this.cate2:this._defCate=2;break;case this.cate3:this._defCate=3;break;case this.cate4:this._defCate=4;break;case this.male:this._defSex=1;break;case this.female:this._defSex=2;break;case this.switchState:1==this._defState?this._defState=2:this._defState=1}this.resetCateSex(this._defCate,this._defSex,this._defState);var e=this.createSkin(this.infoVO,this._defSex,this._defCate);this.avatar.resetSkin(e,this._defSex,!0)},i.changeCateVisible=function(t){this.cate1Default.visible=t,this.cate2Default.visible=t,this.cate3Default.visible=t,this.cate4Default.visible=t,this.cate1.visible=t,this.cate2.visible=t,this.cate3.visible=t,this.cate4.visible=t},i.resetCateSex=function(t,e,i){for(var s=1;s<=4;s++)this["cate"+s].alpha=0;this["cate"+t].alpha=1,this.male.alpha=1==e?1:0,this.female.alpha=1==e?0:1,1==i?(this.switchState.label="展示打坐",this.changeCateVisible(!0),this.body.y=401,this.avatar.play("stand",4)):(this.switchState.label="展示站立",this.changeCateVisible(!1),this.body.y=331,this.avatar.play("sit",4))},i.createSkin=function(t,e,i){var s=t.img.substr(0,1);switch(null==this.skin&&(this.skin=new Object,this.skin.className="p_skin"),this.skin.body=0,this.skin.weapon=0,this.skin.wing=0,s){case"1":this.skin.weapon=parseInt(t.img+e+i),this.skin.body=parseInt("2120000"+i+e);break;case"2":this.skin.body=parseInt(t.img+e),this.skin.weapon=parseInt("1120000"+i+e+i);break;case"4":this.skin.wing=parseInt(t.img+e),this.skin.body=parseInt("2120000"+i+e),this.skin.weapon=parseInt("1120000"+i+e+i)}return this.skin},I(0,i,"data",null,function(t){if(this.infoVO=t,this.infoVO){if(this.goodImg.skin=this.infoVO.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.infoVO.color+".png",this.txtName.color=U.COLORS_DARK[this.infoVO.color],this.txtName.text=this.infoVO.name,this.txtNum.text=""+this.infoVO.tempNum,100<this.infoVO.level?this.txtLv.text=Math.floor((this.infoVO.level-100)/10)+"转":this.txtLv.text=this.infoVO.level+"级",this.txtDesc.innerHTML=this.infoVO instanceof xml.GoodsVO?this.infoVO.desc:"",null==this.infoVO.img||""==this.infoVO.img)this.roleBg.visible=!1,this.bottomPart.y=36;else switch(this.roleBg.visible=!0,this.bottomPart.y=556,this.infoVO.useType%1e3){case 8:case 9:var e;this.opSprite.visible=!1,this.avatar&&this.avatar.removeSelf(),this.bitClip=this.bitClip||new b,this.body.addChild(this.bitClip);var i,s=NaN;this.infoVO.useType%1e3==8?(e=Bt.isFanTi?"unit/title/"+this.infoVO.img+"_ft":"unit/title/"+this.infoVO.img,s=0,i="default",this.bitClip.scale(1,1)):(e="unit/monster/"+this.infoVO.img+"_attack_3",s=3,i="attack",this.bitClip.scale(_e.scale,_e.scale)),this.bitClip.loadAndPlay(e,i,s,!0);break;case 19:"2"==this.infoVO.img.substr(0,1)?this.switchState.visible=!0:this.switchState.visible=!1,this.opSprite.visible=!0,this.bitClip&&this.bitClip.removeSelf(),this.avatar=this.avatar||new Vh,this.body.addChild(this.avatar),this._defCate=this._defSex=this._defState=1,this.resetCateSex(this._defCate,this._defSex,this._defState),this.avatar.resetSkin(this.createSkin(this.infoVO,this._defSex,this._defCate),this._defSex,!0),this.avatar.play("stand",4);break;default:this.roleBg.visible=!1,this.bottomPart.y=36}this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+20,this.bg.height=this.height}}),I(0,i,"uiClass",function(){return"GoodsTip"}),e}(xx),BF=function(t){function e(){this.str=null,e.__super.call(this),this.txtMsg.style.valign="top",this.txtMsg.style.color="#ffffff",this.txtMsg.style.fontSize=26,this.txtMsg.style.letterSpacing=2,this.txtMsg.style.leading=20}return w(e,"modules.equip.View.DefaultTip",Cx),I(0,e.prototype,"data",null,function(t){this.str=t,this.txtMsg.innerHTML=t,500<this.txtMsg.contextWidth?this.txtMsg.width=500:this.txtMsg.width=this.txtMsg.contextWidth,this.txtMsg.height=this.txtMsg.contextHeight,this.width=this.txtMsg.contextWidth+14,this.height=this.txtMsg.contextHeight+14}),e.DEFAULT_WIDTH=500,e}(),MF=function(t){function e(){this.baseInfo=null,this.subTipArr=null,this._vo=null,e.__super.call(this)}w(e,"modules.equip.View.DominateEquipTip",Sx);var i=e.prototype;return I(0,i,"data",null,function(t){this._vo=t;var e=0,i=0;this.baseInfo=ur.getItem(t.equip_type_id),this.subTipArr=this.subTipArr||[];var s=sn.getXMLVObyPos(sn.curPos);s&&(this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("升级属性",s.getUpAttrByLevel2(t.level)),++i,this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("淬炼属性",s.getQuenchAttrByLevel2(t.quench)),++i,e=s.getPowQuench()*t.quench+s.getPowUp()*t.level),this.height=340,this.panel.height=1;var n=0;if(this.baseInfo){this.imgGoods.skin=this.baseInfo.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.baseInfo.color+".png",this.txtName.color=U.COLORS_DARK[this.baseInfo.color],this.txtName.text=this.baseInfo.name,this.txtPos.text=ur.getEquipClassName(this.baseInfo.type),this.txtPos1.text=ur.getEquipTypeName(this.baseInfo.type);var o=this.baseInfo.level;100<o?(this.txtLevel.text="转 生：",this.txtLevel1.text=(o-100)/10+"转"):(this.txtLevel.text="等 级：",this.txtLevel1.text=o+"级"),this.txtVoca1.text=sn.getVOCAName(this.baseInfo.category);for(var a,l=W.parseAttrToArr(this.baseInfo.attr),r=l.length,h="",u=0;u<r;u++)a=l[u],h+=W.getAttrStrByArr(a,"","：","\n"),this.height+=36,this.panel.height+=36;this.attrTxt.text=h,this.height+=36,this.panel.height+=36,n=this.baseInfo.basePow}this.txtScore.text="评 分  "+Math.floor(n);var c,d,p=k.numToTexture(Math.floor(n+e));this.spPow.graphics.clear();for(var m=0;m<p.length;m++)c=p[m],this.spPow.graphics.drawTexture(c,c.width*m);for(var f=0;f<this.subTipArr.length;f++)d=this.subTipArr[f],f<i?(d.x=0,d.y=this.height-30,this.addChild(d),this.height+=d.height):d.removeSelf();this.txtDesc.innerHTML="",this.panel.refresh()}),I(0,i,"uiClass",function(){return"EquipTip"}),e}(),FF=function(t){function e(){this.baseInfo=null,this.addArr=null,this.subTipArr=null,this._vo=null,this._subTip=null,this._subTip2=null,e.__super.call(this),this.panel.vScrollBar.hide=!0}w(e,"modules.equip.View.EquipTip",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.txtDesc.style.color="#ffffff",this.txtDesc.style.fontSize=26,this.txtDesc.style.lineHeight=30},I(0,i,"data",null,function(t){var e=0,i=0;if("p_goods"==(this._vo=t).className)this.baseInfo=ur.getItem(t.typeid),t.equip_info&&t.equip_info.extra_attrs&&(this.addArr=t.equip_info.extra_attrs),this._subTip&&this._subTip.parent&&this._subTip.removeSelf();else if("p_actor_equip"==t.className){this.baseInfo=ur.getItem(t.type_id),this.addArr=t.extra_attr,this.subTipArr=this.subTipArr||[];var s=t.pos,n=pe.getPalByIndex(oa.curActorIndex),o=Jo.getEquipInfo(s,1,n.pal_id);if(o&&0<o.curLv){for(var a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("强化属性",a),++i}if((o=Jo.getEquipInfo(s,2,n.pal_id))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]="铭刻"+o.curLv+"级\n  "+W.getAttrStrByArr(a[l],"","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("铭刻属性",a),++i}if((o=Jo.getEquipInfo(s,3,n.pal_id))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("注灵属性",a),++i}var r=Jo.getRefineSoulStep(n.pal_id,s);if(0<r){this._subTip=this._subTip||new HA,this._subTip.parent||this.panel.addChild(this._subTip);for(var h=0;h<this._subTip.spFire.numChildren;h++)this._subTip.spFire.getChildAt(h).skin=h<r?"modules/refine/fire"+$o.getSoulStepSource(h+1)+".png":"";this._subTip.txtCon.text="基础属性 +"+$o.getSoulLvVO(r).add/100+"%"}else this._subTip&&this._subTip.parent&&this._subTip.removeSelf();var u,c=oo.ins().getCurEquipPurifyAttr(n.pal_id,s);if(c&&0<c.length)for(var d in this._subTip2=this._subTip2||new WA,this._subTip2.parent||this.panel.addChild(this._subTip2),this._subTip2.height=0,this._subTip2.txtProp.text=this._subTip2.txtStar.text="",c)u=c[d],this._subTip2.txtProp.text+=oo.ins().getTransName(u.prop_code,u.prop_value)+"\n",this._subTip2.txtStar.text+="("+u.prop_star+"星)\n",this._subTip2.height+=this._subTip2.txtProp.height;else this._subTip2&&this._subTip2.parent&&this._subTip2.removeSelf()}this.height=330,this.panel.height=1;var p,m,f=0;if(this.baseInfo){this.imgGoods.skin=this.baseInfo.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.baseInfo.color+".png",this.txtName.color=U.COLORS_DARK[this.baseInfo.color],this.txtName.text=this.baseInfo.name,this.txtPos.text=ur.getEquipClassName(this.baseInfo.type),this.txtPos1.text=ur.getEquipTypeName(this.baseInfo.type);var _,g=this.baseInfo.level;100<g?(this.txtLevel.text="转 生：",this.txtLevel1.text=(g-100)/10+"转"):(this.txtLevel.text="等 级：",this.txtLevel1.text=g+"级"),this.txtVoca1.text=sn.getVOCAName(this.baseInfo.category);for(var y,v,I=(a=W.parseAttrToArr(this.baseInfo.attr)).length,w="",b=0;b<I;b++){var S;if(y=a[b],_="",this.addArr)for(S in this.addArr)if(v=this.addArr[S],49==y[0]||15==y[0]||16==y[0]){if(49==v.prop_code||15==v.prop_code||16==v.prop_code){_=" +"+v.prop_value;break}}else if(y[0]==v.prop_code){_=" +"+v.prop_value;break}w+=W.getAttrStrByArr(y,"","：",_+"\n"),this.height+=36,this.panel.height+=36}this.attrTxt.text=w,this.height+=36,this.panel.height+=36,f=this.baseInfo.basePow,f+=W.getAddExtraPower(this.addArr)}if("p_actor_equip"==t.className)for(var x=0;x<this.subTipArr.length;x++)p=this.subTipArr[x],x<i?(p.x=0,p.y=this.height-310,this.panel.addChild(p),this.height+=p.height,this.panel.height+=p.height):p.removeSelf();else if(this.subTipArr)for(m in this.subTipArr)(p=this.subTipArr[m]).removeSelf();if(this._subTip&&this._subTip.parent&&(this._subTip.x=0,this._subTip.y=this.height-310,this.height+=this._subTip.height,this.panel.height+=this._subTip.height),this._subTip2&&this._subTip2.parent&&(this._subTip2.x=0,this._subTip2.y=this.height-310,this.height+=this._subTip2.height,this.panel.height+=this._subTip2.height),this.txtDesc.y=this.height-300,this.baseInfo.desc){if(this.txtDesc.innerHTML=this.baseInfo.desc,6==this.baseInfo.color){var C=oa.getRedEquipVO(this.baseInfo.type,this.baseInfo.id%10);f=C?C.power:f}}else this.txtDesc.innerHTML="";this.height+=this.txtDesc.contextHeight,this.panel.height+=this.txtDesc.contextHeight,this.txtScore.text="评 分  "+Math.floor(f);var P,T=k.numToTexture(Math.floor(f+e));for(this.spPow.graphics.clear(),h=0;h<T.length;h++)P=T[h],this.spPow.graphics.drawTexture(P,P.width*h);690<this.panel.height&&(this.panel.vScrollBar.mouseWheelEnable=!0,this.panel.vScrollBar.touchScrollEnable=!0,this.panel.height=690),this.panel.height<690&&(this.baseInfo.desc?(this.panel.vScrollBar.mouseWheelEnable=!0,this.panel.vScrollBar.touchScrollEnable=!0):(this.panel.vScrollBar.mouseWheelEnable=!1,this.panel.vScrollBar.touchScrollEnable=!1)),1e3<this.height&&(this.height=1e3),this.panel.refresh()}),e}(Sx),UF=function(t){function e(){this._vo=null,this.infoVO=null,this.goodsUseItem=null,this.useMax=0,this.bitClip=null,this.avatar=null,this._defCate=1,this._defSex=1,this._defState=1,this.skin=null,this.goodsPosX=82,this.goodsPosY=94,e.__super.call(this),this.talimanImg=new et}w(e,"modules.equip.View.GoodsTip",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.txtDesc.style.color="#ffffff",this.txtDesc.style.fontSize=26,this.txtDesc.style.lineHeight=30,this.cate1.on("click",this,this.onClickCate),this.cate2.on("click",this,this.onClickCate),this.cate3.on("click",this,this.onClickCate),this.cate4.on("click",this,this.onClickCate),this.male.on("click",this,this.onClickCate),this.female.on("click",this,this.onClickCate),this.switchState.on("click",this,this.onClickCate)},i.onClickCate=function(t){switch(t.target){case this.cate1:this._defCate=1;break;case this.cate2:this._defCate=2;break;case this.cate3:this._defCate=3;break;case this.cate4:this._defCate=4;break;case this.male:this._defSex=1;break;case this.female:this._defSex=2;break;case this.switchState:1==this._defState?this._defState=2:this._defState=1}this.resetCateSex(this._defCate,this._defSex,this._defState);var e=this.createSkin(this.infoVO,this._defSex,this._defCate);this.avatar.resetSkin(e,this._defSex,!0)},i.changeCateVisible=function(t){this.cate1Default.visible=t,this.cate2Default.visible=t,this.cate3Default.visible=t,this.cate4Default.visible=t,this.cate1.visible=t,this.cate2.visible=t,this.cate3.visible=t,this.cate4.visible=t},i.resetCateSex=function(t,e,i){for(var s=1;s<=4;s++)this["cate"+s].alpha=0;this["cate"+t].alpha=1,this.male.alpha=1==e?1:0,this.female.alpha=1==e?0:1,1==i?(this.switchState.label="展示打坐",this.changeCateVisible(!0),this.body.y=401,this.avatar.play("stand",4)):(this.switchState.label="展示站立",this.changeCateVisible(!1),this.body.y=331,this.avatar.play("sit",4))},i.checkTimePast=function(t){var e;if(t&&this.infoVO&&3099==this.infoVO.useType)for(var i in t.data_list)if(3==(e=t.data_list[i]).id&&0<e.val&&e.val<ya.serverTime)return!0;return!1},i.onChange=function(t){this.useMax=this.infoVO.oneTimeUseOne()?1:this._vo.current_num;var e=parseInt(this.goodsUseItem.txtInput.text);e=(e=1<e?e:1)<this.useMax?e:this.useMax,this.goodsUseItem.txtInput.text=""+e},i.onDown=function(t){var e=parseInt(this.goodsUseItem.txtInput.text);switch(t.target){case this.goodsUseItem.btnD:1<e&&--e,this.goodsUseItem.txtInput.text=""+e;break;case this.goodsUseItem.btnU:this.useMax=this.infoVO.oneTimeUseOne()?1:this._vo.current_num,e<this.useMax&&++e,this.goodsUseItem.txtInput.text=""+e;break;case this.goodsUseItem.btnMin:e=1,this.goodsUseItem.txtInput.text=""+e;break;case this.goodsUseItem.btnMax:this.useMax=this.infoVO.oneTimeUseOne()?1:this._vo.current_num,e=0<this.useMax?this.useMax:1,this.goodsUseItem.txtInput.text=""+e;break;case this.goodsUseItem.btnUseM:cr.ins().openLBBatchUseView(),this.close();break;case this.goodsUseItem.btnUse:if("出售"==this.goodsUseItem.btnUse.label){var i=[],s=new Object;s.className="p_kv",s.id=1,s.val=this._vo.id,i.push(s),Tr.ins().toExchange(16,70001,1,i),this.close()}else if("使用"==this.goodsUseItem.btnUse.label)if(this._vo.current_num>=e){var n=this.infoVO.linkTo;if(n)me.linkTo(parseInt(n),this._vo);else switch(eo.getGoodsUseType(this._vo.typeid)){case 1:var o=eo.getGoodsUseVO(this._vo.typeid);o&&me.linkTo(parseInt(o.param),this._vo);break;case 2:Sl.ins.useFightSoulItem(this._vo);break;default:if(this.infoVO.useType%1e3==30){T.dispatch("REFINE_SOUL_GOODS_USE",this._vo.id,e);break}if(this.infoVO.useType%1e3==37){Bl.ins().openFootPanelByItemId(this._vo.typeid);break}this.box1.visible&&this.box1.selected?cr.ins().bathUseItem(this.infoVO.useType%1e3):(this._vo.id||(this._vo.id=xo.getGoodsByTypeID(this._vo.typeid)?xo.getGoodsByTypeID(this._vo.typeid).id:0),cr.ins().useItem(this._vo.id,e))}this.close()}else Jt.addTip("物品数量不足,请修改")}},i.createSkin=function(t,e,i){var s=t.img.substr(0,1);switch(null==this.skin&&(this.skin=new Object,this.skin.className="p_skin"),this.skin.body=0,this.skin.weapon=0,this.skin.wing=0,s){case"1":this.skin.weapon=parseInt(t.img+e+i),this.skin.body=parseInt("2120000"+i+e);break;case"2":this.skin.body=parseInt(t.img+e),this.skin.weapon=parseInt("1120000"+i+e+i);break;case"4":this.skin.wing=parseInt(t.img+e),this.skin.body=parseInt("2120000"+i+e),this.skin.weapon=parseInt("1120000"+i+e+i)}return this.skin},I(0,i,"data",null,function(t){if(this.talimanImg.visible=!1,this._vo=t,this.infoVO=ur.getItem(t.typeid),this.infoVO){this.imgBg.skin="com/ui/goodsBg"+this.infoVO.color+".png",this.goodImg.skin=this.infoVO.realMaxico,this.txtName.color=U.COLORS_DARK[this.infoVO.color],this.txtName.text=this.infoVO.name,this.txtNum.text=""+t.current_num;var e=this.infoVO.level;100<e?(this.txtLevel.text="转  生：",this.txtLv.text=(e-100)/10+"转"):(this.txtLevel.text="等  级：",this.txtLv.text=e+"级");var i=this.checkTimePast(t);if(this.txtDesc.innerHTML=i?this.infoVO.htmlPastTimeDesc:this.infoVO.desc,null==this.infoVO.img||""==this.infoVO.img)this.roleBg.visible=!1,this.bottomPart.y=36;else switch(this.roleBg.visible=!0,this.bottomPart.y=556,this.infoVO.useType%1e3){case 8:case 9:case 32:case 31:var s;this.opSprite.visible=!1,this.avatar&&this.avatar.removeSelf(),this.bitClip=this.bitClip||new b,this.body.x=269,this.body.y=401,this.body.addChild(this.bitClip);var n,o=NaN;if(this.infoVO.useType%1e3==8)s=Bt.isFanTi?"unit/title/"+this.infoVO.img+"_ft":"unit/title/"+this.infoVO.img,o=0,n="default",this.bitClip.scale(1,1);else if(this.infoVO.useType%1e3==32){var a=nn.getAnimalVO(Number(this.infoVO.img));a&&a.mainPosArr&&(this.body.x=a.mainPosArr[0]?a.mainPosArr[0]+this.goodsPosX:269,this.body.y=a.mainPosArr[1]?a.mainPosArr[1]+this.goodsPosY:401),s="unit/monster/"+this.infoVO.img+"_3",o=3,n="stand",this.bitClip.scale(1,1)}else this.infoVO.useType%1e3==31?(s="unit/effect/talisman_"+this.infoVO.color,o=0,n="default",this.bitClip.scale(1,1),this.talimanImg.visible=!0,this.talimanImg.skin="modules/taliman/img/taliman"+this.infoVO.id+"_1.png",this.talimanImg.pos(-66,-214)):(s="unit/monster/"+this.infoVO.img+"_attack_3",o=3,n="attack",this.bitClip.scale(_e.scale,_e.scale));this.bitClip.loadAndPlay(s,n,o,!0);break;case 19:"2"==this.infoVO.img.substr(0,1)?this.switchState.visible=!0:this.switchState.visible=!1,this.opSprite.visible=!0,this.bitClip&&this.bitClip.removeSelf(),this.avatar=this.avatar||new Vh,this.body.addChild(this.avatar),this._defCate=this._defSex=this._defState=1,this.resetCateSex(this._defCate,this._defSex,this._defState),this.avatar.resetSkin(this.createSkin(this.infoVO,this._defSex,this._defCate),this._defSex,!0),this.avatar.play("stand",4);break;default:this.roleBg.visible=!1,this.bottomPart.y=36}if(this.infoVO.dirUse()){this.goodsUseItem||(this.goodsUseItem=new UA,this.goodsUseItem.txtInput.restrict="0-9",this.goodsUseItem.on("click",this,this.onDown),this.goodsUseItem.txtInput.on("input",this,this.onChange)),i||this.infoVO.useType%1e3==18&&fo.checkIsHasToken(this.infoVO.id,fo.myTokens)?this.goodsUseItem.btnUse.label="出售":i||this.infoVO.useType%1e3==26&&po.checkIsHasLanguage(this.infoVO.id,po.myFlowerLanguages)?this.goodsUseItem.btnUse.label="出售":this.goodsUseItem.btnUse.label="使用";var l=Math.floor(this.infoVO.useType/1e3);switch(this.goodsUseItem.btnUseM.visible=!1,this.goodsUseItem.btnUse.x=190,l){case 1:case 2:this.useMax=t.current_num,this.box1.visible=this.txtBath.visible=!1,this.goodsUseItem.bathUse.visible=!0,this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+190,this.goodsUseItem.y=this.height-180;break;case 3:case 4:this.infoVO.useType%1e3==34?(this.useMax=1,this.box1.visible=this.txtBath.visible=this.goodsUseItem.bathUse.visible=!1,this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+110,this.goodsUseItem.y=this.height-180,this.goodsUseItem.btnUseM.visible=!0,this.goodsUseItem.btnUse.x=55):(this.useMax=1,this.box1.visible=this.txtBath.visible=this.goodsUseItem.bathUse.visible=!1,this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+110,this.goodsUseItem.y=this.height-180);break;case 5:case 6:this.useMax=t.current_num,this.box1.visible=this.txtBath.visible=this.goodsUseItem.bathUse.visible=!0,this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+230,this.goodsUseItem.y=this.height-220,this.box1.y=this.height-100,this.txtBath.y=this.height-91,this.txtBath.text="批量使用背包中"+ur.USE_NAME_ARR[this.infoVO.useType%1e3-1],this.box1.selected=!0,this.bottomPart.height=this.box1.y+50}this.goodsUseItem.txtInput.text=""+this.useMax,this.addChild(this.goodsUseItem)}else this.box1.visible=this.txtBath.visible=!1,this.height=this.txtDesc.y+this.txtDesc.parent.y+this.txtDesc.contextHeight+20,this.goodsUseItem&&this.goodsUseItem.parent&&(this.goodsUseItem.btnUse.label="使用",this.goodsUseItem.removeSelf());this.bg.height=this.height}}),e}(xx),GF=function(t){function e(){if(e.__super.call(this),h.stage.on("resize",this,this.onResize),this.onResize(),yt.isWX||yt.isQQ)this.img.skin="modules/theme/welcome2.png";else switch(G.pf){case"qqwdzsand":case"wanbaios":case"wanbaand":case"gdtand":case"gdtios":case"gdtwdand":case"gdtwdios":case"wanbapc":case"mobileqqios":case"mobileqqand":case"zixiaand":case"aiqiyi":case"tangdaoyaand":case"602":case"feihuo":case"mcfxyyb":case"txyyband":case"youlechang":case"vivo":this.img.skin="modules/theme/welcome.png";break;case"lehaihai":this.img.skin="modules/theme/welcome222.png";break;default:this.img.skin="modules/theme/welcome2.png"}this.btn.on("mousedown",this,this.onMouseDown),this.btn.on("mouseup",this,this.onMouseUp)}w(e,"modules.theme.WelcomeView",le);var i=e.prototype;return i.onMouseDown=function(){c.send(29001),this.btn.scaleX=.9,this.btn.scaleY=.9,h.stage.on("mouseup",this,this.onMouseUp)},i.onMouseUp=function(){this.destroy(),T.dispatch("GUIDE_OPEN_ROLE")},i.onResize=function(){this.width=lt.stageWidth,this.height=lt.stageHeight,this.box.x=(this.width-750)/2},i.destroy=function(t){void 0===t&&(t=!0),laya.ui.View.prototype.destroy.call(this,t),h.stage.off("resize",this,this.onResize),h.stage.off("mouseup",this,this.onMouseUp),ut.clearRes(this.img.skin),e._ins.close(),e._ins=null},I(1,e,"isExist",function(){return null!=e._ins},ui.modules.theme.WelcomeViewUI._$SET_isExist),e.preload=function(){1==yt.firstEnter&&null==e._ins&&(e._ins=new e)},e.show=function(){1!=e.showed&&(e.showed=!0,1==yt.firstEnter&&(null==e._ins&&(e._ins=new e),e._ins.popup(!0)),c.send(29e3))},e._ins=null,e.showed=!1,e}(),HF=function(t){function e(){this.items=null,e.__super.call(this),this.items=[]}return w(e,"modules.exercise.biography.view.ExerBiographyBountyRewardTip",Dx),e.prototype.update=function(t){this.spReward.removeChildren();for(var e,i=hn.copyEnterBase.captainTotalRewardList[t],s=0;s<i.length;s++)this.items[s]=this.items[s]||new Ah(105,105,!1,!0,!0,!1),(e=this.items[s]).dataSource=[i[s].typeId,i[s].num],e.x=145*s,this.spReward.addChild(e)},e}(),WF=function(t){function e(){this._itemEffect=null,e.__super.call(this),this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.imgIcon)+1)}return w(e,"modules.exercise.fightSoul.view.FightSoulTipsPanel",Yx),e.prototype.setSoulData=function(t,e){var i=mn.getFightSoulVO(t);this.txtName.color=U.getColorDark(i.color),this.txtName.text=i.name+"+"+e;var s=i.attr+e+"";this.txtDesc.innerHTML=Z.parseStringFont(i.desc,s),this.imgIcon.skin="com/ui/goodsBg"+i.color+".png",this._itemEffect.loadAndPlay("moduleEffect/"+i.eff,"default",0,!0),this._itemEffect.pos(95,134),this.txtNum.text="1",this.txtLvl.text=mn.getFightSoulOpenRegrowLevel()+"转"},e}(),qF=function(t){function e(){this.bottomEff=null,this.vo=null,this.p=null,this.clip=null,this.spiriTreImg=new et,e.__super.call(this),this.on("display",this,this.onDisplay),this.bottomEff=b.getOne(),this.bottomEff.pos(377,504),this.spBox.addChild(this.bottomEff),this.clip=b.getOne(),this.clip.pos(376,476),this.spBox.addChild(this.spiriTreImg),this.spBox.addChild(this.clip),this.on("click",this,this.onClick)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreGetView",fC);var i=e.prototype;return i.onDisplay=function(){this.bottomEff.loadAndPlay("moduleEffect/bottom","default",0,!0),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){this.bottomEff.stop(),this.off("undisplay",this,this.unDisplay)},i.updateSpiriTre=function(t){this.clip.loadAndPlay("moduleEffect/hunttreasure_mystery_waifaguang","default",0,!0),this.clip.scale(1,1);var e=ur.getItem(t-12e6);e&&(this.spiriTreImg.skin="modules/goods/maxico/"+e.path+".png"),this.spiriTreImg.pos(319.5,371),this.spiriTreImg.scale(1.1,1.1)},i.onClick=function(t){switch(t.target){case this.btnLeft:me.linkTo(10816),this.close();break;case this.btnRight:Al.ins().useNextSpiriTre(),this.close();break;case this.btnOK:this.close()}},i.updateGetBack=function(t){if(t){if(this.p=t.ling_bao,this.vo=Tn.getSpiritVoById(this.p.type_id),this.vo){this.attr1.text=0<this.p.rand_level?this.vo.level+"+"+this.p.rand_level:this.vo.level+"";var e=this.p.main_prop[0];this.attr3.text=W.getName(e.prop_code)+"+"+e.prop_value,this.attr4.text=kn.getPropStr(this.p,"rand_prop"),this.attr2.text=0<this.p.rand_slot?"有插槽":"无插槽",this.txtName.text=this.vo.name}this.txtLink.visible=this.btnLeft.visible=this.btnRight.visible=!0,this.btnOK.visible=!1,this.updateSpiriTre(this.p.type_id)}},i.updateRecastBack=function(t){var e=[];if(t&&t.new_equip){for(var i=0;i<t.new_equip.data_list.length;i++){var s=t.new_equip.data_list[i];e.push(s)}this.vo=Tn.getSpiritVoById(t.new_equip.typeid),this.vo&&(this.attr1.text=this.vo.level+"+"+e[0].val,this.attr2.text=0<e[1].val?"有插槽":"无插槽",this.attr3.text=kn.getMainProp(t.new_equip),this.attr4.text=kn.getSecProp(t.new_equip),this.txtName.text=this.vo.name),this.txtLink.visible=this.btnLeft.visible=this.btnRight.visible=!1,this.btnOK.visible=!0,this.updateSpiriTre(t.new_equip.typeid)}},e}(),YF=function(t){function e(){this._p=null,this._vo=null,e.__super.call(this)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreShowTip",_C);var i=e.prototype;return i.update=function(){if(this._vo=Tn.getSpiritVoById(this._p.typeid),this._vo){this.imgBg.skin="com/ui/goodsBg3.png";var t=ur.getItem(this._p.typeid-12e6);t&&(this.img.skin="modules/goods/maxico/"+t.path+".png");var e=kn.randLevel(this._p);this.txtName.text=0<e?"[完美]"+this._vo.name:this._vo.name,this.txtLevel.text=0<e?this._vo.level+"+"+e:this._vo.level+"",this.txtAtt1.text=kn.getMainProp(this._p),this.txtAtt2.text=kn.getSecProp(this._p),this.txtSlot.text=0<kn.hasSlot(this._p)?"有插槽":"无插槽"}},I(0,i,"data",null,function(t){this._p=t,this._p&&this.update()}),e}(),XF=function(t){function e(){this._data=null,this._type=0,this.num=0,e.__super.call(this),this.btnActive.on("click",this,this.onUpgrade),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay)}w(e,"modules.exercise.spiriTreasure.view.SpiriTreTip",gC);var i=e.prototype;return i.onDisplay=function(){T.register("SPIRITRE_ACTIVE",this,this.updateInfo)},i.onUnDisplay=function(){Al.ins().onMainRPUpdate(),T.remove("SPIRITRE_ACTIVE",this,this.updateInfo)},i.updateInfo=function(){var t=0;this.num=0;var e=[];if(this._data instanceof xml.SpiritreSuitVO){var i=this._data;this.txtTitle1.text=this.txtTitle.text="套装属性",this.txtTitle2.text="激活条件",this.num=Tn.getNumBySuitAndPal(i.suitId),this.txtDes.text="获得全套"+Tn.getSuitNameById(i.suitId)+"可激活("+this.num+"/8)",t=Tn.getPowerBySuit(i.suitId),e=Tn.getSpiritreSuitAtt(i.suitId),this.imgRp.visible=Tn.checkActivateRp()}else{var s=this._data;this.txtTitle.text="淬炼目标",this.txtTitle1.text="额外属性",this.txtTitle2.text="升级条件",this.num=Tn.getAllLv(),this.txtDes.text="所有灵宝淬炼等级达到（"+this.num+"/"+s.lv+"星）",t=Tn.getPowerByDes(s.suitId),e=Tn.getSpiritreDesAtt(s.suitId),this.imgRp.visible=Tn.checkAllSuitQuenchRp()}var n=k.numToTexture(t,"com/ui/powerNum");this.spPower.graphics.clear();for(var o=0;o<n.length;o++){var a=n[o];this.spPower.graphics.drawTexture(a,a.width*o)}for(var l=0;l<e.length;l++)this["txtAtt"+(l+1)].text=e[l],this["txtAtt"+(l+1)].color=0==this._type?"#e1c6bc":"#96f254";this.imgFull.visible=0!=this._type,0!=this._type&&(this.imgRp.visible=!1)},i.onUpgrade=function(){if(this._data instanceof xml.SpiritreSuitVO)8==this.num?Al.ins().toActive(1,3):Jt.addTip("未集齐该套装");else{var t=Tn.getSpiriTreDesVo();this.num>=t.lv?Al.ins().toActive(t.lv,2):Jt.addTip("该套装所有部位灵宝淬炼等级未达到"+t.lv+"星")}},I(0,i,"data",null,function(t){this._data=t,this._data&&this.updateInfo()}),I(0,i,"activeType",null,function(t){this._type=t}),e}(),KF=function(t){function e(){this.minRefineLv=0,this.refineTargetInfo=null,this.refinereAimLv=0,e.__super.call(this),this.init(),this.on("display",this,this.update),this.upgradeBtn.on("click",this,this.toAimLvUp),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),Nt.register("RP_STRANGEFIRE_REFINE_AIM_UP",this.upgradeBtn,new Tt(19,-10))}w(e,"modules.exercise.strangeFire.view.StrangeFireRefineTip",yC);var i=e.prototype;return i.onDisplay=function(){T.register("STRANGEFIRE_REFINE_AIMLV_UPDATE",this,this.update)},i.onUnDisplay=function(){T.remove("STRANGEFIRE_REFINE_AIMLV_UPDATE",this,this.update)},i.init=function(){this.fullLvImg.visible=!1,this.refineTargetInfo=An.getRefineTargetInfo()},i.update=function(){this.minRefineLv=An.getMinRefineLv(),this.refinereAimLv=An.curFireRefineAimLv;var t,e=0,i=1;if(pe.pals&&(i=pe.pals.length),0<this.refinereAimLv)for(var s in this.refineTargetInfo)(t=this.refineTargetInfo[s]).step==this.refinereAimLv&&(e+=t.spcPower*i);else e=this.refineTargetInfo[0].spcPower;var n=k.numToTexture(e,"com/ui/powerNum");this.imgArrt.graphics.clear();for(var o=0;o<n.length;o++){var a=n[o];this.imgArrt.graphics.drawTexture(a,a.width*o)}An.curFireRefineAimLv==An.baseInfo.refineAimMaxLevel&&(this.upgradeBtn.disabled=!0,this.upgradeBtn.label="已满级"),this.updateDesc()},i.updateDesc=function(){this.refinereAimLv=An.curFireRefineAimLv;var t=this.getCurStep(this.refinereAimLv);0==this.minRefineLv?(this.txtTitle.text="淬炼目标"+this.refineTargetInfo[0].step+"阶",this.txtSkill.text=this.refineTargetInfo[0].desc):t&&(this.txtTitle.text="淬炼目标"+t.step+"阶",this.txtSkill.text=t.desc),0==this.minRefineLv?this.txtTarget.text="四种火焰淬炼等级达到（"+this.minRefineLv+"/"+this.refineTargetInfo[0].targetLevel+")":t&&(this.txtTarget.text="四种火焰淬炼等级达到（"+this.minRefineLv+"/"+t.targetLevel+")")},i.getCurStep=function(t){var e;for(var i in this.refineTargetInfo)if((e=this.refineTargetInfo[i]).step==this.refinereAimLv)return e;return null},i.getNextStep=function(t){var e;for(var i in this.refineTargetInfo)if((e=this.refineTargetInfo[i]).step==t+1)return e;return null},i.toAimLvUp=function(){An.curFireRefineAimLv<An.baseInfo.refineAimMaxLevel&&El.ins().toRefineAim()},e}(),jF=function(t){function e(){this.curChooseTalimanId=0,this.curStonePos=0,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick)}w(e,"modules.exercise.talisman.view.GemsOffTipDialog",vC);var i=e.prototype;return i.initMsg=function(){this.curChooseTalimanId=Rn.curChooseTalimanVO.id,this.curStonePos=Rn.curChooseStonePos;var t=Rn.getTalimanStoneInfo(this.curChooseTalimanId,this.curStonePos),e=Rn.getTalimanGemVO(t.val),i=Rn.curChooseTalimanVO.name,s=Rn.getTalimanGemsDisaPriceVO(e.level),n=s.prices.toString(),o=Z.span("是否将","#5d3924")+Z.span(e.name,"#F7EF5F")+Z.span("从","#5d3924")+Z.span(i,"#F7EF5F")+Z.span("上进行拆卸","#5d3924");this.txtMsg.innerHTML=o,1e4<s.prices&&(n=s.prices/1e4+"万");var a=Z.span("· 拆卸费用：","#5d3924")+Z.span(n,"#ffffff")+Z.span("铜钱","#5d3924");this.txtPrice.innerHTML=a},i.onClick=function(t){var e=Rn.getTalimanStoneInfo(this.curChooseTalimanId,this.curStonePos),i=Rn.getTalimanGemVO(e.val),s=Rn.getTalimanGemsDisaPriceVO(i.level);switch(t.target){case this.btnClose:case this.btnNo:this.closeWindow();break;case this.btnYes:pe.checkMoney(0,s.prices)?Rl.ins().toGemsRemove(this.curChooseTalimanId,this.curStonePos):ba.show(10201113),this.closeWindow()}},i.updata=function(){this.initMsg()},I(0,i,"uiClass",function(){return"gemsOffTipDialog"}),e}(),QF=function(t){function e(){this.bottomEff=null,this.clip=null,this.talimanImg=new et,e.__super.call(this),this.on("display",this,this.onDisplay),this.bottomEff=b.getOne(),this.bottomEff.pos(377,504),this.spBox.addChild(this.bottomEff),this.clip=b.getOne(),this.clip.pos(376,476),this.spBox.addChild(this.talimanImg),this.spBox.addChild(this.clip),this.on("click",this,this.onClick)}w(e,"modules.exercise.talisman.view.TalimanGetView",IC);var i=e.prototype;return i.onDisplay=function(){this.bottomEff.loadAndPlay("moduleEffect/bottom","default",0,!0),this.on("undisplay",this,this.unDisplay)},i.unDisplay=function(){this.bottomEff.stop(),this.off("undisplay",this,this.unDisplay)},i.updateTaliman=function(t){this.clip.loadAndPlay("unit/effect/talisman_"+t.color,"default",0,!0),this.clip.scale(1,1),this.talimanImg.skin="modules/taliman/img/taliman"+t.id+"_1.png",this.talimanImg.pos(309.5,261),this.talimanImg.scale(1,1)},i.onClick=function(t){switch(t.target){case this.btnLeft:this.close();break;case this.btnRight:me.linkTo(10814),this.close();break;case this.txtLink:me.linkTo(10813),this.close()}},i.update=function(t){if(Rn.getTalimanInfo(t)){var e=Rn.getTalimanAttr(t),i=Object.keys(e);if(i)for(var s=0;s<4;s++)i[s]?(this["txt"+(s+1)].text=W.getName(parseInt(i[s]))+"：",this["attr"+(s+1)].text=e[i[s]]):(this["txt"+(s+1)].text="",this["attr"+(s+1)].text="")}var n=Rn.getTalimanVO(t);n&&(this.txtName.text=n.name),this.updateTaliman(n)},I(0,i,"uiClass",function(){return"TalismanGetView"}),e}(),zF=function(t){function e(){e.__super.call(this)}return w(e,"modules.exercise.talisman.view.TalimanHelpTipView",wC),e}(),$F=function(t){function e(){e.__super.call(this),this.imgTitle.visible=!1,this.txtTitle.visible=!0}w(e,"modules.commonCopy.loveCopy.view.LoveCopyInvitePanel",FT);var i=e.prototype;return i.clickHandler=function(){if(this.curItem){var t=Z.linkcolor("【进入","loveCopy#"+Ms.teamID,!1)+Z.linkcolor("队伍】","loveCopy#"+Ms.teamID,!1),e=pe.roleName+"正准备前往"+Os.loveCopyVO.copyName+"，邀请你一同前往！"+t;Za.ins().toInPairs(this.curItem.data.role_id,e,10),this.closeWindow()}else Jt.addTip("请选择要邀请的好友！")},i.update=function(){var t;this.list.removeChildren(),this.friendItems=this.friendItems||[];for(var e=0,i=0,s=jn.getOnLineFriendsByRegrow(Ms.getLimitGrowLvl()),n=0;n<s.length;n++)e=Math.floor(n/2),i=n%2,t=(t=this.friendItems[n])||new dE,(this.friendItems[n]=t).pos(10+350*i,115*e+10),this.list.addChild(t),t.dataSource=s[n],t.on("click",this,this.onClickItem),t.isSelected(!1),0==n&&(t.isSelected(!0),this.curItem=t)},I(0,i,"uiClass",function(){return"ExerBiographyIssueFriendListPanel"}),e}(),ZF=function(t){function e(){e.__super.call(this),this.imgTitle.visible=!1,this.txtTitle.visible=!0}w(e,"modules.commonCopy.teamCopy.TeamCopyIssueFriendView",FT);var i=e.prototype;return i.clickHandler=function(){if(this.curItem){var t=Os.getSelCopyVOArr(10801)[Ws.copyStep-1];if(t){var e=pe.roleName+"正准备前往"+t.subTxt+"级难度的经脉副本，邀请你一同前往！"+Z.linkcolor("【点击参与】","teamCopy#"+Ws.teamID,!1);Za.ins().toInPairs(this.curItem.data.role_id,e,10)}else Jt.addTip("找不到副本信息哦");this.closeWindow()}else Jt.addTip("请选择要邀请的好友！")},i.update=function(){var t;this.list.removeChildren(),this.friendItems=this.friendItems||[];for(var e=0,i=0,s=jn.getOnLineFriendsByRegrow(1),n=0;n<s.length;n++)e=Math.floor(n/2),i=n%2,(t=(t=this.friendItems[n])||new dE).pos(10+350*i,115*e+10),this.list.addChild(t),t.dataSource=jn.friends[n],t.on("click",this,this.onClickItem),t.isSelected(!1),0==n&&(t.isSelected(!0),this.curItem=t)},I(0,i,"uiClass",function(){return"ExerBiographyIssueFriendListPanel"}),e}(),JF=function(t){function e(){this.endTime=NaN,e.__super.call(this)}w(e,"modules.family.view.FamilyFightResultPanel",t);var i=e.prototype;return i.createChildren=function(){t.prototype.createChildren.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5",!1,"",!1),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.btnGet.on("click",this,this.onGet),this.initDetailText()},i.onDisplay=function(){Dn.isAutoExitBattle=!0,this.endTime=ya.serverTime+5,_t.addToSecond(this,this.exitTimeLoop)},i.onUnDisplay=function(){_t.removeFromSceond(this,this.exitTimeLoop),el.ins().toExit()},i.onGet=function(){_t.removeFromSceond(this,this.exitTimeLoop),Ol.ins().removeFightResultPanel()},i.initDetailText=function(){this.detailText.style.align="center",this.detailText.width=610,this.detailText.height=430},i.exitTimeLoop=function(){var t=ya.serverTime,e=this.endTime-t;0<e?this.btnGet.label="确定（"+e+"s)":(_t.removeFromSceond(this,this.exitTimeLoop),this.btnGet.label="确定",this.onGet())},i.update=function(t){if(null!=t){var e=Dn.getMemberInfoByFamilyId(t.family_id_1,t.role_id_1),i=Dn.getMemberInfoByFamilyId(t.family_id_2,t.role_id_2),s="";e&&(s=e.role_name);var n="";i&&(n=i.role_name);var o="";t.winner_role_id==t.role_id_1?o=s+"胜利!":t.winner_role_id==t.role_id_2&&(o=n+"胜利!"),this.detailText.innerHTML='<span style="color: rgb(244, 241, 178); font-size: 34px;">'+s+'</span><br/><span style="color: rgb(244, 241, 178); font-size: 34px;">vs</span><br/><span style="color: rgb(244, 241, 178); font-size: 34px;">'+n+'</span><br/><span style="color: rgb(255, 255, 0); font-size: 34px;">'+o+"</span><br/>";var a=t.winner_role_id==t.role_id_1?t.family_id_1:t.family_id_2;t.role_id_1==pe.roleID||t.role_id_2==pe.roleID?this.bcTitle.skin=a==pe.user.attr.family_id?"com/win.png":"com/fail.png":this.bcTitle.skin=a==Dn.witnessFamilyId?"com/win.png":"com/fail.png"}},e.END_DIFF=5,e}(OC),tU=function(t){function e(){this._leftTime=NaN,e.__super.call(this),this.txtMsg.style.align="center",this.on("click",this,this.onClick)}w(e,"modules.fcm.FcmCountDownView",YC);var i=e.prototype;return i.update=function(){this.btn.visible=!G.fcm_info.is_identified,this._leftTime=Vn.leftOnlieTime,this._leftTime?_t.addToSecond(this,this.modifyTxt):this.txtMsg.innerHTML=Z.span("根据相关规定，您的帐号今日已经没有剩余体验时间","#5d3924",26)},i.modifyTxt=function(){this._leftTime?(this._leftTime--,this.txtMsg.innerHTML=Z.span("根据相关规定，您的帐号今日剩余体验时间为","#5d3924",26)+Z.span(x.formatTime(this._leftTime),"#b60202",26)):_t.removeFromSceond(this,this.modifyTxt)},i.onClick=function(t){switch(t.target){case this.btnClose:this.close();break;case this.btn:Dl.ins().openIdentifyView()}},i.close=function(t){_t.removeFromSceond(this,this.modifyTxt),laya.ui.Dialog.prototype.close.call(this)},e}(),eU=function(t){function e(){this._show=!1,e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_7",!0,"",!1),this.pan.vScrollBarSkin="",this.agreeTxt.on("link",this,this.onLink),this.agreeTxt.innerHTML=Z.span("我已经详细阅读并同意")+Z.linkcolor('"用户服务协议"',"user",!1)+Z.span("和")+Z.linkcolor('"隐私协议"',"privace",!1),this.txtContent.style.fontSize=22,this.txtContent.style.leading=6,this.on("click",this,this.onClick)}w(e,"modules.fcm.UserAgreementView",jC);var i=e.prototype;return i.update=function(t){this._show=!1,this.btnAgree.gray=this.btnAgree.disabled=!1,this.agreeBox.gray=this.agreeBox.disabled=!1,this.updateTxt(t),this.agreeBox.mouseEnabled=!0,this.agreeBox.selected=!yt.firstEnter},i.updateTxt=function(t){this.pan.scrollTo(0),this.pan.optimizeScrollRect=!0;var e=t||(G.agreementData?G.agreementData.userContent:"");this.txtContent.innerHTML=e,this.txtContent.height=this.txtContent.contextHeight,this.pan.refresh(),console.log(this.txtContent.height)},i.showView=function(){this._show=!0,this.updateTxt(),this.agreeBox.gray=this.agreeBox.disabled=!0,this.agreeBox.selected=!0,this.btnAgree.label="已同意",this.btnAgree.gray=this.btnAgree.disabled=!0},i.onClick=function(t){switch(t.target){case this.btnClose:this.onBtnClose();break;case this.btnAgree:this.onBtnAgree()}},i.onBtnClose=function(t){var e=this;if(void 0===t&&(t=!1),t||this._show)laya.ui.Dialog.prototype.close.call(this);else{var i=new Ee;i.msg="取消授权将无法继续游戏，请放心，我们保证权限仅用于必要功能",i.yesLabel="同意",i.noLabel="关闭",i.yesCaller=this,i.yesFun=function(){e.agreeBox.selected=!0},i.closeOther=!1,EF.showVO(i)}},i.closeWindow=function(){this.onBtnClose()},i.onBtnAgree=function(){this.agreeBox.selected?(Dl.ins().toAgree(),this.onBtnClose(!0)):Jt.addTip("请先阅读并勾选同意用户服务协议与隐私协议")},i.onLink=function(t){var e=t.split(":")[1];"privace"==e?this.updateTxt(G.agreementData.privateContent):"user"==e&&this.updateTxt(G.agreementData.userContent)},i.close=function(t){this.onBtnClose()},e}(),iU=function(t){function e(){this._datas=null,this.items=null,this.flashEffects=null,this.boxEffects=null,this.loopNum=0,this.index=0,this.flashEffectIndex=0,e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.goodsShow.GoodsGetShowView",xP);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnGet:this.close()}},i.showView=function(t,e){this.txtTitle.text=0==e?"恭喜你通过游梦奇遇获得以下奖励":"恭喜你通过珍兽召唤获得以下奖励",this._datas=t,this.items=this.items||[],this.flashEffects=this.flashEffects||[],this.boxEffects=this.boxEffects||[],this.spGoods.removeChildren(),this.spEffect.removeChildren(),5<=this._datas.length?(this.spGoods.x=this.spEffect.x=50,this.spGoods.y=this.spEffect.y=420):(this.spGoods.x=this.spEffect.x=750-130*this._datas.length>>1,this.spGoods.y=this.spEffect.y=500),this.flashEffectIndex=0,this.index=0,_t.addToFrame(this,this.updateSpGoods),this.popup(!0)},i.updateSpGoods=function(){if(20==this.loopNum){if(this.index<this._datas.length){var t,e,i,s,n,o=Math.floor(this.index/5),a=this.index%5;this.items[this.index]=this.items[this.index]||new Ah(91,90,!1,!0,!0,!1,130),(t=this.items[this.index]).pos(130*a,160*o),t.alpha=0,t.removeSelf(),this.spGoods.addChild(t);var l=0;(s=this._datas[this.index])instanceof modules.pack.vo.BaseItemVO?(t.dataSource=[s.id,s.tempNum],l=s.color,n=s):"p_tkv"==s.className?(n=ur.getRewardByTkv(s),t.dataSource=[n.id,s.val],l=n.color):"p_goods"==s.className?(t.dataSource=[s.typeid,s.current_num],l=(n=ur.getItem(s.typeid)).color):"p_kv"==s.className&&(t.dataSource=[s.id,s.val],l=(n=ur.getItem(s.id)).color),ie.to(t,{alpha:1},200,A.elasticOut,null),this.boxEffects[this.index]=this.boxEffects[this.index]||b.getOne(),(i=this.boxEffects[this.index]).pos(t.x+65,t.y+95),this.spGoods.addChild(i),i.loadAndPlay("moduleEffect/boxEffect"),this.flashEffects[this.flashEffectIndex]=this.flashEffects[this.flashEffectIndex]||b.getOne(),to.checkIsNeedFlash(n.id)&&((e=this.flashEffects[this.flashEffectIndex]).pos(t.x+65,t.y+94),null==e.parent&&this.spEffect.addChild(e),e.loadAndPlay("moduleEffect/goodsItemEff90_"+l,"default",0,!0),this.flashEffectIndex++),this.index++}else _t.removeFromFrame(this,this.updateSpGoods),this.index=0;this.loopNum=0}else this.loopNum++},i.close=function(t){var e;for(var i in laya.ui.Dialog.prototype.close.call(this,t),this.items)(e=this.items[i]).dataSource=null,ie.clearAll(e);_t.removeFromFrame(this,this.updateSpGoods),this.spGoods.x=this.spEffect.x=30,this.spGoods.y=this.spEffect.y=390,this.spGoods.removeChildren(),this.spEffect.removeChildren()},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),sU=function(t){function e(){this._datas=null,this.items=null,this.lightOrDark=!1,this.contentHeight=NaN,e.__super.call(this),this.txt.style.valign="top",this.txt.style.leading=12,this.txt.style.fontSize=24,this.txt.style.color="#5d3924",this.txt.mouseEnabled=!1,this.on("click",this,this.onClick)}w(e,"modules.goodsShow.GoodsShowView",PP);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:case this.btnYes:this.close()}},i.showView=function(t,e){switch(this._datas=t,e){case Jn.GOODS_SHOW_NOTICE_TYPE_PREVIEW:case Jn.GOODS_SHOW_NOTICE_TYPE_SNATCH_GET_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_SOLO_RANKING_REWARD:case Jn.GOODS_SHOW_FRIEND_ACHIEVEMENT_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_STARRY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_MAIL:case Jn.GOODS_SHOW_NOTICE_TYPE_QUICK_FINISH:case Jn.GOODS_SHOW_NOTICE_TYPE_CD_KEY_REWARD:case Jn.GOODS_SHOW_BIND_PHONE_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_FRIEND_LETTER:case Jn.GOODS_SHOW_NOTICE_TYPE_JINLI_DFS:case Jn.GOODS_SHOW_NOTICE_TYPE_YUNYOU:this.lightOrDark=!0;break;case Jn.GOODS_SHOW_NOTICE_TYPE_ACTIVITY_REWARD:case Jn.GOODS_SHOW_INVEST_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_VIP_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_NOBLE_REWARD:this.lightOrDark=!1}this.updateTitle(e),this.updateBg(e),this.updateTxt(e),this.contentHeight=this.txt.contextHeight,5<this._datas.length?(this.list.y=this.txt.y+this.contentHeight+17,this.updateList()):(this.spGoods.y=this.txt.y+this.contentHeight+17,this.updateSpGoods()),this.txt.contextWidth<this.txt.width&&(this.txt.x=45+(630-this.txt.contextWidth)/2),this.popup(!0)},i.updateTxt=function(t){switch(t){case Jn.GOODS_SHOW_BIND_PHONE_REWARD:this.txt.innerHTML="恭喜您成功关联手机，使自己的账号更加安全，以下为关联手机的"+Z.font("额外奖励","#bd5713")+"(已发放到背包)";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT1:this.txt.innerHTML="每天都可以来玩吧领取《"+yt.gameName+"》专属礼包哟！";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT2:this.txt.innerHTML="仙友可来玩吧点击“更多”获取新手礼包哟！<br/> 注：每个账号仅能领取1次。";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT3:this.txt.innerHTML="仙友可来玩吧点击“更多”获取节日专属礼包哟！";break;default:this.txt.innerHTML=""}},i.updateBg=function(t){switch(t){case Jn.GOODS_SHOW_NOTICE_TYPE_PREVIEW:case Jn.GOODS_SHOW_NOTICE_TYPE_STARRY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_SNATCH_GET_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_SOLO_RANKING_REWARD:case Jn.GOODS_SHOW_FRIEND_ACHIEVEMENT_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_MAIL:case Jn.GOODS_SHOW_NOTICE_TYPE_QUICK_FINISH:case Jn.GOODS_SHOW_NOTICE_TYPE_CD_KEY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_FRIEND_LETTER:this.bg.skin="com/ui/panelBg2.png";break;case Jn.GOODS_SHOW_NOTICE_TYPE_ACTIVITY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_NOBLE_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_VIP_REWARD:this.bg.skin="com/panelBg5.png"}},i.updateTitle=function(t){switch(t){case Jn.GOODS_SHOW_NOTICE_TYPE_YUNYOU:this.title.skin="modules/panelTitle/goodsShowBuy.png";break;case Jn.GOODS_SHOW_NOTICE_TYPE_PREVIEW:case Jn.GOODS_SHOW_NOTICE_TYPE_MAIL:case Jn.GOODS_SHOW_NOTICE_TYPE_QUICK_FINISH:case Jn.GOODS_SHOW_NOTICE_TYPE_STARRY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_NOBLE_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_VIP_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_SNATCH_GET_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_ACTIVITY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_CD_KEY_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_SOLO_RANKING_REWARD:case Jn.GOODS_SHOW_FRIEND_ACHIEVEMENT_REWARD:case Jn.GOODS_SHOW_INVEST_REWARD:case Jn.GOODS_SHOW_NOTICE_TYPE_FRIEND_LETTER:this.title.skin="modules/panelTitle/goodsShowGetSuccess.png";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT1:this.title.skin="modules/panelTitle/titleGift1.png";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT2:this.title.skin="modules/panelTitle/titleGift2.png";break;case Jn.GOODS_SHOW_NOTICE_TYPE_GIFT3:this.title.skin="modules/panelTitle/titleGift3.png";break;case Jn.GOODS_SHOW_BIND_PHONE_REWARD:this.title.skin="modules/panelTitle/titleBind.png"}},i.updateList=function(){var t;this.list.removeChildren(),this.height=550+this.contentHeight,this.btnYes.y=440+this.contentHeight,this.spGoods.visible=!1,this.list.visible=!0,10<this._datas.length?this.list.vScrollBarSkin="com/ui/vscroll.png":this.list.vScrollBarSkin="",this.items=this.items||[];for(var e,i,s=0,n=0;n<this._datas.length;n++)this.items[n]=this.items[n]||new Ah(91,90,!1,!0,!0,this.lightOrDark,120),t=this.items[n],s=Math.floor(n/5),t.pos(n%5*120,135*s+5),t.removeSelf(),this.list.addChild(t),(e=this._datas[n])instanceof modules.pack.vo.BaseItemVO?t.dataSource=[e.id,e.tempNum]:"p_tkv"==e.className?(i=ur.getRewardByTkv(e),t.dataSource=[i.id,e.val]):"p_goods"==e.className?t.dataSource=[e.typeid,e.current_num]:"p_kv"==e.className&&(t.dataSource=[e.id,e.val])},i.updateSpGoods=function(){var t,e,i;this.height=375+this.contentHeight,this.btnYes.y=270+this.contentHeight,this.spGoods.visible=!0,this.list.visible=!1,this.items=this.items||[],this.spGoods.removeChildren();for(var s=0;s<this._datas.length;s++)this.items[s]=this.items[s]||new Ah(91,90,!1,!0,!0,this.lightOrDark,120),(t=this.items[s]).x=120*s,t.removeSelf(),this.spGoods.addChild(t),(e=this._datas[s])instanceof modules.pack.vo.BaseItemVO?t.dataSource=[e.id,e.tempNum]:"p_tkv"==e.className?(i=ur.getRewardByTkv(e),t.dataSource=[i.id,e.val]):"p_goods"==e.className?t.dataSource=[e.typeid,e.current_num]:"p_kv"==e.className&&(t.dataSource=[e.id,e.val]);this.spGoods.x=(720-120*this._datas.length)/2},i.close=function(t){laya.ui.Dialog.prototype.close.call(this,t),10<this.items.length&&(this.items.length=10,this.list.removeChildren(),this.spGoods.removeChildren())},e.ins=function(){return e.instance=e.instance||new e},e.instance=null,e}(),nU=function(t){function e(){e.__super.call(this)}return w(e,"modules.pet.embattle.PetEmbattleSubItem",bC),I(0,e.prototype,"uiClass",function(){return"PetEmbattleItem"}),e}(),oU=function(t){function e(){e.__super.call(this),this.setWindowType("OPEN_COMMON","MASK_ALPHA_5"),this.on("click",this,this.onClick),(Bt.isTXSPQQIOS()||Bt.isTXSPWXIOS())&&(this.bg.skin="modules/tecentVideo/txshipinbg2.png",this.imgClose.y=900)}w(e,"modules.icon.view.TecentVideoGuidePanel",XP);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.imgClose:this.close();break;case this.bg:Bt.isTXSPQQIOS()||Bt.isTXSPWXIOS()?Bt.openUrl("https://iwan.qq.com/m/vadr/h5games.htm?ADTAG=txsp.xyx.yxdl"):Bt.openUrl("https://iwan.qq.com/fun/mindex?ADTAG=txsp.wd.xyx&hidetitlebar=1&autoplay=1")}},i.onResize=function(){0==pe.isVertical?(this.bg.left=NaN,this.bg.right=NaN,this.bg.width=750,this.bg.centerX=0):(this.bg.width=NaN,this.bg.centerX=NaN,this.bg.left=0,this.bg.right=0)},I(1,e,"ins",function(){return e._instance=e._instance||new e},ui.modules.icon.TecentVideoGuidePanelUI._$SET_ins),e._instance=null,e}(),aU=function(t){function e(){e.__super.call(this)}w(e,"modules.exercise.beasts.view.BeastsAloneHeadItem",qA);var i=e.prototype;return i.checkRP=function(t){if(this.imgRP.visible=!1,t){var e=on.checkOneActive(t.animalID),i=on.checkOneStep(t.animalID);this.imgRP.visible=e||i}},I(0,i,"uiClass",function(){return"ExerBeastsHeadItem"}),e}(),lU=function(t){function e(){e.__super.call(this)}w(e,"modules.exercise.beasts.view.BeastsTeamHeadItem",qA);var i=e.prototype;return i.checkRP=function(t){if(this.imgRP.visible=!1,t){var e=on.checkOneActive(t.animalID),i=on.checkOneStar(t.animalID),s=on.checkOneStep(t.animalID);this.imgRP.visible=e||i||s}},I(0,i,"uiClass",function(){return"ExerBeastsHeadItem"}),e}(),rU=(function(t){function r(){r.__super.call(this),this.txtMsg.style.valign="top",this.txtMsg.style.color="#5d3924",this.txtMsg.style.fontSize=24,this.txtMsg.style.letterSpacing=2,this.txtMsg.style.leading=20}w(r,"modules.mainInfo.view.CopyNameAlert",zP);var e=r.prototype;e.onClickWX=function(t){switch(t.target){case this.btnYes:k.copyToClipboard("角色名："+pe.roleName+"    openID："+pe.user.attr.account_name),this.close();break;case this.btnCopyName:k.copyToClipboard("角色名："+pe.roleName),this.close();break;case this.btnNo:var e=se.getCachNameInfos();k.copyToClipboard(e),this.close();break;case this.btnClose:this.close()}},e.close=function(t){laya.ui.Dialog.prototype.close.call(this,t),!yt.isWX&&!yt.isQQ&&r.button&&r.button.parentElement&&(S.container.removeChild(r.button),S.container.removeChild(r.button1),S.container.removeChild(r.buttonCache))},e.showRoleInfoCopy=function(){if(yt.isWX||yt.isQQ)var t=pe.user.attr.account_name;else this.__init__(),t=Bt.isYLC_SDK()||Bt.isJingDong()?"":"openID："+pe.user.attr.account_name,S.container.appendChild(r.button),S.container.appendChild(r.button1),S.container.appendChild(r.buttonCache),this.resetPos();this.txtMsg.innerHTML="角色名："+pe.roleName+"<br>"+t+"<br>版本号："+pe.fullVersion,modules.mainInfo.view.CopyNameAlert._ins.popup()},e.__init__=function(){null==r.button&&this._createInputElement()},e._createInputElement=function(){r.button=S.document.createElement("button"),r.button1=S.document.createElement("button"),r.buttonCache=S.document.createElement("button");var t={position:"absolute"};for(var e in t)r.button1.style[e]=t[e],r.button.style[e]=t[e],r.buttonCache.style[e]=t[e];r.button.style.opacity=0,r.button.onmouseover=this.mouseOver,r.button.onmouseout=this.mouseOut,r.button.onmousedown=this.mouseDown,r.button.onmouseup=this.mouseUp,r.button1.style.opacity=0,r.button1.onmouseover=this.mouseOver1,r.button1.onmouseout=this.mouseOut1,r.button1.onmousedown=this.mouseDown1,r.button1.onmouseup=this.mouseUp1,r.buttonCache.style.opacity=0,r.buttonCache.onmouseover=this.mouseOverCache,r.buttonCache.onmouseout=this.mouseOutCache,r.buttonCache.onmousedown=this.mouseDownCache,r.buttonCache.onmouseup=this.mouseUpCache,r._ins.on("click",this,this.onClick),h.stage.on("resize",null,this.resetPos)},e.onClick=function(t){switch(t.target){case this.btnYes:case this.btnCopyName:case this.btnNo:case this.btnClose:this.close()}},e.mouseOver=function(){modules.mainInfo.view.CopyNameAlert._ins.btnYes.state=1},e.mouseDown=function(){modules.mainInfo.view.CopyNameAlert._ins.btnYes.state=2},e.mouseUp=function(){modules.mainInfo.view.CopyNameAlert._ins.btnYes.state=0,k.copyToClipboard("角色名："+pe.roleName+"    openID："+pe.user.attr.account_name),S.container.removeChild(r.button),S.container.removeChild(r.button1),S.container.removeChild(r.buttonCache),modules.mainInfo.view.CopyNameAlert._ins.close(),modules.mainInfo.view.CopyNameAlert._ins.btnYes.state=0},e.mouseOut=function(){modules.mainInfo.view.CopyNameAlert._ins.btnYes.state=0},e.mouseUp1=function(){modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.state=0,k.copyToClipboard("角色名："+pe.roleName),S.container.removeChild(r.button),S.container.removeChild(r.button1),S.container.removeChild(r.buttonCache),modules.mainInfo.view.CopyNameAlert._ins.close(),modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.state=0},e.mouseOut1=function(){modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.state=0},e.mouseOver1=function(){modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.state=1},e.mouseDown1=function(){modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.state=2},e.mouseUpCache=function(){modules.mainInfo.view.CopyNameAlert._ins.btnNo.state=0;var t=se.getCachNameInfos();k.copyToClipboard(t),S.container.removeChild(r.button),S.container.removeChild(r.button1),S.container.removeChild(r.buttonCache),modules.mainInfo.view.CopyNameAlert._ins.close(),modules.mainInfo.view.CopyNameAlert._ins.btnNo.state=0},e.mouseOutCache=function(){modules.mainInfo.view.CopyNameAlert._ins.btnNo.state=0},e.mouseOverCache=function(){modules.mainInfo.view.CopyNameAlert._ins.btnNo.state=1},e.mouseDownCache=function(){modules.mainInfo.view.CopyNameAlert._ins.btnNo.state=2},e.resetPos=function(){if(r.button&&r.button.parentElement){for(var t=Vt._mainCanvas.source.style.top,e=0,i=0;i<t.length;i++)if("p"==t[i]){e=parseInt(t.substring(0,i));break}var s=modules.mainInfo.view.CopyNameAlert._ins.btnYes.width*lt.uiScale/S.pixelRatio,n=modules.mainInfo.view.CopyNameAlert._ins.btnYes.height*lt.uiScale/S.pixelRatio,o=((lt.stageWidth-modules.mainInfo.view.CopyNameAlert._ins.width)/2+modules.mainInfo.view.CopyNameAlert._ins.btnYes.right)*lt.uiScale/S.pixelRatio,a=((lt.stageHeight-modules.mainInfo.view.CopyNameAlert._ins.height)/2+modules.mainInfo.view.CopyNameAlert._ins.btnYes.y)*lt.uiScale/S.pixelRatio;r.button.style.top=e+a+"px",r.button.style.right=o+"px",r.button.style.width=s+"px",r.button.style.height=n+"px",s=modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.width*lt.uiScale/S.pixelRatio,n=modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.height*lt.uiScale/S.pixelRatio,o=((lt.stageWidth-modules.mainInfo.view.CopyNameAlert._ins.width)/2+modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.right)*lt.uiScale/S.pixelRatio,a=((lt.stageHeight-modules.mainInfo.view.CopyNameAlert._ins.height)/2+modules.mainInfo.view.CopyNameAlert._ins.btnCopyName.y)*lt.uiScale/S.pixelRatio,r.button1.style.top=e+a+"px",r.button1.style.right=o+"px",r.button1.style.width=s+"px",r.button1.style.height=n+"px",s=modules.mainInfo.view.CopyNameAlert._ins.btnNo.width*lt.uiScale/S.pixelRatio,n=modules.mainInfo.view.CopyNameAlert._ins.btnNo.height*lt.uiScale/S.pixelRatio;var l=((lt.stageWidth-modules.mainInfo.view.CopyNameAlert._ins.width)/2+modules.mainInfo.view.CopyNameAlert._ins.btnNo.left)*lt.uiScale/S.pixelRatio;a=((lt.stageHeight-modules.mainInfo.view.CopyNameAlert._ins.height)/2+modules.mainInfo.view.CopyNameAlert._ins.btnNo.y)*lt.uiScale/S.pixelRatio,r.buttonCache.style.top=e+a+"px",r.buttonCache.style.left=l+"px",r.buttonCache.style.width=s+"px",r.buttonCache.style.height=n+"px"}},I(1,r,"Ins",function(){return r._ins||(r._ins=new r,(yt.isWX||yt.isQQ)&&r._ins.on("click",r._ins,r._ins.onClickWX)),r._ins},ui.modules.MainInfo.CopyNameAlertUI._$SET_Ins),r._ins=null,r.button=null,r.button1=null,r.buttonCache=null}(),function(t){function e(){this.stepInfoData=null,this.orderStep=null,this.curStep=null,this.minLv=0,this.petalStepDatas=po.getFlowerPetalStepInfo(),e.__super.call(this),this.init(),this.on("display",this,this.update),this.closeBtn.on("click",this,this.close)}w(e,"modules.marry.flowerFaerie.views.FlowerFaerieTip",ZP);var i=e.prototype;return i.init=function(){this.imgFullLv.visible=!1,this.imgLine.visible=!1,this.imgStep.visible=!1,this.txtDesc2.visible=!1,this.txtAttr2.visible=!1,this.imgBottom2.visible=!1,this.stepInfoData=po.getFlowerPetalStepInfo()},i.update=function(){this.minLv=this.getMinLv(),100<=this.minLv?(this.height=360,this.imgFullLv.visible=!0,this.updateFullTip()):(this.updateTip(),this.updateDesc(),this.updatePower())},i.updateFullTip=function(){this.imgLine.visible=!1,this.imgStep.visible=!1,this.txtDesc2.visible=!1,this.txtAttr2.visible=!1,this.imgBottom2.visible=!1;var t="";this.orderStep=this.petalStepDatas[this.petalStepDatas.length-1];var e=po.getPetalStepAttrs(this.orderStep);this.txtDesc1.text="仙侣花仙子等级均达到"+this.orderStep.lv+"级（"+this.orderStep.lv+"/"+this.orderStep.lv+")";for(var i=0;i<e.length;i++)t+=e[i][0]+": +"+e[i][1]+"\n";this.txtAttr1.text=t;var s=k.numToTexture(this.orderStep.power,"com/ui/powerNum");this.imgNum1.graphics.clear();for(var n=0;n<s.length;n++){var o=s[n];this.imgNum1.graphics.drawTexture(o,o.width*n)}},i.updateTip=function(){if(po.curPetalLv&&po.couplePetalLv){if(this.isHasStep()){this.height=640,this.imgLine.visible=!0,this.imgStep.visible=!0,this.imgBottom2.visible=!0,this.txtDesc2.visible=!0,this.txtAttr2.visible=!0,this.curStep=this.getCurStep();var t=po.getPetalStepAttrs(this.curStep),e="";this.txtDesc2.text="仙侣花仙子等级均达到"+this.curStep.lv+"级（"+this.curStep.lv+"/"+this.curStep.lv+")";for(var i=0;i<t.length;i++)e+=t[i][0]+": +"+t[i][1]+"\n";this.txtAttr2.text=e}}else this.height=360},i.updateDesc=function(){if(200!=this.minLv){var t="";po.curPetalLv&&po.couplePetalLv?this.orderStep=this.getOrderStep():this.orderStep=this.petalStepDatas[0];var e=po.getPetalStepAttrs(this.orderStep);this.txtDesc1.text="仙侣花仙子等级均达到"+this.orderStep.lv+"级（"+this.minLv+"/"+this.orderStep.lv+")";for(var i=0;i<e.length;i++)t+=e[i][0]+": +"+e[i][1]+"\n";this.txtAttr1.text=t}else{this.orderStep=this.petalStepDatas[this.petalStepDatas.length-1];var s=po.getPetalStepAttrs(this.orderStep);this.txtDesc1.text="仙侣花仙子等级均达到"+this.orderStep.lv+"级（"+this.minLv+"/"+this.orderStep.lv+")";for(var n=0;n<s.length;n++)t+=s[n][0]+": +"+s[n][1]+"\n";this.txtAttr1.text=t}},i.isHasStep=function(){return!!(po.curPetalLv&&po.couplePetalLv&&10<po.curPetalLv&&10<po.couplePetalLv)},i.getOrderStep=function(){var t;if(po.curPetalLv&&po.couplePetalLv)for(var e in this.petalStepDatas)if((t=this.petalStepDatas[e]).lv>this.minLv)return t;return null},i.getCurStep=function(){if(po.curPetalLv&&po.couplePetalLv)for(var t=this.petalStepDatas.length-1;0<=t;t--){var e=this.petalStepDatas[t];if(e.lv<=this.minLv)return e}return null},i.getMinLv=function(){return po.curPetalLv&&po.couplePetalLv?Math.min(po.curPetalLv,po.couplePetalLv):0},i.updatePower=function(){var t=1;if(pe.pals&&(t=pe.pals.length),this.isHasStep()){var e=k.numToTexture(this.curStep.power*t,"com/ui/powerNum");this.imgNum2.graphics.clear();for(var i=0;i<e.length;i++){var s=e[i];this.imgNum2.graphics.drawTexture(s,s.width*i)}}var n=k.numToTexture(this.orderStep.power*t,"com/ui/powerNum");this.imgNum1.graphics.clear();for(var o=0;o<n.length;o++){var a=n[o];this.imgNum1.graphics.drawTexture(a,a.width*o)}},e}()),hU=function(t){function e(){this._partPos=0,this._equipEffect=null,e.__super.call(this),this.imgBg.skin="modules/fightSoul/soulItemBg.png"}w(e,"modules.exercise.fightSoul.view.item.FightSoulSpiritShowItem",t);var i=e.prototype;return i.onClick=function(t){this._addHandler&&this._addHandler.runWith(this._partPos)},i.setTypeId=function(t){if(0<t){var e=mn.getPureSpiritVO(t);this._itemEffect||(this._itemEffect=b.getOne(),this.addChildAt(this._itemEffect,this.getChildIndex(this.txtName)),this._itemEffect.mouseEnabled=!1),this.changeEff(e.eff),this.txtName.color=U.getColorDark(e.color),this.txtName.text=e.name,this.btnAdd.visible=!1,this.txtPart.text=""}else this.btnAdd.visible=null!=this._addHandler,this.txtName.text="",this._itemEffect&&(this._itemEffect.visible=!1),this.txtPart.text="",this.txtLevel.text=""},i.showPosName=function(t){this.txtPart.text=t},i.setEffectItemPos=function(){t.prototype.setEffectItemPos.call(this)},i.isEquip=function(){return this._itemEffect&&this._itemEffect.visible},i.showEquipEffect=function(){this._equipEffect||(this._equipEffect=b.getOne(),this._equipEffect.mouseEnabled=!1,this.addChild(this._equipEffect),this._equipEffect.mouseEnabled=!1),this._equipEffect&&(this._equipEffect.loadAndPlay("moduleEffect/changeover","default",0),this._equipEffect.pos(60,55))},I(0,i,"level",null,function(t){this.txtLevel.text="lv."+t}),I(0,i,"data",null,function(t){var e=t?t.id:-1;this.setTypeId(e)}),I(0,i,"uiClass",function(){return"FightSoulShowItem"}),I(0,i,"dataSource",t.prototype._$get_dataSource,function(t){if(!t)return this.goodsData=null,void(this.data=null);h.superSet(KE,this,"dataSource",t),"p_goods"==t.className?this.goodsData=t:"p_kv"==t.className?this.data=t:this.data=null}),I(0,i,"goodsData",null,function(t){var e=(this._curGoods=t)?t.typeid:-1;this.setTypeId(e)}),I(0,i,"partPos",function(){return this._partPos},function(t){this._partPos=t}),e}(KE),uU=function(t){function e(){this.speed=.01,this._data=null,e.__super.call(this),this.on("display",this,this.onDisplay),this.on("click",this,this.onClick),this.txtUp.style.valign="top",this.txtUp.style.letterSpacing=2,this.txtUp.style.leading=6,this.txtUp.style.fontSize=24,this.txtUp.style.color="#e1c6bc"}w(e,"modules.pet.embattle.PetFightSkillTip",UT);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnSel:T.dispatch("SELECT_TOWERSKILL",this._data),this.close()}},i.onDisplay=function(){this.on("undisplay",this,this.unDisplay),_t.addToFrame(this,this.showEff)},i.showEff=function(){if(this._data){var t;for(var e in this._data.getFightPos())this["img"+(t=this._data.getFightPos()[e])].alpha-=this.speed;this["img"+t].alpha<=.7&&(this["img"+t].alpha=.7,this.speed=-.01),1<=this["img"+t].alpha&&(this.speed=.01)}},i.unDisplay=function(){this.off("undisplay",this,this.unDisplay),_t.removeFromFrame(this,this.showEff)},I(0,i,"data",null,function(t){if(this._data=t,this._data){this.txtName.text=this._data.name,this.imgSkill.skin="modules/petEmbattle/img/skill"+this._data.id+".png",this.txtUp.innerHTML=this._data.desc,this.spDown.y=this.txtUp.contextHeight+this.txtUp.y+8;for(var e=1;e<=6;e++)this["img"+e].alpha=0;for(var i in this._data.getFightPos())this["img"+this._data.getFightPos()[i]].alpha=.7;this.txtType.text=1==this._data.type?"普通技":"怒气技",this.height=this.spDown.y+454}else _t.removeFromFrame(this,this.showEff)}),e}(),cU=function(t){function e(){this._data=null,this._notArr=null,this._callBackHandler=null,e.__super.call(this),this.txtTip.style.align="left",this.txtTip.style.fontSize=26,this.txtTip.style.color="#5d3924",this.txtTip.innerHTML="为了防止误操作，请输入“"+Z.font("YES","#b60202",26)+"”进行确认",this.on("click",this,this.onClick),this.txtInput.on("focus",this,this.onFocus),this.txtInput.maxChars=10,this.on("display",this,this.onDisplay)}w(e,"modules.pet.PetDiscardAlertView",XT);var i=e.prototype;return i.onDisplay=function(){this.txtInput.text="点击此处输入文字"},i.onFocus=function(t){"点击此处输入文字"==this.txtInput.text&&(this.txtInput.text="")},i.onClick=function(t){switch(t.target){case this.btnYes:"YES"==this.txtInput.text||"YES"==this.txtInput.text.toUpperCase()?(mr.ins().toPetDiscard(this._data.pet_id,this._callBackHandler),this.close()):Jt.addTip("错误的验证码，放生失败");break;case this.btnClose:case this.btnNo:this.close()}},i.update=function(t,e){if(this._data=t,this._callBackHandler=e,this._data){var i=Math.floor(this._data.type_id%1e5/1e4);for(var s in this.txtName.text=this._data.pet_name,this.txtName.color=U.getColorLight(i),this._notArr=[],5<i&&this._notArr.push("·仙宠为五星仙宠"),this._data.skill_info&&this._data.skill_info.pet_skills&&2<=this._data.skill_info.pet_skills.length&&this._notArr.push("·仙宠当前技能数为："+this._data.skill_info.pet_skills.length+"个"),this._data.soul_info.pet_souls)if(5<=this._data.soul_info.pet_souls[s].soul_level){this._notArr.push("·仙宠装备5级以上的兽魂");break}for(var n=0;n<3;n++)n<this._notArr.length?this["txtHas"+n].text=this._notArr[n]:this["txtHas"+n].text="";this.txtTip.y=148+38*this._notArr.length,this.txtInput.y=this.txtTip.y+38,this.imgB.height=this.txtInput.y-13,this.btnYes.y=this.btnNo.y=this.imgB.y+this.imgB.height+26,this.height=this.btnYes.y+106}},e}(),dU=function(t){function e(){this._vo=null,e.__super.call(this),this.txtDesc.style.valign="top",this.txtDesc.style.letterSpacing=2,this.txtDesc.style.leading=12}return w(e,"modules.pet.view.PetFuseSkillTip",uk),I(0,e.prototype,"data",null,function(t){if(this._vo=t,this._vo){this.imgGoods.skin="modules/pet/skill/"+this._vo.type_id+".png",this.txtLevel1.text=this._vo.skill_level+"级";var e=Eo.getPetSkillVO(this._vo.type_id);this.txtName.text=e.name,this.imgBg.skin="com/ui/goodsBg"+e.color+".png",this.txtName.color=U.getColorDark(e.color),this.txtDesc.innerHTML=e.getDescByLv(this._vo.skill_level,"#ffffff","#ffffff")}else this.imgBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin=null,this.txtLevel1.text="",this.txtDesc.innerHTML="";this.height=this.txtDesc.y+this.txtDesc.contextHeight+45}),e}(),pU=function(t){function i(){var t;this.conGetff=null,this.bottomEff=null,this.starArr=null,this._data=null,this.clip=null,this.cruSkillID=0,i.__super.call(this),this.on("display",this,this.onDisplay),this.conGetff=b.getOne(),this.conGetff.pos(371,240),this.spBox.addChild(this.conGetff),this.bottomEff=b.getOne(),this.bottomEff.pos(377,504),this.conGetff.setEndHandler(Q.create(this,this.endFun)),this.spBox.addChild(this.bottomEff),this.clip=b.getOne(),this.clip.pos(376,476),this.spBox.addChild(this.clip),this.txtLink.underline=!0,this.on("click",this,this.onClick),this.txtDesc.style.valign="top",this.txtDesc.style.letterSpacing=2,this.txtDesc.style.leading=10,this.starArr=[];for(var e=0;e<5;e++)(t=new et).pos(38*e,0),this.spStar.addChild(t),this.starArr.push(t);this.panel.vScrollBar.autoHide=!0}w(i,"modules.pet.view.PetGetView",pk);var e=i.prototype;return e.onClick=function(t){switch(t.target){case this.btnLeft:this.box.selected?mr.ins().disCardPet(this._data,Q.create(mr.ins(),mr.ins().callNextPet,null,!0)):(mr.ins().disCardPet(this._data),this.close());break;case this.btnRight:this.box.selected&&mr.ins().callNextPet(),this.close(),0==this.btnLeft.visible&&yt.isQQ&&mr.ins().bannerConfirm();break;case this.txtLink:this.close(),T.dispatch("PET_OPEN_PANEL")}},e.endFun=function(){var t=Mt.getEndFrame(this.conGetff.url,"default"),e=Mt.getResource(this.conGetff.url).getFrame("default_d0_"+t);e&&(this.conGetff.graphics=e.graphics)},e.onDisplay=function(){this.bottomEff.loadAndPlay("moduleEffect/bottom","default",0,!0),this.conGetff.loadAndPlay("moduleEffect/conGet","default",0,!1),T.register("ITEM_USE_BACK",this,this.updateCallNum),this.on("undisplay",this,this.unDisplay),this.box.selected=!0},e.updateCallNum=function(t){this.chTxt.innerHTML=Z.font("自动召唤背包仙宠","#ffffff")+Z.font("（"+xo.getGoodsNumByUseType(9)+"）","#96f254")},e.unDisplay=function(){this.bottomEff.stop(),this.conGetff.stop(),this.off("undisplay",this,this.unDisplay)},e.updatePet=function(t){this.clip.loadAndPlay("unit/monster/"+this._data.skin_id+"_3","stand",3,!0),this.clip.scale(1.5,1.5)},e.update=function(t,e){if(void 0===e&&(e=!1),this._data=t,this._data){this.updatePet(this._data.skin_id);var i=t.aptitude%1e5,s=Math.floor(t.type_id%1e5/1e4);this.txtZZ.innerHTML=Z.font(i+"（"+Eo.getPetZZ(i)+"）",Eo.getPetZZCol(i)),this.txtName.text=this._data.pet_name;for(var n=0;n<5;n++)this.starArr[n].skin=n<s-1?"com/ui/star_3.png":"";if(this.spStar.x=(750-38*(s-1)+3)/2,this.txtBase.text=this._data.property+"（满"+Ao.proArrs[s-1]+"）",this.txtInit.text=this._data.init_property+"",this.txtInit.color=this.txtName.color=this.txtBase.color=U.getColorDark(s),t.skill_info&&0<t.skill_info.pet_skills.length){var o=t.skill_info.pet_skills[0];this.cruSkillID=o.type_id;var a=Eo.getPetSkillVO(o.type_id);this.txtDesc.innerHTML=a.getDescByLv(o.skill_level,"#ffffff","#96f254"),this.txtDesc.height=this.txtDesc.contextHeight,this.panel.refresh(),this.imgSkillBg.skin="com/ui/goodsBg"+a.color+".png",this.imgSkill.skin="modules/pet/skill/"+o.type_id+".png",this.notHasSkill.visible=!1,this.hasSkill.visible=!0,Eo.bagSkill?this.txtHas.text="已拥有"+(Eo.getHasGetSkillNum(o.type_id)-1)+"个该技能":mr.ins().toPetSkillBag()}else this.cruSkillID=0,this.txtSkill.innerHTML=Z.font("资质≥1000可拥有技能","#ffffff"),this.notHasSkill.visible=!0,this.hasSkill.visible=!1;e?(this.btnLeft.visible=this.spCheck.visible=!1,this.btnRight.x=275):(this.btnLeft.visible=this.spCheck.visible=!0,this.btnRight.x=420)}},e.updateSkillHasNum=function(){0<this.cruSkillID&&(this.txtHas.text="已拥有"+(Eo.getHasGetSkillNum(this.cruSkillID)-1)+"个该技能")},i}(),mU=function(t){function e(){this._vo=null,e.__super.call(this),this.txtDesc.leading=12}return w(e,"modules.pet.view.PetHuntGirlTip",fk),I(0,e.prototype,"data",null,function(t){this._vo=t,this._vo?(this.imgGoods.skin="modules/pet/huntsoul_girl"+this._vo.id+".png",this.txtNeed.text=this._vo.need+"灵气",this.txtName.text=this._vo.name,this.imgBg.skin="com/ui/goodsBg"+this._vo.id+".png",this.txtName.color=U.getColorDark(this._vo.id),this.txtDesc.text=this._vo.desc):(this.imgBg.skin="com/ui/goodsBg1.png",this.imgGoods.skin=null,this.txtNeed.text="",this.txtDesc.text=""),this.height=this.txtDesc.y+this.txtDesc.textHeight+45}),e}(),fU=function(t){function e(){this._curUrl=null,this.splitEff=null,this.baseInfo=null,this._vo=null,e.__super.call(this),this.splitEff=b.getOne(),this.splitEff.pos(87,145),this.addChild(this.splitEff),this.on("undisplay",this,this.onUndisplay)}w(e,"modules.pet.view.PetSoulTip",bk);var i=e.prototype;return i.onUndisplay=function(){this._curUrl=""},i.changeEff=function(t){this._curUrl!=t&&(this._curUrl=t,this.splitEff.loadAndPlay("moduleEffect/"+t,"default",0,!0),this.splitEff.visible=!0)},I(0,i,"data",null,function(t){if(this._vo=t,this.baseInfo=Eo.getPetSoulVO(t.type_id),this.height=340,this.spPow.graphics.clear(),this.baseInfo){this.txtName.color=U.COLORS_DARK[this.baseInfo.color],this.imgBg.skin="com/ui/goodsBg"+this.baseInfo.color+".png";var e=1;if(0<this.baseInfo.pos){this.txtName.text="兽魂·"+Ao.PETSOUL_NAME[this.baseInfo.pos-1],e=this._vo.soul_level;var i;i=this.baseInfo.getPowerByLv(this._vo.soul_level);for(var s,n=k.numToTexture(Math.floor(i)),o=0;o<n.length;o++)s=n[o],this.spPow.graphics.drawTexture(s,s.width*o);this.imgPow.visible=this.txtT.visible=this.attrTxt.visible=!0,this.txtDesc.visible=!1,this.attrTxt.text=this.baseInfo.getAttrByLv(this._vo.soul_level),this.imgLine.y=236,this.height=300+this.attrTxt.textHeight}else 1<this.baseInfo.color?(this.txtName.text="兽魂碎片",this.txtDesc.text="可用于兑换红色兽魂。"):(this.txtName.text="破碎之魂",this.txtDesc.text="破碎之魂不可装备，将被自动出售，可获得5400灵气。"),this.imgPow.visible=this.txtT.visible=this.attrTxt.visible=!1,this.txtDesc.visible=!0,this.imgLine.y=172,this.height=226+this.txtDesc.textHeight;this.txtLevel.text=e+"级",this.changeEff(this.baseInfo.eff)}else this._curUrl=""}),e}(),_U=function(t){function e(){e.__super.call(this),this.btnClose.on("click",this,this.onClick)}return w(e,"modules.pfSdk.view.PfAttentionPanel",Ck),e.prototype.onClick=function(t){this.close()},e}(),gU=function(t){function e(){this.items=null,this.pool=null,e.__super.call(this),this.items=[],this.on("click",this,this.onClick)}w(e,"modules.pfSdk.view.PfDaliyGiftPanel",Tk);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.close()}},i.update=function(t,e,i){var s;void 0===i&&(i=0),this.rePool();var n=ka.getWanbaErrUrl(i);switch(""!=n||t||this.close(),e){case 3:s=Do.getPfRewards(3),this.imgTitle.skin="modules/pfDaliyGift/titleDaliy.png",t?this.imgSuccInfo.skin=""!=n?n:"modules/pfDaliyGift/txtRemember.png":this.imgAlreadyInfo.skin=""!=n?n:"modules/pfDaliyGift/txtHas.png";break;case 5:s=Do.getPfRewards(5),this.imgTitle.skin="modules/pfDaliyGift/titleScore.png",t?this.imgSuccInfo.skin=""!=n?n:"modules/pfDaliyGift/txtRemember5.png":this.imgAlreadyInfo.skin=""!=n?n:"modules/pfDaliyGift/txtHas5.png";break;case 6:s=Do.getPfRewards(6),this.imgTitle.skin="modules/pfDaliyGift/titleVIP.png",t?this.imgSuccInfo.skin=""!=n?n:"modules/pfDaliyGift/txtRemember5.png":this.imgAlreadyInfo.skin=""!=n?n:"modules/pfDaliyGift/txtHas5.png";break;case 11:this.imgTitle.skin="modules/pfDaliyGift/titleStar.png",s=Do.getPfRewards(11),t?this.imgSuccInfo.skin=""!=n?n:"modules/pfDaliyGift/txtRemember5.png":this.imgAlreadyInfo.skin=""!=n?n:"modules/pfDaliyGift/txtHas5.png";break;case 10:this.imgTitle.skin="modules/pfDaliyGift/titleFestival.png",s=Do.getPfRewards(10),t?this.imgSuccInfo.skin=""!=n?n:"modules/pfDaliyGift/txtRemember5.png":this.imgAlreadyInfo.skin=""!=n?n:"modules/pfDaliyGift/txtHas5.png"}if(s){var o,a,l;t?(this.boxAlready.visible=!1,this.boxSucc.visible=!0):(this.boxAlready.visible=!0,this.boxSucc.visible=!1);for(var r=0;r<s.length;r++)a=s[r],o=ur.getRewardByTkv(a),(l=this.getOneItem()).dataSource=o,l.num=a.val,l.pos(290+110*r,130),this.addChild(l),this.items.push(l)}},i.getOneItem=function(){if(this.pool=this.pool||[],0<this.pool.length)return this.pool.shift();var t=new Ah(91,95);return t.mouseEnabled=!1,t},i.rePool=function(){if(this.items&&this.pool)for(;0<this.items.length;){var t=this.items.pop();t&&this.pool.push(t.removeSelf())}},I(0,i,"uiClass",function(){return"PfGiftPanel"}),e}(),yU=function(t){function e(){e.__super.call(this),this.on("click",this,this.onClick)}w(e,"modules.pfSdk.view.PfVipGiftPanel",kk);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btnClose:this.close()}},i.updateVipLv=function(){this.imgTitle.skin="modules/pfDaliyGift/vip"+Do.pfVip+".png"},i.update=function(t,e,i){void 0===i&&(i=0);var s=Do.getPfRewards(6);if(this.updateVipLv(),this.rePool(),s){for(var n,o,a,l=0;l<s.length;l++)o=s[l],n=ur.getRewardByTkv(o),(a=kt.getItemByClass("GoodsItem",Ah)).dataSource=n,a.mouseEnabled=!1,a.num=o.val,this.spGoods.addChild(a);rt.layoutHorizontal(this.spGoods,-50)}this.imgResult.skin=t?"modules/pfDaliyGift/succ.png":"modules/pfDaliyGift/fail.png";var r=ka.getWanbaErrUrl(i);""!=r?this.imgTip.skin=r:(t||this.close(),this.imgTip.skin="modules/pfDaliyGift/txtRemember5.png")},i.rePool=function(){for(var t;0<this.spGoods.numChildren;)(t=this.spGoods.removeChildAt(this.spGoods.numChildren-1))&&(t.mouseEnabled=!0,kt.recover("GoodsItem",t))},e}(),vU=function(t){function e(){this.ranks=null,e.__super.call(this),this.list.vScrollBar.autoHide=!0,this.on("click",this,this.onClick)}w(e,"modules.plays.beachBoss.view.BeachBossResultPanel",Vk);var i=e.prototype;return i.onClick=function(t){switch(t.target){case this.btn:this.close(),gr.ins().openEnterPanel(),gr.ins().toFamilyInfo()}},i.update=function(){var t,e,i,s="",n=0;if(0<pe.user.attr.family_id){this.txtMy.visible=!0;Bo.getBossHurtArr();var o=Bo.getMyHurt(),a=Bo.getMyRank();if(o&&(this.txtMy.innerHTML=Z.span("本次排名第"+a,"#ffffff")+Z.span("（伤害："+W.getShortenPowerStr(o.damage)+"）","#ffffff")),t=Bo.getBossReward(a)){s=Z.span("获得","#ffffff"),n=t.rewardList.length;for(var l=0;l<n;l++)i=t.rewardList[l],(e=ur.getItem(i.key))&&(s+=Z.span("【"+e.name+"】×"+i.val,U.getColorDark(e.color)),l<n-1&&(s+=Z.span(",")));this.txtReward.innerHTML=s}var r=Bo.getMyBeachNameInfo();r&&2<=r.length&&(this.txtInfo.innerHTML=Z.span("获得","#ffffff")+Z.span(r[0],r[1])+Z.span("使用权","#ffffff"))}else{if(this.txtMy.visible=!1,t=Bo.getBossRewardLast()){s=Z.span("获得","#ffffff"),n=t.rewardList.length;for(var h=0;h<n;h++)i=t.rewardList[h],(e=ur.getItem(i.key))&&(s+=Z.span("【"+e.name+"】×"+i.val,"#ffffff"),h<n-1&&(s+=Z.span(",")));this.txtReward.innerHTML=s}var u=Bo.getBeachNameInfo(4);u&&2<=u.length&&(this.txtInfo.innerHTML=Z.span("获得","#ffffff")+Z.span(u[0],u[1])+Z.span("使用权","#ffffff"))}this.updateRanks()},i.updateRanks=function(){this.ranks=this.ranks||[],this.list.removeChildren();var t=Bo.getBossHurtArr();if(t)for(var e,i,s,n=0;n<t.length;n++)e=t[n],this.ranks[n]=this.ranks[n]||new jt,i=this.ranks[n],this.list.addChild(i),i.pos(50,40*n),s=0==n?"#fdc06a":1==n?"#f299ff":2==n?"#7fd6fe":"#ffffff",i.color=s,i.fontSize=24,i.text="第"+(n+1)+"名"+k.getEmpty(2)+e.family_name+"（"+W.getShortenPowerStr(e.damage)+"）"},e}(),IU=function(t){function e(){e.__super.call(this),this.txtName.text=Bo.skillVO.name,this.txtDesc.text=Bo.skillVO.desc,this.height=this.txtDesc.y+this.txtDesc.textHeight+20}return w(e,"modules.plays.beachBoss.view.BeachBossSkillTipView",Bk),e}(),wU=function(t){function e(){this.spcTip=null,this._data=null,e.__super.call(this),this.spcTip=Aa.getIns(47e3,"SpequipPotentialSubItem"),this.spcTip.x=50,this.spcTip.y=80,this.addChild(this.spcTip),this.upgradeBtn.on("click",this,this.onUpgrade),this.on("display",this,this.onDisplay),this.on("undisplay",this,this.onUnDisplay),this.closeBtn.on("click",this,this.close)}w(e,"modules.role.view.SpequipPotentialTip",vA);var i=e.prototype;return i.onDisplay=function(){T.register("ROLE_UPDATE_REFINE",this,this.updateInfo)},i.onUnDisplay=function(){T.remove("ROLE_UPDATE_REFINE",this,this.updateInfo)},i.updateInfo=function(){if(this._data){var t=new aa;switch(this._data.type){case 12:t.type=12,t.step=oa.getSpEquipP(Tr.ins().spEquipActIndex,12).lv,this.data=t;break;case 13:t.type=13,t.step=oa.getSpEquipP(Tr.ins().spEquipActIndex,13).lv,this.data=t;break;case 14:t.type=14,t.step=Math.floor(Jo.getAllLv(Jo.curViewType,Jo.curChooseActor)/8),this.data=t;break;case 15:t.type=15,t.step=Math.floor(Jo.getAllLv(Jo.curViewType,Jo.curChooseActor)/8),this.data=t;break;case 16:t.type=16,t.step=Math.floor(Jo.getAllLv(Jo.curViewType,Jo.curChooseActor)/8),this.data=t;break;case 17:var e=Jo.getRefineInfo(Jo.curChooseActor);t.type=17,t.step=e.equip_active_lv,t.nowCaller=this._data.nowCaller,t.nowLvFun=this._data.nowLvFun,this.data=t}}},i.onUpgrade=function(){switch(this._data.type){case 12:case 13:Tr.ins().toSpecicalEquipAct(this._data.type);break;case 14:case 15:case 16:Cr.ins().toRoleRefiningActveUp();break;case 17:Cr.ins().toRoleEquipRefiningActiveUp()}},i.showSpecialView=function(t){this.closeBtn.visible=!1;var e=Jo.getRefiningInfoByCurActor();if(this._data&&(e||14!=this._data.type&&15!=this._data.type&&16!=this._data.type)){var i,s,n=0,o=0,a=0,l=0,r="";switch(this._data.type){case 14:for(h in r="强化",n=1001,o=Math.floor(Jo.getAllLevelByCurView()/8),s=e.linear_refining)if((i=s[h]).id==n){a=i.type;break}l=Jo.getNowStep(t.type,a);break;case 15:for(h in r="铭刻",n=1002,o=Math.floor(Jo.getAllLevelByCurView()/8),s=e.linear_refining)if((i=s[h]).id==n){a=i.type;break}l=Jo.getNowStep(t.type,a);break;case 16:var h;for(h in r="注灵",n=1003,o=Math.floor(Jo.getAllLevelByCurView()/8),s=e.linear_refining)if((i=s[h]).id==n){a=i.type;break}l=Jo.getNowStep(t.type,a);break;case 17:r="附魂",n=1004,a=e.equip_active_lv,l=Jo.getNowStep(t.type,a);break;case 12:r="龙魂";var u=oa.getSpEquipP(Tr.ins().spEquipActIndex,t.type);a=u.stage_lv,l=Jo.getNowStep(t.type,a),o=u.stage_lv;break;case 13:r="凤魂";var c=oa.getSpEquipP(Tr.ins().spEquipActIndex,t.type);a=c.stage_lv,l=Jo.getNowStep(t.type,a),o=c.stage_lv}this.txtTitle.text=r+"目标"+l+"阶",this.txtTitle.color="#fef4d9",this.txtTitle.fontSize=26,this.txtTitle.pos(this.width/2-this.txtTitle.width/2,32),this.titleBg.visible=!0;var d=sn.getPotentialVOByPos(t.type),p=null,m=null;d&&0<d.PotentialLvArr.length&&(l&&(p=d.PotentialLvArr[l-1]),m=l<d.PotentialLvArr.length?d.PotentialLvArr[l]:d.PotentialLvArr[d.PotentialLvArr.length-1]),17==this._data.type&&(o=this.getSoulNowLevel(m)),this.redPoint.visible=o>m.lv,l==d.PotentialLvArr.length?17==this._data.type?o==m.lv?(this.upgradeBtn.visible=this.redPoint.visible=!1,this.fullLvImg.visible=!0):(this.upgradeBtn.visible=!(o<=a),this.fullLvImg.visible=o<=a,this.redPoint.visible=o<=a):14==this._data.type||15==this._data.type||16==this._data.type?o>=m.lv?(this.upgradeBtn.visible=!(o<=Math.floor(a/8)),this.fullLvImg.visible=o<=Math.floor(a/8),this.redPoint.visible=!(o<=Math.floor(a/8)),p=o<=Math.floor(a/8)?m:p):(this.upgradeBtn.visible=!0,this.fullLvImg.visible=!1,this.redPoint.visible=!1):(this.upgradeBtn.visible=!(1e3<=o),this.fullLvImg.visible=1e3<=o):(this.upgradeBtn.visible=!0,this.fullLvImg.visible=!1),this.spcTip.visible=!0,this.spcTip.setData(p,m,t.type),this.height=this.height+this.spcTip.height+200}},i.getSoulNowLevel=function(t){var e=Jo.getRefineInfo(Jo.curChooseActor),i=0,s=0;if(e){var n;for(var o in e.equip_refining)n=e.equip_refining[o],t.lv<=n.val?i+=t.lv:i+=n.val;s=Math.floor(i/8)}return s},I(0,i,"data",null,function(t){this._data=t,this.height=85,this.width=500,this._data&&this.showSpecialView(t)}),e}(),bU=function(t){function e(){e.__super.call(this)}w(e,"modules.huntTreasure.legend.RoleLegendEquipExItem",t);var i=e.prototype;return I(0,i,"data",t.prototype._$get_data,function(t){this._data=t;var e=NaN,i=NaN,s=bo.getRankRolePartnerData(bo.curRoleID,zl.ins().getOtherLegViewHeadIndex()).ext.category;if(null!=this._data){this.gray=!1,e=t.id,i=t.val;var n=oa.getRedEquipVO(t.id,t.val);this.txtLv.text=0<this._putWhere?"":"战斗力："+n.power,this.txtName.text=11==t.id?"洪荒神"+ur.cateArr[s]+"（"+i+"阶）":"洪荒神"+ur.legendPosArr[e%10]+"（"+i+"阶）"}else this.gray=!0,e=this._putWhere,i=1,this.txtName.text="未激活",this.txtLv.text="";this.goodsImg.skin=11==e?"modules/goods/maxico/"+ur.pathArr[s]+"50.png":"modules/goods/maxico/"+ur.pathArr2[e%10]+"50.png"}),I(0,i,"uiClass",function(){return"RoleLegendEquipItem"}),e}(HD),SU=function(t){function n(){this._panelIcon=0,this._uGroup=NaN,this._actIDS=null,this._ignoreRP=!1,this._skinId=0,n.__super.call(this)}w(n,"modules.icon.view.ActIconItem",sN);var e=n.prototype;return e.updateData=function(t){if(this._panelIcon=t[0],this._uGroup=t[1],this.iconID=t[1]%1e4,this._skinId=t[3],3001==this.iconID){this._actIDS=t[2];for(var e=NaN,i=0;i<this._actIDS.length;i++){var s=We.getActDetailByActID(this._actIDS[i]);s instanceof modules.activity.vo.StandardRankVO&&(e=s.rankID)}this.iconID=this.getStandardActIconIdByRankID(e)}else 4014==this.iconID?(this.updateFortuneDayFloatTip(),this._ignoreRP=!0,this.img.skin="modules/act/310/4014.png"):3004==this.iconID?0<=this._skinId&&(this.img.skin="modules/act/"+this._panelIcon+"/3004_"+this._skinId+".png"):1001==this.iconID?13==this._skinId?this.img.skin="modules/act/"+this._panelIcon+"/1001_"+this._skinId+".png":this.img.skin="modules/act/"+this._panelIcon+"/1001.png":1808==this.iconID?(this._actIDS=t[2],this.img.skin="modules/act/310/4014.png"):1303==this.iconID&&(this.img.skin="modules/act/310/1303.png");this._data=We.getActVO(this.iconID)},e.getStandardActIconIdByRankID=function(t){var e=3001;t=Ko.transformUniqueIdToRankId(t);for(var i=0,s=n.RANK_ID_TO_ICON_ID_ARR.length;i<s;i++)if(n.RANK_ID_TO_ICON_ID_ARR[i].rankID==t){e=n.RANK_ID_TO_ICON_ID_ARR[i].iconID;break}return e},e.updateRP=function(){this.redPoint=ao.checkIconRedPoint(this._uGroup)},e.updateFlashEff=function(){0==ao.isExistIconFlash(this.iconID)?(ao.addIconFlash(this.iconID),this.flashEff.visible=!0,this.flashEff.loadAndPlay("ICON_FLASH_EFF_URL","default",0,!0)):ao.getIconFlashState(this.iconID)?(this.flashEff.visible=!0,this.flashEff.loadAndPlay("ICON_FLASH_EFF_URL","default",0,!0)):0==ao.getIconFlashState(this.iconID)&&(this.flashEff.visible=!1,this.flashEff.stop())},e.updateImgSkin=function(){3004!=this.iconID&&1001!=this.iconID&&1808!=this.iconID&&(1303==this.iconID?this.img.skin="modules/act/310/1303.png":this.img.skin="modules/act/"+this._panelIcon+"/"+this._data.realImgUrl+".png")},e.updateFortuneDayFloatTip=function(){ao.checkIconRedPoint(this._uGroup)?1==this.flashEff.visible?this.showFloatTip(999901,2):1==ai.luckyEvent.state&&0==ai.isOpenTheFortuneDayPanel?this.showFloatTip(999901,2):this.cleanFloatTip():this.cleanFloatTip()},I(0,e,"uiClass",function(){return"IconItem"}),I(0,e,"uGroup",function(){return this._uGroup}),I(0,e,"redPoint",null,function(t){this.imgRp.visible=t&&!this._ignoreRP,4014!=this._uGroup?this._uGroup%1e4==1802&&vi.isAllMask(1)?this.imgRp.visible=!1:this._uGroup%1e4==1801&&vi.IS_LIMIT_ALL_MASK?this.imgRp.visible=!1:this._uGroup%1e4!=3004||Ji.hasRp?(this._uGroup%1e4==3003&&je.hasRp,this._uGroup%1e4!=1808||(this.imgRp.visible=2!=fi.selectCardsState)):this.imgRp.visible=!1:this.updateFortuneDayFloatTip()}),_(n,["RANK_ID_TO_ICON_ID_ARR",function(){return this.RANK_ID_TO_ICON_ID_ARR=[{rankID:1001,iconID:3001},{rankID:1101,iconID:4041},{rankID:1006,iconID:4042},{rankID:2001,iconID:4043},{rankID:2003,iconID:4044},{rankID:1007,iconID:4045},{rankID:1201,iconID:4046},{rankID:1202,iconID:4047},{rankID:1009,iconID:4048},{rankID:1010,iconID:4049},{rankID:1102,iconID:4050}]}]),n}(),xU=function(t){function e(){e.__super.call(this)}w(e,"modules.icon.view.DiamondIconItem",sN);var i=e.prototype;return i.updateImgSkin=function(){this.img&&(this.img.skin="modules/icon/diamondIcon/"+this._data.realImgUrl+".png")},i.updateSize=function(){var t=ut.getRes(this.img.skin),e=t?t.width:106,i=t?t.height:93,s=(this.width-e)/2;this.img.x=0,this.img.y=0,this.flashEff.pos(s+e/2+8,0+i/2)},i.updateRP=function(){},I(0,i,"uiClass",function(){return"IconItem"}),e}(),CU=(function(t){function e(){e.__super.call(this)}w(e,"modules.icon.view.WelfareIconItem",sN);var i=e.prototype;i.updateImgSkin=function(){this.img&&(this.img.skin="modules/icon/panelIcon/"+this._data.realImgUrl+".png")},i.updateSize=function(){var t=ut.getRes(this.img.skin),e=t?t.width:106,i=t?t.height:93,s=(this.width-e)/2;this.img.x=0,this.img.y=0,this.flashEff.pos(s+e/2+8,0+i/2)},I(0,i,"uiClass",function(){return"IconItem"})}(),function(t){function e(){this.img=null,this.spMask=null,this._has=!1,e.__super.call(this),this.img=new et,this.img.skin="modules/pet/has.png",this.img.visible=!1,this.img.pos(-7,18),this.spMask=new Wt,this.spMask.graphics.drawRect(-2,-7,90,90,"#000000"),this.spMask.alpha=.5,this.spMask.pos(8,8)}w(e,"modules.pet.spsoul.view.SPSoulLoadItem",nB);var i=e.prototype;return I(0,i,"uiClass",function(){return"SPSoulGoodsItem"}),I(0,i,"has",function(){return this._has},function(t){this._has=t,this.img.visible=this.spMask.visible=t,t&&(this.addChild(this.spMask),this.addChild(this.img))}),e}()),PU=function(i){function t(){t.__super.call(this)}w(t,"modules.pet.spsoul.view.SPSoulPolyItem2",i);var e=t.prototype;return e.updateState=function(){if(i.prototype.updateState.call(this),this._pData){var t=Oo.getBeadColorByTypeID(this._pData.type_id),e=Ro.getBeadVOByType(this._pData.type_id);e&&(this.txtTip.text=e.name.substring(2),this.txtTip.color=U.getColorLight(t))}},I(0,e,"uiClass",function(){return"SPSoulPolyItem"}),I(0,e,"state",i.prototype._$get_state,function(t){switch(this._state=t,this._state){case 2:this.imgBg.visible=!1,this.imgStone.visible=!0;break;case 1:this.txtTip.text="待装备",this.txtTip.color="#e1c6bc",this.imgBg.skin="modules/pet/stoneBgAdd.png",this.imgBg.visible=!0,this.imgStone.visible=!1;break;case 3:this.imgBg.skin="modules/pet/stoneBgLock.png",this.imgBg.visible=!0,this.imgStone.visible=!1}this.updateRP()}),t}(aB),TU=function(t){function e(){this._controller=null,this._onlyKey=null,e.__super.call(this)}w(e,"modules.pet.view.OtherPetSkillItem",t);var i=e.prototype;return h.imps(i,{"com.ui.ILayeredControl":!0}),i.resetLayerController=function(t){this._controller&&this._controller.initItem(this,[[this.imgBg,this.imgSel],[this.imgSkill],[this.imgSuo,this.imgNotOpen,this.imgGray,this.imgRp],[this.txtLv,this.txtSub]],t)},i.removeSelf=function(){var t=laya.display.Node.prototype.removeSelf.call(this);return this._controller&&this._controller.removeItem(this),t},I(0,i,"uiClass",function(){return"PetSkillItem"}),I(0,i,"onlyKey",function(){return this._onlyKey},function(t){this._onlyKey=t}),I(0,i,"controller",null,function(t){this._controller!=t&&(this._controller=t)}),I(0,i,"x",t.prototype._$get_x,function(t){h.superSet(mB,this,"x",t),this._controller&&this._controller.updatePos(this)}),I(0,i,"y",t.prototype._$get_y,function(t){h.superSet(mB,this,"y",t),this._controller&&this._controller.updatePos(this)}),e}(mB),kU=function(t){function e(){e.__super.call(this),this.panel.vScrollBar.hide=!0}w(e,"modules.equip.View.OtherEquipTip",FF);var i=e.prototype;return I(0,i,"data",null,function(t){var e=0,i=0;if("p_goods"==(this._vo=t).className)this.baseInfo=ur.getItem(t.typeid),t.equip_info&&t.equip_info.extra_attrs&&(this.addArr=t.equip_info.extra_attrs),this._subTip&&this._subTip.parent&&this._subTip.removeSelf();else if("p_actor_equip"==t.className){this.baseInfo=ur.getItem(t.type_id),this.addArr=t.extra_attr,this.subTipArr=this.subTipArr||[];var s=t.pos,n=(pe.getPalByIndex(oa.curActorIndex),bo.getCurRefineData()),o=Jo.getEquipInfo(s,1,-1,n);if(o&&0<o.curLv){for(var a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("强化属性",a),++i}if((o=Jo.getEquipInfo(s,2,-1,n))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]="铭刻"+o.curLv+"级\n  "+W.getAttrStrByArr(a[l],"","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("铭刻属性",a),++i}if((o=Jo.getEquipInfo(s,3,-1,n))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("注灵属性",a),++i}var r=Jo.getRefineSoulStep(-1,s,n);if(0<r){this._subTip=this._subTip||new HA,this._subTip.parent||this.panel.addChild(this._subTip);for(var h=0;h<this._subTip.spFire.numChildren;h++)this._subTip.spFire.getChildAt(h).skin=h<r?"modules/refine/fire"+$o.getSoulStepSource(h+1)+".png":"";this._subTip.txtCon.text="附魂属性 +"+$o.getSoulLvVO(r).add/100+"%"}else this._subTip&&this._subTip.parent&&this._subTip.removeSelf();var u,c=t.purify_attr;if(c.sort(oo.ins().equipPurifyAttrSort),c&&0<c.length)for(var d in this._subTip2=this._subTip2||new WA,this._subTip2.parent||this.panel.addChild(this._subTip2),this._subTip2.height=0,this._subTip2.txtProp.text=this._subTip2.txtStar.text="",c)u=c[d],this._subTip2.txtProp.text+=oo.ins().getTransName(u.prop_code,u.prop_value)+"\n",this._subTip2.txtStar.text+="("+u.prop_star+"星)\n",this._subTip2.height+=this._subTip2.txtProp.height;else this._subTip2&&this._subTip2.parent&&this._subTip2.removeSelf()}this.height=330,this.panel.height=1;var p=0;if(this.baseInfo){this.imgGoods.skin=this.baseInfo.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.baseInfo.color+".png",this.txtName.color=U.COLORS_DARK[this.baseInfo.color],this.txtName.text=this.baseInfo.name,this.txtPos.text=ur.getEquipClassName(this.baseInfo.type),this.txtPos1.text=ur.getEquipTypeName(this.baseInfo.type);var m,f=this.baseInfo.level;100<f?(this.txtLevel.text="转 生：",this.txtLevel1.text=(f-100)/10+"转"):(this.txtLevel.text="等 级：",this.txtLevel1.text=f+"级"),this.txtVoca1.text=sn.getVOCAName(this.baseInfo.category);for(var _,g,y=(a=W.parseAttrToArr(this.baseInfo.attr)).length,v="",I=0;I<y;I++){var w;if(_=a[I],m="",this.addArr)for(w in this.addArr)if(g=this.addArr[w],49==_[0]||15==_[0]||16==_[0]){if(49==g.prop_code||15==g.prop_code||16==g.prop_code){m=" +"+g.prop_value;break}}else if(_[0]==g.prop_code){m=" +"+g.prop_value;break}v+=W.getAttrStrByArr(_,"","：",m+"\n"),this.height+=36,this.panel.height+=36}this.attrTxt.text=v,this.height+=36,this.panel.height+=36,p=this.baseInfo.basePow,p+=W.getAddExtraPower(this.addArr)}this.txtScore.text="评 分  "+Math.floor(p);var b,S,x,C=k.numToTexture(Math.floor(p+e));for(this.spPow.graphics.clear(),h=0;h<C.length;h++)b=C[h],this.spPow.graphics.drawTexture(b,b.width*h);if("p_actor_equip"==t.className)for(var P=0;P<this.subTipArr.length;P++)S=this.subTipArr[P],P<i?(S.x=0,S.y=this.height-310,this.panel.addChild(S),this.height+=S.height,this.panel.height+=S.height):S.removeSelf();else if(this.subTipArr)for(x in this.subTipArr)(S=this.subTipArr[x]).removeSelf();this._subTip&&this._subTip.parent&&(this._subTip.x=0,this._subTip.y=this.height-310,this.height+=this._subTip.height,this.panel.height+=this._subTip.height),this._subTip2&&this._subTip2.parent&&(this._subTip2.x=0,this._subTip2.y=this.height-310,this.height+=this._subTip2.height,this.panel.height+=this._subTip2.height),690<this.panel.height&&(this.panel.vScrollBar.mouseWheelEnable=!0,this.panel.vScrollBar.touchScrollEnable=!0,this.panel.height=690),this.panel.height<690&&(this.panel.vScrollBar.mouseWheelEnable=!1,this.panel.vScrollBar.touchScrollEnable=!1),1e3<this.height&&(this.height=1e3),this.panel.refresh()}),I(0,i,"uiClass",function(){return"EquipTip"}),e}(),AU=function(t){function e(){e.__super.call(this)}w(e,"modules.refine.view.RefineSoulBestTip",FF);var i=e.prototype;return I(0,i,"data",null,function(t){var e=0,i=0;if("p_goods"==(this._vo=t).className)this.baseInfo=ur.getItem(t.typeid),t.equip_info&&t.equip_info.extra_attrs&&(this.addArr=t.equip_info.extra_attrs);else if("p_actor_equip"==t.className){this.baseInfo=ur.getItem(t.type_id),this.addArr=t.extra_attr,this.subTipArr=this.subTipArr||[];var s=t.pos,n=pe.getPalByIndex(oa.curActorIndex),o=Jo.getEquipInfo(s,1,n.pal_id);if(o&&0<o.curLv){for(var a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("强化属性",a),++i}if((o=Jo.getEquipInfo(s,2,n.pal_id))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]="铭刻"+o.curLv+"级\n  "+W.getAttrStrByArr(a[l],"","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("铭刻属性",a),++i}if((o=Jo.getEquipInfo(s,3,n.pal_id))&&0<o.curLv){for(a=o.getAttrs(),l=0;l<a.length;l++)e+=W.getAttrPowerS(a[l][0],a[l][1]),a[l]=W.getAttrStrByArr(a[l],"  ","：","");this.subTipArr[i]=this.subTipArr[i]||new wh,this.subTipArr[i].update("注灵属性",a),++i}this._subTip=this._subTip||new HA,this._subTip.parent||this.addChild(this._subTip);for(var r=0;r<this._subTip.spFire.numChildren;r++)this._subTip.spFire.getChildAt(r).skin=r<13?"modules/refine/fire"+$o.getSoulStepSource(r+1)+".png":"";this._subTip.txtCon.text="附魂属性 +"+$o.getSoulLvVO(13).add/100+"%"}this.height=340;var h=0;if(this.baseInfo){this.imgGoods.skin=this.baseInfo.realMaxico,this.imgBg.skin="com/ui/goodsBg"+this.baseInfo.color+".png",this.txtName.color=U.COLORS_DARK[this.baseInfo.color],this.txtName.text=this.baseInfo.name,this.txtPos.text=ur.getEquipClassName(this.baseInfo.type),this.txtPos1.text=ur.getEquipTypeName(this.baseInfo.type);var u,c=this.baseInfo.level;100<c?(this.txtLevel.text="转 生：",this.txtLevel1.text=(c-100)/10+"转"):(this.txtLevel.text="等 级：",this.txtLevel1.text=c+"级"),this.txtVoca1.text=sn.getVOCAName(this.baseInfo.category);for(var d,p,m=(a=W.parseAttrToArr(this.baseInfo.attr)).length,f="",_=0;_<m;_++){var g;if(d=a[_],u="",this.addArr)for(g in this.addArr)if(p=this.addArr[g],49==d[0]||15==d[0]||16==d[0]){if(49==p.prop_code||15==p.prop_code||16==p.prop_code){u=" +"+p.prop_value;break}}else if(d[0]==p.prop_code){u=" +"+p.prop_value;break}f+=W.getAttrStrByArr(d,"","：",u+"\n"),this.height+=36}this.attrTxt.text=f,this.height+=36,h=this.baseInfo.basePow,h+=W.getAddExtraPower(this.addArr)}this.txtScore.text="评 分  "+Math.floor(h);var y,v,I,w=k.numToTexture(Math.floor(h+e));for(this.spPow.graphics.clear(),r=0;r<w.length;r++)y=w[r],this.spPow.graphics.drawTexture(y,y.width*r);if("p_actor_equip"==t.className)for(var b=0;b<this.subTipArr.length;b++)v=this.subTipArr[b],b<i?(v.x=0,v.y=this.height-30,this.addChild(v),this.height+=v.height):v.removeSelf();else if(this.subTipArr)for(I in this.subTipArr)(v=this.subTipArr[I]).removeSelf();this._subTip&&this._subTip.parent&&(this._subTip.x=0,this._subTip.y=this.height-30,this.height+=this._subTip.height)}),I(0,i,"uiClass",function(){return"EquipTip"}),e}();dx=function(t){function e(){this._img0=null,this._img1=null,this._img2=null,this._img3=null,this._selectImg=null,this.txtPower=null,e.__super.call(this)}return w(e,"ui.modules.commonCopy.loveCopy.LoveCopyFlowerSkillInteractiveViewUI",oe),e.prototype.createChildren=function(){laya.ui.Component.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView=null,e}();h.__init([Oe,JP,Uh,Gk,SD,VT,dM,QM])}(window,document,Laya),"function"==typeof define&&define.amd&&define("laya.core",["require","exports"],function(t,e){"use strict";for(var i in Object.defineProperty(e,"__esModule",{value:!0}),Laya){var s=Laya[i];s&&s.__isclass&&(e[i]=s)}});